<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>491</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    491
                    <a href="490.html">prev</a>
                    <a href="492.html">next</a>
                    <a href="491_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    CyanogenMod/android_packages_apps_Trebuchet_7118d9dd17f51d998440f257935d6670c927383f_src/com/android/launcher3/LauncherProvider.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;7118d9dd17f51d998440f257935d6670c927383f:src/com/android/launcher3/LauncherProvider.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;7118d9dd17f51d998440f257935d6670c927383f^1:src/com/android/launcher3/LauncherProvider.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;7118d9dd17f51d998440f257935d6670c927383f^2:src/com/android/launcher3/LauncherProvider.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;58dcef7b28ec0bbc8e097b2cd45a6c6542a4cdef:src/com/android/launcher3/LauncherProvider.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [b]], subset: [[b], [b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  19 import android.app.SearchManager;                                                                        </span>
<span class="504928717176532115" onmouseenter="enter('504928717176532115');" onmouseout="out('504928717176532115');" style="">  20 import android.appwidget.AppWidgetHost;                                                                  </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  21 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  22 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  23 import android.content.ComponentName;                                                                    </span>
<span class="550877806393279246" onmouseenter="enter('550877806393279246');" onmouseout="out('550877806393279246');" style="">  24 import android.content.ContentProvider;                                                                  </span>
<span class="3739800667450215943" onmouseenter="enter('3739800667450215943');" onmouseout="out('3739800667450215943');" style="">  25 import android.content.ContentProviderOperation;                                                         </span>
<span class="-6369732601490611729" onmouseenter="enter('-6369732601490611729');" onmouseout="out('-6369732601490611729');" style="">  26 import android.content.ContentProviderResult;                                                            </span>
<span class="6126857652515451632" onmouseenter="enter('6126857652515451632');" onmouseout="out('6126857652515451632');" style="">  27 import android.content.ContentResolver;                                                                  </span>
<span class="-9185307499822629" onmouseenter="enter('-9185307499822629');" onmouseout="out('-9185307499822629');" style="">  28 import android.content.ContentUris;                                                                      </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="">  29 import android.content.ContentValues;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  30 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  31 import android.content.Intent;                                                                           </span>
<span class="-4160670168441716907" onmouseenter="enter('-4160670168441716907');" onmouseout="out('-4160670168441716907');" style="">  32 import android.content.OperationApplicationException;                                                    </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  33 import android.content.SharedPreferences;                                                                </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="">  34 import android.content.pm.ActivityInfo;                                                                  </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  35 import android.content.pm.ApplicationInfo;                                                               </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  36 import android.content.pm.PackageManager;                                                                </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  37 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  38 import android.content.res.Resources;                                                                    </span>
<span class="7386012112211289620" onmouseenter="enter('7386012112211289620');" onmouseout="out('7386012112211289620');" style="">  39 import android.content.res.XmlResourceParser;                                                            </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  40 import android.database.Cursor;                                                                          </span>
<span class="5870833163231201789" onmouseenter="enter('5870833163231201789');" onmouseout="out('5870833163231201789');" style="">  41 import android.database.SQLException;                                                                    </span>
<span class="-4895155655276492102" onmouseenter="enter('-4895155655276492102');" onmouseout="out('-4895155655276492102');" style="">  42 import android.database.sqlite.SQLiteDatabase;                                                           </span>
<span class="6401548559697116088" onmouseenter="enter('6401548559697116088');" onmouseout="out('6401548559697116088');" style="">  43 import android.database.sqlite.SQLiteOpenHelper;                                                         </span>
<span class="-1253510085600408435" onmouseenter="enter('-1253510085600408435');" onmouseout="out('-1253510085600408435');" style="">  44 import android.database.sqlite.SQLiteQueryBuilder;                                                       </span>
<span class="-7509968378694652787" onmouseenter="enter('-7509968378694652787');" onmouseout="out('-7509968378694652787');" style="">  45 import android.database.sqlite.SQLiteStatement;                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  46 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  47 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  48 import android.net.Uri;                                                                                  </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  49 import android.os.Bundle;                                                                                </span>
<span class="-3605034024778696983" onmouseenter="enter('-3605034024778696983');" onmouseout="out('-3605034024778696983');" style="">  50 import android.provider.Settings;                                                                        </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  51 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  52 import android.util.Log;                                                                                 </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">  53 import android.util.SparseArray;                                                                         </span>
<span  style="">  54                                                                                                          </span>
<span class="4395110202233918405" onmouseenter="enter('4395110202233918405');" onmouseout="out('4395110202233918405');" style="">  55 import com.android.launcher3.AutoInstallsLayout.LayoutParserCallback;                                    </span>
<span class="6281159490246877388" onmouseenter="enter('6281159490246877388');" onmouseout="out('6281159490246877388');" style="">  56 import com.android.launcher3.LauncherSettings.Favorites;                                                 </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="">  57 import com.android.launcher3.compat.UserHandleCompat;                                                    </span>
<span class="-8849211230761127863" onmouseenter="enter('-8849211230761127863');" onmouseout="out('-8849211230761127863');" style="">  58 import com.android.launcher3.compat.UserManagerCompat;                                                   </span>
<span class="-7468653447981916815" onmouseenter="enter('-7468653447981916815');" onmouseout="out('-7468653447981916815');" style="">  59 import com.android.launcher3.config.ProviderConfig;                                                      </span>
<span  style="">  60                                                                                                          </span>
<span class="-5145222340437954675" onmouseenter="enter('-5145222340437954675');" onmouseout="out('-5145222340437954675');" style="">  61 import org.xmlpull.v1.XmlPullParser;                                                                     </span>
<span class="-3477173242969633951" onmouseenter="enter('-3477173242969633951');" onmouseout="out('-3477173242969633951');" style="">  62 import org.xmlpull.v1.XmlPullParserException;                                                            </span>
<span  style="">  63                                                                                                          </span>
<span class="-3926401431737521278" onmouseenter="enter('-3926401431737521278');" onmouseout="out('-3926401431737521278');" style="">  64 import java.io.File;                                                                                     </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  65 import java.io.IOException;                                                                              </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  66 import java.net.URISyntaxException;                                                                      </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  67 import java.util.ArrayList;                                                                              </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  68 import java.util.Collections;                                                                            </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  69 import java.util.HashSet;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  70 import java.util.List;                                                                                   </span>
<span  style="">  71                                                                                                          </span>
<span class="-5661310118425891821" onmouseenter="enter('-5661310118425891821');" onmouseout="out('-5661310118425891821');" style="">  72 public class LauncherProvider extends ContentProvider {                                                  </span>
<span class="-5301430442842506185" onmouseenter="enter('-5301430442842506185');" onmouseout="out('-5301430442842506185');" style="">  73     private static final String TAG = &quot;Launcher.LauncherProvider&quot;;                                       </span>
<span class="-8469384925954206736" onmouseenter="enter('-8469384925954206736');" onmouseout="out('-8469384925954206736');" style="">  74     private static final boolean LOGD = false;                                                           </span>
<span  style="">  75                                                                                                          </span>
<span class="8048508412932305881" onmouseenter="enter('8048508412932305881');" onmouseout="out('8048508412932305881');" style="">  76     private static final String DATABASE_NAME = &quot;launcher.db&quot;;                                           </span>
<span  style="">  77                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  78 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="7809747164420377858" onmouseenter="enter('7809747164420377858');" onmouseout="out('7809747164420377858');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  79     private static final int DATABASE_VERSION = 20;                                                      </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  80 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-6300698331456462746" onmouseenter="enter('-6300698331456462746');" onmouseout="out('-6300698331456462746');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  81     private static final int DATABASE_VERSION = 17;                                                      </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  82                                                                                                          </span>
<span class="-458478327704245810" onmouseenter="enter('-458478327704245810');" onmouseout="out('-458478327704245810');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  83     static final String OLD_AUTHORITY = &quot;com.android.launcher2.settings&quot;;                                </span>
<span class="-4376021050615906115" onmouseenter="enter('-4376021050615906115');" onmouseout="out('-4376021050615906115');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  84     static final String AUTHORITY = ProviderConfig.AUTHORITY;                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  85                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  86 =======                                                                                                  </span>
<span class="-8918268015379633620" onmouseenter="enter('-8918268015379633620');" onmouseout="out('-8918268015379633620');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  87     private static final int DATABASE_VERSION = 16;                                                      </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  88 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style="">  89                                                                                                          </span>
<span class="-458478327704245810" onmouseenter="enter('-458478327704245810');" onmouseout="out('-458478327704245810');" style="">  90     static final String OLD_AUTHORITY = &quot;com.android.launcher2.settings&quot;;                                </span>
<span class="-4376021050615906115" onmouseenter="enter('-4376021050615906115');" onmouseout="out('-4376021050615906115');" style="">  91     static final String AUTHORITY = ProviderConfig.AUTHORITY;                                            </span>
<span  style="">  92                                                                                                          </span>
<span class="-4487533157410420763" onmouseenter="enter('-4487533157410420763');" onmouseout="out('-4487533157410420763');" style="">  93     // Should we attempt to load anything from the com.android.launcher2 provider?                       </span>
<span class="3383367194631780364" onmouseenter="enter('3383367194631780364');" onmouseout="out('3383367194631780364');" style="">  94     static final boolean IMPORT_LAUNCHER2_DATABASE = false;                                              </span>
<span  style="">  95                                                                                                          </span>
<span class="-6626902943579202823" onmouseenter="enter('-6626902943579202823');" onmouseout="out('-6626902943579202823');" style="">  96     static final String TABLE_FAVORITES = &quot;favorites&quot;;                                                   </span>
<span class="-4121112267423691577" onmouseenter="enter('-4121112267423691577');" onmouseout="out('-4121112267423691577');" style="">  97     static final String TABLE_WORKSPACE_SCREENS = &quot;workspaceScreens&quot;;                                    </span>
<span class="5667619940348816611" onmouseenter="enter('5667619940348816611');" onmouseout="out('5667619940348816611');" style="">  98     static final String PARAMETER_NOTIFY = &quot;notify&quot;;                                                     </span>
<span class="-591783718254341348" onmouseenter="enter('-591783718254341348');" onmouseout="out('-591783718254341348');" style="">  99     static final String UPGRADED_FROM_OLD_DATABASE =                                                     </span>
<span class="6670864303817368253" onmouseenter="enter('6670864303817368253');" onmouseout="out('6670864303817368253');" style=""> 100             &quot;UPGRADED_FROM_OLD_DATABASE&quot;;                                                                </span>
<span class="-2242593752226183959" onmouseenter="enter('-2242593752226183959');" onmouseout="out('-2242593752226183959');" style=""> 101     static final String EMPTY_DATABASE_CREATED =                                                         </span>
<span class="-3248472412834995750" onmouseenter="enter('-3248472412834995750');" onmouseout="out('-3248472412834995750');" style=""> 102             &quot;EMPTY_DATABASE_CREATED&quot;;                                                                    </span>
<span  style=""> 103                                                                                                          </span>
<span class="-5068203882425881097" onmouseenter="enter('-5068203882425881097');" onmouseout="out('-5068203882425881097');" style=""> 104     private static final String ACTION_APPWIDGET_DEFAULT_WORKSPACE_CONFIGURE =                           </span>
<span class="-8289377429995644773" onmouseenter="enter('-8289377429995644773');" onmouseout="out('-8289377429995644773');" style=""> 105             &quot;com.android.launcher.action.APPWIDGET_DEFAULT_WORKSPACE_CONFIGURE&quot;;                         </span>
<span  style=""> 106                                                                                                          </span>
<span class="-254878042648191521" onmouseenter="enter('-254878042648191521');" onmouseout="out('-254878042648191521');" style=""> 107     private static final String URI_PARAM_IS_EXTERNAL_ADD = &quot;isExternalAdd&quot;;                             </span>
<span  style=""> 108                                                                                                          </span>
<span class="-4555445478569710276" onmouseenter="enter('-4555445478569710276');" onmouseout="out('-4555445478569710276');" style=""> 109     private LauncherProviderChangeListener mListener;                                                    </span>
<span  style=""> 110                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 111     /**                                                                                                  </span>
<span class="-3211764681636990688" onmouseenter="enter('-3211764681636990688');" onmouseout="out('-3211764681636990688');" style=""> 112      * {@link Uri} triggered at any registered {@link android.database.ContentObserver} when             </span>
<span class="-4919300270466303234" onmouseenter="enter('-4919300270466303234');" onmouseout="out('-4919300270466303234');" style=""> 113      * {@link AppWidgetHost#deleteHost()} is called during database creation.                            </span>
<span class="-788325382909228329" onmouseenter="enter('-788325382909228329');" onmouseout="out('-788325382909228329');" style=""> 114      * Use this to recall {@link AppWidgetHost#startListening()} if needed.                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 115      */                                                                                                  </span>
<span class="5515339483970246409" onmouseenter="enter('5515339483970246409');" onmouseout="out('5515339483970246409');" style=""> 116     static final Uri CONTENT_APPWIDGET_RESET_URI =                                                       </span>
<span class="3194273355649806706" onmouseenter="enter('3194273355649806706');" onmouseout="out('3194273355649806706');" style=""> 117             Uri.parse(&quot;content://&quot; + AUTHORITY + &quot;/appWidgetReset&quot;);                                     </span>
<span  style=""> 118                                                                                                          </span>
<span class="-35355205086145165" onmouseenter="enter('-35355205086145165');" onmouseout="out('-35355205086145165');" style=""> 119     private DatabaseHelper mOpenHelper;                                                                  </span>
<span class="4833460347687640836" onmouseenter="enter('4833460347687640836');" onmouseout="out('4833460347687640836');" style=""> 120     private static boolean sJustLoadedFromOldDb;                                                         </span>
<span  style=""> 121                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 122     @Override                                                                                            </span>
<span class="5054121129922253104" onmouseenter="enter('5054121129922253104');" onmouseout="out('5054121129922253104');" style=""> 123     public boolean onCreate() {                                                                          </span>
<span class="4475688138331124962" onmouseenter="enter('4475688138331124962');" onmouseout="out('4475688138331124962');" style=""> 124         final Context context = getContext();                                                            </span>
<span class="-7690576094790651842" onmouseenter="enter('-7690576094790651842');" onmouseout="out('-7690576094790651842');" style=""> 125         mOpenHelper = new DatabaseHelper(context);                                                       </span>
<span class="-7305781479923559628" onmouseenter="enter('-7305781479923559628');" onmouseout="out('-7305781479923559628');" style=""> 126         LauncherAppState.setLauncherProvider(this);                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 127         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128     }                                                                                                    </span>
<span  style=""> 129                                                                                                          </span>
<span class="487377169126514768" onmouseenter="enter('487377169126514768');" onmouseout="out('487377169126514768');" style=""> 130     public boolean wasNewDbCreated() {                                                                   </span>
<span class="-2120364841155545874" onmouseenter="enter('-2120364841155545874');" onmouseout="out('-2120364841155545874');" style=""> 131         return mOpenHelper.wasNewDbCreated();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 132     }                                                                                                    </span>
<span  style=""> 133                                                                                                          </span>
<span class="9170464131639972057" onmouseenter="enter('9170464131639972057');" onmouseout="out('9170464131639972057');" style=""> 134     public void setLauncherProviderChangeListener(LauncherProviderChangeListener listener) {             </span>
<span class="9132236250678632099" onmouseenter="enter('9132236250678632099');" onmouseout="out('9132236250678632099');" style=""> 135         mListener = listener;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136     }                                                                                                    </span>
<span  style=""> 137                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 138     @Override                                                                                            </span>
<span class="-1263590755434456926" onmouseenter="enter('-1263590755434456926');" onmouseout="out('-1263590755434456926');" style=""> 139     public String getType(Uri uri) {                                                                     </span>
<span class="336598653403461328" onmouseenter="enter('336598653403461328');" onmouseout="out('336598653403461328');" style=""> 140         SqlArguments args = new SqlArguments(uri, null, null);                                           </span>
<span class="-3811208733585118846" onmouseenter="enter('-3811208733585118846');" onmouseout="out('-3811208733585118846');" style=""> 141         if (TextUtils.isEmpty(args.where)) {                                                             </span>
<span class="4564755247099008741" onmouseenter="enter('4564755247099008741');" onmouseout="out('4564755247099008741');" style=""> 142             return &quot;vnd.android.cursor.dir/&quot; + args.table;                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 143         } else {                                                                                         </span>
<span class="9039528378345344991" onmouseenter="enter('9039528378345344991');" onmouseout="out('9039528378345344991');" style=""> 144             return &quot;vnd.android.cursor.item/&quot; + args.table;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146     }                                                                                                    </span>
<span  style=""> 147                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 148     @Override                                                                                            </span>
<span class="2688381462100157580" onmouseenter="enter('2688381462100157580');" onmouseout="out('2688381462100157580');" style=""> 149     public Cursor query(Uri uri, String[] projection, String selection,                                  </span>
<span class="-8080601171652713678" onmouseenter="enter('-8080601171652713678');" onmouseout="out('-8080601171652713678');" style=""> 150             String[] selectionArgs, String sortOrder) {                                                  </span>
<span  style=""> 151                                                                                                          </span>
<span class="-3782003319541019236" onmouseenter="enter('-3782003319541019236');" onmouseout="out('-3782003319541019236');" style=""> 152         SqlArguments args = new SqlArguments(uri, selection, selectionArgs);                             </span>
<span class="-631518951729113636" onmouseenter="enter('-631518951729113636');" onmouseout="out('-631518951729113636');" style=""> 153         SQLiteQueryBuilder qb = new SQLiteQueryBuilder();                                                </span>
<span class="2611293065726660593" onmouseenter="enter('2611293065726660593');" onmouseout="out('2611293065726660593');" style=""> 154         qb.setTables(args.table);                                                                        </span>
<span  style=""> 155                                                                                                          </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 156         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="3134453170380441664" onmouseenter="enter('3134453170380441664');" onmouseout="out('3134453170380441664');" style=""> 157         Cursor result = qb.query(db, projection, args.where, args.args, null, null, sortOrder);          </span>
<span class="-7763164457135943875" onmouseenter="enter('-7763164457135943875');" onmouseout="out('-7763164457135943875');" style=""> 158         result.setNotificationUri(getContext().getContentResolver(), uri);                               </span>
<span  style=""> 159                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 160         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161     }                                                                                                    </span>
<span  style=""> 162                                                                                                          </span>
<span class="9207797122534392164" onmouseenter="enter('9207797122534392164');" onmouseout="out('9207797122534392164');" style=""> 163     private static long dbInsertAndCheck(DatabaseHelper helper,                                          </span>
<span class="-7649003652568167377" onmouseenter="enter('-7649003652568167377');" onmouseout="out('-7649003652568167377');" style=""> 164             SQLiteDatabase db, String table, String nullColumnHack, ContentValues values) {              </span>
<span class="6588288335812254858" onmouseenter="enter('6588288335812254858');" onmouseout="out('6588288335812254858');" style=""> 165         if (values == null) {                                                                            </span>
<span class="7184965589450928593" onmouseenter="enter('7184965589450928593');" onmouseout="out('7184965589450928593');" style=""> 166             throw new RuntimeException(&quot;Error: attempting to insert null values&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167         }                                                                                                </span>
<span class="7050899094957739080" onmouseenter="enter('7050899094957739080');" onmouseout="out('7050899094957739080');" style=""> 168         if (!values.containsKey(LauncherSettings.ChangeLogColumns._ID)) {                                </span>
<span class="492623150120761321" onmouseenter="enter('492623150120761321');" onmouseout="out('492623150120761321');" style=""> 169             throw new RuntimeException(&quot;Error: attempting to add item without specifying an id&quot;);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170         }                                                                                                </span>
<span class="-5706715493188407465" onmouseenter="enter('-5706715493188407465');" onmouseout="out('-5706715493188407465');" style=""> 171         helper.checkId(table, values);                                                                   </span>
<span class="1074556166740873719" onmouseenter="enter('1074556166740873719');" onmouseout="out('1074556166740873719');" style=""> 172         return db.insert(table, nullColumnHack, values);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173     }                                                                                                    </span>
<span  style=""> 174                                                                                                          </span>
<span class="863775672802506838" onmouseenter="enter('863775672802506838');" onmouseout="out('863775672802506838');" style=""> 175     private static void deleteId(SQLiteDatabase db, long id) {                                           </span>
<span class="-4192328687501718427" onmouseenter="enter('-4192328687501718427');" onmouseout="out('-4192328687501718427');" style=""> 176         Uri uri = LauncherSettings.Favorites.getContentUri(id, false);                                   </span>
<span class="336598653403461328" onmouseenter="enter('336598653403461328');" onmouseout="out('336598653403461328');" style=""> 177         SqlArguments args = new SqlArguments(uri, null, null);                                           </span>
<span class="9003145226006787004" onmouseenter="enter('9003145226006787004');" onmouseout="out('9003145226006787004');" style=""> 178         db.delete(args.table, args.where, args.args);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179     }                                                                                                    </span>
<span  style=""> 180                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 181     @Override                                                                                            </span>
<span class="-734135164912880773" onmouseenter="enter('-734135164912880773');" onmouseout="out('-734135164912880773');" style=""> 182     public Uri insert(Uri uri, ContentValues initialValues) {                                            </span>
<span class="8811129738693748448" onmouseenter="enter('8811129738693748448');" onmouseout="out('8811129738693748448');" style=""> 183         SqlArguments args = new SqlArguments(uri);                                                       </span>
<span  style=""> 184                                                                                                          </span>
<span class="-8942992855752528468" onmouseenter="enter('-8942992855752528468');" onmouseout="out('-8942992855752528468');" style=""> 185         // In very limited cases, we support system|signature permission apps to add to the db           </span>
<span class="8337919216215113797" onmouseenter="enter('8337919216215113797');" onmouseout="out('8337919216215113797');" style=""> 186         String externalAdd = uri.getQueryParameter(URI_PARAM_IS_EXTERNAL_ADD);                           </span>
<span class="-2295815198673808272" onmouseenter="enter('-2295815198673808272');" onmouseout="out('-2295815198673808272');" style=""> 187         if (externalAdd != null &amp;&amp; &quot;true&quot;.equals(externalAdd)) {                                         </span>
<span class="255159610270408066" onmouseenter="enter('255159610270408066');" onmouseout="out('255159610270408066');" style=""> 188             if (!mOpenHelper.initializeExternalAdd(initialValues)) {                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 189                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191         }                                                                                                </span>
<span  style=""> 192                                                                                                          </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 193         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="-6358079444454153819" onmouseenter="enter('-6358079444454153819');" onmouseout="out('-6358079444454153819');" style=""> 194         addModifiedTime(initialValues);                                                                  </span>
<span class="5419112362953263362" onmouseenter="enter('5419112362953263362');" onmouseout="out('5419112362953263362');" style=""> 195         final long rowId = dbInsertAndCheck(mOpenHelper, db, args.table, null, initialValues);           </span>
<span class="8445680939324035407" onmouseenter="enter('8445680939324035407');" onmouseout="out('8445680939324035407');" style=""> 196         if (rowId &lt;= 0) return null;                                                                     </span>
<span  style=""> 197                                                                                                          </span>
<span class="8735878877349428813" onmouseenter="enter('8735878877349428813');" onmouseout="out('8735878877349428813');" style=""> 198         uri = ContentUris.withAppendedId(uri, rowId);                                                    </span>
<span class="-4021691463985906436" onmouseenter="enter('-4021691463985906436');" onmouseout="out('-4021691463985906436');" style=""> 199         sendNotify(uri);                                                                                 </span>
<span  style=""> 200                                                                                                          </span>
<span class="8673785246827833247" onmouseenter="enter('8673785246827833247');" onmouseout="out('8673785246827833247');" style=""> 201         return uri;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202     }                                                                                                    </span>
<span  style=""> 203                                                                                                          </span>
<span  style=""> 204                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 205     @Override                                                                                            </span>
<span class="-327877481205905086" onmouseenter="enter('-327877481205905086');" onmouseout="out('-327877481205905086');" style=""> 206     public int bulkInsert(Uri uri, ContentValues[] values) {                                             </span>
<span class="8811129738693748448" onmouseenter="enter('8811129738693748448');" onmouseout="out('8811129738693748448');" style=""> 207         SqlArguments args = new SqlArguments(uri);                                                       </span>
<span  style=""> 208                                                                                                          </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 209         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 210         db.beginTransaction();                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 211         try {                                                                                            </span>
<span class="7727596149598132072" onmouseenter="enter('7727596149598132072');" onmouseout="out('7727596149598132072');" style=""> 212             int numValues = values.length;                                                               </span>
<span class="805790054769028067" onmouseenter="enter('805790054769028067');" onmouseout="out('805790054769028067');" style=""> 213             for (int i = 0; i &lt; numValues; i++) {                                                        </span>
<span class="2678636525018066730" onmouseenter="enter('2678636525018066730');" onmouseout="out('2678636525018066730');" style=""> 214                 addModifiedTime(values[i]);                                                              </span>
<span class="-5505203781899797586" onmouseenter="enter('-5505203781899797586');" onmouseout="out('-5505203781899797586');" style=""> 215                 if (dbInsertAndCheck(mOpenHelper, db, args.table, null, values[i]) &lt; 0) {                </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 216                     return 0;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218             }                                                                                            </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 219             db.setTransactionSuccessful();                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 220         } finally {                                                                                      </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 221             db.endTransaction();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222         }                                                                                                </span>
<span  style=""> 223                                                                                                          </span>
<span class="-4021691463985906436" onmouseenter="enter('-4021691463985906436');" onmouseout="out('-4021691463985906436');" style=""> 224         sendNotify(uri);                                                                                 </span>
<span class="6793841392205084718" onmouseenter="enter('6793841392205084718');" onmouseout="out('6793841392205084718');" style=""> 225         return values.length;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226     }                                                                                                    </span>
<span  style=""> 227                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 228     @Override                                                                                            </span>
<span class="5983754597853237276" onmouseenter="enter('5983754597853237276');" onmouseout="out('5983754597853237276');" style=""> 229     public ContentProviderResult[] applyBatch(ArrayList&lt;ContentProviderOperation&gt; operations)            </span>
<span class="-5628895276830175510" onmouseenter="enter('-5628895276830175510');" onmouseout="out('-5628895276830175510');" style=""> 230             throws OperationApplicationException {                                                       </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 231         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 232         db.beginTransaction();                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 233         try {                                                                                            </span>
<span class="3840622082470564062" onmouseenter="enter('3840622082470564062');" onmouseout="out('3840622082470564062');" style=""> 234             ContentProviderResult[] result =  super.applyBatch(operations);                              </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 235             db.setTransactionSuccessful();                                                               </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 236             return result;                                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 237         } finally {                                                                                      </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 238             db.endTransaction();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 239         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240     }                                                                                                    </span>
<span  style=""> 241                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 242     @Override                                                                                            </span>
<span class="-6238796754049684603" onmouseenter="enter('-6238796754049684603');" onmouseout="out('-6238796754049684603');" style=""> 243     public int delete(Uri uri, String selection, String[] selectionArgs) {                               </span>
<span class="-3782003319541019236" onmouseenter="enter('-3782003319541019236');" onmouseout="out('-3782003319541019236');" style=""> 244         SqlArguments args = new SqlArguments(uri, selection, selectionArgs);                             </span>
<span  style=""> 245                                                                                                          </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 246         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="-848417512188045481" onmouseenter="enter('-848417512188045481');" onmouseout="out('-848417512188045481');" style=""> 247         int count = db.delete(args.table, args.where, args.args);                                        </span>
<span class="3046456781272759412" onmouseenter="enter('3046456781272759412');" onmouseout="out('3046456781272759412');" style=""> 248         if (count &gt; 0) sendNotify(uri);                                                                  </span>
<span  style=""> 249                                                                                                          </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style=""> 250         return count;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251     }                                                                                                    </span>
<span  style=""> 252                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 253     @Override                                                                                            </span>
<span class="-6200308159398621930" onmouseenter="enter('-6200308159398621930');" onmouseout="out('-6200308159398621930');" style=""> 254     public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) {         </span>
<span class="-3782003319541019236" onmouseenter="enter('-3782003319541019236');" onmouseout="out('-3782003319541019236');" style=""> 255         SqlArguments args = new SqlArguments(uri, selection, selectionArgs);                             </span>
<span  style=""> 256                                                                                                          </span>
<span class="5593303527651076681" onmouseenter="enter('5593303527651076681');" onmouseout="out('5593303527651076681');" style=""> 257         addModifiedTime(values);                                                                         </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 258         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="6692131291033480751" onmouseenter="enter('6692131291033480751');" onmouseout="out('6692131291033480751');" style=""> 259         int count = db.update(args.table, values, args.where, args.args);                                </span>
<span class="3046456781272759412" onmouseenter="enter('3046456781272759412');" onmouseout="out('3046456781272759412');" style=""> 260         if (count &gt; 0) sendNotify(uri);                                                                  </span>
<span  style=""> 261                                                                                                          </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style=""> 262         return count;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263     }                                                                                                    </span>
<span  style=""> 264                                                                                                          </span>
<span class="-6137155183451194640" onmouseenter="enter('-6137155183451194640');" onmouseout="out('-6137155183451194640');" style=""> 265     private void sendNotify(Uri uri) {                                                                   </span>
<span class="8087997420167282782" onmouseenter="enter('8087997420167282782');" onmouseout="out('8087997420167282782');" style=""> 266         String notify = uri.getQueryParameter(PARAMETER_NOTIFY);                                         </span>
<span class="-1882364541416460726" onmouseenter="enter('-1882364541416460726');" onmouseout="out('-1882364541416460726');" style=""> 267         if (notify == null || &quot;true&quot;.equals(notify)) {                                                   </span>
<span class="-1009902495160891118" onmouseenter="enter('-1009902495160891118');" onmouseout="out('-1009902495160891118');" style=""> 268             getContext().getContentResolver().notifyChange(uri, null);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269         }                                                                                                </span>
<span  style=""> 270                                                                                                          </span>
<span class="-88474152060363663" onmouseenter="enter('-88474152060363663');" onmouseout="out('-88474152060363663');" style=""> 271         // always notify the backup agent                                                                </span>
<span class="-4136841506633225478" onmouseenter="enter('-4136841506633225478');" onmouseout="out('-4136841506633225478');" style=""> 272         LauncherBackupAgentHelper.dataChanged(getContext());                                             </span>
<span class="3660947493902737932" onmouseenter="enter('3660947493902737932');" onmouseout="out('3660947493902737932');" style=""> 273         if (mListener != null) {                                                                         </span>
<span class="7178241373784368891" onmouseenter="enter('7178241373784368891');" onmouseout="out('7178241373784368891');" style=""> 274             mListener.onLauncherProviderChange();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276     }                                                                                                    </span>
<span  style=""> 277                                                                                                          </span>
<span class="-1775729469739138676" onmouseenter="enter('-1775729469739138676');" onmouseout="out('-1775729469739138676');" style=""> 278     private void addModifiedTime(ContentValues values) {                                                 </span>
<span class="7778574075272931857" onmouseenter="enter('7778574075272931857');" onmouseout="out('7778574075272931857');" style=""> 279         values.put(LauncherSettings.ChangeLogColumns.MODIFIED, System.currentTimeMillis());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280     }                                                                                                    </span>
<span  style=""> 281                                                                                                          </span>
<span class="2178013549114956338" onmouseenter="enter('2178013549114956338');" onmouseout="out('2178013549114956338');" style=""> 282     public long generateNewItemId() {                                                                    </span>
<span class="4208143222012601660" onmouseenter="enter('4208143222012601660');" onmouseout="out('4208143222012601660');" style=""> 283         return mOpenHelper.generateNewItemId();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284     }                                                                                                    </span>
<span  style=""> 285                                                                                                          </span>
<span class="8365827129597185054" onmouseenter="enter('8365827129597185054');" onmouseout="out('8365827129597185054');" style=""> 286     public void updateMaxItemId(long id) {                                                               </span>
<span class="5887752252226734670" onmouseenter="enter('5887752252226734670');" onmouseout="out('5887752252226734670');" style=""> 287         mOpenHelper.updateMaxItemId(id);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288     }                                                                                                    </span>
<span  style=""> 289                                                                                                          </span>
<span class="3794345207933084858" onmouseenter="enter('3794345207933084858');" onmouseout="out('3794345207933084858');" style=""> 290     public long generateNewScreenId() {                                                                  </span>
<span class="1793864293735992917" onmouseenter="enter('1793864293735992917');" onmouseout="out('1793864293735992917');" style=""> 291         return mOpenHelper.generateNewScreenId();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292     }                                                                                                    </span>
<span  style=""> 293                                                                                                          </span>
<span class="6930658551566435877" onmouseenter="enter('6930658551566435877');" onmouseout="out('6930658551566435877');" style=""> 294     // This is only required one time while loading the workspace during the                             </span>
<span class="-2970396193784752555" onmouseenter="enter('-2970396193784752555');" onmouseout="out('-2970396193784752555');" style=""> 295     // upgrade path, and should never be called from anywhere else.                                      </span>
<span class="-7531165898061832726" onmouseenter="enter('-7531165898061832726');" onmouseout="out('-7531165898061832726');" style=""> 296     public void updateMaxScreenId(long maxScreenId) {                                                    </span>
<span class="1650077191565319140" onmouseenter="enter('1650077191565319140');" onmouseout="out('1650077191565319140');" style=""> 297         mOpenHelper.updateMaxScreenId(maxScreenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298     }                                                                                                    </span>
<span  style=""> 299                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 300     /**                                                                                                  </span>
<span class="3357730711931570136" onmouseenter="enter('3357730711931570136');" onmouseout="out('3357730711931570136');" style=""> 301      * @param Should we load the old db for upgrade? first run only.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 302      */                                                                                                  </span>
<span class="830252285283253659" onmouseenter="enter('830252285283253659');" onmouseout="out('830252285283253659');" style=""> 303     synchronized public boolean justLoadedOldDb() {                                                      </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 304         String spKey = LauncherAppState.getSharedPreferencesKey();                                       </span>
<span class="-1270995004093477684" onmouseenter="enter('-1270995004093477684');" onmouseout="out('-1270995004093477684');" style=""> 305         SharedPreferences sp = getContext().getSharedPreferences(spKey, Context.MODE_PRIVATE);           </span>
<span  style=""> 306                                                                                                          </span>
<span class="-2988224019905233772" onmouseenter="enter('-2988224019905233772');" onmouseout="out('-2988224019905233772');" style=""> 307         boolean loadedOldDb = false || sJustLoadedFromOldDb;                                             </span>
<span  style=""> 308                                                                                                          </span>
<span class="732070560985546855" onmouseenter="enter('732070560985546855');" onmouseout="out('732070560985546855');" style=""> 309         sJustLoadedFromOldDb = false;                                                                    </span>
<span class="2535788223071749602" onmouseenter="enter('2535788223071749602');" onmouseout="out('2535788223071749602');" style=""> 310         if (sp.getBoolean(UPGRADED_FROM_OLD_DATABASE, false)) {                                          </span>
<span  style=""> 311                                                                                                          </span>
<span class="2898240485600869061" onmouseenter="enter('2898240485600869061');" onmouseout="out('2898240485600869061');" style=""> 312             SharedPreferences.Editor editor = sp.edit();                                                 </span>
<span class="-3507238978930621467" onmouseenter="enter('-3507238978930621467');" onmouseout="out('-3507238978930621467');" style=""> 313             editor.remove(UPGRADED_FROM_OLD_DATABASE);                                                   </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 314             editor.commit();                                                                             </span>
<span class="424898969256754833" onmouseenter="enter('424898969256754833');" onmouseout="out('424898969256754833');" style=""> 315             loadedOldDb = true;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316         }                                                                                                </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style=""> 317         return loadedOldDb;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318     }                                                                                                    </span>
<span  style=""> 319                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 320     /**                                                                                                  </span>
<span class="-3404890512310195543" onmouseenter="enter('-3404890512310195543');" onmouseout="out('-3404890512310195543');" style=""> 321      * Clears all the data for a fresh start.                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 322      */                                                                                                  </span>
<span class="-8979529877881539007" onmouseenter="enter('-8979529877881539007');" onmouseout="out('-8979529877881539007');" style=""> 323     synchronized public void createEmptyDB() {                                                           </span>
<span class="-257404101089763384" onmouseenter="enter('-257404101089763384');" onmouseout="out('-257404101089763384');" style=""> 324         mOpenHelper.createEmptyDB(mOpenHelper.getWritableDatabase());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325     }                                                                                                    </span>
<span  style=""> 326                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 327     /**                                                                                                  </span>
<span class="277164340629859803" onmouseenter="enter('277164340629859803');" onmouseout="out('277164340629859803');" style=""> 328      * Loads the default workspace based on the following priority scheme:                               </span>
<span class="6191061916552549057" onmouseenter="enter('6191061916552549057');" onmouseout="out('6191061916552549057');" style=""> 329      *   1) From a package provided by play store                                                        </span>
<span class="-1458935321569433020" onmouseenter="enter('-1458935321569433020');" onmouseout="out('-1458935321569433020');" style=""> 330      *   2) From a partner configuration APK, already in the system image                                </span>
<span class="-8497452292409790071" onmouseenter="enter('-8497452292409790071');" onmouseout="out('-8497452292409790071');" style=""> 331      *   3) The default configuration for the particular device                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 332      */                                                                                                  </span>
<span class="-4109341010907676070" onmouseenter="enter('-4109341010907676070');" onmouseout="out('-4109341010907676070');" style=""> 333     synchronized public void loadDefaultFavoritesIfNecessary() {                                         </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 334         String spKey = LauncherAppState.getSharedPreferencesKey();                                       </span>
<span class="-1270995004093477684" onmouseenter="enter('-1270995004093477684');" onmouseout="out('-1270995004093477684');" style=""> 335         SharedPreferences sp = getContext().getSharedPreferences(spKey, Context.MODE_PRIVATE);           </span>
<span  style=""> 336                                                                                                          </span>
<span class="-1164862040405657048" onmouseenter="enter('-1164862040405657048');" onmouseout="out('-1164862040405657048');" style=""> 337         if (sp.getBoolean(EMPTY_DATABASE_CREATED, false)) {                                              </span>
<span class="-3246698064640464314" onmouseenter="enter('-3246698064640464314');" onmouseout="out('-3246698064640464314');" style=""> 338             Log.d(TAG, &quot;loading default workspace&quot;);                                                     </span>
<span  style=""> 339                                                                                                          </span>
<span class="2862729422956304785" onmouseenter="enter('2862729422956304785');" onmouseout="out('2862729422956304785');" style=""> 340             WorkspaceLoader loader = AutoInstallsLayout.get(getContext(),                                </span>
<span class="4267100487943846224" onmouseenter="enter('4267100487943846224');" onmouseout="out('4267100487943846224');" style=""> 341                     mOpenHelper.mAppWidgetHost, mOpenHelper);                                            </span>
<span  style=""> 342                                                                                                          </span>
<span class="-1290919382195344098" onmouseenter="enter('-1290919382195344098');" onmouseout="out('-1290919382195344098');" style=""> 343             if (loader == null) {                                                                        </span>
<span class="-7748100060285216458" onmouseenter="enter('-7748100060285216458');" onmouseout="out('-7748100060285216458');" style=""> 344                 final Partner partner = Partner.get(getContext().getPackageManager());                   </span>
<span class="-604675337449948556" onmouseenter="enter('-604675337449948556');" onmouseout="out('-604675337449948556');" style=""> 345                 if (partner != null &amp;&amp; partner.hasDefaultLayout()) {                                     </span>
<span class="882794219866203698" onmouseenter="enter('882794219866203698');" onmouseout="out('882794219866203698');" style=""> 346                     final Resources partnerRes = partner.getResources();                                 </span>
<span class="4481789752192356250" onmouseenter="enter('4481789752192356250');" onmouseout="out('4481789752192356250');" style=""> 347                     int workspaceResId = partnerRes.getIdentifier(Partner.RES_DEFAULT_LAYOUT,            </span>
<span class="-8179104168031182438" onmouseenter="enter('-8179104168031182438');" onmouseout="out('-8179104168031182438');" style=""> 348                             &quot;xml&quot;, partner.getPackageName());                                            </span>
<span class="-1442734434460802886" onmouseenter="enter('-1442734434460802886');" onmouseout="out('-1442734434460802886');" style=""> 349                     if (workspaceResId != 0) {                                                           </span>
<span class="7614099601786768812" onmouseenter="enter('7614099601786768812');" onmouseout="out('7614099601786768812');" style=""> 350                         loader = new SimpleWorkspaceLoader(mOpenHelper, partnerRes, workspaceResId);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353             }                                                                                            </span>
<span  style=""> 354                                                                                                          </span>
<span class="-1290919382195344098" onmouseenter="enter('-1290919382195344098');" onmouseout="out('-1290919382195344098');" style=""> 355             if (loader == null) {                                                                        </span>
<span class="7451927752864728827" onmouseenter="enter('7451927752864728827');" onmouseout="out('7451927752864728827');" style=""> 356                 loader = new SimpleWorkspaceLoader(mOpenHelper, getContext().getResources(),             </span>
<span class="-1420613086462636039" onmouseenter="enter('-1420613086462636039');" onmouseout="out('-1420613086462636039');" style=""> 357                         getDefaultWorkspaceResourceId());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358             }                                                                                            </span>
<span  style=""> 359                                                                                                          </span>
<span class="126045670500141" onmouseenter="enter('126045670500141');" onmouseout="out('126045670500141');" style=""> 360             // Populate favorites table with initial favorites                                           </span>
<span class="6356197677764543118" onmouseenter="enter('6356197677764543118');" onmouseout="out('6356197677764543118');" style=""> 361             SharedPreferences.Editor editor = sp.edit().remove(EMPTY_DATABASE_CREATED);                  </span>
<span class="4528935963390066074" onmouseenter="enter('4528935963390066074');" onmouseout="out('4528935963390066074');" style=""> 362             mOpenHelper.loadFavorites(mOpenHelper.getWritableDatabase(), loader);                        </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 363             editor.commit();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365     }                                                                                                    </span>
<span  style=""> 366                                                                                                          </span>
<span class="-8499205643032210495" onmouseenter="enter('-8499205643032210495');" onmouseout="out('-8499205643032210495');" style=""> 367     public void migrateLauncher2Shortcuts() {                                                            </span>
<span class="-5770271076267441053" onmouseenter="enter('-5770271076267441053');" onmouseout="out('-5770271076267441053');" style=""> 368         mOpenHelper.migrateLauncher2Shortcuts(mOpenHelper.getWritableDatabase(),                         </span>
<span class="-4855681120160555012" onmouseenter="enter('-4855681120160555012');" onmouseout="out('-4855681120160555012');" style=""> 369                 Uri.parse(getContext().getString(R.string.old_launcher_provider_uri)));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370     }                                                                                                    </span>
<span  style=""> 371                                                                                                          </span>
<span class="-1196563046017318534" onmouseenter="enter('-1196563046017318534');" onmouseout="out('-1196563046017318534');" style=""> 372     private static int getDefaultWorkspaceResourceId() {                                                 </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 373         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 374         DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                    </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style=""> 375         if (LauncherAppState.isDisableAllApps()) {                                                       </span>
<span class="6699639115497717540" onmouseenter="enter('6699639115497717540');" onmouseout="out('6699639115497717540');" style=""> 376             return grid.defaultNoAllAppsLayoutId;                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 377         } else {                                                                                         </span>
<span class="-780823694227077807" onmouseenter="enter('-780823694227077807');" onmouseout="out('-780823694227077807');" style=""> 378             return grid.defaultLayoutId;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380     }                                                                                                    </span>
<span  style=""> 381                                                                                                          </span>
<span class="2048811950140821659" onmouseenter="enter('2048811950140821659');" onmouseout="out('2048811950140821659');" style=""> 382     private static interface ContentValuesCallback {                                                     </span>
<span class="9109141647050984993" onmouseenter="enter('9109141647050984993');" onmouseout="out('9109141647050984993');" style=""> 383         public void onRow(ContentValues values);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384     }                                                                                                    </span>
<span  style=""> 385                                                                                                          </span>
<span class="1239728474819548988" onmouseenter="enter('1239728474819548988');" onmouseout="out('1239728474819548988');" style=""> 386     private static boolean shouldImportLauncher2Database(Context context) {                              </span>
<span class="-3394718202218086970" onmouseenter="enter('-3394718202218086970');" onmouseout="out('-3394718202218086970');" style=""> 387         boolean isTablet = context.getResources().getBoolean(R.bool.is_tablet);                          </span>
<span  style=""> 388                                                                                                          </span>
<span class="-5532998664683170674" onmouseenter="enter('-5532998664683170674');" onmouseout="out('-5532998664683170674');" style=""> 389         // We don&#x27;t import the old databse for tablets, as the grid size has changed.                    </span>
<span class="8529341054323679340" onmouseenter="enter('8529341054323679340');" onmouseout="out('8529341054323679340');" style=""> 390         return !isTablet &amp;&amp; IMPORT_LAUNCHER2_DATABASE;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391     }                                                                                                    </span>
<span  style=""> 392                                                                                                          </span>
<span class="-7861087353469194327" onmouseenter="enter('-7861087353469194327');" onmouseout="out('-7861087353469194327');" style=""> 393     public void deleteDatabase() {                                                                       </span>
<span class="-3081120555997572478" onmouseenter="enter('-3081120555997572478');" onmouseout="out('-3081120555997572478');" style=""> 394         // Are you sure? (y/n)                                                                           </span>
<span class="7599905409028339447" onmouseenter="enter('7599905409028339447');" onmouseout="out('7599905409028339447');" style=""> 395         final SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                     </span>
<span class="4824670475834221257" onmouseenter="enter('4824670475834221257');" onmouseout="out('4824670475834221257');" style=""> 396         final File dbFile = new File(db.getPath());                                                      </span>
<span class="-4378932496508441297" onmouseenter="enter('-4378932496508441297');" onmouseout="out('-4378932496508441297');" style=""> 397         mOpenHelper.close();                                                                             </span>
<span class="-2168275612742463412" onmouseenter="enter('-2168275612742463412');" onmouseout="out('-2168275612742463412');" style=""> 398         if (dbFile.exists()) {                                                                           </span>
<span class="7055278701412747697" onmouseenter="enter('7055278701412747697');" onmouseout="out('7055278701412747697');" style=""> 399             SQLiteDatabase.deleteDatabase(dbFile);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400         }                                                                                                </span>
<span class="1429708216911350032" onmouseenter="enter('1429708216911350032');" onmouseout="out('1429708216911350032');" style=""> 401         mOpenHelper = new DatabaseHelper(getContext());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402     }                                                                                                    </span>
<span  style=""> 403                                                                                                          </span>
<span class="-8073014385313712586" onmouseenter="enter('-8073014385313712586');" onmouseout="out('-8073014385313712586');" style=""> 404     private static class DatabaseHelper extends SQLiteOpenHelper implements LayoutParserCallback {       </span>
<span class="-9177351901961504515" onmouseenter="enter('-9177351901961504515');" onmouseout="out('-9177351901961504515');" style=""> 405         private static final String TAG_RESOLVE = &quot;resolve&quot;;                                             </span>
<span class="-6648556986475948603" onmouseenter="enter('-6648556986475948603');" onmouseout="out('-6648556986475948603');" style=""> 406         private static final String TAG_FAVORITES = &quot;favorites&quot;;                                         </span>
<span class="2417919475469446038" onmouseenter="enter('2417919475469446038');" onmouseout="out('2417919475469446038');" style=""> 407         private static final String TAG_FAVORITE = &quot;favorite&quot;;                                           </span>
<span class="8817783213080628620" onmouseenter="enter('8817783213080628620');" onmouseout="out('8817783213080628620');" style=""> 408         private static final String TAG_APPWIDGET = &quot;appwidget&quot;;                                         </span>
<span class="1544013162193549447" onmouseenter="enter('1544013162193549447');" onmouseout="out('1544013162193549447');" style=""> 409         private static final String TAG_SHORTCUT = &quot;shortcut&quot;;                                           </span>
<span class="-5715927654015021253" onmouseenter="enter('-5715927654015021253');" onmouseout="out('-5715927654015021253');" style=""> 410         private static final String TAG_FOLDER = &quot;folder&quot;;                                               </span>
<span class="-6175494568545371270" onmouseenter="enter('-6175494568545371270');" onmouseout="out('-6175494568545371270');" style=""> 411         private static final String TAG_PARTNER_FOLDER = &quot;partner-folder&quot;;                               </span>
<span class="-8348196986139036128" onmouseenter="enter('-8348196986139036128');" onmouseout="out('-8348196986139036128');" style=""> 412         private static final String TAG_EXTRA = &quot;extra&quot;;                                                 </span>
<span class="-5562355841128428217" onmouseenter="enter('-5562355841128428217');" onmouseout="out('-5562355841128428217');" style=""> 413         private static final String TAG_INCLUDE = &quot;include&quot;;                                             </span>
<span  style=""> 414                                                                                                          </span>
<span class="-2405859498731861640" onmouseenter="enter('-2405859498731861640');" onmouseout="out('-2405859498731861640');" style=""> 415         // Style attrs -- &quot;Favorite&quot;                                                                     </span>
<span class="6214193247203789772" onmouseenter="enter('6214193247203789772');" onmouseout="out('6214193247203789772');" style=""> 416         private static final String ATTR_CLASS_NAME = &quot;className&quot;;                                       </span>
<span class="-1386532944306710360" onmouseenter="enter('-1386532944306710360');" onmouseout="out('-1386532944306710360');" style=""> 417         private static final String ATTR_PACKAGE_NAME = &quot;packageName&quot;;                                   </span>
<span class="2414249740748360985" onmouseenter="enter('2414249740748360985');" onmouseout="out('2414249740748360985');" style=""> 418         private static final String ATTR_CONTAINER = &quot;container&quot;;                                        </span>
<span class="-389066511444324935" onmouseenter="enter('-389066511444324935');" onmouseout="out('-389066511444324935');" style=""> 419         private static final String ATTR_SCREEN = &quot;screen&quot;;                                              </span>
<span class="3539825055734438732" onmouseenter="enter('3539825055734438732');" onmouseout="out('3539825055734438732');" style=""> 420         private static final String ATTR_X = &quot;x&quot;;                                                        </span>
<span class="-8597702554968119187" onmouseenter="enter('-8597702554968119187');" onmouseout="out('-8597702554968119187');" style=""> 421         private static final String ATTR_Y = &quot;y&quot;;                                                        </span>
<span class="-2621848582492648979" onmouseenter="enter('-2621848582492648979');" onmouseout="out('-2621848582492648979');" style=""> 422         private static final String ATTR_SPAN_X = &quot;spanX&quot;;                                               </span>
<span class="-675060966992142264" onmouseenter="enter('-675060966992142264');" onmouseout="out('-675060966992142264');" style=""> 423         private static final String ATTR_SPAN_Y = &quot;spanY&quot;;                                               </span>
<span class="1238292044873463939" onmouseenter="enter('1238292044873463939');" onmouseout="out('1238292044873463939');" style=""> 424         private static final String ATTR_ICON = &quot;icon&quot;;                                                  </span>
<span class="5936928200905820740" onmouseenter="enter('5936928200905820740');" onmouseout="out('5936928200905820740');" style=""> 425         private static final String ATTR_TITLE = &quot;title&quot;;                                                </span>
<span class="-5345085314000449361" onmouseenter="enter('-5345085314000449361');" onmouseout="out('-5345085314000449361');" style=""> 426         private static final String ATTR_URI = &quot;uri&quot;;                                                    </span>
<span  style=""> 427                                                                                                          </span>
<span class="3599016499719454262" onmouseenter="enter('3599016499719454262');" onmouseout="out('3599016499719454262');" style=""> 428         // Style attrs -- &quot;Include&quot;                                                                      </span>
<span class="-5893198944478773555" onmouseenter="enter('-5893198944478773555');" onmouseout="out('-5893198944478773555');" style=""> 429         private static final String ATTR_WORKSPACE = &quot;workspace&quot;;                                        </span>
<span  style=""> 430                                                                                                          </span>
<span class="-5389745022469758251" onmouseenter="enter('-5389745022469758251');" onmouseout="out('-5389745022469758251');" style=""> 431         // Style attrs -- &quot;Extra&quot;                                                                        </span>
<span class="9111389785487433322" onmouseenter="enter('9111389785487433322');" onmouseout="out('9111389785487433322');" style=""> 432         private static final String ATTR_KEY = &quot;key&quot;;                                                    </span>
<span class="-4495093316086922325" onmouseenter="enter('-4495093316086922325');" onmouseout="out('-4495093316086922325');" style=""> 433         private static final String ATTR_VALUE = &quot;value&quot;;                                                </span>
<span  style=""> 434                                                                                                          </span>
<span class="-2672328117217234149" onmouseenter="enter('-2672328117217234149');" onmouseout="out('-2672328117217234149');" style=""> 435         private final Context mContext;                                                                  </span>
<span class="916814758228251192" onmouseenter="enter('916814758228251192');" onmouseout="out('916814758228251192');" style=""> 436         private final PackageManager mPackageManager;                                                    </span>
<span class="-7815254415381208754" onmouseenter="enter('-7815254415381208754');" onmouseout="out('-7815254415381208754');" style=""> 437         private final AppWidgetHost mAppWidgetHost;                                                      </span>
<span class="256431113711786954" onmouseenter="enter('256431113711786954');" onmouseout="out('256431113711786954');" style=""> 438         private long mMaxItemId = -1;                                                                    </span>
<span class="3024521003496490102" onmouseenter="enter('3024521003496490102');" onmouseout="out('3024521003496490102');" style=""> 439         private long mMaxScreenId = -1;                                                                  </span>
<span  style=""> 440                                                                                                          </span>
<span class="7342788129695687690" onmouseenter="enter('7342788129695687690');" onmouseout="out('7342788129695687690');" style=""> 441         private boolean mNewDbCreated = false;                                                           </span>
<span  style=""> 442                                                                                                          </span>
<span class="1000156088447424124" onmouseenter="enter('1000156088447424124');" onmouseout="out('1000156088447424124');" style=""> 443         DatabaseHelper(Context context) {                                                                </span>
<span class="-3457119901623063168" onmouseenter="enter('-3457119901623063168');" onmouseout="out('-3457119901623063168');" style=""> 444             super(context, DATABASE_NAME, null, DATABASE_VERSION);                                       </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style=""> 445             mContext = context;                                                                          </span>
<span class="8554599676865199182" onmouseenter="enter('8554599676865199182');" onmouseout="out('8554599676865199182');" style=""> 446             mPackageManager = context.getPackageManager();                                               </span>
<span class="6731257549223913473" onmouseenter="enter('6731257549223913473');" onmouseout="out('6731257549223913473');" style=""> 447             mAppWidgetHost = new AppWidgetHost(context, Launcher.APPWIDGET_HOST_ID);                     </span>
<span  style=""> 448                                                                                                          </span>
<span class="-7119307471557363464" onmouseenter="enter('-7119307471557363464');" onmouseout="out('-7119307471557363464');" style=""> 449             // In the case where neither onCreate nor onUpgrade gets called, we read the maxId from      </span>
<span class="-7146491614936969963" onmouseenter="enter('-7146491614936969963');" onmouseout="out('-7146491614936969963');" style=""> 450             // the DB here                                                                               </span>
<span class="-8239698715373110075" onmouseenter="enter('-8239698715373110075');" onmouseout="out('-8239698715373110075');" style=""> 451             if (mMaxItemId == -1) {                                                                      </span>
<span class="6514208419145701418" onmouseenter="enter('6514208419145701418');" onmouseout="out('6514208419145701418');" style=""> 452                 mMaxItemId = initializeMaxItemId(getWritableDatabase());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453             }                                                                                            </span>
<span class="2158219101093277292" onmouseenter="enter('2158219101093277292');" onmouseout="out('2158219101093277292');" style=""> 454             if (mMaxScreenId == -1) {                                                                    </span>
<span class="-7197865417052699646" onmouseenter="enter('-7197865417052699646');" onmouseout="out('-7197865417052699646');" style=""> 455                 mMaxScreenId = initializeMaxScreenId(getWritableDatabase());                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457         }                                                                                                </span>
<span  style=""> 458                                                                                                          </span>
<span class="487377169126514768" onmouseenter="enter('487377169126514768');" onmouseout="out('487377169126514768');" style=""> 459         public boolean wasNewDbCreated() {                                                               </span>
<span class="1294520975679493300" onmouseenter="enter('1294520975679493300');" onmouseout="out('1294520975679493300');" style=""> 460             return mNewDbCreated;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461         }                                                                                                </span>
<span  style=""> 462                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 463         /**                                                                                              </span>
<span class="-3713204910685876719" onmouseenter="enter('-3713204910685876719');" onmouseout="out('-3713204910685876719');" style=""> 464          * Send notification that we&#x27;ve deleted the {@link AppWidgetHost},                               </span>
<span class="-5398164636189778479" onmouseenter="enter('-5398164636189778479');" onmouseout="out('-5398164636189778479');" style=""> 465          * probably as part of the initial database creation. The receiver may                           </span>
<span class="-284834762183367019" onmouseenter="enter('-284834762183367019');" onmouseout="out('-284834762183367019');" style=""> 466          * want to re-call {@link AppWidgetHost#startListening()} to ensure                              </span>
<span class="1913597860538764992" onmouseenter="enter('1913597860538764992');" onmouseout="out('1913597860538764992');" style=""> 467          * callbacks are correctly set.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 468          */                                                                                              </span>
<span class="3384745401314169661" onmouseenter="enter('3384745401314169661');" onmouseout="out('3384745401314169661');" style=""> 469         private void sendAppWidgetResetNotify() {                                                        </span>
<span class="-1113390730047466962" onmouseenter="enter('-1113390730047466962');" onmouseout="out('-1113390730047466962');" style=""> 470             final ContentResolver resolver = mContext.getContentResolver();                              </span>
<span class="4149774703050814155" onmouseenter="enter('4149774703050814155');" onmouseout="out('4149774703050814155');" style=""> 471             resolver.notifyChange(CONTENT_APPWIDGET_RESET_URI, null);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472         }                                                                                                </span>
<span  style=""> 473                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 474         @Override                                                                                        </span>
<span class="3201464308903999877" onmouseenter="enter('3201464308903999877');" onmouseout="out('3201464308903999877');" style=""> 475         public void onCreate(SQLiteDatabase db) {                                                        </span>
<span class="4744685829155971552" onmouseenter="enter('4744685829155971552');" onmouseout="out('4744685829155971552');" style=""> 476             if (LOGD) Log.d(TAG, &quot;creating new launcher database&quot;);                                      </span>
<span  style=""> 477                                                                                                          </span>
<span class="-5512536783286632376" onmouseenter="enter('-5512536783286632376');" onmouseout="out('-5512536783286632376');" style=""> 478             mMaxItemId = 1;                                                                              </span>
<span class="-1030858145638239039" onmouseenter="enter('-1030858145638239039');" onmouseout="out('-1030858145638239039');" style=""> 479             mMaxScreenId = 0;                                                                            </span>
<span class="-3863035699221776712" onmouseenter="enter('-3863035699221776712');" onmouseout="out('-3863035699221776712');" style=""> 480             mNewDbCreated = true;                                                                        </span>
<span  style=""> 481                                                                                                          </span>
<span class="8272328117098122260" onmouseenter="enter('8272328117098122260');" onmouseout="out('8272328117098122260');" style=""> 482             UserManagerCompat userManager = UserManagerCompat.getInstance(mContext);                     </span>
<span class="1087451883287607054" onmouseenter="enter('1087451883287607054');" onmouseout="out('1087451883287607054');" style=""> 483             long userSerialNumber = userManager.getSerialNumberForUser(                                  </span>
<span class="334342413311659427" onmouseenter="enter('334342413311659427');" onmouseout="out('334342413311659427');" style=""> 484                     UserHandleCompat.myUserHandle());                                                    </span>
<span  style=""> 485                                                                                                          </span>
<span class="-5810771542500139933" onmouseenter="enter('-5810771542500139933');" onmouseout="out('-5810771542500139933');" style=""> 486             db.execSQL(&quot;CREATE TABLE favorites (&quot; +                                                      </span>
<span class="-7286867248755276119" onmouseenter="enter('-7286867248755276119');" onmouseout="out('-7286867248755276119');" style=""> 487                     &quot;_id INTEGER PRIMARY KEY,&quot; +                                                         </span>
<span class="5329137835308229169" onmouseenter="enter('5329137835308229169');" onmouseout="out('5329137835308229169');" style=""> 488                     &quot;title TEXT,&quot; +                                                                      </span>
<span class="-7776152072054589061" onmouseenter="enter('-7776152072054589061');" onmouseout="out('-7776152072054589061');" style=""> 489                     &quot;intent TEXT,&quot; +                                                                     </span>
<span class="4982593742089674958" onmouseenter="enter('4982593742089674958');" onmouseout="out('4982593742089674958');" style=""> 490                     &quot;container INTEGER,&quot; +                                                               </span>
<span class="-1871026270657853169" onmouseenter="enter('-1871026270657853169');" onmouseout="out('-1871026270657853169');" style=""> 491                     &quot;screen INTEGER,&quot; +                                                                  </span>
<span class="-9174211260981343890" onmouseenter="enter('-9174211260981343890');" onmouseout="out('-9174211260981343890');" style=""> 492                     &quot;cellX INTEGER,&quot; +                                                                   </span>
<span class="1584772009960348649" onmouseenter="enter('1584772009960348649');" onmouseout="out('1584772009960348649');" style=""> 493                     &quot;cellY INTEGER,&quot; +                                                                   </span>
<span class="5424055190881126727" onmouseenter="enter('5424055190881126727');" onmouseout="out('5424055190881126727');" style=""> 494                     &quot;spanX INTEGER,&quot; +                                                                   </span>
<span class="6553755327503045229" onmouseenter="enter('6553755327503045229');" onmouseout="out('6553755327503045229');" style=""> 495                     &quot;spanY INTEGER,&quot; +                                                                   </span>
<span class="5229848414421823036" onmouseenter="enter('5229848414421823036');" onmouseout="out('5229848414421823036');" style=""> 496                     &quot;itemType INTEGER,&quot; +                                                                </span>
<span class="-1771151571856416667" onmouseenter="enter('-1771151571856416667');" onmouseout="out('-1771151571856416667');" style=""> 497                     &quot;appWidgetId INTEGER NOT NULL DEFAULT -1,&quot; +                                         </span>
<span class="-9047067707489472437" onmouseenter="enter('-9047067707489472437');" onmouseout="out('-9047067707489472437');" style=""> 498                     &quot;isShortcut INTEGER,&quot; +                                                              </span>
<span class="-3445858598434382544" onmouseenter="enter('-3445858598434382544');" onmouseout="out('-3445858598434382544');" style=""> 499                     &quot;iconType INTEGER,&quot; +                                                                </span>
<span class="4279668316006004948" onmouseenter="enter('4279668316006004948');" onmouseout="out('4279668316006004948');" style=""> 500                     &quot;iconPackage TEXT,&quot; +                                                                </span>
<span class="2008284586023778304" onmouseenter="enter('2008284586023778304');" onmouseout="out('2008284586023778304');" style=""> 501                     &quot;iconResource TEXT,&quot; +                                                               </span>
<span class="-5981868381948376489" onmouseenter="enter('-5981868381948376489');" onmouseout="out('-5981868381948376489');" style=""> 502                     &quot;icon BLOB,&quot; +                                                                       </span>
<span class="5686768105176115842" onmouseenter="enter('5686768105176115842');" onmouseout="out('5686768105176115842');" style=""> 503                     &quot;uri TEXT,&quot; +                                                                        </span>
<span class="-5470568819214956502" onmouseenter="enter('-5470568819214956502');" onmouseout="out('-5470568819214956502');" style=""> 504                     &quot;displayMode INTEGER,&quot; +                                                             </span>
<span class="3582502352252677630" onmouseenter="enter('3582502352252677630');" onmouseout="out('3582502352252677630');" style=""> 505                     &quot;appWidgetProvider TEXT,&quot; +                                                          </span>
<span class="4065658841092455651" onmouseenter="enter('4065658841092455651');" onmouseout="out('4065658841092455651');" style=""> 506                     &quot;modified INTEGER NOT NULL DEFAULT 0,&quot; +                                             </span>
<span class="422282607120493296" onmouseenter="enter('422282607120493296');" onmouseout="out('422282607120493296');" style=""> 507                     &quot;restored INTEGER NOT NULL DEFAULT 0,&quot; +                                             </span>
<span class="86482473227423588" onmouseenter="enter('86482473227423588');" onmouseout="out('86482473227423588');" style=""> 508                     &quot;profileId INTEGER DEFAULT &quot; + userSerialNumber +                                    </span>
<span class="4525293784515244604" onmouseenter="enter('4525293784515244604');" onmouseout="out('4525293784515244604');" style=""> 509                     &quot;);&quot;);                                                                               </span>
<span class="4995577433356427338" onmouseenter="enter('4995577433356427338');" onmouseout="out('4995577433356427338');" style=""> 510             addWorkspacesTable(db);                                                                      </span>
<span  style=""> 511                                                                                                          </span>
<span class="-1982623284376040662" onmouseenter="enter('-1982623284376040662');" onmouseout="out('-1982623284376040662');" style=""> 512             // Database was just created, so wipe any previous widgets                                   </span>
<span class="35469525966995251" onmouseenter="enter('35469525966995251');" onmouseout="out('35469525966995251');" style=""> 513             if (mAppWidgetHost != null) {                                                                </span>
<span class="2879907381293157546" onmouseenter="enter('2879907381293157546');" onmouseout="out('2879907381293157546');" style=""> 514                 mAppWidgetHost.deleteHost();                                                             </span>
<span class="-5770229164268459929" onmouseenter="enter('-5770229164268459929');" onmouseout="out('-5770229164268459929');" style=""> 515                 sendAppWidgetResetNotify();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516             }                                                                                            </span>
<span  style=""> 517                                                                                                          </span>
<span class="609275327715209247" onmouseenter="enter('609275327715209247');" onmouseout="out('609275327715209247');" style=""> 518             if (shouldImportLauncher2Database(mContext)) {                                               </span>
<span class="-4119927574094224618" onmouseenter="enter('-4119927574094224618');" onmouseout="out('-4119927574094224618');" style=""> 519                 // Try converting the old database                                                       </span>
<span class="-2608073222964575343" onmouseenter="enter('-2608073222964575343');" onmouseout="out('-2608073222964575343');" style=""> 520                 ContentValuesCallback permuteScreensCb = new ContentValuesCallback() {                   </span>
<span class="8586429359182493165" onmouseenter="enter('8586429359182493165');" onmouseout="out('8586429359182493165');" style=""> 521                     public void onRow(ContentValues values) {                                            </span>
<span class="8168514524062857535" onmouseenter="enter('8168514524062857535');" onmouseout="out('8168514524062857535');" style=""> 522                         int container = values.getAsInteger(LauncherSettings.Favorites.CONTAINER);       </span>
<span class="5020574662396153275" onmouseenter="enter('5020574662396153275');" onmouseout="out('5020574662396153275');" style=""> 523                         if (container == Favorites.CONTAINER_DESKTOP) {                                  </span>
<span class="8059598160467561910" onmouseenter="enter('8059598160467561910');" onmouseout="out('8059598160467561910');" style=""> 524                             int screen = values.getAsInteger(LauncherSettings.Favorites.SCREEN);         </span>
<span class="-7023501586433453456" onmouseenter="enter('-7023501586433453456');" onmouseout="out('-7023501586433453456');" style=""> 525                             screen = (int) upgradeLauncherDb_permuteScreens(screen);                     </span>
<span class="4993135311254983149" onmouseenter="enter('4993135311254983149');" onmouseout="out('4993135311254983149');" style=""> 526                             values.put(LauncherSettings.Favorites.SCREEN, screen);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 529                 };                                                                                       </span>
<span class="-6389228191485877615" onmouseenter="enter('-6389228191485877615');" onmouseout="out('-6389228191485877615');" style=""> 530                 Uri uri = Uri.parse(&quot;content://&quot; + Settings.AUTHORITY +                                  </span>
<span class="221068161423218984" onmouseenter="enter('221068161423218984');" onmouseout="out('221068161423218984');" style=""> 531                         &quot;/old_favorites?notify=true&quot;);                                                   </span>
<span class="-6844380575648815427" onmouseenter="enter('-6844380575648815427');" onmouseout="out('-6844380575648815427');" style=""> 532                 if (!convertDatabase(db, uri, permuteScreensCb, true)) {                                 </span>
<span class="1523633607411472329" onmouseenter="enter('1523633607411472329');" onmouseout="out('1523633607411472329');" style=""> 533                     // Try and upgrade from the Launcher2 db                                             </span>
<span class="4518498143464795661" onmouseenter="enter('4518498143464795661');" onmouseout="out('4518498143464795661');" style=""> 534                     uri = Uri.parse(mContext.getString(R.string.old_launcher_provider_uri));             </span>
<span class="8183480483325234852" onmouseenter="enter('8183480483325234852');" onmouseout="out('8183480483325234852');" style=""> 535                     if (!convertDatabase(db, uri, permuteScreensCb, false)) {                            </span>
<span class="-7649701046117020267" onmouseenter="enter('-7649701046117020267');" onmouseout="out('-7649701046117020267');" style=""> 536                         // If we fail, then set a flag to load the default workspace                     </span>
<span class="7629543500667828090" onmouseenter="enter('7629543500667828090');" onmouseout="out('7629543500667828090');" style=""> 537                         setFlagEmptyDbCreated();                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 538                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 539                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540                 }                                                                                        </span>
<span class="3454579597073281561" onmouseenter="enter('3454579597073281561');" onmouseout="out('3454579597073281561');" style=""> 541                 // Right now, in non-default workspace cases, we want to run the final                   </span>
<span class="-5098717153247698852" onmouseenter="enter('-5098717153247698852');" onmouseout="out('-5098717153247698852');" style=""> 542                 // upgrade code (ie. to fix workspace screen indices -&gt; ids, etc.), so                   </span>
<span class="-4125458130400794691" onmouseenter="enter('-4125458130400794691');" onmouseout="out('-4125458130400794691');" style=""> 543                 // set that flag too.                                                                    </span>
<span class="4167333916835222093" onmouseenter="enter('4167333916835222093');" onmouseout="out('4167333916835222093');" style=""> 544                 setFlagJustLoadedOldDb();                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 545             } else {                                                                                     </span>
<span class="-1063142603395313746" onmouseenter="enter('-1063142603395313746');" onmouseout="out('-1063142603395313746');" style=""> 546                 // Fresh and clean launcher DB.                                                          </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style=""> 547                 mMaxItemId = initializeMaxItemId(db);                                                    </span>
<span class="7629543500667828090" onmouseenter="enter('7629543500667828090');" onmouseout="out('7629543500667828090');" style=""> 548                 setFlagEmptyDbCreated();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 550         }                                                                                                </span>
<span  style=""> 551                                                                                                          </span>
<span class="6272912136443308513" onmouseenter="enter('6272912136443308513');" onmouseout="out('6272912136443308513');" style=""> 552         private void addWorkspacesTable(SQLiteDatabase db) {                                             </span>
<span class="2730049849658983478" onmouseenter="enter('2730049849658983478');" onmouseout="out('2730049849658983478');" style=""> 553             db.execSQL(&quot;CREATE TABLE &quot; + TABLE_WORKSPACE_SCREENS + &quot; (&quot; +                                </span>
<span class="-1469669278065576182" onmouseenter="enter('-1469669278065576182');" onmouseout="out('-1469669278065576182');" style=""> 554                     LauncherSettings.WorkspaceScreens._ID + &quot; INTEGER,&quot; +                                </span>
<span class="-8340457193420065897" onmouseenter="enter('-8340457193420065897');" onmouseout="out('-8340457193420065897');" style=""> 555                     LauncherSettings.WorkspaceScreens.SCREEN_RANK + &quot; INTEGER,&quot; +                        </span>
<span class="7771125962287368960" onmouseenter="enter('7771125962287368960');" onmouseout="out('7771125962287368960');" style=""> 556                     LauncherSettings.ChangeLogColumns.MODIFIED + &quot; INTEGER NOT NULL DEFAULT 0&quot; +         </span>
<span class="4525293784515244604" onmouseenter="enter('4525293784515244604');" onmouseout="out('4525293784515244604');" style=""> 557                     &quot;);&quot;);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 558         }                                                                                                </span>
<span  style=""> 559                                                                                                          </span>
<span class="-3232037806458942317" onmouseenter="enter('-3232037806458942317');" onmouseout="out('-3232037806458942317');" style=""> 560         private void removeOrphanedItems(SQLiteDatabase db) {                                            </span>
<span class="-3995909494643948388" onmouseenter="enter('-3995909494643948388');" onmouseout="out('-3995909494643948388');" style=""> 561             // Delete items directly on the workspace who&#x27;s screen id doesn&#x27;t exist                      </span>
<span class="6555258266445461688" onmouseenter="enter('6555258266445461688');" onmouseout="out('6555258266445461688');" style=""> 562             //  &quot;DELETE FROM favorites WHERE screen NOT IN (SELECT _id FROM workspaceScreens)            </span>
<span class="-1584785563187965465" onmouseenter="enter('-1584785563187965465');" onmouseout="out('-1584785563187965465');" style=""> 563             //   AND container = -100&quot;                                                                   </span>
<span class="-3502523792993972030" onmouseenter="enter('-3502523792993972030');" onmouseout="out('-3502523792993972030');" style=""> 564             String removeOrphanedDesktopItems = &quot;DELETE FROM &quot; + TABLE_FAVORITES +                       </span>
<span class="-3798755311795862199" onmouseenter="enter('-3798755311795862199');" onmouseout="out('-3798755311795862199');" style=""> 565                     &quot; WHERE &quot; +                                                                          </span>
<span class="-8781539607986806909" onmouseenter="enter('-8781539607986806909');" onmouseout="out('-8781539607986806909');" style=""> 566                     LauncherSettings.Favorites.SCREEN + &quot; NOT IN (SELECT &quot; +                             </span>
<span class="-3730067412022302503" onmouseenter="enter('-3730067412022302503');" onmouseout="out('-3730067412022302503');" style=""> 567                     LauncherSettings.WorkspaceScreens._ID + &quot; FROM &quot; + TABLE_WORKSPACE_SCREENS + &quot;)&quot; +   </span>
<span class="8831213357842987069" onmouseenter="enter('8831213357842987069');" onmouseout="out('8831213357842987069');" style=""> 568                     &quot; AND &quot; +                                                                            </span>
<span class="-3912897749337440213" onmouseenter="enter('-3912897749337440213');" onmouseout="out('-3912897749337440213');" style=""> 569                     LauncherSettings.Favorites.CONTAINER + &quot; = &quot; +                                       </span>
<span class="-1572782876841487653" onmouseenter="enter('-1572782876841487653');" onmouseout="out('-1572782876841487653');" style=""> 570                     LauncherSettings.Favorites.CONTAINER_DESKTOP;                                        </span>
<span class="-5442680607495552531" onmouseenter="enter('-5442680607495552531');" onmouseout="out('-5442680607495552531');" style=""> 571             db.execSQL(removeOrphanedDesktopItems);                                                      </span>
<span  style=""> 572                                                                                                          </span>
<span class="2150462606818952724" onmouseenter="enter('2150462606818952724');" onmouseout="out('2150462606818952724');" style=""> 573             // Delete items contained in folders which no longer exist (after above statement)           </span>
<span class="7157590486959116676" onmouseenter="enter('7157590486959116676');" onmouseout="out('7157590486959116676');" style=""> 574             //  &quot;DELETE FROM favorites  WHERE container &lt;&gt; -100 AND container &lt;&gt; -101 AND container      </span>
<span class="4713393280747800603" onmouseenter="enter('4713393280747800603');" onmouseout="out('4713393280747800603');" style=""> 575             //   NOT IN (SELECT _id FROM favorites WHERE itemType = 2)&quot;                                  </span>
<span class="-8895952306054120744" onmouseenter="enter('-8895952306054120744');" onmouseout="out('-8895952306054120744');" style=""> 576             String removeOrphanedFolderItems = &quot;DELETE FROM &quot; + TABLE_FAVORITES +                        </span>
<span class="-3798755311795862199" onmouseenter="enter('-3798755311795862199');" onmouseout="out('-3798755311795862199');" style=""> 577                     &quot; WHERE &quot; +                                                                          </span>
<span class="-9165304043886914201" onmouseenter="enter('-9165304043886914201');" onmouseout="out('-9165304043886914201');" style=""> 578                     LauncherSettings.Favorites.CONTAINER + &quot; &lt;&gt; &quot; +                                      </span>
<span class="2430974176390543784" onmouseenter="enter('2430974176390543784');" onmouseout="out('2430974176390543784');" style=""> 579                     LauncherSettings.Favorites.CONTAINER_DESKTOP +                                       </span>
<span class="3944405145859305700" onmouseenter="enter('3944405145859305700');" onmouseout="out('3944405145859305700');" style=""> 580                     &quot; AND &quot;                                                                              </span>
<span class="5144458996296891504" onmouseenter="enter('5144458996296891504');" onmouseout="out('5144458996296891504');" style=""> 581                     + LauncherSettings.Favorites.CONTAINER + &quot; &lt;&gt; &quot; +                                    </span>
<span class="20571678636460503" onmouseenter="enter('20571678636460503');" onmouseout="out('20571678636460503');" style=""> 582                     LauncherSettings.Favorites.CONTAINER_HOTSEAT +                                       </span>
<span class="3944405145859305700" onmouseenter="enter('3944405145859305700');" onmouseout="out('3944405145859305700');" style=""> 583                     &quot; AND &quot;                                                                              </span>
<span class="-4280152506863766824" onmouseenter="enter('-4280152506863766824');" onmouseout="out('-4280152506863766824');" style=""> 584                     + LauncherSettings.Favorites.CONTAINER + &quot; NOT IN (SELECT &quot; +                        </span>
<span class="-971280935083657149" onmouseenter="enter('-971280935083657149');" onmouseout="out('-971280935083657149');" style=""> 585                     LauncherSettings.Favorites._ID + &quot; FROM &quot; + TABLE_FAVORITES +                        </span>
<span class="4038942553560789906" onmouseenter="enter('4038942553560789906');" onmouseout="out('4038942553560789906');" style=""> 586                     &quot; WHERE &quot; + LauncherSettings.Favorites.ITEM_TYPE + &quot; = &quot; +                           </span>
<span class="-1734962565729646321" onmouseenter="enter('-1734962565729646321');" onmouseout="out('-1734962565729646321');" style=""> 587                     LauncherSettings.Favorites.ITEM_TYPE_FOLDER + &quot;)&quot;;                                   </span>
<span class="-8852316947474253726" onmouseenter="enter('-8852316947474253726');" onmouseout="out('-8852316947474253726');" style=""> 588             db.execSQL(removeOrphanedFolderItems);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589         }                                                                                                </span>
<span  style=""> 590                                                                                                          </span>
<span class="-2961433455992777066" onmouseenter="enter('-2961433455992777066');" onmouseout="out('-2961433455992777066');" style=""> 591         private void setFlagJustLoadedOldDb() {                                                          </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 592             String spKey = LauncherAppState.getSharedPreferencesKey();                                   </span>
<span class="-5067042237042206848" onmouseenter="enter('-5067042237042206848');" onmouseout="out('-5067042237042206848');" style=""> 593             SharedPreferences sp = mContext.getSharedPreferences(spKey, Context.MODE_PRIVATE);           </span>
<span class="2898240485600869061" onmouseenter="enter('2898240485600869061');" onmouseout="out('2898240485600869061');" style=""> 594             SharedPreferences.Editor editor = sp.edit();                                                 </span>
<span class="6425915141570404948" onmouseenter="enter('6425915141570404948');" onmouseout="out('6425915141570404948');" style=""> 595             editor.putBoolean(UPGRADED_FROM_OLD_DATABASE, true);                                         </span>
<span class="-757214322554182598" onmouseenter="enter('-757214322554182598');" onmouseout="out('-757214322554182598');" style=""> 596             editor.putBoolean(EMPTY_DATABASE_CREATED, false);                                            </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 597             editor.commit();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598         }                                                                                                </span>
<span  style=""> 599                                                                                                          </span>
<span class="3580170518454540960" onmouseenter="enter('3580170518454540960');" onmouseout="out('3580170518454540960');" style=""> 600         private void setFlagEmptyDbCreated() {                                                           </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 601             String spKey = LauncherAppState.getSharedPreferencesKey();                                   </span>
<span class="-5067042237042206848" onmouseenter="enter('-5067042237042206848');" onmouseout="out('-5067042237042206848');" style=""> 602             SharedPreferences sp = mContext.getSharedPreferences(spKey, Context.MODE_PRIVATE);           </span>
<span class="2898240485600869061" onmouseenter="enter('2898240485600869061');" onmouseout="out('2898240485600869061');" style=""> 603             SharedPreferences.Editor editor = sp.edit();                                                 </span>
<span class="-1876450541595142979" onmouseenter="enter('-1876450541595142979');" onmouseout="out('-1876450541595142979');" style=""> 604             editor.putBoolean(EMPTY_DATABASE_CREATED, true);                                             </span>
<span class="4517855415574245319" onmouseenter="enter('4517855415574245319');" onmouseout="out('4517855415574245319');" style=""> 605             editor.putBoolean(UPGRADED_FROM_OLD_DATABASE, false);                                        </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 606             editor.commit();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607         }                                                                                                </span>
<span  style=""> 608                                                                                                          </span>
<span class="6904570220382641884" onmouseenter="enter('6904570220382641884');" onmouseout="out('6904570220382641884');" style=""> 609         // We rearrange the screens from the old launcher                                                </span>
<span class="4618589763737563912" onmouseenter="enter('4618589763737563912');" onmouseout="out('4618589763737563912');" style=""> 610         // 12345 -&gt; 34512                                                                                </span>
<span class="3499405923658396159" onmouseenter="enter('3499405923658396159');" onmouseout="out('3499405923658396159');" style=""> 611         private long upgradeLauncherDb_permuteScreens(long screen) {                                     </span>
<span class="-8201094260239758609" onmouseenter="enter('-8201094260239758609');" onmouseout="out('-8201094260239758609');" style=""> 612             if (screen &gt;= 2) {                                                                           </span>
<span class="2816670308386131226" onmouseenter="enter('2816670308386131226');" onmouseout="out('2816670308386131226');" style=""> 613                 return screen - 2;                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 614             } else {                                                                                     </span>
<span class="8757070544646185316" onmouseenter="enter('8757070544646185316');" onmouseout="out('8757070544646185316');" style=""> 615                 return screen + 3;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 616             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 617         }                                                                                                </span>
<span  style=""> 618                                                                                                          </span>
<span class="5501735402686311021" onmouseenter="enter('5501735402686311021');" onmouseout="out('5501735402686311021');" style=""> 619         private boolean convertDatabase(SQLiteDatabase db, Uri uri,                                      </span>
<span class="1795795513015787778" onmouseenter="enter('1795795513015787778');" onmouseout="out('1795795513015787778');" style=""> 620                                         ContentValuesCallback cb, boolean deleteRows) {                  </span>
<span class="6817282747760268981" onmouseenter="enter('6817282747760268981');" onmouseout="out('6817282747760268981');" style=""> 621             if (LOGD) Log.d(TAG, &quot;converting database from an older format, but not onUpgrade&quot;);         </span>
<span class="-1589900657748744102" onmouseenter="enter('-1589900657748744102');" onmouseout="out('-1589900657748744102');" style=""> 622             boolean converted = false;                                                                   </span>
<span  style=""> 623                                                                                                          </span>
<span class="-1113390730047466962" onmouseenter="enter('-1113390730047466962');" onmouseout="out('-1113390730047466962');" style=""> 624             final ContentResolver resolver = mContext.getContentResolver();                              </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style=""> 625             Cursor cursor = null;                                                                        </span>
<span  style=""> 626                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 627             try {                                                                                        </span>
<span class="-4258104891436652364" onmouseenter="enter('-4258104891436652364');" onmouseout="out('-4258104891436652364');" style=""> 628                 cursor = resolver.query(uri, null, null, null, null);                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 629             } catch (Exception e) {                                                                      </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style=""> 630                 // Ignore                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631             }                                                                                            </span>
<span  style=""> 632                                                                                                          </span>
<span class="-8364191572061005786" onmouseenter="enter('-8364191572061005786');" onmouseout="out('-8364191572061005786');" style=""> 633             // We already have a favorites database in the old provider                                  </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 634             if (cursor != null) {                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 635                 try {                                                                                    </span>
<span class="5166436960045766511" onmouseenter="enter('5166436960045766511');" onmouseout="out('5166436960045766511');" style=""> 636                      if (cursor.getCount() &gt; 0) {                                                        </span>
<span class="-7893872194080327470" onmouseenter="enter('-7893872194080327470');" onmouseout="out('-7893872194080327470');" style=""> 637                         converted = copyFromCursor(db, cursor, cb) &gt; 0;                                  </span>
<span class="7409985313791550694" onmouseenter="enter('7409985313791550694');" onmouseout="out('7409985313791550694');" style=""> 638                         if (converted &amp;&amp; deleteRows) {                                                   </span>
<span class="6279659027428678438" onmouseenter="enter('6279659027428678438');" onmouseout="out('6279659027428678438');" style=""> 639                             resolver.delete(uri, null, null);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 641                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 642                 } finally {                                                                              </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 643                     cursor.close();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645             }                                                                                            </span>
<span  style=""> 646                                                                                                          </span>
<span class="3249503320511644327" onmouseenter="enter('3249503320511644327');" onmouseout="out('3249503320511644327');" style=""> 647             if (converted) {                                                                             </span>
<span class="8975525021270415398" onmouseenter="enter('8975525021270415398');" onmouseout="out('8975525021270415398');" style=""> 648                 // Convert widgets from this import into widgets                                         </span>
<span class="-370034293300666463" onmouseenter="enter('-370034293300666463');" onmouseout="out('-370034293300666463');" style=""> 649                 if (LOGD) Log.d(TAG, &quot;converted and now triggering widget upgrade&quot;);                     </span>
<span class="3525871662547532743" onmouseenter="enter('3525871662547532743');" onmouseout="out('3525871662547532743');" style=""> 650                 convertWidgets(db);                                                                      </span>
<span  style=""> 651                                                                                                          </span>
<span class="1061677975667452281" onmouseenter="enter('1061677975667452281');" onmouseout="out('1061677975667452281');" style=""> 652                 // Update max item id                                                                    </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style=""> 653                 mMaxItemId = initializeMaxItemId(db);                                                    </span>
<span class="-1050526381544019588" onmouseenter="enter('-1050526381544019588');" onmouseout="out('-1050526381544019588');" style=""> 654                 if (LOGD) Log.d(TAG, &quot;mMaxItemId: &quot; + mMaxItemId);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655             }                                                                                            </span>
<span  style=""> 656                                                                                                          </span>
<span class="2958977365344362767" onmouseenter="enter('2958977365344362767');" onmouseout="out('2958977365344362767');" style=""> 657             return converted;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658         }                                                                                                </span>
<span  style=""> 659                                                                                                          </span>
<span class="-3386136253719322573" onmouseenter="enter('-3386136253719322573');" onmouseout="out('-3386136253719322573');" style=""> 660         private int copyFromCursor(SQLiteDatabase db, Cursor c, ContentValuesCallback cb) {              </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style=""> 661             final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);                 </span>
<span class="-4033402896828551783" onmouseenter="enter('-4033402896828551783');" onmouseout="out('-4033402896828551783');" style=""> 662             final int intentIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.INTENT);          </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style=""> 663             final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);            </span>
<span class="2476259323357554799" onmouseenter="enter('2476259323357554799');" onmouseout="out('2476259323357554799');" style=""> 664             final int iconTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYPE);     </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style=""> 665             final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);              </span>
<span class="-8681284292868403609" onmouseenter="enter('-8681284292868403609');" onmouseout="out('-8681284292868403609');" style=""><abbr title=" 666             final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE);"> 666             final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE)🔵</abbr></span>
<span class="6748803854718242440" onmouseenter="enter('6748803854718242440');" onmouseout="out('6748803854718242440');" style=""><abbr title=" 667             final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURCE);"> 667             final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURC🔵</abbr></span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 668             final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);    </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 669             final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);     </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 670             final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);          </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 671             final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);            </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 672             final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);            </span>
<span class="2746356324732937511" onmouseenter="enter('2746356324732937511');" onmouseout="out('2746356324732937511');" style=""> 673             final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);                </span>
<span class="8214639294219269043" onmouseenter="enter('8214639294219269043');" onmouseout="out('8214639294219269043');" style=""><abbr title=" 674             final int displayModeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.DISPLAY_MODE);"> 674             final int displayModeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.DISPLAY_MODE)🔵</abbr></span>
<span  style=""> 675                                                                                                          </span>
<span class="-2734978488976240244" onmouseenter="enter('-2734978488976240244');" onmouseout="out('-2734978488976240244');" style=""> 676             ContentValues[] rows = new ContentValues[c.getCount()];                                      </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style=""> 677             int i = 0;                                                                                   </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 678             while (c.moveToNext()) {                                                                     </span>
<span class="-3805379390248188389" onmouseenter="enter('-3805379390248188389');" onmouseout="out('-3805379390248188389');" style=""> 679                 ContentValues values = new ContentValues(c.getColumnCount());                            </span>
<span class="-1480489324102651074" onmouseenter="enter('-1480489324102651074');" onmouseout="out('-1480489324102651074');" style=""> 680                 values.put(LauncherSettings.Favorites._ID, c.getLong(idIndex));                          </span>
<span class="3725422751515257721" onmouseenter="enter('3725422751515257721');" onmouseout="out('3725422751515257721');" style=""> 681                 values.put(LauncherSettings.Favorites.INTENT, c.getString(intentIndex));                 </span>
<span class="3080545696092648727" onmouseenter="enter('3080545696092648727');" onmouseout="out('3080545696092648727');" style=""> 682                 values.put(LauncherSettings.Favorites.TITLE, c.getString(titleIndex));                   </span>
<span class="1653532357893974847" onmouseenter="enter('1653532357893974847');" onmouseout="out('1653532357893974847');" style=""> 683                 values.put(LauncherSettings.Favorites.ICON_TYPE, c.getInt(iconTypeIndex));               </span>
<span class="3857475807367449049" onmouseenter="enter('3857475807367449049');" onmouseout="out('3857475807367449049');" style=""> 684                 values.put(LauncherSettings.Favorites.ICON, c.getBlob(iconIndex));                       </span>
<span class="2521879942012579785" onmouseenter="enter('2521879942012579785');" onmouseout="out('2521879942012579785');" style=""> 685                 values.put(LauncherSettings.Favorites.ICON_PACKAGE, c.getString(iconPackageIndex));      </span>
<span class="3969193111666484842" onmouseenter="enter('3969193111666484842');" onmouseout="out('3969193111666484842');" style=""> 686                 values.put(LauncherSettings.Favorites.ICON_RESOURCE, c.getString(iconResourceIndex));    </span>
<span class="8435695874431009640" onmouseenter="enter('8435695874431009640');" onmouseout="out('8435695874431009640');" style=""> 687                 values.put(LauncherSettings.Favorites.CONTAINER, c.getInt(containerIndex));              </span>
<span class="5147687850248676325" onmouseenter="enter('5147687850248676325');" onmouseout="out('5147687850248676325');" style=""> 688                 values.put(LauncherSettings.Favorites.ITEM_TYPE, c.getInt(itemTypeIndex));               </span>
<span class="2567875359902744917" onmouseenter="enter('2567875359902744917');" onmouseout="out('2567875359902744917');" style=""> 689                 values.put(LauncherSettings.Favorites.APPWIDGET_ID, -1);                                 </span>
<span class="3045531455657088519" onmouseenter="enter('3045531455657088519');" onmouseout="out('3045531455657088519');" style=""> 690                 values.put(LauncherSettings.Favorites.SCREEN, c.getInt(screenIndex));                    </span>
<span class="5472332219112284812" onmouseenter="enter('5472332219112284812');" onmouseout="out('5472332219112284812');" style=""> 691                 values.put(LauncherSettings.Favorites.CELLX, c.getInt(cellXIndex));                      </span>
<span class="6120035052521227484" onmouseenter="enter('6120035052521227484');" onmouseout="out('6120035052521227484');" style=""> 692                 values.put(LauncherSettings.Favorites.CELLY, c.getInt(cellYIndex));                      </span>
<span class="-3897523412202294315" onmouseenter="enter('-3897523412202294315');" onmouseout="out('-3897523412202294315');" style=""> 693                 values.put(LauncherSettings.Favorites.URI, c.getString(uriIndex));                       </span>
<span class="2498865833812696947" onmouseenter="enter('2498865833812696947');" onmouseout="out('2498865833812696947');" style=""> 694                 values.put(LauncherSettings.Favorites.DISPLAY_MODE, c.getInt(displayModeIndex));         </span>
<span class="-4245152200459321990" onmouseenter="enter('-4245152200459321990');" onmouseout="out('-4245152200459321990');" style=""> 695                 if (cb != null) {                                                                        </span>
<span class="4870668330614344154" onmouseenter="enter('4870668330614344154');" onmouseout="out('4870668330614344154');" style=""> 696                     cb.onRow(values);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 697                 }                                                                                        </span>
<span class="-995699744874558784" onmouseenter="enter('-995699744874558784');" onmouseout="out('-995699744874558784');" style=""> 698                 rows[i++] = values;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699             }                                                                                            </span>
<span  style=""> 700                                                                                                          </span>
<span class="-926962837754337949" onmouseenter="enter('-926962837754337949');" onmouseout="out('-926962837754337949');" style=""> 701             int total = 0;                                                                               </span>
<span class="81359043772452968" onmouseenter="enter('81359043772452968');" onmouseout="out('81359043772452968');" style=""> 702             if (i &gt; 0) {                                                                                 </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 703                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 704                 try {                                                                                    </span>
<span class="-7246991316390337770" onmouseenter="enter('-7246991316390337770');" onmouseout="out('-7246991316390337770');" style=""> 705                     int numValues = rows.length;                                                         </span>
<span class="5056751384864650727" onmouseenter="enter('5056751384864650727');" onmouseout="out('5056751384864650727');" style=""> 706                     for (i = 0; i &lt; numValues; i++) {                                                    </span>
<span class="-1571204467017813682" onmouseenter="enter('-1571204467017813682');" onmouseout="out('-1571204467017813682');" style=""> 707                         if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, rows[i]) &lt; 0) {            </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 708                             return 0;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 709                         } else {                                                                         </span>
<span class="-6740236498121811269" onmouseenter="enter('-6740236498121811269');" onmouseout="out('-6740236498121811269');" style=""> 710                             total++;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 711                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 712                     }                                                                                    </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 713                     db.setTransactionSuccessful();                                                       </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 714                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 715                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717             }                                                                                            </span>
<span  style=""> 718                                                                                                          </span>
<span class="2697150586857397017" onmouseenter="enter('2697150586857397017');" onmouseout="out('2697150586857397017');" style=""> 719             return total;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720         }                                                                                                </span>
<span  style=""> 721                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 722         @Override                                                                                        </span>
<span class="-4655538025867202729" onmouseenter="enter('-4655538025867202729');" onmouseout="out('-4655538025867202729');" style=""> 723         public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {                       </span>
<span class="-3337256987478665120" onmouseenter="enter('-3337256987478665120');" onmouseout="out('-3337256987478665120');" style=""> 724             if (LOGD) Log.d(TAG, &quot;onUpgrade triggered: &quot; + oldVersion);                                  </span>
<span  style=""> 725                                                                                                          </span>
<span class="-8802630880728694567" onmouseenter="enter('-8802630880728694567');" onmouseout="out('-8802630880728694567');" style=""> 726             int version = oldVersion;                                                                    </span>
<span class="-5425159362257487314" onmouseenter="enter('-5425159362257487314');" onmouseout="out('-5425159362257487314');" style=""> 727             if (version &lt; 3) {                                                                           </span>
<span class="-2417274034218376965" onmouseenter="enter('-2417274034218376965');" onmouseout="out('-2417274034218376965');" style=""> 728                 // upgrade 1,2 -&gt; 3 added appWidgetId column                                             </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 729                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 730                 try {                                                                                    </span>
<span class="4546757928378359668" onmouseenter="enter('4546757928378359668');" onmouseout="out('4546757928378359668');" style=""> 731                     // Insert new column for holding appWidgetIds                                        </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style=""> 732                     db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                </span>
<span class="6961844796110862285" onmouseenter="enter('6961844796110862285');" onmouseout="out('6961844796110862285');" style=""> 733                         &quot;ADD COLUMN appWidgetId INTEGER NOT NULL DEFAULT -1;&quot;);                          </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 734                     db.setTransactionSuccessful();                                                       </span>
<span class="-6619390710608343599" onmouseenter="enter('-6619390710608343599');" onmouseout="out('-6619390710608343599');" style=""> 735                     version = 3;                                                                         </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 736                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 737                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 738                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 739                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 740                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741                 }                                                                                        </span>
<span  style=""> 742                                                                                                          </span>
<span class="1631695491108164926" onmouseenter="enter('1631695491108164926');" onmouseout="out('1631695491108164926');" style=""> 743                 // Convert existing widgets only if table upgrade was successful                         </span>
<span class="-7093961016817560639" onmouseenter="enter('-7093961016817560639');" onmouseout="out('-7093961016817560639');" style=""> 744                 if (version == 3) {                                                                      </span>
<span class="3525871662547532743" onmouseenter="enter('3525871662547532743');" onmouseout="out('3525871662547532743');" style=""> 745                     convertWidgets(db);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 746                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 747             }                                                                                            </span>
<span  style=""> 748                                                                                                          </span>
<span class="7123741489573350525" onmouseenter="enter('7123741489573350525');" onmouseout="out('7123741489573350525');" style=""> 749             if (version &lt; 4) {                                                                           </span>
<span class="-1292745360473422768" onmouseenter="enter('-1292745360473422768');" onmouseout="out('-1292745360473422768');" style=""> 750                 version = 4;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 751             }                                                                                            </span>
<span  style=""> 752                                                                                                          </span>
<span class="6482639089576313913" onmouseenter="enter('6482639089576313913');" onmouseout="out('6482639089576313913');" style=""> 753             // Where&#x27;s version 5?                                                                        </span>
<span class="7401379391869430937" onmouseenter="enter('7401379391869430937');" onmouseout="out('7401379391869430937');" style=""> 754             // - Donut and sholes on 2.0 shipped with version 4 of launcher1.                            </span>
<span class="4550024416175236584" onmouseenter="enter('4550024416175236584');" onmouseout="out('4550024416175236584');" style=""> 755             // - Passion shipped on 2.1 with version 6 of launcher3                                      </span>
<span class="4643679491884513187" onmouseenter="enter('4643679491884513187');" onmouseout="out('4643679491884513187');" style=""> 756             // - Sholes shipped on 2.1r1 (aka Mr. 3) with version 5 of launcher 1                        </span>
<span class="2361571311120014026" onmouseenter="enter('2361571311120014026');" onmouseout="out('2361571311120014026');" style=""> 757             //   but version 5 on there was the updateContactsShortcuts change                           </span>
<span class="916676184009822657" onmouseenter="enter('916676184009822657');" onmouseout="out('916676184009822657');" style=""> 758             //   which was version 6 in launcher 2 (first shipped on passion 2.1r1).                     </span>
<span class="6967404598887501241" onmouseenter="enter('6967404598887501241');" onmouseout="out('6967404598887501241');" style=""> 759             // The updateContactsShortcuts change is idempotent, so running it twice                     </span>
<span class="-4148752693610229392" onmouseenter="enter('-4148752693610229392');" onmouseout="out('-4148752693610229392');" style=""> 760             // is okay so we&#x27;ll do that when upgrading the devices that shipped with it.                 </span>
<span class="1172017862291778682" onmouseenter="enter('1172017862291778682');" onmouseout="out('1172017862291778682');" style=""> 761             if (version &lt; 6) {                                                                           </span>
<span class="-4714606279470185999" onmouseenter="enter('-4714606279470185999');" onmouseout="out('-4714606279470185999');" style=""> 762                 // We went from 3 to 5 screens. Move everything 1 to the right                           </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 763                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 764                 try {                                                                                    </span>
<span class="-2465047726863656951" onmouseenter="enter('-2465047726863656951');" onmouseout="out('-2465047726863656951');" style=""> 765                     db.execSQL(&quot;UPDATE favorites SET screen=(screen + 1);&quot;);                             </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 766                     db.setTransactionSuccessful();                                                       </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 767                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 768                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 769                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 770                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 771                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772                 }                                                                                        </span>
<span  style=""> 773                                                                                                          </span>
<span class="3359107920988636953" onmouseenter="enter('3359107920988636953');" onmouseout="out('3359107920988636953');" style=""> 774                // We added the fast track.                                                               </span>
<span class="6879465795009519434" onmouseenter="enter('6879465795009519434');" onmouseout="out('6879465795009519434');" style=""> 775                 if (updateContactsShortcuts(db)) {                                                       </span>
<span class="-3149591875898901499" onmouseenter="enter('-3149591875898901499');" onmouseout="out('-3149591875898901499');" style=""> 776                     version = 6;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778             }                                                                                            </span>
<span  style=""> 779                                                                                                          </span>
<span class="-4096035694772114683" onmouseenter="enter('-4096035694772114683');" onmouseout="out('-4096035694772114683');" style=""> 780             if (version &lt; 7) {                                                                           </span>
<span class="-8891998191995357912" onmouseenter="enter('-8891998191995357912');" onmouseout="out('-8891998191995357912');" style=""> 781                 // Version 7 gets rid of the special search widget.                                      </span>
<span class="3525871662547532743" onmouseenter="enter('3525871662547532743');" onmouseout="out('3525871662547532743');" style=""> 782                 convertWidgets(db);                                                                      </span>
<span class="-6951664793801221802" onmouseenter="enter('-6951664793801221802');" onmouseout="out('-6951664793801221802');" style=""> 783                 version = 7;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 784             }                                                                                            </span>
<span  style=""> 785                                                                                                          </span>
<span class="-1248251879101833475" onmouseenter="enter('-1248251879101833475');" onmouseout="out('-1248251879101833475');" style=""> 786             if (version &lt; 8) {                                                                           </span>
<span class="1879618913628591947" onmouseenter="enter('1879618913628591947');" onmouseout="out('1879618913628591947');" style=""> 787                 // Version 8 (froyo) has the icons all normalized.  This should                          </span>
<span class="1410277882483187159" onmouseenter="enter('1410277882483187159');" onmouseout="out('1410277882483187159');" style=""> 788                 // already be the case in practice, but we now rely on it and don&#x27;t                      </span>
<span class="-3319181677834820205" onmouseenter="enter('-3319181677834820205');" onmouseout="out('-3319181677834820205');" style=""> 789                 // resample the images each time.                                                        </span>
<span class="7216681148101386433" onmouseenter="enter('7216681148101386433');" onmouseout="out('7216681148101386433');" style=""> 790                 normalizeIcons(db);                                                                      </span>
<span class="6147903305187288829" onmouseenter="enter('6147903305187288829');" onmouseout="out('6147903305187288829');" style=""> 791                 version = 8;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 792             }                                                                                            </span>
<span  style=""> 793                                                                                                          </span>
<span class="6768331519074392653" onmouseenter="enter('6768331519074392653');" onmouseout="out('6768331519074392653');" style=""> 794             if (version &lt; 9) {                                                                           </span>
<span class="8243563970233142625" onmouseenter="enter('8243563970233142625');" onmouseout="out('8243563970233142625');" style=""> 795                 // The max id is not yet set at this point (onUpgrade is triggered in the ctor           </span>
<span class="-4187395928482309064" onmouseenter="enter('-4187395928482309064');" onmouseout="out('-4187395928482309064');" style=""> 796                 // before it gets a change to get set, so we need to read it here when we use it)        </span>
<span class="-8239698715373110075" onmouseenter="enter('-8239698715373110075');" onmouseout="out('-8239698715373110075');" style=""> 797                 if (mMaxItemId == -1) {                                                                  </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style=""> 798                     mMaxItemId = initializeMaxItemId(db);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799                 }                                                                                        </span>
<span  style=""> 800                                                                                                          </span>
<span class="-4554457343861029044" onmouseenter="enter('-4554457343861029044');" onmouseout="out('-4554457343861029044');" style=""> 801                 // Add default hotseat icons                                                             </span>
<span class="-3856450728240565780" onmouseenter="enter('-3856450728240565780');" onmouseout="out('-3856450728240565780');" style=""> 802                 loadFavorites(db, new SimpleWorkspaceLoader(this, mContext.getResources(),               </span>
<span class="6976293370975867955" onmouseenter="enter('6976293370975867955');" onmouseout="out('6976293370975867955');" style=""> 803                         R.xml.update_workspace));                                                        </span>
<span class="-594084224270713246" onmouseenter="enter('-594084224270713246');" onmouseout="out('-594084224270713246');" style=""> 804                 version = 9;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 805             }                                                                                            </span>
<span  style=""> 806                                                                                                          </span>
<span class="-7982941174706227991" onmouseenter="enter('-7982941174706227991');" onmouseout="out('-7982941174706227991');" style=""> 807             // We bumped the version three time during JB, once to update the launch flags, once to      </span>
<span class="7433541256107994824" onmouseenter="enter('7433541256107994824');" onmouseout="out('7433541256107994824');" style=""> 808             // update the override for the default launch animation and once to set the mimetype         </span>
<span class="4208501542736368890" onmouseenter="enter('4208501542736368890');" onmouseout="out('4208501542736368890');" style=""> 809             // to improve startup performance                                                            </span>
<span class="3825613730133245417" onmouseenter="enter('3825613730133245417');" onmouseout="out('3825613730133245417');" style=""> 810             if (version &lt; 12) {                                                                          </span>
<span class="5911633270557452673" onmouseenter="enter('5911633270557452673');" onmouseout="out('5911633270557452673');" style=""> 811                 // Contact shortcuts need a different set of flags to be launched now                    </span>
<span class="-5428628100729683964" onmouseenter="enter('-5428628100729683964');" onmouseout="out('-5428628100729683964');" style=""> 812                 // The updateContactsShortcuts change is idempotent, so we can keep using it like        </span>
<span class="-2960298673245938215" onmouseenter="enter('-2960298673245938215');" onmouseout="out('-2960298673245938215');" style=""> 813                 // back in the Donut days                                                                </span>
<span class="1461529009488007413" onmouseenter="enter('1461529009488007413');" onmouseout="out('1461529009488007413');" style=""> 814                 updateContactsShortcuts(db);                                                             </span>
<span class="-7011217505799596620" onmouseenter="enter('-7011217505799596620');" onmouseout="out('-7011217505799596620');" style=""> 815                 version = 12;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816             }                                                                                            </span>
<span  style=""> 817                                                                                                          </span>
<span class="-1127321954793168309" onmouseenter="enter('-1127321954793168309');" onmouseout="out('-1127321954793168309');" style=""> 818             if (version &lt; 13) {                                                                          </span>
<span class="6699748190088794301" onmouseenter="enter('6699748190088794301');" onmouseout="out('6699748190088794301');" style=""> 819                 // With the new shrink-wrapped and re-orderable workspaces, it makes sense               </span>
<span class="4525637906322106897" onmouseenter="enter('4525637906322106897');" onmouseout="out('4525637906322106897');" style=""> 820                 // to persist workspace screens and their relative order.                                </span>
<span class="-1030858145638239039" onmouseenter="enter('-1030858145638239039');" onmouseout="out('-1030858145638239039');" style=""> 821                 mMaxScreenId = 0;                                                                        </span>
<span  style=""> 822                                                                                                          </span>
<span class="8374575243144004387" onmouseenter="enter('8374575243144004387');" onmouseout="out('8374575243144004387');" style=""> 823                 // This will never happen in the wild, but when we switch to using workspace             </span>
<span class="3035044480614384952" onmouseenter="enter('3035044480614384952');" onmouseout="out('3035044480614384952');" style=""> 824                 // screen ids, redo the import from old launcher.                                        </span>
<span class="-2687113980558593499" onmouseenter="enter('-2687113980558593499');" onmouseout="out('-2687113980558593499');" style=""> 825                 sJustLoadedFromOldDb = true;                                                             </span>
<span  style=""> 826                                                                                                          </span>
<span class="4995577433356427338" onmouseenter="enter('4995577433356427338');" onmouseout="out('4995577433356427338');" style=""> 827                 addWorkspacesTable(db);                                                                  </span>
<span class="-1031230936357450444" onmouseenter="enter('-1031230936357450444');" onmouseout="out('-1031230936357450444');" style=""> 828                 version = 13;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 829             }                                                                                            </span>
<span  style=""> 830                                                                                                          </span>
<span class="-3790290227926597654" onmouseenter="enter('-3790290227926597654');" onmouseout="out('-3790290227926597654');" style=""> 831             if (version &lt; 14) {                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 832                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 833                 try {                                                                                    </span>
<span class="-3399391435431896428" onmouseenter="enter('-3399391435431896428');" onmouseout="out('-3399391435431896428');" style=""> 834                     // Insert new column for holding widget provider name                                </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style=""> 835                     db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                </span>
<span class="-1191376551368325446" onmouseenter="enter('-1191376551368325446');" onmouseout="out('-1191376551368325446');" style=""> 836                             &quot;ADD COLUMN appWidgetProvider TEXT;&quot;);                                       </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 837                     db.setTransactionSuccessful();                                                       </span>
<span class="-6853964272080073312" onmouseenter="enter('-6853964272080073312');" onmouseout="out('-6853964272080073312');" style=""> 838                     version = 14;                                                                        </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 839                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 840                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 841                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 842                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 843                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 844                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 845             }                                                                                            </span>
<span  style=""> 846                                                                                                          </span>
<span class="4742571203445114157" onmouseenter="enter('4742571203445114157');" onmouseout="out('4742571203445114157');" style=""> 847             if (version &lt; 15) {                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 848                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 849                 try {                                                                                    </span>
<span class="4980089996717210691" onmouseenter="enter('4980089996717210691');" onmouseout="out('4980089996717210691');" style=""> 850                     // Insert new column for holding update timestamp                                    </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style=""> 851                     db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                </span>
<span class="-6587870365196648620" onmouseenter="enter('-6587870365196648620');" onmouseout="out('-6587870365196648620');" style=""> 852                             &quot;ADD COLUMN modified INTEGER NOT NULL DEFAULT 0;&quot;);                          </span>
<span class="-134194254938928149" onmouseenter="enter('-134194254938928149');" onmouseout="out('-134194254938928149');" style=""> 853                     db.execSQL(&quot;ALTER TABLE workspaceScreens &quot; +                                         </span>
<span class="-6587870365196648620" onmouseenter="enter('-6587870365196648620');" onmouseout="out('-6587870365196648620');" style=""> 854                             &quot;ADD COLUMN modified INTEGER NOT NULL DEFAULT 0;&quot;);                          </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 855                     db.setTransactionSuccessful();                                                       </span>
<span class="8988210671545584151" onmouseenter="enter('8988210671545584151');" onmouseout="out('8988210671545584151');" style=""> 856                     version = 15;                                                                        </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 857                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 858                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 859                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 860                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 861                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 862                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 863             }                                                                                            </span>
<span  style=""> 864                                                                                                          </span>
<span  style=""> 865                                                                                                          </span>
<span class="1076365416612257192" onmouseenter="enter('1076365416612257192');" onmouseout="out('1076365416612257192');" style=""> 866             if (version &lt; 16) {                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 867                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 868                 try {                                                                                    </span>
<span class="4715697150589634772" onmouseenter="enter('4715697150589634772');" onmouseout="out('4715697150589634772');" style=""> 869                     // Insert new column for holding restore status                                      </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style=""> 870                     db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                </span>
<span class="1880054724854477963" onmouseenter="enter('1880054724854477963');" onmouseout="out('1880054724854477963');" style=""> 871                             &quot;ADD COLUMN restored INTEGER NOT NULL DEFAULT 0;&quot;);                          </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 872                     db.setTransactionSuccessful();                                                       </span>
<span class="2013829968714493382" onmouseenter="enter('2013829968714493382');" onmouseout="out('2013829968714493382');" style=""> 873                     version = 16;                                                                        </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 874                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 875                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 876                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 877                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 878                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880             }                                                                                            </span>
<span  style=""> 881                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 882 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-6756468306354214848" onmouseenter="enter('-6756468306354214848');" onmouseout="out('-6756468306354214848');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 883             if (version &lt; 17) {                                                                          </span>
<span class="-8925898828002148199" onmouseenter="enter('-8925898828002148199');" onmouseout="out('-8925898828002148199');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 884                 // We use the db version upgrade here to identify users who may not have seen            </span>
<span class="2421121084363663195" onmouseenter="enter('2421121084363663195');" onmouseout="out('2421121084363663195');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 885                 // clings yet (because they weren&#x27;t available), but for whom the clings are now          </span>
<span class="-3819212007201998918" onmouseenter="enter('-3819212007201998918');" onmouseout="out('-3819212007201998918');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 886                 // available (tablet users). Because one of the possible cling flows (migration)         </span>
<span class="-6235100359092849352" onmouseenter="enter('-6235100359092849352');" onmouseout="out('-6235100359092849352');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 887                 // is very destructive (wipes out workspaces), we want to prevent this from showing      </span>
<span class="-2001927373741844508" onmouseenter="enter('-2001927373741844508');" onmouseout="out('-2001927373741844508');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 888                 // until clear data. We do so by marking that the clings have been shown.                </span>
<span class="9168128908795605867" onmouseenter="enter('9168128908795605867');" onmouseout="out('9168128908795605867');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 889                 LauncherClings.synchonouslyMarkFirstRunClingDismissed(mContext);                         </span>
<span class="-3652383409155171451" onmouseenter="enter('-3652383409155171451');" onmouseout="out('-3652383409155171451');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 890                 version = 17;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 891             }                                                                                            </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 892                                                                                                          </span>
<span class="7817650129783202172" onmouseenter="enter('7817650129783202172');" onmouseout="out('7817650129783202172');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 893             if (version &lt; 18) {                                                                          </span>
<span class="-5748373616457914051" onmouseenter="enter('-5748373616457914051');" onmouseout="out('-5748373616457914051');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 894                 // No-op                                                                                 </span>
<span class="-862393984298106042" onmouseenter="enter('-862393984298106042');" onmouseout="out('-862393984298106042');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 895                 version = 18;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 896             }                                                                                            </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 897                                                                                                          </span>
<span class="-3427379715691059477" onmouseenter="enter('-3427379715691059477');" onmouseout="out('-3427379715691059477');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 898             if (version &lt; 19) {                                                                          </span>
<span class="4571181047088430074" onmouseenter="enter('4571181047088430074');" onmouseout="out('4571181047088430074');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 899                 // Due to a data loss bug, some users may have items associated with screen ids          </span>
<span class="5190859357842058169" onmouseenter="enter('5190859357842058169');" onmouseout="out('5190859357842058169');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 900                 // which no longer exist. Since this can cause other problems, and since the user        </span>
<span class="-6625319271568400514" onmouseenter="enter('-6625319271568400514');" onmouseout="out('-6625319271568400514');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 901                 // will never see these items anyway, we use database upgrade as an opportunity to       </span>
<span class="2555207824693971320" onmouseenter="enter('2555207824693971320');" onmouseout="out('2555207824693971320');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 902                 // clean things up.                                                                      </span>
<span class="6001089319165901827" onmouseenter="enter('6001089319165901827');" onmouseout="out('6001089319165901827');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 903                 removeOrphanedItems(db);                                                                 </span>
<span class="-8622797196606405802" onmouseenter="enter('-8622797196606405802');" onmouseout="out('-8622797196606405802');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 904                 version = 19;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 905             }                                                                                            </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 906                                                                                                          </span>
<span class="7499725911390962675" onmouseenter="enter('7499725911390962675');" onmouseout="out('7499725911390962675');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 907             if (version &lt; 20) {                                                                          </span>
<span class="7544427300199377589" onmouseenter="enter('7544427300199377589');" onmouseout="out('7544427300199377589');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 908                 // Add userId column                                                                     </span>
<span class="3648122535018422218" onmouseenter="enter('3648122535018422218');" onmouseout="out('3648122535018422218');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 909                 if (addProfileColumn(db)) {                                                              </span>
<span class="-3196204954256045340" onmouseenter="enter('-3196204954256045340');" onmouseout="out('-3196204954256045340');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 910                     version = 20;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 911                 }                                                                                        </span>
<span class="-7922924049235754756" onmouseenter="enter('-7922924049235754756');" onmouseout="out('-7922924049235754756');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 912                 // else old version remains, which means we wipe old data                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 913             }                                                                                            </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 914                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 915 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-6756468306354214848" onmouseenter="enter('-6756468306354214848');" onmouseout="out('-6756468306354214848');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 916             if (version &lt; 17) {                                                                          </span>
<span class="-8925898828002148199" onmouseenter="enter('-8925898828002148199');" onmouseout="out('-8925898828002148199');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 917                 // We use the db version upgrade here to identify users who may not have seen            </span>
<span class="2421121084363663195" onmouseenter="enter('2421121084363663195');" onmouseout="out('2421121084363663195');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 918                 // clings yet (because they weren&#x27;t available), but for whom the clings are now          </span>
<span class="-3819212007201998918" onmouseenter="enter('-3819212007201998918');" onmouseout="out('-3819212007201998918');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 919                 // available (tablet users). Because one of the possible cling flows (migration)         </span>
<span class="-6235100359092849352" onmouseenter="enter('-6235100359092849352');" onmouseout="out('-6235100359092849352');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 920                 // is very destructive (wipes out workspaces), we want to prevent this from showing      </span>
<span class="-2001927373741844508" onmouseenter="enter('-2001927373741844508');" onmouseout="out('-2001927373741844508');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 921                 // until clear data. We do so by marking that the clings have been shown.                </span>
<span class="9168128908795605867" onmouseenter="enter('9168128908795605867');" onmouseout="out('9168128908795605867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 922                 LauncherClings.synchonouslyMarkFirstRunClingDismissed(mContext);                         </span>
<span class="-3652383409155171451" onmouseenter="enter('-3652383409155171451');" onmouseout="out('-3652383409155171451');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 923                 version = 17;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 924             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 925                                                                                                          </span>
<span class="114284109908766623" onmouseenter="enter('114284109908766623');" onmouseout="out('114284109908766623');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 926             if (version != DATABASE_VERSION) {                                                           </span>
<span class="-7581134992168079572" onmouseenter="enter('-7581134992168079572');" onmouseout="out('-7581134992168079572');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 927                 Log.w(TAG, &quot;Destroying all old data.&quot;);                                                  </span>
<span class="-5910745818286558462" onmouseenter="enter('-5910745818286558462');" onmouseout="out('-5910745818286558462');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 928                 db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_FAVORITES);                                   </span>
<span class="-5689649720940552120" onmouseenter="enter('-5689649720940552120');" onmouseout="out('-5689649720940552120');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 929                 db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_WORKSPACE_SCREENS);                           </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 930                                                                                                          </span>
<span class="1466158746107327510" onmouseenter="enter('1466158746107327510');" onmouseout="out('1466158746107327510');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 931                 onCreate(db);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 932             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 933         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 934                                                                                                          </span>
<span class="5499500447724615611" onmouseenter="enter('5499500447724615611');" onmouseout="out('5499500447724615611');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 935         private boolean updateContactsShortcuts(SQLiteDatabase db) {                                     </span>
<span class="-5246681680504373128" onmouseenter="enter('-5246681680504373128');" onmouseout="out('-5246681680504373128');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 936             final String selectWhere = buildOrWhereString(Favorites.ITEM_TYPE,                           </span>
<span class="663694814520566372" onmouseenter="enter('663694814520566372');" onmouseout="out('663694814520566372');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 937                     new int[] { Favorites.ITEM_TYPE_SHORTCUT });                                         </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 938                                                                                                          </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 939             Cursor c = null;                                                                             </span>
<span class="4160534408674485909" onmouseenter="enter('4160534408674485909');" onmouseout="out('4160534408674485909');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 940             final String actionQuickContact = &quot;com.android.contacts.action.QUICK_CONTACT&quot;;               </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 941             db.beginTransaction();                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 942             try {                                                                                        </span>
<span class="9180803436248323281" onmouseenter="enter('9180803436248323281');" onmouseout="out('9180803436248323281');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 943                 // Select and iterate through each matching widget                                       </span>
<span class="4665304866696389373" onmouseenter="enter('4665304866696389373');" onmouseout="out('4665304866696389373');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 944                 c = db.query(TABLE_FAVORITES,                                                            </span>
<span class="4805400763366238176" onmouseenter="enter('4805400763366238176');" onmouseout="out('4805400763366238176');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 945                         new String[] { Favorites._ID, Favorites.INTENT },                                </span>
<span class="523753735101753681" onmouseenter="enter('523753735101753681');" onmouseout="out('523753735101753681');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 946                         selectWhere, null, null, null, null);                                            </span>
<span class="1775362941851830832" onmouseenter="enter('1775362941851830832');" onmouseout="out('1775362941851830832');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 947                 if (c == null) return false;                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 948                                                                                                          </span>
<span class="5404371667899517548" onmouseenter="enter('5404371667899517548');" onmouseout="out('5404371667899517548');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 949                 if (LOGD) Log.d(TAG, &quot;found upgrade cursor count=&quot; + c.getCount());                      </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 950                                                                                                          </span>
<span class="-8932698383566096473" onmouseenter="enter('-8932698383566096473');" onmouseout="out('-8932698383566096473');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 951                 final int idIndex = c.getColumnIndex(Favorites._ID);                                     </span>
<span class="-7954812698804343751" onmouseenter="enter('-7954812698804343751');" onmouseout="out('-7954812698804343751');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 952                 final int intentIndex = c.getColumnIndex(Favorites.INTENT);                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 953                                                                                                          </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 954                 while (c.moveToNext()) {                                                                 </span>
<span class="6875941046716392375" onmouseenter="enter('6875941046716392375');" onmouseout="out('6875941046716392375');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 955                     long favoriteId = c.getLong(idIndex);                                                </span>
<span class="3433703641134815896" onmouseenter="enter('3433703641134815896');" onmouseout="out('3433703641134815896');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 956                     final String intentUri = c.getString(intentIndex);                                   </span>
<span class="6989258921658153377" onmouseenter="enter('6989258921658153377');" onmouseout="out('6989258921658153377');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 957                     if (intentUri != null) {                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 958                         try {                                                                            </span>
<span class="3224994041104735669" onmouseenter="enter('3224994041104735669');" onmouseout="out('3224994041104735669');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 959                             final Intent intent = Intent.parseUri(intentUri, 0);                         </span>
<span class="5533062021406091698" onmouseenter="enter('5533062021406091698');" onmouseout="out('5533062021406091698');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 960                             android.util.Log.d(&quot;Home&quot;, intent.toString());                               </span>
<span class="4116887484198527532" onmouseenter="enter('4116887484198527532');" onmouseout="out('4116887484198527532');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 961                             final Uri uri = intent.getData();                                            </span>
<span class="-6789028041247471756" onmouseenter="enter('-6789028041247471756');" onmouseout="out('-6789028041247471756');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 962                             if (uri != null) {                                                           </span>
<span class="-4564881707745344748" onmouseenter="enter('-4564881707745344748');" onmouseout="out('-4564881707745344748');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 963                                 final String data = uri.toString();                                      </span>
<span class="-3445805239696980037" onmouseenter="enter('-3445805239696980037');" onmouseout="out('-3445805239696980037');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 964                                 if ((Intent.ACTION_VIEW.equals(intent.getAction()) ||                    </span>
<span class="7710869890592179741" onmouseenter="enter('7710869890592179741');" onmouseout="out('7710869890592179741');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 965                                         actionQuickContact.equals(intent.getAction())) &amp;&amp;                </span>
<span class="1393218364054108713" onmouseenter="enter('1393218364054108713');" onmouseout="out('1393218364054108713');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 966                                         (data.startsWith(&quot;content://contacts/people/&quot;) ||                </span>
<span class="3162645299085480663" onmouseenter="enter('3162645299085480663');" onmouseout="out('3162645299085480663');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 967                                         data.startsWith(&quot;content://com.android.contacts/&quot; +              </span>
<span class="1650514809492671891" onmouseenter="enter('1650514809492671891');" onmouseout="out('1650514809492671891');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 968                                                 &quot;contacts/lookup/&quot;))) {                                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 969                                                                                                          </span>
<span class="-5469073692284735657" onmouseenter="enter('-5469073692284735657');" onmouseout="out('-5469073692284735657');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 970                                     final Intent newIntent = new Intent(actionQuickContact);             </span>
<span class="-5357614275754596903" onmouseenter="enter('-5357614275754596903');" onmouseout="out('-5357614275754596903');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 971                                     // When starting from the launcher, start in a new, cleared task     </span>
<span class="1092229780699807802" onmouseenter="enter('1092229780699807802');" onmouseout="out('1092229780699807802');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 972                                     // CLEAR_WHEN_TASK_RESET cannot reset the root of a task, so we      </span>
<span class="7141574357287672100" onmouseenter="enter('7141574357287672100');" onmouseout="out('7141574357287672100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 973                                     // clear the whole thing preemptively here since                     </span>
<span class="905959402729533596" onmouseenter="enter('905959402729533596');" onmouseout="out('905959402729533596');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 974                                     // QuickContactActivity will finish itself when launching other      </span>
<span class="5522675427683616835" onmouseenter="enter('5522675427683616835');" onmouseout="out('5522675427683616835');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 975                                     // detail activities.                                                </span>
<span class="-6190018245568891923" onmouseenter="enter('-6190018245568891923');" onmouseout="out('-6190018245568891923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 976                                     newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK |                   </span>
<span class="-3783234242978371980" onmouseenter="enter('-3783234242978371980');" onmouseout="out('-3783234242978371980');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 977                                             Intent.FLAG_ACTIVITY_CLEAR_TASK);                            </span>
<span class="1401110889443382842" onmouseenter="enter('1401110889443382842');" onmouseout="out('1401110889443382842');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 978                                     newIntent.putExtra(                                                  </span>
<span class="-732821300906687093" onmouseenter="enter('-732821300906687093');" onmouseout="out('-732821300906687093');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 979                                             Launcher.INTENT_EXTRA_IGNORE_LAUNCH_ANIMATION, true);        </span>
<span class="8197006267053771341" onmouseenter="enter('8197006267053771341');" onmouseout="out('8197006267053771341');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 980                                     newIntent.setData(uri);                                              </span>
<span class="-4929716720656164338" onmouseenter="enter('-4929716720656164338');" onmouseout="out('-4929716720656164338');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 981                                     // Determine the type and also put that in the shortcut              </span>
<span class="-3103165564621535069" onmouseenter="enter('-3103165564621535069');" onmouseout="out('-3103165564621535069');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 982                                     // (that can speed up launch a bit)                                  </span>
<span class="-8187273376333901727" onmouseenter="enter('-8187273376333901727');" onmouseout="out('-8187273376333901727');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 983                                     newIntent.setDataAndType(uri, newIntent.resolveType(mContext));      </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 984                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 985                                     final ContentValues values = new ContentValues();                    </span>
<span class="-1283328052029016277" onmouseenter="enter('-1283328052029016277');" onmouseout="out('-1283328052029016277');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 986                                     values.put(LauncherSettings.Favorites.INTENT,                        </span>
<span class="7573125619952719253" onmouseenter="enter('7573125619952719253');" onmouseout="out('7573125619952719253');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 987                                             newIntent.toUri(0));                                         </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 988                                                                                                          </span>
<span class="-7922633388955325898" onmouseenter="enter('-7922633388955325898');" onmouseout="out('-7922633388955325898');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 989                                     String updateWhere = Favorites._ID + &quot;=&quot; + favoriteId;               </span>
<span class="6932880072735485862" onmouseenter="enter('6932880072735485862');" onmouseout="out('6932880072735485862');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 990                                     db.update(TABLE_FAVORITES, values, updateWhere, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 991                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 992                             }                                                                            </span>
<span class="3255801419413274971" onmouseenter="enter('3255801419413274971');" onmouseout="out('3255801419413274971');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 993                         } catch (RuntimeException ex) {                                                  </span>
<span class="-70893878647116908" onmouseenter="enter('-70893878647116908');" onmouseout="out('-70893878647116908');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 994                             Log.e(TAG, &quot;Problem upgrading shortcut&quot;, ex);                                </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 995                         } catch (URISyntaxException e) {                                                 </span>
<span class="-2505277559722110760" onmouseenter="enter('-2505277559722110760');" onmouseout="out('-2505277559722110760');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 996                             Log.e(TAG, &quot;Problem upgrading shortcut&quot;, e);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 997                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 998                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 999                 }                                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1000                                                                                                          </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1001                 db.setTransactionSuccessful();                                                           </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1002             } catch (SQLException ex) {                                                                  </span>
<span class="983414259163783750" onmouseenter="enter('983414259163783750');" onmouseout="out('983414259163783750');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1003                 Log.w(TAG, &quot;Problem while upgrading contacts&quot;, ex);                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1004                 return false;                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1005             } finally {                                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1006                 db.endTransaction();                                                                     </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1007                 if (c != null) {                                                                         </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1008                     c.close();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1009                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1010             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1011                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1012             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1013         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1014                                                                                                          </span>
<span class="-3532559559626407446" onmouseenter="enter('-3532559559626407446');" onmouseout="out('-3532559559626407446');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1015         private void normalizeIcons(SQLiteDatabase db) {                                                 </span>
<span class="-7234787096538067088" onmouseenter="enter('-7234787096538067088');" onmouseout="out('-7234787096538067088');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1016             Log.d(TAG, &quot;normalizing icons&quot;);                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1017                                                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1018             db.beginTransaction();                                                                       </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1019             Cursor c = null;                                                                             </span>
<span class="-1648170941042077979" onmouseenter="enter('-1648170941042077979');" onmouseout="out('-1648170941042077979');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1020             SQLiteStatement update = null;                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1021             try {                                                                                        </span>
<span class="6948794688019806881" onmouseenter="enter('6948794688019806881');" onmouseout="out('6948794688019806881');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1022                 boolean logged = false;                                                                  </span>
<span class="-9148924222948643220" onmouseenter="enter('-9148924222948643220');" onmouseout="out('-9148924222948643220');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1023                 update = db.compileStatement(&quot;UPDATE favorites &quot;                                         </span>
<span class="2242861074041662063" onmouseenter="enter('2242861074041662063');" onmouseout="out('2242861074041662063');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1024                         + &quot;SET icon=? WHERE _id=?&quot;);                                                     </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1025                                                                                                          </span>
<span class="4784505011002524429" onmouseenter="enter('4784505011002524429');" onmouseout="out('4784505011002524429');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1026                 c = db.rawQuery(&quot;SELECT _id, icon FROM favorites WHERE iconType=&quot; +                      </span>
<span class="-8247570245083797300" onmouseenter="enter('-8247570245083797300');" onmouseout="out('-8247570245083797300');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1027                         Favorites.ICON_TYPE_BITMAP, null);                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1028                                                                                                          </span>
<span class="-6790628464290794012" onmouseenter="enter('-6790628464290794012');" onmouseout="out('-6790628464290794012');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1029                 final int idIndex = c.getColumnIndexOrThrow(Favorites._ID);                              </span>
<span class="-8328869542966343431" onmouseenter="enter('-8328869542966343431');" onmouseout="out('-8328869542966343431');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1030                 final int iconIndex = c.getColumnIndexOrThrow(Favorites.ICON);                           </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1031                                                                                                          </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1032                 while (c.moveToNext()) {                                                                 </span>
<span class="-8135609918244190533" onmouseenter="enter('-8135609918244190533');" onmouseout="out('-8135609918244190533');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1033                     long id = c.getLong(idIndex);                                                        </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1034                     byte[] data = c.getBlob(iconIndex);                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1035                     try {                                                                                </span>
<span class="1618116421659449587" onmouseenter="enter('1618116421659449587');" onmouseout="out('1618116421659449587');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1036                         Bitmap bitmap = Utilities.resampleIconBitmap(                                    </span>
<span class="5250274324470409582" onmouseenter="enter('5250274324470409582');" onmouseout="out('5250274324470409582');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1037                                 BitmapFactory.decodeByteArray(data, 0, data.length),                     </span>
<span class="2906315698704386153" onmouseenter="enter('2906315698704386153');" onmouseout="out('2906315698704386153');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1038                                 mContext);                                                               </span>
<span class="8226127527421310456" onmouseenter="enter('8226127527421310456');" onmouseout="out('8226127527421310456');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1039                         if (bitmap != null) {                                                            </span>
<span class="-8911608565518229217" onmouseenter="enter('-8911608565518229217');" onmouseout="out('-8911608565518229217');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1040                             update.bindLong(1, id);                                                      </span>
<span class="-3437982606997723715" onmouseenter="enter('-3437982606997723715');" onmouseout="out('-3437982606997723715');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1041                             data = ItemInfo.flattenBitmap(bitmap);                                       </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1042                             if (data != null) {                                                          </span>
<span class="8709343663161385163" onmouseenter="enter('8709343663161385163');" onmouseout="out('8709343663161385163');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1043                                 update.bindBlob(2, data);                                                </span>
<span class="-6412297069984418220" onmouseenter="enter('-6412297069984418220');" onmouseout="out('-6412297069984418220');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1044                                 update.execute();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1045                             }                                                                            </span>
<span class="-2094673185475372498" onmouseenter="enter('-2094673185475372498');" onmouseout="out('-2094673185475372498');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1046                             bitmap.recycle();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1047                         }                                                                                </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">1048 =======                                                                                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">1049 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="114284109908766623" onmouseenter="enter('114284109908766623');" onmouseout="out('114284109908766623');" style="">1050             if (version != DATABASE_VERSION) {                                                           </span>
<span class="-7581134992168079572" onmouseenter="enter('-7581134992168079572');" onmouseout="out('-7581134992168079572');" style="">1051                 Log.w(TAG, &quot;Destroying all old data.&quot;);                                                  </span>
<span class="-5910745818286558462" onmouseenter="enter('-5910745818286558462');" onmouseout="out('-5910745818286558462');" style="">1052                 db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_FAVORITES);                                   </span>
<span class="-5689649720940552120" onmouseenter="enter('-5689649720940552120');" onmouseout="out('-5689649720940552120');" style="">1053                 db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_WORKSPACE_SCREENS);                           </span>
<span  style="">1054                                                                                                          </span>
<span class="1466158746107327510" onmouseenter="enter('1466158746107327510');" onmouseout="out('1466158746107327510');" style="">1055                 onCreate(db);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1056             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1057         }                                                                                                </span>
<span  style="">1058                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1059         @Override                                                                                        </span>
<span class="-4280970083266341851" onmouseenter="enter('-4280970083266341851');" onmouseout="out('-4280970083266341851');" style="">1060         public void onDowngrade(SQLiteDatabase db, int oldVersion, int newVersion) {                     </span>
<span class="60635965215078249" onmouseenter="enter('60635965215078249');" onmouseout="out('60635965215078249');" style="">1061             // This shouldn&#x27;t happen -- throw our hands up in the air and start over.                    </span>
<span class="5860333668228362795" onmouseenter="enter('5860333668228362795');" onmouseout="out('5860333668228362795');" style="">1062             Log.w(TAG, &quot;Database version downgrade from: &quot; + oldVersion + &quot; to &quot; + newVersion +          </span>
<span class="-495411336639494791" onmouseenter="enter('-495411336639494791');" onmouseout="out('-495411336639494791');" style="">1063                     &quot;. Wiping databse.&quot;);                                                                </span>
<span class="8331352315618770000" onmouseenter="enter('8331352315618770000');" onmouseout="out('8331352315618770000');" style="">1064             createEmptyDB(db);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1065         }                                                                                                </span>
<span  style="">1066                                                                                                          </span>
<span  style="">1067                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1068         /**                                                                                              </span>
<span class="-3404890512310195543" onmouseenter="enter('-3404890512310195543');" onmouseout="out('-3404890512310195543');" style="">1069          * Clears all the data for a fresh start.                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1070          */                                                                                              </span>
<span class="3436200006891248330" onmouseenter="enter('3436200006891248330');" onmouseout="out('3436200006891248330');" style="">1071         public void createEmptyDB(SQLiteDatabase db) {                                                   </span>
<span class="-5910745818286558462" onmouseenter="enter('-5910745818286558462');" onmouseout="out('-5910745818286558462');" style="">1072             db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_FAVORITES);                                       </span>
<span class="-5689649720940552120" onmouseenter="enter('-5689649720940552120');" onmouseout="out('-5689649720940552120');" style="">1073             db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_WORKSPACE_SCREENS);                               </span>
<span class="1466158746107327510" onmouseenter="enter('1466158746107327510');" onmouseout="out('1466158746107327510');" style="">1074             onCreate(db);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1075         }                                                                                                </span>
<span  style="">1076                                                                                                          </span>
<span class="-4559468305095454841" onmouseenter="enter('-4559468305095454841');" onmouseout="out('-4559468305095454841');" style="">1077         private boolean addProfileColumn(SQLiteDatabase db) {                                            </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">1078             db.beginTransaction();                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1079             try {                                                                                        </span>
<span class="8272328117098122260" onmouseenter="enter('8272328117098122260');" onmouseout="out('8272328117098122260');" style="">1080                 UserManagerCompat userManager = UserManagerCompat.getInstance(mContext);                 </span>
<span class="4088992161441330589" onmouseenter="enter('4088992161441330589');" onmouseout="out('4088992161441330589');" style="">1081                 // Default to the serial number of this user, for older                                  </span>
<span class="3257211239898691615" onmouseenter="enter('3257211239898691615');" onmouseout="out('3257211239898691615');" style="">1082                 // shortcuts.                                                                            </span>
<span class="1087451883287607054" onmouseenter="enter('1087451883287607054');" onmouseout="out('1087451883287607054');" style="">1083                 long userSerialNumber = userManager.getSerialNumberForUser(                              </span>
<span class="334342413311659427" onmouseenter="enter('334342413311659427');" onmouseout="out('334342413311659427');" style="">1084                         UserHandleCompat.myUserHandle());                                                </span>
<span class="-7537890297935646580" onmouseenter="enter('-7537890297935646580');" onmouseout="out('-7537890297935646580');" style="">1085                 // Insert new column for holding user serial number                                      </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style="">1086                 db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                    </span>
<span class="6389325795698900878" onmouseenter="enter('6389325795698900878');" onmouseout="out('6389325795698900878');" style="">1087                         &quot;ADD COLUMN profileId INTEGER DEFAULT &quot;                                          </span>
<span class="-6027465318491077769" onmouseenter="enter('-6027465318491077769');" onmouseout="out('-6027465318491077769');" style="">1088                                         + userSerialNumber + &quot;;&quot;);                                       </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">1089                 db.setTransactionSuccessful();                                                           </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="">1090             } catch (SQLException ex) {                                                                  </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style="">1091                 // Old version remains, which means we wipe old data                                     </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style="">1092                 Log.e(TAG, ex.getMessage(), ex);                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1093                 return false;                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1094             } finally {                                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">1095                 db.endTransaction();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1096             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1097             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1098         }                                                                                                </span>
<span  style="">1099                                                                                                          </span>
<span class="5499500447724615611" onmouseenter="enter('5499500447724615611');" onmouseout="out('5499500447724615611');" style="">1100         private boolean updateContactsShortcuts(SQLiteDatabase db) {                                     </span>
<span class="-5246681680504373128" onmouseenter="enter('-5246681680504373128');" onmouseout="out('-5246681680504373128');" style="">1101             final String selectWhere = buildOrWhereString(Favorites.ITEM_TYPE,                           </span>
<span class="663694814520566372" onmouseenter="enter('663694814520566372');" onmouseout="out('663694814520566372');" style="">1102                     new int[] { Favorites.ITEM_TYPE_SHORTCUT });                                         </span>
<span  style="">1103                                                                                                          </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="">1104             Cursor c = null;                                                                             </span>
<span class="4160534408674485909" onmouseenter="enter('4160534408674485909');" onmouseout="out('4160534408674485909');" style="">1105             final String actionQuickContact = &quot;com.android.contacts.action.QUICK_CONTACT&quot;;               </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">1106             db.beginTransaction();                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1107             try {                                                                                        </span>
<span class="9180803436248323281" onmouseenter="enter('9180803436248323281');" onmouseout="out('9180803436248323281');" style="">1108                 // Select and iterate through each matching widget                                       </span>
<span class="4665304866696389373" onmouseenter="enter('4665304866696389373');" onmouseout="out('4665304866696389373');" style="">1109                 c = db.query(TABLE_FAVORITES,                                                            </span>
<span class="4805400763366238176" onmouseenter="enter('4805400763366238176');" onmouseout="out('4805400763366238176');" style="">1110                         new String[] { Favorites._ID, Favorites.INTENT },                                </span>
<span class="523753735101753681" onmouseenter="enter('523753735101753681');" onmouseout="out('523753735101753681');" style="">1111                         selectWhere, null, null, null, null);                                            </span>
<span class="1775362941851830832" onmouseenter="enter('1775362941851830832');" onmouseout="out('1775362941851830832');" style="">1112                 if (c == null) return false;                                                             </span>
<span  style="">1113                                                                                                          </span>
<span class="5404371667899517548" onmouseenter="enter('5404371667899517548');" onmouseout="out('5404371667899517548');" style="">1114                 if (LOGD) Log.d(TAG, &quot;found upgrade cursor count=&quot; + c.getCount());                      </span>
<span  style="">1115                                                                                                          </span>
<span class="-8932698383566096473" onmouseenter="enter('-8932698383566096473');" onmouseout="out('-8932698383566096473');" style="">1116                 final int idIndex = c.getColumnIndex(Favorites._ID);                                     </span>
<span class="-7954812698804343751" onmouseenter="enter('-7954812698804343751');" onmouseout="out('-7954812698804343751');" style="">1117                 final int intentIndex = c.getColumnIndex(Favorites.INTENT);                              </span>
<span  style="">1118                                                                                                          </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style="">1119                 while (c.moveToNext()) {                                                                 </span>
<span class="6875941046716392375" onmouseenter="enter('6875941046716392375');" onmouseout="out('6875941046716392375');" style="">1120                     long favoriteId = c.getLong(idIndex);                                                </span>
<span class="3433703641134815896" onmouseenter="enter('3433703641134815896');" onmouseout="out('3433703641134815896');" style="">1121                     final String intentUri = c.getString(intentIndex);                                   </span>
<span class="6989258921658153377" onmouseenter="enter('6989258921658153377');" onmouseout="out('6989258921658153377');" style="">1122                     if (intentUri != null) {                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1123                         try {                                                                            </span>
<span class="3224994041104735669" onmouseenter="enter('3224994041104735669');" onmouseout="out('3224994041104735669');" style="">1124                             final Intent intent = Intent.parseUri(intentUri, 0);                         </span>
<span class="5533062021406091698" onmouseenter="enter('5533062021406091698');" onmouseout="out('5533062021406091698');" style="">1125                             android.util.Log.d(&quot;Home&quot;, intent.toString());                               </span>
<span class="4116887484198527532" onmouseenter="enter('4116887484198527532');" onmouseout="out('4116887484198527532');" style="">1126                             final Uri uri = intent.getData();                                            </span>
<span class="-6789028041247471756" onmouseenter="enter('-6789028041247471756');" onmouseout="out('-6789028041247471756');" style="">1127                             if (uri != null) {                                                           </span>
<span class="-4564881707745344748" onmouseenter="enter('-4564881707745344748');" onmouseout="out('-4564881707745344748');" style="">1128                                 final String data = uri.toString();                                      </span>
<span class="-3445805239696980037" onmouseenter="enter('-3445805239696980037');" onmouseout="out('-3445805239696980037');" style="">1129                                 if ((Intent.ACTION_VIEW.equals(intent.getAction()) ||                    </span>
<span class="7710869890592179741" onmouseenter="enter('7710869890592179741');" onmouseout="out('7710869890592179741');" style="">1130                                         actionQuickContact.equals(intent.getAction())) &amp;&amp;                </span>
<span class="1393218364054108713" onmouseenter="enter('1393218364054108713');" onmouseout="out('1393218364054108713');" style="">1131                                         (data.startsWith(&quot;content://contacts/people/&quot;) ||                </span>
<span class="3162645299085480663" onmouseenter="enter('3162645299085480663');" onmouseout="out('3162645299085480663');" style="">1132                                         data.startsWith(&quot;content://com.android.contacts/&quot; +              </span>
<span class="1650514809492671891" onmouseenter="enter('1650514809492671891');" onmouseout="out('1650514809492671891');" style="">1133                                                 &quot;contacts/lookup/&quot;))) {                                  </span>
<span  style="">1134                                                                                                          </span>
<span class="-5469073692284735657" onmouseenter="enter('-5469073692284735657');" onmouseout="out('-5469073692284735657');" style="">1135                                     final Intent newIntent = new Intent(actionQuickContact);             </span>
<span class="-5357614275754596903" onmouseenter="enter('-5357614275754596903');" onmouseout="out('-5357614275754596903');" style="">1136                                     // When starting from the launcher, start in a new, cleared task     </span>
<span class="1092229780699807802" onmouseenter="enter('1092229780699807802');" onmouseout="out('1092229780699807802');" style="">1137                                     // CLEAR_WHEN_TASK_RESET cannot reset the root of a task, so we      </span>
<span class="7141574357287672100" onmouseenter="enter('7141574357287672100');" onmouseout="out('7141574357287672100');" style="">1138                                     // clear the whole thing preemptively here since                     </span>
<span class="905959402729533596" onmouseenter="enter('905959402729533596');" onmouseout="out('905959402729533596');" style="">1139                                     // QuickContactActivity will finish itself when launching other      </span>
<span class="5522675427683616835" onmouseenter="enter('5522675427683616835');" onmouseout="out('5522675427683616835');" style="">1140                                     // detail activities.                                                </span>
<span class="-6190018245568891923" onmouseenter="enter('-6190018245568891923');" onmouseout="out('-6190018245568891923');" style="">1141                                     newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK |                   </span>
<span class="-3783234242978371980" onmouseenter="enter('-3783234242978371980');" onmouseout="out('-3783234242978371980');" style="">1142                                             Intent.FLAG_ACTIVITY_CLEAR_TASK);                            </span>
<span class="1401110889443382842" onmouseenter="enter('1401110889443382842');" onmouseout="out('1401110889443382842');" style="">1143                                     newIntent.putExtra(                                                  </span>
<span class="-732821300906687093" onmouseenter="enter('-732821300906687093');" onmouseout="out('-732821300906687093');" style="">1144                                             Launcher.INTENT_EXTRA_IGNORE_LAUNCH_ANIMATION, true);        </span>
<span class="8197006267053771341" onmouseenter="enter('8197006267053771341');" onmouseout="out('8197006267053771341');" style="">1145                                     newIntent.setData(uri);                                              </span>
<span class="-4929716720656164338" onmouseenter="enter('-4929716720656164338');" onmouseout="out('-4929716720656164338');" style="">1146                                     // Determine the type and also put that in the shortcut              </span>
<span class="-3103165564621535069" onmouseenter="enter('-3103165564621535069');" onmouseout="out('-3103165564621535069');" style="">1147                                     // (that can speed up launch a bit)                                  </span>
<span class="-8187273376333901727" onmouseenter="enter('-8187273376333901727');" onmouseout="out('-8187273376333901727');" style="">1148                                     newIntent.setDataAndType(uri, newIntent.resolveType(mContext));      </span>
<span  style="">1149                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1150                                     final ContentValues values = new ContentValues();                    </span>
<span class="-1283328052029016277" onmouseenter="enter('-1283328052029016277');" onmouseout="out('-1283328052029016277');" style="">1151                                     values.put(LauncherSettings.Favorites.INTENT,                        </span>
<span class="7573125619952719253" onmouseenter="enter('7573125619952719253');" onmouseout="out('7573125619952719253');" style="">1152                                             newIntent.toUri(0));                                         </span>
<span  style="">1153                                                                                                          </span>
<span class="-7922633388955325898" onmouseenter="enter('-7922633388955325898');" onmouseout="out('-7922633388955325898');" style="">1154                                     String updateWhere = Favorites._ID + &quot;=&quot; + favoriteId;               </span>
<span class="6932880072735485862" onmouseenter="enter('6932880072735485862');" onmouseout="out('6932880072735485862');" style="">1155                                     db.update(TABLE_FAVORITES, values, updateWhere, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1156                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1157                             }                                                                            </span>
<span class="3255801419413274971" onmouseenter="enter('3255801419413274971');" onmouseout="out('3255801419413274971');" style="">1158                         } catch (RuntimeException ex) {                                                  </span>
<span class="-70893878647116908" onmouseenter="enter('-70893878647116908');" onmouseout="out('-70893878647116908');" style="">1159                             Log.e(TAG, &quot;Problem upgrading shortcut&quot;, ex);                                </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1160                         } catch (URISyntaxException e) {                                                 </span>
<span class="-2505277559722110760" onmouseenter="enter('-2505277559722110760');" onmouseout="out('-2505277559722110760');" style="">1161                             Log.e(TAG, &quot;Problem upgrading shortcut&quot;, e);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1162                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1163                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1164                 }                                                                                        </span>
<span  style="">1165                                                                                                          </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">1166                 db.setTransactionSuccessful();                                                           </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="">1167             } catch (SQLException ex) {                                                                  </span>
<span class="983414259163783750" onmouseenter="enter('983414259163783750');" onmouseout="out('983414259163783750');" style="">1168                 Log.w(TAG, &quot;Problem while upgrading contacts&quot;, ex);                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1169                 return false;                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1170             } finally {                                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">1171                 db.endTransaction();                                                                     </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1172                 if (c != null) {                                                                         </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1173                     c.close();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1174                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1175             }                                                                                            </span>
<span  style="">1176                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1177             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1178         }                                                                                                </span>
<span  style="">1179                                                                                                          </span>
<span class="-3532559559626407446" onmouseenter="enter('-3532559559626407446');" onmouseout="out('-3532559559626407446');" style="">1180         private void normalizeIcons(SQLiteDatabase db) {                                                 </span>
<span class="-7234787096538067088" onmouseenter="enter('-7234787096538067088');" onmouseout="out('-7234787096538067088');" style="">1181             Log.d(TAG, &quot;normalizing icons&quot;);                                                             </span>
<span  style="">1182                                                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">1183             db.beginTransaction();                                                                       </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="">1184             Cursor c = null;                                                                             </span>
<span class="-1648170941042077979" onmouseenter="enter('-1648170941042077979');" onmouseout="out('-1648170941042077979');" style="">1185             SQLiteStatement update = null;                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1186             try {                                                                                        </span>
<span class="6948794688019806881" onmouseenter="enter('6948794688019806881');" onmouseout="out('6948794688019806881');" style="">1187                 boolean logged = false;                                                                  </span>
<span class="-9148924222948643220" onmouseenter="enter('-9148924222948643220');" onmouseout="out('-9148924222948643220');" style="">1188                 update = db.compileStatement(&quot;UPDATE favorites &quot;                                         </span>
<span class="2242861074041662063" onmouseenter="enter('2242861074041662063');" onmouseout="out('2242861074041662063');" style="">1189                         + &quot;SET icon=? WHERE _id=?&quot;);                                                     </span>
<span  style="">1190                                                                                                          </span>
<span class="4784505011002524429" onmouseenter="enter('4784505011002524429');" onmouseout="out('4784505011002524429');" style="">1191                 c = db.rawQuery(&quot;SELECT _id, icon FROM favorites WHERE iconType=&quot; +                      </span>
<span class="-8247570245083797300" onmouseenter="enter('-8247570245083797300');" onmouseout="out('-8247570245083797300');" style="">1192                         Favorites.ICON_TYPE_BITMAP, null);                                               </span>
<span  style="">1193                                                                                                          </span>
<span class="-6790628464290794012" onmouseenter="enter('-6790628464290794012');" onmouseout="out('-6790628464290794012');" style="">1194                 final int idIndex = c.getColumnIndexOrThrow(Favorites._ID);                              </span>
<span class="-8328869542966343431" onmouseenter="enter('-8328869542966343431');" onmouseout="out('-8328869542966343431');" style="">1195                 final int iconIndex = c.getColumnIndexOrThrow(Favorites.ICON);                           </span>
<span  style="">1196                                                                                                          </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style="">1197                 while (c.moveToNext()) {                                                                 </span>
<span class="-8135609918244190533" onmouseenter="enter('-8135609918244190533');" onmouseout="out('-8135609918244190533');" style="">1198                     long id = c.getLong(idIndex);                                                        </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">1199                     byte[] data = c.getBlob(iconIndex);                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1200                     try {                                                                                </span>
<span class="1618116421659449587" onmouseenter="enter('1618116421659449587');" onmouseout="out('1618116421659449587');" style="">1201                         Bitmap bitmap = Utilities.resampleIconBitmap(                                    </span>
<span class="5250274324470409582" onmouseenter="enter('5250274324470409582');" onmouseout="out('5250274324470409582');" style="">1202                                 BitmapFactory.decodeByteArray(data, 0, data.length),                     </span>
<span class="2906315698704386153" onmouseenter="enter('2906315698704386153');" onmouseout="out('2906315698704386153');" style="">1203                                 mContext);                                                               </span>
<span class="8226127527421310456" onmouseenter="enter('8226127527421310456');" onmouseout="out('8226127527421310456');" style="">1204                         if (bitmap != null) {                                                            </span>
<span class="-8911608565518229217" onmouseenter="enter('-8911608565518229217');" onmouseout="out('-8911608565518229217');" style="">1205                             update.bindLong(1, id);                                                      </span>
<span class="-3437982606997723715" onmouseenter="enter('-3437982606997723715');" onmouseout="out('-3437982606997723715');" style="">1206                             data = ItemInfo.flattenBitmap(bitmap);                                       </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">1207                             if (data != null) {                                                          </span>
<span class="8709343663161385163" onmouseenter="enter('8709343663161385163');" onmouseout="out('8709343663161385163');" style="">1208                                 update.bindBlob(2, data);                                                </span>
<span class="-6412297069984418220" onmouseenter="enter('-6412297069984418220');" onmouseout="out('-6412297069984418220');" style="">1209                                 update.execute();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210                             }                                                                            </span>
<span class="-2094673185475372498" onmouseenter="enter('-2094673185475372498');" onmouseout="out('-2094673185475372498');" style="">1211                             bitmap.recycle();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1212                         }                                                                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1213                     } catch (Exception e) {                                                              </span>
<span class="2850767417883926950" onmouseenter="enter('2850767417883926950');" onmouseout="out('2850767417883926950');" style="">1214                         if (!logged) {                                                                   </span>
<span class="-5248013341499561391" onmouseenter="enter('-5248013341499561391');" onmouseout="out('-5248013341499561391');" style="">1215                             Log.e(TAG, &quot;Failed normalizing icon &quot; + id, e);                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1216                         } else {                                                                         </span>
<span class="-4114526112834757919" onmouseenter="enter('-4114526112834757919');" onmouseout="out('-4114526112834757919');" style="">1217                             Log.e(TAG, &quot;Also failed normalizing icon &quot; + id);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1218                         }                                                                                </span>
<span class="74122904328555583" onmouseenter="enter('74122904328555583');" onmouseout="out('74122904328555583');" style="">1219                         logged = true;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1220                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221                 }                                                                                        </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">1222                 db.setTransactionSuccessful();                                                           </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="">1223             } catch (SQLException ex) {                                                                  </span>
<span class="1696470604658034617" onmouseenter="enter('1696470604658034617');" onmouseout="out('1696470604658034617');" style="">1224                 Log.w(TAG, &quot;Problem while allocating appWidgetIds for existing widgets&quot;, ex);            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1225             } finally {                                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">1226                 db.endTransaction();                                                                     </span>
<span class="-304565854195066427" onmouseenter="enter('-304565854195066427');" onmouseout="out('-304565854195066427');" style="">1227                 if (update != null) {                                                                    </span>
<span class="-3956724785259615758" onmouseenter="enter('-3956724785259615758');" onmouseout="out('-3956724785259615758');" style="">1228                     update.close();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229                 }                                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1230                 if (c != null) {                                                                         </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1231                     c.close();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1232                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234         }                                                                                                </span>
<span  style="">1235                                                                                                          </span>
<span class="-8543343401238088250" onmouseenter="enter('-8543343401238088250');" onmouseout="out('-8543343401238088250');" style="">1236         // Generates a new ID to use for an object in your database. This method should be only          </span>
<span class="-535999813132446250" onmouseenter="enter('-535999813132446250');" onmouseout="out('-535999813132446250');" style="">1237         // called from the main UI thread. As an exception, we do call it when we call the               </span>
<span class="-3416944691245960228" onmouseenter="enter('-3416944691245960228');" onmouseout="out('-3416944691245960228');" style="">1238         // constructor from the worker thread; however, this doesn&#x27;t extend until after the              </span>
<span class="506358615447788975" onmouseenter="enter('506358615447788975');" onmouseout="out('506358615447788975');" style="">1239         // constructor is called, and we only pass a reference to LauncherProvider to LauncherApp        </span>
<span class="7265707553198201311" onmouseenter="enter('7265707553198201311');" onmouseout="out('7265707553198201311');" style="">1240         // after that point                                                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1241         @Override                                                                                        </span>
<span class="2178013549114956338" onmouseenter="enter('2178013549114956338');" onmouseout="out('2178013549114956338');" style="">1242         public long generateNewItemId() {                                                                </span>
<span class="2999684209048406821" onmouseenter="enter('2999684209048406821');" onmouseout="out('2999684209048406821');" style="">1243             if (mMaxItemId &lt; 0) {                                                                        </span>
<span class="-7068859972649181897" onmouseenter="enter('-7068859972649181897');" onmouseout="out('-7068859972649181897');" style="">1244                 throw new RuntimeException(&quot;Error: max item id was not initialized&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1245             }                                                                                            </span>
<span class="-2732750815463784999" onmouseenter="enter('-2732750815463784999');" onmouseout="out('-2732750815463784999');" style="">1246             mMaxItemId += 1;                                                                             </span>
<span class="5456580978366825274" onmouseenter="enter('5456580978366825274');" onmouseout="out('5456580978366825274');" style="">1247             return mMaxItemId;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1248         }                                                                                                </span>
<span  style="">1249                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1250         @Override                                                                                        </span>
<span class="329443540154066398" onmouseenter="enter('329443540154066398');" onmouseout="out('329443540154066398');" style="">1251         public long insertAndCheck(SQLiteDatabase db, ContentValues values) {                            </span>
<span class="-1505151618823806706" onmouseenter="enter('-1505151618823806706');" onmouseout="out('-1505151618823806706');" style="">1252             return dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253         }                                                                                                </span>
<span  style="">1254                                                                                                          </span>
<span class="8365827129597185054" onmouseenter="enter('8365827129597185054');" onmouseout="out('8365827129597185054');" style="">1255         public void updateMaxItemId(long id) {                                                           </span>
<span class="-6849429476525109058" onmouseenter="enter('-6849429476525109058');" onmouseout="out('-6849429476525109058');" style="">1256             mMaxItemId = id + 1;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257         }                                                                                                </span>
<span  style="">1258                                                                                                          </span>
<span class="-7367368828761155068" onmouseenter="enter('-7367368828761155068');" onmouseout="out('-7367368828761155068');" style="">1259         public void checkId(String table, ContentValues values) {                                        </span>
<span class="-1608142162103033850" onmouseenter="enter('-1608142162103033850');" onmouseout="out('-1608142162103033850');" style="">1260             long id = values.getAsLong(LauncherSettings.BaseLauncherColumns._ID);                        </span>
<span class="-6900211224990683940" onmouseenter="enter('-6900211224990683940');" onmouseout="out('-6900211224990683940');" style="">1261             if (table == LauncherProvider.TABLE_WORKSPACE_SCREENS) {                                     </span>
<span class="9109073648364222254" onmouseenter="enter('9109073648364222254');" onmouseout="out('9109073648364222254');" style="">1262                 mMaxScreenId = Math.max(id, mMaxScreenId);                                               </span>
<span class="-6240460135729763291" onmouseenter="enter('-6240460135729763291');" onmouseout="out('-6240460135729763291');" style="">1263             }  else {                                                                                    </span>
<span class="754800730159449376" onmouseenter="enter('754800730159449376');" onmouseout="out('754800730159449376');" style="">1264                 mMaxItemId = Math.max(id, mMaxItemId);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1266         }                                                                                                </span>
<span  style="">1267                                                                                                          </span>
<span class="-8013451254632200820" onmouseenter="enter('-8013451254632200820');" onmouseout="out('-8013451254632200820');" style="">1268         private long initializeMaxItemId(SQLiteDatabase db) {                                            </span>
<span class="-6457280004469744269" onmouseenter="enter('-6457280004469744269');" onmouseout="out('-6457280004469744269');" style="">1269             Cursor c = db.rawQuery(&quot;SELECT MAX(_id) FROM favorites&quot;, null);                              </span>
<span  style="">1270                                                                                                          </span>
<span class="-7794263827987261163" onmouseenter="enter('-7794263827987261163');" onmouseout="out('-7794263827987261163');" style="">1271             // get the result                                                                            </span>
<span class="-7318978250879363167" onmouseenter="enter('-7318978250879363167');" onmouseout="out('-7318978250879363167');" style="">1272             final int maxIdIndex = 0;                                                                    </span>
<span class="-3996593593662644650" onmouseenter="enter('-3996593593662644650');" onmouseout="out('-3996593593662644650');" style="">1273             long id = -1;                                                                                </span>
<span class="2006356297883322098" onmouseenter="enter('2006356297883322098');" onmouseout="out('2006356297883322098');" style="">1274             if (c != null &amp;&amp; c.moveToNext()) {                                                           </span>
<span class="6252863560499548901" onmouseenter="enter('6252863560499548901');" onmouseout="out('6252863560499548901');" style="">1275                 id = c.getLong(maxIdIndex);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1276             }                                                                                            </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1277             if (c != null) {                                                                             </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1278                 c.close();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1279             }                                                                                            </span>
<span  style="">1280                                                                                                          </span>
<span class="-7988774182034385411" onmouseenter="enter('-7988774182034385411');" onmouseout="out('-7988774182034385411');" style="">1281             if (id == -1) {                                                                              </span>
<span class="-8632333559810917367" onmouseenter="enter('-8632333559810917367');" onmouseout="out('-8632333559810917367');" style="">1282                 throw new RuntimeException(&quot;Error: could not query max item id&quot;);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1283             }                                                                                            </span>
<span  style="">1284                                                                                                          </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1285             return id;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1286         }                                                                                                </span>
<span  style="">1287                                                                                                          </span>
<span class="3292148501075941248" onmouseenter="enter('3292148501075941248');" onmouseout="out('3292148501075941248');" style="">1288         // Generates a new ID to use for an workspace screen in your database. This method               </span>
<span class="8169251972405240623" onmouseenter="enter('8169251972405240623');" onmouseout="out('8169251972405240623');" style="">1289         // should be only called from the main UI thread. As an exception, we do call it when we         </span>
<span class="5354260748737756868" onmouseenter="enter('5354260748737756868');" onmouseout="out('5354260748737756868');" style="">1290         // call the constructor from the worker thread; however, this doesn&#x27;t extend until after the     </span>
<span class="506358615447788975" onmouseenter="enter('506358615447788975');" onmouseout="out('506358615447788975');" style="">1291         // constructor is called, and we only pass a reference to LauncherProvider to LauncherApp        </span>
<span class="7265707553198201311" onmouseenter="enter('7265707553198201311');" onmouseout="out('7265707553198201311');" style="">1292         // after that point                                                                              </span>
<span class="3794345207933084858" onmouseenter="enter('3794345207933084858');" onmouseout="out('3794345207933084858');" style="">1293         public long generateNewScreenId() {                                                              </span>
<span class="-2601779586206833262" onmouseenter="enter('-2601779586206833262');" onmouseout="out('-2601779586206833262');" style="">1294             if (mMaxScreenId &lt; 0) {                                                                      </span>
<span class="-8395628436366181623" onmouseenter="enter('-8395628436366181623');" onmouseout="out('-8395628436366181623');" style="">1295                 throw new RuntimeException(&quot;Error: max screen id was not initialized&quot;);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1296             }                                                                                            </span>
<span class="-7600499966171393409" onmouseenter="enter('-7600499966171393409');" onmouseout="out('-7600499966171393409');" style="">1297             mMaxScreenId += 1;                                                                           </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1298             // Log to disk                                                                               </span>
<span class="-8761729187376845632" onmouseenter="enter('-8761729187376845632');" onmouseout="out('-8761729187376845632');" style="">1299             Launcher.addDumpLog(TAG, &quot;11683562 - generateNewScreenId(): &quot; + mMaxScreenId, true);         </span>
<span class="-2082539956971430335" onmouseenter="enter('-2082539956971430335');" onmouseout="out('-2082539956971430335');" style="">1300             return mMaxScreenId;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1301         }                                                                                                </span>
<span  style="">1302                                                                                                          </span>
<span class="-7531165898061832726" onmouseenter="enter('-7531165898061832726');" onmouseout="out('-7531165898061832726');" style="">1303         public void updateMaxScreenId(long maxScreenId) {                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1304             // Log to disk                                                                               </span>
<span class="-6999371015775210769" onmouseenter="enter('-6999371015775210769');" onmouseout="out('-6999371015775210769');" style="">1305             Launcher.addDumpLog(TAG, &quot;11683562 - updateMaxScreenId(): &quot; + maxScreenId, true);            </span>
<span class="-5262779621072196869" onmouseenter="enter('-5262779621072196869');" onmouseout="out('-5262779621072196869');" style="">1306             mMaxScreenId = maxScreenId;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1307         }                                                                                                </span>
<span  style="">1308                                                                                                          </span>
<span class="1340022180158952931" onmouseenter="enter('1340022180158952931');" onmouseout="out('1340022180158952931');" style="">1309         private long initializeMaxScreenId(SQLiteDatabase db) {                                          </span>
<span class="-2625939584691052131" onmouseenter="enter('-2625939584691052131');" onmouseout="out('-2625939584691052131');" style=""><abbr title="1310             Cursor c = db.rawQuery(&quot;SELECT MAX(&quot; + LauncherSettings.WorkspaceScreens._ID + &quot;) FROM &quot; + TABLE_WORKSPACE_SCREENS, null);">1310             Cursor c = db.rawQuery(&quot;SELECT MAX(&quot; + LauncherSettings.WorkspaceScreens._ID + &quot;) FROM &quot; + TA🔵</abbr></span>
<span  style="">1311                                                                                                          </span>
<span class="-7794263827987261163" onmouseenter="enter('-7794263827987261163');" onmouseout="out('-7794263827987261163');" style="">1312             // get the result                                                                            </span>
<span class="-7318978250879363167" onmouseenter="enter('-7318978250879363167');" onmouseout="out('-7318978250879363167');" style="">1313             final int maxIdIndex = 0;                                                                    </span>
<span class="-3996593593662644650" onmouseenter="enter('-3996593593662644650');" onmouseout="out('-3996593593662644650');" style="">1314             long id = -1;                                                                                </span>
<span class="2006356297883322098" onmouseenter="enter('2006356297883322098');" onmouseout="out('2006356297883322098');" style="">1315             if (c != null &amp;&amp; c.moveToNext()) {                                                           </span>
<span class="6252863560499548901" onmouseenter="enter('6252863560499548901');" onmouseout="out('6252863560499548901');" style="">1316                 id = c.getLong(maxIdIndex);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1317             }                                                                                            </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1318             if (c != null) {                                                                             </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1319                 c.close();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1320             }                                                                                            </span>
<span  style="">1321                                                                                                          </span>
<span class="-7988774182034385411" onmouseenter="enter('-7988774182034385411');" onmouseout="out('-7988774182034385411');" style="">1322             if (id == -1) {                                                                              </span>
<span class="5981752458110974976" onmouseenter="enter('5981752458110974976');" onmouseout="out('5981752458110974976');" style="">1323                 throw new RuntimeException(&quot;Error: could not query max screen id&quot;);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1324             }                                                                                            </span>
<span  style="">1325                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1326             // Log to disk                                                                               </span>
<span class="27430974887508761" onmouseenter="enter('27430974887508761');" onmouseout="out('27430974887508761');" style="">1327             Launcher.addDumpLog(TAG, &quot;11683562 - initializeMaxScreenId(): &quot; + id, true);                 </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1328             return id;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329         }                                                                                                </span>
<span  style="">1330                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1331         /**                                                                                              </span>
<span class="4503171225344397477" onmouseenter="enter('4503171225344397477');" onmouseout="out('4503171225344397477');" style="">1332          * Upgrade existing clock and photo frame widgets into their new widget                          </span>
<span class="6424740634937576135" onmouseenter="enter('6424740634937576135');" onmouseout="out('6424740634937576135');" style="">1333          * equivalents.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1334          */                                                                                              </span>
<span class="743821216610300554" onmouseenter="enter('743821216610300554');" onmouseout="out('743821216610300554');" style="">1335         private void convertWidgets(SQLiteDatabase db) {                                                 </span>
<span class="328319718470950320" onmouseenter="enter('328319718470950320');" onmouseout="out('328319718470950320');" style="">1336             final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);            </span>
<span class="-406592777847963958" onmouseenter="enter('-406592777847963958');" onmouseout="out('-406592777847963958');" style="">1337             final int[] bindSources = new int[] {                                                        </span>
<span class="7481244370213656970" onmouseenter="enter('7481244370213656970');" onmouseout="out('7481244370213656970');" style="">1338                     Favorites.ITEM_TYPE_WIDGET_CLOCK,                                                    </span>
<span class="-4987589710545680428" onmouseenter="enter('-4987589710545680428');" onmouseout="out('-4987589710545680428');" style="">1339                     Favorites.ITEM_TYPE_WIDGET_PHOTO_FRAME,                                              </span>
<span class="-3073892039805288641" onmouseenter="enter('-3073892039805288641');" onmouseout="out('-3073892039805288641');" style="">1340                     Favorites.ITEM_TYPE_WIDGET_SEARCH,                                                   </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1341             };                                                                                           </span>
<span  style="">1342                                                                                                          </span>
<span class="8819301229709462929" onmouseenter="enter('8819301229709462929');" onmouseout="out('8819301229709462929');" style="">1343             final String selectWhere = buildOrWhereString(Favorites.ITEM_TYPE, bindSources);             </span>
<span  style="">1344                                                                                                          </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="">1345             Cursor c = null;                                                                             </span>
<span  style="">1346                                                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">1347             db.beginTransaction();                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1348             try {                                                                                        </span>
<span class="9180803436248323281" onmouseenter="enter('9180803436248323281');" onmouseout="out('9180803436248323281');" style="">1349                 // Select and iterate through each matching widget                                       </span>
<span class="-4881978227834121924" onmouseenter="enter('-4881978227834121924');" onmouseout="out('-4881978227834121924');" style="">1350                 c = db.query(TABLE_FAVORITES, new String[] { Favorites._ID, Favorites.ITEM_TYPE },       </span>
<span class="523753735101753681" onmouseenter="enter('523753735101753681');" onmouseout="out('523753735101753681');" style="">1351                         selectWhere, null, null, null, null);                                            </span>
<span  style="">1352                                                                                                          </span>
<span class="5404371667899517548" onmouseenter="enter('5404371667899517548');" onmouseout="out('5404371667899517548');" style="">1353                 if (LOGD) Log.d(TAG, &quot;found upgrade cursor count=&quot; + c.getCount());                      </span>
<span  style="">1354                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1355                 final ContentValues values = new ContentValues();                                        </span>
<span class="-3619679329231355898" onmouseenter="enter('-3619679329231355898');" onmouseout="out('-3619679329231355898');" style="">1356                 while (c != null &amp;&amp; c.moveToNext()) {                                                    </span>
<span class="707133737367195092" onmouseenter="enter('707133737367195092');" onmouseout="out('707133737367195092');" style="">1357                     long favoriteId = c.getLong(0);                                                      </span>
<span class="3900048804921934092" onmouseenter="enter('3900048804921934092');" onmouseout="out('3900048804921934092');" style="">1358                     int favoriteType = c.getInt(1);                                                      </span>
<span  style="">1359                                                                                                          </span>
<span class="-4540349898180247220" onmouseenter="enter('-4540349898180247220');" onmouseout="out('-4540349898180247220');" style="">1360                     // Allocate and update database with new appWidgetId                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1361                     try {                                                                                </span>
<span class="7176738113779216844" onmouseenter="enter('7176738113779216844');" onmouseout="out('7176738113779216844');" style="">1362                         int appWidgetId = mAppWidgetHost.allocateAppWidgetId();                          </span>
<span  style="">1363                                                                                                          </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1364                         if (LOGD) {                                                                      </span>
<span class="-1535375789049662259" onmouseenter="enter('-1535375789049662259');" onmouseout="out('-1535375789049662259');" style="">1365                             Log.d(TAG, &quot;allocated appWidgetId=&quot; + appWidgetId                            </span>
<span class="-754391989896361890" onmouseenter="enter('-754391989896361890');" onmouseout="out('-754391989896361890');" style="">1366                                     + &quot; for favoriteId=&quot; + favoriteId);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367                         }                                                                                </span>
<span class="6295623415315599771" onmouseenter="enter('6295623415315599771');" onmouseout="out('6295623415315599771');" style="">1368                         values.clear();                                                                  </span>
<span class="2941545182515325414" onmouseenter="enter('2941545182515325414');" onmouseout="out('2941545182515325414');" style="">1369                         values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_APPWIDGET);                  </span>
<span class="-2217583362005241057" onmouseenter="enter('-2217583362005241057');" onmouseout="out('-2217583362005241057');" style="">1370                         values.put(Favorites.APPWIDGET_ID, appWidgetId);                                 </span>
<span  style="">1371                                                                                                          </span>
<span class="1614683704773657610" onmouseenter="enter('1614683704773657610');" onmouseout="out('1614683704773657610');" style="">1372                         // Original widgets might not have valid spans when upgrading                    </span>
<span class="6372808247890680892" onmouseenter="enter('6372808247890680892');" onmouseout="out('6372808247890680892');" style="">1373                         if (favoriteType == Favorites.ITEM_TYPE_WIDGET_SEARCH) {                         </span>
<span class="-7334544058420176074" onmouseenter="enter('-7334544058420176074');" onmouseout="out('-7334544058420176074');" style="">1374                             values.put(LauncherSettings.Favorites.SPANX, 4);                             </span>
<span class="-6227774068858913177" onmouseenter="enter('-6227774068858913177');" onmouseout="out('-6227774068858913177');" style="">1375                             values.put(LauncherSettings.Favorites.SPANY, 1);                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1376                         } else {                                                                         </span>
<span class="2219786095905776818" onmouseenter="enter('2219786095905776818');" onmouseout="out('2219786095905776818');" style="">1377                             values.put(LauncherSettings.Favorites.SPANX, 2);                             </span>
<span class="6027752313180198994" onmouseenter="enter('6027752313180198994');" onmouseout="out('6027752313180198994');" style="">1378                             values.put(LauncherSettings.Favorites.SPANY, 2);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1379                         }                                                                                </span>
<span  style="">1380                                                                                                          </span>
<span class="-7922633388955325898" onmouseenter="enter('-7922633388955325898');" onmouseout="out('-7922633388955325898');" style="">1381                         String updateWhere = Favorites._ID + &quot;=&quot; + favoriteId;                           </span>
<span class="6932880072735485862" onmouseenter="enter('6932880072735485862');" onmouseout="out('6932880072735485862');" style="">1382                         db.update(TABLE_FAVORITES, values, updateWhere, null);                           </span>
<span  style="">1383                                                                                                          </span>
<span class="3880259377175112012" onmouseenter="enter('3880259377175112012');" onmouseout="out('3880259377175112012');" style="">1384                         if (favoriteType == Favorites.ITEM_TYPE_WIDGET_CLOCK) {                          </span>
<span class="393760990327696266" onmouseenter="enter('393760990327696266');" onmouseout="out('393760990327696266');" style="">1385                             // TODO: check return value                                                  </span>
<span class="-7373523765032573831" onmouseenter="enter('-7373523765032573831');" onmouseout="out('-7373523765032573831');" style="">1386                             appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,                       </span>
<span class="2526235379639805468" onmouseenter="enter('2526235379639805468');" onmouseout="out('2526235379639805468');" style="">1387                                     new ComponentName(&quot;com.android.alarmclock&quot;,                          </span>
<span class="7317042431961215300" onmouseenter="enter('7317042431961215300');" onmouseout="out('7317042431961215300');" style="">1388                                     &quot;com.android.alarmclock.AnalogAppWidgetProvider&quot;));                  </span>
<span class="6172094920381637122" onmouseenter="enter('6172094920381637122');" onmouseout="out('6172094920381637122');" style="">1389                         } else if (favoriteType == Favorites.ITEM_TYPE_WIDGET_PHOTO_FRAME) {             </span>
<span class="393760990327696266" onmouseenter="enter('393760990327696266');" onmouseout="out('393760990327696266');" style="">1390                             // TODO: check return value                                                  </span>
<span class="-7373523765032573831" onmouseenter="enter('-7373523765032573831');" onmouseout="out('-7373523765032573831');" style="">1391                             appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,                       </span>
<span class="7711233161317097526" onmouseenter="enter('7711233161317097526');" onmouseout="out('7711233161317097526');" style="">1392                                     new ComponentName(&quot;com.android.camera&quot;,                              </span>
<span class="8639249053579730258" onmouseenter="enter('8639249053579730258');" onmouseout="out('8639249053579730258');" style="">1393                                     &quot;com.android.camera.PhotoAppWidgetProvider&quot;));                       </span>
<span class="-7798263288808543811" onmouseenter="enter('-7798263288808543811');" onmouseout="out('-7798263288808543811');" style="">1394                         } else if (favoriteType == Favorites.ITEM_TYPE_WIDGET_SEARCH) {                  </span>
<span class="393760990327696266" onmouseenter="enter('393760990327696266');" onmouseout="out('393760990327696266');" style="">1395                             // TODO: check return value                                                  </span>
<span class="-7373523765032573831" onmouseenter="enter('-7373523765032573831');" onmouseout="out('-7373523765032573831');" style="">1396                             appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,                       </span>
<span class="5624392848756158158" onmouseenter="enter('5624392848756158158');" onmouseout="out('5624392848756158158');" style="">1397                                     getSearchWidgetProvider());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1398                         }                                                                                </span>
<span class="3255801419413274971" onmouseenter="enter('3255801419413274971');" onmouseout="out('3255801419413274971');" style="">1399                     } catch (RuntimeException ex) {                                                      </span>
<span class="7589023920505453658" onmouseenter="enter('7589023920505453658');" onmouseout="out('7589023920505453658');" style="">1400                         Log.e(TAG, &quot;Problem allocating appWidgetId&quot;, ex);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1401                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1402                 }                                                                                        </span>
<span  style="">1403                                                                                                          </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">1404                 db.setTransactionSuccessful();                                                           </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="">1405             } catch (SQLException ex) {                                                                  </span>
<span class="1696470604658034617" onmouseenter="enter('1696470604658034617');" onmouseout="out('1696470604658034617');" style="">1406                 Log.w(TAG, &quot;Problem while allocating appWidgetIds for existing widgets&quot;, ex);            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1407             } finally {                                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">1408                 db.endTransaction();                                                                     </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1409                 if (c != null) {                                                                         </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1410                     c.close();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412             }                                                                                            </span>
<span  style="">1413                                                                                                          </span>
<span class="1061677975667452281" onmouseenter="enter('1061677975667452281');" onmouseout="out('1061677975667452281');" style="">1414             // Update max item id                                                                        </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style="">1415             mMaxItemId = initializeMaxItemId(db);                                                        </span>
<span class="-1050526381544019588" onmouseenter="enter('-1050526381544019588');" onmouseout="out('-1050526381544019588');" style="">1416             if (LOGD) Log.d(TAG, &quot;mMaxItemId: &quot; + mMaxItemId);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1417         }                                                                                                </span>
<span  style="">1418                                                                                                          </span>
<span class="1383368615032249869" onmouseenter="enter('1383368615032249869');" onmouseout="out('1383368615032249869');" style="">1419         private boolean initializeExternalAdd(ContentValues values) {                                    </span>
<span class="-4585320292275114767" onmouseenter="enter('-4585320292275114767');" onmouseout="out('-4585320292275114767');" style="">1420             // 1. Ensure that externally added items have a valid item id                                </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">1421             long id = generateNewItemId();                                                               </span>
<span class="-4305015780380424948" onmouseenter="enter('-4305015780380424948');" onmouseout="out('-4305015780380424948');" style="">1422             values.put(LauncherSettings.Favorites._ID, id);                                              </span>
<span  style="">1423                                                                                                          </span>
<span class="5555856101718413728" onmouseenter="enter('5555856101718413728');" onmouseout="out('5555856101718413728');" style="">1424             // 2. In the case of an app widget, and if no app widget id is specified, we                 </span>
<span class="5653436237424007902" onmouseenter="enter('5653436237424007902');" onmouseout="out('5653436237424007902');" style="">1425             // attempt allocate and bind the widget.                                                     </span>
<span class="7737959233990593661" onmouseenter="enter('7737959233990593661');" onmouseout="out('7737959233990593661');" style="">1426             Integer itemType = values.getAsInteger(LauncherSettings.Favorites.ITEM_TYPE);                </span>
<span class="2055658702897830579" onmouseenter="enter('2055658702897830579');" onmouseout="out('2055658702897830579');" style="">1427             if (itemType != null &amp;&amp;                                                                      </span>
<span class="-1739021162756129174" onmouseenter="enter('-1739021162756129174');" onmouseout="out('-1739021162756129174');" style="">1428                     itemType.intValue() == LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET &amp;&amp;             </span>
<span class="-6215251601594981481" onmouseenter="enter('-6215251601594981481');" onmouseout="out('-6215251601594981481');" style="">1429                     !values.containsKey(LauncherSettings.Favorites.APPWIDGET_ID)) {                      </span>
<span  style="">1430                                                                                                          </span>
<span class="328319718470950320" onmouseenter="enter('328319718470950320');" onmouseout="out('328319718470950320');" style="">1431                 final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);        </span>
<span class="7884761264945585321" onmouseenter="enter('7884761264945585321');" onmouseout="out('7884761264945585321');" style="">1432                 ComponentName cn = ComponentName.unflattenFromString(                                    </span>
<span class="2179911768770688102" onmouseenter="enter('2179911768770688102');" onmouseout="out('2179911768770688102');" style="">1433                         values.getAsString(Favorites.APPWIDGET_PROVIDER));                               </span>
<span  style="">1434                                                                                                          </span>
<span class="3459055710499452007" onmouseenter="enter('3459055710499452007');" onmouseout="out('3459055710499452007');" style="">1435                 if (cn != null) {                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1436                     try {                                                                                </span>
<span class="7176738113779216844" onmouseenter="enter('7176738113779216844');" onmouseout="out('7176738113779216844');" style="">1437                         int appWidgetId = mAppWidgetHost.allocateAppWidgetId();                          </span>
<span class="3122228588084428979" onmouseenter="enter('3122228588084428979');" onmouseout="out('3122228588084428979');" style="">1438                         values.put(LauncherSettings.Favorites.APPWIDGET_ID, appWidgetId);                </span>
<span class="2309614617117273311" onmouseenter="enter('2309614617117273311');" onmouseout="out('2309614617117273311');" style="">1439                         if (!appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,cn)) {                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1440                             return false;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1441                         }                                                                                </span>
<span class="1200625667814236005" onmouseenter="enter('1200625667814236005');" onmouseout="out('1200625667814236005');" style="">1442                     } catch (RuntimeException e) {                                                       </span>
<span class="9049318523495391496" onmouseenter="enter('9049318523495391496');" onmouseout="out('9049318523495391496');" style="">1443                         Log.e(TAG, &quot;Failed to initialize external widget&quot;, e);                           </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1444                         return false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1445                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1446                 } else {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1447                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1448                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1449             }                                                                                            </span>
<span  style="">1450                                                                                                          </span>
<span class="-5393917371757635815" onmouseenter="enter('-5393917371757635815');" onmouseout="out('-5393917371757635815');" style="">1451             // Add screen id if not present                                                              </span>
<span class="-8492193036384627967" onmouseenter="enter('-8492193036384627967');" onmouseout="out('-8492193036384627967');" style="">1452             long screenId = values.getAsLong(LauncherSettings.Favorites.SCREEN);                         </span>
<span class="-8472780943665027311" onmouseenter="enter('-8472780943665027311');" onmouseout="out('-8472780943665027311');" style="">1453             if (!addScreenIdIfNecessary(screenId)) {                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1454                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1455             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1456             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1457         }                                                                                                </span>
<span  style="">1458                                                                                                          </span>
<span class="7352835902307890843" onmouseenter="enter('7352835902307890843');" onmouseout="out('7352835902307890843');" style="">1459         // Returns true of screen id exists, or if successfully added                                    </span>
<span class="-4057720447241324922" onmouseenter="enter('-4057720447241324922');" onmouseout="out('-4057720447241324922');" style="">1460         private boolean addScreenIdIfNecessary(long screenId) {                                          </span>
<span class="-8332527954530563349" onmouseenter="enter('-8332527954530563349');" onmouseout="out('-8332527954530563349');" style="">1461             if (!hasScreenId(screenId)) {                                                                </span>
<span class="-3380006025674561043" onmouseenter="enter('-3380006025674561043');" onmouseout="out('-3380006025674561043');" style="">1462                 int rank = getMaxScreenRank() + 1;                                                       </span>
<span  style="">1463                                                                                                          </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1464                 ContentValues v = new ContentValues();                                                   </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1465                 v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                                  </span>
<span class="6806563186306365402" onmouseenter="enter('6806563186306365402');" onmouseout="out('6806563186306365402');" style="">1466                 v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, rank);                              </span>
<span class="-1115795847996433461" onmouseenter="enter('-1115795847996433461');" onmouseout="out('-1115795847996433461');" style="">1467                 if (dbInsertAndCheck(this, getWritableDatabase(),                                        </span>
<span class="3238415722136121635" onmouseenter="enter('3238415722136121635');" onmouseout="out('3238415722136121635');" style="">1468                         TABLE_WORKSPACE_SCREENS, null, v) &lt; 0) {                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1469                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1471             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1472             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1473         }                                                                                                </span>
<span  style="">1474                                                                                                          </span>
<span class="5478264759768975399" onmouseenter="enter('5478264759768975399');" onmouseout="out('5478264759768975399');" style="">1475         private boolean hasScreenId(long screenId) {                                                     </span>
<span class="2098776625240525845" onmouseenter="enter('2098776625240525845');" onmouseout="out('2098776625240525845');" style="">1476             SQLiteDatabase db = getWritableDatabase();                                                   </span>
<span class="7657123469267572077" onmouseenter="enter('7657123469267572077');" onmouseout="out('7657123469267572077');" style="">1477             Cursor c = db.rawQuery(&quot;SELECT * FROM &quot; + TABLE_WORKSPACE_SCREENS + &quot; WHERE &quot;                </span>
<span class="1858055579641267103" onmouseenter="enter('1858055579641267103');" onmouseout="out('1858055579641267103');" style="">1478                     + LauncherSettings.WorkspaceScreens._ID + &quot; = &quot; + screenId, null);                   </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1479             if (c != null) {                                                                             </span>
<span class="-7874906179005583875" onmouseenter="enter('-7874906179005583875');" onmouseout="out('-7874906179005583875');" style="">1480                 int count = c.getCount();                                                                </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1481                 c.close();                                                                               </span>
<span class="4255567607434315929" onmouseenter="enter('4255567607434315929');" onmouseout="out('4255567607434315929');" style="">1482                 return count &gt; 0;                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1483             } else {                                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1484                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1485             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1486         }                                                                                                </span>
<span  style="">1487                                                                                                          </span>
<span class="-2708828914383579811" onmouseenter="enter('-2708828914383579811');" onmouseout="out('-2708828914383579811');" style="">1488         private int getMaxScreenRank() {                                                                 </span>
<span class="2098776625240525845" onmouseenter="enter('2098776625240525845');" onmouseout="out('2098776625240525845');" style="">1489             SQLiteDatabase db = getWritableDatabase();                                                   </span>
<span class="4567502420956726358" onmouseenter="enter('4567502420956726358');" onmouseout="out('4567502420956726358');" style="">1490             Cursor c = db.rawQuery(&quot;SELECT MAX(&quot; + LauncherSettings.WorkspaceScreens.SCREEN_RANK         </span>
<span class="-851271521804486447" onmouseenter="enter('-851271521804486447');" onmouseout="out('-851271521804486447');" style="">1491                     + &quot;) FROM &quot; + TABLE_WORKSPACE_SCREENS, null);                                        </span>
<span  style="">1492                                                                                                          </span>
<span class="-7794263827987261163" onmouseenter="enter('-7794263827987261163');" onmouseout="out('-7794263827987261163');" style="">1493             // get the result                                                                            </span>
<span class="-7089673966704675292" onmouseenter="enter('-7089673966704675292');" onmouseout="out('-7089673966704675292');" style="">1494             final int maxRankIndex = 0;                                                                  </span>
<span class="8995972804405745177" onmouseenter="enter('8995972804405745177');" onmouseout="out('8995972804405745177');" style="">1495             int rank = -1;                                                                               </span>
<span class="2006356297883322098" onmouseenter="enter('2006356297883322098');" onmouseout="out('2006356297883322098');" style="">1496             if (c != null &amp;&amp; c.moveToNext()) {                                                           </span>
<span class="-130706833968251970" onmouseenter="enter('-130706833968251970');" onmouseout="out('-130706833968251970');" style="">1497                 rank = c.getInt(maxRankIndex);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1498             }                                                                                            </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1499             if (c != null) {                                                                             </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1500                 c.close();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1501             }                                                                                            </span>
<span  style="">1502                                                                                                          </span>
<span class="-5061660947414305561" onmouseenter="enter('-5061660947414305561');" onmouseout="out('-5061660947414305561');" style="">1503             return rank;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1504         }                                                                                                </span>
<span  style="">1505                                                                                                          </span>
<span class="-1744733549489062304" onmouseenter="enter('-1744733549489062304');" onmouseout="out('-1744733549489062304');" style="">1506         private static final void beginDocument(XmlPullParser parser, String firstElementName)           </span>
<span class="-2080139816352784756" onmouseenter="enter('-2080139816352784756');" onmouseout="out('-2080139816352784756');" style="">1507                 throws XmlPullParserException, IOException {                                             </span>
<span class="3163913122247807134" onmouseenter="enter('3163913122247807134');" onmouseout="out('3163913122247807134');" style="">1508             int type;                                                                                    </span>
<span class="4717758523512892408" onmouseenter="enter('4717758523512892408');" onmouseout="out('4717758523512892408');" style="">1509             while ((type = parser.next()) != XmlPullParser.START_TAG                                     </span>
<span class="-8271997263827206949" onmouseenter="enter('-8271997263827206949');" onmouseout="out('-8271997263827206949');" style="">1510                     &amp;&amp; type != XmlPullParser.END_DOCUMENT) {                                             </span>
<span class="-2934185353411265329" onmouseenter="enter('-2934185353411265329');" onmouseout="out('-2934185353411265329');" style="">1511                 ;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512             }                                                                                            </span>
<span  style="">1513                                                                                                          </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1514             if (type != XmlPullParser.START_TAG) {                                                       </span>
<span class="-8251107748224722167" onmouseenter="enter('-8251107748224722167');" onmouseout="out('-8251107748224722167');" style="">1515                 throw new XmlPullParserException(&quot;No start tag found&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1516             }                                                                                            </span>
<span  style="">1517                                                                                                          </span>
<span class="-245075222549821684" onmouseenter="enter('-245075222549821684');" onmouseout="out('-245075222549821684');" style="">1518             if (!parser.getName().equals(firstElementName)) {                                            </span>
<span class="-5532803442016772615" onmouseenter="enter('-5532803442016772615');" onmouseout="out('-5532803442016772615');" style="">1519                 throw new XmlPullParserException(&quot;Unexpected start tag: found &quot; + parser.getName() +     </span>
<span class="-7049615363315893666" onmouseenter="enter('-7049615363315893666');" onmouseout="out('-7049615363315893666');" style="">1520                         &quot;, expected &quot; + firstElementName);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1521             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1522         }                                                                                                </span>
<span  style="">1523                                                                                                          </span>
<span class="-5649662118683980701" onmouseenter="enter('-5649662118683980701');" onmouseout="out('-5649662118683980701');" style="">1524         private static Intent buildMainIntent() {                                                        </span>
<span class="4401622020586218033" onmouseenter="enter('4401622020586218033');" onmouseout="out('4401622020586218033');" style="">1525             Intent intent = new Intent(Intent.ACTION_MAIN, null);                                        </span>
<span class="-5992732151813603475" onmouseenter="enter('-5992732151813603475');" onmouseout="out('-5992732151813603475');" style="">1526             intent.addCategory(Intent.CATEGORY_LAUNCHER);                                                </span>
<span class="7257372324830803623" onmouseenter="enter('7257372324830803623');" onmouseout="out('7257372324830803623');" style="">1527             return intent;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1528         }                                                                                                </span>
<span  style="">1529                                                                                                          </span>
<span class="4836207247336983218" onmouseenter="enter('4836207247336983218');" onmouseout="out('4836207247336983218');" style="">1530         private int loadFavorites(SQLiteDatabase db, WorkspaceLoader loader) {                           </span>
<span class="-517932292017625058" onmouseenter="enter('-517932292017625058');" onmouseout="out('-517932292017625058');" style="">1531             ArrayList&lt;Long&gt; screenIds = new ArrayList&lt;Long&gt;();                                           </span>
<span class="-1992683231790282850" onmouseenter="enter('-1992683231790282850');" onmouseout="out('-1992683231790282850');" style="">1532             // TODO: Use multiple loaders with fall-back and transaction.                                </span>
<span class="-198133332043015666" onmouseenter="enter('-198133332043015666');" onmouseout="out('-198133332043015666');" style="">1533             int count = loader.loadLayout(db, screenIds);                                                </span>
<span  style="">1534                                                                                                          </span>
<span class="6833875387324148439" onmouseenter="enter('6833875387324148439');" onmouseout="out('6833875387324148439');" style="">1535             // Add the screens specified by the items above                                              </span>
<span class="2978539432730983390" onmouseenter="enter('2978539432730983390');" onmouseout="out('2978539432730983390');" style="">1536             Collections.sort(screenIds);                                                                 </span>
<span class="5419352211080831355" onmouseenter="enter('5419352211080831355');" onmouseout="out('5419352211080831355');" style="">1537             int rank = 0;                                                                                </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">1538             ContentValues values = new ContentValues();                                                  </span>
<span class="7152107230041712979" onmouseenter="enter('7152107230041712979');" onmouseout="out('7152107230041712979');" style="">1539             for (Long id : screenIds) {                                                                  </span>
<span class="6295623415315599771" onmouseenter="enter('6295623415315599771');" onmouseout="out('6295623415315599771');" style="">1540                 values.clear();                                                                          </span>
<span class="-3523466272369778299" onmouseenter="enter('-3523466272369778299');" onmouseout="out('-3523466272369778299');" style="">1541                 values.put(LauncherSettings.WorkspaceScreens._ID, id);                                   </span>
<span class="-4819700644573994153" onmouseenter="enter('-4819700644573994153');" onmouseout="out('-4819700644573994153');" style="">1542                 values.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, rank);                         </span>
<span class="-7619796578683976012" onmouseenter="enter('-7619796578683976012');" onmouseout="out('-7619796578683976012');" style="">1543                 if (dbInsertAndCheck(this, db, TABLE_WORKSPACE_SCREENS, null, values) &lt; 0) {             </span>
<span class="-4349241721568097596" onmouseenter="enter('-4349241721568097596');" onmouseout="out('-4349241721568097596');" style="">1544                     throw new RuntimeException(&quot;Failed initialize screen table&quot;                          </span>
<span class="6358788983404305676" onmouseenter="enter('6358788983404305676');" onmouseout="out('6358788983404305676');" style="">1545                             + &quot;from default layout&quot;);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546                 }                                                                                        </span>
<span class="-39828730810908930" onmouseenter="enter('-39828730810908930');" onmouseout="out('-39828730810908930');" style="">1547                 rank++;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1548             }                                                                                            </span>
<span  style="">1549                                                                                                          </span>
<span class="-1496945990523812752" onmouseenter="enter('-1496945990523812752');" onmouseout="out('-1496945990523812752');" style="">1550             // Ensure that the max ids are initialized                                                   </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style="">1551             mMaxItemId = initializeMaxItemId(db);                                                        </span>
<span class="4730788985981235797" onmouseenter="enter('4730788985981235797');" onmouseout="out('4730788985981235797');" style="">1552             mMaxScreenId = initializeMaxScreenId(db);                                                    </span>
<span  style="">1553                                                                                                          </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style="">1554             return count;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1555         }                                                                                                </span>
<span  style="">1556                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1557         /**                                                                                              </span>
<span class="4206769764705618625" onmouseenter="enter('4206769764705618625');" onmouseout="out('4206769764705618625');" style="">1558          * Loads the default set of favorite packages from an xml file.                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1559          *                                                                                               </span>
<span class="-2594660449836918751" onmouseenter="enter('-2594660449836918751');" onmouseout="out('-2594660449836918751');" style="">1560          * @param db The database to write the values into                                               </span>
<span class="8005887113908348021" onmouseenter="enter('8005887113908348021');" onmouseout="out('8005887113908348021');" style="">1561          * @param filterContainerId The specific container id of items to load                           </span>
<span class="4549742419570190063" onmouseenter="enter('4549742419570190063');" onmouseout="out('4549742419570190063');" style="">1562          * @param the set of screenIds which are used by the favorites                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1563          */                                                                                              </span>
<span class="-5851750009676500763" onmouseenter="enter('-5851750009676500763');" onmouseout="out('-5851750009676500763');" style="">1564         private int loadFavoritesRecursive(SQLiteDatabase db, Resources res, int workspaceResourceId,    </span>
<span class="-7355860442479967281" onmouseenter="enter('-7355860442479967281');" onmouseout="out('-7355860442479967281');" style="">1565                 ArrayList&lt;Long&gt; screenIds) {                                                             </span>
<span  style="">1566                                                                                                          </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">1567             ContentValues values = new ContentValues();                                                  </span>
<span class="-1772060661175704007" onmouseenter="enter('-1772060661175704007');" onmouseout="out('-1772060661175704007');" style=""><abbr title="1568             if (LOGD) Log.v(TAG, String.format(&quot;Loading favorites from resid=0x%08x&quot;, workspaceResourceId));">1568             if (LOGD) Log.v(TAG, String.format(&quot;Loading favorites from resid=0x%08x&quot;, workspaceResourceId🔵</abbr></span>
<span  style="">1569                                                                                                          </span>
<span class="-7835997453776942924" onmouseenter="enter('-7835997453776942924');" onmouseout="out('-7835997453776942924');" style="">1570             int count = 0;                                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1571             try {                                                                                        </span>
<span class="9080417688274832266" onmouseenter="enter('9080417688274832266');" onmouseout="out('9080417688274832266');" style="">1572                 XmlResourceParser parser = res.getXml(workspaceResourceId);                              </span>
<span class="-4849646726062265204" onmouseenter="enter('-4849646726062265204');" onmouseout="out('-4849646726062265204');" style="">1573                 beginDocument(parser, TAG_FAVORITES);                                                    </span>
<span  style="">1574                                                                                                          </span>
<span class="-1796733801910506416" onmouseenter="enter('-1796733801910506416');" onmouseout="out('-1796733801910506416');" style="">1575                 final int depth = parser.getDepth();                                                     </span>
<span  style="">1576                                                                                                          </span>
<span class="3163913122247807134" onmouseenter="enter('3163913122247807134');" onmouseout="out('3163913122247807134');" style="">1577                 int type;                                                                                </span>
<span class="-1784597901533800040" onmouseenter="enter('-1784597901533800040');" onmouseout="out('-1784597901533800040');" style="">1578                 while (((type = parser.next()) != XmlPullParser.END_TAG ||                               </span>
<span class="9136127903140816012" onmouseenter="enter('9136127903140816012');" onmouseout="out('9136127903140816012');" style="">1579                         parser.getDepth() &gt; depth) &amp;&amp; type != XmlPullParser.END_DOCUMENT) {              </span>
<span  style="">1580                                                                                                          </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1581                     if (type != XmlPullParser.START_TAG) {                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1582                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1583                     }                                                                                    </span>
<span  style="">1584                                                                                                          </span>
<span class="7899804433438794249" onmouseenter="enter('7899804433438794249');" onmouseout="out('7899804433438794249');" style="">1585                     boolean added = false;                                                               </span>
<span class="6953602109235869781" onmouseenter="enter('6953602109235869781');" onmouseout="out('6953602109235869781');" style="">1586                     final String name = parser.getName();                                                </span>
<span  style="">1587                                                                                                          </span>
<span class="7121161214099969316" onmouseenter="enter('7121161214099969316');" onmouseout="out('7121161214099969316');" style="">1588                     if (TAG_INCLUDE.equals(name)) {                                                      </span>
<span  style="">1589                                                                                                          </span>
<span class="7620964305819267835" onmouseenter="enter('7620964305819267835');" onmouseout="out('7620964305819267835');" style="">1590                         final int resId = getAttributeResourceValue(parser, ATTR_WORKSPACE, 0);          </span>
<span  style="">1591                                                                                                          </span>
<span class="5009305539342447979" onmouseenter="enter('5009305539342447979');" onmouseout="out('5009305539342447979');" style=""><abbr title="1592                         if (LOGD) Log.v(TAG, String.format((&quot;%&quot; + (2*(depth+1)) + &quot;s&lt;include workspace=%08x&gt;&quot;),">1592                         if (LOGD) Log.v(TAG, String.format((&quot;%&quot; + (2*(depth+1)) + &quot;s&lt;include workspace=%0🔵</abbr></span>
<span class="-5278900941069439400" onmouseenter="enter('-5278900941069439400');" onmouseout="out('-5278900941069439400');" style="">1593                                 &quot;&quot;, resId));                                                             </span>
<span  style="">1594                                                                                                          </span>
<span class="7300117017390195413" onmouseenter="enter('7300117017390195413');" onmouseout="out('7300117017390195413');" style="">1595                         if (resId != 0 &amp;&amp; resId != workspaceResourceId) {                                </span>
<span class="-8087579639415016515" onmouseenter="enter('-8087579639415016515');" onmouseout="out('-8087579639415016515');" style="">1596                             // recursively load some more favorites, why not?                            </span>
<span class="-9207845823385341803" onmouseenter="enter('-9207845823385341803');" onmouseout="out('-9207845823385341803');" style="">1597                             count += loadFavoritesRecursive(db, res, resId, screenIds);                  </span>
<span class="8338453324960120992" onmouseenter="enter('8338453324960120992');" onmouseout="out('8338453324960120992');" style="">1598                             added = false;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1599                         } else {                                                                         </span>
<span class="6706749223879539247" onmouseenter="enter('6706749223879539247');" onmouseout="out('6706749223879539247');" style="">1600                             Log.w(TAG, String.format(&quot;Skipping &lt;include workspace=0x%08x&gt;&quot;, resId));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1601                         }                                                                                </span>
<span  style="">1602                                                                                                          </span>
<span class="-989461511285824675" onmouseenter="enter('-989461511285824675');" onmouseout="out('-989461511285824675');" style="">1603                         if (LOGD) Log.v(TAG, String.format((&quot;%&quot; + (2*(depth+1)) + &quot;s&lt;/include&gt;&quot;), &quot;&quot;));  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1604                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1605                     }                                                                                    </span>
<span  style="">1606                                                                                                          </span>
<span class="5686456002215125351" onmouseenter="enter('5686456002215125351');" onmouseout="out('5686456002215125351');" style="">1607                     // Assuming it&#x27;s a &lt;favorite&gt; at this point                                          </span>
<span class="8876313664838771927" onmouseenter="enter('8876313664838771927');" onmouseout="out('8876313664838771927');" style="">1608                     long container = LauncherSettings.Favorites.CONTAINER_DESKTOP;                       </span>
<span class="-8953477941003932421" onmouseenter="enter('-8953477941003932421');" onmouseout="out('-8953477941003932421');" style="">1609                     String strContainer = getAttributeValue(parser, ATTR_CONTAINER);                     </span>
<span class="4899636274002469854" onmouseenter="enter('4899636274002469854');" onmouseout="out('4899636274002469854');" style="">1610                     if (strContainer != null) {                                                          </span>
<span class="-6141382636405232855" onmouseenter="enter('-6141382636405232855');" onmouseout="out('-6141382636405232855');" style="">1611                         container = Long.valueOf(strContainer);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1612                     }                                                                                    </span>
<span  style="">1613                                                                                                          </span>
<span class="5916925922507241391" onmouseenter="enter('5916925922507241391');" onmouseout="out('5916925922507241391');" style="">1614                     String screen = getAttributeValue(parser, ATTR_SCREEN);                              </span>
<span class="-5754720008436749732" onmouseenter="enter('-5754720008436749732');" onmouseout="out('-5754720008436749732');" style="">1615                     String x = getAttributeValue(parser, ATTR_X);                                        </span>
<span class="6090763299686616782" onmouseenter="enter('6090763299686616782');" onmouseout="out('6090763299686616782');" style="">1616                     String y = getAttributeValue(parser, ATTR_Y);                                        </span>
<span  style="">1617                                                                                                          </span>
<span class="6295623415315599771" onmouseenter="enter('6295623415315599771');" onmouseout="out('6295623415315599771');" style="">1618                     values.clear();                                                                      </span>
<span class="7684212050113439789" onmouseenter="enter('7684212050113439789');" onmouseout="out('7684212050113439789');" style="">1619                     values.put(LauncherSettings.Favorites.CONTAINER, container);                         </span>
<span class="4993135311254983149" onmouseenter="enter('4993135311254983149');" onmouseout="out('4993135311254983149');" style="">1620                     values.put(LauncherSettings.Favorites.SCREEN, screen);                               </span>
<span class="4999709216465616432" onmouseenter="enter('4999709216465616432');" onmouseout="out('4999709216465616432');" style="">1621                     values.put(LauncherSettings.Favorites.CELLX, x);                                     </span>
<span class="-2755037476439373326" onmouseenter="enter('-2755037476439373326');" onmouseout="out('-2755037476439373326');" style="">1622                     values.put(LauncherSettings.Favorites.CELLY, y);                                     </span>
<span  style="">1623                                                                                                          </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1624                     if (LOGD) {                                                                          </span>
<span class="5581535071295035524" onmouseenter="enter('5581535071295035524');" onmouseout="out('5581535071295035524');" style="">1625                         final String title = getAttributeValue(parser, ATTR_TITLE);                      </span>
<span class="-615495327061628051" onmouseenter="enter('-615495327061628051');" onmouseout="out('-615495327061628051');" style="">1626                         final String pkg = getAttributeValue(parser, ATTR_PACKAGE_NAME);                 </span>
<span class="-3502249795865144059" onmouseenter="enter('-3502249795865144059');" onmouseout="out('-3502249795865144059');" style="">1627                         final String something = title != null ? title : pkg;                            </span>
<span class="-7031637576101422130" onmouseenter="enter('-7031637576101422130');" onmouseout="out('-7031637576101422130');" style="">1628                         Log.v(TAG, String.format(                                                        </span>
<span class="-4069192886577727005" onmouseenter="enter('-4069192886577727005');" onmouseout="out('-4069192886577727005');" style="">1629                                 (&quot;%&quot; + (2*(depth+1)) + &quot;s&lt;%s%s c=%d s=%s x=%s y=%s&gt;&quot;),                   </span>
<span class="-7745111780849965500" onmouseenter="enter('-7745111780849965500');" onmouseout="out('-7745111780849965500');" style="">1630                                 &quot;&quot;, name,                                                                </span>
<span class="-7186929577255479626" onmouseenter="enter('-7186929577255479626');" onmouseout="out('-7186929577255479626');" style="">1631                                 (something == null ? &quot;&quot; : (&quot; \&quot;&quot; + something + &quot;\&quot;&quot;)),                   </span>
<span class="-8681909485021689501" onmouseenter="enter('-8681909485021689501');" onmouseout="out('-8681909485021689501');" style="">1632                                 container, screen, x, y));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1633                     }                                                                                    </span>
<span  style="">1634                                                                                                          </span>
<span class="-7400969844258462201" onmouseenter="enter('-7400969844258462201');" onmouseout="out('-7400969844258462201');" style="">1635                     if (TAG_FAVORITE.equals(name)) {                                                     </span>
<span class="-3583571169175857402" onmouseenter="enter('-3583571169175857402');" onmouseout="out('-3583571169175857402');" style="">1636                         long id = addAppShortcut(db, values, parser);                                    </span>
<span class="2121580753897534719" onmouseenter="enter('2121580753897534719');" onmouseout="out('2121580753897534719');" style="">1637                         added = id &gt;= 0;                                                                 </span>
<span class="-5542257851689667934" onmouseenter="enter('-5542257851689667934');" onmouseout="out('-5542257851689667934');" style="">1638                     } else if (TAG_APPWIDGET.equals(name)) {                                             </span>
<span class="-794100780748822491" onmouseenter="enter('-794100780748822491');" onmouseout="out('-794100780748822491');" style="">1639                         added = addAppWidget(parser, type, db, values);                                  </span>
<span class="5570272146833981560" onmouseenter="enter('5570272146833981560');" onmouseout="out('5570272146833981560');" style="">1640                     } else if (TAG_SHORTCUT.equals(name)) {                                              </span>
<span class="8022235443544838146" onmouseenter="enter('8022235443544838146');" onmouseout="out('8022235443544838146');" style="">1641                         long id = addUriShortcut(db, values, res, parser);                               </span>
<span class="2121580753897534719" onmouseenter="enter('2121580753897534719');" onmouseout="out('2121580753897534719');" style="">1642                         added = id &gt;= 0;                                                                 </span>
<span class="-3245733975064069652" onmouseenter="enter('-3245733975064069652');" onmouseout="out('-3245733975064069652');" style="">1643                     } else if (TAG_RESOLVE.equals(name)) {                                               </span>
<span class="-6168769572729066790" onmouseenter="enter('-6168769572729066790');" onmouseout="out('-6168769572729066790');" style="">1644                         // This looks through the contained favorites (or meta-favorites) and            </span>
<span class="-5232686756441164968" onmouseenter="enter('-5232686756441164968');" onmouseout="out('-5232686756441164968');" style="">1645                         // attempts to add them as shortcuts in the fallback group&#x27;s location            </span>
<span class="-3164145926865392434" onmouseenter="enter('-3164145926865392434');" onmouseout="out('-3164145926865392434');" style="">1646                         // until one is added successfully.                                              </span>
<span class="8338453324960120992" onmouseenter="enter('8338453324960120992');" onmouseout="out('8338453324960120992');" style="">1647                         added = false;                                                                   </span>
<span class="-7289409140421595237" onmouseenter="enter('-7289409140421595237');" onmouseout="out('-7289409140421595237');" style="">1648                         final int groupDepth = parser.getDepth();                                        </span>
<span class="-2406917717669951461" onmouseenter="enter('-2406917717669951461');" onmouseout="out('-2406917717669951461');" style="">1649                         while ((type = parser.next()) != XmlPullParser.END_TAG ||                        </span>
<span class="8687802670126733847" onmouseenter="enter('8687802670126733847');" onmouseout="out('8687802670126733847');" style="">1650                                 parser.getDepth() &gt; groupDepth) {                                        </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1651                             if (type != XmlPullParser.START_TAG) {                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1652                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1653                             }                                                                            </span>
<span class="-4826163157610997597" onmouseenter="enter('-4826163157610997597');" onmouseout="out('-4826163157610997597');" style="">1654                             final String fallback_item_name = parser.getName();                          </span>
<span class="-2022810481919856801" onmouseenter="enter('-2022810481919856801');" onmouseout="out('-2022810481919856801');" style="">1655                             if (!added) {                                                                </span>
<span class="3394509129787922860" onmouseenter="enter('3394509129787922860');" onmouseout="out('3394509129787922860');" style="">1656                                 if (TAG_FAVORITE.equals(fallback_item_name)) {                           </span>
<span class="-1179477971979967689" onmouseenter="enter('-1179477971979967689');" onmouseout="out('-1179477971979967689');" style="">1657                                     final long id = addAppShortcut(db, values, parser);                  </span>
<span class="2121580753897534719" onmouseenter="enter('2121580753897534719');" onmouseout="out('2121580753897534719');" style="">1658                                     added = id &gt;= 0;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1659                                 } else {                                                                 </span>
<span class="-6448281100759930849" onmouseenter="enter('-6448281100759930849');" onmouseout="out('-6448281100759930849');" style="">1660                                     Log.e(TAG, &quot;Fallback groups can contain only favorites, found &quot;      </span>
<span class="1123550495059434881" onmouseenter="enter('1123550495059434881');" onmouseout="out('1123550495059434881');" style="">1661                                             + fallback_item_name);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1662                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1663                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1664                         }                                                                                </span>
<span class="-6568529531723639383" onmouseenter="enter('-6568529531723639383');" onmouseout="out('-6568529531723639383');" style="">1665                     } else if (TAG_FOLDER.equals(name)) {                                                </span>
<span class="71049762543313083" onmouseenter="enter('71049762543313083');" onmouseout="out('71049762543313083');" style="">1666                         // Folder contents are nested in this XML file                                   </span>
<span class="2932998739880291847" onmouseenter="enter('2932998739880291847');" onmouseout="out('2932998739880291847');" style="">1667                         added = loadFolder(db, values, res, parser);                                     </span>
<span  style="">1668                                                                                                          </span>
<span class="-8705641483066545971" onmouseenter="enter('-8705641483066545971');" onmouseout="out('-8705641483066545971');" style="">1669                     } else if (TAG_PARTNER_FOLDER.equals(name)) {                                        </span>
<span class="9058192063405184929" onmouseenter="enter('9058192063405184929');" onmouseout="out('9058192063405184929');" style="">1670                         // Folder contents come from an external XML resource                            </span>
<span class="-6415916158480032673" onmouseenter="enter('-6415916158480032673');" onmouseout="out('-6415916158480032673');" style="">1671                         final Partner partner = Partner.get(mPackageManager);                            </span>
<span class="-9215364277253785969" onmouseenter="enter('-9215364277253785969');" onmouseout="out('-9215364277253785969');" style="">1672                         if (partner != null) {                                                           </span>
<span class="882794219866203698" onmouseenter="enter('882794219866203698');" onmouseout="out('882794219866203698');" style="">1673                             final Resources partnerRes = partner.getResources();                         </span>
<span class="-8656173913287474605" onmouseenter="enter('-8656173913287474605');" onmouseout="out('-8656173913287474605');" style="">1674                             final int resId = partnerRes.getIdentifier(Partner.RES_FOLDER,               </span>
<span class="-8179104168031182438" onmouseenter="enter('-8179104168031182438');" onmouseout="out('-8179104168031182438');" style="">1675                                     &quot;xml&quot;, partner.getPackageName());                                    </span>
<span class="-5151212692288250908" onmouseenter="enter('-5151212692288250908');" onmouseout="out('-5151212692288250908');" style="">1676                             if (resId != 0) {                                                            </span>
<span class="5087581180241899012" onmouseenter="enter('5087581180241899012');" onmouseout="out('5087581180241899012');" style="">1677                                 final XmlResourceParser partnerParser = partnerRes.getXml(resId);        </span>
<span class="7615154974472081807" onmouseenter="enter('7615154974472081807');" onmouseout="out('7615154974472081807');" style="">1678                                 beginDocument(partnerParser, TAG_FOLDER);                                </span>
<span class="1361048869780355583" onmouseenter="enter('1361048869780355583');" onmouseout="out('1361048869780355583');" style="">1679                                 added = loadFolder(db, values, partnerRes, partnerParser);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1680                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1681                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1682                     }                                                                                    </span>
<span class="148792127233014890" onmouseenter="enter('148792127233014890');" onmouseout="out('148792127233014890');" style="">1683                     if (added) {                                                                         </span>
<span class="-7037897563787549194" onmouseenter="enter('-7037897563787549194');" onmouseout="out('-7037897563787549194');" style="">1684                         long screenId = Long.parseLong(screen);                                          </span>
<span class="-5031779467583606850" onmouseenter="enter('-5031779467583606850');" onmouseout="out('-5031779467583606850');" style="">1685                         // Keep track of the set of screens which need to be added to the db.            </span>
<span class="4419145976437675753" onmouseenter="enter('4419145976437675753');" onmouseout="out('4419145976437675753');" style="">1686                         if (!screenIds.contains(screenId) &amp;&amp;                                             </span>
<span class="1621253454097657233" onmouseenter="enter('1621253454097657233');" onmouseout="out('1621253454097657233');" style="">1687                                 container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {             </span>
<span class="9120373975407210091" onmouseenter="enter('9120373975407210091');" onmouseout="out('9120373975407210091');" style="">1688                             screenIds.add(screenId);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1689                         }                                                                                </span>
<span class="5122134618962228848" onmouseenter="enter('5122134618962228848');" onmouseout="out('5122134618962228848');" style="">1690                         count++;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1691                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1692                 }                                                                                        </span>
<span class="8072590548933783276" onmouseenter="enter('8072590548933783276');" onmouseout="out('8072590548933783276');" style="">1693             } catch (XmlPullParserException e) {                                                         </span>
<span class="-8490721556765967950" onmouseenter="enter('-8490721556765967950');" onmouseout="out('-8490721556765967950');" style="">1694                 Log.w(TAG, &quot;Got exception parsing favorites.&quot;, e);                                       </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1695             } catch (IOException e) {                                                                    </span>
<span class="-8490721556765967950" onmouseenter="enter('-8490721556765967950');" onmouseout="out('-8490721556765967950');" style="">1696                 Log.w(TAG, &quot;Got exception parsing favorites.&quot;, e);                                       </span>
<span class="1200625667814236005" onmouseenter="enter('1200625667814236005');" onmouseout="out('1200625667814236005');" style="">1697             } catch (RuntimeException e) {                                                               </span>
<span class="-8490721556765967950" onmouseenter="enter('-8490721556765967950');" onmouseout="out('-8490721556765967950');" style="">1698                 Log.w(TAG, &quot;Got exception parsing favorites.&quot;, e);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1699             }                                                                                            </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style="">1700             return count;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1701         }                                                                                                </span>
<span  style="">1702                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1703         /**                                                                                              </span>
<span class="836981209199049033" onmouseenter="enter('836981209199049033');" onmouseout="out('836981209199049033');" style="">1704          * Parse folder items starting at {@link XmlPullParser} location. Allow recursive                </span>
<span class="8269421111426004126" onmouseenter="enter('8269421111426004126');" onmouseout="out('8269421111426004126');" style="">1705          * includes of items.                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1706          */                                                                                              </span>
<span class="-6714322983826762636" onmouseenter="enter('-6714322983826762636');" onmouseout="out('-6714322983826762636');" style="">1707         private void addToFolder(SQLiteDatabase db, Resources res, XmlResourceParser parser,             </span>
<span class="8336143775167702041" onmouseenter="enter('8336143775167702041');" onmouseout="out('8336143775167702041');" style="">1708                 ArrayList&lt;Long&gt; folderItems, long folderId) throws IOException, XmlPullParserException { </span>
<span class="3163913122247807134" onmouseenter="enter('3163913122247807134');" onmouseout="out('3163913122247807134');" style="">1709             int type;                                                                                    </span>
<span class="-3224406969225576043" onmouseenter="enter('-3224406969225576043');" onmouseout="out('-3224406969225576043');" style="">1710             int folderDepth = parser.getDepth();                                                         </span>
<span class="-2406917717669951461" onmouseenter="enter('-2406917717669951461');" onmouseout="out('-2406917717669951461');" style="">1711             while ((type = parser.next()) != XmlPullParser.END_TAG ||                                    </span>
<span class="4017526817899016645" onmouseenter="enter('4017526817899016645');" onmouseout="out('4017526817899016645');" style="">1712                     parser.getDepth() &gt; folderDepth) {                                                   </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1713                 if (type != XmlPullParser.START_TAG) {                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1714                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1715                 }                                                                                        </span>
<span class="686677976894615180" onmouseenter="enter('686677976894615180');" onmouseout="out('686677976894615180');" style="">1716                 final String tag = parser.getName();                                                     </span>
<span  style="">1717                                                                                                          </span>
<span class="7615212261878509112" onmouseenter="enter('7615212261878509112');" onmouseout="out('7615212261878509112');" style="">1718                 final ContentValues childValues = new ContentValues();                                   </span>
<span class="4831363376490170629" onmouseenter="enter('4831363376490170629');" onmouseout="out('4831363376490170629');" style="">1719                 childValues.put(LauncherSettings.Favorites.CONTAINER, folderId);                         </span>
<span  style="">1720                                                                                                          </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1721                 if (LOGD) {                                                                              </span>
<span class="-615495327061628051" onmouseenter="enter('-615495327061628051');" onmouseout="out('-615495327061628051');" style="">1722                     final String pkg = getAttributeValue(parser, ATTR_PACKAGE_NAME);                     </span>
<span class="-1954941607715586859" onmouseenter="enter('-1954941607715586859');" onmouseout="out('-1954941607715586859');" style="">1723                     final String uri = getAttributeValue(parser, ATTR_URI);                              </span>
<span class="3789876690425623667" onmouseenter="enter('3789876690425623667');" onmouseout="out('3789876690425623667');" style="">1724                     Log.v(TAG, String.format((&quot;%&quot; + (2*(folderDepth+1)) + &quot;s&lt;%s \&quot;%s\&quot;&gt;&quot;), &quot;&quot;,           </span>
<span class="-2863539958754101738" onmouseenter="enter('-2863539958754101738');" onmouseout="out('-2863539958754101738');" style="">1725                             tag, uri != null ? uri : pkg));                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1726                 }                                                                                        </span>
<span  style="">1727                                                                                                          </span>
<span class="6780528027807053427" onmouseenter="enter('6780528027807053427');" onmouseout="out('6780528027807053427');" style="">1728                 if (TAG_FAVORITE.equals(tag) &amp;&amp; folderId &gt;= 0) {                                         </span>
<span class="3781180143059799820" onmouseenter="enter('3781180143059799820');" onmouseout="out('3781180143059799820');" style="">1729                     final long id = addAppShortcut(db, childValues, parser);                             </span>
<span class="-6131649387216162152" onmouseenter="enter('-6131649387216162152');" onmouseout="out('-6131649387216162152');" style="">1730                     if (id &gt;= 0) {                                                                       </span>
<span class="-1096537071693041204" onmouseenter="enter('-1096537071693041204');" onmouseout="out('-1096537071693041204');" style="">1731                         folderItems.add(id);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1732                     }                                                                                    </span>
<span class="5913908479161166408" onmouseenter="enter('5913908479161166408');" onmouseout="out('5913908479161166408');" style="">1733                 } else if (TAG_SHORTCUT.equals(tag) &amp;&amp; folderId &gt;= 0) {                                  </span>
<span class="237201187676118050" onmouseenter="enter('237201187676118050');" onmouseout="out('237201187676118050');" style="">1734                     final long id = addUriShortcut(db, childValues, res, parser);                        </span>
<span class="-6131649387216162152" onmouseenter="enter('-6131649387216162152');" onmouseout="out('-6131649387216162152');" style="">1735                     if (id &gt;= 0) {                                                                       </span>
<span class="-1096537071693041204" onmouseenter="enter('-1096537071693041204');" onmouseout="out('-1096537071693041204');" style="">1736                         folderItems.add(id);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1737                     }                                                                                    </span>
<span class="4981411679036563463" onmouseenter="enter('4981411679036563463');" onmouseout="out('4981411679036563463');" style="">1738                 } else if (TAG_INCLUDE.equals(tag) &amp;&amp; folderId &gt;= 0) {                                   </span>
<span class="5205334322096840205" onmouseenter="enter('5205334322096840205');" onmouseout="out('5205334322096840205');" style="">1739                     addToFolder(db, res, parser, folderItems, folderId);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1740                 } else {                                                                                 </span>
<span class="-7780626705587841890" onmouseenter="enter('-7780626705587841890');" onmouseout="out('-7780626705587841890');" style="">1741                     throw new RuntimeException(&quot;Folders can contain only shortcuts&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1742                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1743             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1744         }                                                                                                </span>
<span  style="">1745                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1746         /**                                                                                              </span>
<span class="-8056675503068640259" onmouseenter="enter('-8056675503068640259');" onmouseout="out('-8056675503068640259');" style="">1747          * Parse folder starting at current {@link XmlPullParser} location.                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1748          */                                                                                              </span>
<span class="8978590628354582362" onmouseenter="enter('8978590628354582362');" onmouseout="out('8978590628354582362');" style="">1749         private boolean loadFolder(SQLiteDatabase db, ContentValues values, Resources res,               </span>
<span class="-8666274943825815454" onmouseenter="enter('-8666274943825815454');" onmouseout="out('-8666274943825815454');" style="">1750                 XmlResourceParser parser) throws IOException, XmlPullParserException {                   </span>
<span class="6068944415246137076" onmouseenter="enter('6068944415246137076');" onmouseout="out('6068944415246137076');" style="">1751             final String title;                                                                          </span>
<span class="-292812422880448019" onmouseenter="enter('-292812422880448019');" onmouseout="out('-292812422880448019');" style="">1752             final int titleResId = getAttributeResourceValue(parser, ATTR_TITLE, 0);                     </span>
<span class="1172124852597632506" onmouseenter="enter('1172124852597632506');" onmouseout="out('1172124852597632506');" style="">1753             if (titleResId != 0) {                                                                       </span>
<span class="-4529263519280472672" onmouseenter="enter('-4529263519280472672');" onmouseout="out('-4529263519280472672');" style="">1754                 title = res.getString(titleResId);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1755             } else {                                                                                     </span>
<span class="2584661107016073001" onmouseenter="enter('2584661107016073001');" onmouseout="out('2584661107016073001');" style="">1756                 title = mContext.getResources().getString(R.string.folder_name);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1757             }                                                                                            </span>
<span  style="">1758                                                                                                          </span>
<span class="-1277878518627790922" onmouseenter="enter('-1277878518627790922');" onmouseout="out('-1277878518627790922');" style="">1759             values.put(LauncherSettings.Favorites.TITLE, title);                                         </span>
<span class="-8989728490994499632" onmouseenter="enter('-8989728490994499632');" onmouseout="out('-8989728490994499632');" style="">1760             long folderId = addFolder(db, values);                                                       </span>
<span class="3863242801439444025" onmouseenter="enter('3863242801439444025');" onmouseout="out('3863242801439444025');" style="">1761             boolean added = folderId &gt;= 0;                                                               </span>
<span  style="">1762                                                                                                          </span>
<span class="70925917645446442" onmouseenter="enter('70925917645446442');" onmouseout="out('70925917645446442');" style="">1763             ArrayList&lt;Long&gt; folderItems = new ArrayList&lt;Long&gt;();                                         </span>
<span class="5205334322096840205" onmouseenter="enter('5205334322096840205');" onmouseout="out('5205334322096840205');" style="">1764             addToFolder(db, res, parser, folderItems, folderId);                                         </span>
<span  style="">1765                                                                                                          </span>
<span class="-9068618732040691287" onmouseenter="enter('-9068618732040691287');" onmouseout="out('-9068618732040691287');" style="">1766             // We can only have folders with &gt;= 2 items, so we need to remove the                        </span>
<span class="7493806660013471529" onmouseenter="enter('7493806660013471529');" onmouseout="out('7493806660013471529');" style="">1767             // folder and clean up if less than 2 items were included, or some                           </span>
<span class="-4544163504149488130" onmouseenter="enter('-4544163504149488130');" onmouseout="out('-4544163504149488130');" style="">1768             // failed to add, and less than 2 were actually added                                        </span>
<span class="-2518589436522803659" onmouseenter="enter('-2518589436522803659');" onmouseout="out('-2518589436522803659');" style="">1769             if (folderItems.size() &lt; 2 &amp;&amp; folderId &gt;= 0) {                                               </span>
<span class="4611134147445993465" onmouseenter="enter('4611134147445993465');" onmouseout="out('4611134147445993465');" style="">1770                 // Delete the folder                                                                     </span>
<span class="-4280166743678078053" onmouseenter="enter('-4280166743678078053');" onmouseout="out('-4280166743678078053');" style="">1771                 deleteId(db, folderId);                                                                  </span>
<span  style="">1772                                                                                                          </span>
<span class="-7639050556018902006" onmouseenter="enter('-7639050556018902006');" onmouseout="out('-7639050556018902006');" style="">1773                 // If we have a single item, promote it to where the folder                              </span>
<span class="8958956222431385245" onmouseenter="enter('8958956222431385245');" onmouseout="out('8958956222431385245');" style="">1774                 // would have been.                                                                      </span>
<span class="-557617943835263419" onmouseenter="enter('-557617943835263419');" onmouseout="out('-557617943835263419');" style="">1775                 if (folderItems.size() == 1) {                                                           </span>
<span class="7615212261878509112" onmouseenter="enter('7615212261878509112');" onmouseout="out('7615212261878509112');" style="">1776                     final ContentValues childValues = new ContentValues();                               </span>
<span class="-3563728128688510119" onmouseenter="enter('-3563728128688510119');" onmouseout="out('-3563728128688510119');" style="">1777                     copyInteger(values, childValues, LauncherSettings.Favorites.CONTAINER);              </span>
<span class="9115692663157203715" onmouseenter="enter('9115692663157203715');" onmouseout="out('9115692663157203715');" style="">1778                     copyInteger(values, childValues, LauncherSettings.Favorites.SCREEN);                 </span>
<span class="5272896392361170626" onmouseenter="enter('5272896392361170626');" onmouseout="out('5272896392361170626');" style="">1779                     copyInteger(values, childValues, LauncherSettings.Favorites.CELLX);                  </span>
<span class="3676490222384154846" onmouseenter="enter('3676490222384154846');" onmouseout="out('3676490222384154846');" style="">1780                     copyInteger(values, childValues, LauncherSettings.Favorites.CELLY);                  </span>
<span  style="">1781                                                                                                          </span>
<span class="-5157861693853617290" onmouseenter="enter('-5157861693853617290');" onmouseout="out('-5157861693853617290');" style="">1782                     final long id = folderItems.get(0);                                                  </span>
<span class="-1976987628722223211" onmouseenter="enter('-1976987628722223211');" onmouseout="out('-1976987628722223211');" style="">1783                     db.update(TABLE_FAVORITES, childValues,                                              </span>
<span class="-5367643604571967383" onmouseenter="enter('-5367643604571967383');" onmouseout="out('-5367643604571967383');" style="">1784                             LauncherSettings.Favorites._ID + &quot;=&quot; + id, null);                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1785                 } else {                                                                                 </span>
<span class="8338453324960120992" onmouseenter="enter('8338453324960120992');" onmouseout="out('8338453324960120992');" style="">1786                     added = false;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1787                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1788             }                                                                                            </span>
<span class="-5472428940030548841" onmouseenter="enter('-5472428940030548841');" onmouseout="out('-5472428940030548841');" style="">1789             return added;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1790         }                                                                                                </span>
<span  style="">1791                                                                                                          </span>
<span class="-5994840823969871341" onmouseenter="enter('-5994840823969871341');" onmouseout="out('-5994840823969871341');" style="">1792         // A meta shortcut attempts to resolve an intent specified as a URI in the XML, if a             </span>
<span class="-1792726061654942513" onmouseenter="enter('-1792726061654942513');" onmouseout="out('-1792726061654942513');" style="">1793         // logical choice for what shortcut should be used for that intent exists, then it is            </span>
<span class="4044577505779949612" onmouseenter="enter('4044577505779949612');" onmouseout="out('4044577505779949612');" style="">1794         // added. Otherwise add nothing.                                                                 </span>
<span class="-155901270112013596" onmouseenter="enter('-155901270112013596');" onmouseout="out('-155901270112013596');" style="">1795         private long addAppShortcutByUri(SQLiteDatabase db, ContentValues values,                        </span>
<span class="-5544610414896424300" onmouseenter="enter('-5544610414896424300');" onmouseout="out('-5544610414896424300');" style="">1796                 String intentUri) {                                                                      </span>
<span class="-4423970447189602618" onmouseenter="enter('-4423970447189602618');" onmouseout="out('-4423970447189602618');" style="">1797             Intent metaIntent;                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1798             try {                                                                                        </span>
<span class="-780892654735640073" onmouseenter="enter('-780892654735640073');" onmouseout="out('-780892654735640073');" style="">1799                 metaIntent = Intent.parseUri(intentUri, 0);                                              </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1800             } catch (URISyntaxException e) {                                                             </span>
<span class="-8064100063882654504" onmouseenter="enter('-8064100063882654504');" onmouseout="out('-8064100063882654504');" style="">1801                 Log.e(TAG, &quot;Unable to add meta-favorite: &quot; + intentUri, e);                              </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1802                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1803             }                                                                                            </span>
<span  style="">1804                                                                                                          </span>
<span class="8557033759361467860" onmouseenter="enter('8557033759361467860');" onmouseout="out('8557033759361467860');" style="">1805             ResolveInfo resolved = mPackageManager.resolveActivity(metaIntent,                           </span>
<span class="2456166036476176214" onmouseenter="enter('2456166036476176214');" onmouseout="out('2456166036476176214');" style="">1806                     PackageManager.MATCH_DEFAULT_ONLY);                                                  </span>
<span class="-1300490748614024222" onmouseenter="enter('-1300490748614024222');" onmouseout="out('-1300490748614024222');" style="">1807             final List&lt;ResolveInfo&gt; appList = mPackageManager.queryIntentActivities(                     </span>
<span class="8656178102542661668" onmouseenter="enter('8656178102542661668');" onmouseout="out('8656178102542661668');" style="">1808                     metaIntent, PackageManager.MATCH_DEFAULT_ONLY);                                      </span>
<span  style="">1809                                                                                                          </span>
<span class="3807468246607352644" onmouseenter="enter('3807468246607352644');" onmouseout="out('3807468246607352644');" style="">1810             // Verify that the result is an app and not just the resolver dialog asking which            </span>
<span class="3786398014846262159" onmouseenter="enter('3786398014846262159');" onmouseout="out('3786398014846262159');" style="">1811             // app to use.                                                                               </span>
<span class="-2527999738736768738" onmouseenter="enter('-2527999738736768738');" onmouseout="out('-2527999738736768738');" style="">1812             if (wouldLaunchResolverActivity(resolved, appList)) {                                        </span>
<span class="-1508864482817632041" onmouseenter="enter('-1508864482817632041');" onmouseout="out('-1508864482817632041');" style="">1813                 // If only one of the results is a system app then choose that as the default.           </span>
<span class="7096358968319388823" onmouseenter="enter('7096358968319388823');" onmouseout="out('7096358968319388823');" style="">1814                 final ResolveInfo systemApp = getSingleSystemActivity(appList);                          </span>
<span class="3112641083889325831" onmouseenter="enter('3112641083889325831');" onmouseout="out('3112641083889325831');" style="">1815                 if (systemApp == null) {                                                                 </span>
<span class="8733485116897338114" onmouseenter="enter('8733485116897338114');" onmouseout="out('8733485116897338114');" style="">1816                     // There is no logical choice for this meta-favorite, so rather than making          </span>
<span class="-5798817995675177798" onmouseenter="enter('-5798817995675177798');" onmouseout="out('-5798817995675177798');" style="">1817                     // a bad choice just add nothing.                                                    </span>
<span class="8234306782594839467" onmouseenter="enter('8234306782594839467');" onmouseout="out('8234306782594839467');" style="">1818                     Log.w(TAG, &quot;No preference or single system activity found for &quot;                      </span>
<span class="-4585840856389419283" onmouseenter="enter('-4585840856389419283');" onmouseout="out('-4585840856389419283');" style="">1819                             + metaIntent.toString());                                                    </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1820                     return -1;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1821                 }                                                                                        </span>
<span class="-2210262899281174552" onmouseenter="enter('-2210262899281174552');" onmouseout="out('-2210262899281174552');" style="">1822                 resolved = systemApp;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1823             }                                                                                            </span>
<span class="3942116430564013468" onmouseenter="enter('3942116430564013468');" onmouseout="out('3942116430564013468');" style="">1824             final ActivityInfo info = resolved.activityInfo;                                             </span>
<span class="-360088289411741304" onmouseenter="enter('-360088289411741304');" onmouseout="out('-360088289411741304');" style="">1825             final Intent intent = mPackageManager.getLaunchIntentForPackage(info.packageName);           </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">1826             if (intent == null) {                                                                        </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1827                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1828             }                                                                                            </span>
<span class="2514039366923723926" onmouseenter="enter('2514039366923723926');" onmouseout="out('2514039366923723926');" style="">1829             intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |                                              </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">1830                     Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                                          </span>
<span  style="">1831                                                                                                          </span>
<span class="-4637301020367561713" onmouseenter="enter('-4637301020367561713');" onmouseout="out('-4637301020367561713');" style="">1832             return addAppShortcut(db, values, info.loadLabel(mPackageManager).toString(), intent);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1833         }                                                                                                </span>
<span  style="">1834                                                                                                          </span>
<span class="3433873162423347490" onmouseenter="enter('3433873162423347490');" onmouseout="out('3433873162423347490');" style="">1835         private ResolveInfo getSingleSystemActivity(List&lt;ResolveInfo&gt; appList) {                         </span>
<span class="4100859717391359582" onmouseenter="enter('4100859717391359582');" onmouseout="out('4100859717391359582');" style="">1836             ResolveInfo systemResolve = null;                                                            </span>
<span class="-6501614514316220785" onmouseenter="enter('-6501614514316220785');" onmouseout="out('-6501614514316220785');" style="">1837             final int N = appList.size();                                                                </span>
<span class="-7972660160186921434" onmouseenter="enter('-7972660160186921434');" onmouseout="out('-7972660160186921434');" style="">1838             for (int i = 0; i &lt; N; ++i) {                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1839                 try {                                                                                    </span>
<span class="6969736750563256446" onmouseenter="enter('6969736750563256446');" onmouseout="out('6969736750563256446');" style="">1840                     ApplicationInfo info = mPackageManager.getApplicationInfo(                           </span>
<span class="1402648097889367388" onmouseenter="enter('1402648097889367388');" onmouseout="out('1402648097889367388');" style="">1841                             appList.get(i).activityInfo.packageName, 0);                                 </span>
<span class="-476381142815111019" onmouseenter="enter('-476381142815111019');" onmouseout="out('-476381142815111019');" style="">1842                     if ((info.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {                               </span>
<span class="-6460956471084206715" onmouseenter="enter('-6460956471084206715');" onmouseout="out('-6460956471084206715');" style="">1843                         if (systemResolve != null) {                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1844                             return null;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1845                         } else {                                                                         </span>
<span class="-1920150334130463709" onmouseenter="enter('-1920150334130463709');" onmouseout="out('-1920150334130463709');" style="">1846                             systemResolve = appList.get(i);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1847                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1848                     }                                                                                    </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style="">1849                 } catch (PackageManager.NameNotFoundException e) {                                       </span>
<span class="-265560973846634126" onmouseenter="enter('-265560973846634126');" onmouseout="out('-265560973846634126');" style="">1850                     Log.w(TAG, &quot;Unable to get info about resolve results&quot;, e);                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1851                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1852                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1853             }                                                                                            </span>
<span class="-7251347768060538731" onmouseenter="enter('-7251347768060538731');" onmouseout="out('-7251347768060538731');" style="">1854             return systemResolve;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1855         }                                                                                                </span>
<span  style="">1856                                                                                                          </span>
<span class="-4222771116108434581" onmouseenter="enter('-4222771116108434581');" onmouseout="out('-4222771116108434581');" style="">1857         private boolean wouldLaunchResolverActivity(ResolveInfo resolved,                                </span>
<span class="8855822793352880756" onmouseenter="enter('8855822793352880756');" onmouseout="out('8855822793352880756');" style="">1858                 List&lt;ResolveInfo&gt; appList) {                                                             </span>
<span class="-6399418581489152967" onmouseenter="enter('-6399418581489152967');" onmouseout="out('-6399418581489152967');" style="">1859             // If the list contains the above resolved activity, then it can&#x27;t be                        </span>
<span class="4029821552264897243" onmouseenter="enter('4029821552264897243');" onmouseout="out('4029821552264897243');" style="">1860             // ResolverActivity itself.                                                                  </span>
<span class="4411552974527624379" onmouseenter="enter('4411552974527624379');" onmouseout="out('4411552974527624379');" style="">1861             for (int i = 0; i &lt; appList.size(); ++i) {                                                   </span>
<span class="-6814281994408040723" onmouseenter="enter('-6814281994408040723');" onmouseout="out('-6814281994408040723');" style="">1862                 ResolveInfo tmp = appList.get(i);                                                        </span>
<span class="-3160638667287468420" onmouseenter="enter('-3160638667287468420');" onmouseout="out('-3160638667287468420');" style="">1863                 if (tmp.activityInfo.name.equals(resolved.activityInfo.name)                             </span>
<span class="6821338150188138172" onmouseenter="enter('6821338150188138172');" onmouseout="out('6821338150188138172');" style="">1864                         &amp;&amp; tmp.activityInfo.packageName.equals(resolved.activityInfo.packageName)) {     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1865                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1866                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1867             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1868             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1869         }                                                                                                </span>
<span  style="">1870                                                                                                          </span>
<span class="2182986909311989225" onmouseenter="enter('2182986909311989225');" onmouseout="out('2182986909311989225');" style="">1871         private long addAppShortcut(SQLiteDatabase db, ContentValues values,                             </span>
<span class="-1953831149857843506" onmouseenter="enter('-1953831149857843506');" onmouseout="out('-1953831149857843506');" style="">1872                 XmlResourceParser parser) {                                                              </span>
<span class="-1797029550341626583" onmouseenter="enter('-1797029550341626583');" onmouseout="out('-1797029550341626583');" style="">1873             final String packageName = getAttributeValue(parser, ATTR_PACKAGE_NAME);                     </span>
<span class="292435478126887551" onmouseenter="enter('292435478126887551');" onmouseout="out('292435478126887551');" style="">1874             final String className = getAttributeValue(parser, ATTR_CLASS_NAME);                         </span>
<span class="-1954941607715586859" onmouseenter="enter('-1954941607715586859');" onmouseout="out('-1954941607715586859');" style="">1875             final String uri = getAttributeValue(parser, ATTR_URI);                                      </span>
<span  style="">1876                                                                                                          </span>
<span class="822368733919136546" onmouseenter="enter('822368733919136546');" onmouseout="out('822368733919136546');" style="">1877             if (!TextUtils.isEmpty(packageName) &amp;&amp; !TextUtils.isEmpty(className)) {                      </span>
<span class="-812929271411632064" onmouseenter="enter('-812929271411632064');" onmouseout="out('-812929271411632064');" style="">1878                 ActivityInfo info;                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1879                 try {                                                                                    </span>
<span class="3879056527391579072" onmouseenter="enter('3879056527391579072');" onmouseout="out('3879056527391579072');" style="">1880                     ComponentName cn;                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1881                     try {                                                                                </span>
<span class="-2625303589229365660" onmouseenter="enter('-2625303589229365660');" onmouseout="out('-2625303589229365660');" style="">1882                         cn = new ComponentName(packageName, className);                                  </span>
<span class="7198970208759356928" onmouseenter="enter('7198970208759356928');" onmouseout="out('7198970208759356928');" style="">1883                         info = mPackageManager.getActivityInfo(cn, 0);                                   </span>
<span class="-1236034709842272928" onmouseenter="enter('-1236034709842272928');" onmouseout="out('-1236034709842272928');" style="">1884                     } catch (PackageManager.NameNotFoundException nnfe) {                                </span>
<span class="9170643828915655827" onmouseenter="enter('9170643828915655827');" onmouseout="out('9170643828915655827');" style="">1885                         String[] packages = mPackageManager.currentToCanonicalPackageNames(              </span>
<span class="8150942388199951060" onmouseenter="enter('8150942388199951060');" onmouseout="out('8150942388199951060');" style="">1886                                 new String[] { packageName });                                           </span>
<span class="-5669551341563183030" onmouseenter="enter('-5669551341563183030');" onmouseout="out('-5669551341563183030');" style="">1887                         cn = new ComponentName(packages[0], className);                                  </span>
<span class="7198970208759356928" onmouseenter="enter('7198970208759356928');" onmouseout="out('7198970208759356928');" style="">1888                         info = mPackageManager.getActivityInfo(cn, 0);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1889                     }                                                                                    </span>
<span class="6144349283181420382" onmouseenter="enter('6144349283181420382');" onmouseout="out('6144349283181420382');" style="">1890                     final Intent intent = buildMainIntent();                                             </span>
<span class="1965368382885656907" onmouseenter="enter('1965368382885656907');" onmouseout="out('1965368382885656907');" style="">1891                     intent.setComponent(cn);                                                             </span>
<span class="2514039366923723926" onmouseenter="enter('2514039366923723926');" onmouseout="out('2514039366923723926');" style="">1892                     intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |                                      </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">1893                             Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                                  </span>
<span  style="">1894                                                                                                          </span>
<span class="-3995391046779511608" onmouseenter="enter('-3995391046779511608');" onmouseout="out('-3995391046779511608');" style="">1895                     return addAppShortcut(db, values, info.loadLabel(mPackageManager).toString(),        </span>
<span class="478877787810563864" onmouseenter="enter('478877787810563864');" onmouseout="out('478877787810563864');" style="">1896                             intent);                                                                     </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style="">1897                 } catch (PackageManager.NameNotFoundException e) {                                       </span>
<span class="-8677717928489849344" onmouseenter="enter('-8677717928489849344');" onmouseout="out('-8677717928489849344');" style="">1898                     Log.w(TAG, &quot;Unable to add favorite: &quot; + packageName +                                </span>
<span class="2184156839748033514" onmouseenter="enter('2184156839748033514');" onmouseout="out('2184156839748033514');" style="">1899                             &quot;/&quot; + className, e);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1900                 }                                                                                        </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1901                 return -1;                                                                               </span>
<span class="8157957067082875903" onmouseenter="enter('8157957067082875903');" onmouseout="out('8157957067082875903');" style="">1902             } else if (!TextUtils.isEmpty(uri)) {                                                        </span>
<span class="9183809099675717906" onmouseenter="enter('9183809099675717906');" onmouseout="out('9183809099675717906');" style="">1903                 // If no component specified try to find a shortcut to add from the URI.                 </span>
<span class="787045193894698076" onmouseenter="enter('787045193894698076');" onmouseout="out('787045193894698076');" style="">1904                 return addAppShortcutByUri(db, values, uri);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1905             } else {                                                                                     </span>
<span class="-8012351384438033294" onmouseenter="enter('-8012351384438033294');" onmouseout="out('-8012351384438033294');" style="">1906                 Log.e(TAG, &quot;Skipping invalid &lt;favorite&gt; with no component or uri&quot;);                      </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1907                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1908             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1909         }                                                                                                </span>
<span  style="">1910                                                                                                          </span>
<span class="5143222161199963889" onmouseenter="enter('5143222161199963889');" onmouseout="out('5143222161199963889');" style="">1911         private long addAppShortcut(SQLiteDatabase db, ContentValues values, String title,               </span>
<span class="-7854945536219486202" onmouseenter="enter('-7854945536219486202');" onmouseout="out('-7854945536219486202');" style="">1912                 Intent intent) {                                                                         </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">1913             long id = generateNewItemId();                                                               </span>
<span class="-3718774165038650653" onmouseenter="enter('-3718774165038650653');" onmouseout="out('-3718774165038650653');" style="">1914             values.put(Favorites.INTENT, intent.toUri(0));                                               </span>
<span class="621847407046641821" onmouseenter="enter('621847407046641821');" onmouseout="out('621847407046641821');" style="">1915             values.put(Favorites.TITLE, title);                                                          </span>
<span class="2342423886359204479" onmouseenter="enter('2342423886359204479');" onmouseout="out('2342423886359204479');" style="">1916             values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_APPLICATION);                            </span>
<span class="2615630886033492062" onmouseenter="enter('2615630886033492062');" onmouseout="out('2615630886033492062');" style="">1917             values.put(Favorites.SPANX, 1);                                                              </span>
<span class="-5449525265648364043" onmouseenter="enter('-5449525265648364043');" onmouseout="out('-5449525265648364043');" style="">1918             values.put(Favorites.SPANY, 1);                                                              </span>
<span class="2067035903685433430" onmouseenter="enter('2067035903685433430');" onmouseout="out('2067035903685433430');" style="">1919             values.put(Favorites._ID, id);                                                               </span>
<span class="-2280993933700750215" onmouseenter="enter('-2280993933700750215');" onmouseout="out('-2280993933700750215');" style="">1920             if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values) &lt; 0) {                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1921                 return -1;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1922             } else {                                                                                     </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1923                 return id;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1924             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1925         }                                                                                                </span>
<span  style="">1926                                                                                                          </span>
<span class="-8700086773804460728" onmouseenter="enter('-8700086773804460728');" onmouseout="out('-8700086773804460728');" style="">1927         private long addFolder(SQLiteDatabase db, ContentValues values) {                                </span>
<span class="-2154578791511231117" onmouseenter="enter('-2154578791511231117');" onmouseout="out('-2154578791511231117');" style="">1928             values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_FOLDER);                                 </span>
<span class="2615630886033492062" onmouseenter="enter('2615630886033492062');" onmouseout="out('2615630886033492062');" style="">1929             values.put(Favorites.SPANX, 1);                                                              </span>
<span class="-5449525265648364043" onmouseenter="enter('-5449525265648364043');" onmouseout="out('-5449525265648364043');" style="">1930             values.put(Favorites.SPANY, 1);                                                              </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">1931             long id = generateNewItemId();                                                               </span>
<span class="2067035903685433430" onmouseenter="enter('2067035903685433430');" onmouseout="out('2067035903685433430');" style="">1932             values.put(Favorites._ID, id);                                                               </span>
<span class="-8791434135793277446" onmouseenter="enter('-8791434135793277446');" onmouseout="out('-8791434135793277446');" style="">1933             if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values) &lt;= 0) {                        </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1934                 return -1;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1935             } else {                                                                                     </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1936                 return id;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1937             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1938         }                                                                                                </span>
<span  style="">1939                                                                                                          </span>
<span class="-5233040857758997197" onmouseenter="enter('-5233040857758997197');" onmouseout="out('-5233040857758997197');" style="">1940         private ComponentName getSearchWidgetProvider() {                                                </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style="">1941             SearchManager searchManager =                                                                </span>
<span class="-186007776176525963" onmouseenter="enter('-186007776176525963');" onmouseout="out('-186007776176525963');" style="">1942                     (SearchManager) mContext.getSystemService(Context.SEARCH_SERVICE);                   </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style="">1943             ComponentName searchComponent = searchManager.getGlobalSearchActivity();                     </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style="">1944             if (searchComponent == null) return null;                                                    </span>
<span class="-2463026691705518431" onmouseenter="enter('-2463026691705518431');" onmouseout="out('-2463026691705518431');" style="">1945             return getProviderInPackage(searchComponent.getPackageName());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1946         }                                                                                                </span>
<span  style="">1947                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1948         /**                                                                                              </span>
<span class="-6817641519009759490" onmouseenter="enter('-6817641519009759490');" onmouseout="out('-6817641519009759490');" style="">1949          * Gets an appwidget provider from the given package. If the package contains more than          </span>
<span class="8642686543042194127" onmouseenter="enter('8642686543042194127');" onmouseout="out('8642686543042194127');" style="">1950          * one appwidget provider, an arbitrary one is returned.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1951          */                                                                                              </span>
<span class="-8892261496520206835" onmouseenter="enter('-8892261496520206835');" onmouseout="out('-8892261496520206835');" style="">1952         private ComponentName getProviderInPackage(String packageName) {                                 </span>
<span class="5926615868676258534" onmouseenter="enter('5926615868676258534');" onmouseout="out('5926615868676258534');" style="">1953             AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);                  </span>
<span class="-9146530298789779749" onmouseenter="enter('-9146530298789779749');" onmouseout="out('-9146530298789779749');" style="">1954             List&lt;AppWidgetProviderInfo&gt; providers = appWidgetManager.getInstalledProviders();            </span>
<span class="8240747760739264929" onmouseenter="enter('8240747760739264929');" onmouseout="out('8240747760739264929');" style="">1955             if (providers == null) return null;                                                          </span>
<span class="-4472953897741653841" onmouseenter="enter('-4472953897741653841');" onmouseout="out('-4472953897741653841');" style="">1956             final int providerCount = providers.size();                                                  </span>
<span class="-3677188574112977350" onmouseenter="enter('-3677188574112977350');" onmouseout="out('-3677188574112977350');" style="">1957             for (int i = 0; i &lt; providerCount; i++) {                                                    </span>
<span class="-7171635845718933899" onmouseenter="enter('-7171635845718933899');" onmouseout="out('-7171635845718933899');" style="">1958                 ComponentName provider = providers.get(i).provider;                                      </span>
<span class="-8539437723912583859" onmouseenter="enter('-8539437723912583859');" onmouseout="out('-8539437723912583859');" style="">1959                 if (provider != null &amp;&amp; provider.getPackageName().equals(packageName)) {                 </span>
<span class="-5713992356211538326" onmouseenter="enter('-5713992356211538326');" onmouseout="out('-5713992356211538326');" style="">1960                     return provider;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1961                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1962             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1963             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1964         }                                                                                                </span>
<span  style="">1965                                                                                                          </span>
<span class="7423522138346906000" onmouseenter="enter('7423522138346906000');" onmouseout="out('7423522138346906000');" style="">1966         private boolean addAppWidget(XmlResourceParser parser, int type,                                 </span>
<span class="-6133617394960992004" onmouseenter="enter('-6133617394960992004');" onmouseout="out('-6133617394960992004');" style="">1967                 SQLiteDatabase db, ContentValues values)                                                 </span>
<span class="-2080139816352784756" onmouseenter="enter('-2080139816352784756');" onmouseout="out('-2080139816352784756');" style="">1968                 throws XmlPullParserException, IOException {                                             </span>
<span  style="">1969                                                                                                          </span>
<span class="-718046620766449518" onmouseenter="enter('-718046620766449518');" onmouseout="out('-718046620766449518');" style="">1970             String packageName = getAttributeValue(parser, ATTR_PACKAGE_NAME);                           </span>
<span class="4439764153802283676" onmouseenter="enter('4439764153802283676');" onmouseout="out('4439764153802283676');" style="">1971             String className = getAttributeValue(parser, ATTR_CLASS_NAME);                               </span>
<span  style="">1972                                                                                                          </span>
<span class="5996115603177381005" onmouseenter="enter('5996115603177381005');" onmouseout="out('5996115603177381005');" style="">1973             if (packageName == null || className == null) {                                              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1974                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1975             }                                                                                            </span>
<span  style="">1976                                                                                                          </span>
<span class="-560542064760217423" onmouseenter="enter('-560542064760217423');" onmouseout="out('-560542064760217423');" style="">1977             boolean hasPackage = true;                                                                   </span>
<span class="-654268133061106000" onmouseenter="enter('-654268133061106000');" onmouseout="out('-654268133061106000');" style="">1978             ComponentName cn = new ComponentName(packageName, className);                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1979             try {                                                                                        </span>
<span class="8130452402467519988" onmouseenter="enter('8130452402467519988');" onmouseout="out('8130452402467519988');" style="">1980                 mPackageManager.getReceiverInfo(cn, 0);                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1981             } catch (Exception e) {                                                                      </span>
<span class="9170643828915655827" onmouseenter="enter('9170643828915655827');" onmouseout="out('9170643828915655827');" style="">1982                 String[] packages = mPackageManager.currentToCanonicalPackageNames(                      </span>
<span class="8150942388199951060" onmouseenter="enter('8150942388199951060');" onmouseout="out('8150942388199951060');" style="">1983                         new String[] { packageName });                                                   </span>
<span class="-5669551341563183030" onmouseenter="enter('-5669551341563183030');" onmouseout="out('-5669551341563183030');" style="">1984                 cn = new ComponentName(packages[0], className);                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1985                 try {                                                                                    </span>
<span class="8130452402467519988" onmouseenter="enter('8130452402467519988');" onmouseout="out('8130452402467519988');" style="">1986                     mPackageManager.getReceiverInfo(cn, 0);                                              </span>
<span class="9117521976016008877" onmouseenter="enter('9117521976016008877');" onmouseout="out('9117521976016008877');" style="">1987                 } catch (Exception e1) {                                                                 </span>
<span class="-7691856903679287558" onmouseenter="enter('-7691856903679287558');" onmouseout="out('-7691856903679287558');" style="">1988                     System.out.println(&quot;Can&#x27;t find widget provider: &quot; + className);                      </span>
<span class="-7980647756745699951" onmouseenter="enter('-7980647756745699951');" onmouseout="out('-7980647756745699951');" style="">1989                     hasPackage = false;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1990                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1991             }                                                                                            </span>
<span  style="">1992                                                                                                          </span>
<span class="409326210478719297" onmouseenter="enter('409326210478719297');" onmouseout="out('409326210478719297');" style="">1993             if (hasPackage) {                                                                            </span>
<span class="-4669201679920980010" onmouseenter="enter('-4669201679920980010');" onmouseout="out('-4669201679920980010');" style="">1994                 String spanX = getAttributeValue(parser, ATTR_SPAN_X);                                   </span>
<span class="-5569004961371581944" onmouseenter="enter('-5569004961371581944');" onmouseout="out('-5569004961371581944');" style="">1995                 String spanY = getAttributeValue(parser, ATTR_SPAN_Y);                                   </span>
<span  style="">1996                                                                                                          </span>
<span class="-6724210500107661935" onmouseenter="enter('-6724210500107661935');" onmouseout="out('-6724210500107661935');" style="">1997                 values.put(Favorites.SPANX, spanX);                                                      </span>
<span class="5251293644299118699" onmouseenter="enter('5251293644299118699');" onmouseout="out('5251293644299118699');" style="">1998                 values.put(Favorites.SPANY, spanY);                                                      </span>
<span  style="">1999                                                                                                          </span>
<span class="1289388088122621273" onmouseenter="enter('1289388088122621273');" onmouseout="out('1289388088122621273');" style="">2000                 // Read the extras                                                                       </span>
<span class="1776998572180860248" onmouseenter="enter('1776998572180860248');" onmouseout="out('1776998572180860248');" style="">2001                 Bundle extras = new Bundle();                                                            </span>
<span class="-5007551987214809206" onmouseenter="enter('-5007551987214809206');" onmouseout="out('-5007551987214809206');" style="">2002                 int widgetDepth = parser.getDepth();                                                     </span>
<span class="-2406917717669951461" onmouseenter="enter('-2406917717669951461');" onmouseout="out('-2406917717669951461');" style="">2003                 while ((type = parser.next()) != XmlPullParser.END_TAG ||                                </span>
<span class="712714666508979329" onmouseenter="enter('712714666508979329');" onmouseout="out('712714666508979329');" style="">2004                         parser.getDepth() &gt; widgetDepth) {                                               </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">2005                     if (type != XmlPullParser.START_TAG) {                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2006                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2007                     }                                                                                    </span>
<span  style="">2008                                                                                                          </span>
<span class="2554175265936504377" onmouseenter="enter('2554175265936504377');" onmouseout="out('2554175265936504377');" style="">2009                     if (TAG_EXTRA.equals(parser.getName())) {                                            </span>
<span class="-9040232295281944434" onmouseenter="enter('-9040232295281944434');" onmouseout="out('-9040232295281944434');" style="">2010                         String key = getAttributeValue(parser, ATTR_KEY);                                </span>
<span class="1087049418585534522" onmouseenter="enter('1087049418585534522');" onmouseout="out('1087049418585534522');" style="">2011                         String value = getAttributeValue(parser, ATTR_VALUE);                            </span>
<span class="1352636898895267389" onmouseenter="enter('1352636898895267389');" onmouseout="out('1352636898895267389');" style="">2012                         if (key != null &amp;&amp; value != null) {                                              </span>
<span class="3617031493102045508" onmouseenter="enter('3617031493102045508');" onmouseout="out('3617031493102045508');" style="">2013                             extras.putString(key, value);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2014                         } else {                                                                         </span>
<span class="-1604814790568911229" onmouseenter="enter('-1604814790568911229');" onmouseout="out('-1604814790568911229');" style="">2015                             throw new RuntimeException(&quot;Widget extras must have a key and value&quot;);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2016                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2017                     } else {                                                                             </span>
<span class="-4167415435020508425" onmouseenter="enter('-4167415435020508425');" onmouseout="out('-4167415435020508425');" style="">2018                         throw new RuntimeException(&quot;Widgets can contain only extras&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2019                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2020                 }                                                                                        </span>
<span  style="">2021                                                                                                          </span>
<span class="-7507688791595687187" onmouseenter="enter('-7507688791595687187');" onmouseout="out('-7507688791595687187');" style="">2022                 return addAppWidget(db, values, cn, extras);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2023             }                                                                                            </span>
<span  style="">2024                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2025             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2026         }                                                                                                </span>
<span  style="">2027                                                                                                          </span>
<span class="5639814246862080116" onmouseenter="enter('5639814246862080116');" onmouseout="out('5639814246862080116');" style="">2028         private boolean addAppWidget(SQLiteDatabase db, ContentValues values, ComponentName cn,          </span>
<span class="-8655373127252952262" onmouseenter="enter('-8655373127252952262');" onmouseout="out('-8655373127252952262');" style="">2029                Bundle extras) {                                                                          </span>
<span class="1781858051498019239" onmouseenter="enter('1781858051498019239');" onmouseout="out('1781858051498019239');" style="">2030             boolean allocatedAppWidgets = false;                                                         </span>
<span class="328319718470950320" onmouseenter="enter('328319718470950320');" onmouseout="out('328319718470950320');" style="">2031             final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);            </span>
<span  style="">2032                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2033             try {                                                                                        </span>
<span class="7176738113779216844" onmouseenter="enter('7176738113779216844');" onmouseout="out('7176738113779216844');" style="">2034                 int appWidgetId = mAppWidgetHost.allocateAppWidgetId();                                  </span>
<span  style="">2035                                                                                                          </span>
<span class="2941545182515325414" onmouseenter="enter('2941545182515325414');" onmouseout="out('2941545182515325414');" style="">2036                 values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_APPWIDGET);                          </span>
<span class="-2217583362005241057" onmouseenter="enter('-2217583362005241057');" onmouseout="out('-2217583362005241057');" style="">2037                 values.put(Favorites.APPWIDGET_ID, appWidgetId);                                         </span>
<span class="720562493083146912" onmouseenter="enter('720562493083146912');" onmouseout="out('720562493083146912');" style="">2038                 values.put(Favorites.APPWIDGET_PROVIDER, cn.flattenToString());                          </span>
<span class="-7797208824576653991" onmouseenter="enter('-7797208824576653991');" onmouseout="out('-7797208824576653991');" style="">2039                 values.put(Favorites._ID, generateNewItemId());                                          </span>
<span class="-1295706295937517511" onmouseenter="enter('-1295706295937517511');" onmouseout="out('-1295706295937517511');" style="">2040                 dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values);                               </span>
<span  style="">2041                                                                                                          </span>
<span class="-7439816523904895371" onmouseenter="enter('-7439816523904895371');" onmouseout="out('-7439816523904895371');" style="">2042                 allocatedAppWidgets = true;                                                              </span>
<span  style="">2043                                                                                                          </span>
<span class="-8318890136327376190" onmouseenter="enter('-8318890136327376190');" onmouseout="out('-8318890136327376190');" style="">2044                 // TODO: need to check return value                                                      </span>
<span class="3068764521751310260" onmouseenter="enter('3068764521751310260');" onmouseout="out('3068764521751310260');" style="">2045                 appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId, cn);                              </span>
<span  style="">2046                                                                                                          </span>
<span class="-7400703460033211758" onmouseenter="enter('-7400703460033211758');" onmouseout="out('-7400703460033211758');" style="">2047                 // Send a broadcast to configure the widget                                              </span>
<span class="6241633944023172610" onmouseenter="enter('6241633944023172610');" onmouseout="out('6241633944023172610');" style="">2048                 if (extras != null &amp;&amp; !extras.isEmpty()) {                                               </span>
<span class="-3925623083558987667" onmouseenter="enter('-3925623083558987667');" onmouseout="out('-3925623083558987667');" style="">2049                     Intent intent = new Intent(ACTION_APPWIDGET_DEFAULT_WORKSPACE_CONFIGURE);            </span>
<span class="1965368382885656907" onmouseenter="enter('1965368382885656907');" onmouseout="out('1965368382885656907');" style="">2050                     intent.setComponent(cn);                                                             </span>
<span class="4121123198595596428" onmouseenter="enter('4121123198595596428');" onmouseout="out('4121123198595596428');" style="">2051                     intent.putExtras(extras);                                                            </span>
<span class="-3801864120150122877" onmouseenter="enter('-3801864120150122877');" onmouseout="out('-3801864120150122877');" style="">2052                     intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);                   </span>
<span class="15213497691013705" onmouseenter="enter('15213497691013705');" onmouseout="out('15213497691013705');" style="">2053                     mContext.sendBroadcast(intent);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2054                 }                                                                                        </span>
<span class="3255801419413274971" onmouseenter="enter('3255801419413274971');" onmouseout="out('3255801419413274971');" style="">2055             } catch (RuntimeException ex) {                                                              </span>
<span class="7589023920505453658" onmouseenter="enter('7589023920505453658');" onmouseout="out('7589023920505453658');" style="">2056                 Log.e(TAG, &quot;Problem allocating appWidgetId&quot;, ex);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2057             }                                                                                            </span>
<span  style="">2058                                                                                                          </span>
<span class="-7630264847974566407" onmouseenter="enter('-7630264847974566407');" onmouseout="out('-7630264847974566407');" style="">2059             return allocatedAppWidgets;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2060         }                                                                                                </span>
<span  style="">2061                                                                                                          </span>
<span class="-1908262329425085059" onmouseenter="enter('-1908262329425085059');" onmouseout="out('-1908262329425085059');" style="">2062         private long addUriShortcut(SQLiteDatabase db, ContentValues values, Resources res,              </span>
<span class="-1953831149857843506" onmouseenter="enter('-1953831149857843506');" onmouseout="out('-1953831149857843506');" style="">2063                 XmlResourceParser parser) {                                                              </span>
<span class="-3466107134881523829" onmouseenter="enter('-3466107134881523829');" onmouseout="out('-3466107134881523829');" style="">2064             final int iconResId = getAttributeResourceValue(parser, ATTR_ICON, 0);                       </span>
<span class="-292812422880448019" onmouseenter="enter('-292812422880448019');" onmouseout="out('-292812422880448019');" style="">2065             final int titleResId = getAttributeResourceValue(parser, ATTR_TITLE, 0);                     </span>
<span  style="">2066                                                                                                          </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">2067             Intent intent;                                                                               </span>
<span class="7870717952219178672" onmouseenter="enter('7870717952219178672');" onmouseout="out('7870717952219178672');" style="">2068             String uri = null;                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2069             try {                                                                                        </span>
<span class="-7650716598670279522" onmouseenter="enter('-7650716598670279522');" onmouseout="out('-7650716598670279522');" style="">2070                 uri = getAttributeValue(parser, ATTR_URI);                                               </span>
<span class="4895125029429862660" onmouseenter="enter('4895125029429862660');" onmouseout="out('4895125029429862660');" style="">2071                 intent = Intent.parseUri(uri, 0);                                                        </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">2072             } catch (URISyntaxException e) {                                                             </span>
<span class="-551028723023595678" onmouseenter="enter('-551028723023595678');" onmouseout="out('-551028723023595678');" style="">2073                 Log.w(TAG, &quot;Shortcut has malformed uri: &quot; + uri);                                        </span>
<span class="-2825391504508189972" onmouseenter="enter('-2825391504508189972');" onmouseout="out('-2825391504508189972');" style="">2074                 return -1; // Oh well                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2075             }                                                                                            </span>
<span  style="">2076                                                                                                          </span>
<span class="-4845565437702179980" onmouseenter="enter('-4845565437702179980');" onmouseout="out('-4845565437702179980');" style="">2077             if (iconResId == 0 || titleResId == 0) {                                                     </span>
<span class="1657418688720717724" onmouseenter="enter('1657418688720717724');" onmouseout="out('1657418688720717724');" style="">2078                 Log.w(TAG, &quot;Shortcut is missing title or icon resource ID&quot;);                             </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">2079                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2080             }                                                                                            </span>
<span  style="">2081                                                                                                          </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">2082             long id = generateNewItemId();                                                               </span>
<span class="-2757970933426051337" onmouseenter="enter('-2757970933426051337');" onmouseout="out('-2757970933426051337');" style="">2083             intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);                                              </span>
<span class="-3718774165038650653" onmouseenter="enter('-3718774165038650653');" onmouseout="out('-3718774165038650653');" style="">2084             values.put(Favorites.INTENT, intent.toUri(0));                                               </span>
<span class="6819813114831017583" onmouseenter="enter('6819813114831017583');" onmouseout="out('6819813114831017583');" style="">2085             values.put(Favorites.TITLE, res.getString(titleResId));                                      </span>
<span class="8456179705287717594" onmouseenter="enter('8456179705287717594');" onmouseout="out('8456179705287717594');" style="">2086             values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_SHORTCUT);                               </span>
<span class="2615630886033492062" onmouseenter="enter('2615630886033492062');" onmouseout="out('2615630886033492062');" style="">2087             values.put(Favorites.SPANX, 1);                                                              </span>
<span class="-5449525265648364043" onmouseenter="enter('-5449525265648364043');" onmouseout="out('-5449525265648364043');" style="">2088             values.put(Favorites.SPANY, 1);                                                              </span>
<span class="-4755043480149851001" onmouseenter="enter('-4755043480149851001');" onmouseout="out('-4755043480149851001');" style="">2089             values.put(Favorites.ICON_TYPE, Favorites.ICON_TYPE_RESOURCE);                               </span>
<span class="1859204163826884777" onmouseenter="enter('1859204163826884777');" onmouseout="out('1859204163826884777');" style="">2090             values.put(Favorites.ICON_PACKAGE, res.getResourcePackageName(iconResId));                   </span>
<span class="7390195787308769234" onmouseenter="enter('7390195787308769234');" onmouseout="out('7390195787308769234');" style="">2091             values.put(Favorites.ICON_RESOURCE, res.getResourceName(iconResId));                         </span>
<span class="2067035903685433430" onmouseenter="enter('2067035903685433430');" onmouseout="out('2067035903685433430');" style="">2092             values.put(Favorites._ID, id);                                                               </span>
<span  style="">2093                                                                                                          </span>
<span class="-2280993933700750215" onmouseenter="enter('-2280993933700750215');" onmouseout="out('-2280993933700750215');" style="">2094             if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values) &lt; 0) {                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">2095                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2096             }                                                                                            </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">2097             return id;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2098         }                                                                                                </span>
<span  style="">2099                                                                                                          </span>
<span class="725730754436415996" onmouseenter="enter('725730754436415996');" onmouseout="out('725730754436415996');" style="">2100         private void migrateLauncher2Shortcuts(SQLiteDatabase db, Uri uri) {                             </span>
<span class="-1113390730047466962" onmouseenter="enter('-1113390730047466962');" onmouseout="out('-1113390730047466962');" style="">2101             final ContentResolver resolver = mContext.getContentResolver();                              </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="">2102             Cursor c = null;                                                                             </span>
<span class="-7835997453776942924" onmouseenter="enter('-7835997453776942924');" onmouseout="out('-7835997453776942924');" style="">2103             int count = 0;                                                                               </span>
<span class="-3336839334240068207" onmouseenter="enter('-3336839334240068207');" onmouseout="out('-3336839334240068207');" style="">2104             int curScreen = 0;                                                                           </span>
<span  style="">2105                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2106             try {                                                                                        </span>
<span class="-9000085593458662527" onmouseenter="enter('-9000085593458662527');" onmouseout="out('-9000085593458662527');" style="">2107                 c = resolver.query(uri, null, null, null, &quot;title ASC&quot;);                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2108             } catch (Exception e) {                                                                      </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">2109                 // Ignore                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2110             }                                                                                            </span>
<span  style="">2111                                                                                                          </span>
<span class="-8364191572061005786" onmouseenter="enter('-8364191572061005786');" onmouseout="out('-8364191572061005786');" style="">2112             // We already have a favorites database in the old provider                                  </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2113             if (c != null) {                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2114                 try {                                                                                    </span>
<span class="-7145577210477193493" onmouseenter="enter('-7145577210477193493');" onmouseout="out('-7145577210477193493');" style="">2115                     if (c.getCount() &gt; 0) {                                                              </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">2116                         final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);     </span>
<span class="-3305857310034960574" onmouseenter="enter('-3305857310034960574');" onmouseout="out('-3305857310034960574');" style="">2117                         final int intentIndex                                                            </span>
<span class="7354730669796853916" onmouseenter="enter('7354730669796853916');" onmouseout="out('7354730669796853916');" style="">2118                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.INTENT);            </span>
<span class="-5630883347545993547" onmouseenter="enter('-5630883347545993547');" onmouseout="out('-5630883347545993547');" style="">2119                         final int titleIndex                                                             </span>
<span class="698330273931132471" onmouseenter="enter('698330273931132471');" onmouseout="out('698330273931132471');" style="">2120                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);             </span>
<span class="-3330891132272232037" onmouseenter="enter('-3330891132272232037');" onmouseout="out('-3330891132272232037');" style="">2121                         final int iconTypeIndex                                                          </span>
<span class="7801651150775381680" onmouseenter="enter('7801651150775381680');" onmouseout="out('7801651150775381680');" style="">2122                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYPE);         </span>
<span class="-1496515754016715409" onmouseenter="enter('-1496515754016715409');" onmouseout="out('-1496515754016715409');" style="">2123                         final int iconIndex                                                              </span>
<span class="-6743710571640483882" onmouseenter="enter('-6743710571640483882');" onmouseout="out('-6743710571640483882');" style="">2124                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);              </span>
<span class="-4968513115427762421" onmouseenter="enter('-4968513115427762421');" onmouseout="out('-4968513115427762421');" style="">2125                         final int iconPackageIndex                                                       </span>
<span class="6406994869194943351" onmouseenter="enter('6406994869194943351');" onmouseout="out('6406994869194943351');" style="">2126                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE);      </span>
<span class="7917018656335895183" onmouseenter="enter('7917018656335895183');" onmouseout="out('7917018656335895183');" style="">2127                         final int iconResourceIndex                                                      </span>
<span class="2805080254532821790" onmouseenter="enter('2805080254532821790');" onmouseout="out('2805080254532821790');" style="">2128                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURCE);     </span>
<span class="-4237567403763432926" onmouseenter="enter('-4237567403763432926');" onmouseout="out('-4237567403763432926');" style="">2129                         final int containerIndex                                                         </span>
<span class="-5056484222025497452" onmouseenter="enter('-5056484222025497452');" onmouseout="out('-5056484222025497452');" style="">2130                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);         </span>
<span class="-1231922168250187193" onmouseenter="enter('-1231922168250187193');" onmouseout="out('-1231922168250187193');" style="">2131                         final int itemTypeIndex                                                          </span>
<span class="4225538929397018586" onmouseenter="enter('4225538929397018586');" onmouseout="out('4225538929397018586');" style="">2132                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);         </span>
<span class="1886064968207935621" onmouseenter="enter('1886064968207935621');" onmouseout="out('1886064968207935621');" style="">2133                         final int screenIndex                                                            </span>
<span class="5823358741192050359" onmouseenter="enter('5823358741192050359');" onmouseout="out('5823358741192050359');" style="">2134                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);            </span>
<span class="148786652433469700" onmouseenter="enter('148786652433469700');" onmouseout="out('148786652433469700');" style="">2135                         final int cellXIndex                                                             </span>
<span class="-2420213882448561608" onmouseenter="enter('-2420213882448561608');" onmouseout="out('-2420213882448561608');" style="">2136                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);             </span>
<span class="7105291823960507491" onmouseenter="enter('7105291823960507491');" onmouseout="out('7105291823960507491');" style="">2137                         final int cellYIndex                                                             </span>
<span class="570222995967736070" onmouseenter="enter('570222995967736070');" onmouseout="out('570222995967736070');" style="">2138                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);             </span>
<span class="-6657516663903609513" onmouseenter="enter('-6657516663903609513');" onmouseout="out('-6657516663903609513');" style="">2139                         final int uriIndex                                                               </span>
<span class="-7627325667289175305" onmouseenter="enter('-7627325667289175305');" onmouseout="out('-7627325667289175305');" style="">2140                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);               </span>
<span class="3126191733073545935" onmouseenter="enter('3126191733073545935');" onmouseout="out('3126191733073545935');" style="">2141                         final int displayModeIndex                                                       </span>
<span class="5824024113471232605" onmouseenter="enter('5824024113471232605');" onmouseout="out('5824024113471232605');" style="">2142                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.DISPLAY_MODE);      </span>
<span class="6969636044710489163" onmouseenter="enter('6969636044710489163');" onmouseout="out('6969636044710489163');" style="">2143                         final int profileIndex                                                           </span>
<span class="-4394079448083019726" onmouseenter="enter('-4394079448083019726');" onmouseout="out('-4394079448083019726');" style="">2144                                 = c.getColumnIndex(LauncherSettings.Favorites.PROFILE_ID);               </span>
<span  style="">2145                                                                                                          </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style="">2146                         int i = 0;                                                                       </span>
<span class="3196084964022358374" onmouseenter="enter('3196084964022358374');" onmouseout="out('3196084964022358374');" style="">2147                         int curX = 0;                                                                    </span>
<span class="-8919994129307273415" onmouseenter="enter('-8919994129307273415');" onmouseout="out('-8919994129307273415');" style="">2148                         int curY = 0;                                                                    </span>
<span  style="">2149                                                                                                          </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2150                         final LauncherAppState app = LauncherAppState.getInstance();                     </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2151                         final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();              </span>
<span class="690371396691664791" onmouseenter="enter('690371396691664791');" onmouseout="out('690371396691664791');" style="">2152                         final int width = (int) grid.numColumns;                                         </span>
<span class="-5064901428253886355" onmouseenter="enter('-5064901428253886355');" onmouseout="out('-5064901428253886355');" style="">2153                         final int height = (int) grid.numRows;                                           </span>
<span class="-4109722385928167056" onmouseenter="enter('-4109722385928167056');" onmouseout="out('-4109722385928167056');" style="">2154                         final int hotseatWidth = (int) grid.numHotseatIcons;                             </span>
<span  style="">2155                                                                                                          </span>
<span class="-4392487977825691924" onmouseenter="enter('-4392487977825691924');" onmouseout="out('-4392487977825691924');" style="">2156                         final HashSet&lt;String&gt; seenIntents = new HashSet&lt;String&gt;(c.getCount());           </span>
<span  style="">2157                                                                                                          </span>
<span class="-1775881703038933069" onmouseenter="enter('-1775881703038933069');" onmouseout="out('-1775881703038933069');" style="">2158                         final ArrayList&lt;ContentValues&gt; shortcuts = new ArrayList&lt;ContentValues&gt;();       </span>
<span class="-5282219486258454454" onmouseenter="enter('-5282219486258454454');" onmouseout="out('-5282219486258454454');" style="">2159                         final ArrayList&lt;ContentValues&gt; folders = new ArrayList&lt;ContentValues&gt;();         </span>
<span class="7748304206224281059" onmouseenter="enter('7748304206224281059');" onmouseout="out('7748304206224281059');" style="">2160                         final SparseArray&lt;ContentValues&gt; hotseat = new SparseArray&lt;ContentValues&gt;();     </span>
<span  style="">2161                                                                                                          </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style="">2162                         while (c.moveToNext()) {                                                         </span>
<span class="-2982692859195643614" onmouseenter="enter('-2982692859195643614');" onmouseout="out('-2982692859195643614');" style="">2163                             final int itemType = c.getInt(itemTypeIndex);                                </span>
<span class="-7155300134759553393" onmouseenter="enter('-7155300134759553393');" onmouseout="out('-7155300134759553393');" style="">2164                             if (itemType != Favorites.ITEM_TYPE_APPLICATION                              </span>
<span class="-6505147694408678007" onmouseenter="enter('-6505147694408678007');" onmouseout="out('-6505147694408678007');" style="">2165                                     &amp;&amp; itemType != Favorites.ITEM_TYPE_SHORTCUT                          </span>
<span class="-1211279440538129484" onmouseenter="enter('-1211279440538129484');" onmouseout="out('-1211279440538129484');" style="">2166                                     &amp;&amp; itemType != Favorites.ITEM_TYPE_FOLDER) {                         </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2167                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2168                             }                                                                            </span>
<span  style="">2169                                                                                                          </span>
<span class="6546086433507254477" onmouseenter="enter('6546086433507254477');" onmouseout="out('6546086433507254477');" style="">2170                             final int cellX = c.getInt(cellXIndex);                                      </span>
<span class="-5848765603231722693" onmouseenter="enter('-5848765603231722693');" onmouseout="out('-5848765603231722693');" style="">2171                             final int cellY = c.getInt(cellYIndex);                                      </span>
<span class="5057139106655212954" onmouseenter="enter('5057139106655212954');" onmouseout="out('5057139106655212954');" style="">2172                             final int screen = c.getInt(screenIndex);                                    </span>
<span class="-6682259384170717005" onmouseenter="enter('-6682259384170717005');" onmouseout="out('-6682259384170717005');" style="">2173                             int container = c.getInt(containerIndex);                                    </span>
<span class="-3517014905521526588" onmouseenter="enter('-3517014905521526588');" onmouseout="out('-3517014905521526588');" style="">2174                             final String intentStr = c.getString(intentIndex);                           </span>
<span  style="">2175                                                                                                          </span>
<span class="8272328117098122260" onmouseenter="enter('8272328117098122260');" onmouseout="out('8272328117098122260');" style="">2176                             UserManagerCompat userManager = UserManagerCompat.getInstance(mContext);     </span>
<span class="7210862209025052290" onmouseenter="enter('7210862209025052290');" onmouseout="out('7210862209025052290');" style="">2177                             UserHandleCompat userHandle;                                                 </span>
<span class="-704754462563124721" onmouseenter="enter('-704754462563124721');" onmouseout="out('-704754462563124721');" style="">2178                             final long userSerialNumber;                                                 </span>
<span class="-3188525411347809180" onmouseenter="enter('-3188525411347809180');" onmouseout="out('-3188525411347809180');" style="">2179                             if (profileIndex != -1 &amp;&amp; !c.isNull(profileIndex)) {                         </span>
<span class="3377600326593357797" onmouseenter="enter('3377600326593357797');" onmouseout="out('3377600326593357797');" style="">2180                                 userSerialNumber = c.getInt(profileIndex);                               </span>
<span class="-5580723935665666817" onmouseenter="enter('-5580723935665666817');" onmouseout="out('-5580723935665666817');" style="">2181                                 userHandle = userManager.getUserForSerialNumber(userSerialNumber);       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2182                             } else {                                                                     </span>
<span class="4088992161441330589" onmouseenter="enter('4088992161441330589');" onmouseout="out('4088992161441330589');" style="">2183                                 // Default to the serial number of this user, for older                  </span>
<span class="3257211239898691615" onmouseenter="enter('3257211239898691615');" onmouseout="out('3257211239898691615');" style="">2184                                 // shortcuts.                                                            </span>
<span class="153827185233038497" onmouseenter="enter('153827185233038497');" onmouseout="out('153827185233038497');" style="">2185                                 userHandle = UserHandleCompat.myUserHandle();                            </span>
<span class="-7992210937529459410" onmouseenter="enter('-7992210937529459410');" onmouseout="out('-7992210937529459410');" style="">2186                                 userSerialNumber = userManager.getSerialNumberForUser(userHandle);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2187                             }                                                                            </span>
<span class="-8522267007848438017" onmouseenter="enter('-8522267007848438017');" onmouseout="out('-8522267007848438017');" style="">2188                             Launcher.addDumpLog(TAG, &quot;migrating \&quot;&quot;                                      </span>
<span class="5716371482803525639" onmouseenter="enter('5716371482803525639');" onmouseout="out('5716371482803525639');" style="">2189                                 + c.getString(titleIndex) + &quot;\&quot; (&quot;                                       </span>
<span class="1581718899431916610" onmouseenter="enter('1581718899431916610');" onmouseout="out('1581718899431916610');" style="">2190                                 + cellX + &quot;,&quot; + cellY + &quot;@&quot;                                              </span>
<span class="-5433460809722614707" onmouseenter="enter('-5433460809722614707');" onmouseout="out('-5433460809722614707');" style="">2191                                 + LauncherSettings.Favorites.containerToString(container)                </span>
<span class="7963207375316982791" onmouseenter="enter('7963207375316982791');" onmouseout="out('7963207375316982791');" style="">2192                                 + &quot;/&quot; + screen                                                           </span>
<span class="6018191721230485089" onmouseenter="enter('6018191721230485089');" onmouseout="out('6018191721230485089');" style="">2193                                 + &quot;): &quot; + intentStr, true);                                              </span>
<span  style="">2194                                                                                                          </span>
<span class="-1936160447019772377" onmouseenter="enter('-1936160447019772377');" onmouseout="out('-1936160447019772377');" style="">2195                             if (itemType != Favorites.ITEM_TYPE_FOLDER) {                                </span>
<span  style="">2196                                                                                                          </span>
<span class="-3217378244605518341" onmouseenter="enter('-3217378244605518341');" onmouseout="out('-3217378244605518341');" style="">2197                                 final Intent intent;                                                     </span>
<span class="-6604091625193940309" onmouseenter="enter('-6604091625193940309');" onmouseout="out('-6604091625193940309');" style="">2198                                 final ComponentName cn;                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2199                                 try {                                                                    </span>
<span class="-5300012287142621419" onmouseenter="enter('-5300012287142621419');" onmouseout="out('-5300012287142621419');" style="">2200                                     intent = Intent.parseUri(intentStr, 0);                              </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">2201                                 } catch (URISyntaxException e) {                                         </span>
<span class="4944972948248133238" onmouseenter="enter('4944972948248133238');" onmouseout="out('4944972948248133238');" style="">2202                                     // bogus intent?                                                     </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2203                                     Launcher.addDumpLog(TAG,                                             </span>
<span class="7306432149085172440" onmouseenter="enter('7306432149085172440');" onmouseout="out('7306432149085172440');" style="">2204                                             &quot;skipping invalid intent uri&quot;, true);                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2205                                     continue;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2206                                 }                                                                        </span>
<span  style="">2207                                                                                                          </span>
<span class="6421562153709548736" onmouseenter="enter('6421562153709548736');" onmouseout="out('6421562153709548736');" style="">2208                                 cn = intent.getComponent();                                              </span>
<span class="1165574592669081424" onmouseenter="enter('1165574592669081424');" onmouseout="out('1165574592669081424');" style="">2209                                 if (TextUtils.isEmpty(intentStr)) {                                      </span>
<span class="1109263052506568546" onmouseenter="enter('1109263052506568546');" onmouseout="out('1109263052506568546');" style="">2210                                     // no intent? no icon                                                </span>
<span class="-2999961336534157526" onmouseenter="enter('-2999961336534157526');" onmouseout="out('-2999961336534157526');" style="">2211                                     Launcher.addDumpLog(TAG, &quot;skipping empty intent&quot;, true);             </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2212                                     continue;                                                            </span>
<span class="-9117039092771941538" onmouseenter="enter('-9117039092771941538');" onmouseout="out('-9117039092771941538');" style="">2213                                 } else if (cn != null &amp;&amp;                                                 </span>
<span class="-3538782463140269707" onmouseenter="enter('-3538782463140269707');" onmouseout="out('-3538782463140269707');" style="">2214                                         !LauncherModel.isValidPackageActivity(mContext, cn,              </span>
<span class="2012568974631198883" onmouseenter="enter('2012568974631198883');" onmouseout="out('2012568974631198883');" style="">2215                                                 userHandle)) {                                           </span>
<span class="-8462735888325815955" onmouseenter="enter('-8462735888325815955');" onmouseout="out('-8462735888325815955');" style="">2216                                     // component no longer exists.                                       </span>
<span class="8244127631099782564" onmouseenter="enter('8244127631099782564');" onmouseout="out('8244127631099782564');" style="">2217                                     Launcher.addDumpLog(TAG, &quot;skipping item whose component &quot; +          </span>
<span class="-2271033079359571531" onmouseenter="enter('-2271033079359571531');" onmouseout="out('-2271033079359571531');" style="">2218                                             &quot;no longer exists.&quot;, true);                                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2219                                     continue;                                                            </span>
<span class="1808399553142797413" onmouseenter="enter('1808399553142797413');" onmouseout="out('1808399553142797413');" style="">2220                                 } else if (container ==                                                  </span>
<span class="-5300505921133380020" onmouseenter="enter('-5300505921133380020');" onmouseout="out('-5300505921133380020');" style="">2221                                         LauncherSettings.Favorites.CONTAINER_DESKTOP) {                  </span>
<span class="-6651088913311152009" onmouseenter="enter('-6651088913311152009');" onmouseout="out('-6651088913311152009');" style="">2222                                     // Dedupe icons directly on the workspace                            </span>
<span  style="">2223                                                                                                          </span>
<span class="-7857209544272892433" onmouseenter="enter('-7857209544272892433');" onmouseout="out('-7857209544272892433');" style="">2224                                     // Canonicalize                                                      </span>
<span class="-8986671765649789370" onmouseenter="enter('-8986671765649789370');" onmouseout="out('-8986671765649789370');" style="">2225                                     // the Play Store sets the package parameter, but Launcher           </span>
<span class="6790983218134031366" onmouseenter="enter('6790983218134031366');" onmouseout="out('6790983218134031366');" style="">2226                                     // does not, so we clear that out to keep them the same              </span>
<span class="-3363694106044374937" onmouseenter="enter('-3363694106044374937');" onmouseout="out('-3363694106044374937');" style="">2227                                     intent.setPackage(null);                                             </span>
<span class="-947990318544641084" onmouseenter="enter('-947990318544641084');" onmouseout="out('-947990318544641084');" style="">2228                                     final String key = intent.toUri(0);                                  </span>
<span class="7480204102005082432" onmouseenter="enter('7480204102005082432');" onmouseout="out('7480204102005082432');" style="">2229                                     if (seenIntents.contains(key)) {                                     </span>
<span class="2006049222885589498" onmouseenter="enter('2006049222885589498');" onmouseout="out('2006049222885589498');" style="">2230                                         Launcher.addDumpLog(TAG, &quot;skipping duplicate&quot;, true);            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2231                                         continue;                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2232                                     } else {                                                             </span>
<span class="4653019047206831387" onmouseenter="enter('4653019047206831387');" onmouseout="out('4653019047206831387');" style="">2233                                         seenIntents.add(key);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2234                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2235                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2236                             }                                                                            </span>
<span  style="">2237                                                                                                          </span>
<span class="-3805379390248188389" onmouseenter="enter('-3805379390248188389');" onmouseout="out('-3805379390248188389');" style="">2238                             ContentValues values = new ContentValues(c.getColumnCount());                </span>
<span class="2787548740347733717" onmouseenter="enter('2787548740347733717');" onmouseout="out('2787548740347733717');" style="">2239                             values.put(LauncherSettings.Favorites._ID, c.getInt(idIndex));               </span>
<span class="4552396250235420866" onmouseenter="enter('4552396250235420866');" onmouseout="out('4552396250235420866');" style="">2240                             values.put(LauncherSettings.Favorites.INTENT, intentStr);                    </span>
<span class="3080545696092648727" onmouseenter="enter('3080545696092648727');" onmouseout="out('3080545696092648727');" style="">2241                             values.put(LauncherSettings.Favorites.TITLE, c.getString(titleIndex));       </span>
<span class="8877369206974054200" onmouseenter="enter('8877369206974054200');" onmouseout="out('8877369206974054200');" style="">2242                             values.put(LauncherSettings.Favorites.ICON_TYPE,                             </span>
<span class="8705323818259019594" onmouseenter="enter('8705323818259019594');" onmouseout="out('8705323818259019594');" style="">2243                                     c.getInt(iconTypeIndex));                                            </span>
<span class="3857475807367449049" onmouseenter="enter('3857475807367449049');" onmouseout="out('3857475807367449049');" style="">2244                             values.put(LauncherSettings.Favorites.ICON, c.getBlob(iconIndex));           </span>
<span class="-7054095546130863513" onmouseenter="enter('-7054095546130863513');" onmouseout="out('-7054095546130863513');" style="">2245                             values.put(LauncherSettings.Favorites.ICON_PACKAGE,                          </span>
<span class="-4377124255190457588" onmouseenter="enter('-4377124255190457588');" onmouseout="out('-4377124255190457588');" style="">2246                                     c.getString(iconPackageIndex));                                      </span>
<span class="7491883888231273974" onmouseenter="enter('7491883888231273974');" onmouseout="out('7491883888231273974');" style="">2247                             values.put(LauncherSettings.Favorites.ICON_RESOURCE,                         </span>
<span class="-14487948683300389" onmouseenter="enter('-14487948683300389');" onmouseout="out('-14487948683300389');" style="">2248                                     c.getString(iconResourceIndex));                                     </span>
<span class="5180659022499168410" onmouseenter="enter('5180659022499168410');" onmouseout="out('5180659022499168410');" style="">2249                             values.put(LauncherSettings.Favorites.ITEM_TYPE, itemType);                  </span>
<span class="2567875359902744917" onmouseenter="enter('2567875359902744917');" onmouseout="out('2567875359902744917');" style="">2250                             values.put(LauncherSettings.Favorites.APPWIDGET_ID, -1);                     </span>
<span class="-3897523412202294315" onmouseenter="enter('-3897523412202294315');" onmouseout="out('-3897523412202294315');" style="">2251                             values.put(LauncherSettings.Favorites.URI, c.getString(uriIndex));           </span>
<span class="8253479465859182990" onmouseenter="enter('8253479465859182990');" onmouseout="out('8253479465859182990');" style="">2252                             values.put(LauncherSettings.Favorites.DISPLAY_MODE,                          </span>
<span class="-8416795076296111227" onmouseenter="enter('-8416795076296111227');" onmouseout="out('-8416795076296111227');" style="">2253                                     c.getInt(displayModeIndex));                                         </span>
<span class="-1880957120536425376" onmouseenter="enter('-1880957120536425376');" onmouseout="out('-1880957120536425376');" style="">2254                             values.put(LauncherSettings.Favorites.PROFILE_ID, userSerialNumber);         </span>
<span  style="">2255                                                                                                          </span>
<span class="-216205184326719357" onmouseenter="enter('-216205184326719357');" onmouseout="out('-216205184326719357');" style="">2256                             if (container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="2845166931909672251" onmouseenter="enter('2845166931909672251');" onmouseout="out('2845166931909672251');" style="">2257                                 hotseat.put(screen, values);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2258                             }                                                                            </span>
<span  style="">2259                                                                                                          </span>
<span class="-8534427976726701331" onmouseenter="enter('-8534427976726701331');" onmouseout="out('-8534427976726701331');" style="">2260                             if (container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {             </span>
<span class="3724214252155726452" onmouseenter="enter('3724214252155726452');" onmouseout="out('3724214252155726452');" style="">2261                                 // In a folder or in the hotseat, preserve position                      </span>
<span class="4993135311254983149" onmouseenter="enter('4993135311254983149');" onmouseout="out('4993135311254983149');" style="">2262                                 values.put(LauncherSettings.Favorites.SCREEN, screen);                   </span>
<span class="-7735658353589578952" onmouseenter="enter('-7735658353589578952');" onmouseout="out('-7735658353589578952');" style="">2263                                 values.put(LauncherSettings.Favorites.CELLX, cellX);                     </span>
<span class="-6596875348392322090" onmouseenter="enter('-6596875348392322090');" onmouseout="out('-6596875348392322090');" style="">2264                                 values.put(LauncherSettings.Favorites.CELLY, cellY);                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2265                             } else {                                                                     </span>
<span class="-6079732280628496127" onmouseenter="enter('-6079732280628496127');" onmouseout="out('-6079732280628496127');" style="">2266                                 // For items contained directly on one of the workspace screen,          </span>
<span class="-850513443108501253" onmouseenter="enter('-850513443108501253');" onmouseout="out('-850513443108501253');" style="">2267                                 // we&#x27;ll determine their location (screen, x, y) in a second pass.       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2268                             }                                                                            </span>
<span  style="">2269                                                                                                          </span>
<span class="7684212050113439789" onmouseenter="enter('7684212050113439789');" onmouseout="out('7684212050113439789');" style="">2270                             values.put(LauncherSettings.Favorites.CONTAINER, container);                 </span>
<span  style="">2271                                                                                                          </span>
<span class="-1936160447019772377" onmouseenter="enter('-1936160447019772377');" onmouseout="out('-1936160447019772377');" style="">2272                             if (itemType != Favorites.ITEM_TYPE_FOLDER) {                                </span>
<span class="-7897547558000712151" onmouseenter="enter('-7897547558000712151');" onmouseout="out('-7897547558000712151');" style="">2273                                 shortcuts.add(values);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2274                             } else {                                                                     </span>
<span class="5214044302935278086" onmouseenter="enter('5214044302935278086');" onmouseout="out('5214044302935278086');" style="">2275                                 folders.add(values);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2276                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2277                         }                                                                                </span>
<span  style="">2278                                                                                                          </span>
<span class="3792333482677793462" onmouseenter="enter('3792333482677793462');" onmouseout="out('3792333482677793462');" style="">2279                         // Now that we have all the hotseat icons, let&#x27;s go through them left-right      </span>
<span class="6853065735140319510" onmouseenter="enter('6853065735140319510');" onmouseout="out('6853065735140319510');" style="">2280                         // and assign valid locations for them in the new hotseat                        </span>
<span class="-382900916992065291" onmouseenter="enter('-382900916992065291');" onmouseout="out('-382900916992065291');" style="">2281                         final int N = hotseat.size();                                                    </span>
<span class="9016073461123662191" onmouseenter="enter('9016073461123662191');" onmouseout="out('9016073461123662191');" style="">2282                         for (int idx=0; idx&lt;N; idx++) {                                                  </span>
<span class="-7027280347801461154" onmouseenter="enter('-7027280347801461154');" onmouseout="out('-7027280347801461154');" style="">2283                             int hotseatX = hotseat.keyAt(idx);                                           </span>
<span class="7267222979225491944" onmouseenter="enter('7267222979225491944');" onmouseout="out('7267222979225491944');" style="">2284                             ContentValues values = hotseat.valueAt(idx);                                 </span>
<span  style="">2285                                                                                                          </span>
<span class="-3018245694205955067" onmouseenter="enter('-3018245694205955067');" onmouseout="out('-3018245694205955067');" style="">2286                             if (hotseatX == grid.hotseatAllAppsRank) {                                   </span>
<span class="-8495735509078642350" onmouseenter="enter('-8495735509078642350');" onmouseout="out('-8495735509078642350');" style="">2287                                 // let&#x27;s drop this in the next available hole in the hotseat             </span>
<span class="-2055954181227443816" onmouseenter="enter('-2055954181227443816');" onmouseout="out('-2055954181227443816');" style="">2288                                 while (++hotseatX &lt; hotseatWidth) {                                      </span>
<span class="-5595819560409222327" onmouseenter="enter('-5595819560409222327');" onmouseout="out('-5595819560409222327');" style="">2289                                     if (hotseat.get(hotseatX) == null) {                                 </span>
<span class="2131484666649578366" onmouseenter="enter('2131484666649578366');" onmouseout="out('2131484666649578366');" style="">2290                                         // found a spot! move it here                                    </span>
<span class="325808457439646533" onmouseenter="enter('325808457439646533');" onmouseout="out('325808457439646533');" style="">2291                                         values.put(LauncherSettings.Favorites.SCREEN,                    </span>
<span class="8014085861051867033" onmouseenter="enter('8014085861051867033');" onmouseout="out('8014085861051867033');" style="">2292                                                 hotseatX);                                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2293                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2294                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2295                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2296                             }                                                                            </span>
<span class="4361559665402156368" onmouseenter="enter('4361559665402156368');" onmouseout="out('4361559665402156368');" style="">2297                             if (hotseatX &gt;= hotseatWidth) {                                              </span>
<span class="198406244599777154" onmouseenter="enter('198406244599777154');" onmouseout="out('198406244599777154');" style="">2298                                 // no room for you in the hotseat? it&#x27;s off to the desktop with you      </span>
<span class="274548545061036766" onmouseenter="enter('274548545061036766');" onmouseout="out('274548545061036766');" style="">2299                                 values.put(LauncherSettings.Favorites.CONTAINER,                         </span>
<span class="951133373394890183" onmouseenter="enter('951133373394890183');" onmouseout="out('951133373394890183');" style="">2300                                            Favorites.CONTAINER_DESKTOP);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2301                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2302                         }                                                                                </span>
<span  style="">2303                                                                                                          </span>
<span class="4538029778921500049" onmouseenter="enter('4538029778921500049');" onmouseout="out('4538029778921500049');" style="">2304                         final ArrayList&lt;ContentValues&gt; allItems = new ArrayList&lt;ContentValues&gt;();        </span>
<span class="-4972040190483698817" onmouseenter="enter('-4972040190483698817');" onmouseout="out('-4972040190483698817');" style="">2305                         // Folders first                                                                 </span>
<span class="1607706518732535744" onmouseenter="enter('1607706518732535744');" onmouseout="out('1607706518732535744');" style="">2306                         allItems.addAll(folders);                                                        </span>
<span class="2106236708914116763" onmouseenter="enter('2106236708914116763');" onmouseout="out('2106236708914116763');" style="">2307                         // Then shortcuts                                                                </span>
<span class="-1250372864837547145" onmouseenter="enter('-1250372864837547145');" onmouseout="out('-1250372864837547145');" style="">2308                         allItems.addAll(shortcuts);                                                      </span>
<span  style="">2309                                                                                                          </span>
<span class="-2195882050879177813" onmouseenter="enter('-2195882050879177813');" onmouseout="out('-2195882050879177813');" style="">2310                         // Layout all the folders                                                        </span>
<span class="-252665973237041297" onmouseenter="enter('-252665973237041297');" onmouseout="out('-252665973237041297');" style="">2311                         for (ContentValues values: allItems) {                                           </span>
<span class="-6238460523304059987" onmouseenter="enter('-6238460523304059987');" onmouseout="out('-6238460523304059987');" style="">2312                             if (values.getAsInteger(LauncherSettings.Favorites.CONTAINER) !=             </span>
<span class="-5300505921133380020" onmouseenter="enter('-5300505921133380020');" onmouseout="out('-5300505921133380020');" style="">2313                                     LauncherSettings.Favorites.CONTAINER_DESKTOP) {                      </span>
<span class="4544740026899945117" onmouseenter="enter('4544740026899945117');" onmouseout="out('4544740026899945117');" style="">2314                                 // Hotseat items and folder items have already had their                 </span>
<span class="9061827072000509027" onmouseenter="enter('9061827072000509027');" onmouseout="out('9061827072000509027');" style="">2315                                 // location information set. Nothing to be done here.                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2316                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2317                             }                                                                            </span>
<span class="851641135220662264" onmouseenter="enter('851641135220662264');" onmouseout="out('851641135220662264');" style="">2318                             values.put(LauncherSettings.Favorites.SCREEN, curScreen);                    </span>
<span class="-1049962748703223150" onmouseenter="enter('-1049962748703223150');" onmouseout="out('-1049962748703223150');" style="">2319                             values.put(LauncherSettings.Favorites.CELLX, curX);                          </span>
<span class="-5258025824110848668" onmouseenter="enter('-5258025824110848668');" onmouseout="out('-5258025824110848668');" style="">2320                             values.put(LauncherSettings.Favorites.CELLY, curY);                          </span>
<span class="1910082031532915038" onmouseenter="enter('1910082031532915038');" onmouseout="out('1910082031532915038');" style="">2321                             curX = (curX + 1) % width;                                                   </span>
<span class="-7155276018455302787" onmouseenter="enter('-7155276018455302787');" onmouseout="out('-7155276018455302787');" style="">2322                             if (curX == 0) {                                                             </span>
<span class="2376495568180329749" onmouseenter="enter('2376495568180329749');" onmouseout="out('2376495568180329749');" style="">2323                                 curY = (curY + 1);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2324                             }                                                                            </span>
<span class="-4531638622721531414" onmouseenter="enter('-4531638622721531414');" onmouseout="out('-4531638622721531414');" style="">2325                             // Leave the last row of icons blank on every screen                         </span>
<span class="-5543182397018270277" onmouseenter="enter('-5543182397018270277');" onmouseout="out('-5543182397018270277');" style="">2326                             if (curY == height - 1) {                                                    </span>
<span class="-6657705079427553715" onmouseenter="enter('-6657705079427553715');" onmouseout="out('-6657705079427553715');" style="">2327                                 curScreen = (int) generateNewScreenId();                                 </span>
<span class="4679043716901678926" onmouseenter="enter('4679043716901678926');" onmouseout="out('4679043716901678926');" style="">2328                                 curY = 0;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2329                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2330                         }                                                                                </span>
<span  style="">2331                                                                                                          </span>
<span class="1853917526349173349" onmouseenter="enter('1853917526349173349');" onmouseout="out('1853917526349173349');" style="">2332                         if (allItems.size() &gt; 0) {                                                       </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">2333                             db.beginTransaction();                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2334                             try {                                                                        </span>
<span class="-7256059133012813079" onmouseenter="enter('-7256059133012813079');" onmouseout="out('-7256059133012813079');" style="">2335                                 for (ContentValues row: allItems) {                                      </span>
<span class="3155601228699925770" onmouseenter="enter('3155601228699925770');" onmouseout="out('3155601228699925770');" style="">2336                                     if (row == null) continue;                                           </span>
<span class="-304018147606180100" onmouseenter="enter('-304018147606180100');" onmouseout="out('-304018147606180100');" style="">2337                                     if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, row)           </span>
<span class="-5045770407551308114" onmouseenter="enter('-5045770407551308114');" onmouseout="out('-5045770407551308114');" style="">2338                                             &lt; 0) {                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2339                                         return;                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2340                                     } else {                                                             </span>
<span class="5122134618962228848" onmouseenter="enter('5122134618962228848');" onmouseout="out('5122134618962228848');" style="">2341                                         count++;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2342                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2343                                 }                                                                        </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">2344                                 db.setTransactionSuccessful();                                           </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2345                             } finally {                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">2346                                 db.endTransaction();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2347                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2348                         }                                                                                </span>
<span  style="">2349                                                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">2350                         db.beginTransaction();                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2351                         try {                                                                            </span>
<span class="-7150489321946493056" onmouseenter="enter('-7150489321946493056');" onmouseout="out('-7150489321946493056');" style="">2352                             for (i=0; i&lt;=curScreen; i++) {                                               </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">2353                                 final ContentValues values = new ContentValues();                        </span>
<span class="-5225632710651404139" onmouseenter="enter('-5225632710651404139');" onmouseout="out('-5225632710651404139');" style="">2354                                 values.put(LauncherSettings.WorkspaceScreens._ID, i);                    </span>
<span class="8100732723950791653" onmouseenter="enter('8100732723950791653');" onmouseout="out('8100732723950791653');" style="">2355                                 values.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);            </span>
<span class="-6007460446232002971" onmouseenter="enter('-6007460446232002971');" onmouseout="out('-6007460446232002971');" style="">2356                                 if (dbInsertAndCheck(this, db, TABLE_WORKSPACE_SCREENS, null, values)    </span>
<span class="-5045770407551308114" onmouseenter="enter('-5045770407551308114');" onmouseout="out('-5045770407551308114');" style="">2357                                         &lt; 0) {                                                           </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2358                                     return;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2359                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2360                             }                                                                            </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">2361                             db.setTransactionSuccessful();                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2362                         } finally {                                                                      </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">2363                             db.endTransaction();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2364                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2365                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2366                 } finally {                                                                              </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2367                     c.close();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2368                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2369             }                                                                                            </span>
<span  style="">2370                                                                                                          </span>
<span class="-6182516414964240870" onmouseenter="enter('-6182516414964240870');" onmouseout="out('-6182516414964240870');" style="">2371             Launcher.addDumpLog(TAG, &quot;migrated &quot; + count + &quot; icons from Launcher2 into &quot;                 </span>
<span class="3301967416992773508" onmouseenter="enter('3301967416992773508');" onmouseout="out('3301967416992773508');" style="">2372                     + (curScreen+1) + &quot; screens&quot;, true);                                                 </span>
<span  style="">2373                                                                                                          </span>
<span class="3355055744209094121" onmouseenter="enter('3355055744209094121');" onmouseout="out('3355055744209094121');" style="">2374             // ensure that new screens are created to hold these icons                                   </span>
<span class="4167333916835222093" onmouseenter="enter('4167333916835222093');" onmouseout="out('4167333916835222093');" style="">2375             setFlagJustLoadedOldDb();                                                                    </span>
<span  style="">2376                                                                                                          </span>
<span class="2071167438564206442" onmouseenter="enter('2071167438564206442');" onmouseout="out('2071167438564206442');" style="">2377             // Update max IDs; very important since we just grabbed IDs from another database            </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style="">2378             mMaxItemId = initializeMaxItemId(db);                                                        </span>
<span class="4730788985981235797" onmouseenter="enter('4730788985981235797');" onmouseout="out('4730788985981235797');" style="">2379             mMaxScreenId = initializeMaxScreenId(db);                                                    </span>
<span class="-439077128883569126" onmouseenter="enter('-439077128883569126');" onmouseout="out('-439077128883569126');" style="">2380             if (LOGD) Log.d(TAG, &quot;mMaxItemId: &quot; + mMaxItemId + &quot; mMaxScreenId: &quot; + mMaxScreenId);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2381         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2382     }                                                                                                    </span>
<span  style="">2383                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2384     /**                                                                                                  </span>
<span class="6228869189788510839" onmouseenter="enter('6228869189788510839');" onmouseout="out('6228869189788510839');" style="">2385      * Build a query string that will match any row where the column matches                             </span>
<span class="-1295109358340261898" onmouseenter="enter('-1295109358340261898');" onmouseout="out('-1295109358340261898');" style="">2386      * anything in the values list.                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2387      */                                                                                                  </span>
<span class="-2936324408380560269" onmouseenter="enter('-2936324408380560269');" onmouseout="out('-2936324408380560269');" style="">2388     private static String buildOrWhereString(String column, int[] values) {                              </span>
<span class="5416982361227649779" onmouseenter="enter('5416982361227649779');" onmouseout="out('5416982361227649779');" style="">2389         StringBuilder selectWhere = new StringBuilder();                                                 </span>
<span class="-4332208004382148217" onmouseenter="enter('-4332208004382148217');" onmouseout="out('-4332208004382148217');" style="">2390         for (int i = values.length - 1; i &gt;= 0; i--) {                                                   </span>
<span class="1277928779660897735" onmouseenter="enter('1277928779660897735');" onmouseout="out('1277928779660897735');" style="">2391             selectWhere.append(column).append(&quot;=&quot;).append(values[i]);                                    </span>
<span class="81359043772452968" onmouseenter="enter('81359043772452968');" onmouseout="out('81359043772452968');" style="">2392             if (i &gt; 0) {                                                                                 </span>
<span class="7640545912534679853" onmouseenter="enter('7640545912534679853');" onmouseout="out('7640545912534679853');" style="">2393                 selectWhere.append(&quot; OR &quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2394             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2395         }                                                                                                </span>
<span class="-3909123707650780307" onmouseenter="enter('-3909123707650780307');" onmouseout="out('-3909123707650780307');" style="">2396         return selectWhere.toString();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2397     }                                                                                                    </span>
<span  style="">2398                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2399     /**                                                                                                  </span>
<span class="-28944385574413319" onmouseenter="enter('-28944385574413319');" onmouseout="out('-28944385574413319');" style="">2400      * Return attribute value, attempting launcher-specific namespace first                              </span>
<span class="-539699600440534794" onmouseenter="enter('-539699600440534794');" onmouseout="out('-539699600440534794');" style="">2401      * before falling back to anonymous attribute.                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2402      */                                                                                                  </span>
<span class="-712674519579063359" onmouseenter="enter('-712674519579063359');" onmouseout="out('-712674519579063359');" style="">2403     private static String getAttributeValue(XmlResourceParser parser, String attribute) {                </span>
<span class="-5187744497551639206" onmouseenter="enter('-5187744497551639206');" onmouseout="out('-5187744497551639206');" style="">2404         String value = parser.getAttributeValue(                                                         </span>
<span class="3240651452367746246" onmouseenter="enter('3240651452367746246');" onmouseout="out('3240651452367746246');" style="">2405                 &quot;http://schemas.android.com/apk/res-auto/com.android.launcher3&quot;, attribute);             </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style="">2406         if (value == null) {                                                                             </span>
<span class="4082321249181646127" onmouseenter="enter('4082321249181646127');" onmouseout="out('4082321249181646127');" style="">2407             value = parser.getAttributeValue(null, attribute);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2408         }                                                                                                </span>
<span class="-4905322242800291335" onmouseenter="enter('-4905322242800291335');" onmouseout="out('-4905322242800291335');" style="">2409         return value;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2410     }                                                                                                    </span>
<span  style="">2411                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2412     /**                                                                                                  </span>
<span class="7776239847235917049" onmouseenter="enter('7776239847235917049');" onmouseout="out('7776239847235917049');" style="">2413      * Return attribute resource value, attempting launcher-specific namespace                           </span>
<span class="-6756177748646477702" onmouseenter="enter('-6756177748646477702');" onmouseout="out('-6756177748646477702');" style="">2414      * first before falling back to anonymous attribute.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2415      */                                                                                                  </span>
<span class="-2261393621595960012" onmouseenter="enter('-2261393621595960012');" onmouseout="out('-2261393621595960012');" style="">2416     private static int getAttributeResourceValue(XmlResourceParser parser, String attribute,             </span>
<span class="7924088353949793531" onmouseenter="enter('7924088353949793531');" onmouseout="out('7924088353949793531');" style="">2417             int defaultValue) {                                                                          </span>
<span class="-5869649596261514051" onmouseenter="enter('-5869649596261514051');" onmouseout="out('-5869649596261514051');" style="">2418         int value = parser.getAttributeResourceValue(                                                    </span>
<span class="-572076831828560497" onmouseenter="enter('-572076831828560497');" onmouseout="out('-572076831828560497');" style="">2419                 &quot;http://schemas.android.com/apk/res-auto/com.android.launcher3&quot;, attribute,              </span>
<span class="-310982111368378340" onmouseenter="enter('-310982111368378340');" onmouseout="out('-310982111368378340');" style="">2420                 defaultValue);                                                                           </span>
<span class="2024020216404545754" onmouseenter="enter('2024020216404545754');" onmouseout="out('2024020216404545754');" style="">2421         if (value == defaultValue) {                                                                     </span>
<span class="6043697783016237085" onmouseenter="enter('6043697783016237085');" onmouseout="out('6043697783016237085');" style="">2422             value = parser.getAttributeResourceValue(null, attribute, defaultValue);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2423         }                                                                                                </span>
<span class="-4905322242800291335" onmouseenter="enter('-4905322242800291335');" onmouseout="out('-4905322242800291335');" style="">2424         return value;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2425     }                                                                                                    </span>
<span  style="">2426                                                                                                          </span>
<span class="626008248496619562" onmouseenter="enter('626008248496619562');" onmouseout="out('626008248496619562');" style="">2427     private static void copyInteger(ContentValues from, ContentValues to, String key) {                  </span>
<span class="-3424296615037173139" onmouseenter="enter('-3424296615037173139');" onmouseout="out('-3424296615037173139');" style="">2428         to.put(key, from.getAsInteger(key));                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2429     }                                                                                                    </span>
<span  style="">2430                                                                                                          </span>
<span class="8465274381710394045" onmouseenter="enter('8465274381710394045');" onmouseout="out('8465274381710394045');" style="">2431     static class SqlArguments {                                                                          </span>
<span class="8122936482838815352" onmouseenter="enter('8122936482838815352');" onmouseout="out('8122936482838815352');" style="">2432         public final String table;                                                                       </span>
<span class="5442590397567481633" onmouseenter="enter('5442590397567481633');" onmouseout="out('5442590397567481633');" style="">2433         public final String where;                                                                       </span>
<span class="-2258632185412795279" onmouseenter="enter('-2258632185412795279');" onmouseout="out('-2258632185412795279');" style="">2434         public final String[] args;                                                                      </span>
<span  style="">2435                                                                                                          </span>
<span class="538735252304320137" onmouseenter="enter('538735252304320137');" onmouseout="out('538735252304320137');" style="">2436         SqlArguments(Uri url, String where, String[] args) {                                             </span>
<span class="-7603700663019659468" onmouseenter="enter('-7603700663019659468');" onmouseout="out('-7603700663019659468');" style="">2437             if (url.getPathSegments().size() == 1) {                                                     </span>
<span class="-6984157551381672872" onmouseenter="enter('-6984157551381672872');" onmouseout="out('-6984157551381672872');" style="">2438                 this.table = url.getPathSegments().get(0);                                               </span>
<span class="7181058370626512064" onmouseenter="enter('7181058370626512064');" onmouseout="out('7181058370626512064');" style="">2439                 this.where = where;                                                                      </span>
<span class="8688716567728705492" onmouseenter="enter('8688716567728705492');" onmouseout="out('8688716567728705492');" style="">2440                 this.args = args;                                                                        </span>
<span class="2325935358302734243" onmouseenter="enter('2325935358302734243');" onmouseout="out('2325935358302734243');" style="">2441             } else if (url.getPathSegments().size() != 2) {                                              </span>
<span class="-3760623583555134522" onmouseenter="enter('-3760623583555134522');" onmouseout="out('-3760623583555134522');" style="">2442                 throw new IllegalArgumentException(&quot;Invalid URI: &quot; + url);                               </span>
<span class="186586201607437821" onmouseenter="enter('186586201607437821');" onmouseout="out('186586201607437821');" style="">2443             } else if (!TextUtils.isEmpty(where)) {                                                      </span>
<span class="2785963644153593875" onmouseenter="enter('2785963644153593875');" onmouseout="out('2785963644153593875');" style="">2444                 throw new UnsupportedOperationException(&quot;WHERE clause not supported: &quot; + url);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2445             } else {                                                                                     </span>
<span class="-6984157551381672872" onmouseenter="enter('-6984157551381672872');" onmouseout="out('-6984157551381672872');" style="">2446                 this.table = url.getPathSegments().get(0);                                               </span>
<span class="-834356181554398700" onmouseenter="enter('-834356181554398700');" onmouseout="out('-834356181554398700');" style="">2447                 this.where = &quot;_id=&quot; + ContentUris.parseId(url);                                          </span>
<span class="-7173439380439508667" onmouseenter="enter('-7173439380439508667');" onmouseout="out('-7173439380439508667');" style="">2448                 this.args = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2449             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2450         }                                                                                                </span>
<span  style="">2451                                                                                                          </span>
<span class="5705249208777482684" onmouseenter="enter('5705249208777482684');" onmouseout="out('5705249208777482684');" style="">2452         SqlArguments(Uri url) {                                                                          </span>
<span class="-7603700663019659468" onmouseenter="enter('-7603700663019659468');" onmouseout="out('-7603700663019659468');" style="">2453             if (url.getPathSegments().size() == 1) {                                                     </span>
<span class="-594585027826531892" onmouseenter="enter('-594585027826531892');" onmouseout="out('-594585027826531892');" style="">2454                 table = url.getPathSegments().get(0);                                                    </span>
<span class="3938761229458861077" onmouseenter="enter('3938761229458861077');" onmouseout="out('3938761229458861077');" style="">2455                 where = null;                                                                            </span>
<span class="8940401955607507518" onmouseenter="enter('8940401955607507518');" onmouseout="out('8940401955607507518');" style="">2456                 args = null;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2457             } else {                                                                                     </span>
<span class="-3760623583555134522" onmouseenter="enter('-3760623583555134522');" onmouseout="out('-3760623583555134522');" style="">2458                 throw new IllegalArgumentException(&quot;Invalid URI: &quot; + url);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2459             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2460         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2461     }                                                                                                    </span>
<span  style="">2462                                                                                                          </span>
<span class="-3139188310586380115" onmouseenter="enter('-3139188310586380115');" onmouseout="out('-3139188310586380115');" style="">2463     static interface WorkspaceLoader {                                                                   </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2464         /**                                                                                              </span>
<span class="-3098177944227224747" onmouseenter="enter('-3098177944227224747');" onmouseout="out('-3098177944227224747');" style="">2465          * @param screenIds A mutable list of screen its                                                 </span>
<span class="987002808252756985" onmouseenter="enter('987002808252756985');" onmouseout="out('987002808252756985');" style="">2466          * @return the number of workspace items added.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2467          */                                                                                              </span>
<span class="6770727346199503360" onmouseenter="enter('6770727346199503360');" onmouseout="out('6770727346199503360');" style="">2468         int loadLayout(SQLiteDatabase db, ArrayList&lt;Long&gt; screenIds);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2469     }                                                                                                    </span>
<span  style="">2470                                                                                                          </span>
<span class="-6810572453627058620" onmouseenter="enter('-6810572453627058620');" onmouseout="out('-6810572453627058620');" style="">2471     private static class SimpleWorkspaceLoader implements WorkspaceLoader {                              </span>
<span class="-2219225490446500593" onmouseenter="enter('-2219225490446500593');" onmouseout="out('-2219225490446500593');" style="">2472         private final Resources mRes;                                                                    </span>
<span class="-3366452129939698064" onmouseenter="enter('-3366452129939698064');" onmouseout="out('-3366452129939698064');" style="">2473         private final int mWorkspaceId;                                                                  </span>
<span class="6266322654512692359" onmouseenter="enter('6266322654512692359');" onmouseout="out('6266322654512692359');" style="">2474         private final DatabaseHelper mHelper;                                                            </span>
<span  style="">2475                                                                                                          </span>
<span class="5321487022203331675" onmouseenter="enter('5321487022203331675');" onmouseout="out('5321487022203331675');" style="">2476         SimpleWorkspaceLoader(DatabaseHelper helper, Resources res, int workspaceId) {                   </span>
<span class="3631311506378187050" onmouseenter="enter('3631311506378187050');" onmouseout="out('3631311506378187050');" style="">2477             mHelper = helper;                                                                            </span>
<span class="4740402107482375987" onmouseenter="enter('4740402107482375987');" onmouseout="out('4740402107482375987');" style="">2478             mRes = res;                                                                                  </span>
<span class="5644903313888202397" onmouseenter="enter('5644903313888202397');" onmouseout="out('5644903313888202397');" style="">2479             mWorkspaceId = workspaceId;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2480         }                                                                                                </span>
<span  style="">2481                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2482         @Override                                                                                        </span>
<span class="-7017557007815113757" onmouseenter="enter('-7017557007815113757');" onmouseout="out('-7017557007815113757');" style="">2483         public int loadLayout(SQLiteDatabase db, ArrayList&lt;Long&gt; screenIds) {                            </span>
<span class="8904365510774480646" onmouseenter="enter('8904365510774480646');" onmouseout="out('8904365510774480646');" style="">2484             return mHelper.loadFavoritesRecursive(db, mRes, mWorkspaceId, screenIds);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2485         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2486     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2487 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  19 import android.app.SearchManager;                                                                        </span>
<span class="504928717176532115" onmouseenter="enter('504928717176532115');" onmouseout="out('504928717176532115');" style="">  20 import android.appwidget.AppWidgetHost;                                                                  </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  21 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  22 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  23 import android.content.ComponentName;                                                                    </span>
<span class="550877806393279246" onmouseenter="enter('550877806393279246');" onmouseout="out('550877806393279246');" style="">  24 import android.content.ContentProvider;                                                                  </span>
<span class="3739800667450215943" onmouseenter="enter('3739800667450215943');" onmouseout="out('3739800667450215943');" style="">  25 import android.content.ContentProviderOperation;                                                         </span>
<span class="-6369732601490611729" onmouseenter="enter('-6369732601490611729');" onmouseout="out('-6369732601490611729');" style="">  26 import android.content.ContentProviderResult;                                                            </span>
<span class="6126857652515451632" onmouseenter="enter('6126857652515451632');" onmouseout="out('6126857652515451632');" style="">  27 import android.content.ContentResolver;                                                                  </span>
<span class="-9185307499822629" onmouseenter="enter('-9185307499822629');" onmouseout="out('-9185307499822629');" style="">  28 import android.content.ContentUris;                                                                      </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="">  29 import android.content.ContentValues;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  30 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  31 import android.content.Intent;                                                                           </span>
<span class="-4160670168441716907" onmouseenter="enter('-4160670168441716907');" onmouseout="out('-4160670168441716907');" style="">  32 import android.content.OperationApplicationException;                                                    </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  33 import android.content.SharedPreferences;                                                                </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="">  34 import android.content.pm.ActivityInfo;                                                                  </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  35 import android.content.pm.ApplicationInfo;                                                               </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  36 import android.content.pm.PackageManager;                                                                </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  37 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  38 import android.content.res.Resources;                                                                    </span>
<span class="7386012112211289620" onmouseenter="enter('7386012112211289620');" onmouseout="out('7386012112211289620');" style="">  39 import android.content.res.XmlResourceParser;                                                            </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  40 import android.database.Cursor;                                                                          </span>
<span class="5870833163231201789" onmouseenter="enter('5870833163231201789');" onmouseout="out('5870833163231201789');" style="">  41 import android.database.SQLException;                                                                    </span>
<span class="-4895155655276492102" onmouseenter="enter('-4895155655276492102');" onmouseout="out('-4895155655276492102');" style="">  42 import android.database.sqlite.SQLiteDatabase;                                                           </span>
<span class="6401548559697116088" onmouseenter="enter('6401548559697116088');" onmouseout="out('6401548559697116088');" style="">  43 import android.database.sqlite.SQLiteOpenHelper;                                                         </span>
<span class="-1253510085600408435" onmouseenter="enter('-1253510085600408435');" onmouseout="out('-1253510085600408435');" style="">  44 import android.database.sqlite.SQLiteQueryBuilder;                                                       </span>
<span class="-7509968378694652787" onmouseenter="enter('-7509968378694652787');" onmouseout="out('-7509968378694652787');" style="">  45 import android.database.sqlite.SQLiteStatement;                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  46 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  47 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  48 import android.net.Uri;                                                                                  </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  49 import android.os.Bundle;                                                                                </span>
<span class="-3605034024778696983" onmouseenter="enter('-3605034024778696983');" onmouseout="out('-3605034024778696983');" style="">  50 import android.provider.Settings;                                                                        </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  51 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  52 import android.util.Log;                                                                                 </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">  53 import android.util.SparseArray;                                                                         </span>
<span  style="">  54                                                                                                          </span>
<span class="4395110202233918405" onmouseenter="enter('4395110202233918405');" onmouseout="out('4395110202233918405');" style="">  55 import com.android.launcher3.AutoInstallsLayout.LayoutParserCallback;                                    </span>
<span class="6281159490246877388" onmouseenter="enter('6281159490246877388');" onmouseout="out('6281159490246877388');" style="">  56 import com.android.launcher3.LauncherSettings.Favorites;                                                 </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="">  57 import com.android.launcher3.compat.UserHandleCompat;                                                    </span>
<span class="-8849211230761127863" onmouseenter="enter('-8849211230761127863');" onmouseout="out('-8849211230761127863');" style="">  58 import com.android.launcher3.compat.UserManagerCompat;                                                   </span>
<span class="-7468653447981916815" onmouseenter="enter('-7468653447981916815');" onmouseout="out('-7468653447981916815');" style="">  59 import com.android.launcher3.config.ProviderConfig;                                                      </span>
<span  style="">  60                                                                                                          </span>
<span class="-5145222340437954675" onmouseenter="enter('-5145222340437954675');" onmouseout="out('-5145222340437954675');" style="">  61 import org.xmlpull.v1.XmlPullParser;                                                                     </span>
<span class="-3477173242969633951" onmouseenter="enter('-3477173242969633951');" onmouseout="out('-3477173242969633951');" style="">  62 import org.xmlpull.v1.XmlPullParserException;                                                            </span>
<span  style="">  63                                                                                                          </span>
<span class="-3926401431737521278" onmouseenter="enter('-3926401431737521278');" onmouseout="out('-3926401431737521278');" style="">  64 import java.io.File;                                                                                     </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  65 import java.io.IOException;                                                                              </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  66 import java.net.URISyntaxException;                                                                      </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  67 import java.util.ArrayList;                                                                              </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  68 import java.util.Collections;                                                                            </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  69 import java.util.HashSet;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  70 import java.util.List;                                                                                   </span>
<span  style="">  71                                                                                                          </span>
<span class="-5661310118425891821" onmouseenter="enter('-5661310118425891821');" onmouseout="out('-5661310118425891821');" style="">  72 public class LauncherProvider extends ContentProvider {                                                  </span>
<span class="-5301430442842506185" onmouseenter="enter('-5301430442842506185');" onmouseout="out('-5301430442842506185');" style="">  73     private static final String TAG = &quot;Launcher.LauncherProvider&quot;;                                       </span>
<span class="-8469384925954206736" onmouseenter="enter('-8469384925954206736');" onmouseout="out('-8469384925954206736');" style="">  74     private static final boolean LOGD = false;                                                           </span>
<span  style="">  75                                                                                                          </span>
<span class="8048508412932305881" onmouseenter="enter('8048508412932305881');" onmouseout="out('8048508412932305881');" style="">  76     private static final String DATABASE_NAME = &quot;launcher.db&quot;;                                           </span>
<span  style="">  77                                                                                                          </span>
<span class="7809747164420377858" onmouseenter="enter('7809747164420377858');" onmouseout="out('7809747164420377858');" style="">  78     private static final int DATABASE_VERSION = 20;                                                      </span>
<span  style="">  79                                                                                                          </span>
<span class="-458478327704245810" onmouseenter="enter('-458478327704245810');" onmouseout="out('-458478327704245810');" style="">  80     static final String OLD_AUTHORITY = &quot;com.android.launcher2.settings&quot;;                                </span>
<span class="-4376021050615906115" onmouseenter="enter('-4376021050615906115');" onmouseout="out('-4376021050615906115');" style="">  81     static final String AUTHORITY = ProviderConfig.AUTHORITY;                                            </span>
<span  style="">  82                                                                                                          </span>
<span class="-4487533157410420763" onmouseenter="enter('-4487533157410420763');" onmouseout="out('-4487533157410420763');" style="">  83     // Should we attempt to load anything from the com.android.launcher2 provider?                       </span>
<span class="3383367194631780364" onmouseenter="enter('3383367194631780364');" onmouseout="out('3383367194631780364');" style="">  84     static final boolean IMPORT_LAUNCHER2_DATABASE = false;                                              </span>
<span  style="">  85                                                                                                          </span>
<span class="-6626902943579202823" onmouseenter="enter('-6626902943579202823');" onmouseout="out('-6626902943579202823');" style="">  86     static final String TABLE_FAVORITES = &quot;favorites&quot;;                                                   </span>
<span class="-4121112267423691577" onmouseenter="enter('-4121112267423691577');" onmouseout="out('-4121112267423691577');" style="">  87     static final String TABLE_WORKSPACE_SCREENS = &quot;workspaceScreens&quot;;                                    </span>
<span class="5667619940348816611" onmouseenter="enter('5667619940348816611');" onmouseout="out('5667619940348816611');" style="">  88     static final String PARAMETER_NOTIFY = &quot;notify&quot;;                                                     </span>
<span class="-591783718254341348" onmouseenter="enter('-591783718254341348');" onmouseout="out('-591783718254341348');" style="">  89     static final String UPGRADED_FROM_OLD_DATABASE =                                                     </span>
<span class="6670864303817368253" onmouseenter="enter('6670864303817368253');" onmouseout="out('6670864303817368253');" style="">  90             &quot;UPGRADED_FROM_OLD_DATABASE&quot;;                                                                </span>
<span class="-2242593752226183959" onmouseenter="enter('-2242593752226183959');" onmouseout="out('-2242593752226183959');" style="">  91     static final String EMPTY_DATABASE_CREATED =                                                         </span>
<span class="-3248472412834995750" onmouseenter="enter('-3248472412834995750');" onmouseout="out('-3248472412834995750');" style="">  92             &quot;EMPTY_DATABASE_CREATED&quot;;                                                                    </span>
<span  style="">  93                                                                                                          </span>
<span class="-5068203882425881097" onmouseenter="enter('-5068203882425881097');" onmouseout="out('-5068203882425881097');" style="">  94     private static final String ACTION_APPWIDGET_DEFAULT_WORKSPACE_CONFIGURE =                           </span>
<span class="-8289377429995644773" onmouseenter="enter('-8289377429995644773');" onmouseout="out('-8289377429995644773');" style="">  95             &quot;com.android.launcher.action.APPWIDGET_DEFAULT_WORKSPACE_CONFIGURE&quot;;                         </span>
<span  style="">  96                                                                                                          </span>
<span class="-254878042648191521" onmouseenter="enter('-254878042648191521');" onmouseout="out('-254878042648191521');" style="">  97     private static final String URI_PARAM_IS_EXTERNAL_ADD = &quot;isExternalAdd&quot;;                             </span>
<span  style="">  98                                                                                                          </span>
<span class="-4555445478569710276" onmouseenter="enter('-4555445478569710276');" onmouseout="out('-4555445478569710276');" style="">  99     private LauncherProviderChangeListener mListener;                                                    </span>
<span  style=""> 100                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 101     /**                                                                                                  </span>
<span class="-3211764681636990688" onmouseenter="enter('-3211764681636990688');" onmouseout="out('-3211764681636990688');" style=""> 102      * {@link Uri} triggered at any registered {@link android.database.ContentObserver} when             </span>
<span class="-4919300270466303234" onmouseenter="enter('-4919300270466303234');" onmouseout="out('-4919300270466303234');" style=""> 103      * {@link AppWidgetHost#deleteHost()} is called during database creation.                            </span>
<span class="-788325382909228329" onmouseenter="enter('-788325382909228329');" onmouseout="out('-788325382909228329');" style=""> 104      * Use this to recall {@link AppWidgetHost#startListening()} if needed.                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 105      */                                                                                                  </span>
<span class="5515339483970246409" onmouseenter="enter('5515339483970246409');" onmouseout="out('5515339483970246409');" style=""> 106     static final Uri CONTENT_APPWIDGET_RESET_URI =                                                       </span>
<span class="3194273355649806706" onmouseenter="enter('3194273355649806706');" onmouseout="out('3194273355649806706');" style=""> 107             Uri.parse(&quot;content://&quot; + AUTHORITY + &quot;/appWidgetReset&quot;);                                     </span>
<span  style=""> 108                                                                                                          </span>
<span class="-35355205086145165" onmouseenter="enter('-35355205086145165');" onmouseout="out('-35355205086145165');" style=""> 109     private DatabaseHelper mOpenHelper;                                                                  </span>
<span class="4833460347687640836" onmouseenter="enter('4833460347687640836');" onmouseout="out('4833460347687640836');" style=""> 110     private static boolean sJustLoadedFromOldDb;                                                         </span>
<span  style=""> 111                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 112     @Override                                                                                            </span>
<span class="5054121129922253104" onmouseenter="enter('5054121129922253104');" onmouseout="out('5054121129922253104');" style=""> 113     public boolean onCreate() {                                                                          </span>
<span class="4475688138331124962" onmouseenter="enter('4475688138331124962');" onmouseout="out('4475688138331124962');" style=""> 114         final Context context = getContext();                                                            </span>
<span class="-7690576094790651842" onmouseenter="enter('-7690576094790651842');" onmouseout="out('-7690576094790651842');" style=""> 115         mOpenHelper = new DatabaseHelper(context);                                                       </span>
<span class="-7305781479923559628" onmouseenter="enter('-7305781479923559628');" onmouseout="out('-7305781479923559628');" style=""> 116         LauncherAppState.setLauncherProvider(this);                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 117         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118     }                                                                                                    </span>
<span  style=""> 119                                                                                                          </span>
<span class="487377169126514768" onmouseenter="enter('487377169126514768');" onmouseout="out('487377169126514768');" style=""> 120     public boolean wasNewDbCreated() {                                                                   </span>
<span class="-2120364841155545874" onmouseenter="enter('-2120364841155545874');" onmouseout="out('-2120364841155545874');" style=""> 121         return mOpenHelper.wasNewDbCreated();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122     }                                                                                                    </span>
<span  style=""> 123                                                                                                          </span>
<span class="9170464131639972057" onmouseenter="enter('9170464131639972057');" onmouseout="out('9170464131639972057');" style=""> 124     public void setLauncherProviderChangeListener(LauncherProviderChangeListener listener) {             </span>
<span class="9132236250678632099" onmouseenter="enter('9132236250678632099');" onmouseout="out('9132236250678632099');" style=""> 125         mListener = listener;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126     }                                                                                                    </span>
<span  style=""> 127                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 128     @Override                                                                                            </span>
<span class="-1263590755434456926" onmouseenter="enter('-1263590755434456926');" onmouseout="out('-1263590755434456926');" style=""> 129     public String getType(Uri uri) {                                                                     </span>
<span class="336598653403461328" onmouseenter="enter('336598653403461328');" onmouseout="out('336598653403461328');" style=""> 130         SqlArguments args = new SqlArguments(uri, null, null);                                           </span>
<span class="-3811208733585118846" onmouseenter="enter('-3811208733585118846');" onmouseout="out('-3811208733585118846');" style=""> 131         if (TextUtils.isEmpty(args.where)) {                                                             </span>
<span class="4564755247099008741" onmouseenter="enter('4564755247099008741');" onmouseout="out('4564755247099008741');" style=""> 132             return &quot;vnd.android.cursor.dir/&quot; + args.table;                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 133         } else {                                                                                         </span>
<span class="9039528378345344991" onmouseenter="enter('9039528378345344991');" onmouseout="out('9039528378345344991');" style=""> 134             return &quot;vnd.android.cursor.item/&quot; + args.table;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136     }                                                                                                    </span>
<span  style=""> 137                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 138     @Override                                                                                            </span>
<span class="2688381462100157580" onmouseenter="enter('2688381462100157580');" onmouseout="out('2688381462100157580');" style=""> 139     public Cursor query(Uri uri, String[] projection, String selection,                                  </span>
<span class="-8080601171652713678" onmouseenter="enter('-8080601171652713678');" onmouseout="out('-8080601171652713678');" style=""> 140             String[] selectionArgs, String sortOrder) {                                                  </span>
<span  style=""> 141                                                                                                          </span>
<span class="-3782003319541019236" onmouseenter="enter('-3782003319541019236');" onmouseout="out('-3782003319541019236');" style=""> 142         SqlArguments args = new SqlArguments(uri, selection, selectionArgs);                             </span>
<span class="-631518951729113636" onmouseenter="enter('-631518951729113636');" onmouseout="out('-631518951729113636');" style=""> 143         SQLiteQueryBuilder qb = new SQLiteQueryBuilder();                                                </span>
<span class="2611293065726660593" onmouseenter="enter('2611293065726660593');" onmouseout="out('2611293065726660593');" style=""> 144         qb.setTables(args.table);                                                                        </span>
<span  style=""> 145                                                                                                          </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 146         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="3134453170380441664" onmouseenter="enter('3134453170380441664');" onmouseout="out('3134453170380441664');" style=""> 147         Cursor result = qb.query(db, projection, args.where, args.args, null, null, sortOrder);          </span>
<span class="-7763164457135943875" onmouseenter="enter('-7763164457135943875');" onmouseout="out('-7763164457135943875');" style=""> 148         result.setNotificationUri(getContext().getContentResolver(), uri);                               </span>
<span  style=""> 149                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 150         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151     }                                                                                                    </span>
<span  style=""> 152                                                                                                          </span>
<span class="9207797122534392164" onmouseenter="enter('9207797122534392164');" onmouseout="out('9207797122534392164');" style=""> 153     private static long dbInsertAndCheck(DatabaseHelper helper,                                          </span>
<span class="-7649003652568167377" onmouseenter="enter('-7649003652568167377');" onmouseout="out('-7649003652568167377');" style=""> 154             SQLiteDatabase db, String table, String nullColumnHack, ContentValues values) {              </span>
<span class="6588288335812254858" onmouseenter="enter('6588288335812254858');" onmouseout="out('6588288335812254858');" style=""> 155         if (values == null) {                                                                            </span>
<span class="7184965589450928593" onmouseenter="enter('7184965589450928593');" onmouseout="out('7184965589450928593');" style=""> 156             throw new RuntimeException(&quot;Error: attempting to insert null values&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157         }                                                                                                </span>
<span class="7050899094957739080" onmouseenter="enter('7050899094957739080');" onmouseout="out('7050899094957739080');" style=""> 158         if (!values.containsKey(LauncherSettings.ChangeLogColumns._ID)) {                                </span>
<span class="492623150120761321" onmouseenter="enter('492623150120761321');" onmouseout="out('492623150120761321');" style=""> 159             throw new RuntimeException(&quot;Error: attempting to add item without specifying an id&quot;);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160         }                                                                                                </span>
<span class="-5706715493188407465" onmouseenter="enter('-5706715493188407465');" onmouseout="out('-5706715493188407465');" style=""> 161         helper.checkId(table, values);                                                                   </span>
<span class="1074556166740873719" onmouseenter="enter('1074556166740873719');" onmouseout="out('1074556166740873719');" style=""> 162         return db.insert(table, nullColumnHack, values);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 163     }                                                                                                    </span>
<span  style=""> 164                                                                                                          </span>
<span class="863775672802506838" onmouseenter="enter('863775672802506838');" onmouseout="out('863775672802506838');" style=""> 165     private static void deleteId(SQLiteDatabase db, long id) {                                           </span>
<span class="-4192328687501718427" onmouseenter="enter('-4192328687501718427');" onmouseout="out('-4192328687501718427');" style=""> 166         Uri uri = LauncherSettings.Favorites.getContentUri(id, false);                                   </span>
<span class="336598653403461328" onmouseenter="enter('336598653403461328');" onmouseout="out('336598653403461328');" style=""> 167         SqlArguments args = new SqlArguments(uri, null, null);                                           </span>
<span class="9003145226006787004" onmouseenter="enter('9003145226006787004');" onmouseout="out('9003145226006787004');" style=""> 168         db.delete(args.table, args.where, args.args);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169     }                                                                                                    </span>
<span  style=""> 170                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 171     @Override                                                                                            </span>
<span class="-734135164912880773" onmouseenter="enter('-734135164912880773');" onmouseout="out('-734135164912880773');" style=""> 172     public Uri insert(Uri uri, ContentValues initialValues) {                                            </span>
<span class="8811129738693748448" onmouseenter="enter('8811129738693748448');" onmouseout="out('8811129738693748448');" style=""> 173         SqlArguments args = new SqlArguments(uri);                                                       </span>
<span  style=""> 174                                                                                                          </span>
<span class="-8942992855752528468" onmouseenter="enter('-8942992855752528468');" onmouseout="out('-8942992855752528468');" style=""> 175         // In very limited cases, we support system|signature permission apps to add to the db           </span>
<span class="8337919216215113797" onmouseenter="enter('8337919216215113797');" onmouseout="out('8337919216215113797');" style=""> 176         String externalAdd = uri.getQueryParameter(URI_PARAM_IS_EXTERNAL_ADD);                           </span>
<span class="-2295815198673808272" onmouseenter="enter('-2295815198673808272');" onmouseout="out('-2295815198673808272');" style=""> 177         if (externalAdd != null &amp;&amp; &quot;true&quot;.equals(externalAdd)) {                                         </span>
<span class="255159610270408066" onmouseenter="enter('255159610270408066');" onmouseout="out('255159610270408066');" style=""> 178             if (!mOpenHelper.initializeExternalAdd(initialValues)) {                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 179                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181         }                                                                                                </span>
<span  style=""> 182                                                                                                          </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 183         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="-6358079444454153819" onmouseenter="enter('-6358079444454153819');" onmouseout="out('-6358079444454153819');" style=""> 184         addModifiedTime(initialValues);                                                                  </span>
<span class="5419112362953263362" onmouseenter="enter('5419112362953263362');" onmouseout="out('5419112362953263362');" style=""> 185         final long rowId = dbInsertAndCheck(mOpenHelper, db, args.table, null, initialValues);           </span>
<span class="8445680939324035407" onmouseenter="enter('8445680939324035407');" onmouseout="out('8445680939324035407');" style=""> 186         if (rowId &lt;= 0) return null;                                                                     </span>
<span  style=""> 187                                                                                                          </span>
<span class="8735878877349428813" onmouseenter="enter('8735878877349428813');" onmouseout="out('8735878877349428813');" style=""> 188         uri = ContentUris.withAppendedId(uri, rowId);                                                    </span>
<span class="-4021691463985906436" onmouseenter="enter('-4021691463985906436');" onmouseout="out('-4021691463985906436');" style=""> 189         sendNotify(uri);                                                                                 </span>
<span  style=""> 190                                                                                                          </span>
<span class="8673785246827833247" onmouseenter="enter('8673785246827833247');" onmouseout="out('8673785246827833247');" style=""> 191         return uri;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192     }                                                                                                    </span>
<span  style=""> 193                                                                                                          </span>
<span  style=""> 194                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 195     @Override                                                                                            </span>
<span class="-327877481205905086" onmouseenter="enter('-327877481205905086');" onmouseout="out('-327877481205905086');" style=""> 196     public int bulkInsert(Uri uri, ContentValues[] values) {                                             </span>
<span class="8811129738693748448" onmouseenter="enter('8811129738693748448');" onmouseout="out('8811129738693748448');" style=""> 197         SqlArguments args = new SqlArguments(uri);                                                       </span>
<span  style=""> 198                                                                                                          </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 199         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 200         db.beginTransaction();                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 201         try {                                                                                            </span>
<span class="7727596149598132072" onmouseenter="enter('7727596149598132072');" onmouseout="out('7727596149598132072');" style=""> 202             int numValues = values.length;                                                               </span>
<span class="805790054769028067" onmouseenter="enter('805790054769028067');" onmouseout="out('805790054769028067');" style=""> 203             for (int i = 0; i &lt; numValues; i++) {                                                        </span>
<span class="2678636525018066730" onmouseenter="enter('2678636525018066730');" onmouseout="out('2678636525018066730');" style=""> 204                 addModifiedTime(values[i]);                                                              </span>
<span class="-5505203781899797586" onmouseenter="enter('-5505203781899797586');" onmouseout="out('-5505203781899797586');" style=""> 205                 if (dbInsertAndCheck(mOpenHelper, db, args.table, null, values[i]) &lt; 0) {                </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 206                     return 0;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208             }                                                                                            </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 209             db.setTransactionSuccessful();                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 210         } finally {                                                                                      </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 211             db.endTransaction();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212         }                                                                                                </span>
<span  style=""> 213                                                                                                          </span>
<span class="-4021691463985906436" onmouseenter="enter('-4021691463985906436');" onmouseout="out('-4021691463985906436');" style=""> 214         sendNotify(uri);                                                                                 </span>
<span class="6793841392205084718" onmouseenter="enter('6793841392205084718');" onmouseout="out('6793841392205084718');" style=""> 215         return values.length;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216     }                                                                                                    </span>
<span  style=""> 217                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 218     @Override                                                                                            </span>
<span class="5983754597853237276" onmouseenter="enter('5983754597853237276');" onmouseout="out('5983754597853237276');" style=""> 219     public ContentProviderResult[] applyBatch(ArrayList&lt;ContentProviderOperation&gt; operations)            </span>
<span class="-5628895276830175510" onmouseenter="enter('-5628895276830175510');" onmouseout="out('-5628895276830175510');" style=""> 220             throws OperationApplicationException {                                                       </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 221         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 222         db.beginTransaction();                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 223         try {                                                                                            </span>
<span class="3840622082470564062" onmouseenter="enter('3840622082470564062');" onmouseout="out('3840622082470564062');" style=""> 224             ContentProviderResult[] result =  super.applyBatch(operations);                              </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 225             db.setTransactionSuccessful();                                                               </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 226             return result;                                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 227         } finally {                                                                                      </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 228             db.endTransaction();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230     }                                                                                                    </span>
<span  style=""> 231                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 232     @Override                                                                                            </span>
<span class="-6238796754049684603" onmouseenter="enter('-6238796754049684603');" onmouseout="out('-6238796754049684603');" style=""> 233     public int delete(Uri uri, String selection, String[] selectionArgs) {                               </span>
<span class="-3782003319541019236" onmouseenter="enter('-3782003319541019236');" onmouseout="out('-3782003319541019236');" style=""> 234         SqlArguments args = new SqlArguments(uri, selection, selectionArgs);                             </span>
<span  style=""> 235                                                                                                          </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 236         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="-848417512188045481" onmouseenter="enter('-848417512188045481');" onmouseout="out('-848417512188045481');" style=""> 237         int count = db.delete(args.table, args.where, args.args);                                        </span>
<span class="3046456781272759412" onmouseenter="enter('3046456781272759412');" onmouseout="out('3046456781272759412');" style=""> 238         if (count &gt; 0) sendNotify(uri);                                                                  </span>
<span  style=""> 239                                                                                                          </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style=""> 240         return count;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241     }                                                                                                    </span>
<span  style=""> 242                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 243     @Override                                                                                            </span>
<span class="-6200308159398621930" onmouseenter="enter('-6200308159398621930');" onmouseout="out('-6200308159398621930');" style=""> 244     public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) {         </span>
<span class="-3782003319541019236" onmouseenter="enter('-3782003319541019236');" onmouseout="out('-3782003319541019236');" style=""> 245         SqlArguments args = new SqlArguments(uri, selection, selectionArgs);                             </span>
<span  style=""> 246                                                                                                          </span>
<span class="5593303527651076681" onmouseenter="enter('5593303527651076681');" onmouseout="out('5593303527651076681');" style=""> 247         addModifiedTime(values);                                                                         </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 248         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="6692131291033480751" onmouseenter="enter('6692131291033480751');" onmouseout="out('6692131291033480751');" style=""> 249         int count = db.update(args.table, values, args.where, args.args);                                </span>
<span class="3046456781272759412" onmouseenter="enter('3046456781272759412');" onmouseout="out('3046456781272759412');" style=""> 250         if (count &gt; 0) sendNotify(uri);                                                                  </span>
<span  style=""> 251                                                                                                          </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style=""> 252         return count;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253     }                                                                                                    </span>
<span  style=""> 254                                                                                                          </span>
<span class="-6137155183451194640" onmouseenter="enter('-6137155183451194640');" onmouseout="out('-6137155183451194640');" style=""> 255     private void sendNotify(Uri uri) {                                                                   </span>
<span class="8087997420167282782" onmouseenter="enter('8087997420167282782');" onmouseout="out('8087997420167282782');" style=""> 256         String notify = uri.getQueryParameter(PARAMETER_NOTIFY);                                         </span>
<span class="-1882364541416460726" onmouseenter="enter('-1882364541416460726');" onmouseout="out('-1882364541416460726');" style=""> 257         if (notify == null || &quot;true&quot;.equals(notify)) {                                                   </span>
<span class="-1009902495160891118" onmouseenter="enter('-1009902495160891118');" onmouseout="out('-1009902495160891118');" style=""> 258             getContext().getContentResolver().notifyChange(uri, null);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259         }                                                                                                </span>
<span  style=""> 260                                                                                                          </span>
<span class="-88474152060363663" onmouseenter="enter('-88474152060363663');" onmouseout="out('-88474152060363663');" style=""> 261         // always notify the backup agent                                                                </span>
<span class="-4136841506633225478" onmouseenter="enter('-4136841506633225478');" onmouseout="out('-4136841506633225478');" style=""> 262         LauncherBackupAgentHelper.dataChanged(getContext());                                             </span>
<span class="3660947493902737932" onmouseenter="enter('3660947493902737932');" onmouseout="out('3660947493902737932');" style=""> 263         if (mListener != null) {                                                                         </span>
<span class="7178241373784368891" onmouseenter="enter('7178241373784368891');" onmouseout="out('7178241373784368891');" style=""> 264             mListener.onLauncherProviderChange();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266     }                                                                                                    </span>
<span  style=""> 267                                                                                                          </span>
<span class="-1775729469739138676" onmouseenter="enter('-1775729469739138676');" onmouseout="out('-1775729469739138676');" style=""> 268     private void addModifiedTime(ContentValues values) {                                                 </span>
<span class="7778574075272931857" onmouseenter="enter('7778574075272931857');" onmouseout="out('7778574075272931857');" style=""> 269         values.put(LauncherSettings.ChangeLogColumns.MODIFIED, System.currentTimeMillis());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270     }                                                                                                    </span>
<span  style=""> 271                                                                                                          </span>
<span class="2178013549114956338" onmouseenter="enter('2178013549114956338');" onmouseout="out('2178013549114956338');" style=""> 272     public long generateNewItemId() {                                                                    </span>
<span class="4208143222012601660" onmouseenter="enter('4208143222012601660');" onmouseout="out('4208143222012601660');" style=""> 273         return mOpenHelper.generateNewItemId();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274     }                                                                                                    </span>
<span  style=""> 275                                                                                                          </span>
<span class="8365827129597185054" onmouseenter="enter('8365827129597185054');" onmouseout="out('8365827129597185054');" style=""> 276     public void updateMaxItemId(long id) {                                                               </span>
<span class="5887752252226734670" onmouseenter="enter('5887752252226734670');" onmouseout="out('5887752252226734670');" style=""> 277         mOpenHelper.updateMaxItemId(id);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278     }                                                                                                    </span>
<span  style=""> 279                                                                                                          </span>
<span class="3794345207933084858" onmouseenter="enter('3794345207933084858');" onmouseout="out('3794345207933084858');" style=""> 280     public long generateNewScreenId() {                                                                  </span>
<span class="1793864293735992917" onmouseenter="enter('1793864293735992917');" onmouseout="out('1793864293735992917');" style=""> 281         return mOpenHelper.generateNewScreenId();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282     }                                                                                                    </span>
<span  style=""> 283                                                                                                          </span>
<span class="6930658551566435877" onmouseenter="enter('6930658551566435877');" onmouseout="out('6930658551566435877');" style=""> 284     // This is only required one time while loading the workspace during the                             </span>
<span class="-2970396193784752555" onmouseenter="enter('-2970396193784752555');" onmouseout="out('-2970396193784752555');" style=""> 285     // upgrade path, and should never be called from anywhere else.                                      </span>
<span class="-7531165898061832726" onmouseenter="enter('-7531165898061832726');" onmouseout="out('-7531165898061832726');" style=""> 286     public void updateMaxScreenId(long maxScreenId) {                                                    </span>
<span class="1650077191565319140" onmouseenter="enter('1650077191565319140');" onmouseout="out('1650077191565319140');" style=""> 287         mOpenHelper.updateMaxScreenId(maxScreenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288     }                                                                                                    </span>
<span  style=""> 289                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 290     /**                                                                                                  </span>
<span class="3357730711931570136" onmouseenter="enter('3357730711931570136');" onmouseout="out('3357730711931570136');" style=""> 291      * @param Should we load the old db for upgrade? first run only.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 292      */                                                                                                  </span>
<span class="830252285283253659" onmouseenter="enter('830252285283253659');" onmouseout="out('830252285283253659');" style=""> 293     synchronized public boolean justLoadedOldDb() {                                                      </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 294         String spKey = LauncherAppState.getSharedPreferencesKey();                                       </span>
<span class="-1270995004093477684" onmouseenter="enter('-1270995004093477684');" onmouseout="out('-1270995004093477684');" style=""> 295         SharedPreferences sp = getContext().getSharedPreferences(spKey, Context.MODE_PRIVATE);           </span>
<span  style=""> 296                                                                                                          </span>
<span class="-2988224019905233772" onmouseenter="enter('-2988224019905233772');" onmouseout="out('-2988224019905233772');" style=""> 297         boolean loadedOldDb = false || sJustLoadedFromOldDb;                                             </span>
<span  style=""> 298                                                                                                          </span>
<span class="732070560985546855" onmouseenter="enter('732070560985546855');" onmouseout="out('732070560985546855');" style=""> 299         sJustLoadedFromOldDb = false;                                                                    </span>
<span class="2535788223071749602" onmouseenter="enter('2535788223071749602');" onmouseout="out('2535788223071749602');" style=""> 300         if (sp.getBoolean(UPGRADED_FROM_OLD_DATABASE, false)) {                                          </span>
<span  style=""> 301                                                                                                          </span>
<span class="2898240485600869061" onmouseenter="enter('2898240485600869061');" onmouseout="out('2898240485600869061');" style=""> 302             SharedPreferences.Editor editor = sp.edit();                                                 </span>
<span class="-3507238978930621467" onmouseenter="enter('-3507238978930621467');" onmouseout="out('-3507238978930621467');" style=""> 303             editor.remove(UPGRADED_FROM_OLD_DATABASE);                                                   </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 304             editor.commit();                                                                             </span>
<span class="424898969256754833" onmouseenter="enter('424898969256754833');" onmouseout="out('424898969256754833');" style=""> 305             loadedOldDb = true;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306         }                                                                                                </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style=""> 307         return loadedOldDb;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308     }                                                                                                    </span>
<span  style=""> 309                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 310     /**                                                                                                  </span>
<span class="-3404890512310195543" onmouseenter="enter('-3404890512310195543');" onmouseout="out('-3404890512310195543');" style=""> 311      * Clears all the data for a fresh start.                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 312      */                                                                                                  </span>
<span class="-8979529877881539007" onmouseenter="enter('-8979529877881539007');" onmouseout="out('-8979529877881539007');" style=""> 313     synchronized public void createEmptyDB() {                                                           </span>
<span class="-257404101089763384" onmouseenter="enter('-257404101089763384');" onmouseout="out('-257404101089763384');" style=""> 314         mOpenHelper.createEmptyDB(mOpenHelper.getWritableDatabase());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315     }                                                                                                    </span>
<span  style=""> 316                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 317     /**                                                                                                  </span>
<span class="277164340629859803" onmouseenter="enter('277164340629859803');" onmouseout="out('277164340629859803');" style=""> 318      * Loads the default workspace based on the following priority scheme:                               </span>
<span class="6191061916552549057" onmouseenter="enter('6191061916552549057');" onmouseout="out('6191061916552549057');" style=""> 319      *   1) From a package provided by play store                                                        </span>
<span class="-1458935321569433020" onmouseenter="enter('-1458935321569433020');" onmouseout="out('-1458935321569433020');" style=""> 320      *   2) From a partner configuration APK, already in the system image                                </span>
<span class="-8497452292409790071" onmouseenter="enter('-8497452292409790071');" onmouseout="out('-8497452292409790071');" style=""> 321      *   3) The default configuration for the particular device                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 322      */                                                                                                  </span>
<span class="-4109341010907676070" onmouseenter="enter('-4109341010907676070');" onmouseout="out('-4109341010907676070');" style=""> 323     synchronized public void loadDefaultFavoritesIfNecessary() {                                         </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 324         String spKey = LauncherAppState.getSharedPreferencesKey();                                       </span>
<span class="-1270995004093477684" onmouseenter="enter('-1270995004093477684');" onmouseout="out('-1270995004093477684');" style=""> 325         SharedPreferences sp = getContext().getSharedPreferences(spKey, Context.MODE_PRIVATE);           </span>
<span  style=""> 326                                                                                                          </span>
<span class="-1164862040405657048" onmouseenter="enter('-1164862040405657048');" onmouseout="out('-1164862040405657048');" style=""> 327         if (sp.getBoolean(EMPTY_DATABASE_CREATED, false)) {                                              </span>
<span class="-3246698064640464314" onmouseenter="enter('-3246698064640464314');" onmouseout="out('-3246698064640464314');" style=""> 328             Log.d(TAG, &quot;loading default workspace&quot;);                                                     </span>
<span  style=""> 329                                                                                                          </span>
<span class="2862729422956304785" onmouseenter="enter('2862729422956304785');" onmouseout="out('2862729422956304785');" style=""> 330             WorkspaceLoader loader = AutoInstallsLayout.get(getContext(),                                </span>
<span class="4267100487943846224" onmouseenter="enter('4267100487943846224');" onmouseout="out('4267100487943846224');" style=""> 331                     mOpenHelper.mAppWidgetHost, mOpenHelper);                                            </span>
<span  style=""> 332                                                                                                          </span>
<span class="-1290919382195344098" onmouseenter="enter('-1290919382195344098');" onmouseout="out('-1290919382195344098');" style=""> 333             if (loader == null) {                                                                        </span>
<span class="-7748100060285216458" onmouseenter="enter('-7748100060285216458');" onmouseout="out('-7748100060285216458');" style=""> 334                 final Partner partner = Partner.get(getContext().getPackageManager());                   </span>
<span class="-604675337449948556" onmouseenter="enter('-604675337449948556');" onmouseout="out('-604675337449948556');" style=""> 335                 if (partner != null &amp;&amp; partner.hasDefaultLayout()) {                                     </span>
<span class="882794219866203698" onmouseenter="enter('882794219866203698');" onmouseout="out('882794219866203698');" style=""> 336                     final Resources partnerRes = partner.getResources();                                 </span>
<span class="4481789752192356250" onmouseenter="enter('4481789752192356250');" onmouseout="out('4481789752192356250');" style=""> 337                     int workspaceResId = partnerRes.getIdentifier(Partner.RES_DEFAULT_LAYOUT,            </span>
<span class="-8179104168031182438" onmouseenter="enter('-8179104168031182438');" onmouseout="out('-8179104168031182438');" style=""> 338                             &quot;xml&quot;, partner.getPackageName());                                            </span>
<span class="-1442734434460802886" onmouseenter="enter('-1442734434460802886');" onmouseout="out('-1442734434460802886');" style=""> 339                     if (workspaceResId != 0) {                                                           </span>
<span class="7614099601786768812" onmouseenter="enter('7614099601786768812');" onmouseout="out('7614099601786768812');" style=""> 340                         loader = new SimpleWorkspaceLoader(mOpenHelper, partnerRes, workspaceResId);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 342                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343             }                                                                                            </span>
<span  style=""> 344                                                                                                          </span>
<span class="-1290919382195344098" onmouseenter="enter('-1290919382195344098');" onmouseout="out('-1290919382195344098');" style=""> 345             if (loader == null) {                                                                        </span>
<span class="7451927752864728827" onmouseenter="enter('7451927752864728827');" onmouseout="out('7451927752864728827');" style=""> 346                 loader = new SimpleWorkspaceLoader(mOpenHelper, getContext().getResources(),             </span>
<span class="-1420613086462636039" onmouseenter="enter('-1420613086462636039');" onmouseout="out('-1420613086462636039');" style=""> 347                         getDefaultWorkspaceResourceId());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348             }                                                                                            </span>
<span  style=""> 349                                                                                                          </span>
<span class="126045670500141" onmouseenter="enter('126045670500141');" onmouseout="out('126045670500141');" style=""> 350             // Populate favorites table with initial favorites                                           </span>
<span class="6356197677764543118" onmouseenter="enter('6356197677764543118');" onmouseout="out('6356197677764543118');" style=""> 351             SharedPreferences.Editor editor = sp.edit().remove(EMPTY_DATABASE_CREATED);                  </span>
<span class="4528935963390066074" onmouseenter="enter('4528935963390066074');" onmouseout="out('4528935963390066074');" style=""> 352             mOpenHelper.loadFavorites(mOpenHelper.getWritableDatabase(), loader);                        </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 353             editor.commit();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 355     }                                                                                                    </span>
<span  style=""> 356                                                                                                          </span>
<span class="-8499205643032210495" onmouseenter="enter('-8499205643032210495');" onmouseout="out('-8499205643032210495');" style=""> 357     public void migrateLauncher2Shortcuts() {                                                            </span>
<span class="-5770271076267441053" onmouseenter="enter('-5770271076267441053');" onmouseout="out('-5770271076267441053');" style=""> 358         mOpenHelper.migrateLauncher2Shortcuts(mOpenHelper.getWritableDatabase(),                         </span>
<span class="-4855681120160555012" onmouseenter="enter('-4855681120160555012');" onmouseout="out('-4855681120160555012');" style=""> 359                 Uri.parse(getContext().getString(R.string.old_launcher_provider_uri)));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360     }                                                                                                    </span>
<span  style=""> 361                                                                                                          </span>
<span class="-1196563046017318534" onmouseenter="enter('-1196563046017318534');" onmouseout="out('-1196563046017318534');" style=""> 362     private static int getDefaultWorkspaceResourceId() {                                                 </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 363         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 364         DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                    </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style=""> 365         if (LauncherAppState.isDisableAllApps()) {                                                       </span>
<span class="6699639115497717540" onmouseenter="enter('6699639115497717540');" onmouseout="out('6699639115497717540');" style=""> 366             return grid.defaultNoAllAppsLayoutId;                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 367         } else {                                                                                         </span>
<span class="-780823694227077807" onmouseenter="enter('-780823694227077807');" onmouseout="out('-780823694227077807');" style=""> 368             return grid.defaultLayoutId;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370     }                                                                                                    </span>
<span  style=""> 371                                                                                                          </span>
<span class="2048811950140821659" onmouseenter="enter('2048811950140821659');" onmouseout="out('2048811950140821659');" style=""> 372     private static interface ContentValuesCallback {                                                     </span>
<span class="9109141647050984993" onmouseenter="enter('9109141647050984993');" onmouseout="out('9109141647050984993');" style=""> 373         public void onRow(ContentValues values);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374     }                                                                                                    </span>
<span  style=""> 375                                                                                                          </span>
<span class="1239728474819548988" onmouseenter="enter('1239728474819548988');" onmouseout="out('1239728474819548988');" style=""> 376     private static boolean shouldImportLauncher2Database(Context context) {                              </span>
<span class="-3394718202218086970" onmouseenter="enter('-3394718202218086970');" onmouseout="out('-3394718202218086970');" style=""> 377         boolean isTablet = context.getResources().getBoolean(R.bool.is_tablet);                          </span>
<span  style=""> 378                                                                                                          </span>
<span class="-5532998664683170674" onmouseenter="enter('-5532998664683170674');" onmouseout="out('-5532998664683170674');" style=""> 379         // We don&#x27;t import the old databse for tablets, as the grid size has changed.                    </span>
<span class="8529341054323679340" onmouseenter="enter('8529341054323679340');" onmouseout="out('8529341054323679340');" style=""> 380         return !isTablet &amp;&amp; IMPORT_LAUNCHER2_DATABASE;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381     }                                                                                                    </span>
<span  style=""> 382                                                                                                          </span>
<span class="-7861087353469194327" onmouseenter="enter('-7861087353469194327');" onmouseout="out('-7861087353469194327');" style=""> 383     public void deleteDatabase() {                                                                       </span>
<span class="-3081120555997572478" onmouseenter="enter('-3081120555997572478');" onmouseout="out('-3081120555997572478');" style=""> 384         // Are you sure? (y/n)                                                                           </span>
<span class="7599905409028339447" onmouseenter="enter('7599905409028339447');" onmouseout="out('7599905409028339447');" style=""> 385         final SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                     </span>
<span class="4824670475834221257" onmouseenter="enter('4824670475834221257');" onmouseout="out('4824670475834221257');" style=""> 386         final File dbFile = new File(db.getPath());                                                      </span>
<span class="-4378932496508441297" onmouseenter="enter('-4378932496508441297');" onmouseout="out('-4378932496508441297');" style=""> 387         mOpenHelper.close();                                                                             </span>
<span class="-2168275612742463412" onmouseenter="enter('-2168275612742463412');" onmouseout="out('-2168275612742463412');" style=""> 388         if (dbFile.exists()) {                                                                           </span>
<span class="7055278701412747697" onmouseenter="enter('7055278701412747697');" onmouseout="out('7055278701412747697');" style=""> 389             SQLiteDatabase.deleteDatabase(dbFile);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390         }                                                                                                </span>
<span class="1429708216911350032" onmouseenter="enter('1429708216911350032');" onmouseout="out('1429708216911350032');" style=""> 391         mOpenHelper = new DatabaseHelper(getContext());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392     }                                                                                                    </span>
<span  style=""> 393                                                                                                          </span>
<span class="-8073014385313712586" onmouseenter="enter('-8073014385313712586');" onmouseout="out('-8073014385313712586');" style=""> 394     private static class DatabaseHelper extends SQLiteOpenHelper implements LayoutParserCallback {       </span>
<span class="-9177351901961504515" onmouseenter="enter('-9177351901961504515');" onmouseout="out('-9177351901961504515');" style=""> 395         private static final String TAG_RESOLVE = &quot;resolve&quot;;                                             </span>
<span class="-6648556986475948603" onmouseenter="enter('-6648556986475948603');" onmouseout="out('-6648556986475948603');" style=""> 396         private static final String TAG_FAVORITES = &quot;favorites&quot;;                                         </span>
<span class="2417919475469446038" onmouseenter="enter('2417919475469446038');" onmouseout="out('2417919475469446038');" style=""> 397         private static final String TAG_FAVORITE = &quot;favorite&quot;;                                           </span>
<span class="8817783213080628620" onmouseenter="enter('8817783213080628620');" onmouseout="out('8817783213080628620');" style=""> 398         private static final String TAG_APPWIDGET = &quot;appwidget&quot;;                                         </span>
<span class="1544013162193549447" onmouseenter="enter('1544013162193549447');" onmouseout="out('1544013162193549447');" style=""> 399         private static final String TAG_SHORTCUT = &quot;shortcut&quot;;                                           </span>
<span class="-5715927654015021253" onmouseenter="enter('-5715927654015021253');" onmouseout="out('-5715927654015021253');" style=""> 400         private static final String TAG_FOLDER = &quot;folder&quot;;                                               </span>
<span class="-6175494568545371270" onmouseenter="enter('-6175494568545371270');" onmouseout="out('-6175494568545371270');" style=""> 401         private static final String TAG_PARTNER_FOLDER = &quot;partner-folder&quot;;                               </span>
<span class="-8348196986139036128" onmouseenter="enter('-8348196986139036128');" onmouseout="out('-8348196986139036128');" style=""> 402         private static final String TAG_EXTRA = &quot;extra&quot;;                                                 </span>
<span class="-5562355841128428217" onmouseenter="enter('-5562355841128428217');" onmouseout="out('-5562355841128428217');" style=""> 403         private static final String TAG_INCLUDE = &quot;include&quot;;                                             </span>
<span  style=""> 404                                                                                                          </span>
<span class="-2405859498731861640" onmouseenter="enter('-2405859498731861640');" onmouseout="out('-2405859498731861640');" style=""> 405         // Style attrs -- &quot;Favorite&quot;                                                                     </span>
<span class="6214193247203789772" onmouseenter="enter('6214193247203789772');" onmouseout="out('6214193247203789772');" style=""> 406         private static final String ATTR_CLASS_NAME = &quot;className&quot;;                                       </span>
<span class="-1386532944306710360" onmouseenter="enter('-1386532944306710360');" onmouseout="out('-1386532944306710360');" style=""> 407         private static final String ATTR_PACKAGE_NAME = &quot;packageName&quot;;                                   </span>
<span class="2414249740748360985" onmouseenter="enter('2414249740748360985');" onmouseout="out('2414249740748360985');" style=""> 408         private static final String ATTR_CONTAINER = &quot;container&quot;;                                        </span>
<span class="-389066511444324935" onmouseenter="enter('-389066511444324935');" onmouseout="out('-389066511444324935');" style=""> 409         private static final String ATTR_SCREEN = &quot;screen&quot;;                                              </span>
<span class="3539825055734438732" onmouseenter="enter('3539825055734438732');" onmouseout="out('3539825055734438732');" style=""> 410         private static final String ATTR_X = &quot;x&quot;;                                                        </span>
<span class="-8597702554968119187" onmouseenter="enter('-8597702554968119187');" onmouseout="out('-8597702554968119187');" style=""> 411         private static final String ATTR_Y = &quot;y&quot;;                                                        </span>
<span class="-2621848582492648979" onmouseenter="enter('-2621848582492648979');" onmouseout="out('-2621848582492648979');" style=""> 412         private static final String ATTR_SPAN_X = &quot;spanX&quot;;                                               </span>
<span class="-675060966992142264" onmouseenter="enter('-675060966992142264');" onmouseout="out('-675060966992142264');" style=""> 413         private static final String ATTR_SPAN_Y = &quot;spanY&quot;;                                               </span>
<span class="1238292044873463939" onmouseenter="enter('1238292044873463939');" onmouseout="out('1238292044873463939');" style=""> 414         private static final String ATTR_ICON = &quot;icon&quot;;                                                  </span>
<span class="5936928200905820740" onmouseenter="enter('5936928200905820740');" onmouseout="out('5936928200905820740');" style=""> 415         private static final String ATTR_TITLE = &quot;title&quot;;                                                </span>
<span class="-5345085314000449361" onmouseenter="enter('-5345085314000449361');" onmouseout="out('-5345085314000449361');" style=""> 416         private static final String ATTR_URI = &quot;uri&quot;;                                                    </span>
<span  style=""> 417                                                                                                          </span>
<span class="3599016499719454262" onmouseenter="enter('3599016499719454262');" onmouseout="out('3599016499719454262');" style=""> 418         // Style attrs -- &quot;Include&quot;                                                                      </span>
<span class="-5893198944478773555" onmouseenter="enter('-5893198944478773555');" onmouseout="out('-5893198944478773555');" style=""> 419         private static final String ATTR_WORKSPACE = &quot;workspace&quot;;                                        </span>
<span  style=""> 420                                                                                                          </span>
<span class="-5389745022469758251" onmouseenter="enter('-5389745022469758251');" onmouseout="out('-5389745022469758251');" style=""> 421         // Style attrs -- &quot;Extra&quot;                                                                        </span>
<span class="9111389785487433322" onmouseenter="enter('9111389785487433322');" onmouseout="out('9111389785487433322');" style=""> 422         private static final String ATTR_KEY = &quot;key&quot;;                                                    </span>
<span class="-4495093316086922325" onmouseenter="enter('-4495093316086922325');" onmouseout="out('-4495093316086922325');" style=""> 423         private static final String ATTR_VALUE = &quot;value&quot;;                                                </span>
<span  style=""> 424                                                                                                          </span>
<span class="-2672328117217234149" onmouseenter="enter('-2672328117217234149');" onmouseout="out('-2672328117217234149');" style=""> 425         private final Context mContext;                                                                  </span>
<span class="916814758228251192" onmouseenter="enter('916814758228251192');" onmouseout="out('916814758228251192');" style=""> 426         private final PackageManager mPackageManager;                                                    </span>
<span class="-7815254415381208754" onmouseenter="enter('-7815254415381208754');" onmouseout="out('-7815254415381208754');" style=""> 427         private final AppWidgetHost mAppWidgetHost;                                                      </span>
<span class="256431113711786954" onmouseenter="enter('256431113711786954');" onmouseout="out('256431113711786954');" style=""> 428         private long mMaxItemId = -1;                                                                    </span>
<span class="3024521003496490102" onmouseenter="enter('3024521003496490102');" onmouseout="out('3024521003496490102');" style=""> 429         private long mMaxScreenId = -1;                                                                  </span>
<span  style=""> 430                                                                                                          </span>
<span class="7342788129695687690" onmouseenter="enter('7342788129695687690');" onmouseout="out('7342788129695687690');" style=""> 431         private boolean mNewDbCreated = false;                                                           </span>
<span  style=""> 432                                                                                                          </span>
<span class="1000156088447424124" onmouseenter="enter('1000156088447424124');" onmouseout="out('1000156088447424124');" style=""> 433         DatabaseHelper(Context context) {                                                                </span>
<span class="-3457119901623063168" onmouseenter="enter('-3457119901623063168');" onmouseout="out('-3457119901623063168');" style=""> 434             super(context, DATABASE_NAME, null, DATABASE_VERSION);                                       </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style=""> 435             mContext = context;                                                                          </span>
<span class="8554599676865199182" onmouseenter="enter('8554599676865199182');" onmouseout="out('8554599676865199182');" style=""> 436             mPackageManager = context.getPackageManager();                                               </span>
<span class="6731257549223913473" onmouseenter="enter('6731257549223913473');" onmouseout="out('6731257549223913473');" style=""> 437             mAppWidgetHost = new AppWidgetHost(context, Launcher.APPWIDGET_HOST_ID);                     </span>
<span  style=""> 438                                                                                                          </span>
<span class="-7119307471557363464" onmouseenter="enter('-7119307471557363464');" onmouseout="out('-7119307471557363464');" style=""> 439             // In the case where neither onCreate nor onUpgrade gets called, we read the maxId from      </span>
<span class="-7146491614936969963" onmouseenter="enter('-7146491614936969963');" onmouseout="out('-7146491614936969963');" style=""> 440             // the DB here                                                                               </span>
<span class="-8239698715373110075" onmouseenter="enter('-8239698715373110075');" onmouseout="out('-8239698715373110075');" style=""> 441             if (mMaxItemId == -1) {                                                                      </span>
<span class="6514208419145701418" onmouseenter="enter('6514208419145701418');" onmouseout="out('6514208419145701418');" style=""> 442                 mMaxItemId = initializeMaxItemId(getWritableDatabase());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 443             }                                                                                            </span>
<span class="2158219101093277292" onmouseenter="enter('2158219101093277292');" onmouseout="out('2158219101093277292');" style=""> 444             if (mMaxScreenId == -1) {                                                                    </span>
<span class="-7197865417052699646" onmouseenter="enter('-7197865417052699646');" onmouseout="out('-7197865417052699646');" style=""> 445                 mMaxScreenId = initializeMaxScreenId(getWritableDatabase());                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447         }                                                                                                </span>
<span  style=""> 448                                                                                                          </span>
<span class="487377169126514768" onmouseenter="enter('487377169126514768');" onmouseout="out('487377169126514768');" style=""> 449         public boolean wasNewDbCreated() {                                                               </span>
<span class="1294520975679493300" onmouseenter="enter('1294520975679493300');" onmouseout="out('1294520975679493300');" style=""> 450             return mNewDbCreated;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451         }                                                                                                </span>
<span  style=""> 452                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 453         /**                                                                                              </span>
<span class="-3713204910685876719" onmouseenter="enter('-3713204910685876719');" onmouseout="out('-3713204910685876719');" style=""> 454          * Send notification that we&#x27;ve deleted the {@link AppWidgetHost},                               </span>
<span class="-5398164636189778479" onmouseenter="enter('-5398164636189778479');" onmouseout="out('-5398164636189778479');" style=""> 455          * probably as part of the initial database creation. The receiver may                           </span>
<span class="-284834762183367019" onmouseenter="enter('-284834762183367019');" onmouseout="out('-284834762183367019');" style=""> 456          * want to re-call {@link AppWidgetHost#startListening()} to ensure                              </span>
<span class="1913597860538764992" onmouseenter="enter('1913597860538764992');" onmouseout="out('1913597860538764992');" style=""> 457          * callbacks are correctly set.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 458          */                                                                                              </span>
<span class="3384745401314169661" onmouseenter="enter('3384745401314169661');" onmouseout="out('3384745401314169661');" style=""> 459         private void sendAppWidgetResetNotify() {                                                        </span>
<span class="-1113390730047466962" onmouseenter="enter('-1113390730047466962');" onmouseout="out('-1113390730047466962');" style=""> 460             final ContentResolver resolver = mContext.getContentResolver();                              </span>
<span class="4149774703050814155" onmouseenter="enter('4149774703050814155');" onmouseout="out('4149774703050814155');" style=""> 461             resolver.notifyChange(CONTENT_APPWIDGET_RESET_URI, null);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462         }                                                                                                </span>
<span  style=""> 463                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 464         @Override                                                                                        </span>
<span class="3201464308903999877" onmouseenter="enter('3201464308903999877');" onmouseout="out('3201464308903999877');" style=""> 465         public void onCreate(SQLiteDatabase db) {                                                        </span>
<span class="4744685829155971552" onmouseenter="enter('4744685829155971552');" onmouseout="out('4744685829155971552');" style=""> 466             if (LOGD) Log.d(TAG, &quot;creating new launcher database&quot;);                                      </span>
<span  style=""> 467                                                                                                          </span>
<span class="-5512536783286632376" onmouseenter="enter('-5512536783286632376');" onmouseout="out('-5512536783286632376');" style=""> 468             mMaxItemId = 1;                                                                              </span>
<span class="-1030858145638239039" onmouseenter="enter('-1030858145638239039');" onmouseout="out('-1030858145638239039');" style=""> 469             mMaxScreenId = 0;                                                                            </span>
<span class="-3863035699221776712" onmouseenter="enter('-3863035699221776712');" onmouseout="out('-3863035699221776712');" style=""> 470             mNewDbCreated = true;                                                                        </span>
<span  style=""> 471                                                                                                          </span>
<span class="8272328117098122260" onmouseenter="enter('8272328117098122260');" onmouseout="out('8272328117098122260');" style=""> 472             UserManagerCompat userManager = UserManagerCompat.getInstance(mContext);                     </span>
<span class="1087451883287607054" onmouseenter="enter('1087451883287607054');" onmouseout="out('1087451883287607054');" style=""> 473             long userSerialNumber = userManager.getSerialNumberForUser(                                  </span>
<span class="334342413311659427" onmouseenter="enter('334342413311659427');" onmouseout="out('334342413311659427');" style=""> 474                     UserHandleCompat.myUserHandle());                                                    </span>
<span  style=""> 475                                                                                                          </span>
<span class="-5810771542500139933" onmouseenter="enter('-5810771542500139933');" onmouseout="out('-5810771542500139933');" style=""> 476             db.execSQL(&quot;CREATE TABLE favorites (&quot; +                                                      </span>
<span class="-7286867248755276119" onmouseenter="enter('-7286867248755276119');" onmouseout="out('-7286867248755276119');" style=""> 477                     &quot;_id INTEGER PRIMARY KEY,&quot; +                                                         </span>
<span class="5329137835308229169" onmouseenter="enter('5329137835308229169');" onmouseout="out('5329137835308229169');" style=""> 478                     &quot;title TEXT,&quot; +                                                                      </span>
<span class="-7776152072054589061" onmouseenter="enter('-7776152072054589061');" onmouseout="out('-7776152072054589061');" style=""> 479                     &quot;intent TEXT,&quot; +                                                                     </span>
<span class="4982593742089674958" onmouseenter="enter('4982593742089674958');" onmouseout="out('4982593742089674958');" style=""> 480                     &quot;container INTEGER,&quot; +                                                               </span>
<span class="-1871026270657853169" onmouseenter="enter('-1871026270657853169');" onmouseout="out('-1871026270657853169');" style=""> 481                     &quot;screen INTEGER,&quot; +                                                                  </span>
<span class="-9174211260981343890" onmouseenter="enter('-9174211260981343890');" onmouseout="out('-9174211260981343890');" style=""> 482                     &quot;cellX INTEGER,&quot; +                                                                   </span>
<span class="1584772009960348649" onmouseenter="enter('1584772009960348649');" onmouseout="out('1584772009960348649');" style=""> 483                     &quot;cellY INTEGER,&quot; +                                                                   </span>
<span class="5424055190881126727" onmouseenter="enter('5424055190881126727');" onmouseout="out('5424055190881126727');" style=""> 484                     &quot;spanX INTEGER,&quot; +                                                                   </span>
<span class="6553755327503045229" onmouseenter="enter('6553755327503045229');" onmouseout="out('6553755327503045229');" style=""> 485                     &quot;spanY INTEGER,&quot; +                                                                   </span>
<span class="5229848414421823036" onmouseenter="enter('5229848414421823036');" onmouseout="out('5229848414421823036');" style=""> 486                     &quot;itemType INTEGER,&quot; +                                                                </span>
<span class="-1771151571856416667" onmouseenter="enter('-1771151571856416667');" onmouseout="out('-1771151571856416667');" style=""> 487                     &quot;appWidgetId INTEGER NOT NULL DEFAULT -1,&quot; +                                         </span>
<span class="-9047067707489472437" onmouseenter="enter('-9047067707489472437');" onmouseout="out('-9047067707489472437');" style=""> 488                     &quot;isShortcut INTEGER,&quot; +                                                              </span>
<span class="-3445858598434382544" onmouseenter="enter('-3445858598434382544');" onmouseout="out('-3445858598434382544');" style=""> 489                     &quot;iconType INTEGER,&quot; +                                                                </span>
<span class="4279668316006004948" onmouseenter="enter('4279668316006004948');" onmouseout="out('4279668316006004948');" style=""> 490                     &quot;iconPackage TEXT,&quot; +                                                                </span>
<span class="2008284586023778304" onmouseenter="enter('2008284586023778304');" onmouseout="out('2008284586023778304');" style=""> 491                     &quot;iconResource TEXT,&quot; +                                                               </span>
<span class="-5981868381948376489" onmouseenter="enter('-5981868381948376489');" onmouseout="out('-5981868381948376489');" style=""> 492                     &quot;icon BLOB,&quot; +                                                                       </span>
<span class="5686768105176115842" onmouseenter="enter('5686768105176115842');" onmouseout="out('5686768105176115842');" style=""> 493                     &quot;uri TEXT,&quot; +                                                                        </span>
<span class="-5470568819214956502" onmouseenter="enter('-5470568819214956502');" onmouseout="out('-5470568819214956502');" style=""> 494                     &quot;displayMode INTEGER,&quot; +                                                             </span>
<span class="3582502352252677630" onmouseenter="enter('3582502352252677630');" onmouseout="out('3582502352252677630');" style=""> 495                     &quot;appWidgetProvider TEXT,&quot; +                                                          </span>
<span class="4065658841092455651" onmouseenter="enter('4065658841092455651');" onmouseout="out('4065658841092455651');" style=""> 496                     &quot;modified INTEGER NOT NULL DEFAULT 0,&quot; +                                             </span>
<span class="422282607120493296" onmouseenter="enter('422282607120493296');" onmouseout="out('422282607120493296');" style=""> 497                     &quot;restored INTEGER NOT NULL DEFAULT 0,&quot; +                                             </span>
<span class="86482473227423588" onmouseenter="enter('86482473227423588');" onmouseout="out('86482473227423588');" style=""> 498                     &quot;profileId INTEGER DEFAULT &quot; + userSerialNumber +                                    </span>
<span class="4525293784515244604" onmouseenter="enter('4525293784515244604');" onmouseout="out('4525293784515244604');" style=""> 499                     &quot;);&quot;);                                                                               </span>
<span class="4995577433356427338" onmouseenter="enter('4995577433356427338');" onmouseout="out('4995577433356427338');" style=""> 500             addWorkspacesTable(db);                                                                      </span>
<span  style=""> 501                                                                                                          </span>
<span class="-1982623284376040662" onmouseenter="enter('-1982623284376040662');" onmouseout="out('-1982623284376040662');" style=""> 502             // Database was just created, so wipe any previous widgets                                   </span>
<span class="35469525966995251" onmouseenter="enter('35469525966995251');" onmouseout="out('35469525966995251');" style=""> 503             if (mAppWidgetHost != null) {                                                                </span>
<span class="2879907381293157546" onmouseenter="enter('2879907381293157546');" onmouseout="out('2879907381293157546');" style=""> 504                 mAppWidgetHost.deleteHost();                                                             </span>
<span class="-5770229164268459929" onmouseenter="enter('-5770229164268459929');" onmouseout="out('-5770229164268459929');" style=""> 505                 sendAppWidgetResetNotify();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506             }                                                                                            </span>
<span  style=""> 507                                                                                                          </span>
<span class="609275327715209247" onmouseenter="enter('609275327715209247');" onmouseout="out('609275327715209247');" style=""> 508             if (shouldImportLauncher2Database(mContext)) {                                               </span>
<span class="-4119927574094224618" onmouseenter="enter('-4119927574094224618');" onmouseout="out('-4119927574094224618');" style=""> 509                 // Try converting the old database                                                       </span>
<span class="-2608073222964575343" onmouseenter="enter('-2608073222964575343');" onmouseout="out('-2608073222964575343');" style=""> 510                 ContentValuesCallback permuteScreensCb = new ContentValuesCallback() {                   </span>
<span class="8586429359182493165" onmouseenter="enter('8586429359182493165');" onmouseout="out('8586429359182493165');" style=""> 511                     public void onRow(ContentValues values) {                                            </span>
<span class="8168514524062857535" onmouseenter="enter('8168514524062857535');" onmouseout="out('8168514524062857535');" style=""> 512                         int container = values.getAsInteger(LauncherSettings.Favorites.CONTAINER);       </span>
<span class="5020574662396153275" onmouseenter="enter('5020574662396153275');" onmouseout="out('5020574662396153275');" style=""> 513                         if (container == Favorites.CONTAINER_DESKTOP) {                                  </span>
<span class="8059598160467561910" onmouseenter="enter('8059598160467561910');" onmouseout="out('8059598160467561910');" style=""> 514                             int screen = values.getAsInteger(LauncherSettings.Favorites.SCREEN);         </span>
<span class="-7023501586433453456" onmouseenter="enter('-7023501586433453456');" onmouseout="out('-7023501586433453456');" style=""> 515                             screen = (int) upgradeLauncherDb_permuteScreens(screen);                     </span>
<span class="4993135311254983149" onmouseenter="enter('4993135311254983149');" onmouseout="out('4993135311254983149');" style=""> 516                             values.put(LauncherSettings.Favorites.SCREEN, screen);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 519                 };                                                                                       </span>
<span class="-6389228191485877615" onmouseenter="enter('-6389228191485877615');" onmouseout="out('-6389228191485877615');" style=""> 520                 Uri uri = Uri.parse(&quot;content://&quot; + Settings.AUTHORITY +                                  </span>
<span class="221068161423218984" onmouseenter="enter('221068161423218984');" onmouseout="out('221068161423218984');" style=""> 521                         &quot;/old_favorites?notify=true&quot;);                                                   </span>
<span class="-6844380575648815427" onmouseenter="enter('-6844380575648815427');" onmouseout="out('-6844380575648815427');" style=""> 522                 if (!convertDatabase(db, uri, permuteScreensCb, true)) {                                 </span>
<span class="1523633607411472329" onmouseenter="enter('1523633607411472329');" onmouseout="out('1523633607411472329');" style=""> 523                     // Try and upgrade from the Launcher2 db                                             </span>
<span class="4518498143464795661" onmouseenter="enter('4518498143464795661');" onmouseout="out('4518498143464795661');" style=""> 524                     uri = Uri.parse(mContext.getString(R.string.old_launcher_provider_uri));             </span>
<span class="8183480483325234852" onmouseenter="enter('8183480483325234852');" onmouseout="out('8183480483325234852');" style=""> 525                     if (!convertDatabase(db, uri, permuteScreensCb, false)) {                            </span>
<span class="-7649701046117020267" onmouseenter="enter('-7649701046117020267');" onmouseout="out('-7649701046117020267');" style=""> 526                         // If we fail, then set a flag to load the default workspace                     </span>
<span class="7629543500667828090" onmouseenter="enter('7629543500667828090');" onmouseout="out('7629543500667828090');" style=""> 527                         setFlagEmptyDbCreated();                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 528                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530                 }                                                                                        </span>
<span class="3454579597073281561" onmouseenter="enter('3454579597073281561');" onmouseout="out('3454579597073281561');" style=""> 531                 // Right now, in non-default workspace cases, we want to run the final                   </span>
<span class="-5098717153247698852" onmouseenter="enter('-5098717153247698852');" onmouseout="out('-5098717153247698852');" style=""> 532                 // upgrade code (ie. to fix workspace screen indices -&gt; ids, etc.), so                   </span>
<span class="-4125458130400794691" onmouseenter="enter('-4125458130400794691');" onmouseout="out('-4125458130400794691');" style=""> 533                 // set that flag too.                                                                    </span>
<span class="4167333916835222093" onmouseenter="enter('4167333916835222093');" onmouseout="out('4167333916835222093');" style=""> 534                 setFlagJustLoadedOldDb();                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 535             } else {                                                                                     </span>
<span class="-1063142603395313746" onmouseenter="enter('-1063142603395313746');" onmouseout="out('-1063142603395313746');" style=""> 536                 // Fresh and clean launcher DB.                                                          </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style=""> 537                 mMaxItemId = initializeMaxItemId(db);                                                    </span>
<span class="7629543500667828090" onmouseenter="enter('7629543500667828090');" onmouseout="out('7629543500667828090');" style=""> 538                 setFlagEmptyDbCreated();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 539             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540         }                                                                                                </span>
<span  style=""> 541                                                                                                          </span>
<span class="6272912136443308513" onmouseenter="enter('6272912136443308513');" onmouseout="out('6272912136443308513');" style=""> 542         private void addWorkspacesTable(SQLiteDatabase db) {                                             </span>
<span class="2730049849658983478" onmouseenter="enter('2730049849658983478');" onmouseout="out('2730049849658983478');" style=""> 543             db.execSQL(&quot;CREATE TABLE &quot; + TABLE_WORKSPACE_SCREENS + &quot; (&quot; +                                </span>
<span class="-1469669278065576182" onmouseenter="enter('-1469669278065576182');" onmouseout="out('-1469669278065576182');" style=""> 544                     LauncherSettings.WorkspaceScreens._ID + &quot; INTEGER,&quot; +                                </span>
<span class="-8340457193420065897" onmouseenter="enter('-8340457193420065897');" onmouseout="out('-8340457193420065897');" style=""> 545                     LauncherSettings.WorkspaceScreens.SCREEN_RANK + &quot; INTEGER,&quot; +                        </span>
<span class="7771125962287368960" onmouseenter="enter('7771125962287368960');" onmouseout="out('7771125962287368960');" style=""> 546                     LauncherSettings.ChangeLogColumns.MODIFIED + &quot; INTEGER NOT NULL DEFAULT 0&quot; +         </span>
<span class="4525293784515244604" onmouseenter="enter('4525293784515244604');" onmouseout="out('4525293784515244604');" style=""> 547                     &quot;);&quot;);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548         }                                                                                                </span>
<span  style=""> 549                                                                                                          </span>
<span class="-3232037806458942317" onmouseenter="enter('-3232037806458942317');" onmouseout="out('-3232037806458942317');" style=""> 550         private void removeOrphanedItems(SQLiteDatabase db) {                                            </span>
<span class="-3995909494643948388" onmouseenter="enter('-3995909494643948388');" onmouseout="out('-3995909494643948388');" style=""> 551             // Delete items directly on the workspace who&#x27;s screen id doesn&#x27;t exist                      </span>
<span class="6555258266445461688" onmouseenter="enter('6555258266445461688');" onmouseout="out('6555258266445461688');" style=""> 552             //  &quot;DELETE FROM favorites WHERE screen NOT IN (SELECT _id FROM workspaceScreens)            </span>
<span class="-1584785563187965465" onmouseenter="enter('-1584785563187965465');" onmouseout="out('-1584785563187965465');" style=""> 553             //   AND container = -100&quot;                                                                   </span>
<span class="-3502523792993972030" onmouseenter="enter('-3502523792993972030');" onmouseout="out('-3502523792993972030');" style=""> 554             String removeOrphanedDesktopItems = &quot;DELETE FROM &quot; + TABLE_FAVORITES +                       </span>
<span class="-3798755311795862199" onmouseenter="enter('-3798755311795862199');" onmouseout="out('-3798755311795862199');" style=""> 555                     &quot; WHERE &quot; +                                                                          </span>
<span class="-8781539607986806909" onmouseenter="enter('-8781539607986806909');" onmouseout="out('-8781539607986806909');" style=""> 556                     LauncherSettings.Favorites.SCREEN + &quot; NOT IN (SELECT &quot; +                             </span>
<span class="-3730067412022302503" onmouseenter="enter('-3730067412022302503');" onmouseout="out('-3730067412022302503');" style=""> 557                     LauncherSettings.WorkspaceScreens._ID + &quot; FROM &quot; + TABLE_WORKSPACE_SCREENS + &quot;)&quot; +   </span>
<span class="8831213357842987069" onmouseenter="enter('8831213357842987069');" onmouseout="out('8831213357842987069');" style=""> 558                     &quot; AND &quot; +                                                                            </span>
<span class="-3912897749337440213" onmouseenter="enter('-3912897749337440213');" onmouseout="out('-3912897749337440213');" style=""> 559                     LauncherSettings.Favorites.CONTAINER + &quot; = &quot; +                                       </span>
<span class="-1572782876841487653" onmouseenter="enter('-1572782876841487653');" onmouseout="out('-1572782876841487653');" style=""> 560                     LauncherSettings.Favorites.CONTAINER_DESKTOP;                                        </span>
<span class="-5442680607495552531" onmouseenter="enter('-5442680607495552531');" onmouseout="out('-5442680607495552531');" style=""> 561             db.execSQL(removeOrphanedDesktopItems);                                                      </span>
<span  style=""> 562                                                                                                          </span>
<span class="2150462606818952724" onmouseenter="enter('2150462606818952724');" onmouseout="out('2150462606818952724');" style=""> 563             // Delete items contained in folders which no longer exist (after above statement)           </span>
<span class="7157590486959116676" onmouseenter="enter('7157590486959116676');" onmouseout="out('7157590486959116676');" style=""> 564             //  &quot;DELETE FROM favorites  WHERE container &lt;&gt; -100 AND container &lt;&gt; -101 AND container      </span>
<span class="4713393280747800603" onmouseenter="enter('4713393280747800603');" onmouseout="out('4713393280747800603');" style=""> 565             //   NOT IN (SELECT _id FROM favorites WHERE itemType = 2)&quot;                                  </span>
<span class="-8895952306054120744" onmouseenter="enter('-8895952306054120744');" onmouseout="out('-8895952306054120744');" style=""> 566             String removeOrphanedFolderItems = &quot;DELETE FROM &quot; + TABLE_FAVORITES +                        </span>
<span class="-3798755311795862199" onmouseenter="enter('-3798755311795862199');" onmouseout="out('-3798755311795862199');" style=""> 567                     &quot; WHERE &quot; +                                                                          </span>
<span class="-9165304043886914201" onmouseenter="enter('-9165304043886914201');" onmouseout="out('-9165304043886914201');" style=""> 568                     LauncherSettings.Favorites.CONTAINER + &quot; &lt;&gt; &quot; +                                      </span>
<span class="2430974176390543784" onmouseenter="enter('2430974176390543784');" onmouseout="out('2430974176390543784');" style=""> 569                     LauncherSettings.Favorites.CONTAINER_DESKTOP +                                       </span>
<span class="3944405145859305700" onmouseenter="enter('3944405145859305700');" onmouseout="out('3944405145859305700');" style=""> 570                     &quot; AND &quot;                                                                              </span>
<span class="5144458996296891504" onmouseenter="enter('5144458996296891504');" onmouseout="out('5144458996296891504');" style=""> 571                     + LauncherSettings.Favorites.CONTAINER + &quot; &lt;&gt; &quot; +                                    </span>
<span class="20571678636460503" onmouseenter="enter('20571678636460503');" onmouseout="out('20571678636460503');" style=""> 572                     LauncherSettings.Favorites.CONTAINER_HOTSEAT +                                       </span>
<span class="3944405145859305700" onmouseenter="enter('3944405145859305700');" onmouseout="out('3944405145859305700');" style=""> 573                     &quot; AND &quot;                                                                              </span>
<span class="-4280152506863766824" onmouseenter="enter('-4280152506863766824');" onmouseout="out('-4280152506863766824');" style=""> 574                     + LauncherSettings.Favorites.CONTAINER + &quot; NOT IN (SELECT &quot; +                        </span>
<span class="-971280935083657149" onmouseenter="enter('-971280935083657149');" onmouseout="out('-971280935083657149');" style=""> 575                     LauncherSettings.Favorites._ID + &quot; FROM &quot; + TABLE_FAVORITES +                        </span>
<span class="4038942553560789906" onmouseenter="enter('4038942553560789906');" onmouseout="out('4038942553560789906');" style=""> 576                     &quot; WHERE &quot; + LauncherSettings.Favorites.ITEM_TYPE + &quot; = &quot; +                           </span>
<span class="-1734962565729646321" onmouseenter="enter('-1734962565729646321');" onmouseout="out('-1734962565729646321');" style=""> 577                     LauncherSettings.Favorites.ITEM_TYPE_FOLDER + &quot;)&quot;;                                   </span>
<span class="-8852316947474253726" onmouseenter="enter('-8852316947474253726');" onmouseout="out('-8852316947474253726');" style=""> 578             db.execSQL(removeOrphanedFolderItems);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 579         }                                                                                                </span>
<span  style=""> 580                                                                                                          </span>
<span class="-2961433455992777066" onmouseenter="enter('-2961433455992777066');" onmouseout="out('-2961433455992777066');" style=""> 581         private void setFlagJustLoadedOldDb() {                                                          </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 582             String spKey = LauncherAppState.getSharedPreferencesKey();                                   </span>
<span class="-5067042237042206848" onmouseenter="enter('-5067042237042206848');" onmouseout="out('-5067042237042206848');" style=""> 583             SharedPreferences sp = mContext.getSharedPreferences(spKey, Context.MODE_PRIVATE);           </span>
<span class="2898240485600869061" onmouseenter="enter('2898240485600869061');" onmouseout="out('2898240485600869061');" style=""> 584             SharedPreferences.Editor editor = sp.edit();                                                 </span>
<span class="6425915141570404948" onmouseenter="enter('6425915141570404948');" onmouseout="out('6425915141570404948');" style=""> 585             editor.putBoolean(UPGRADED_FROM_OLD_DATABASE, true);                                         </span>
<span class="-757214322554182598" onmouseenter="enter('-757214322554182598');" onmouseout="out('-757214322554182598');" style=""> 586             editor.putBoolean(EMPTY_DATABASE_CREATED, false);                                            </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 587             editor.commit();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588         }                                                                                                </span>
<span  style=""> 589                                                                                                          </span>
<span class="3580170518454540960" onmouseenter="enter('3580170518454540960');" onmouseout="out('3580170518454540960');" style=""> 590         private void setFlagEmptyDbCreated() {                                                           </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 591             String spKey = LauncherAppState.getSharedPreferencesKey();                                   </span>
<span class="-5067042237042206848" onmouseenter="enter('-5067042237042206848');" onmouseout="out('-5067042237042206848');" style=""> 592             SharedPreferences sp = mContext.getSharedPreferences(spKey, Context.MODE_PRIVATE);           </span>
<span class="2898240485600869061" onmouseenter="enter('2898240485600869061');" onmouseout="out('2898240485600869061');" style=""> 593             SharedPreferences.Editor editor = sp.edit();                                                 </span>
<span class="-1876450541595142979" onmouseenter="enter('-1876450541595142979');" onmouseout="out('-1876450541595142979');" style=""> 594             editor.putBoolean(EMPTY_DATABASE_CREATED, true);                                             </span>
<span class="4517855415574245319" onmouseenter="enter('4517855415574245319');" onmouseout="out('4517855415574245319');" style=""> 595             editor.putBoolean(UPGRADED_FROM_OLD_DATABASE, false);                                        </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 596             editor.commit();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597         }                                                                                                </span>
<span  style=""> 598                                                                                                          </span>
<span class="6904570220382641884" onmouseenter="enter('6904570220382641884');" onmouseout="out('6904570220382641884');" style=""> 599         // We rearrange the screens from the old launcher                                                </span>
<span class="4618589763737563912" onmouseenter="enter('4618589763737563912');" onmouseout="out('4618589763737563912');" style=""> 600         // 12345 -&gt; 34512                                                                                </span>
<span class="3499405923658396159" onmouseenter="enter('3499405923658396159');" onmouseout="out('3499405923658396159');" style=""> 601         private long upgradeLauncherDb_permuteScreens(long screen) {                                     </span>
<span class="-8201094260239758609" onmouseenter="enter('-8201094260239758609');" onmouseout="out('-8201094260239758609');" style=""> 602             if (screen &gt;= 2) {                                                                           </span>
<span class="2816670308386131226" onmouseenter="enter('2816670308386131226');" onmouseout="out('2816670308386131226');" style=""> 603                 return screen - 2;                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 604             } else {                                                                                     </span>
<span class="8757070544646185316" onmouseenter="enter('8757070544646185316');" onmouseout="out('8757070544646185316');" style=""> 605                 return screen + 3;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607         }                                                                                                </span>
<span  style=""> 608                                                                                                          </span>
<span class="5501735402686311021" onmouseenter="enter('5501735402686311021');" onmouseout="out('5501735402686311021');" style=""> 609         private boolean convertDatabase(SQLiteDatabase db, Uri uri,                                      </span>
<span class="1795795513015787778" onmouseenter="enter('1795795513015787778');" onmouseout="out('1795795513015787778');" style=""> 610                                         ContentValuesCallback cb, boolean deleteRows) {                  </span>
<span class="6817282747760268981" onmouseenter="enter('6817282747760268981');" onmouseout="out('6817282747760268981');" style=""> 611             if (LOGD) Log.d(TAG, &quot;converting database from an older format, but not onUpgrade&quot;);         </span>
<span class="-1589900657748744102" onmouseenter="enter('-1589900657748744102');" onmouseout="out('-1589900657748744102');" style=""> 612             boolean converted = false;                                                                   </span>
<span  style=""> 613                                                                                                          </span>
<span class="-1113390730047466962" onmouseenter="enter('-1113390730047466962');" onmouseout="out('-1113390730047466962');" style=""> 614             final ContentResolver resolver = mContext.getContentResolver();                              </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style=""> 615             Cursor cursor = null;                                                                        </span>
<span  style=""> 616                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 617             try {                                                                                        </span>
<span class="-4258104891436652364" onmouseenter="enter('-4258104891436652364');" onmouseout="out('-4258104891436652364');" style=""> 618                 cursor = resolver.query(uri, null, null, null, null);                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 619             } catch (Exception e) {                                                                      </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style=""> 620                 // Ignore                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621             }                                                                                            </span>
<span  style=""> 622                                                                                                          </span>
<span class="-8364191572061005786" onmouseenter="enter('-8364191572061005786');" onmouseout="out('-8364191572061005786');" style=""> 623             // We already have a favorites database in the old provider                                  </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 624             if (cursor != null) {                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 625                 try {                                                                                    </span>
<span class="5166436960045766511" onmouseenter="enter('5166436960045766511');" onmouseout="out('5166436960045766511');" style=""> 626                      if (cursor.getCount() &gt; 0) {                                                        </span>
<span class="-7893872194080327470" onmouseenter="enter('-7893872194080327470');" onmouseout="out('-7893872194080327470');" style=""> 627                         converted = copyFromCursor(db, cursor, cb) &gt; 0;                                  </span>
<span class="7409985313791550694" onmouseenter="enter('7409985313791550694');" onmouseout="out('7409985313791550694');" style=""> 628                         if (converted &amp;&amp; deleteRows) {                                                   </span>
<span class="6279659027428678438" onmouseenter="enter('6279659027428678438');" onmouseout="out('6279659027428678438');" style=""> 629                             resolver.delete(uri, null, null);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 632                 } finally {                                                                              </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 633                     cursor.close();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635             }                                                                                            </span>
<span  style=""> 636                                                                                                          </span>
<span class="3249503320511644327" onmouseenter="enter('3249503320511644327');" onmouseout="out('3249503320511644327');" style=""> 637             if (converted) {                                                                             </span>
<span class="8975525021270415398" onmouseenter="enter('8975525021270415398');" onmouseout="out('8975525021270415398');" style=""> 638                 // Convert widgets from this import into widgets                                         </span>
<span class="-370034293300666463" onmouseenter="enter('-370034293300666463');" onmouseout="out('-370034293300666463');" style=""> 639                 if (LOGD) Log.d(TAG, &quot;converted and now triggering widget upgrade&quot;);                     </span>
<span class="3525871662547532743" onmouseenter="enter('3525871662547532743');" onmouseout="out('3525871662547532743');" style=""> 640                 convertWidgets(db);                                                                      </span>
<span  style=""> 641                                                                                                          </span>
<span class="1061677975667452281" onmouseenter="enter('1061677975667452281');" onmouseout="out('1061677975667452281');" style=""> 642                 // Update max item id                                                                    </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style=""> 643                 mMaxItemId = initializeMaxItemId(db);                                                    </span>
<span class="-1050526381544019588" onmouseenter="enter('-1050526381544019588');" onmouseout="out('-1050526381544019588');" style=""> 644                 if (LOGD) Log.d(TAG, &quot;mMaxItemId: &quot; + mMaxItemId);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645             }                                                                                            </span>
<span  style=""> 646                                                                                                          </span>
<span class="2958977365344362767" onmouseenter="enter('2958977365344362767');" onmouseout="out('2958977365344362767');" style=""> 647             return converted;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648         }                                                                                                </span>
<span  style=""> 649                                                                                                          </span>
<span class="-3386136253719322573" onmouseenter="enter('-3386136253719322573');" onmouseout="out('-3386136253719322573');" style=""> 650         private int copyFromCursor(SQLiteDatabase db, Cursor c, ContentValuesCallback cb) {              </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style=""> 651             final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);                 </span>
<span class="-4033402896828551783" onmouseenter="enter('-4033402896828551783');" onmouseout="out('-4033402896828551783');" style=""> 652             final int intentIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.INTENT);          </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style=""> 653             final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);            </span>
<span class="2476259323357554799" onmouseenter="enter('2476259323357554799');" onmouseout="out('2476259323357554799');" style=""> 654             final int iconTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYPE);     </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style=""> 655             final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);              </span>
<span class="-8681284292868403609" onmouseenter="enter('-8681284292868403609');" onmouseout="out('-8681284292868403609');" style=""><abbr title=" 656             final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE);"> 656             final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE)🔵</abbr></span>
<span class="6748803854718242440" onmouseenter="enter('6748803854718242440');" onmouseout="out('6748803854718242440');" style=""><abbr title=" 657             final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURCE);"> 657             final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURC🔵</abbr></span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 658             final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);    </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 659             final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);     </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 660             final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);          </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 661             final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);            </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 662             final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);            </span>
<span class="2746356324732937511" onmouseenter="enter('2746356324732937511');" onmouseout="out('2746356324732937511');" style=""> 663             final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);                </span>
<span class="8214639294219269043" onmouseenter="enter('8214639294219269043');" onmouseout="out('8214639294219269043');" style=""><abbr title=" 664             final int displayModeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.DISPLAY_MODE);"> 664             final int displayModeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.DISPLAY_MODE)🔵</abbr></span>
<span  style=""> 665                                                                                                          </span>
<span class="-2734978488976240244" onmouseenter="enter('-2734978488976240244');" onmouseout="out('-2734978488976240244');" style=""> 666             ContentValues[] rows = new ContentValues[c.getCount()];                                      </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style=""> 667             int i = 0;                                                                                   </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 668             while (c.moveToNext()) {                                                                     </span>
<span class="-3805379390248188389" onmouseenter="enter('-3805379390248188389');" onmouseout="out('-3805379390248188389');" style=""> 669                 ContentValues values = new ContentValues(c.getColumnCount());                            </span>
<span class="-1480489324102651074" onmouseenter="enter('-1480489324102651074');" onmouseout="out('-1480489324102651074');" style=""> 670                 values.put(LauncherSettings.Favorites._ID, c.getLong(idIndex));                          </span>
<span class="3725422751515257721" onmouseenter="enter('3725422751515257721');" onmouseout="out('3725422751515257721');" style=""> 671                 values.put(LauncherSettings.Favorites.INTENT, c.getString(intentIndex));                 </span>
<span class="3080545696092648727" onmouseenter="enter('3080545696092648727');" onmouseout="out('3080545696092648727');" style=""> 672                 values.put(LauncherSettings.Favorites.TITLE, c.getString(titleIndex));                   </span>
<span class="1653532357893974847" onmouseenter="enter('1653532357893974847');" onmouseout="out('1653532357893974847');" style=""> 673                 values.put(LauncherSettings.Favorites.ICON_TYPE, c.getInt(iconTypeIndex));               </span>
<span class="3857475807367449049" onmouseenter="enter('3857475807367449049');" onmouseout="out('3857475807367449049');" style=""> 674                 values.put(LauncherSettings.Favorites.ICON, c.getBlob(iconIndex));                       </span>
<span class="2521879942012579785" onmouseenter="enter('2521879942012579785');" onmouseout="out('2521879942012579785');" style=""> 675                 values.put(LauncherSettings.Favorites.ICON_PACKAGE, c.getString(iconPackageIndex));      </span>
<span class="3969193111666484842" onmouseenter="enter('3969193111666484842');" onmouseout="out('3969193111666484842');" style=""> 676                 values.put(LauncherSettings.Favorites.ICON_RESOURCE, c.getString(iconResourceIndex));    </span>
<span class="8435695874431009640" onmouseenter="enter('8435695874431009640');" onmouseout="out('8435695874431009640');" style=""> 677                 values.put(LauncherSettings.Favorites.CONTAINER, c.getInt(containerIndex));              </span>
<span class="5147687850248676325" onmouseenter="enter('5147687850248676325');" onmouseout="out('5147687850248676325');" style=""> 678                 values.put(LauncherSettings.Favorites.ITEM_TYPE, c.getInt(itemTypeIndex));               </span>
<span class="2567875359902744917" onmouseenter="enter('2567875359902744917');" onmouseout="out('2567875359902744917');" style=""> 679                 values.put(LauncherSettings.Favorites.APPWIDGET_ID, -1);                                 </span>
<span class="3045531455657088519" onmouseenter="enter('3045531455657088519');" onmouseout="out('3045531455657088519');" style=""> 680                 values.put(LauncherSettings.Favorites.SCREEN, c.getInt(screenIndex));                    </span>
<span class="5472332219112284812" onmouseenter="enter('5472332219112284812');" onmouseout="out('5472332219112284812');" style=""> 681                 values.put(LauncherSettings.Favorites.CELLX, c.getInt(cellXIndex));                      </span>
<span class="6120035052521227484" onmouseenter="enter('6120035052521227484');" onmouseout="out('6120035052521227484');" style=""> 682                 values.put(LauncherSettings.Favorites.CELLY, c.getInt(cellYIndex));                      </span>
<span class="-3897523412202294315" onmouseenter="enter('-3897523412202294315');" onmouseout="out('-3897523412202294315');" style=""> 683                 values.put(LauncherSettings.Favorites.URI, c.getString(uriIndex));                       </span>
<span class="2498865833812696947" onmouseenter="enter('2498865833812696947');" onmouseout="out('2498865833812696947');" style=""> 684                 values.put(LauncherSettings.Favorites.DISPLAY_MODE, c.getInt(displayModeIndex));         </span>
<span class="-4245152200459321990" onmouseenter="enter('-4245152200459321990');" onmouseout="out('-4245152200459321990');" style=""> 685                 if (cb != null) {                                                                        </span>
<span class="4870668330614344154" onmouseenter="enter('4870668330614344154');" onmouseout="out('4870668330614344154');" style=""> 686                     cb.onRow(values);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 687                 }                                                                                        </span>
<span class="-995699744874558784" onmouseenter="enter('-995699744874558784');" onmouseout="out('-995699744874558784');" style=""> 688                 rows[i++] = values;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689             }                                                                                            </span>
<span  style=""> 690                                                                                                          </span>
<span class="-926962837754337949" onmouseenter="enter('-926962837754337949');" onmouseout="out('-926962837754337949');" style=""> 691             int total = 0;                                                                               </span>
<span class="81359043772452968" onmouseenter="enter('81359043772452968');" onmouseout="out('81359043772452968');" style=""> 692             if (i &gt; 0) {                                                                                 </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 693                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 694                 try {                                                                                    </span>
<span class="-7246991316390337770" onmouseenter="enter('-7246991316390337770');" onmouseout="out('-7246991316390337770');" style=""> 695                     int numValues = rows.length;                                                         </span>
<span class="5056751384864650727" onmouseenter="enter('5056751384864650727');" onmouseout="out('5056751384864650727');" style=""> 696                     for (i = 0; i &lt; numValues; i++) {                                                    </span>
<span class="-1571204467017813682" onmouseenter="enter('-1571204467017813682');" onmouseout="out('-1571204467017813682');" style=""> 697                         if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, rows[i]) &lt; 0) {            </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 698                             return 0;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 699                         } else {                                                                         </span>
<span class="-6740236498121811269" onmouseenter="enter('-6740236498121811269');" onmouseout="out('-6740236498121811269');" style=""> 700                             total++;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 702                     }                                                                                    </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 703                     db.setTransactionSuccessful();                                                       </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 704                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 705                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 706                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 707             }                                                                                            </span>
<span  style=""> 708                                                                                                          </span>
<span class="2697150586857397017" onmouseenter="enter('2697150586857397017');" onmouseout="out('2697150586857397017');" style=""> 709             return total;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710         }                                                                                                </span>
<span  style=""> 711                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 712         @Override                                                                                        </span>
<span class="-4655538025867202729" onmouseenter="enter('-4655538025867202729');" onmouseout="out('-4655538025867202729');" style=""> 713         public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {                       </span>
<span class="-3337256987478665120" onmouseenter="enter('-3337256987478665120');" onmouseout="out('-3337256987478665120');" style=""> 714             if (LOGD) Log.d(TAG, &quot;onUpgrade triggered: &quot; + oldVersion);                                  </span>
<span  style=""> 715                                                                                                          </span>
<span class="-8802630880728694567" onmouseenter="enter('-8802630880728694567');" onmouseout="out('-8802630880728694567');" style=""> 716             int version = oldVersion;                                                                    </span>
<span class="-5425159362257487314" onmouseenter="enter('-5425159362257487314');" onmouseout="out('-5425159362257487314');" style=""> 717             if (version &lt; 3) {                                                                           </span>
<span class="-2417274034218376965" onmouseenter="enter('-2417274034218376965');" onmouseout="out('-2417274034218376965');" style=""> 718                 // upgrade 1,2 -&gt; 3 added appWidgetId column                                             </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 719                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 720                 try {                                                                                    </span>
<span class="4546757928378359668" onmouseenter="enter('4546757928378359668');" onmouseout="out('4546757928378359668');" style=""> 721                     // Insert new column for holding appWidgetIds                                        </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style=""> 722                     db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                </span>
<span class="6961844796110862285" onmouseenter="enter('6961844796110862285');" onmouseout="out('6961844796110862285');" style=""> 723                         &quot;ADD COLUMN appWidgetId INTEGER NOT NULL DEFAULT -1;&quot;);                          </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 724                     db.setTransactionSuccessful();                                                       </span>
<span class="-6619390710608343599" onmouseenter="enter('-6619390710608343599');" onmouseout="out('-6619390710608343599');" style=""> 725                     version = 3;                                                                         </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 726                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 727                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 728                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 729                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 730                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731                 }                                                                                        </span>
<span  style=""> 732                                                                                                          </span>
<span class="1631695491108164926" onmouseenter="enter('1631695491108164926');" onmouseout="out('1631695491108164926');" style=""> 733                 // Convert existing widgets only if table upgrade was successful                         </span>
<span class="-7093961016817560639" onmouseenter="enter('-7093961016817560639');" onmouseout="out('-7093961016817560639');" style=""> 734                 if (version == 3) {                                                                      </span>
<span class="3525871662547532743" onmouseenter="enter('3525871662547532743');" onmouseout="out('3525871662547532743');" style=""> 735                     convertWidgets(db);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 736                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 737             }                                                                                            </span>
<span  style=""> 738                                                                                                          </span>
<span class="7123741489573350525" onmouseenter="enter('7123741489573350525');" onmouseout="out('7123741489573350525');" style=""> 739             if (version &lt; 4) {                                                                           </span>
<span class="-1292745360473422768" onmouseenter="enter('-1292745360473422768');" onmouseout="out('-1292745360473422768');" style=""> 740                 version = 4;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741             }                                                                                            </span>
<span  style=""> 742                                                                                                          </span>
<span class="6482639089576313913" onmouseenter="enter('6482639089576313913');" onmouseout="out('6482639089576313913');" style=""> 743             // Where&#x27;s version 5?                                                                        </span>
<span class="7401379391869430937" onmouseenter="enter('7401379391869430937');" onmouseout="out('7401379391869430937');" style=""> 744             // - Donut and sholes on 2.0 shipped with version 4 of launcher1.                            </span>
<span class="4550024416175236584" onmouseenter="enter('4550024416175236584');" onmouseout="out('4550024416175236584');" style=""> 745             // - Passion shipped on 2.1 with version 6 of launcher3                                      </span>
<span class="4643679491884513187" onmouseenter="enter('4643679491884513187');" onmouseout="out('4643679491884513187');" style=""> 746             // - Sholes shipped on 2.1r1 (aka Mr. 3) with version 5 of launcher 1                        </span>
<span class="2361571311120014026" onmouseenter="enter('2361571311120014026');" onmouseout="out('2361571311120014026');" style=""> 747             //   but version 5 on there was the updateContactsShortcuts change                           </span>
<span class="916676184009822657" onmouseenter="enter('916676184009822657');" onmouseout="out('916676184009822657');" style=""> 748             //   which was version 6 in launcher 2 (first shipped on passion 2.1r1).                     </span>
<span class="6967404598887501241" onmouseenter="enter('6967404598887501241');" onmouseout="out('6967404598887501241');" style=""> 749             // The updateContactsShortcuts change is idempotent, so running it twice                     </span>
<span class="-4148752693610229392" onmouseenter="enter('-4148752693610229392');" onmouseout="out('-4148752693610229392');" style=""> 750             // is okay so we&#x27;ll do that when upgrading the devices that shipped with it.                 </span>
<span class="1172017862291778682" onmouseenter="enter('1172017862291778682');" onmouseout="out('1172017862291778682');" style=""> 751             if (version &lt; 6) {                                                                           </span>
<span class="-4714606279470185999" onmouseenter="enter('-4714606279470185999');" onmouseout="out('-4714606279470185999');" style=""> 752                 // We went from 3 to 5 screens. Move everything 1 to the right                           </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 753                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 754                 try {                                                                                    </span>
<span class="-2465047726863656951" onmouseenter="enter('-2465047726863656951');" onmouseout="out('-2465047726863656951');" style=""> 755                     db.execSQL(&quot;UPDATE favorites SET screen=(screen + 1);&quot;);                             </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 756                     db.setTransactionSuccessful();                                                       </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 757                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 758                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 759                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 760                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 761                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762                 }                                                                                        </span>
<span  style=""> 763                                                                                                          </span>
<span class="3359107920988636953" onmouseenter="enter('3359107920988636953');" onmouseout="out('3359107920988636953');" style=""> 764                // We added the fast track.                                                               </span>
<span class="6879465795009519434" onmouseenter="enter('6879465795009519434');" onmouseout="out('6879465795009519434');" style=""> 765                 if (updateContactsShortcuts(db)) {                                                       </span>
<span class="-3149591875898901499" onmouseenter="enter('-3149591875898901499');" onmouseout="out('-3149591875898901499');" style=""> 766                     version = 6;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768             }                                                                                            </span>
<span  style=""> 769                                                                                                          </span>
<span class="-4096035694772114683" onmouseenter="enter('-4096035694772114683');" onmouseout="out('-4096035694772114683');" style=""> 770             if (version &lt; 7) {                                                                           </span>
<span class="-8891998191995357912" onmouseenter="enter('-8891998191995357912');" onmouseout="out('-8891998191995357912');" style=""> 771                 // Version 7 gets rid of the special search widget.                                      </span>
<span class="3525871662547532743" onmouseenter="enter('3525871662547532743');" onmouseout="out('3525871662547532743');" style=""> 772                 convertWidgets(db);                                                                      </span>
<span class="-6951664793801221802" onmouseenter="enter('-6951664793801221802');" onmouseout="out('-6951664793801221802');" style=""> 773                 version = 7;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774             }                                                                                            </span>
<span  style=""> 775                                                                                                          </span>
<span class="-1248251879101833475" onmouseenter="enter('-1248251879101833475');" onmouseout="out('-1248251879101833475');" style=""> 776             if (version &lt; 8) {                                                                           </span>
<span class="1879618913628591947" onmouseenter="enter('1879618913628591947');" onmouseout="out('1879618913628591947');" style=""> 777                 // Version 8 (froyo) has the icons all normalized.  This should                          </span>
<span class="1410277882483187159" onmouseenter="enter('1410277882483187159');" onmouseout="out('1410277882483187159');" style=""> 778                 // already be the case in practice, but we now rely on it and don&#x27;t                      </span>
<span class="-3319181677834820205" onmouseenter="enter('-3319181677834820205');" onmouseout="out('-3319181677834820205');" style=""> 779                 // resample the images each time.                                                        </span>
<span class="7216681148101386433" onmouseenter="enter('7216681148101386433');" onmouseout="out('7216681148101386433');" style=""> 780                 normalizeIcons(db);                                                                      </span>
<span class="6147903305187288829" onmouseenter="enter('6147903305187288829');" onmouseout="out('6147903305187288829');" style=""> 781                 version = 8;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782             }                                                                                            </span>
<span  style=""> 783                                                                                                          </span>
<span class="6768331519074392653" onmouseenter="enter('6768331519074392653');" onmouseout="out('6768331519074392653');" style=""> 784             if (version &lt; 9) {                                                                           </span>
<span class="8243563970233142625" onmouseenter="enter('8243563970233142625');" onmouseout="out('8243563970233142625');" style=""> 785                 // The max id is not yet set at this point (onUpgrade is triggered in the ctor           </span>
<span class="-4187395928482309064" onmouseenter="enter('-4187395928482309064');" onmouseout="out('-4187395928482309064');" style=""> 786                 // before it gets a change to get set, so we need to read it here when we use it)        </span>
<span class="-8239698715373110075" onmouseenter="enter('-8239698715373110075');" onmouseout="out('-8239698715373110075');" style=""> 787                 if (mMaxItemId == -1) {                                                                  </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style=""> 788                     mMaxItemId = initializeMaxItemId(db);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 789                 }                                                                                        </span>
<span  style=""> 790                                                                                                          </span>
<span class="-4554457343861029044" onmouseenter="enter('-4554457343861029044');" onmouseout="out('-4554457343861029044');" style=""> 791                 // Add default hotseat icons                                                             </span>
<span class="-3856450728240565780" onmouseenter="enter('-3856450728240565780');" onmouseout="out('-3856450728240565780');" style=""> 792                 loadFavorites(db, new SimpleWorkspaceLoader(this, mContext.getResources(),               </span>
<span class="6976293370975867955" onmouseenter="enter('6976293370975867955');" onmouseout="out('6976293370975867955');" style=""> 793                         R.xml.update_workspace));                                                        </span>
<span class="-594084224270713246" onmouseenter="enter('-594084224270713246');" onmouseout="out('-594084224270713246');" style=""> 794                 version = 9;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 795             }                                                                                            </span>
<span  style=""> 796                                                                                                          </span>
<span class="-7982941174706227991" onmouseenter="enter('-7982941174706227991');" onmouseout="out('-7982941174706227991');" style=""> 797             // We bumped the version three time during JB, once to update the launch flags, once to      </span>
<span class="7433541256107994824" onmouseenter="enter('7433541256107994824');" onmouseout="out('7433541256107994824');" style=""> 798             // update the override for the default launch animation and once to set the mimetype         </span>
<span class="4208501542736368890" onmouseenter="enter('4208501542736368890');" onmouseout="out('4208501542736368890');" style=""> 799             // to improve startup performance                                                            </span>
<span class="3825613730133245417" onmouseenter="enter('3825613730133245417');" onmouseout="out('3825613730133245417');" style=""> 800             if (version &lt; 12) {                                                                          </span>
<span class="5911633270557452673" onmouseenter="enter('5911633270557452673');" onmouseout="out('5911633270557452673');" style=""> 801                 // Contact shortcuts need a different set of flags to be launched now                    </span>
<span class="-5428628100729683964" onmouseenter="enter('-5428628100729683964');" onmouseout="out('-5428628100729683964');" style=""> 802                 // The updateContactsShortcuts change is idempotent, so we can keep using it like        </span>
<span class="-2960298673245938215" onmouseenter="enter('-2960298673245938215');" onmouseout="out('-2960298673245938215');" style=""> 803                 // back in the Donut days                                                                </span>
<span class="1461529009488007413" onmouseenter="enter('1461529009488007413');" onmouseout="out('1461529009488007413');" style=""> 804                 updateContactsShortcuts(db);                                                             </span>
<span class="-7011217505799596620" onmouseenter="enter('-7011217505799596620');" onmouseout="out('-7011217505799596620');" style=""> 805                 version = 12;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806             }                                                                                            </span>
<span  style=""> 807                                                                                                          </span>
<span class="-1127321954793168309" onmouseenter="enter('-1127321954793168309');" onmouseout="out('-1127321954793168309');" style=""> 808             if (version &lt; 13) {                                                                          </span>
<span class="6699748190088794301" onmouseenter="enter('6699748190088794301');" onmouseout="out('6699748190088794301');" style=""> 809                 // With the new shrink-wrapped and re-orderable workspaces, it makes sense               </span>
<span class="4525637906322106897" onmouseenter="enter('4525637906322106897');" onmouseout="out('4525637906322106897');" style=""> 810                 // to persist workspace screens and their relative order.                                </span>
<span class="-1030858145638239039" onmouseenter="enter('-1030858145638239039');" onmouseout="out('-1030858145638239039');" style=""> 811                 mMaxScreenId = 0;                                                                        </span>
<span  style=""> 812                                                                                                          </span>
<span class="8374575243144004387" onmouseenter="enter('8374575243144004387');" onmouseout="out('8374575243144004387');" style=""> 813                 // This will never happen in the wild, but when we switch to using workspace             </span>
<span class="3035044480614384952" onmouseenter="enter('3035044480614384952');" onmouseout="out('3035044480614384952');" style=""> 814                 // screen ids, redo the import from old launcher.                                        </span>
<span class="-2687113980558593499" onmouseenter="enter('-2687113980558593499');" onmouseout="out('-2687113980558593499');" style=""> 815                 sJustLoadedFromOldDb = true;                                                             </span>
<span  style=""> 816                                                                                                          </span>
<span class="4995577433356427338" onmouseenter="enter('4995577433356427338');" onmouseout="out('4995577433356427338');" style=""> 817                 addWorkspacesTable(db);                                                                  </span>
<span class="-1031230936357450444" onmouseenter="enter('-1031230936357450444');" onmouseout="out('-1031230936357450444');" style=""> 818                 version = 13;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819             }                                                                                            </span>
<span  style=""> 820                                                                                                          </span>
<span class="-3790290227926597654" onmouseenter="enter('-3790290227926597654');" onmouseout="out('-3790290227926597654');" style=""> 821             if (version &lt; 14) {                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 822                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 823                 try {                                                                                    </span>
<span class="-3399391435431896428" onmouseenter="enter('-3399391435431896428');" onmouseout="out('-3399391435431896428');" style=""> 824                     // Insert new column for holding widget provider name                                </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style=""> 825                     db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                </span>
<span class="-1191376551368325446" onmouseenter="enter('-1191376551368325446');" onmouseout="out('-1191376551368325446');" style=""> 826                             &quot;ADD COLUMN appWidgetProvider TEXT;&quot;);                                       </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 827                     db.setTransactionSuccessful();                                                       </span>
<span class="-6853964272080073312" onmouseenter="enter('-6853964272080073312');" onmouseout="out('-6853964272080073312');" style=""> 828                     version = 14;                                                                        </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 829                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 830                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 831                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 832                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 833                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 834                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 835             }                                                                                            </span>
<span  style=""> 836                                                                                                          </span>
<span class="4742571203445114157" onmouseenter="enter('4742571203445114157');" onmouseout="out('4742571203445114157');" style=""> 837             if (version &lt; 15) {                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 838                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 839                 try {                                                                                    </span>
<span class="4980089996717210691" onmouseenter="enter('4980089996717210691');" onmouseout="out('4980089996717210691');" style=""> 840                     // Insert new column for holding update timestamp                                    </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style=""> 841                     db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                </span>
<span class="-6587870365196648620" onmouseenter="enter('-6587870365196648620');" onmouseout="out('-6587870365196648620');" style=""> 842                             &quot;ADD COLUMN modified INTEGER NOT NULL DEFAULT 0;&quot;);                          </span>
<span class="-134194254938928149" onmouseenter="enter('-134194254938928149');" onmouseout="out('-134194254938928149');" style=""> 843                     db.execSQL(&quot;ALTER TABLE workspaceScreens &quot; +                                         </span>
<span class="-6587870365196648620" onmouseenter="enter('-6587870365196648620');" onmouseout="out('-6587870365196648620');" style=""> 844                             &quot;ADD COLUMN modified INTEGER NOT NULL DEFAULT 0;&quot;);                          </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 845                     db.setTransactionSuccessful();                                                       </span>
<span class="8988210671545584151" onmouseenter="enter('8988210671545584151');" onmouseout="out('8988210671545584151');" style=""> 846                     version = 15;                                                                        </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 847                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 848                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 849                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 850                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 851                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 853             }                                                                                            </span>
<span  style=""> 854                                                                                                          </span>
<span  style=""> 855                                                                                                          </span>
<span class="1076365416612257192" onmouseenter="enter('1076365416612257192');" onmouseout="out('1076365416612257192');" style=""> 856             if (version &lt; 16) {                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 857                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 858                 try {                                                                                    </span>
<span class="4715697150589634772" onmouseenter="enter('4715697150589634772');" onmouseout="out('4715697150589634772');" style=""> 859                     // Insert new column for holding restore status                                      </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style=""> 860                     db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                </span>
<span class="1880054724854477963" onmouseenter="enter('1880054724854477963');" onmouseout="out('1880054724854477963');" style=""> 861                             &quot;ADD COLUMN restored INTEGER NOT NULL DEFAULT 0;&quot;);                          </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 862                     db.setTransactionSuccessful();                                                       </span>
<span class="2013829968714493382" onmouseenter="enter('2013829968714493382');" onmouseout="out('2013829968714493382');" style=""> 863                     version = 16;                                                                        </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 864                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 865                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 866                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 867                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 868                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870             }                                                                                            </span>
<span  style=""> 871                                                                                                          </span>
<span class="-6756468306354214848" onmouseenter="enter('-6756468306354214848');" onmouseout="out('-6756468306354214848');" style=""> 872             if (version &lt; 17) {                                                                          </span>
<span class="-8925898828002148199" onmouseenter="enter('-8925898828002148199');" onmouseout="out('-8925898828002148199');" style=""> 873                 // We use the db version upgrade here to identify users who may not have seen            </span>
<span class="2421121084363663195" onmouseenter="enter('2421121084363663195');" onmouseout="out('2421121084363663195');" style=""> 874                 // clings yet (because they weren&#x27;t available), but for whom the clings are now          </span>
<span class="-3819212007201998918" onmouseenter="enter('-3819212007201998918');" onmouseout="out('-3819212007201998918');" style=""> 875                 // available (tablet users). Because one of the possible cling flows (migration)         </span>
<span class="-6235100359092849352" onmouseenter="enter('-6235100359092849352');" onmouseout="out('-6235100359092849352');" style=""> 876                 // is very destructive (wipes out workspaces), we want to prevent this from showing      </span>
<span class="-2001927373741844508" onmouseenter="enter('-2001927373741844508');" onmouseout="out('-2001927373741844508');" style=""> 877                 // until clear data. We do so by marking that the clings have been shown.                </span>
<span class="9168128908795605867" onmouseenter="enter('9168128908795605867');" onmouseout="out('9168128908795605867');" style=""> 878                 LauncherClings.synchonouslyMarkFirstRunClingDismissed(mContext);                         </span>
<span class="-3652383409155171451" onmouseenter="enter('-3652383409155171451');" onmouseout="out('-3652383409155171451');" style=""> 879                 version = 17;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880             }                                                                                            </span>
<span  style=""> 881                                                                                                          </span>
<span class="7817650129783202172" onmouseenter="enter('7817650129783202172');" onmouseout="out('7817650129783202172');" style=""> 882             if (version &lt; 18) {                                                                          </span>
<span class="-5748373616457914051" onmouseenter="enter('-5748373616457914051');" onmouseout="out('-5748373616457914051');" style=""> 883                 // No-op                                                                                 </span>
<span class="-862393984298106042" onmouseenter="enter('-862393984298106042');" onmouseout="out('-862393984298106042');" style=""> 884                 version = 18;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 885             }                                                                                            </span>
<span  style=""> 886                                                                                                          </span>
<span class="-3427379715691059477" onmouseenter="enter('-3427379715691059477');" onmouseout="out('-3427379715691059477');" style=""> 887             if (version &lt; 19) {                                                                          </span>
<span class="4571181047088430074" onmouseenter="enter('4571181047088430074');" onmouseout="out('4571181047088430074');" style=""> 888                 // Due to a data loss bug, some users may have items associated with screen ids          </span>
<span class="5190859357842058169" onmouseenter="enter('5190859357842058169');" onmouseout="out('5190859357842058169');" style=""> 889                 // which no longer exist. Since this can cause other problems, and since the user        </span>
<span class="-6625319271568400514" onmouseenter="enter('-6625319271568400514');" onmouseout="out('-6625319271568400514');" style=""> 890                 // will never see these items anyway, we use database upgrade as an opportunity to       </span>
<span class="2555207824693971320" onmouseenter="enter('2555207824693971320');" onmouseout="out('2555207824693971320');" style=""> 891                 // clean things up.                                                                      </span>
<span class="6001089319165901827" onmouseenter="enter('6001089319165901827');" onmouseout="out('6001089319165901827');" style=""> 892                 removeOrphanedItems(db);                                                                 </span>
<span class="-8622797196606405802" onmouseenter="enter('-8622797196606405802');" onmouseout="out('-8622797196606405802');" style=""> 893                 version = 19;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 894             }                                                                                            </span>
<span  style=""> 895                                                                                                          </span>
<span class="7499725911390962675" onmouseenter="enter('7499725911390962675');" onmouseout="out('7499725911390962675');" style=""> 896             if (version &lt; 20) {                                                                          </span>
<span class="7544427300199377589" onmouseenter="enter('7544427300199377589');" onmouseout="out('7544427300199377589');" style=""> 897                 // Add userId column                                                                     </span>
<span class="3648122535018422218" onmouseenter="enter('3648122535018422218');" onmouseout="out('3648122535018422218');" style=""> 898                 if (addProfileColumn(db)) {                                                              </span>
<span class="-3196204954256045340" onmouseenter="enter('-3196204954256045340');" onmouseout="out('-3196204954256045340');" style=""> 899                     version = 20;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900                 }                                                                                        </span>
<span class="-7922924049235754756" onmouseenter="enter('-7922924049235754756');" onmouseout="out('-7922924049235754756');" style=""> 901                 // else old version remains, which means we wipe old data                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902             }                                                                                            </span>
<span  style=""> 903                                                                                                          </span>
<span class="114284109908766623" onmouseenter="enter('114284109908766623');" onmouseout="out('114284109908766623');" style=""> 904             if (version != DATABASE_VERSION) {                                                           </span>
<span class="-7581134992168079572" onmouseenter="enter('-7581134992168079572');" onmouseout="out('-7581134992168079572');" style=""> 905                 Log.w(TAG, &quot;Destroying all old data.&quot;);                                                  </span>
<span class="-5910745818286558462" onmouseenter="enter('-5910745818286558462');" onmouseout="out('-5910745818286558462');" style=""> 906                 db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_FAVORITES);                                   </span>
<span class="-5689649720940552120" onmouseenter="enter('-5689649720940552120');" onmouseout="out('-5689649720940552120');" style=""> 907                 db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_WORKSPACE_SCREENS);                           </span>
<span  style=""> 908                                                                                                          </span>
<span class="1466158746107327510" onmouseenter="enter('1466158746107327510');" onmouseout="out('1466158746107327510');" style=""> 909                 onCreate(db);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 911         }                                                                                                </span>
<span  style=""> 912                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 913         @Override                                                                                        </span>
<span class="-4280970083266341851" onmouseenter="enter('-4280970083266341851');" onmouseout="out('-4280970083266341851');" style=""> 914         public void onDowngrade(SQLiteDatabase db, int oldVersion, int newVersion) {                     </span>
<span class="60635965215078249" onmouseenter="enter('60635965215078249');" onmouseout="out('60635965215078249');" style=""> 915             // This shouldn&#x27;t happen -- throw our hands up in the air and start over.                    </span>
<span class="5860333668228362795" onmouseenter="enter('5860333668228362795');" onmouseout="out('5860333668228362795');" style=""> 916             Log.w(TAG, &quot;Database version downgrade from: &quot; + oldVersion + &quot; to &quot; + newVersion +          </span>
<span class="-495411336639494791" onmouseenter="enter('-495411336639494791');" onmouseout="out('-495411336639494791');" style=""> 917                     &quot;. Wiping databse.&quot;);                                                                </span>
<span class="8331352315618770000" onmouseenter="enter('8331352315618770000');" onmouseout="out('8331352315618770000');" style=""> 918             createEmptyDB(db);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 919         }                                                                                                </span>
<span  style=""> 920                                                                                                          </span>
<span  style=""> 921                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 922         /**                                                                                              </span>
<span class="-3404890512310195543" onmouseenter="enter('-3404890512310195543');" onmouseout="out('-3404890512310195543');" style=""> 923          * Clears all the data for a fresh start.                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 924          */                                                                                              </span>
<span class="3436200006891248330" onmouseenter="enter('3436200006891248330');" onmouseout="out('3436200006891248330');" style=""> 925         public void createEmptyDB(SQLiteDatabase db) {                                                   </span>
<span class="-5910745818286558462" onmouseenter="enter('-5910745818286558462');" onmouseout="out('-5910745818286558462');" style=""> 926             db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_FAVORITES);                                       </span>
<span class="-5689649720940552120" onmouseenter="enter('-5689649720940552120');" onmouseout="out('-5689649720940552120');" style=""> 927             db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_WORKSPACE_SCREENS);                               </span>
<span class="1466158746107327510" onmouseenter="enter('1466158746107327510');" onmouseout="out('1466158746107327510');" style=""> 928             onCreate(db);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 929         }                                                                                                </span>
<span  style=""> 930                                                                                                          </span>
<span class="-4559468305095454841" onmouseenter="enter('-4559468305095454841');" onmouseout="out('-4559468305095454841');" style=""> 931         private boolean addProfileColumn(SQLiteDatabase db) {                                            </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 932             db.beginTransaction();                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 933             try {                                                                                        </span>
<span class="8272328117098122260" onmouseenter="enter('8272328117098122260');" onmouseout="out('8272328117098122260');" style=""> 934                 UserManagerCompat userManager = UserManagerCompat.getInstance(mContext);                 </span>
<span class="4088992161441330589" onmouseenter="enter('4088992161441330589');" onmouseout="out('4088992161441330589');" style=""> 935                 // Default to the serial number of this user, for older                                  </span>
<span class="3257211239898691615" onmouseenter="enter('3257211239898691615');" onmouseout="out('3257211239898691615');" style=""> 936                 // shortcuts.                                                                            </span>
<span class="1087451883287607054" onmouseenter="enter('1087451883287607054');" onmouseout="out('1087451883287607054');" style=""> 937                 long userSerialNumber = userManager.getSerialNumberForUser(                              </span>
<span class="334342413311659427" onmouseenter="enter('334342413311659427');" onmouseout="out('334342413311659427');" style=""> 938                         UserHandleCompat.myUserHandle());                                                </span>
<span class="-7537890297935646580" onmouseenter="enter('-7537890297935646580');" onmouseout="out('-7537890297935646580');" style=""> 939                 // Insert new column for holding user serial number                                      </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style=""> 940                 db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                    </span>
<span class="6389325795698900878" onmouseenter="enter('6389325795698900878');" onmouseout="out('6389325795698900878');" style=""> 941                         &quot;ADD COLUMN profileId INTEGER DEFAULT &quot;                                          </span>
<span class="-6027465318491077769" onmouseenter="enter('-6027465318491077769');" onmouseout="out('-6027465318491077769');" style=""> 942                                         + userSerialNumber + &quot;;&quot;);                                       </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 943                 db.setTransactionSuccessful();                                                           </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 944             } catch (SQLException ex) {                                                                  </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 945                 // Old version remains, which means we wipe old data                                     </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 946                 Log.e(TAG, ex.getMessage(), ex);                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 947                 return false;                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 948             } finally {                                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 949                 db.endTransaction();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 950             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 951             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952         }                                                                                                </span>
<span  style=""> 953                                                                                                          </span>
<span class="5499500447724615611" onmouseenter="enter('5499500447724615611');" onmouseout="out('5499500447724615611');" style=""> 954         private boolean updateContactsShortcuts(SQLiteDatabase db) {                                     </span>
<span class="-5246681680504373128" onmouseenter="enter('-5246681680504373128');" onmouseout="out('-5246681680504373128');" style=""> 955             final String selectWhere = buildOrWhereString(Favorites.ITEM_TYPE,                           </span>
<span class="663694814520566372" onmouseenter="enter('663694814520566372');" onmouseout="out('663694814520566372');" style=""> 956                     new int[] { Favorites.ITEM_TYPE_SHORTCUT });                                         </span>
<span  style=""> 957                                                                                                          </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style=""> 958             Cursor c = null;                                                                             </span>
<span class="4160534408674485909" onmouseenter="enter('4160534408674485909');" onmouseout="out('4160534408674485909');" style=""> 959             final String actionQuickContact = &quot;com.android.contacts.action.QUICK_CONTACT&quot;;               </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 960             db.beginTransaction();                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 961             try {                                                                                        </span>
<span class="9180803436248323281" onmouseenter="enter('9180803436248323281');" onmouseout="out('9180803436248323281');" style=""> 962                 // Select and iterate through each matching widget                                       </span>
<span class="4665304866696389373" onmouseenter="enter('4665304866696389373');" onmouseout="out('4665304866696389373');" style=""> 963                 c = db.query(TABLE_FAVORITES,                                                            </span>
<span class="4805400763366238176" onmouseenter="enter('4805400763366238176');" onmouseout="out('4805400763366238176');" style=""> 964                         new String[] { Favorites._ID, Favorites.INTENT },                                </span>
<span class="523753735101753681" onmouseenter="enter('523753735101753681');" onmouseout="out('523753735101753681');" style=""> 965                         selectWhere, null, null, null, null);                                            </span>
<span class="1775362941851830832" onmouseenter="enter('1775362941851830832');" onmouseout="out('1775362941851830832');" style=""> 966                 if (c == null) return false;                                                             </span>
<span  style=""> 967                                                                                                          </span>
<span class="5404371667899517548" onmouseenter="enter('5404371667899517548');" onmouseout="out('5404371667899517548');" style=""> 968                 if (LOGD) Log.d(TAG, &quot;found upgrade cursor count=&quot; + c.getCount());                      </span>
<span  style=""> 969                                                                                                          </span>
<span class="-8932698383566096473" onmouseenter="enter('-8932698383566096473');" onmouseout="out('-8932698383566096473');" style=""> 970                 final int idIndex = c.getColumnIndex(Favorites._ID);                                     </span>
<span class="-7954812698804343751" onmouseenter="enter('-7954812698804343751');" onmouseout="out('-7954812698804343751');" style=""> 971                 final int intentIndex = c.getColumnIndex(Favorites.INTENT);                              </span>
<span  style=""> 972                                                                                                          </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 973                 while (c.moveToNext()) {                                                                 </span>
<span class="6875941046716392375" onmouseenter="enter('6875941046716392375');" onmouseout="out('6875941046716392375');" style=""> 974                     long favoriteId = c.getLong(idIndex);                                                </span>
<span class="3433703641134815896" onmouseenter="enter('3433703641134815896');" onmouseout="out('3433703641134815896');" style=""> 975                     final String intentUri = c.getString(intentIndex);                                   </span>
<span class="6989258921658153377" onmouseenter="enter('6989258921658153377');" onmouseout="out('6989258921658153377');" style=""> 976                     if (intentUri != null) {                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 977                         try {                                                                            </span>
<span class="3224994041104735669" onmouseenter="enter('3224994041104735669');" onmouseout="out('3224994041104735669');" style=""> 978                             final Intent intent = Intent.parseUri(intentUri, 0);                         </span>
<span class="5533062021406091698" onmouseenter="enter('5533062021406091698');" onmouseout="out('5533062021406091698');" style=""> 979                             android.util.Log.d(&quot;Home&quot;, intent.toString());                               </span>
<span class="4116887484198527532" onmouseenter="enter('4116887484198527532');" onmouseout="out('4116887484198527532');" style=""> 980                             final Uri uri = intent.getData();                                            </span>
<span class="-6789028041247471756" onmouseenter="enter('-6789028041247471756');" onmouseout="out('-6789028041247471756');" style=""> 981                             if (uri != null) {                                                           </span>
<span class="-4564881707745344748" onmouseenter="enter('-4564881707745344748');" onmouseout="out('-4564881707745344748');" style=""> 982                                 final String data = uri.toString();                                      </span>
<span class="-3445805239696980037" onmouseenter="enter('-3445805239696980037');" onmouseout="out('-3445805239696980037');" style=""> 983                                 if ((Intent.ACTION_VIEW.equals(intent.getAction()) ||                    </span>
<span class="7710869890592179741" onmouseenter="enter('7710869890592179741');" onmouseout="out('7710869890592179741');" style=""> 984                                         actionQuickContact.equals(intent.getAction())) &amp;&amp;                </span>
<span class="1393218364054108713" onmouseenter="enter('1393218364054108713');" onmouseout="out('1393218364054108713');" style=""> 985                                         (data.startsWith(&quot;content://contacts/people/&quot;) ||                </span>
<span class="3162645299085480663" onmouseenter="enter('3162645299085480663');" onmouseout="out('3162645299085480663');" style=""> 986                                         data.startsWith(&quot;content://com.android.contacts/&quot; +              </span>
<span class="1650514809492671891" onmouseenter="enter('1650514809492671891');" onmouseout="out('1650514809492671891');" style=""> 987                                                 &quot;contacts/lookup/&quot;))) {                                  </span>
<span  style=""> 988                                                                                                          </span>
<span class="-5469073692284735657" onmouseenter="enter('-5469073692284735657');" onmouseout="out('-5469073692284735657');" style=""> 989                                     final Intent newIntent = new Intent(actionQuickContact);             </span>
<span class="-5357614275754596903" onmouseenter="enter('-5357614275754596903');" onmouseout="out('-5357614275754596903');" style=""> 990                                     // When starting from the launcher, start in a new, cleared task     </span>
<span class="1092229780699807802" onmouseenter="enter('1092229780699807802');" onmouseout="out('1092229780699807802');" style=""> 991                                     // CLEAR_WHEN_TASK_RESET cannot reset the root of a task, so we      </span>
<span class="7141574357287672100" onmouseenter="enter('7141574357287672100');" onmouseout="out('7141574357287672100');" style=""> 992                                     // clear the whole thing preemptively here since                     </span>
<span class="905959402729533596" onmouseenter="enter('905959402729533596');" onmouseout="out('905959402729533596');" style=""> 993                                     // QuickContactActivity will finish itself when launching other      </span>
<span class="5522675427683616835" onmouseenter="enter('5522675427683616835');" onmouseout="out('5522675427683616835');" style=""> 994                                     // detail activities.                                                </span>
<span class="-6190018245568891923" onmouseenter="enter('-6190018245568891923');" onmouseout="out('-6190018245568891923');" style=""> 995                                     newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK |                   </span>
<span class="-3783234242978371980" onmouseenter="enter('-3783234242978371980');" onmouseout="out('-3783234242978371980');" style=""> 996                                             Intent.FLAG_ACTIVITY_CLEAR_TASK);                            </span>
<span class="1401110889443382842" onmouseenter="enter('1401110889443382842');" onmouseout="out('1401110889443382842');" style=""> 997                                     newIntent.putExtra(                                                  </span>
<span class="-732821300906687093" onmouseenter="enter('-732821300906687093');" onmouseout="out('-732821300906687093');" style=""> 998                                             Launcher.INTENT_EXTRA_IGNORE_LAUNCH_ANIMATION, true);        </span>
<span class="8197006267053771341" onmouseenter="enter('8197006267053771341');" onmouseout="out('8197006267053771341');" style=""> 999                                     newIntent.setData(uri);                                              </span>
<span class="-4929716720656164338" onmouseenter="enter('-4929716720656164338');" onmouseout="out('-4929716720656164338');" style="">1000                                     // Determine the type and also put that in the shortcut              </span>
<span class="-3103165564621535069" onmouseenter="enter('-3103165564621535069');" onmouseout="out('-3103165564621535069');" style="">1001                                     // (that can speed up launch a bit)                                  </span>
<span class="-8187273376333901727" onmouseenter="enter('-8187273376333901727');" onmouseout="out('-8187273376333901727');" style="">1002                                     newIntent.setDataAndType(uri, newIntent.resolveType(mContext));      </span>
<span  style="">1003                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1004                                     final ContentValues values = new ContentValues();                    </span>
<span class="-1283328052029016277" onmouseenter="enter('-1283328052029016277');" onmouseout="out('-1283328052029016277');" style="">1005                                     values.put(LauncherSettings.Favorites.INTENT,                        </span>
<span class="7573125619952719253" onmouseenter="enter('7573125619952719253');" onmouseout="out('7573125619952719253');" style="">1006                                             newIntent.toUri(0));                                         </span>
<span  style="">1007                                                                                                          </span>
<span class="-7922633388955325898" onmouseenter="enter('-7922633388955325898');" onmouseout="out('-7922633388955325898');" style="">1008                                     String updateWhere = Favorites._ID + &quot;=&quot; + favoriteId;               </span>
<span class="6932880072735485862" onmouseenter="enter('6932880072735485862');" onmouseout="out('6932880072735485862');" style="">1009                                     db.update(TABLE_FAVORITES, values, updateWhere, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1010                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1011                             }                                                                            </span>
<span class="3255801419413274971" onmouseenter="enter('3255801419413274971');" onmouseout="out('3255801419413274971');" style="">1012                         } catch (RuntimeException ex) {                                                  </span>
<span class="-70893878647116908" onmouseenter="enter('-70893878647116908');" onmouseout="out('-70893878647116908');" style="">1013                             Log.e(TAG, &quot;Problem upgrading shortcut&quot;, ex);                                </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1014                         } catch (URISyntaxException e) {                                                 </span>
<span class="-2505277559722110760" onmouseenter="enter('-2505277559722110760');" onmouseout="out('-2505277559722110760');" style="">1015                             Log.e(TAG, &quot;Problem upgrading shortcut&quot;, e);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1016                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1017                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1018                 }                                                                                        </span>
<span  style="">1019                                                                                                          </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">1020                 db.setTransactionSuccessful();                                                           </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="">1021             } catch (SQLException ex) {                                                                  </span>
<span class="983414259163783750" onmouseenter="enter('983414259163783750');" onmouseout="out('983414259163783750');" style="">1022                 Log.w(TAG, &quot;Problem while upgrading contacts&quot;, ex);                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1023                 return false;                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1024             } finally {                                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">1025                 db.endTransaction();                                                                     </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1026                 if (c != null) {                                                                         </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1027                     c.close();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1028                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1029             }                                                                                            </span>
<span  style="">1030                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1031             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1032         }                                                                                                </span>
<span  style="">1033                                                                                                          </span>
<span class="-3532559559626407446" onmouseenter="enter('-3532559559626407446');" onmouseout="out('-3532559559626407446');" style="">1034         private void normalizeIcons(SQLiteDatabase db) {                                                 </span>
<span class="-7234787096538067088" onmouseenter="enter('-7234787096538067088');" onmouseout="out('-7234787096538067088');" style="">1035             Log.d(TAG, &quot;normalizing icons&quot;);                                                             </span>
<span  style="">1036                                                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">1037             db.beginTransaction();                                                                       </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="">1038             Cursor c = null;                                                                             </span>
<span class="-1648170941042077979" onmouseenter="enter('-1648170941042077979');" onmouseout="out('-1648170941042077979');" style="">1039             SQLiteStatement update = null;                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1040             try {                                                                                        </span>
<span class="6948794688019806881" onmouseenter="enter('6948794688019806881');" onmouseout="out('6948794688019806881');" style="">1041                 boolean logged = false;                                                                  </span>
<span class="-9148924222948643220" onmouseenter="enter('-9148924222948643220');" onmouseout="out('-9148924222948643220');" style="">1042                 update = db.compileStatement(&quot;UPDATE favorites &quot;                                         </span>
<span class="2242861074041662063" onmouseenter="enter('2242861074041662063');" onmouseout="out('2242861074041662063');" style="">1043                         + &quot;SET icon=? WHERE _id=?&quot;);                                                     </span>
<span  style="">1044                                                                                                          </span>
<span class="4784505011002524429" onmouseenter="enter('4784505011002524429');" onmouseout="out('4784505011002524429');" style="">1045                 c = db.rawQuery(&quot;SELECT _id, icon FROM favorites WHERE iconType=&quot; +                      </span>
<span class="-8247570245083797300" onmouseenter="enter('-8247570245083797300');" onmouseout="out('-8247570245083797300');" style="">1046                         Favorites.ICON_TYPE_BITMAP, null);                                               </span>
<span  style="">1047                                                                                                          </span>
<span class="-6790628464290794012" onmouseenter="enter('-6790628464290794012');" onmouseout="out('-6790628464290794012');" style="">1048                 final int idIndex = c.getColumnIndexOrThrow(Favorites._ID);                              </span>
<span class="-8328869542966343431" onmouseenter="enter('-8328869542966343431');" onmouseout="out('-8328869542966343431');" style="">1049                 final int iconIndex = c.getColumnIndexOrThrow(Favorites.ICON);                           </span>
<span  style="">1050                                                                                                          </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style="">1051                 while (c.moveToNext()) {                                                                 </span>
<span class="-8135609918244190533" onmouseenter="enter('-8135609918244190533');" onmouseout="out('-8135609918244190533');" style="">1052                     long id = c.getLong(idIndex);                                                        </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">1053                     byte[] data = c.getBlob(iconIndex);                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1054                     try {                                                                                </span>
<span class="1618116421659449587" onmouseenter="enter('1618116421659449587');" onmouseout="out('1618116421659449587');" style="">1055                         Bitmap bitmap = Utilities.resampleIconBitmap(                                    </span>
<span class="5250274324470409582" onmouseenter="enter('5250274324470409582');" onmouseout="out('5250274324470409582');" style="">1056                                 BitmapFactory.decodeByteArray(data, 0, data.length),                     </span>
<span class="2906315698704386153" onmouseenter="enter('2906315698704386153');" onmouseout="out('2906315698704386153');" style="">1057                                 mContext);                                                               </span>
<span class="8226127527421310456" onmouseenter="enter('8226127527421310456');" onmouseout="out('8226127527421310456');" style="">1058                         if (bitmap != null) {                                                            </span>
<span class="-8911608565518229217" onmouseenter="enter('-8911608565518229217');" onmouseout="out('-8911608565518229217');" style="">1059                             update.bindLong(1, id);                                                      </span>
<span class="-3437982606997723715" onmouseenter="enter('-3437982606997723715');" onmouseout="out('-3437982606997723715');" style="">1060                             data = ItemInfo.flattenBitmap(bitmap);                                       </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">1061                             if (data != null) {                                                          </span>
<span class="8709343663161385163" onmouseenter="enter('8709343663161385163');" onmouseout="out('8709343663161385163');" style="">1062                                 update.bindBlob(2, data);                                                </span>
<span class="-6412297069984418220" onmouseenter="enter('-6412297069984418220');" onmouseout="out('-6412297069984418220');" style="">1063                                 update.execute();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064                             }                                                                            </span>
<span class="-2094673185475372498" onmouseenter="enter('-2094673185475372498');" onmouseout="out('-2094673185475372498');" style="">1065                             bitmap.recycle();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1066                         }                                                                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1067                     } catch (Exception e) {                                                              </span>
<span class="2850767417883926950" onmouseenter="enter('2850767417883926950');" onmouseout="out('2850767417883926950');" style="">1068                         if (!logged) {                                                                   </span>
<span class="-5248013341499561391" onmouseenter="enter('-5248013341499561391');" onmouseout="out('-5248013341499561391');" style="">1069                             Log.e(TAG, &quot;Failed normalizing icon &quot; + id, e);                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1070                         } else {                                                                         </span>
<span class="-4114526112834757919" onmouseenter="enter('-4114526112834757919');" onmouseout="out('-4114526112834757919');" style="">1071                             Log.e(TAG, &quot;Also failed normalizing icon &quot; + id);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1072                         }                                                                                </span>
<span class="74122904328555583" onmouseenter="enter('74122904328555583');" onmouseout="out('74122904328555583');" style="">1073                         logged = true;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1074                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1075                 }                                                                                        </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">1076                 db.setTransactionSuccessful();                                                           </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="">1077             } catch (SQLException ex) {                                                                  </span>
<span class="1696470604658034617" onmouseenter="enter('1696470604658034617');" onmouseout="out('1696470604658034617');" style="">1078                 Log.w(TAG, &quot;Problem while allocating appWidgetIds for existing widgets&quot;, ex);            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1079             } finally {                                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">1080                 db.endTransaction();                                                                     </span>
<span class="-304565854195066427" onmouseenter="enter('-304565854195066427');" onmouseout="out('-304565854195066427');" style="">1081                 if (update != null) {                                                                    </span>
<span class="-3956724785259615758" onmouseenter="enter('-3956724785259615758');" onmouseout="out('-3956724785259615758');" style="">1082                     update.close();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1083                 }                                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1084                 if (c != null) {                                                                         </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1085                     c.close();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1086                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088         }                                                                                                </span>
<span  style="">1089                                                                                                          </span>
<span class="-8543343401238088250" onmouseenter="enter('-8543343401238088250');" onmouseout="out('-8543343401238088250');" style="">1090         // Generates a new ID to use for an object in your database. This method should be only          </span>
<span class="-535999813132446250" onmouseenter="enter('-535999813132446250');" onmouseout="out('-535999813132446250');" style="">1091         // called from the main UI thread. As an exception, we do call it when we call the               </span>
<span class="-3416944691245960228" onmouseenter="enter('-3416944691245960228');" onmouseout="out('-3416944691245960228');" style="">1092         // constructor from the worker thread; however, this doesn&#x27;t extend until after the              </span>
<span class="506358615447788975" onmouseenter="enter('506358615447788975');" onmouseout="out('506358615447788975');" style="">1093         // constructor is called, and we only pass a reference to LauncherProvider to LauncherApp        </span>
<span class="7265707553198201311" onmouseenter="enter('7265707553198201311');" onmouseout="out('7265707553198201311');" style="">1094         // after that point                                                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1095         @Override                                                                                        </span>
<span class="2178013549114956338" onmouseenter="enter('2178013549114956338');" onmouseout="out('2178013549114956338');" style="">1096         public long generateNewItemId() {                                                                </span>
<span class="2999684209048406821" onmouseenter="enter('2999684209048406821');" onmouseout="out('2999684209048406821');" style="">1097             if (mMaxItemId &lt; 0) {                                                                        </span>
<span class="-7068859972649181897" onmouseenter="enter('-7068859972649181897');" onmouseout="out('-7068859972649181897');" style="">1098                 throw new RuntimeException(&quot;Error: max item id was not initialized&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1099             }                                                                                            </span>
<span class="-2732750815463784999" onmouseenter="enter('-2732750815463784999');" onmouseout="out('-2732750815463784999');" style="">1100             mMaxItemId += 1;                                                                             </span>
<span class="5456580978366825274" onmouseenter="enter('5456580978366825274');" onmouseout="out('5456580978366825274');" style="">1101             return mMaxItemId;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1102         }                                                                                                </span>
<span  style="">1103                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1104         @Override                                                                                        </span>
<span class="329443540154066398" onmouseenter="enter('329443540154066398');" onmouseout="out('329443540154066398');" style="">1105         public long insertAndCheck(SQLiteDatabase db, ContentValues values) {                            </span>
<span class="-1505151618823806706" onmouseenter="enter('-1505151618823806706');" onmouseout="out('-1505151618823806706');" style="">1106             return dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107         }                                                                                                </span>
<span  style="">1108                                                                                                          </span>
<span class="8365827129597185054" onmouseenter="enter('8365827129597185054');" onmouseout="out('8365827129597185054');" style="">1109         public void updateMaxItemId(long id) {                                                           </span>
<span class="-6849429476525109058" onmouseenter="enter('-6849429476525109058');" onmouseout="out('-6849429476525109058');" style="">1110             mMaxItemId = id + 1;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1111         }                                                                                                </span>
<span  style="">1112                                                                                                          </span>
<span class="-7367368828761155068" onmouseenter="enter('-7367368828761155068');" onmouseout="out('-7367368828761155068');" style="">1113         public void checkId(String table, ContentValues values) {                                        </span>
<span class="-1608142162103033850" onmouseenter="enter('-1608142162103033850');" onmouseout="out('-1608142162103033850');" style="">1114             long id = values.getAsLong(LauncherSettings.BaseLauncherColumns._ID);                        </span>
<span class="-6900211224990683940" onmouseenter="enter('-6900211224990683940');" onmouseout="out('-6900211224990683940');" style="">1115             if (table == LauncherProvider.TABLE_WORKSPACE_SCREENS) {                                     </span>
<span class="9109073648364222254" onmouseenter="enter('9109073648364222254');" onmouseout="out('9109073648364222254');" style="">1116                 mMaxScreenId = Math.max(id, mMaxScreenId);                                               </span>
<span class="-6240460135729763291" onmouseenter="enter('-6240460135729763291');" onmouseout="out('-6240460135729763291');" style="">1117             }  else {                                                                                    </span>
<span class="754800730159449376" onmouseenter="enter('754800730159449376');" onmouseout="out('754800730159449376');" style="">1118                 mMaxItemId = Math.max(id, mMaxItemId);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1119             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1120         }                                                                                                </span>
<span  style="">1121                                                                                                          </span>
<span class="-8013451254632200820" onmouseenter="enter('-8013451254632200820');" onmouseout="out('-8013451254632200820');" style="">1122         private long initializeMaxItemId(SQLiteDatabase db) {                                            </span>
<span class="-6457280004469744269" onmouseenter="enter('-6457280004469744269');" onmouseout="out('-6457280004469744269');" style="">1123             Cursor c = db.rawQuery(&quot;SELECT MAX(_id) FROM favorites&quot;, null);                              </span>
<span  style="">1124                                                                                                          </span>
<span class="-7794263827987261163" onmouseenter="enter('-7794263827987261163');" onmouseout="out('-7794263827987261163');" style="">1125             // get the result                                                                            </span>
<span class="-7318978250879363167" onmouseenter="enter('-7318978250879363167');" onmouseout="out('-7318978250879363167');" style="">1126             final int maxIdIndex = 0;                                                                    </span>
<span class="-3996593593662644650" onmouseenter="enter('-3996593593662644650');" onmouseout="out('-3996593593662644650');" style="">1127             long id = -1;                                                                                </span>
<span class="2006356297883322098" onmouseenter="enter('2006356297883322098');" onmouseout="out('2006356297883322098');" style="">1128             if (c != null &amp;&amp; c.moveToNext()) {                                                           </span>
<span class="6252863560499548901" onmouseenter="enter('6252863560499548901');" onmouseout="out('6252863560499548901');" style="">1129                 id = c.getLong(maxIdIndex);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130             }                                                                                            </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1131             if (c != null) {                                                                             </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1132                 c.close();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1133             }                                                                                            </span>
<span  style="">1134                                                                                                          </span>
<span class="-7988774182034385411" onmouseenter="enter('-7988774182034385411');" onmouseout="out('-7988774182034385411');" style="">1135             if (id == -1) {                                                                              </span>
<span class="-8632333559810917367" onmouseenter="enter('-8632333559810917367');" onmouseout="out('-8632333559810917367');" style="">1136                 throw new RuntimeException(&quot;Error: could not query max item id&quot;);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1137             }                                                                                            </span>
<span  style="">1138                                                                                                          </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1139             return id;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140         }                                                                                                </span>
<span  style="">1141                                                                                                          </span>
<span class="3292148501075941248" onmouseenter="enter('3292148501075941248');" onmouseout="out('3292148501075941248');" style="">1142         // Generates a new ID to use for an workspace screen in your database. This method               </span>
<span class="8169251972405240623" onmouseenter="enter('8169251972405240623');" onmouseout="out('8169251972405240623');" style="">1143         // should be only called from the main UI thread. As an exception, we do call it when we         </span>
<span class="5354260748737756868" onmouseenter="enter('5354260748737756868');" onmouseout="out('5354260748737756868');" style="">1144         // call the constructor from the worker thread; however, this doesn&#x27;t extend until after the     </span>
<span class="506358615447788975" onmouseenter="enter('506358615447788975');" onmouseout="out('506358615447788975');" style="">1145         // constructor is called, and we only pass a reference to LauncherProvider to LauncherApp        </span>
<span class="7265707553198201311" onmouseenter="enter('7265707553198201311');" onmouseout="out('7265707553198201311');" style="">1146         // after that point                                                                              </span>
<span class="3794345207933084858" onmouseenter="enter('3794345207933084858');" onmouseout="out('3794345207933084858');" style="">1147         public long generateNewScreenId() {                                                              </span>
<span class="-2601779586206833262" onmouseenter="enter('-2601779586206833262');" onmouseout="out('-2601779586206833262');" style="">1148             if (mMaxScreenId &lt; 0) {                                                                      </span>
<span class="-8395628436366181623" onmouseenter="enter('-8395628436366181623');" onmouseout="out('-8395628436366181623');" style="">1149                 throw new RuntimeException(&quot;Error: max screen id was not initialized&quot;);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1150             }                                                                                            </span>
<span class="-7600499966171393409" onmouseenter="enter('-7600499966171393409');" onmouseout="out('-7600499966171393409');" style="">1151             mMaxScreenId += 1;                                                                           </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1152             // Log to disk                                                                               </span>
<span class="-8761729187376845632" onmouseenter="enter('-8761729187376845632');" onmouseout="out('-8761729187376845632');" style="">1153             Launcher.addDumpLog(TAG, &quot;11683562 - generateNewScreenId(): &quot; + mMaxScreenId, true);         </span>
<span class="-2082539956971430335" onmouseenter="enter('-2082539956971430335');" onmouseout="out('-2082539956971430335');" style="">1154             return mMaxScreenId;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1155         }                                                                                                </span>
<span  style="">1156                                                                                                          </span>
<span class="-7531165898061832726" onmouseenter="enter('-7531165898061832726');" onmouseout="out('-7531165898061832726');" style="">1157         public void updateMaxScreenId(long maxScreenId) {                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1158             // Log to disk                                                                               </span>
<span class="-6999371015775210769" onmouseenter="enter('-6999371015775210769');" onmouseout="out('-6999371015775210769');" style="">1159             Launcher.addDumpLog(TAG, &quot;11683562 - updateMaxScreenId(): &quot; + maxScreenId, true);            </span>
<span class="-5262779621072196869" onmouseenter="enter('-5262779621072196869');" onmouseout="out('-5262779621072196869');" style="">1160             mMaxScreenId = maxScreenId;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1161         }                                                                                                </span>
<span  style="">1162                                                                                                          </span>
<span class="1340022180158952931" onmouseenter="enter('1340022180158952931');" onmouseout="out('1340022180158952931');" style="">1163         private long initializeMaxScreenId(SQLiteDatabase db) {                                          </span>
<span class="-2625939584691052131" onmouseenter="enter('-2625939584691052131');" onmouseout="out('-2625939584691052131');" style=""><abbr title="1164             Cursor c = db.rawQuery(&quot;SELECT MAX(&quot; + LauncherSettings.WorkspaceScreens._ID + &quot;) FROM &quot; + TABLE_WORKSPACE_SCREENS, null);">1164             Cursor c = db.rawQuery(&quot;SELECT MAX(&quot; + LauncherSettings.WorkspaceScreens._ID + &quot;) FROM &quot; + TA🔵</abbr></span>
<span  style="">1165                                                                                                          </span>
<span class="-7794263827987261163" onmouseenter="enter('-7794263827987261163');" onmouseout="out('-7794263827987261163');" style="">1166             // get the result                                                                            </span>
<span class="-7318978250879363167" onmouseenter="enter('-7318978250879363167');" onmouseout="out('-7318978250879363167');" style="">1167             final int maxIdIndex = 0;                                                                    </span>
<span class="-3996593593662644650" onmouseenter="enter('-3996593593662644650');" onmouseout="out('-3996593593662644650');" style="">1168             long id = -1;                                                                                </span>
<span class="2006356297883322098" onmouseenter="enter('2006356297883322098');" onmouseout="out('2006356297883322098');" style="">1169             if (c != null &amp;&amp; c.moveToNext()) {                                                           </span>
<span class="6252863560499548901" onmouseenter="enter('6252863560499548901');" onmouseout="out('6252863560499548901');" style="">1170                 id = c.getLong(maxIdIndex);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171             }                                                                                            </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1172             if (c != null) {                                                                             </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1173                 c.close();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1174             }                                                                                            </span>
<span  style="">1175                                                                                                          </span>
<span class="-7988774182034385411" onmouseenter="enter('-7988774182034385411');" onmouseout="out('-7988774182034385411');" style="">1176             if (id == -1) {                                                                              </span>
<span class="5981752458110974976" onmouseenter="enter('5981752458110974976');" onmouseout="out('5981752458110974976');" style="">1177                 throw new RuntimeException(&quot;Error: could not query max screen id&quot;);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1178             }                                                                                            </span>
<span  style="">1179                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1180             // Log to disk                                                                               </span>
<span class="27430974887508761" onmouseenter="enter('27430974887508761');" onmouseout="out('27430974887508761');" style="">1181             Launcher.addDumpLog(TAG, &quot;11683562 - initializeMaxScreenId(): &quot; + id, true);                 </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1182             return id;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1183         }                                                                                                </span>
<span  style="">1184                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1185         /**                                                                                              </span>
<span class="4503171225344397477" onmouseenter="enter('4503171225344397477');" onmouseout="out('4503171225344397477');" style="">1186          * Upgrade existing clock and photo frame widgets into their new widget                          </span>
<span class="6424740634937576135" onmouseenter="enter('6424740634937576135');" onmouseout="out('6424740634937576135');" style="">1187          * equivalents.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1188          */                                                                                              </span>
<span class="743821216610300554" onmouseenter="enter('743821216610300554');" onmouseout="out('743821216610300554');" style="">1189         private void convertWidgets(SQLiteDatabase db) {                                                 </span>
<span class="328319718470950320" onmouseenter="enter('328319718470950320');" onmouseout="out('328319718470950320');" style="">1190             final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);            </span>
<span class="-406592777847963958" onmouseenter="enter('-406592777847963958');" onmouseout="out('-406592777847963958');" style="">1191             final int[] bindSources = new int[] {                                                        </span>
<span class="7481244370213656970" onmouseenter="enter('7481244370213656970');" onmouseout="out('7481244370213656970');" style="">1192                     Favorites.ITEM_TYPE_WIDGET_CLOCK,                                                    </span>
<span class="-4987589710545680428" onmouseenter="enter('-4987589710545680428');" onmouseout="out('-4987589710545680428');" style="">1193                     Favorites.ITEM_TYPE_WIDGET_PHOTO_FRAME,                                              </span>
<span class="-3073892039805288641" onmouseenter="enter('-3073892039805288641');" onmouseout="out('-3073892039805288641');" style="">1194                     Favorites.ITEM_TYPE_WIDGET_SEARCH,                                                   </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1195             };                                                                                           </span>
<span  style="">1196                                                                                                          </span>
<span class="8819301229709462929" onmouseenter="enter('8819301229709462929');" onmouseout="out('8819301229709462929');" style="">1197             final String selectWhere = buildOrWhereString(Favorites.ITEM_TYPE, bindSources);             </span>
<span  style="">1198                                                                                                          </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="">1199             Cursor c = null;                                                                             </span>
<span  style="">1200                                                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">1201             db.beginTransaction();                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1202             try {                                                                                        </span>
<span class="9180803436248323281" onmouseenter="enter('9180803436248323281');" onmouseout="out('9180803436248323281');" style="">1203                 // Select and iterate through each matching widget                                       </span>
<span class="-4881978227834121924" onmouseenter="enter('-4881978227834121924');" onmouseout="out('-4881978227834121924');" style="">1204                 c = db.query(TABLE_FAVORITES, new String[] { Favorites._ID, Favorites.ITEM_TYPE },       </span>
<span class="523753735101753681" onmouseenter="enter('523753735101753681');" onmouseout="out('523753735101753681');" style="">1205                         selectWhere, null, null, null, null);                                            </span>
<span  style="">1206                                                                                                          </span>
<span class="5404371667899517548" onmouseenter="enter('5404371667899517548');" onmouseout="out('5404371667899517548');" style="">1207                 if (LOGD) Log.d(TAG, &quot;found upgrade cursor count=&quot; + c.getCount());                      </span>
<span  style="">1208                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1209                 final ContentValues values = new ContentValues();                                        </span>
<span class="-3619679329231355898" onmouseenter="enter('-3619679329231355898');" onmouseout="out('-3619679329231355898');" style="">1210                 while (c != null &amp;&amp; c.moveToNext()) {                                                    </span>
<span class="707133737367195092" onmouseenter="enter('707133737367195092');" onmouseout="out('707133737367195092');" style="">1211                     long favoriteId = c.getLong(0);                                                      </span>
<span class="3900048804921934092" onmouseenter="enter('3900048804921934092');" onmouseout="out('3900048804921934092');" style="">1212                     int favoriteType = c.getInt(1);                                                      </span>
<span  style="">1213                                                                                                          </span>
<span class="-4540349898180247220" onmouseenter="enter('-4540349898180247220');" onmouseout="out('-4540349898180247220');" style="">1214                     // Allocate and update database with new appWidgetId                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1215                     try {                                                                                </span>
<span class="7176738113779216844" onmouseenter="enter('7176738113779216844');" onmouseout="out('7176738113779216844');" style="">1216                         int appWidgetId = mAppWidgetHost.allocateAppWidgetId();                          </span>
<span  style="">1217                                                                                                          </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1218                         if (LOGD) {                                                                      </span>
<span class="-1535375789049662259" onmouseenter="enter('-1535375789049662259');" onmouseout="out('-1535375789049662259');" style="">1219                             Log.d(TAG, &quot;allocated appWidgetId=&quot; + appWidgetId                            </span>
<span class="-754391989896361890" onmouseenter="enter('-754391989896361890');" onmouseout="out('-754391989896361890');" style="">1220                                     + &quot; for favoriteId=&quot; + favoriteId);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221                         }                                                                                </span>
<span class="6295623415315599771" onmouseenter="enter('6295623415315599771');" onmouseout="out('6295623415315599771');" style="">1222                         values.clear();                                                                  </span>
<span class="2941545182515325414" onmouseenter="enter('2941545182515325414');" onmouseout="out('2941545182515325414');" style="">1223                         values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_APPWIDGET);                  </span>
<span class="-2217583362005241057" onmouseenter="enter('-2217583362005241057');" onmouseout="out('-2217583362005241057');" style="">1224                         values.put(Favorites.APPWIDGET_ID, appWidgetId);                                 </span>
<span  style="">1225                                                                                                          </span>
<span class="1614683704773657610" onmouseenter="enter('1614683704773657610');" onmouseout="out('1614683704773657610');" style="">1226                         // Original widgets might not have valid spans when upgrading                    </span>
<span class="6372808247890680892" onmouseenter="enter('6372808247890680892');" onmouseout="out('6372808247890680892');" style="">1227                         if (favoriteType == Favorites.ITEM_TYPE_WIDGET_SEARCH) {                         </span>
<span class="-7334544058420176074" onmouseenter="enter('-7334544058420176074');" onmouseout="out('-7334544058420176074');" style="">1228                             values.put(LauncherSettings.Favorites.SPANX, 4);                             </span>
<span class="-6227774068858913177" onmouseenter="enter('-6227774068858913177');" onmouseout="out('-6227774068858913177');" style="">1229                             values.put(LauncherSettings.Favorites.SPANY, 1);                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1230                         } else {                                                                         </span>
<span class="2219786095905776818" onmouseenter="enter('2219786095905776818');" onmouseout="out('2219786095905776818');" style="">1231                             values.put(LauncherSettings.Favorites.SPANX, 2);                             </span>
<span class="6027752313180198994" onmouseenter="enter('6027752313180198994');" onmouseout="out('6027752313180198994');" style="">1232                             values.put(LauncherSettings.Favorites.SPANY, 2);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233                         }                                                                                </span>
<span  style="">1234                                                                                                          </span>
<span class="-7922633388955325898" onmouseenter="enter('-7922633388955325898');" onmouseout="out('-7922633388955325898');" style="">1235                         String updateWhere = Favorites._ID + &quot;=&quot; + favoriteId;                           </span>
<span class="6932880072735485862" onmouseenter="enter('6932880072735485862');" onmouseout="out('6932880072735485862');" style="">1236                         db.update(TABLE_FAVORITES, values, updateWhere, null);                           </span>
<span  style="">1237                                                                                                          </span>
<span class="3880259377175112012" onmouseenter="enter('3880259377175112012');" onmouseout="out('3880259377175112012');" style="">1238                         if (favoriteType == Favorites.ITEM_TYPE_WIDGET_CLOCK) {                          </span>
<span class="393760990327696266" onmouseenter="enter('393760990327696266');" onmouseout="out('393760990327696266');" style="">1239                             // TODO: check return value                                                  </span>
<span class="-7373523765032573831" onmouseenter="enter('-7373523765032573831');" onmouseout="out('-7373523765032573831');" style="">1240                             appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,                       </span>
<span class="2526235379639805468" onmouseenter="enter('2526235379639805468');" onmouseout="out('2526235379639805468');" style="">1241                                     new ComponentName(&quot;com.android.alarmclock&quot;,                          </span>
<span class="7317042431961215300" onmouseenter="enter('7317042431961215300');" onmouseout="out('7317042431961215300');" style="">1242                                     &quot;com.android.alarmclock.AnalogAppWidgetProvider&quot;));                  </span>
<span class="6172094920381637122" onmouseenter="enter('6172094920381637122');" onmouseout="out('6172094920381637122');" style="">1243                         } else if (favoriteType == Favorites.ITEM_TYPE_WIDGET_PHOTO_FRAME) {             </span>
<span class="393760990327696266" onmouseenter="enter('393760990327696266');" onmouseout="out('393760990327696266');" style="">1244                             // TODO: check return value                                                  </span>
<span class="-7373523765032573831" onmouseenter="enter('-7373523765032573831');" onmouseout="out('-7373523765032573831');" style="">1245                             appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,                       </span>
<span class="7711233161317097526" onmouseenter="enter('7711233161317097526');" onmouseout="out('7711233161317097526');" style="">1246                                     new ComponentName(&quot;com.android.camera&quot;,                              </span>
<span class="8639249053579730258" onmouseenter="enter('8639249053579730258');" onmouseout="out('8639249053579730258');" style="">1247                                     &quot;com.android.camera.PhotoAppWidgetProvider&quot;));                       </span>
<span class="-7798263288808543811" onmouseenter="enter('-7798263288808543811');" onmouseout="out('-7798263288808543811');" style="">1248                         } else if (favoriteType == Favorites.ITEM_TYPE_WIDGET_SEARCH) {                  </span>
<span class="393760990327696266" onmouseenter="enter('393760990327696266');" onmouseout="out('393760990327696266');" style="">1249                             // TODO: check return value                                                  </span>
<span class="-7373523765032573831" onmouseenter="enter('-7373523765032573831');" onmouseout="out('-7373523765032573831');" style="">1250                             appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,                       </span>
<span class="5624392848756158158" onmouseenter="enter('5624392848756158158');" onmouseout="out('5624392848756158158');" style="">1251                                     getSearchWidgetProvider());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1252                         }                                                                                </span>
<span class="3255801419413274971" onmouseenter="enter('3255801419413274971');" onmouseout="out('3255801419413274971');" style="">1253                     } catch (RuntimeException ex) {                                                      </span>
<span class="7589023920505453658" onmouseenter="enter('7589023920505453658');" onmouseout="out('7589023920505453658');" style="">1254                         Log.e(TAG, &quot;Problem allocating appWidgetId&quot;, ex);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1255                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1256                 }                                                                                        </span>
<span  style="">1257                                                                                                          </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">1258                 db.setTransactionSuccessful();                                                           </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="">1259             } catch (SQLException ex) {                                                                  </span>
<span class="1696470604658034617" onmouseenter="enter('1696470604658034617');" onmouseout="out('1696470604658034617');" style="">1260                 Log.w(TAG, &quot;Problem while allocating appWidgetIds for existing widgets&quot;, ex);            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1261             } finally {                                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">1262                 db.endTransaction();                                                                     </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1263                 if (c != null) {                                                                         </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1264                     c.close();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1266             }                                                                                            </span>
<span  style="">1267                                                                                                          </span>
<span class="1061677975667452281" onmouseenter="enter('1061677975667452281');" onmouseout="out('1061677975667452281');" style="">1268             // Update max item id                                                                        </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style="">1269             mMaxItemId = initializeMaxItemId(db);                                                        </span>
<span class="-1050526381544019588" onmouseenter="enter('-1050526381544019588');" onmouseout="out('-1050526381544019588');" style="">1270             if (LOGD) Log.d(TAG, &quot;mMaxItemId: &quot; + mMaxItemId);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271         }                                                                                                </span>
<span  style="">1272                                                                                                          </span>
<span class="1383368615032249869" onmouseenter="enter('1383368615032249869');" onmouseout="out('1383368615032249869');" style="">1273         private boolean initializeExternalAdd(ContentValues values) {                                    </span>
<span class="-4585320292275114767" onmouseenter="enter('-4585320292275114767');" onmouseout="out('-4585320292275114767');" style="">1274             // 1. Ensure that externally added items have a valid item id                                </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">1275             long id = generateNewItemId();                                                               </span>
<span class="-4305015780380424948" onmouseenter="enter('-4305015780380424948');" onmouseout="out('-4305015780380424948');" style="">1276             values.put(LauncherSettings.Favorites._ID, id);                                              </span>
<span  style="">1277                                                                                                          </span>
<span class="5555856101718413728" onmouseenter="enter('5555856101718413728');" onmouseout="out('5555856101718413728');" style="">1278             // 2. In the case of an app widget, and if no app widget id is specified, we                 </span>
<span class="5653436237424007902" onmouseenter="enter('5653436237424007902');" onmouseout="out('5653436237424007902');" style="">1279             // attempt allocate and bind the widget.                                                     </span>
<span class="7737959233990593661" onmouseenter="enter('7737959233990593661');" onmouseout="out('7737959233990593661');" style="">1280             Integer itemType = values.getAsInteger(LauncherSettings.Favorites.ITEM_TYPE);                </span>
<span class="2055658702897830579" onmouseenter="enter('2055658702897830579');" onmouseout="out('2055658702897830579');" style="">1281             if (itemType != null &amp;&amp;                                                                      </span>
<span class="-1739021162756129174" onmouseenter="enter('-1739021162756129174');" onmouseout="out('-1739021162756129174');" style="">1282                     itemType.intValue() == LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET &amp;&amp;             </span>
<span class="-6215251601594981481" onmouseenter="enter('-6215251601594981481');" onmouseout="out('-6215251601594981481');" style="">1283                     !values.containsKey(LauncherSettings.Favorites.APPWIDGET_ID)) {                      </span>
<span  style="">1284                                                                                                          </span>
<span class="328319718470950320" onmouseenter="enter('328319718470950320');" onmouseout="out('328319718470950320');" style="">1285                 final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);        </span>
<span class="7884761264945585321" onmouseenter="enter('7884761264945585321');" onmouseout="out('7884761264945585321');" style="">1286                 ComponentName cn = ComponentName.unflattenFromString(                                    </span>
<span class="2179911768770688102" onmouseenter="enter('2179911768770688102');" onmouseout="out('2179911768770688102');" style="">1287                         values.getAsString(Favorites.APPWIDGET_PROVIDER));                               </span>
<span  style="">1288                                                                                                          </span>
<span class="3459055710499452007" onmouseenter="enter('3459055710499452007');" onmouseout="out('3459055710499452007');" style="">1289                 if (cn != null) {                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1290                     try {                                                                                </span>
<span class="7176738113779216844" onmouseenter="enter('7176738113779216844');" onmouseout="out('7176738113779216844');" style="">1291                         int appWidgetId = mAppWidgetHost.allocateAppWidgetId();                          </span>
<span class="3122228588084428979" onmouseenter="enter('3122228588084428979');" onmouseout="out('3122228588084428979');" style="">1292                         values.put(LauncherSettings.Favorites.APPWIDGET_ID, appWidgetId);                </span>
<span class="2309614617117273311" onmouseenter="enter('2309614617117273311');" onmouseout="out('2309614617117273311');" style="">1293                         if (!appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,cn)) {                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1294                             return false;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295                         }                                                                                </span>
<span class="1200625667814236005" onmouseenter="enter('1200625667814236005');" onmouseout="out('1200625667814236005');" style="">1296                     } catch (RuntimeException e) {                                                       </span>
<span class="9049318523495391496" onmouseenter="enter('9049318523495391496');" onmouseout="out('9049318523495391496');" style="">1297                         Log.e(TAG, &quot;Failed to initialize external widget&quot;, e);                           </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1298                         return false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1299                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1300                 } else {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1301                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1302                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1303             }                                                                                            </span>
<span  style="">1304                                                                                                          </span>
<span class="-5393917371757635815" onmouseenter="enter('-5393917371757635815');" onmouseout="out('-5393917371757635815');" style="">1305             // Add screen id if not present                                                              </span>
<span class="-8492193036384627967" onmouseenter="enter('-8492193036384627967');" onmouseout="out('-8492193036384627967');" style="">1306             long screenId = values.getAsLong(LauncherSettings.Favorites.SCREEN);                         </span>
<span class="-8472780943665027311" onmouseenter="enter('-8472780943665027311');" onmouseout="out('-8472780943665027311');" style="">1307             if (!addScreenIdIfNecessary(screenId)) {                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1308                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1309             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1310             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1311         }                                                                                                </span>
<span  style="">1312                                                                                                          </span>
<span class="7352835902307890843" onmouseenter="enter('7352835902307890843');" onmouseout="out('7352835902307890843');" style="">1313         // Returns true of screen id exists, or if successfully added                                    </span>
<span class="-4057720447241324922" onmouseenter="enter('-4057720447241324922');" onmouseout="out('-4057720447241324922');" style="">1314         private boolean addScreenIdIfNecessary(long screenId) {                                          </span>
<span class="-8332527954530563349" onmouseenter="enter('-8332527954530563349');" onmouseout="out('-8332527954530563349');" style="">1315             if (!hasScreenId(screenId)) {                                                                </span>
<span class="-3380006025674561043" onmouseenter="enter('-3380006025674561043');" onmouseout="out('-3380006025674561043');" style="">1316                 int rank = getMaxScreenRank() + 1;                                                       </span>
<span  style="">1317                                                                                                          </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1318                 ContentValues v = new ContentValues();                                                   </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1319                 v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                                  </span>
<span class="6806563186306365402" onmouseenter="enter('6806563186306365402');" onmouseout="out('6806563186306365402');" style="">1320                 v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, rank);                              </span>
<span class="-1115795847996433461" onmouseenter="enter('-1115795847996433461');" onmouseout="out('-1115795847996433461');" style="">1321                 if (dbInsertAndCheck(this, getWritableDatabase(),                                        </span>
<span class="3238415722136121635" onmouseenter="enter('3238415722136121635');" onmouseout="out('3238415722136121635');" style="">1322                         TABLE_WORKSPACE_SCREENS, null, v) &lt; 0) {                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1323                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1324                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1325             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1326             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327         }                                                                                                </span>
<span  style="">1328                                                                                                          </span>
<span class="5478264759768975399" onmouseenter="enter('5478264759768975399');" onmouseout="out('5478264759768975399');" style="">1329         private boolean hasScreenId(long screenId) {                                                     </span>
<span class="2098776625240525845" onmouseenter="enter('2098776625240525845');" onmouseout="out('2098776625240525845');" style="">1330             SQLiteDatabase db = getWritableDatabase();                                                   </span>
<span class="7657123469267572077" onmouseenter="enter('7657123469267572077');" onmouseout="out('7657123469267572077');" style="">1331             Cursor c = db.rawQuery(&quot;SELECT * FROM &quot; + TABLE_WORKSPACE_SCREENS + &quot; WHERE &quot;                </span>
<span class="1858055579641267103" onmouseenter="enter('1858055579641267103');" onmouseout="out('1858055579641267103');" style="">1332                     + LauncherSettings.WorkspaceScreens._ID + &quot; = &quot; + screenId, null);                   </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1333             if (c != null) {                                                                             </span>
<span class="-7874906179005583875" onmouseenter="enter('-7874906179005583875');" onmouseout="out('-7874906179005583875');" style="">1334                 int count = c.getCount();                                                                </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1335                 c.close();                                                                               </span>
<span class="4255567607434315929" onmouseenter="enter('4255567607434315929');" onmouseout="out('4255567607434315929');" style="">1336                 return count &gt; 0;                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1337             } else {                                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1338                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1339             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1340         }                                                                                                </span>
<span  style="">1341                                                                                                          </span>
<span class="-2708828914383579811" onmouseenter="enter('-2708828914383579811');" onmouseout="out('-2708828914383579811');" style="">1342         private int getMaxScreenRank() {                                                                 </span>
<span class="2098776625240525845" onmouseenter="enter('2098776625240525845');" onmouseout="out('2098776625240525845');" style="">1343             SQLiteDatabase db = getWritableDatabase();                                                   </span>
<span class="4567502420956726358" onmouseenter="enter('4567502420956726358');" onmouseout="out('4567502420956726358');" style="">1344             Cursor c = db.rawQuery(&quot;SELECT MAX(&quot; + LauncherSettings.WorkspaceScreens.SCREEN_RANK         </span>
<span class="-851271521804486447" onmouseenter="enter('-851271521804486447');" onmouseout="out('-851271521804486447');" style="">1345                     + &quot;) FROM &quot; + TABLE_WORKSPACE_SCREENS, null);                                        </span>
<span  style="">1346                                                                                                          </span>
<span class="-7794263827987261163" onmouseenter="enter('-7794263827987261163');" onmouseout="out('-7794263827987261163');" style="">1347             // get the result                                                                            </span>
<span class="-7089673966704675292" onmouseenter="enter('-7089673966704675292');" onmouseout="out('-7089673966704675292');" style="">1348             final int maxRankIndex = 0;                                                                  </span>
<span class="8995972804405745177" onmouseenter="enter('8995972804405745177');" onmouseout="out('8995972804405745177');" style="">1349             int rank = -1;                                                                               </span>
<span class="2006356297883322098" onmouseenter="enter('2006356297883322098');" onmouseout="out('2006356297883322098');" style="">1350             if (c != null &amp;&amp; c.moveToNext()) {                                                           </span>
<span class="-130706833968251970" onmouseenter="enter('-130706833968251970');" onmouseout="out('-130706833968251970');" style="">1351                 rank = c.getInt(maxRankIndex);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1352             }                                                                                            </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1353             if (c != null) {                                                                             </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1354                 c.close();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1355             }                                                                                            </span>
<span  style="">1356                                                                                                          </span>
<span class="-5061660947414305561" onmouseenter="enter('-5061660947414305561');" onmouseout="out('-5061660947414305561');" style="">1357             return rank;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1358         }                                                                                                </span>
<span  style="">1359                                                                                                          </span>
<span class="-1744733549489062304" onmouseenter="enter('-1744733549489062304');" onmouseout="out('-1744733549489062304');" style="">1360         private static final void beginDocument(XmlPullParser parser, String firstElementName)           </span>
<span class="-2080139816352784756" onmouseenter="enter('-2080139816352784756');" onmouseout="out('-2080139816352784756');" style="">1361                 throws XmlPullParserException, IOException {                                             </span>
<span class="3163913122247807134" onmouseenter="enter('3163913122247807134');" onmouseout="out('3163913122247807134');" style="">1362             int type;                                                                                    </span>
<span class="4717758523512892408" onmouseenter="enter('4717758523512892408');" onmouseout="out('4717758523512892408');" style="">1363             while ((type = parser.next()) != XmlPullParser.START_TAG                                     </span>
<span class="-8271997263827206949" onmouseenter="enter('-8271997263827206949');" onmouseout="out('-8271997263827206949');" style="">1364                     &amp;&amp; type != XmlPullParser.END_DOCUMENT) {                                             </span>
<span class="-2934185353411265329" onmouseenter="enter('-2934185353411265329');" onmouseout="out('-2934185353411265329');" style="">1365                 ;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1366             }                                                                                            </span>
<span  style="">1367                                                                                                          </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1368             if (type != XmlPullParser.START_TAG) {                                                       </span>
<span class="-8251107748224722167" onmouseenter="enter('-8251107748224722167');" onmouseout="out('-8251107748224722167');" style="">1369                 throw new XmlPullParserException(&quot;No start tag found&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1370             }                                                                                            </span>
<span  style="">1371                                                                                                          </span>
<span class="-245075222549821684" onmouseenter="enter('-245075222549821684');" onmouseout="out('-245075222549821684');" style="">1372             if (!parser.getName().equals(firstElementName)) {                                            </span>
<span class="-5532803442016772615" onmouseenter="enter('-5532803442016772615');" onmouseout="out('-5532803442016772615');" style="">1373                 throw new XmlPullParserException(&quot;Unexpected start tag: found &quot; + parser.getName() +     </span>
<span class="-7049615363315893666" onmouseenter="enter('-7049615363315893666');" onmouseout="out('-7049615363315893666');" style="">1374                         &quot;, expected &quot; + firstElementName);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1375             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1376         }                                                                                                </span>
<span  style="">1377                                                                                                          </span>
<span class="-5649662118683980701" onmouseenter="enter('-5649662118683980701');" onmouseout="out('-5649662118683980701');" style="">1378         private static Intent buildMainIntent() {                                                        </span>
<span class="4401622020586218033" onmouseenter="enter('4401622020586218033');" onmouseout="out('4401622020586218033');" style="">1379             Intent intent = new Intent(Intent.ACTION_MAIN, null);                                        </span>
<span class="-5992732151813603475" onmouseenter="enter('-5992732151813603475');" onmouseout="out('-5992732151813603475');" style="">1380             intent.addCategory(Intent.CATEGORY_LAUNCHER);                                                </span>
<span class="7257372324830803623" onmouseenter="enter('7257372324830803623');" onmouseout="out('7257372324830803623');" style="">1381             return intent;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382         }                                                                                                </span>
<span  style="">1383                                                                                                          </span>
<span class="4836207247336983218" onmouseenter="enter('4836207247336983218');" onmouseout="out('4836207247336983218');" style="">1384         private int loadFavorites(SQLiteDatabase db, WorkspaceLoader loader) {                           </span>
<span class="-517932292017625058" onmouseenter="enter('-517932292017625058');" onmouseout="out('-517932292017625058');" style="">1385             ArrayList&lt;Long&gt; screenIds = new ArrayList&lt;Long&gt;();                                           </span>
<span class="-1992683231790282850" onmouseenter="enter('-1992683231790282850');" onmouseout="out('-1992683231790282850');" style="">1386             // TODO: Use multiple loaders with fall-back and transaction.                                </span>
<span class="-198133332043015666" onmouseenter="enter('-198133332043015666');" onmouseout="out('-198133332043015666');" style="">1387             int count = loader.loadLayout(db, screenIds);                                                </span>
<span  style="">1388                                                                                                          </span>
<span class="6833875387324148439" onmouseenter="enter('6833875387324148439');" onmouseout="out('6833875387324148439');" style="">1389             // Add the screens specified by the items above                                              </span>
<span class="2978539432730983390" onmouseenter="enter('2978539432730983390');" onmouseout="out('2978539432730983390');" style="">1390             Collections.sort(screenIds);                                                                 </span>
<span class="5419352211080831355" onmouseenter="enter('5419352211080831355');" onmouseout="out('5419352211080831355');" style="">1391             int rank = 0;                                                                                </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">1392             ContentValues values = new ContentValues();                                                  </span>
<span class="7152107230041712979" onmouseenter="enter('7152107230041712979');" onmouseout="out('7152107230041712979');" style="">1393             for (Long id : screenIds) {                                                                  </span>
<span class="6295623415315599771" onmouseenter="enter('6295623415315599771');" onmouseout="out('6295623415315599771');" style="">1394                 values.clear();                                                                          </span>
<span class="-3523466272369778299" onmouseenter="enter('-3523466272369778299');" onmouseout="out('-3523466272369778299');" style="">1395                 values.put(LauncherSettings.WorkspaceScreens._ID, id);                                   </span>
<span class="-4819700644573994153" onmouseenter="enter('-4819700644573994153');" onmouseout="out('-4819700644573994153');" style="">1396                 values.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, rank);                         </span>
<span class="-7619796578683976012" onmouseenter="enter('-7619796578683976012');" onmouseout="out('-7619796578683976012');" style="">1397                 if (dbInsertAndCheck(this, db, TABLE_WORKSPACE_SCREENS, null, values) &lt; 0) {             </span>
<span class="-4349241721568097596" onmouseenter="enter('-4349241721568097596');" onmouseout="out('-4349241721568097596');" style="">1398                     throw new RuntimeException(&quot;Failed initialize screen table&quot;                          </span>
<span class="6358788983404305676" onmouseenter="enter('6358788983404305676');" onmouseout="out('6358788983404305676');" style="">1399                             + &quot;from default layout&quot;);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1400                 }                                                                                        </span>
<span class="-39828730810908930" onmouseenter="enter('-39828730810908930');" onmouseout="out('-39828730810908930');" style="">1401                 rank++;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1402             }                                                                                            </span>
<span  style="">1403                                                                                                          </span>
<span class="-1496945990523812752" onmouseenter="enter('-1496945990523812752');" onmouseout="out('-1496945990523812752');" style="">1404             // Ensure that the max ids are initialized                                                   </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style="">1405             mMaxItemId = initializeMaxItemId(db);                                                        </span>
<span class="4730788985981235797" onmouseenter="enter('4730788985981235797');" onmouseout="out('4730788985981235797');" style="">1406             mMaxScreenId = initializeMaxScreenId(db);                                                    </span>
<span  style="">1407                                                                                                          </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style="">1408             return count;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1409         }                                                                                                </span>
<span  style="">1410                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1411         /**                                                                                              </span>
<span class="4206769764705618625" onmouseenter="enter('4206769764705618625');" onmouseout="out('4206769764705618625');" style="">1412          * Loads the default set of favorite packages from an xml file.                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1413          *                                                                                               </span>
<span class="-2594660449836918751" onmouseenter="enter('-2594660449836918751');" onmouseout="out('-2594660449836918751');" style="">1414          * @param db The database to write the values into                                               </span>
<span class="8005887113908348021" onmouseenter="enter('8005887113908348021');" onmouseout="out('8005887113908348021');" style="">1415          * @param filterContainerId The specific container id of items to load                           </span>
<span class="4549742419570190063" onmouseenter="enter('4549742419570190063');" onmouseout="out('4549742419570190063');" style="">1416          * @param the set of screenIds which are used by the favorites                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1417          */                                                                                              </span>
<span class="-5851750009676500763" onmouseenter="enter('-5851750009676500763');" onmouseout="out('-5851750009676500763');" style="">1418         private int loadFavoritesRecursive(SQLiteDatabase db, Resources res, int workspaceResourceId,    </span>
<span class="-7355860442479967281" onmouseenter="enter('-7355860442479967281');" onmouseout="out('-7355860442479967281');" style="">1419                 ArrayList&lt;Long&gt; screenIds) {                                                             </span>
<span  style="">1420                                                                                                          </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">1421             ContentValues values = new ContentValues();                                                  </span>
<span class="-1772060661175704007" onmouseenter="enter('-1772060661175704007');" onmouseout="out('-1772060661175704007');" style=""><abbr title="1422             if (LOGD) Log.v(TAG, String.format(&quot;Loading favorites from resid=0x%08x&quot;, workspaceResourceId));">1422             if (LOGD) Log.v(TAG, String.format(&quot;Loading favorites from resid=0x%08x&quot;, workspaceResourceId🔵</abbr></span>
<span  style="">1423                                                                                                          </span>
<span class="-7835997453776942924" onmouseenter="enter('-7835997453776942924');" onmouseout="out('-7835997453776942924');" style="">1424             int count = 0;                                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1425             try {                                                                                        </span>
<span class="9080417688274832266" onmouseenter="enter('9080417688274832266');" onmouseout="out('9080417688274832266');" style="">1426                 XmlResourceParser parser = res.getXml(workspaceResourceId);                              </span>
<span class="-4849646726062265204" onmouseenter="enter('-4849646726062265204');" onmouseout="out('-4849646726062265204');" style="">1427                 beginDocument(parser, TAG_FAVORITES);                                                    </span>
<span  style="">1428                                                                                                          </span>
<span class="-1796733801910506416" onmouseenter="enter('-1796733801910506416');" onmouseout="out('-1796733801910506416');" style="">1429                 final int depth = parser.getDepth();                                                     </span>
<span  style="">1430                                                                                                          </span>
<span class="3163913122247807134" onmouseenter="enter('3163913122247807134');" onmouseout="out('3163913122247807134');" style="">1431                 int type;                                                                                </span>
<span class="-1784597901533800040" onmouseenter="enter('-1784597901533800040');" onmouseout="out('-1784597901533800040');" style="">1432                 while (((type = parser.next()) != XmlPullParser.END_TAG ||                               </span>
<span class="9136127903140816012" onmouseenter="enter('9136127903140816012');" onmouseout="out('9136127903140816012');" style="">1433                         parser.getDepth() &gt; depth) &amp;&amp; type != XmlPullParser.END_DOCUMENT) {              </span>
<span  style="">1434                                                                                                          </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1435                     if (type != XmlPullParser.START_TAG) {                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1436                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437                     }                                                                                    </span>
<span  style="">1438                                                                                                          </span>
<span class="7899804433438794249" onmouseenter="enter('7899804433438794249');" onmouseout="out('7899804433438794249');" style="">1439                     boolean added = false;                                                               </span>
<span class="6953602109235869781" onmouseenter="enter('6953602109235869781');" onmouseout="out('6953602109235869781');" style="">1440                     final String name = parser.getName();                                                </span>
<span  style="">1441                                                                                                          </span>
<span class="7121161214099969316" onmouseenter="enter('7121161214099969316');" onmouseout="out('7121161214099969316');" style="">1442                     if (TAG_INCLUDE.equals(name)) {                                                      </span>
<span  style="">1443                                                                                                          </span>
<span class="7620964305819267835" onmouseenter="enter('7620964305819267835');" onmouseout="out('7620964305819267835');" style="">1444                         final int resId = getAttributeResourceValue(parser, ATTR_WORKSPACE, 0);          </span>
<span  style="">1445                                                                                                          </span>
<span class="5009305539342447979" onmouseenter="enter('5009305539342447979');" onmouseout="out('5009305539342447979');" style=""><abbr title="1446                         if (LOGD) Log.v(TAG, String.format((&quot;%&quot; + (2*(depth+1)) + &quot;s&lt;include workspace=%08x&gt;&quot;),">1446                         if (LOGD) Log.v(TAG, String.format((&quot;%&quot; + (2*(depth+1)) + &quot;s&lt;include workspace=%0🔵</abbr></span>
<span class="-5278900941069439400" onmouseenter="enter('-5278900941069439400');" onmouseout="out('-5278900941069439400');" style="">1447                                 &quot;&quot;, resId));                                                             </span>
<span  style="">1448                                                                                                          </span>
<span class="7300117017390195413" onmouseenter="enter('7300117017390195413');" onmouseout="out('7300117017390195413');" style="">1449                         if (resId != 0 &amp;&amp; resId != workspaceResourceId) {                                </span>
<span class="-8087579639415016515" onmouseenter="enter('-8087579639415016515');" onmouseout="out('-8087579639415016515');" style="">1450                             // recursively load some more favorites, why not?                            </span>
<span class="-9207845823385341803" onmouseenter="enter('-9207845823385341803');" onmouseout="out('-9207845823385341803');" style="">1451                             count += loadFavoritesRecursive(db, res, resId, screenIds);                  </span>
<span class="8338453324960120992" onmouseenter="enter('8338453324960120992');" onmouseout="out('8338453324960120992');" style="">1452                             added = false;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1453                         } else {                                                                         </span>
<span class="6706749223879539247" onmouseenter="enter('6706749223879539247');" onmouseout="out('6706749223879539247');" style="">1454                             Log.w(TAG, String.format(&quot;Skipping &lt;include workspace=0x%08x&gt;&quot;, resId));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1455                         }                                                                                </span>
<span  style="">1456                                                                                                          </span>
<span class="-989461511285824675" onmouseenter="enter('-989461511285824675');" onmouseout="out('-989461511285824675');" style="">1457                         if (LOGD) Log.v(TAG, String.format((&quot;%&quot; + (2*(depth+1)) + &quot;s&lt;/include&gt;&quot;), &quot;&quot;));  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1458                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1459                     }                                                                                    </span>
<span  style="">1460                                                                                                          </span>
<span class="5686456002215125351" onmouseenter="enter('5686456002215125351');" onmouseout="out('5686456002215125351');" style="">1461                     // Assuming it&#x27;s a &lt;favorite&gt; at this point                                          </span>
<span class="8876313664838771927" onmouseenter="enter('8876313664838771927');" onmouseout="out('8876313664838771927');" style="">1462                     long container = LauncherSettings.Favorites.CONTAINER_DESKTOP;                       </span>
<span class="-8953477941003932421" onmouseenter="enter('-8953477941003932421');" onmouseout="out('-8953477941003932421');" style="">1463                     String strContainer = getAttributeValue(parser, ATTR_CONTAINER);                     </span>
<span class="4899636274002469854" onmouseenter="enter('4899636274002469854');" onmouseout="out('4899636274002469854');" style="">1464                     if (strContainer != null) {                                                          </span>
<span class="-6141382636405232855" onmouseenter="enter('-6141382636405232855');" onmouseout="out('-6141382636405232855');" style="">1465                         container = Long.valueOf(strContainer);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1466                     }                                                                                    </span>
<span  style="">1467                                                                                                          </span>
<span class="5916925922507241391" onmouseenter="enter('5916925922507241391');" onmouseout="out('5916925922507241391');" style="">1468                     String screen = getAttributeValue(parser, ATTR_SCREEN);                              </span>
<span class="-5754720008436749732" onmouseenter="enter('-5754720008436749732');" onmouseout="out('-5754720008436749732');" style="">1469                     String x = getAttributeValue(parser, ATTR_X);                                        </span>
<span class="6090763299686616782" onmouseenter="enter('6090763299686616782');" onmouseout="out('6090763299686616782');" style="">1470                     String y = getAttributeValue(parser, ATTR_Y);                                        </span>
<span  style="">1471                                                                                                          </span>
<span class="6295623415315599771" onmouseenter="enter('6295623415315599771');" onmouseout="out('6295623415315599771');" style="">1472                     values.clear();                                                                      </span>
<span class="7684212050113439789" onmouseenter="enter('7684212050113439789');" onmouseout="out('7684212050113439789');" style="">1473                     values.put(LauncherSettings.Favorites.CONTAINER, container);                         </span>
<span class="4993135311254983149" onmouseenter="enter('4993135311254983149');" onmouseout="out('4993135311254983149');" style="">1474                     values.put(LauncherSettings.Favorites.SCREEN, screen);                               </span>
<span class="4999709216465616432" onmouseenter="enter('4999709216465616432');" onmouseout="out('4999709216465616432');" style="">1475                     values.put(LauncherSettings.Favorites.CELLX, x);                                     </span>
<span class="-2755037476439373326" onmouseenter="enter('-2755037476439373326');" onmouseout="out('-2755037476439373326');" style="">1476                     values.put(LauncherSettings.Favorites.CELLY, y);                                     </span>
<span  style="">1477                                                                                                          </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1478                     if (LOGD) {                                                                          </span>
<span class="5581535071295035524" onmouseenter="enter('5581535071295035524');" onmouseout="out('5581535071295035524');" style="">1479                         final String title = getAttributeValue(parser, ATTR_TITLE);                      </span>
<span class="-615495327061628051" onmouseenter="enter('-615495327061628051');" onmouseout="out('-615495327061628051');" style="">1480                         final String pkg = getAttributeValue(parser, ATTR_PACKAGE_NAME);                 </span>
<span class="-3502249795865144059" onmouseenter="enter('-3502249795865144059');" onmouseout="out('-3502249795865144059');" style="">1481                         final String something = title != null ? title : pkg;                            </span>
<span class="-7031637576101422130" onmouseenter="enter('-7031637576101422130');" onmouseout="out('-7031637576101422130');" style="">1482                         Log.v(TAG, String.format(                                                        </span>
<span class="-4069192886577727005" onmouseenter="enter('-4069192886577727005');" onmouseout="out('-4069192886577727005');" style="">1483                                 (&quot;%&quot; + (2*(depth+1)) + &quot;s&lt;%s%s c=%d s=%s x=%s y=%s&gt;&quot;),                   </span>
<span class="-7745111780849965500" onmouseenter="enter('-7745111780849965500');" onmouseout="out('-7745111780849965500');" style="">1484                                 &quot;&quot;, name,                                                                </span>
<span class="-7186929577255479626" onmouseenter="enter('-7186929577255479626');" onmouseout="out('-7186929577255479626');" style="">1485                                 (something == null ? &quot;&quot; : (&quot; \&quot;&quot; + something + &quot;\&quot;&quot;)),                   </span>
<span class="-8681909485021689501" onmouseenter="enter('-8681909485021689501');" onmouseout="out('-8681909485021689501');" style="">1486                                 container, screen, x, y));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487                     }                                                                                    </span>
<span  style="">1488                                                                                                          </span>
<span class="-7400969844258462201" onmouseenter="enter('-7400969844258462201');" onmouseout="out('-7400969844258462201');" style="">1489                     if (TAG_FAVORITE.equals(name)) {                                                     </span>
<span class="-3583571169175857402" onmouseenter="enter('-3583571169175857402');" onmouseout="out('-3583571169175857402');" style="">1490                         long id = addAppShortcut(db, values, parser);                                    </span>
<span class="2121580753897534719" onmouseenter="enter('2121580753897534719');" onmouseout="out('2121580753897534719');" style="">1491                         added = id &gt;= 0;                                                                 </span>
<span class="-5542257851689667934" onmouseenter="enter('-5542257851689667934');" onmouseout="out('-5542257851689667934');" style="">1492                     } else if (TAG_APPWIDGET.equals(name)) {                                             </span>
<span class="-794100780748822491" onmouseenter="enter('-794100780748822491');" onmouseout="out('-794100780748822491');" style="">1493                         added = addAppWidget(parser, type, db, values);                                  </span>
<span class="5570272146833981560" onmouseenter="enter('5570272146833981560');" onmouseout="out('5570272146833981560');" style="">1494                     } else if (TAG_SHORTCUT.equals(name)) {                                              </span>
<span class="8022235443544838146" onmouseenter="enter('8022235443544838146');" onmouseout="out('8022235443544838146');" style="">1495                         long id = addUriShortcut(db, values, res, parser);                               </span>
<span class="2121580753897534719" onmouseenter="enter('2121580753897534719');" onmouseout="out('2121580753897534719');" style="">1496                         added = id &gt;= 0;                                                                 </span>
<span class="-3245733975064069652" onmouseenter="enter('-3245733975064069652');" onmouseout="out('-3245733975064069652');" style="">1497                     } else if (TAG_RESOLVE.equals(name)) {                                               </span>
<span class="-6168769572729066790" onmouseenter="enter('-6168769572729066790');" onmouseout="out('-6168769572729066790');" style="">1498                         // This looks through the contained favorites (or meta-favorites) and            </span>
<span class="-5232686756441164968" onmouseenter="enter('-5232686756441164968');" onmouseout="out('-5232686756441164968');" style="">1499                         // attempts to add them as shortcuts in the fallback group&#x27;s location            </span>
<span class="-3164145926865392434" onmouseenter="enter('-3164145926865392434');" onmouseout="out('-3164145926865392434');" style="">1500                         // until one is added successfully.                                              </span>
<span class="8338453324960120992" onmouseenter="enter('8338453324960120992');" onmouseout="out('8338453324960120992');" style="">1501                         added = false;                                                                   </span>
<span class="-7289409140421595237" onmouseenter="enter('-7289409140421595237');" onmouseout="out('-7289409140421595237');" style="">1502                         final int groupDepth = parser.getDepth();                                        </span>
<span class="-2406917717669951461" onmouseenter="enter('-2406917717669951461');" onmouseout="out('-2406917717669951461');" style="">1503                         while ((type = parser.next()) != XmlPullParser.END_TAG ||                        </span>
<span class="8687802670126733847" onmouseenter="enter('8687802670126733847');" onmouseout="out('8687802670126733847');" style="">1504                                 parser.getDepth() &gt; groupDepth) {                                        </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1505                             if (type != XmlPullParser.START_TAG) {                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1506                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1507                             }                                                                            </span>
<span class="-4826163157610997597" onmouseenter="enter('-4826163157610997597');" onmouseout="out('-4826163157610997597');" style="">1508                             final String fallback_item_name = parser.getName();                          </span>
<span class="-2022810481919856801" onmouseenter="enter('-2022810481919856801');" onmouseout="out('-2022810481919856801');" style="">1509                             if (!added) {                                                                </span>
<span class="3394509129787922860" onmouseenter="enter('3394509129787922860');" onmouseout="out('3394509129787922860');" style="">1510                                 if (TAG_FAVORITE.equals(fallback_item_name)) {                           </span>
<span class="-1179477971979967689" onmouseenter="enter('-1179477971979967689');" onmouseout="out('-1179477971979967689');" style="">1511                                     final long id = addAppShortcut(db, values, parser);                  </span>
<span class="2121580753897534719" onmouseenter="enter('2121580753897534719');" onmouseout="out('2121580753897534719');" style="">1512                                     added = id &gt;= 0;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1513                                 } else {                                                                 </span>
<span class="-6448281100759930849" onmouseenter="enter('-6448281100759930849');" onmouseout="out('-6448281100759930849');" style="">1514                                     Log.e(TAG, &quot;Fallback groups can contain only favorites, found &quot;      </span>
<span class="1123550495059434881" onmouseenter="enter('1123550495059434881');" onmouseout="out('1123550495059434881');" style="">1515                                             + fallback_item_name);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1516                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1517                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1518                         }                                                                                </span>
<span class="-6568529531723639383" onmouseenter="enter('-6568529531723639383');" onmouseout="out('-6568529531723639383');" style="">1519                     } else if (TAG_FOLDER.equals(name)) {                                                </span>
<span class="71049762543313083" onmouseenter="enter('71049762543313083');" onmouseout="out('71049762543313083');" style="">1520                         // Folder contents are nested in this XML file                                   </span>
<span class="2932998739880291847" onmouseenter="enter('2932998739880291847');" onmouseout="out('2932998739880291847');" style="">1521                         added = loadFolder(db, values, res, parser);                                     </span>
<span  style="">1522                                                                                                          </span>
<span class="-8705641483066545971" onmouseenter="enter('-8705641483066545971');" onmouseout="out('-8705641483066545971');" style="">1523                     } else if (TAG_PARTNER_FOLDER.equals(name)) {                                        </span>
<span class="9058192063405184929" onmouseenter="enter('9058192063405184929');" onmouseout="out('9058192063405184929');" style="">1524                         // Folder contents come from an external XML resource                            </span>
<span class="-6415916158480032673" onmouseenter="enter('-6415916158480032673');" onmouseout="out('-6415916158480032673');" style="">1525                         final Partner partner = Partner.get(mPackageManager);                            </span>
<span class="-9215364277253785969" onmouseenter="enter('-9215364277253785969');" onmouseout="out('-9215364277253785969');" style="">1526                         if (partner != null) {                                                           </span>
<span class="882794219866203698" onmouseenter="enter('882794219866203698');" onmouseout="out('882794219866203698');" style="">1527                             final Resources partnerRes = partner.getResources();                         </span>
<span class="-8656173913287474605" onmouseenter="enter('-8656173913287474605');" onmouseout="out('-8656173913287474605');" style="">1528                             final int resId = partnerRes.getIdentifier(Partner.RES_FOLDER,               </span>
<span class="-8179104168031182438" onmouseenter="enter('-8179104168031182438');" onmouseout="out('-8179104168031182438');" style="">1529                                     &quot;xml&quot;, partner.getPackageName());                                    </span>
<span class="-5151212692288250908" onmouseenter="enter('-5151212692288250908');" onmouseout="out('-5151212692288250908');" style="">1530                             if (resId != 0) {                                                            </span>
<span class="5087581180241899012" onmouseenter="enter('5087581180241899012');" onmouseout="out('5087581180241899012');" style="">1531                                 final XmlResourceParser partnerParser = partnerRes.getXml(resId);        </span>
<span class="7615154974472081807" onmouseenter="enter('7615154974472081807');" onmouseout="out('7615154974472081807');" style="">1532                                 beginDocument(partnerParser, TAG_FOLDER);                                </span>
<span class="1361048869780355583" onmouseenter="enter('1361048869780355583');" onmouseout="out('1361048869780355583');" style="">1533                                 added = loadFolder(db, values, partnerRes, partnerParser);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1534                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1535                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1536                     }                                                                                    </span>
<span class="148792127233014890" onmouseenter="enter('148792127233014890');" onmouseout="out('148792127233014890');" style="">1537                     if (added) {                                                                         </span>
<span class="-7037897563787549194" onmouseenter="enter('-7037897563787549194');" onmouseout="out('-7037897563787549194');" style="">1538                         long screenId = Long.parseLong(screen);                                          </span>
<span class="-5031779467583606850" onmouseenter="enter('-5031779467583606850');" onmouseout="out('-5031779467583606850');" style="">1539                         // Keep track of the set of screens which need to be added to the db.            </span>
<span class="4419145976437675753" onmouseenter="enter('4419145976437675753');" onmouseout="out('4419145976437675753');" style="">1540                         if (!screenIds.contains(screenId) &amp;&amp;                                             </span>
<span class="1621253454097657233" onmouseenter="enter('1621253454097657233');" onmouseout="out('1621253454097657233');" style="">1541                                 container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {             </span>
<span class="9120373975407210091" onmouseenter="enter('9120373975407210091');" onmouseout="out('9120373975407210091');" style="">1542                             screenIds.add(screenId);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1543                         }                                                                                </span>
<span class="5122134618962228848" onmouseenter="enter('5122134618962228848');" onmouseout="out('5122134618962228848');" style="">1544                         count++;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1545                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546                 }                                                                                        </span>
<span class="8072590548933783276" onmouseenter="enter('8072590548933783276');" onmouseout="out('8072590548933783276');" style="">1547             } catch (XmlPullParserException e) {                                                         </span>
<span class="-8490721556765967950" onmouseenter="enter('-8490721556765967950');" onmouseout="out('-8490721556765967950');" style="">1548                 Log.w(TAG, &quot;Got exception parsing favorites.&quot;, e);                                       </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1549             } catch (IOException e) {                                                                    </span>
<span class="-8490721556765967950" onmouseenter="enter('-8490721556765967950');" onmouseout="out('-8490721556765967950');" style="">1550                 Log.w(TAG, &quot;Got exception parsing favorites.&quot;, e);                                       </span>
<span class="1200625667814236005" onmouseenter="enter('1200625667814236005');" onmouseout="out('1200625667814236005');" style="">1551             } catch (RuntimeException e) {                                                               </span>
<span class="-8490721556765967950" onmouseenter="enter('-8490721556765967950');" onmouseout="out('-8490721556765967950');" style="">1552                 Log.w(TAG, &quot;Got exception parsing favorites.&quot;, e);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1553             }                                                                                            </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style="">1554             return count;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1555         }                                                                                                </span>
<span  style="">1556                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1557         /**                                                                                              </span>
<span class="836981209199049033" onmouseenter="enter('836981209199049033');" onmouseout="out('836981209199049033');" style="">1558          * Parse folder items starting at {@link XmlPullParser} location. Allow recursive                </span>
<span class="8269421111426004126" onmouseenter="enter('8269421111426004126');" onmouseout="out('8269421111426004126');" style="">1559          * includes of items.                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1560          */                                                                                              </span>
<span class="-6714322983826762636" onmouseenter="enter('-6714322983826762636');" onmouseout="out('-6714322983826762636');" style="">1561         private void addToFolder(SQLiteDatabase db, Resources res, XmlResourceParser parser,             </span>
<span class="8336143775167702041" onmouseenter="enter('8336143775167702041');" onmouseout="out('8336143775167702041');" style="">1562                 ArrayList&lt;Long&gt; folderItems, long folderId) throws IOException, XmlPullParserException { </span>
<span class="3163913122247807134" onmouseenter="enter('3163913122247807134');" onmouseout="out('3163913122247807134');" style="">1563             int type;                                                                                    </span>
<span class="-3224406969225576043" onmouseenter="enter('-3224406969225576043');" onmouseout="out('-3224406969225576043');" style="">1564             int folderDepth = parser.getDepth();                                                         </span>
<span class="-2406917717669951461" onmouseenter="enter('-2406917717669951461');" onmouseout="out('-2406917717669951461');" style="">1565             while ((type = parser.next()) != XmlPullParser.END_TAG ||                                    </span>
<span class="4017526817899016645" onmouseenter="enter('4017526817899016645');" onmouseout="out('4017526817899016645');" style="">1566                     parser.getDepth() &gt; folderDepth) {                                                   </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1567                 if (type != XmlPullParser.START_TAG) {                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1568                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1569                 }                                                                                        </span>
<span class="686677976894615180" onmouseenter="enter('686677976894615180');" onmouseout="out('686677976894615180');" style="">1570                 final String tag = parser.getName();                                                     </span>
<span  style="">1571                                                                                                          </span>
<span class="7615212261878509112" onmouseenter="enter('7615212261878509112');" onmouseout="out('7615212261878509112');" style="">1572                 final ContentValues childValues = new ContentValues();                                   </span>
<span class="4831363376490170629" onmouseenter="enter('4831363376490170629');" onmouseout="out('4831363376490170629');" style="">1573                 childValues.put(LauncherSettings.Favorites.CONTAINER, folderId);                         </span>
<span  style="">1574                                                                                                          </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1575                 if (LOGD) {                                                                              </span>
<span class="-615495327061628051" onmouseenter="enter('-615495327061628051');" onmouseout="out('-615495327061628051');" style="">1576                     final String pkg = getAttributeValue(parser, ATTR_PACKAGE_NAME);                     </span>
<span class="-1954941607715586859" onmouseenter="enter('-1954941607715586859');" onmouseout="out('-1954941607715586859');" style="">1577                     final String uri = getAttributeValue(parser, ATTR_URI);                              </span>
<span class="3789876690425623667" onmouseenter="enter('3789876690425623667');" onmouseout="out('3789876690425623667');" style="">1578                     Log.v(TAG, String.format((&quot;%&quot; + (2*(folderDepth+1)) + &quot;s&lt;%s \&quot;%s\&quot;&gt;&quot;), &quot;&quot;,           </span>
<span class="-2863539958754101738" onmouseenter="enter('-2863539958754101738');" onmouseout="out('-2863539958754101738');" style="">1579                             tag, uri != null ? uri : pkg));                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1580                 }                                                                                        </span>
<span  style="">1581                                                                                                          </span>
<span class="6780528027807053427" onmouseenter="enter('6780528027807053427');" onmouseout="out('6780528027807053427');" style="">1582                 if (TAG_FAVORITE.equals(tag) &amp;&amp; folderId &gt;= 0) {                                         </span>
<span class="3781180143059799820" onmouseenter="enter('3781180143059799820');" onmouseout="out('3781180143059799820');" style="">1583                     final long id = addAppShortcut(db, childValues, parser);                             </span>
<span class="-6131649387216162152" onmouseenter="enter('-6131649387216162152');" onmouseout="out('-6131649387216162152');" style="">1584                     if (id &gt;= 0) {                                                                       </span>
<span class="-1096537071693041204" onmouseenter="enter('-1096537071693041204');" onmouseout="out('-1096537071693041204');" style="">1585                         folderItems.add(id);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586                     }                                                                                    </span>
<span class="5913908479161166408" onmouseenter="enter('5913908479161166408');" onmouseout="out('5913908479161166408');" style="">1587                 } else if (TAG_SHORTCUT.equals(tag) &amp;&amp; folderId &gt;= 0) {                                  </span>
<span class="237201187676118050" onmouseenter="enter('237201187676118050');" onmouseout="out('237201187676118050');" style="">1588                     final long id = addUriShortcut(db, childValues, res, parser);                        </span>
<span class="-6131649387216162152" onmouseenter="enter('-6131649387216162152');" onmouseout="out('-6131649387216162152');" style="">1589                     if (id &gt;= 0) {                                                                       </span>
<span class="-1096537071693041204" onmouseenter="enter('-1096537071693041204');" onmouseout="out('-1096537071693041204');" style="">1590                         folderItems.add(id);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1591                     }                                                                                    </span>
<span class="4981411679036563463" onmouseenter="enter('4981411679036563463');" onmouseout="out('4981411679036563463');" style="">1592                 } else if (TAG_INCLUDE.equals(tag) &amp;&amp; folderId &gt;= 0) {                                   </span>
<span class="5205334322096840205" onmouseenter="enter('5205334322096840205');" onmouseout="out('5205334322096840205');" style="">1593                     addToFolder(db, res, parser, folderItems, folderId);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1594                 } else {                                                                                 </span>
<span class="-7780626705587841890" onmouseenter="enter('-7780626705587841890');" onmouseout="out('-7780626705587841890');" style="">1595                     throw new RuntimeException(&quot;Folders can contain only shortcuts&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1596                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1597             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1598         }                                                                                                </span>
<span  style="">1599                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1600         /**                                                                                              </span>
<span class="-8056675503068640259" onmouseenter="enter('-8056675503068640259');" onmouseout="out('-8056675503068640259');" style="">1601          * Parse folder starting at current {@link XmlPullParser} location.                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1602          */                                                                                              </span>
<span class="8978590628354582362" onmouseenter="enter('8978590628354582362');" onmouseout="out('8978590628354582362');" style="">1603         private boolean loadFolder(SQLiteDatabase db, ContentValues values, Resources res,               </span>
<span class="-8666274943825815454" onmouseenter="enter('-8666274943825815454');" onmouseout="out('-8666274943825815454');" style="">1604                 XmlResourceParser parser) throws IOException, XmlPullParserException {                   </span>
<span class="6068944415246137076" onmouseenter="enter('6068944415246137076');" onmouseout="out('6068944415246137076');" style="">1605             final String title;                                                                          </span>
<span class="-292812422880448019" onmouseenter="enter('-292812422880448019');" onmouseout="out('-292812422880448019');" style="">1606             final int titleResId = getAttributeResourceValue(parser, ATTR_TITLE, 0);                     </span>
<span class="1172124852597632506" onmouseenter="enter('1172124852597632506');" onmouseout="out('1172124852597632506');" style="">1607             if (titleResId != 0) {                                                                       </span>
<span class="-4529263519280472672" onmouseenter="enter('-4529263519280472672');" onmouseout="out('-4529263519280472672');" style="">1608                 title = res.getString(titleResId);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1609             } else {                                                                                     </span>
<span class="2584661107016073001" onmouseenter="enter('2584661107016073001');" onmouseout="out('2584661107016073001');" style="">1610                 title = mContext.getResources().getString(R.string.folder_name);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1611             }                                                                                            </span>
<span  style="">1612                                                                                                          </span>
<span class="-1277878518627790922" onmouseenter="enter('-1277878518627790922');" onmouseout="out('-1277878518627790922');" style="">1613             values.put(LauncherSettings.Favorites.TITLE, title);                                         </span>
<span class="-8989728490994499632" onmouseenter="enter('-8989728490994499632');" onmouseout="out('-8989728490994499632');" style="">1614             long folderId = addFolder(db, values);                                                       </span>
<span class="3863242801439444025" onmouseenter="enter('3863242801439444025');" onmouseout="out('3863242801439444025');" style="">1615             boolean added = folderId &gt;= 0;                                                               </span>
<span  style="">1616                                                                                                          </span>
<span class="70925917645446442" onmouseenter="enter('70925917645446442');" onmouseout="out('70925917645446442');" style="">1617             ArrayList&lt;Long&gt; folderItems = new ArrayList&lt;Long&gt;();                                         </span>
<span class="5205334322096840205" onmouseenter="enter('5205334322096840205');" onmouseout="out('5205334322096840205');" style="">1618             addToFolder(db, res, parser, folderItems, folderId);                                         </span>
<span  style="">1619                                                                                                          </span>
<span class="-9068618732040691287" onmouseenter="enter('-9068618732040691287');" onmouseout="out('-9068618732040691287');" style="">1620             // We can only have folders with &gt;= 2 items, so we need to remove the                        </span>
<span class="7493806660013471529" onmouseenter="enter('7493806660013471529');" onmouseout="out('7493806660013471529');" style="">1621             // folder and clean up if less than 2 items were included, or some                           </span>
<span class="-4544163504149488130" onmouseenter="enter('-4544163504149488130');" onmouseout="out('-4544163504149488130');" style="">1622             // failed to add, and less than 2 were actually added                                        </span>
<span class="-2518589436522803659" onmouseenter="enter('-2518589436522803659');" onmouseout="out('-2518589436522803659');" style="">1623             if (folderItems.size() &lt; 2 &amp;&amp; folderId &gt;= 0) {                                               </span>
<span class="4611134147445993465" onmouseenter="enter('4611134147445993465');" onmouseout="out('4611134147445993465');" style="">1624                 // Delete the folder                                                                     </span>
<span class="-4280166743678078053" onmouseenter="enter('-4280166743678078053');" onmouseout="out('-4280166743678078053');" style="">1625                 deleteId(db, folderId);                                                                  </span>
<span  style="">1626                                                                                                          </span>
<span class="-7639050556018902006" onmouseenter="enter('-7639050556018902006');" onmouseout="out('-7639050556018902006');" style="">1627                 // If we have a single item, promote it to where the folder                              </span>
<span class="8958956222431385245" onmouseenter="enter('8958956222431385245');" onmouseout="out('8958956222431385245');" style="">1628                 // would have been.                                                                      </span>
<span class="-557617943835263419" onmouseenter="enter('-557617943835263419');" onmouseout="out('-557617943835263419');" style="">1629                 if (folderItems.size() == 1) {                                                           </span>
<span class="7615212261878509112" onmouseenter="enter('7615212261878509112');" onmouseout="out('7615212261878509112');" style="">1630                     final ContentValues childValues = new ContentValues();                               </span>
<span class="-3563728128688510119" onmouseenter="enter('-3563728128688510119');" onmouseout="out('-3563728128688510119');" style="">1631                     copyInteger(values, childValues, LauncherSettings.Favorites.CONTAINER);              </span>
<span class="9115692663157203715" onmouseenter="enter('9115692663157203715');" onmouseout="out('9115692663157203715');" style="">1632                     copyInteger(values, childValues, LauncherSettings.Favorites.SCREEN);                 </span>
<span class="5272896392361170626" onmouseenter="enter('5272896392361170626');" onmouseout="out('5272896392361170626');" style="">1633                     copyInteger(values, childValues, LauncherSettings.Favorites.CELLX);                  </span>
<span class="3676490222384154846" onmouseenter="enter('3676490222384154846');" onmouseout="out('3676490222384154846');" style="">1634                     copyInteger(values, childValues, LauncherSettings.Favorites.CELLY);                  </span>
<span  style="">1635                                                                                                          </span>
<span class="-5157861693853617290" onmouseenter="enter('-5157861693853617290');" onmouseout="out('-5157861693853617290');" style="">1636                     final long id = folderItems.get(0);                                                  </span>
<span class="-1976987628722223211" onmouseenter="enter('-1976987628722223211');" onmouseout="out('-1976987628722223211');" style="">1637                     db.update(TABLE_FAVORITES, childValues,                                              </span>
<span class="-5367643604571967383" onmouseenter="enter('-5367643604571967383');" onmouseout="out('-5367643604571967383');" style="">1638                             LauncherSettings.Favorites._ID + &quot;=&quot; + id, null);                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1639                 } else {                                                                                 </span>
<span class="8338453324960120992" onmouseenter="enter('8338453324960120992');" onmouseout="out('8338453324960120992');" style="">1640                     added = false;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1641                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1642             }                                                                                            </span>
<span class="-5472428940030548841" onmouseenter="enter('-5472428940030548841');" onmouseout="out('-5472428940030548841');" style="">1643             return added;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1644         }                                                                                                </span>
<span  style="">1645                                                                                                          </span>
<span class="-5994840823969871341" onmouseenter="enter('-5994840823969871341');" onmouseout="out('-5994840823969871341');" style="">1646         // A meta shortcut attempts to resolve an intent specified as a URI in the XML, if a             </span>
<span class="-1792726061654942513" onmouseenter="enter('-1792726061654942513');" onmouseout="out('-1792726061654942513');" style="">1647         // logical choice for what shortcut should be used for that intent exists, then it is            </span>
<span class="4044577505779949612" onmouseenter="enter('4044577505779949612');" onmouseout="out('4044577505779949612');" style="">1648         // added. Otherwise add nothing.                                                                 </span>
<span class="-155901270112013596" onmouseenter="enter('-155901270112013596');" onmouseout="out('-155901270112013596');" style="">1649         private long addAppShortcutByUri(SQLiteDatabase db, ContentValues values,                        </span>
<span class="-5544610414896424300" onmouseenter="enter('-5544610414896424300');" onmouseout="out('-5544610414896424300');" style="">1650                 String intentUri) {                                                                      </span>
<span class="-4423970447189602618" onmouseenter="enter('-4423970447189602618');" onmouseout="out('-4423970447189602618');" style="">1651             Intent metaIntent;                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1652             try {                                                                                        </span>
<span class="-780892654735640073" onmouseenter="enter('-780892654735640073');" onmouseout="out('-780892654735640073');" style="">1653                 metaIntent = Intent.parseUri(intentUri, 0);                                              </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1654             } catch (URISyntaxException e) {                                                             </span>
<span class="-8064100063882654504" onmouseenter="enter('-8064100063882654504');" onmouseout="out('-8064100063882654504');" style="">1655                 Log.e(TAG, &quot;Unable to add meta-favorite: &quot; + intentUri, e);                              </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1656                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1657             }                                                                                            </span>
<span  style="">1658                                                                                                          </span>
<span class="8557033759361467860" onmouseenter="enter('8557033759361467860');" onmouseout="out('8557033759361467860');" style="">1659             ResolveInfo resolved = mPackageManager.resolveActivity(metaIntent,                           </span>
<span class="2456166036476176214" onmouseenter="enter('2456166036476176214');" onmouseout="out('2456166036476176214');" style="">1660                     PackageManager.MATCH_DEFAULT_ONLY);                                                  </span>
<span class="-1300490748614024222" onmouseenter="enter('-1300490748614024222');" onmouseout="out('-1300490748614024222');" style="">1661             final List&lt;ResolveInfo&gt; appList = mPackageManager.queryIntentActivities(                     </span>
<span class="8656178102542661668" onmouseenter="enter('8656178102542661668');" onmouseout="out('8656178102542661668');" style="">1662                     metaIntent, PackageManager.MATCH_DEFAULT_ONLY);                                      </span>
<span  style="">1663                                                                                                          </span>
<span class="3807468246607352644" onmouseenter="enter('3807468246607352644');" onmouseout="out('3807468246607352644');" style="">1664             // Verify that the result is an app and not just the resolver dialog asking which            </span>
<span class="3786398014846262159" onmouseenter="enter('3786398014846262159');" onmouseout="out('3786398014846262159');" style="">1665             // app to use.                                                                               </span>
<span class="-2527999738736768738" onmouseenter="enter('-2527999738736768738');" onmouseout="out('-2527999738736768738');" style="">1666             if (wouldLaunchResolverActivity(resolved, appList)) {                                        </span>
<span class="-1508864482817632041" onmouseenter="enter('-1508864482817632041');" onmouseout="out('-1508864482817632041');" style="">1667                 // If only one of the results is a system app then choose that as the default.           </span>
<span class="7096358968319388823" onmouseenter="enter('7096358968319388823');" onmouseout="out('7096358968319388823');" style="">1668                 final ResolveInfo systemApp = getSingleSystemActivity(appList);                          </span>
<span class="3112641083889325831" onmouseenter="enter('3112641083889325831');" onmouseout="out('3112641083889325831');" style="">1669                 if (systemApp == null) {                                                                 </span>
<span class="8733485116897338114" onmouseenter="enter('8733485116897338114');" onmouseout="out('8733485116897338114');" style="">1670                     // There is no logical choice for this meta-favorite, so rather than making          </span>
<span class="-5798817995675177798" onmouseenter="enter('-5798817995675177798');" onmouseout="out('-5798817995675177798');" style="">1671                     // a bad choice just add nothing.                                                    </span>
<span class="8234306782594839467" onmouseenter="enter('8234306782594839467');" onmouseout="out('8234306782594839467');" style="">1672                     Log.w(TAG, &quot;No preference or single system activity found for &quot;                      </span>
<span class="-4585840856389419283" onmouseenter="enter('-4585840856389419283');" onmouseout="out('-4585840856389419283');" style="">1673                             + metaIntent.toString());                                                    </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1674                     return -1;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1675                 }                                                                                        </span>
<span class="-2210262899281174552" onmouseenter="enter('-2210262899281174552');" onmouseout="out('-2210262899281174552');" style="">1676                 resolved = systemApp;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1677             }                                                                                            </span>
<span class="3942116430564013468" onmouseenter="enter('3942116430564013468');" onmouseout="out('3942116430564013468');" style="">1678             final ActivityInfo info = resolved.activityInfo;                                             </span>
<span class="-360088289411741304" onmouseenter="enter('-360088289411741304');" onmouseout="out('-360088289411741304');" style="">1679             final Intent intent = mPackageManager.getLaunchIntentForPackage(info.packageName);           </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">1680             if (intent == null) {                                                                        </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1681                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1682             }                                                                                            </span>
<span class="2514039366923723926" onmouseenter="enter('2514039366923723926');" onmouseout="out('2514039366923723926');" style="">1683             intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |                                              </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">1684                     Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                                          </span>
<span  style="">1685                                                                                                          </span>
<span class="-4637301020367561713" onmouseenter="enter('-4637301020367561713');" onmouseout="out('-4637301020367561713');" style="">1686             return addAppShortcut(db, values, info.loadLabel(mPackageManager).toString(), intent);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1687         }                                                                                                </span>
<span  style="">1688                                                                                                          </span>
<span class="3433873162423347490" onmouseenter="enter('3433873162423347490');" onmouseout="out('3433873162423347490');" style="">1689         private ResolveInfo getSingleSystemActivity(List&lt;ResolveInfo&gt; appList) {                         </span>
<span class="4100859717391359582" onmouseenter="enter('4100859717391359582');" onmouseout="out('4100859717391359582');" style="">1690             ResolveInfo systemResolve = null;                                                            </span>
<span class="-6501614514316220785" onmouseenter="enter('-6501614514316220785');" onmouseout="out('-6501614514316220785');" style="">1691             final int N = appList.size();                                                                </span>
<span class="-7972660160186921434" onmouseenter="enter('-7972660160186921434');" onmouseout="out('-7972660160186921434');" style="">1692             for (int i = 0; i &lt; N; ++i) {                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1693                 try {                                                                                    </span>
<span class="6969736750563256446" onmouseenter="enter('6969736750563256446');" onmouseout="out('6969736750563256446');" style="">1694                     ApplicationInfo info = mPackageManager.getApplicationInfo(                           </span>
<span class="1402648097889367388" onmouseenter="enter('1402648097889367388');" onmouseout="out('1402648097889367388');" style="">1695                             appList.get(i).activityInfo.packageName, 0);                                 </span>
<span class="-476381142815111019" onmouseenter="enter('-476381142815111019');" onmouseout="out('-476381142815111019');" style="">1696                     if ((info.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {                               </span>
<span class="-6460956471084206715" onmouseenter="enter('-6460956471084206715');" onmouseout="out('-6460956471084206715');" style="">1697                         if (systemResolve != null) {                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1698                             return null;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1699                         } else {                                                                         </span>
<span class="-1920150334130463709" onmouseenter="enter('-1920150334130463709');" onmouseout="out('-1920150334130463709');" style="">1700                             systemResolve = appList.get(i);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1701                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1702                     }                                                                                    </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style="">1703                 } catch (PackageManager.NameNotFoundException e) {                                       </span>
<span class="-265560973846634126" onmouseenter="enter('-265560973846634126');" onmouseout="out('-265560973846634126');" style="">1704                     Log.w(TAG, &quot;Unable to get info about resolve results&quot;, e);                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1705                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1706                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1707             }                                                                                            </span>
<span class="-7251347768060538731" onmouseenter="enter('-7251347768060538731');" onmouseout="out('-7251347768060538731');" style="">1708             return systemResolve;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1709         }                                                                                                </span>
<span  style="">1710                                                                                                          </span>
<span class="-4222771116108434581" onmouseenter="enter('-4222771116108434581');" onmouseout="out('-4222771116108434581');" style="">1711         private boolean wouldLaunchResolverActivity(ResolveInfo resolved,                                </span>
<span class="8855822793352880756" onmouseenter="enter('8855822793352880756');" onmouseout="out('8855822793352880756');" style="">1712                 List&lt;ResolveInfo&gt; appList) {                                                             </span>
<span class="-6399418581489152967" onmouseenter="enter('-6399418581489152967');" onmouseout="out('-6399418581489152967');" style="">1713             // If the list contains the above resolved activity, then it can&#x27;t be                        </span>
<span class="4029821552264897243" onmouseenter="enter('4029821552264897243');" onmouseout="out('4029821552264897243');" style="">1714             // ResolverActivity itself.                                                                  </span>
<span class="4411552974527624379" onmouseenter="enter('4411552974527624379');" onmouseout="out('4411552974527624379');" style="">1715             for (int i = 0; i &lt; appList.size(); ++i) {                                                   </span>
<span class="-6814281994408040723" onmouseenter="enter('-6814281994408040723');" onmouseout="out('-6814281994408040723');" style="">1716                 ResolveInfo tmp = appList.get(i);                                                        </span>
<span class="-3160638667287468420" onmouseenter="enter('-3160638667287468420');" onmouseout="out('-3160638667287468420');" style="">1717                 if (tmp.activityInfo.name.equals(resolved.activityInfo.name)                             </span>
<span class="6821338150188138172" onmouseenter="enter('6821338150188138172');" onmouseout="out('6821338150188138172');" style="">1718                         &amp;&amp; tmp.activityInfo.packageName.equals(resolved.activityInfo.packageName)) {     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1719                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1720                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1721             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1722             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1723         }                                                                                                </span>
<span  style="">1724                                                                                                          </span>
<span class="2182986909311989225" onmouseenter="enter('2182986909311989225');" onmouseout="out('2182986909311989225');" style="">1725         private long addAppShortcut(SQLiteDatabase db, ContentValues values,                             </span>
<span class="-1953831149857843506" onmouseenter="enter('-1953831149857843506');" onmouseout="out('-1953831149857843506');" style="">1726                 XmlResourceParser parser) {                                                              </span>
<span class="-1797029550341626583" onmouseenter="enter('-1797029550341626583');" onmouseout="out('-1797029550341626583');" style="">1727             final String packageName = getAttributeValue(parser, ATTR_PACKAGE_NAME);                     </span>
<span class="292435478126887551" onmouseenter="enter('292435478126887551');" onmouseout="out('292435478126887551');" style="">1728             final String className = getAttributeValue(parser, ATTR_CLASS_NAME);                         </span>
<span class="-1954941607715586859" onmouseenter="enter('-1954941607715586859');" onmouseout="out('-1954941607715586859');" style="">1729             final String uri = getAttributeValue(parser, ATTR_URI);                                      </span>
<span  style="">1730                                                                                                          </span>
<span class="822368733919136546" onmouseenter="enter('822368733919136546');" onmouseout="out('822368733919136546');" style="">1731             if (!TextUtils.isEmpty(packageName) &amp;&amp; !TextUtils.isEmpty(className)) {                      </span>
<span class="-812929271411632064" onmouseenter="enter('-812929271411632064');" onmouseout="out('-812929271411632064');" style="">1732                 ActivityInfo info;                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1733                 try {                                                                                    </span>
<span class="3879056527391579072" onmouseenter="enter('3879056527391579072');" onmouseout="out('3879056527391579072');" style="">1734                     ComponentName cn;                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1735                     try {                                                                                </span>
<span class="-2625303589229365660" onmouseenter="enter('-2625303589229365660');" onmouseout="out('-2625303589229365660');" style="">1736                         cn = new ComponentName(packageName, className);                                  </span>
<span class="7198970208759356928" onmouseenter="enter('7198970208759356928');" onmouseout="out('7198970208759356928');" style="">1737                         info = mPackageManager.getActivityInfo(cn, 0);                                   </span>
<span class="-1236034709842272928" onmouseenter="enter('-1236034709842272928');" onmouseout="out('-1236034709842272928');" style="">1738                     } catch (PackageManager.NameNotFoundException nnfe) {                                </span>
<span class="9170643828915655827" onmouseenter="enter('9170643828915655827');" onmouseout="out('9170643828915655827');" style="">1739                         String[] packages = mPackageManager.currentToCanonicalPackageNames(              </span>
<span class="8150942388199951060" onmouseenter="enter('8150942388199951060');" onmouseout="out('8150942388199951060');" style="">1740                                 new String[] { packageName });                                           </span>
<span class="-5669551341563183030" onmouseenter="enter('-5669551341563183030');" onmouseout="out('-5669551341563183030');" style="">1741                         cn = new ComponentName(packages[0], className);                                  </span>
<span class="7198970208759356928" onmouseenter="enter('7198970208759356928');" onmouseout="out('7198970208759356928');" style="">1742                         info = mPackageManager.getActivityInfo(cn, 0);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1743                     }                                                                                    </span>
<span class="6144349283181420382" onmouseenter="enter('6144349283181420382');" onmouseout="out('6144349283181420382');" style="">1744                     final Intent intent = buildMainIntent();                                             </span>
<span class="1965368382885656907" onmouseenter="enter('1965368382885656907');" onmouseout="out('1965368382885656907');" style="">1745                     intent.setComponent(cn);                                                             </span>
<span class="2514039366923723926" onmouseenter="enter('2514039366923723926');" onmouseout="out('2514039366923723926');" style="">1746                     intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |                                      </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">1747                             Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                                  </span>
<span  style="">1748                                                                                                          </span>
<span class="-3995391046779511608" onmouseenter="enter('-3995391046779511608');" onmouseout="out('-3995391046779511608');" style="">1749                     return addAppShortcut(db, values, info.loadLabel(mPackageManager).toString(),        </span>
<span class="478877787810563864" onmouseenter="enter('478877787810563864');" onmouseout="out('478877787810563864');" style="">1750                             intent);                                                                     </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style="">1751                 } catch (PackageManager.NameNotFoundException e) {                                       </span>
<span class="-8677717928489849344" onmouseenter="enter('-8677717928489849344');" onmouseout="out('-8677717928489849344');" style="">1752                     Log.w(TAG, &quot;Unable to add favorite: &quot; + packageName +                                </span>
<span class="2184156839748033514" onmouseenter="enter('2184156839748033514');" onmouseout="out('2184156839748033514');" style="">1753                             &quot;/&quot; + className, e);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1754                 }                                                                                        </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1755                 return -1;                                                                               </span>
<span class="8157957067082875903" onmouseenter="enter('8157957067082875903');" onmouseout="out('8157957067082875903');" style="">1756             } else if (!TextUtils.isEmpty(uri)) {                                                        </span>
<span class="9183809099675717906" onmouseenter="enter('9183809099675717906');" onmouseout="out('9183809099675717906');" style="">1757                 // If no component specified try to find a shortcut to add from the URI.                 </span>
<span class="787045193894698076" onmouseenter="enter('787045193894698076');" onmouseout="out('787045193894698076');" style="">1758                 return addAppShortcutByUri(db, values, uri);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1759             } else {                                                                                     </span>
<span class="-8012351384438033294" onmouseenter="enter('-8012351384438033294');" onmouseout="out('-8012351384438033294');" style="">1760                 Log.e(TAG, &quot;Skipping invalid &lt;favorite&gt; with no component or uri&quot;);                      </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1761                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1762             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1763         }                                                                                                </span>
<span  style="">1764                                                                                                          </span>
<span class="5143222161199963889" onmouseenter="enter('5143222161199963889');" onmouseout="out('5143222161199963889');" style="">1765         private long addAppShortcut(SQLiteDatabase db, ContentValues values, String title,               </span>
<span class="-7854945536219486202" onmouseenter="enter('-7854945536219486202');" onmouseout="out('-7854945536219486202');" style="">1766                 Intent intent) {                                                                         </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">1767             long id = generateNewItemId();                                                               </span>
<span class="-3718774165038650653" onmouseenter="enter('-3718774165038650653');" onmouseout="out('-3718774165038650653');" style="">1768             values.put(Favorites.INTENT, intent.toUri(0));                                               </span>
<span class="621847407046641821" onmouseenter="enter('621847407046641821');" onmouseout="out('621847407046641821');" style="">1769             values.put(Favorites.TITLE, title);                                                          </span>
<span class="2342423886359204479" onmouseenter="enter('2342423886359204479');" onmouseout="out('2342423886359204479');" style="">1770             values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_APPLICATION);                            </span>
<span class="2615630886033492062" onmouseenter="enter('2615630886033492062');" onmouseout="out('2615630886033492062');" style="">1771             values.put(Favorites.SPANX, 1);                                                              </span>
<span class="-5449525265648364043" onmouseenter="enter('-5449525265648364043');" onmouseout="out('-5449525265648364043');" style="">1772             values.put(Favorites.SPANY, 1);                                                              </span>
<span class="2067035903685433430" onmouseenter="enter('2067035903685433430');" onmouseout="out('2067035903685433430');" style="">1773             values.put(Favorites._ID, id);                                                               </span>
<span class="-2280993933700750215" onmouseenter="enter('-2280993933700750215');" onmouseout="out('-2280993933700750215');" style="">1774             if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values) &lt; 0) {                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1775                 return -1;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1776             } else {                                                                                     </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1777                 return id;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1778             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1779         }                                                                                                </span>
<span  style="">1780                                                                                                          </span>
<span class="-8700086773804460728" onmouseenter="enter('-8700086773804460728');" onmouseout="out('-8700086773804460728');" style="">1781         private long addFolder(SQLiteDatabase db, ContentValues values) {                                </span>
<span class="-2154578791511231117" onmouseenter="enter('-2154578791511231117');" onmouseout="out('-2154578791511231117');" style="">1782             values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_FOLDER);                                 </span>
<span class="2615630886033492062" onmouseenter="enter('2615630886033492062');" onmouseout="out('2615630886033492062');" style="">1783             values.put(Favorites.SPANX, 1);                                                              </span>
<span class="-5449525265648364043" onmouseenter="enter('-5449525265648364043');" onmouseout="out('-5449525265648364043');" style="">1784             values.put(Favorites.SPANY, 1);                                                              </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">1785             long id = generateNewItemId();                                                               </span>
<span class="2067035903685433430" onmouseenter="enter('2067035903685433430');" onmouseout="out('2067035903685433430');" style="">1786             values.put(Favorites._ID, id);                                                               </span>
<span class="-8791434135793277446" onmouseenter="enter('-8791434135793277446');" onmouseout="out('-8791434135793277446');" style="">1787             if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values) &lt;= 0) {                        </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1788                 return -1;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1789             } else {                                                                                     </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1790                 return id;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1791             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1792         }                                                                                                </span>
<span  style="">1793                                                                                                          </span>
<span class="-5233040857758997197" onmouseenter="enter('-5233040857758997197');" onmouseout="out('-5233040857758997197');" style="">1794         private ComponentName getSearchWidgetProvider() {                                                </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style="">1795             SearchManager searchManager =                                                                </span>
<span class="-186007776176525963" onmouseenter="enter('-186007776176525963');" onmouseout="out('-186007776176525963');" style="">1796                     (SearchManager) mContext.getSystemService(Context.SEARCH_SERVICE);                   </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style="">1797             ComponentName searchComponent = searchManager.getGlobalSearchActivity();                     </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style="">1798             if (searchComponent == null) return null;                                                    </span>
<span class="-2463026691705518431" onmouseenter="enter('-2463026691705518431');" onmouseout="out('-2463026691705518431');" style="">1799             return getProviderInPackage(searchComponent.getPackageName());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1800         }                                                                                                </span>
<span  style="">1801                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1802         /**                                                                                              </span>
<span class="-6817641519009759490" onmouseenter="enter('-6817641519009759490');" onmouseout="out('-6817641519009759490');" style="">1803          * Gets an appwidget provider from the given package. If the package contains more than          </span>
<span class="8642686543042194127" onmouseenter="enter('8642686543042194127');" onmouseout="out('8642686543042194127');" style="">1804          * one appwidget provider, an arbitrary one is returned.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1805          */                                                                                              </span>
<span class="-8892261496520206835" onmouseenter="enter('-8892261496520206835');" onmouseout="out('-8892261496520206835');" style="">1806         private ComponentName getProviderInPackage(String packageName) {                                 </span>
<span class="5926615868676258534" onmouseenter="enter('5926615868676258534');" onmouseout="out('5926615868676258534');" style="">1807             AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);                  </span>
<span class="-9146530298789779749" onmouseenter="enter('-9146530298789779749');" onmouseout="out('-9146530298789779749');" style="">1808             List&lt;AppWidgetProviderInfo&gt; providers = appWidgetManager.getInstalledProviders();            </span>
<span class="8240747760739264929" onmouseenter="enter('8240747760739264929');" onmouseout="out('8240747760739264929');" style="">1809             if (providers == null) return null;                                                          </span>
<span class="-4472953897741653841" onmouseenter="enter('-4472953897741653841');" onmouseout="out('-4472953897741653841');" style="">1810             final int providerCount = providers.size();                                                  </span>
<span class="-3677188574112977350" onmouseenter="enter('-3677188574112977350');" onmouseout="out('-3677188574112977350');" style="">1811             for (int i = 0; i &lt; providerCount; i++) {                                                    </span>
<span class="-7171635845718933899" onmouseenter="enter('-7171635845718933899');" onmouseout="out('-7171635845718933899');" style="">1812                 ComponentName provider = providers.get(i).provider;                                      </span>
<span class="-8539437723912583859" onmouseenter="enter('-8539437723912583859');" onmouseout="out('-8539437723912583859');" style="">1813                 if (provider != null &amp;&amp; provider.getPackageName().equals(packageName)) {                 </span>
<span class="-5713992356211538326" onmouseenter="enter('-5713992356211538326');" onmouseout="out('-5713992356211538326');" style="">1814                     return provider;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1815                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1816             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1817             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1818         }                                                                                                </span>
<span  style="">1819                                                                                                          </span>
<span class="7423522138346906000" onmouseenter="enter('7423522138346906000');" onmouseout="out('7423522138346906000');" style="">1820         private boolean addAppWidget(XmlResourceParser parser, int type,                                 </span>
<span class="-6133617394960992004" onmouseenter="enter('-6133617394960992004');" onmouseout="out('-6133617394960992004');" style="">1821                 SQLiteDatabase db, ContentValues values)                                                 </span>
<span class="-2080139816352784756" onmouseenter="enter('-2080139816352784756');" onmouseout="out('-2080139816352784756');" style="">1822                 throws XmlPullParserException, IOException {                                             </span>
<span  style="">1823                                                                                                          </span>
<span class="-718046620766449518" onmouseenter="enter('-718046620766449518');" onmouseout="out('-718046620766449518');" style="">1824             String packageName = getAttributeValue(parser, ATTR_PACKAGE_NAME);                           </span>
<span class="4439764153802283676" onmouseenter="enter('4439764153802283676');" onmouseout="out('4439764153802283676');" style="">1825             String className = getAttributeValue(parser, ATTR_CLASS_NAME);                               </span>
<span  style="">1826                                                                                                          </span>
<span class="5996115603177381005" onmouseenter="enter('5996115603177381005');" onmouseout="out('5996115603177381005');" style="">1827             if (packageName == null || className == null) {                                              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1828                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1829             }                                                                                            </span>
<span  style="">1830                                                                                                          </span>
<span class="-560542064760217423" onmouseenter="enter('-560542064760217423');" onmouseout="out('-560542064760217423');" style="">1831             boolean hasPackage = true;                                                                   </span>
<span class="-654268133061106000" onmouseenter="enter('-654268133061106000');" onmouseout="out('-654268133061106000');" style="">1832             ComponentName cn = new ComponentName(packageName, className);                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1833             try {                                                                                        </span>
<span class="8130452402467519988" onmouseenter="enter('8130452402467519988');" onmouseout="out('8130452402467519988');" style="">1834                 mPackageManager.getReceiverInfo(cn, 0);                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1835             } catch (Exception e) {                                                                      </span>
<span class="9170643828915655827" onmouseenter="enter('9170643828915655827');" onmouseout="out('9170643828915655827');" style="">1836                 String[] packages = mPackageManager.currentToCanonicalPackageNames(                      </span>
<span class="8150942388199951060" onmouseenter="enter('8150942388199951060');" onmouseout="out('8150942388199951060');" style="">1837                         new String[] { packageName });                                                   </span>
<span class="-5669551341563183030" onmouseenter="enter('-5669551341563183030');" onmouseout="out('-5669551341563183030');" style="">1838                 cn = new ComponentName(packages[0], className);                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1839                 try {                                                                                    </span>
<span class="8130452402467519988" onmouseenter="enter('8130452402467519988');" onmouseout="out('8130452402467519988');" style="">1840                     mPackageManager.getReceiverInfo(cn, 0);                                              </span>
<span class="9117521976016008877" onmouseenter="enter('9117521976016008877');" onmouseout="out('9117521976016008877');" style="">1841                 } catch (Exception e1) {                                                                 </span>
<span class="-7691856903679287558" onmouseenter="enter('-7691856903679287558');" onmouseout="out('-7691856903679287558');" style="">1842                     System.out.println(&quot;Can&#x27;t find widget provider: &quot; + className);                      </span>
<span class="-7980647756745699951" onmouseenter="enter('-7980647756745699951');" onmouseout="out('-7980647756745699951');" style="">1843                     hasPackage = false;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1844                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1845             }                                                                                            </span>
<span  style="">1846                                                                                                          </span>
<span class="409326210478719297" onmouseenter="enter('409326210478719297');" onmouseout="out('409326210478719297');" style="">1847             if (hasPackage) {                                                                            </span>
<span class="-4669201679920980010" onmouseenter="enter('-4669201679920980010');" onmouseout="out('-4669201679920980010');" style="">1848                 String spanX = getAttributeValue(parser, ATTR_SPAN_X);                                   </span>
<span class="-5569004961371581944" onmouseenter="enter('-5569004961371581944');" onmouseout="out('-5569004961371581944');" style="">1849                 String spanY = getAttributeValue(parser, ATTR_SPAN_Y);                                   </span>
<span  style="">1850                                                                                                          </span>
<span class="-6724210500107661935" onmouseenter="enter('-6724210500107661935');" onmouseout="out('-6724210500107661935');" style="">1851                 values.put(Favorites.SPANX, spanX);                                                      </span>
<span class="5251293644299118699" onmouseenter="enter('5251293644299118699');" onmouseout="out('5251293644299118699');" style="">1852                 values.put(Favorites.SPANY, spanY);                                                      </span>
<span  style="">1853                                                                                                          </span>
<span class="1289388088122621273" onmouseenter="enter('1289388088122621273');" onmouseout="out('1289388088122621273');" style="">1854                 // Read the extras                                                                       </span>
<span class="1776998572180860248" onmouseenter="enter('1776998572180860248');" onmouseout="out('1776998572180860248');" style="">1855                 Bundle extras = new Bundle();                                                            </span>
<span class="-5007551987214809206" onmouseenter="enter('-5007551987214809206');" onmouseout="out('-5007551987214809206');" style="">1856                 int widgetDepth = parser.getDepth();                                                     </span>
<span class="-2406917717669951461" onmouseenter="enter('-2406917717669951461');" onmouseout="out('-2406917717669951461');" style="">1857                 while ((type = parser.next()) != XmlPullParser.END_TAG ||                                </span>
<span class="712714666508979329" onmouseenter="enter('712714666508979329');" onmouseout="out('712714666508979329');" style="">1858                         parser.getDepth() &gt; widgetDepth) {                                               </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1859                     if (type != XmlPullParser.START_TAG) {                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1860                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1861                     }                                                                                    </span>
<span  style="">1862                                                                                                          </span>
<span class="2554175265936504377" onmouseenter="enter('2554175265936504377');" onmouseout="out('2554175265936504377');" style="">1863                     if (TAG_EXTRA.equals(parser.getName())) {                                            </span>
<span class="-9040232295281944434" onmouseenter="enter('-9040232295281944434');" onmouseout="out('-9040232295281944434');" style="">1864                         String key = getAttributeValue(parser, ATTR_KEY);                                </span>
<span class="1087049418585534522" onmouseenter="enter('1087049418585534522');" onmouseout="out('1087049418585534522');" style="">1865                         String value = getAttributeValue(parser, ATTR_VALUE);                            </span>
<span class="1352636898895267389" onmouseenter="enter('1352636898895267389');" onmouseout="out('1352636898895267389');" style="">1866                         if (key != null &amp;&amp; value != null) {                                              </span>
<span class="3617031493102045508" onmouseenter="enter('3617031493102045508');" onmouseout="out('3617031493102045508');" style="">1867                             extras.putString(key, value);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1868                         } else {                                                                         </span>
<span class="-1604814790568911229" onmouseenter="enter('-1604814790568911229');" onmouseout="out('-1604814790568911229');" style="">1869                             throw new RuntimeException(&quot;Widget extras must have a key and value&quot;);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1870                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1871                     } else {                                                                             </span>
<span class="-4167415435020508425" onmouseenter="enter('-4167415435020508425');" onmouseout="out('-4167415435020508425');" style="">1872                         throw new RuntimeException(&quot;Widgets can contain only extras&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1873                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1874                 }                                                                                        </span>
<span  style="">1875                                                                                                          </span>
<span class="-7507688791595687187" onmouseenter="enter('-7507688791595687187');" onmouseout="out('-7507688791595687187');" style="">1876                 return addAppWidget(db, values, cn, extras);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1877             }                                                                                            </span>
<span  style="">1878                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1879             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1880         }                                                                                                </span>
<span  style="">1881                                                                                                          </span>
<span class="5639814246862080116" onmouseenter="enter('5639814246862080116');" onmouseout="out('5639814246862080116');" style="">1882         private boolean addAppWidget(SQLiteDatabase db, ContentValues values, ComponentName cn,          </span>
<span class="-8655373127252952262" onmouseenter="enter('-8655373127252952262');" onmouseout="out('-8655373127252952262');" style="">1883                Bundle extras) {                                                                          </span>
<span class="1781858051498019239" onmouseenter="enter('1781858051498019239');" onmouseout="out('1781858051498019239');" style="">1884             boolean allocatedAppWidgets = false;                                                         </span>
<span class="328319718470950320" onmouseenter="enter('328319718470950320');" onmouseout="out('328319718470950320');" style="">1885             final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);            </span>
<span  style="">1886                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1887             try {                                                                                        </span>
<span class="7176738113779216844" onmouseenter="enter('7176738113779216844');" onmouseout="out('7176738113779216844');" style="">1888                 int appWidgetId = mAppWidgetHost.allocateAppWidgetId();                                  </span>
<span  style="">1889                                                                                                          </span>
<span class="2941545182515325414" onmouseenter="enter('2941545182515325414');" onmouseout="out('2941545182515325414');" style="">1890                 values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_APPWIDGET);                          </span>
<span class="-2217583362005241057" onmouseenter="enter('-2217583362005241057');" onmouseout="out('-2217583362005241057');" style="">1891                 values.put(Favorites.APPWIDGET_ID, appWidgetId);                                         </span>
<span class="720562493083146912" onmouseenter="enter('720562493083146912');" onmouseout="out('720562493083146912');" style="">1892                 values.put(Favorites.APPWIDGET_PROVIDER, cn.flattenToString());                          </span>
<span class="-7797208824576653991" onmouseenter="enter('-7797208824576653991');" onmouseout="out('-7797208824576653991');" style="">1893                 values.put(Favorites._ID, generateNewItemId());                                          </span>
<span class="-1295706295937517511" onmouseenter="enter('-1295706295937517511');" onmouseout="out('-1295706295937517511');" style="">1894                 dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values);                               </span>
<span  style="">1895                                                                                                          </span>
<span class="-7439816523904895371" onmouseenter="enter('-7439816523904895371');" onmouseout="out('-7439816523904895371');" style="">1896                 allocatedAppWidgets = true;                                                              </span>
<span  style="">1897                                                                                                          </span>
<span class="-8318890136327376190" onmouseenter="enter('-8318890136327376190');" onmouseout="out('-8318890136327376190');" style="">1898                 // TODO: need to check return value                                                      </span>
<span class="3068764521751310260" onmouseenter="enter('3068764521751310260');" onmouseout="out('3068764521751310260');" style="">1899                 appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId, cn);                              </span>
<span  style="">1900                                                                                                          </span>
<span class="-7400703460033211758" onmouseenter="enter('-7400703460033211758');" onmouseout="out('-7400703460033211758');" style="">1901                 // Send a broadcast to configure the widget                                              </span>
<span class="6241633944023172610" onmouseenter="enter('6241633944023172610');" onmouseout="out('6241633944023172610');" style="">1902                 if (extras != null &amp;&amp; !extras.isEmpty()) {                                               </span>
<span class="-3925623083558987667" onmouseenter="enter('-3925623083558987667');" onmouseout="out('-3925623083558987667');" style="">1903                     Intent intent = new Intent(ACTION_APPWIDGET_DEFAULT_WORKSPACE_CONFIGURE);            </span>
<span class="1965368382885656907" onmouseenter="enter('1965368382885656907');" onmouseout="out('1965368382885656907');" style="">1904                     intent.setComponent(cn);                                                             </span>
<span class="4121123198595596428" onmouseenter="enter('4121123198595596428');" onmouseout="out('4121123198595596428');" style="">1905                     intent.putExtras(extras);                                                            </span>
<span class="-3801864120150122877" onmouseenter="enter('-3801864120150122877');" onmouseout="out('-3801864120150122877');" style="">1906                     intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);                   </span>
<span class="15213497691013705" onmouseenter="enter('15213497691013705');" onmouseout="out('15213497691013705');" style="">1907                     mContext.sendBroadcast(intent);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1908                 }                                                                                        </span>
<span class="3255801419413274971" onmouseenter="enter('3255801419413274971');" onmouseout="out('3255801419413274971');" style="">1909             } catch (RuntimeException ex) {                                                              </span>
<span class="7589023920505453658" onmouseenter="enter('7589023920505453658');" onmouseout="out('7589023920505453658');" style="">1910                 Log.e(TAG, &quot;Problem allocating appWidgetId&quot;, ex);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1911             }                                                                                            </span>
<span  style="">1912                                                                                                          </span>
<span class="-7630264847974566407" onmouseenter="enter('-7630264847974566407');" onmouseout="out('-7630264847974566407');" style="">1913             return allocatedAppWidgets;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1914         }                                                                                                </span>
<span  style="">1915                                                                                                          </span>
<span class="-1908262329425085059" onmouseenter="enter('-1908262329425085059');" onmouseout="out('-1908262329425085059');" style="">1916         private long addUriShortcut(SQLiteDatabase db, ContentValues values, Resources res,              </span>
<span class="-1953831149857843506" onmouseenter="enter('-1953831149857843506');" onmouseout="out('-1953831149857843506');" style="">1917                 XmlResourceParser parser) {                                                              </span>
<span class="-3466107134881523829" onmouseenter="enter('-3466107134881523829');" onmouseout="out('-3466107134881523829');" style="">1918             final int iconResId = getAttributeResourceValue(parser, ATTR_ICON, 0);                       </span>
<span class="-292812422880448019" onmouseenter="enter('-292812422880448019');" onmouseout="out('-292812422880448019');" style="">1919             final int titleResId = getAttributeResourceValue(parser, ATTR_TITLE, 0);                     </span>
<span  style="">1920                                                                                                          </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">1921             Intent intent;                                                                               </span>
<span class="7870717952219178672" onmouseenter="enter('7870717952219178672');" onmouseout="out('7870717952219178672');" style="">1922             String uri = null;                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1923             try {                                                                                        </span>
<span class="-7650716598670279522" onmouseenter="enter('-7650716598670279522');" onmouseout="out('-7650716598670279522');" style="">1924                 uri = getAttributeValue(parser, ATTR_URI);                                               </span>
<span class="4895125029429862660" onmouseenter="enter('4895125029429862660');" onmouseout="out('4895125029429862660');" style="">1925                 intent = Intent.parseUri(uri, 0);                                                        </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1926             } catch (URISyntaxException e) {                                                             </span>
<span class="-551028723023595678" onmouseenter="enter('-551028723023595678');" onmouseout="out('-551028723023595678');" style="">1927                 Log.w(TAG, &quot;Shortcut has malformed uri: &quot; + uri);                                        </span>
<span class="-2825391504508189972" onmouseenter="enter('-2825391504508189972');" onmouseout="out('-2825391504508189972');" style="">1928                 return -1; // Oh well                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1929             }                                                                                            </span>
<span  style="">1930                                                                                                          </span>
<span class="-4845565437702179980" onmouseenter="enter('-4845565437702179980');" onmouseout="out('-4845565437702179980');" style="">1931             if (iconResId == 0 || titleResId == 0) {                                                     </span>
<span class="1657418688720717724" onmouseenter="enter('1657418688720717724');" onmouseout="out('1657418688720717724');" style="">1932                 Log.w(TAG, &quot;Shortcut is missing title or icon resource ID&quot;);                             </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1933                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1934             }                                                                                            </span>
<span  style="">1935                                                                                                          </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">1936             long id = generateNewItemId();                                                               </span>
<span class="-2757970933426051337" onmouseenter="enter('-2757970933426051337');" onmouseout="out('-2757970933426051337');" style="">1937             intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);                                              </span>
<span class="-3718774165038650653" onmouseenter="enter('-3718774165038650653');" onmouseout="out('-3718774165038650653');" style="">1938             values.put(Favorites.INTENT, intent.toUri(0));                                               </span>
<span class="6819813114831017583" onmouseenter="enter('6819813114831017583');" onmouseout="out('6819813114831017583');" style="">1939             values.put(Favorites.TITLE, res.getString(titleResId));                                      </span>
<span class="8456179705287717594" onmouseenter="enter('8456179705287717594');" onmouseout="out('8456179705287717594');" style="">1940             values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_SHORTCUT);                               </span>
<span class="2615630886033492062" onmouseenter="enter('2615630886033492062');" onmouseout="out('2615630886033492062');" style="">1941             values.put(Favorites.SPANX, 1);                                                              </span>
<span class="-5449525265648364043" onmouseenter="enter('-5449525265648364043');" onmouseout="out('-5449525265648364043');" style="">1942             values.put(Favorites.SPANY, 1);                                                              </span>
<span class="-4755043480149851001" onmouseenter="enter('-4755043480149851001');" onmouseout="out('-4755043480149851001');" style="">1943             values.put(Favorites.ICON_TYPE, Favorites.ICON_TYPE_RESOURCE);                               </span>
<span class="1859204163826884777" onmouseenter="enter('1859204163826884777');" onmouseout="out('1859204163826884777');" style="">1944             values.put(Favorites.ICON_PACKAGE, res.getResourcePackageName(iconResId));                   </span>
<span class="7390195787308769234" onmouseenter="enter('7390195787308769234');" onmouseout="out('7390195787308769234');" style="">1945             values.put(Favorites.ICON_RESOURCE, res.getResourceName(iconResId));                         </span>
<span class="2067035903685433430" onmouseenter="enter('2067035903685433430');" onmouseout="out('2067035903685433430');" style="">1946             values.put(Favorites._ID, id);                                                               </span>
<span  style="">1947                                                                                                          </span>
<span class="-2280993933700750215" onmouseenter="enter('-2280993933700750215');" onmouseout="out('-2280993933700750215');" style="">1948             if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values) &lt; 0) {                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1949                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1950             }                                                                                            </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1951             return id;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1952         }                                                                                                </span>
<span  style="">1953                                                                                                          </span>
<span class="725730754436415996" onmouseenter="enter('725730754436415996');" onmouseout="out('725730754436415996');" style="">1954         private void migrateLauncher2Shortcuts(SQLiteDatabase db, Uri uri) {                             </span>
<span class="-1113390730047466962" onmouseenter="enter('-1113390730047466962');" onmouseout="out('-1113390730047466962');" style="">1955             final ContentResolver resolver = mContext.getContentResolver();                              </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="">1956             Cursor c = null;                                                                             </span>
<span class="-7835997453776942924" onmouseenter="enter('-7835997453776942924');" onmouseout="out('-7835997453776942924');" style="">1957             int count = 0;                                                                               </span>
<span class="-3336839334240068207" onmouseenter="enter('-3336839334240068207');" onmouseout="out('-3336839334240068207');" style="">1958             int curScreen = 0;                                                                           </span>
<span  style="">1959                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1960             try {                                                                                        </span>
<span class="-9000085593458662527" onmouseenter="enter('-9000085593458662527');" onmouseout="out('-9000085593458662527');" style="">1961                 c = resolver.query(uri, null, null, null, &quot;title ASC&quot;);                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1962             } catch (Exception e) {                                                                      </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1963                 // Ignore                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1964             }                                                                                            </span>
<span  style="">1965                                                                                                          </span>
<span class="-8364191572061005786" onmouseenter="enter('-8364191572061005786');" onmouseout="out('-8364191572061005786');" style="">1966             // We already have a favorites database in the old provider                                  </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1967             if (c != null) {                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1968                 try {                                                                                    </span>
<span class="-7145577210477193493" onmouseenter="enter('-7145577210477193493');" onmouseout="out('-7145577210477193493');" style="">1969                     if (c.getCount() &gt; 0) {                                                              </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">1970                         final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);     </span>
<span class="-3305857310034960574" onmouseenter="enter('-3305857310034960574');" onmouseout="out('-3305857310034960574');" style="">1971                         final int intentIndex                                                            </span>
<span class="7354730669796853916" onmouseenter="enter('7354730669796853916');" onmouseout="out('7354730669796853916');" style="">1972                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.INTENT);            </span>
<span class="-5630883347545993547" onmouseenter="enter('-5630883347545993547');" onmouseout="out('-5630883347545993547');" style="">1973                         final int titleIndex                                                             </span>
<span class="698330273931132471" onmouseenter="enter('698330273931132471');" onmouseout="out('698330273931132471');" style="">1974                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);             </span>
<span class="-3330891132272232037" onmouseenter="enter('-3330891132272232037');" onmouseout="out('-3330891132272232037');" style="">1975                         final int iconTypeIndex                                                          </span>
<span class="7801651150775381680" onmouseenter="enter('7801651150775381680');" onmouseout="out('7801651150775381680');" style="">1976                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYPE);         </span>
<span class="-1496515754016715409" onmouseenter="enter('-1496515754016715409');" onmouseout="out('-1496515754016715409');" style="">1977                         final int iconIndex                                                              </span>
<span class="-6743710571640483882" onmouseenter="enter('-6743710571640483882');" onmouseout="out('-6743710571640483882');" style="">1978                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);              </span>
<span class="-4968513115427762421" onmouseenter="enter('-4968513115427762421');" onmouseout="out('-4968513115427762421');" style="">1979                         final int iconPackageIndex                                                       </span>
<span class="6406994869194943351" onmouseenter="enter('6406994869194943351');" onmouseout="out('6406994869194943351');" style="">1980                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE);      </span>
<span class="7917018656335895183" onmouseenter="enter('7917018656335895183');" onmouseout="out('7917018656335895183');" style="">1981                         final int iconResourceIndex                                                      </span>
<span class="2805080254532821790" onmouseenter="enter('2805080254532821790');" onmouseout="out('2805080254532821790');" style="">1982                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURCE);     </span>
<span class="-4237567403763432926" onmouseenter="enter('-4237567403763432926');" onmouseout="out('-4237567403763432926');" style="">1983                         final int containerIndex                                                         </span>
<span class="-5056484222025497452" onmouseenter="enter('-5056484222025497452');" onmouseout="out('-5056484222025497452');" style="">1984                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);         </span>
<span class="-1231922168250187193" onmouseenter="enter('-1231922168250187193');" onmouseout="out('-1231922168250187193');" style="">1985                         final int itemTypeIndex                                                          </span>
<span class="4225538929397018586" onmouseenter="enter('4225538929397018586');" onmouseout="out('4225538929397018586');" style="">1986                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);         </span>
<span class="1886064968207935621" onmouseenter="enter('1886064968207935621');" onmouseout="out('1886064968207935621');" style="">1987                         final int screenIndex                                                            </span>
<span class="5823358741192050359" onmouseenter="enter('5823358741192050359');" onmouseout="out('5823358741192050359');" style="">1988                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);            </span>
<span class="148786652433469700" onmouseenter="enter('148786652433469700');" onmouseout="out('148786652433469700');" style="">1989                         final int cellXIndex                                                             </span>
<span class="-2420213882448561608" onmouseenter="enter('-2420213882448561608');" onmouseout="out('-2420213882448561608');" style="">1990                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);             </span>
<span class="7105291823960507491" onmouseenter="enter('7105291823960507491');" onmouseout="out('7105291823960507491');" style="">1991                         final int cellYIndex                                                             </span>
<span class="570222995967736070" onmouseenter="enter('570222995967736070');" onmouseout="out('570222995967736070');" style="">1992                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);             </span>
<span class="-6657516663903609513" onmouseenter="enter('-6657516663903609513');" onmouseout="out('-6657516663903609513');" style="">1993                         final int uriIndex                                                               </span>
<span class="-7627325667289175305" onmouseenter="enter('-7627325667289175305');" onmouseout="out('-7627325667289175305');" style="">1994                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);               </span>
<span class="3126191733073545935" onmouseenter="enter('3126191733073545935');" onmouseout="out('3126191733073545935');" style="">1995                         final int displayModeIndex                                                       </span>
<span class="5824024113471232605" onmouseenter="enter('5824024113471232605');" onmouseout="out('5824024113471232605');" style="">1996                                 = c.getColumnIndexOrThrow(LauncherSettings.Favorites.DISPLAY_MODE);      </span>
<span class="6969636044710489163" onmouseenter="enter('6969636044710489163');" onmouseout="out('6969636044710489163');" style="">1997                         final int profileIndex                                                           </span>
<span class="-4394079448083019726" onmouseenter="enter('-4394079448083019726');" onmouseout="out('-4394079448083019726');" style="">1998                                 = c.getColumnIndex(LauncherSettings.Favorites.PROFILE_ID);               </span>
<span  style="">1999                                                                                                          </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style="">2000                         int i = 0;                                                                       </span>
<span class="3196084964022358374" onmouseenter="enter('3196084964022358374');" onmouseout="out('3196084964022358374');" style="">2001                         int curX = 0;                                                                    </span>
<span class="-8919994129307273415" onmouseenter="enter('-8919994129307273415');" onmouseout="out('-8919994129307273415');" style="">2002                         int curY = 0;                                                                    </span>
<span  style="">2003                                                                                                          </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2004                         final LauncherAppState app = LauncherAppState.getInstance();                     </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2005                         final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();              </span>
<span class="690371396691664791" onmouseenter="enter('690371396691664791');" onmouseout="out('690371396691664791');" style="">2006                         final int width = (int) grid.numColumns;                                         </span>
<span class="-5064901428253886355" onmouseenter="enter('-5064901428253886355');" onmouseout="out('-5064901428253886355');" style="">2007                         final int height = (int) grid.numRows;                                           </span>
<span class="-4109722385928167056" onmouseenter="enter('-4109722385928167056');" onmouseout="out('-4109722385928167056');" style="">2008                         final int hotseatWidth = (int) grid.numHotseatIcons;                             </span>
<span  style="">2009                                                                                                          </span>
<span class="-4392487977825691924" onmouseenter="enter('-4392487977825691924');" onmouseout="out('-4392487977825691924');" style="">2010                         final HashSet&lt;String&gt; seenIntents = new HashSet&lt;String&gt;(c.getCount());           </span>
<span  style="">2011                                                                                                          </span>
<span class="-1775881703038933069" onmouseenter="enter('-1775881703038933069');" onmouseout="out('-1775881703038933069');" style="">2012                         final ArrayList&lt;ContentValues&gt; shortcuts = new ArrayList&lt;ContentValues&gt;();       </span>
<span class="-5282219486258454454" onmouseenter="enter('-5282219486258454454');" onmouseout="out('-5282219486258454454');" style="">2013                         final ArrayList&lt;ContentValues&gt; folders = new ArrayList&lt;ContentValues&gt;();         </span>
<span class="7748304206224281059" onmouseenter="enter('7748304206224281059');" onmouseout="out('7748304206224281059');" style="">2014                         final SparseArray&lt;ContentValues&gt; hotseat = new SparseArray&lt;ContentValues&gt;();     </span>
<span  style="">2015                                                                                                          </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style="">2016                         while (c.moveToNext()) {                                                         </span>
<span class="-2982692859195643614" onmouseenter="enter('-2982692859195643614');" onmouseout="out('-2982692859195643614');" style="">2017                             final int itemType = c.getInt(itemTypeIndex);                                </span>
<span class="-7155300134759553393" onmouseenter="enter('-7155300134759553393');" onmouseout="out('-7155300134759553393');" style="">2018                             if (itemType != Favorites.ITEM_TYPE_APPLICATION                              </span>
<span class="-6505147694408678007" onmouseenter="enter('-6505147694408678007');" onmouseout="out('-6505147694408678007');" style="">2019                                     &amp;&amp; itemType != Favorites.ITEM_TYPE_SHORTCUT                          </span>
<span class="-1211279440538129484" onmouseenter="enter('-1211279440538129484');" onmouseout="out('-1211279440538129484');" style="">2020                                     &amp;&amp; itemType != Favorites.ITEM_TYPE_FOLDER) {                         </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2021                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2022                             }                                                                            </span>
<span  style="">2023                                                                                                          </span>
<span class="6546086433507254477" onmouseenter="enter('6546086433507254477');" onmouseout="out('6546086433507254477');" style="">2024                             final int cellX = c.getInt(cellXIndex);                                      </span>
<span class="-5848765603231722693" onmouseenter="enter('-5848765603231722693');" onmouseout="out('-5848765603231722693');" style="">2025                             final int cellY = c.getInt(cellYIndex);                                      </span>
<span class="5057139106655212954" onmouseenter="enter('5057139106655212954');" onmouseout="out('5057139106655212954');" style="">2026                             final int screen = c.getInt(screenIndex);                                    </span>
<span class="-6682259384170717005" onmouseenter="enter('-6682259384170717005');" onmouseout="out('-6682259384170717005');" style="">2027                             int container = c.getInt(containerIndex);                                    </span>
<span class="-3517014905521526588" onmouseenter="enter('-3517014905521526588');" onmouseout="out('-3517014905521526588');" style="">2028                             final String intentStr = c.getString(intentIndex);                           </span>
<span  style="">2029                                                                                                          </span>
<span class="8272328117098122260" onmouseenter="enter('8272328117098122260');" onmouseout="out('8272328117098122260');" style="">2030                             UserManagerCompat userManager = UserManagerCompat.getInstance(mContext);     </span>
<span class="7210862209025052290" onmouseenter="enter('7210862209025052290');" onmouseout="out('7210862209025052290');" style="">2031                             UserHandleCompat userHandle;                                                 </span>
<span class="-704754462563124721" onmouseenter="enter('-704754462563124721');" onmouseout="out('-704754462563124721');" style="">2032                             final long userSerialNumber;                                                 </span>
<span class="-3188525411347809180" onmouseenter="enter('-3188525411347809180');" onmouseout="out('-3188525411347809180');" style="">2033                             if (profileIndex != -1 &amp;&amp; !c.isNull(profileIndex)) {                         </span>
<span class="3377600326593357797" onmouseenter="enter('3377600326593357797');" onmouseout="out('3377600326593357797');" style="">2034                                 userSerialNumber = c.getInt(profileIndex);                               </span>
<span class="-5580723935665666817" onmouseenter="enter('-5580723935665666817');" onmouseout="out('-5580723935665666817');" style="">2035                                 userHandle = userManager.getUserForSerialNumber(userSerialNumber);       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2036                             } else {                                                                     </span>
<span class="4088992161441330589" onmouseenter="enter('4088992161441330589');" onmouseout="out('4088992161441330589');" style="">2037                                 // Default to the serial number of this user, for older                  </span>
<span class="3257211239898691615" onmouseenter="enter('3257211239898691615');" onmouseout="out('3257211239898691615');" style="">2038                                 // shortcuts.                                                            </span>
<span class="153827185233038497" onmouseenter="enter('153827185233038497');" onmouseout="out('153827185233038497');" style="">2039                                 userHandle = UserHandleCompat.myUserHandle();                            </span>
<span class="-7992210937529459410" onmouseenter="enter('-7992210937529459410');" onmouseout="out('-7992210937529459410');" style="">2040                                 userSerialNumber = userManager.getSerialNumberForUser(userHandle);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2041                             }                                                                            </span>
<span class="-8522267007848438017" onmouseenter="enter('-8522267007848438017');" onmouseout="out('-8522267007848438017');" style="">2042                             Launcher.addDumpLog(TAG, &quot;migrating \&quot;&quot;                                      </span>
<span class="5716371482803525639" onmouseenter="enter('5716371482803525639');" onmouseout="out('5716371482803525639');" style="">2043                                 + c.getString(titleIndex) + &quot;\&quot; (&quot;                                       </span>
<span class="1581718899431916610" onmouseenter="enter('1581718899431916610');" onmouseout="out('1581718899431916610');" style="">2044                                 + cellX + &quot;,&quot; + cellY + &quot;@&quot;                                              </span>
<span class="-5433460809722614707" onmouseenter="enter('-5433460809722614707');" onmouseout="out('-5433460809722614707');" style="">2045                                 + LauncherSettings.Favorites.containerToString(container)                </span>
<span class="7963207375316982791" onmouseenter="enter('7963207375316982791');" onmouseout="out('7963207375316982791');" style="">2046                                 + &quot;/&quot; + screen                                                           </span>
<span class="6018191721230485089" onmouseenter="enter('6018191721230485089');" onmouseout="out('6018191721230485089');" style="">2047                                 + &quot;): &quot; + intentStr, true);                                              </span>
<span  style="">2048                                                                                                          </span>
<span class="-1936160447019772377" onmouseenter="enter('-1936160447019772377');" onmouseout="out('-1936160447019772377');" style="">2049                             if (itemType != Favorites.ITEM_TYPE_FOLDER) {                                </span>
<span  style="">2050                                                                                                          </span>
<span class="-3217378244605518341" onmouseenter="enter('-3217378244605518341');" onmouseout="out('-3217378244605518341');" style="">2051                                 final Intent intent;                                                     </span>
<span class="-6604091625193940309" onmouseenter="enter('-6604091625193940309');" onmouseout="out('-6604091625193940309');" style="">2052                                 final ComponentName cn;                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2053                                 try {                                                                    </span>
<span class="-5300012287142621419" onmouseenter="enter('-5300012287142621419');" onmouseout="out('-5300012287142621419');" style="">2054                                     intent = Intent.parseUri(intentStr, 0);                              </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">2055                                 } catch (URISyntaxException e) {                                         </span>
<span class="4944972948248133238" onmouseenter="enter('4944972948248133238');" onmouseout="out('4944972948248133238');" style="">2056                                     // bogus intent?                                                     </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2057                                     Launcher.addDumpLog(TAG,                                             </span>
<span class="7306432149085172440" onmouseenter="enter('7306432149085172440');" onmouseout="out('7306432149085172440');" style="">2058                                             &quot;skipping invalid intent uri&quot;, true);                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2059                                     continue;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2060                                 }                                                                        </span>
<span  style="">2061                                                                                                          </span>
<span class="6421562153709548736" onmouseenter="enter('6421562153709548736');" onmouseout="out('6421562153709548736');" style="">2062                                 cn = intent.getComponent();                                              </span>
<span class="1165574592669081424" onmouseenter="enter('1165574592669081424');" onmouseout="out('1165574592669081424');" style="">2063                                 if (TextUtils.isEmpty(intentStr)) {                                      </span>
<span class="1109263052506568546" onmouseenter="enter('1109263052506568546');" onmouseout="out('1109263052506568546');" style="">2064                                     // no intent? no icon                                                </span>
<span class="-2999961336534157526" onmouseenter="enter('-2999961336534157526');" onmouseout="out('-2999961336534157526');" style="">2065                                     Launcher.addDumpLog(TAG, &quot;skipping empty intent&quot;, true);             </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2066                                     continue;                                                            </span>
<span class="-9117039092771941538" onmouseenter="enter('-9117039092771941538');" onmouseout="out('-9117039092771941538');" style="">2067                                 } else if (cn != null &amp;&amp;                                                 </span>
<span class="-3538782463140269707" onmouseenter="enter('-3538782463140269707');" onmouseout="out('-3538782463140269707');" style="">2068                                         !LauncherModel.isValidPackageActivity(mContext, cn,              </span>
<span class="2012568974631198883" onmouseenter="enter('2012568974631198883');" onmouseout="out('2012568974631198883');" style="">2069                                                 userHandle)) {                                           </span>
<span class="-8462735888325815955" onmouseenter="enter('-8462735888325815955');" onmouseout="out('-8462735888325815955');" style="">2070                                     // component no longer exists.                                       </span>
<span class="8244127631099782564" onmouseenter="enter('8244127631099782564');" onmouseout="out('8244127631099782564');" style="">2071                                     Launcher.addDumpLog(TAG, &quot;skipping item whose component &quot; +          </span>
<span class="-2271033079359571531" onmouseenter="enter('-2271033079359571531');" onmouseout="out('-2271033079359571531');" style="">2072                                             &quot;no longer exists.&quot;, true);                                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2073                                     continue;                                                            </span>
<span class="1808399553142797413" onmouseenter="enter('1808399553142797413');" onmouseout="out('1808399553142797413');" style="">2074                                 } else if (container ==                                                  </span>
<span class="-5300505921133380020" onmouseenter="enter('-5300505921133380020');" onmouseout="out('-5300505921133380020');" style="">2075                                         LauncherSettings.Favorites.CONTAINER_DESKTOP) {                  </span>
<span class="-6651088913311152009" onmouseenter="enter('-6651088913311152009');" onmouseout="out('-6651088913311152009');" style="">2076                                     // Dedupe icons directly on the workspace                            </span>
<span  style="">2077                                                                                                          </span>
<span class="-7857209544272892433" onmouseenter="enter('-7857209544272892433');" onmouseout="out('-7857209544272892433');" style="">2078                                     // Canonicalize                                                      </span>
<span class="-8986671765649789370" onmouseenter="enter('-8986671765649789370');" onmouseout="out('-8986671765649789370');" style="">2079                                     // the Play Store sets the package parameter, but Launcher           </span>
<span class="6790983218134031366" onmouseenter="enter('6790983218134031366');" onmouseout="out('6790983218134031366');" style="">2080                                     // does not, so we clear that out to keep them the same              </span>
<span class="-3363694106044374937" onmouseenter="enter('-3363694106044374937');" onmouseout="out('-3363694106044374937');" style="">2081                                     intent.setPackage(null);                                             </span>
<span class="-947990318544641084" onmouseenter="enter('-947990318544641084');" onmouseout="out('-947990318544641084');" style="">2082                                     final String key = intent.toUri(0);                                  </span>
<span class="7480204102005082432" onmouseenter="enter('7480204102005082432');" onmouseout="out('7480204102005082432');" style="">2083                                     if (seenIntents.contains(key)) {                                     </span>
<span class="2006049222885589498" onmouseenter="enter('2006049222885589498');" onmouseout="out('2006049222885589498');" style="">2084                                         Launcher.addDumpLog(TAG, &quot;skipping duplicate&quot;, true);            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2085                                         continue;                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2086                                     } else {                                                             </span>
<span class="4653019047206831387" onmouseenter="enter('4653019047206831387');" onmouseout="out('4653019047206831387');" style="">2087                                         seenIntents.add(key);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2088                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2089                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2090                             }                                                                            </span>
<span  style="">2091                                                                                                          </span>
<span class="-3805379390248188389" onmouseenter="enter('-3805379390248188389');" onmouseout="out('-3805379390248188389');" style="">2092                             ContentValues values = new ContentValues(c.getColumnCount());                </span>
<span class="2787548740347733717" onmouseenter="enter('2787548740347733717');" onmouseout="out('2787548740347733717');" style="">2093                             values.put(LauncherSettings.Favorites._ID, c.getInt(idIndex));               </span>
<span class="4552396250235420866" onmouseenter="enter('4552396250235420866');" onmouseout="out('4552396250235420866');" style="">2094                             values.put(LauncherSettings.Favorites.INTENT, intentStr);                    </span>
<span class="3080545696092648727" onmouseenter="enter('3080545696092648727');" onmouseout="out('3080545696092648727');" style="">2095                             values.put(LauncherSettings.Favorites.TITLE, c.getString(titleIndex));       </span>
<span class="8877369206974054200" onmouseenter="enter('8877369206974054200');" onmouseout="out('8877369206974054200');" style="">2096                             values.put(LauncherSettings.Favorites.ICON_TYPE,                             </span>
<span class="8705323818259019594" onmouseenter="enter('8705323818259019594');" onmouseout="out('8705323818259019594');" style="">2097                                     c.getInt(iconTypeIndex));                                            </span>
<span class="3857475807367449049" onmouseenter="enter('3857475807367449049');" onmouseout="out('3857475807367449049');" style="">2098                             values.put(LauncherSettings.Favorites.ICON, c.getBlob(iconIndex));           </span>
<span class="-7054095546130863513" onmouseenter="enter('-7054095546130863513');" onmouseout="out('-7054095546130863513');" style="">2099                             values.put(LauncherSettings.Favorites.ICON_PACKAGE,                          </span>
<span class="-4377124255190457588" onmouseenter="enter('-4377124255190457588');" onmouseout="out('-4377124255190457588');" style="">2100                                     c.getString(iconPackageIndex));                                      </span>
<span class="7491883888231273974" onmouseenter="enter('7491883888231273974');" onmouseout="out('7491883888231273974');" style="">2101                             values.put(LauncherSettings.Favorites.ICON_RESOURCE,                         </span>
<span class="-14487948683300389" onmouseenter="enter('-14487948683300389');" onmouseout="out('-14487948683300389');" style="">2102                                     c.getString(iconResourceIndex));                                     </span>
<span class="5180659022499168410" onmouseenter="enter('5180659022499168410');" onmouseout="out('5180659022499168410');" style="">2103                             values.put(LauncherSettings.Favorites.ITEM_TYPE, itemType);                  </span>
<span class="2567875359902744917" onmouseenter="enter('2567875359902744917');" onmouseout="out('2567875359902744917');" style="">2104                             values.put(LauncherSettings.Favorites.APPWIDGET_ID, -1);                     </span>
<span class="-3897523412202294315" onmouseenter="enter('-3897523412202294315');" onmouseout="out('-3897523412202294315');" style="">2105                             values.put(LauncherSettings.Favorites.URI, c.getString(uriIndex));           </span>
<span class="8253479465859182990" onmouseenter="enter('8253479465859182990');" onmouseout="out('8253479465859182990');" style="">2106                             values.put(LauncherSettings.Favorites.DISPLAY_MODE,                          </span>
<span class="-8416795076296111227" onmouseenter="enter('-8416795076296111227');" onmouseout="out('-8416795076296111227');" style="">2107                                     c.getInt(displayModeIndex));                                         </span>
<span class="-1880957120536425376" onmouseenter="enter('-1880957120536425376');" onmouseout="out('-1880957120536425376');" style="">2108                             values.put(LauncherSettings.Favorites.PROFILE_ID, userSerialNumber);         </span>
<span  style="">2109                                                                                                          </span>
<span class="-216205184326719357" onmouseenter="enter('-216205184326719357');" onmouseout="out('-216205184326719357');" style="">2110                             if (container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="2845166931909672251" onmouseenter="enter('2845166931909672251');" onmouseout="out('2845166931909672251');" style="">2111                                 hotseat.put(screen, values);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2112                             }                                                                            </span>
<span  style="">2113                                                                                                          </span>
<span class="-8534427976726701331" onmouseenter="enter('-8534427976726701331');" onmouseout="out('-8534427976726701331');" style="">2114                             if (container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {             </span>
<span class="3724214252155726452" onmouseenter="enter('3724214252155726452');" onmouseout="out('3724214252155726452');" style="">2115                                 // In a folder or in the hotseat, preserve position                      </span>
<span class="4993135311254983149" onmouseenter="enter('4993135311254983149');" onmouseout="out('4993135311254983149');" style="">2116                                 values.put(LauncherSettings.Favorites.SCREEN, screen);                   </span>
<span class="-7735658353589578952" onmouseenter="enter('-7735658353589578952');" onmouseout="out('-7735658353589578952');" style="">2117                                 values.put(LauncherSettings.Favorites.CELLX, cellX);                     </span>
<span class="-6596875348392322090" onmouseenter="enter('-6596875348392322090');" onmouseout="out('-6596875348392322090');" style="">2118                                 values.put(LauncherSettings.Favorites.CELLY, cellY);                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2119                             } else {                                                                     </span>
<span class="-6079732280628496127" onmouseenter="enter('-6079732280628496127');" onmouseout="out('-6079732280628496127');" style="">2120                                 // For items contained directly on one of the workspace screen,          </span>
<span class="-850513443108501253" onmouseenter="enter('-850513443108501253');" onmouseout="out('-850513443108501253');" style="">2121                                 // we&#x27;ll determine their location (screen, x, y) in a second pass.       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2122                             }                                                                            </span>
<span  style="">2123                                                                                                          </span>
<span class="7684212050113439789" onmouseenter="enter('7684212050113439789');" onmouseout="out('7684212050113439789');" style="">2124                             values.put(LauncherSettings.Favorites.CONTAINER, container);                 </span>
<span  style="">2125                                                                                                          </span>
<span class="-1936160447019772377" onmouseenter="enter('-1936160447019772377');" onmouseout="out('-1936160447019772377');" style="">2126                             if (itemType != Favorites.ITEM_TYPE_FOLDER) {                                </span>
<span class="-7897547558000712151" onmouseenter="enter('-7897547558000712151');" onmouseout="out('-7897547558000712151');" style="">2127                                 shortcuts.add(values);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2128                             } else {                                                                     </span>
<span class="5214044302935278086" onmouseenter="enter('5214044302935278086');" onmouseout="out('5214044302935278086');" style="">2129                                 folders.add(values);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2130                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2131                         }                                                                                </span>
<span  style="">2132                                                                                                          </span>
<span class="3792333482677793462" onmouseenter="enter('3792333482677793462');" onmouseout="out('3792333482677793462');" style="">2133                         // Now that we have all the hotseat icons, let&#x27;s go through them left-right      </span>
<span class="6853065735140319510" onmouseenter="enter('6853065735140319510');" onmouseout="out('6853065735140319510');" style="">2134                         // and assign valid locations for them in the new hotseat                        </span>
<span class="-382900916992065291" onmouseenter="enter('-382900916992065291');" onmouseout="out('-382900916992065291');" style="">2135                         final int N = hotseat.size();                                                    </span>
<span class="9016073461123662191" onmouseenter="enter('9016073461123662191');" onmouseout="out('9016073461123662191');" style="">2136                         for (int idx=0; idx&lt;N; idx++) {                                                  </span>
<span class="-7027280347801461154" onmouseenter="enter('-7027280347801461154');" onmouseout="out('-7027280347801461154');" style="">2137                             int hotseatX = hotseat.keyAt(idx);                                           </span>
<span class="7267222979225491944" onmouseenter="enter('7267222979225491944');" onmouseout="out('7267222979225491944');" style="">2138                             ContentValues values = hotseat.valueAt(idx);                                 </span>
<span  style="">2139                                                                                                          </span>
<span class="-3018245694205955067" onmouseenter="enter('-3018245694205955067');" onmouseout="out('-3018245694205955067');" style="">2140                             if (hotseatX == grid.hotseatAllAppsRank) {                                   </span>
<span class="-8495735509078642350" onmouseenter="enter('-8495735509078642350');" onmouseout="out('-8495735509078642350');" style="">2141                                 // let&#x27;s drop this in the next available hole in the hotseat             </span>
<span class="-2055954181227443816" onmouseenter="enter('-2055954181227443816');" onmouseout="out('-2055954181227443816');" style="">2142                                 while (++hotseatX &lt; hotseatWidth) {                                      </span>
<span class="-5595819560409222327" onmouseenter="enter('-5595819560409222327');" onmouseout="out('-5595819560409222327');" style="">2143                                     if (hotseat.get(hotseatX) == null) {                                 </span>
<span class="2131484666649578366" onmouseenter="enter('2131484666649578366');" onmouseout="out('2131484666649578366');" style="">2144                                         // found a spot! move it here                                    </span>
<span class="325808457439646533" onmouseenter="enter('325808457439646533');" onmouseout="out('325808457439646533');" style="">2145                                         values.put(LauncherSettings.Favorites.SCREEN,                    </span>
<span class="8014085861051867033" onmouseenter="enter('8014085861051867033');" onmouseout="out('8014085861051867033');" style="">2146                                                 hotseatX);                                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2147                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2148                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2149                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2150                             }                                                                            </span>
<span class="4361559665402156368" onmouseenter="enter('4361559665402156368');" onmouseout="out('4361559665402156368');" style="">2151                             if (hotseatX &gt;= hotseatWidth) {                                              </span>
<span class="198406244599777154" onmouseenter="enter('198406244599777154');" onmouseout="out('198406244599777154');" style="">2152                                 // no room for you in the hotseat? it&#x27;s off to the desktop with you      </span>
<span class="274548545061036766" onmouseenter="enter('274548545061036766');" onmouseout="out('274548545061036766');" style="">2153                                 values.put(LauncherSettings.Favorites.CONTAINER,                         </span>
<span class="951133373394890183" onmouseenter="enter('951133373394890183');" onmouseout="out('951133373394890183');" style="">2154                                            Favorites.CONTAINER_DESKTOP);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2155                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2156                         }                                                                                </span>
<span  style="">2157                                                                                                          </span>
<span class="4538029778921500049" onmouseenter="enter('4538029778921500049');" onmouseout="out('4538029778921500049');" style="">2158                         final ArrayList&lt;ContentValues&gt; allItems = new ArrayList&lt;ContentValues&gt;();        </span>
<span class="-4972040190483698817" onmouseenter="enter('-4972040190483698817');" onmouseout="out('-4972040190483698817');" style="">2159                         // Folders first                                                                 </span>
<span class="1607706518732535744" onmouseenter="enter('1607706518732535744');" onmouseout="out('1607706518732535744');" style="">2160                         allItems.addAll(folders);                                                        </span>
<span class="2106236708914116763" onmouseenter="enter('2106236708914116763');" onmouseout="out('2106236708914116763');" style="">2161                         // Then shortcuts                                                                </span>
<span class="-1250372864837547145" onmouseenter="enter('-1250372864837547145');" onmouseout="out('-1250372864837547145');" style="">2162                         allItems.addAll(shortcuts);                                                      </span>
<span  style="">2163                                                                                                          </span>
<span class="-2195882050879177813" onmouseenter="enter('-2195882050879177813');" onmouseout="out('-2195882050879177813');" style="">2164                         // Layout all the folders                                                        </span>
<span class="-252665973237041297" onmouseenter="enter('-252665973237041297');" onmouseout="out('-252665973237041297');" style="">2165                         for (ContentValues values: allItems) {                                           </span>
<span class="-6238460523304059987" onmouseenter="enter('-6238460523304059987');" onmouseout="out('-6238460523304059987');" style="">2166                             if (values.getAsInteger(LauncherSettings.Favorites.CONTAINER) !=             </span>
<span class="-5300505921133380020" onmouseenter="enter('-5300505921133380020');" onmouseout="out('-5300505921133380020');" style="">2167                                     LauncherSettings.Favorites.CONTAINER_DESKTOP) {                      </span>
<span class="4544740026899945117" onmouseenter="enter('4544740026899945117');" onmouseout="out('4544740026899945117');" style="">2168                                 // Hotseat items and folder items have already had their                 </span>
<span class="9061827072000509027" onmouseenter="enter('9061827072000509027');" onmouseout="out('9061827072000509027');" style="">2169                                 // location information set. Nothing to be done here.                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2170                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2171                             }                                                                            </span>
<span class="851641135220662264" onmouseenter="enter('851641135220662264');" onmouseout="out('851641135220662264');" style="">2172                             values.put(LauncherSettings.Favorites.SCREEN, curScreen);                    </span>
<span class="-1049962748703223150" onmouseenter="enter('-1049962748703223150');" onmouseout="out('-1049962748703223150');" style="">2173                             values.put(LauncherSettings.Favorites.CELLX, curX);                          </span>
<span class="-5258025824110848668" onmouseenter="enter('-5258025824110848668');" onmouseout="out('-5258025824110848668');" style="">2174                             values.put(LauncherSettings.Favorites.CELLY, curY);                          </span>
<span class="1910082031532915038" onmouseenter="enter('1910082031532915038');" onmouseout="out('1910082031532915038');" style="">2175                             curX = (curX + 1) % width;                                                   </span>
<span class="-7155276018455302787" onmouseenter="enter('-7155276018455302787');" onmouseout="out('-7155276018455302787');" style="">2176                             if (curX == 0) {                                                             </span>
<span class="2376495568180329749" onmouseenter="enter('2376495568180329749');" onmouseout="out('2376495568180329749');" style="">2177                                 curY = (curY + 1);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2178                             }                                                                            </span>
<span class="-4531638622721531414" onmouseenter="enter('-4531638622721531414');" onmouseout="out('-4531638622721531414');" style="">2179                             // Leave the last row of icons blank on every screen                         </span>
<span class="-5543182397018270277" onmouseenter="enter('-5543182397018270277');" onmouseout="out('-5543182397018270277');" style="">2180                             if (curY == height - 1) {                                                    </span>
<span class="-6657705079427553715" onmouseenter="enter('-6657705079427553715');" onmouseout="out('-6657705079427553715');" style="">2181                                 curScreen = (int) generateNewScreenId();                                 </span>
<span class="4679043716901678926" onmouseenter="enter('4679043716901678926');" onmouseout="out('4679043716901678926');" style="">2182                                 curY = 0;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2183                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2184                         }                                                                                </span>
<span  style="">2185                                                                                                          </span>
<span class="1853917526349173349" onmouseenter="enter('1853917526349173349');" onmouseout="out('1853917526349173349');" style="">2186                         if (allItems.size() &gt; 0) {                                                       </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">2187                             db.beginTransaction();                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2188                             try {                                                                        </span>
<span class="-7256059133012813079" onmouseenter="enter('-7256059133012813079');" onmouseout="out('-7256059133012813079');" style="">2189                                 for (ContentValues row: allItems) {                                      </span>
<span class="3155601228699925770" onmouseenter="enter('3155601228699925770');" onmouseout="out('3155601228699925770');" style="">2190                                     if (row == null) continue;                                           </span>
<span class="-304018147606180100" onmouseenter="enter('-304018147606180100');" onmouseout="out('-304018147606180100');" style="">2191                                     if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, row)           </span>
<span class="-5045770407551308114" onmouseenter="enter('-5045770407551308114');" onmouseout="out('-5045770407551308114');" style="">2192                                             &lt; 0) {                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2193                                         return;                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2194                                     } else {                                                             </span>
<span class="5122134618962228848" onmouseenter="enter('5122134618962228848');" onmouseout="out('5122134618962228848');" style="">2195                                         count++;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2196                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2197                                 }                                                                        </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">2198                                 db.setTransactionSuccessful();                                           </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2199                             } finally {                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">2200                                 db.endTransaction();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2201                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2202                         }                                                                                </span>
<span  style="">2203                                                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">2204                         db.beginTransaction();                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2205                         try {                                                                            </span>
<span class="-7150489321946493056" onmouseenter="enter('-7150489321946493056');" onmouseout="out('-7150489321946493056');" style="">2206                             for (i=0; i&lt;=curScreen; i++) {                                               </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">2207                                 final ContentValues values = new ContentValues();                        </span>
<span class="-5225632710651404139" onmouseenter="enter('-5225632710651404139');" onmouseout="out('-5225632710651404139');" style="">2208                                 values.put(LauncherSettings.WorkspaceScreens._ID, i);                    </span>
<span class="8100732723950791653" onmouseenter="enter('8100732723950791653');" onmouseout="out('8100732723950791653');" style="">2209                                 values.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);            </span>
<span class="-6007460446232002971" onmouseenter="enter('-6007460446232002971');" onmouseout="out('-6007460446232002971');" style="">2210                                 if (dbInsertAndCheck(this, db, TABLE_WORKSPACE_SCREENS, null, values)    </span>
<span class="-5045770407551308114" onmouseenter="enter('-5045770407551308114');" onmouseout="out('-5045770407551308114');" style="">2211                                         &lt; 0) {                                                           </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2212                                     return;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2213                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2214                             }                                                                            </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">2215                             db.setTransactionSuccessful();                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2216                         } finally {                                                                      </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">2217                             db.endTransaction();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2218                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2219                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2220                 } finally {                                                                              </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2221                     c.close();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2222                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2223             }                                                                                            </span>
<span  style="">2224                                                                                                          </span>
<span class="-6182516414964240870" onmouseenter="enter('-6182516414964240870');" onmouseout="out('-6182516414964240870');" style="">2225             Launcher.addDumpLog(TAG, &quot;migrated &quot; + count + &quot; icons from Launcher2 into &quot;                 </span>
<span class="3301967416992773508" onmouseenter="enter('3301967416992773508');" onmouseout="out('3301967416992773508');" style="">2226                     + (curScreen+1) + &quot; screens&quot;, true);                                                 </span>
<span  style="">2227                                                                                                          </span>
<span class="3355055744209094121" onmouseenter="enter('3355055744209094121');" onmouseout="out('3355055744209094121');" style="">2228             // ensure that new screens are created to hold these icons                                   </span>
<span class="4167333916835222093" onmouseenter="enter('4167333916835222093');" onmouseout="out('4167333916835222093');" style="">2229             setFlagJustLoadedOldDb();                                                                    </span>
<span  style="">2230                                                                                                          </span>
<span class="2071167438564206442" onmouseenter="enter('2071167438564206442');" onmouseout="out('2071167438564206442');" style="">2231             // Update max IDs; very important since we just grabbed IDs from another database            </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style="">2232             mMaxItemId = initializeMaxItemId(db);                                                        </span>
<span class="4730788985981235797" onmouseenter="enter('4730788985981235797');" onmouseout="out('4730788985981235797');" style="">2233             mMaxScreenId = initializeMaxScreenId(db);                                                    </span>
<span class="-439077128883569126" onmouseenter="enter('-439077128883569126');" onmouseout="out('-439077128883569126');" style="">2234             if (LOGD) Log.d(TAG, &quot;mMaxItemId: &quot; + mMaxItemId + &quot; mMaxScreenId: &quot; + mMaxScreenId);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2235         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2236     }                                                                                                    </span>
<span  style="">2237                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2238     /**                                                                                                  </span>
<span class="6228869189788510839" onmouseenter="enter('6228869189788510839');" onmouseout="out('6228869189788510839');" style="">2239      * Build a query string that will match any row where the column matches                             </span>
<span class="-1295109358340261898" onmouseenter="enter('-1295109358340261898');" onmouseout="out('-1295109358340261898');" style="">2240      * anything in the values list.                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2241      */                                                                                                  </span>
<span class="-2936324408380560269" onmouseenter="enter('-2936324408380560269');" onmouseout="out('-2936324408380560269');" style="">2242     private static String buildOrWhereString(String column, int[] values) {                              </span>
<span class="5416982361227649779" onmouseenter="enter('5416982361227649779');" onmouseout="out('5416982361227649779');" style="">2243         StringBuilder selectWhere = new StringBuilder();                                                 </span>
<span class="-4332208004382148217" onmouseenter="enter('-4332208004382148217');" onmouseout="out('-4332208004382148217');" style="">2244         for (int i = values.length - 1; i &gt;= 0; i--) {                                                   </span>
<span class="1277928779660897735" onmouseenter="enter('1277928779660897735');" onmouseout="out('1277928779660897735');" style="">2245             selectWhere.append(column).append(&quot;=&quot;).append(values[i]);                                    </span>
<span class="81359043772452968" onmouseenter="enter('81359043772452968');" onmouseout="out('81359043772452968');" style="">2246             if (i &gt; 0) {                                                                                 </span>
<span class="7640545912534679853" onmouseenter="enter('7640545912534679853');" onmouseout="out('7640545912534679853');" style="">2247                 selectWhere.append(&quot; OR &quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2248             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2249         }                                                                                                </span>
<span class="-3909123707650780307" onmouseenter="enter('-3909123707650780307');" onmouseout="out('-3909123707650780307');" style="">2250         return selectWhere.toString();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2251     }                                                                                                    </span>
<span  style="">2252                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2253     /**                                                                                                  </span>
<span class="-28944385574413319" onmouseenter="enter('-28944385574413319');" onmouseout="out('-28944385574413319');" style="">2254      * Return attribute value, attempting launcher-specific namespace first                              </span>
<span class="-539699600440534794" onmouseenter="enter('-539699600440534794');" onmouseout="out('-539699600440534794');" style="">2255      * before falling back to anonymous attribute.                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2256      */                                                                                                  </span>
<span class="-712674519579063359" onmouseenter="enter('-712674519579063359');" onmouseout="out('-712674519579063359');" style="">2257     private static String getAttributeValue(XmlResourceParser parser, String attribute) {                </span>
<span class="-5187744497551639206" onmouseenter="enter('-5187744497551639206');" onmouseout="out('-5187744497551639206');" style="">2258         String value = parser.getAttributeValue(                                                         </span>
<span class="3240651452367746246" onmouseenter="enter('3240651452367746246');" onmouseout="out('3240651452367746246');" style="">2259                 &quot;http://schemas.android.com/apk/res-auto/com.android.launcher3&quot;, attribute);             </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style="">2260         if (value == null) {                                                                             </span>
<span class="4082321249181646127" onmouseenter="enter('4082321249181646127');" onmouseout="out('4082321249181646127');" style="">2261             value = parser.getAttributeValue(null, attribute);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2262         }                                                                                                </span>
<span class="-4905322242800291335" onmouseenter="enter('-4905322242800291335');" onmouseout="out('-4905322242800291335');" style="">2263         return value;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2264     }                                                                                                    </span>
<span  style="">2265                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2266     /**                                                                                                  </span>
<span class="7776239847235917049" onmouseenter="enter('7776239847235917049');" onmouseout="out('7776239847235917049');" style="">2267      * Return attribute resource value, attempting launcher-specific namespace                           </span>
<span class="-6756177748646477702" onmouseenter="enter('-6756177748646477702');" onmouseout="out('-6756177748646477702');" style="">2268      * first before falling back to anonymous attribute.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2269      */                                                                                                  </span>
<span class="-2261393621595960012" onmouseenter="enter('-2261393621595960012');" onmouseout="out('-2261393621595960012');" style="">2270     private static int getAttributeResourceValue(XmlResourceParser parser, String attribute,             </span>
<span class="7924088353949793531" onmouseenter="enter('7924088353949793531');" onmouseout="out('7924088353949793531');" style="">2271             int defaultValue) {                                                                          </span>
<span class="-5869649596261514051" onmouseenter="enter('-5869649596261514051');" onmouseout="out('-5869649596261514051');" style="">2272         int value = parser.getAttributeResourceValue(                                                    </span>
<span class="-572076831828560497" onmouseenter="enter('-572076831828560497');" onmouseout="out('-572076831828560497');" style="">2273                 &quot;http://schemas.android.com/apk/res-auto/com.android.launcher3&quot;, attribute,              </span>
<span class="-310982111368378340" onmouseenter="enter('-310982111368378340');" onmouseout="out('-310982111368378340');" style="">2274                 defaultValue);                                                                           </span>
<span class="2024020216404545754" onmouseenter="enter('2024020216404545754');" onmouseout="out('2024020216404545754');" style="">2275         if (value == defaultValue) {                                                                     </span>
<span class="6043697783016237085" onmouseenter="enter('6043697783016237085');" onmouseout="out('6043697783016237085');" style="">2276             value = parser.getAttributeResourceValue(null, attribute, defaultValue);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2277         }                                                                                                </span>
<span class="-4905322242800291335" onmouseenter="enter('-4905322242800291335');" onmouseout="out('-4905322242800291335');" style="">2278         return value;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2279     }                                                                                                    </span>
<span  style="">2280                                                                                                          </span>
<span class="626008248496619562" onmouseenter="enter('626008248496619562');" onmouseout="out('626008248496619562');" style="">2281     private static void copyInteger(ContentValues from, ContentValues to, String key) {                  </span>
<span class="-3424296615037173139" onmouseenter="enter('-3424296615037173139');" onmouseout="out('-3424296615037173139');" style="">2282         to.put(key, from.getAsInteger(key));                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2283     }                                                                                                    </span>
<span  style="">2284                                                                                                          </span>
<span class="8465274381710394045" onmouseenter="enter('8465274381710394045');" onmouseout="out('8465274381710394045');" style="">2285     static class SqlArguments {                                                                          </span>
<span class="8122936482838815352" onmouseenter="enter('8122936482838815352');" onmouseout="out('8122936482838815352');" style="">2286         public final String table;                                                                       </span>
<span class="5442590397567481633" onmouseenter="enter('5442590397567481633');" onmouseout="out('5442590397567481633');" style="">2287         public final String where;                                                                       </span>
<span class="-2258632185412795279" onmouseenter="enter('-2258632185412795279');" onmouseout="out('-2258632185412795279');" style="">2288         public final String[] args;                                                                      </span>
<span  style="">2289                                                                                                          </span>
<span class="538735252304320137" onmouseenter="enter('538735252304320137');" onmouseout="out('538735252304320137');" style="">2290         SqlArguments(Uri url, String where, String[] args) {                                             </span>
<span class="-7603700663019659468" onmouseenter="enter('-7603700663019659468');" onmouseout="out('-7603700663019659468');" style="">2291             if (url.getPathSegments().size() == 1) {                                                     </span>
<span class="-6984157551381672872" onmouseenter="enter('-6984157551381672872');" onmouseout="out('-6984157551381672872');" style="">2292                 this.table = url.getPathSegments().get(0);                                               </span>
<span class="7181058370626512064" onmouseenter="enter('7181058370626512064');" onmouseout="out('7181058370626512064');" style="">2293                 this.where = where;                                                                      </span>
<span class="8688716567728705492" onmouseenter="enter('8688716567728705492');" onmouseout="out('8688716567728705492');" style="">2294                 this.args = args;                                                                        </span>
<span class="2325935358302734243" onmouseenter="enter('2325935358302734243');" onmouseout="out('2325935358302734243');" style="">2295             } else if (url.getPathSegments().size() != 2) {                                              </span>
<span class="-3760623583555134522" onmouseenter="enter('-3760623583555134522');" onmouseout="out('-3760623583555134522');" style="">2296                 throw new IllegalArgumentException(&quot;Invalid URI: &quot; + url);                               </span>
<span class="186586201607437821" onmouseenter="enter('186586201607437821');" onmouseout="out('186586201607437821');" style="">2297             } else if (!TextUtils.isEmpty(where)) {                                                      </span>
<span class="2785963644153593875" onmouseenter="enter('2785963644153593875');" onmouseout="out('2785963644153593875');" style="">2298                 throw new UnsupportedOperationException(&quot;WHERE clause not supported: &quot; + url);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2299             } else {                                                                                     </span>
<span class="-6984157551381672872" onmouseenter="enter('-6984157551381672872');" onmouseout="out('-6984157551381672872');" style="">2300                 this.table = url.getPathSegments().get(0);                                               </span>
<span class="-834356181554398700" onmouseenter="enter('-834356181554398700');" onmouseout="out('-834356181554398700');" style="">2301                 this.where = &quot;_id=&quot; + ContentUris.parseId(url);                                          </span>
<span class="-7173439380439508667" onmouseenter="enter('-7173439380439508667');" onmouseout="out('-7173439380439508667');" style="">2302                 this.args = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2303             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2304         }                                                                                                </span>
<span  style="">2305                                                                                                          </span>
<span class="5705249208777482684" onmouseenter="enter('5705249208777482684');" onmouseout="out('5705249208777482684');" style="">2306         SqlArguments(Uri url) {                                                                          </span>
<span class="-7603700663019659468" onmouseenter="enter('-7603700663019659468');" onmouseout="out('-7603700663019659468');" style="">2307             if (url.getPathSegments().size() == 1) {                                                     </span>
<span class="-594585027826531892" onmouseenter="enter('-594585027826531892');" onmouseout="out('-594585027826531892');" style="">2308                 table = url.getPathSegments().get(0);                                                    </span>
<span class="3938761229458861077" onmouseenter="enter('3938761229458861077');" onmouseout="out('3938761229458861077');" style="">2309                 where = null;                                                                            </span>
<span class="8940401955607507518" onmouseenter="enter('8940401955607507518');" onmouseout="out('8940401955607507518');" style="">2310                 args = null;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2311             } else {                                                                                     </span>
<span class="-3760623583555134522" onmouseenter="enter('-3760623583555134522');" onmouseout="out('-3760623583555134522');" style="">2312                 throw new IllegalArgumentException(&quot;Invalid URI: &quot; + url);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2313             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2314         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2315     }                                                                                                    </span>
<span  style="">2316                                                                                                          </span>
<span class="-3139188310586380115" onmouseenter="enter('-3139188310586380115');" onmouseout="out('-3139188310586380115');" style="">2317     static interface WorkspaceLoader {                                                                   </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2318         /**                                                                                              </span>
<span class="-3098177944227224747" onmouseenter="enter('-3098177944227224747');" onmouseout="out('-3098177944227224747');" style="">2319          * @param screenIds A mutable list of screen its                                                 </span>
<span class="987002808252756985" onmouseenter="enter('987002808252756985');" onmouseout="out('987002808252756985');" style="">2320          * @return the number of workspace items added.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2321          */                                                                                              </span>
<span class="6770727346199503360" onmouseenter="enter('6770727346199503360');" onmouseout="out('6770727346199503360');" style="">2322         int loadLayout(SQLiteDatabase db, ArrayList&lt;Long&gt; screenIds);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2323     }                                                                                                    </span>
<span  style="">2324                                                                                                          </span>
<span class="-6810572453627058620" onmouseenter="enter('-6810572453627058620');" onmouseout="out('-6810572453627058620');" style="">2325     private static class SimpleWorkspaceLoader implements WorkspaceLoader {                              </span>
<span class="-2219225490446500593" onmouseenter="enter('-2219225490446500593');" onmouseout="out('-2219225490446500593');" style="">2326         private final Resources mRes;                                                                    </span>
<span class="-3366452129939698064" onmouseenter="enter('-3366452129939698064');" onmouseout="out('-3366452129939698064');" style="">2327         private final int mWorkspaceId;                                                                  </span>
<span class="6266322654512692359" onmouseenter="enter('6266322654512692359');" onmouseout="out('6266322654512692359');" style="">2328         private final DatabaseHelper mHelper;                                                            </span>
<span  style="">2329                                                                                                          </span>
<span class="5321487022203331675" onmouseenter="enter('5321487022203331675');" onmouseout="out('5321487022203331675');" style="">2330         SimpleWorkspaceLoader(DatabaseHelper helper, Resources res, int workspaceId) {                   </span>
<span class="3631311506378187050" onmouseenter="enter('3631311506378187050');" onmouseout="out('3631311506378187050');" style="">2331             mHelper = helper;                                                                            </span>
<span class="4740402107482375987" onmouseenter="enter('4740402107482375987');" onmouseout="out('4740402107482375987');" style="">2332             mRes = res;                                                                                  </span>
<span class="5644903313888202397" onmouseenter="enter('5644903313888202397');" onmouseout="out('5644903313888202397');" style="">2333             mWorkspaceId = workspaceId;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2334         }                                                                                                </span>
<span  style="">2335                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2336         @Override                                                                                        </span>
<span class="-7017557007815113757" onmouseenter="enter('-7017557007815113757');" onmouseout="out('-7017557007815113757');" style="">2337         public int loadLayout(SQLiteDatabase db, ArrayList&lt;Long&gt; screenIds) {                            </span>
<span class="8904365510774480646" onmouseenter="enter('8904365510774480646');" onmouseout="out('8904365510774480646');" style="">2338             return mHelper.loadFavoritesRecursive(db, mRes, mWorkspaceId, screenIds);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2339         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2340     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2341 }                                                                                                        </span>
















































































































































</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  16 package com.android.launcher3;                                                                           </span>
<span  style="">  17                                                                                                          </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  18 import android.app.SearchManager;                                                                        </span>
<span class="504928717176532115" onmouseenter="enter('504928717176532115');" onmouseout="out('504928717176532115');" style="">  19 import android.appwidget.AppWidgetHost;                                                                  </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  20 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  22 import android.content.ComponentName;                                                                    </span>
<span class="550877806393279246" onmouseenter="enter('550877806393279246');" onmouseout="out('550877806393279246');" style="">  23 import android.content.ContentProvider;                                                                  </span>
<span class="3739800667450215943" onmouseenter="enter('3739800667450215943');" onmouseout="out('3739800667450215943');" style="">  24 import android.content.ContentProviderOperation;                                                         </span>
<span class="-6369732601490611729" onmouseenter="enter('-6369732601490611729');" onmouseout="out('-6369732601490611729');" style="">  25 import android.content.ContentProviderResult;                                                            </span>
<span class="6126857652515451632" onmouseenter="enter('6126857652515451632');" onmouseout="out('6126857652515451632');" style="">  26 import android.content.ContentResolver;                                                                  </span>
<span class="-9185307499822629" onmouseenter="enter('-9185307499822629');" onmouseout="out('-9185307499822629');" style="">  27 import android.content.ContentUris;                                                                      </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="">  28 import android.content.ContentValues;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  29 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  30 import android.content.Intent;                                                                           </span>
<span class="-4160670168441716907" onmouseenter="enter('-4160670168441716907');" onmouseout="out('-4160670168441716907');" style="">  31 import android.content.OperationApplicationException;                                                    </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  32 import android.content.SharedPreferences;                                                                </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="">  33 import android.content.pm.ActivityInfo;                                                                  </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  34 import android.content.pm.ApplicationInfo;                                                               </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  35 import android.content.pm.PackageManager;                                                                </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  36 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  37 import android.content.res.Resources;                                                                    </span>
<span class="7386012112211289620" onmouseenter="enter('7386012112211289620');" onmouseout="out('7386012112211289620');" style="">  38 import android.content.res.XmlResourceParser;                                                            </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  39 import android.database.Cursor;                                                                          </span>
<span class="5870833163231201789" onmouseenter="enter('5870833163231201789');" onmouseout="out('5870833163231201789');" style="">  40 import android.database.SQLException;                                                                    </span>
<span class="-4895155655276492102" onmouseenter="enter('-4895155655276492102');" onmouseout="out('-4895155655276492102');" style="">  41 import android.database.sqlite.SQLiteDatabase;                                                           </span>
<span class="6401548559697116088" onmouseenter="enter('6401548559697116088');" onmouseout="out('6401548559697116088');" style="">  42 import android.database.sqlite.SQLiteOpenHelper;                                                         </span>
<span class="-1253510085600408435" onmouseenter="enter('-1253510085600408435');" onmouseout="out('-1253510085600408435');" style="">  43 import android.database.sqlite.SQLiteQueryBuilder;                                                       </span>
<span class="-7509968378694652787" onmouseenter="enter('-7509968378694652787');" onmouseout="out('-7509968378694652787');" style="">  44 import android.database.sqlite.SQLiteStatement;                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  45 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  46 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  47 import android.net.Uri;                                                                                  </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  48 import android.os.Bundle;                                                                                </span>
<span class="-3605034024778696983" onmouseenter="enter('-3605034024778696983');" onmouseout="out('-3605034024778696983');" style="">  49 import android.provider.Settings;                                                                        </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  50 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  51 import android.util.Log;                                                                                 </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">  52 import android.util.SparseArray;                                                                         </span>
<span class="4395110202233918405" onmouseenter="enter('4395110202233918405');" onmouseout="out('4395110202233918405');" style="">  53 import com.android.launcher3.AutoInstallsLayout.LayoutParserCallback;                                    </span>
<span class="6281159490246877388" onmouseenter="enter('6281159490246877388');" onmouseout="out('6281159490246877388');" style="">  54 import com.android.launcher3.LauncherSettings.Favorites;                                                 </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="">  55 import com.android.launcher3.compat.UserHandleCompat;                                                    </span>
<span class="-8849211230761127863" onmouseenter="enter('-8849211230761127863');" onmouseout="out('-8849211230761127863');" style="">  56 import com.android.launcher3.compat.UserManagerCompat;                                                   </span>
<span class="-7468653447981916815" onmouseenter="enter('-7468653447981916815');" onmouseout="out('-7468653447981916815');" style="">  57 import com.android.launcher3.config.ProviderConfig;                                                      </span>
<span class="-3926401431737521278" onmouseenter="enter('-3926401431737521278');" onmouseout="out('-3926401431737521278');" style="">  58 import java.io.File;                                                                                     </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  59 import java.io.IOException;                                                                              </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  60 import java.net.URISyntaxException;                                                                      </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  61 import java.util.ArrayList;                                                                              </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  62 import java.util.Collections;                                                                            </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  63 import java.util.HashSet;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  64 import java.util.List;                                                                                   </span>
<span class="-5145222340437954675" onmouseenter="enter('-5145222340437954675');" onmouseout="out('-5145222340437954675');" style="">  65 import org.xmlpull.v1.XmlPullParser;                                                                     </span>
<span class="-3477173242969633951" onmouseenter="enter('-3477173242969633951');" onmouseout="out('-3477173242969633951');" style="">  66 import org.xmlpull.v1.XmlPullParserException;                                                            </span>
<span  style="">  67                                                                                                          </span>
<span  style="">  68                                                                                                          </span>
<span class="-5661310118425891821" onmouseenter="enter('-5661310118425891821');" onmouseout="out('-5661310118425891821');" style="">  69 public class LauncherProvider extends ContentProvider {                                                  </span>
<span class="-5301430442842506185" onmouseenter="enter('-5301430442842506185');" onmouseout="out('-5301430442842506185');" style="">  70     private static final String TAG = &quot;Launcher.LauncherProvider&quot;;                                       </span>
<span  style="">  71                                                                                                          </span>
<span class="-8469384925954206736" onmouseenter="enter('-8469384925954206736');" onmouseout="out('-8469384925954206736');" style="">  72     private static final boolean LOGD = false;                                                           </span>
<span  style="">  73                                                                                                          </span>
<span class="8048508412932305881" onmouseenter="enter('8048508412932305881');" onmouseout="out('8048508412932305881');" style="">  74     private static final String DATABASE_NAME = &quot;launcher.db&quot;;                                           </span>
<span  style="">  75                                                                                                          </span>
<span class="7809747164420377858" onmouseenter="enter('7809747164420377858');" onmouseout="out('7809747164420377858');" style="">  76     private static final int DATABASE_VERSION = 20;                                                      </span>
<span  style="">  77                                                                                                          </span>
<span class="-458478327704245810" onmouseenter="enter('-458478327704245810');" onmouseout="out('-458478327704245810');" style="">  78     static final String OLD_AUTHORITY = &quot;com.android.launcher2.settings&quot;;                                </span>
<span  style="">  79                                                                                                          </span>
<span class="-4376021050615906115" onmouseenter="enter('-4376021050615906115');" onmouseout="out('-4376021050615906115');" style="">  80     static final String AUTHORITY = ProviderConfig.AUTHORITY;                                            </span>
<span  style="">  81                                                                                                          </span>
<span class="-4487533157410420763" onmouseenter="enter('-4487533157410420763');" onmouseout="out('-4487533157410420763');" style="">  82     // Should we attempt to load anything from the com.android.launcher2 provider?                       </span>
<span class="-4487533157410420763" onmouseenter="enter('-4487533157410420763');" onmouseout="out('-4487533157410420763');" style="">  83     // Should we attempt to load anything from the com.android.launcher2 provider?                       </span>
<span class="3383367194631780364" onmouseenter="enter('3383367194631780364');" onmouseout="out('3383367194631780364');" style="">  84     static final boolean IMPORT_LAUNCHER2_DATABASE = false;                                              </span>
<span  style="">  85                                                                                                          </span>
<span class="-6626902943579202823" onmouseenter="enter('-6626902943579202823');" onmouseout="out('-6626902943579202823');" style="">  86     static final String TABLE_FAVORITES = &quot;favorites&quot;;                                                   </span>
<span  style="">  87                                                                                                          </span>
<span class="-4121112267423691577" onmouseenter="enter('-4121112267423691577');" onmouseout="out('-4121112267423691577');" style="">  88     static final String TABLE_WORKSPACE_SCREENS = &quot;workspaceScreens&quot;;                                    </span>
<span  style="">  89                                                                                                          </span>
<span class="5667619940348816611" onmouseenter="enter('5667619940348816611');" onmouseout="out('5667619940348816611');" style="">  90     static final String PARAMETER_NOTIFY = &quot;notify&quot;;                                                     </span>
<span  style="">  91                                                                                                          </span>
<span class="-591783718254341348" onmouseenter="enter('-591783718254341348');" onmouseout="out('-591783718254341348');" style="">  92     static final String UPGRADED_FROM_OLD_DATABASE =                                                     </span>
<span class="6670864303817368253" onmouseenter="enter('6670864303817368253');" onmouseout="out('6670864303817368253');" style="">  93             &quot;UPGRADED_FROM_OLD_DATABASE&quot;;                                                                </span>
<span  style="">  94                                                                                                          </span>
<span class="-2242593752226183959" onmouseenter="enter('-2242593752226183959');" onmouseout="out('-2242593752226183959');" style="">  95     static final String EMPTY_DATABASE_CREATED =                                                         </span>
<span class="-3248472412834995750" onmouseenter="enter('-3248472412834995750');" onmouseout="out('-3248472412834995750');" style="">  96             &quot;EMPTY_DATABASE_CREATED&quot;;                                                                    </span>
<span  style="">  97                                                                                                          </span>
<span class="-5068203882425881097" onmouseenter="enter('-5068203882425881097');" onmouseout="out('-5068203882425881097');" style="">  98     private static final String ACTION_APPWIDGET_DEFAULT_WORKSPACE_CONFIGURE =                           </span>
<span class="-8289377429995644773" onmouseenter="enter('-8289377429995644773');" onmouseout="out('-8289377429995644773');" style="">  99             &quot;com.android.launcher.action.APPWIDGET_DEFAULT_WORKSPACE_CONFIGURE&quot;;                         </span>
<span  style=""> 100                                                                                                          </span>
<span class="-254878042648191521" onmouseenter="enter('-254878042648191521');" onmouseout="out('-254878042648191521');" style=""> 101     private static final String URI_PARAM_IS_EXTERNAL_ADD = &quot;isExternalAdd&quot;;                             </span>
<span  style=""> 102                                                                                                          </span>
<span class="-4555445478569710276" onmouseenter="enter('-4555445478569710276');" onmouseout="out('-4555445478569710276');" style=""> 103     private LauncherProviderChangeListener mListener;                                                    </span>
<span  style=""> 104                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 105     /**                                                                                                  </span>
<span class="-3211764681636990688" onmouseenter="enter('-3211764681636990688');" onmouseout="out('-3211764681636990688');" style=""> 106      * {@link Uri} triggered at any registered {@link android.database.ContentObserver} when             </span>
<span class="-4919300270466303234" onmouseenter="enter('-4919300270466303234');" onmouseout="out('-4919300270466303234');" style=""> 107      * {@link AppWidgetHost#deleteHost()} is called during database creation.                            </span>
<span class="-788325382909228329" onmouseenter="enter('-788325382909228329');" onmouseout="out('-788325382909228329');" style=""> 108      * Use this to recall {@link AppWidgetHost#startListening()} if needed.                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 109      */                                                                                                  </span>
<span class="5515339483970246409" onmouseenter="enter('5515339483970246409');" onmouseout="out('5515339483970246409');" style=""> 110     static final Uri CONTENT_APPWIDGET_RESET_URI =                                                       </span>
<span class="3194273355649806706" onmouseenter="enter('3194273355649806706');" onmouseout="out('3194273355649806706');" style=""> 111             Uri.parse(&quot;content://&quot; + AUTHORITY + &quot;/appWidgetReset&quot;);                                     </span>
<span  style=""> 112                                                                                                          </span>
<span class="-35355205086145165" onmouseenter="enter('-35355205086145165');" onmouseout="out('-35355205086145165');" style=""> 113     private DatabaseHelper mOpenHelper;                                                                  </span>
<span  style=""> 114                                                                                                          </span>
<span class="4833460347687640836" onmouseenter="enter('4833460347687640836');" onmouseout="out('4833460347687640836');" style=""> 115     private static boolean sJustLoadedFromOldDb;                                                         </span>
<span  style=""> 116                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 117     @Override                                                                                            </span>
<span class="5054121129922253104" onmouseenter="enter('5054121129922253104');" onmouseout="out('5054121129922253104');" style=""> 118     public boolean onCreate() {                                                                          </span>
<span class="4475688138331124962" onmouseenter="enter('4475688138331124962');" onmouseout="out('4475688138331124962');" style=""> 119         final Context context = getContext();                                                            </span>
<span class="-7690576094790651842" onmouseenter="enter('-7690576094790651842');" onmouseout="out('-7690576094790651842');" style=""> 120         mOpenHelper = new DatabaseHelper(context);                                                       </span>
<span class="-7305781479923559628" onmouseenter="enter('-7305781479923559628');" onmouseout="out('-7305781479923559628');" style=""> 121         LauncherAppState.setLauncherProvider(this);                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 122         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123     }                                                                                                    </span>
<span  style=""> 124                                                                                                          </span>
<span class="487377169126514768" onmouseenter="enter('487377169126514768');" onmouseout="out('487377169126514768');" style=""> 125     public boolean wasNewDbCreated() {                                                                   </span>
<span class="-2120364841155545874" onmouseenter="enter('-2120364841155545874');" onmouseout="out('-2120364841155545874');" style=""> 126         return mOpenHelper.wasNewDbCreated();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 127     }                                                                                                    </span>
<span  style=""> 128                                                                                                          </span>
<span class="9170464131639972057" onmouseenter="enter('9170464131639972057');" onmouseout="out('9170464131639972057');" style=""> 129     public void setLauncherProviderChangeListener(LauncherProviderChangeListener listener) {             </span>
<span class="9132236250678632099" onmouseenter="enter('9132236250678632099');" onmouseout="out('9132236250678632099');" style=""> 130         mListener = listener;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 131     }                                                                                                    </span>
<span  style=""> 132                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 133     @Override                                                                                            </span>
<span class="-1263590755434456926" onmouseenter="enter('-1263590755434456926');" onmouseout="out('-1263590755434456926');" style=""> 134     public String getType(Uri uri) {                                                                     </span>
<span class="336598653403461328" onmouseenter="enter('336598653403461328');" onmouseout="out('336598653403461328');" style=""> 135         SqlArguments args = new SqlArguments(uri, null, null);                                           </span>
<span class="-3811208733585118846" onmouseenter="enter('-3811208733585118846');" onmouseout="out('-3811208733585118846');" style=""> 136         if (TextUtils.isEmpty(args.where)) {                                                             </span>
<span class="4564755247099008741" onmouseenter="enter('4564755247099008741');" onmouseout="out('4564755247099008741');" style=""> 137             return &quot;vnd.android.cursor.dir/&quot; + args.table;                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 138         } else {                                                                                         </span>
<span class="9039528378345344991" onmouseenter="enter('9039528378345344991');" onmouseout="out('9039528378345344991');" style=""> 139             return &quot;vnd.android.cursor.item/&quot; + args.table;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141     }                                                                                                    </span>
<span  style=""> 142                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 143     @Override                                                                                            </span>
<span class="2688381462100157580" onmouseenter="enter('2688381462100157580');" onmouseout="out('2688381462100157580');" style=""> 144     public Cursor query(Uri uri, String[] projection, String selection,                                  </span>
<span class="-8080601171652713678" onmouseenter="enter('-8080601171652713678');" onmouseout="out('-8080601171652713678');" style=""> 145             String[] selectionArgs, String sortOrder) {                                                  </span>
<span  style=""> 146                                                                                                          </span>
<span class="-3782003319541019236" onmouseenter="enter('-3782003319541019236');" onmouseout="out('-3782003319541019236');" style=""> 147         SqlArguments args = new SqlArguments(uri, selection, selectionArgs);                             </span>
<span class="-631518951729113636" onmouseenter="enter('-631518951729113636');" onmouseout="out('-631518951729113636');" style=""> 148         SQLiteQueryBuilder qb = new SQLiteQueryBuilder();                                                </span>
<span class="2611293065726660593" onmouseenter="enter('2611293065726660593');" onmouseout="out('2611293065726660593');" style=""> 149         qb.setTables(args.table);                                                                        </span>
<span  style=""> 150                                                                                                          </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 151         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="3134453170380441664" onmouseenter="enter('3134453170380441664');" onmouseout="out('3134453170380441664');" style=""> 152         Cursor result = qb.query(db, projection, args.where, args.args, null, null, sortOrder);          </span>
<span class="-7763164457135943875" onmouseenter="enter('-7763164457135943875');" onmouseout="out('-7763164457135943875');" style=""> 153         result.setNotificationUri(getContext().getContentResolver(), uri);                               </span>
<span  style=""> 154                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 155         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156     }                                                                                                    </span>
<span  style=""> 157                                                                                                          </span>
<span class="-486731947523148631" onmouseenter="enter('-486731947523148631');" onmouseout="out('-486731947523148631');" style=""><abbr title=" 158     private static long dbInsertAndCheck(DatabaseHelper helper, SQLiteDatabase db, String table, String nullColumnHack, ContentValues values) {"> 158     private static long dbInsertAndCheck(DatabaseHelper helper, SQLiteDatabase db, String table, String n🔵</abbr></span>
<span class="6588288335812254858" onmouseenter="enter('6588288335812254858');" onmouseout="out('6588288335812254858');" style=""> 159         if (values == null) {                                                                            </span>
<span class="7184965589450928593" onmouseenter="enter('7184965589450928593');" onmouseout="out('7184965589450928593');" style=""> 160             throw new RuntimeException(&quot;Error: attempting to insert null values&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161         }                                                                                                </span>
<span class="7050899094957739080" onmouseenter="enter('7050899094957739080');" onmouseout="out('7050899094957739080');" style=""> 162         if (!values.containsKey(LauncherSettings.ChangeLogColumns._ID)) {                                </span>
<span class="492623150120761321" onmouseenter="enter('492623150120761321');" onmouseout="out('492623150120761321');" style=""> 163             throw new RuntimeException(&quot;Error: attempting to add item without specifying an id&quot;);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164         }                                                                                                </span>
<span class="-5706715493188407465" onmouseenter="enter('-5706715493188407465');" onmouseout="out('-5706715493188407465');" style=""> 165         helper.checkId(table, values);                                                                   </span>
<span class="1074556166740873719" onmouseenter="enter('1074556166740873719');" onmouseout="out('1074556166740873719');" style=""> 166         return db.insert(table, nullColumnHack, values);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167     }                                                                                                    </span>
<span  style=""> 168                                                                                                          </span>
<span class="863775672802506838" onmouseenter="enter('863775672802506838');" onmouseout="out('863775672802506838');" style=""> 169     private static void deleteId(SQLiteDatabase db, long id) {                                           </span>
<span class="-4192328687501718427" onmouseenter="enter('-4192328687501718427');" onmouseout="out('-4192328687501718427');" style=""> 170         Uri uri = LauncherSettings.Favorites.getContentUri(id, false);                                   </span>
<span class="336598653403461328" onmouseenter="enter('336598653403461328');" onmouseout="out('336598653403461328');" style=""> 171         SqlArguments args = new SqlArguments(uri, null, null);                                           </span>
<span class="9003145226006787004" onmouseenter="enter('9003145226006787004');" onmouseout="out('9003145226006787004');" style=""> 172         db.delete(args.table, args.where, args.args);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173     }                                                                                                    </span>
<span  style=""> 174                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 175     @Override                                                                                            </span>
<span class="-734135164912880773" onmouseenter="enter('-734135164912880773');" onmouseout="out('-734135164912880773');" style=""> 176     public Uri insert(Uri uri, ContentValues initialValues) {                                            </span>
<span class="8811129738693748448" onmouseenter="enter('8811129738693748448');" onmouseout="out('8811129738693748448');" style=""> 177         SqlArguments args = new SqlArguments(uri);                                                       </span>
<span class="-8942992855752528468" onmouseenter="enter('-8942992855752528468');" onmouseout="out('-8942992855752528468');" style=""> 178         // In very limited cases, we support system|signature permission apps to add to the db           </span>
<span class="8337919216215113797" onmouseenter="enter('8337919216215113797');" onmouseout="out('8337919216215113797');" style=""> 179         String externalAdd = uri.getQueryParameter(URI_PARAM_IS_EXTERNAL_ADD);                           </span>
<span class="5252109860149656502" onmouseenter="enter('5252109860149656502');" onmouseout="out('5252109860149656502');" style=""> 180         if ((externalAdd != null) &amp;&amp; &quot;true&quot;.equals(externalAdd)) {                                       </span>
<span class="255159610270408066" onmouseenter="enter('255159610270408066');" onmouseout="out('255159610270408066');" style=""> 181             if (!mOpenHelper.initializeExternalAdd(initialValues)) {                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 182                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184         }                                                                                                </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 185         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="-6358079444454153819" onmouseenter="enter('-6358079444454153819');" onmouseout="out('-6358079444454153819');" style=""> 186         addModifiedTime(initialValues);                                                                  </span>
<span class="5419112362953263362" onmouseenter="enter('5419112362953263362');" onmouseout="out('5419112362953263362');" style=""> 187         final long rowId = dbInsertAndCheck(mOpenHelper, db, args.table, null, initialValues);           </span>
<span class="4021015844173112187" onmouseenter="enter('4021015844173112187');" onmouseout="out('4021015844173112187');" style=""> 188         if (rowId &lt;= 0) {                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 189             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190         }                                                                                                </span>
<span class="8735878877349428813" onmouseenter="enter('8735878877349428813');" onmouseout="out('8735878877349428813');" style=""> 191         uri = ContentUris.withAppendedId(uri, rowId);                                                    </span>
<span class="-4021691463985906436" onmouseenter="enter('-4021691463985906436');" onmouseout="out('-4021691463985906436');" style=""> 192         sendNotify(uri);                                                                                 </span>
<span class="8673785246827833247" onmouseenter="enter('8673785246827833247');" onmouseout="out('8673785246827833247');" style=""> 193         return uri;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 194     }                                                                                                    </span>
<span  style=""> 195                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 196     @Override                                                                                            </span>
<span class="-327877481205905086" onmouseenter="enter('-327877481205905086');" onmouseout="out('-327877481205905086');" style=""> 197     public int bulkInsert(Uri uri, ContentValues[] values) {                                             </span>
<span class="8811129738693748448" onmouseenter="enter('8811129738693748448');" onmouseout="out('8811129738693748448');" style=""> 198         SqlArguments args = new SqlArguments(uri);                                                       </span>
<span  style=""> 199                                                                                                          </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 200         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 201         db.beginTransaction();                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 202         try {                                                                                            </span>
<span class="7727596149598132072" onmouseenter="enter('7727596149598132072');" onmouseout="out('7727596149598132072');" style=""> 203             int numValues = values.length;                                                               </span>
<span class="805790054769028067" onmouseenter="enter('805790054769028067');" onmouseout="out('805790054769028067');" style=""> 204             for (int i = 0; i &lt; numValues; i++) {                                                        </span>
<span class="2678636525018066730" onmouseenter="enter('2678636525018066730');" onmouseout="out('2678636525018066730');" style=""> 205                 addModifiedTime(values[i]);                                                              </span>
<span class="-5505203781899797586" onmouseenter="enter('-5505203781899797586');" onmouseout="out('-5505203781899797586');" style=""> 206                 if (dbInsertAndCheck(mOpenHelper, db, args.table, null, values[i]) &lt; 0) {                </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 207                     return 0;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209             }                                                                                            </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 210             db.setTransactionSuccessful();                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 211         } finally {                                                                                      </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 212             db.endTransaction();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213         }                                                                                                </span>
<span  style=""> 214                                                                                                          </span>
<span class="-4021691463985906436" onmouseenter="enter('-4021691463985906436');" onmouseout="out('-4021691463985906436');" style=""> 215         sendNotify(uri);                                                                                 </span>
<span class="6793841392205084718" onmouseenter="enter('6793841392205084718');" onmouseout="out('6793841392205084718');" style=""> 216         return values.length;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217     }                                                                                                    </span>
<span  style=""> 218                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 219     @Override                                                                                            </span>
<span class="5983754597853237276" onmouseenter="enter('5983754597853237276');" onmouseout="out('5983754597853237276');" style=""> 220     public ContentProviderResult[] applyBatch(ArrayList&lt;ContentProviderOperation&gt; operations)            </span>
<span class="-5628895276830175510" onmouseenter="enter('-5628895276830175510');" onmouseout="out('-5628895276830175510');" style=""> 221             throws OperationApplicationException {                                                       </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 222         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 223         db.beginTransaction();                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 224         try {                                                                                            </span>
<span class="3840622082470564062" onmouseenter="enter('3840622082470564062');" onmouseout="out('3840622082470564062');" style=""> 225             ContentProviderResult[] result =  super.applyBatch(operations);                              </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 226             db.setTransactionSuccessful();                                                               </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 227             return result;                                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 228         } finally {                                                                                      </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 229             db.endTransaction();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231     }                                                                                                    </span>
<span  style=""> 232                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 233     @Override                                                                                            </span>
<span class="-6238796754049684603" onmouseenter="enter('-6238796754049684603');" onmouseout="out('-6238796754049684603');" style=""> 234     public int delete(Uri uri, String selection, String[] selectionArgs) {                               </span>
<span class="-3782003319541019236" onmouseenter="enter('-3782003319541019236');" onmouseout="out('-3782003319541019236');" style=""> 235         SqlArguments args = new SqlArguments(uri, selection, selectionArgs);                             </span>
<span  style=""> 236                                                                                                          </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 237         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="-848417512188045481" onmouseenter="enter('-848417512188045481');" onmouseout="out('-848417512188045481');" style=""> 238         int count = db.delete(args.table, args.where, args.args);                                        </span>
<span class="3046456781272759412" onmouseenter="enter('3046456781272759412');" onmouseout="out('3046456781272759412');" style=""> 239         if (count &gt; 0) sendNotify(uri);                                                                  </span>
<span  style=""> 240                                                                                                          </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style=""> 241         return count;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242     }                                                                                                    </span>
<span  style=""> 243                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 244     @Override                                                                                            </span>
<span class="-6200308159398621930" onmouseenter="enter('-6200308159398621930');" onmouseout="out('-6200308159398621930');" style=""> 245     public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) {         </span>
<span class="-3782003319541019236" onmouseenter="enter('-3782003319541019236');" onmouseout="out('-3782003319541019236');" style=""> 246         SqlArguments args = new SqlArguments(uri, selection, selectionArgs);                             </span>
<span  style=""> 247                                                                                                          </span>
<span class="5593303527651076681" onmouseenter="enter('5593303527651076681');" onmouseout="out('5593303527651076681');" style=""> 248         addModifiedTime(values);                                                                         </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 249         SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                           </span>
<span class="6692131291033480751" onmouseenter="enter('6692131291033480751');" onmouseout="out('6692131291033480751');" style=""> 250         int count = db.update(args.table, values, args.where, args.args);                                </span>
<span class="3046456781272759412" onmouseenter="enter('3046456781272759412');" onmouseout="out('3046456781272759412');" style=""> 251         if (count &gt; 0) sendNotify(uri);                                                                  </span>
<span  style=""> 252                                                                                                          </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style=""> 253         return count;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254     }                                                                                                    </span>
<span  style=""> 255                                                                                                          </span>
<span class="-6137155183451194640" onmouseenter="enter('-6137155183451194640');" onmouseout="out('-6137155183451194640');" style=""> 256     private void sendNotify(Uri uri) {                                                                   </span>
<span class="8087997420167282782" onmouseenter="enter('8087997420167282782');" onmouseout="out('8087997420167282782');" style=""> 257         String notify = uri.getQueryParameter(PARAMETER_NOTIFY);                                         </span>
<span class="-5537720579944357088" onmouseenter="enter('-5537720579944357088');" onmouseout="out('-5537720579944357088');" style=""> 258         if ((notify == null) || &quot;true&quot;.equals(notify)) {                                                 </span>
<span class="-1009902495160891118" onmouseenter="enter('-1009902495160891118');" onmouseout="out('-1009902495160891118');" style=""> 259             getContext().getContentResolver().notifyChange(uri, null);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260         }                                                                                                </span>
<span class="-88474152060363663" onmouseenter="enter('-88474152060363663');" onmouseout="out('-88474152060363663');" style=""> 261         // always notify the backup agent                                                                </span>
<span class="-4136841506633225478" onmouseenter="enter('-4136841506633225478');" onmouseout="out('-4136841506633225478');" style=""> 262         LauncherBackupAgentHelper.dataChanged(getContext());                                             </span>
<span class="3660947493902737932" onmouseenter="enter('3660947493902737932');" onmouseout="out('3660947493902737932');" style=""> 263         if (mListener != null) {                                                                         </span>
<span class="7178241373784368891" onmouseenter="enter('7178241373784368891');" onmouseout="out('7178241373784368891');" style=""> 264             mListener.onLauncherProviderChange();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266     }                                                                                                    </span>
<span  style=""> 267                                                                                                          </span>
<span class="-1775729469739138676" onmouseenter="enter('-1775729469739138676');" onmouseout="out('-1775729469739138676');" style=""> 268     private void addModifiedTime(ContentValues values) {                                                 </span>
<span class="7778574075272931857" onmouseenter="enter('7778574075272931857');" onmouseout="out('7778574075272931857');" style=""> 269         values.put(LauncherSettings.ChangeLogColumns.MODIFIED, System.currentTimeMillis());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270     }                                                                                                    </span>
<span  style=""> 271                                                                                                          </span>
<span class="2178013549114956338" onmouseenter="enter('2178013549114956338');" onmouseout="out('2178013549114956338');" style=""> 272     public long generateNewItemId() {                                                                    </span>
<span class="4208143222012601660" onmouseenter="enter('4208143222012601660');" onmouseout="out('4208143222012601660');" style=""> 273         return mOpenHelper.generateNewItemId();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274     }                                                                                                    </span>
<span  style=""> 275                                                                                                          </span>
<span class="8365827129597185054" onmouseenter="enter('8365827129597185054');" onmouseout="out('8365827129597185054');" style=""> 276     public void updateMaxItemId(long id) {                                                               </span>
<span class="5887752252226734670" onmouseenter="enter('5887752252226734670');" onmouseout="out('5887752252226734670');" style=""> 277         mOpenHelper.updateMaxItemId(id);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278     }                                                                                                    </span>
<span  style=""> 279                                                                                                          </span>
<span class="3794345207933084858" onmouseenter="enter('3794345207933084858');" onmouseout="out('3794345207933084858');" style=""> 280     public long generateNewScreenId() {                                                                  </span>
<span class="1793864293735992917" onmouseenter="enter('1793864293735992917');" onmouseout="out('1793864293735992917');" style=""> 281         return mOpenHelper.generateNewScreenId();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282     }                                                                                                    </span>
<span  style=""> 283                                                                                                          </span>
<span class="6930658551566435877" onmouseenter="enter('6930658551566435877');" onmouseout="out('6930658551566435877');" style=""> 284     // This is only required one time while loading the workspace during the                             </span>
<span class="-2970396193784752555" onmouseenter="enter('-2970396193784752555');" onmouseout="out('-2970396193784752555');" style=""> 285     // upgrade path, and should never be called from anywhere else.                                      </span>
<span class="-7531165898061832726" onmouseenter="enter('-7531165898061832726');" onmouseout="out('-7531165898061832726');" style=""> 286     public void updateMaxScreenId(long maxScreenId) {                                                    </span>
<span class="1650077191565319140" onmouseenter="enter('1650077191565319140');" onmouseout="out('1650077191565319140');" style=""> 287         mOpenHelper.updateMaxScreenId(maxScreenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288     }                                                                                                    </span>
<span  style=""> 289                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 290     /**                                                                                                  </span>
<span class="3357730711931570136" onmouseenter="enter('3357730711931570136');" onmouseout="out('3357730711931570136');" style=""> 291      * @param Should we load the old db for upgrade? first run only.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 292      */                                                                                                  </span>
<span class="830252285283253659" onmouseenter="enter('830252285283253659');" onmouseout="out('830252285283253659');" style=""> 293     synchronized public boolean justLoadedOldDb() {                                                      </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 294         String spKey = LauncherAppState.getSharedPreferencesKey();                                       </span>
<span class="-1270995004093477684" onmouseenter="enter('-1270995004093477684');" onmouseout="out('-1270995004093477684');" style=""> 295         SharedPreferences sp = getContext().getSharedPreferences(spKey, Context.MODE_PRIVATE);           </span>
<span  style=""> 296                                                                                                          </span>
<span class="-2988224019905233772" onmouseenter="enter('-2988224019905233772');" onmouseout="out('-2988224019905233772');" style=""> 297         boolean loadedOldDb = false || sJustLoadedFromOldDb;                                             </span>
<span  style=""> 298                                                                                                          </span>
<span class="732070560985546855" onmouseenter="enter('732070560985546855');" onmouseout="out('732070560985546855');" style=""> 299         sJustLoadedFromOldDb = false;                                                                    </span>
<span class="2535788223071749602" onmouseenter="enter('2535788223071749602');" onmouseout="out('2535788223071749602');" style=""> 300         if (sp.getBoolean(UPGRADED_FROM_OLD_DATABASE, false)) {                                          </span>
<span  style=""> 301                                                                                                          </span>
<span class="2898240485600869061" onmouseenter="enter('2898240485600869061');" onmouseout="out('2898240485600869061');" style=""> 302             SharedPreferences.Editor editor = sp.edit();                                                 </span>
<span class="-3507238978930621467" onmouseenter="enter('-3507238978930621467');" onmouseout="out('-3507238978930621467');" style=""> 303             editor.remove(UPGRADED_FROM_OLD_DATABASE);                                                   </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 304             editor.commit();                                                                             </span>
<span class="424898969256754833" onmouseenter="enter('424898969256754833');" onmouseout="out('424898969256754833');" style=""> 305             loadedOldDb = true;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306         }                                                                                                </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style=""> 307         return loadedOldDb;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308     }                                                                                                    </span>
<span  style=""> 309                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 310     /**                                                                                                  </span>
<span class="-3404890512310195543" onmouseenter="enter('-3404890512310195543');" onmouseout="out('-3404890512310195543');" style=""> 311      * Clears all the data for a fresh start.                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 312      */                                                                                                  </span>
<span class="5695026788151904865" onmouseenter="enter('5695026788151904865');" onmouseout="out('5695026788151904865');" style=""> 313     public synchronized void createEmptyDB() {                                                           </span>
<span class="-257404101089763384" onmouseenter="enter('-257404101089763384');" onmouseout="out('-257404101089763384');" style=""> 314         mOpenHelper.createEmptyDB(mOpenHelper.getWritableDatabase());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315     }                                                                                                    </span>
<span  style=""> 316                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 317     /**                                                                                                  </span>
<span class="277164340629859803" onmouseenter="enter('277164340629859803');" onmouseout="out('277164340629859803');" style=""> 318      * Loads the default workspace based on the following priority scheme:                               </span>
<span class="-1034029749764411994" onmouseenter="enter('-1034029749764411994');" onmouseout="out('-1034029749764411994');" style=""> 319      * 1) From a package provided by play store                                                          </span>
<span class="7843976684893798531" onmouseenter="enter('7843976684893798531');" onmouseout="out('7843976684893798531');" style=""> 320      * 2) From a partner configuration APK, already in the system image                                  </span>
<span class="807937062749328402" onmouseenter="enter('807937062749328402');" onmouseout="out('807937062749328402');" style=""> 321      * 3) The default configuration for the particular device                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 322      */                                                                                                  </span>
<span class="-8895383805731812265" onmouseenter="enter('-8895383805731812265');" onmouseout="out('-8895383805731812265');" style=""> 323     public synchronized void loadDefaultFavoritesIfNecessary() {                                         </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 324         String spKey = LauncherAppState.getSharedPreferencesKey();                                       </span>
<span class="-1270995004093477684" onmouseenter="enter('-1270995004093477684');" onmouseout="out('-1270995004093477684');" style=""> 325         SharedPreferences sp = getContext().getSharedPreferences(spKey, Context.MODE_PRIVATE);           </span>
<span class="-1164862040405657048" onmouseenter="enter('-1164862040405657048');" onmouseout="out('-1164862040405657048');" style=""> 326         if (sp.getBoolean(EMPTY_DATABASE_CREATED, false)) {                                              </span>
<span class="-3246698064640464314" onmouseenter="enter('-3246698064640464314');" onmouseout="out('-3246698064640464314');" style=""> 327             Log.d(TAG, &quot;loading default workspace&quot;);                                                     </span>
<span class="3971865914653835114" onmouseenter="enter('3971865914653835114');" onmouseout="out('3971865914653835114');" style=""><abbr title=" 328             WorkspaceLoader loader = AutoInstallsLayout.get(getContext(), mOpenHelper.mAppWidgetHost, mOpenHelper);"> 328             WorkspaceLoader loader = AutoInstallsLayout.get(getContext(), mOpenHelper.mAppWidgetHost, mOp🔵</abbr></span>
<span class="-1290919382195344098" onmouseenter="enter('-1290919382195344098');" onmouseout="out('-1290919382195344098');" style=""> 329             if (loader == null) {                                                                        </span>
<span class="-7748100060285216458" onmouseenter="enter('-7748100060285216458');" onmouseout="out('-7748100060285216458');" style=""> 330                 final Partner partner = Partner.get(getContext().getPackageManager());                   </span>
<span class="8913346292880592040" onmouseenter="enter('8913346292880592040');" onmouseout="out('8913346292880592040');" style=""> 331                 if ((partner != null) &amp;&amp; partner.hasDefaultLayout()) {                                   </span>
<span class="882794219866203698" onmouseenter="enter('882794219866203698');" onmouseout="out('882794219866203698');" style=""> 332                     final Resources partnerRes = partner.getResources();                                 </span>
<span class="1017286514651378042" onmouseenter="enter('1017286514651378042');" onmouseout="out('1017286514651378042');" style=""><abbr title=" 333                     int workspaceResId = partnerRes.getIdentifier(Partner.RES_DEFAULT_LAYOUT, &quot;xml&quot;, partner.getPackageName());"> 333                     int workspaceResId = partnerRes.getIdentifier(Partner.RES_DEFAULT_LAYOUT, &quot;xml&quot;, part🔵</abbr></span>
<span class="-1442734434460802886" onmouseenter="enter('-1442734434460802886');" onmouseout="out('-1442734434460802886');" style=""> 334                     if (workspaceResId != 0) {                                                           </span>
<span class="7614099601786768812" onmouseenter="enter('7614099601786768812');" onmouseout="out('7614099601786768812');" style=""> 335                         loader = new SimpleWorkspaceLoader(mOpenHelper, partnerRes, workspaceResId);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338             }                                                                                            </span>
<span class="-1290919382195344098" onmouseenter="enter('-1290919382195344098');" onmouseout="out('-1290919382195344098');" style=""> 339             if (loader == null) {                                                                        </span>
<span class="7548162450499807440" onmouseenter="enter('7548162450499807440');" onmouseout="out('7548162450499807440');" style=""><abbr title=" 340                 loader = new SimpleWorkspaceLoader(mOpenHelper, getContext().getResources(), getDefaultWorkspaceResourceId());"> 340                 loader = new SimpleWorkspaceLoader(mOpenHelper, getContext().getResources(), getDefaultWo🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341             }                                                                                            </span>
<span class="126045670500141" onmouseenter="enter('126045670500141');" onmouseout="out('126045670500141');" style=""> 342             // Populate favorites table with initial favorites                                           </span>
<span class="6356197677764543118" onmouseenter="enter('6356197677764543118');" onmouseout="out('6356197677764543118');" style=""> 343             SharedPreferences.Editor editor = sp.edit().remove(EMPTY_DATABASE_CREATED);                  </span>
<span class="4528935963390066074" onmouseenter="enter('4528935963390066074');" onmouseout="out('4528935963390066074');" style=""> 344             mOpenHelper.loadFavorites(mOpenHelper.getWritableDatabase(), loader);                        </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 345             editor.commit();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347     }                                                                                                    </span>
<span  style=""> 348                                                                                                          </span>
<span class="-8499205643032210495" onmouseenter="enter('-8499205643032210495');" onmouseout="out('-8499205643032210495');" style=""> 349     public void migrateLauncher2Shortcuts() {                                                            </span>
<span class="-1111150326103747393" onmouseenter="enter('-1111150326103747393');" onmouseout="out('-1111150326103747393');" style=""><abbr title=" 350         mOpenHelper.migrateLauncher2Shortcuts(mOpenHelper.getWritableDatabase(), Uri.parse(getContext().getString(R.string.old_launcher_provider_uri)));"> 350         mOpenHelper.migrateLauncher2Shortcuts(mOpenHelper.getWritableDatabase(), Uri.parse(getContext().g🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351     }                                                                                                    </span>
<span  style=""> 352                                                                                                          </span>
<span class="-1196563046017318534" onmouseenter="enter('-1196563046017318534');" onmouseout="out('-1196563046017318534');" style=""> 353     private static int getDefaultWorkspaceResourceId() {                                                 </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 354         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 355         DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                    </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style=""> 356         if (LauncherAppState.isDisableAllApps()) {                                                       </span>
<span class="6699639115497717540" onmouseenter="enter('6699639115497717540');" onmouseout="out('6699639115497717540');" style=""> 357             return grid.defaultNoAllAppsLayoutId;                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 358         } else {                                                                                         </span>
<span class="-780823694227077807" onmouseenter="enter('-780823694227077807');" onmouseout="out('-780823694227077807');" style=""> 359             return grid.defaultLayoutId;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 361     }                                                                                                    </span>
<span  style=""> 362                                                                                                          </span>
<span class="2048811950140821659" onmouseenter="enter('2048811950140821659');" onmouseout="out('2048811950140821659');" style=""> 363     private static interface ContentValuesCallback {                                                     </span>
<span class="7826861037535998157" onmouseenter="enter('7826861037535998157');" onmouseout="out('7826861037535998157');" style=""> 364         public abstract void onRow(ContentValues values);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365     }                                                                                                    </span>
<span  style=""> 366                                                                                                          </span>
<span class="1239728474819548988" onmouseenter="enter('1239728474819548988');" onmouseout="out('1239728474819548988');" style=""> 367     private static boolean shouldImportLauncher2Database(Context context) {                              </span>
<span class="-3394718202218086970" onmouseenter="enter('-3394718202218086970');" onmouseout="out('-3394718202218086970');" style=""> 368         boolean isTablet = context.getResources().getBoolean(R.bool.is_tablet);                          </span>
<span  style=""> 369                                                                                                          </span>
<span class="-5532998664683170674" onmouseenter="enter('-5532998664683170674');" onmouseout="out('-5532998664683170674');" style=""> 370         // We don&#x27;t import the old databse for tablets, as the grid size has changed.                    </span>
<span class="8529341054323679340" onmouseenter="enter('8529341054323679340');" onmouseout="out('8529341054323679340');" style=""> 371         return !isTablet &amp;&amp; IMPORT_LAUNCHER2_DATABASE;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372     }                                                                                                    </span>
<span  style=""> 373                                                                                                          </span>
<span class="-7861087353469194327" onmouseenter="enter('-7861087353469194327');" onmouseout="out('-7861087353469194327');" style=""> 374     public void deleteDatabase() {                                                                       </span>
<span class="-3081120555997572478" onmouseenter="enter('-3081120555997572478');" onmouseout="out('-3081120555997572478');" style=""> 375         // Are you sure? (y/n)                                                                           </span>
<span class="7599905409028339447" onmouseenter="enter('7599905409028339447');" onmouseout="out('7599905409028339447');" style=""> 376         final SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                     </span>
<span class="4824670475834221257" onmouseenter="enter('4824670475834221257');" onmouseout="out('4824670475834221257');" style=""> 377         final File dbFile = new File(db.getPath());                                                      </span>
<span class="-4378932496508441297" onmouseenter="enter('-4378932496508441297');" onmouseout="out('-4378932496508441297');" style=""> 378         mOpenHelper.close();                                                                             </span>
<span class="-2168275612742463412" onmouseenter="enter('-2168275612742463412');" onmouseout="out('-2168275612742463412');" style=""> 379         if (dbFile.exists()) {                                                                           </span>
<span class="7055278701412747697" onmouseenter="enter('7055278701412747697');" onmouseout="out('7055278701412747697');" style=""> 380             SQLiteDatabase.deleteDatabase(dbFile);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381         }                                                                                                </span>
<span class="1429708216911350032" onmouseenter="enter('1429708216911350032');" onmouseout="out('1429708216911350032');" style=""> 382         mOpenHelper = new DatabaseHelper(getContext());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383     }                                                                                                    </span>
<span  style=""> 384                                                                                                          </span>
<span class="-8073014385313712586" onmouseenter="enter('-8073014385313712586');" onmouseout="out('-8073014385313712586');" style=""> 385     private static class DatabaseHelper extends SQLiteOpenHelper implements LayoutParserCallback {       </span>
<span class="-9177351901961504515" onmouseenter="enter('-9177351901961504515');" onmouseout="out('-9177351901961504515');" style=""> 386         private static final String TAG_RESOLVE = &quot;resolve&quot;;                                             </span>
<span  style=""> 387                                                                                                          </span>
<span class="-6648556986475948603" onmouseenter="enter('-6648556986475948603');" onmouseout="out('-6648556986475948603');" style=""> 388         private static final String TAG_FAVORITES = &quot;favorites&quot;;                                         </span>
<span  style=""> 389                                                                                                          </span>
<span class="2417919475469446038" onmouseenter="enter('2417919475469446038');" onmouseout="out('2417919475469446038');" style=""> 390         private static final String TAG_FAVORITE = &quot;favorite&quot;;                                           </span>
<span  style=""> 391                                                                                                          </span>
<span class="8817783213080628620" onmouseenter="enter('8817783213080628620');" onmouseout="out('8817783213080628620');" style=""> 392         private static final String TAG_APPWIDGET = &quot;appwidget&quot;;                                         </span>
<span  style=""> 393                                                                                                          </span>
<span class="1544013162193549447" onmouseenter="enter('1544013162193549447');" onmouseout="out('1544013162193549447');" style=""> 394         private static final String TAG_SHORTCUT = &quot;shortcut&quot;;                                           </span>
<span  style=""> 395                                                                                                          </span>
<span class="-5715927654015021253" onmouseenter="enter('-5715927654015021253');" onmouseout="out('-5715927654015021253');" style=""> 396         private static final String TAG_FOLDER = &quot;folder&quot;;                                               </span>
<span  style=""> 397                                                                                                          </span>
<span class="-6175494568545371270" onmouseenter="enter('-6175494568545371270');" onmouseout="out('-6175494568545371270');" style=""> 398         private static final String TAG_PARTNER_FOLDER = &quot;partner-folder&quot;;                               </span>
<span  style=""> 399                                                                                                          </span>
<span class="-8348196986139036128" onmouseenter="enter('-8348196986139036128');" onmouseout="out('-8348196986139036128');" style=""> 400         private static final String TAG_EXTRA = &quot;extra&quot;;                                                 </span>
<span  style=""> 401                                                                                                          </span>
<span class="-5562355841128428217" onmouseenter="enter('-5562355841128428217');" onmouseout="out('-5562355841128428217');" style=""> 402         private static final String TAG_INCLUDE = &quot;include&quot;;                                             </span>
<span  style=""> 403                                                                                                          </span>
<span class="-2405859498731861640" onmouseenter="enter('-2405859498731861640');" onmouseout="out('-2405859498731861640');" style=""> 404         // Style attrs -- &quot;Favorite&quot;                                                                     </span>
<span class="-2405859498731861640" onmouseenter="enter('-2405859498731861640');" onmouseout="out('-2405859498731861640');" style=""> 405         // Style attrs -- &quot;Favorite&quot;                                                                     </span>
<span class="6214193247203789772" onmouseenter="enter('6214193247203789772');" onmouseout="out('6214193247203789772');" style=""> 406         private static final String ATTR_CLASS_NAME = &quot;className&quot;;                                       </span>
<span  style=""> 407                                                                                                          </span>
<span class="-1386532944306710360" onmouseenter="enter('-1386532944306710360');" onmouseout="out('-1386532944306710360');" style=""> 408         private static final String ATTR_PACKAGE_NAME = &quot;packageName&quot;;                                   </span>
<span  style=""> 409                                                                                                          </span>
<span class="2414249740748360985" onmouseenter="enter('2414249740748360985');" onmouseout="out('2414249740748360985');" style=""> 410         private static final String ATTR_CONTAINER = &quot;container&quot;;                                        </span>
<span  style=""> 411                                                                                                          </span>
<span class="-389066511444324935" onmouseenter="enter('-389066511444324935');" onmouseout="out('-389066511444324935');" style=""> 412         private static final String ATTR_SCREEN = &quot;screen&quot;;                                              </span>
<span  style=""> 413                                                                                                          </span>
<span class="3539825055734438732" onmouseenter="enter('3539825055734438732');" onmouseout="out('3539825055734438732');" style=""> 414         private static final String ATTR_X = &quot;x&quot;;                                                        </span>
<span  style=""> 415                                                                                                          </span>
<span class="-8597702554968119187" onmouseenter="enter('-8597702554968119187');" onmouseout="out('-8597702554968119187');" style=""> 416         private static final String ATTR_Y = &quot;y&quot;;                                                        </span>
<span  style=""> 417                                                                                                          </span>
<span class="-2621848582492648979" onmouseenter="enter('-2621848582492648979');" onmouseout="out('-2621848582492648979');" style=""> 418         private static final String ATTR_SPAN_X = &quot;spanX&quot;;                                               </span>
<span  style=""> 419                                                                                                          </span>
<span class="-675060966992142264" onmouseenter="enter('-675060966992142264');" onmouseout="out('-675060966992142264');" style=""> 420         private static final String ATTR_SPAN_Y = &quot;spanY&quot;;                                               </span>
<span  style=""> 421                                                                                                          </span>
<span class="1238292044873463939" onmouseenter="enter('1238292044873463939');" onmouseout="out('1238292044873463939');" style=""> 422         private static final String ATTR_ICON = &quot;icon&quot;;                                                  </span>
<span  style=""> 423                                                                                                          </span>
<span class="5936928200905820740" onmouseenter="enter('5936928200905820740');" onmouseout="out('5936928200905820740');" style=""> 424         private static final String ATTR_TITLE = &quot;title&quot;;                                                </span>
<span  style=""> 425                                                                                                          </span>
<span class="-5345085314000449361" onmouseenter="enter('-5345085314000449361');" onmouseout="out('-5345085314000449361');" style=""> 426         private static final String ATTR_URI = &quot;uri&quot;;                                                    </span>
<span  style=""> 427                                                                                                          </span>
<span class="3599016499719454262" onmouseenter="enter('3599016499719454262');" onmouseout="out('3599016499719454262');" style=""> 428         // Style attrs -- &quot;Include&quot;                                                                      </span>
<span class="3599016499719454262" onmouseenter="enter('3599016499719454262');" onmouseout="out('3599016499719454262');" style=""> 429         // Style attrs -- &quot;Include&quot;                                                                      </span>
<span class="-5893198944478773555" onmouseenter="enter('-5893198944478773555');" onmouseout="out('-5893198944478773555');" style=""> 430         private static final String ATTR_WORKSPACE = &quot;workspace&quot;;                                        </span>
<span  style=""> 431                                                                                                          </span>
<span class="-5389745022469758251" onmouseenter="enter('-5389745022469758251');" onmouseout="out('-5389745022469758251');" style=""> 432         // Style attrs -- &quot;Extra&quot;                                                                        </span>
<span class="-5389745022469758251" onmouseenter="enter('-5389745022469758251');" onmouseout="out('-5389745022469758251');" style=""> 433         // Style attrs -- &quot;Extra&quot;                                                                        </span>
<span class="9111389785487433322" onmouseenter="enter('9111389785487433322');" onmouseout="out('9111389785487433322');" style=""> 434         private static final String ATTR_KEY = &quot;key&quot;;                                                    </span>
<span  style=""> 435                                                                                                          </span>
<span class="-4495093316086922325" onmouseenter="enter('-4495093316086922325');" onmouseout="out('-4495093316086922325');" style=""> 436         private static final String ATTR_VALUE = &quot;value&quot;;                                                </span>
<span  style=""> 437                                                                                                          </span>
<span class="-2672328117217234149" onmouseenter="enter('-2672328117217234149');" onmouseout="out('-2672328117217234149');" style=""> 438         private final Context mContext;                                                                  </span>
<span  style=""> 439                                                                                                          </span>
<span class="916814758228251192" onmouseenter="enter('916814758228251192');" onmouseout="out('916814758228251192');" style=""> 440         private final PackageManager mPackageManager;                                                    </span>
<span  style=""> 441                                                                                                          </span>
<span class="-7815254415381208754" onmouseenter="enter('-7815254415381208754');" onmouseout="out('-7815254415381208754');" style=""> 442         private final AppWidgetHost mAppWidgetHost;                                                      </span>
<span  style=""> 443                                                                                                          </span>
<span class="256431113711786954" onmouseenter="enter('256431113711786954');" onmouseout="out('256431113711786954');" style=""> 444         private long mMaxItemId = -1;                                                                    </span>
<span  style=""> 445                                                                                                          </span>
<span class="3024521003496490102" onmouseenter="enter('3024521003496490102');" onmouseout="out('3024521003496490102');" style=""> 446         private long mMaxScreenId = -1;                                                                  </span>
<span  style=""> 447                                                                                                          </span>
<span class="7342788129695687690" onmouseenter="enter('7342788129695687690');" onmouseout="out('7342788129695687690');" style=""> 448         private boolean mNewDbCreated = false;                                                           </span>
<span  style=""> 449                                                                                                          </span>
<span class="1000156088447424124" onmouseenter="enter('1000156088447424124');" onmouseout="out('1000156088447424124');" style=""> 450         DatabaseHelper(Context context) {                                                                </span>
<span class="-3457119901623063168" onmouseenter="enter('-3457119901623063168');" onmouseout="out('-3457119901623063168');" style=""> 451             super(context, DATABASE_NAME, null, DATABASE_VERSION);                                       </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style=""> 452             mContext = context;                                                                          </span>
<span class="8554599676865199182" onmouseenter="enter('8554599676865199182');" onmouseout="out('8554599676865199182');" style=""> 453             mPackageManager = context.getPackageManager();                                               </span>
<span class="6731257549223913473" onmouseenter="enter('6731257549223913473');" onmouseout="out('6731257549223913473');" style=""> 454             mAppWidgetHost = new AppWidgetHost(context, Launcher.APPWIDGET_HOST_ID);                     </span>
<span class="-7119307471557363464" onmouseenter="enter('-7119307471557363464');" onmouseout="out('-7119307471557363464');" style=""> 455             // In the case where neither onCreate nor onUpgrade gets called, we read the maxId from      </span>
<span class="-7146491614936969963" onmouseenter="enter('-7146491614936969963');" onmouseout="out('-7146491614936969963');" style=""> 456             // the DB here                                                                               </span>
<span class="-4991170806261126221" onmouseenter="enter('-4991170806261126221');" onmouseout="out('-4991170806261126221');" style=""> 457             if (mMaxItemId == (-1)) {                                                                    </span>
<span class="6514208419145701418" onmouseenter="enter('6514208419145701418');" onmouseout="out('6514208419145701418');" style=""> 458                 mMaxItemId = initializeMaxItemId(getWritableDatabase());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459             }                                                                                            </span>
<span class="-7435754855225565638" onmouseenter="enter('-7435754855225565638');" onmouseout="out('-7435754855225565638');" style=""> 460             if (mMaxScreenId == (-1)) {                                                                  </span>
<span class="-7197865417052699646" onmouseenter="enter('-7197865417052699646');" onmouseout="out('-7197865417052699646');" style=""> 461                 mMaxScreenId = initializeMaxScreenId(getWritableDatabase());                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463         }                                                                                                </span>
<span  style=""> 464                                                                                                          </span>
<span class="487377169126514768" onmouseenter="enter('487377169126514768');" onmouseout="out('487377169126514768');" style=""> 465         public boolean wasNewDbCreated() {                                                               </span>
<span class="1294520975679493300" onmouseenter="enter('1294520975679493300');" onmouseout="out('1294520975679493300');" style=""> 466             return mNewDbCreated;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467         }                                                                                                </span>
<span  style=""> 468                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 469         /**                                                                                              </span>
<span class="-3713204910685876719" onmouseenter="enter('-3713204910685876719');" onmouseout="out('-3713204910685876719');" style=""> 470          * Send notification that we&#x27;ve deleted the {@link AppWidgetHost},                               </span>
<span class="-5398164636189778479" onmouseenter="enter('-5398164636189778479');" onmouseout="out('-5398164636189778479');" style=""> 471          * probably as part of the initial database creation. The receiver may                           </span>
<span class="-284834762183367019" onmouseenter="enter('-284834762183367019');" onmouseout="out('-284834762183367019');" style=""> 472          * want to re-call {@link AppWidgetHost#startListening()} to ensure                              </span>
<span class="1913597860538764992" onmouseenter="enter('1913597860538764992');" onmouseout="out('1913597860538764992');" style=""> 473          * callbacks are correctly set.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 474          */                                                                                              </span>
<span class="3384745401314169661" onmouseenter="enter('3384745401314169661');" onmouseout="out('3384745401314169661');" style=""> 475         private void sendAppWidgetResetNotify() {                                                        </span>
<span class="-1113390730047466962" onmouseenter="enter('-1113390730047466962');" onmouseout="out('-1113390730047466962');" style=""> 476             final ContentResolver resolver = mContext.getContentResolver();                              </span>
<span class="4149774703050814155" onmouseenter="enter('4149774703050814155');" onmouseout="out('4149774703050814155');" style=""> 477             resolver.notifyChange(CONTENT_APPWIDGET_RESET_URI, null);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 478         }                                                                                                </span>
<span  style=""> 479                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 480         @Override                                                                                        </span>
<span class="3201464308903999877" onmouseenter="enter('3201464308903999877');" onmouseout="out('3201464308903999877');" style=""> 481         public void onCreate(SQLiteDatabase db) {                                                        </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style=""> 482             if (LOGD) {                                                                                  </span>
<span class="-8119295425705257856" onmouseenter="enter('-8119295425705257856');" onmouseout="out('-8119295425705257856');" style=""> 483                 Log.d(TAG, &quot;creating new launcher database&quot;);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484             }                                                                                            </span>
<span class="-5512536783286632376" onmouseenter="enter('-5512536783286632376');" onmouseout="out('-5512536783286632376');" style=""> 485             mMaxItemId = 1;                                                                              </span>
<span class="-1030858145638239039" onmouseenter="enter('-1030858145638239039');" onmouseout="out('-1030858145638239039');" style=""> 486             mMaxScreenId = 0;                                                                            </span>
<span class="-3863035699221776712" onmouseenter="enter('-3863035699221776712');" onmouseout="out('-3863035699221776712');" style=""> 487             mNewDbCreated = true;                                                                        </span>
<span class="8272328117098122260" onmouseenter="enter('8272328117098122260');" onmouseout="out('8272328117098122260');" style=""> 488             UserManagerCompat userManager = UserManagerCompat.getInstance(mContext);                     </span>
<span class="6577105677519491037" onmouseenter="enter('6577105677519491037');" onmouseout="out('6577105677519491037');" style=""> 489             long userSerialNumber = userManager.getSerialNumberForUser(UserHandleCompat.myUserHandle()); </span>
<span class="-3890541198487240548" onmouseenter="enter('-3890541198487240548');" onmouseout="out('-3890541198487240548');" style=""><abbr title=" 490             db.execSQL(((&quot;CREATE TABLE favorites (&quot; + (((((((((((((((((((((&quot;_id INTEGER PRIMARY KEY,&quot; + &quot;title TEXT,&quot;) + &quot;intent TEXT,&quot;) + &quot;container INTEGER,&quot;) + &quot;screen INTEGER,&quot;) + &quot;cellX INTEGER,&quot;) + &quot;cellY INTEGER,&quot;) + &quot;spanX INTEGER,&quot;) + &quot;spanY INTEGER,&quot;) + &quot;itemType INTEGER,&quot;) + &quot;appWidgetId INTEGER NOT NULL DEFAULT -1,&quot;) + &quot;isShortcut INTEGER,&quot;) + &quot;iconType INTEGER,&quot;) + &quot;iconPackage TEXT,&quot;) + &quot;iconResource TEXT,&quot;) + &quot;icon BLOB,&quot;) + &quot;uri TEXT,&quot;) + &quot;displayMode INTEGER,&quot;) + &quot;appWidgetProvider TEXT,&quot;) + &quot;modified INTEGER NOT NULL DEFAULT 0,&quot;) + &quot;restored INTEGER NOT NULL DEFAULT 0,&quot;) + &quot;profileId INTEGER DEFAULT &quot;)) + userSerialNumber) + &quot;);&quot;);"> 490             db.execSQL(((&quot;CREATE TABLE favorites (&quot; + (((((((((((((((((((((&quot;_id INTEGER PRIMARY KEY,&quot; + &quot;🔵</abbr></span>
<span class="4995577433356427338" onmouseenter="enter('4995577433356427338');" onmouseout="out('4995577433356427338');" style=""> 491             addWorkspacesTable(db);                                                                      </span>
<span class="-1982623284376040662" onmouseenter="enter('-1982623284376040662');" onmouseout="out('-1982623284376040662');" style=""> 492             // Database was just created, so wipe any previous widgets                                   </span>
<span class="35469525966995251" onmouseenter="enter('35469525966995251');" onmouseout="out('35469525966995251');" style=""> 493             if (mAppWidgetHost != null) {                                                                </span>
<span class="2879907381293157546" onmouseenter="enter('2879907381293157546');" onmouseout="out('2879907381293157546');" style=""> 494                 mAppWidgetHost.deleteHost();                                                             </span>
<span class="-5770229164268459929" onmouseenter="enter('-5770229164268459929');" onmouseout="out('-5770229164268459929');" style=""> 495                 sendAppWidgetResetNotify();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 496             }                                                                                            </span>
<span class="609275327715209247" onmouseenter="enter('609275327715209247');" onmouseout="out('609275327715209247');" style=""> 497             if (shouldImportLauncher2Database(mContext)) {                                               </span>
<span class="-4119927574094224618" onmouseenter="enter('-4119927574094224618');" onmouseout="out('-4119927574094224618');" style=""> 498                 // Try converting the old database                                                       </span>
<span class="-2608073222964575343" onmouseenter="enter('-2608073222964575343');" onmouseout="out('-2608073222964575343');" style=""> 499                 ContentValuesCallback permuteScreensCb = new ContentValuesCallback() {                   </span>
<span class="8586429359182493165" onmouseenter="enter('8586429359182493165');" onmouseout="out('8586429359182493165');" style=""> 500                     public void onRow(ContentValues values) {                                            </span>
<span class="8168514524062857535" onmouseenter="enter('8168514524062857535');" onmouseout="out('8168514524062857535');" style=""> 501                         int container = values.getAsInteger(LauncherSettings.Favorites.CONTAINER);       </span>
<span class="5020574662396153275" onmouseenter="enter('5020574662396153275');" onmouseout="out('5020574662396153275');" style=""> 502                         if (container == Favorites.CONTAINER_DESKTOP) {                                  </span>
<span class="8059598160467561910" onmouseenter="enter('8059598160467561910');" onmouseout="out('8059598160467561910');" style=""> 503                             int screen = values.getAsInteger(LauncherSettings.Favorites.SCREEN);         </span>
<span class="2273397417294307447" onmouseenter="enter('2273397417294307447');" onmouseout="out('2273397417294307447');" style=""> 504                             screen = ((int) (upgradeLauncherDb_permuteScreens(screen)));                 </span>
<span class="4993135311254983149" onmouseenter="enter('4993135311254983149');" onmouseout="out('4993135311254983149');" style=""> 505                             values.put(LauncherSettings.Favorites.SCREEN, screen);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 508                 };                                                                                       </span>
<span class="-4355870444879898878" onmouseenter="enter('-4355870444879898878');" onmouseout="out('-4355870444879898878');" style=""> 509                 Uri uri = Uri.parse((&quot;content://&quot; + Settings.AUTHORITY) + &quot;/old_favorites?notify=true&quot;); </span>
<span class="-6844380575648815427" onmouseenter="enter('-6844380575648815427');" onmouseout="out('-6844380575648815427');" style=""> 510                 if (!convertDatabase(db, uri, permuteScreensCb, true)) {                                 </span>
<span class="1523633607411472329" onmouseenter="enter('1523633607411472329');" onmouseout="out('1523633607411472329');" style=""> 511                     // Try and upgrade from the Launcher2 db                                             </span>
<span class="4518498143464795661" onmouseenter="enter('4518498143464795661');" onmouseout="out('4518498143464795661');" style=""> 512                     uri = Uri.parse(mContext.getString(R.string.old_launcher_provider_uri));             </span>
<span class="8183480483325234852" onmouseenter="enter('8183480483325234852');" onmouseout="out('8183480483325234852');" style=""> 513                     if (!convertDatabase(db, uri, permuteScreensCb, false)) {                            </span>
<span class="-7649701046117020267" onmouseenter="enter('-7649701046117020267');" onmouseout="out('-7649701046117020267');" style=""> 514                         // If we fail, then set a flag to load the default workspace                     </span>
<span class="7629543500667828090" onmouseenter="enter('7629543500667828090');" onmouseout="out('7629543500667828090');" style=""> 515                         setFlagEmptyDbCreated();                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 516                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518                 }                                                                                        </span>
<span class="3454579597073281561" onmouseenter="enter('3454579597073281561');" onmouseout="out('3454579597073281561');" style=""> 519                 // Right now, in non-default workspace cases, we want to run the final                   </span>
<span class="-5098717153247698852" onmouseenter="enter('-5098717153247698852');" onmouseout="out('-5098717153247698852');" style=""> 520                 // upgrade code (ie. to fix workspace screen indices -&gt; ids, etc.), so                   </span>
<span class="-4125458130400794691" onmouseenter="enter('-4125458130400794691');" onmouseout="out('-4125458130400794691');" style=""> 521                 // set that flag too.                                                                    </span>
<span class="4167333916835222093" onmouseenter="enter('4167333916835222093');" onmouseout="out('4167333916835222093');" style=""> 522                 setFlagJustLoadedOldDb();                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 523             } else {                                                                                     </span>
<span class="-1063142603395313746" onmouseenter="enter('-1063142603395313746');" onmouseout="out('-1063142603395313746');" style=""> 524                 // Fresh and clean launcher DB.                                                          </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style=""> 525                 mMaxItemId = initializeMaxItemId(db);                                                    </span>
<span class="7629543500667828090" onmouseenter="enter('7629543500667828090');" onmouseout="out('7629543500667828090');" style=""> 526                 setFlagEmptyDbCreated();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528         }                                                                                                </span>
<span  style=""> 529                                                                                                          </span>
<span class="6272912136443308513" onmouseenter="enter('6272912136443308513');" onmouseout="out('6272912136443308513');" style=""> 530         private void addWorkspacesTable(SQLiteDatabase db) {                                             </span>
<span class="2730049849658983478" onmouseenter="enter('2730049849658983478');" onmouseout="out('2730049849658983478');" style=""> 531             db.execSQL(&quot;CREATE TABLE &quot; + TABLE_WORKSPACE_SCREENS + &quot; (&quot; +                                </span>
<span class="-1469669278065576182" onmouseenter="enter('-1469669278065576182');" onmouseout="out('-1469669278065576182');" style=""> 532                     LauncherSettings.WorkspaceScreens._ID + &quot; INTEGER,&quot; +                                </span>
<span class="-8340457193420065897" onmouseenter="enter('-8340457193420065897');" onmouseout="out('-8340457193420065897');" style=""> 533                     LauncherSettings.WorkspaceScreens.SCREEN_RANK + &quot; INTEGER,&quot; +                        </span>
<span class="7771125962287368960" onmouseenter="enter('7771125962287368960');" onmouseout="out('7771125962287368960');" style=""> 534                     LauncherSettings.ChangeLogColumns.MODIFIED + &quot; INTEGER NOT NULL DEFAULT 0&quot; +         </span>
<span class="4525293784515244604" onmouseenter="enter('4525293784515244604');" onmouseout="out('4525293784515244604');" style=""> 535                     &quot;);&quot;);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536         }                                                                                                </span>
<span  style=""> 537                                                                                                          </span>
<span class="-3232037806458942317" onmouseenter="enter('-3232037806458942317');" onmouseout="out('-3232037806458942317');" style=""> 538         private void removeOrphanedItems(SQLiteDatabase db) {                                            </span>
<span class="-3995909494643948388" onmouseenter="enter('-3995909494643948388');" onmouseout="out('-3995909494643948388');" style=""> 539             // Delete items directly on the workspace who&#x27;s screen id doesn&#x27;t exist                      </span>
<span class="5263498211156741885" onmouseenter="enter('5263498211156741885');" onmouseout="out('5263498211156741885');" style=""> 540             // &quot;DELETE FROM favorites WHERE screen NOT IN (SELECT _id FROM workspaceScreens)             </span>
<span class="-3188872238770328750" onmouseenter="enter('-3188872238770328750');" onmouseout="out('-3188872238770328750');" style=""> 541             // AND container = -100&quot;                                                                     </span>
<span class="-5630263797304563686" onmouseenter="enter('-5630263797304563686');" onmouseout="out('-5630263797304563686');" style=""><abbr title=" 542             String removeOrphanedDesktopItems = (((((((((((&quot;DELETE FROM &quot; + TABLE_FAVORITES) + &quot; WHERE &quot;) + Favorites.SCREEN) + &quot; NOT IN (SELECT &quot;) + LauncherSettings.WorkspaceScreens._ID) + &quot; FROM &quot;) + TABLE_WORKSPACE_SCREENS) + &quot;)&quot;) + &quot; AND &quot;) + Favorites.CONTAINER) + &quot; = &quot;) + Favorites.CONTAINER_DESKTOP;"> 542             String removeOrphanedDesktopItems = (((((((((((&quot;DELETE FROM &quot; + TABLE_FAVORITES) + &quot; WHERE &quot;)🔵</abbr></span>
<span class="-5442680607495552531" onmouseenter="enter('-5442680607495552531');" onmouseout="out('-5442680607495552531');" style=""> 543             db.execSQL(removeOrphanedDesktopItems);                                                      </span>
<span class="2150462606818952724" onmouseenter="enter('2150462606818952724');" onmouseout="out('2150462606818952724');" style=""> 544             // Delete items contained in folders which no longer exist (after above statement)           </span>
<span class="-3395161823029099486" onmouseenter="enter('-3395161823029099486');" onmouseout="out('-3395161823029099486');" style=""> 545             // &quot;DELETE FROM favorites  WHERE container &lt;&gt; -100 AND container &lt;&gt; -101 AND container       </span>
<span class="-2722386101411707529" onmouseenter="enter('-2722386101411707529');" onmouseout="out('-2722386101411707529');" style=""> 546             // NOT IN (SELECT _id FROM favorites WHERE itemType = 2)&quot;                                    </span>
<span class="6346014784034873991" onmouseenter="enter('6346014784034873991');" onmouseout="out('6346014784034873991');" style=""><abbr title=" 547             String removeOrphanedFolderItems = (((((((((((((((((((&quot;DELETE FROM &quot; + TABLE_FAVORITES) + &quot; WHERE &quot;) + Favorites.CONTAINER) + &quot; &lt;&gt; &quot;) + Favorites.CONTAINER_DESKTOP) + &quot; AND &quot;) + Favorites.CONTAINER) + &quot; &lt;&gt; &quot;) + Favorites.CONTAINER_HOTSEAT) + &quot; AND &quot;) + Favorites.CONTAINER) + &quot; NOT IN (SELECT &quot;) + Favorites._ID) + &quot; FROM &quot;) + TABLE_FAVORITES) + &quot; WHERE &quot;) + Favorites.ITEM_TYPE) + &quot; = &quot;) + Favorites.ITEM_TYPE_FOLDER) + &quot;)&quot;;"> 547             String removeOrphanedFolderItems = (((((((((((((((((((&quot;DELETE FROM &quot; + TABLE_FAVORITES) + &quot; W🔵</abbr></span>
<span class="-8852316947474253726" onmouseenter="enter('-8852316947474253726');" onmouseout="out('-8852316947474253726');" style=""> 548             db.execSQL(removeOrphanedFolderItems);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549         }                                                                                                </span>
<span  style=""> 550                                                                                                          </span>
<span class="-2961433455992777066" onmouseenter="enter('-2961433455992777066');" onmouseout="out('-2961433455992777066');" style=""> 551         private void setFlagJustLoadedOldDb() {                                                          </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 552             String spKey = LauncherAppState.getSharedPreferencesKey();                                   </span>
<span class="-5067042237042206848" onmouseenter="enter('-5067042237042206848');" onmouseout="out('-5067042237042206848');" style=""> 553             SharedPreferences sp = mContext.getSharedPreferences(spKey, Context.MODE_PRIVATE);           </span>
<span class="2898240485600869061" onmouseenter="enter('2898240485600869061');" onmouseout="out('2898240485600869061');" style=""> 554             SharedPreferences.Editor editor = sp.edit();                                                 </span>
<span class="6425915141570404948" onmouseenter="enter('6425915141570404948');" onmouseout="out('6425915141570404948');" style=""> 555             editor.putBoolean(UPGRADED_FROM_OLD_DATABASE, true);                                         </span>
<span class="-757214322554182598" onmouseenter="enter('-757214322554182598');" onmouseout="out('-757214322554182598');" style=""> 556             editor.putBoolean(EMPTY_DATABASE_CREATED, false);                                            </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 557             editor.commit();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 558         }                                                                                                </span>
<span  style=""> 559                                                                                                          </span>
<span class="3580170518454540960" onmouseenter="enter('3580170518454540960');" onmouseout="out('3580170518454540960');" style=""> 560         private void setFlagEmptyDbCreated() {                                                           </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 561             String spKey = LauncherAppState.getSharedPreferencesKey();                                   </span>
<span class="-5067042237042206848" onmouseenter="enter('-5067042237042206848');" onmouseout="out('-5067042237042206848');" style=""> 562             SharedPreferences sp = mContext.getSharedPreferences(spKey, Context.MODE_PRIVATE);           </span>
<span class="2898240485600869061" onmouseenter="enter('2898240485600869061');" onmouseout="out('2898240485600869061');" style=""> 563             SharedPreferences.Editor editor = sp.edit();                                                 </span>
<span class="-1876450541595142979" onmouseenter="enter('-1876450541595142979');" onmouseout="out('-1876450541595142979');" style=""> 564             editor.putBoolean(EMPTY_DATABASE_CREATED, true);                                             </span>
<span class="4517855415574245319" onmouseenter="enter('4517855415574245319');" onmouseout="out('4517855415574245319');" style=""> 565             editor.putBoolean(UPGRADED_FROM_OLD_DATABASE, false);                                        </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 566             editor.commit();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567         }                                                                                                </span>
<span  style=""> 568                                                                                                          </span>
<span class="6904570220382641884" onmouseenter="enter('6904570220382641884');" onmouseout="out('6904570220382641884');" style=""> 569         // We rearrange the screens from the old launcher                                                </span>
<span class="4618589763737563912" onmouseenter="enter('4618589763737563912');" onmouseout="out('4618589763737563912');" style=""> 570         // 12345 -&gt; 34512                                                                                </span>
<span class="3499405923658396159" onmouseenter="enter('3499405923658396159');" onmouseout="out('3499405923658396159');" style=""> 571         private long upgradeLauncherDb_permuteScreens(long screen) {                                     </span>
<span class="-8201094260239758609" onmouseenter="enter('-8201094260239758609');" onmouseout="out('-8201094260239758609');" style=""> 572             if (screen &gt;= 2) {                                                                           </span>
<span class="2816670308386131226" onmouseenter="enter('2816670308386131226');" onmouseout="out('2816670308386131226');" style=""> 573                 return screen - 2;                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 574             } else {                                                                                     </span>
<span class="8757070544646185316" onmouseenter="enter('8757070544646185316');" onmouseout="out('8757070544646185316');" style=""> 575                 return screen + 3;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 576             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577         }                                                                                                </span>
<span  style=""> 578                                                                                                          </span>
<span class="5501735402686311021" onmouseenter="enter('5501735402686311021');" onmouseout="out('5501735402686311021');" style=""> 579         private boolean convertDatabase(SQLiteDatabase db, Uri uri,                                      </span>
<span class="1795795513015787778" onmouseenter="enter('1795795513015787778');" onmouseout="out('1795795513015787778');" style=""> 580                                         ContentValuesCallback cb, boolean deleteRows) {                  </span>
<span class="6817282747760268981" onmouseenter="enter('6817282747760268981');" onmouseout="out('6817282747760268981');" style=""> 581             if (LOGD) Log.d(TAG, &quot;converting database from an older format, but not onUpgrade&quot;);         </span>
<span class="-1589900657748744102" onmouseenter="enter('-1589900657748744102');" onmouseout="out('-1589900657748744102');" style=""> 582             boolean converted = false;                                                                   </span>
<span  style=""> 583                                                                                                          </span>
<span class="-1113390730047466962" onmouseenter="enter('-1113390730047466962');" onmouseout="out('-1113390730047466962');" style=""> 584             final ContentResolver resolver = mContext.getContentResolver();                              </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style=""> 585             Cursor cursor = null;                                                                        </span>
<span  style=""> 586                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 587             try {                                                                                        </span>
<span class="-4258104891436652364" onmouseenter="enter('-4258104891436652364');" onmouseout="out('-4258104891436652364');" style=""> 588                 cursor = resolver.query(uri, null, null, null, null);                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 589             } catch (Exception e) {                                                                      </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style=""> 590                 // Ignore                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591             }                                                                                            </span>
<span  style=""> 592                                                                                                          </span>
<span class="-8364191572061005786" onmouseenter="enter('-8364191572061005786');" onmouseout="out('-8364191572061005786');" style=""> 593             // We already have a favorites database in the old provider                                  </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 594             if (cursor != null) {                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 595                 try {                                                                                    </span>
<span class="5166436960045766511" onmouseenter="enter('5166436960045766511');" onmouseout="out('5166436960045766511');" style=""> 596                      if (cursor.getCount() &gt; 0) {                                                        </span>
<span class="-7893872194080327470" onmouseenter="enter('-7893872194080327470');" onmouseout="out('-7893872194080327470');" style=""> 597                         converted = copyFromCursor(db, cursor, cb) &gt; 0;                                  </span>
<span class="7409985313791550694" onmouseenter="enter('7409985313791550694');" onmouseout="out('7409985313791550694');" style=""> 598                         if (converted &amp;&amp; deleteRows) {                                                   </span>
<span class="6279659027428678438" onmouseenter="enter('6279659027428678438');" onmouseout="out('6279659027428678438');" style=""> 599                             resolver.delete(uri, null, null);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 602                 } finally {                                                                              </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 603                     cursor.close();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 604                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 605             }                                                                                            </span>
<span  style=""> 606                                                                                                          </span>
<span class="3249503320511644327" onmouseenter="enter('3249503320511644327');" onmouseout="out('3249503320511644327');" style=""> 607             if (converted) {                                                                             </span>
<span class="8975525021270415398" onmouseenter="enter('8975525021270415398');" onmouseout="out('8975525021270415398');" style=""> 608                 // Convert widgets from this import into widgets                                         </span>
<span class="-370034293300666463" onmouseenter="enter('-370034293300666463');" onmouseout="out('-370034293300666463');" style=""> 609                 if (LOGD) Log.d(TAG, &quot;converted and now triggering widget upgrade&quot;);                     </span>
<span class="3525871662547532743" onmouseenter="enter('3525871662547532743');" onmouseout="out('3525871662547532743');" style=""> 610                 convertWidgets(db);                                                                      </span>
<span  style=""> 611                                                                                                          </span>
<span class="1061677975667452281" onmouseenter="enter('1061677975667452281');" onmouseout="out('1061677975667452281');" style=""> 612                 // Update max item id                                                                    </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style=""> 613                 mMaxItemId = initializeMaxItemId(db);                                                    </span>
<span class="-1050526381544019588" onmouseenter="enter('-1050526381544019588');" onmouseout="out('-1050526381544019588');" style=""> 614                 if (LOGD) Log.d(TAG, &quot;mMaxItemId: &quot; + mMaxItemId);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615             }                                                                                            </span>
<span  style=""> 616                                                                                                          </span>
<span class="2958977365344362767" onmouseenter="enter('2958977365344362767');" onmouseout="out('2958977365344362767');" style=""> 617             return converted;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618         }                                                                                                </span>
<span  style=""> 619                                                                                                          </span>
<span class="-3386136253719322573" onmouseenter="enter('-3386136253719322573');" onmouseout="out('-3386136253719322573');" style=""> 620         private int copyFromCursor(SQLiteDatabase db, Cursor c, ContentValuesCallback cb) {              </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style=""> 621             final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);                 </span>
<span class="-4033402896828551783" onmouseenter="enter('-4033402896828551783');" onmouseout="out('-4033402896828551783');" style=""> 622             final int intentIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.INTENT);          </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style=""> 623             final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);            </span>
<span class="2476259323357554799" onmouseenter="enter('2476259323357554799');" onmouseout="out('2476259323357554799');" style=""> 624             final int iconTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYPE);     </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style=""> 625             final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);              </span>
<span class="-8681284292868403609" onmouseenter="enter('-8681284292868403609');" onmouseout="out('-8681284292868403609');" style=""><abbr title=" 626             final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE);"> 626             final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE)🔵</abbr></span>
<span class="6748803854718242440" onmouseenter="enter('6748803854718242440');" onmouseout="out('6748803854718242440');" style=""><abbr title=" 627             final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURCE);"> 627             final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURC🔵</abbr></span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 628             final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);    </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 629             final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);     </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 630             final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);          </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 631             final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);            </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 632             final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);            </span>
<span class="2746356324732937511" onmouseenter="enter('2746356324732937511');" onmouseout="out('2746356324732937511');" style=""> 633             final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);                </span>
<span class="8214639294219269043" onmouseenter="enter('8214639294219269043');" onmouseout="out('8214639294219269043');" style=""><abbr title=" 634             final int displayModeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.DISPLAY_MODE);"> 634             final int displayModeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.DISPLAY_MODE)🔵</abbr></span>
<span  style=""> 635                                                                                                          </span>
<span class="-2734978488976240244" onmouseenter="enter('-2734978488976240244');" onmouseout="out('-2734978488976240244');" style=""> 636             ContentValues[] rows = new ContentValues[c.getCount()];                                      </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style=""> 637             int i = 0;                                                                                   </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 638             while (c.moveToNext()) {                                                                     </span>
<span class="-3805379390248188389" onmouseenter="enter('-3805379390248188389');" onmouseout="out('-3805379390248188389');" style=""> 639                 ContentValues values = new ContentValues(c.getColumnCount());                            </span>
<span class="-1480489324102651074" onmouseenter="enter('-1480489324102651074');" onmouseout="out('-1480489324102651074');" style=""> 640                 values.put(LauncherSettings.Favorites._ID, c.getLong(idIndex));                          </span>
<span class="3725422751515257721" onmouseenter="enter('3725422751515257721');" onmouseout="out('3725422751515257721');" style=""> 641                 values.put(LauncherSettings.Favorites.INTENT, c.getString(intentIndex));                 </span>
<span class="3080545696092648727" onmouseenter="enter('3080545696092648727');" onmouseout="out('3080545696092648727');" style=""> 642                 values.put(LauncherSettings.Favorites.TITLE, c.getString(titleIndex));                   </span>
<span class="1653532357893974847" onmouseenter="enter('1653532357893974847');" onmouseout="out('1653532357893974847');" style=""> 643                 values.put(LauncherSettings.Favorites.ICON_TYPE, c.getInt(iconTypeIndex));               </span>
<span class="3857475807367449049" onmouseenter="enter('3857475807367449049');" onmouseout="out('3857475807367449049');" style=""> 644                 values.put(LauncherSettings.Favorites.ICON, c.getBlob(iconIndex));                       </span>
<span class="2521879942012579785" onmouseenter="enter('2521879942012579785');" onmouseout="out('2521879942012579785');" style=""> 645                 values.put(LauncherSettings.Favorites.ICON_PACKAGE, c.getString(iconPackageIndex));      </span>
<span class="3969193111666484842" onmouseenter="enter('3969193111666484842');" onmouseout="out('3969193111666484842');" style=""> 646                 values.put(LauncherSettings.Favorites.ICON_RESOURCE, c.getString(iconResourceIndex));    </span>
<span class="8435695874431009640" onmouseenter="enter('8435695874431009640');" onmouseout="out('8435695874431009640');" style=""> 647                 values.put(LauncherSettings.Favorites.CONTAINER, c.getInt(containerIndex));              </span>
<span class="5147687850248676325" onmouseenter="enter('5147687850248676325');" onmouseout="out('5147687850248676325');" style=""> 648                 values.put(LauncherSettings.Favorites.ITEM_TYPE, c.getInt(itemTypeIndex));               </span>
<span class="2567875359902744917" onmouseenter="enter('2567875359902744917');" onmouseout="out('2567875359902744917');" style=""> 649                 values.put(LauncherSettings.Favorites.APPWIDGET_ID, -1);                                 </span>
<span class="3045531455657088519" onmouseenter="enter('3045531455657088519');" onmouseout="out('3045531455657088519');" style=""> 650                 values.put(LauncherSettings.Favorites.SCREEN, c.getInt(screenIndex));                    </span>
<span class="5472332219112284812" onmouseenter="enter('5472332219112284812');" onmouseout="out('5472332219112284812');" style=""> 651                 values.put(LauncherSettings.Favorites.CELLX, c.getInt(cellXIndex));                      </span>
<span class="6120035052521227484" onmouseenter="enter('6120035052521227484');" onmouseout="out('6120035052521227484');" style=""> 652                 values.put(LauncherSettings.Favorites.CELLY, c.getInt(cellYIndex));                      </span>
<span class="-3897523412202294315" onmouseenter="enter('-3897523412202294315');" onmouseout="out('-3897523412202294315');" style=""> 653                 values.put(LauncherSettings.Favorites.URI, c.getString(uriIndex));                       </span>
<span class="2498865833812696947" onmouseenter="enter('2498865833812696947');" onmouseout="out('2498865833812696947');" style=""> 654                 values.put(LauncherSettings.Favorites.DISPLAY_MODE, c.getInt(displayModeIndex));         </span>
<span class="-4245152200459321990" onmouseenter="enter('-4245152200459321990');" onmouseout="out('-4245152200459321990');" style=""> 655                 if (cb != null) {                                                                        </span>
<span class="4870668330614344154" onmouseenter="enter('4870668330614344154');" onmouseout="out('4870668330614344154');" style=""> 656                     cb.onRow(values);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657                 }                                                                                        </span>
<span class="-995699744874558784" onmouseenter="enter('-995699744874558784');" onmouseout="out('-995699744874558784');" style=""> 658                 rows[i++] = values;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659             }                                                                                            </span>
<span  style=""> 660                                                                                                          </span>
<span class="-926962837754337949" onmouseenter="enter('-926962837754337949');" onmouseout="out('-926962837754337949');" style=""> 661             int total = 0;                                                                               </span>
<span class="81359043772452968" onmouseenter="enter('81359043772452968');" onmouseout="out('81359043772452968');" style=""> 662             if (i &gt; 0) {                                                                                 </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 663                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 664                 try {                                                                                    </span>
<span class="-7246991316390337770" onmouseenter="enter('-7246991316390337770');" onmouseout="out('-7246991316390337770');" style=""> 665                     int numValues = rows.length;                                                         </span>
<span class="5056751384864650727" onmouseenter="enter('5056751384864650727');" onmouseout="out('5056751384864650727');" style=""> 666                     for (i = 0; i &lt; numValues; i++) {                                                    </span>
<span class="-1571204467017813682" onmouseenter="enter('-1571204467017813682');" onmouseout="out('-1571204467017813682');" style=""> 667                         if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, rows[i]) &lt; 0) {            </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 668                             return 0;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 669                         } else {                                                                         </span>
<span class="-6740236498121811269" onmouseenter="enter('-6740236498121811269');" onmouseout="out('-6740236498121811269');" style=""> 670                             total++;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 671                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 672                     }                                                                                    </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 673                     db.setTransactionSuccessful();                                                       </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 674                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 675                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 676                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677             }                                                                                            </span>
<span  style=""> 678                                                                                                          </span>
<span class="2697150586857397017" onmouseenter="enter('2697150586857397017');" onmouseout="out('2697150586857397017');" style=""> 679             return total;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680         }                                                                                                </span>
<span  style=""> 681                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 682         @Override                                                                                        </span>
<span class="-4655538025867202729" onmouseenter="enter('-4655538025867202729');" onmouseout="out('-4655538025867202729');" style=""> 683         public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {                       </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style=""> 684             if (LOGD) {                                                                                  </span>
<span class="6701177882725519399" onmouseenter="enter('6701177882725519399');" onmouseout="out('6701177882725519399');" style=""> 685                 Log.d(TAG, &quot;onUpgrade triggered: &quot; + oldVersion);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 686             }                                                                                            </span>
<span class="-8802630880728694567" onmouseenter="enter('-8802630880728694567');" onmouseout="out('-8802630880728694567');" style=""> 687             int version = oldVersion;                                                                    </span>
<span class="-5425159362257487314" onmouseenter="enter('-5425159362257487314');" onmouseout="out('-5425159362257487314');" style=""> 688             if (version &lt; 3) {                                                                           </span>
<span class="-2417274034218376965" onmouseenter="enter('-2417274034218376965');" onmouseout="out('-2417274034218376965');" style=""> 689                 // upgrade 1,2 -&gt; 3 added appWidgetId column                                             </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 690                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 691                 try {                                                                                    </span>
<span class="4546757928378359668" onmouseenter="enter('4546757928378359668');" onmouseout="out('4546757928378359668');" style=""> 692                     // Insert new column for holding appWidgetIds                                        </span>
<span class="-1407497440416950726" onmouseenter="enter('-1407497440416950726');" onmouseout="out('-1407497440416950726');" style=""><abbr title=" 693                     db.execSQL(&quot;ALTER TABLE favorites &quot; + &quot;ADD COLUMN appWidgetId INTEGER NOT NULL DEFAULT -1;&quot;);"> 693                     db.execSQL(&quot;ALTER TABLE favorites &quot; + &quot;ADD COLUMN appWidgetId INTEGER NOT NULL DEFAUL🔵</abbr></span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 694                     db.setTransactionSuccessful();                                                       </span>
<span class="-6619390710608343599" onmouseenter="enter('-6619390710608343599');" onmouseout="out('-6619390710608343599');" style=""> 695                     version = 3;                                                                         </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 696                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 697                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 698                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 699                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 700                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701                 }                                                                                        </span>
<span class="1631695491108164926" onmouseenter="enter('1631695491108164926');" onmouseout="out('1631695491108164926');" style=""> 702                 // Convert existing widgets only if table upgrade was successful                         </span>
<span class="-7093961016817560639" onmouseenter="enter('-7093961016817560639');" onmouseout="out('-7093961016817560639');" style=""> 703                 if (version == 3) {                                                                      </span>
<span class="3525871662547532743" onmouseenter="enter('3525871662547532743');" onmouseout="out('3525871662547532743');" style=""> 704                     convertWidgets(db);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 706             }                                                                                            </span>
<span class="7123741489573350525" onmouseenter="enter('7123741489573350525');" onmouseout="out('7123741489573350525');" style=""> 707             if (version &lt; 4) {                                                                           </span>
<span class="-1292745360473422768" onmouseenter="enter('-1292745360473422768');" onmouseout="out('-1292745360473422768');" style=""> 708                 version = 4;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 709             }                                                                                            </span>
<span class="6482639089576313913" onmouseenter="enter('6482639089576313913');" onmouseout="out('6482639089576313913');" style=""> 710             // Where&#x27;s version 5?                                                                        </span>
<span class="7401379391869430937" onmouseenter="enter('7401379391869430937');" onmouseout="out('7401379391869430937');" style=""> 711             // - Donut and sholes on 2.0 shipped with version 4 of launcher1.                            </span>
<span class="4550024416175236584" onmouseenter="enter('4550024416175236584');" onmouseout="out('4550024416175236584');" style=""> 712             // - Passion shipped on 2.1 with version 6 of launcher3                                      </span>
<span class="4643679491884513187" onmouseenter="enter('4643679491884513187');" onmouseout="out('4643679491884513187');" style=""> 713             // - Sholes shipped on 2.1r1 (aka Mr. 3) with version 5 of launcher 1                        </span>
<span class="2460149696049595628" onmouseenter="enter('2460149696049595628');" onmouseout="out('2460149696049595628');" style=""> 714             // but version 5 on there was the updateContactsShortcuts change                             </span>
<span class="-8988740865558663293" onmouseenter="enter('-8988740865558663293');" onmouseout="out('-8988740865558663293');" style=""> 715             // which was version 6 in launcher 2 (first shipped on passion 2.1r1).                       </span>
<span class="6967404598887501241" onmouseenter="enter('6967404598887501241');" onmouseout="out('6967404598887501241');" style=""> 716             // The updateContactsShortcuts change is idempotent, so running it twice                     </span>
<span class="-4148752693610229392" onmouseenter="enter('-4148752693610229392');" onmouseout="out('-4148752693610229392');" style=""> 717             // is okay so we&#x27;ll do that when upgrading the devices that shipped with it.                 </span>
<span class="1172017862291778682" onmouseenter="enter('1172017862291778682');" onmouseout="out('1172017862291778682');" style=""> 718             if (version &lt; 6) {                                                                           </span>
<span class="-4714606279470185999" onmouseenter="enter('-4714606279470185999');" onmouseout="out('-4714606279470185999');" style=""> 719                 // We went from 3 to 5 screens. Move everything 1 to the right                           </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 720                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 721                 try {                                                                                    </span>
<span class="-2465047726863656951" onmouseenter="enter('-2465047726863656951');" onmouseout="out('-2465047726863656951');" style=""> 722                     db.execSQL(&quot;UPDATE favorites SET screen=(screen + 1);&quot;);                             </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 723                     db.setTransactionSuccessful();                                                       </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 724                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 725                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 726                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 727                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 728                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 729                 }                                                                                        </span>
<span class="3359107920988636953" onmouseenter="enter('3359107920988636953');" onmouseout="out('3359107920988636953');" style=""> 730                 // We added the fast track.                                                              </span>
<span class="6879465795009519434" onmouseenter="enter('6879465795009519434');" onmouseout="out('6879465795009519434');" style=""> 731                 if (updateContactsShortcuts(db)) {                                                       </span>
<span class="-3149591875898901499" onmouseenter="enter('-3149591875898901499');" onmouseout="out('-3149591875898901499');" style=""> 732                     version = 6;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 734             }                                                                                            </span>
<span class="-4096035694772114683" onmouseenter="enter('-4096035694772114683');" onmouseout="out('-4096035694772114683');" style=""> 735             if (version &lt; 7) {                                                                           </span>
<span class="-8891998191995357912" onmouseenter="enter('-8891998191995357912');" onmouseout="out('-8891998191995357912');" style=""> 736                 // Version 7 gets rid of the special search widget.                                      </span>
<span class="3525871662547532743" onmouseenter="enter('3525871662547532743');" onmouseout="out('3525871662547532743');" style=""> 737                 convertWidgets(db);                                                                      </span>
<span class="-6951664793801221802" onmouseenter="enter('-6951664793801221802');" onmouseout="out('-6951664793801221802');" style=""> 738                 version = 7;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 739             }                                                                                            </span>
<span class="-1248251879101833475" onmouseenter="enter('-1248251879101833475');" onmouseout="out('-1248251879101833475');" style=""> 740             if (version &lt; 8) {                                                                           </span>
<span class="1879618913628591947" onmouseenter="enter('1879618913628591947');" onmouseout="out('1879618913628591947');" style=""> 741                 // Version 8 (froyo) has the icons all normalized.  This should                          </span>
<span class="1410277882483187159" onmouseenter="enter('1410277882483187159');" onmouseout="out('1410277882483187159');" style=""> 742                 // already be the case in practice, but we now rely on it and don&#x27;t                      </span>
<span class="-3319181677834820205" onmouseenter="enter('-3319181677834820205');" onmouseout="out('-3319181677834820205');" style=""> 743                 // resample the images each time.                                                        </span>
<span class="7216681148101386433" onmouseenter="enter('7216681148101386433');" onmouseout="out('7216681148101386433');" style=""> 744                 normalizeIcons(db);                                                                      </span>
<span class="6147903305187288829" onmouseenter="enter('6147903305187288829');" onmouseout="out('6147903305187288829');" style=""> 745                 version = 8;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 746             }                                                                                            </span>
<span class="6768331519074392653" onmouseenter="enter('6768331519074392653');" onmouseout="out('6768331519074392653');" style=""> 747             if (version &lt; 9) {                                                                           </span>
<span class="8243563970233142625" onmouseenter="enter('8243563970233142625');" onmouseout="out('8243563970233142625');" style=""> 748                 // The max id is not yet set at this point (onUpgrade is triggered in the ctor           </span>
<span class="-4187395928482309064" onmouseenter="enter('-4187395928482309064');" onmouseout="out('-4187395928482309064');" style=""> 749                 // before it gets a change to get set, so we need to read it here when we use it)        </span>
<span class="-4991170806261126221" onmouseenter="enter('-4991170806261126221');" onmouseout="out('-4991170806261126221');" style=""> 750                 if (mMaxItemId == (-1)) {                                                                </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style=""> 751                     mMaxItemId = initializeMaxItemId(db);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 752                 }                                                                                        </span>
<span class="-4554457343861029044" onmouseenter="enter('-4554457343861029044');" onmouseout="out('-4554457343861029044');" style=""> 753                 // Add default hotseat icons                                                             </span>
<span class="-856454957471477697" onmouseenter="enter('-856454957471477697');" onmouseout="out('-856454957471477697');" style=""><abbr title=" 754                 loadFavorites(db, new SimpleWorkspaceLoader(this, mContext.getResources(), R.xml.update_workspace));"> 754                 loadFavorites(db, new SimpleWorkspaceLoader(this, mContext.getResources(), R.xml.update_w🔵</abbr></span>
<span class="-594084224270713246" onmouseenter="enter('-594084224270713246');" onmouseout="out('-594084224270713246');" style=""> 755                 version = 9;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 756             }                                                                                            </span>
<span class="-7982941174706227991" onmouseenter="enter('-7982941174706227991');" onmouseout="out('-7982941174706227991');" style=""> 757             // We bumped the version three time during JB, once to update the launch flags, once to      </span>
<span class="7433541256107994824" onmouseenter="enter('7433541256107994824');" onmouseout="out('7433541256107994824');" style=""> 758             // update the override for the default launch animation and once to set the mimetype         </span>
<span class="4208501542736368890" onmouseenter="enter('4208501542736368890');" onmouseout="out('4208501542736368890');" style=""> 759             // to improve startup performance                                                            </span>
<span class="3825613730133245417" onmouseenter="enter('3825613730133245417');" onmouseout="out('3825613730133245417');" style=""> 760             if (version &lt; 12) {                                                                          </span>
<span class="5911633270557452673" onmouseenter="enter('5911633270557452673');" onmouseout="out('5911633270557452673');" style=""> 761                 // Contact shortcuts need a different set of flags to be launched now                    </span>
<span class="-5428628100729683964" onmouseenter="enter('-5428628100729683964');" onmouseout="out('-5428628100729683964');" style=""> 762                 // The updateContactsShortcuts change is idempotent, so we can keep using it like        </span>
<span class="-2960298673245938215" onmouseenter="enter('-2960298673245938215');" onmouseout="out('-2960298673245938215');" style=""> 763                 // back in the Donut days                                                                </span>
<span class="1461529009488007413" onmouseenter="enter('1461529009488007413');" onmouseout="out('1461529009488007413');" style=""> 764                 updateContactsShortcuts(db);                                                             </span>
<span class="-7011217505799596620" onmouseenter="enter('-7011217505799596620');" onmouseout="out('-7011217505799596620');" style=""> 765                 version = 12;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766             }                                                                                            </span>
<span class="-1127321954793168309" onmouseenter="enter('-1127321954793168309');" onmouseout="out('-1127321954793168309');" style=""> 767             if (version &lt; 13) {                                                                          </span>
<span class="6699748190088794301" onmouseenter="enter('6699748190088794301');" onmouseout="out('6699748190088794301');" style=""> 768                 // With the new shrink-wrapped and re-orderable workspaces, it makes sense               </span>
<span class="4525637906322106897" onmouseenter="enter('4525637906322106897');" onmouseout="out('4525637906322106897');" style=""> 769                 // to persist workspace screens and their relative order.                                </span>
<span class="-1030858145638239039" onmouseenter="enter('-1030858145638239039');" onmouseout="out('-1030858145638239039');" style=""> 770                 mMaxScreenId = 0;                                                                        </span>
<span class="8374575243144004387" onmouseenter="enter('8374575243144004387');" onmouseout="out('8374575243144004387');" style=""> 771                 // This will never happen in the wild, but when we switch to using workspace             </span>
<span class="3035044480614384952" onmouseenter="enter('3035044480614384952');" onmouseout="out('3035044480614384952');" style=""> 772                 // screen ids, redo the import from old launcher.                                        </span>
<span class="-2687113980558593499" onmouseenter="enter('-2687113980558593499');" onmouseout="out('-2687113980558593499');" style=""> 773                 sJustLoadedFromOldDb = true;                                                             </span>
<span class="4995577433356427338" onmouseenter="enter('4995577433356427338');" onmouseout="out('4995577433356427338');" style=""> 774                 addWorkspacesTable(db);                                                                  </span>
<span class="-1031230936357450444" onmouseenter="enter('-1031230936357450444');" onmouseout="out('-1031230936357450444');" style=""> 775                 version = 13;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776             }                                                                                            </span>
<span class="-3790290227926597654" onmouseenter="enter('-3790290227926597654');" onmouseout="out('-3790290227926597654');" style=""> 777             if (version &lt; 14) {                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 778                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 779                 try {                                                                                    </span>
<span class="-3399391435431896428" onmouseenter="enter('-3399391435431896428');" onmouseout="out('-3399391435431896428');" style=""> 780                     // Insert new column for holding widget provider name                                </span>
<span class="2767822635302709950" onmouseenter="enter('2767822635302709950');" onmouseout="out('2767822635302709950');" style=""> 781                     db.execSQL(&quot;ALTER TABLE favorites &quot; + &quot;ADD COLUMN appWidgetProvider TEXT;&quot;);         </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 782                     db.setTransactionSuccessful();                                                       </span>
<span class="-6853964272080073312" onmouseenter="enter('-6853964272080073312');" onmouseout="out('-6853964272080073312');" style=""> 783                     version = 14;                                                                        </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 784                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 785                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 786                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 787                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 788                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 789                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790             }                                                                                            </span>
<span class="4742571203445114157" onmouseenter="enter('4742571203445114157');" onmouseout="out('4742571203445114157');" style=""> 791             if (version &lt; 15) {                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 792                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 793                 try {                                                                                    </span>
<span class="4980089996717210691" onmouseenter="enter('4980089996717210691');" onmouseout="out('4980089996717210691');" style=""> 794                     // Insert new column for holding update timestamp                                    </span>
<span class="-821549347676126714" onmouseenter="enter('-821549347676126714');" onmouseout="out('-821549347676126714');" style=""><abbr title=" 795                     db.execSQL(&quot;ALTER TABLE favorites &quot; + &quot;ADD COLUMN modified INTEGER NOT NULL DEFAULT 0;&quot;);"> 795                     db.execSQL(&quot;ALTER TABLE favorites &quot; + &quot;ADD COLUMN modified INTEGER NOT NULL DEFAULT 0🔵</abbr></span>
<span class="-7843369480357459954" onmouseenter="enter('-7843369480357459954');" onmouseout="out('-7843369480357459954');" style=""><abbr title=" 796                     db.execSQL(&quot;ALTER TABLE workspaceScreens &quot; + &quot;ADD COLUMN modified INTEGER NOT NULL DEFAULT 0;&quot;);"> 796                     db.execSQL(&quot;ALTER TABLE workspaceScreens &quot; + &quot;ADD COLUMN modified INTEGER NOT NULL DE🔵</abbr></span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 797                     db.setTransactionSuccessful();                                                       </span>
<span class="8988210671545584151" onmouseenter="enter('8988210671545584151');" onmouseout="out('8988210671545584151');" style=""> 798                     version = 15;                                                                        </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 799                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 800                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 801                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 802                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 803                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 804                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 805             }                                                                                            </span>
<span class="1076365416612257192" onmouseenter="enter('1076365416612257192');" onmouseout="out('1076365416612257192');" style=""> 806             if (version &lt; 16) {                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 807                 db.beginTransaction();                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 808                 try {                                                                                    </span>
<span class="4715697150589634772" onmouseenter="enter('4715697150589634772');" onmouseout="out('4715697150589634772');" style=""> 809                     // Insert new column for holding restore status                                      </span>
<span class="-5063552440003730139" onmouseenter="enter('-5063552440003730139');" onmouseout="out('-5063552440003730139');" style=""><abbr title=" 810                     db.execSQL(&quot;ALTER TABLE favorites &quot; + &quot;ADD COLUMN restored INTEGER NOT NULL DEFAULT 0;&quot;);"> 810                     db.execSQL(&quot;ALTER TABLE favorites &quot; + &quot;ADD COLUMN restored INTEGER NOT NULL DEFAULT 0🔵</abbr></span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 811                     db.setTransactionSuccessful();                                                       </span>
<span class="2013829968714493382" onmouseenter="enter('2013829968714493382');" onmouseout="out('2013829968714493382');" style=""> 812                     version = 16;                                                                        </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 813                 } catch (SQLException ex) {                                                              </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 814                     // Old version remains, which means we wipe old data                                 </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 815                     Log.e(TAG, ex.getMessage(), ex);                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 816                 } finally {                                                                              </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 817                     db.endTransaction();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819             }                                                                                            </span>
<span class="-6756468306354214848" onmouseenter="enter('-6756468306354214848');" onmouseout="out('-6756468306354214848');" style=""> 820             if (version &lt; 17) {                                                                          </span>
<span class="-8925898828002148199" onmouseenter="enter('-8925898828002148199');" onmouseout="out('-8925898828002148199');" style=""> 821                 // We use the db version upgrade here to identify users who may not have seen            </span>
<span class="2421121084363663195" onmouseenter="enter('2421121084363663195');" onmouseout="out('2421121084363663195');" style=""> 822                 // clings yet (because they weren&#x27;t available), but for whom the clings are now          </span>
<span class="-3819212007201998918" onmouseenter="enter('-3819212007201998918');" onmouseout="out('-3819212007201998918');" style=""> 823                 // available (tablet users). Because one of the possible cling flows (migration)         </span>
<span class="-6235100359092849352" onmouseenter="enter('-6235100359092849352');" onmouseout="out('-6235100359092849352');" style=""> 824                 // is very destructive (wipes out workspaces), we want to prevent this from showing      </span>
<span class="-2001927373741844508" onmouseenter="enter('-2001927373741844508');" onmouseout="out('-2001927373741844508');" style=""> 825                 // until clear data. We do so by marking that the clings have been shown.                </span>
<span class="9168128908795605867" onmouseenter="enter('9168128908795605867');" onmouseout="out('9168128908795605867');" style=""> 826                 LauncherClings.synchonouslyMarkFirstRunClingDismissed(mContext);                         </span>
<span class="-3652383409155171451" onmouseenter="enter('-3652383409155171451');" onmouseout="out('-3652383409155171451');" style=""> 827                 version = 17;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 828             }                                                                                            </span>
<span class="7817650129783202172" onmouseenter="enter('7817650129783202172');" onmouseout="out('7817650129783202172');" style=""> 829             if (version &lt; 18) {                                                                          </span>
<span class="-5748373616457914051" onmouseenter="enter('-5748373616457914051');" onmouseout="out('-5748373616457914051');" style=""> 830                 // No-op                                                                                 </span>
<span class="-862393984298106042" onmouseenter="enter('-862393984298106042');" onmouseout="out('-862393984298106042');" style=""> 831                 version = 18;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 832             }                                                                                            </span>
<span class="-3427379715691059477" onmouseenter="enter('-3427379715691059477');" onmouseout="out('-3427379715691059477');" style=""> 833             if (version &lt; 19) {                                                                          </span>
<span class="4571181047088430074" onmouseenter="enter('4571181047088430074');" onmouseout="out('4571181047088430074');" style=""> 834                 // Due to a data loss bug, some users may have items associated with screen ids          </span>
<span class="5190859357842058169" onmouseenter="enter('5190859357842058169');" onmouseout="out('5190859357842058169');" style=""> 835                 // which no longer exist. Since this can cause other problems, and since the user        </span>
<span class="-6625319271568400514" onmouseenter="enter('-6625319271568400514');" onmouseout="out('-6625319271568400514');" style=""> 836                 // will never see these items anyway, we use database upgrade as an opportunity to       </span>
<span class="2555207824693971320" onmouseenter="enter('2555207824693971320');" onmouseout="out('2555207824693971320');" style=""> 837                 // clean things up.                                                                      </span>
<span class="6001089319165901827" onmouseenter="enter('6001089319165901827');" onmouseout="out('6001089319165901827');" style=""> 838                 removeOrphanedItems(db);                                                                 </span>
<span class="-8622797196606405802" onmouseenter="enter('-8622797196606405802');" onmouseout="out('-8622797196606405802');" style=""> 839                 version = 19;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 840             }                                                                                            </span>
<span class="7499725911390962675" onmouseenter="enter('7499725911390962675');" onmouseout="out('7499725911390962675');" style=""> 841             if (version &lt; 20) {                                                                          </span>
<span class="7544427300199377589" onmouseenter="enter('7544427300199377589');" onmouseout="out('7544427300199377589');" style=""> 842                 // Add userId column                                                                     </span>
<span class="3648122535018422218" onmouseenter="enter('3648122535018422218');" onmouseout="out('3648122535018422218');" style=""> 843                 if (addProfileColumn(db)) {                                                              </span>
<span class="-3196204954256045340" onmouseenter="enter('-3196204954256045340');" onmouseout="out('-3196204954256045340');" style=""> 844                     version = 20;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 845                 }                                                                                        </span>
<span class="-7922924049235754756" onmouseenter="enter('-7922924049235754756');" onmouseout="out('-7922924049235754756');" style=""> 846                 // else old version remains, which means we wipe old data                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 847             }                                                                                            </span>
<span class="114284109908766623" onmouseenter="enter('114284109908766623');" onmouseout="out('114284109908766623');" style=""> 848             if (version != DATABASE_VERSION) {                                                           </span>
<span class="-7581134992168079572" onmouseenter="enter('-7581134992168079572');" onmouseout="out('-7581134992168079572');" style=""> 849                 Log.w(TAG, &quot;Destroying all old data.&quot;);                                                  </span>
<span class="-5910745818286558462" onmouseenter="enter('-5910745818286558462');" onmouseout="out('-5910745818286558462');" style=""> 850                 db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_FAVORITES);                                   </span>
<span class="-5689649720940552120" onmouseenter="enter('-5689649720940552120');" onmouseout="out('-5689649720940552120');" style=""> 851                 db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_WORKSPACE_SCREENS);                           </span>
<span class="1466158746107327510" onmouseenter="enter('1466158746107327510');" onmouseout="out('1466158746107327510');" style=""> 852                 onCreate(db);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 853             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 854         }                                                                                                </span>
<span  style=""> 855                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 856         @Override                                                                                        </span>
<span class="-4280970083266341851" onmouseenter="enter('-4280970083266341851');" onmouseout="out('-4280970083266341851');" style=""> 857         public void onDowngrade(SQLiteDatabase db, int oldVersion, int newVersion) {                     </span>
<span class="60635965215078249" onmouseenter="enter('60635965215078249');" onmouseout="out('60635965215078249');" style=""> 858             // This shouldn&#x27;t happen -- throw our hands up in the air and start over.                    </span>
<span class="5860333668228362795" onmouseenter="enter('5860333668228362795');" onmouseout="out('5860333668228362795');" style=""> 859             Log.w(TAG, &quot;Database version downgrade from: &quot; + oldVersion + &quot; to &quot; + newVersion +          </span>
<span class="-495411336639494791" onmouseenter="enter('-495411336639494791');" onmouseout="out('-495411336639494791');" style=""> 860                     &quot;. Wiping databse.&quot;);                                                                </span>
<span class="8331352315618770000" onmouseenter="enter('8331352315618770000');" onmouseout="out('8331352315618770000');" style=""> 861             createEmptyDB(db);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 862         }                                                                                                </span>
<span  style=""> 863                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 864         /**                                                                                              </span>
<span class="-3404890512310195543" onmouseenter="enter('-3404890512310195543');" onmouseout="out('-3404890512310195543');" style=""> 865          * Clears all the data for a fresh start.                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 866          */                                                                                              </span>
<span class="3436200006891248330" onmouseenter="enter('3436200006891248330');" onmouseout="out('3436200006891248330');" style=""> 867         public void createEmptyDB(SQLiteDatabase db) {                                                   </span>
<span class="-5910745818286558462" onmouseenter="enter('-5910745818286558462');" onmouseout="out('-5910745818286558462');" style=""> 868             db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_FAVORITES);                                       </span>
<span class="-5689649720940552120" onmouseenter="enter('-5689649720940552120');" onmouseout="out('-5689649720940552120');" style=""> 869             db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_WORKSPACE_SCREENS);                               </span>
<span class="1466158746107327510" onmouseenter="enter('1466158746107327510');" onmouseout="out('1466158746107327510');" style=""> 870             onCreate(db);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871         }                                                                                                </span>
<span  style=""> 872                                                                                                          </span>
<span class="-4559468305095454841" onmouseenter="enter('-4559468305095454841');" onmouseout="out('-4559468305095454841');" style=""> 873         private boolean addProfileColumn(SQLiteDatabase db) {                                            </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 874             db.beginTransaction();                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 875             try {                                                                                        </span>
<span class="8272328117098122260" onmouseenter="enter('8272328117098122260');" onmouseout="out('8272328117098122260');" style=""> 876                 UserManagerCompat userManager = UserManagerCompat.getInstance(mContext);                 </span>
<span class="4088992161441330589" onmouseenter="enter('4088992161441330589');" onmouseout="out('4088992161441330589');" style=""> 877                 // Default to the serial number of this user, for older                                  </span>
<span class="3257211239898691615" onmouseenter="enter('3257211239898691615');" onmouseout="out('3257211239898691615');" style=""> 878                 // shortcuts.                                                                            </span>
<span class="6577105677519491037" onmouseenter="enter('6577105677519491037');" onmouseout="out('6577105677519491037');" style=""><abbr title=" 879                 long userSerialNumber = userManager.getSerialNumberForUser(UserHandleCompat.myUserHandle());"> 879                 long userSerialNumber = userManager.getSerialNumberForUser(UserHandleCompat.myUserHandle(🔵</abbr></span>
<span class="-7537890297935646580" onmouseenter="enter('-7537890297935646580');" onmouseout="out('-7537890297935646580');" style=""> 880                 // Insert new column for holding user serial number                                      </span>
<span class="-973753486924349991" onmouseenter="enter('-973753486924349991');" onmouseout="out('-973753486924349991');" style=""><abbr title=" 881                 db.execSQL(((&quot;ALTER TABLE favorites &quot; + &quot;ADD COLUMN profileId INTEGER DEFAULT &quot;) + userSerialNumber) + &quot;;&quot;);"> 881                 db.execSQL(((&quot;ALTER TABLE favorites &quot; + &quot;ADD COLUMN profileId INTEGER DEFAULT &quot;) + userSe🔵</abbr></span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 882                 db.setTransactionSuccessful();                                                           </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 883             } catch (SQLException ex) {                                                                  </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 884                 // Old version remains, which means we wipe old data                                     </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 885                 Log.e(TAG, ex.getMessage(), ex);                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 886                 return false;                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 887             } finally {                                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 888                 db.endTransaction();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 889             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 890             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891         }                                                                                                </span>
<span  style=""> 892                                                                                                          </span>
<span class="5499500447724615611" onmouseenter="enter('5499500447724615611');" onmouseout="out('5499500447724615611');" style=""> 893         private boolean updateContactsShortcuts(SQLiteDatabase db) {                                     </span>
<span class="-5246681680504373128" onmouseenter="enter('-5246681680504373128');" onmouseout="out('-5246681680504373128');" style=""> 894             final String selectWhere = buildOrWhereString(Favorites.ITEM_TYPE,                           </span>
<span class="663694814520566372" onmouseenter="enter('663694814520566372');" onmouseout="out('663694814520566372');" style=""> 895                     new int[] { Favorites.ITEM_TYPE_SHORTCUT });                                         </span>
<span  style=""> 896                                                                                                          </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style=""> 897             Cursor c = null;                                                                             </span>
<span class="4160534408674485909" onmouseenter="enter('4160534408674485909');" onmouseout="out('4160534408674485909');" style=""> 898             final String actionQuickContact = &quot;com.android.contacts.action.QUICK_CONTACT&quot;;               </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 899             db.beginTransaction();                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 900             try {                                                                                        </span>
<span class="9180803436248323281" onmouseenter="enter('9180803436248323281');" onmouseout="out('9180803436248323281');" style=""> 901                 // Select and iterate through each matching widget                                       </span>
<span class="4665304866696389373" onmouseenter="enter('4665304866696389373');" onmouseout="out('4665304866696389373');" style=""> 902                 c = db.query(TABLE_FAVORITES,                                                            </span>
<span class="4805400763366238176" onmouseenter="enter('4805400763366238176');" onmouseout="out('4805400763366238176');" style=""> 903                         new String[] { Favorites._ID, Favorites.INTENT },                                </span>
<span class="523753735101753681" onmouseenter="enter('523753735101753681');" onmouseout="out('523753735101753681');" style=""> 904                         selectWhere, null, null, null, null);                                            </span>
<span class="1775362941851830832" onmouseenter="enter('1775362941851830832');" onmouseout="out('1775362941851830832');" style=""> 905                 if (c == null) return false;                                                             </span>
<span  style=""> 906                                                                                                          </span>
<span class="5404371667899517548" onmouseenter="enter('5404371667899517548');" onmouseout="out('5404371667899517548');" style=""> 907                 if (LOGD) Log.d(TAG, &quot;found upgrade cursor count=&quot; + c.getCount());                      </span>
<span  style=""> 908                                                                                                          </span>
<span class="-8932698383566096473" onmouseenter="enter('-8932698383566096473');" onmouseout="out('-8932698383566096473');" style=""> 909                 final int idIndex = c.getColumnIndex(Favorites._ID);                                     </span>
<span class="-7954812698804343751" onmouseenter="enter('-7954812698804343751');" onmouseout="out('-7954812698804343751');" style=""> 910                 final int intentIndex = c.getColumnIndex(Favorites.INTENT);                              </span>
<span  style=""> 911                                                                                                          </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 912                 while (c.moveToNext()) {                                                                 </span>
<span class="6875941046716392375" onmouseenter="enter('6875941046716392375');" onmouseout="out('6875941046716392375');" style=""> 913                     long favoriteId = c.getLong(idIndex);                                                </span>
<span class="3433703641134815896" onmouseenter="enter('3433703641134815896');" onmouseout="out('3433703641134815896');" style=""> 914                     final String intentUri = c.getString(intentIndex);                                   </span>
<span class="6989258921658153377" onmouseenter="enter('6989258921658153377');" onmouseout="out('6989258921658153377');" style=""> 915                     if (intentUri != null) {                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 916                         try {                                                                            </span>
<span class="3224994041104735669" onmouseenter="enter('3224994041104735669');" onmouseout="out('3224994041104735669');" style=""> 917                             final Intent intent = Intent.parseUri(intentUri, 0);                         </span>
<span class="5533062021406091698" onmouseenter="enter('5533062021406091698');" onmouseout="out('5533062021406091698');" style=""> 918                             android.util.Log.d(&quot;Home&quot;, intent.toString());                               </span>
<span class="4116887484198527532" onmouseenter="enter('4116887484198527532');" onmouseout="out('4116887484198527532');" style=""> 919                             final Uri uri = intent.getData();                                            </span>
<span class="-6789028041247471756" onmouseenter="enter('-6789028041247471756');" onmouseout="out('-6789028041247471756');" style=""> 920                             if (uri != null) {                                                           </span>
<span class="-4564881707745344748" onmouseenter="enter('-4564881707745344748');" onmouseout="out('-4564881707745344748');" style=""> 921                                 final String data = uri.toString();                                      </span>
<span class="-3445805239696980037" onmouseenter="enter('-3445805239696980037');" onmouseout="out('-3445805239696980037');" style=""> 922                                 if ((Intent.ACTION_VIEW.equals(intent.getAction()) ||                    </span>
<span class="7710869890592179741" onmouseenter="enter('7710869890592179741');" onmouseout="out('7710869890592179741');" style=""> 923                                         actionQuickContact.equals(intent.getAction())) &amp;&amp;                </span>
<span class="1393218364054108713" onmouseenter="enter('1393218364054108713');" onmouseout="out('1393218364054108713');" style=""> 924                                         (data.startsWith(&quot;content://contacts/people/&quot;) ||                </span>
<span class="3162645299085480663" onmouseenter="enter('3162645299085480663');" onmouseout="out('3162645299085480663');" style=""> 925                                         data.startsWith(&quot;content://com.android.contacts/&quot; +              </span>
<span class="1650514809492671891" onmouseenter="enter('1650514809492671891');" onmouseout="out('1650514809492671891');" style=""> 926                                                 &quot;contacts/lookup/&quot;))) {                                  </span>
<span  style=""> 927                                                                                                          </span>
<span class="-5469073692284735657" onmouseenter="enter('-5469073692284735657');" onmouseout="out('-5469073692284735657');" style=""> 928                                     final Intent newIntent = new Intent(actionQuickContact);             </span>
<span class="-5357614275754596903" onmouseenter="enter('-5357614275754596903');" onmouseout="out('-5357614275754596903');" style=""> 929                                     // When starting from the launcher, start in a new, cleared task     </span>
<span class="1092229780699807802" onmouseenter="enter('1092229780699807802');" onmouseout="out('1092229780699807802');" style=""> 930                                     // CLEAR_WHEN_TASK_RESET cannot reset the root of a task, so we      </span>
<span class="7141574357287672100" onmouseenter="enter('7141574357287672100');" onmouseout="out('7141574357287672100');" style=""> 931                                     // clear the whole thing preemptively here since                     </span>
<span class="905959402729533596" onmouseenter="enter('905959402729533596');" onmouseout="out('905959402729533596');" style=""> 932                                     // QuickContactActivity will finish itself when launching other      </span>
<span class="5522675427683616835" onmouseenter="enter('5522675427683616835');" onmouseout="out('5522675427683616835');" style=""> 933                                     // detail activities.                                                </span>
<span class="-6190018245568891923" onmouseenter="enter('-6190018245568891923');" onmouseout="out('-6190018245568891923');" style=""> 934                                     newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK |                   </span>
<span class="-3783234242978371980" onmouseenter="enter('-3783234242978371980');" onmouseout="out('-3783234242978371980');" style=""> 935                                             Intent.FLAG_ACTIVITY_CLEAR_TASK);                            </span>
<span class="1401110889443382842" onmouseenter="enter('1401110889443382842');" onmouseout="out('1401110889443382842');" style=""> 936                                     newIntent.putExtra(                                                  </span>
<span class="-732821300906687093" onmouseenter="enter('-732821300906687093');" onmouseout="out('-732821300906687093');" style=""> 937                                             Launcher.INTENT_EXTRA_IGNORE_LAUNCH_ANIMATION, true);        </span>
<span class="8197006267053771341" onmouseenter="enter('8197006267053771341');" onmouseout="out('8197006267053771341');" style=""> 938                                     newIntent.setData(uri);                                              </span>
<span class="-4929716720656164338" onmouseenter="enter('-4929716720656164338');" onmouseout="out('-4929716720656164338');" style=""> 939                                     // Determine the type and also put that in the shortcut              </span>
<span class="-3103165564621535069" onmouseenter="enter('-3103165564621535069');" onmouseout="out('-3103165564621535069');" style=""> 940                                     // (that can speed up launch a bit)                                  </span>
<span class="-8187273376333901727" onmouseenter="enter('-8187273376333901727');" onmouseout="out('-8187273376333901727');" style=""> 941                                     newIntent.setDataAndType(uri, newIntent.resolveType(mContext));      </span>
<span  style=""> 942                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 943                                     final ContentValues values = new ContentValues();                    </span>
<span class="-1283328052029016277" onmouseenter="enter('-1283328052029016277');" onmouseout="out('-1283328052029016277');" style=""> 944                                     values.put(LauncherSettings.Favorites.INTENT,                        </span>
<span class="7573125619952719253" onmouseenter="enter('7573125619952719253');" onmouseout="out('7573125619952719253');" style=""> 945                                             newIntent.toUri(0));                                         </span>
<span  style=""> 946                                                                                                          </span>
<span class="-7922633388955325898" onmouseenter="enter('-7922633388955325898');" onmouseout="out('-7922633388955325898');" style=""> 947                                     String updateWhere = Favorites._ID + &quot;=&quot; + favoriteId;               </span>
<span class="6932880072735485862" onmouseenter="enter('6932880072735485862');" onmouseout="out('6932880072735485862');" style=""> 948                                     db.update(TABLE_FAVORITES, values, updateWhere, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 950                             }                                                                            </span>
<span class="3255801419413274971" onmouseenter="enter('3255801419413274971');" onmouseout="out('3255801419413274971');" style=""> 951                         } catch (RuntimeException ex) {                                                  </span>
<span class="-70893878647116908" onmouseenter="enter('-70893878647116908');" onmouseout="out('-70893878647116908');" style=""> 952                             Log.e(TAG, &quot;Problem upgrading shortcut&quot;, ex);                                </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style=""> 953                         } catch (URISyntaxException e) {                                                 </span>
<span class="-2505277559722110760" onmouseenter="enter('-2505277559722110760');" onmouseout="out('-2505277559722110760');" style=""> 954                             Log.e(TAG, &quot;Problem upgrading shortcut&quot;, e);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 955                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 956                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 957                 }                                                                                        </span>
<span  style=""> 958                                                                                                          </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 959                 db.setTransactionSuccessful();                                                           </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 960             } catch (SQLException ex) {                                                                  </span>
<span class="983414259163783750" onmouseenter="enter('983414259163783750');" onmouseout="out('983414259163783750');" style=""> 961                 Log.w(TAG, &quot;Problem while upgrading contacts&quot;, ex);                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 962                 return false;                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 963             } finally {                                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 964                 db.endTransaction();                                                                     </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style=""> 965                 if (c != null) {                                                                         </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 966                     c.close();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 967                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 968             }                                                                                            </span>
<span  style=""> 969                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 970             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 971         }                                                                                                </span>
<span  style=""> 972                                                                                                          </span>
<span class="-3532559559626407446" onmouseenter="enter('-3532559559626407446');" onmouseout="out('-3532559559626407446');" style=""> 973         private void normalizeIcons(SQLiteDatabase db) {                                                 </span>
<span class="-7234787096538067088" onmouseenter="enter('-7234787096538067088');" onmouseout="out('-7234787096538067088');" style=""> 974             Log.d(TAG, &quot;normalizing icons&quot;);                                                             </span>
<span  style=""> 975                                                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 976             db.beginTransaction();                                                                       </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style=""> 977             Cursor c = null;                                                                             </span>
<span class="-1648170941042077979" onmouseenter="enter('-1648170941042077979');" onmouseout="out('-1648170941042077979');" style=""> 978             SQLiteStatement update = null;                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 979             try {                                                                                        </span>
<span class="6948794688019806881" onmouseenter="enter('6948794688019806881');" onmouseout="out('6948794688019806881');" style=""> 980                 boolean logged = false;                                                                  </span>
<span class="-9148924222948643220" onmouseenter="enter('-9148924222948643220');" onmouseout="out('-9148924222948643220');" style=""> 981                 update = db.compileStatement(&quot;UPDATE favorites &quot;                                         </span>
<span class="2242861074041662063" onmouseenter="enter('2242861074041662063');" onmouseout="out('2242861074041662063');" style=""> 982                         + &quot;SET icon=? WHERE _id=?&quot;);                                                     </span>
<span  style=""> 983                                                                                                          </span>
<span class="4784505011002524429" onmouseenter="enter('4784505011002524429');" onmouseout="out('4784505011002524429');" style=""> 984                 c = db.rawQuery(&quot;SELECT _id, icon FROM favorites WHERE iconType=&quot; +                      </span>
<span class="-8247570245083797300" onmouseenter="enter('-8247570245083797300');" onmouseout="out('-8247570245083797300');" style=""> 985                         Favorites.ICON_TYPE_BITMAP, null);                                               </span>
<span  style=""> 986                                                                                                          </span>
<span class="-6790628464290794012" onmouseenter="enter('-6790628464290794012');" onmouseout="out('-6790628464290794012');" style=""> 987                 final int idIndex = c.getColumnIndexOrThrow(Favorites._ID);                              </span>
<span class="-8328869542966343431" onmouseenter="enter('-8328869542966343431');" onmouseout="out('-8328869542966343431');" style=""> 988                 final int iconIndex = c.getColumnIndexOrThrow(Favorites.ICON);                           </span>
<span  style=""> 989                                                                                                          </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 990                 while (c.moveToNext()) {                                                                 </span>
<span class="-8135609918244190533" onmouseenter="enter('-8135609918244190533');" onmouseout="out('-8135609918244190533');" style=""> 991                     long id = c.getLong(idIndex);                                                        </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style=""> 992                     byte[] data = c.getBlob(iconIndex);                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 993                     try {                                                                                </span>
<span class="1618116421659449587" onmouseenter="enter('1618116421659449587');" onmouseout="out('1618116421659449587');" style=""> 994                         Bitmap bitmap = Utilities.resampleIconBitmap(                                    </span>
<span class="5250274324470409582" onmouseenter="enter('5250274324470409582');" onmouseout="out('5250274324470409582');" style=""> 995                                 BitmapFactory.decodeByteArray(data, 0, data.length),                     </span>
<span class="2906315698704386153" onmouseenter="enter('2906315698704386153');" onmouseout="out('2906315698704386153');" style=""> 996                                 mContext);                                                               </span>
<span class="8226127527421310456" onmouseenter="enter('8226127527421310456');" onmouseout="out('8226127527421310456');" style=""> 997                         if (bitmap != null) {                                                            </span>
<span class="-8911608565518229217" onmouseenter="enter('-8911608565518229217');" onmouseout="out('-8911608565518229217');" style=""> 998                             update.bindLong(1, id);                                                      </span>
<span class="-3437982606997723715" onmouseenter="enter('-3437982606997723715');" onmouseout="out('-3437982606997723715');" style=""> 999                             data = ItemInfo.flattenBitmap(bitmap);                                       </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">1000                             if (data != null) {                                                          </span>
<span class="8709343663161385163" onmouseenter="enter('8709343663161385163');" onmouseout="out('8709343663161385163');" style="">1001                                 update.bindBlob(2, data);                                                </span>
<span class="-6412297069984418220" onmouseenter="enter('-6412297069984418220');" onmouseout="out('-6412297069984418220');" style="">1002                                 update.execute();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1003                             }                                                                            </span>
<span class="-2094673185475372498" onmouseenter="enter('-2094673185475372498');" onmouseout="out('-2094673185475372498');" style="">1004                             bitmap.recycle();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005                         }                                                                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1006                     } catch (Exception e) {                                                              </span>
<span class="2850767417883926950" onmouseenter="enter('2850767417883926950');" onmouseout="out('2850767417883926950');" style="">1007                         if (!logged) {                                                                   </span>
<span class="-5248013341499561391" onmouseenter="enter('-5248013341499561391');" onmouseout="out('-5248013341499561391');" style="">1008                             Log.e(TAG, &quot;Failed normalizing icon &quot; + id, e);                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1009                         } else {                                                                         </span>
<span class="-4114526112834757919" onmouseenter="enter('-4114526112834757919');" onmouseout="out('-4114526112834757919');" style="">1010                             Log.e(TAG, &quot;Also failed normalizing icon &quot; + id);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1011                         }                                                                                </span>
<span class="74122904328555583" onmouseenter="enter('74122904328555583');" onmouseout="out('74122904328555583');" style="">1012                         logged = true;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1014                 }                                                                                        </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">1015                 db.setTransactionSuccessful();                                                           </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="">1016             } catch (SQLException ex) {                                                                  </span>
<span class="1696470604658034617" onmouseenter="enter('1696470604658034617');" onmouseout="out('1696470604658034617');" style="">1017                 Log.w(TAG, &quot;Problem while allocating appWidgetIds for existing widgets&quot;, ex);            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1018             } finally {                                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">1019                 db.endTransaction();                                                                     </span>
<span class="-304565854195066427" onmouseenter="enter('-304565854195066427');" onmouseout="out('-304565854195066427');" style="">1020                 if (update != null) {                                                                    </span>
<span class="-3956724785259615758" onmouseenter="enter('-3956724785259615758');" onmouseout="out('-3956724785259615758');" style="">1021                     update.close();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1022                 }                                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1023                 if (c != null) {                                                                         </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1024                     c.close();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1025                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1026             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1027         }                                                                                                </span>
<span  style="">1028                                                                                                          </span>
<span class="-8543343401238088250" onmouseenter="enter('-8543343401238088250');" onmouseout="out('-8543343401238088250');" style="">1029         // Generates a new ID to use for an object in your database. This method should be only          </span>
<span class="-535999813132446250" onmouseenter="enter('-535999813132446250');" onmouseout="out('-535999813132446250');" style="">1030         // called from the main UI thread. As an exception, we do call it when we call the               </span>
<span class="-3416944691245960228" onmouseenter="enter('-3416944691245960228');" onmouseout="out('-3416944691245960228');" style="">1031         // constructor from the worker thread; however, this doesn&#x27;t extend until after the              </span>
<span class="506358615447788975" onmouseenter="enter('506358615447788975');" onmouseout="out('506358615447788975');" style="">1032         // constructor is called, and we only pass a reference to LauncherProvider to LauncherApp        </span>
<span class="7265707553198201311" onmouseenter="enter('7265707553198201311');" onmouseout="out('7265707553198201311');" style="">1033         // after that point                                                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1034         @Override                                                                                        </span>
<span class="2178013549114956338" onmouseenter="enter('2178013549114956338');" onmouseout="out('2178013549114956338');" style="">1035         public long generateNewItemId() {                                                                </span>
<span class="2999684209048406821" onmouseenter="enter('2999684209048406821');" onmouseout="out('2999684209048406821');" style="">1036             if (mMaxItemId &lt; 0) {                                                                        </span>
<span class="-7068859972649181897" onmouseenter="enter('-7068859972649181897');" onmouseout="out('-7068859972649181897');" style="">1037                 throw new RuntimeException(&quot;Error: max item id was not initialized&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1038             }                                                                                            </span>
<span class="-2732750815463784999" onmouseenter="enter('-2732750815463784999');" onmouseout="out('-2732750815463784999');" style="">1039             mMaxItemId += 1;                                                                             </span>
<span class="5456580978366825274" onmouseenter="enter('5456580978366825274');" onmouseout="out('5456580978366825274');" style="">1040             return mMaxItemId;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1041         }                                                                                                </span>
<span  style="">1042                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1043         @Override                                                                                        </span>
<span class="329443540154066398" onmouseenter="enter('329443540154066398');" onmouseout="out('329443540154066398');" style="">1044         public long insertAndCheck(SQLiteDatabase db, ContentValues values) {                            </span>
<span class="-1505151618823806706" onmouseenter="enter('-1505151618823806706');" onmouseout="out('-1505151618823806706');" style="">1045             return dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046         }                                                                                                </span>
<span  style="">1047                                                                                                          </span>
<span class="8365827129597185054" onmouseenter="enter('8365827129597185054');" onmouseout="out('8365827129597185054');" style="">1048         public void updateMaxItemId(long id) {                                                           </span>
<span class="-6849429476525109058" onmouseenter="enter('-6849429476525109058');" onmouseout="out('-6849429476525109058');" style="">1049             mMaxItemId = id + 1;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1050         }                                                                                                </span>
<span  style="">1051                                                                                                          </span>
<span class="-7367368828761155068" onmouseenter="enter('-7367368828761155068');" onmouseout="out('-7367368828761155068');" style="">1052         public void checkId(String table, ContentValues values) {                                        </span>
<span class="-1608142162103033850" onmouseenter="enter('-1608142162103033850');" onmouseout="out('-1608142162103033850');" style="">1053             long id = values.getAsLong(LauncherSettings.BaseLauncherColumns._ID);                        </span>
<span class="-6900211224990683940" onmouseenter="enter('-6900211224990683940');" onmouseout="out('-6900211224990683940');" style="">1054             if (table == LauncherProvider.TABLE_WORKSPACE_SCREENS) {                                     </span>
<span class="9109073648364222254" onmouseenter="enter('9109073648364222254');" onmouseout="out('9109073648364222254');" style="">1055                 mMaxScreenId = Math.max(id, mMaxScreenId);                                               </span>
<span class="-6240460135729763291" onmouseenter="enter('-6240460135729763291');" onmouseout="out('-6240460135729763291');" style="">1056             }  else {                                                                                    </span>
<span class="754800730159449376" onmouseenter="enter('754800730159449376');" onmouseout="out('754800730159449376');" style="">1057                 mMaxItemId = Math.max(id, mMaxItemId);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1058             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1059         }                                                                                                </span>
<span  style="">1060                                                                                                          </span>
<span class="-8013451254632200820" onmouseenter="enter('-8013451254632200820');" onmouseout="out('-8013451254632200820');" style="">1061         private long initializeMaxItemId(SQLiteDatabase db) {                                            </span>
<span class="-6457280004469744269" onmouseenter="enter('-6457280004469744269');" onmouseout="out('-6457280004469744269');" style="">1062             Cursor c = db.rawQuery(&quot;SELECT MAX(_id) FROM favorites&quot;, null);                              </span>
<span  style="">1063                                                                                                          </span>
<span class="-7794263827987261163" onmouseenter="enter('-7794263827987261163');" onmouseout="out('-7794263827987261163');" style="">1064             // get the result                                                                            </span>
<span class="-7318978250879363167" onmouseenter="enter('-7318978250879363167');" onmouseout="out('-7318978250879363167');" style="">1065             final int maxIdIndex = 0;                                                                    </span>
<span class="-3996593593662644650" onmouseenter="enter('-3996593593662644650');" onmouseout="out('-3996593593662644650');" style="">1066             long id = -1;                                                                                </span>
<span class="2006356297883322098" onmouseenter="enter('2006356297883322098');" onmouseout="out('2006356297883322098');" style="">1067             if (c != null &amp;&amp; c.moveToNext()) {                                                           </span>
<span class="6252863560499548901" onmouseenter="enter('6252863560499548901');" onmouseout="out('6252863560499548901');" style="">1068                 id = c.getLong(maxIdIndex);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1069             }                                                                                            </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1070             if (c != null) {                                                                             </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1071                 c.close();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1072             }                                                                                            </span>
<span  style="">1073                                                                                                          </span>
<span class="-7988774182034385411" onmouseenter="enter('-7988774182034385411');" onmouseout="out('-7988774182034385411');" style="">1074             if (id == -1) {                                                                              </span>
<span class="-8632333559810917367" onmouseenter="enter('-8632333559810917367');" onmouseout="out('-8632333559810917367');" style="">1075                 throw new RuntimeException(&quot;Error: could not query max item id&quot;);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1076             }                                                                                            </span>
<span  style="">1077                                                                                                          </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1078             return id;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1079         }                                                                                                </span>
<span  style="">1080                                                                                                          </span>
<span class="3292148501075941248" onmouseenter="enter('3292148501075941248');" onmouseout="out('3292148501075941248');" style="">1081         // Generates a new ID to use for an workspace screen in your database. This method               </span>
<span class="8169251972405240623" onmouseenter="enter('8169251972405240623');" onmouseout="out('8169251972405240623');" style="">1082         // should be only called from the main UI thread. As an exception, we do call it when we         </span>
<span class="5354260748737756868" onmouseenter="enter('5354260748737756868');" onmouseout="out('5354260748737756868');" style="">1083         // call the constructor from the worker thread; however, this doesn&#x27;t extend until after the     </span>
<span class="506358615447788975" onmouseenter="enter('506358615447788975');" onmouseout="out('506358615447788975');" style="">1084         // constructor is called, and we only pass a reference to LauncherProvider to LauncherApp        </span>
<span class="7265707553198201311" onmouseenter="enter('7265707553198201311');" onmouseout="out('7265707553198201311');" style="">1085         // after that point                                                                              </span>
<span class="3794345207933084858" onmouseenter="enter('3794345207933084858');" onmouseout="out('3794345207933084858');" style="">1086         public long generateNewScreenId() {                                                              </span>
<span class="-2601779586206833262" onmouseenter="enter('-2601779586206833262');" onmouseout="out('-2601779586206833262');" style="">1087             if (mMaxScreenId &lt; 0) {                                                                      </span>
<span class="-8395628436366181623" onmouseenter="enter('-8395628436366181623');" onmouseout="out('-8395628436366181623');" style="">1088                 throw new RuntimeException(&quot;Error: max screen id was not initialized&quot;);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1089             }                                                                                            </span>
<span class="-7600499966171393409" onmouseenter="enter('-7600499966171393409');" onmouseout="out('-7600499966171393409');" style="">1090             mMaxScreenId += 1;                                                                           </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1091             // Log to disk                                                                               </span>
<span class="-8761729187376845632" onmouseenter="enter('-8761729187376845632');" onmouseout="out('-8761729187376845632');" style="">1092             Launcher.addDumpLog(TAG, &quot;11683562 - generateNewScreenId(): &quot; + mMaxScreenId, true);         </span>
<span class="-2082539956971430335" onmouseenter="enter('-2082539956971430335');" onmouseout="out('-2082539956971430335');" style="">1093             return mMaxScreenId;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1094         }                                                                                                </span>
<span  style="">1095                                                                                                          </span>
<span class="-7531165898061832726" onmouseenter="enter('-7531165898061832726');" onmouseout="out('-7531165898061832726');" style="">1096         public void updateMaxScreenId(long maxScreenId) {                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1097             // Log to disk                                                                               </span>
<span class="-6999371015775210769" onmouseenter="enter('-6999371015775210769');" onmouseout="out('-6999371015775210769');" style="">1098             Launcher.addDumpLog(TAG, &quot;11683562 - updateMaxScreenId(): &quot; + maxScreenId, true);            </span>
<span class="-5262779621072196869" onmouseenter="enter('-5262779621072196869');" onmouseout="out('-5262779621072196869');" style="">1099             mMaxScreenId = maxScreenId;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1100         }                                                                                                </span>
<span  style="">1101                                                                                                          </span>
<span class="1340022180158952931" onmouseenter="enter('1340022180158952931');" onmouseout="out('1340022180158952931');" style="">1102         private long initializeMaxScreenId(SQLiteDatabase db) {                                          </span>
<span class="-2625939584691052131" onmouseenter="enter('-2625939584691052131');" onmouseout="out('-2625939584691052131');" style=""><abbr title="1103             Cursor c = db.rawQuery(&quot;SELECT MAX(&quot; + LauncherSettings.WorkspaceScreens._ID + &quot;) FROM &quot; + TABLE_WORKSPACE_SCREENS, null);">1103             Cursor c = db.rawQuery(&quot;SELECT MAX(&quot; + LauncherSettings.WorkspaceScreens._ID + &quot;) FROM &quot; + TA🔵</abbr></span>
<span  style="">1104                                                                                                          </span>
<span class="-7794263827987261163" onmouseenter="enter('-7794263827987261163');" onmouseout="out('-7794263827987261163');" style="">1105             // get the result                                                                            </span>
<span class="-7318978250879363167" onmouseenter="enter('-7318978250879363167');" onmouseout="out('-7318978250879363167');" style="">1106             final int maxIdIndex = 0;                                                                    </span>
<span class="-3996593593662644650" onmouseenter="enter('-3996593593662644650');" onmouseout="out('-3996593593662644650');" style="">1107             long id = -1;                                                                                </span>
<span class="2006356297883322098" onmouseenter="enter('2006356297883322098');" onmouseout="out('2006356297883322098');" style="">1108             if (c != null &amp;&amp; c.moveToNext()) {                                                           </span>
<span class="6252863560499548901" onmouseenter="enter('6252863560499548901');" onmouseout="out('6252863560499548901');" style="">1109                 id = c.getLong(maxIdIndex);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1110             }                                                                                            </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1111             if (c != null) {                                                                             </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1112                 c.close();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1113             }                                                                                            </span>
<span  style="">1114                                                                                                          </span>
<span class="-7988774182034385411" onmouseenter="enter('-7988774182034385411');" onmouseout="out('-7988774182034385411');" style="">1115             if (id == -1) {                                                                              </span>
<span class="5981752458110974976" onmouseenter="enter('5981752458110974976');" onmouseout="out('5981752458110974976');" style="">1116                 throw new RuntimeException(&quot;Error: could not query max screen id&quot;);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1117             }                                                                                            </span>
<span  style="">1118                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1119             // Log to disk                                                                               </span>
<span class="27430974887508761" onmouseenter="enter('27430974887508761');" onmouseout="out('27430974887508761');" style="">1120             Launcher.addDumpLog(TAG, &quot;11683562 - initializeMaxScreenId(): &quot; + id, true);                 </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1121             return id;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1122         }                                                                                                </span>
<span  style="">1123                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1124         /**                                                                                              </span>
<span class="4503171225344397477" onmouseenter="enter('4503171225344397477');" onmouseout="out('4503171225344397477');" style="">1125          * Upgrade existing clock and photo frame widgets into their new widget                          </span>
<span class="6424740634937576135" onmouseenter="enter('6424740634937576135');" onmouseout="out('6424740634937576135');" style="">1126          * equivalents.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1127          */                                                                                              </span>
<span class="743821216610300554" onmouseenter="enter('743821216610300554');" onmouseout="out('743821216610300554');" style="">1128         private void convertWidgets(SQLiteDatabase db) {                                                 </span>
<span class="328319718470950320" onmouseenter="enter('328319718470950320');" onmouseout="out('328319718470950320');" style="">1129             final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);            </span>
<span class="-406592777847963958" onmouseenter="enter('-406592777847963958');" onmouseout="out('-406592777847963958');" style="">1130             final int[] bindSources = new int[] {                                                        </span>
<span class="7481244370213656970" onmouseenter="enter('7481244370213656970');" onmouseout="out('7481244370213656970');" style="">1131                     Favorites.ITEM_TYPE_WIDGET_CLOCK,                                                    </span>
<span class="-4987589710545680428" onmouseenter="enter('-4987589710545680428');" onmouseout="out('-4987589710545680428');" style="">1132                     Favorites.ITEM_TYPE_WIDGET_PHOTO_FRAME,                                              </span>
<span class="-3073892039805288641" onmouseenter="enter('-3073892039805288641');" onmouseout="out('-3073892039805288641');" style="">1133                     Favorites.ITEM_TYPE_WIDGET_SEARCH,                                                   </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1134             };                                                                                           </span>
<span  style="">1135                                                                                                          </span>
<span class="8819301229709462929" onmouseenter="enter('8819301229709462929');" onmouseout="out('8819301229709462929');" style="">1136             final String selectWhere = buildOrWhereString(Favorites.ITEM_TYPE, bindSources);             </span>
<span  style="">1137                                                                                                          </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="">1138             Cursor c = null;                                                                             </span>
<span  style="">1139                                                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">1140             db.beginTransaction();                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1141             try {                                                                                        </span>
<span class="9180803436248323281" onmouseenter="enter('9180803436248323281');" onmouseout="out('9180803436248323281');" style="">1142                 // Select and iterate through each matching widget                                       </span>
<span class="-4881978227834121924" onmouseenter="enter('-4881978227834121924');" onmouseout="out('-4881978227834121924');" style="">1143                 c = db.query(TABLE_FAVORITES, new String[] { Favorites._ID, Favorites.ITEM_TYPE },       </span>
<span class="523753735101753681" onmouseenter="enter('523753735101753681');" onmouseout="out('523753735101753681');" style="">1144                         selectWhere, null, null, null, null);                                            </span>
<span  style="">1145                                                                                                          </span>
<span class="5404371667899517548" onmouseenter="enter('5404371667899517548');" onmouseout="out('5404371667899517548');" style="">1146                 if (LOGD) Log.d(TAG, &quot;found upgrade cursor count=&quot; + c.getCount());                      </span>
<span  style="">1147                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1148                 final ContentValues values = new ContentValues();                                        </span>
<span class="-3619679329231355898" onmouseenter="enter('-3619679329231355898');" onmouseout="out('-3619679329231355898');" style="">1149                 while (c != null &amp;&amp; c.moveToNext()) {                                                    </span>
<span class="707133737367195092" onmouseenter="enter('707133737367195092');" onmouseout="out('707133737367195092');" style="">1150                     long favoriteId = c.getLong(0);                                                      </span>
<span class="3900048804921934092" onmouseenter="enter('3900048804921934092');" onmouseout="out('3900048804921934092');" style="">1151                     int favoriteType = c.getInt(1);                                                      </span>
<span  style="">1152                                                                                                          </span>
<span class="-4540349898180247220" onmouseenter="enter('-4540349898180247220');" onmouseout="out('-4540349898180247220');" style="">1153                     // Allocate and update database with new appWidgetId                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1154                     try {                                                                                </span>
<span class="7176738113779216844" onmouseenter="enter('7176738113779216844');" onmouseout="out('7176738113779216844');" style="">1155                         int appWidgetId = mAppWidgetHost.allocateAppWidgetId();                          </span>
<span  style="">1156                                                                                                          </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1157                         if (LOGD) {                                                                      </span>
<span class="-1535375789049662259" onmouseenter="enter('-1535375789049662259');" onmouseout="out('-1535375789049662259');" style="">1158                             Log.d(TAG, &quot;allocated appWidgetId=&quot; + appWidgetId                            </span>
<span class="-754391989896361890" onmouseenter="enter('-754391989896361890');" onmouseout="out('-754391989896361890');" style="">1159                                     + &quot; for favoriteId=&quot; + favoriteId);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1160                         }                                                                                </span>
<span class="6295623415315599771" onmouseenter="enter('6295623415315599771');" onmouseout="out('6295623415315599771');" style="">1161                         values.clear();                                                                  </span>
<span class="2941545182515325414" onmouseenter="enter('2941545182515325414');" onmouseout="out('2941545182515325414');" style="">1162                         values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_APPWIDGET);                  </span>
<span class="-2217583362005241057" onmouseenter="enter('-2217583362005241057');" onmouseout="out('-2217583362005241057');" style="">1163                         values.put(Favorites.APPWIDGET_ID, appWidgetId);                                 </span>
<span  style="">1164                                                                                                          </span>
<span class="1614683704773657610" onmouseenter="enter('1614683704773657610');" onmouseout="out('1614683704773657610');" style="">1165                         // Original widgets might not have valid spans when upgrading                    </span>
<span class="6372808247890680892" onmouseenter="enter('6372808247890680892');" onmouseout="out('6372808247890680892');" style="">1166                         if (favoriteType == Favorites.ITEM_TYPE_WIDGET_SEARCH) {                         </span>
<span class="-7334544058420176074" onmouseenter="enter('-7334544058420176074');" onmouseout="out('-7334544058420176074');" style="">1167                             values.put(LauncherSettings.Favorites.SPANX, 4);                             </span>
<span class="-6227774068858913177" onmouseenter="enter('-6227774068858913177');" onmouseout="out('-6227774068858913177');" style="">1168                             values.put(LauncherSettings.Favorites.SPANY, 1);                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1169                         } else {                                                                         </span>
<span class="2219786095905776818" onmouseenter="enter('2219786095905776818');" onmouseout="out('2219786095905776818');" style="">1170                             values.put(LauncherSettings.Favorites.SPANX, 2);                             </span>
<span class="6027752313180198994" onmouseenter="enter('6027752313180198994');" onmouseout="out('6027752313180198994');" style="">1171                             values.put(LauncherSettings.Favorites.SPANY, 2);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1172                         }                                                                                </span>
<span  style="">1173                                                                                                          </span>
<span class="-7922633388955325898" onmouseenter="enter('-7922633388955325898');" onmouseout="out('-7922633388955325898');" style="">1174                         String updateWhere = Favorites._ID + &quot;=&quot; + favoriteId;                           </span>
<span class="6932880072735485862" onmouseenter="enter('6932880072735485862');" onmouseout="out('6932880072735485862');" style="">1175                         db.update(TABLE_FAVORITES, values, updateWhere, null);                           </span>
<span  style="">1176                                                                                                          </span>
<span class="3880259377175112012" onmouseenter="enter('3880259377175112012');" onmouseout="out('3880259377175112012');" style="">1177                         if (favoriteType == Favorites.ITEM_TYPE_WIDGET_CLOCK) {                          </span>
<span class="393760990327696266" onmouseenter="enter('393760990327696266');" onmouseout="out('393760990327696266');" style="">1178                             // TODO: check return value                                                  </span>
<span class="-7373523765032573831" onmouseenter="enter('-7373523765032573831');" onmouseout="out('-7373523765032573831');" style="">1179                             appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,                       </span>
<span class="2526235379639805468" onmouseenter="enter('2526235379639805468');" onmouseout="out('2526235379639805468');" style="">1180                                     new ComponentName(&quot;com.android.alarmclock&quot;,                          </span>
<span class="7317042431961215300" onmouseenter="enter('7317042431961215300');" onmouseout="out('7317042431961215300');" style="">1181                                     &quot;com.android.alarmclock.AnalogAppWidgetProvider&quot;));                  </span>
<span class="6172094920381637122" onmouseenter="enter('6172094920381637122');" onmouseout="out('6172094920381637122');" style="">1182                         } else if (favoriteType == Favorites.ITEM_TYPE_WIDGET_PHOTO_FRAME) {             </span>
<span class="393760990327696266" onmouseenter="enter('393760990327696266');" onmouseout="out('393760990327696266');" style="">1183                             // TODO: check return value                                                  </span>
<span class="-7373523765032573831" onmouseenter="enter('-7373523765032573831');" onmouseout="out('-7373523765032573831');" style="">1184                             appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,                       </span>
<span class="7711233161317097526" onmouseenter="enter('7711233161317097526');" onmouseout="out('7711233161317097526');" style="">1185                                     new ComponentName(&quot;com.android.camera&quot;,                              </span>
<span class="8639249053579730258" onmouseenter="enter('8639249053579730258');" onmouseout="out('8639249053579730258');" style="">1186                                     &quot;com.android.camera.PhotoAppWidgetProvider&quot;));                       </span>
<span class="-7798263288808543811" onmouseenter="enter('-7798263288808543811');" onmouseout="out('-7798263288808543811');" style="">1187                         } else if (favoriteType == Favorites.ITEM_TYPE_WIDGET_SEARCH) {                  </span>
<span class="393760990327696266" onmouseenter="enter('393760990327696266');" onmouseout="out('393760990327696266');" style="">1188                             // TODO: check return value                                                  </span>
<span class="-7373523765032573831" onmouseenter="enter('-7373523765032573831');" onmouseout="out('-7373523765032573831');" style="">1189                             appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,                       </span>
<span class="5624392848756158158" onmouseenter="enter('5624392848756158158');" onmouseout="out('5624392848756158158');" style="">1190                                     getSearchWidgetProvider());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191                         }                                                                                </span>
<span class="3255801419413274971" onmouseenter="enter('3255801419413274971');" onmouseout="out('3255801419413274971');" style="">1192                     } catch (RuntimeException ex) {                                                      </span>
<span class="7589023920505453658" onmouseenter="enter('7589023920505453658');" onmouseout="out('7589023920505453658');" style="">1193                         Log.e(TAG, &quot;Problem allocating appWidgetId&quot;, ex);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195                 }                                                                                        </span>
<span  style="">1196                                                                                                          </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">1197                 db.setTransactionSuccessful();                                                           </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="">1198             } catch (SQLException ex) {                                                                  </span>
<span class="1696470604658034617" onmouseenter="enter('1696470604658034617');" onmouseout="out('1696470604658034617');" style="">1199                 Log.w(TAG, &quot;Problem while allocating appWidgetIds for existing widgets&quot;, ex);            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1200             } finally {                                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">1201                 db.endTransaction();                                                                     </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1202                 if (c != null) {                                                                         </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1203                     c.close();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1204                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1205             }                                                                                            </span>
<span  style="">1206                                                                                                          </span>
<span class="1061677975667452281" onmouseenter="enter('1061677975667452281');" onmouseout="out('1061677975667452281');" style="">1207             // Update max item id                                                                        </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style="">1208             mMaxItemId = initializeMaxItemId(db);                                                        </span>
<span class="-1050526381544019588" onmouseenter="enter('-1050526381544019588');" onmouseout="out('-1050526381544019588');" style="">1209             if (LOGD) Log.d(TAG, &quot;mMaxItemId: &quot; + mMaxItemId);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210         }                                                                                                </span>
<span  style="">1211                                                                                                          </span>
<span class="1383368615032249869" onmouseenter="enter('1383368615032249869');" onmouseout="out('1383368615032249869');" style="">1212         private boolean initializeExternalAdd(ContentValues values) {                                    </span>
<span class="-4585320292275114767" onmouseenter="enter('-4585320292275114767');" onmouseout="out('-4585320292275114767');" style="">1213             // 1. Ensure that externally added items have a valid item id                                </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">1214             long id = generateNewItemId();                                                               </span>
<span class="-4305015780380424948" onmouseenter="enter('-4305015780380424948');" onmouseout="out('-4305015780380424948');" style="">1215             values.put(LauncherSettings.Favorites._ID, id);                                              </span>
<span class="5555856101718413728" onmouseenter="enter('5555856101718413728');" onmouseout="out('5555856101718413728');" style="">1216             // 2. In the case of an app widget, and if no app widget id is specified, we                 </span>
<span class="5653436237424007902" onmouseenter="enter('5653436237424007902');" onmouseout="out('5653436237424007902');" style="">1217             // attempt allocate and bind the widget.                                                     </span>
<span class="7737959233990593661" onmouseenter="enter('7737959233990593661');" onmouseout="out('7737959233990593661');" style="">1218             Integer itemType = values.getAsInteger(LauncherSettings.Favorites.ITEM_TYPE);                </span>
<span class="-5651385485266459213" onmouseenter="enter('-5651385485266459213');" onmouseout="out('-5651385485266459213');" style=""><abbr title="1219             if (((itemType != null) &amp;&amp; (itemType.intValue() == Favorites.ITEM_TYPE_APPWIDGET)) &amp;&amp; (!values.containsKey(LauncherSettings.Favorites.APPWIDGET_ID))) {">1219             if (((itemType != null) &amp;&amp; (itemType.intValue() == Favorites.ITEM_TYPE_APPWIDGET)) &amp;&amp; (!value🔵</abbr></span>
<span class="328319718470950320" onmouseenter="enter('328319718470950320');" onmouseout="out('328319718470950320');" style="">1220                 final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);        </span>
<span class="-1675364059629728256" onmouseenter="enter('-1675364059629728256');" onmouseout="out('-1675364059629728256');" style=""><abbr title="1221                 ComponentName cn = ComponentName.unflattenFromString(values.getAsString(Favorites.APPWIDGET_PROVIDER));">1221                 ComponentName cn = ComponentName.unflattenFromString(values.getAsString(Favorites.APPWIDG🔵</abbr></span>
<span class="3459055710499452007" onmouseenter="enter('3459055710499452007');" onmouseout="out('3459055710499452007');" style="">1222                 if (cn != null) {                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1223                     try {                                                                                </span>
<span class="7176738113779216844" onmouseenter="enter('7176738113779216844');" onmouseout="out('7176738113779216844');" style="">1224                         int appWidgetId = mAppWidgetHost.allocateAppWidgetId();                          </span>
<span class="3122228588084428979" onmouseenter="enter('3122228588084428979');" onmouseout="out('3122228588084428979');" style="">1225                         values.put(LauncherSettings.Favorites.APPWIDGET_ID, appWidgetId);                </span>
<span class="-7738526031760060433" onmouseenter="enter('-7738526031760060433');" onmouseout="out('-7738526031760060433');" style="">1226                         if (!appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId, cn)) {               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1227                             return false;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1228                         }                                                                                </span>
<span class="5702813929982664684" onmouseenter="enter('5702813929982664684');" onmouseout="out('5702813929982664684');" style="">1229                     } catch (java.lang.RuntimeException e) {                                             </span>
<span class="9049318523495391496" onmouseenter="enter('9049318523495391496');" onmouseout="out('9049318523495391496');" style="">1230                         Log.e(TAG, &quot;Failed to initialize external widget&quot;, e);                           </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1231                         return false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1232                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1233                 } else {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1234                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1235                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1236             }                                                                                            </span>
<span class="-5393917371757635815" onmouseenter="enter('-5393917371757635815');" onmouseout="out('-5393917371757635815');" style="">1237             // Add screen id if not present                                                              </span>
<span class="-8492193036384627967" onmouseenter="enter('-8492193036384627967');" onmouseout="out('-8492193036384627967');" style="">1238             long screenId = values.getAsLong(LauncherSettings.Favorites.SCREEN);                         </span>
<span class="-8472780943665027311" onmouseenter="enter('-8472780943665027311');" onmouseout="out('-8472780943665027311');" style="">1239             if (!addScreenIdIfNecessary(screenId)) {                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1240                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1241             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1242             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1243         }                                                                                                </span>
<span  style="">1244                                                                                                          </span>
<span class="7352835902307890843" onmouseenter="enter('7352835902307890843');" onmouseout="out('7352835902307890843');" style="">1245         // Returns true of screen id exists, or if successfully added                                    </span>
<span class="-4057720447241324922" onmouseenter="enter('-4057720447241324922');" onmouseout="out('-4057720447241324922');" style="">1246         private boolean addScreenIdIfNecessary(long screenId) {                                          </span>
<span class="-8332527954530563349" onmouseenter="enter('-8332527954530563349');" onmouseout="out('-8332527954530563349');" style="">1247             if (!hasScreenId(screenId)) {                                                                </span>
<span class="-3380006025674561043" onmouseenter="enter('-3380006025674561043');" onmouseout="out('-3380006025674561043');" style="">1248                 int rank = getMaxScreenRank() + 1;                                                       </span>
<span  style="">1249                                                                                                          </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1250                 ContentValues v = new ContentValues();                                                   </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1251                 v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                                  </span>
<span class="6806563186306365402" onmouseenter="enter('6806563186306365402');" onmouseout="out('6806563186306365402');" style="">1252                 v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, rank);                              </span>
<span class="-1115795847996433461" onmouseenter="enter('-1115795847996433461');" onmouseout="out('-1115795847996433461');" style="">1253                 if (dbInsertAndCheck(this, getWritableDatabase(),                                        </span>
<span class="3238415722136121635" onmouseenter="enter('3238415722136121635');" onmouseout="out('3238415722136121635');" style="">1254                         TABLE_WORKSPACE_SCREENS, null, v) &lt; 0) {                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1255                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1256                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1258             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1259         }                                                                                                </span>
<span  style="">1260                                                                                                          </span>
<span class="5478264759768975399" onmouseenter="enter('5478264759768975399');" onmouseout="out('5478264759768975399');" style="">1261         private boolean hasScreenId(long screenId) {                                                     </span>
<span class="2098776625240525845" onmouseenter="enter('2098776625240525845');" onmouseout="out('2098776625240525845');" style="">1262             SQLiteDatabase db = getWritableDatabase();                                                   </span>
<span class="7657123469267572077" onmouseenter="enter('7657123469267572077');" onmouseout="out('7657123469267572077');" style="">1263             Cursor c = db.rawQuery(&quot;SELECT * FROM &quot; + TABLE_WORKSPACE_SCREENS + &quot; WHERE &quot;                </span>
<span class="1858055579641267103" onmouseenter="enter('1858055579641267103');" onmouseout="out('1858055579641267103');" style="">1264                     + LauncherSettings.WorkspaceScreens._ID + &quot; = &quot; + screenId, null);                   </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1265             if (c != null) {                                                                             </span>
<span class="-7874906179005583875" onmouseenter="enter('-7874906179005583875');" onmouseout="out('-7874906179005583875');" style="">1266                 int count = c.getCount();                                                                </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1267                 c.close();                                                                               </span>
<span class="4255567607434315929" onmouseenter="enter('4255567607434315929');" onmouseout="out('4255567607434315929');" style="">1268                 return count &gt; 0;                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1269             } else {                                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1270                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272         }                                                                                                </span>
<span  style="">1273                                                                                                          </span>
<span class="-2708828914383579811" onmouseenter="enter('-2708828914383579811');" onmouseout="out('-2708828914383579811');" style="">1274         private int getMaxScreenRank() {                                                                 </span>
<span class="2098776625240525845" onmouseenter="enter('2098776625240525845');" onmouseout="out('2098776625240525845');" style="">1275             SQLiteDatabase db = getWritableDatabase();                                                   </span>
<span class="611714122749922220" onmouseenter="enter('611714122749922220');" onmouseout="out('611714122749922220');" style=""><abbr title="1276             Cursor c = db.rawQuery(((&quot;SELECT MAX(&quot; + LauncherSettings.WorkspaceScreens.SCREEN_RANK) + &quot;) FROM &quot;) + TABLE_WORKSPACE_SCREENS, null);">1276             Cursor c = db.rawQuery(((&quot;SELECT MAX(&quot; + LauncherSettings.WorkspaceScreens.SCREEN_RANK) + &quot;) 🔵</abbr></span>
<span class="-7794263827987261163" onmouseenter="enter('-7794263827987261163');" onmouseout="out('-7794263827987261163');" style="">1277             // get the result                                                                            </span>
<span class="-7089673966704675292" onmouseenter="enter('-7089673966704675292');" onmouseout="out('-7089673966704675292');" style="">1278             final int maxRankIndex = 0;                                                                  </span>
<span class="8995972804405745177" onmouseenter="enter('8995972804405745177');" onmouseout="out('8995972804405745177');" style="">1279             int rank = -1;                                                                               </span>
<span class="-1169062489219860274" onmouseenter="enter('-1169062489219860274');" onmouseout="out('-1169062489219860274');" style="">1280             if ((c != null) &amp;&amp; c.moveToNext()) {                                                         </span>
<span class="-130706833968251970" onmouseenter="enter('-130706833968251970');" onmouseout="out('-130706833968251970');" style="">1281                 rank = c.getInt(maxRankIndex);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282             }                                                                                            </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1283             if (c != null) {                                                                             </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1284                 c.close();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1285             }                                                                                            </span>
<span class="-5061660947414305561" onmouseenter="enter('-5061660947414305561');" onmouseout="out('-5061660947414305561');" style="">1286             return rank;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1287         }                                                                                                </span>
<span  style="">1288                                                                                                          </span>
<span class="-1744733549489062304" onmouseenter="enter('-1744733549489062304');" onmouseout="out('-1744733549489062304');" style="">1289         private static final void beginDocument(XmlPullParser parser, String firstElementName)           </span>
<span class="-2080139816352784756" onmouseenter="enter('-2080139816352784756');" onmouseout="out('-2080139816352784756');" style="">1290                 throws XmlPullParserException, IOException {                                             </span>
<span class="3163913122247807134" onmouseenter="enter('3163913122247807134');" onmouseout="out('3163913122247807134');" style="">1291             int type;                                                                                    </span>
<span class="4717758523512892408" onmouseenter="enter('4717758523512892408');" onmouseout="out('4717758523512892408');" style="">1292             while ((type = parser.next()) != XmlPullParser.START_TAG                                     </span>
<span class="-8271997263827206949" onmouseenter="enter('-8271997263827206949');" onmouseout="out('-8271997263827206949');" style="">1293                     &amp;&amp; type != XmlPullParser.END_DOCUMENT) {                                             </span>
<span class="-2934185353411265329" onmouseenter="enter('-2934185353411265329');" onmouseout="out('-2934185353411265329');" style="">1294                 ;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295             }                                                                                            </span>
<span  style="">1296                                                                                                          </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1297             if (type != XmlPullParser.START_TAG) {                                                       </span>
<span class="-8251107748224722167" onmouseenter="enter('-8251107748224722167');" onmouseout="out('-8251107748224722167');" style="">1298                 throw new XmlPullParserException(&quot;No start tag found&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1299             }                                                                                            </span>
<span  style="">1300                                                                                                          </span>
<span class="-245075222549821684" onmouseenter="enter('-245075222549821684');" onmouseout="out('-245075222549821684');" style="">1301             if (!parser.getName().equals(firstElementName)) {                                            </span>
<span class="-5532803442016772615" onmouseenter="enter('-5532803442016772615');" onmouseout="out('-5532803442016772615');" style="">1302                 throw new XmlPullParserException(&quot;Unexpected start tag: found &quot; + parser.getName() +     </span>
<span class="-7049615363315893666" onmouseenter="enter('-7049615363315893666');" onmouseout="out('-7049615363315893666');" style="">1303                         &quot;, expected &quot; + firstElementName);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305         }                                                                                                </span>
<span  style="">1306                                                                                                          </span>
<span class="-5649662118683980701" onmouseenter="enter('-5649662118683980701');" onmouseout="out('-5649662118683980701');" style="">1307         private static Intent buildMainIntent() {                                                        </span>
<span class="4401622020586218033" onmouseenter="enter('4401622020586218033');" onmouseout="out('4401622020586218033');" style="">1308             Intent intent = new Intent(Intent.ACTION_MAIN, null);                                        </span>
<span class="-5992732151813603475" onmouseenter="enter('-5992732151813603475');" onmouseout="out('-5992732151813603475');" style="">1309             intent.addCategory(Intent.CATEGORY_LAUNCHER);                                                </span>
<span class="7257372324830803623" onmouseenter="enter('7257372324830803623');" onmouseout="out('7257372324830803623');" style="">1310             return intent;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1311         }                                                                                                </span>
<span  style="">1312                                                                                                          </span>
<span class="4836207247336983218" onmouseenter="enter('4836207247336983218');" onmouseout="out('4836207247336983218');" style="">1313         private int loadFavorites(SQLiteDatabase db, WorkspaceLoader loader) {                           </span>
<span class="-517932292017625058" onmouseenter="enter('-517932292017625058');" onmouseout="out('-517932292017625058');" style="">1314             ArrayList&lt;Long&gt; screenIds = new ArrayList&lt;Long&gt;();                                           </span>
<span class="-1992683231790282850" onmouseenter="enter('-1992683231790282850');" onmouseout="out('-1992683231790282850');" style="">1315             // TODO: Use multiple loaders with fall-back and transaction.                                </span>
<span class="-198133332043015666" onmouseenter="enter('-198133332043015666');" onmouseout="out('-198133332043015666');" style="">1316             int count = loader.loadLayout(db, screenIds);                                                </span>
<span class="6833875387324148439" onmouseenter="enter('6833875387324148439');" onmouseout="out('6833875387324148439');" style="">1317             // Add the screens specified by the items above                                              </span>
<span class="2978539432730983390" onmouseenter="enter('2978539432730983390');" onmouseout="out('2978539432730983390');" style="">1318             Collections.sort(screenIds);                                                                 </span>
<span class="5419352211080831355" onmouseenter="enter('5419352211080831355');" onmouseout="out('5419352211080831355');" style="">1319             int rank = 0;                                                                                </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">1320             ContentValues values = new ContentValues();                                                  </span>
<span class="7152107230041712979" onmouseenter="enter('7152107230041712979');" onmouseout="out('7152107230041712979');" style="">1321             for (Long id : screenIds) {                                                                  </span>
<span class="6295623415315599771" onmouseenter="enter('6295623415315599771');" onmouseout="out('6295623415315599771');" style="">1322                 values.clear();                                                                          </span>
<span class="-3523466272369778299" onmouseenter="enter('-3523466272369778299');" onmouseout="out('-3523466272369778299');" style="">1323                 values.put(LauncherSettings.WorkspaceScreens._ID, id);                                   </span>
<span class="-4819700644573994153" onmouseenter="enter('-4819700644573994153');" onmouseout="out('-4819700644573994153');" style="">1324                 values.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, rank);                         </span>
<span class="-7619796578683976012" onmouseenter="enter('-7619796578683976012');" onmouseout="out('-7619796578683976012');" style="">1325                 if (dbInsertAndCheck(this, db, TABLE_WORKSPACE_SCREENS, null, values) &lt; 0) {             </span>
<span class="5392951550425550614" onmouseenter="enter('5392951550425550614');" onmouseout="out('5392951550425550614');" style="">1326                     throw new RuntimeException(&quot;Failed initialize screen table&quot; + &quot;from default layout&quot;);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327                 }                                                                                        </span>
<span class="-39828730810908930" onmouseenter="enter('-39828730810908930');" onmouseout="out('-39828730810908930');" style="">1328                 rank++;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329             }                                                                                            </span>
<span class="-1496945990523812752" onmouseenter="enter('-1496945990523812752');" onmouseout="out('-1496945990523812752');" style="">1330             // Ensure that the max ids are initialized                                                   </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style="">1331             mMaxItemId = initializeMaxItemId(db);                                                        </span>
<span class="4730788985981235797" onmouseenter="enter('4730788985981235797');" onmouseout="out('4730788985981235797');" style="">1332             mMaxScreenId = initializeMaxScreenId(db);                                                    </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style="">1333             return count;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1334         }                                                                                                </span>
<span  style="">1335                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1336         /**                                                                                              </span>
<span class="4206769764705618625" onmouseenter="enter('4206769764705618625');" onmouseout="out('4206769764705618625');" style="">1337          * Loads the default set of favorite packages from an xml file.                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1338          *                                                                                               </span>
<span class="-2594660449836918751" onmouseenter="enter('-2594660449836918751');" onmouseout="out('-2594660449836918751');" style="">1339          * @param db The database to write the values into                                               </span>
<span class="8005887113908348021" onmouseenter="enter('8005887113908348021');" onmouseout="out('8005887113908348021');" style="">1340          * @param filterContainerId The specific container id of items to load                           </span>
<span class="4549742419570190063" onmouseenter="enter('4549742419570190063');" onmouseout="out('4549742419570190063');" style="">1341          * @param the set of screenIds which are used by the favorites                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1342          */                                                                                              </span>
<span class="6677950618143917653" onmouseenter="enter('6677950618143917653');" onmouseout="out('6677950618143917653');" style=""><abbr title="1343         private int loadFavoritesRecursive(SQLiteDatabase db, Resources res, int workspaceResourceId, ArrayList&lt;Long&gt; screenIds) {">1343         private int loadFavoritesRecursive(SQLiteDatabase db, Resources res, int workspaceResourceId, Arr🔵</abbr></span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">1344             ContentValues values = new ContentValues();                                                  </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1345             if (LOGD) {                                                                                  </span>
<span class="704048094332957982" onmouseenter="enter('704048094332957982');" onmouseout="out('704048094332957982');" style="">1346                 Log.v(TAG, String.format(&quot;Loading favorites from resid=0x%08x&quot;, workspaceResourceId));   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1347             }                                                                                            </span>
<span class="-7835997453776942924" onmouseenter="enter('-7835997453776942924');" onmouseout="out('-7835997453776942924');" style="">1348             int count = 0;                                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1349             try {                                                                                        </span>
<span class="9080417688274832266" onmouseenter="enter('9080417688274832266');" onmouseout="out('9080417688274832266');" style="">1350                 XmlResourceParser parser = res.getXml(workspaceResourceId);                              </span>
<span class="-4849646726062265204" onmouseenter="enter('-4849646726062265204');" onmouseout="out('-4849646726062265204');" style="">1351                 beginDocument(parser, TAG_FAVORITES);                                                    </span>
<span class="-1796733801910506416" onmouseenter="enter('-1796733801910506416');" onmouseout="out('-1796733801910506416');" style="">1352                 final int depth = parser.getDepth();                                                     </span>
<span class="3163913122247807134" onmouseenter="enter('3163913122247807134');" onmouseout="out('3163913122247807134');" style="">1353                 int type;                                                                                </span>
<span class="4981837604325580139" onmouseenter="enter('4981837604325580139');" onmouseout="out('4981837604325580139');" style=""><abbr title="1354                 while ((((type = parser.next()) != XmlPullParser.END_TAG) || (parser.getDepth() &gt; depth)) &amp;&amp; (type != XmlPullParser.END_DOCUMENT)) {">1354                 while ((((type = parser.next()) != XmlPullParser.END_TAG) || (parser.getDepth() &gt; depth))🔵</abbr></span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1355                     if (type != XmlPullParser.START_TAG) {                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1356                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1357                     }                                                                                    </span>
<span class="7899804433438794249" onmouseenter="enter('7899804433438794249');" onmouseout="out('7899804433438794249');" style="">1358                     boolean added = false;                                                               </span>
<span class="6953602109235869781" onmouseenter="enter('6953602109235869781');" onmouseout="out('6953602109235869781');" style="">1359                     final String name = parser.getName();                                                </span>
<span class="7121161214099969316" onmouseenter="enter('7121161214099969316');" onmouseout="out('7121161214099969316');" style="">1360                     if (TAG_INCLUDE.equals(name)) {                                                      </span>
<span class="7620964305819267835" onmouseenter="enter('7620964305819267835');" onmouseout="out('7620964305819267835');" style="">1361                         final int resId = getAttributeResourceValue(parser, ATTR_WORKSPACE, 0);          </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1362                         if (LOGD) {                                                                      </span>
<span class="1164676977873489968" onmouseenter="enter('1164676977873489968');" onmouseout="out('1164676977873489968');" style=""><abbr title="1363                             Log.v(TAG, String.format((&quot;%&quot; + (2 * (depth + 1))) + &quot;s&lt;include workspace=%08x&gt;&quot;, &quot;&quot;, resId));">1363                             Log.v(TAG, String.format((&quot;%&quot; + (2 * (depth + 1))) + &quot;s&lt;include workspace=%08🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1364                         }                                                                                </span>
<span class="-6297326282498433816" onmouseenter="enter('-6297326282498433816');" onmouseout="out('-6297326282498433816');" style="">1365                         if ((resId != 0) &amp;&amp; (resId != workspaceResourceId)) {                            </span>
<span class="-8087579639415016515" onmouseenter="enter('-8087579639415016515');" onmouseout="out('-8087579639415016515');" style="">1366                             // recursively load some more favorites, why not?                            </span>
<span class="-9207845823385341803" onmouseenter="enter('-9207845823385341803');" onmouseout="out('-9207845823385341803');" style="">1367                             count += loadFavoritesRecursive(db, res, resId, screenIds);                  </span>
<span class="8338453324960120992" onmouseenter="enter('8338453324960120992');" onmouseout="out('8338453324960120992');" style="">1368                             added = false;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1369                         } else {                                                                         </span>
<span class="6706749223879539247" onmouseenter="enter('6706749223879539247');" onmouseout="out('6706749223879539247');" style="">1370                             Log.w(TAG, String.format(&quot;Skipping &lt;include workspace=0x%08x&gt;&quot;, resId));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371                         }                                                                                </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1372                         if (LOGD) {                                                                      </span>
<span class="2937960923608240896" onmouseenter="enter('2937960923608240896');" onmouseout="out('2937960923608240896');" style="">1373                             Log.v(TAG, String.format((&quot;%&quot; + (2 * (depth + 1))) + &quot;s&lt;/include&gt;&quot;, &quot;&quot;));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1374                         }                                                                                </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1375                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1376                     }                                                                                    </span>
<span class="5686456002215125351" onmouseenter="enter('5686456002215125351');" onmouseout="out('5686456002215125351');" style="">1377                     // Assuming it&#x27;s a &lt;favorite&gt; at this point                                          </span>
<span class="-9151267757984110862" onmouseenter="enter('-9151267757984110862');" onmouseout="out('-9151267757984110862');" style="">1378                     long container = Favorites.CONTAINER_DESKTOP;                                        </span>
<span class="-8953477941003932421" onmouseenter="enter('-8953477941003932421');" onmouseout="out('-8953477941003932421');" style="">1379                     String strContainer = getAttributeValue(parser, ATTR_CONTAINER);                     </span>
<span class="4899636274002469854" onmouseenter="enter('4899636274002469854');" onmouseout="out('4899636274002469854');" style="">1380                     if (strContainer != null) {                                                          </span>
<span class="-6141382636405232855" onmouseenter="enter('-6141382636405232855');" onmouseout="out('-6141382636405232855');" style="">1381                         container = Long.valueOf(strContainer);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382                     }                                                                                    </span>
<span class="5916925922507241391" onmouseenter="enter('5916925922507241391');" onmouseout="out('5916925922507241391');" style="">1383                     String screen = getAttributeValue(parser, ATTR_SCREEN);                              </span>
<span class="-5754720008436749732" onmouseenter="enter('-5754720008436749732');" onmouseout="out('-5754720008436749732');" style="">1384                     String x = getAttributeValue(parser, ATTR_X);                                        </span>
<span class="6090763299686616782" onmouseenter="enter('6090763299686616782');" onmouseout="out('6090763299686616782');" style="">1385                     String y = getAttributeValue(parser, ATTR_Y);                                        </span>
<span class="6295623415315599771" onmouseenter="enter('6295623415315599771');" onmouseout="out('6295623415315599771');" style="">1386                     values.clear();                                                                      </span>
<span class="7684212050113439789" onmouseenter="enter('7684212050113439789');" onmouseout="out('7684212050113439789');" style="">1387                     values.put(LauncherSettings.Favorites.CONTAINER, container);                         </span>
<span class="4993135311254983149" onmouseenter="enter('4993135311254983149');" onmouseout="out('4993135311254983149');" style="">1388                     values.put(LauncherSettings.Favorites.SCREEN, screen);                               </span>
<span class="4999709216465616432" onmouseenter="enter('4999709216465616432');" onmouseout="out('4999709216465616432');" style="">1389                     values.put(LauncherSettings.Favorites.CELLX, x);                                     </span>
<span class="-2755037476439373326" onmouseenter="enter('-2755037476439373326');" onmouseout="out('-2755037476439373326');" style="">1390                     values.put(LauncherSettings.Favorites.CELLY, y);                                     </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1391                     if (LOGD) {                                                                          </span>
<span class="5581535071295035524" onmouseenter="enter('5581535071295035524');" onmouseout="out('5581535071295035524');" style="">1392                         final String title = getAttributeValue(parser, ATTR_TITLE);                      </span>
<span class="-615495327061628051" onmouseenter="enter('-615495327061628051');" onmouseout="out('-615495327061628051');" style="">1393                         final String pkg = getAttributeValue(parser, ATTR_PACKAGE_NAME);                 </span>
<span class="-531722444692386287" onmouseenter="enter('-531722444692386287');" onmouseout="out('-531722444692386287');" style="">1394                         final String something = (title != null) ? title : pkg;                          </span>
<span class="-1735090809005343273" onmouseenter="enter('-1735090809005343273');" onmouseout="out('-1735090809005343273');" style=""><abbr title="1395                         Log.v(TAG, String.format((&quot;%&quot; + (2 * (depth + 1))) + &quot;s&lt;%s%s c=%d s=%s x=%s y=%s&gt;&quot;, &quot;&quot;, name, something == null ? &quot;&quot; : (&quot; \&quot;&quot; + something) + &quot;\&quot;&quot;, container, screen, x, y));">1395                         Log.v(TAG, String.format((&quot;%&quot; + (2 * (depth + 1))) + &quot;s&lt;%s%s c=%d s=%s x=%s y=%s&gt;🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1396                     }                                                                                    </span>
<span class="-7400969844258462201" onmouseenter="enter('-7400969844258462201');" onmouseout="out('-7400969844258462201');" style="">1397                     if (TAG_FAVORITE.equals(name)) {                                                     </span>
<span class="-3583571169175857402" onmouseenter="enter('-3583571169175857402');" onmouseout="out('-3583571169175857402');" style="">1398                         long id = addAppShortcut(db, values, parser);                                    </span>
<span class="2121580753897534719" onmouseenter="enter('2121580753897534719');" onmouseout="out('2121580753897534719');" style="">1399                         added = id &gt;= 0;                                                                 </span>
<span class="-5542257851689667934" onmouseenter="enter('-5542257851689667934');" onmouseout="out('-5542257851689667934');" style="">1400                     } else if (TAG_APPWIDGET.equals(name)) {                                             </span>
<span class="-794100780748822491" onmouseenter="enter('-794100780748822491');" onmouseout="out('-794100780748822491');" style="">1401                         added = addAppWidget(parser, type, db, values);                                  </span>
<span class="5570272146833981560" onmouseenter="enter('5570272146833981560');" onmouseout="out('5570272146833981560');" style="">1402                     } else if (TAG_SHORTCUT.equals(name)) {                                              </span>
<span class="8022235443544838146" onmouseenter="enter('8022235443544838146');" onmouseout="out('8022235443544838146');" style="">1403                         long id = addUriShortcut(db, values, res, parser);                               </span>
<span class="2121580753897534719" onmouseenter="enter('2121580753897534719');" onmouseout="out('2121580753897534719');" style="">1404                         added = id &gt;= 0;                                                                 </span>
<span class="-3245733975064069652" onmouseenter="enter('-3245733975064069652');" onmouseout="out('-3245733975064069652');" style="">1405                     } else if (TAG_RESOLVE.equals(name)) {                                               </span>
<span class="-6168769572729066790" onmouseenter="enter('-6168769572729066790');" onmouseout="out('-6168769572729066790');" style="">1406                         // This looks through the contained favorites (or meta-favorites) and            </span>
<span class="-5232686756441164968" onmouseenter="enter('-5232686756441164968');" onmouseout="out('-5232686756441164968');" style="">1407                         // attempts to add them as shortcuts in the fallback group&#x27;s location            </span>
<span class="-3164145926865392434" onmouseenter="enter('-3164145926865392434');" onmouseout="out('-3164145926865392434');" style="">1408                         // until one is added successfully.                                              </span>
<span class="8338453324960120992" onmouseenter="enter('8338453324960120992');" onmouseout="out('8338453324960120992');" style="">1409                         added = false;                                                                   </span>
<span class="-7289409140421595237" onmouseenter="enter('-7289409140421595237');" onmouseout="out('-7289409140421595237');" style="">1410                         final int groupDepth = parser.getDepth();                                        </span>
<span class="-3494482967734015518" onmouseenter="enter('-3494482967734015518');" onmouseout="out('-3494482967734015518');" style=""><abbr title="1411                         while (((type = parser.next()) != XmlPullParser.END_TAG) || (parser.getDepth() &gt; groupDepth)) {">1411                         while (((type = parser.next()) != XmlPullParser.END_TAG) || (parser.getDepth() &gt; 🔵</abbr></span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1412                             if (type != XmlPullParser.START_TAG) {                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1413                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1414                             }                                                                            </span>
<span class="-4826163157610997597" onmouseenter="enter('-4826163157610997597');" onmouseout="out('-4826163157610997597');" style="">1415                             final String fallback_item_name = parser.getName();                          </span>
<span class="-2022810481919856801" onmouseenter="enter('-2022810481919856801');" onmouseout="out('-2022810481919856801');" style="">1416                             if (!added) {                                                                </span>
<span class="3394509129787922860" onmouseenter="enter('3394509129787922860');" onmouseout="out('3394509129787922860');" style="">1417                                 if (TAG_FAVORITE.equals(fallback_item_name)) {                           </span>
<span class="-1179477971979967689" onmouseenter="enter('-1179477971979967689');" onmouseout="out('-1179477971979967689');" style="">1418                                     final long id = addAppShortcut(db, values, parser);                  </span>
<span class="2121580753897534719" onmouseenter="enter('2121580753897534719');" onmouseout="out('2121580753897534719');" style="">1419                                     added = id &gt;= 0;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1420                                 } else {                                                                 </span>
<span class="2812122181740357073" onmouseenter="enter('2812122181740357073');" onmouseout="out('2812122181740357073');" style=""><abbr title="1421                                     Log.e(TAG, &quot;Fallback groups can contain only favorites, found &quot; + fallback_item_name);">1421                                     Log.e(TAG, &quot;Fallback groups can contain only favorites, found &quot; + fal🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1423                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1424                         }                                                                                </span>
<span class="-6568529531723639383" onmouseenter="enter('-6568529531723639383');" onmouseout="out('-6568529531723639383');" style="">1425                     } else if (TAG_FOLDER.equals(name)) {                                                </span>
<span class="71049762543313083" onmouseenter="enter('71049762543313083');" onmouseout="out('71049762543313083');" style="">1426                         // Folder contents are nested in this XML file                                   </span>
<span class="2932998739880291847" onmouseenter="enter('2932998739880291847');" onmouseout="out('2932998739880291847');" style="">1427                         added = loadFolder(db, values, res, parser);                                     </span>
<span class="-8705641483066545971" onmouseenter="enter('-8705641483066545971');" onmouseout="out('-8705641483066545971');" style="">1428                     } else if (TAG_PARTNER_FOLDER.equals(name)) {                                        </span>
<span class="9058192063405184929" onmouseenter="enter('9058192063405184929');" onmouseout="out('9058192063405184929');" style="">1429                         // Folder contents come from an external XML resource                            </span>
<span class="-6415916158480032673" onmouseenter="enter('-6415916158480032673');" onmouseout="out('-6415916158480032673');" style="">1430                         final Partner partner = Partner.get(mPackageManager);                            </span>
<span class="-9215364277253785969" onmouseenter="enter('-9215364277253785969');" onmouseout="out('-9215364277253785969');" style="">1431                         if (partner != null) {                                                           </span>
<span class="882794219866203698" onmouseenter="enter('882794219866203698');" onmouseout="out('882794219866203698');" style="">1432                             final Resources partnerRes = partner.getResources();                         </span>
<span class="-6308649734506890044" onmouseenter="enter('-6308649734506890044');" onmouseout="out('-6308649734506890044');" style=""><abbr title="1433                             final int resId = partnerRes.getIdentifier(Partner.RES_FOLDER, &quot;xml&quot;, partner.getPackageName());">1433                             final int resId = partnerRes.getIdentifier(Partner.RES_FOLDER, &quot;xml&quot;, partner🔵</abbr></span>
<span class="-5151212692288250908" onmouseenter="enter('-5151212692288250908');" onmouseout="out('-5151212692288250908');" style="">1434                             if (resId != 0) {                                                            </span>
<span class="5087581180241899012" onmouseenter="enter('5087581180241899012');" onmouseout="out('5087581180241899012');" style="">1435                                 final XmlResourceParser partnerParser = partnerRes.getXml(resId);        </span>
<span class="7615154974472081807" onmouseenter="enter('7615154974472081807');" onmouseout="out('7615154974472081807');" style="">1436                                 beginDocument(partnerParser, TAG_FOLDER);                                </span>
<span class="1361048869780355583" onmouseenter="enter('1361048869780355583');" onmouseout="out('1361048869780355583');" style="">1437                                 added = loadFolder(db, values, partnerRes, partnerParser);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1438                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1439                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1440                     }                                                                                    </span>
<span class="148792127233014890" onmouseenter="enter('148792127233014890');" onmouseout="out('148792127233014890');" style="">1441                     if (added) {                                                                         </span>
<span class="-7037897563787549194" onmouseenter="enter('-7037897563787549194');" onmouseout="out('-7037897563787549194');" style="">1442                         long screenId = Long.parseLong(screen);                                          </span>
<span class="-5031779467583606850" onmouseenter="enter('-5031779467583606850');" onmouseout="out('-5031779467583606850');" style="">1443                         // Keep track of the set of screens which need to be added to the db.            </span>
<span class="9092533257251249394" onmouseenter="enter('9092533257251249394');" onmouseout="out('9092533257251249394');" style=""><abbr title="1444                         if ((!screenIds.contains(screenId)) &amp;&amp; (container == Favorites.CONTAINER_DESKTOP)) {">1444                         if ((!screenIds.contains(screenId)) &amp;&amp; (container == Favorites.CONTAINER_DESKTOP)🔵</abbr></span>
<span class="9120373975407210091" onmouseenter="enter('9120373975407210091');" onmouseout="out('9120373975407210091');" style="">1445                             screenIds.add(screenId);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1446                         }                                                                                </span>
<span class="5122134618962228848" onmouseenter="enter('5122134618962228848');" onmouseout="out('5122134618962228848');" style="">1447                         count++;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1448                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1449                 }                                                                                        </span>
<span class="8072590548933783276" onmouseenter="enter('8072590548933783276');" onmouseout="out('8072590548933783276');" style="">1450             } catch (XmlPullParserException e) {                                                         </span>
<span class="-8490721556765967950" onmouseenter="enter('-8490721556765967950');" onmouseout="out('-8490721556765967950');" style="">1451                 Log.w(TAG, &quot;Got exception parsing favorites.&quot;, e);                                       </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1452             } catch (IOException e) {                                                                    </span>
<span class="-8490721556765967950" onmouseenter="enter('-8490721556765967950');" onmouseout="out('-8490721556765967950');" style="">1453                 Log.w(TAG, &quot;Got exception parsing favorites.&quot;, e);                                       </span>
<span class="5702813929982664684" onmouseenter="enter('5702813929982664684');" onmouseout="out('5702813929982664684');" style="">1454             } catch (java.lang.RuntimeException e) {                                                     </span>
<span class="-8490721556765967950" onmouseenter="enter('-8490721556765967950');" onmouseout="out('-8490721556765967950');" style="">1455                 Log.w(TAG, &quot;Got exception parsing favorites.&quot;, e);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1456             }                                                                                            </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style="">1457             return count;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1458         }                                                                                                </span>
<span  style="">1459                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1460         /**                                                                                              </span>
<span class="836981209199049033" onmouseenter="enter('836981209199049033');" onmouseout="out('836981209199049033');" style="">1461          * Parse folder items starting at {@link XmlPullParser} location. Allow recursive                </span>
<span class="8269421111426004126" onmouseenter="enter('8269421111426004126');" onmouseout="out('8269421111426004126');" style="">1462          * includes of items.                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1463          */                                                                                              </span>
<span class="9008113229157249315" onmouseenter="enter('9008113229157249315');" onmouseout="out('9008113229157249315');" style=""><abbr title="1464         private void addToFolder(SQLiteDatabase db, Resources res, XmlResourceParser parser, ArrayList&lt;Long&gt; folderItems, long folderId) throws IOException, XmlPullParserException {">1464         private void addToFolder(SQLiteDatabase db, Resources res, XmlResourceParser parser, ArrayList&lt;Lo🔵</abbr></span>
<span class="3163913122247807134" onmouseenter="enter('3163913122247807134');" onmouseout="out('3163913122247807134');" style="">1465             int type;                                                                                    </span>
<span class="-3224406969225576043" onmouseenter="enter('-3224406969225576043');" onmouseout="out('-3224406969225576043');" style="">1466             int folderDepth = parser.getDepth();                                                         </span>
<span class="-6498956433287840397" onmouseenter="enter('-6498956433287840397');" onmouseout="out('-6498956433287840397');" style=""><abbr title="1467             while (((type = parser.next()) != XmlPullParser.END_TAG) || (parser.getDepth() &gt; folderDepth)) {">1467             while (((type = parser.next()) != XmlPullParser.END_TAG) || (parser.getDepth() &gt; folderDepth)🔵</abbr></span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1468                 if (type != XmlPullParser.START_TAG) {                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1469                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470                 }                                                                                        </span>
<span class="686677976894615180" onmouseenter="enter('686677976894615180');" onmouseout="out('686677976894615180');" style="">1471                 final String tag = parser.getName();                                                     </span>
<span class="7615212261878509112" onmouseenter="enter('7615212261878509112');" onmouseout="out('7615212261878509112');" style="">1472                 final ContentValues childValues = new ContentValues();                                   </span>
<span class="4831363376490170629" onmouseenter="enter('4831363376490170629');" onmouseout="out('4831363376490170629');" style="">1473                 childValues.put(LauncherSettings.Favorites.CONTAINER, folderId);                         </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1474                 if (LOGD) {                                                                              </span>
<span class="-615495327061628051" onmouseenter="enter('-615495327061628051');" onmouseout="out('-615495327061628051');" style="">1475                     final String pkg = getAttributeValue(parser, ATTR_PACKAGE_NAME);                     </span>
<span class="-1954941607715586859" onmouseenter="enter('-1954941607715586859');" onmouseout="out('-1954941607715586859');" style="">1476                     final String uri = getAttributeValue(parser, ATTR_URI);                              </span>
<span class="998319548717743929" onmouseenter="enter('998319548717743929');" onmouseout="out('998319548717743929');" style=""><abbr title="1477                     Log.v(TAG, String.format((&quot;%&quot; + (2 * (folderDepth + 1))) + &quot;s&lt;%s \&quot;%s\&quot;&gt;&quot;, &quot;&quot;, tag, uri != null ? uri : pkg));">1477                     Log.v(TAG, String.format((&quot;%&quot; + (2 * (folderDepth + 1))) + &quot;s&lt;%s \&quot;%s\&quot;&gt;&quot;, &quot;&quot;, tag, u🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1478                 }                                                                                        </span>
<span class="-778275999240445957" onmouseenter="enter('-778275999240445957');" onmouseout="out('-778275999240445957');" style="">1479                 if (TAG_FAVORITE.equals(tag) &amp;&amp; (folderId &gt;= 0)) {                                       </span>
<span class="3781180143059799820" onmouseenter="enter('3781180143059799820');" onmouseout="out('3781180143059799820');" style="">1480                     final long id = addAppShortcut(db, childValues, parser);                             </span>
<span class="-6131649387216162152" onmouseenter="enter('-6131649387216162152');" onmouseout="out('-6131649387216162152');" style="">1481                     if (id &gt;= 0) {                                                                       </span>
<span class="-1096537071693041204" onmouseenter="enter('-1096537071693041204');" onmouseout="out('-1096537071693041204');" style="">1482                         folderItems.add(id);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1483                     }                                                                                    </span>
<span class="3090618948294314093" onmouseenter="enter('3090618948294314093');" onmouseout="out('3090618948294314093');" style="">1484                 } else if (TAG_SHORTCUT.equals(tag) &amp;&amp; (folderId &gt;= 0)) {                                </span>
<span class="237201187676118050" onmouseenter="enter('237201187676118050');" onmouseout="out('237201187676118050');" style="">1485                     final long id = addUriShortcut(db, childValues, res, parser);                        </span>
<span class="-6131649387216162152" onmouseenter="enter('-6131649387216162152');" onmouseout="out('-6131649387216162152');" style="">1486                     if (id &gt;= 0) {                                                                       </span>
<span class="-1096537071693041204" onmouseenter="enter('-1096537071693041204');" onmouseout="out('-1096537071693041204');" style="">1487                         folderItems.add(id);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488                     }                                                                                    </span>
<span class="-8307145487500918835" onmouseenter="enter('-8307145487500918835');" onmouseout="out('-8307145487500918835');" style="">1489                 } else if (TAG_INCLUDE.equals(tag) &amp;&amp; (folderId &gt;= 0)) {                                 </span>
<span class="5205334322096840205" onmouseenter="enter('5205334322096840205');" onmouseout="out('5205334322096840205');" style="">1490                     addToFolder(db, res, parser, folderItems, folderId);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1491                 } else {                                                                                 </span>
<span class="-7780626705587841890" onmouseenter="enter('-7780626705587841890');" onmouseout="out('-7780626705587841890');" style="">1492                     throw new RuntimeException(&quot;Folders can contain only shortcuts&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1494             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1495         }                                                                                                </span>
<span  style="">1496                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1497         /**                                                                                              </span>
<span class="-8056675503068640259" onmouseenter="enter('-8056675503068640259');" onmouseout="out('-8056675503068640259');" style="">1498          * Parse folder starting at current {@link XmlPullParser} location.                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1499          */                                                                                              </span>
<span class="-7525848678608333351" onmouseenter="enter('-7525848678608333351');" onmouseout="out('-7525848678608333351');" style=""><abbr title="1500         private boolean loadFolder(SQLiteDatabase db, ContentValues values, Resources res, XmlResourceParser parser) throws IOException, XmlPullParserException {">1500         private boolean loadFolder(SQLiteDatabase db, ContentValues values, Resources res, XmlResourcePar🔵</abbr></span>
<span class="6068944415246137076" onmouseenter="enter('6068944415246137076');" onmouseout="out('6068944415246137076');" style="">1501             final String title;                                                                          </span>
<span class="-292812422880448019" onmouseenter="enter('-292812422880448019');" onmouseout="out('-292812422880448019');" style="">1502             final int titleResId = getAttributeResourceValue(parser, ATTR_TITLE, 0);                     </span>
<span class="1172124852597632506" onmouseenter="enter('1172124852597632506');" onmouseout="out('1172124852597632506');" style="">1503             if (titleResId != 0) {                                                                       </span>
<span class="-4529263519280472672" onmouseenter="enter('-4529263519280472672');" onmouseout="out('-4529263519280472672');" style="">1504                 title = res.getString(titleResId);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1505             } else {                                                                                     </span>
<span class="2584661107016073001" onmouseenter="enter('2584661107016073001');" onmouseout="out('2584661107016073001');" style="">1506                 title = mContext.getResources().getString(R.string.folder_name);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1507             }                                                                                            </span>
<span class="-1277878518627790922" onmouseenter="enter('-1277878518627790922');" onmouseout="out('-1277878518627790922');" style="">1508             values.put(LauncherSettings.Favorites.TITLE, title);                                         </span>
<span class="-8989728490994499632" onmouseenter="enter('-8989728490994499632');" onmouseout="out('-8989728490994499632');" style="">1509             long folderId = addFolder(db, values);                                                       </span>
<span class="3863242801439444025" onmouseenter="enter('3863242801439444025');" onmouseout="out('3863242801439444025');" style="">1510             boolean added = folderId &gt;= 0;                                                               </span>
<span class="70925917645446442" onmouseenter="enter('70925917645446442');" onmouseout="out('70925917645446442');" style="">1511             ArrayList&lt;Long&gt; folderItems = new ArrayList&lt;Long&gt;();                                         </span>
<span class="5205334322096840205" onmouseenter="enter('5205334322096840205');" onmouseout="out('5205334322096840205');" style="">1512             addToFolder(db, res, parser, folderItems, folderId);                                         </span>
<span class="-9068618732040691287" onmouseenter="enter('-9068618732040691287');" onmouseout="out('-9068618732040691287');" style="">1513                         // We can only have folders with &gt;= 2 items, so we need to remove the            </span>
<span class="7493806660013471529" onmouseenter="enter('7493806660013471529');" onmouseout="out('7493806660013471529');" style="">1514                         // folder and clean up if less than 2 items were included, or some               </span>
<span class="-4544163504149488130" onmouseenter="enter('-4544163504149488130');" onmouseout="out('-4544163504149488130');" style="">1515                         // failed to add, and less than 2 were actually added                            </span>
<span class="675466832938806851" onmouseenter="enter('675466832938806851');" onmouseout="out('675466832938806851');" style="">1516             if ((folderItems.size() &lt; 2) &amp;&amp; (folderId &gt;= 0)) {                                           </span>
<span class="4611134147445993465" onmouseenter="enter('4611134147445993465');" onmouseout="out('4611134147445993465');" style="">1517                 // Delete the folder                                                                     </span>
<span class="-4280166743678078053" onmouseenter="enter('-4280166743678078053');" onmouseout="out('-4280166743678078053');" style="">1518                 deleteId(db, folderId);                                                                  </span>
<span class="-7639050556018902006" onmouseenter="enter('-7639050556018902006');" onmouseout="out('-7639050556018902006');" style="">1519                 // If we have a single item, promote it to where the folder                              </span>
<span class="8958956222431385245" onmouseenter="enter('8958956222431385245');" onmouseout="out('8958956222431385245');" style="">1520                 // would have been.                                                                      </span>
<span class="-557617943835263419" onmouseenter="enter('-557617943835263419');" onmouseout="out('-557617943835263419');" style="">1521                 if (folderItems.size() == 1) {                                                           </span>
<span class="7615212261878509112" onmouseenter="enter('7615212261878509112');" onmouseout="out('7615212261878509112');" style="">1522                     final ContentValues childValues = new ContentValues();                               </span>
<span class="-3563728128688510119" onmouseenter="enter('-3563728128688510119');" onmouseout="out('-3563728128688510119');" style="">1523                     copyInteger(values, childValues, LauncherSettings.Favorites.CONTAINER);              </span>
<span class="9115692663157203715" onmouseenter="enter('9115692663157203715');" onmouseout="out('9115692663157203715');" style="">1524                     copyInteger(values, childValues, LauncherSettings.Favorites.SCREEN);                 </span>
<span class="5272896392361170626" onmouseenter="enter('5272896392361170626');" onmouseout="out('5272896392361170626');" style="">1525                     copyInteger(values, childValues, LauncherSettings.Favorites.CELLX);                  </span>
<span class="3676490222384154846" onmouseenter="enter('3676490222384154846');" onmouseout="out('3676490222384154846');" style="">1526                     copyInteger(values, childValues, LauncherSettings.Favorites.CELLY);                  </span>
<span class="-5157861693853617290" onmouseenter="enter('-5157861693853617290');" onmouseout="out('-5157861693853617290');" style="">1527                     final long id = folderItems.get(0);                                                  </span>
<span class="-6410640102635203296" onmouseenter="enter('-6410640102635203296');" onmouseout="out('-6410640102635203296');" style="">1528                     db.update(TABLE_FAVORITES, childValues, (Favorites._ID + &quot;=&quot;) + id, null);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1529                 } else {                                                                                 </span>
<span class="8338453324960120992" onmouseenter="enter('8338453324960120992');" onmouseout="out('8338453324960120992');" style="">1530                     added = false;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1531                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1532             }                                                                                            </span>
<span class="-5472428940030548841" onmouseenter="enter('-5472428940030548841');" onmouseout="out('-5472428940030548841');" style="">1533             return added;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1534         }                                                                                                </span>
<span  style="">1535                                                                                                          </span>
<span class="-5994840823969871341" onmouseenter="enter('-5994840823969871341');" onmouseout="out('-5994840823969871341');" style="">1536         // A meta shortcut attempts to resolve an intent specified as a URI in the XML, if a             </span>
<span class="-1792726061654942513" onmouseenter="enter('-1792726061654942513');" onmouseout="out('-1792726061654942513');" style="">1537         // logical choice for what shortcut should be used for that intent exists, then it is            </span>
<span class="4044577505779949612" onmouseenter="enter('4044577505779949612');" onmouseout="out('4044577505779949612');" style="">1538         // added. Otherwise add nothing.                                                                 </span>
<span class="2597738130036231578" onmouseenter="enter('2597738130036231578');" onmouseout="out('2597738130036231578');" style="">1539         private long addAppShortcutByUri(SQLiteDatabase db, ContentValues values, String intentUri) {    </span>
<span class="-4423970447189602618" onmouseenter="enter('-4423970447189602618');" onmouseout="out('-4423970447189602618');" style="">1540             Intent metaIntent;                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1541             try {                                                                                        </span>
<span class="-780892654735640073" onmouseenter="enter('-780892654735640073');" onmouseout="out('-780892654735640073');" style="">1542                 metaIntent = Intent.parseUri(intentUri, 0);                                              </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1543             } catch (URISyntaxException e) {                                                             </span>
<span class="-8064100063882654504" onmouseenter="enter('-8064100063882654504');" onmouseout="out('-8064100063882654504');" style="">1544                 Log.e(TAG, &quot;Unable to add meta-favorite: &quot; + intentUri, e);                              </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1545                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546             }                                                                                            </span>
<span class="6023001759510760083" onmouseenter="enter('6023001759510760083');" onmouseout="out('6023001759510760083');" style=""><abbr title="1547             ResolveInfo resolved = mPackageManager.resolveActivity(metaIntent, PackageManager.MATCH_DEFAULT_ONLY);">1547             ResolveInfo resolved = mPackageManager.resolveActivity(metaIntent, PackageManager.MATCH_DEFAU🔵</abbr></span>
<span class="-8737753070841171093" onmouseenter="enter('-8737753070841171093');" onmouseout="out('-8737753070841171093');" style=""><abbr title="1548             final List&lt;ResolveInfo&gt; appList = mPackageManager.queryIntentActivities(metaIntent, PackageManager.MATCH_DEFAULT_ONLY);">1548             final List&lt;ResolveInfo&gt; appList = mPackageManager.queryIntentActivities(metaIntent, PackageMa🔵</abbr></span>
<span class="3807468246607352644" onmouseenter="enter('3807468246607352644');" onmouseout="out('3807468246607352644');" style="">1549             // Verify that the result is an app and not just the resolver dialog asking which            </span>
<span class="3786398014846262159" onmouseenter="enter('3786398014846262159');" onmouseout="out('3786398014846262159');" style="">1550             // app to use.                                                                               </span>
<span class="-2527999738736768738" onmouseenter="enter('-2527999738736768738');" onmouseout="out('-2527999738736768738');" style="">1551             if (wouldLaunchResolverActivity(resolved, appList)) {                                        </span>
<span class="-1508864482817632041" onmouseenter="enter('-1508864482817632041');" onmouseout="out('-1508864482817632041');" style="">1552                 // If only one of the results is a system app then choose that as the default.           </span>
<span class="7096358968319388823" onmouseenter="enter('7096358968319388823');" onmouseout="out('7096358968319388823');" style="">1553                 final ResolveInfo systemApp = getSingleSystemActivity(appList);                          </span>
<span class="3112641083889325831" onmouseenter="enter('3112641083889325831');" onmouseout="out('3112641083889325831');" style="">1554                 if (systemApp == null) {                                                                 </span>
<span class="8733485116897338114" onmouseenter="enter('8733485116897338114');" onmouseout="out('8733485116897338114');" style="">1555                     // There is no logical choice for this meta-favorite, so rather than making          </span>
<span class="-5798817995675177798" onmouseenter="enter('-5798817995675177798');" onmouseout="out('-5798817995675177798');" style="">1556                     // a bad choice just add nothing.                                                    </span>
<span class="8858396131731778802" onmouseenter="enter('8858396131731778802');" onmouseout="out('8858396131731778802');" style=""><abbr title="1557                     Log.w(TAG, &quot;No preference or single system activity found for &quot; + metaIntent.toString());">1557                     Log.w(TAG, &quot;No preference or single system activity found for &quot; + metaIntent.toString🔵</abbr></span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1558                     return -1;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1559                 }                                                                                        </span>
<span class="-2210262899281174552" onmouseenter="enter('-2210262899281174552');" onmouseout="out('-2210262899281174552');" style="">1560                 resolved = systemApp;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1561             }                                                                                            </span>
<span class="3942116430564013468" onmouseenter="enter('3942116430564013468');" onmouseout="out('3942116430564013468');" style="">1562             final ActivityInfo info = resolved.activityInfo;                                             </span>
<span class="-360088289411741304" onmouseenter="enter('-360088289411741304');" onmouseout="out('-360088289411741304');" style="">1563             final Intent intent = mPackageManager.getLaunchIntentForPackage(info.packageName);           </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">1564             if (intent == null) {                                                                        </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1565                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1566             }                                                                                            </span>
<span class="5079515441009778386" onmouseenter="enter('5079515441009778386');" onmouseout="out('5079515441009778386');" style="">1567             intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);  </span>
<span class="-4637301020367561713" onmouseenter="enter('-4637301020367561713');" onmouseout="out('-4637301020367561713');" style="">1568             return addAppShortcut(db, values, info.loadLabel(mPackageManager).toString(), intent);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1569         }                                                                                                </span>
<span  style="">1570                                                                                                          </span>
<span class="3433873162423347490" onmouseenter="enter('3433873162423347490');" onmouseout="out('3433873162423347490');" style="">1571         private ResolveInfo getSingleSystemActivity(List&lt;ResolveInfo&gt; appList) {                         </span>
<span class="4100859717391359582" onmouseenter="enter('4100859717391359582');" onmouseout="out('4100859717391359582');" style="">1572             ResolveInfo systemResolve = null;                                                            </span>
<span class="-6501614514316220785" onmouseenter="enter('-6501614514316220785');" onmouseout="out('-6501614514316220785');" style="">1573             final int N = appList.size();                                                                </span>
<span class="-7972660160186921434" onmouseenter="enter('-7972660160186921434');" onmouseout="out('-7972660160186921434');" style="">1574             for (int i = 0; i &lt; N; ++i) {                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1575                 try {                                                                                    </span>
<span class="-5269464471896728684" onmouseenter="enter('-5269464471896728684');" onmouseout="out('-5269464471896728684');" style=""><abbr title="1576                     ApplicationInfo info = mPackageManager.getApplicationInfo(appList.get(i).activityInfo.packageName, 0);">1576                     ApplicationInfo info = mPackageManager.getApplicationInfo(appList.get(i).activityInfo🔵</abbr></span>
<span class="-476381142815111019" onmouseenter="enter('-476381142815111019');" onmouseout="out('-476381142815111019');" style="">1577                     if ((info.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {                               </span>
<span class="-6460956471084206715" onmouseenter="enter('-6460956471084206715');" onmouseout="out('-6460956471084206715');" style="">1578                         if (systemResolve != null) {                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1579                             return null;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1580                         } else {                                                                         </span>
<span class="-1920150334130463709" onmouseenter="enter('-1920150334130463709');" onmouseout="out('-1920150334130463709');" style="">1581                             systemResolve = appList.get(i);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1582                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1583                     }                                                                                    </span>
<span class="1662440237380033096" onmouseenter="enter('1662440237380033096');" onmouseout="out('1662440237380033096');" style="">1584                 } catch (PackageManager e) {                                                             </span>
<span class="-265560973846634126" onmouseenter="enter('-265560973846634126');" onmouseout="out('-265560973846634126');" style="">1585                     Log.w(TAG, &quot;Unable to get info about resolve results&quot;, e);                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1586                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588             }                                                                                            </span>
<span class="-7251347768060538731" onmouseenter="enter('-7251347768060538731');" onmouseout="out('-7251347768060538731');" style="">1589             return systemResolve;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1590         }                                                                                                </span>
<span  style="">1591                                                                                                          </span>
<span class="-4222771116108434581" onmouseenter="enter('-4222771116108434581');" onmouseout="out('-4222771116108434581');" style="">1592         private boolean wouldLaunchResolverActivity(ResolveInfo resolved,                                </span>
<span class="8855822793352880756" onmouseenter="enter('8855822793352880756');" onmouseout="out('8855822793352880756');" style="">1593                 List&lt;ResolveInfo&gt; appList) {                                                             </span>
<span class="-6399418581489152967" onmouseenter="enter('-6399418581489152967');" onmouseout="out('-6399418581489152967');" style="">1594             // If the list contains the above resolved activity, then it can&#x27;t be                        </span>
<span class="4029821552264897243" onmouseenter="enter('4029821552264897243');" onmouseout="out('4029821552264897243');" style="">1595             // ResolverActivity itself.                                                                  </span>
<span class="4411552974527624379" onmouseenter="enter('4411552974527624379');" onmouseout="out('4411552974527624379');" style="">1596             for (int i = 0; i &lt; appList.size(); ++i) {                                                   </span>
<span class="-6814281994408040723" onmouseenter="enter('-6814281994408040723');" onmouseout="out('-6814281994408040723');" style="">1597                 ResolveInfo tmp = appList.get(i);                                                        </span>
<span class="-3160638667287468420" onmouseenter="enter('-3160638667287468420');" onmouseout="out('-3160638667287468420');" style="">1598                 if (tmp.activityInfo.name.equals(resolved.activityInfo.name)                             </span>
<span class="6821338150188138172" onmouseenter="enter('6821338150188138172');" onmouseout="out('6821338150188138172');" style="">1599                         &amp;&amp; tmp.activityInfo.packageName.equals(resolved.activityInfo.packageName)) {     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1600                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1601                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1602             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1603             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1604         }                                                                                                </span>
<span  style="">1605                                                                                                          </span>
<span class="5622528485582279193" onmouseenter="enter('5622528485582279193');" onmouseout="out('5622528485582279193');" style="">1606         private long addAppShortcut(SQLiteDatabase db, ContentValues values, XmlResourceParser parser) { </span>
<span class="-1797029550341626583" onmouseenter="enter('-1797029550341626583');" onmouseout="out('-1797029550341626583');" style="">1607             final String packageName = getAttributeValue(parser, ATTR_PACKAGE_NAME);                     </span>
<span class="292435478126887551" onmouseenter="enter('292435478126887551');" onmouseout="out('292435478126887551');" style="">1608             final String className = getAttributeValue(parser, ATTR_CLASS_NAME);                         </span>
<span class="-1954941607715586859" onmouseenter="enter('-1954941607715586859');" onmouseout="out('-1954941607715586859');" style="">1609             final String uri = getAttributeValue(parser, ATTR_URI);                                      </span>
<span class="-2936541950169862111" onmouseenter="enter('-2936541950169862111');" onmouseout="out('-2936541950169862111');" style="">1610             if ((!TextUtils.isEmpty(packageName)) &amp;&amp; (!TextUtils.isEmpty(className))) {                  </span>
<span class="-812929271411632064" onmouseenter="enter('-812929271411632064');" onmouseout="out('-812929271411632064');" style="">1611                 ActivityInfo info;                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1612                 try {                                                                                    </span>
<span class="3879056527391579072" onmouseenter="enter('3879056527391579072');" onmouseout="out('3879056527391579072');" style="">1613                     ComponentName cn;                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1614                     try {                                                                                </span>
<span class="-2625303589229365660" onmouseenter="enter('-2625303589229365660');" onmouseout="out('-2625303589229365660');" style="">1615                         cn = new ComponentName(packageName, className);                                  </span>
<span class="7198970208759356928" onmouseenter="enter('7198970208759356928');" onmouseout="out('7198970208759356928');" style="">1616                         info = mPackageManager.getActivityInfo(cn, 0);                                   </span>
<span class="-1413444380104578826" onmouseenter="enter('-1413444380104578826');" onmouseout="out('-1413444380104578826');" style="">1617                     } catch (PackageManager nnfe) {                                                      </span>
<span class="1396201945639102088" onmouseenter="enter('1396201945639102088');" onmouseout="out('1396201945639102088');" style=""><abbr title="1618                         String[] packages = mPackageManager.currentToCanonicalPackageNames(new String[]{ packageName });">1618                         String[] packages = mPackageManager.currentToCanonicalPackageNames(new String[]{ 🔵</abbr></span>
<span class="-5669551341563183030" onmouseenter="enter('-5669551341563183030');" onmouseout="out('-5669551341563183030');" style="">1619                         cn = new ComponentName(packages[0], className);                                  </span>
<span class="7198970208759356928" onmouseenter="enter('7198970208759356928');" onmouseout="out('7198970208759356928');" style="">1620                         info = mPackageManager.getActivityInfo(cn, 0);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1621                     }                                                                                    </span>
<span class="6144349283181420382" onmouseenter="enter('6144349283181420382');" onmouseout="out('6144349283181420382');" style="">1622                     final Intent intent = buildMainIntent();                                             </span>
<span class="1965368382885656907" onmouseenter="enter('1965368382885656907');" onmouseout="out('1965368382885656907');" style="">1623                     intent.setComponent(cn);                                                             </span>
<span class="5079515441009778386" onmouseenter="enter('5079515441009778386');" onmouseout="out('5079515441009778386');" style=""><abbr title="1624                     intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);">1624                     intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NE🔵</abbr></span>
<span class="-4637301020367561713" onmouseenter="enter('-4637301020367561713');" onmouseout="out('-4637301020367561713');" style=""><abbr title="1625                     return addAppShortcut(db, values, info.loadLabel(mPackageManager).toString(), intent);">1625                     return addAppShortcut(db, values, info.loadLabel(mPackageManager).toString(), intent)🔵</abbr></span>
<span class="1662440237380033096" onmouseenter="enter('1662440237380033096');" onmouseout="out('1662440237380033096');" style="">1626                 } catch (PackageManager e) {                                                             </span>
<span class="-6315857234908132911" onmouseenter="enter('-6315857234908132911');" onmouseout="out('-6315857234908132911');" style="">1627                     Log.w(TAG, ((&quot;Unable to add favorite: &quot; + packageName) + &quot;/&quot;) + className, e);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1628                 }                                                                                        </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1629                 return -1;                                                                               </span>
<span class="8157957067082875903" onmouseenter="enter('8157957067082875903');" onmouseout="out('8157957067082875903');" style="">1630             } else if (!TextUtils.isEmpty(uri)) {                                                        </span>
<span class="9183809099675717906" onmouseenter="enter('9183809099675717906');" onmouseout="out('9183809099675717906');" style="">1631                 // If no component specified try to find a shortcut to add from the URI.                 </span>
<span class="787045193894698076" onmouseenter="enter('787045193894698076');" onmouseout="out('787045193894698076');" style="">1632                 return addAppShortcutByUri(db, values, uri);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1633             } else {                                                                                     </span>
<span class="-8012351384438033294" onmouseenter="enter('-8012351384438033294');" onmouseout="out('-8012351384438033294');" style="">1634                 Log.e(TAG, &quot;Skipping invalid &lt;favorite&gt; with no component or uri&quot;);                      </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1635                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1636             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1637         }                                                                                                </span>
<span  style="">1638                                                                                                          </span>
<span class="-4660423659559903389" onmouseenter="enter('-4660423659559903389');" onmouseout="out('-4660423659559903389');" style=""><abbr title="1639         private long addAppShortcut(SQLiteDatabase db, ContentValues values, String title, Intent intent) {">1639         private long addAppShortcut(SQLiteDatabase db, ContentValues values, String title, Intent intent)🔵</abbr></span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">1640             long id = generateNewItemId();                                                               </span>
<span class="-3718774165038650653" onmouseenter="enter('-3718774165038650653');" onmouseout="out('-3718774165038650653');" style="">1641             values.put(Favorites.INTENT, intent.toUri(0));                                               </span>
<span class="621847407046641821" onmouseenter="enter('621847407046641821');" onmouseout="out('621847407046641821');" style="">1642             values.put(Favorites.TITLE, title);                                                          </span>
<span class="2342423886359204479" onmouseenter="enter('2342423886359204479');" onmouseout="out('2342423886359204479');" style="">1643             values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_APPLICATION);                            </span>
<span class="2615630886033492062" onmouseenter="enter('2615630886033492062');" onmouseout="out('2615630886033492062');" style="">1644             values.put(Favorites.SPANX, 1);                                                              </span>
<span class="-5449525265648364043" onmouseenter="enter('-5449525265648364043');" onmouseout="out('-5449525265648364043');" style="">1645             values.put(Favorites.SPANY, 1);                                                              </span>
<span class="2067035903685433430" onmouseenter="enter('2067035903685433430');" onmouseout="out('2067035903685433430');" style="">1646             values.put(Favorites._ID, id);                                                               </span>
<span class="-2280993933700750215" onmouseenter="enter('-2280993933700750215');" onmouseout="out('-2280993933700750215');" style="">1647             if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values) &lt; 0) {                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1648                 return -1;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1649             } else {                                                                                     </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1650                 return id;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1651             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1652         }                                                                                                </span>
<span  style="">1653                                                                                                          </span>
<span class="-8700086773804460728" onmouseenter="enter('-8700086773804460728');" onmouseout="out('-8700086773804460728');" style="">1654         private long addFolder(SQLiteDatabase db, ContentValues values) {                                </span>
<span class="-2154578791511231117" onmouseenter="enter('-2154578791511231117');" onmouseout="out('-2154578791511231117');" style="">1655             values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_FOLDER);                                 </span>
<span class="2615630886033492062" onmouseenter="enter('2615630886033492062');" onmouseout="out('2615630886033492062');" style="">1656             values.put(Favorites.SPANX, 1);                                                              </span>
<span class="-5449525265648364043" onmouseenter="enter('-5449525265648364043');" onmouseout="out('-5449525265648364043');" style="">1657             values.put(Favorites.SPANY, 1);                                                              </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">1658             long id = generateNewItemId();                                                               </span>
<span class="2067035903685433430" onmouseenter="enter('2067035903685433430');" onmouseout="out('2067035903685433430');" style="">1659             values.put(Favorites._ID, id);                                                               </span>
<span class="-8791434135793277446" onmouseenter="enter('-8791434135793277446');" onmouseout="out('-8791434135793277446');" style="">1660             if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values) &lt;= 0) {                        </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1661                 return -1;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1662             } else {                                                                                     </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1663                 return id;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1664             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1665         }                                                                                                </span>
<span  style="">1666                                                                                                          </span>
<span class="-5233040857758997197" onmouseenter="enter('-5233040857758997197');" onmouseout="out('-5233040857758997197');" style="">1667         private ComponentName getSearchWidgetProvider() {                                                </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style="">1668             SearchManager searchManager =                                                                </span>
<span class="-186007776176525963" onmouseenter="enter('-186007776176525963');" onmouseout="out('-186007776176525963');" style="">1669                     (SearchManager) mContext.getSystemService(Context.SEARCH_SERVICE);                   </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style="">1670             ComponentName searchComponent = searchManager.getGlobalSearchActivity();                     </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style="">1671             if (searchComponent == null) return null;                                                    </span>
<span class="-2463026691705518431" onmouseenter="enter('-2463026691705518431');" onmouseout="out('-2463026691705518431');" style="">1672             return getProviderInPackage(searchComponent.getPackageName());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1673         }                                                                                                </span>
<span  style="">1674                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1675         /**                                                                                              </span>
<span class="-6817641519009759490" onmouseenter="enter('-6817641519009759490');" onmouseout="out('-6817641519009759490');" style="">1676          * Gets an appwidget provider from the given package. If the package contains more than          </span>
<span class="8642686543042194127" onmouseenter="enter('8642686543042194127');" onmouseout="out('8642686543042194127');" style="">1677          * one appwidget provider, an arbitrary one is returned.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1678          */                                                                                              </span>
<span class="-8892261496520206835" onmouseenter="enter('-8892261496520206835');" onmouseout="out('-8892261496520206835');" style="">1679         private ComponentName getProviderInPackage(String packageName) {                                 </span>
<span class="5926615868676258534" onmouseenter="enter('5926615868676258534');" onmouseout="out('5926615868676258534');" style="">1680             AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);                  </span>
<span class="-9146530298789779749" onmouseenter="enter('-9146530298789779749');" onmouseout="out('-9146530298789779749');" style="">1681             List&lt;AppWidgetProviderInfo&gt; providers = appWidgetManager.getInstalledProviders();            </span>
<span class="8240747760739264929" onmouseenter="enter('8240747760739264929');" onmouseout="out('8240747760739264929');" style="">1682             if (providers == null) return null;                                                          </span>
<span class="-4472953897741653841" onmouseenter="enter('-4472953897741653841');" onmouseout="out('-4472953897741653841');" style="">1683             final int providerCount = providers.size();                                                  </span>
<span class="-3677188574112977350" onmouseenter="enter('-3677188574112977350');" onmouseout="out('-3677188574112977350');" style="">1684             for (int i = 0; i &lt; providerCount; i++) {                                                    </span>
<span class="-7171635845718933899" onmouseenter="enter('-7171635845718933899');" onmouseout="out('-7171635845718933899');" style="">1685                 ComponentName provider = providers.get(i).provider;                                      </span>
<span class="-8539437723912583859" onmouseenter="enter('-8539437723912583859');" onmouseout="out('-8539437723912583859');" style="">1686                 if (provider != null &amp;&amp; provider.getPackageName().equals(packageName)) {                 </span>
<span class="-5713992356211538326" onmouseenter="enter('-5713992356211538326');" onmouseout="out('-5713992356211538326');" style="">1687                     return provider;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1688                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1689             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1690             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1691         }                                                                                                </span>
<span  style="">1692                                                                                                          </span>
<span class="2352033327757810923" onmouseenter="enter('2352033327757810923');" onmouseout="out('2352033327757810923');" style=""><abbr title="1693         private boolean addAppWidget(XmlResourceParser parser, int type, SQLiteDatabase db, ContentValues values) throws XmlPullParserException, IOException {">1693         private boolean addAppWidget(XmlResourceParser parser, int type, SQLiteDatabase db, ContentValues🔵</abbr></span>
<span class="-718046620766449518" onmouseenter="enter('-718046620766449518');" onmouseout="out('-718046620766449518');" style="">1694             String packageName = getAttributeValue(parser, ATTR_PACKAGE_NAME);                           </span>
<span class="4439764153802283676" onmouseenter="enter('4439764153802283676');" onmouseout="out('4439764153802283676');" style="">1695             String className = getAttributeValue(parser, ATTR_CLASS_NAME);                               </span>
<span class="1147211209303998920" onmouseenter="enter('1147211209303998920');" onmouseout="out('1147211209303998920');" style="">1696             if ((packageName == null) || (className == null)) {                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1697                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1698             }                                                                                            </span>
<span class="-560542064760217423" onmouseenter="enter('-560542064760217423');" onmouseout="out('-560542064760217423');" style="">1699             boolean hasPackage = true;                                                                   </span>
<span class="-654268133061106000" onmouseenter="enter('-654268133061106000');" onmouseout="out('-654268133061106000');" style="">1700             ComponentName cn = new ComponentName(packageName, className);                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1701             try {                                                                                        </span>
<span class="8130452402467519988" onmouseenter="enter('8130452402467519988');" onmouseout="out('8130452402467519988');" style="">1702                 mPackageManager.getReceiverInfo(cn, 0);                                                  </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">1703             } catch (java.lang.Exception e) {                                                            </span>
<span class="1396201945639102088" onmouseenter="enter('1396201945639102088');" onmouseout="out('1396201945639102088');" style=""><abbr title="1704                 String[] packages = mPackageManager.currentToCanonicalPackageNames(new String[]{ packageName });">1704                 String[] packages = mPackageManager.currentToCanonicalPackageNames(new String[]{ packageN🔵</abbr></span>
<span class="-5669551341563183030" onmouseenter="enter('-5669551341563183030');" onmouseout="out('-5669551341563183030');" style="">1705                 cn = new ComponentName(packages[0], className);                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1706                 try {                                                                                    </span>
<span class="8130452402467519988" onmouseenter="enter('8130452402467519988');" onmouseout="out('8130452402467519988');" style="">1707                     mPackageManager.getReceiverInfo(cn, 0);                                              </span>
<span class="-8650221252440727753" onmouseenter="enter('-8650221252440727753');" onmouseout="out('-8650221252440727753');" style="">1708                 } catch (java.lang.Exception e1) {                                                       </span>
<span class="-7691856903679287558" onmouseenter="enter('-7691856903679287558');" onmouseout="out('-7691856903679287558');" style="">1709                     System.out.println(&quot;Can&#x27;t find widget provider: &quot; + className);                      </span>
<span class="-7980647756745699951" onmouseenter="enter('-7980647756745699951');" onmouseout="out('-7980647756745699951');" style="">1710                     hasPackage = false;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1711                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1712             }                                                                                            </span>
<span class="409326210478719297" onmouseenter="enter('409326210478719297');" onmouseout="out('409326210478719297');" style="">1713             if (hasPackage) {                                                                            </span>
<span class="-4669201679920980010" onmouseenter="enter('-4669201679920980010');" onmouseout="out('-4669201679920980010');" style="">1714                 String spanX = getAttributeValue(parser, ATTR_SPAN_X);                                   </span>
<span class="-5569004961371581944" onmouseenter="enter('-5569004961371581944');" onmouseout="out('-5569004961371581944');" style="">1715                 String spanY = getAttributeValue(parser, ATTR_SPAN_Y);                                   </span>
<span class="-6724210500107661935" onmouseenter="enter('-6724210500107661935');" onmouseout="out('-6724210500107661935');" style="">1716                 values.put(Favorites.SPANX, spanX);                                                      </span>
<span class="5251293644299118699" onmouseenter="enter('5251293644299118699');" onmouseout="out('5251293644299118699');" style="">1717                 values.put(Favorites.SPANY, spanY);                                                      </span>
<span class="1289388088122621273" onmouseenter="enter('1289388088122621273');" onmouseout="out('1289388088122621273');" style="">1718                 // Read the extras                                                                       </span>
<span class="1776998572180860248" onmouseenter="enter('1776998572180860248');" onmouseout="out('1776998572180860248');" style="">1719                 Bundle extras = new Bundle();                                                            </span>
<span class="-5007551987214809206" onmouseenter="enter('-5007551987214809206');" onmouseout="out('-5007551987214809206');" style="">1720                 int widgetDepth = parser.getDepth();                                                     </span>
<span class="-6274584462663453953" onmouseenter="enter('-6274584462663453953');" onmouseout="out('-6274584462663453953');" style=""><abbr title="1721                 while (((type = parser.next()) != XmlPullParser.END_TAG) || (parser.getDepth() &gt; widgetDepth)) {">1721                 while (((type = parser.next()) != XmlPullParser.END_TAG) || (parser.getDepth() &gt; widgetDe🔵</abbr></span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1722                     if (type != XmlPullParser.START_TAG) {                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1723                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1724                     }                                                                                    </span>
<span class="2554175265936504377" onmouseenter="enter('2554175265936504377');" onmouseout="out('2554175265936504377');" style="">1725                     if (TAG_EXTRA.equals(parser.getName())) {                                            </span>
<span class="-9040232295281944434" onmouseenter="enter('-9040232295281944434');" onmouseout="out('-9040232295281944434');" style="">1726                         String key = getAttributeValue(parser, ATTR_KEY);                                </span>
<span class="1087049418585534522" onmouseenter="enter('1087049418585534522');" onmouseout="out('1087049418585534522');" style="">1727                         String value = getAttributeValue(parser, ATTR_VALUE);                            </span>
<span class="-552778728072397749" onmouseenter="enter('-552778728072397749');" onmouseout="out('-552778728072397749');" style="">1728                         if ((key != null) &amp;&amp; (value != null)) {                                          </span>
<span class="3617031493102045508" onmouseenter="enter('3617031493102045508');" onmouseout="out('3617031493102045508');" style="">1729                             extras.putString(key, value);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1730                         } else {                                                                         </span>
<span class="-1604814790568911229" onmouseenter="enter('-1604814790568911229');" onmouseout="out('-1604814790568911229');" style="">1731                             throw new RuntimeException(&quot;Widget extras must have a key and value&quot;);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1732                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1733                     } else {                                                                             </span>
<span class="-4167415435020508425" onmouseenter="enter('-4167415435020508425');" onmouseout="out('-4167415435020508425');" style="">1734                         throw new RuntimeException(&quot;Widgets can contain only extras&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1735                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1736                 }                                                                                        </span>
<span class="-7507688791595687187" onmouseenter="enter('-7507688791595687187');" onmouseout="out('-7507688791595687187');" style="">1737                 return addAppWidget(db, values, cn, extras);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1738             }                                                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1739             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1740         }                                                                                                </span>
<span  style="">1741                                                                                                          </span>
<span class="-7668074031992901794" onmouseenter="enter('-7668074031992901794');" onmouseout="out('-7668074031992901794');" style=""><abbr title="1742         private boolean addAppWidget(SQLiteDatabase db, ContentValues values, ComponentName cn, Bundle extras) {">1742         private boolean addAppWidget(SQLiteDatabase db, ContentValues values, ComponentName cn, Bundle ex🔵</abbr></span>
<span class="1781858051498019239" onmouseenter="enter('1781858051498019239');" onmouseout="out('1781858051498019239');" style="">1743             boolean allocatedAppWidgets = false;                                                         </span>
<span class="328319718470950320" onmouseenter="enter('328319718470950320');" onmouseout="out('328319718470950320');" style="">1744             final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1745             try {                                                                                        </span>
<span class="7176738113779216844" onmouseenter="enter('7176738113779216844');" onmouseout="out('7176738113779216844');" style="">1746                 int appWidgetId = mAppWidgetHost.allocateAppWidgetId();                                  </span>
<span class="2941545182515325414" onmouseenter="enter('2941545182515325414');" onmouseout="out('2941545182515325414');" style="">1747                 values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_APPWIDGET);                          </span>
<span class="-2217583362005241057" onmouseenter="enter('-2217583362005241057');" onmouseout="out('-2217583362005241057');" style="">1748                 values.put(Favorites.APPWIDGET_ID, appWidgetId);                                         </span>
<span class="720562493083146912" onmouseenter="enter('720562493083146912');" onmouseout="out('720562493083146912');" style="">1749                 values.put(Favorites.APPWIDGET_PROVIDER, cn.flattenToString());                          </span>
<span class="-7797208824576653991" onmouseenter="enter('-7797208824576653991');" onmouseout="out('-7797208824576653991');" style="">1750                 values.put(Favorites._ID, generateNewItemId());                                          </span>
<span class="-1295706295937517511" onmouseenter="enter('-1295706295937517511');" onmouseout="out('-1295706295937517511');" style="">1751                 dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values);                               </span>
<span class="-7439816523904895371" onmouseenter="enter('-7439816523904895371');" onmouseout="out('-7439816523904895371');" style="">1752                 allocatedAppWidgets = true;                                                              </span>
<span class="-8318890136327376190" onmouseenter="enter('-8318890136327376190');" onmouseout="out('-8318890136327376190');" style="">1753                 // TODO: need to check return value                                                      </span>
<span class="3068764521751310260" onmouseenter="enter('3068764521751310260');" onmouseout="out('3068764521751310260');" style="">1754                 appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId, cn);                              </span>
<span class="-7400703460033211758" onmouseenter="enter('-7400703460033211758');" onmouseout="out('-7400703460033211758');" style="">1755                 // Send a broadcast to configure the widget                                              </span>
<span class="2393196789701830794" onmouseenter="enter('2393196789701830794');" onmouseout="out('2393196789701830794');" style="">1756                 if ((extras != null) &amp;&amp; (!extras.isEmpty())) {                                           </span>
<span class="-3925623083558987667" onmouseenter="enter('-3925623083558987667');" onmouseout="out('-3925623083558987667');" style="">1757                     Intent intent = new Intent(ACTION_APPWIDGET_DEFAULT_WORKSPACE_CONFIGURE);            </span>
<span class="1965368382885656907" onmouseenter="enter('1965368382885656907');" onmouseout="out('1965368382885656907');" style="">1758                     intent.setComponent(cn);                                                             </span>
<span class="4121123198595596428" onmouseenter="enter('4121123198595596428');" onmouseout="out('4121123198595596428');" style="">1759                     intent.putExtras(extras);                                                            </span>
<span class="-3801864120150122877" onmouseenter="enter('-3801864120150122877');" onmouseout="out('-3801864120150122877');" style="">1760                     intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);                   </span>
<span class="15213497691013705" onmouseenter="enter('15213497691013705');" onmouseout="out('15213497691013705');" style="">1761                     mContext.sendBroadcast(intent);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1762                 }                                                                                        </span>
<span class="5700945353795125773" onmouseenter="enter('5700945353795125773');" onmouseout="out('5700945353795125773');" style="">1763             } catch (java.lang.RuntimeException ex) {                                                    </span>
<span class="7589023920505453658" onmouseenter="enter('7589023920505453658');" onmouseout="out('7589023920505453658');" style="">1764                 Log.e(TAG, &quot;Problem allocating appWidgetId&quot;, ex);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1765             }                                                                                            </span>
<span class="-7630264847974566407" onmouseenter="enter('-7630264847974566407');" onmouseout="out('-7630264847974566407');" style="">1766             return allocatedAppWidgets;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1767         }                                                                                                </span>
<span  style="">1768                                                                                                          </span>
<span class="-6504071666955225478" onmouseenter="enter('-6504071666955225478');" onmouseout="out('-6504071666955225478');" style=""><abbr title="1769         private long addUriShortcut(SQLiteDatabase db, ContentValues values, Resources res, XmlResourceParser parser) {">1769         private long addUriShortcut(SQLiteDatabase db, ContentValues values, Resources res, XmlResourcePa🔵</abbr></span>
<span class="-3466107134881523829" onmouseenter="enter('-3466107134881523829');" onmouseout="out('-3466107134881523829');" style="">1770             final int iconResId = getAttributeResourceValue(parser, ATTR_ICON, 0);                       </span>
<span class="-292812422880448019" onmouseenter="enter('-292812422880448019');" onmouseout="out('-292812422880448019');" style="">1771             final int titleResId = getAttributeResourceValue(parser, ATTR_TITLE, 0);                     </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">1772             Intent intent;                                                                               </span>
<span class="7870717952219178672" onmouseenter="enter('7870717952219178672');" onmouseout="out('7870717952219178672');" style="">1773             String uri = null;                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1774             try {                                                                                        </span>
<span class="-7650716598670279522" onmouseenter="enter('-7650716598670279522');" onmouseout="out('-7650716598670279522');" style="">1775                 uri = getAttributeValue(parser, ATTR_URI);                                               </span>
<span class="4895125029429862660" onmouseenter="enter('4895125029429862660');" onmouseout="out('4895125029429862660');" style="">1776                 intent = Intent.parseUri(uri, 0);                                                        </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1777             } catch (URISyntaxException e) {                                                             </span>
<span class="-551028723023595678" onmouseenter="enter('-551028723023595678');" onmouseout="out('-551028723023595678');" style="">1778                 Log.w(TAG, &quot;Shortcut has malformed uri: &quot; + uri);                                        </span>
<span class="1904760776880373876" onmouseenter="enter('1904760776880373876');" onmouseout="out('1904760776880373876');" style="">1779                 return -1;// Oh well                                                                     </span>
<span  style="">1780                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1781             }                                                                                            </span>
<span class="-7798198867341096758" onmouseenter="enter('-7798198867341096758');" onmouseout="out('-7798198867341096758');" style="">1782             if ((iconResId == 0) || (titleResId == 0)) {                                                 </span>
<span class="1657418688720717724" onmouseenter="enter('1657418688720717724');" onmouseout="out('1657418688720717724');" style="">1783                 Log.w(TAG, &quot;Shortcut is missing title or icon resource ID&quot;);                             </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1784                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1785             }                                                                                            </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">1786             long id = generateNewItemId();                                                               </span>
<span class="-2757970933426051337" onmouseenter="enter('-2757970933426051337');" onmouseout="out('-2757970933426051337');" style="">1787             intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);                                              </span>
<span class="-3718774165038650653" onmouseenter="enter('-3718774165038650653');" onmouseout="out('-3718774165038650653');" style="">1788             values.put(Favorites.INTENT, intent.toUri(0));                                               </span>
<span class="6819813114831017583" onmouseenter="enter('6819813114831017583');" onmouseout="out('6819813114831017583');" style="">1789             values.put(Favorites.TITLE, res.getString(titleResId));                                      </span>
<span class="8456179705287717594" onmouseenter="enter('8456179705287717594');" onmouseout="out('8456179705287717594');" style="">1790             values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_SHORTCUT);                               </span>
<span class="2615630886033492062" onmouseenter="enter('2615630886033492062');" onmouseout="out('2615630886033492062');" style="">1791             values.put(Favorites.SPANX, 1);                                                              </span>
<span class="-5449525265648364043" onmouseenter="enter('-5449525265648364043');" onmouseout="out('-5449525265648364043');" style="">1792             values.put(Favorites.SPANY, 1);                                                              </span>
<span class="-4755043480149851001" onmouseenter="enter('-4755043480149851001');" onmouseout="out('-4755043480149851001');" style="">1793             values.put(Favorites.ICON_TYPE, Favorites.ICON_TYPE_RESOURCE);                               </span>
<span class="1859204163826884777" onmouseenter="enter('1859204163826884777');" onmouseout="out('1859204163826884777');" style="">1794             values.put(Favorites.ICON_PACKAGE, res.getResourcePackageName(iconResId));                   </span>
<span class="7390195787308769234" onmouseenter="enter('7390195787308769234');" onmouseout="out('7390195787308769234');" style="">1795             values.put(Favorites.ICON_RESOURCE, res.getResourceName(iconResId));                         </span>
<span class="2067035903685433430" onmouseenter="enter('2067035903685433430');" onmouseout="out('2067035903685433430');" style="">1796             values.put(Favorites._ID, id);                                                               </span>
<span class="-2280993933700750215" onmouseenter="enter('-2280993933700750215');" onmouseout="out('-2280993933700750215');" style="">1797             if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values) &lt; 0) {                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1798                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1799             }                                                                                            </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1800             return id;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1801         }                                                                                                </span>
<span  style="">1802                                                                                                          </span>
<span class="725730754436415996" onmouseenter="enter('725730754436415996');" onmouseout="out('725730754436415996');" style="">1803         private void migrateLauncher2Shortcuts(SQLiteDatabase db, Uri uri) {                             </span>
<span class="-1113390730047466962" onmouseenter="enter('-1113390730047466962');" onmouseout="out('-1113390730047466962');" style="">1804             final ContentResolver resolver = mContext.getContentResolver();                              </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="">1805             Cursor c = null;                                                                             </span>
<span class="-7835997453776942924" onmouseenter="enter('-7835997453776942924');" onmouseout="out('-7835997453776942924');" style="">1806             int count = 0;                                                                               </span>
<span class="-3336839334240068207" onmouseenter="enter('-3336839334240068207');" onmouseout="out('-3336839334240068207');" style="">1807             int curScreen = 0;                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1808             try {                                                                                        </span>
<span class="-9000085593458662527" onmouseenter="enter('-9000085593458662527');" onmouseout="out('-9000085593458662527');" style="">1809                 c = resolver.query(uri, null, null, null, &quot;title ASC&quot;);                                  </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">1810             } catch (java.lang.Exception e) {                                                            </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1811                 // Ignore                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1812             }                                                                                            </span>
<span class="-8364191572061005786" onmouseenter="enter('-8364191572061005786');" onmouseout="out('-8364191572061005786');" style="">1813             // We already have a favorites database in the old provider                                  </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1814             if (c != null) {                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1815                 try {                                                                                    </span>
<span class="-7145577210477193493" onmouseenter="enter('-7145577210477193493');" onmouseout="out('-7145577210477193493');" style="">1816                     if (c.getCount() &gt; 0) {                                                              </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">1817                         final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);     </span>
<span class="-4033402896828551783" onmouseenter="enter('-4033402896828551783');" onmouseout="out('-4033402896828551783');" style=""><abbr title="1818                         final int intentIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.INTENT);">1818                         final int intentIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.INTENT🔵</abbr></span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style="">1819                         final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);</span>
<span class="2476259323357554799" onmouseenter="enter('2476259323357554799');" onmouseout="out('2476259323357554799');" style=""><abbr title="1820                         final int iconTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYPE);">1820                         final int iconTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON🔵</abbr></span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">1821                         final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);  </span>
<span class="-8681284292868403609" onmouseenter="enter('-8681284292868403609');" onmouseout="out('-8681284292868403609');" style=""><abbr title="1822                         final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE);">1822                         final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.I🔵</abbr></span>
<span class="6748803854718242440" onmouseenter="enter('6748803854718242440');" onmouseout="out('6748803854718242440');" style=""><abbr title="1823                         final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURCE);">1823                         final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.🔵</abbr></span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""><abbr title="1824                         final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);">1824                         final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CON🔵</abbr></span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""><abbr title="1825                         final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);">1825                         final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM🔵</abbr></span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""><abbr title="1826                         final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);">1826                         final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN🔵</abbr></span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style="">1827                         final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);</span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style="">1828                         final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);</span>
<span class="2746356324732937511" onmouseenter="enter('2746356324732937511');" onmouseout="out('2746356324732937511');" style="">1829                         final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);    </span>
<span class="8214639294219269043" onmouseenter="enter('8214639294219269043');" onmouseout="out('8214639294219269043');" style=""><abbr title="1830                         final int displayModeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.DISPLAY_MODE);">1830                         final int displayModeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.D🔵</abbr></span>
<span class="3473121792891143273" onmouseenter="enter('3473121792891143273');" onmouseout="out('3473121792891143273');" style="">1831                         final int profileIndex = c.getColumnIndex(LauncherSettings.Favorites.PROFILE_ID);</span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style="">1832                         int i = 0;                                                                       </span>
<span class="3196084964022358374" onmouseenter="enter('3196084964022358374');" onmouseout="out('3196084964022358374');" style="">1833                         int curX = 0;                                                                    </span>
<span class="-8919994129307273415" onmouseenter="enter('-8919994129307273415');" onmouseout="out('-8919994129307273415');" style="">1834                         int curY = 0;                                                                    </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">1835                         final LauncherAppState app = LauncherAppState.getInstance();                     </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">1836                         final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();              </span>
<span class="-7361796623719905850" onmouseenter="enter('-7361796623719905850');" onmouseout="out('-7361796623719905850');" style="">1837                         final int width = ((int) (grid.numColumns));                                     </span>
<span class="8798181758135346279" onmouseenter="enter('8798181758135346279');" onmouseout="out('8798181758135346279');" style="">1838                         final int height = ((int) (grid.numRows));                                       </span>
<span class="-5000042138156455287" onmouseenter="enter('-5000042138156455287');" onmouseout="out('-5000042138156455287');" style="">1839                         final int hotseatWidth = ((int) (grid.numHotseatIcons));                         </span>
<span class="-4392487977825691924" onmouseenter="enter('-4392487977825691924');" onmouseout="out('-4392487977825691924');" style="">1840                         final HashSet&lt;String&gt; seenIntents = new HashSet&lt;String&gt;(c.getCount());           </span>
<span class="-1775881703038933069" onmouseenter="enter('-1775881703038933069');" onmouseout="out('-1775881703038933069');" style="">1841                         final ArrayList&lt;ContentValues&gt; shortcuts = new ArrayList&lt;ContentValues&gt;();       </span>
<span class="-5282219486258454454" onmouseenter="enter('-5282219486258454454');" onmouseout="out('-5282219486258454454');" style="">1842                         final ArrayList&lt;ContentValues&gt; folders = new ArrayList&lt;ContentValues&gt;();         </span>
<span class="7748304206224281059" onmouseenter="enter('7748304206224281059');" onmouseout="out('7748304206224281059');" style="">1843                         final SparseArray&lt;ContentValues&gt; hotseat = new SparseArray&lt;ContentValues&gt;();     </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style="">1844                         while (c.moveToNext()) {                                                         </span>
<span class="-2982692859195643614" onmouseenter="enter('-2982692859195643614');" onmouseout="out('-2982692859195643614');" style="">1845                             final int itemType = c.getInt(itemTypeIndex);                                </span>
<span class="3006300675866788948" onmouseenter="enter('3006300675866788948');" onmouseout="out('3006300675866788948');" style=""><abbr title="1846                             if (((itemType != Favorites.ITEM_TYPE_APPLICATION) &amp;&amp; (itemType != Favorites.ITEM_TYPE_SHORTCUT)) &amp;&amp; (itemType != Favorites.ITEM_TYPE_FOLDER)) {">1846                             if (((itemType != Favorites.ITEM_TYPE_APPLICATION) &amp;&amp; (itemType != Favorites.🔵</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1847                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1848                             }                                                                            </span>
<span class="6546086433507254477" onmouseenter="enter('6546086433507254477');" onmouseout="out('6546086433507254477');" style="">1849                             final int cellX = c.getInt(cellXIndex);                                      </span>
<span class="-5848765603231722693" onmouseenter="enter('-5848765603231722693');" onmouseout="out('-5848765603231722693');" style="">1850                             final int cellY = c.getInt(cellYIndex);                                      </span>
<span class="5057139106655212954" onmouseenter="enter('5057139106655212954');" onmouseout="out('5057139106655212954');" style="">1851                             final int screen = c.getInt(screenIndex);                                    </span>
<span class="-6682259384170717005" onmouseenter="enter('-6682259384170717005');" onmouseout="out('-6682259384170717005');" style="">1852                             int container = c.getInt(containerIndex);                                    </span>
<span class="-3517014905521526588" onmouseenter="enter('-3517014905521526588');" onmouseout="out('-3517014905521526588');" style="">1853                             final String intentStr = c.getString(intentIndex);                           </span>
<span class="8272328117098122260" onmouseenter="enter('8272328117098122260');" onmouseout="out('8272328117098122260');" style="">1854                             UserManagerCompat userManager = UserManagerCompat.getInstance(mContext);     </span>
<span class="7210862209025052290" onmouseenter="enter('7210862209025052290');" onmouseout="out('7210862209025052290');" style="">1855                             UserHandleCompat userHandle;                                                 </span>
<span class="-704754462563124721" onmouseenter="enter('-704754462563124721');" onmouseout="out('-704754462563124721');" style="">1856                             final long userSerialNumber;                                                 </span>
<span class="3063561805772627219" onmouseenter="enter('3063561805772627219');" onmouseout="out('3063561805772627219');" style="">1857                             if ((profileIndex != (-1)) &amp;&amp; (!c.isNull(profileIndex))) {                   </span>
<span class="3377600326593357797" onmouseenter="enter('3377600326593357797');" onmouseout="out('3377600326593357797');" style="">1858                                 userSerialNumber = c.getInt(profileIndex);                               </span>
<span class="-5580723935665666817" onmouseenter="enter('-5580723935665666817');" onmouseout="out('-5580723935665666817');" style="">1859                                 userHandle = userManager.getUserForSerialNumber(userSerialNumber);       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1860                             } else {                                                                     </span>
<span class="4088992161441330589" onmouseenter="enter('4088992161441330589');" onmouseout="out('4088992161441330589');" style="">1861                                 // Default to the serial number of this user, for older                  </span>
<span class="3257211239898691615" onmouseenter="enter('3257211239898691615');" onmouseout="out('3257211239898691615');" style="">1862                                 // shortcuts.                                                            </span>
<span class="153827185233038497" onmouseenter="enter('153827185233038497');" onmouseout="out('153827185233038497');" style="">1863                                 userHandle = UserHandleCompat.myUserHandle();                            </span>
<span class="-7992210937529459410" onmouseenter="enter('-7992210937529459410');" onmouseout="out('-7992210937529459410');" style="">1864                                 userSerialNumber = userManager.getSerialNumberForUser(userHandle);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1865                             }                                                                            </span>
<span class="-1373568173119705854" onmouseenter="enter('-1373568173119705854');" onmouseout="out('-1373568173119705854');" style=""><abbr title="1866                             Launcher.addDumpLog(TAG, ((((((((((&quot;migrating \&quot;&quot; + c.getString(titleIndex)) + &quot;\&quot; (&quot;) + cellX) + &quot;,&quot;) + cellY) + &quot;@&quot;) + LauncherSettings.Favorites.containerToString(container)) + &quot;/&quot;) + screen) + &quot;): &quot;) + intentStr, true);">1866                             Launcher.addDumpLog(TAG, ((((((((((&quot;migrating \&quot;&quot; + c.getString(titleIndex)) 🔵</abbr></span>
<span class="-1936160447019772377" onmouseenter="enter('-1936160447019772377');" onmouseout="out('-1936160447019772377');" style="">1867                             if (itemType != Favorites.ITEM_TYPE_FOLDER) {                                </span>
<span class="-3217378244605518341" onmouseenter="enter('-3217378244605518341');" onmouseout="out('-3217378244605518341');" style="">1868                                 final Intent intent;                                                     </span>
<span class="-6604091625193940309" onmouseenter="enter('-6604091625193940309');" onmouseout="out('-6604091625193940309');" style="">1869                                 final ComponentName cn;                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1870                                 try {                                                                    </span>
<span class="-5300012287142621419" onmouseenter="enter('-5300012287142621419');" onmouseout="out('-5300012287142621419');" style="">1871                                     intent = Intent.parseUri(intentStr, 0);                              </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1872                                 } catch (URISyntaxException e) {                                         </span>
<span class="4944972948248133238" onmouseenter="enter('4944972948248133238');" onmouseout="out('4944972948248133238');" style="">1873                                     // bogus intent?                                                     </span>
<span class="-4236065237842537277" onmouseenter="enter('-4236065237842537277');" onmouseout="out('-4236065237842537277');" style="">1874                                     Launcher.addDumpLog(TAG, &quot;skipping invalid intent uri&quot;, true);       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1875                                     continue;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1876                                 }                                                                        </span>
<span class="6421562153709548736" onmouseenter="enter('6421562153709548736');" onmouseout="out('6421562153709548736');" style="">1877                                 cn = intent.getComponent();                                              </span>
<span class="1165574592669081424" onmouseenter="enter('1165574592669081424');" onmouseout="out('1165574592669081424');" style="">1878                                 if (TextUtils.isEmpty(intentStr)) {                                      </span>
<span class="1109263052506568546" onmouseenter="enter('1109263052506568546');" onmouseout="out('1109263052506568546');" style="">1879                                     // no intent? no icon                                                </span>
<span class="-2999961336534157526" onmouseenter="enter('-2999961336534157526');" onmouseout="out('-2999961336534157526');" style="">1880                                     Launcher.addDumpLog(TAG, &quot;skipping empty intent&quot;, true);             </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1881                                     continue;                                                            </span>
<span class="-3963577326905927850" onmouseenter="enter('-3963577326905927850');" onmouseout="out('-3963577326905927850');" style=""><abbr title="1882                                 } else if ((cn != null) &amp;&amp; (!LauncherModel.isValidPackageActivity(mContext, cn, userHandle))) {">1882                                 } else if ((cn != null) &amp;&amp; (!LauncherModel.isValidPackageActivity(mContex🔵</abbr></span>
<span class="-8462735888325815955" onmouseenter="enter('-8462735888325815955');" onmouseout="out('-8462735888325815955');" style="">1883                                     // component no longer exists.                                       </span>
<span class="6567339595520973282" onmouseenter="enter('6567339595520973282');" onmouseout="out('6567339595520973282');" style=""><abbr title="1884                                     Launcher.addDumpLog(TAG, &quot;skipping item whose component &quot; + &quot;no longer exists.&quot;, true);">1884                                     Launcher.addDumpLog(TAG, &quot;skipping item whose component &quot; + &quot;no longe🔵</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1885                                     continue;                                                            </span>
<span class="-743454502287457173" onmouseenter="enter('-743454502287457173');" onmouseout="out('-743454502287457173');" style="">1886                                 } else if (container == Favorites.CONTAINER_DESKTOP) {                   </span>
<span class="-6651088913311152009" onmouseenter="enter('-6651088913311152009');" onmouseout="out('-6651088913311152009');" style="">1887                                     // Dedupe icons directly on the workspace                            </span>
<span class="-7857209544272892433" onmouseenter="enter('-7857209544272892433');" onmouseout="out('-7857209544272892433');" style="">1888                                     // Canonicalize                                                      </span>
<span class="-8986671765649789370" onmouseenter="enter('-8986671765649789370');" onmouseout="out('-8986671765649789370');" style="">1889                                     // the Play Store sets the package parameter, but Launcher           </span>
<span class="6790983218134031366" onmouseenter="enter('6790983218134031366');" onmouseout="out('6790983218134031366');" style="">1890                                     // does not, so we clear that out to keep them the same              </span>
<span class="-3363694106044374937" onmouseenter="enter('-3363694106044374937');" onmouseout="out('-3363694106044374937');" style="">1891                                     intent.setPackage(null);                                             </span>
<span class="-947990318544641084" onmouseenter="enter('-947990318544641084');" onmouseout="out('-947990318544641084');" style="">1892                                     final String key = intent.toUri(0);                                  </span>
<span class="7480204102005082432" onmouseenter="enter('7480204102005082432');" onmouseout="out('7480204102005082432');" style="">1893                                     if (seenIntents.contains(key)) {                                     </span>
<span class="2006049222885589498" onmouseenter="enter('2006049222885589498');" onmouseout="out('2006049222885589498');" style="">1894                                         Launcher.addDumpLog(TAG, &quot;skipping duplicate&quot;, true);            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1895                                         continue;                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1896                                     } else {                                                             </span>
<span class="4653019047206831387" onmouseenter="enter('4653019047206831387');" onmouseout="out('4653019047206831387');" style="">1897                                         seenIntents.add(key);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1898                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1899                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1900                             }                                                                            </span>
<span class="-3805379390248188389" onmouseenter="enter('-3805379390248188389');" onmouseout="out('-3805379390248188389');" style="">1901                             ContentValues values = new ContentValues(c.getColumnCount());                </span>
<span class="2787548740347733717" onmouseenter="enter('2787548740347733717');" onmouseout="out('2787548740347733717');" style="">1902                             values.put(LauncherSettings.Favorites._ID, c.getInt(idIndex));               </span>
<span class="4552396250235420866" onmouseenter="enter('4552396250235420866');" onmouseout="out('4552396250235420866');" style="">1903                             values.put(LauncherSettings.Favorites.INTENT, intentStr);                    </span>
<span class="3080545696092648727" onmouseenter="enter('3080545696092648727');" onmouseout="out('3080545696092648727');" style="">1904                             values.put(LauncherSettings.Favorites.TITLE, c.getString(titleIndex));       </span>
<span class="1653532357893974847" onmouseenter="enter('1653532357893974847');" onmouseout="out('1653532357893974847');" style="">1905                             values.put(LauncherSettings.Favorites.ICON_TYPE, c.getInt(iconTypeIndex));   </span>
<span class="3857475807367449049" onmouseenter="enter('3857475807367449049');" onmouseout="out('3857475807367449049');" style="">1906                             values.put(LauncherSettings.Favorites.ICON, c.getBlob(iconIndex));           </span>
<span class="2521879942012579785" onmouseenter="enter('2521879942012579785');" onmouseout="out('2521879942012579785');" style=""><abbr title="1907                             values.put(LauncherSettings.Favorites.ICON_PACKAGE, c.getString(iconPackageIndex));">1907                             values.put(LauncherSettings.Favorites.ICON_PACKAGE, c.getString(iconPackageIn🔵</abbr></span>
<span class="3969193111666484842" onmouseenter="enter('3969193111666484842');" onmouseout="out('3969193111666484842');" style=""><abbr title="1908                             values.put(LauncherSettings.Favorites.ICON_RESOURCE, c.getString(iconResourceIndex));">1908                             values.put(LauncherSettings.Favorites.ICON_RESOURCE, c.getString(iconResource🔵</abbr></span>
<span class="5180659022499168410" onmouseenter="enter('5180659022499168410');" onmouseout="out('5180659022499168410');" style="">1909                             values.put(LauncherSettings.Favorites.ITEM_TYPE, itemType);                  </span>
<span class="2567875359902744917" onmouseenter="enter('2567875359902744917');" onmouseout="out('2567875359902744917');" style="">1910                             values.put(LauncherSettings.Favorites.APPWIDGET_ID, -1);                     </span>
<span class="-3897523412202294315" onmouseenter="enter('-3897523412202294315');" onmouseout="out('-3897523412202294315');" style="">1911                             values.put(LauncherSettings.Favorites.URI, c.getString(uriIndex));           </span>
<span class="2498865833812696947" onmouseenter="enter('2498865833812696947');" onmouseout="out('2498865833812696947');" style=""><abbr title="1912                             values.put(LauncherSettings.Favorites.DISPLAY_MODE, c.getInt(displayModeIndex));">1912                             values.put(LauncherSettings.Favorites.DISPLAY_MODE, c.getInt(displayModeIndex🔵</abbr></span>
<span class="-1880957120536425376" onmouseenter="enter('-1880957120536425376');" onmouseout="out('-1880957120536425376');" style="">1913                             values.put(LauncherSettings.Favorites.PROFILE_ID, userSerialNumber);         </span>
<span class="-6634543704473224275" onmouseenter="enter('-6634543704473224275');" onmouseout="out('-6634543704473224275');" style="">1914                             if (container == Favorites.CONTAINER_HOTSEAT) {                              </span>
<span class="2845166931909672251" onmouseenter="enter('2845166931909672251');" onmouseout="out('2845166931909672251');" style="">1915                                 hotseat.put(screen, values);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1916                             }                                                                            </span>
<span class="3016812583011902862" onmouseenter="enter('3016812583011902862');" onmouseout="out('3016812583011902862');" style="">1917                             if (container != Favorites.CONTAINER_DESKTOP) {                              </span>
<span class="3724214252155726452" onmouseenter="enter('3724214252155726452');" onmouseout="out('3724214252155726452');" style="">1918                                 // In a folder or in the hotseat, preserve position                      </span>
<span class="4993135311254983149" onmouseenter="enter('4993135311254983149');" onmouseout="out('4993135311254983149');" style="">1919                                 values.put(LauncherSettings.Favorites.SCREEN, screen);                   </span>
<span class="-7735658353589578952" onmouseenter="enter('-7735658353589578952');" onmouseout="out('-7735658353589578952');" style="">1920                                 values.put(LauncherSettings.Favorites.CELLX, cellX);                     </span>
<span class="-6596875348392322090" onmouseenter="enter('-6596875348392322090');" onmouseout="out('-6596875348392322090');" style="">1921                                 values.put(LauncherSettings.Favorites.CELLY, cellY);                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1922                             } else {                                                                     </span>
<span class="-6079732280628496127" onmouseenter="enter('-6079732280628496127');" onmouseout="out('-6079732280628496127');" style="">1923                                 // For items contained directly on one of the workspace screen,          </span>
<span class="-850513443108501253" onmouseenter="enter('-850513443108501253');" onmouseout="out('-850513443108501253');" style="">1924                                 // we&#x27;ll determine their location (screen, x, y) in a second pass.       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1925                             }                                                                            </span>
<span class="7684212050113439789" onmouseenter="enter('7684212050113439789');" onmouseout="out('7684212050113439789');" style="">1926                             values.put(LauncherSettings.Favorites.CONTAINER, container);                 </span>
<span class="-1936160447019772377" onmouseenter="enter('-1936160447019772377');" onmouseout="out('-1936160447019772377');" style="">1927                             if (itemType != Favorites.ITEM_TYPE_FOLDER) {                                </span>
<span class="-7897547558000712151" onmouseenter="enter('-7897547558000712151');" onmouseout="out('-7897547558000712151');" style="">1928                                 shortcuts.add(values);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1929                             } else {                                                                     </span>
<span class="5214044302935278086" onmouseenter="enter('5214044302935278086');" onmouseout="out('5214044302935278086');" style="">1930                                 folders.add(values);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1931                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1932                         }                                                                                </span>
<span class="3792333482677793462" onmouseenter="enter('3792333482677793462');" onmouseout="out('3792333482677793462');" style="">1933                         // Now that we have all the hotseat icons, let&#x27;s go through them left-right      </span>
<span class="6853065735140319510" onmouseenter="enter('6853065735140319510');" onmouseout="out('6853065735140319510');" style="">1934                         // and assign valid locations for them in the new hotseat                        </span>
<span class="-382900916992065291" onmouseenter="enter('-382900916992065291');" onmouseout="out('-382900916992065291');" style="">1935                         final int N = hotseat.size();                                                    </span>
<span class="2905052741222864063" onmouseenter="enter('2905052741222864063');" onmouseout="out('2905052741222864063');" style="">1936                         for (int idx = 0; idx &lt; N; idx++) {                                              </span>
<span class="-7027280347801461154" onmouseenter="enter('-7027280347801461154');" onmouseout="out('-7027280347801461154');" style="">1937                             int hotseatX = hotseat.keyAt(idx);                                           </span>
<span class="7267222979225491944" onmouseenter="enter('7267222979225491944');" onmouseout="out('7267222979225491944');" style="">1938                             ContentValues values = hotseat.valueAt(idx);                                 </span>
<span class="-3018245694205955067" onmouseenter="enter('-3018245694205955067');" onmouseout="out('-3018245694205955067');" style="">1939                             if (hotseatX == grid.hotseatAllAppsRank) {                                   </span>
<span class="-8495735509078642350" onmouseenter="enter('-8495735509078642350');" onmouseout="out('-8495735509078642350');" style="">1940                                 // let&#x27;s drop this in the next available hole in the hotseat             </span>
<span class="-1385976926703475945" onmouseenter="enter('-1385976926703475945');" onmouseout="out('-1385976926703475945');" style="">1941                                 while ((++hotseatX) &lt; hotseatWidth) {                                    </span>
<span class="-5595819560409222327" onmouseenter="enter('-5595819560409222327');" onmouseout="out('-5595819560409222327');" style="">1942                                     if (hotseat.get(hotseatX) == null) {                                 </span>
<span class="2131484666649578366" onmouseenter="enter('2131484666649578366');" onmouseout="out('2131484666649578366');" style="">1943                                         // found a spot! move it here                                    </span>
<span class="-5685753246232584590" onmouseenter="enter('-5685753246232584590');" onmouseout="out('-5685753246232584590');" style="">1944                                         values.put(LauncherSettings.Favorites.SCREEN, hotseatX);         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1945                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1946                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1947                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1948                             }                                                                            </span>
<span class="4361559665402156368" onmouseenter="enter('4361559665402156368');" onmouseout="out('4361559665402156368');" style="">1949                             if (hotseatX &gt;= hotseatWidth) {                                              </span>
<span class="198406244599777154" onmouseenter="enter('198406244599777154');" onmouseout="out('198406244599777154');" style="">1950                                 // no room for you in the hotseat? it&#x27;s off to the desktop with you      </span>
<span class="-856675002814548144" onmouseenter="enter('-856675002814548144');" onmouseout="out('-856675002814548144');" style=""><abbr title="1951                                 values.put(LauncherSettings.Favorites.CONTAINER, Favorites.CONTAINER_DESKTOP);">1951                                 values.put(LauncherSettings.Favorites.CONTAINER, Favorites.CONTAINER_DESK🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1952                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1953                         }                                                                                </span>
<span class="4538029778921500049" onmouseenter="enter('4538029778921500049');" onmouseout="out('4538029778921500049');" style="">1954                         final ArrayList&lt;ContentValues&gt; allItems = new ArrayList&lt;ContentValues&gt;();        </span>
<span class="-4972040190483698817" onmouseenter="enter('-4972040190483698817');" onmouseout="out('-4972040190483698817');" style="">1955                         // Folders first                                                                 </span>
<span class="1607706518732535744" onmouseenter="enter('1607706518732535744');" onmouseout="out('1607706518732535744');" style="">1956                         allItems.addAll(folders);                                                        </span>
<span class="2106236708914116763" onmouseenter="enter('2106236708914116763');" onmouseout="out('2106236708914116763');" style="">1957                         // Then shortcuts                                                                </span>
<span class="-1250372864837547145" onmouseenter="enter('-1250372864837547145');" onmouseout="out('-1250372864837547145');" style="">1958                         allItems.addAll(shortcuts);                                                      </span>
<span class="-2195882050879177813" onmouseenter="enter('-2195882050879177813');" onmouseout="out('-2195882050879177813');" style="">1959                         // Layout all the folders                                                        </span>
<span class="-7462706097171522633" onmouseenter="enter('-7462706097171522633');" onmouseout="out('-7462706097171522633');" style="">1960                         for (ContentValues values : allItems) {                                          </span>
<span class="-3578029139651841899" onmouseenter="enter('-3578029139651841899');" onmouseout="out('-3578029139651841899');" style=""><abbr title="1961                             if (values.getAsInteger(LauncherSettings.Favorites.CONTAINER) != Favorites.CONTAINER_DESKTOP) {">1961                             if (values.getAsInteger(LauncherSettings.Favorites.CONTAINER) != Favorites.CO🔵</abbr></span>
<span class="4544740026899945117" onmouseenter="enter('4544740026899945117');" onmouseout="out('4544740026899945117');" style="">1962                                 // Hotseat items and folder items have already had their                 </span>
<span class="9061827072000509027" onmouseenter="enter('9061827072000509027');" onmouseout="out('9061827072000509027');" style="">1963                                 // location information set. Nothing to be done here.                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1964                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1965                             }                                                                            </span>
<span class="851641135220662264" onmouseenter="enter('851641135220662264');" onmouseout="out('851641135220662264');" style="">1966                             values.put(LauncherSettings.Favorites.SCREEN, curScreen);                    </span>
<span class="-1049962748703223150" onmouseenter="enter('-1049962748703223150');" onmouseout="out('-1049962748703223150');" style="">1967                             values.put(LauncherSettings.Favorites.CELLX, curX);                          </span>
<span class="-5258025824110848668" onmouseenter="enter('-5258025824110848668');" onmouseout="out('-5258025824110848668');" style="">1968                             values.put(LauncherSettings.Favorites.CELLY, curY);                          </span>
<span class="1910082031532915038" onmouseenter="enter('1910082031532915038');" onmouseout="out('1910082031532915038');" style="">1969                             curX = (curX + 1) % width;                                                   </span>
<span class="-7155276018455302787" onmouseenter="enter('-7155276018455302787');" onmouseout="out('-7155276018455302787');" style="">1970                             if (curX == 0) {                                                             </span>
<span class="2755910041999045229" onmouseenter="enter('2755910041999045229');" onmouseout="out('2755910041999045229');" style="">1971                                 curY = curY + 1;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1972                             }                                                                            </span>
<span class="-4531638622721531414" onmouseenter="enter('-4531638622721531414');" onmouseout="out('-4531638622721531414');" style="">1973                             // Leave the last row of icons blank on every screen                         </span>
<span class="4670929140689390604" onmouseenter="enter('4670929140689390604');" onmouseout="out('4670929140689390604');" style="">1974                             if (curY == (height - 1)) {                                                  </span>
<span class="-8465301092941690733" onmouseenter="enter('-8465301092941690733');" onmouseout="out('-8465301092941690733');" style="">1975                                 curScreen = ((int) (generateNewScreenId()));                             </span>
<span class="4679043716901678926" onmouseenter="enter('4679043716901678926');" onmouseout="out('4679043716901678926');" style="">1976                                 curY = 0;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1977                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1978                         }                                                                                </span>
<span class="1853917526349173349" onmouseenter="enter('1853917526349173349');" onmouseout="out('1853917526349173349');" style="">1979                         if (allItems.size() &gt; 0) {                                                       </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">1980                             db.beginTransaction();                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1981                             try {                                                                        </span>
<span class="4211030772871371422" onmouseenter="enter('4211030772871371422');" onmouseout="out('4211030772871371422');" style="">1982                                 for (ContentValues row : allItems) {                                     </span>
<span class="3708009971041974509" onmouseenter="enter('3708009971041974509');" onmouseout="out('3708009971041974509');" style="">1983                                     if (row == null) {                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1984                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1985                                     }                                                                    </span>
<span class="6890117452854073030" onmouseenter="enter('6890117452854073030');" onmouseout="out('6890117452854073030');" style="">1986                                     if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, row) &lt; 0) {    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1987                                         return;                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1988                                     } else {                                                             </span>
<span class="5122134618962228848" onmouseenter="enter('5122134618962228848');" onmouseout="out('5122134618962228848');" style="">1989                                         count++;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1990                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1991                                 }                                                                        </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">1992                                 db.setTransactionSuccessful();                                           </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1993                             } finally {                                                                  </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">1994                                 db.endTransaction();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1995                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1996                         }                                                                                </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">1997                         db.beginTransaction();                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1998                         try {                                                                            </span>
<span class="8890657087511726441" onmouseenter="enter('8890657087511726441');" onmouseout="out('8890657087511726441');" style="">1999                             for (i = 0; i &lt;= curScreen; i++) {                                           </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">2000                                 final ContentValues values = new ContentValues();                        </span>
<span class="-5225632710651404139" onmouseenter="enter('-5225632710651404139');" onmouseout="out('-5225632710651404139');" style="">2001                                 values.put(LauncherSettings.WorkspaceScreens._ID, i);                    </span>
<span class="8100732723950791653" onmouseenter="enter('8100732723950791653');" onmouseout="out('8100732723950791653');" style="">2002                                 values.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);            </span>
<span class="-7619796578683976012" onmouseenter="enter('-7619796578683976012');" onmouseout="out('-7619796578683976012');" style=""><abbr title="2003                                 if (dbInsertAndCheck(this, db, TABLE_WORKSPACE_SCREENS, null, values) &lt; 0) {">2003                                 if (dbInsertAndCheck(this, db, TABLE_WORKSPACE_SCREENS, null, values) &lt; 0🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2004                                     return;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2005                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2006                             }                                                                            </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">2007                             db.setTransactionSuccessful();                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2008                         } finally {                                                                      </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">2009                             db.endTransaction();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2010                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2011                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2012                 } finally {                                                                              </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2013                     c.close();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2014                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2015             }                                                                                            </span>
<span class="-76324932215961739" onmouseenter="enter('-76324932215961739');" onmouseout="out('-76324932215961739');" style=""><abbr title="2016             Launcher.addDumpLog(TAG, (((&quot;migrated &quot; + count) + &quot; icons from Launcher2 into &quot;) + (curScreen + 1)) + &quot; screens&quot;, true);">2016             Launcher.addDumpLog(TAG, (((&quot;migrated &quot; + count) + &quot; icons from Launcher2 into &quot;) + (curScree🔵</abbr></span>
<span class="3355055744209094121" onmouseenter="enter('3355055744209094121');" onmouseout="out('3355055744209094121');" style="">2017             // ensure that new screens are created to hold these icons                                   </span>
<span class="4167333916835222093" onmouseenter="enter('4167333916835222093');" onmouseout="out('4167333916835222093');" style="">2018             setFlagJustLoadedOldDb();                                                                    </span>
<span class="2071167438564206442" onmouseenter="enter('2071167438564206442');" onmouseout="out('2071167438564206442');" style="">2019             // Update max IDs; very important since we just grabbed IDs from another database            </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style="">2020             mMaxItemId = initializeMaxItemId(db);                                                        </span>
<span class="4730788985981235797" onmouseenter="enter('4730788985981235797');" onmouseout="out('4730788985981235797');" style="">2021             mMaxScreenId = initializeMaxScreenId(db);                                                    </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">2022             if (LOGD) {                                                                                  </span>
<span class="2613940956414107867" onmouseenter="enter('2613940956414107867');" onmouseout="out('2613940956414107867');" style="">2023                 Log.d(TAG, ((&quot;mMaxItemId: &quot; + mMaxItemId) + &quot; mMaxScreenId: &quot;) + mMaxScreenId);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2024             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2025         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2026     }                                                                                                    </span>
<span  style="">2027                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2028     /**                                                                                                  </span>
<span class="6228869189788510839" onmouseenter="enter('6228869189788510839');" onmouseout="out('6228869189788510839');" style="">2029      * Build a query string that will match any row where the column matches                             </span>
<span class="-1295109358340261898" onmouseenter="enter('-1295109358340261898');" onmouseout="out('-1295109358340261898');" style="">2030      * anything in the values list.                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2031      */                                                                                                  </span>
<span class="-2936324408380560269" onmouseenter="enter('-2936324408380560269');" onmouseout="out('-2936324408380560269');" style="">2032     private static String buildOrWhereString(String column, int[] values) {                              </span>
<span class="5416982361227649779" onmouseenter="enter('5416982361227649779');" onmouseout="out('5416982361227649779');" style="">2033         StringBuilder selectWhere = new StringBuilder();                                                 </span>
<span class="-4332208004382148217" onmouseenter="enter('-4332208004382148217');" onmouseout="out('-4332208004382148217');" style="">2034         for (int i = values.length - 1; i &gt;= 0; i--) {                                                   </span>
<span class="1277928779660897735" onmouseenter="enter('1277928779660897735');" onmouseout="out('1277928779660897735');" style="">2035             selectWhere.append(column).append(&quot;=&quot;).append(values[i]);                                    </span>
<span class="81359043772452968" onmouseenter="enter('81359043772452968');" onmouseout="out('81359043772452968');" style="">2036             if (i &gt; 0) {                                                                                 </span>
<span class="7640545912534679853" onmouseenter="enter('7640545912534679853');" onmouseout="out('7640545912534679853');" style="">2037                 selectWhere.append(&quot; OR &quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2038             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2039         }                                                                                                </span>
<span class="-3909123707650780307" onmouseenter="enter('-3909123707650780307');" onmouseout="out('-3909123707650780307');" style="">2040         return selectWhere.toString();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2041     }                                                                                                    </span>
<span  style="">2042                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2043     /**                                                                                                  </span>
<span class="-28944385574413319" onmouseenter="enter('-28944385574413319');" onmouseout="out('-28944385574413319');" style="">2044      * Return attribute value, attempting launcher-specific namespace first                              </span>
<span class="-539699600440534794" onmouseenter="enter('-539699600440534794');" onmouseout="out('-539699600440534794');" style="">2045      * before falling back to anonymous attribute.                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2046      */                                                                                                  </span>
<span class="-712674519579063359" onmouseenter="enter('-712674519579063359');" onmouseout="out('-712674519579063359');" style="">2047     private static String getAttributeValue(XmlResourceParser parser, String attribute) {                </span>
<span class="-5187744497551639206" onmouseenter="enter('-5187744497551639206');" onmouseout="out('-5187744497551639206');" style="">2048         String value = parser.getAttributeValue(                                                         </span>
<span class="3240651452367746246" onmouseenter="enter('3240651452367746246');" onmouseout="out('3240651452367746246');" style="">2049                 &quot;http://schemas.android.com/apk/res-auto/com.android.launcher3&quot;, attribute);             </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style="">2050         if (value == null) {                                                                             </span>
<span class="4082321249181646127" onmouseenter="enter('4082321249181646127');" onmouseout="out('4082321249181646127');" style="">2051             value = parser.getAttributeValue(null, attribute);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2052         }                                                                                                </span>
<span class="-4905322242800291335" onmouseenter="enter('-4905322242800291335');" onmouseout="out('-4905322242800291335');" style="">2053         return value;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2054     }                                                                                                    </span>
<span  style="">2055                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2056     /**                                                                                                  </span>
<span class="7776239847235917049" onmouseenter="enter('7776239847235917049');" onmouseout="out('7776239847235917049');" style="">2057      * Return attribute resource value, attempting launcher-specific namespace                           </span>
<span class="-6756177748646477702" onmouseenter="enter('-6756177748646477702');" onmouseout="out('-6756177748646477702');" style="">2058      * first before falling back to anonymous attribute.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2059      */                                                                                                  </span>
<span class="-2261393621595960012" onmouseenter="enter('-2261393621595960012');" onmouseout="out('-2261393621595960012');" style="">2060     private static int getAttributeResourceValue(XmlResourceParser parser, String attribute,             </span>
<span class="7924088353949793531" onmouseenter="enter('7924088353949793531');" onmouseout="out('7924088353949793531');" style="">2061             int defaultValue) {                                                                          </span>
<span class="-5869649596261514051" onmouseenter="enter('-5869649596261514051');" onmouseout="out('-5869649596261514051');" style="">2062         int value = parser.getAttributeResourceValue(                                                    </span>
<span class="-572076831828560497" onmouseenter="enter('-572076831828560497');" onmouseout="out('-572076831828560497');" style="">2063                 &quot;http://schemas.android.com/apk/res-auto/com.android.launcher3&quot;, attribute,              </span>
<span class="-310982111368378340" onmouseenter="enter('-310982111368378340');" onmouseout="out('-310982111368378340');" style="">2064                 defaultValue);                                                                           </span>
<span class="2024020216404545754" onmouseenter="enter('2024020216404545754');" onmouseout="out('2024020216404545754');" style="">2065         if (value == defaultValue) {                                                                     </span>
<span class="6043697783016237085" onmouseenter="enter('6043697783016237085');" onmouseout="out('6043697783016237085');" style="">2066             value = parser.getAttributeResourceValue(null, attribute, defaultValue);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2067         }                                                                                                </span>
<span class="-4905322242800291335" onmouseenter="enter('-4905322242800291335');" onmouseout="out('-4905322242800291335');" style="">2068         return value;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2069     }                                                                                                    </span>
<span  style="">2070                                                                                                          </span>
<span class="626008248496619562" onmouseenter="enter('626008248496619562');" onmouseout="out('626008248496619562');" style="">2071     private static void copyInteger(ContentValues from, ContentValues to, String key) {                  </span>
<span class="-3424296615037173139" onmouseenter="enter('-3424296615037173139');" onmouseout="out('-3424296615037173139');" style="">2072         to.put(key, from.getAsInteger(key));                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2073     }                                                                                                    </span>
<span  style="">2074                                                                                                          </span>
<span class="8465274381710394045" onmouseenter="enter('8465274381710394045');" onmouseout="out('8465274381710394045');" style="">2075     static class SqlArguments {                                                                          </span>
<span class="8122936482838815352" onmouseenter="enter('8122936482838815352');" onmouseout="out('8122936482838815352');" style="">2076         public final String table;                                                                       </span>
<span  style="">2077                                                                                                          </span>
<span class="5442590397567481633" onmouseenter="enter('5442590397567481633');" onmouseout="out('5442590397567481633');" style="">2078         public final String where;                                                                       </span>
<span  style="">2079                                                                                                          </span>
<span class="-2258632185412795279" onmouseenter="enter('-2258632185412795279');" onmouseout="out('-2258632185412795279');" style="">2080         public final String[] args;                                                                      </span>
<span  style="">2081                                                                                                          </span>
<span class="538735252304320137" onmouseenter="enter('538735252304320137');" onmouseout="out('538735252304320137');" style="">2082         SqlArguments(Uri url, String where, String[] args) {                                             </span>
<span class="-7603700663019659468" onmouseenter="enter('-7603700663019659468');" onmouseout="out('-7603700663019659468');" style="">2083             if (url.getPathSegments().size() == 1) {                                                     </span>
<span class="-6984157551381672872" onmouseenter="enter('-6984157551381672872');" onmouseout="out('-6984157551381672872');" style="">2084                 this.table = url.getPathSegments().get(0);                                               </span>
<span class="7181058370626512064" onmouseenter="enter('7181058370626512064');" onmouseout="out('7181058370626512064');" style="">2085                 this.where = where;                                                                      </span>
<span class="8688716567728705492" onmouseenter="enter('8688716567728705492');" onmouseout="out('8688716567728705492');" style="">2086                 this.args = args;                                                                        </span>
<span class="2325935358302734243" onmouseenter="enter('2325935358302734243');" onmouseout="out('2325935358302734243');" style="">2087             } else if (url.getPathSegments().size() != 2) {                                              </span>
<span class="-3760623583555134522" onmouseenter="enter('-3760623583555134522');" onmouseout="out('-3760623583555134522');" style="">2088                 throw new IllegalArgumentException(&quot;Invalid URI: &quot; + url);                               </span>
<span class="186586201607437821" onmouseenter="enter('186586201607437821');" onmouseout="out('186586201607437821');" style="">2089             } else if (!TextUtils.isEmpty(where)) {                                                      </span>
<span class="2785963644153593875" onmouseenter="enter('2785963644153593875');" onmouseout="out('2785963644153593875');" style="">2090                 throw new UnsupportedOperationException(&quot;WHERE clause not supported: &quot; + url);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2091             } else {                                                                                     </span>
<span class="-6984157551381672872" onmouseenter="enter('-6984157551381672872');" onmouseout="out('-6984157551381672872');" style="">2092                 this.table = url.getPathSegments().get(0);                                               </span>
<span class="-834356181554398700" onmouseenter="enter('-834356181554398700');" onmouseout="out('-834356181554398700');" style="">2093                 this.where = &quot;_id=&quot; + ContentUris.parseId(url);                                          </span>
<span class="-7173439380439508667" onmouseenter="enter('-7173439380439508667');" onmouseout="out('-7173439380439508667');" style="">2094                 this.args = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2095             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2096         }                                                                                                </span>
<span  style="">2097                                                                                                          </span>
<span class="5705249208777482684" onmouseenter="enter('5705249208777482684');" onmouseout="out('5705249208777482684');" style="">2098         SqlArguments(Uri url) {                                                                          </span>
<span class="-7603700663019659468" onmouseenter="enter('-7603700663019659468');" onmouseout="out('-7603700663019659468');" style="">2099             if (url.getPathSegments().size() == 1) {                                                     </span>
<span class="-594585027826531892" onmouseenter="enter('-594585027826531892');" onmouseout="out('-594585027826531892');" style="">2100                 table = url.getPathSegments().get(0);                                                    </span>
<span class="3938761229458861077" onmouseenter="enter('3938761229458861077');" onmouseout="out('3938761229458861077');" style="">2101                 where = null;                                                                            </span>
<span class="8940401955607507518" onmouseenter="enter('8940401955607507518');" onmouseout="out('8940401955607507518');" style="">2102                 args = null;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2103             } else {                                                                                     </span>
<span class="-3760623583555134522" onmouseenter="enter('-3760623583555134522');" onmouseout="out('-3760623583555134522');" style="">2104                 throw new IllegalArgumentException(&quot;Invalid URI: &quot; + url);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2105             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2106         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2107     }                                                                                                    </span>
<span  style="">2108                                                                                                          </span>
<span class="-3139188310586380115" onmouseenter="enter('-3139188310586380115');" onmouseout="out('-3139188310586380115');" style="">2109     static interface WorkspaceLoader {                                                                   </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2110         /**                                                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2111          *                                                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2112          *                                                                                               </span>
<span class="-6230418313850844401" onmouseenter="enter('-6230418313850844401');" onmouseout="out('-6230418313850844401');" style="">2113          * @param screenIds                                                                              </span>
<span class="7703704285515875406" onmouseenter="enter('7703704285515875406');" onmouseout="out('7703704285515875406');" style="">2114          * 		A mutable list of screen its                                                                </span>
<span class="987002808252756985" onmouseenter="enter('987002808252756985');" onmouseout="out('987002808252756985');" style="">2115          * @return the number of workspace items added.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2116          */                                                                                              </span>
<span class="7362991573738966984" onmouseenter="enter('7362991573738966984');" onmouseout="out('7362991573738966984');" style="">2117         public abstract int loadLayout(SQLiteDatabase db, ArrayList&lt;Long&gt; screenIds);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2118     }                                                                                                    </span>
<span  style="">2119                                                                                                          </span>
<span class="-6810572453627058620" onmouseenter="enter('-6810572453627058620');" onmouseout="out('-6810572453627058620');" style="">2120     private static class SimpleWorkspaceLoader implements WorkspaceLoader {                              </span>
<span class="-2219225490446500593" onmouseenter="enter('-2219225490446500593');" onmouseout="out('-2219225490446500593');" style="">2121         private final Resources mRes;                                                                    </span>
<span  style="">2122                                                                                                          </span>
<span class="-3366452129939698064" onmouseenter="enter('-3366452129939698064');" onmouseout="out('-3366452129939698064');" style="">2123         private final int mWorkspaceId;                                                                  </span>
<span  style="">2124                                                                                                          </span>
<span class="6266322654512692359" onmouseenter="enter('6266322654512692359');" onmouseout="out('6266322654512692359');" style="">2125         private final DatabaseHelper mHelper;                                                            </span>
<span  style="">2126                                                                                                          </span>
<span class="5321487022203331675" onmouseenter="enter('5321487022203331675');" onmouseout="out('5321487022203331675');" style="">2127         SimpleWorkspaceLoader(DatabaseHelper helper, Resources res, int workspaceId) {                   </span>
<span class="3631311506378187050" onmouseenter="enter('3631311506378187050');" onmouseout="out('3631311506378187050');" style="">2128             mHelper = helper;                                                                            </span>
<span class="4740402107482375987" onmouseenter="enter('4740402107482375987');" onmouseout="out('4740402107482375987');" style="">2129             mRes = res;                                                                                  </span>
<span class="5644903313888202397" onmouseenter="enter('5644903313888202397');" onmouseout="out('5644903313888202397');" style="">2130             mWorkspaceId = workspaceId;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2131         }                                                                                                </span>
<span  style="">2132                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2133         @Override                                                                                        </span>
<span class="-7017557007815113757" onmouseenter="enter('-7017557007815113757');" onmouseout="out('-7017557007815113757');" style="">2134         public int loadLayout(SQLiteDatabase db, ArrayList&lt;Long&gt; screenIds) {                            </span>
<span class="8904365510774480646" onmouseenter="enter('8904365510774480646');" onmouseout="out('8904365510774480646');" style="">2135             return mHelper.loadFavoritesRecursive(db, mRes, mWorkspaceId, screenIds);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2136         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2137     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2138 }                                                                                                        </span>



























































































































































































































































































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2   * Copyright (C) 2008 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17  package com.android.launcher3;                                                                                    </span>
<span  style="">  18                                                                                                                    </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  19  import android.app.SearchManager;                                                                                 </span>
<span class="504928717176532115" onmouseenter="enter('504928717176532115');" onmouseout="out('504928717176532115');" style="">  20  import android.appwidget.AppWidgetHost;                                                                           </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  21  import android.appwidget.AppWidgetManager;                                                                        </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  22  import android.appwidget.AppWidgetProviderInfo;                                                                   </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  23  import android.content.ComponentName;                                                                             </span>
<span class="550877806393279246" onmouseenter="enter('550877806393279246');" onmouseout="out('550877806393279246');" style="">  24  import android.content.ContentProvider;                                                                           </span>
<span class="3739800667450215943" onmouseenter="enter('3739800667450215943');" onmouseout="out('3739800667450215943');" style="">  25  import android.content.ContentProviderOperation;                                                                  </span>
<span class="-6369732601490611729" onmouseenter="enter('-6369732601490611729');" onmouseout="out('-6369732601490611729');" style="">  26  import android.content.ContentProviderResult;                                                                     </span>
<span class="6126857652515451632" onmouseenter="enter('6126857652515451632');" onmouseout="out('6126857652515451632');" style="">  27  import android.content.ContentResolver;                                                                           </span>
<span class="-9185307499822629" onmouseenter="enter('-9185307499822629');" onmouseout="out('-9185307499822629');" style="">  28  import android.content.ContentUris;                                                                               </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="">  29  import android.content.ContentValues;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  30  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  31  import android.content.Intent;                                                                                    </span>
<span class="-4160670168441716907" onmouseenter="enter('-4160670168441716907');" onmouseout="out('-4160670168441716907');" style="">  32  import android.content.OperationApplicationException;                                                             </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  33  import android.content.SharedPreferences;                                                                         </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="">  34  import android.content.pm.ActivityInfo;                                                                           </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  35 +import android.content.pm.ApplicationInfo;                                                                        </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  36  import android.content.pm.PackageManager;                                                                         </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  37 +import android.content.pm.ResolveInfo;                                                                            </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  38  import android.content.res.Resources;                                                                             </span>
<span class="-840652079464298178" onmouseenter="enter('-840652079464298178');" onmouseout="out('-840652079464298178');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  39 -import android.content.res.TypedArray;                                                                            </span>
<span class="7386012112211289620" onmouseenter="enter('7386012112211289620');" onmouseout="out('7386012112211289620');" style="">  40  import android.content.res.XmlResourceParser;                                                                     </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  41  import android.database.Cursor;                                                                                   </span>
<span class="5870833163231201789" onmouseenter="enter('5870833163231201789');" onmouseout="out('5870833163231201789');" style="">  42  import android.database.SQLException;                                                                             </span>
<span class="-4895155655276492102" onmouseenter="enter('-4895155655276492102');" onmouseout="out('-4895155655276492102');" style="">  43  import android.database.sqlite.SQLiteDatabase;                                                                    </span>
<span class="6401548559697116088" onmouseenter="enter('6401548559697116088');" onmouseout="out('6401548559697116088');" style="">  44  import android.database.sqlite.SQLiteOpenHelper;                                                                  </span>
<span class="-1253510085600408435" onmouseenter="enter('-1253510085600408435');" onmouseout="out('-1253510085600408435');" style="">  45  import android.database.sqlite.SQLiteQueryBuilder;                                                                </span>
<span class="-7509968378694652787" onmouseenter="enter('-7509968378694652787');" onmouseout="out('-7509968378694652787');" style="">  46  import android.database.sqlite.SQLiteStatement;                                                                   </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  47  import android.graphics.Bitmap;                                                                                   </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  48  import android.graphics.BitmapFactory;                                                                            </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  49  import android.net.Uri;                                                                                           </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  50  import android.os.Bundle;                                                                                         </span>
<span class="-3605034024778696983" onmouseenter="enter('-3605034024778696983');" onmouseout="out('-3605034024778696983');" style="">  51  import android.provider.Settings;                                                                                 </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  52  import android.text.TextUtils;                                                                                    </span>
<span class="-4218724752779269131" onmouseenter="enter('-4218724752779269131');" onmouseout="out('-4218724752779269131');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  53 -import android.util.AttributeSet;                                                                                 </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  54  import android.util.Log;                                                                                          </span>
<span class="3356514778564300112" onmouseenter="enter('3356514778564300112');" onmouseout="out('3356514778564300112');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  55 -import android.util.Xml;                                                                                          </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  56 -                                                                                                                  </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  57 +import android.util.SparseArray;                                                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  58 +                                                                                                                  </span>
<span class="4395110202233918405" onmouseenter="enter('4395110202233918405');" onmouseout="out('4395110202233918405');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  59 +import com.android.launcher3.AutoInstallsLayout.LayoutParserCallback;                                             </span>
<span class="6281159490246877388" onmouseenter="enter('6281159490246877388');" onmouseout="out('6281159490246877388');" style="">  60  import com.android.launcher3.LauncherSettings.Favorites;                                                          </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  61 +import com.android.launcher3.compat.UserHandleCompat;                                                             </span>
<span class="-8849211230761127863" onmouseenter="enter('-8849211230761127863');" onmouseout="out('-8849211230761127863');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  62 +import com.android.launcher3.compat.UserManagerCompat;                                                            </span>
<span class="-7468653447981916815" onmouseenter="enter('-7468653447981916815');" onmouseout="out('-7468653447981916815');" style="">  63  import com.android.launcher3.config.ProviderConfig;                                                               </span>
<span  style="">  64                                                                                                                    </span>
<span class="-5145222340437954675" onmouseenter="enter('-5145222340437954675');" onmouseout="out('-5145222340437954675');" style="">  65  import org.xmlpull.v1.XmlPullParser;                                                                              </span>
<span class="-3477173242969633951" onmouseenter="enter('-3477173242969633951');" onmouseout="out('-3477173242969633951');" style="">  66  import org.xmlpull.v1.XmlPullParserException;                                                                     </span>
<span  style="">  67                                                                                                                    </span>
<span class="-3926401431737521278" onmouseenter="enter('-3926401431737521278');" onmouseout="out('-3926401431737521278');" style="">  68  import java.io.File;                                                                                              </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  69  import java.io.IOException;                                                                                       </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  70  import java.net.URISyntaxException;                                                                               </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  71  import java.util.ArrayList;                                                                                       </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  72 +import java.util.Collections;                                                                                     </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  73  import java.util.HashSet;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  74  import java.util.List;                                                                                            </span>
<span  style="">  75                                                                                                                    </span>
<span class="-5661310118425891821" onmouseenter="enter('-5661310118425891821');" onmouseout="out('-5661310118425891821');" style="">  76  public class LauncherProvider extends ContentProvider {                                                           </span>
<span class="-5301430442842506185" onmouseenter="enter('-5301430442842506185');" onmouseout="out('-5301430442842506185');" style="">  77      private static final String TAG = &quot;Launcher.LauncherProvider&quot;;                                                </span>
<span class="-8469384925954206736" onmouseenter="enter('-8469384925954206736');" onmouseout="out('-8469384925954206736');" style="">  78      private static final boolean LOGD = false;                                                                    </span>
<span  style="">  79                                                                                                                    </span>
<span class="8048508412932305881" onmouseenter="enter('8048508412932305881');" onmouseout="out('8048508412932305881');" style="">  80      private static final String DATABASE_NAME = &quot;launcher.db&quot;;                                                    </span>
<span  style="">  81                                                                                                                    </span>
<span class="-8918268015379633620" onmouseenter="enter('-8918268015379633620');" onmouseout="out('-8918268015379633620');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  82 -    private static final int DATABASE_VERSION = 16;                                                               </span>
<span class="7809747164420377858" onmouseenter="enter('7809747164420377858');" onmouseout="out('7809747164420377858');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  83 +    private static final int DATABASE_VERSION = 20;                                                               </span>
<span  style="">  84                                                                                                                    </span>
<span class="-458478327704245810" onmouseenter="enter('-458478327704245810');" onmouseout="out('-458478327704245810');" style="">  85      static final String OLD_AUTHORITY = &quot;com.android.launcher2.settings&quot;;                                         </span>
<span class="-4376021050615906115" onmouseenter="enter('-4376021050615906115');" onmouseout="out('-4376021050615906115');" style="">  86      static final String AUTHORITY = ProviderConfig.AUTHORITY;                                                     </span>
<span  style="">  87                                                                                                                    </span>
<span class="-4487533157410420763" onmouseenter="enter('-4487533157410420763');" onmouseout="out('-4487533157410420763');" style="">  88      // Should we attempt to load anything from the com.android.launcher2 provider?                                </span>
<span class="3383367194631780364" onmouseenter="enter('3383367194631780364');" onmouseout="out('3383367194631780364');" style="">  89      static final boolean IMPORT_LAUNCHER2_DATABASE = false;                                                       </span>
<span  style="">  90                                                                                                                    </span>
<span class="-6626902943579202823" onmouseenter="enter('-6626902943579202823');" onmouseout="out('-6626902943579202823');" style="">  91      static final String TABLE_FAVORITES = &quot;favorites&quot;;                                                            </span>
<span class="-4121112267423691577" onmouseenter="enter('-4121112267423691577');" onmouseout="out('-4121112267423691577');" style="">  92      static final String TABLE_WORKSPACE_SCREENS = &quot;workspaceScreens&quot;;                                             </span>
<span class="5667619940348816611" onmouseenter="enter('5667619940348816611');" onmouseout="out('5667619940348816611');" style="">  93      static final String PARAMETER_NOTIFY = &quot;notify&quot;;                                                              </span>
<span class="-591783718254341348" onmouseenter="enter('-591783718254341348');" onmouseout="out('-591783718254341348');" style="">  94      static final String UPGRADED_FROM_OLD_DATABASE =                                                              </span>
<span class="6670864303817368253" onmouseenter="enter('6670864303817368253');" onmouseout="out('6670864303817368253');" style="">  95              &quot;UPGRADED_FROM_OLD_DATABASE&quot;;                                                                         </span>
<span class="-2242593752226183959" onmouseenter="enter('-2242593752226183959');" onmouseout="out('-2242593752226183959');" style="">  96      static final String EMPTY_DATABASE_CREATED =                                                                  </span>
<span class="-3248472412834995750" onmouseenter="enter('-3248472412834995750');" onmouseout="out('-3248472412834995750');" style="">  97              &quot;EMPTY_DATABASE_CREATED&quot;;                                                                             </span>
<span class="-1240123202865404900" onmouseenter="enter('-1240123202865404900');" onmouseout="out('-1240123202865404900');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  98 -    static final String DEFAULT_WORKSPACE_RESOURCE_ID =                                                           </span>
<span class="2142879000646912094" onmouseenter="enter('2142879000646912094');" onmouseout="out('2142879000646912094');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  99 -            &quot;DEFAULT_WORKSPACE_RESOURCE_ID&quot;;                                                                      </span>
<span  style=""> 100                                                                                                                    </span>
<span class="-5068203882425881097" onmouseenter="enter('-5068203882425881097');" onmouseout="out('-5068203882425881097');" style=""> 101      private static final String ACTION_APPWIDGET_DEFAULT_WORKSPACE_CONFIGURE =                                    </span>
<span class="-8289377429995644773" onmouseenter="enter('-8289377429995644773');" onmouseout="out('-8289377429995644773');" style=""> 102              &quot;com.android.launcher.action.APPWIDGET_DEFAULT_WORKSPACE_CONFIGURE&quot;;                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 103 +                                                                                                                  </span>
<span class="-254878042648191521" onmouseenter="enter('-254878042648191521');" onmouseout="out('-254878042648191521');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 104 +    private static final String URI_PARAM_IS_EXTERNAL_ADD = &quot;isExternalAdd&quot;;                                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 105 +                                                                                                                  </span>
<span class="-4555445478569710276" onmouseenter="enter('-4555445478569710276');" onmouseout="out('-4555445478569710276');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 106 +    private LauncherProviderChangeListener mListener;                                                             </span>
<span  style=""> 107                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 108      /**                                                                                                           </span>
<span class="-3211764681636990688" onmouseenter="enter('-3211764681636990688');" onmouseout="out('-3211764681636990688');" style=""> 109       * {@link Uri} triggered at any registered {@link android.database.ContentObserver} when                      </span>
<span class="-4919300270466303234" onmouseenter="enter('-4919300270466303234');" onmouseout="out('-4919300270466303234');" style=""> 110       * {@link AppWidgetHost#deleteHost()} is called during database creation.                                     </span>
<span class="-788325382909228329" onmouseenter="enter('-788325382909228329');" onmouseout="out('-788325382909228329');" style=""> 111       * Use this to recall {@link AppWidgetHost#startListening()} if needed.                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 112       */                                                                                                           </span>
<span class="5515339483970246409" onmouseenter="enter('5515339483970246409');" onmouseout="out('5515339483970246409');" style=""> 113      static final Uri CONTENT_APPWIDGET_RESET_URI =                                                                </span>
<span class="3194273355649806706" onmouseenter="enter('3194273355649806706');" onmouseout="out('3194273355649806706');" style=""> 114              Uri.parse(&quot;content://&quot; + AUTHORITY + &quot;/appWidgetReset&quot;);                                              </span>
<span  style=""> 115                                                                                                                    </span>
<span class="-35355205086145165" onmouseenter="enter('-35355205086145165');" onmouseout="out('-35355205086145165');" style=""> 116      private DatabaseHelper mOpenHelper;                                                                           </span>
<span class="4833460347687640836" onmouseenter="enter('4833460347687640836');" onmouseout="out('4833460347687640836');" style=""> 117      private static boolean sJustLoadedFromOldDb;                                                                  </span>
<span  style=""> 118                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 119      @Override                                                                                                     </span>
<span class="5054121129922253104" onmouseenter="enter('5054121129922253104');" onmouseout="out('5054121129922253104');" style=""> 120      public boolean onCreate() {                                                                                   </span>
<span class="4475688138331124962" onmouseenter="enter('4475688138331124962');" onmouseout="out('4475688138331124962');" style=""> 121          final Context context = getContext();                                                                     </span>
<span class="-7690576094790651842" onmouseenter="enter('-7690576094790651842');" onmouseout="out('-7690576094790651842');" style=""> 122          mOpenHelper = new DatabaseHelper(context);                                                                </span>
<span class="-7305781479923559628" onmouseenter="enter('-7305781479923559628');" onmouseout="out('-7305781479923559628');" style=""> 123          LauncherAppState.setLauncherProvider(this);                                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 124          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125      }                                                                                                             </span>
<span  style=""> 126                                                                                                                    </span>
<span class="487377169126514768" onmouseenter="enter('487377169126514768');" onmouseout="out('487377169126514768');" style=""> 127      public boolean wasNewDbCreated() {                                                                            </span>
<span class="-2120364841155545874" onmouseenter="enter('-2120364841155545874');" onmouseout="out('-2120364841155545874');" style=""> 128          return mOpenHelper.wasNewDbCreated();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129      }                                                                                                             </span>
<span  style=""> 130                                                                                                                    </span>
<span class="9170464131639972057" onmouseenter="enter('9170464131639972057');" onmouseout="out('9170464131639972057');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 131 +    public void setLauncherProviderChangeListener(LauncherProviderChangeListener listener) {                      </span>
<span class="9132236250678632099" onmouseenter="enter('9132236250678632099');" onmouseout="out('9132236250678632099');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 132 +        mListener = listener;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 133 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 134 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 135      @Override                                                                                                     </span>
<span class="-1263590755434456926" onmouseenter="enter('-1263590755434456926');" onmouseout="out('-1263590755434456926');" style=""> 136      public String getType(Uri uri) {                                                                              </span>
<span class="336598653403461328" onmouseenter="enter('336598653403461328');" onmouseout="out('336598653403461328');" style=""> 137          SqlArguments args = new SqlArguments(uri, null, null);                                                    </span>
<span class="-3811208733585118846" onmouseenter="enter('-3811208733585118846');" onmouseout="out('-3811208733585118846');" style=""> 138          if (TextUtils.isEmpty(args.where)) {                                                                      </span>
<span class="4564755247099008741" onmouseenter="enter('4564755247099008741');" onmouseout="out('4564755247099008741');" style=""> 139              return &quot;vnd.android.cursor.dir/&quot; + args.table;                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 140          } else {                                                                                                  </span>
<span class="9039528378345344991" onmouseenter="enter('9039528378345344991');" onmouseout="out('9039528378345344991');" style=""> 141              return &quot;vnd.android.cursor.item/&quot; + args.table;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 143      }                                                                                                             </span>
<span  style=""> 144                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 145      @Override                                                                                                     </span>
<span class="2688381462100157580" onmouseenter="enter('2688381462100157580');" onmouseout="out('2688381462100157580');" style=""> 146      public Cursor query(Uri uri, String[] projection, String selection,                                           </span>
<span class="-8080601171652713678" onmouseenter="enter('-8080601171652713678');" onmouseout="out('-8080601171652713678');" style=""> 147              String[] selectionArgs, String sortOrder) {                                                           </span>
<span  style=""> 148                                                                                                                    </span>
<span class="-3782003319541019236" onmouseenter="enter('-3782003319541019236');" onmouseout="out('-3782003319541019236');" style=""> 149          SqlArguments args = new SqlArguments(uri, selection, selectionArgs);                                      </span>
<span class="-631518951729113636" onmouseenter="enter('-631518951729113636');" onmouseout="out('-631518951729113636');" style=""> 150          SQLiteQueryBuilder qb = new SQLiteQueryBuilder();                                                         </span>
<span class="2611293065726660593" onmouseenter="enter('2611293065726660593');" onmouseout="out('2611293065726660593');" style=""> 151          qb.setTables(args.table);                                                                                 </span>
<span  style=""> 152                                                                                                                    </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 153          SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                                    </span>
<span class="3134453170380441664" onmouseenter="enter('3134453170380441664');" onmouseout="out('3134453170380441664');" style=""> 154          Cursor result = qb.query(db, projection, args.where, args.args, null, null, sortOrder);                   </span>
<span class="-7763164457135943875" onmouseenter="enter('-7763164457135943875');" onmouseout="out('-7763164457135943875');" style=""> 155          result.setNotificationUri(getContext().getContentResolver(), uri);                                        </span>
<span  style=""> 156                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 157          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158      }                                                                                                             </span>
<span  style=""> 159                                                                                                                    </span>
<span class="9207797122534392164" onmouseenter="enter('9207797122534392164');" onmouseout="out('9207797122534392164');" style=""> 160      private static long dbInsertAndCheck(DatabaseHelper helper,                                                   </span>
<span class="-7649003652568167377" onmouseenter="enter('-7649003652568167377');" onmouseout="out('-7649003652568167377');" style=""> 161              SQLiteDatabase db, String table, String nullColumnHack, ContentValues values) {                       </span>
<span class="6588288335812254858" onmouseenter="enter('6588288335812254858');" onmouseout="out('6588288335812254858');" style=""> 162          if (values == null) {                                                                                     </span>
<span class="7184965589450928593" onmouseenter="enter('7184965589450928593');" onmouseout="out('7184965589450928593');" style=""> 163              throw new RuntimeException(&quot;Error: attempting to insert null values&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164          }                                                                                                         </span>
<span class="-7482782364542370157" onmouseenter="enter('-7482782364542370157');" onmouseout="out('-7482782364542370157');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 165 -        if (!values.containsKey(LauncherSettings.BaseLauncherColumns._ID)) {                                      </span>
<span class="7050899094957739080" onmouseenter="enter('7050899094957739080');" onmouseout="out('7050899094957739080');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 166 +        if (!values.containsKey(LauncherSettings.ChangeLogColumns._ID)) {                                         </span>
<span class="492623150120761321" onmouseenter="enter('492623150120761321');" onmouseout="out('492623150120761321');" style=""> 167              throw new RuntimeException(&quot;Error: attempting to add item without specifying an id&quot;);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168          }                                                                                                         </span>
<span class="-5706715493188407465" onmouseenter="enter('-5706715493188407465');" onmouseout="out('-5706715493188407465');" style=""> 169          helper.checkId(table, values);                                                                            </span>
<span class="1074556166740873719" onmouseenter="enter('1074556166740873719');" onmouseout="out('1074556166740873719');" style=""> 170          return db.insert(table, nullColumnHack, values);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171      }                                                                                                             </span>
<span  style=""> 172                                                                                                                    </span>
<span class="863775672802506838" onmouseenter="enter('863775672802506838');" onmouseout="out('863775672802506838');" style=""> 173      private static void deleteId(SQLiteDatabase db, long id) {                                                    </span>
<span class="-4192328687501718427" onmouseenter="enter('-4192328687501718427');" onmouseout="out('-4192328687501718427');" style=""> 174          Uri uri = LauncherSettings.Favorites.getContentUri(id, false);                                            </span>
<span class="336598653403461328" onmouseenter="enter('336598653403461328');" onmouseout="out('336598653403461328');" style=""> 175          SqlArguments args = new SqlArguments(uri, null, null);                                                    </span>
<span class="9003145226006787004" onmouseenter="enter('9003145226006787004');" onmouseout="out('9003145226006787004');" style=""> 176          db.delete(args.table, args.where, args.args);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177      }                                                                                                             </span>
<span  style=""> 178                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 179      @Override                                                                                                     </span>
<span class="-734135164912880773" onmouseenter="enter('-734135164912880773');" onmouseout="out('-734135164912880773');" style=""> 180      public Uri insert(Uri uri, ContentValues initialValues) {                                                     </span>
<span class="8811129738693748448" onmouseenter="enter('8811129738693748448');" onmouseout="out('8811129738693748448');" style=""> 181          SqlArguments args = new SqlArguments(uri);                                                                </span>
<span  style=""> 182                                                                                                                    </span>
<span class="-8942992855752528468" onmouseenter="enter('-8942992855752528468');" onmouseout="out('-8942992855752528468');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 183 +        // In very limited cases, we support system|signature permission apps to add to the db                    </span>
<span class="8337919216215113797" onmouseenter="enter('8337919216215113797');" onmouseout="out('8337919216215113797');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 184 +        String externalAdd = uri.getQueryParameter(URI_PARAM_IS_EXTERNAL_ADD);                                    </span>
<span class="-2295815198673808272" onmouseenter="enter('-2295815198673808272');" onmouseout="out('-2295815198673808272');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 185 +        if (externalAdd != null &amp;&amp; &quot;true&quot;.equals(externalAdd)) {                                                  </span>
<span class="255159610270408066" onmouseenter="enter('255159610270408066');" onmouseout="out('255159610270408066');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 186 +            if (!mOpenHelper.initializeExternalAdd(initialValues)) {                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 187 +                return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 188 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 189 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 190 +                                                                                                                  </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 191          SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                                    </span>
<span class="-6358079444454153819" onmouseenter="enter('-6358079444454153819');" onmouseout="out('-6358079444454153819');" style=""> 192          addModifiedTime(initialValues);                                                                           </span>
<span class="5419112362953263362" onmouseenter="enter('5419112362953263362');" onmouseout="out('5419112362953263362');" style=""> 193          final long rowId = dbInsertAndCheck(mOpenHelper, db, args.table, null, initialValues);                    </span>
<span class="8445680939324035407" onmouseenter="enter('8445680939324035407');" onmouseout="out('8445680939324035407');" style=""> 194          if (rowId &lt;= 0) return null;                                                                              </span>
<span  style=""> 195                                                                                                                    </span>
<span class="8735878877349428813" onmouseenter="enter('8735878877349428813');" onmouseout="out('8735878877349428813');" style=""> 196          uri = ContentUris.withAppendedId(uri, rowId);                                                             </span>
<span class="-4021691463985906436" onmouseenter="enter('-4021691463985906436');" onmouseout="out('-4021691463985906436');" style=""> 197          sendNotify(uri);                                                                                          </span>
<span  style=""> 198                                                                                                                    </span>
<span class="8673785246827833247" onmouseenter="enter('8673785246827833247');" onmouseout="out('8673785246827833247');" style=""> 199          return uri;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200      }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 201 +                                                                                                                  </span>
<span  style=""> 202                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 203      @Override                                                                                                     </span>
<span class="-327877481205905086" onmouseenter="enter('-327877481205905086');" onmouseout="out('-327877481205905086');" style=""> 204      public int bulkInsert(Uri uri, ContentValues[] values) {                                                      </span>
<span class="8811129738693748448" onmouseenter="enter('8811129738693748448');" onmouseout="out('8811129738693748448');" style=""> 205          SqlArguments args = new SqlArguments(uri);                                                                </span>
<span  style=""> 206                                                                                                                    </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 207          SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                                    </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 208          db.beginTransaction();                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 209          try {                                                                                                     </span>
<span class="7727596149598132072" onmouseenter="enter('7727596149598132072');" onmouseout="out('7727596149598132072');" style=""> 210              int numValues = values.length;                                                                        </span>
<span class="805790054769028067" onmouseenter="enter('805790054769028067');" onmouseout="out('805790054769028067');" style=""> 211              for (int i = 0; i &lt; numValues; i++) {                                                                 </span>
<span class="2678636525018066730" onmouseenter="enter('2678636525018066730');" onmouseout="out('2678636525018066730');" style=""> 212                  addModifiedTime(values[i]);                                                                       </span>
<span class="-5505203781899797586" onmouseenter="enter('-5505203781899797586');" onmouseout="out('-5505203781899797586');" style=""> 213                  if (dbInsertAndCheck(mOpenHelper, db, args.table, null, values[i]) &lt; 0) {                         </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 214                      return 0;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216              }                                                                                                     </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 217              db.setTransactionSuccessful();                                                                        </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 218          } finally {                                                                                               </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 219              db.endTransaction();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220          }                                                                                                         </span>
<span  style=""> 221                                                                                                                    </span>
<span class="-4021691463985906436" onmouseenter="enter('-4021691463985906436');" onmouseout="out('-4021691463985906436');" style=""> 222          sendNotify(uri);                                                                                          </span>
<span class="6793841392205084718" onmouseenter="enter('6793841392205084718');" onmouseout="out('6793841392205084718');" style=""> 223          return values.length;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224      }                                                                                                             </span>
<span  style=""> 225                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 226      @Override                                                                                                     </span>
<span class="5983754597853237276" onmouseenter="enter('5983754597853237276');" onmouseout="out('5983754597853237276');" style=""> 227      public ContentProviderResult[] applyBatch(ArrayList&lt;ContentProviderOperation&gt; operations)                     </span>
<span class="-5628895276830175510" onmouseenter="enter('-5628895276830175510');" onmouseout="out('-5628895276830175510');" style=""> 228              throws OperationApplicationException {                                                                </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 229          SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                                    </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 230          db.beginTransaction();                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 231          try {                                                                                                     </span>
<span class="3840622082470564062" onmouseenter="enter('3840622082470564062');" onmouseout="out('3840622082470564062');" style=""> 232              ContentProviderResult[] result =  super.applyBatch(operations);                                       </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 233              db.setTransactionSuccessful();                                                                        </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 234              return result;                                                                                        </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 235          } finally {                                                                                               </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 236              db.endTransaction();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238      }                                                                                                             </span>
<span  style=""> 239                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 240      @Override                                                                                                     </span>
<span class="-6238796754049684603" onmouseenter="enter('-6238796754049684603');" onmouseout="out('-6238796754049684603');" style=""> 241      public int delete(Uri uri, String selection, String[] selectionArgs) {                                        </span>
<span class="-3782003319541019236" onmouseenter="enter('-3782003319541019236');" onmouseout="out('-3782003319541019236');" style=""> 242          SqlArguments args = new SqlArguments(uri, selection, selectionArgs);                                      </span>
<span  style=""> 243                                                                                                                    </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 244          SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                                    </span>
<span class="-848417512188045481" onmouseenter="enter('-848417512188045481');" onmouseout="out('-848417512188045481');" style=""> 245          int count = db.delete(args.table, args.where, args.args);                                                 </span>
<span class="3046456781272759412" onmouseenter="enter('3046456781272759412');" onmouseout="out('3046456781272759412');" style=""> 246          if (count &gt; 0) sendNotify(uri);                                                                           </span>
<span  style=""> 247                                                                                                                    </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style=""> 248          return count;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249      }                                                                                                             </span>
<span  style=""> 250                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 251      @Override                                                                                                     </span>
<span class="-6200308159398621930" onmouseenter="enter('-6200308159398621930');" onmouseout="out('-6200308159398621930');" style=""> 252      public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) {                  </span>
<span class="-3782003319541019236" onmouseenter="enter('-3782003319541019236');" onmouseout="out('-3782003319541019236');" style=""> 253          SqlArguments args = new SqlArguments(uri, selection, selectionArgs);                                      </span>
<span  style=""> 254                                                                                                                    </span>
<span class="5593303527651076681" onmouseenter="enter('5593303527651076681');" onmouseout="out('5593303527651076681');" style=""> 255          addModifiedTime(values);                                                                                  </span>
<span class="9176064587072821338" onmouseenter="enter('9176064587072821338');" onmouseout="out('9176064587072821338');" style=""> 256          SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                                    </span>
<span class="6692131291033480751" onmouseenter="enter('6692131291033480751');" onmouseout="out('6692131291033480751');" style=""> 257          int count = db.update(args.table, values, args.where, args.args);                                         </span>
<span class="3046456781272759412" onmouseenter="enter('3046456781272759412');" onmouseout="out('3046456781272759412');" style=""> 258          if (count &gt; 0) sendNotify(uri);                                                                           </span>
<span  style=""> 259                                                                                                                    </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style=""> 260          return count;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261      }                                                                                                             </span>
<span  style=""> 262                                                                                                                    </span>
<span class="-6137155183451194640" onmouseenter="enter('-6137155183451194640');" onmouseout="out('-6137155183451194640');" style=""> 263      private void sendNotify(Uri uri) {                                                                            </span>
<span class="8087997420167282782" onmouseenter="enter('8087997420167282782');" onmouseout="out('8087997420167282782');" style=""> 264          String notify = uri.getQueryParameter(PARAMETER_NOTIFY);                                                  </span>
<span class="-1882364541416460726" onmouseenter="enter('-1882364541416460726');" onmouseout="out('-1882364541416460726');" style=""> 265          if (notify == null || &quot;true&quot;.equals(notify)) {                                                            </span>
<span class="-1009902495160891118" onmouseenter="enter('-1009902495160891118');" onmouseout="out('-1009902495160891118');" style=""> 266              getContext().getContentResolver().notifyChange(uri, null);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267          }                                                                                                         </span>
<span  style=""> 268                                                                                                                    </span>
<span class="-88474152060363663" onmouseenter="enter('-88474152060363663');" onmouseout="out('-88474152060363663');" style=""> 269          // always notify the backup agent                                                                         </span>
<span class="-4136841506633225478" onmouseenter="enter('-4136841506633225478');" onmouseout="out('-4136841506633225478');" style=""> 270          LauncherBackupAgentHelper.dataChanged(getContext());                                                      </span>
<span class="3660947493902737932" onmouseenter="enter('3660947493902737932');" onmouseout="out('3660947493902737932');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 271 +        if (mListener != null) {                                                                                  </span>
<span class="7178241373784368891" onmouseenter="enter('7178241373784368891');" onmouseout="out('7178241373784368891');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 272 +            mListener.onLauncherProviderChange();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 273 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274      }                                                                                                             </span>
<span  style=""> 275                                                                                                                    </span>
<span class="-1775729469739138676" onmouseenter="enter('-1775729469739138676');" onmouseout="out('-1775729469739138676');" style=""> 276      private void addModifiedTime(ContentValues values) {                                                          </span>
<span class="7778574075272931857" onmouseenter="enter('7778574075272931857');" onmouseout="out('7778574075272931857');" style=""> 277          values.put(LauncherSettings.ChangeLogColumns.MODIFIED, System.currentTimeMillis());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278      }                                                                                                             </span>
<span  style=""> 279                                                                                                                    </span>
<span class="2178013549114956338" onmouseenter="enter('2178013549114956338');" onmouseout="out('2178013549114956338');" style=""> 280      public long generateNewItemId() {                                                                             </span>
<span class="4208143222012601660" onmouseenter="enter('4208143222012601660');" onmouseout="out('4208143222012601660');" style=""> 281          return mOpenHelper.generateNewItemId();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282      }                                                                                                             </span>
<span  style=""> 283                                                                                                                    </span>
<span class="8365827129597185054" onmouseenter="enter('8365827129597185054');" onmouseout="out('8365827129597185054');" style=""> 284      public void updateMaxItemId(long id) {                                                                        </span>
<span class="5887752252226734670" onmouseenter="enter('5887752252226734670');" onmouseout="out('5887752252226734670');" style=""> 285          mOpenHelper.updateMaxItemId(id);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286      }                                                                                                             </span>
<span  style=""> 287                                                                                                                    </span>
<span class="3794345207933084858" onmouseenter="enter('3794345207933084858');" onmouseout="out('3794345207933084858');" style=""> 288      public long generateNewScreenId() {                                                                           </span>
<span class="1793864293735992917" onmouseenter="enter('1793864293735992917');" onmouseout="out('1793864293735992917');" style=""> 289          return mOpenHelper.generateNewScreenId();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290      }                                                                                                             </span>
<span  style=""> 291                                                                                                                    </span>
<span class="6930658551566435877" onmouseenter="enter('6930658551566435877');" onmouseout="out('6930658551566435877');" style=""> 292      // This is only required one time while loading the workspace during the                                      </span>
<span class="-2970396193784752555" onmouseenter="enter('-2970396193784752555');" onmouseout="out('-2970396193784752555');" style=""> 293      // upgrade path, and should never be called from anywhere else.                                               </span>
<span class="-7531165898061832726" onmouseenter="enter('-7531165898061832726');" onmouseout="out('-7531165898061832726');" style=""> 294      public void updateMaxScreenId(long maxScreenId) {                                                             </span>
<span class="1650077191565319140" onmouseenter="enter('1650077191565319140');" onmouseout="out('1650077191565319140');" style=""> 295          mOpenHelper.updateMaxScreenId(maxScreenId);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296      }                                                                                                             </span>
<span  style=""> 297                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 298      /**                                                                                                           </span>
<span class="3357730711931570136" onmouseenter="enter('3357730711931570136');" onmouseout="out('3357730711931570136');" style=""> 299       * @param Should we load the old db for upgrade? first run only.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 300       */                                                                                                           </span>
<span class="830252285283253659" onmouseenter="enter('830252285283253659');" onmouseout="out('830252285283253659');" style=""> 301      synchronized public boolean justLoadedOldDb() {                                                               </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 302          String spKey = LauncherAppState.getSharedPreferencesKey();                                                </span>
<span class="-1270995004093477684" onmouseenter="enter('-1270995004093477684');" onmouseout="out('-1270995004093477684');" style=""> 303          SharedPreferences sp = getContext().getSharedPreferences(spKey, Context.MODE_PRIVATE);                    </span>
<span  style=""> 304                                                                                                                    </span>
<span class="-2988224019905233772" onmouseenter="enter('-2988224019905233772');" onmouseout="out('-2988224019905233772');" style=""> 305          boolean loadedOldDb = false || sJustLoadedFromOldDb;                                                      </span>
<span  style=""> 306                                                                                                                    </span>
<span class="732070560985546855" onmouseenter="enter('732070560985546855');" onmouseout="out('732070560985546855');" style=""> 307          sJustLoadedFromOldDb = false;                                                                             </span>
<span class="2535788223071749602" onmouseenter="enter('2535788223071749602');" onmouseout="out('2535788223071749602');" style=""> 308          if (sp.getBoolean(UPGRADED_FROM_OLD_DATABASE, false)) {                                                   </span>
<span  style=""> 309                                                                                                                    </span>
<span class="2898240485600869061" onmouseenter="enter('2898240485600869061');" onmouseout="out('2898240485600869061');" style=""> 310              SharedPreferences.Editor editor = sp.edit();                                                          </span>
<span class="-3507238978930621467" onmouseenter="enter('-3507238978930621467');" onmouseout="out('-3507238978930621467');" style=""> 311              editor.remove(UPGRADED_FROM_OLD_DATABASE);                                                            </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 312              editor.commit();                                                                                      </span>
<span class="424898969256754833" onmouseenter="enter('424898969256754833');" onmouseout="out('424898969256754833');" style=""> 313              loadedOldDb = true;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 314          }                                                                                                         </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style=""> 315          return loadedOldDb;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316      }                                                                                                             </span>
<span  style=""> 317                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 318      /**                                                                                                           </span>
<span class="-8058562001555962214" onmouseenter="enter('-8058562001555962214');" onmouseout="out('-8058562001555962214');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 319 -     * @param workspaceResId that can be 0 to use default or non-zero for specific resource                       </span>
<span class="-3404890512310195543" onmouseenter="enter('-3404890512310195543');" onmouseout="out('-3404890512310195543');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 320 +     * Clears all the data for a fresh start.                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 321       */                                                                                                           </span>
<span class="2891148146211785888" onmouseenter="enter('2891148146211785888');" onmouseout="out('2891148146211785888');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 322 -    synchronized public void loadDefaultFavoritesIfNecessary(int origWorkspaceResId) {                            </span>
<span class="-8979529877881539007" onmouseenter="enter('-8979529877881539007');" onmouseout="out('-8979529877881539007');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 323 +    synchronized public void createEmptyDB() {                                                                    </span>
<span class="-257404101089763384" onmouseenter="enter('-257404101089763384');" onmouseout="out('-257404101089763384');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 324 +        mOpenHelper.createEmptyDB(mOpenHelper.getWritableDatabase());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 325 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 326 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 327 +    /**                                                                                                           </span>
<span class="277164340629859803" onmouseenter="enter('277164340629859803');" onmouseout="out('277164340629859803');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 328 +     * Loads the default workspace based on the following priority scheme:                                        </span>
<span class="6191061916552549057" onmouseenter="enter('6191061916552549057');" onmouseout="out('6191061916552549057');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 329 +     *   1) From a package provided by play store                                                                 </span>
<span class="-1458935321569433020" onmouseenter="enter('-1458935321569433020');" onmouseout="out('-1458935321569433020');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 330 +     *   2) From a partner configuration APK, already in the system image                                         </span>
<span class="-8497452292409790071" onmouseenter="enter('-8497452292409790071');" onmouseout="out('-8497452292409790071');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 331 +     *   3) The default configuration for the particular device                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 332 +     */                                                                                                           </span>
<span class="-4109341010907676070" onmouseenter="enter('-4109341010907676070');" onmouseout="out('-4109341010907676070');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 333 +    synchronized public void loadDefaultFavoritesIfNecessary() {                                                  </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 334          String spKey = LauncherAppState.getSharedPreferencesKey();                                                </span>
<span class="-1270995004093477684" onmouseenter="enter('-1270995004093477684');" onmouseout="out('-1270995004093477684');" style=""> 335          SharedPreferences sp = getContext().getSharedPreferences(spKey, Context.MODE_PRIVATE);                    </span>
<span  style=""> 336                                                                                                                    </span>
<span class="-1164862040405657048" onmouseenter="enter('-1164862040405657048');" onmouseout="out('-1164862040405657048');" style=""> 337          if (sp.getBoolean(EMPTY_DATABASE_CREATED, false)) {                                                       </span>
<span class="-3246698064640464314" onmouseenter="enter('-3246698064640464314');" onmouseout="out('-3246698064640464314');" style=""> 338              Log.d(TAG, &quot;loading default workspace&quot;);                                                              </span>
<span class="-8279765387174345535" onmouseenter="enter('-8279765387174345535');" onmouseout="out('-8279765387174345535');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 339 -            int workspaceResId = origWorkspaceResId;                                                              </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 340 -                                                                                                                  </span>
<span class="217567545048513855" onmouseenter="enter('217567545048513855');" onmouseout="out('217567545048513855');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 341 -            // Use default workspace resource if none provided                                                    </span>
<span class="-5053492134257668609" onmouseenter="enter('-5053492134257668609');" onmouseout="out('-5053492134257668609');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 342 -            if (workspaceResId == 0) {                                                                            </span>
<span class="7006330733031891349" onmouseenter="enter('7006330733031891349');" onmouseout="out('7006330733031891349');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 343 -                workspaceResId =                                                                                  </span>
<span class="-6788509870516298881" onmouseenter="enter('-6788509870516298881');" onmouseout="out('-6788509870516298881');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 344 -                        sp.getInt(DEFAULT_WORKSPACE_RESOURCE_ID, getDefaultWorkspaceResourceId());                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 345 +                                                                                                                  </span>
<span class="2862729422956304785" onmouseenter="enter('2862729422956304785');" onmouseout="out('2862729422956304785');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 346 +            WorkspaceLoader loader = AutoInstallsLayout.get(getContext(),                                         </span>
<span class="4267100487943846224" onmouseenter="enter('4267100487943846224');" onmouseout="out('4267100487943846224');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 347 +                    mOpenHelper.mAppWidgetHost, mOpenHelper);                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 348 +                                                                                                                  </span>
<span class="-1290919382195344098" onmouseenter="enter('-1290919382195344098');" onmouseout="out('-1290919382195344098');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 349 +            if (loader == null) {                                                                                 </span>
<span class="-7748100060285216458" onmouseenter="enter('-7748100060285216458');" onmouseout="out('-7748100060285216458');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 350 +                final Partner partner = Partner.get(getContext().getPackageManager());                            </span>
<span class="-604675337449948556" onmouseenter="enter('-604675337449948556');" onmouseout="out('-604675337449948556');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 351 +                if (partner != null &amp;&amp; partner.hasDefaultLayout()) {                                              </span>
<span class="882794219866203698" onmouseenter="enter('882794219866203698');" onmouseout="out('882794219866203698');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 352 +                    final Resources partnerRes = partner.getResources();                                          </span>
<span class="4481789752192356250" onmouseenter="enter('4481789752192356250');" onmouseout="out('4481789752192356250');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 353 +                    int workspaceResId = partnerRes.getIdentifier(Partner.RES_DEFAULT_LAYOUT,                     </span>
<span class="-8179104168031182438" onmouseenter="enter('-8179104168031182438');" onmouseout="out('-8179104168031182438');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 354 +                            &quot;xml&quot;, partner.getPackageName());                                                     </span>
<span class="-1442734434460802886" onmouseenter="enter('-1442734434460802886');" onmouseout="out('-1442734434460802886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 355 +                    if (workspaceResId != 0) {                                                                    </span>
<span class="7614099601786768812" onmouseenter="enter('7614099601786768812');" onmouseout="out('7614099601786768812');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 356 +                        loader = new SimpleWorkspaceLoader(mOpenHelper, partnerRes, workspaceResId);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 357 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 358 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 359 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 360 +                                                                                                                  </span>
<span class="-1290919382195344098" onmouseenter="enter('-1290919382195344098');" onmouseout="out('-1290919382195344098');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 361 +            if (loader == null) {                                                                                 </span>
<span class="7451927752864728827" onmouseenter="enter('7451927752864728827');" onmouseout="out('7451927752864728827');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 362 +                loader = new SimpleWorkspaceLoader(mOpenHelper, getContext().getResources(),                      </span>
<span class="-1420613086462636039" onmouseenter="enter('-1420613086462636039');" onmouseout="out('-1420613086462636039');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 363 +                        getDefaultWorkspaceResourceId());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364              }                                                                                                     </span>
<span  style=""> 365                                                                                                                    </span>
<span class="126045670500141" onmouseenter="enter('126045670500141');" onmouseout="out('126045670500141');" style=""> 366              // Populate favorites table with initial favorites                                                    </span>
<span class="2898240485600869061" onmouseenter="enter('2898240485600869061');" onmouseout="out('2898240485600869061');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 367 -            SharedPreferences.Editor editor = sp.edit();                                                          </span>
<span class="-8004824481153313756" onmouseenter="enter('-8004824481153313756');" onmouseout="out('-8004824481153313756');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 368 -            editor.remove(EMPTY_DATABASE_CREATED);                                                                </span>
<span class="-2086021757798384369" onmouseenter="enter('-2086021757798384369');" onmouseout="out('-2086021757798384369');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 369 -            if (origWorkspaceResId != 0) {                                                                        </span>
<span class="-8969504609040691545" onmouseenter="enter('-8969504609040691545');" onmouseout="out('-8969504609040691545');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 370 -                editor.putInt(DEFAULT_WORKSPACE_RESOURCE_ID, origWorkspaceResId);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 371 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 372 -                                                                                                                  </span>
<span class="-4612660971271107484" onmouseenter="enter('-4612660971271107484');" onmouseout="out('-4612660971271107484');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 373 -            mOpenHelper.loadFavorites(mOpenHelper.getWritableDatabase(), workspaceResId);                         </span>
<span class="2293470548230442343" onmouseenter="enter('2293470548230442343');" onmouseout="out('2293470548230442343');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 374 -            mOpenHelper.setFlagJustLoadedOldDb();                                                                 </span>
<span class="6356197677764543118" onmouseenter="enter('6356197677764543118');" onmouseout="out('6356197677764543118');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 375 +            SharedPreferences.Editor editor = sp.edit().remove(EMPTY_DATABASE_CREATED);                           </span>
<span class="4528935963390066074" onmouseenter="enter('4528935963390066074');" onmouseout="out('4528935963390066074');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 376 +            mOpenHelper.loadFavorites(mOpenHelper.getWritableDatabase(), loader);                                 </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 377              editor.commit();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 378          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379      }                                                                                                             </span>
<span  style=""> 380                                                                                                                    </span>
<span class="-8499205643032210495" onmouseenter="enter('-8499205643032210495');" onmouseout="out('-8499205643032210495');" style=""> 381      public void migrateLauncher2Shortcuts() {                                                                     </span>
<span class="-5770271076267441053" onmouseenter="enter('-5770271076267441053');" onmouseout="out('-5770271076267441053');" style=""> 382          mOpenHelper.migrateLauncher2Shortcuts(mOpenHelper.getWritableDatabase(),                                  </span>
<span class="4674488696818174493" onmouseenter="enter('4674488696818174493');" onmouseout="out('4674488696818174493');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 383 -                LauncherSettings.Favorites.OLD_CONTENT_URI);                                                      </span>
<span class="-4855681120160555012" onmouseenter="enter('-4855681120160555012');" onmouseout="out('-4855681120160555012');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 384 +                Uri.parse(getContext().getString(R.string.old_launcher_provider_uri)));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385      }                                                                                                             </span>
<span  style=""> 386                                                                                                                    </span>
<span class="-1196563046017318534" onmouseenter="enter('-1196563046017318534');" onmouseout="out('-1196563046017318534');" style=""> 387      private static int getDefaultWorkspaceResourceId() {                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 388 +        LauncherAppState app = LauncherAppState.getInstance();                                                    </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 389 +        DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                             </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style=""> 390          if (LauncherAppState.isDisableAllApps()) {                                                                </span>
<span class="-1701666309462387440" onmouseenter="enter('-1701666309462387440');" onmouseout="out('-1701666309462387440');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 391 -            return R.xml.default_workspace_no_all_apps;                                                           </span>
<span class="6699639115497717540" onmouseenter="enter('6699639115497717540');" onmouseout="out('6699639115497717540');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 392 +            return grid.defaultNoAllAppsLayoutId;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 393          } else {                                                                                                  </span>
<span class="-8162380824261292058" onmouseenter="enter('-8162380824261292058');" onmouseout="out('-8162380824261292058');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 394 -            return R.xml.default_workspace;                                                                       </span>
<span class="-780823694227077807" onmouseenter="enter('-780823694227077807');" onmouseout="out('-780823694227077807');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 395 +            return grid.defaultLayoutId;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397      }                                                                                                             </span>
<span  style=""> 398                                                                                                                    </span>
<span class="2048811950140821659" onmouseenter="enter('2048811950140821659');" onmouseout="out('2048811950140821659');" style=""> 399      private static interface ContentValuesCallback {                                                              </span>
<span class="9109141647050984993" onmouseenter="enter('9109141647050984993');" onmouseout="out('9109141647050984993');" style=""> 400          public void onRow(ContentValues values);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401      }                                                                                                             </span>
<span  style=""> 402                                                                                                                    </span>
<span class="1239728474819548988" onmouseenter="enter('1239728474819548988');" onmouseout="out('1239728474819548988');" style=""> 403      private static boolean shouldImportLauncher2Database(Context context) {                                       </span>
<span class="-3394718202218086970" onmouseenter="enter('-3394718202218086970');" onmouseout="out('-3394718202218086970');" style=""> 404          boolean isTablet = context.getResources().getBoolean(R.bool.is_tablet);                                   </span>
<span  style=""> 405                                                                                                                    </span>
<span class="-5532998664683170674" onmouseenter="enter('-5532998664683170674');" onmouseout="out('-5532998664683170674');" style=""> 406          // We don&#x27;t import the old databse for tablets, as the grid size has changed.                             </span>
<span class="8529341054323679340" onmouseenter="enter('8529341054323679340');" onmouseout="out('8529341054323679340');" style=""> 407          return !isTablet &amp;&amp; IMPORT_LAUNCHER2_DATABASE;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 408      }                                                                                                             </span>
<span  style=""> 409                                                                                                                    </span>
<span class="-7861087353469194327" onmouseenter="enter('-7861087353469194327');" onmouseout="out('-7861087353469194327');" style=""> 410      public void deleteDatabase() {                                                                                </span>
<span class="-3081120555997572478" onmouseenter="enter('-3081120555997572478');" onmouseout="out('-3081120555997572478');" style=""> 411          // Are you sure? (y/n)                                                                                    </span>
<span class="7599905409028339447" onmouseenter="enter('7599905409028339447');" onmouseout="out('7599905409028339447');" style=""> 412          final SQLiteDatabase db = mOpenHelper.getWritableDatabase();                                              </span>
<span class="4824670475834221257" onmouseenter="enter('4824670475834221257');" onmouseout="out('4824670475834221257');" style=""> 413          final File dbFile = new File(db.getPath());                                                               </span>
<span class="-4378932496508441297" onmouseenter="enter('-4378932496508441297');" onmouseout="out('-4378932496508441297');" style=""> 414          mOpenHelper.close();                                                                                      </span>
<span class="-2168275612742463412" onmouseenter="enter('-2168275612742463412');" onmouseout="out('-2168275612742463412');" style=""> 415          if (dbFile.exists()) {                                                                                    </span>
<span class="7055278701412747697" onmouseenter="enter('7055278701412747697');" onmouseout="out('7055278701412747697');" style=""> 416              SQLiteDatabase.deleteDatabase(dbFile);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417          }                                                                                                         </span>
<span class="1429708216911350032" onmouseenter="enter('1429708216911350032');" onmouseout="out('1429708216911350032');" style=""> 418          mOpenHelper = new DatabaseHelper(getContext());                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419      }                                                                                                             </span>
<span  style=""> 420                                                                                                                    </span>
<span class="5020790626023757347" onmouseenter="enter('5020790626023757347');" onmouseout="out('5020790626023757347');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 421 -    private static class DatabaseHelper extends SQLiteOpenHelper {                                                </span>
<span class="-8073014385313712586" onmouseenter="enter('-8073014385313712586');" onmouseout="out('-8073014385313712586');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 422 +    private static class DatabaseHelper extends SQLiteOpenHelper implements LayoutParserCallback {                </span>
<span class="-9177351901961504515" onmouseenter="enter('-9177351901961504515');" onmouseout="out('-9177351901961504515');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 423 +        private static final String TAG_RESOLVE = &quot;resolve&quot;;                                                      </span>
<span class="-6648556986475948603" onmouseenter="enter('-6648556986475948603');" onmouseout="out('-6648556986475948603');" style=""> 424          private static final String TAG_FAVORITES = &quot;favorites&quot;;                                                  </span>
<span class="2417919475469446038" onmouseenter="enter('2417919475469446038');" onmouseout="out('2417919475469446038');" style=""> 425          private static final String TAG_FAVORITE = &quot;favorite&quot;;                                                    </span>
<span class="3365396944747138353" onmouseenter="enter('3365396944747138353');" onmouseout="out('3365396944747138353');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 426 -        private static final String TAG_CLOCK = &quot;clock&quot;;                                                          </span>
<span class="-59845057668070406" onmouseenter="enter('-59845057668070406');" onmouseout="out('-59845057668070406');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 427 -        private static final String TAG_SEARCH = &quot;search&quot;;                                                        </span>
<span class="8817783213080628620" onmouseenter="enter('8817783213080628620');" onmouseout="out('8817783213080628620');" style=""> 428          private static final String TAG_APPWIDGET = &quot;appwidget&quot;;                                                  </span>
<span class="1544013162193549447" onmouseenter="enter('1544013162193549447');" onmouseout="out('1544013162193549447');" style=""> 429          private static final String TAG_SHORTCUT = &quot;shortcut&quot;;                                                    </span>
<span class="-5715927654015021253" onmouseenter="enter('-5715927654015021253');" onmouseout="out('-5715927654015021253');" style=""> 430          private static final String TAG_FOLDER = &quot;folder&quot;;                                                        </span>
<span class="-6175494568545371270" onmouseenter="enter('-6175494568545371270');" onmouseout="out('-6175494568545371270');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 431 +        private static final String TAG_PARTNER_FOLDER = &quot;partner-folder&quot;;                                        </span>
<span class="-8348196986139036128" onmouseenter="enter('-8348196986139036128');" onmouseout="out('-8348196986139036128');" style=""> 432          private static final String TAG_EXTRA = &quot;extra&quot;;                                                          </span>
<span class="-5562355841128428217" onmouseenter="enter('-5562355841128428217');" onmouseout="out('-5562355841128428217');" style=""> 433          private static final String TAG_INCLUDE = &quot;include&quot;;                                                      </span>
<span  style=""> 434                                                                                                                    </span>
<span class="-2405859498731861640" onmouseenter="enter('-2405859498731861640');" onmouseout="out('-2405859498731861640');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 435 +        // Style attrs -- &quot;Favorite&quot;                                                                              </span>
<span class="6214193247203789772" onmouseenter="enter('6214193247203789772');" onmouseout="out('6214193247203789772');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 436 +        private static final String ATTR_CLASS_NAME = &quot;className&quot;;                                                </span>
<span class="-1386532944306710360" onmouseenter="enter('-1386532944306710360');" onmouseout="out('-1386532944306710360');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 437 +        private static final String ATTR_PACKAGE_NAME = &quot;packageName&quot;;                                            </span>
<span class="2414249740748360985" onmouseenter="enter('2414249740748360985');" onmouseout="out('2414249740748360985');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 438 +        private static final String ATTR_CONTAINER = &quot;container&quot;;                                                 </span>
<span class="-389066511444324935" onmouseenter="enter('-389066511444324935');" onmouseout="out('-389066511444324935');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 439 +        private static final String ATTR_SCREEN = &quot;screen&quot;;                                                       </span>
<span class="3539825055734438732" onmouseenter="enter('3539825055734438732');" onmouseout="out('3539825055734438732');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 440 +        private static final String ATTR_X = &quot;x&quot;;                                                                 </span>
<span class="-8597702554968119187" onmouseenter="enter('-8597702554968119187');" onmouseout="out('-8597702554968119187');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 441 +        private static final String ATTR_Y = &quot;y&quot;;                                                                 </span>
<span class="-2621848582492648979" onmouseenter="enter('-2621848582492648979');" onmouseout="out('-2621848582492648979');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 442 +        private static final String ATTR_SPAN_X = &quot;spanX&quot;;                                                        </span>
<span class="-675060966992142264" onmouseenter="enter('-675060966992142264');" onmouseout="out('-675060966992142264');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 443 +        private static final String ATTR_SPAN_Y = &quot;spanY&quot;;                                                        </span>
<span class="1238292044873463939" onmouseenter="enter('1238292044873463939');" onmouseout="out('1238292044873463939');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 444 +        private static final String ATTR_ICON = &quot;icon&quot;;                                                           </span>
<span class="5936928200905820740" onmouseenter="enter('5936928200905820740');" onmouseout="out('5936928200905820740');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 445 +        private static final String ATTR_TITLE = &quot;title&quot;;                                                         </span>
<span class="-5345085314000449361" onmouseenter="enter('-5345085314000449361');" onmouseout="out('-5345085314000449361');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 446 +        private static final String ATTR_URI = &quot;uri&quot;;                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 447 +                                                                                                                  </span>
<span class="3599016499719454262" onmouseenter="enter('3599016499719454262');" onmouseout="out('3599016499719454262');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 448 +        // Style attrs -- &quot;Include&quot;                                                                               </span>
<span class="-5893198944478773555" onmouseenter="enter('-5893198944478773555');" onmouseout="out('-5893198944478773555');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 449 +        private static final String ATTR_WORKSPACE = &quot;workspace&quot;;                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 450 +                                                                                                                  </span>
<span class="-5389745022469758251" onmouseenter="enter('-5389745022469758251');" onmouseout="out('-5389745022469758251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 451 +        // Style attrs -- &quot;Extra&quot;                                                                                 </span>
<span class="9111389785487433322" onmouseenter="enter('9111389785487433322');" onmouseout="out('9111389785487433322');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 452 +        private static final String ATTR_KEY = &quot;key&quot;;                                                             </span>
<span class="-4495093316086922325" onmouseenter="enter('-4495093316086922325');" onmouseout="out('-4495093316086922325');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 453 +        private static final String ATTR_VALUE = &quot;value&quot;;                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 454 +                                                                                                                  </span>
<span class="-2672328117217234149" onmouseenter="enter('-2672328117217234149');" onmouseout="out('-2672328117217234149');" style=""> 455          private final Context mContext;                                                                           </span>
<span class="916814758228251192" onmouseenter="enter('916814758228251192');" onmouseout="out('916814758228251192');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 456 +        private final PackageManager mPackageManager;                                                             </span>
<span class="-7815254415381208754" onmouseenter="enter('-7815254415381208754');" onmouseout="out('-7815254415381208754');" style=""> 457          private final AppWidgetHost mAppWidgetHost;                                                               </span>
<span class="256431113711786954" onmouseenter="enter('256431113711786954');" onmouseout="out('256431113711786954');" style=""> 458          private long mMaxItemId = -1;                                                                             </span>
<span class="3024521003496490102" onmouseenter="enter('3024521003496490102');" onmouseout="out('3024521003496490102');" style=""> 459          private long mMaxScreenId = -1;                                                                           </span>
<span  style=""> 460                                                                                                                    </span>
<span class="7342788129695687690" onmouseenter="enter('7342788129695687690');" onmouseout="out('7342788129695687690');" style=""> 461          private boolean mNewDbCreated = false;                                                                    </span>
<span  style=""> 462                                                                                                                    </span>
<span class="1000156088447424124" onmouseenter="enter('1000156088447424124');" onmouseout="out('1000156088447424124');" style=""> 463          DatabaseHelper(Context context) {                                                                         </span>
<span class="-3457119901623063168" onmouseenter="enter('-3457119901623063168');" onmouseout="out('-3457119901623063168');" style=""> 464              super(context, DATABASE_NAME, null, DATABASE_VERSION);                                                </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style=""> 465              mContext = context;                                                                                   </span>
<span class="8554599676865199182" onmouseenter="enter('8554599676865199182');" onmouseout="out('8554599676865199182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 466 +            mPackageManager = context.getPackageManager();                                                        </span>
<span class="6731257549223913473" onmouseenter="enter('6731257549223913473');" onmouseout="out('6731257549223913473');" style=""> 467              mAppWidgetHost = new AppWidgetHost(context, Launcher.APPWIDGET_HOST_ID);                              </span>
<span  style=""> 468                                                                                                                    </span>
<span class="-7119307471557363464" onmouseenter="enter('-7119307471557363464');" onmouseout="out('-7119307471557363464');" style=""> 469              // In the case where neither onCreate nor onUpgrade gets called, we read the maxId from               </span>
<span class="-7146491614936969963" onmouseenter="enter('-7146491614936969963');" onmouseout="out('-7146491614936969963');" style=""> 470              // the DB here                                                                                        </span>
<span class="-8239698715373110075" onmouseenter="enter('-8239698715373110075');" onmouseout="out('-8239698715373110075');" style=""> 471              if (mMaxItemId == -1) {                                                                               </span>
<span class="6514208419145701418" onmouseenter="enter('6514208419145701418');" onmouseout="out('6514208419145701418');" style=""> 472                  mMaxItemId = initializeMaxItemId(getWritableDatabase());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473              }                                                                                                     </span>
<span class="2158219101093277292" onmouseenter="enter('2158219101093277292');" onmouseout="out('2158219101093277292');" style=""> 474              if (mMaxScreenId == -1) {                                                                             </span>
<span class="-7197865417052699646" onmouseenter="enter('-7197865417052699646');" onmouseout="out('-7197865417052699646');" style=""> 475                  mMaxScreenId = initializeMaxScreenId(getWritableDatabase());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477          }                                                                                                         </span>
<span  style=""> 478                                                                                                                    </span>
<span class="487377169126514768" onmouseenter="enter('487377169126514768');" onmouseout="out('487377169126514768');" style=""> 479          public boolean wasNewDbCreated() {                                                                        </span>
<span class="1294520975679493300" onmouseenter="enter('1294520975679493300');" onmouseout="out('1294520975679493300');" style=""> 480              return mNewDbCreated;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481          }                                                                                                         </span>
<span  style=""> 482                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 483          /**                                                                                                       </span>
<span class="-3713204910685876719" onmouseenter="enter('-3713204910685876719');" onmouseout="out('-3713204910685876719');" style=""> 484           * Send notification that we&#x27;ve deleted the {@link AppWidgetHost},                                        </span>
<span class="-5398164636189778479" onmouseenter="enter('-5398164636189778479');" onmouseout="out('-5398164636189778479');" style=""> 485           * probably as part of the initial database creation. The receiver may                                    </span>
<span class="-284834762183367019" onmouseenter="enter('-284834762183367019');" onmouseout="out('-284834762183367019');" style=""> 486           * want to re-call {@link AppWidgetHost#startListening()} to ensure                                       </span>
<span class="1913597860538764992" onmouseenter="enter('1913597860538764992');" onmouseout="out('1913597860538764992');" style=""> 487           * callbacks are correctly set.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 488           */                                                                                                       </span>
<span class="3384745401314169661" onmouseenter="enter('3384745401314169661');" onmouseout="out('3384745401314169661');" style=""> 489          private void sendAppWidgetResetNotify() {                                                                 </span>
<span class="-1113390730047466962" onmouseenter="enter('-1113390730047466962');" onmouseout="out('-1113390730047466962');" style=""> 490              final ContentResolver resolver = mContext.getContentResolver();                                       </span>
<span class="4149774703050814155" onmouseenter="enter('4149774703050814155');" onmouseout="out('4149774703050814155');" style=""> 491              resolver.notifyChange(CONTENT_APPWIDGET_RESET_URI, null);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 492          }                                                                                                         </span>
<span  style=""> 493                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 494          @Override                                                                                                 </span>
<span class="3201464308903999877" onmouseenter="enter('3201464308903999877');" onmouseout="out('3201464308903999877');" style=""> 495          public void onCreate(SQLiteDatabase db) {                                                                 </span>
<span class="4744685829155971552" onmouseenter="enter('4744685829155971552');" onmouseout="out('4744685829155971552');" style=""> 496              if (LOGD) Log.d(TAG, &quot;creating new launcher database&quot;);                                               </span>
<span  style=""> 497                                                                                                                    </span>
<span class="-5512536783286632376" onmouseenter="enter('-5512536783286632376');" onmouseout="out('-5512536783286632376');" style=""> 498              mMaxItemId = 1;                                                                                       </span>
<span class="-1030858145638239039" onmouseenter="enter('-1030858145638239039');" onmouseout="out('-1030858145638239039');" style=""> 499              mMaxScreenId = 0;                                                                                     </span>
<span class="-3863035699221776712" onmouseenter="enter('-3863035699221776712');" onmouseout="out('-3863035699221776712');" style=""> 500              mNewDbCreated = true;                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 501 +                                                                                                                  </span>
<span class="8272328117098122260" onmouseenter="enter('8272328117098122260');" onmouseout="out('8272328117098122260');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 502 +            UserManagerCompat userManager = UserManagerCompat.getInstance(mContext);                              </span>
<span class="1087451883287607054" onmouseenter="enter('1087451883287607054');" onmouseout="out('1087451883287607054');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 503 +            long userSerialNumber = userManager.getSerialNumberForUser(                                           </span>
<span class="334342413311659427" onmouseenter="enter('334342413311659427');" onmouseout="out('334342413311659427');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 504 +                    UserHandleCompat.myUserHandle());                                                             </span>
<span  style=""> 505                                                                                                                    </span>
<span class="-5810771542500139933" onmouseenter="enter('-5810771542500139933');" onmouseout="out('-5810771542500139933');" style=""> 506              db.execSQL(&quot;CREATE TABLE favorites (&quot; +                                                               </span>
<span class="-7286867248755276119" onmouseenter="enter('-7286867248755276119');" onmouseout="out('-7286867248755276119');" style=""> 507                      &quot;_id INTEGER PRIMARY KEY,&quot; +                                                                  </span>
<span class="5329137835308229169" onmouseenter="enter('5329137835308229169');" onmouseout="out('5329137835308229169');" style=""> 508                      &quot;title TEXT,&quot; +                                                                               </span>
<span class="-7776152072054589061" onmouseenter="enter('-7776152072054589061');" onmouseout="out('-7776152072054589061');" style=""> 509                      &quot;intent TEXT,&quot; +                                                                              </span>
<span class="4982593742089674958" onmouseenter="enter('4982593742089674958');" onmouseout="out('4982593742089674958');" style=""> 510                      &quot;container INTEGER,&quot; +                                                                        </span>
<span class="-1871026270657853169" onmouseenter="enter('-1871026270657853169');" onmouseout="out('-1871026270657853169');" style=""> 511                      &quot;screen INTEGER,&quot; +                                                                           </span>
<span class="-9174211260981343890" onmouseenter="enter('-9174211260981343890');" onmouseout="out('-9174211260981343890');" style=""> 512                      &quot;cellX INTEGER,&quot; +                                                                            </span>
<span class="1584772009960348649" onmouseenter="enter('1584772009960348649');" onmouseout="out('1584772009960348649');" style=""> 513                      &quot;cellY INTEGER,&quot; +                                                                            </span>
<span class="5424055190881126727" onmouseenter="enter('5424055190881126727');" onmouseout="out('5424055190881126727');" style=""> 514                      &quot;spanX INTEGER,&quot; +                                                                            </span>
<span class="6553755327503045229" onmouseenter="enter('6553755327503045229');" onmouseout="out('6553755327503045229');" style=""> 515                      &quot;spanY INTEGER,&quot; +                                                                            </span>
<span class="5229848414421823036" onmouseenter="enter('5229848414421823036');" onmouseout="out('5229848414421823036');" style=""> 516                      &quot;itemType INTEGER,&quot; +                                                                         </span>
<span class="-1771151571856416667" onmouseenter="enter('-1771151571856416667');" onmouseout="out('-1771151571856416667');" style=""> 517                      &quot;appWidgetId INTEGER NOT NULL DEFAULT -1,&quot; +                                                  </span>
<span class="-9047067707489472437" onmouseenter="enter('-9047067707489472437');" onmouseout="out('-9047067707489472437');" style=""> 518                      &quot;isShortcut INTEGER,&quot; +                                                                       </span>
<span class="-3445858598434382544" onmouseenter="enter('-3445858598434382544');" onmouseout="out('-3445858598434382544');" style=""> 519                      &quot;iconType INTEGER,&quot; +                                                                         </span>
<span class="4279668316006004948" onmouseenter="enter('4279668316006004948');" onmouseout="out('4279668316006004948');" style=""> 520                      &quot;iconPackage TEXT,&quot; +                                                                         </span>
<span class="2008284586023778304" onmouseenter="enter('2008284586023778304');" onmouseout="out('2008284586023778304');" style=""> 521                      &quot;iconResource TEXT,&quot; +                                                                        </span>
<span class="-5981868381948376489" onmouseenter="enter('-5981868381948376489');" onmouseout="out('-5981868381948376489');" style=""> 522                      &quot;icon BLOB,&quot; +                                                                                </span>
<span class="5686768105176115842" onmouseenter="enter('5686768105176115842');" onmouseout="out('5686768105176115842');" style=""> 523                      &quot;uri TEXT,&quot; +                                                                                 </span>
<span class="-5470568819214956502" onmouseenter="enter('-5470568819214956502');" onmouseout="out('-5470568819214956502');" style=""> 524                      &quot;displayMode INTEGER,&quot; +                                                                      </span>
<span class="3582502352252677630" onmouseenter="enter('3582502352252677630');" onmouseout="out('3582502352252677630');" style=""> 525                      &quot;appWidgetProvider TEXT,&quot; +                                                                   </span>
<span class="4065658841092455651" onmouseenter="enter('4065658841092455651');" onmouseout="out('4065658841092455651');" style=""> 526                      &quot;modified INTEGER NOT NULL DEFAULT 0,&quot; +                                                      </span>
<span class="-7473155362818225516" onmouseenter="enter('-7473155362818225516');" onmouseout="out('-7473155362818225516');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 527 -                    &quot;restored INTEGER NOT NULL DEFAULT 0&quot; +                                                       </span>
<span class="422282607120493296" onmouseenter="enter('422282607120493296');" onmouseout="out('422282607120493296');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 528 +                    &quot;restored INTEGER NOT NULL DEFAULT 0,&quot; +                                                      </span>
<span class="86482473227423588" onmouseenter="enter('86482473227423588');" onmouseout="out('86482473227423588');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 529 +                    &quot;profileId INTEGER DEFAULT &quot; + userSerialNumber +                                             </span>
<span class="4525293784515244604" onmouseenter="enter('4525293784515244604');" onmouseout="out('4525293784515244604');" style=""> 530                      &quot;);&quot;);                                                                                        </span>
<span class="4995577433356427338" onmouseenter="enter('4995577433356427338');" onmouseout="out('4995577433356427338');" style=""> 531              addWorkspacesTable(db);                                                                               </span>
<span  style=""> 532                                                                                                                    </span>
<span class="-1982623284376040662" onmouseenter="enter('-1982623284376040662');" onmouseout="out('-1982623284376040662');" style=""> 533              // Database was just created, so wipe any previous widgets                                            </span>
<span class="35469525966995251" onmouseenter="enter('35469525966995251');" onmouseout="out('35469525966995251');" style=""> 534              if (mAppWidgetHost != null) {                                                                         </span>
<span class="2879907381293157546" onmouseenter="enter('2879907381293157546');" onmouseout="out('2879907381293157546');" style=""> 535                  mAppWidgetHost.deleteHost();                                                                      </span>
<span class="-5770229164268459929" onmouseenter="enter('-5770229164268459929');" onmouseout="out('-5770229164268459929');" style=""> 536                  sendAppWidgetResetNotify();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537              }                                                                                                     </span>
<span  style=""> 538                                                                                                                    </span>
<span class="609275327715209247" onmouseenter="enter('609275327715209247');" onmouseout="out('609275327715209247');" style=""> 539              if (shouldImportLauncher2Database(mContext)) {                                                        </span>
<span class="-4119927574094224618" onmouseenter="enter('-4119927574094224618');" onmouseout="out('-4119927574094224618');" style=""> 540                  // Try converting the old database                                                                </span>
<span class="-2608073222964575343" onmouseenter="enter('-2608073222964575343');" onmouseout="out('-2608073222964575343');" style=""> 541                  ContentValuesCallback permuteScreensCb = new ContentValuesCallback() {                            </span>
<span class="8586429359182493165" onmouseenter="enter('8586429359182493165');" onmouseout="out('8586429359182493165');" style=""> 542                      public void onRow(ContentValues values) {                                                     </span>
<span class="8168514524062857535" onmouseenter="enter('8168514524062857535');" onmouseout="out('8168514524062857535');" style=""> 543                          int container = values.getAsInteger(LauncherSettings.Favorites.CONTAINER);                </span>
<span class="5020574662396153275" onmouseenter="enter('5020574662396153275');" onmouseout="out('5020574662396153275');" style=""> 544                          if (container == Favorites.CONTAINER_DESKTOP) {                                           </span>
<span class="8059598160467561910" onmouseenter="enter('8059598160467561910');" onmouseout="out('8059598160467561910');" style=""> 545                              int screen = values.getAsInteger(LauncherSettings.Favorites.SCREEN);                  </span>
<span class="-7023501586433453456" onmouseenter="enter('-7023501586433453456');" onmouseout="out('-7023501586433453456');" style=""> 546                              screen = (int) upgradeLauncherDb_permuteScreens(screen);                              </span>
<span class="4993135311254983149" onmouseenter="enter('4993135311254983149');" onmouseout="out('4993135311254983149');" style=""> 547                              values.put(LauncherSettings.Favorites.SCREEN, screen);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 550                  };                                                                                                </span>
<span class="-6389228191485877615" onmouseenter="enter('-6389228191485877615');" onmouseout="out('-6389228191485877615');" style=""> 551                  Uri uri = Uri.parse(&quot;content://&quot; + Settings.AUTHORITY +                                           </span>
<span class="221068161423218984" onmouseenter="enter('221068161423218984');" onmouseout="out('221068161423218984');" style=""> 552                          &quot;/old_favorites?notify=true&quot;);                                                            </span>
<span class="-6844380575648815427" onmouseenter="enter('-6844380575648815427');" onmouseout="out('-6844380575648815427');" style=""> 553                  if (!convertDatabase(db, uri, permuteScreensCb, true)) {                                          </span>
<span class="1523633607411472329" onmouseenter="enter('1523633607411472329');" onmouseout="out('1523633607411472329');" style=""> 554                      // Try and upgrade from the Launcher2 db                                                      </span>
<span class="619258635471718803" onmouseenter="enter('619258635471718803');" onmouseout="out('619258635471718803');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 555 -                    uri = LauncherSettings.Favorites.OLD_CONTENT_URI;                                             </span>
<span class="4518498143464795661" onmouseenter="enter('4518498143464795661');" onmouseout="out('4518498143464795661');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 556 +                    uri = Uri.parse(mContext.getString(R.string.old_launcher_provider_uri));                      </span>
<span class="8183480483325234852" onmouseenter="enter('8183480483325234852');" onmouseout="out('8183480483325234852');" style=""> 557                      if (!convertDatabase(db, uri, permuteScreensCb, false)) {                                     </span>
<span class="-7649701046117020267" onmouseenter="enter('-7649701046117020267');" onmouseout="out('-7649701046117020267');" style=""> 558                          // If we fail, then set a flag to load the default workspace                              </span>
<span class="7629543500667828090" onmouseenter="enter('7629543500667828090');" onmouseout="out('7629543500667828090');" style=""> 559                          setFlagEmptyDbCreated();                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 560                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562                  }                                                                                                 </span>
<span class="3454579597073281561" onmouseenter="enter('3454579597073281561');" onmouseout="out('3454579597073281561');" style=""> 563                  // Right now, in non-default workspace cases, we want to run the final                            </span>
<span class="-5098717153247698852" onmouseenter="enter('-5098717153247698852');" onmouseout="out('-5098717153247698852');" style=""> 564                  // upgrade code (ie. to fix workspace screen indices -&gt; ids, etc.), so                            </span>
<span class="-4125458130400794691" onmouseenter="enter('-4125458130400794691');" onmouseout="out('-4125458130400794691');" style=""> 565                  // set that flag too.                                                                             </span>
<span class="4167333916835222093" onmouseenter="enter('4167333916835222093');" onmouseout="out('4167333916835222093');" style=""> 566                  setFlagJustLoadedOldDb();                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 567              } else {                                                                                              </span>
<span class="-1063142603395313746" onmouseenter="enter('-1063142603395313746');" onmouseout="out('-1063142603395313746');" style=""> 568                  // Fresh and clean launcher DB.                                                                   </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style=""> 569                  mMaxItemId = initializeMaxItemId(db);                                                             </span>
<span class="7629543500667828090" onmouseenter="enter('7629543500667828090');" onmouseout="out('7629543500667828090');" style=""> 570                  setFlagEmptyDbCreated();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572          }                                                                                                         </span>
<span  style=""> 573                                                                                                                    </span>
<span class="6272912136443308513" onmouseenter="enter('6272912136443308513');" onmouseout="out('6272912136443308513');" style=""> 574          private void addWorkspacesTable(SQLiteDatabase db) {                                                      </span>
<span class="2730049849658983478" onmouseenter="enter('2730049849658983478');" onmouseout="out('2730049849658983478');" style=""> 575              db.execSQL(&quot;CREATE TABLE &quot; + TABLE_WORKSPACE_SCREENS + &quot; (&quot; +                                         </span>
<span class="-1469669278065576182" onmouseenter="enter('-1469669278065576182');" onmouseout="out('-1469669278065576182');" style=""> 576                      LauncherSettings.WorkspaceScreens._ID + &quot; INTEGER,&quot; +                                         </span>
<span class="-8340457193420065897" onmouseenter="enter('-8340457193420065897');" onmouseout="out('-8340457193420065897');" style=""> 577                      LauncherSettings.WorkspaceScreens.SCREEN_RANK + &quot; INTEGER,&quot; +                                 </span>
<span class="7771125962287368960" onmouseenter="enter('7771125962287368960');" onmouseout="out('7771125962287368960');" style=""> 578                      LauncherSettings.ChangeLogColumns.MODIFIED + &quot; INTEGER NOT NULL DEFAULT 0&quot; +                  </span>
<span class="4525293784515244604" onmouseenter="enter('4525293784515244604');" onmouseout="out('4525293784515244604');" style=""> 579                      &quot;);&quot;);                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 580 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 581 +                                                                                                                  </span>
<span class="-3232037806458942317" onmouseenter="enter('-3232037806458942317');" onmouseout="out('-3232037806458942317');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 582 +        private void removeOrphanedItems(SQLiteDatabase db) {                                                     </span>
<span class="-3995909494643948388" onmouseenter="enter('-3995909494643948388');" onmouseout="out('-3995909494643948388');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 583 +            // Delete items directly on the workspace who&#x27;s screen id doesn&#x27;t exist                               </span>
<span class="6555258266445461688" onmouseenter="enter('6555258266445461688');" onmouseout="out('6555258266445461688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 584 +            //  &quot;DELETE FROM favorites WHERE screen NOT IN (SELECT _id FROM workspaceScreens)                     </span>
<span class="-1584785563187965465" onmouseenter="enter('-1584785563187965465');" onmouseout="out('-1584785563187965465');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 585 +            //   AND container = -100&quot;                                                                            </span>
<span class="-3502523792993972030" onmouseenter="enter('-3502523792993972030');" onmouseout="out('-3502523792993972030');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 586 +            String removeOrphanedDesktopItems = &quot;DELETE FROM &quot; + TABLE_FAVORITES +                                </span>
<span class="-3798755311795862199" onmouseenter="enter('-3798755311795862199');" onmouseout="out('-3798755311795862199');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 587 +                    &quot; WHERE &quot; +                                                                                   </span>
<span class="-8781539607986806909" onmouseenter="enter('-8781539607986806909');" onmouseout="out('-8781539607986806909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 588 +                    LauncherSettings.Favorites.SCREEN + &quot; NOT IN (SELECT &quot; +                                      </span>
<span class="-3730067412022302503" onmouseenter="enter('-3730067412022302503');" onmouseout="out('-3730067412022302503');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 589 +                    LauncherSettings.WorkspaceScreens._ID + &quot; FROM &quot; + TABLE_WORKSPACE_SCREENS + &quot;)&quot; +            </span>
<span class="8831213357842987069" onmouseenter="enter('8831213357842987069');" onmouseout="out('8831213357842987069');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 590 +                    &quot; AND &quot; +                                                                                     </span>
<span class="-3912897749337440213" onmouseenter="enter('-3912897749337440213');" onmouseout="out('-3912897749337440213');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 591 +                    LauncherSettings.Favorites.CONTAINER + &quot; = &quot; +                                                </span>
<span class="-1572782876841487653" onmouseenter="enter('-1572782876841487653');" onmouseout="out('-1572782876841487653');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 592 +                    LauncherSettings.Favorites.CONTAINER_DESKTOP;                                                 </span>
<span class="-5442680607495552531" onmouseenter="enter('-5442680607495552531');" onmouseout="out('-5442680607495552531');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 593 +            db.execSQL(removeOrphanedDesktopItems);                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 594 +                                                                                                                  </span>
<span class="2150462606818952724" onmouseenter="enter('2150462606818952724');" onmouseout="out('2150462606818952724');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 595 +            // Delete items contained in folders which no longer exist (after above statement)                    </span>
<span class="7157590486959116676" onmouseenter="enter('7157590486959116676');" onmouseout="out('7157590486959116676');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 596 +            //  &quot;DELETE FROM favorites  WHERE container &lt;&gt; -100 AND container &lt;&gt; -101 AND container               </span>
<span class="4713393280747800603" onmouseenter="enter('4713393280747800603');" onmouseout="out('4713393280747800603');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 597 +            //   NOT IN (SELECT _id FROM favorites WHERE itemType = 2)&quot;                                           </span>
<span class="-8895952306054120744" onmouseenter="enter('-8895952306054120744');" onmouseout="out('-8895952306054120744');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 598 +            String removeOrphanedFolderItems = &quot;DELETE FROM &quot; + TABLE_FAVORITES +                                 </span>
<span class="-3798755311795862199" onmouseenter="enter('-3798755311795862199');" onmouseout="out('-3798755311795862199');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 599 +                    &quot; WHERE &quot; +                                                                                   </span>
<span class="-9165304043886914201" onmouseenter="enter('-9165304043886914201');" onmouseout="out('-9165304043886914201');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 600 +                    LauncherSettings.Favorites.CONTAINER + &quot; &lt;&gt; &quot; +                                               </span>
<span class="2430974176390543784" onmouseenter="enter('2430974176390543784');" onmouseout="out('2430974176390543784');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 601 +                    LauncherSettings.Favorites.CONTAINER_DESKTOP +                                                </span>
<span class="3944405145859305700" onmouseenter="enter('3944405145859305700');" onmouseout="out('3944405145859305700');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 602 +                    &quot; AND &quot;                                                                                       </span>
<span class="5144458996296891504" onmouseenter="enter('5144458996296891504');" onmouseout="out('5144458996296891504');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 603 +                    + LauncherSettings.Favorites.CONTAINER + &quot; &lt;&gt; &quot; +                                             </span>
<span class="20571678636460503" onmouseenter="enter('20571678636460503');" onmouseout="out('20571678636460503');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 604 +                    LauncherSettings.Favorites.CONTAINER_HOTSEAT +                                                </span>
<span class="3944405145859305700" onmouseenter="enter('3944405145859305700');" onmouseout="out('3944405145859305700');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 605 +                    &quot; AND &quot;                                                                                       </span>
<span class="-4280152506863766824" onmouseenter="enter('-4280152506863766824');" onmouseout="out('-4280152506863766824');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 606 +                    + LauncherSettings.Favorites.CONTAINER + &quot; NOT IN (SELECT &quot; +                                 </span>
<span class="-971280935083657149" onmouseenter="enter('-971280935083657149');" onmouseout="out('-971280935083657149');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 607 +                    LauncherSettings.Favorites._ID + &quot; FROM &quot; + TABLE_FAVORITES +                                 </span>
<span class="4038942553560789906" onmouseenter="enter('4038942553560789906');" onmouseout="out('4038942553560789906');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 608 +                    &quot; WHERE &quot; + LauncherSettings.Favorites.ITEM_TYPE + &quot; = &quot; +                                    </span>
<span class="-1734962565729646321" onmouseenter="enter('-1734962565729646321');" onmouseout="out('-1734962565729646321');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 609 +                    LauncherSettings.Favorites.ITEM_TYPE_FOLDER + &quot;)&quot;;                                            </span>
<span class="-8852316947474253726" onmouseenter="enter('-8852316947474253726');" onmouseout="out('-8852316947474253726');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 610 +            db.execSQL(removeOrphanedFolderItems);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611          }                                                                                                         </span>
<span  style=""> 612                                                                                                                    </span>
<span class="-2961433455992777066" onmouseenter="enter('-2961433455992777066');" onmouseout="out('-2961433455992777066');" style=""> 613          private void setFlagJustLoadedOldDb() {                                                                   </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 614              String spKey = LauncherAppState.getSharedPreferencesKey();                                            </span>
<span class="-5067042237042206848" onmouseenter="enter('-5067042237042206848');" onmouseout="out('-5067042237042206848');" style=""> 615              SharedPreferences sp = mContext.getSharedPreferences(spKey, Context.MODE_PRIVATE);                    </span>
<span class="2898240485600869061" onmouseenter="enter('2898240485600869061');" onmouseout="out('2898240485600869061');" style=""> 616              SharedPreferences.Editor editor = sp.edit();                                                          </span>
<span class="6425915141570404948" onmouseenter="enter('6425915141570404948');" onmouseout="out('6425915141570404948');" style=""> 617              editor.putBoolean(UPGRADED_FROM_OLD_DATABASE, true);                                                  </span>
<span class="-757214322554182598" onmouseenter="enter('-757214322554182598');" onmouseout="out('-757214322554182598');" style=""> 618              editor.putBoolean(EMPTY_DATABASE_CREATED, false);                                                     </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 619              editor.commit();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 620          }                                                                                                         </span>
<span  style=""> 621                                                                                                                    </span>
<span class="3580170518454540960" onmouseenter="enter('3580170518454540960');" onmouseout="out('3580170518454540960');" style=""> 622          private void setFlagEmptyDbCreated() {                                                                    </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style=""> 623              String spKey = LauncherAppState.getSharedPreferencesKey();                                            </span>
<span class="-5067042237042206848" onmouseenter="enter('-5067042237042206848');" onmouseout="out('-5067042237042206848');" style=""> 624              SharedPreferences sp = mContext.getSharedPreferences(spKey, Context.MODE_PRIVATE);                    </span>
<span class="2898240485600869061" onmouseenter="enter('2898240485600869061');" onmouseout="out('2898240485600869061');" style=""> 625              SharedPreferences.Editor editor = sp.edit();                                                          </span>
<span class="-1876450541595142979" onmouseenter="enter('-1876450541595142979');" onmouseout="out('-1876450541595142979');" style=""> 626              editor.putBoolean(EMPTY_DATABASE_CREATED, true);                                                      </span>
<span class="4517855415574245319" onmouseenter="enter('4517855415574245319');" onmouseout="out('4517855415574245319');" style=""> 627              editor.putBoolean(UPGRADED_FROM_OLD_DATABASE, false);                                                 </span>
<span class="-1350952079334021013" onmouseenter="enter('-1350952079334021013');" onmouseout="out('-1350952079334021013');" style=""> 628              editor.commit();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 629          }                                                                                                         </span>
<span  style=""> 630                                                                                                                    </span>
<span class="6904570220382641884" onmouseenter="enter('6904570220382641884');" onmouseout="out('6904570220382641884');" style=""> 631          // We rearrange the screens from the old launcher                                                         </span>
<span class="4618589763737563912" onmouseenter="enter('4618589763737563912');" onmouseout="out('4618589763737563912');" style=""> 632          // 12345 -&gt; 34512                                                                                         </span>
<span class="3499405923658396159" onmouseenter="enter('3499405923658396159');" onmouseout="out('3499405923658396159');" style=""> 633          private long upgradeLauncherDb_permuteScreens(long screen) {                                              </span>
<span class="-8201094260239758609" onmouseenter="enter('-8201094260239758609');" onmouseout="out('-8201094260239758609');" style=""> 634              if (screen &gt;= 2) {                                                                                    </span>
<span class="2816670308386131226" onmouseenter="enter('2816670308386131226');" onmouseout="out('2816670308386131226');" style=""> 635                  return screen - 2;                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 636              } else {                                                                                              </span>
<span class="8757070544646185316" onmouseenter="enter('8757070544646185316');" onmouseout="out('8757070544646185316');" style=""> 637                  return screen + 3;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 638              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 639          }                                                                                                         </span>
<span  style=""> 640                                                                                                                    </span>
<span class="5501735402686311021" onmouseenter="enter('5501735402686311021');" onmouseout="out('5501735402686311021');" style=""> 641          private boolean convertDatabase(SQLiteDatabase db, Uri uri,                                               </span>
<span class="1795795513015787778" onmouseenter="enter('1795795513015787778');" onmouseout="out('1795795513015787778');" style=""> 642                                          ContentValuesCallback cb, boolean deleteRows) {                           </span>
<span class="6817282747760268981" onmouseenter="enter('6817282747760268981');" onmouseout="out('6817282747760268981');" style=""> 643              if (LOGD) Log.d(TAG, &quot;converting database from an older format, but not onUpgrade&quot;);                  </span>
<span class="-1589900657748744102" onmouseenter="enter('-1589900657748744102');" onmouseout="out('-1589900657748744102');" style=""> 644              boolean converted = false;                                                                            </span>
<span  style=""> 645                                                                                                                    </span>
<span class="-1113390730047466962" onmouseenter="enter('-1113390730047466962');" onmouseout="out('-1113390730047466962');" style=""> 646              final ContentResolver resolver = mContext.getContentResolver();                                       </span>
<span class="6499871507811129078" onmouseenter="enter('6499871507811129078');" onmouseout="out('6499871507811129078');" style=""> 647              Cursor cursor = null;                                                                                 </span>
<span  style=""> 648                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 649              try {                                                                                                 </span>
<span class="-4258104891436652364" onmouseenter="enter('-4258104891436652364');" onmouseout="out('-4258104891436652364');" style=""> 650                  cursor = resolver.query(uri, null, null, null, null);                                             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 651              } catch (Exception e) {                                                                               </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style=""> 652                  // Ignore                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653              }                                                                                                     </span>
<span  style=""> 654                                                                                                                    </span>
<span class="-8364191572061005786" onmouseenter="enter('-8364191572061005786');" onmouseout="out('-8364191572061005786');" style=""> 655              // We already have a favorites database in the old provider                                           </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style=""> 656              if (cursor != null) {                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 657                  try {                                                                                             </span>
<span class="5166436960045766511" onmouseenter="enter('5166436960045766511');" onmouseout="out('5166436960045766511');" style=""> 658                       if (cursor.getCount() &gt; 0) {                                                                 </span>
<span class="-7893872194080327470" onmouseenter="enter('-7893872194080327470');" onmouseout="out('-7893872194080327470');" style=""> 659                          converted = copyFromCursor(db, cursor, cb) &gt; 0;                                           </span>
<span class="7409985313791550694" onmouseenter="enter('7409985313791550694');" onmouseout="out('7409985313791550694');" style=""> 660                          if (converted &amp;&amp; deleteRows) {                                                            </span>
<span class="6279659027428678438" onmouseenter="enter('6279659027428678438');" onmouseout="out('6279659027428678438');" style=""> 661                              resolver.delete(uri, null, null);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 663                      }                                                                                             </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 664                  } finally {                                                                                       </span>
<span class="-598211251935134700" onmouseenter="enter('-598211251935134700');" onmouseout="out('-598211251935134700');" style=""> 665                      cursor.close();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667              }                                                                                                     </span>
<span  style=""> 668                                                                                                                    </span>
<span class="3249503320511644327" onmouseenter="enter('3249503320511644327');" onmouseout="out('3249503320511644327');" style=""> 669              if (converted) {                                                                                      </span>
<span class="8975525021270415398" onmouseenter="enter('8975525021270415398');" onmouseout="out('8975525021270415398');" style=""> 670                  // Convert widgets from this import into widgets                                                  </span>
<span class="-370034293300666463" onmouseenter="enter('-370034293300666463');" onmouseout="out('-370034293300666463');" style=""> 671                  if (LOGD) Log.d(TAG, &quot;converted and now triggering widget upgrade&quot;);                              </span>
<span class="3525871662547532743" onmouseenter="enter('3525871662547532743');" onmouseout="out('3525871662547532743');" style=""> 672                  convertWidgets(db);                                                                               </span>
<span  style=""> 673                                                                                                                    </span>
<span class="1061677975667452281" onmouseenter="enter('1061677975667452281');" onmouseout="out('1061677975667452281');" style=""> 674                  // Update max item id                                                                             </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style=""> 675                  mMaxItemId = initializeMaxItemId(db);                                                             </span>
<span class="-1050526381544019588" onmouseenter="enter('-1050526381544019588');" onmouseout="out('-1050526381544019588');" style=""> 676                  if (LOGD) Log.d(TAG, &quot;mMaxItemId: &quot; + mMaxItemId);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677              }                                                                                                     </span>
<span  style=""> 678                                                                                                                    </span>
<span class="2958977365344362767" onmouseenter="enter('2958977365344362767');" onmouseout="out('2958977365344362767');" style=""> 679              return converted;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680          }                                                                                                         </span>
<span  style=""> 681                                                                                                                    </span>
<span class="-3386136253719322573" onmouseenter="enter('-3386136253719322573');" onmouseout="out('-3386136253719322573');" style=""> 682          private int copyFromCursor(SQLiteDatabase db, Cursor c, ContentValuesCallback cb) {                       </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style=""> 683              final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);                          </span>
<span class="-4033402896828551783" onmouseenter="enter('-4033402896828551783');" onmouseout="out('-4033402896828551783');" style=""> 684              final int intentIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.INTENT);                   </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style=""> 685              final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);                     </span>
<span class="2476259323357554799" onmouseenter="enter('2476259323357554799');" onmouseout="out('2476259323357554799');" style=""> 686              final int iconTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYPE);              </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style=""> 687              final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);                       </span>
<span class="-8681284292868403609" onmouseenter="enter('-8681284292868403609');" onmouseout="out('-8681284292868403609');" style=""> 688              final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE);        </span>
<span class="6748803854718242440" onmouseenter="enter('6748803854718242440');" onmouseout="out('6748803854718242440');" style=""> 689              final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURCE);      </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 690              final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);             </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 691              final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);              </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 692              final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);                   </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 693              final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                     </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 694              final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                     </span>
<span class="2746356324732937511" onmouseenter="enter('2746356324732937511');" onmouseout="out('2746356324732937511');" style=""> 695              final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);                         </span>
<span class="8214639294219269043" onmouseenter="enter('8214639294219269043');" onmouseout="out('8214639294219269043');" style=""> 696              final int displayModeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.DISPLAY_MODE);        </span>
<span  style=""> 697                                                                                                                    </span>
<span class="-2734978488976240244" onmouseenter="enter('-2734978488976240244');" onmouseout="out('-2734978488976240244');" style=""> 698              ContentValues[] rows = new ContentValues[c.getCount()];                                               </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style=""> 699              int i = 0;                                                                                            </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 700              while (c.moveToNext()) {                                                                              </span>
<span class="-3805379390248188389" onmouseenter="enter('-3805379390248188389');" onmouseout="out('-3805379390248188389');" style=""> 701                  ContentValues values = new ContentValues(c.getColumnCount());                                     </span>
<span class="-1480489324102651074" onmouseenter="enter('-1480489324102651074');" onmouseout="out('-1480489324102651074');" style=""> 702                  values.put(LauncherSettings.Favorites._ID, c.getLong(idIndex));                                   </span>
<span class="3725422751515257721" onmouseenter="enter('3725422751515257721');" onmouseout="out('3725422751515257721');" style=""> 703                  values.put(LauncherSettings.Favorites.INTENT, c.getString(intentIndex));                          </span>
<span class="3080545696092648727" onmouseenter="enter('3080545696092648727');" onmouseout="out('3080545696092648727');" style=""> 704                  values.put(LauncherSettings.Favorites.TITLE, c.getString(titleIndex));                            </span>
<span class="1653532357893974847" onmouseenter="enter('1653532357893974847');" onmouseout="out('1653532357893974847');" style=""> 705                  values.put(LauncherSettings.Favorites.ICON_TYPE, c.getInt(iconTypeIndex));                        </span>
<span class="3857475807367449049" onmouseenter="enter('3857475807367449049');" onmouseout="out('3857475807367449049');" style=""> 706                  values.put(LauncherSettings.Favorites.ICON, c.getBlob(iconIndex));                                </span>
<span class="2521879942012579785" onmouseenter="enter('2521879942012579785');" onmouseout="out('2521879942012579785');" style=""> 707                  values.put(LauncherSettings.Favorites.ICON_PACKAGE, c.getString(iconPackageIndex));               </span>
<span class="3969193111666484842" onmouseenter="enter('3969193111666484842');" onmouseout="out('3969193111666484842');" style=""> 708                  values.put(LauncherSettings.Favorites.ICON_RESOURCE, c.getString(iconResourceIndex));             </span>
<span class="8435695874431009640" onmouseenter="enter('8435695874431009640');" onmouseout="out('8435695874431009640');" style=""> 709                  values.put(LauncherSettings.Favorites.CONTAINER, c.getInt(containerIndex));                       </span>
<span class="5147687850248676325" onmouseenter="enter('5147687850248676325');" onmouseout="out('5147687850248676325');" style=""> 710                  values.put(LauncherSettings.Favorites.ITEM_TYPE, c.getInt(itemTypeIndex));                        </span>
<span class="2567875359902744917" onmouseenter="enter('2567875359902744917');" onmouseout="out('2567875359902744917');" style=""> 711                  values.put(LauncherSettings.Favorites.APPWIDGET_ID, -1);                                          </span>
<span class="3045531455657088519" onmouseenter="enter('3045531455657088519');" onmouseout="out('3045531455657088519');" style=""> 712                  values.put(LauncherSettings.Favorites.SCREEN, c.getInt(screenIndex));                             </span>
<span class="5472332219112284812" onmouseenter="enter('5472332219112284812');" onmouseout="out('5472332219112284812');" style=""> 713                  values.put(LauncherSettings.Favorites.CELLX, c.getInt(cellXIndex));                               </span>
<span class="6120035052521227484" onmouseenter="enter('6120035052521227484');" onmouseout="out('6120035052521227484');" style=""> 714                  values.put(LauncherSettings.Favorites.CELLY, c.getInt(cellYIndex));                               </span>
<span class="-3897523412202294315" onmouseenter="enter('-3897523412202294315');" onmouseout="out('-3897523412202294315');" style=""> 715                  values.put(LauncherSettings.Favorites.URI, c.getString(uriIndex));                                </span>
<span class="2498865833812696947" onmouseenter="enter('2498865833812696947');" onmouseout="out('2498865833812696947');" style=""> 716                  values.put(LauncherSettings.Favorites.DISPLAY_MODE, c.getInt(displayModeIndex));                  </span>
<span class="-4245152200459321990" onmouseenter="enter('-4245152200459321990');" onmouseout="out('-4245152200459321990');" style=""> 717                  if (cb != null) {                                                                                 </span>
<span class="4870668330614344154" onmouseenter="enter('4870668330614344154');" onmouseout="out('4870668330614344154');" style=""> 718                      cb.onRow(values);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 719                  }                                                                                                 </span>
<span class="-995699744874558784" onmouseenter="enter('-995699744874558784');" onmouseout="out('-995699744874558784');" style=""> 720                  rows[i++] = values;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721              }                                                                                                     </span>
<span  style=""> 722                                                                                                                    </span>
<span class="-926962837754337949" onmouseenter="enter('-926962837754337949');" onmouseout="out('-926962837754337949');" style=""> 723              int total = 0;                                                                                        </span>
<span class="81359043772452968" onmouseenter="enter('81359043772452968');" onmouseout="out('81359043772452968');" style=""> 724              if (i &gt; 0) {                                                                                          </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 725                  db.beginTransaction();                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 726                  try {                                                                                             </span>
<span class="-7246991316390337770" onmouseenter="enter('-7246991316390337770');" onmouseout="out('-7246991316390337770');" style=""> 727                      int numValues = rows.length;                                                                  </span>
<span class="5056751384864650727" onmouseenter="enter('5056751384864650727');" onmouseout="out('5056751384864650727');" style=""> 728                      for (i = 0; i &lt; numValues; i++) {                                                             </span>
<span class="-1571204467017813682" onmouseenter="enter('-1571204467017813682');" onmouseout="out('-1571204467017813682');" style=""> 729                          if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, rows[i]) &lt; 0) {                     </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 730                              return 0;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 731                          } else {                                                                                  </span>
<span class="-6740236498121811269" onmouseenter="enter('-6740236498121811269');" onmouseout="out('-6740236498121811269');" style=""> 732                              total++;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 734                      }                                                                                             </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 735                      db.setTransactionSuccessful();                                                                </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 736                  } finally {                                                                                       </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 737                      db.endTransaction();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 738                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 739              }                                                                                                     </span>
<span  style=""> 740                                                                                                                    </span>
<span class="2697150586857397017" onmouseenter="enter('2697150586857397017');" onmouseout="out('2697150586857397017');" style=""> 741              return total;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 742          }                                                                                                         </span>
<span  style=""> 743                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 744          @Override                                                                                                 </span>
<span class="-4655538025867202729" onmouseenter="enter('-4655538025867202729');" onmouseout="out('-4655538025867202729');" style=""> 745          public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {                                </span>
<span class="-3337256987478665120" onmouseenter="enter('-3337256987478665120');" onmouseout="out('-3337256987478665120');" style=""> 746              if (LOGD) Log.d(TAG, &quot;onUpgrade triggered: &quot; + oldVersion);                                           </span>
<span  style=""> 747                                                                                                                    </span>
<span class="-8802630880728694567" onmouseenter="enter('-8802630880728694567');" onmouseout="out('-8802630880728694567');" style=""> 748              int version = oldVersion;                                                                             </span>
<span class="-5425159362257487314" onmouseenter="enter('-5425159362257487314');" onmouseout="out('-5425159362257487314');" style=""> 749              if (version &lt; 3) {                                                                                    </span>
<span class="-2417274034218376965" onmouseenter="enter('-2417274034218376965');" onmouseout="out('-2417274034218376965');" style=""> 750                  // upgrade 1,2 -&gt; 3 added appWidgetId column                                                      </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 751                  db.beginTransaction();                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 752                  try {                                                                                             </span>
<span class="4546757928378359668" onmouseenter="enter('4546757928378359668');" onmouseout="out('4546757928378359668');" style=""> 753                      // Insert new column for holding appWidgetIds                                                 </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style=""> 754                      db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                         </span>
<span class="6961844796110862285" onmouseenter="enter('6961844796110862285');" onmouseout="out('6961844796110862285');" style=""> 755                          &quot;ADD COLUMN appWidgetId INTEGER NOT NULL DEFAULT -1;&quot;);                                   </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 756                      db.setTransactionSuccessful();                                                                </span>
<span class="-6619390710608343599" onmouseenter="enter('-6619390710608343599');" onmouseout="out('-6619390710608343599');" style=""> 757                      version = 3;                                                                                  </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 758                  } catch (SQLException ex) {                                                                       </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 759                      // Old version remains, which means we wipe old data                                          </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 760                      Log.e(TAG, ex.getMessage(), ex);                                                              </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 761                  } finally {                                                                                       </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 762                      db.endTransaction();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763                  }                                                                                                 </span>
<span  style=""> 764                                                                                                                    </span>
<span class="1631695491108164926" onmouseenter="enter('1631695491108164926');" onmouseout="out('1631695491108164926');" style=""> 765                  // Convert existing widgets only if table upgrade was successful                                  </span>
<span class="-7093961016817560639" onmouseenter="enter('-7093961016817560639');" onmouseout="out('-7093961016817560639');" style=""> 766                  if (version == 3) {                                                                               </span>
<span class="3525871662547532743" onmouseenter="enter('3525871662547532743');" onmouseout="out('3525871662547532743');" style=""> 767                      convertWidgets(db);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769              }                                                                                                     </span>
<span  style=""> 770                                                                                                                    </span>
<span class="7123741489573350525" onmouseenter="enter('7123741489573350525');" onmouseout="out('7123741489573350525');" style=""> 771              if (version &lt; 4) {                                                                                    </span>
<span class="-1292745360473422768" onmouseenter="enter('-1292745360473422768');" onmouseout="out('-1292745360473422768');" style=""> 772                  version = 4;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 773              }                                                                                                     </span>
<span  style=""> 774                                                                                                                    </span>
<span class="6482639089576313913" onmouseenter="enter('6482639089576313913');" onmouseout="out('6482639089576313913');" style=""> 775              // Where&#x27;s version 5?                                                                                 </span>
<span class="7401379391869430937" onmouseenter="enter('7401379391869430937');" onmouseout="out('7401379391869430937');" style=""> 776              // - Donut and sholes on 2.0 shipped with version 4 of launcher1.                                     </span>
<span class="4550024416175236584" onmouseenter="enter('4550024416175236584');" onmouseout="out('4550024416175236584');" style=""> 777              // - Passion shipped on 2.1 with version 6 of launcher3                                               </span>
<span class="4643679491884513187" onmouseenter="enter('4643679491884513187');" onmouseout="out('4643679491884513187');" style=""> 778              // - Sholes shipped on 2.1r1 (aka Mr. 3) with version 5 of launcher 1                                 </span>
<span class="2361571311120014026" onmouseenter="enter('2361571311120014026');" onmouseout="out('2361571311120014026');" style=""> 779              //   but version 5 on there was the updateContactsShortcuts change                                    </span>
<span class="916676184009822657" onmouseenter="enter('916676184009822657');" onmouseout="out('916676184009822657');" style=""> 780              //   which was version 6 in launcher 2 (first shipped on passion 2.1r1).                              </span>
<span class="6967404598887501241" onmouseenter="enter('6967404598887501241');" onmouseout="out('6967404598887501241');" style=""> 781              // The updateContactsShortcuts change is idempotent, so running it twice                              </span>
<span class="-4148752693610229392" onmouseenter="enter('-4148752693610229392');" onmouseout="out('-4148752693610229392');" style=""> 782              // is okay so we&#x27;ll do that when upgrading the devices that shipped with it.                          </span>
<span class="1172017862291778682" onmouseenter="enter('1172017862291778682');" onmouseout="out('1172017862291778682');" style=""> 783              if (version &lt; 6) {                                                                                    </span>
<span class="-4714606279470185999" onmouseenter="enter('-4714606279470185999');" onmouseout="out('-4714606279470185999');" style=""> 784                  // We went from 3 to 5 screens. Move everything 1 to the right                                    </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 785                  db.beginTransaction();                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 786                  try {                                                                                             </span>
<span class="-2465047726863656951" onmouseenter="enter('-2465047726863656951');" onmouseout="out('-2465047726863656951');" style=""> 787                      db.execSQL(&quot;UPDATE favorites SET screen=(screen + 1);&quot;);                                      </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 788                      db.setTransactionSuccessful();                                                                </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 789                  } catch (SQLException ex) {                                                                       </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 790                      // Old version remains, which means we wipe old data                                          </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 791                      Log.e(TAG, ex.getMessage(), ex);                                                              </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 792                  } finally {                                                                                       </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 793                      db.endTransaction();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794                  }                                                                                                 </span>
<span  style=""> 795                                                                                                                    </span>
<span class="3359107920988636953" onmouseenter="enter('3359107920988636953');" onmouseout="out('3359107920988636953');" style=""> 796                 // We added the fast track.                                                                        </span>
<span class="6879465795009519434" onmouseenter="enter('6879465795009519434');" onmouseout="out('6879465795009519434');" style=""> 797                  if (updateContactsShortcuts(db)) {                                                                </span>
<span class="-3149591875898901499" onmouseenter="enter('-3149591875898901499');" onmouseout="out('-3149591875898901499');" style=""> 798                      version = 6;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 800              }                                                                                                     </span>
<span  style=""> 801                                                                                                                    </span>
<span class="-4096035694772114683" onmouseenter="enter('-4096035694772114683');" onmouseout="out('-4096035694772114683');" style=""> 802              if (version &lt; 7) {                                                                                    </span>
<span class="-8891998191995357912" onmouseenter="enter('-8891998191995357912');" onmouseout="out('-8891998191995357912');" style=""> 803                  // Version 7 gets rid of the special search widget.                                               </span>
<span class="3525871662547532743" onmouseenter="enter('3525871662547532743');" onmouseout="out('3525871662547532743');" style=""> 804                  convertWidgets(db);                                                                               </span>
<span class="-6951664793801221802" onmouseenter="enter('-6951664793801221802');" onmouseout="out('-6951664793801221802');" style=""> 805                  version = 7;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806              }                                                                                                     </span>
<span  style=""> 807                                                                                                                    </span>
<span class="-1248251879101833475" onmouseenter="enter('-1248251879101833475');" onmouseout="out('-1248251879101833475');" style=""> 808              if (version &lt; 8) {                                                                                    </span>
<span class="1879618913628591947" onmouseenter="enter('1879618913628591947');" onmouseout="out('1879618913628591947');" style=""> 809                  // Version 8 (froyo) has the icons all normalized.  This should                                   </span>
<span class="1410277882483187159" onmouseenter="enter('1410277882483187159');" onmouseout="out('1410277882483187159');" style=""> 810                  // already be the case in practice, but we now rely on it and don&#x27;t                               </span>
<span class="-3319181677834820205" onmouseenter="enter('-3319181677834820205');" onmouseout="out('-3319181677834820205');" style=""> 811                  // resample the images each time.                                                                 </span>
<span class="7216681148101386433" onmouseenter="enter('7216681148101386433');" onmouseout="out('7216681148101386433');" style=""> 812                  normalizeIcons(db);                                                                               </span>
<span class="6147903305187288829" onmouseenter="enter('6147903305187288829');" onmouseout="out('6147903305187288829');" style=""> 813                  version = 8;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814              }                                                                                                     </span>
<span  style=""> 815                                                                                                                    </span>
<span class="6768331519074392653" onmouseenter="enter('6768331519074392653');" onmouseout="out('6768331519074392653');" style=""> 816              if (version &lt; 9) {                                                                                    </span>
<span class="8243563970233142625" onmouseenter="enter('8243563970233142625');" onmouseout="out('8243563970233142625');" style=""> 817                  // The max id is not yet set at this point (onUpgrade is triggered in the ctor                    </span>
<span class="-4187395928482309064" onmouseenter="enter('-4187395928482309064');" onmouseout="out('-4187395928482309064');" style=""> 818                  // before it gets a change to get set, so we need to read it here when we use it)                 </span>
<span class="-8239698715373110075" onmouseenter="enter('-8239698715373110075');" onmouseout="out('-8239698715373110075');" style=""> 819                  if (mMaxItemId == -1) {                                                                           </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style=""> 820                      mMaxItemId = initializeMaxItemId(db);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 821                  }                                                                                                 </span>
<span  style=""> 822                                                                                                                    </span>
<span class="-4554457343861029044" onmouseenter="enter('-4554457343861029044');" onmouseout="out('-4554457343861029044');" style=""> 823                  // Add default hotseat icons                                                                      </span>
<span class="7897498626944800540" onmouseenter="enter('7897498626944800540');" onmouseout="out('7897498626944800540');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 824 -                loadFavorites(db, R.xml.update_workspace);                                                        </span>
<span class="-3856450728240565780" onmouseenter="enter('-3856450728240565780');" onmouseout="out('-3856450728240565780');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 825 +                loadFavorites(db, new SimpleWorkspaceLoader(this, mContext.getResources(),                        </span>
<span class="6976293370975867955" onmouseenter="enter('6976293370975867955');" onmouseout="out('6976293370975867955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 826 +                        R.xml.update_workspace));                                                                 </span>
<span class="-594084224270713246" onmouseenter="enter('-594084224270713246');" onmouseout="out('-594084224270713246');" style=""> 827                  version = 9;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 828              }                                                                                                     </span>
<span  style=""> 829                                                                                                                    </span>
<span class="-7982941174706227991" onmouseenter="enter('-7982941174706227991');" onmouseout="out('-7982941174706227991');" style=""> 830              // We bumped the version three time during JB, once to update the launch flags, once to               </span>
<span class="7433541256107994824" onmouseenter="enter('7433541256107994824');" onmouseout="out('7433541256107994824');" style=""> 831              // update the override for the default launch animation and once to set the mimetype                  </span>
<span class="4208501542736368890" onmouseenter="enter('4208501542736368890');" onmouseout="out('4208501542736368890');" style=""> 832              // to improve startup performance                                                                     </span>
<span class="3825613730133245417" onmouseenter="enter('3825613730133245417');" onmouseout="out('3825613730133245417');" style=""> 833              if (version &lt; 12) {                                                                                   </span>
<span class="5911633270557452673" onmouseenter="enter('5911633270557452673');" onmouseout="out('5911633270557452673');" style=""> 834                  // Contact shortcuts need a different set of flags to be launched now                             </span>
<span class="-5428628100729683964" onmouseenter="enter('-5428628100729683964');" onmouseout="out('-5428628100729683964');" style=""> 835                  // The updateContactsShortcuts change is idempotent, so we can keep using it like                 </span>
<span class="-2960298673245938215" onmouseenter="enter('-2960298673245938215');" onmouseout="out('-2960298673245938215');" style=""> 836                  // back in the Donut days                                                                         </span>
<span class="1461529009488007413" onmouseenter="enter('1461529009488007413');" onmouseout="out('1461529009488007413');" style=""> 837                  updateContactsShortcuts(db);                                                                      </span>
<span class="-7011217505799596620" onmouseenter="enter('-7011217505799596620');" onmouseout="out('-7011217505799596620');" style=""> 838                  version = 12;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839              }                                                                                                     </span>
<span  style=""> 840                                                                                                                    </span>
<span class="-1127321954793168309" onmouseenter="enter('-1127321954793168309');" onmouseout="out('-1127321954793168309');" style=""> 841              if (version &lt; 13) {                                                                                   </span>
<span class="6699748190088794301" onmouseenter="enter('6699748190088794301');" onmouseout="out('6699748190088794301');" style=""> 842                  // With the new shrink-wrapped and re-orderable workspaces, it makes sense                        </span>
<span class="4525637906322106897" onmouseenter="enter('4525637906322106897');" onmouseout="out('4525637906322106897');" style=""> 843                  // to persist workspace screens and their relative order.                                         </span>
<span class="-1030858145638239039" onmouseenter="enter('-1030858145638239039');" onmouseout="out('-1030858145638239039');" style=""> 844                  mMaxScreenId = 0;                                                                                 </span>
<span  style=""> 845                                                                                                                    </span>
<span class="8374575243144004387" onmouseenter="enter('8374575243144004387');" onmouseout="out('8374575243144004387');" style=""> 846                  // This will never happen in the wild, but when we switch to using workspace                      </span>
<span class="3035044480614384952" onmouseenter="enter('3035044480614384952');" onmouseout="out('3035044480614384952');" style=""> 847                  // screen ids, redo the import from old launcher.                                                 </span>
<span class="-2687113980558593499" onmouseenter="enter('-2687113980558593499');" onmouseout="out('-2687113980558593499');" style=""> 848                  sJustLoadedFromOldDb = true;                                                                      </span>
<span  style=""> 849                                                                                                                    </span>
<span class="4995577433356427338" onmouseenter="enter('4995577433356427338');" onmouseout="out('4995577433356427338');" style=""> 850                  addWorkspacesTable(db);                                                                           </span>
<span class="-1031230936357450444" onmouseenter="enter('-1031230936357450444');" onmouseout="out('-1031230936357450444');" style=""> 851                  version = 13;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852              }                                                                                                     </span>
<span  style=""> 853                                                                                                                    </span>
<span class="-3790290227926597654" onmouseenter="enter('-3790290227926597654');" onmouseout="out('-3790290227926597654');" style=""> 854              if (version &lt; 14) {                                                                                   </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 855                  db.beginTransaction();                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 856                  try {                                                                                             </span>
<span class="-3399391435431896428" onmouseenter="enter('-3399391435431896428');" onmouseout="out('-3399391435431896428');" style=""> 857                      // Insert new column for holding widget provider name                                         </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style=""> 858                      db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                         </span>
<span class="-1191376551368325446" onmouseenter="enter('-1191376551368325446');" onmouseout="out('-1191376551368325446');" style=""> 859                              &quot;ADD COLUMN appWidgetProvider TEXT;&quot;);                                                </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 860                      db.setTransactionSuccessful();                                                                </span>
<span class="-6853964272080073312" onmouseenter="enter('-6853964272080073312');" onmouseout="out('-6853964272080073312');" style=""> 861                      version = 14;                                                                                 </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 862                  } catch (SQLException ex) {                                                                       </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 863                      // Old version remains, which means we wipe old data                                          </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 864                      Log.e(TAG, ex.getMessage(), ex);                                                              </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 865                  } finally {                                                                                       </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 866                      db.endTransaction();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 867                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868              }                                                                                                     </span>
<span  style=""> 869                                                                                                                    </span>
<span class="4742571203445114157" onmouseenter="enter('4742571203445114157');" onmouseout="out('4742571203445114157');" style=""> 870              if (version &lt; 15) {                                                                                   </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 871                  db.beginTransaction();                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 872                  try {                                                                                             </span>
<span class="4980089996717210691" onmouseenter="enter('4980089996717210691');" onmouseout="out('4980089996717210691');" style=""> 873                      // Insert new column for holding update timestamp                                             </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style=""> 874                      db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                         </span>
<span class="-6587870365196648620" onmouseenter="enter('-6587870365196648620');" onmouseout="out('-6587870365196648620');" style=""> 875                              &quot;ADD COLUMN modified INTEGER NOT NULL DEFAULT 0;&quot;);                                   </span>
<span class="-134194254938928149" onmouseenter="enter('-134194254938928149');" onmouseout="out('-134194254938928149');" style=""> 876                      db.execSQL(&quot;ALTER TABLE workspaceScreens &quot; +                                                  </span>
<span class="-6587870365196648620" onmouseenter="enter('-6587870365196648620');" onmouseout="out('-6587870365196648620');" style=""> 877                              &quot;ADD COLUMN modified INTEGER NOT NULL DEFAULT 0;&quot;);                                   </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 878                      db.setTransactionSuccessful();                                                                </span>
<span class="8988210671545584151" onmouseenter="enter('8988210671545584151');" onmouseout="out('8988210671545584151');" style=""> 879                      version = 15;                                                                                 </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 880                  } catch (SQLException ex) {                                                                       </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 881                      // Old version remains, which means we wipe old data                                          </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 882                      Log.e(TAG, ex.getMessage(), ex);                                                              </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 883                  } finally {                                                                                       </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 884                      db.endTransaction();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 885                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 886              }                                                                                                     </span>
<span  style=""> 887                                                                                                                    </span>
<span  style=""> 888                                                                                                                    </span>
<span class="1076365416612257192" onmouseenter="enter('1076365416612257192');" onmouseout="out('1076365416612257192');" style=""> 889              if (version &lt; 16) {                                                                                   </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 890                  db.beginTransaction();                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 891                  try {                                                                                             </span>
<span class="4715697150589634772" onmouseenter="enter('4715697150589634772');" onmouseout="out('4715697150589634772');" style=""> 892                      // Insert new column for holding restore status                                               </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style=""> 893                      db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                         </span>
<span class="1880054724854477963" onmouseenter="enter('1880054724854477963');" onmouseout="out('1880054724854477963');" style=""> 894                              &quot;ADD COLUMN restored INTEGER NOT NULL DEFAULT 0;&quot;);                                   </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style=""> 895                      db.setTransactionSuccessful();                                                                </span>
<span class="2013829968714493382" onmouseenter="enter('2013829968714493382');" onmouseout="out('2013829968714493382');" style=""> 896                      version = 16;                                                                                 </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style=""> 897                  } catch (SQLException ex) {                                                                       </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style=""> 898                      // Old version remains, which means we wipe old data                                          </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style=""> 899                      Log.e(TAG, ex.getMessage(), ex);                                                              </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 900                  } finally {                                                                                       </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style=""> 901                      db.endTransaction();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 903              }                                                                                                     </span>
<span  style=""> 904                                                                                                                    </span>
<span class="-6756468306354214848" onmouseenter="enter('-6756468306354214848');" onmouseout="out('-6756468306354214848');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 905 +            if (version &lt; 17) {                                                                                   </span>
<span class="-8925898828002148199" onmouseenter="enter('-8925898828002148199');" onmouseout="out('-8925898828002148199');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 906 +                // We use the db version upgrade here to identify users who may not have seen                     </span>
<span class="2421121084363663195" onmouseenter="enter('2421121084363663195');" onmouseout="out('2421121084363663195');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 907 +                // clings yet (because they weren&#x27;t available), but for whom the clings are now                   </span>
<span class="-3819212007201998918" onmouseenter="enter('-3819212007201998918');" onmouseout="out('-3819212007201998918');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 908 +                // available (tablet users). Because one of the possible cling flows (migration)                  </span>
<span class="-6235100359092849352" onmouseenter="enter('-6235100359092849352');" onmouseout="out('-6235100359092849352');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 909 +                // is very destructive (wipes out workspaces), we want to prevent this from showing               </span>
<span class="-2001927373741844508" onmouseenter="enter('-2001927373741844508');" onmouseout="out('-2001927373741844508');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 910 +                // until clear data. We do so by marking that the clings have been shown.                         </span>
<span class="9168128908795605867" onmouseenter="enter('9168128908795605867');" onmouseout="out('9168128908795605867');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 911 +                LauncherClings.synchonouslyMarkFirstRunClingDismissed(mContext);                                  </span>
<span class="-3652383409155171451" onmouseenter="enter('-3652383409155171451');" onmouseout="out('-3652383409155171451');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 912 +                version = 17;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 913 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 914 +                                                                                                                  </span>
<span class="7817650129783202172" onmouseenter="enter('7817650129783202172');" onmouseout="out('7817650129783202172');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 915 +            if (version &lt; 18) {                                                                                   </span>
<span class="-5748373616457914051" onmouseenter="enter('-5748373616457914051');" onmouseout="out('-5748373616457914051');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 916 +                // No-op                                                                                          </span>
<span class="-862393984298106042" onmouseenter="enter('-862393984298106042');" onmouseout="out('-862393984298106042');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 917 +                version = 18;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 918 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 919 +                                                                                                                  </span>
<span class="-3427379715691059477" onmouseenter="enter('-3427379715691059477');" onmouseout="out('-3427379715691059477');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 920 +            if (version &lt; 19) {                                                                                   </span>
<span class="4571181047088430074" onmouseenter="enter('4571181047088430074');" onmouseout="out('4571181047088430074');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 921 +                // Due to a data loss bug, some users may have items associated with screen ids                   </span>
<span class="5190859357842058169" onmouseenter="enter('5190859357842058169');" onmouseout="out('5190859357842058169');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 922 +                // which no longer exist. Since this can cause other problems, and since the user                 </span>
<span class="-6625319271568400514" onmouseenter="enter('-6625319271568400514');" onmouseout="out('-6625319271568400514');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 923 +                // will never see these items anyway, we use database upgrade as an opportunity to                </span>
<span class="2555207824693971320" onmouseenter="enter('2555207824693971320');" onmouseout="out('2555207824693971320');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 924 +                // clean things up.                                                                               </span>
<span class="6001089319165901827" onmouseenter="enter('6001089319165901827');" onmouseout="out('6001089319165901827');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 925 +                removeOrphanedItems(db);                                                                          </span>
<span class="-8622797196606405802" onmouseenter="enter('-8622797196606405802');" onmouseout="out('-8622797196606405802');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 926 +                version = 19;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 927 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 928 +                                                                                                                  </span>
<span class="7499725911390962675" onmouseenter="enter('7499725911390962675');" onmouseout="out('7499725911390962675');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 929 +            if (version &lt; 20) {                                                                                   </span>
<span class="7544427300199377589" onmouseenter="enter('7544427300199377589');" onmouseout="out('7544427300199377589');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 930 +                // Add userId column                                                                              </span>
<span class="3648122535018422218" onmouseenter="enter('3648122535018422218');" onmouseout="out('3648122535018422218');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 931 +                if (addProfileColumn(db)) {                                                                       </span>
<span class="-3196204954256045340" onmouseenter="enter('-3196204954256045340');" onmouseout="out('-3196204954256045340');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 932 +                    version = 20;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 933 +                }                                                                                                 </span>
<span class="-7922924049235754756" onmouseenter="enter('-7922924049235754756');" onmouseout="out('-7922924049235754756');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 934 +                // else old version remains, which means we wipe old data                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 935 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 936 +                                                                                                                  </span>
<span class="114284109908766623" onmouseenter="enter('114284109908766623');" onmouseout="out('114284109908766623');" style=""> 937              if (version != DATABASE_VERSION) {                                                                    </span>
<span class="-7581134992168079572" onmouseenter="enter('-7581134992168079572');" onmouseout="out('-7581134992168079572');" style=""> 938                  Log.w(TAG, &quot;Destroying all old data.&quot;);                                                           </span>
<span class="-5910745818286558462" onmouseenter="enter('-5910745818286558462');" onmouseout="out('-5910745818286558462');" style=""> 939                  db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_FAVORITES);                                            </span>
<span class="-5689649720940552120" onmouseenter="enter('-5689649720940552120');" onmouseout="out('-5689649720940552120');" style=""> 940                  db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_WORKSPACE_SCREENS);                                    </span>
<span  style=""> 941                                                                                                                    </span>
<span class="1466158746107327510" onmouseenter="enter('1466158746107327510');" onmouseout="out('1466158746107327510');" style=""> 942                  onCreate(db);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 943              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 944 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 945 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 946 +        @Override                                                                                                 </span>
<span class="-4280970083266341851" onmouseenter="enter('-4280970083266341851');" onmouseout="out('-4280970083266341851');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 947 +        public void onDowngrade(SQLiteDatabase db, int oldVersion, int newVersion) {                              </span>
<span class="60635965215078249" onmouseenter="enter('60635965215078249');" onmouseout="out('60635965215078249');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 948 +            // This shouldn&#x27;t happen -- throw our hands up in the air and start over.                             </span>
<span class="5860333668228362795" onmouseenter="enter('5860333668228362795');" onmouseout="out('5860333668228362795');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 949 +            Log.w(TAG, &quot;Database version downgrade from: &quot; + oldVersion + &quot; to &quot; + newVersion +                   </span>
<span class="-495411336639494791" onmouseenter="enter('-495411336639494791');" onmouseout="out('-495411336639494791');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 950 +                    &quot;. Wiping databse.&quot;);                                                                         </span>
<span class="8331352315618770000" onmouseenter="enter('8331352315618770000');" onmouseout="out('8331352315618770000');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 951 +            createEmptyDB(db);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 952 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 953 +                                                                                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 954 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 955 +        /**                                                                                                       </span>
<span class="-3404890512310195543" onmouseenter="enter('-3404890512310195543');" onmouseout="out('-3404890512310195543');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 956 +         * Clears all the data for a fresh start.                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 957 +         */                                                                                                       </span>
<span class="3436200006891248330" onmouseenter="enter('3436200006891248330');" onmouseout="out('3436200006891248330');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 958 +        public void createEmptyDB(SQLiteDatabase db) {                                                            </span>
<span class="-5910745818286558462" onmouseenter="enter('-5910745818286558462');" onmouseout="out('-5910745818286558462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 959 +            db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_FAVORITES);                                                </span>
<span class="-5689649720940552120" onmouseenter="enter('-5689649720940552120');" onmouseout="out('-5689649720940552120');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 960 +            db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_WORKSPACE_SCREENS);                                        </span>
<span class="1466158746107327510" onmouseenter="enter('1466158746107327510');" onmouseout="out('1466158746107327510');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 961 +            onCreate(db);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 962 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 963 +                                                                                                                  </span>
<span class="-4559468305095454841" onmouseenter="enter('-4559468305095454841');" onmouseout="out('-4559468305095454841');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 964 +        private boolean addProfileColumn(SQLiteDatabase db) {                                                     </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 965 +            db.beginTransaction();                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 966 +            try {                                                                                                 </span>
<span class="8272328117098122260" onmouseenter="enter('8272328117098122260');" onmouseout="out('8272328117098122260');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 967 +                UserManagerCompat userManager = UserManagerCompat.getInstance(mContext);                          </span>
<span class="4088992161441330589" onmouseenter="enter('4088992161441330589');" onmouseout="out('4088992161441330589');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 968 +                // Default to the serial number of this user, for older                                           </span>
<span class="3257211239898691615" onmouseenter="enter('3257211239898691615');" onmouseout="out('3257211239898691615');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 969 +                // shortcuts.                                                                                     </span>
<span class="1087451883287607054" onmouseenter="enter('1087451883287607054');" onmouseout="out('1087451883287607054');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 970 +                long userSerialNumber = userManager.getSerialNumberForUser(                                       </span>
<span class="334342413311659427" onmouseenter="enter('334342413311659427');" onmouseout="out('334342413311659427');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 971 +                        UserHandleCompat.myUserHandle());                                                         </span>
<span class="-7537890297935646580" onmouseenter="enter('-7537890297935646580');" onmouseout="out('-7537890297935646580');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 972 +                // Insert new column for holding user serial number                                               </span>
<span class="8053875386236386954" onmouseenter="enter('8053875386236386954');" onmouseout="out('8053875386236386954');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 973 +                db.execSQL(&quot;ALTER TABLE favorites &quot; +                                                             </span>
<span class="6389325795698900878" onmouseenter="enter('6389325795698900878');" onmouseout="out('6389325795698900878');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 974 +                        &quot;ADD COLUMN profileId INTEGER DEFAULT &quot;                                                   </span>
<span class="-6027465318491077769" onmouseenter="enter('-6027465318491077769');" onmouseout="out('-6027465318491077769');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 975 +                                        + userSerialNumber + &quot;;&quot;);                                                </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 976 +                db.setTransactionSuccessful();                                                                    </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 977 +            } catch (SQLException ex) {                                                                           </span>
<span class="4871996975441455786" onmouseenter="enter('4871996975441455786');" onmouseout="out('4871996975441455786');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 978 +                // Old version remains, which means we wipe old data                                              </span>
<span class="-1305429537619041081" onmouseenter="enter('-1305429537619041081');" onmouseout="out('-1305429537619041081');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 979 +                Log.e(TAG, ex.getMessage(), ex);                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 980 +                return false;                                                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 981 +            } finally {                                                                                           </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 982 +                db.endTransaction();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 983 +            }                                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 984 +            return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985          }                                                                                                         </span>
<span  style=""> 986                                                                                                                    </span>
<span class="5499500447724615611" onmouseenter="enter('5499500447724615611');" onmouseout="out('5499500447724615611');" style=""> 987          private boolean updateContactsShortcuts(SQLiteDatabase db) {                                              </span>
<span class="-5246681680504373128" onmouseenter="enter('-5246681680504373128');" onmouseout="out('-5246681680504373128');" style=""> 988              final String selectWhere = buildOrWhereString(Favorites.ITEM_TYPE,                                    </span>
<span class="663694814520566372" onmouseenter="enter('663694814520566372');" onmouseout="out('663694814520566372');" style=""> 989                      new int[] { Favorites.ITEM_TYPE_SHORTCUT });                                                  </span>
<span  style=""> 990                                                                                                                    </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style=""> 991              Cursor c = null;                                                                                      </span>
<span class="4160534408674485909" onmouseenter="enter('4160534408674485909');" onmouseout="out('4160534408674485909');" style=""> 992              final String actionQuickContact = &quot;com.android.contacts.action.QUICK_CONTACT&quot;;                        </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style=""> 993              db.beginTransaction();                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 994              try {                                                                                                 </span>
<span class="9180803436248323281" onmouseenter="enter('9180803436248323281');" onmouseout="out('9180803436248323281');" style=""> 995                  // Select and iterate through each matching widget                                                </span>
<span class="4665304866696389373" onmouseenter="enter('4665304866696389373');" onmouseout="out('4665304866696389373');" style=""> 996                  c = db.query(TABLE_FAVORITES,                                                                     </span>
<span class="4805400763366238176" onmouseenter="enter('4805400763366238176');" onmouseout="out('4805400763366238176');" style=""> 997                          new String[] { Favorites._ID, Favorites.INTENT },                                         </span>
<span class="523753735101753681" onmouseenter="enter('523753735101753681');" onmouseout="out('523753735101753681');" style=""> 998                          selectWhere, null, null, null, null);                                                     </span>
<span class="1775362941851830832" onmouseenter="enter('1775362941851830832');" onmouseout="out('1775362941851830832');" style=""> 999                  if (c == null) return false;                                                                      </span>
<span  style="">1000                                                                                                                    </span>
<span class="5404371667899517548" onmouseenter="enter('5404371667899517548');" onmouseout="out('5404371667899517548');" style="">1001                  if (LOGD) Log.d(TAG, &quot;found upgrade cursor count=&quot; + c.getCount());                               </span>
<span  style="">1002                                                                                                                    </span>
<span class="-8932698383566096473" onmouseenter="enter('-8932698383566096473');" onmouseout="out('-8932698383566096473');" style="">1003                  final int idIndex = c.getColumnIndex(Favorites._ID);                                              </span>
<span class="-7954812698804343751" onmouseenter="enter('-7954812698804343751');" onmouseout="out('-7954812698804343751');" style="">1004                  final int intentIndex = c.getColumnIndex(Favorites.INTENT);                                       </span>
<span  style="">1005                                                                                                                    </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style="">1006                  while (c.moveToNext()) {                                                                          </span>
<span class="6875941046716392375" onmouseenter="enter('6875941046716392375');" onmouseout="out('6875941046716392375');" style="">1007                      long favoriteId = c.getLong(idIndex);                                                         </span>
<span class="3433703641134815896" onmouseenter="enter('3433703641134815896');" onmouseout="out('3433703641134815896');" style="">1008                      final String intentUri = c.getString(intentIndex);                                            </span>
<span class="6989258921658153377" onmouseenter="enter('6989258921658153377');" onmouseout="out('6989258921658153377');" style="">1009                      if (intentUri != null) {                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1010                          try {                                                                                     </span>
<span class="3224994041104735669" onmouseenter="enter('3224994041104735669');" onmouseout="out('3224994041104735669');" style="">1011                              final Intent intent = Intent.parseUri(intentUri, 0);                                  </span>
<span class="5533062021406091698" onmouseenter="enter('5533062021406091698');" onmouseout="out('5533062021406091698');" style="">1012                              android.util.Log.d(&quot;Home&quot;, intent.toString());                                        </span>
<span class="4116887484198527532" onmouseenter="enter('4116887484198527532');" onmouseout="out('4116887484198527532');" style="">1013                              final Uri uri = intent.getData();                                                     </span>
<span class="-6789028041247471756" onmouseenter="enter('-6789028041247471756');" onmouseout="out('-6789028041247471756');" style="">1014                              if (uri != null) {                                                                    </span>
<span class="-4564881707745344748" onmouseenter="enter('-4564881707745344748');" onmouseout="out('-4564881707745344748');" style="">1015                                  final String data = uri.toString();                                               </span>
<span class="-3445805239696980037" onmouseenter="enter('-3445805239696980037');" onmouseout="out('-3445805239696980037');" style="">1016                                  if ((Intent.ACTION_VIEW.equals(intent.getAction()) ||                             </span>
<span class="7710869890592179741" onmouseenter="enter('7710869890592179741');" onmouseout="out('7710869890592179741');" style="">1017                                          actionQuickContact.equals(intent.getAction())) &amp;&amp;                         </span>
<span class="1393218364054108713" onmouseenter="enter('1393218364054108713');" onmouseout="out('1393218364054108713');" style="">1018                                          (data.startsWith(&quot;content://contacts/people/&quot;) ||                         </span>
<span class="3162645299085480663" onmouseenter="enter('3162645299085480663');" onmouseout="out('3162645299085480663');" style="">1019                                          data.startsWith(&quot;content://com.android.contacts/&quot; +                       </span>
<span class="1650514809492671891" onmouseenter="enter('1650514809492671891');" onmouseout="out('1650514809492671891');" style="">1020                                                  &quot;contacts/lookup/&quot;))) {                                           </span>
<span  style="">1021                                                                                                                    </span>
<span class="-5469073692284735657" onmouseenter="enter('-5469073692284735657');" onmouseout="out('-5469073692284735657');" style="">1022                                      final Intent newIntent = new Intent(actionQuickContact);                      </span>
<span class="-5357614275754596903" onmouseenter="enter('-5357614275754596903');" onmouseout="out('-5357614275754596903');" style="">1023                                      // When starting from the launcher, start in a new, cleared task              </span>
<span class="1092229780699807802" onmouseenter="enter('1092229780699807802');" onmouseout="out('1092229780699807802');" style="">1024                                      // CLEAR_WHEN_TASK_RESET cannot reset the root of a task, so we               </span>
<span class="7141574357287672100" onmouseenter="enter('7141574357287672100');" onmouseout="out('7141574357287672100');" style="">1025                                      // clear the whole thing preemptively here since                              </span>
<span class="905959402729533596" onmouseenter="enter('905959402729533596');" onmouseout="out('905959402729533596');" style="">1026                                      // QuickContactActivity will finish itself when launching other               </span>
<span class="5522675427683616835" onmouseenter="enter('5522675427683616835');" onmouseout="out('5522675427683616835');" style="">1027                                      // detail activities.                                                         </span>
<span class="-6190018245568891923" onmouseenter="enter('-6190018245568891923');" onmouseout="out('-6190018245568891923');" style="">1028                                      newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK |                            </span>
<span class="-3783234242978371980" onmouseenter="enter('-3783234242978371980');" onmouseout="out('-3783234242978371980');" style="">1029                                              Intent.FLAG_ACTIVITY_CLEAR_TASK);                                     </span>
<span class="1401110889443382842" onmouseenter="enter('1401110889443382842');" onmouseout="out('1401110889443382842');" style="">1030                                      newIntent.putExtra(                                                           </span>
<span class="-732821300906687093" onmouseenter="enter('-732821300906687093');" onmouseout="out('-732821300906687093');" style="">1031                                              Launcher.INTENT_EXTRA_IGNORE_LAUNCH_ANIMATION, true);                 </span>
<span class="8197006267053771341" onmouseenter="enter('8197006267053771341');" onmouseout="out('8197006267053771341');" style="">1032                                      newIntent.setData(uri);                                                       </span>
<span class="-4929716720656164338" onmouseenter="enter('-4929716720656164338');" onmouseout="out('-4929716720656164338');" style="">1033                                      // Determine the type and also put that in the shortcut                       </span>
<span class="-3103165564621535069" onmouseenter="enter('-3103165564621535069');" onmouseout="out('-3103165564621535069');" style="">1034                                      // (that can speed up launch a bit)                                           </span>
<span class="-8187273376333901727" onmouseenter="enter('-8187273376333901727');" onmouseout="out('-8187273376333901727');" style="">1035                                      newIntent.setDataAndType(uri, newIntent.resolveType(mContext));               </span>
<span  style="">1036                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1037                                      final ContentValues values = new ContentValues();                             </span>
<span class="-1283328052029016277" onmouseenter="enter('-1283328052029016277');" onmouseout="out('-1283328052029016277');" style="">1038                                      values.put(LauncherSettings.Favorites.INTENT,                                 </span>
<span class="7573125619952719253" onmouseenter="enter('7573125619952719253');" onmouseout="out('7573125619952719253');" style="">1039                                              newIntent.toUri(0));                                                  </span>
<span  style="">1040                                                                                                                    </span>
<span class="-7922633388955325898" onmouseenter="enter('-7922633388955325898');" onmouseout="out('-7922633388955325898');" style="">1041                                      String updateWhere = Favorites._ID + &quot;=&quot; + favoriteId;                        </span>
<span class="6932880072735485862" onmouseenter="enter('6932880072735485862');" onmouseout="out('6932880072735485862');" style="">1042                                      db.update(TABLE_FAVORITES, values, updateWhere, null);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1043                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1044                              }                                                                                     </span>
<span class="3255801419413274971" onmouseenter="enter('3255801419413274971');" onmouseout="out('3255801419413274971');" style="">1045                          } catch (RuntimeException ex) {                                                           </span>
<span class="-70893878647116908" onmouseenter="enter('-70893878647116908');" onmouseout="out('-70893878647116908');" style="">1046                              Log.e(TAG, &quot;Problem upgrading shortcut&quot;, ex);                                         </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1047                          } catch (URISyntaxException e) {                                                          </span>
<span class="-2505277559722110760" onmouseenter="enter('-2505277559722110760');" onmouseout="out('-2505277559722110760');" style="">1048                              Log.e(TAG, &quot;Problem upgrading shortcut&quot;, e);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1049                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1050                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1051                  }                                                                                                 </span>
<span  style="">1052                                                                                                                    </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">1053                  db.setTransactionSuccessful();                                                                    </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="">1054              } catch (SQLException ex) {                                                                           </span>
<span class="983414259163783750" onmouseenter="enter('983414259163783750');" onmouseout="out('983414259163783750');" style="">1055                  Log.w(TAG, &quot;Problem while upgrading contacts&quot;, ex);                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1056                  return false;                                                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1057              } finally {                                                                                           </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">1058                  db.endTransaction();                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1059                  if (c != null) {                                                                                  </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1060                      c.close();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062              }                                                                                                     </span>
<span  style="">1063                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1064              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1065          }                                                                                                         </span>
<span  style="">1066                                                                                                                    </span>
<span class="-3532559559626407446" onmouseenter="enter('-3532559559626407446');" onmouseout="out('-3532559559626407446');" style="">1067          private void normalizeIcons(SQLiteDatabase db) {                                                          </span>
<span class="-7234787096538067088" onmouseenter="enter('-7234787096538067088');" onmouseout="out('-7234787096538067088');" style="">1068              Log.d(TAG, &quot;normalizing icons&quot;);                                                                      </span>
<span  style="">1069                                                                                                                    </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">1070              db.beginTransaction();                                                                                </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="">1071              Cursor c = null;                                                                                      </span>
<span class="-1648170941042077979" onmouseenter="enter('-1648170941042077979');" onmouseout="out('-1648170941042077979');" style="">1072              SQLiteStatement update = null;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1073              try {                                                                                                 </span>
<span class="6948794688019806881" onmouseenter="enter('6948794688019806881');" onmouseout="out('6948794688019806881');" style="">1074                  boolean logged = false;                                                                           </span>
<span class="-9148924222948643220" onmouseenter="enter('-9148924222948643220');" onmouseout="out('-9148924222948643220');" style="">1075                  update = db.compileStatement(&quot;UPDATE favorites &quot;                                                  </span>
<span class="2242861074041662063" onmouseenter="enter('2242861074041662063');" onmouseout="out('2242861074041662063');" style="">1076                          + &quot;SET icon=? WHERE _id=?&quot;);                                                              </span>
<span  style="">1077                                                                                                                    </span>
<span class="4784505011002524429" onmouseenter="enter('4784505011002524429');" onmouseout="out('4784505011002524429');" style="">1078                  c = db.rawQuery(&quot;SELECT _id, icon FROM favorites WHERE iconType=&quot; +                               </span>
<span class="-8247570245083797300" onmouseenter="enter('-8247570245083797300');" onmouseout="out('-8247570245083797300');" style="">1079                          Favorites.ICON_TYPE_BITMAP, null);                                                        </span>
<span  style="">1080                                                                                                                    </span>
<span class="-6790628464290794012" onmouseenter="enter('-6790628464290794012');" onmouseout="out('-6790628464290794012');" style="">1081                  final int idIndex = c.getColumnIndexOrThrow(Favorites._ID);                                       </span>
<span class="-8328869542966343431" onmouseenter="enter('-8328869542966343431');" onmouseout="out('-8328869542966343431');" style="">1082                  final int iconIndex = c.getColumnIndexOrThrow(Favorites.ICON);                                    </span>
<span  style="">1083                                                                                                                    </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style="">1084                  while (c.moveToNext()) {                                                                          </span>
<span class="-8135609918244190533" onmouseenter="enter('-8135609918244190533');" onmouseout="out('-8135609918244190533');" style="">1085                      long id = c.getLong(idIndex);                                                                 </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">1086                      byte[] data = c.getBlob(iconIndex);                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1087                      try {                                                                                         </span>
<span class="1618116421659449587" onmouseenter="enter('1618116421659449587');" onmouseout="out('1618116421659449587');" style="">1088                          Bitmap bitmap = Utilities.resampleIconBitmap(                                             </span>
<span class="5250274324470409582" onmouseenter="enter('5250274324470409582');" onmouseout="out('5250274324470409582');" style="">1089                                  BitmapFactory.decodeByteArray(data, 0, data.length),                              </span>
<span class="2906315698704386153" onmouseenter="enter('2906315698704386153');" onmouseout="out('2906315698704386153');" style="">1090                                  mContext);                                                                        </span>
<span class="8226127527421310456" onmouseenter="enter('8226127527421310456');" onmouseout="out('8226127527421310456');" style="">1091                          if (bitmap != null) {                                                                     </span>
<span class="-8911608565518229217" onmouseenter="enter('-8911608565518229217');" onmouseout="out('-8911608565518229217');" style="">1092                              update.bindLong(1, id);                                                               </span>
<span class="-3437982606997723715" onmouseenter="enter('-3437982606997723715');" onmouseout="out('-3437982606997723715');" style="">1093                              data = ItemInfo.flattenBitmap(bitmap);                                                </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">1094                              if (data != null) {                                                                   </span>
<span class="8709343663161385163" onmouseenter="enter('8709343663161385163');" onmouseout="out('8709343663161385163');" style="">1095                                  update.bindBlob(2, data);                                                         </span>
<span class="-6412297069984418220" onmouseenter="enter('-6412297069984418220');" onmouseout="out('-6412297069984418220');" style="">1096                                  update.execute();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1097                              }                                                                                     </span>
<span class="-2094673185475372498" onmouseenter="enter('-2094673185475372498');" onmouseout="out('-2094673185475372498');" style="">1098                              bitmap.recycle();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1099                          }                                                                                         </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1100                      } catch (Exception e) {                                                                       </span>
<span class="2850767417883926950" onmouseenter="enter('2850767417883926950');" onmouseout="out('2850767417883926950');" style="">1101                          if (!logged) {                                                                            </span>
<span class="-5248013341499561391" onmouseenter="enter('-5248013341499561391');" onmouseout="out('-5248013341499561391');" style="">1102                              Log.e(TAG, &quot;Failed normalizing icon &quot; + id, e);                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1103                          } else {                                                                                  </span>
<span class="-4114526112834757919" onmouseenter="enter('-4114526112834757919');" onmouseout="out('-4114526112834757919');" style="">1104                              Log.e(TAG, &quot;Also failed normalizing icon &quot; + id);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1105                          }                                                                                         </span>
<span class="74122904328555583" onmouseenter="enter('74122904328555583');" onmouseout="out('74122904328555583');" style="">1106                          logged = true;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1108                  }                                                                                                 </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">1109                  db.setTransactionSuccessful();                                                                    </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="">1110              } catch (SQLException ex) {                                                                           </span>
<span class="1696470604658034617" onmouseenter="enter('1696470604658034617');" onmouseout="out('1696470604658034617');" style="">1111                  Log.w(TAG, &quot;Problem while allocating appWidgetIds for existing widgets&quot;, ex);                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1112              } finally {                                                                                           </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">1113                  db.endTransaction();                                                                              </span>
<span class="-304565854195066427" onmouseenter="enter('-304565854195066427');" onmouseout="out('-304565854195066427');" style="">1114                  if (update != null) {                                                                             </span>
<span class="-3956724785259615758" onmouseenter="enter('-3956724785259615758');" onmouseout="out('-3956724785259615758');" style="">1115                      update.close();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1116                  }                                                                                                 </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1117                  if (c != null) {                                                                                  </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1118                      c.close();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1119                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1120              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121          }                                                                                                         </span>
<span  style="">1122                                                                                                                    </span>
<span class="-8543343401238088250" onmouseenter="enter('-8543343401238088250');" onmouseout="out('-8543343401238088250');" style="">1123          // Generates a new ID to use for an object in your database. This method should be only                   </span>
<span class="-535999813132446250" onmouseenter="enter('-535999813132446250');" onmouseout="out('-535999813132446250');" style="">1124          // called from the main UI thread. As an exception, we do call it when we call the                        </span>
<span class="-3416944691245960228" onmouseenter="enter('-3416944691245960228');" onmouseout="out('-3416944691245960228');" style="">1125          // constructor from the worker thread; however, this doesn&#x27;t extend until after the                       </span>
<span class="506358615447788975" onmouseenter="enter('506358615447788975');" onmouseout="out('506358615447788975');" style="">1126          // constructor is called, and we only pass a reference to LauncherProvider to LauncherApp                 </span>
<span class="7265707553198201311" onmouseenter="enter('7265707553198201311');" onmouseout="out('7265707553198201311');" style="">1127          // after that point                                                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1128 +        @Override                                                                                                 </span>
<span class="2178013549114956338" onmouseenter="enter('2178013549114956338');" onmouseout="out('2178013549114956338');" style="">1129          public long generateNewItemId() {                                                                         </span>
<span class="2999684209048406821" onmouseenter="enter('2999684209048406821');" onmouseout="out('2999684209048406821');" style="">1130              if (mMaxItemId &lt; 0) {                                                                                 </span>
<span class="-7068859972649181897" onmouseenter="enter('-7068859972649181897');" onmouseout="out('-7068859972649181897');" style="">1131                  throw new RuntimeException(&quot;Error: max item id was not initialized&quot;);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1132              }                                                                                                     </span>
<span class="-2732750815463784999" onmouseenter="enter('-2732750815463784999');" onmouseout="out('-2732750815463784999');" style="">1133              mMaxItemId += 1;                                                                                      </span>
<span class="5456580978366825274" onmouseenter="enter('5456580978366825274');" onmouseout="out('5456580978366825274');" style="">1134              return mMaxItemId;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1135 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1136 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1137 +        @Override                                                                                                 </span>
<span class="329443540154066398" onmouseenter="enter('329443540154066398');" onmouseout="out('329443540154066398');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1138 +        public long insertAndCheck(SQLiteDatabase db, ContentValues values) {                                     </span>
<span class="-1505151618823806706" onmouseenter="enter('-1505151618823806706');" onmouseout="out('-1505151618823806706');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1139 +            return dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140          }                                                                                                         </span>
<span  style="">1141                                                                                                                    </span>
<span class="8365827129597185054" onmouseenter="enter('8365827129597185054');" onmouseout="out('8365827129597185054');" style="">1142          public void updateMaxItemId(long id) {                                                                    </span>
<span class="-6849429476525109058" onmouseenter="enter('-6849429476525109058');" onmouseout="out('-6849429476525109058');" style="">1143              mMaxItemId = id + 1;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1144          }                                                                                                         </span>
<span  style="">1145                                                                                                                    </span>
<span class="-7367368828761155068" onmouseenter="enter('-7367368828761155068');" onmouseout="out('-7367368828761155068');" style="">1146          public void checkId(String table, ContentValues values) {                                                 </span>
<span class="-1608142162103033850" onmouseenter="enter('-1608142162103033850');" onmouseout="out('-1608142162103033850');" style="">1147              long id = values.getAsLong(LauncherSettings.BaseLauncherColumns._ID);                                 </span>
<span class="-6900211224990683940" onmouseenter="enter('-6900211224990683940');" onmouseout="out('-6900211224990683940');" style="">1148              if (table == LauncherProvider.TABLE_WORKSPACE_SCREENS) {                                              </span>
<span class="9109073648364222254" onmouseenter="enter('9109073648364222254');" onmouseout="out('9109073648364222254');" style="">1149                  mMaxScreenId = Math.max(id, mMaxScreenId);                                                        </span>
<span class="-6240460135729763291" onmouseenter="enter('-6240460135729763291');" onmouseout="out('-6240460135729763291');" style="">1150              }  else {                                                                                             </span>
<span class="754800730159449376" onmouseenter="enter('754800730159449376');" onmouseout="out('754800730159449376');" style="">1151                  mMaxItemId = Math.max(id, mMaxItemId);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1152              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1153          }                                                                                                         </span>
<span  style="">1154                                                                                                                    </span>
<span class="-8013451254632200820" onmouseenter="enter('-8013451254632200820');" onmouseout="out('-8013451254632200820');" style="">1155          private long initializeMaxItemId(SQLiteDatabase db) {                                                     </span>
<span class="-6457280004469744269" onmouseenter="enter('-6457280004469744269');" onmouseout="out('-6457280004469744269');" style="">1156              Cursor c = db.rawQuery(&quot;SELECT MAX(_id) FROM favorites&quot;, null);                                       </span>
<span  style="">1157                                                                                                                    </span>
<span class="-7794263827987261163" onmouseenter="enter('-7794263827987261163');" onmouseout="out('-7794263827987261163');" style="">1158              // get the result                                                                                     </span>
<span class="-7318978250879363167" onmouseenter="enter('-7318978250879363167');" onmouseout="out('-7318978250879363167');" style="">1159              final int maxIdIndex = 0;                                                                             </span>
<span class="-3996593593662644650" onmouseenter="enter('-3996593593662644650');" onmouseout="out('-3996593593662644650');" style="">1160              long id = -1;                                                                                         </span>
<span class="2006356297883322098" onmouseenter="enter('2006356297883322098');" onmouseout="out('2006356297883322098');" style="">1161              if (c != null &amp;&amp; c.moveToNext()) {                                                                    </span>
<span class="6252863560499548901" onmouseenter="enter('6252863560499548901');" onmouseout="out('6252863560499548901');" style="">1162                  id = c.getLong(maxIdIndex);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1163              }                                                                                                     </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1164              if (c != null) {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1165                  c.close();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1166              }                                                                                                     </span>
<span  style="">1167                                                                                                                    </span>
<span class="-7988774182034385411" onmouseenter="enter('-7988774182034385411');" onmouseout="out('-7988774182034385411');" style="">1168              if (id == -1) {                                                                                       </span>
<span class="-8632333559810917367" onmouseenter="enter('-8632333559810917367');" onmouseout="out('-8632333559810917367');" style="">1169                  throw new RuntimeException(&quot;Error: could not query max item id&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170              }                                                                                                     </span>
<span  style="">1171                                                                                                                    </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1172              return id;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1173          }                                                                                                         </span>
<span  style="">1174                                                                                                                    </span>
<span class="3292148501075941248" onmouseenter="enter('3292148501075941248');" onmouseout="out('3292148501075941248');" style="">1175          // Generates a new ID to use for an workspace screen in your database. This method                        </span>
<span class="8169251972405240623" onmouseenter="enter('8169251972405240623');" onmouseout="out('8169251972405240623');" style="">1176          // should be only called from the main UI thread. As an exception, we do call it when we                  </span>
<span class="5354260748737756868" onmouseenter="enter('5354260748737756868');" onmouseout="out('5354260748737756868');" style="">1177          // call the constructor from the worker thread; however, this doesn&#x27;t extend until after the              </span>
<span class="506358615447788975" onmouseenter="enter('506358615447788975');" onmouseout="out('506358615447788975');" style="">1178          // constructor is called, and we only pass a reference to LauncherProvider to LauncherApp                 </span>
<span class="7265707553198201311" onmouseenter="enter('7265707553198201311');" onmouseout="out('7265707553198201311');" style="">1179          // after that point                                                                                       </span>
<span class="3794345207933084858" onmouseenter="enter('3794345207933084858');" onmouseout="out('3794345207933084858');" style="">1180          public long generateNewScreenId() {                                                                       </span>
<span class="-2601779586206833262" onmouseenter="enter('-2601779586206833262');" onmouseout="out('-2601779586206833262');" style="">1181              if (mMaxScreenId &lt; 0) {                                                                               </span>
<span class="-8395628436366181623" onmouseenter="enter('-8395628436366181623');" onmouseout="out('-8395628436366181623');" style="">1182                  throw new RuntimeException(&quot;Error: max screen id was not initialized&quot;);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1183              }                                                                                                     </span>
<span class="-7600499966171393409" onmouseenter="enter('-7600499966171393409');" onmouseout="out('-7600499966171393409');" style="">1184              mMaxScreenId += 1;                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1185              // Log to disk                                                                                        </span>
<span class="-8761729187376845632" onmouseenter="enter('-8761729187376845632');" onmouseout="out('-8761729187376845632');" style="">1186              Launcher.addDumpLog(TAG, &quot;11683562 - generateNewScreenId(): &quot; + mMaxScreenId, true);                  </span>
<span class="-2082539956971430335" onmouseenter="enter('-2082539956971430335');" onmouseout="out('-2082539956971430335');" style="">1187              return mMaxScreenId;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1188          }                                                                                                         </span>
<span  style="">1189                                                                                                                    </span>
<span class="-7531165898061832726" onmouseenter="enter('-7531165898061832726');" onmouseout="out('-7531165898061832726');" style="">1190          public void updateMaxScreenId(long maxScreenId) {                                                         </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1191              // Log to disk                                                                                        </span>
<span class="-6999371015775210769" onmouseenter="enter('-6999371015775210769');" onmouseout="out('-6999371015775210769');" style="">1192              Launcher.addDumpLog(TAG, &quot;11683562 - updateMaxScreenId(): &quot; + maxScreenId, true);                     </span>
<span class="-5262779621072196869" onmouseenter="enter('-5262779621072196869');" onmouseout="out('-5262779621072196869');" style="">1193              mMaxScreenId = maxScreenId;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194          }                                                                                                         </span>
<span  style="">1195                                                                                                                    </span>
<span class="1340022180158952931" onmouseenter="enter('1340022180158952931');" onmouseout="out('1340022180158952931');" style="">1196          private long initializeMaxScreenId(SQLiteDatabase db) {                                                   </span>
<span class="-2625939584691052131" onmouseenter="enter('-2625939584691052131');" onmouseout="out('-2625939584691052131');" style=""><abbr title="1197              Cursor c = db.rawQuery(&quot;SELECT MAX(&quot; + LauncherSettings.WorkspaceScreens._ID + &quot;) FROM &quot; + TABLE_WORKSPACE_SCREENS, null);">1197              Cursor c = db.rawQuery(&quot;SELECT MAX(&quot; + LauncherSettings.WorkspaceScreens._ID + &quot;) FROM &quot; + TABLE_WORKS🔵</abbr></span>
<span  style="">1198                                                                                                                    </span>
<span class="-7794263827987261163" onmouseenter="enter('-7794263827987261163');" onmouseout="out('-7794263827987261163');" style="">1199              // get the result                                                                                     </span>
<span class="-7318978250879363167" onmouseenter="enter('-7318978250879363167');" onmouseout="out('-7318978250879363167');" style="">1200              final int maxIdIndex = 0;                                                                             </span>
<span class="-3996593593662644650" onmouseenter="enter('-3996593593662644650');" onmouseout="out('-3996593593662644650');" style="">1201              long id = -1;                                                                                         </span>
<span class="2006356297883322098" onmouseenter="enter('2006356297883322098');" onmouseout="out('2006356297883322098');" style="">1202              if (c != null &amp;&amp; c.moveToNext()) {                                                                    </span>
<span class="6252863560499548901" onmouseenter="enter('6252863560499548901');" onmouseout="out('6252863560499548901');" style="">1203                  id = c.getLong(maxIdIndex);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1204              }                                                                                                     </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1205              if (c != null) {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1206                  c.close();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1207              }                                                                                                     </span>
<span  style="">1208                                                                                                                    </span>
<span class="-7988774182034385411" onmouseenter="enter('-7988774182034385411');" onmouseout="out('-7988774182034385411');" style="">1209              if (id == -1) {                                                                                       </span>
<span class="5981752458110974976" onmouseenter="enter('5981752458110974976');" onmouseout="out('5981752458110974976');" style="">1210                  throw new RuntimeException(&quot;Error: could not query max screen id&quot;);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211              }                                                                                                     </span>
<span  style="">1212                                                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1213              // Log to disk                                                                                        </span>
<span class="27430974887508761" onmouseenter="enter('27430974887508761');" onmouseout="out('27430974887508761');" style="">1214              Launcher.addDumpLog(TAG, &quot;11683562 - initializeMaxScreenId(): &quot; + id, true);                          </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1215              return id;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1216          }                                                                                                         </span>
<span  style="">1217                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1218          /**                                                                                                       </span>
<span class="4503171225344397477" onmouseenter="enter('4503171225344397477');" onmouseout="out('4503171225344397477');" style="">1219           * Upgrade existing clock and photo frame widgets into their new widget                                   </span>
<span class="6424740634937576135" onmouseenter="enter('6424740634937576135');" onmouseout="out('6424740634937576135');" style="">1220           * equivalents.                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1221           */                                                                                                       </span>
<span class="743821216610300554" onmouseenter="enter('743821216610300554');" onmouseout="out('743821216610300554');" style="">1222          private void convertWidgets(SQLiteDatabase db) {                                                          </span>
<span class="328319718470950320" onmouseenter="enter('328319718470950320');" onmouseout="out('328319718470950320');" style="">1223              final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);                     </span>
<span class="-406592777847963958" onmouseenter="enter('-406592777847963958');" onmouseout="out('-406592777847963958');" style="">1224              final int[] bindSources = new int[] {                                                                 </span>
<span class="7481244370213656970" onmouseenter="enter('7481244370213656970');" onmouseout="out('7481244370213656970');" style="">1225                      Favorites.ITEM_TYPE_WIDGET_CLOCK,                                                             </span>
<span class="-4987589710545680428" onmouseenter="enter('-4987589710545680428');" onmouseout="out('-4987589710545680428');" style="">1226                      Favorites.ITEM_TYPE_WIDGET_PHOTO_FRAME,                                                       </span>
<span class="-3073892039805288641" onmouseenter="enter('-3073892039805288641');" onmouseout="out('-3073892039805288641');" style="">1227                      Favorites.ITEM_TYPE_WIDGET_SEARCH,                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1228              };                                                                                                    </span>
<span  style="">1229                                                                                                                    </span>
<span class="8819301229709462929" onmouseenter="enter('8819301229709462929');" onmouseout="out('8819301229709462929');" style="">1230              final String selectWhere = buildOrWhereString(Favorites.ITEM_TYPE, bindSources);                      </span>
<span  style="">1231                                                                                                                    </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="">1232              Cursor c = null;                                                                                      </span>
<span  style="">1233                                                                                                                    </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">1234              db.beginTransaction();                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1235              try {                                                                                                 </span>
<span class="9180803436248323281" onmouseenter="enter('9180803436248323281');" onmouseout="out('9180803436248323281');" style="">1236                  // Select and iterate through each matching widget                                                </span>
<span class="-4881978227834121924" onmouseenter="enter('-4881978227834121924');" onmouseout="out('-4881978227834121924');" style="">1237                  c = db.query(TABLE_FAVORITES, new String[] { Favorites._ID, Favorites.ITEM_TYPE },                </span>
<span class="523753735101753681" onmouseenter="enter('523753735101753681');" onmouseout="out('523753735101753681');" style="">1238                          selectWhere, null, null, null, null);                                                     </span>
<span  style="">1239                                                                                                                    </span>
<span class="5404371667899517548" onmouseenter="enter('5404371667899517548');" onmouseout="out('5404371667899517548');" style="">1240                  if (LOGD) Log.d(TAG, &quot;found upgrade cursor count=&quot; + c.getCount());                               </span>
<span  style="">1241                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1242                  final ContentValues values = new ContentValues();                                                 </span>
<span class="-3619679329231355898" onmouseenter="enter('-3619679329231355898');" onmouseout="out('-3619679329231355898');" style="">1243                  while (c != null &amp;&amp; c.moveToNext()) {                                                             </span>
<span class="707133737367195092" onmouseenter="enter('707133737367195092');" onmouseout="out('707133737367195092');" style="">1244                      long favoriteId = c.getLong(0);                                                               </span>
<span class="3900048804921934092" onmouseenter="enter('3900048804921934092');" onmouseout="out('3900048804921934092');" style="">1245                      int favoriteType = c.getInt(1);                                                               </span>
<span  style="">1246                                                                                                                    </span>
<span class="-4540349898180247220" onmouseenter="enter('-4540349898180247220');" onmouseout="out('-4540349898180247220');" style="">1247                      // Allocate and update database with new appWidgetId                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1248                      try {                                                                                         </span>
<span class="7176738113779216844" onmouseenter="enter('7176738113779216844');" onmouseout="out('7176738113779216844');" style="">1249                          int appWidgetId = mAppWidgetHost.allocateAppWidgetId();                                   </span>
<span  style="">1250                                                                                                                    </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1251                          if (LOGD) {                                                                               </span>
<span class="-1535375789049662259" onmouseenter="enter('-1535375789049662259');" onmouseout="out('-1535375789049662259');" style="">1252                              Log.d(TAG, &quot;allocated appWidgetId=&quot; + appWidgetId                                     </span>
<span class="-754391989896361890" onmouseenter="enter('-754391989896361890');" onmouseout="out('-754391989896361890');" style="">1253                                      + &quot; for favoriteId=&quot; + favoriteId);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254                          }                                                                                         </span>
<span class="6295623415315599771" onmouseenter="enter('6295623415315599771');" onmouseout="out('6295623415315599771');" style="">1255                          values.clear();                                                                           </span>
<span class="2941545182515325414" onmouseenter="enter('2941545182515325414');" onmouseout="out('2941545182515325414');" style="">1256                          values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_APPWIDGET);                           </span>
<span class="-2217583362005241057" onmouseenter="enter('-2217583362005241057');" onmouseout="out('-2217583362005241057');" style="">1257                          values.put(Favorites.APPWIDGET_ID, appWidgetId);                                          </span>
<span  style="">1258                                                                                                                    </span>
<span class="1614683704773657610" onmouseenter="enter('1614683704773657610');" onmouseout="out('1614683704773657610');" style="">1259                          // Original widgets might not have valid spans when upgrading                             </span>
<span class="6372808247890680892" onmouseenter="enter('6372808247890680892');" onmouseout="out('6372808247890680892');" style="">1260                          if (favoriteType == Favorites.ITEM_TYPE_WIDGET_SEARCH) {                                  </span>
<span class="-7334544058420176074" onmouseenter="enter('-7334544058420176074');" onmouseout="out('-7334544058420176074');" style="">1261                              values.put(LauncherSettings.Favorites.SPANX, 4);                                      </span>
<span class="-6227774068858913177" onmouseenter="enter('-6227774068858913177');" onmouseout="out('-6227774068858913177');" style="">1262                              values.put(LauncherSettings.Favorites.SPANY, 1);                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1263                          } else {                                                                                  </span>
<span class="2219786095905776818" onmouseenter="enter('2219786095905776818');" onmouseout="out('2219786095905776818');" style="">1264                              values.put(LauncherSettings.Favorites.SPANX, 2);                                      </span>
<span class="6027752313180198994" onmouseenter="enter('6027752313180198994');" onmouseout="out('6027752313180198994');" style="">1265                              values.put(LauncherSettings.Favorites.SPANY, 2);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1266                          }                                                                                         </span>
<span  style="">1267                                                                                                                    </span>
<span class="-7922633388955325898" onmouseenter="enter('-7922633388955325898');" onmouseout="out('-7922633388955325898');" style="">1268                          String updateWhere = Favorites._ID + &quot;=&quot; + favoriteId;                                    </span>
<span class="6932880072735485862" onmouseenter="enter('6932880072735485862');" onmouseout="out('6932880072735485862');" style="">1269                          db.update(TABLE_FAVORITES, values, updateWhere, null);                                    </span>
<span  style="">1270                                                                                                                    </span>
<span class="3880259377175112012" onmouseenter="enter('3880259377175112012');" onmouseout="out('3880259377175112012');" style="">1271                          if (favoriteType == Favorites.ITEM_TYPE_WIDGET_CLOCK) {                                   </span>
<span class="393760990327696266" onmouseenter="enter('393760990327696266');" onmouseout="out('393760990327696266');" style="">1272                              // TODO: check return value                                                           </span>
<span class="-7373523765032573831" onmouseenter="enter('-7373523765032573831');" onmouseout="out('-7373523765032573831');" style="">1273                              appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,                                </span>
<span class="2526235379639805468" onmouseenter="enter('2526235379639805468');" onmouseout="out('2526235379639805468');" style="">1274                                      new ComponentName(&quot;com.android.alarmclock&quot;,                                   </span>
<span class="7317042431961215300" onmouseenter="enter('7317042431961215300');" onmouseout="out('7317042431961215300');" style="">1275                                      &quot;com.android.alarmclock.AnalogAppWidgetProvider&quot;));                           </span>
<span class="6172094920381637122" onmouseenter="enter('6172094920381637122');" onmouseout="out('6172094920381637122');" style="">1276                          } else if (favoriteType == Favorites.ITEM_TYPE_WIDGET_PHOTO_FRAME) {                      </span>
<span class="393760990327696266" onmouseenter="enter('393760990327696266');" onmouseout="out('393760990327696266');" style="">1277                              // TODO: check return value                                                           </span>
<span class="-7373523765032573831" onmouseenter="enter('-7373523765032573831');" onmouseout="out('-7373523765032573831');" style="">1278                              appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,                                </span>
<span class="7711233161317097526" onmouseenter="enter('7711233161317097526');" onmouseout="out('7711233161317097526');" style="">1279                                      new ComponentName(&quot;com.android.camera&quot;,                                       </span>
<span class="8639249053579730258" onmouseenter="enter('8639249053579730258');" onmouseout="out('8639249053579730258');" style="">1280                                      &quot;com.android.camera.PhotoAppWidgetProvider&quot;));                                </span>
<span class="-7798263288808543811" onmouseenter="enter('-7798263288808543811');" onmouseout="out('-7798263288808543811');" style="">1281                          } else if (favoriteType == Favorites.ITEM_TYPE_WIDGET_SEARCH) {                           </span>
<span class="393760990327696266" onmouseenter="enter('393760990327696266');" onmouseout="out('393760990327696266');" style="">1282                              // TODO: check return value                                                           </span>
<span class="-7373523765032573831" onmouseenter="enter('-7373523765032573831');" onmouseout="out('-7373523765032573831');" style="">1283                              appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,                                </span>
<span class="5624392848756158158" onmouseenter="enter('5624392848756158158');" onmouseout="out('5624392848756158158');" style="">1284                                      getSearchWidgetProvider());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1285                          }                                                                                         </span>
<span class="3255801419413274971" onmouseenter="enter('3255801419413274971');" onmouseout="out('3255801419413274971');" style="">1286                      } catch (RuntimeException ex) {                                                               </span>
<span class="7589023920505453658" onmouseenter="enter('7589023920505453658');" onmouseout="out('7589023920505453658');" style="">1287                          Log.e(TAG, &quot;Problem allocating appWidgetId&quot;, ex);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1288                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289                  }                                                                                                 </span>
<span  style="">1290                                                                                                                    </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">1291                  db.setTransactionSuccessful();                                                                    </span>
<span class="834053493450862597" onmouseenter="enter('834053493450862597');" onmouseout="out('834053493450862597');" style="">1292              } catch (SQLException ex) {                                                                           </span>
<span class="1696470604658034617" onmouseenter="enter('1696470604658034617');" onmouseout="out('1696470604658034617');" style="">1293                  Log.w(TAG, &quot;Problem while allocating appWidgetIds for existing widgets&quot;, ex);                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1294              } finally {                                                                                           </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">1295                  db.endTransaction();                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1296                  if (c != null) {                                                                                  </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1297                      c.close();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1298                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1299              }                                                                                                     </span>
<span  style="">1300                                                                                                                    </span>
<span class="1061677975667452281" onmouseenter="enter('1061677975667452281');" onmouseout="out('1061677975667452281');" style="">1301              // Update max item id                                                                                 </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style="">1302              mMaxItemId = initializeMaxItemId(db);                                                                 </span>
<span class="-1050526381544019588" onmouseenter="enter('-1050526381544019588');" onmouseout="out('-1050526381544019588');" style="">1303              if (LOGD) Log.d(TAG, &quot;mMaxItemId: &quot; + mMaxItemId);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304          }                                                                                                         </span>
<span  style="">1305                                                                                                                    </span>
<span class="1383368615032249869" onmouseenter="enter('1383368615032249869');" onmouseout="out('1383368615032249869');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1306 +        private boolean initializeExternalAdd(ContentValues values) {                                             </span>
<span class="-4585320292275114767" onmouseenter="enter('-4585320292275114767');" onmouseout="out('-4585320292275114767');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1307 +            // 1. Ensure that externally added items have a valid item id                                         </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1308 +            long id = generateNewItemId();                                                                        </span>
<span class="-4305015780380424948" onmouseenter="enter('-4305015780380424948');" onmouseout="out('-4305015780380424948');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1309 +            values.put(LauncherSettings.Favorites._ID, id);                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1310 +                                                                                                                  </span>
<span class="5555856101718413728" onmouseenter="enter('5555856101718413728');" onmouseout="out('5555856101718413728');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1311 +            // 2. In the case of an app widget, and if no app widget id is specified, we                          </span>
<span class="5653436237424007902" onmouseenter="enter('5653436237424007902');" onmouseout="out('5653436237424007902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1312 +            // attempt allocate and bind the widget.                                                              </span>
<span class="7737959233990593661" onmouseenter="enter('7737959233990593661');" onmouseout="out('7737959233990593661');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1313 +            Integer itemType = values.getAsInteger(LauncherSettings.Favorites.ITEM_TYPE);                         </span>
<span class="2055658702897830579" onmouseenter="enter('2055658702897830579');" onmouseout="out('2055658702897830579');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1314 +            if (itemType != null &amp;&amp;                                                                               </span>
<span class="-1739021162756129174" onmouseenter="enter('-1739021162756129174');" onmouseout="out('-1739021162756129174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1315 +                    itemType.intValue() == LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET &amp;&amp;                      </span>
<span class="-6215251601594981481" onmouseenter="enter('-6215251601594981481');" onmouseout="out('-6215251601594981481');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1316 +                    !values.containsKey(LauncherSettings.Favorites.APPWIDGET_ID)) {                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1317 +                                                                                                                  </span>
<span class="328319718470950320" onmouseenter="enter('328319718470950320');" onmouseout="out('328319718470950320');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1318 +                final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);                 </span>
<span class="7884761264945585321" onmouseenter="enter('7884761264945585321');" onmouseout="out('7884761264945585321');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1319 +                ComponentName cn = ComponentName.unflattenFromString(                                             </span>
<span class="2179911768770688102" onmouseenter="enter('2179911768770688102');" onmouseout="out('2179911768770688102');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1320 +                        values.getAsString(Favorites.APPWIDGET_PROVIDER));                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1321 +                                                                                                                  </span>
<span class="3459055710499452007" onmouseenter="enter('3459055710499452007');" onmouseout="out('3459055710499452007');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1322 +                if (cn != null) {                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1323 +                    try {                                                                                         </span>
<span class="7176738113779216844" onmouseenter="enter('7176738113779216844');" onmouseout="out('7176738113779216844');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1324 +                        int appWidgetId = mAppWidgetHost.allocateAppWidgetId();                                   </span>
<span class="3122228588084428979" onmouseenter="enter('3122228588084428979');" onmouseout="out('3122228588084428979');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1325 +                        values.put(LauncherSettings.Favorites.APPWIDGET_ID, appWidgetId);                         </span>
<span class="2309614617117273311" onmouseenter="enter('2309614617117273311');" onmouseout="out('2309614617117273311');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1326 +                        if (!appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,cn)) {                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1327 +                            return false;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1328 +                        }                                                                                         </span>
<span class="1200625667814236005" onmouseenter="enter('1200625667814236005');" onmouseout="out('1200625667814236005');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1329 +                    } catch (RuntimeException e) {                                                                </span>
<span class="9049318523495391496" onmouseenter="enter('9049318523495391496');" onmouseout="out('9049318523495391496');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1330 +                        Log.e(TAG, &quot;Failed to initialize external widget&quot;, e);                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1331 +                        return false;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1332 +                    }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1333 +                } else {                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1334 +                    return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1335 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1336 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1337 +                                                                                                                  </span>
<span class="-5393917371757635815" onmouseenter="enter('-5393917371757635815');" onmouseout="out('-5393917371757635815');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1338 +            // Add screen id if not present                                                                       </span>
<span class="-8492193036384627967" onmouseenter="enter('-8492193036384627967');" onmouseout="out('-8492193036384627967');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1339 +            long screenId = values.getAsLong(LauncherSettings.Favorites.SCREEN);                                  </span>
<span class="-8472780943665027311" onmouseenter="enter('-8472780943665027311');" onmouseout="out('-8472780943665027311');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1340 +            if (!addScreenIdIfNecessary(screenId)) {                                                              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1341 +                return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1342 +            }                                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1343 +            return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1344 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1345 +                                                                                                                  </span>
<span class="7352835902307890843" onmouseenter="enter('7352835902307890843');" onmouseout="out('7352835902307890843');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1346 +        // Returns true of screen id exists, or if successfully added                                             </span>
<span class="-4057720447241324922" onmouseenter="enter('-4057720447241324922');" onmouseout="out('-4057720447241324922');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1347 +        private boolean addScreenIdIfNecessary(long screenId) {                                                   </span>
<span class="-8332527954530563349" onmouseenter="enter('-8332527954530563349');" onmouseout="out('-8332527954530563349');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1348 +            if (!hasScreenId(screenId)) {                                                                         </span>
<span class="-3380006025674561043" onmouseenter="enter('-3380006025674561043');" onmouseout="out('-3380006025674561043');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1349 +                int rank = getMaxScreenRank() + 1;                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1350 +                                                                                                                  </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1351 +                ContentValues v = new ContentValues();                                                            </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1352 +                v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                                           </span>
<span class="6806563186306365402" onmouseenter="enter('6806563186306365402');" onmouseout="out('6806563186306365402');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1353 +                v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, rank);                                       </span>
<span class="-1115795847996433461" onmouseenter="enter('-1115795847996433461');" onmouseout="out('-1115795847996433461');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1354 +                if (dbInsertAndCheck(this, getWritableDatabase(),                                                 </span>
<span class="3238415722136121635" onmouseenter="enter('3238415722136121635');" onmouseout="out('3238415722136121635');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1355 +                        TABLE_WORKSPACE_SCREENS, null, v) &lt; 0) {                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1356 +                    return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1357 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1358 +            }                                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1359 +            return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1360 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1361 +                                                                                                                  </span>
<span class="5478264759768975399" onmouseenter="enter('5478264759768975399');" onmouseout="out('5478264759768975399');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1362 +        private boolean hasScreenId(long screenId) {                                                              </span>
<span class="2098776625240525845" onmouseenter="enter('2098776625240525845');" onmouseout="out('2098776625240525845');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1363 +            SQLiteDatabase db = getWritableDatabase();                                                            </span>
<span class="7657123469267572077" onmouseenter="enter('7657123469267572077');" onmouseout="out('7657123469267572077');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1364 +            Cursor c = db.rawQuery(&quot;SELECT * FROM &quot; + TABLE_WORKSPACE_SCREENS + &quot; WHERE &quot;                         </span>
<span class="1858055579641267103" onmouseenter="enter('1858055579641267103');" onmouseout="out('1858055579641267103');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1365 +                    + LauncherSettings.WorkspaceScreens._ID + &quot; = &quot; + screenId, null);                            </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1366 +            if (c != null) {                                                                                      </span>
<span class="-7874906179005583875" onmouseenter="enter('-7874906179005583875');" onmouseout="out('-7874906179005583875');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1367 +                int count = c.getCount();                                                                         </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1368 +                c.close();                                                                                        </span>
<span class="4255567607434315929" onmouseenter="enter('4255567607434315929');" onmouseout="out('4255567607434315929');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1369 +                return count &gt; 0;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1370 +            } else {                                                                                              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1371 +                return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1372 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1373 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1374 +                                                                                                                  </span>
<span class="-2708828914383579811" onmouseenter="enter('-2708828914383579811');" onmouseout="out('-2708828914383579811');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1375 +        private int getMaxScreenRank() {                                                                          </span>
<span class="2098776625240525845" onmouseenter="enter('2098776625240525845');" onmouseout="out('2098776625240525845');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1376 +            SQLiteDatabase db = getWritableDatabase();                                                            </span>
<span class="4567502420956726358" onmouseenter="enter('4567502420956726358');" onmouseout="out('4567502420956726358');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1377 +            Cursor c = db.rawQuery(&quot;SELECT MAX(&quot; + LauncherSettings.WorkspaceScreens.SCREEN_RANK                  </span>
<span class="-851271521804486447" onmouseenter="enter('-851271521804486447');" onmouseout="out('-851271521804486447');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1378 +                    + &quot;) FROM &quot; + TABLE_WORKSPACE_SCREENS, null);                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1379 +                                                                                                                  </span>
<span class="-7794263827987261163" onmouseenter="enter('-7794263827987261163');" onmouseout="out('-7794263827987261163');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1380 +            // get the result                                                                                     </span>
<span class="-7089673966704675292" onmouseenter="enter('-7089673966704675292');" onmouseout="out('-7089673966704675292');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1381 +            final int maxRankIndex = 0;                                                                           </span>
<span class="8995972804405745177" onmouseenter="enter('8995972804405745177');" onmouseout="out('8995972804405745177');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1382 +            int rank = -1;                                                                                        </span>
<span class="2006356297883322098" onmouseenter="enter('2006356297883322098');" onmouseout="out('2006356297883322098');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1383 +            if (c != null &amp;&amp; c.moveToNext()) {                                                                    </span>
<span class="-130706833968251970" onmouseenter="enter('-130706833968251970');" onmouseout="out('-130706833968251970');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1384 +                rank = c.getInt(maxRankIndex);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1385 +            }                                                                                                     </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1386 +            if (c != null) {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1387 +                c.close();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1388 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1389 +                                                                                                                  </span>
<span class="-5061660947414305561" onmouseenter="enter('-5061660947414305561');" onmouseout="out('-5061660947414305561');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1390 +            return rank;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1391 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1392 +                                                                                                                  </span>
<span class="-1744733549489062304" onmouseenter="enter('-1744733549489062304');" onmouseout="out('-1744733549489062304');" style="">1393          private static final void beginDocument(XmlPullParser parser, String firstElementName)                    </span>
<span class="-2080139816352784756" onmouseenter="enter('-2080139816352784756');" onmouseout="out('-2080139816352784756');" style="">1394                  throws XmlPullParserException, IOException {                                                      </span>
<span class="3163913122247807134" onmouseenter="enter('3163913122247807134');" onmouseout="out('3163913122247807134');" style="">1395              int type;                                                                                             </span>
<span class="4717758523512892408" onmouseenter="enter('4717758523512892408');" onmouseout="out('4717758523512892408');" style="">1396              while ((type = parser.next()) != XmlPullParser.START_TAG                                              </span>
<span class="-8271997263827206949" onmouseenter="enter('-8271997263827206949');" onmouseout="out('-8271997263827206949');" style="">1397                      &amp;&amp; type != XmlPullParser.END_DOCUMENT) {                                                      </span>
<span class="-2934185353411265329" onmouseenter="enter('-2934185353411265329');" onmouseout="out('-2934185353411265329');" style="">1398                  ;                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1399              }                                                                                                     </span>
<span  style="">1400                                                                                                                    </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1401              if (type != XmlPullParser.START_TAG) {                                                                </span>
<span class="-8251107748224722167" onmouseenter="enter('-8251107748224722167');" onmouseout="out('-8251107748224722167');" style="">1402                  throw new XmlPullParserException(&quot;No start tag found&quot;);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1403              }                                                                                                     </span>
<span  style="">1404                                                                                                                    </span>
<span class="-245075222549821684" onmouseenter="enter('-245075222549821684');" onmouseout="out('-245075222549821684');" style="">1405              if (!parser.getName().equals(firstElementName)) {                                                     </span>
<span class="-5532803442016772615" onmouseenter="enter('-5532803442016772615');" onmouseout="out('-5532803442016772615');" style="">1406                  throw new XmlPullParserException(&quot;Unexpected start tag: found &quot; + parser.getName() +              </span>
<span class="-7049615363315893666" onmouseenter="enter('-7049615363315893666');" onmouseout="out('-7049615363315893666');" style="">1407                          &quot;, expected &quot; + firstElementName);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1409          }                                                                                                         </span>
<span  style="">1410                                                                                                                    </span>
<span class="-5649662118683980701" onmouseenter="enter('-5649662118683980701');" onmouseout="out('-5649662118683980701');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1411 +        private static Intent buildMainIntent() {                                                                 </span>
<span class="4401622020586218033" onmouseenter="enter('4401622020586218033');" onmouseout="out('4401622020586218033');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1412 +            Intent intent = new Intent(Intent.ACTION_MAIN, null);                                                 </span>
<span class="-5992732151813603475" onmouseenter="enter('-5992732151813603475');" onmouseout="out('-5992732151813603475');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1413 +            intent.addCategory(Intent.CATEGORY_LAUNCHER);                                                         </span>
<span class="7257372324830803623" onmouseenter="enter('7257372324830803623');" onmouseout="out('7257372324830803623');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1414 +            return intent;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1415 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1416 +                                                                                                                  </span>
<span class="4836207247336983218" onmouseenter="enter('4836207247336983218');" onmouseout="out('4836207247336983218');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1417 +        private int loadFavorites(SQLiteDatabase db, WorkspaceLoader loader) {                                    </span>
<span class="-517932292017625058" onmouseenter="enter('-517932292017625058');" onmouseout="out('-517932292017625058');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1418 +            ArrayList&lt;Long&gt; screenIds = new ArrayList&lt;Long&gt;();                                                    </span>
<span class="-1992683231790282850" onmouseenter="enter('-1992683231790282850');" onmouseout="out('-1992683231790282850');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1419 +            // TODO: Use multiple loaders with fall-back and transaction.                                         </span>
<span class="-198133332043015666" onmouseenter="enter('-198133332043015666');" onmouseout="out('-198133332043015666');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1420 +            int count = loader.loadLayout(db, screenIds);                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1421 +                                                                                                                  </span>
<span class="6833875387324148439" onmouseenter="enter('6833875387324148439');" onmouseout="out('6833875387324148439');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1422 +            // Add the screens specified by the items above                                                       </span>
<span class="2978539432730983390" onmouseenter="enter('2978539432730983390');" onmouseout="out('2978539432730983390');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1423 +            Collections.sort(screenIds);                                                                          </span>
<span class="5419352211080831355" onmouseenter="enter('5419352211080831355');" onmouseout="out('5419352211080831355');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1424 +            int rank = 0;                                                                                         </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1425 +            ContentValues values = new ContentValues();                                                           </span>
<span class="7152107230041712979" onmouseenter="enter('7152107230041712979');" onmouseout="out('7152107230041712979');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1426 +            for (Long id : screenIds) {                                                                           </span>
<span class="6295623415315599771" onmouseenter="enter('6295623415315599771');" onmouseout="out('6295623415315599771');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1427 +                values.clear();                                                                                   </span>
<span class="-3523466272369778299" onmouseenter="enter('-3523466272369778299');" onmouseout="out('-3523466272369778299');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1428 +                values.put(LauncherSettings.WorkspaceScreens._ID, id);                                            </span>
<span class="-4819700644573994153" onmouseenter="enter('-4819700644573994153');" onmouseout="out('-4819700644573994153');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1429 +                values.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, rank);                                  </span>
<span class="-7619796578683976012" onmouseenter="enter('-7619796578683976012');" onmouseout="out('-7619796578683976012');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1430 +                if (dbInsertAndCheck(this, db, TABLE_WORKSPACE_SCREENS, null, values) &lt; 0) {                      </span>
<span class="-4349241721568097596" onmouseenter="enter('-4349241721568097596');" onmouseout="out('-4349241721568097596');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1431 +                    throw new RuntimeException(&quot;Failed initialize screen table&quot;                                   </span>
<span class="6358788983404305676" onmouseenter="enter('6358788983404305676');" onmouseout="out('6358788983404305676');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1432 +                            + &quot;from default layout&quot;);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1433 +                }                                                                                                 </span>
<span class="-39828730810908930" onmouseenter="enter('-39828730810908930');" onmouseout="out('-39828730810908930');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1434 +                rank++;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1435 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1436 +                                                                                                                  </span>
<span class="-1496945990523812752" onmouseenter="enter('-1496945990523812752');" onmouseout="out('-1496945990523812752');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1437 +            // Ensure that the max ids are initialized                                                            </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1438 +            mMaxItemId = initializeMaxItemId(db);                                                                 </span>
<span class="4730788985981235797" onmouseenter="enter('4730788985981235797');" onmouseout="out('4730788985981235797');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1439 +            mMaxScreenId = initializeMaxScreenId(db);                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1440 +                                                                                                                  </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1441 +            return count;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1442 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1443 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1444          /**                                                                                                       </span>
<span class="4206769764705618625" onmouseenter="enter('4206769764705618625');" onmouseout="out('4206769764705618625');" style="">1445           * Loads the default set of favorite packages from an xml file.                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1446           *                                                                                                        </span>
<span class="-2594660449836918751" onmouseenter="enter('-2594660449836918751');" onmouseout="out('-2594660449836918751');" style="">1447           * @param db The database to write the values into                                                        </span>
<span class="8005887113908348021" onmouseenter="enter('8005887113908348021');" onmouseout="out('8005887113908348021');" style="">1448           * @param filterContainerId The specific container id of items to load                                    </span>
<span class="4549742419570190063" onmouseenter="enter('4549742419570190063');" onmouseout="out('4549742419570190063');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1449 +         * @param the set of screenIds which are used by the favorites                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1450           */                                                                                                       </span>
<span class="1428111697131206612" onmouseenter="enter('1428111697131206612');" onmouseout="out('1428111697131206612');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1451 -        private int loadFavorites(SQLiteDatabase db, int workspaceResourceId) {                                   </span>
<span class="4401622020586218033" onmouseenter="enter('4401622020586218033');" onmouseout="out('4401622020586218033');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1452 -            Intent intent = new Intent(Intent.ACTION_MAIN, null);                                                 </span>
<span class="-5992732151813603475" onmouseenter="enter('-5992732151813603475');" onmouseout="out('-5992732151813603475');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1453 -            intent.addCategory(Intent.CATEGORY_LAUNCHER);                                                         </span>
<span class="-5851750009676500763" onmouseenter="enter('-5851750009676500763');" onmouseout="out('-5851750009676500763');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1454 +        private int loadFavoritesRecursive(SQLiteDatabase db, Resources res, int workspaceResourceId,             </span>
<span class="-7355860442479967281" onmouseenter="enter('-7355860442479967281');" onmouseout="out('-7355860442479967281');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1455 +                ArrayList&lt;Long&gt; screenIds) {                                                                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1456 +                                                                                                                  </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">1457              ContentValues values = new ContentValues();                                                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1458 -                                                                                                                  </span>
<span class="-1772060661175704007" onmouseenter="enter('-1772060661175704007');" onmouseout="out('-1772060661175704007');" style="">1459              if (LOGD) Log.v(TAG, String.format(&quot;Loading favorites from resid=0x%08x&quot;, workspaceResourceId));      </span>
<span  style="">1460                                                                                                                    </span>
<span class="4897942292935594916" onmouseenter="enter('4897942292935594916');" onmouseout="out('4897942292935594916');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1461 -            PackageManager packageManager = mContext.getPackageManager();                                         </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1462 -            int i = 0;                                                                                            </span>
<span class="-7835997453776942924" onmouseenter="enter('-7835997453776942924');" onmouseout="out('-7835997453776942924');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1463 +            int count = 0;                                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1464              try {                                                                                                 </span>
<span class="744334958857389934" onmouseenter="enter('744334958857389934');" onmouseout="out('744334958857389934');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1465 -                XmlResourceParser parser = mContext.getResources().getXml(workspaceResourceId);                   </span>
<span class="-4674988124498863174" onmouseenter="enter('-4674988124498863174');" onmouseout="out('-4674988124498863174');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1466 -                AttributeSet attrs = Xml.asAttributeSet(parser);                                                  </span>
<span class="9080417688274832266" onmouseenter="enter('9080417688274832266');" onmouseout="out('9080417688274832266');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1467 +                XmlResourceParser parser = res.getXml(workspaceResourceId);                                       </span>
<span class="-4849646726062265204" onmouseenter="enter('-4849646726062265204');" onmouseout="out('-4849646726062265204');" style="">1468                  beginDocument(parser, TAG_FAVORITES);                                                             </span>
<span  style="">1469                                                                                                                    </span>
<span class="-1796733801910506416" onmouseenter="enter('-1796733801910506416');" onmouseout="out('-1796733801910506416');" style="">1470                  final int depth = parser.getDepth();                                                              </span>
<span  style="">1471                                                                                                                    </span>
<span class="3163913122247807134" onmouseenter="enter('3163913122247807134');" onmouseout="out('3163913122247807134');" style="">1472                  int type;                                                                                         </span>
<span class="-1784597901533800040" onmouseenter="enter('-1784597901533800040');" onmouseout="out('-1784597901533800040');" style="">1473                  while (((type = parser.next()) != XmlPullParser.END_TAG ||                                        </span>
<span class="9136127903140816012" onmouseenter="enter('9136127903140816012');" onmouseout="out('9136127903140816012');" style="">1474                          parser.getDepth() &gt; depth) &amp;&amp; type != XmlPullParser.END_DOCUMENT) {                       </span>
<span  style="">1475                                                                                                                    </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1476                      if (type != XmlPullParser.START_TAG) {                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1477                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1478                      }                                                                                             </span>
<span  style="">1479                                                                                                                    </span>
<span class="7899804433438794249" onmouseenter="enter('7899804433438794249');" onmouseout="out('7899804433438794249');" style="">1480                      boolean added = false;                                                                        </span>
<span class="6953602109235869781" onmouseenter="enter('6953602109235869781');" onmouseout="out('6953602109235869781');" style="">1481                      final String name = parser.getName();                                                         </span>
<span  style="">1482                                                                                                                    </span>
<span class="7121161214099969316" onmouseenter="enter('7121161214099969316');" onmouseout="out('7121161214099969316');" style="">1483                      if (TAG_INCLUDE.equals(name)) {                                                               </span>
<span class="7125287120020170718" onmouseenter="enter('7125287120020170718');" onmouseout="out('7125287120020170718');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1484 -                        final TypedArray a = mContext.obtainStyledAttributes(attrs, R.styleable.Include);         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1485 -                                                                                                                  </span>
<span class="-7509837850774611792" onmouseenter="enter('-7509837850774611792');" onmouseout="out('-7509837850774611792');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1486 -                        final int resId = a.getResourceId(R.styleable.Include_workspace, 0);                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1487 +                                                                                                                  </span>
<span class="7620964305819267835" onmouseenter="enter('7620964305819267835');" onmouseout="out('7620964305819267835');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1488 +                        final int resId = getAttributeResourceValue(parser, ATTR_WORKSPACE, 0);                   </span>
<span  style="">1489                                                                                                                    </span>
<span class="5009305539342447979" onmouseenter="enter('5009305539342447979');" onmouseout="out('5009305539342447979');" style="">1490                          if (LOGD) Log.v(TAG, String.format((&quot;%&quot; + (2*(depth+1)) + &quot;s&lt;include workspace=%08x&gt;&quot;),   </span>
<span class="-5278900941069439400" onmouseenter="enter('-5278900941069439400');" onmouseout="out('-5278900941069439400');" style="">1491                                  &quot;&quot;, resId));                                                                      </span>
<span  style="">1492                                                                                                                    </span>
<span class="7300117017390195413" onmouseenter="enter('7300117017390195413');" onmouseout="out('7300117017390195413');" style="">1493                          if (resId != 0 &amp;&amp; resId != workspaceResourceId) {                                         </span>
<span class="-8087579639415016515" onmouseenter="enter('-8087579639415016515');" onmouseout="out('-8087579639415016515');" style="">1494                              // recursively load some more favorites, why not?                                     </span>
<span class="-5311425501390715099" onmouseenter="enter('-5311425501390715099');" onmouseout="out('-5311425501390715099');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1495 -                            i += loadFavorites(db, resId);                                                        </span>
<span class="-9207845823385341803" onmouseenter="enter('-9207845823385341803');" onmouseout="out('-9207845823385341803');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1496 +                            count += loadFavoritesRecursive(db, res, resId, screenIds);                           </span>
<span class="8338453324960120992" onmouseenter="enter('8338453324960120992');" onmouseout="out('8338453324960120992');" style="">1497                              added = false;                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1498                          } else {                                                                                  </span>
<span class="6706749223879539247" onmouseenter="enter('6706749223879539247');" onmouseout="out('6706749223879539247');" style="">1499                              Log.w(TAG, String.format(&quot;Skipping &lt;include workspace=0x%08x&gt;&quot;, resId));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1500                          }                                                                                         </span>
<span  style="">1501                                                                                                                    </span>
<span class="7664438635535969272" onmouseenter="enter('7664438635535969272');" onmouseout="out('7664438635535969272');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1502 -                        a.recycle();                                                                              </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1503 -                                                                                                                  </span>
<span class="-989461511285824675" onmouseenter="enter('-989461511285824675');" onmouseout="out('-989461511285824675');" style="">1504                          if (LOGD) Log.v(TAG, String.format((&quot;%&quot; + (2*(depth+1)) + &quot;s&lt;/include&gt;&quot;), &quot;&quot;));           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1505                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1506                      }                                                                                             </span>
<span  style="">1507                                                                                                                    </span>
<span class="5686456002215125351" onmouseenter="enter('5686456002215125351');" onmouseout="out('5686456002215125351');" style="">1508                      // Assuming it&#x27;s a &lt;favorite&gt; at this point                                                   </span>
<span class="-3472046136258195211" onmouseenter="enter('-3472046136258195211');" onmouseout="out('-3472046136258195211');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1509 -                    TypedArray a = mContext.obtainStyledAttributes(attrs, R.styleable.Favorite);                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1510 -                                                                                                                  </span>
<span class="8876313664838771927" onmouseenter="enter('8876313664838771927');" onmouseout="out('8876313664838771927');" style="">1511                      long container = LauncherSettings.Favorites.CONTAINER_DESKTOP;                                </span>
<span class="-2386259174734624476" onmouseenter="enter('-2386259174734624476');" onmouseout="out('-2386259174734624476');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1512 -                    if (a.hasValue(R.styleable.Favorite_container)) {                                             </span>
<span class="-4437733699459236422" onmouseenter="enter('-4437733699459236422');" onmouseout="out('-4437733699459236422');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1513 -                        container = Long.valueOf(a.getString(R.styleable.Favorite_container));                    </span>
<span class="-8953477941003932421" onmouseenter="enter('-8953477941003932421');" onmouseout="out('-8953477941003932421');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1514 +                    String strContainer = getAttributeValue(parser, ATTR_CONTAINER);                              </span>
<span class="4899636274002469854" onmouseenter="enter('4899636274002469854');" onmouseout="out('4899636274002469854');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1515 +                    if (strContainer != null) {                                                                   </span>
<span class="-6141382636405232855" onmouseenter="enter('-6141382636405232855');" onmouseout="out('-6141382636405232855');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1516 +                        container = Long.valueOf(strContainer);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1517                      }                                                                                             </span>
<span  style="">1518                                                                                                                    </span>
<span class="-3850053189433257065" onmouseenter="enter('-3850053189433257065');" onmouseout="out('-3850053189433257065');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1519 -                    String screen = a.getString(R.styleable.Favorite_screen);                                     </span>
<span class="6869840214173306085" onmouseenter="enter('6869840214173306085');" onmouseout="out('6869840214173306085');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1520 -                    String x = a.getString(R.styleable.Favorite_x);                                               </span>
<span class="-4079244190625226370" onmouseenter="enter('-4079244190625226370');" onmouseout="out('-4079244190625226370');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1521 -                    String y = a.getString(R.styleable.Favorite_y);                                               </span>
<span class="5916925922507241391" onmouseenter="enter('5916925922507241391');" onmouseout="out('5916925922507241391');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1522 +                    String screen = getAttributeValue(parser, ATTR_SCREEN);                                       </span>
<span class="-5754720008436749732" onmouseenter="enter('-5754720008436749732');" onmouseout="out('-5754720008436749732');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1523 +                    String x = getAttributeValue(parser, ATTR_X);                                                 </span>
<span class="6090763299686616782" onmouseenter="enter('6090763299686616782');" onmouseout="out('6090763299686616782');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1524 +                    String y = getAttributeValue(parser, ATTR_Y);                                                 </span>
<span  style="">1525                                                                                                                    </span>
<span class="6295623415315599771" onmouseenter="enter('6295623415315599771');" onmouseout="out('6295623415315599771');" style="">1526                      values.clear();                                                                               </span>
<span class="7684212050113439789" onmouseenter="enter('7684212050113439789');" onmouseout="out('7684212050113439789');" style="">1527                      values.put(LauncherSettings.Favorites.CONTAINER, container);                                  </span>
<span class="4993135311254983149" onmouseenter="enter('4993135311254983149');" onmouseout="out('4993135311254983149');" style="">1528                      values.put(LauncherSettings.Favorites.SCREEN, screen);                                        </span>
<span class="4999709216465616432" onmouseenter="enter('4999709216465616432');" onmouseout="out('4999709216465616432');" style="">1529                      values.put(LauncherSettings.Favorites.CELLX, x);                                              </span>
<span class="-2755037476439373326" onmouseenter="enter('-2755037476439373326');" onmouseout="out('-2755037476439373326');" style="">1530                      values.put(LauncherSettings.Favorites.CELLY, y);                                              </span>
<span  style="">1531                                                                                                                    </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="">1532                      if (LOGD) {                                                                                   </span>
<span class="-1282281292185510970" onmouseenter="enter('-1282281292185510970');" onmouseout="out('-1282281292185510970');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1533 -                        final String title = a.getString(R.styleable.Favorite_title);                             </span>
<span class="-5138329760923294537" onmouseenter="enter('-5138329760923294537');" onmouseout="out('-5138329760923294537');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1534 -                        final String pkg = a.getString(R.styleable.Favorite_packageName);                         </span>
<span class="5581535071295035524" onmouseenter="enter('5581535071295035524');" onmouseout="out('5581535071295035524');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1535 +                        final String title = getAttributeValue(parser, ATTR_TITLE);                               </span>
<span class="-615495327061628051" onmouseenter="enter('-615495327061628051');" onmouseout="out('-615495327061628051');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1536 +                        final String pkg = getAttributeValue(parser, ATTR_PACKAGE_NAME);                          </span>
<span class="-3502249795865144059" onmouseenter="enter('-3502249795865144059');" onmouseout="out('-3502249795865144059');" style="">1537                          final String something = title != null ? title : pkg;                                     </span>
<span class="-7031637576101422130" onmouseenter="enter('-7031637576101422130');" onmouseout="out('-7031637576101422130');" style="">1538                          Log.v(TAG, String.format(                                                                 </span>
<span class="-4069192886577727005" onmouseenter="enter('-4069192886577727005');" onmouseout="out('-4069192886577727005');" style="">1539                                  (&quot;%&quot; + (2*(depth+1)) + &quot;s&lt;%s%s c=%d s=%s x=%s y=%s&gt;&quot;),                            </span>
<span class="-7745111780849965500" onmouseenter="enter('-7745111780849965500');" onmouseout="out('-7745111780849965500');" style="">1540                                  &quot;&quot;, name,                                                                         </span>
<span class="-7186929577255479626" onmouseenter="enter('-7186929577255479626');" onmouseout="out('-7186929577255479626');" style="">1541                                  (something == null ? &quot;&quot; : (&quot; \&quot;&quot; + something + &quot;\&quot;&quot;)),                            </span>
<span class="-8681909485021689501" onmouseenter="enter('-8681909485021689501');" onmouseout="out('-8681909485021689501');" style="">1542                                  container, screen, x, y));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1543                      }                                                                                             </span>
<span  style="">1544                                                                                                                    </span>
<span class="-7400969844258462201" onmouseenter="enter('-7400969844258462201');" onmouseout="out('-7400969844258462201');" style="">1545                      if (TAG_FAVORITE.equals(name)) {                                                              </span>
<span class="-4926241777114244494" onmouseenter="enter('-4926241777114244494');" onmouseout="out('-4926241777114244494');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1546 -                        long id = addAppShortcut(db, values, a, packageManager, intent);                          </span>
<span class="-3583571169175857402" onmouseenter="enter('-3583571169175857402');" onmouseout="out('-3583571169175857402');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1547 +                        long id = addAppShortcut(db, values, parser);                                             </span>
<span class="2121580753897534719" onmouseenter="enter('2121580753897534719');" onmouseout="out('2121580753897534719');" style="">1548                          added = id &gt;= 0;                                                                          </span>
<span class="7205653811887582501" onmouseenter="enter('7205653811887582501');" onmouseout="out('7205653811887582501');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1549 -                    } else if (TAG_SEARCH.equals(name)) {                                                         </span>
<span class="-7002882710387288912" onmouseenter="enter('-7002882710387288912');" onmouseout="out('-7002882710387288912');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1550 -                        added = addSearchWidget(db, values);                                                      </span>
<span class="9070956385143199837" onmouseenter="enter('9070956385143199837');" onmouseout="out('9070956385143199837');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1551 -                    } else if (TAG_CLOCK.equals(name)) {                                                          </span>
<span class="-9050166602320696168" onmouseenter="enter('-9050166602320696168');" onmouseout="out('-9050166602320696168');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1552 -                        added = addClockWidget(db, values);                                                       </span>
<span class="-5542257851689667934" onmouseenter="enter('-5542257851689667934');" onmouseout="out('-5542257851689667934');" style="">1553                      } else if (TAG_APPWIDGET.equals(name)) {                                                      </span>
<span class="7257173476314309907" onmouseenter="enter('7257173476314309907');" onmouseout="out('7257173476314309907');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1554 -                        added = addAppWidget(parser, attrs, type, db, values, a, packageManager);                 </span>
<span class="-794100780748822491" onmouseenter="enter('-794100780748822491');" onmouseout="out('-794100780748822491');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1555 +                        added = addAppWidget(parser, type, db, values);                                           </span>
<span class="5570272146833981560" onmouseenter="enter('5570272146833981560');" onmouseout="out('5570272146833981560');" style="">1556                      } else if (TAG_SHORTCUT.equals(name)) {                                                       </span>
<span class="-5582739188483559781" onmouseenter="enter('-5582739188483559781');" onmouseout="out('-5582739188483559781');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1557 -                        long id = addUriShortcut(db, values, a);                                                  </span>
<span class="8022235443544838146" onmouseenter="enter('8022235443544838146');" onmouseout="out('8022235443544838146');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1558 +                        long id = addUriShortcut(db, values, res, parser);                                        </span>
<span class="2121580753897534719" onmouseenter="enter('2121580753897534719');" onmouseout="out('2121580753897534719');" style="">1559                          added = id &gt;= 0;                                                                          </span>
<span class="-6568529531723639383" onmouseenter="enter('-6568529531723639383');" onmouseout="out('-6568529531723639383');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1560 -                    } else if (TAG_FOLDER.equals(name)) {                                                         </span>
<span class="1044437851216096859" onmouseenter="enter('1044437851216096859');" onmouseout="out('1044437851216096859');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1561 -                        String title;                                                                             </span>
<span class="3657080476503207797" onmouseenter="enter('3657080476503207797');" onmouseout="out('3657080476503207797');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1562 -                        int titleResId =  a.getResourceId(R.styleable.Favorite_title, -1);                        </span>
<span class="-5825148607948784422" onmouseenter="enter('-5825148607948784422');" onmouseout="out('-5825148607948784422');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1563 -                        if (titleResId != -1) {                                                                   </span>
<span class="-4245497143434053708" onmouseenter="enter('-4245497143434053708');" onmouseout="out('-4245497143434053708');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1564 -                            title = mContext.getResources().getString(titleResId);                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1565 -                        } else {                                                                                  </span>
<span class="2584661107016073001" onmouseenter="enter('2584661107016073001');" onmouseout="out('2584661107016073001');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1566 -                            title = mContext.getResources().getString(R.string.folder_name);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1567 -                        }                                                                                         </span>
<span class="-1277878518627790922" onmouseenter="enter('-1277878518627790922');" onmouseout="out('-1277878518627790922');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1568 -                        values.put(LauncherSettings.Favorites.TITLE, title);                                      </span>
<span class="-8989728490994499632" onmouseenter="enter('-8989728490994499632');" onmouseout="out('-8989728490994499632');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1569 -                        long folderId = addFolder(db, values);                                                    </span>
<span class="561098116023780225" onmouseenter="enter('561098116023780225');" onmouseout="out('561098116023780225');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1570 -                        added = folderId &gt;= 0;                                                                    </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1571 -                                                                                                                  </span>
<span class="70925917645446442" onmouseenter="enter('70925917645446442');" onmouseout="out('70925917645446442');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1572 -                        ArrayList&lt;Long&gt; folderItems = new ArrayList&lt;Long&gt;();                                      </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1573 -                                                                                                                  </span>
<span class="-3224406969225576043" onmouseenter="enter('-3224406969225576043');" onmouseout="out('-3224406969225576043');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1574 -                        int folderDepth = parser.getDepth();                                                      </span>
<span class="-3245733975064069652" onmouseenter="enter('-3245733975064069652');" onmouseout="out('-3245733975064069652');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1575 +                    } else if (TAG_RESOLVE.equals(name)) {                                                        </span>
<span class="-6168769572729066790" onmouseenter="enter('-6168769572729066790');" onmouseout="out('-6168769572729066790');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1576 +                        // This looks through the contained favorites (or meta-favorites) and                     </span>
<span class="-5232686756441164968" onmouseenter="enter('-5232686756441164968');" onmouseout="out('-5232686756441164968');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1577 +                        // attempts to add them as shortcuts in the fallback group&#x27;s location                     </span>
<span class="-3164145926865392434" onmouseenter="enter('-3164145926865392434');" onmouseout="out('-3164145926865392434');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1578 +                        // until one is added successfully.                                                       </span>
<span class="8338453324960120992" onmouseenter="enter('8338453324960120992');" onmouseout="out('8338453324960120992');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1579 +                        added = false;                                                                            </span>
<span class="-7289409140421595237" onmouseenter="enter('-7289409140421595237');" onmouseout="out('-7289409140421595237');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1580 +                        final int groupDepth = parser.getDepth();                                                 </span>
<span class="-2406917717669951461" onmouseenter="enter('-2406917717669951461');" onmouseout="out('-2406917717669951461');" style="">1581                          while ((type = parser.next()) != XmlPullParser.END_TAG ||                                 </span>
<span class="4017526817899016645" onmouseenter="enter('4017526817899016645');" onmouseout="out('4017526817899016645');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1582 -                                parser.getDepth() &gt; folderDepth) {                                                </span>
<span class="8687802670126733847" onmouseenter="enter('8687802670126733847');" onmouseout="out('8687802670126733847');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1583 +                                parser.getDepth() &gt; groupDepth) {                                                 </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">1584                              if (type != XmlPullParser.START_TAG) {                                                </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1585                                  continue;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586                              }                                                                                     </span>
<span class="6049664116190653882" onmouseenter="enter('6049664116190653882');" onmouseout="out('6049664116190653882');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1587 -                            final String folder_item_name = parser.getName();                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1588 -                                                                                                                  </span>
<span class="-8209426672996454391" onmouseenter="enter('-8209426672996454391');" onmouseout="out('-8209426672996454391');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1589 -                            TypedArray ar = mContext.obtainStyledAttributes(attrs,                                </span>
<span class="2979473728286159976" onmouseenter="enter('2979473728286159976');" onmouseout="out('2979473728286159976');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1590 -                                    R.styleable.Favorite);                                                        </span>
<span class="6295623415315599771" onmouseenter="enter('6295623415315599771');" onmouseout="out('6295623415315599771');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1591 -                            values.clear();                                                                       </span>
<span class="3435248986745138572" onmouseenter="enter('3435248986745138572');" onmouseout="out('3435248986745138572');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1592 -                            values.put(LauncherSettings.Favorites.CONTAINER, folderId);                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1593 -                                                                                                                  </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1594 -                            if (LOGD) {                                                                           </span>
<span class="-8315190001089294082" onmouseenter="enter('-8315190001089294082');" onmouseout="out('-8315190001089294082');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1595 -                                final String pkg = ar.getString(R.styleable.Favorite_packageName);                </span>
<span class="4962854208642507530" onmouseenter="enter('4962854208642507530');" onmouseout="out('4962854208642507530');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1596 -                                final String uri = ar.getString(R.styleable.Favorite_uri);                        </span>
<span class="3789876690425623667" onmouseenter="enter('3789876690425623667');" onmouseout="out('3789876690425623667');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1597 -                                Log.v(TAG, String.format((&quot;%&quot; + (2*(folderDepth+1)) + &quot;s&lt;%s \&quot;%s\&quot;&gt;&quot;), &quot;&quot;,        </span>
<span class="3215946477589589471" onmouseenter="enter('3215946477589589471');" onmouseout="out('3215946477589589471');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1598 -                                        folder_item_name, uri != null ? uri : pkg));                              </span>
<span class="-4826163157610997597" onmouseenter="enter('-4826163157610997597');" onmouseout="out('-4826163157610997597');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1599 +                            final String fallback_item_name = parser.getName();                                   </span>
<span class="-2022810481919856801" onmouseenter="enter('-2022810481919856801');" onmouseout="out('-2022810481919856801');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1600 +                            if (!added) {                                                                         </span>
<span class="3394509129787922860" onmouseenter="enter('3394509129787922860');" onmouseout="out('3394509129787922860');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1601 +                                if (TAG_FAVORITE.equals(fallback_item_name)) {                                    </span>
<span class="-1179477971979967689" onmouseenter="enter('-1179477971979967689');" onmouseout="out('-1179477971979967689');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1602 +                                    final long id = addAppShortcut(db, values, parser);                           </span>
<span class="2121580753897534719" onmouseenter="enter('2121580753897534719');" onmouseout="out('2121580753897534719');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1603 +                                    added = id &gt;= 0;                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1604 +                                } else {                                                                          </span>
<span class="-6448281100759930849" onmouseenter="enter('-6448281100759930849');" onmouseout="out('-6448281100759930849');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1605 +                                    Log.e(TAG, &quot;Fallback groups can contain only favorites, found &quot;               </span>
<span class="1123550495059434881" onmouseenter="enter('1123550495059434881');" onmouseout="out('1123550495059434881');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1606 +                                            + fallback_item_name);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1607 +                                }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1608                              }                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1609 -                                                                                                                  </span>
<span class="-2200376660882657212" onmouseenter="enter('-2200376660882657212');" onmouseout="out('-2200376660882657212');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1610 -                            if (TAG_FAVORITE.equals(folder_item_name) &amp;&amp; folderId &gt;= 0) {                         </span>
<span class="-5597708170790486254" onmouseenter="enter('-5597708170790486254');" onmouseout="out('-5597708170790486254');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1611 -                                long id =                                                                         </span>
<span class="4011474818158177893" onmouseenter="enter('4011474818158177893');" onmouseout="out('4011474818158177893');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1612 -                                    addAppShortcut(db, values, ar, packageManager, intent);                       </span>
<span class="-6131649387216162152" onmouseenter="enter('-6131649387216162152');" onmouseout="out('-6131649387216162152');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1613 -                                if (id &gt;= 0) {                                                                    </span>
<span class="-1096537071693041204" onmouseenter="enter('-1096537071693041204');" onmouseout="out('-1096537071693041204');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1614 -                                    folderItems.add(id);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1615 -                                }                                                                                 </span>
<span class="-8705145113140224718" onmouseenter="enter('-8705145113140224718');" onmouseout="out('-8705145113140224718');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1616 -                            } else if (TAG_SHORTCUT.equals(folder_item_name) &amp;&amp; folderId &gt;= 0) {                  </span>
<span class="-2777744337232741884" onmouseenter="enter('-2777744337232741884');" onmouseout="out('-2777744337232741884');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1617 -                                long id = addUriShortcut(db, values, ar);                                         </span>
<span class="-6131649387216162152" onmouseenter="enter('-6131649387216162152');" onmouseout="out('-6131649387216162152');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1618 -                                if (id &gt;= 0) {                                                                    </span>
<span class="-1096537071693041204" onmouseenter="enter('-1096537071693041204');" onmouseout="out('-1096537071693041204');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1619 -                                    folderItems.add(id);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1620 -                                }                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1621 -                            } else {                                                                              </span>
<span class="3112929576835110018" onmouseenter="enter('3112929576835110018');" onmouseout="out('3112929576835110018');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1622 -                                throw new RuntimeException(&quot;Folders can &quot; +                                       </span>
<span class="998040099347939321" onmouseenter="enter('998040099347939321');" onmouseout="out('998040099347939321');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1623 -                                        &quot;contain only shortcuts&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1624 +                        }                                                                                         </span>
<span class="-6568529531723639383" onmouseenter="enter('-6568529531723639383');" onmouseout="out('-6568529531723639383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1625 +                    } else if (TAG_FOLDER.equals(name)) {                                                         </span>
<span class="71049762543313083" onmouseenter="enter('71049762543313083');" onmouseout="out('71049762543313083');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1626 +                        // Folder contents are nested in this XML file                                            </span>
<span class="2932998739880291847" onmouseenter="enter('2932998739880291847');" onmouseout="out('2932998739880291847');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1627 +                        added = loadFolder(db, values, res, parser);                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1628 +                                                                                                                  </span>
<span class="-8705641483066545971" onmouseenter="enter('-8705641483066545971');" onmouseout="out('-8705641483066545971');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1629 +                    } else if (TAG_PARTNER_FOLDER.equals(name)) {                                                 </span>
<span class="9058192063405184929" onmouseenter="enter('9058192063405184929');" onmouseout="out('9058192063405184929');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1630 +                        // Folder contents come from an external XML resource                                     </span>
<span class="-6415916158480032673" onmouseenter="enter('-6415916158480032673');" onmouseout="out('-6415916158480032673');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1631 +                        final Partner partner = Partner.get(mPackageManager);                                     </span>
<span class="-9215364277253785969" onmouseenter="enter('-9215364277253785969');" onmouseout="out('-9215364277253785969');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1632 +                        if (partner != null) {                                                                    </span>
<span class="882794219866203698" onmouseenter="enter('882794219866203698');" onmouseout="out('882794219866203698');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1633 +                            final Resources partnerRes = partner.getResources();                                  </span>
<span class="-8656173913287474605" onmouseenter="enter('-8656173913287474605');" onmouseout="out('-8656173913287474605');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1634 +                            final int resId = partnerRes.getIdentifier(Partner.RES_FOLDER,                        </span>
<span class="-8179104168031182438" onmouseenter="enter('-8179104168031182438');" onmouseout="out('-8179104168031182438');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1635 +                                    &quot;xml&quot;, partner.getPackageName());                                             </span>
<span class="-5151212692288250908" onmouseenter="enter('-5151212692288250908');" onmouseout="out('-5151212692288250908');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1636 +                            if (resId != 0) {                                                                     </span>
<span class="5087581180241899012" onmouseenter="enter('5087581180241899012');" onmouseout="out('5087581180241899012');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1637 +                                final XmlResourceParser partnerParser = partnerRes.getXml(resId);                 </span>
<span class="7615154974472081807" onmouseenter="enter('7615154974472081807');" onmouseout="out('7615154974472081807');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1638 +                                beginDocument(partnerParser, TAG_FOLDER);                                         </span>
<span class="1361048869780355583" onmouseenter="enter('1361048869780355583');" onmouseout="out('1361048869780355583');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1639 +                                added = loadFolder(db, values, partnerRes, partnerParser);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1640                              }                                                                                     </span>
<span class="-1262268612236580682" onmouseenter="enter('-1262268612236580682');" onmouseout="out('-1262268612236580682');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1641 -                            ar.recycle();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1642 -                        }                                                                                         </span>
<span class="-9068618732040691287" onmouseenter="enter('-9068618732040691287');" onmouseout="out('-9068618732040691287');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1643 -                        // We can only have folders with &gt;= 2 items, so we need to remove the                     </span>
<span class="7493806660013471529" onmouseenter="enter('7493806660013471529');" onmouseout="out('7493806660013471529');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1644 -                        // folder and clean up if less than 2 items were included, or some                        </span>
<span class="-4544163504149488130" onmouseenter="enter('-4544163504149488130');" onmouseout="out('-4544163504149488130');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1645 -                        // failed to add, and less than 2 were actually added                                     </span>
<span class="-2518589436522803659" onmouseenter="enter('-2518589436522803659');" onmouseout="out('-2518589436522803659');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1646 -                        if (folderItems.size() &lt; 2 &amp;&amp; folderId &gt;= 0) {                                            </span>
<span class="1754450222305922444" onmouseenter="enter('1754450222305922444');" onmouseout="out('1754450222305922444');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1647 -                            // We just delete the folder and any items that made it                               </span>
<span class="-4280166743678078053" onmouseenter="enter('-4280166743678078053');" onmouseout="out('-4280166743678078053');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1648 -                            deleteId(db, folderId);                                                               </span>
<span class="-5853132017783287948" onmouseenter="enter('-5853132017783287948');" onmouseout="out('-5853132017783287948');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1649 -                            if (folderItems.size() &gt; 0) {                                                         </span>
<span class="-3251753329988106644" onmouseenter="enter('-3251753329988106644');" onmouseout="out('-3251753329988106644');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1650 -                                deleteId(db, folderItems.get(0));                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1651 -                            }                                                                                     </span>
<span class="8338453324960120992" onmouseenter="enter('8338453324960120992');" onmouseout="out('8338453324960120992');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1652 -                            added = false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1653                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1654                      }                                                                                             </span>
<span class="8313290791909443102" onmouseenter="enter('8313290791909443102');" onmouseout="out('8313290791909443102');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1655 -                    if (added) i++;                                                                               </span>
<span class="7664438635535969272" onmouseenter="enter('7664438635535969272');" onmouseout="out('7664438635535969272');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1656 -                    a.recycle();                                                                                  </span>
<span class="148792127233014890" onmouseenter="enter('148792127233014890');" onmouseout="out('148792127233014890');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1657 +                    if (added) {                                                                                  </span>
<span class="-7037897563787549194" onmouseenter="enter('-7037897563787549194');" onmouseout="out('-7037897563787549194');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1658 +                        long screenId = Long.parseLong(screen);                                                   </span>
<span class="-5031779467583606850" onmouseenter="enter('-5031779467583606850');" onmouseout="out('-5031779467583606850');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1659 +                        // Keep track of the set of screens which need to be added to the db.                     </span>
<span class="4419145976437675753" onmouseenter="enter('4419145976437675753');" onmouseout="out('4419145976437675753');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1660 +                        if (!screenIds.contains(screenId) &amp;&amp;                                                      </span>
<span class="1621253454097657233" onmouseenter="enter('1621253454097657233');" onmouseout="out('1621253454097657233');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1661 +                                container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                      </span>
<span class="9120373975407210091" onmouseenter="enter('9120373975407210091');" onmouseout="out('9120373975407210091');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1662 +                            screenIds.add(screenId);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1663 +                        }                                                                                         </span>
<span class="5122134618962228848" onmouseenter="enter('5122134618962228848');" onmouseout="out('5122134618962228848');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1664 +                        count++;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1665 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1666                  }                                                                                                 </span>
<span class="8072590548933783276" onmouseenter="enter('8072590548933783276');" onmouseout="out('8072590548933783276');" style="">1667              } catch (XmlPullParserException e) {                                                                  </span>
<span class="-8490721556765967950" onmouseenter="enter('-8490721556765967950');" onmouseout="out('-8490721556765967950');" style="">1668                  Log.w(TAG, &quot;Got exception parsing favorites.&quot;, e);                                                </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1669              } catch (IOException e) {                                                                             </span>
<span class="-8490721556765967950" onmouseenter="enter('-8490721556765967950');" onmouseout="out('-8490721556765967950');" style="">1670                  Log.w(TAG, &quot;Got exception parsing favorites.&quot;, e);                                                </span>
<span class="1200625667814236005" onmouseenter="enter('1200625667814236005');" onmouseout="out('1200625667814236005');" style="">1671              } catch (RuntimeException e) {                                                                        </span>
<span class="-8490721556765967950" onmouseenter="enter('-8490721556765967950');" onmouseout="out('-8490721556765967950');" style="">1672                  Log.w(TAG, &quot;Got exception parsing favorites.&quot;, e);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1673              }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1674 -                                                                                                                  </span>
<span class="912372350677230754" onmouseenter="enter('912372350677230754');" onmouseout="out('912372350677230754');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1675 -            // Update the max item id after we have loaded the database                                           </span>
<span class="-8239698715373110075" onmouseenter="enter('-8239698715373110075');" onmouseout="out('-8239698715373110075');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1676 -            if (mMaxItemId == -1) {                                                                               </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1677 -                mMaxItemId = initializeMaxItemId(db);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1678 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1679 -                                                                                                                  </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1680 -            return i;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1681 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1682 -                                                                                                                  </span>
<span class="-1692280122076718039" onmouseenter="enter('-1692280122076718039');" onmouseout="out('-1692280122076718039');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1683 -        private long addAppShortcut(SQLiteDatabase db, ContentValues values, TypedArray a,                        </span>
<span class="6203069875158837454" onmouseenter="enter('6203069875158837454');" onmouseout="out('6203069875158837454');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1684 -                PackageManager packageManager, Intent intent) {                                                   </span>
<span class="-3996593593662644650" onmouseenter="enter('-3996593593662644650');" onmouseout="out('-3996593593662644650');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1685 -            long id = -1;                                                                                         </span>
<span class="-812929271411632064" onmouseenter="enter('-812929271411632064');" onmouseout="out('-812929271411632064');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1686 -            ActivityInfo info;                                                                                    </span>
<span class="-2731505437317613966" onmouseenter="enter('-2731505437317613966');" onmouseout="out('-2731505437317613966');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1687 -            String packageName = a.getString(R.styleable.Favorite_packageName);                                   </span>
<span class="-7301737252032161052" onmouseenter="enter('-7301737252032161052');" onmouseout="out('-7301737252032161052');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1688 -            String className = a.getString(R.styleable.Favorite_className);                                       </span>
<span class="7714877839932947695" onmouseenter="enter('7714877839932947695');" onmouseout="out('7714877839932947695');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1689 +            return count;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1690 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1691 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1692 +        /**                                                                                                       </span>
<span class="836981209199049033" onmouseenter="enter('836981209199049033');" onmouseout="out('836981209199049033');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1693 +         * Parse folder items starting at {@link XmlPullParser} location. Allow recursive                         </span>
<span class="8269421111426004126" onmouseenter="enter('8269421111426004126');" onmouseout="out('8269421111426004126');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1694 +         * includes of items.                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1695 +         */                                                                                                       </span>
<span class="-6714322983826762636" onmouseenter="enter('-6714322983826762636');" onmouseout="out('-6714322983826762636');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1696 +        private void addToFolder(SQLiteDatabase db, Resources res, XmlResourceParser parser,                      </span>
<span class="8336143775167702041" onmouseenter="enter('8336143775167702041');" onmouseout="out('8336143775167702041');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1697 +                ArrayList&lt;Long&gt; folderItems, long folderId) throws IOException, XmlPullParserException {          </span>
<span class="3163913122247807134" onmouseenter="enter('3163913122247807134');" onmouseout="out('3163913122247807134');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1698 +            int type;                                                                                             </span>
<span class="-3224406969225576043" onmouseenter="enter('-3224406969225576043');" onmouseout="out('-3224406969225576043');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1699 +            int folderDepth = parser.getDepth();                                                                  </span>
<span class="-2406917717669951461" onmouseenter="enter('-2406917717669951461');" onmouseout="out('-2406917717669951461');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1700 +            while ((type = parser.next()) != XmlPullParser.END_TAG ||                                             </span>
<span class="4017526817899016645" onmouseenter="enter('4017526817899016645');" onmouseout="out('4017526817899016645');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1701 +                    parser.getDepth() &gt; folderDepth) {                                                            </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1702 +                if (type != XmlPullParser.START_TAG) {                                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1703 +                    continue;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1704 +                }                                                                                                 </span>
<span class="686677976894615180" onmouseenter="enter('686677976894615180');" onmouseout="out('686677976894615180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1705 +                final String tag = parser.getName();                                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1706 +                                                                                                                  </span>
<span class="7615212261878509112" onmouseenter="enter('7615212261878509112');" onmouseout="out('7615212261878509112');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1707 +                final ContentValues childValues = new ContentValues();                                            </span>
<span class="4831363376490170629" onmouseenter="enter('4831363376490170629');" onmouseout="out('4831363376490170629');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1708 +                childValues.put(LauncherSettings.Favorites.CONTAINER, folderId);                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1709 +                                                                                                                  </span>
<span class="-4888864949456871457" onmouseenter="enter('-4888864949456871457');" onmouseout="out('-4888864949456871457');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1710 +                if (LOGD) {                                                                                       </span>
<span class="-615495327061628051" onmouseenter="enter('-615495327061628051');" onmouseout="out('-615495327061628051');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1711 +                    final String pkg = getAttributeValue(parser, ATTR_PACKAGE_NAME);                              </span>
<span class="-1954941607715586859" onmouseenter="enter('-1954941607715586859');" onmouseout="out('-1954941607715586859');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1712 +                    final String uri = getAttributeValue(parser, ATTR_URI);                                       </span>
<span class="3789876690425623667" onmouseenter="enter('3789876690425623667');" onmouseout="out('3789876690425623667');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1713 +                    Log.v(TAG, String.format((&quot;%&quot; + (2*(folderDepth+1)) + &quot;s&lt;%s \&quot;%s\&quot;&gt;&quot;), &quot;&quot;,                    </span>
<span class="-2863539958754101738" onmouseenter="enter('-2863539958754101738');" onmouseout="out('-2863539958754101738');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1714 +                            tag, uri != null ? uri : pkg));                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1715 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1716 +                                                                                                                  </span>
<span class="6780528027807053427" onmouseenter="enter('6780528027807053427');" onmouseout="out('6780528027807053427');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1717 +                if (TAG_FAVORITE.equals(tag) &amp;&amp; folderId &gt;= 0) {                                                  </span>
<span class="3781180143059799820" onmouseenter="enter('3781180143059799820');" onmouseout="out('3781180143059799820');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1718 +                    final long id = addAppShortcut(db, childValues, parser);                                      </span>
<span class="-6131649387216162152" onmouseenter="enter('-6131649387216162152');" onmouseout="out('-6131649387216162152');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1719 +                    if (id &gt;= 0) {                                                                                </span>
<span class="-1096537071693041204" onmouseenter="enter('-1096537071693041204');" onmouseout="out('-1096537071693041204');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1720 +                        folderItems.add(id);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1721 +                    }                                                                                             </span>
<span class="5913908479161166408" onmouseenter="enter('5913908479161166408');" onmouseout="out('5913908479161166408');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1722 +                } else if (TAG_SHORTCUT.equals(tag) &amp;&amp; folderId &gt;= 0) {                                           </span>
<span class="237201187676118050" onmouseenter="enter('237201187676118050');" onmouseout="out('237201187676118050');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1723 +                    final long id = addUriShortcut(db, childValues, res, parser);                                 </span>
<span class="-6131649387216162152" onmouseenter="enter('-6131649387216162152');" onmouseout="out('-6131649387216162152');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1724 +                    if (id &gt;= 0) {                                                                                </span>
<span class="-1096537071693041204" onmouseenter="enter('-1096537071693041204');" onmouseout="out('-1096537071693041204');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1725 +                        folderItems.add(id);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1726 +                    }                                                                                             </span>
<span class="4981411679036563463" onmouseenter="enter('4981411679036563463');" onmouseout="out('4981411679036563463');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1727 +                } else if (TAG_INCLUDE.equals(tag) &amp;&amp; folderId &gt;= 0) {                                            </span>
<span class="5205334322096840205" onmouseenter="enter('5205334322096840205');" onmouseout="out('5205334322096840205');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1728 +                    addToFolder(db, res, parser, folderItems, folderId);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1729 +                } else {                                                                                          </span>
<span class="-7780626705587841890" onmouseenter="enter('-7780626705587841890');" onmouseout="out('-7780626705587841890');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1730 +                    throw new RuntimeException(&quot;Folders can contain only shortcuts&quot;);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1731 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1732 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1733 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1734 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1735 +        /**                                                                                                       </span>
<span class="-8056675503068640259" onmouseenter="enter('-8056675503068640259');" onmouseout="out('-8056675503068640259');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1736 +         * Parse folder starting at current {@link XmlPullParser} location.                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1737 +         */                                                                                                       </span>
<span class="8978590628354582362" onmouseenter="enter('8978590628354582362');" onmouseout="out('8978590628354582362');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1738 +        private boolean loadFolder(SQLiteDatabase db, ContentValues values, Resources res,                        </span>
<span class="-8666274943825815454" onmouseenter="enter('-8666274943825815454');" onmouseout="out('-8666274943825815454');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1739 +                XmlResourceParser parser) throws IOException, XmlPullParserException {                            </span>
<span class="6068944415246137076" onmouseenter="enter('6068944415246137076');" onmouseout="out('6068944415246137076');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1740 +            final String title;                                                                                   </span>
<span class="-292812422880448019" onmouseenter="enter('-292812422880448019');" onmouseout="out('-292812422880448019');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1741 +            final int titleResId = getAttributeResourceValue(parser, ATTR_TITLE, 0);                              </span>
<span class="1172124852597632506" onmouseenter="enter('1172124852597632506');" onmouseout="out('1172124852597632506');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1742 +            if (titleResId != 0) {                                                                                </span>
<span class="-4529263519280472672" onmouseenter="enter('-4529263519280472672');" onmouseout="out('-4529263519280472672');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1743 +                title = res.getString(titleResId);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1744 +            } else {                                                                                              </span>
<span class="2584661107016073001" onmouseenter="enter('2584661107016073001');" onmouseout="out('2584661107016073001');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1745 +                title = mContext.getResources().getString(R.string.folder_name);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1746 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1747 +                                                                                                                  </span>
<span class="-1277878518627790922" onmouseenter="enter('-1277878518627790922');" onmouseout="out('-1277878518627790922');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1748 +            values.put(LauncherSettings.Favorites.TITLE, title);                                                  </span>
<span class="-8989728490994499632" onmouseenter="enter('-8989728490994499632');" onmouseout="out('-8989728490994499632');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1749 +            long folderId = addFolder(db, values);                                                                </span>
<span class="3863242801439444025" onmouseenter="enter('3863242801439444025');" onmouseout="out('3863242801439444025');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1750 +            boolean added = folderId &gt;= 0;                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1751 +                                                                                                                  </span>
<span class="70925917645446442" onmouseenter="enter('70925917645446442');" onmouseout="out('70925917645446442');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1752 +            ArrayList&lt;Long&gt; folderItems = new ArrayList&lt;Long&gt;();                                                  </span>
<span class="5205334322096840205" onmouseenter="enter('5205334322096840205');" onmouseout="out('5205334322096840205');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1753 +            addToFolder(db, res, parser, folderItems, folderId);                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1754 +                                                                                                                  </span>
<span class="-9068618732040691287" onmouseenter="enter('-9068618732040691287');" onmouseout="out('-9068618732040691287');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1755 +            // We can only have folders with &gt;= 2 items, so we need to remove the                                 </span>
<span class="7493806660013471529" onmouseenter="enter('7493806660013471529');" onmouseout="out('7493806660013471529');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1756 +            // folder and clean up if less than 2 items were included, or some                                    </span>
<span class="-4544163504149488130" onmouseenter="enter('-4544163504149488130');" onmouseout="out('-4544163504149488130');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1757 +            // failed to add, and less than 2 were actually added                                                 </span>
<span class="-2518589436522803659" onmouseenter="enter('-2518589436522803659');" onmouseout="out('-2518589436522803659');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1758 +            if (folderItems.size() &lt; 2 &amp;&amp; folderId &gt;= 0) {                                                        </span>
<span class="4611134147445993465" onmouseenter="enter('4611134147445993465');" onmouseout="out('4611134147445993465');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1759 +                // Delete the folder                                                                              </span>
<span class="-4280166743678078053" onmouseenter="enter('-4280166743678078053');" onmouseout="out('-4280166743678078053');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1760 +                deleteId(db, folderId);                                                                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1761 +                                                                                                                  </span>
<span class="-7639050556018902006" onmouseenter="enter('-7639050556018902006');" onmouseout="out('-7639050556018902006');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1762 +                // If we have a single item, promote it to where the folder                                       </span>
<span class="8958956222431385245" onmouseenter="enter('8958956222431385245');" onmouseout="out('8958956222431385245');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1763 +                // would have been.                                                                               </span>
<span class="-557617943835263419" onmouseenter="enter('-557617943835263419');" onmouseout="out('-557617943835263419');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1764 +                if (folderItems.size() == 1) {                                                                    </span>
<span class="7615212261878509112" onmouseenter="enter('7615212261878509112');" onmouseout="out('7615212261878509112');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1765 +                    final ContentValues childValues = new ContentValues();                                        </span>
<span class="-3563728128688510119" onmouseenter="enter('-3563728128688510119');" onmouseout="out('-3563728128688510119');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1766 +                    copyInteger(values, childValues, LauncherSettings.Favorites.CONTAINER);                       </span>
<span class="9115692663157203715" onmouseenter="enter('9115692663157203715');" onmouseout="out('9115692663157203715');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1767 +                    copyInteger(values, childValues, LauncherSettings.Favorites.SCREEN);                          </span>
<span class="5272896392361170626" onmouseenter="enter('5272896392361170626');" onmouseout="out('5272896392361170626');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1768 +                    copyInteger(values, childValues, LauncherSettings.Favorites.CELLX);                           </span>
<span class="3676490222384154846" onmouseenter="enter('3676490222384154846');" onmouseout="out('3676490222384154846');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1769 +                    copyInteger(values, childValues, LauncherSettings.Favorites.CELLY);                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1770 +                                                                                                                  </span>
<span class="-5157861693853617290" onmouseenter="enter('-5157861693853617290');" onmouseout="out('-5157861693853617290');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1771 +                    final long id = folderItems.get(0);                                                           </span>
<span class="-1976987628722223211" onmouseenter="enter('-1976987628722223211');" onmouseout="out('-1976987628722223211');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1772 +                    db.update(TABLE_FAVORITES, childValues,                                                       </span>
<span class="-5367643604571967383" onmouseenter="enter('-5367643604571967383');" onmouseout="out('-5367643604571967383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1773 +                            LauncherSettings.Favorites._ID + &quot;=&quot; + id, null);                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1774 +                } else {                                                                                          </span>
<span class="8338453324960120992" onmouseenter="enter('8338453324960120992');" onmouseout="out('8338453324960120992');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1775 +                    added = false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1776 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1777 +            }                                                                                                     </span>
<span class="-5472428940030548841" onmouseenter="enter('-5472428940030548841');" onmouseout="out('-5472428940030548841');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1778 +            return added;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1779 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1780 +                                                                                                                  </span>
<span class="-5994840823969871341" onmouseenter="enter('-5994840823969871341');" onmouseout="out('-5994840823969871341');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1781 +        // A meta shortcut attempts to resolve an intent specified as a URI in the XML, if a                      </span>
<span class="-1792726061654942513" onmouseenter="enter('-1792726061654942513');" onmouseout="out('-1792726061654942513');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1782 +        // logical choice for what shortcut should be used for that intent exists, then it is                     </span>
<span class="4044577505779949612" onmouseenter="enter('4044577505779949612');" onmouseout="out('4044577505779949612');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1783 +        // added. Otherwise add nothing.                                                                          </span>
<span class="-155901270112013596" onmouseenter="enter('-155901270112013596');" onmouseout="out('-155901270112013596');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1784 +        private long addAppShortcutByUri(SQLiteDatabase db, ContentValues values,                                 </span>
<span class="-5544610414896424300" onmouseenter="enter('-5544610414896424300');" onmouseout="out('-5544610414896424300');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1785 +                String intentUri) {                                                                               </span>
<span class="-4423970447189602618" onmouseenter="enter('-4423970447189602618');" onmouseout="out('-4423970447189602618');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1786 +            Intent metaIntent;                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1787              try {                                                                                                 </span>
<span class="3879056527391579072" onmouseenter="enter('3879056527391579072');" onmouseout="out('3879056527391579072');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1788 -                ComponentName cn;                                                                                 </span>
<span class="-780892654735640073" onmouseenter="enter('-780892654735640073');" onmouseout="out('-780892654735640073');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1789 +                metaIntent = Intent.parseUri(intentUri, 0);                                                       </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1790 +            } catch (URISyntaxException e) {                                                                      </span>
<span class="-8064100063882654504" onmouseenter="enter('-8064100063882654504');" onmouseout="out('-8064100063882654504');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1791 +                Log.e(TAG, &quot;Unable to add meta-favorite: &quot; + intentUri, e);                                       </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1792 +                return -1;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1793 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1794 +                                                                                                                  </span>
<span class="8557033759361467860" onmouseenter="enter('8557033759361467860');" onmouseout="out('8557033759361467860');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1795 +            ResolveInfo resolved = mPackageManager.resolveActivity(metaIntent,                                    </span>
<span class="2456166036476176214" onmouseenter="enter('2456166036476176214');" onmouseout="out('2456166036476176214');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1796 +                    PackageManager.MATCH_DEFAULT_ONLY);                                                           </span>
<span class="-1300490748614024222" onmouseenter="enter('-1300490748614024222');" onmouseout="out('-1300490748614024222');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1797 +            final List&lt;ResolveInfo&gt; appList = mPackageManager.queryIntentActivities(                              </span>
<span class="8656178102542661668" onmouseenter="enter('8656178102542661668');" onmouseout="out('8656178102542661668');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1798 +                    metaIntent, PackageManager.MATCH_DEFAULT_ONLY);                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1799 +                                                                                                                  </span>
<span class="3807468246607352644" onmouseenter="enter('3807468246607352644');" onmouseout="out('3807468246607352644');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1800 +            // Verify that the result is an app and not just the resolver dialog asking which                     </span>
<span class="3786398014846262159" onmouseenter="enter('3786398014846262159');" onmouseout="out('3786398014846262159');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1801 +            // app to use.                                                                                        </span>
<span class="-2527999738736768738" onmouseenter="enter('-2527999738736768738');" onmouseout="out('-2527999738736768738');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1802 +            if (wouldLaunchResolverActivity(resolved, appList)) {                                                 </span>
<span class="-1508864482817632041" onmouseenter="enter('-1508864482817632041');" onmouseout="out('-1508864482817632041');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1803 +                // If only one of the results is a system app then choose that as the default.                    </span>
<span class="7096358968319388823" onmouseenter="enter('7096358968319388823');" onmouseout="out('7096358968319388823');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1804 +                final ResolveInfo systemApp = getSingleSystemActivity(appList);                                   </span>
<span class="3112641083889325831" onmouseenter="enter('3112641083889325831');" onmouseout="out('3112641083889325831');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1805 +                if (systemApp == null) {                                                                          </span>
<span class="8733485116897338114" onmouseenter="enter('8733485116897338114');" onmouseout="out('8733485116897338114');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1806 +                    // There is no logical choice for this meta-favorite, so rather than making                   </span>
<span class="-5798817995675177798" onmouseenter="enter('-5798817995675177798');" onmouseout="out('-5798817995675177798');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1807 +                    // a bad choice just add nothing.                                                             </span>
<span class="8234306782594839467" onmouseenter="enter('8234306782594839467');" onmouseout="out('8234306782594839467');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1808 +                    Log.w(TAG, &quot;No preference or single system activity found for &quot;                               </span>
<span class="-4585840856389419283" onmouseenter="enter('-4585840856389419283');" onmouseout="out('-4585840856389419283');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1809 +                            + metaIntent.toString());                                                             </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1810 +                    return -1;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1811 +                }                                                                                                 </span>
<span class="-2210262899281174552" onmouseenter="enter('-2210262899281174552');" onmouseout="out('-2210262899281174552');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1812 +                resolved = systemApp;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1813 +            }                                                                                                     </span>
<span class="3942116430564013468" onmouseenter="enter('3942116430564013468');" onmouseout="out('3942116430564013468');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1814 +            final ActivityInfo info = resolved.activityInfo;                                                      </span>
<span class="-360088289411741304" onmouseenter="enter('-360088289411741304');" onmouseout="out('-360088289411741304');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1815 +            final Intent intent = mPackageManager.getLaunchIntentForPackage(info.packageName);                    </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1816 +            if (intent == null) {                                                                                 </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1817 +                return -1;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1818 +            }                                                                                                     </span>
<span class="2514039366923723926" onmouseenter="enter('2514039366923723926');" onmouseout="out('2514039366923723926');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1819 +            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |                                                       </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1820 +                    Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1821 +                                                                                                                  </span>
<span class="-4637301020367561713" onmouseenter="enter('-4637301020367561713');" onmouseout="out('-4637301020367561713');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1822 +            return addAppShortcut(db, values, info.loadLabel(mPackageManager).toString(), intent);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1823 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1824 +                                                                                                                  </span>
<span class="3433873162423347490" onmouseenter="enter('3433873162423347490');" onmouseout="out('3433873162423347490');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1825 +        private ResolveInfo getSingleSystemActivity(List&lt;ResolveInfo&gt; appList) {                                  </span>
<span class="4100859717391359582" onmouseenter="enter('4100859717391359582');" onmouseout="out('4100859717391359582');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1826 +            ResolveInfo systemResolve = null;                                                                     </span>
<span class="-6501614514316220785" onmouseenter="enter('-6501614514316220785');" onmouseout="out('-6501614514316220785');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1827 +            final int N = appList.size();                                                                         </span>
<span class="-7972660160186921434" onmouseenter="enter('-7972660160186921434');" onmouseout="out('-7972660160186921434');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1828 +            for (int i = 0; i &lt; N; ++i) {                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1829                  try {                                                                                             </span>
<span class="-2625303589229365660" onmouseenter="enter('-2625303589229365660');" onmouseout="out('-2625303589229365660');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1830 -                    cn = new ComponentName(packageName, className);                                               </span>
<span class="4307066905016302738" onmouseenter="enter('4307066905016302738');" onmouseout="out('4307066905016302738');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1831 -                    info = packageManager.getActivityInfo(cn, 0);                                                 </span>
<span class="-1236034709842272928" onmouseenter="enter('-1236034709842272928');" onmouseout="out('-1236034709842272928');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1832 -                } catch (PackageManager.NameNotFoundException nnfe) {                                             </span>
<span class="-7594746117818741416" onmouseenter="enter('-7594746117818741416');" onmouseout="out('-7594746117818741416');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1833 -                    String[] packages = packageManager.currentToCanonicalPackageNames(                            </span>
<span class="8150942388199951060" onmouseenter="enter('8150942388199951060');" onmouseout="out('8150942388199951060');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1834 -                        new String[] { packageName });                                                            </span>
<span class="-5669551341563183030" onmouseenter="enter('-5669551341563183030');" onmouseout="out('-5669551341563183030');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1835 -                    cn = new ComponentName(packages[0], className);                                               </span>
<span class="4307066905016302738" onmouseenter="enter('4307066905016302738');" onmouseout="out('4307066905016302738');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1836 -                    info = packageManager.getActivityInfo(cn, 0);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1837 -                }                                                                                                 </span>
<span class="7080973069343467596" onmouseenter="enter('7080973069343467596');" onmouseout="out('7080973069343467596');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1838 -                id = generateNewItemId();                                                                         </span>
<span class="1965368382885656907" onmouseenter="enter('1965368382885656907');" onmouseout="out('1965368382885656907');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1839 -                intent.setComponent(cn);                                                                          </span>
<span class="2514039366923723926" onmouseenter="enter('2514039366923723926');" onmouseout="out('2514039366923723926');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1840 -                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |                                                   </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1841 -                        Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                                               </span>
<span class="-3718774165038650653" onmouseenter="enter('-3718774165038650653');" onmouseout="out('-3718774165038650653');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1842 -                values.put(Favorites.INTENT, intent.toUri(0));                                                    </span>
<span class="-725436591136316307" onmouseenter="enter('-725436591136316307');" onmouseout="out('-725436591136316307');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1843 -                values.put(Favorites.TITLE, info.loadLabel(packageManager).toString());                           </span>
<span class="2342423886359204479" onmouseenter="enter('2342423886359204479');" onmouseout="out('2342423886359204479');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1844 -                values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_APPLICATION);                                 </span>
<span class="2615630886033492062" onmouseenter="enter('2615630886033492062');" onmouseout="out('2615630886033492062');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1845 -                values.put(Favorites.SPANX, 1);                                                                   </span>
<span class="-5449525265648364043" onmouseenter="enter('-5449525265648364043');" onmouseout="out('-5449525265648364043');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1846 -                values.put(Favorites.SPANY, 1);                                                                   </span>
<span class="-7797208824576653991" onmouseenter="enter('-7797208824576653991');" onmouseout="out('-7797208824576653991');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1847 -                values.put(Favorites._ID, generateNewItemId());                                                   </span>
<span class="-2280993933700750215" onmouseenter="enter('-2280993933700750215');" onmouseout="out('-2280993933700750215');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1848 -                if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values) &lt; 0) {                              </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1849 -                    return -1;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1850 -                }                                                                                                 </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1851 -            } catch (PackageManager.NameNotFoundException e) {                                                    </span>
<span class="-8677717928489849344" onmouseenter="enter('-8677717928489849344');" onmouseout="out('-8677717928489849344');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1852 -                Log.w(TAG, &quot;Unable to add favorite: &quot; + packageName +                                             </span>
<span class="2184156839748033514" onmouseenter="enter('2184156839748033514');" onmouseout="out('2184156839748033514');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1853 -                        &quot;/&quot; + className, e);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1854 -            }                                                                                                     </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1855 -            return id;                                                                                            </span>
<span class="6969736750563256446" onmouseenter="enter('6969736750563256446');" onmouseout="out('6969736750563256446');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1856 +                    ApplicationInfo info = mPackageManager.getApplicationInfo(                                    </span>
<span class="1402648097889367388" onmouseenter="enter('1402648097889367388');" onmouseout="out('1402648097889367388');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1857 +                            appList.get(i).activityInfo.packageName, 0);                                          </span>
<span class="-476381142815111019" onmouseenter="enter('-476381142815111019');" onmouseout="out('-476381142815111019');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1858 +                    if ((info.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {                                        </span>
<span class="-6460956471084206715" onmouseenter="enter('-6460956471084206715');" onmouseout="out('-6460956471084206715');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1859 +                        if (systemResolve != null) {                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1860 +                            return null;                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1861 +                        } else {                                                                                  </span>
<span class="-1920150334130463709" onmouseenter="enter('-1920150334130463709');" onmouseout="out('-1920150334130463709');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1862 +                            systemResolve = appList.get(i);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1863 +                        }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1864 +                    }                                                                                             </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1865 +                } catch (PackageManager.NameNotFoundException e) {                                                </span>
<span class="-265560973846634126" onmouseenter="enter('-265560973846634126');" onmouseout="out('-265560973846634126');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1866 +                    Log.w(TAG, &quot;Unable to get info about resolve results&quot;, e);                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1867 +                    return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1868 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1869 +            }                                                                                                     </span>
<span class="-7251347768060538731" onmouseenter="enter('-7251347768060538731');" onmouseout="out('-7251347768060538731');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1870 +            return systemResolve;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1871 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1872 +                                                                                                                  </span>
<span class="-4222771116108434581" onmouseenter="enter('-4222771116108434581');" onmouseout="out('-4222771116108434581');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1873 +        private boolean wouldLaunchResolverActivity(ResolveInfo resolved,                                         </span>
<span class="8855822793352880756" onmouseenter="enter('8855822793352880756');" onmouseout="out('8855822793352880756');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1874 +                List&lt;ResolveInfo&gt; appList) {                                                                      </span>
<span class="-6399418581489152967" onmouseenter="enter('-6399418581489152967');" onmouseout="out('-6399418581489152967');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1875 +            // If the list contains the above resolved activity, then it can&#x27;t be                                 </span>
<span class="4029821552264897243" onmouseenter="enter('4029821552264897243');" onmouseout="out('4029821552264897243');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1876 +            // ResolverActivity itself.                                                                           </span>
<span class="4411552974527624379" onmouseenter="enter('4411552974527624379');" onmouseout="out('4411552974527624379');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1877 +            for (int i = 0; i &lt; appList.size(); ++i) {                                                            </span>
<span class="-6814281994408040723" onmouseenter="enter('-6814281994408040723');" onmouseout="out('-6814281994408040723');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1878 +                ResolveInfo tmp = appList.get(i);                                                                 </span>
<span class="-3160638667287468420" onmouseenter="enter('-3160638667287468420');" onmouseout="out('-3160638667287468420');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1879 +                if (tmp.activityInfo.name.equals(resolved.activityInfo.name)                                      </span>
<span class="6821338150188138172" onmouseenter="enter('6821338150188138172');" onmouseout="out('6821338150188138172');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1880 +                        &amp;&amp; tmp.activityInfo.packageName.equals(resolved.activityInfo.packageName)) {              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1881 +                    return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1882 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1883 +            }                                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1884 +            return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1885 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1886 +                                                                                                                  </span>
<span class="2182986909311989225" onmouseenter="enter('2182986909311989225');" onmouseout="out('2182986909311989225');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1887 +        private long addAppShortcut(SQLiteDatabase db, ContentValues values,                                      </span>
<span class="-1953831149857843506" onmouseenter="enter('-1953831149857843506');" onmouseout="out('-1953831149857843506');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1888 +                XmlResourceParser parser) {                                                                       </span>
<span class="-1797029550341626583" onmouseenter="enter('-1797029550341626583');" onmouseout="out('-1797029550341626583');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1889 +            final String packageName = getAttributeValue(parser, ATTR_PACKAGE_NAME);                              </span>
<span class="292435478126887551" onmouseenter="enter('292435478126887551');" onmouseout="out('292435478126887551');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1890 +            final String className = getAttributeValue(parser, ATTR_CLASS_NAME);                                  </span>
<span class="-1954941607715586859" onmouseenter="enter('-1954941607715586859');" onmouseout="out('-1954941607715586859');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1891 +            final String uri = getAttributeValue(parser, ATTR_URI);                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1892 +                                                                                                                  </span>
<span class="822368733919136546" onmouseenter="enter('822368733919136546');" onmouseout="out('822368733919136546');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1893 +            if (!TextUtils.isEmpty(packageName) &amp;&amp; !TextUtils.isEmpty(className)) {                               </span>
<span class="-812929271411632064" onmouseenter="enter('-812929271411632064');" onmouseout="out('-812929271411632064');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1894 +                ActivityInfo info;                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1895 +                try {                                                                                             </span>
<span class="3879056527391579072" onmouseenter="enter('3879056527391579072');" onmouseout="out('3879056527391579072');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1896 +                    ComponentName cn;                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1897 +                    try {                                                                                         </span>
<span class="-2625303589229365660" onmouseenter="enter('-2625303589229365660');" onmouseout="out('-2625303589229365660');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1898 +                        cn = new ComponentName(packageName, className);                                           </span>
<span class="7198970208759356928" onmouseenter="enter('7198970208759356928');" onmouseout="out('7198970208759356928');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1899 +                        info = mPackageManager.getActivityInfo(cn, 0);                                            </span>
<span class="-1236034709842272928" onmouseenter="enter('-1236034709842272928');" onmouseout="out('-1236034709842272928');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1900 +                    } catch (PackageManager.NameNotFoundException nnfe) {                                         </span>
<span class="9170643828915655827" onmouseenter="enter('9170643828915655827');" onmouseout="out('9170643828915655827');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1901 +                        String[] packages = mPackageManager.currentToCanonicalPackageNames(                       </span>
<span class="8150942388199951060" onmouseenter="enter('8150942388199951060');" onmouseout="out('8150942388199951060');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1902 +                                new String[] { packageName });                                                    </span>
<span class="-5669551341563183030" onmouseenter="enter('-5669551341563183030');" onmouseout="out('-5669551341563183030');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1903 +                        cn = new ComponentName(packages[0], className);                                           </span>
<span class="7198970208759356928" onmouseenter="enter('7198970208759356928');" onmouseout="out('7198970208759356928');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1904 +                        info = mPackageManager.getActivityInfo(cn, 0);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1905 +                    }                                                                                             </span>
<span class="6144349283181420382" onmouseenter="enter('6144349283181420382');" onmouseout="out('6144349283181420382');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1906 +                    final Intent intent = buildMainIntent();                                                      </span>
<span class="1965368382885656907" onmouseenter="enter('1965368382885656907');" onmouseout="out('1965368382885656907');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1907 +                    intent.setComponent(cn);                                                                      </span>
<span class="2514039366923723926" onmouseenter="enter('2514039366923723926');" onmouseout="out('2514039366923723926');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1908 +                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |                                               </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1909 +                            Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1910 +                                                                                                                  </span>
<span class="-3995391046779511608" onmouseenter="enter('-3995391046779511608');" onmouseout="out('-3995391046779511608');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1911 +                    return addAppShortcut(db, values, info.loadLabel(mPackageManager).toString(),                 </span>
<span class="478877787810563864" onmouseenter="enter('478877787810563864');" onmouseout="out('478877787810563864');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1912 +                            intent);                                                                              </span>
<span class="8932842947262589349" onmouseenter="enter('8932842947262589349');" onmouseout="out('8932842947262589349');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1913 +                } catch (PackageManager.NameNotFoundException e) {                                                </span>
<span class="-8677717928489849344" onmouseenter="enter('-8677717928489849344');" onmouseout="out('-8677717928489849344');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1914 +                    Log.w(TAG, &quot;Unable to add favorite: &quot; + packageName +                                         </span>
<span class="2184156839748033514" onmouseenter="enter('2184156839748033514');" onmouseout="out('2184156839748033514');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1915 +                            &quot;/&quot; + className, e);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1916 +                }                                                                                                 </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1917 +                return -1;                                                                                        </span>
<span class="8157957067082875903" onmouseenter="enter('8157957067082875903');" onmouseout="out('8157957067082875903');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1918 +            } else if (!TextUtils.isEmpty(uri)) {                                                                 </span>
<span class="9183809099675717906" onmouseenter="enter('9183809099675717906');" onmouseout="out('9183809099675717906');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1919 +                // If no component specified try to find a shortcut to add from the URI.                          </span>
<span class="787045193894698076" onmouseenter="enter('787045193894698076');" onmouseout="out('787045193894698076');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1920 +                return addAppShortcutByUri(db, values, uri);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1921 +            } else {                                                                                              </span>
<span class="-8012351384438033294" onmouseenter="enter('-8012351384438033294');" onmouseout="out('-8012351384438033294');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1922 +                Log.e(TAG, &quot;Skipping invalid &lt;favorite&gt; with no component or uri&quot;);                               </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1923 +                return -1;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1924 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1925 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1926 +                                                                                                                  </span>
<span class="5143222161199963889" onmouseenter="enter('5143222161199963889');" onmouseout="out('5143222161199963889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1927 +        private long addAppShortcut(SQLiteDatabase db, ContentValues values, String title,                        </span>
<span class="-7854945536219486202" onmouseenter="enter('-7854945536219486202');" onmouseout="out('-7854945536219486202');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1928 +                Intent intent) {                                                                                  </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1929 +            long id = generateNewItemId();                                                                        </span>
<span class="-3718774165038650653" onmouseenter="enter('-3718774165038650653');" onmouseout="out('-3718774165038650653');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1930 +            values.put(Favorites.INTENT, intent.toUri(0));                                                        </span>
<span class="621847407046641821" onmouseenter="enter('621847407046641821');" onmouseout="out('621847407046641821');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1931 +            values.put(Favorites.TITLE, title);                                                                   </span>
<span class="2342423886359204479" onmouseenter="enter('2342423886359204479');" onmouseout="out('2342423886359204479');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1932 +            values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_APPLICATION);                                     </span>
<span class="2615630886033492062" onmouseenter="enter('2615630886033492062');" onmouseout="out('2615630886033492062');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1933 +            values.put(Favorites.SPANX, 1);                                                                       </span>
<span class="-5449525265648364043" onmouseenter="enter('-5449525265648364043');" onmouseout="out('-5449525265648364043');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1934 +            values.put(Favorites.SPANY, 1);                                                                       </span>
<span class="2067035903685433430" onmouseenter="enter('2067035903685433430');" onmouseout="out('2067035903685433430');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1935 +            values.put(Favorites._ID, id);                                                                        </span>
<span class="-2280993933700750215" onmouseenter="enter('-2280993933700750215');" onmouseout="out('-2280993933700750215');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1936 +            if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values) &lt; 0) {                                  </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1937 +                return -1;                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1938 +            } else {                                                                                              </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1939 +                return id;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1940 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1941          }                                                                                                         </span>
<span  style="">1942                                                                                                                    </span>
<span class="-8700086773804460728" onmouseenter="enter('-8700086773804460728');" onmouseout="out('-8700086773804460728');" style="">1943          private long addFolder(SQLiteDatabase db, ContentValues values) {                                         </span>
<span class="-2154578791511231117" onmouseenter="enter('-2154578791511231117');" onmouseout="out('-2154578791511231117');" style="">1944              values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_FOLDER);                                          </span>
<span class="2615630886033492062" onmouseenter="enter('2615630886033492062');" onmouseout="out('2615630886033492062');" style="">1945              values.put(Favorites.SPANX, 1);                                                                       </span>
<span class="-5449525265648364043" onmouseenter="enter('-5449525265648364043');" onmouseout="out('-5449525265648364043');" style="">1946              values.put(Favorites.SPANY, 1);                                                                       </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">1947              long id = generateNewItemId();                                                                        </span>
<span class="2067035903685433430" onmouseenter="enter('2067035903685433430');" onmouseout="out('2067035903685433430');" style="">1948              values.put(Favorites._ID, id);                                                                        </span>
<span class="-8791434135793277446" onmouseenter="enter('-8791434135793277446');" onmouseout="out('-8791434135793277446');" style="">1949              if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values) &lt;= 0) {                                 </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">1950                  return -1;                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1951              } else {                                                                                              </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">1952                  return id;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1953              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1954          }                                                                                                         </span>
<span  style="">1955                                                                                                                    </span>
<span class="-5233040857758997197" onmouseenter="enter('-5233040857758997197');" onmouseout="out('-5233040857758997197');" style="">1956          private ComponentName getSearchWidgetProvider() {                                                         </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style="">1957              SearchManager searchManager =                                                                         </span>
<span class="-186007776176525963" onmouseenter="enter('-186007776176525963');" onmouseout="out('-186007776176525963');" style="">1958                      (SearchManager) mContext.getSystemService(Context.SEARCH_SERVICE);                            </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style="">1959              ComponentName searchComponent = searchManager.getGlobalSearchActivity();                              </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style="">1960              if (searchComponent == null) return null;                                                             </span>
<span class="-2463026691705518431" onmouseenter="enter('-2463026691705518431');" onmouseout="out('-2463026691705518431');" style="">1961              return getProviderInPackage(searchComponent.getPackageName());                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1962          }                                                                                                         </span>
<span  style="">1963                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1964          /**                                                                                                       </span>
<span class="-6817641519009759490" onmouseenter="enter('-6817641519009759490');" onmouseout="out('-6817641519009759490');" style="">1965           * Gets an appwidget provider from the given package. If the package contains more than                   </span>
<span class="8642686543042194127" onmouseenter="enter('8642686543042194127');" onmouseout="out('8642686543042194127');" style="">1966           * one appwidget provider, an arbitrary one is returned.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1967           */                                                                                                       </span>
<span class="-8892261496520206835" onmouseenter="enter('-8892261496520206835');" onmouseout="out('-8892261496520206835');" style="">1968          private ComponentName getProviderInPackage(String packageName) {                                          </span>
<span class="5926615868676258534" onmouseenter="enter('5926615868676258534');" onmouseout="out('5926615868676258534');" style="">1969              AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);                           </span>
<span class="-9146530298789779749" onmouseenter="enter('-9146530298789779749');" onmouseout="out('-9146530298789779749');" style="">1970              List&lt;AppWidgetProviderInfo&gt; providers = appWidgetManager.getInstalledProviders();                     </span>
<span class="8240747760739264929" onmouseenter="enter('8240747760739264929');" onmouseout="out('8240747760739264929');" style="">1971              if (providers == null) return null;                                                                   </span>
<span class="-4472953897741653841" onmouseenter="enter('-4472953897741653841');" onmouseout="out('-4472953897741653841');" style="">1972              final int providerCount = providers.size();                                                           </span>
<span class="-3677188574112977350" onmouseenter="enter('-3677188574112977350');" onmouseout="out('-3677188574112977350');" style="">1973              for (int i = 0; i &lt; providerCount; i++) {                                                             </span>
<span class="-7171635845718933899" onmouseenter="enter('-7171635845718933899');" onmouseout="out('-7171635845718933899');" style="">1974                  ComponentName provider = providers.get(i).provider;                                               </span>
<span class="-8539437723912583859" onmouseenter="enter('-8539437723912583859');" onmouseout="out('-8539437723912583859');" style="">1975                  if (provider != null &amp;&amp; provider.getPackageName().equals(packageName)) {                          </span>
<span class="-5713992356211538326" onmouseenter="enter('-5713992356211538326');" onmouseout="out('-5713992356211538326');" style="">1976                      return provider;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1977                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1978              }                                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1979              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1980          }                                                                                                         </span>
<span  style="">1981                                                                                                                    </span>
<span class="-5217434435632176583" onmouseenter="enter('-5217434435632176583');" onmouseout="out('-5217434435632176583');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1982 -        private boolean addSearchWidget(SQLiteDatabase db, ContentValues values) {                                </span>
<span class="-8642962111590355532" onmouseenter="enter('-8642962111590355532');" onmouseout="out('-8642962111590355532');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1983 -            ComponentName cn = getSearchWidgetProvider();                                                         </span>
<span class="-2153149138161463103" onmouseenter="enter('-2153149138161463103');" onmouseout="out('-2153149138161463103');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1984 -            return addAppWidget(db, values, cn, 4, 1, null);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1985 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1986 -                                                                                                                  </span>
<span class="4201790855606261831" onmouseenter="enter('4201790855606261831');" onmouseout="out('4201790855606261831');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1987 -        private boolean addClockWidget(SQLiteDatabase db, ContentValues values) {                                 </span>
<span class="8549355767911364265" onmouseenter="enter('8549355767911364265');" onmouseout="out('8549355767911364265');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1988 -            ComponentName cn = new ComponentName(&quot;com.android.alarmclock&quot;,                                        </span>
<span class="-894321612201993" onmouseenter="enter('-894321612201993');" onmouseout="out('-894321612201993');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1989 -                    &quot;com.android.alarmclock.AnalogAppWidgetProvider&quot;);                                            </span>
<span class="4488632627137353253" onmouseenter="enter('4488632627137353253');" onmouseout="out('4488632627137353253');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1990 -            return addAppWidget(db, values, cn, 2, 2, null);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1991 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1992 -                                                                                                                  </span>
<span class="-3019994452875682616" onmouseenter="enter('-3019994452875682616');" onmouseout="out('-3019994452875682616');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1993 -        private boolean addAppWidget(XmlResourceParser parser, AttributeSet attrs, int type,                      </span>
<span class="4628536649123436074" onmouseenter="enter('4628536649123436074');" onmouseout="out('4628536649123436074');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1994 -                SQLiteDatabase db, ContentValues values, TypedArray a,                                            </span>
<span class="-6862924653519334721" onmouseenter="enter('-6862924653519334721');" onmouseout="out('-6862924653519334721');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1995 -                PackageManager packageManager) throws XmlPullParserException, IOException {                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1996 -                                                                                                                  </span>
<span class="-2731505437317613966" onmouseenter="enter('-2731505437317613966');" onmouseout="out('-2731505437317613966');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1997 -            String packageName = a.getString(R.styleable.Favorite_packageName);                                   </span>
<span class="-7301737252032161052" onmouseenter="enter('-7301737252032161052');" onmouseout="out('-7301737252032161052');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1998 -            String className = a.getString(R.styleable.Favorite_className);                                       </span>
<span class="7423522138346906000" onmouseenter="enter('7423522138346906000');" onmouseout="out('7423522138346906000');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1999 +        private boolean addAppWidget(XmlResourceParser parser, int type,                                          </span>
<span class="-6133617394960992004" onmouseenter="enter('-6133617394960992004');" onmouseout="out('-6133617394960992004');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2000 +                SQLiteDatabase db, ContentValues values)                                                          </span>
<span class="-2080139816352784756" onmouseenter="enter('-2080139816352784756');" onmouseout="out('-2080139816352784756');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2001 +                throws XmlPullParserException, IOException {                                                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2002 +                                                                                                                  </span>
<span class="-718046620766449518" onmouseenter="enter('-718046620766449518');" onmouseout="out('-718046620766449518');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2003 +            String packageName = getAttributeValue(parser, ATTR_PACKAGE_NAME);                                    </span>
<span class="4439764153802283676" onmouseenter="enter('4439764153802283676');" onmouseout="out('4439764153802283676');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2004 +            String className = getAttributeValue(parser, ATTR_CLASS_NAME);                                        </span>
<span  style="">2005                                                                                                                    </span>
<span class="5996115603177381005" onmouseenter="enter('5996115603177381005');" onmouseout="out('5996115603177381005');" style="">2006              if (packageName == null || className == null) {                                                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2007                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2008              }                                                                                                     </span>
<span  style="">2009                                                                                                                    </span>
<span class="-560542064760217423" onmouseenter="enter('-560542064760217423');" onmouseout="out('-560542064760217423');" style="">2010              boolean hasPackage = true;                                                                            </span>
<span class="-654268133061106000" onmouseenter="enter('-654268133061106000');" onmouseout="out('-654268133061106000');" style="">2011              ComponentName cn = new ComponentName(packageName, className);                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2012              try {                                                                                                 </span>
<span class="-6660477486958138416" onmouseenter="enter('-6660477486958138416');" onmouseout="out('-6660477486958138416');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2013 -                packageManager.getReceiverInfo(cn, 0);                                                            </span>
<span class="8130452402467519988" onmouseenter="enter('8130452402467519988');" onmouseout="out('8130452402467519988');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2014 +                mPackageManager.getReceiverInfo(cn, 0);                                                           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2015              } catch (Exception e) {                                                                               </span>
<span class="-7594746117818741416" onmouseenter="enter('-7594746117818741416');" onmouseout="out('-7594746117818741416');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2016 -                String[] packages = packageManager.currentToCanonicalPackageNames(                                </span>
<span class="9170643828915655827" onmouseenter="enter('9170643828915655827');" onmouseout="out('9170643828915655827');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2017 +                String[] packages = mPackageManager.currentToCanonicalPackageNames(                               </span>
<span class="8150942388199951060" onmouseenter="enter('8150942388199951060');" onmouseout="out('8150942388199951060');" style="">2018                          new String[] { packageName });                                                            </span>
<span class="-5669551341563183030" onmouseenter="enter('-5669551341563183030');" onmouseout="out('-5669551341563183030');" style="">2019                  cn = new ComponentName(packages[0], className);                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2020                  try {                                                                                             </span>
<span class="-6660477486958138416" onmouseenter="enter('-6660477486958138416');" onmouseout="out('-6660477486958138416');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2021 -                    packageManager.getReceiverInfo(cn, 0);                                                        </span>
<span class="8130452402467519988" onmouseenter="enter('8130452402467519988');" onmouseout="out('8130452402467519988');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2022 +                    mPackageManager.getReceiverInfo(cn, 0);                                                       </span>
<span class="9117521976016008877" onmouseenter="enter('9117521976016008877');" onmouseout="out('9117521976016008877');" style="">2023                  } catch (Exception e1) {                                                                          </span>
<span class="-7691856903679287558" onmouseenter="enter('-7691856903679287558');" onmouseout="out('-7691856903679287558');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2024 +                    System.out.println(&quot;Can&#x27;t find widget provider: &quot; + className);                               </span>
<span class="-7980647756745699951" onmouseenter="enter('-7980647756745699951');" onmouseout="out('-7980647756745699951');" style="">2025                      hasPackage = false;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2026                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2027              }                                                                                                     </span>
<span  style="">2028                                                                                                                    </span>
<span class="409326210478719297" onmouseenter="enter('409326210478719297');" onmouseout="out('409326210478719297');" style="">2029              if (hasPackage) {                                                                                     </span>
<span class="-2951479107025264404" onmouseenter="enter('-2951479107025264404');" onmouseout="out('-2951479107025264404');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2030 -                int spanX = a.getInt(R.styleable.Favorite_spanX, 0);                                              </span>
<span class="7027893237403650616" onmouseenter="enter('7027893237403650616');" onmouseout="out('7027893237403650616');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2031 -                int spanY = a.getInt(R.styleable.Favorite_spanY, 0);                                              </span>
<span class="-4669201679920980010" onmouseenter="enter('-4669201679920980010');" onmouseout="out('-4669201679920980010');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2032 +                String spanX = getAttributeValue(parser, ATTR_SPAN_X);                                            </span>
<span class="-5569004961371581944" onmouseenter="enter('-5569004961371581944');" onmouseout="out('-5569004961371581944');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2033 +                String spanY = getAttributeValue(parser, ATTR_SPAN_Y);                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2034 +                                                                                                                  </span>
<span class="-6724210500107661935" onmouseenter="enter('-6724210500107661935');" onmouseout="out('-6724210500107661935');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2035 +                values.put(Favorites.SPANX, spanX);                                                               </span>
<span class="5251293644299118699" onmouseenter="enter('5251293644299118699');" onmouseout="out('5251293644299118699');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2036 +                values.put(Favorites.SPANY, spanY);                                                               </span>
<span  style="">2037                                                                                                                    </span>
<span class="1289388088122621273" onmouseenter="enter('1289388088122621273');" onmouseout="out('1289388088122621273');" style="">2038                  // Read the extras                                                                                </span>
<span class="1776998572180860248" onmouseenter="enter('1776998572180860248');" onmouseout="out('1776998572180860248');" style="">2039                  Bundle extras = new Bundle();                                                                     </span>
<span class="-5007551987214809206" onmouseenter="enter('-5007551987214809206');" onmouseout="out('-5007551987214809206');" style="">2040                  int widgetDepth = parser.getDepth();                                                              </span>
<span class="-2406917717669951461" onmouseenter="enter('-2406917717669951461');" onmouseout="out('-2406917717669951461');" style="">2041                  while ((type = parser.next()) != XmlPullParser.END_TAG ||                                         </span>
<span class="712714666508979329" onmouseenter="enter('712714666508979329');" onmouseout="out('712714666508979329');" style="">2042                          parser.getDepth() &gt; widgetDepth) {                                                        </span>
<span class="-852303053066575561" onmouseenter="enter('-852303053066575561');" onmouseout="out('-852303053066575561');" style="">2043                      if (type != XmlPullParser.START_TAG) {                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2044                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2045                      }                                                                                             </span>
<span  style="">2046                                                                                                                    </span>
<span class="-7589004276029368972" onmouseenter="enter('-7589004276029368972');" onmouseout="out('-7589004276029368972');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2047 -                    TypedArray ar = mContext.obtainStyledAttributes(attrs, R.styleable.Extra);                    </span>
<span class="2554175265936504377" onmouseenter="enter('2554175265936504377');" onmouseout="out('2554175265936504377');" style="">2048                      if (TAG_EXTRA.equals(parser.getName())) {                                                     </span>
<span class="8007675596674595294" onmouseenter="enter('8007675596674595294');" onmouseout="out('8007675596674595294');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2049 -                        String key = ar.getString(R.styleable.Extra_key);                                         </span>
<span class="3159144016191079365" onmouseenter="enter('3159144016191079365');" onmouseout="out('3159144016191079365');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2050 -                        String value = ar.getString(R.styleable.Extra_value);                                     </span>
<span class="-9040232295281944434" onmouseenter="enter('-9040232295281944434');" onmouseout="out('-9040232295281944434');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2051 +                        String key = getAttributeValue(parser, ATTR_KEY);                                         </span>
<span class="1087049418585534522" onmouseenter="enter('1087049418585534522');" onmouseout="out('1087049418585534522');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2052 +                        String value = getAttributeValue(parser, ATTR_VALUE);                                     </span>
<span class="1352636898895267389" onmouseenter="enter('1352636898895267389');" onmouseout="out('1352636898895267389');" style="">2053                          if (key != null &amp;&amp; value != null) {                                                       </span>
<span class="3617031493102045508" onmouseenter="enter('3617031493102045508');" onmouseout="out('3617031493102045508');" style="">2054                              extras.putString(key, value);                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2055                          } else {                                                                                  </span>
<span class="-1604814790568911229" onmouseenter="enter('-1604814790568911229');" onmouseout="out('-1604814790568911229');" style="">2056                              throw new RuntimeException(&quot;Widget extras must have a key and value&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2057                          }                                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2058                      } else {                                                                                      </span>
<span class="-4167415435020508425" onmouseenter="enter('-4167415435020508425');" onmouseout="out('-4167415435020508425');" style="">2059                          throw new RuntimeException(&quot;Widgets can contain only extras&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2060                      }                                                                                             </span>
<span class="-1262268612236580682" onmouseenter="enter('-1262268612236580682');" onmouseout="out('-1262268612236580682');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2061 -                    ar.recycle();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2062 -                }                                                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2063 -                                                                                                                  </span>
<span class="-6571267092309902099" onmouseenter="enter('-6571267092309902099');" onmouseout="out('-6571267092309902099');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2064 -                return addAppWidget(db, values, cn, spanX, spanY, extras);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2065 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2066 +                                                                                                                  </span>
<span class="-7507688791595687187" onmouseenter="enter('-7507688791595687187');" onmouseout="out('-7507688791595687187');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2067 +                return addAppWidget(db, values, cn, extras);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2068              }                                                                                                     </span>
<span  style="">2069                                                                                                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2070              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2071          }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2072 +                                                                                                                  </span>
<span class="5639814246862080116" onmouseenter="enter('5639814246862080116');" onmouseout="out('5639814246862080116');" style="">2073          private boolean addAppWidget(SQLiteDatabase db, ContentValues values, ComponentName cn,                   </span>
<span class="821044586913806243" onmouseenter="enter('821044586913806243');" onmouseout="out('821044586913806243');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2074 -                int spanX, int spanY, Bundle extras) {                                                            </span>
<span class="-8655373127252952262" onmouseenter="enter('-8655373127252952262');" onmouseout="out('-8655373127252952262');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2075 +               Bundle extras) {                                                                                   </span>
<span class="1781858051498019239" onmouseenter="enter('1781858051498019239');" onmouseout="out('1781858051498019239');" style="">2076              boolean allocatedAppWidgets = false;                                                                  </span>
<span class="328319718470950320" onmouseenter="enter('328319718470950320');" onmouseout="out('328319718470950320');" style="">2077              final AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);                     </span>
<span  style="">2078                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2079              try {                                                                                                 </span>
<span class="7176738113779216844" onmouseenter="enter('7176738113779216844');" onmouseout="out('7176738113779216844');" style="">2080                  int appWidgetId = mAppWidgetHost.allocateAppWidgetId();                                           </span>
<span  style="">2081                                                                                                                    </span>
<span class="2941545182515325414" onmouseenter="enter('2941545182515325414');" onmouseout="out('2941545182515325414');" style="">2082                  values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_APPWIDGET);                                   </span>
<span class="-6724210500107661935" onmouseenter="enter('-6724210500107661935');" onmouseout="out('-6724210500107661935');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2083 -                values.put(Favorites.SPANX, spanX);                                                               </span>
<span class="5251293644299118699" onmouseenter="enter('5251293644299118699');" onmouseout="out('5251293644299118699');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2084 -                values.put(Favorites.SPANY, spanY);                                                               </span>
<span class="-2217583362005241057" onmouseenter="enter('-2217583362005241057');" onmouseout="out('-2217583362005241057');" style="">2085                  values.put(Favorites.APPWIDGET_ID, appWidgetId);                                                  </span>
<span class="720562493083146912" onmouseenter="enter('720562493083146912');" onmouseout="out('720562493083146912');" style="">2086                  values.put(Favorites.APPWIDGET_PROVIDER, cn.flattenToString());                                   </span>
<span class="-7797208824576653991" onmouseenter="enter('-7797208824576653991');" onmouseout="out('-7797208824576653991');" style="">2087                  values.put(Favorites._ID, generateNewItemId());                                                   </span>
<span class="-1295706295937517511" onmouseenter="enter('-1295706295937517511');" onmouseout="out('-1295706295937517511');" style="">2088                  dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values);                                        </span>
<span  style="">2089                                                                                                                    </span>
<span class="-7439816523904895371" onmouseenter="enter('-7439816523904895371');" onmouseout="out('-7439816523904895371');" style="">2090                  allocatedAppWidgets = true;                                                                       </span>
<span  style="">2091                                                                                                                    </span>
<span class="-8318890136327376190" onmouseenter="enter('-8318890136327376190');" onmouseout="out('-8318890136327376190');" style="">2092                  // TODO: need to check return value                                                               </span>
<span class="3068764521751310260" onmouseenter="enter('3068764521751310260');" onmouseout="out('3068764521751310260');" style="">2093                  appWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId, cn);                                       </span>
<span  style="">2094                                                                                                                    </span>
<span class="-7400703460033211758" onmouseenter="enter('-7400703460033211758');" onmouseout="out('-7400703460033211758');" style="">2095                  // Send a broadcast to configure the widget                                                       </span>
<span class="6241633944023172610" onmouseenter="enter('6241633944023172610');" onmouseout="out('6241633944023172610');" style="">2096                  if (extras != null &amp;&amp; !extras.isEmpty()) {                                                        </span>
<span class="-3925623083558987667" onmouseenter="enter('-3925623083558987667');" onmouseout="out('-3925623083558987667');" style="">2097                      Intent intent = new Intent(ACTION_APPWIDGET_DEFAULT_WORKSPACE_CONFIGURE);                     </span>
<span class="1965368382885656907" onmouseenter="enter('1965368382885656907');" onmouseout="out('1965368382885656907');" style="">2098                      intent.setComponent(cn);                                                                      </span>
<span class="4121123198595596428" onmouseenter="enter('4121123198595596428');" onmouseout="out('4121123198595596428');" style="">2099                      intent.putExtras(extras);                                                                     </span>
<span class="-3801864120150122877" onmouseenter="enter('-3801864120150122877');" onmouseout="out('-3801864120150122877');" style="">2100                      intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);                            </span>
<span class="15213497691013705" onmouseenter="enter('15213497691013705');" onmouseout="out('15213497691013705');" style="">2101                      mContext.sendBroadcast(intent);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2102                  }                                                                                                 </span>
<span class="3255801419413274971" onmouseenter="enter('3255801419413274971');" onmouseout="out('3255801419413274971');" style="">2103              } catch (RuntimeException ex) {                                                                       </span>
<span class="7589023920505453658" onmouseenter="enter('7589023920505453658');" onmouseout="out('7589023920505453658');" style="">2104                  Log.e(TAG, &quot;Problem allocating appWidgetId&quot;, ex);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2105              }                                                                                                     </span>
<span  style="">2106                                                                                                                    </span>
<span class="-7630264847974566407" onmouseenter="enter('-7630264847974566407');" onmouseout="out('-7630264847974566407');" style="">2107              return allocatedAppWidgets;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2108          }                                                                                                         </span>
<span  style="">2109                                                                                                                    </span>
<span class="1919594348314194664" onmouseenter="enter('1919594348314194664');" onmouseout="out('1919594348314194664');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2110 -        private long addUriShortcut(SQLiteDatabase db, ContentValues values,                                      </span>
<span class="6842574012801072466" onmouseenter="enter('6842574012801072466');" onmouseout="out('6842574012801072466');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2111 -                TypedArray a) {                                                                                   </span>
<span class="-6235693257568868339" onmouseenter="enter('-6235693257568868339');" onmouseout="out('-6235693257568868339');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2112 -            Resources r = mContext.getResources();                                                                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2113 -                                                                                                                  </span>
<span class="-5862917893980145574" onmouseenter="enter('-5862917893980145574');" onmouseout="out('-5862917893980145574');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2114 -            final int iconResId = a.getResourceId(R.styleable.Favorite_icon, 0);                                  </span>
<span class="7850281458836736140" onmouseenter="enter('7850281458836736140');" onmouseout="out('7850281458836736140');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2115 -            final int titleResId = a.getResourceId(R.styleable.Favorite_title, 0);                                </span>
<span class="-1908262329425085059" onmouseenter="enter('-1908262329425085059');" onmouseout="out('-1908262329425085059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2116 +        private long addUriShortcut(SQLiteDatabase db, ContentValues values, Resources res,                       </span>
<span class="-1953831149857843506" onmouseenter="enter('-1953831149857843506');" onmouseout="out('-1953831149857843506');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2117 +                XmlResourceParser parser) {                                                                       </span>
<span class="-3466107134881523829" onmouseenter="enter('-3466107134881523829');" onmouseout="out('-3466107134881523829');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2118 +            final int iconResId = getAttributeResourceValue(parser, ATTR_ICON, 0);                                </span>
<span class="-292812422880448019" onmouseenter="enter('-292812422880448019');" onmouseout="out('-292812422880448019');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2119 +            final int titleResId = getAttributeResourceValue(parser, ATTR_TITLE, 0);                              </span>
<span  style="">2120                                                                                                                    </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">2121              Intent intent;                                                                                        </span>
<span class="7870717952219178672" onmouseenter="enter('7870717952219178672');" onmouseout="out('7870717952219178672');" style="">2122              String uri = null;                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2123              try {                                                                                                 </span>
<span class="6224217614686229638" onmouseenter="enter('6224217614686229638');" onmouseout="out('6224217614686229638');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2124 -                uri = a.getString(R.styleable.Favorite_uri);                                                      </span>
<span class="-7650716598670279522" onmouseenter="enter('-7650716598670279522');" onmouseout="out('-7650716598670279522');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2125 +                uri = getAttributeValue(parser, ATTR_URI);                                                        </span>
<span class="4895125029429862660" onmouseenter="enter('4895125029429862660');" onmouseout="out('4895125029429862660');" style="">2126                  intent = Intent.parseUri(uri, 0);                                                                 </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">2127              } catch (URISyntaxException e) {                                                                      </span>
<span class="-551028723023595678" onmouseenter="enter('-551028723023595678');" onmouseout="out('-551028723023595678');" style="">2128                  Log.w(TAG, &quot;Shortcut has malformed uri: &quot; + uri);                                                 </span>
<span class="-2825391504508189972" onmouseenter="enter('-2825391504508189972');" onmouseout="out('-2825391504508189972');" style="">2129                  return -1; // Oh well                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2130              }                                                                                                     </span>
<span  style="">2131                                                                                                                    </span>
<span class="-4845565437702179980" onmouseenter="enter('-4845565437702179980');" onmouseout="out('-4845565437702179980');" style="">2132              if (iconResId == 0 || titleResId == 0) {                                                              </span>
<span class="1657418688720717724" onmouseenter="enter('1657418688720717724');" onmouseout="out('1657418688720717724');" style="">2133                  Log.w(TAG, &quot;Shortcut is missing title or icon resource ID&quot;);                                      </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">2134                  return -1;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2135              }                                                                                                     </span>
<span  style="">2136                                                                                                                    </span>
<span class="-4828262327370557067" onmouseenter="enter('-4828262327370557067');" onmouseout="out('-4828262327370557067');" style="">2137              long id = generateNewItemId();                                                                        </span>
<span class="-2757970933426051337" onmouseenter="enter('-2757970933426051337');" onmouseout="out('-2757970933426051337');" style="">2138              intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);                                                       </span>
<span class="-3718774165038650653" onmouseenter="enter('-3718774165038650653');" onmouseout="out('-3718774165038650653');" style="">2139              values.put(Favorites.INTENT, intent.toUri(0));                                                        </span>
<span class="1332418964508164600" onmouseenter="enter('1332418964508164600');" onmouseout="out('1332418964508164600');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2140 -            values.put(Favorites.TITLE, r.getString(titleResId));                                                 </span>
<span class="6819813114831017583" onmouseenter="enter('6819813114831017583');" onmouseout="out('6819813114831017583');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2141 +            values.put(Favorites.TITLE, res.getString(titleResId));                                               </span>
<span class="8456179705287717594" onmouseenter="enter('8456179705287717594');" onmouseout="out('8456179705287717594');" style="">2142              values.put(Favorites.ITEM_TYPE, Favorites.ITEM_TYPE_SHORTCUT);                                        </span>
<span class="2615630886033492062" onmouseenter="enter('2615630886033492062');" onmouseout="out('2615630886033492062');" style="">2143              values.put(Favorites.SPANX, 1);                                                                       </span>
<span class="-5449525265648364043" onmouseenter="enter('-5449525265648364043');" onmouseout="out('-5449525265648364043');" style="">2144              values.put(Favorites.SPANY, 1);                                                                       </span>
<span class="-4755043480149851001" onmouseenter="enter('-4755043480149851001');" onmouseout="out('-4755043480149851001');" style="">2145              values.put(Favorites.ICON_TYPE, Favorites.ICON_TYPE_RESOURCE);                                        </span>
<span class="9077889035940024877" onmouseenter="enter('9077889035940024877');" onmouseout="out('9077889035940024877');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2146 -            values.put(Favorites.ICON_PACKAGE, mContext.getPackageName());                                        </span>
<span class="-268469418719139467" onmouseenter="enter('-268469418719139467');" onmouseout="out('-268469418719139467');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2147 -            values.put(Favorites.ICON_RESOURCE, r.getResourceName(iconResId));                                    </span>
<span class="1859204163826884777" onmouseenter="enter('1859204163826884777');" onmouseout="out('1859204163826884777');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2148 +            values.put(Favorites.ICON_PACKAGE, res.getResourcePackageName(iconResId));                            </span>
<span class="7390195787308769234" onmouseenter="enter('7390195787308769234');" onmouseout="out('7390195787308769234');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2149 +            values.put(Favorites.ICON_RESOURCE, res.getResourceName(iconResId));                                  </span>
<span class="2067035903685433430" onmouseenter="enter('2067035903685433430');" onmouseout="out('2067035903685433430');" style="">2150              values.put(Favorites._ID, id);                                                                        </span>
<span  style="">2151                                                                                                                    </span>
<span class="-2280993933700750215" onmouseenter="enter('-2280993933700750215');" onmouseout="out('-2280993933700750215');" style="">2152              if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, values) &lt; 0) {                                  </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">2153                  return -1;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2154              }                                                                                                     </span>
<span class="-3074727595953522219" onmouseenter="enter('-3074727595953522219');" onmouseout="out('-3074727595953522219');" style="">2155              return id;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2156          }                                                                                                         </span>
<span  style="">2157                                                                                                                    </span>
<span class="1686941810497757241" onmouseenter="enter('1686941810497757241');" onmouseout="out('1686941810497757241');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2158 -        public void migrateLauncher2Shortcuts(SQLiteDatabase db, Uri uri) {                                       </span>
<span class="725730754436415996" onmouseenter="enter('725730754436415996');" onmouseout="out('725730754436415996');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2159 +        private void migrateLauncher2Shortcuts(SQLiteDatabase db, Uri uri) {                                      </span>
<span class="-1113390730047466962" onmouseenter="enter('-1113390730047466962');" onmouseout="out('-1113390730047466962');" style="">2160              final ContentResolver resolver = mContext.getContentResolver();                                       </span>
<span class="-3774076673393313717" onmouseenter="enter('-3774076673393313717');" onmouseout="out('-3774076673393313717');" style="">2161              Cursor c = null;                                                                                      </span>
<span class="-7835997453776942924" onmouseenter="enter('-7835997453776942924');" onmouseout="out('-7835997453776942924');" style="">2162              int count = 0;                                                                                        </span>
<span class="-3336839334240068207" onmouseenter="enter('-3336839334240068207');" onmouseout="out('-3336839334240068207');" style="">2163              int curScreen = 0;                                                                                    </span>
<span  style="">2164                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2165              try {                                                                                                 </span>
<span class="-9000085593458662527" onmouseenter="enter('-9000085593458662527');" onmouseout="out('-9000085593458662527');" style="">2166                  c = resolver.query(uri, null, null, null, &quot;title ASC&quot;);                                           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2167              } catch (Exception e) {                                                                               </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">2168                  // Ignore                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2169              }                                                                                                     </span>
<span  style="">2170                                                                                                                    </span>
<span class="-8364191572061005786" onmouseenter="enter('-8364191572061005786');" onmouseout="out('-8364191572061005786');" style="">2171              // We already have a favorites database in the old provider                                           </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2172              if (c != null) {                                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2173                  try {                                                                                             </span>
<span class="-7145577210477193493" onmouseenter="enter('-7145577210477193493');" onmouseout="out('-7145577210477193493');" style="">2174                      if (c.getCount() &gt; 0) {                                                                       </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">2175                          final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);              </span>
<span class="-3305857310034960574" onmouseenter="enter('-3305857310034960574');" onmouseout="out('-3305857310034960574');" style="">2176                          final int intentIndex                                                                     </span>
<span class="7354730669796853916" onmouseenter="enter('7354730669796853916');" onmouseout="out('7354730669796853916');" style="">2177                                  = c.getColumnIndexOrThrow(LauncherSettings.Favorites.INTENT);                     </span>
<span class="-5630883347545993547" onmouseenter="enter('-5630883347545993547');" onmouseout="out('-5630883347545993547');" style="">2178                          final int titleIndex                                                                      </span>
<span class="698330273931132471" onmouseenter="enter('698330273931132471');" onmouseout="out('698330273931132471');" style="">2179                                  = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);                      </span>
<span class="-3330891132272232037" onmouseenter="enter('-3330891132272232037');" onmouseout="out('-3330891132272232037');" style="">2180                          final int iconTypeIndex                                                                   </span>
<span class="7801651150775381680" onmouseenter="enter('7801651150775381680');" onmouseout="out('7801651150775381680');" style="">2181                                  = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYPE);                  </span>
<span class="-1496515754016715409" onmouseenter="enter('-1496515754016715409');" onmouseout="out('-1496515754016715409');" style="">2182                          final int iconIndex                                                                       </span>
<span class="-6743710571640483882" onmouseenter="enter('-6743710571640483882');" onmouseout="out('-6743710571640483882');" style="">2183                                  = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);                       </span>
<span class="-4968513115427762421" onmouseenter="enter('-4968513115427762421');" onmouseout="out('-4968513115427762421');" style="">2184                          final int iconPackageIndex                                                                </span>
<span class="6406994869194943351" onmouseenter="enter('6406994869194943351');" onmouseout="out('6406994869194943351');" style="">2185                                  = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE);               </span>
<span class="7917018656335895183" onmouseenter="enter('7917018656335895183');" onmouseout="out('7917018656335895183');" style="">2186                          final int iconResourceIndex                                                               </span>
<span class="2805080254532821790" onmouseenter="enter('2805080254532821790');" onmouseout="out('2805080254532821790');" style="">2187                                  = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURCE);              </span>
<span class="-4237567403763432926" onmouseenter="enter('-4237567403763432926');" onmouseout="out('-4237567403763432926');" style="">2188                          final int containerIndex                                                                  </span>
<span class="-5056484222025497452" onmouseenter="enter('-5056484222025497452');" onmouseout="out('-5056484222025497452');" style="">2189                                  = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);                  </span>
<span class="-1231922168250187193" onmouseenter="enter('-1231922168250187193');" onmouseout="out('-1231922168250187193');" style="">2190                          final int itemTypeIndex                                                                   </span>
<span class="4225538929397018586" onmouseenter="enter('4225538929397018586');" onmouseout="out('4225538929397018586');" style="">2191                                  = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);                  </span>
<span class="1886064968207935621" onmouseenter="enter('1886064968207935621');" onmouseout="out('1886064968207935621');" style="">2192                          final int screenIndex                                                                     </span>
<span class="5823358741192050359" onmouseenter="enter('5823358741192050359');" onmouseout="out('5823358741192050359');" style="">2193                                  = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);                     </span>
<span class="148786652433469700" onmouseenter="enter('148786652433469700');" onmouseout="out('148786652433469700');" style="">2194                          final int cellXIndex                                                                      </span>
<span class="-2420213882448561608" onmouseenter="enter('-2420213882448561608');" onmouseout="out('-2420213882448561608');" style="">2195                                  = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                      </span>
<span class="7105291823960507491" onmouseenter="enter('7105291823960507491');" onmouseout="out('7105291823960507491');" style="">2196                          final int cellYIndex                                                                      </span>
<span class="570222995967736070" onmouseenter="enter('570222995967736070');" onmouseout="out('570222995967736070');" style="">2197                                  = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                      </span>
<span class="-6657516663903609513" onmouseenter="enter('-6657516663903609513');" onmouseout="out('-6657516663903609513');" style="">2198                          final int uriIndex                                                                        </span>
<span class="-7627325667289175305" onmouseenter="enter('-7627325667289175305');" onmouseout="out('-7627325667289175305');" style="">2199                                  = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);                        </span>
<span class="3126191733073545935" onmouseenter="enter('3126191733073545935');" onmouseout="out('3126191733073545935');" style="">2200                          final int displayModeIndex                                                                </span>
<span class="5824024113471232605" onmouseenter="enter('5824024113471232605');" onmouseout="out('5824024113471232605');" style="">2201                                  = c.getColumnIndexOrThrow(LauncherSettings.Favorites.DISPLAY_MODE);               </span>
<span class="6969636044710489163" onmouseenter="enter('6969636044710489163');" onmouseout="out('6969636044710489163');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2202 +                        final int profileIndex                                                                    </span>
<span class="-4394079448083019726" onmouseenter="enter('-4394079448083019726');" onmouseout="out('-4394079448083019726');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2203 +                                = c.getColumnIndex(LauncherSettings.Favorites.PROFILE_ID);                        </span>
<span  style="">2204                                                                                                                    </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style="">2205                          int i = 0;                                                                                </span>
<span class="3196084964022358374" onmouseenter="enter('3196084964022358374');" onmouseout="out('3196084964022358374');" style="">2206                          int curX = 0;                                                                             </span>
<span class="-8919994129307273415" onmouseenter="enter('-8919994129307273415');" onmouseout="out('-8919994129307273415');" style="">2207                          int curY = 0;                                                                             </span>
<span  style="">2208                                                                                                                    </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2209                          final LauncherAppState app = LauncherAppState.getInstance();                              </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2210                          final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                       </span>
<span class="690371396691664791" onmouseenter="enter('690371396691664791');" onmouseout="out('690371396691664791');" style="">2211                          final int width = (int) grid.numColumns;                                                  </span>
<span class="-5064901428253886355" onmouseenter="enter('-5064901428253886355');" onmouseout="out('-5064901428253886355');" style="">2212                          final int height = (int) grid.numRows;                                                    </span>
<span class="-4109722385928167056" onmouseenter="enter('-4109722385928167056');" onmouseout="out('-4109722385928167056');" style="">2213                          final int hotseatWidth = (int) grid.numHotseatIcons;                                      </span>
<span class="-1730109496559992149" onmouseenter="enter('-1730109496559992149');" onmouseout="out('-1730109496559992149');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2214 -                        PackageManager pm = mContext.getPackageManager();                                         </span>
<span  style="">2215                                                                                                                    </span>
<span class="-4392487977825691924" onmouseenter="enter('-4392487977825691924');" onmouseout="out('-4392487977825691924');" style="">2216                          final HashSet&lt;String&gt; seenIntents = new HashSet&lt;String&gt;(c.getCount());                    </span>
<span  style="">2217                                                                                                                    </span>
<span class="-1775881703038933069" onmouseenter="enter('-1775881703038933069');" onmouseout="out('-1775881703038933069');" style="">2218                          final ArrayList&lt;ContentValues&gt; shortcuts = new ArrayList&lt;ContentValues&gt;();                </span>
<span class="-5282219486258454454" onmouseenter="enter('-5282219486258454454');" onmouseout="out('-5282219486258454454');" style="">2219                          final ArrayList&lt;ContentValues&gt; folders = new ArrayList&lt;ContentValues&gt;();                  </span>
<span class="7748304206224281059" onmouseenter="enter('7748304206224281059');" onmouseout="out('7748304206224281059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2220 +                        final SparseArray&lt;ContentValues&gt; hotseat = new SparseArray&lt;ContentValues&gt;();              </span>
<span  style="">2221                                                                                                                    </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style="">2222                          while (c.moveToNext()) {                                                                  </span>
<span class="-2982692859195643614" onmouseenter="enter('-2982692859195643614');" onmouseout="out('-2982692859195643614');" style="">2223                              final int itemType = c.getInt(itemTypeIndex);                                         </span>
<span class="-7155300134759553393" onmouseenter="enter('-7155300134759553393');" onmouseout="out('-7155300134759553393');" style="">2224                              if (itemType != Favorites.ITEM_TYPE_APPLICATION                                       </span>
<span class="-6505147694408678007" onmouseenter="enter('-6505147694408678007');" onmouseout="out('-6505147694408678007');" style="">2225                                      &amp;&amp; itemType != Favorites.ITEM_TYPE_SHORTCUT                                   </span>
<span class="-1211279440538129484" onmouseenter="enter('-1211279440538129484');" onmouseout="out('-1211279440538129484');" style="">2226                                      &amp;&amp; itemType != Favorites.ITEM_TYPE_FOLDER) {                                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2227                                  continue;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2228                              }                                                                                     </span>
<span  style="">2229                                                                                                                    </span>
<span class="6546086433507254477" onmouseenter="enter('6546086433507254477');" onmouseout="out('6546086433507254477');" style="">2230                              final int cellX = c.getInt(cellXIndex);                                               </span>
<span class="-5848765603231722693" onmouseenter="enter('-5848765603231722693');" onmouseout="out('-5848765603231722693');" style="">2231                              final int cellY = c.getInt(cellYIndex);                                               </span>
<span class="5057139106655212954" onmouseenter="enter('5057139106655212954');" onmouseout="out('5057139106655212954');" style="">2232                              final int screen = c.getInt(screenIndex);                                             </span>
<span class="-6682259384170717005" onmouseenter="enter('-6682259384170717005');" onmouseout="out('-6682259384170717005');" style="">2233                              int container = c.getInt(containerIndex);                                             </span>
<span class="-3517014905521526588" onmouseenter="enter('-3517014905521526588');" onmouseout="out('-3517014905521526588');" style="">2234                              final String intentStr = c.getString(intentIndex);                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2235 +                                                                                                                  </span>
<span class="8272328117098122260" onmouseenter="enter('8272328117098122260');" onmouseout="out('8272328117098122260');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2236 +                            UserManagerCompat userManager = UserManagerCompat.getInstance(mContext);              </span>
<span class="7210862209025052290" onmouseenter="enter('7210862209025052290');" onmouseout="out('7210862209025052290');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2237 +                            UserHandleCompat userHandle;                                                          </span>
<span class="-704754462563124721" onmouseenter="enter('-704754462563124721');" onmouseout="out('-704754462563124721');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2238 +                            final long userSerialNumber;                                                          </span>
<span class="-3188525411347809180" onmouseenter="enter('-3188525411347809180');" onmouseout="out('-3188525411347809180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2239 +                            if (profileIndex != -1 &amp;&amp; !c.isNull(profileIndex)) {                                  </span>
<span class="3377600326593357797" onmouseenter="enter('3377600326593357797');" onmouseout="out('3377600326593357797');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2240 +                                userSerialNumber = c.getInt(profileIndex);                                        </span>
<span class="-5580723935665666817" onmouseenter="enter('-5580723935665666817');" onmouseout="out('-5580723935665666817');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2241 +                                userHandle = userManager.getUserForSerialNumber(userSerialNumber);                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2242 +                            } else {                                                                              </span>
<span class="4088992161441330589" onmouseenter="enter('4088992161441330589');" onmouseout="out('4088992161441330589');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2243 +                                // Default to the serial number of this user, for older                           </span>
<span class="3257211239898691615" onmouseenter="enter('3257211239898691615');" onmouseout="out('3257211239898691615');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2244 +                                // shortcuts.                                                                     </span>
<span class="153827185233038497" onmouseenter="enter('153827185233038497');" onmouseout="out('153827185233038497');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2245 +                                userHandle = UserHandleCompat.myUserHandle();                                     </span>
<span class="-7992210937529459410" onmouseenter="enter('-7992210937529459410');" onmouseout="out('-7992210937529459410');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2246 +                                userSerialNumber = userManager.getSerialNumberForUser(userHandle);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2247 +                            }                                                                                     </span>
<span class="-8522267007848438017" onmouseenter="enter('-8522267007848438017');" onmouseout="out('-8522267007848438017');" style="">2248                              Launcher.addDumpLog(TAG, &quot;migrating \&quot;&quot;                                               </span>
<span class="-2454702016177738138" onmouseenter="enter('-2454702016177738138');" onmouseout="out('-2454702016177738138');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2249 -                                + c.getString(titleIndex) + &quot;\&quot;: &quot; + intentStr, true);                            </span>
<span class="5716371482803525639" onmouseenter="enter('5716371482803525639');" onmouseout="out('5716371482803525639');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2250 +                                + c.getString(titleIndex) + &quot;\&quot; (&quot;                                                </span>
<span class="1581718899431916610" onmouseenter="enter('1581718899431916610');" onmouseout="out('1581718899431916610');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2251 +                                + cellX + &quot;,&quot; + cellY + &quot;@&quot;                                                       </span>
<span class="-5433460809722614707" onmouseenter="enter('-5433460809722614707');" onmouseout="out('-5433460809722614707');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2252 +                                + LauncherSettings.Favorites.containerToString(container)                         </span>
<span class="7963207375316982791" onmouseenter="enter('7963207375316982791');" onmouseout="out('7963207375316982791');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2253 +                                + &quot;/&quot; + screen                                                                    </span>
<span class="6018191721230485089" onmouseenter="enter('6018191721230485089');" onmouseout="out('6018191721230485089');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2254 +                                + &quot;): &quot; + intentStr, true);                                                       </span>
<span  style="">2255                                                                                                                    </span>
<span class="-1936160447019772377" onmouseenter="enter('-1936160447019772377');" onmouseout="out('-1936160447019772377');" style="">2256                              if (itemType != Favorites.ITEM_TYPE_FOLDER) {                                         </span>
<span  style="">2257                                                                                                                    </span>
<span class="-3217378244605518341" onmouseenter="enter('-3217378244605518341');" onmouseout="out('-3217378244605518341');" style="">2258                                  final Intent intent;                                                              </span>
<span class="-6604091625193940309" onmouseenter="enter('-6604091625193940309');" onmouseout="out('-6604091625193940309');" style="">2259                                  final ComponentName cn;                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2260                                  try {                                                                             </span>
<span class="-5300012287142621419" onmouseenter="enter('-5300012287142621419');" onmouseout="out('-5300012287142621419');" style="">2261                                      intent = Intent.parseUri(intentStr, 0);                                       </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">2262                                  } catch (URISyntaxException e) {                                                  </span>
<span class="4944972948248133238" onmouseenter="enter('4944972948248133238');" onmouseout="out('4944972948248133238');" style="">2263                                      // bogus intent?                                                              </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2264                                      Launcher.addDumpLog(TAG,                                                      </span>
<span class="7306432149085172440" onmouseenter="enter('7306432149085172440');" onmouseout="out('7306432149085172440');" style="">2265                                              &quot;skipping invalid intent uri&quot;, true);                                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2266                                      continue;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2267                                  }                                                                                 </span>
<span  style="">2268                                                                                                                    </span>
<span class="6421562153709548736" onmouseenter="enter('6421562153709548736');" onmouseout="out('6421562153709548736');" style="">2269                                  cn = intent.getComponent();                                                       </span>
<span class="1165574592669081424" onmouseenter="enter('1165574592669081424');" onmouseout="out('1165574592669081424');" style="">2270                                  if (TextUtils.isEmpty(intentStr)) {                                               </span>
<span class="1109263052506568546" onmouseenter="enter('1109263052506568546');" onmouseout="out('1109263052506568546');" style="">2271                                      // no intent? no icon                                                         </span>
<span class="-2999961336534157526" onmouseenter="enter('-2999961336534157526');" onmouseout="out('-2999961336534157526');" style="">2272                                      Launcher.addDumpLog(TAG, &quot;skipping empty intent&quot;, true);                      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2273                                      continue;                                                                     </span>
<span class="-9117039092771941538" onmouseenter="enter('-9117039092771941538');" onmouseout="out('-9117039092771941538');" style="">2274                                  } else if (cn != null &amp;&amp;                                                          </span>
<span class="2466454779851978071" onmouseenter="enter('2466454779851978071');" onmouseout="out('2466454779851978071');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2275 -                                        !LauncherModel.isValidPackageComponent(pm, cn)) {                         </span>
<span class="-3538782463140269707" onmouseenter="enter('-3538782463140269707');" onmouseout="out('-3538782463140269707');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2276 +                                        !LauncherModel.isValidPackageActivity(mContext, cn,                       </span>
<span class="2012568974631198883" onmouseenter="enter('2012568974631198883');" onmouseout="out('2012568974631198883');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2277 +                                                userHandle)) {                                                    </span>
<span class="-8462735888325815955" onmouseenter="enter('-8462735888325815955');" onmouseout="out('-8462735888325815955');" style="">2278                                      // component no longer exists.                                                </span>
<span class="8244127631099782564" onmouseenter="enter('8244127631099782564');" onmouseout="out('8244127631099782564');" style="">2279                                      Launcher.addDumpLog(TAG, &quot;skipping item whose component &quot; +                   </span>
<span class="-2271033079359571531" onmouseenter="enter('-2271033079359571531');" onmouseout="out('-2271033079359571531');" style="">2280                                              &quot;no longer exists.&quot;, true);                                           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2281                                      continue;                                                                     </span>
<span class="1808399553142797413" onmouseenter="enter('1808399553142797413');" onmouseout="out('1808399553142797413');" style="">2282                                  } else if (container ==                                                           </span>
<span class="-5300505921133380020" onmouseenter="enter('-5300505921133380020');" onmouseout="out('-5300505921133380020');" style="">2283                                          LauncherSettings.Favorites.CONTAINER_DESKTOP) {                           </span>
<span class="-6651088913311152009" onmouseenter="enter('-6651088913311152009');" onmouseout="out('-6651088913311152009');" style="">2284                                      // Dedupe icons directly on the workspace                                     </span>
<span  style="">2285                                                                                                                    </span>
<span class="-7857209544272892433" onmouseenter="enter('-7857209544272892433');" onmouseout="out('-7857209544272892433');" style="">2286                                      // Canonicalize                                                               </span>
<span class="-8986671765649789370" onmouseenter="enter('-8986671765649789370');" onmouseout="out('-8986671765649789370');" style="">2287                                      // the Play Store sets the package parameter, but Launcher                    </span>
<span class="6790983218134031366" onmouseenter="enter('6790983218134031366');" onmouseout="out('6790983218134031366');" style="">2288                                      // does not, so we clear that out to keep them the same                       </span>
<span class="-3363694106044374937" onmouseenter="enter('-3363694106044374937');" onmouseout="out('-3363694106044374937');" style="">2289                                      intent.setPackage(null);                                                      </span>
<span class="-947990318544641084" onmouseenter="enter('-947990318544641084');" onmouseout="out('-947990318544641084');" style="">2290                                      final String key = intent.toUri(0);                                           </span>
<span class="7480204102005082432" onmouseenter="enter('7480204102005082432');" onmouseout="out('7480204102005082432');" style="">2291                                      if (seenIntents.contains(key)) {                                              </span>
<span class="2006049222885589498" onmouseenter="enter('2006049222885589498');" onmouseout="out('2006049222885589498');" style="">2292                                          Launcher.addDumpLog(TAG, &quot;skipping duplicate&quot;, true);                     </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2293                                          continue;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2294                                      } else {                                                                      </span>
<span class="4653019047206831387" onmouseenter="enter('4653019047206831387');" onmouseout="out('4653019047206831387');" style="">2295                                          seenIntents.add(key);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2296                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2297                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2298                              }                                                                                     </span>
<span  style="">2299                                                                                                                    </span>
<span class="-3805379390248188389" onmouseenter="enter('-3805379390248188389');" onmouseout="out('-3805379390248188389');" style="">2300                              ContentValues values = new ContentValues(c.getColumnCount());                         </span>
<span class="2787548740347733717" onmouseenter="enter('2787548740347733717');" onmouseout="out('2787548740347733717');" style="">2301                              values.put(LauncherSettings.Favorites._ID, c.getInt(idIndex));                        </span>
<span class="4552396250235420866" onmouseenter="enter('4552396250235420866');" onmouseout="out('4552396250235420866');" style="">2302                              values.put(LauncherSettings.Favorites.INTENT, intentStr);                             </span>
<span class="3080545696092648727" onmouseenter="enter('3080545696092648727');" onmouseout="out('3080545696092648727');" style="">2303                              values.put(LauncherSettings.Favorites.TITLE, c.getString(titleIndex));                </span>
<span class="8877369206974054200" onmouseenter="enter('8877369206974054200');" onmouseout="out('8877369206974054200');" style="">2304                              values.put(LauncherSettings.Favorites.ICON_TYPE,                                      </span>
<span class="8705323818259019594" onmouseenter="enter('8705323818259019594');" onmouseout="out('8705323818259019594');" style="">2305                                      c.getInt(iconTypeIndex));                                                     </span>
<span class="3857475807367449049" onmouseenter="enter('3857475807367449049');" onmouseout="out('3857475807367449049');" style="">2306                              values.put(LauncherSettings.Favorites.ICON, c.getBlob(iconIndex));                    </span>
<span class="-7054095546130863513" onmouseenter="enter('-7054095546130863513');" onmouseout="out('-7054095546130863513');" style="">2307                              values.put(LauncherSettings.Favorites.ICON_PACKAGE,                                   </span>
<span class="-4377124255190457588" onmouseenter="enter('-4377124255190457588');" onmouseout="out('-4377124255190457588');" style="">2308                                      c.getString(iconPackageIndex));                                               </span>
<span class="7491883888231273974" onmouseenter="enter('7491883888231273974');" onmouseout="out('7491883888231273974');" style="">2309                              values.put(LauncherSettings.Favorites.ICON_RESOURCE,                                  </span>
<span class="-14487948683300389" onmouseenter="enter('-14487948683300389');" onmouseout="out('-14487948683300389');" style="">2310                                      c.getString(iconResourceIndex));                                              </span>
<span class="5180659022499168410" onmouseenter="enter('5180659022499168410');" onmouseout="out('5180659022499168410');" style="">2311                              values.put(LauncherSettings.Favorites.ITEM_TYPE, itemType);                           </span>
<span class="2567875359902744917" onmouseenter="enter('2567875359902744917');" onmouseout="out('2567875359902744917');" style="">2312                              values.put(LauncherSettings.Favorites.APPWIDGET_ID, -1);                              </span>
<span class="-3897523412202294315" onmouseenter="enter('-3897523412202294315');" onmouseout="out('-3897523412202294315');" style="">2313                              values.put(LauncherSettings.Favorites.URI, c.getString(uriIndex));                    </span>
<span class="8253479465859182990" onmouseenter="enter('8253479465859182990');" onmouseout="out('8253479465859182990');" style="">2314                              values.put(LauncherSettings.Favorites.DISPLAY_MODE,                                   </span>
<span class="-8416795076296111227" onmouseenter="enter('-8416795076296111227');" onmouseout="out('-8416795076296111227');" style="">2315                                      c.getInt(displayModeIndex));                                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2316 -                                                                                                                  </span>
<span class="4093833596088408556" onmouseenter="enter('4093833596088408556');" onmouseout="out('4093833596088408556');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2317 -                            if (container == LauncherSettings.Favorites.CONTAINER_HOTSEAT                         </span>
<span class="2535276871084507456" onmouseenter="enter('2535276871084507456');" onmouseout="out('2535276871084507456');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2318 -                                    &amp;&amp; (screen &gt;= hotseatWidth ||                                                 </span>
<span class="1612894041918571088" onmouseenter="enter('1612894041918571088');" onmouseout="out('1612894041918571088');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2319 -                                        screen == grid.hotseatAllAppsRank)) {                                     </span>
<span class="198406244599777154" onmouseenter="enter('198406244599777154');" onmouseout="out('198406244599777154');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2320 -                                // no room for you in the hotseat? it&#x27;s off to the desktop with you               </span>
<span class="-8427894828188427657" onmouseenter="enter('-8427894828188427657');" onmouseout="out('-8427894828188427657');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2321 -                                container = Favorites.CONTAINER_DESKTOP;                                          </span>
<span class="-1880957120536425376" onmouseenter="enter('-1880957120536425376');" onmouseout="out('-1880957120536425376');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2322 +                            values.put(LauncherSettings.Favorites.PROFILE_ID, userSerialNumber);                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2323 +                                                                                                                  </span>
<span class="-216205184326719357" onmouseenter="enter('-216205184326719357');" onmouseout="out('-216205184326719357');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2324 +                            if (container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                      </span>
<span class="2845166931909672251" onmouseenter="enter('2845166931909672251');" onmouseout="out('2845166931909672251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2325 +                                hotseat.put(screen, values);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2326                              }                                                                                     </span>
<span  style="">2327                                                                                                                    </span>
<span class="-8534427976726701331" onmouseenter="enter('-8534427976726701331');" onmouseout="out('-8534427976726701331');" style="">2328                              if (container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                      </span>
<span class="3724214252155726452" onmouseenter="enter('3724214252155726452');" onmouseout="out('3724214252155726452');" style="">2329                                  // In a folder or in the hotseat, preserve position                               </span>
<span class="4993135311254983149" onmouseenter="enter('4993135311254983149');" onmouseout="out('4993135311254983149');" style="">2330                                  values.put(LauncherSettings.Favorites.SCREEN, screen);                            </span>
<span class="-7735658353589578952" onmouseenter="enter('-7735658353589578952');" onmouseout="out('-7735658353589578952');" style="">2331                                  values.put(LauncherSettings.Favorites.CELLX, cellX);                              </span>
<span class="-6596875348392322090" onmouseenter="enter('-6596875348392322090');" onmouseout="out('-6596875348392322090');" style="">2332                                  values.put(LauncherSettings.Favorites.CELLY, cellY);                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2333                              } else {                                                                              </span>
<span class="-6079732280628496127" onmouseenter="enter('-6079732280628496127');" onmouseout="out('-6079732280628496127');" style="">2334                                  // For items contained directly on one of the workspace screen,                   </span>
<span class="-850513443108501253" onmouseenter="enter('-850513443108501253');" onmouseout="out('-850513443108501253');" style="">2335                                  // we&#x27;ll determine their location (screen, x, y) in a second pass.                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2336                              }                                                                                     </span>
<span  style="">2337                                                                                                                    </span>
<span class="7684212050113439789" onmouseenter="enter('7684212050113439789');" onmouseout="out('7684212050113439789');" style="">2338                              values.put(LauncherSettings.Favorites.CONTAINER, container);                          </span>
<span  style="">2339                                                                                                                    </span>
<span class="-1936160447019772377" onmouseenter="enter('-1936160447019772377');" onmouseout="out('-1936160447019772377');" style="">2340                              if (itemType != Favorites.ITEM_TYPE_FOLDER) {                                         </span>
<span class="-7897547558000712151" onmouseenter="enter('-7897547558000712151');" onmouseout="out('-7897547558000712151');" style="">2341                                  shortcuts.add(values);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2342                              } else {                                                                              </span>
<span class="5214044302935278086" onmouseenter="enter('5214044302935278086');" onmouseout="out('5214044302935278086');" style="">2343                                  folders.add(values);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2344 +                            }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2345 +                        }                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2346 +                                                                                                                  </span>
<span class="3792333482677793462" onmouseenter="enter('3792333482677793462');" onmouseout="out('3792333482677793462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2347 +                        // Now that we have all the hotseat icons, let&#x27;s go through them left-right               </span>
<span class="6853065735140319510" onmouseenter="enter('6853065735140319510');" onmouseout="out('6853065735140319510');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2348 +                        // and assign valid locations for them in the new hotseat                                 </span>
<span class="-382900916992065291" onmouseenter="enter('-382900916992065291');" onmouseout="out('-382900916992065291');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2349 +                        final int N = hotseat.size();                                                             </span>
<span class="9016073461123662191" onmouseenter="enter('9016073461123662191');" onmouseout="out('9016073461123662191');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2350 +                        for (int idx=0; idx&lt;N; idx++) {                                                           </span>
<span class="-7027280347801461154" onmouseenter="enter('-7027280347801461154');" onmouseout="out('-7027280347801461154');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2351 +                            int hotseatX = hotseat.keyAt(idx);                                                    </span>
<span class="7267222979225491944" onmouseenter="enter('7267222979225491944');" onmouseout="out('7267222979225491944');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2352 +                            ContentValues values = hotseat.valueAt(idx);                                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2353 +                                                                                                                  </span>
<span class="-3018245694205955067" onmouseenter="enter('-3018245694205955067');" onmouseout="out('-3018245694205955067');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2354 +                            if (hotseatX == grid.hotseatAllAppsRank) {                                            </span>
<span class="-8495735509078642350" onmouseenter="enter('-8495735509078642350');" onmouseout="out('-8495735509078642350');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2355 +                                // let&#x27;s drop this in the next available hole in the hotseat                      </span>
<span class="-2055954181227443816" onmouseenter="enter('-2055954181227443816');" onmouseout="out('-2055954181227443816');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2356 +                                while (++hotseatX &lt; hotseatWidth) {                                               </span>
<span class="-5595819560409222327" onmouseenter="enter('-5595819560409222327');" onmouseout="out('-5595819560409222327');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2357 +                                    if (hotseat.get(hotseatX) == null) {                                          </span>
<span class="2131484666649578366" onmouseenter="enter('2131484666649578366');" onmouseout="out('2131484666649578366');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2358 +                                        // found a spot! move it here                                             </span>
<span class="325808457439646533" onmouseenter="enter('325808457439646533');" onmouseout="out('325808457439646533');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2359 +                                        values.put(LauncherSettings.Favorites.SCREEN,                             </span>
<span class="8014085861051867033" onmouseenter="enter('8014085861051867033');" onmouseout="out('8014085861051867033');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2360 +                                                hotseatX);                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2361 +                                        break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2362 +                                    }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2363 +                                }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2364 +                            }                                                                                     </span>
<span class="4361559665402156368" onmouseenter="enter('4361559665402156368');" onmouseout="out('4361559665402156368');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2365 +                            if (hotseatX &gt;= hotseatWidth) {                                                       </span>
<span class="198406244599777154" onmouseenter="enter('198406244599777154');" onmouseout="out('198406244599777154');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2366 +                                // no room for you in the hotseat? it&#x27;s off to the desktop with you               </span>
<span class="274548545061036766" onmouseenter="enter('274548545061036766');" onmouseout="out('274548545061036766');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2367 +                                values.put(LauncherSettings.Favorites.CONTAINER,                                  </span>
<span class="951133373394890183" onmouseenter="enter('951133373394890183');" onmouseout="out('951133373394890183');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2368 +                                           Favorites.CONTAINER_DESKTOP);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2369                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2370                          }                                                                                         </span>
<span  style="">2371                                                                                                                    </span>
<span class="4538029778921500049" onmouseenter="enter('4538029778921500049');" onmouseout="out('4538029778921500049');" style="">2372                          final ArrayList&lt;ContentValues&gt; allItems = new ArrayList&lt;ContentValues&gt;();                 </span>
<span class="-4972040190483698817" onmouseenter="enter('-4972040190483698817');" onmouseout="out('-4972040190483698817');" style="">2373                          // Folders first                                                                          </span>
<span class="1607706518732535744" onmouseenter="enter('1607706518732535744');" onmouseout="out('1607706518732535744');" style="">2374                          allItems.addAll(folders);                                                                 </span>
<span class="2106236708914116763" onmouseenter="enter('2106236708914116763');" onmouseout="out('2106236708914116763');" style="">2375                          // Then shortcuts                                                                         </span>
<span class="-1250372864837547145" onmouseenter="enter('-1250372864837547145');" onmouseout="out('-1250372864837547145');" style="">2376                          allItems.addAll(shortcuts);                                                               </span>
<span  style="">2377                                                                                                                    </span>
<span class="-2195882050879177813" onmouseenter="enter('-2195882050879177813');" onmouseout="out('-2195882050879177813');" style="">2378                          // Layout all the folders                                                                 </span>
<span class="-252665973237041297" onmouseenter="enter('-252665973237041297');" onmouseout="out('-252665973237041297');" style="">2379                          for (ContentValues values: allItems) {                                                    </span>
<span class="-6238460523304059987" onmouseenter="enter('-6238460523304059987');" onmouseout="out('-6238460523304059987');" style="">2380                              if (values.getAsInteger(LauncherSettings.Favorites.CONTAINER) !=                      </span>
<span class="-5300505921133380020" onmouseenter="enter('-5300505921133380020');" onmouseout="out('-5300505921133380020');" style="">2381                                      LauncherSettings.Favorites.CONTAINER_DESKTOP) {                               </span>
<span class="4544740026899945117" onmouseenter="enter('4544740026899945117');" onmouseout="out('4544740026899945117');" style="">2382                                  // Hotseat items and folder items have already had their                          </span>
<span class="9061827072000509027" onmouseenter="enter('9061827072000509027');" onmouseout="out('9061827072000509027');" style="">2383                                  // location information set. Nothing to be done here.                             </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2384                                  continue;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2385                              }                                                                                     </span>
<span class="851641135220662264" onmouseenter="enter('851641135220662264');" onmouseout="out('851641135220662264');" style="">2386                              values.put(LauncherSettings.Favorites.SCREEN, curScreen);                             </span>
<span class="-1049962748703223150" onmouseenter="enter('-1049962748703223150');" onmouseout="out('-1049962748703223150');" style="">2387                              values.put(LauncherSettings.Favorites.CELLX, curX);                                   </span>
<span class="-5258025824110848668" onmouseenter="enter('-5258025824110848668');" onmouseout="out('-5258025824110848668');" style="">2388                              values.put(LauncherSettings.Favorites.CELLY, curY);                                   </span>
<span class="1910082031532915038" onmouseenter="enter('1910082031532915038');" onmouseout="out('1910082031532915038');" style="">2389                              curX = (curX + 1) % width;                                                            </span>
<span class="-7155276018455302787" onmouseenter="enter('-7155276018455302787');" onmouseout="out('-7155276018455302787');" style="">2390                              if (curX == 0) {                                                                      </span>
<span class="2376495568180329749" onmouseenter="enter('2376495568180329749');" onmouseout="out('2376495568180329749');" style="">2391                                  curY = (curY + 1);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2392                              }                                                                                     </span>
<span class="-4531638622721531414" onmouseenter="enter('-4531638622721531414');" onmouseout="out('-4531638622721531414');" style="">2393                              // Leave the last row of icons blank on every screen                                  </span>
<span class="-5543182397018270277" onmouseenter="enter('-5543182397018270277');" onmouseout="out('-5543182397018270277');" style="">2394                              if (curY == height - 1) {                                                             </span>
<span class="-6657705079427553715" onmouseenter="enter('-6657705079427553715');" onmouseout="out('-6657705079427553715');" style="">2395                                  curScreen = (int) generateNewScreenId();                                          </span>
<span class="4679043716901678926" onmouseenter="enter('4679043716901678926');" onmouseout="out('4679043716901678926');" style="">2396                                  curY = 0;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2397                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2398                          }                                                                                         </span>
<span  style="">2399                                                                                                                    </span>
<span class="1853917526349173349" onmouseenter="enter('1853917526349173349');" onmouseout="out('1853917526349173349');" style="">2400                          if (allItems.size() &gt; 0) {                                                                </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">2401                              db.beginTransaction();                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2402                              try {                                                                                 </span>
<span class="-7256059133012813079" onmouseenter="enter('-7256059133012813079');" onmouseout="out('-7256059133012813079');" style="">2403                                  for (ContentValues row: allItems) {                                               </span>
<span class="3155601228699925770" onmouseenter="enter('3155601228699925770');" onmouseout="out('3155601228699925770');" style="">2404                                      if (row == null) continue;                                                    </span>
<span class="-304018147606180100" onmouseenter="enter('-304018147606180100');" onmouseout="out('-304018147606180100');" style="">2405                                      if (dbInsertAndCheck(this, db, TABLE_FAVORITES, null, row)                    </span>
<span class="-5045770407551308114" onmouseenter="enter('-5045770407551308114');" onmouseout="out('-5045770407551308114');" style="">2406                                              &lt; 0) {                                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2407                                          return;                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2408                                      } else {                                                                      </span>
<span class="5122134618962228848" onmouseenter="enter('5122134618962228848');" onmouseout="out('5122134618962228848');" style="">2409                                          count++;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2410                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2411                                  }                                                                                 </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">2412                                  db.setTransactionSuccessful();                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2413                              } finally {                                                                           </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">2414                                  db.endTransaction();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2415                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2416                          }                                                                                         </span>
<span  style="">2417                                                                                                                    </span>
<span class="3708563498510346203" onmouseenter="enter('3708563498510346203');" onmouseout="out('3708563498510346203');" style="">2418                          db.beginTransaction();                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2419                          try {                                                                                     </span>
<span class="-7150489321946493056" onmouseenter="enter('-7150489321946493056');" onmouseout="out('-7150489321946493056');" style="">2420                              for (i=0; i&lt;=curScreen; i++) {                                                        </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">2421                                  final ContentValues values = new ContentValues();                                 </span>
<span class="-5225632710651404139" onmouseenter="enter('-5225632710651404139');" onmouseout="out('-5225632710651404139');" style="">2422                                  values.put(LauncherSettings.WorkspaceScreens._ID, i);                             </span>
<span class="8100732723950791653" onmouseenter="enter('8100732723950791653');" onmouseout="out('8100732723950791653');" style="">2423                                  values.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                     </span>
<span class="-6007460446232002971" onmouseenter="enter('-6007460446232002971');" onmouseout="out('-6007460446232002971');" style="">2424                                  if (dbInsertAndCheck(this, db, TABLE_WORKSPACE_SCREENS, null, values)             </span>
<span class="-5045770407551308114" onmouseenter="enter('-5045770407551308114');" onmouseout="out('-5045770407551308114');" style="">2425                                          &lt; 0) {                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2426                                      return;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2427                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2428                              }                                                                                     </span>
<span class="-999133354836642717" onmouseenter="enter('-999133354836642717');" onmouseout="out('-999133354836642717');" style="">2429                              db.setTransactionSuccessful();                                                        </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2430                          } finally {                                                                               </span>
<span class="4555482193573075626" onmouseenter="enter('4555482193573075626');" onmouseout="out('4555482193573075626');" style="">2431                              db.endTransaction();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2432                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2433                      }                                                                                             </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2434                  } finally {                                                                                       </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2435                      c.close();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2436                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2437              }                                                                                                     </span>
<span  style="">2438                                                                                                                    </span>
<span class="-6182516414964240870" onmouseenter="enter('-6182516414964240870');" onmouseout="out('-6182516414964240870');" style="">2439              Launcher.addDumpLog(TAG, &quot;migrated &quot; + count + &quot; icons from Launcher2 into &quot;                          </span>
<span class="3301967416992773508" onmouseenter="enter('3301967416992773508');" onmouseout="out('3301967416992773508');" style="">2440                      + (curScreen+1) + &quot; screens&quot;, true);                                                          </span>
<span  style="">2441                                                                                                                    </span>
<span class="3355055744209094121" onmouseenter="enter('3355055744209094121');" onmouseout="out('3355055744209094121');" style="">2442              // ensure that new screens are created to hold these icons                                            </span>
<span class="4167333916835222093" onmouseenter="enter('4167333916835222093');" onmouseout="out('4167333916835222093');" style="">2443              setFlagJustLoadedOldDb();                                                                             </span>
<span  style="">2444                                                                                                                    </span>
<span class="2071167438564206442" onmouseenter="enter('2071167438564206442');" onmouseout="out('2071167438564206442');" style="">2445              // Update max IDs; very important since we just grabbed IDs from another database                     </span>
<span class="6380885951893815732" onmouseenter="enter('6380885951893815732');" onmouseout="out('6380885951893815732');" style="">2446              mMaxItemId = initializeMaxItemId(db);                                                                 </span>
<span class="4730788985981235797" onmouseenter="enter('4730788985981235797');" onmouseout="out('4730788985981235797');" style="">2447              mMaxScreenId = initializeMaxScreenId(db);                                                             </span>
<span class="-439077128883569126" onmouseenter="enter('-439077128883569126');" onmouseout="out('-439077128883569126');" style="">2448              if (LOGD) Log.d(TAG, &quot;mMaxItemId: &quot; + mMaxItemId + &quot; mMaxScreenId: &quot; + mMaxScreenId);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2449          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2450      }                                                                                                             </span>
<span  style="">2451                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2452      /**                                                                                                           </span>
<span class="6228869189788510839" onmouseenter="enter('6228869189788510839');" onmouseout="out('6228869189788510839');" style="">2453       * Build a query string that will match any row where the column matches                                      </span>
<span class="-1295109358340261898" onmouseenter="enter('-1295109358340261898');" onmouseout="out('-1295109358340261898');" style="">2454       * anything in the values list.                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2455       */                                                                                                           </span>
<span class="614265812524198751" onmouseenter="enter('614265812524198751');" onmouseout="out('614265812524198751');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2456 -    static String buildOrWhereString(String column, int[] values) {                                               </span>
<span class="-2936324408380560269" onmouseenter="enter('-2936324408380560269');" onmouseout="out('-2936324408380560269');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2457 +    private static String buildOrWhereString(String column, int[] values) {                                       </span>
<span class="5416982361227649779" onmouseenter="enter('5416982361227649779');" onmouseout="out('5416982361227649779');" style="">2458          StringBuilder selectWhere = new StringBuilder();                                                          </span>
<span class="-4332208004382148217" onmouseenter="enter('-4332208004382148217');" onmouseout="out('-4332208004382148217');" style="">2459          for (int i = values.length - 1; i &gt;= 0; i--) {                                                            </span>
<span class="1277928779660897735" onmouseenter="enter('1277928779660897735');" onmouseout="out('1277928779660897735');" style="">2460              selectWhere.append(column).append(&quot;=&quot;).append(values[i]);                                             </span>
<span class="81359043772452968" onmouseenter="enter('81359043772452968');" onmouseout="out('81359043772452968');" style="">2461              if (i &gt; 0) {                                                                                          </span>
<span class="7640545912534679853" onmouseenter="enter('7640545912534679853');" onmouseout="out('7640545912534679853');" style="">2462                  selectWhere.append(&quot; OR &quot;);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2463              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2464          }                                                                                                         </span>
<span class="-3909123707650780307" onmouseenter="enter('-3909123707650780307');" onmouseout="out('-3909123707650780307');" style="">2465          return selectWhere.toString();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2466 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2467 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2468 +    /**                                                                                                           </span>
<span class="-28944385574413319" onmouseenter="enter('-28944385574413319');" onmouseout="out('-28944385574413319');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2469 +     * Return attribute value, attempting launcher-specific namespace first                                       </span>
<span class="-539699600440534794" onmouseenter="enter('-539699600440534794');" onmouseout="out('-539699600440534794');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2470 +     * before falling back to anonymous attribute.                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2471 +     */                                                                                                           </span>
<span class="-712674519579063359" onmouseenter="enter('-712674519579063359');" onmouseout="out('-712674519579063359');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2472 +    private static String getAttributeValue(XmlResourceParser parser, String attribute) {                         </span>
<span class="-5187744497551639206" onmouseenter="enter('-5187744497551639206');" onmouseout="out('-5187744497551639206');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2473 +        String value = parser.getAttributeValue(                                                                  </span>
<span class="3240651452367746246" onmouseenter="enter('3240651452367746246');" onmouseout="out('3240651452367746246');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2474 +                &quot;http://schemas.android.com/apk/res-auto/com.android.launcher3&quot;, attribute);                      </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2475 +        if (value == null) {                                                                                      </span>
<span class="4082321249181646127" onmouseenter="enter('4082321249181646127');" onmouseout="out('4082321249181646127');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2476 +            value = parser.getAttributeValue(null, attribute);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2477 +        }                                                                                                         </span>
<span class="-4905322242800291335" onmouseenter="enter('-4905322242800291335');" onmouseout="out('-4905322242800291335');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2478 +        return value;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2479 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2480 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2481 +    /**                                                                                                           </span>
<span class="7776239847235917049" onmouseenter="enter('7776239847235917049');" onmouseout="out('7776239847235917049');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2482 +     * Return attribute resource value, attempting launcher-specific namespace                                    </span>
<span class="-6756177748646477702" onmouseenter="enter('-6756177748646477702');" onmouseout="out('-6756177748646477702');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2483 +     * first before falling back to anonymous attribute.                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2484 +     */                                                                                                           </span>
<span class="-2261393621595960012" onmouseenter="enter('-2261393621595960012');" onmouseout="out('-2261393621595960012');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2485 +    private static int getAttributeResourceValue(XmlResourceParser parser, String attribute,                      </span>
<span class="7924088353949793531" onmouseenter="enter('7924088353949793531');" onmouseout="out('7924088353949793531');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2486 +            int defaultValue) {                                                                                   </span>
<span class="-5869649596261514051" onmouseenter="enter('-5869649596261514051');" onmouseout="out('-5869649596261514051');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2487 +        int value = parser.getAttributeResourceValue(                                                             </span>
<span class="-572076831828560497" onmouseenter="enter('-572076831828560497');" onmouseout="out('-572076831828560497');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2488 +                &quot;http://schemas.android.com/apk/res-auto/com.android.launcher3&quot;, attribute,                       </span>
<span class="-310982111368378340" onmouseenter="enter('-310982111368378340');" onmouseout="out('-310982111368378340');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2489 +                defaultValue);                                                                                    </span>
<span class="2024020216404545754" onmouseenter="enter('2024020216404545754');" onmouseout="out('2024020216404545754');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2490 +        if (value == defaultValue) {                                                                              </span>
<span class="6043697783016237085" onmouseenter="enter('6043697783016237085');" onmouseout="out('6043697783016237085');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2491 +            value = parser.getAttributeResourceValue(null, attribute, defaultValue);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2492 +        }                                                                                                         </span>
<span class="-4905322242800291335" onmouseenter="enter('-4905322242800291335');" onmouseout="out('-4905322242800291335');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2493 +        return value;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2494 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2495 +                                                                                                                  </span>
<span class="626008248496619562" onmouseenter="enter('626008248496619562');" onmouseout="out('626008248496619562');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2496 +    private static void copyInteger(ContentValues from, ContentValues to, String key) {                           </span>
<span class="-3424296615037173139" onmouseenter="enter('-3424296615037173139');" onmouseout="out('-3424296615037173139');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2497 +        to.put(key, from.getAsInteger(key));                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2498      }                                                                                                             </span>
<span  style="">2499                                                                                                                    </span>
<span class="8465274381710394045" onmouseenter="enter('8465274381710394045');" onmouseout="out('8465274381710394045');" style="">2500      static class SqlArguments {                                                                                   </span>
<span class="8122936482838815352" onmouseenter="enter('8122936482838815352');" onmouseout="out('8122936482838815352');" style="">2501          public final String table;                                                                                </span>
<span class="5442590397567481633" onmouseenter="enter('5442590397567481633');" onmouseout="out('5442590397567481633');" style="">2502          public final String where;                                                                                </span>
<span class="-2258632185412795279" onmouseenter="enter('-2258632185412795279');" onmouseout="out('-2258632185412795279');" style="">2503          public final String[] args;                                                                               </span>
<span  style="">2504                                                                                                                    </span>
<span class="538735252304320137" onmouseenter="enter('538735252304320137');" onmouseout="out('538735252304320137');" style="">2505          SqlArguments(Uri url, String where, String[] args) {                                                      </span>
<span class="-7603700663019659468" onmouseenter="enter('-7603700663019659468');" onmouseout="out('-7603700663019659468');" style="">2506              if (url.getPathSegments().size() == 1) {                                                              </span>
<span class="-6984157551381672872" onmouseenter="enter('-6984157551381672872');" onmouseout="out('-6984157551381672872');" style="">2507                  this.table = url.getPathSegments().get(0);                                                        </span>
<span class="7181058370626512064" onmouseenter="enter('7181058370626512064');" onmouseout="out('7181058370626512064');" style="">2508                  this.where = where;                                                                               </span>
<span class="8688716567728705492" onmouseenter="enter('8688716567728705492');" onmouseout="out('8688716567728705492');" style="">2509                  this.args = args;                                                                                 </span>
<span class="2325935358302734243" onmouseenter="enter('2325935358302734243');" onmouseout="out('2325935358302734243');" style="">2510              } else if (url.getPathSegments().size() != 2) {                                                       </span>
<span class="-3760623583555134522" onmouseenter="enter('-3760623583555134522');" onmouseout="out('-3760623583555134522');" style="">2511                  throw new IllegalArgumentException(&quot;Invalid URI: &quot; + url);                                        </span>
<span class="186586201607437821" onmouseenter="enter('186586201607437821');" onmouseout="out('186586201607437821');" style="">2512              } else if (!TextUtils.isEmpty(where)) {                                                               </span>
<span class="2785963644153593875" onmouseenter="enter('2785963644153593875');" onmouseout="out('2785963644153593875');" style="">2513                  throw new UnsupportedOperationException(&quot;WHERE clause not supported: &quot; + url);                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2514              } else {                                                                                              </span>
<span class="-6984157551381672872" onmouseenter="enter('-6984157551381672872');" onmouseout="out('-6984157551381672872');" style="">2515                  this.table = url.getPathSegments().get(0);                                                        </span>
<span class="-834356181554398700" onmouseenter="enter('-834356181554398700');" onmouseout="out('-834356181554398700');" style="">2516                  this.where = &quot;_id=&quot; + ContentUris.parseId(url);                                                   </span>
<span class="-7173439380439508667" onmouseenter="enter('-7173439380439508667');" onmouseout="out('-7173439380439508667');" style="">2517                  this.args = null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2518              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2519          }                                                                                                         </span>
<span  style="">2520                                                                                                                    </span>
<span class="5705249208777482684" onmouseenter="enter('5705249208777482684');" onmouseout="out('5705249208777482684');" style="">2521          SqlArguments(Uri url) {                                                                                   </span>
<span class="-7603700663019659468" onmouseenter="enter('-7603700663019659468');" onmouseout="out('-7603700663019659468');" style="">2522              if (url.getPathSegments().size() == 1) {                                                              </span>
<span class="-594585027826531892" onmouseenter="enter('-594585027826531892');" onmouseout="out('-594585027826531892');" style="">2523                  table = url.getPathSegments().get(0);                                                             </span>
<span class="3938761229458861077" onmouseenter="enter('3938761229458861077');" onmouseout="out('3938761229458861077');" style="">2524                  where = null;                                                                                     </span>
<span class="8940401955607507518" onmouseenter="enter('8940401955607507518');" onmouseout="out('8940401955607507518');" style="">2525                  args = null;                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2526              } else {                                                                                              </span>
<span class="-3760623583555134522" onmouseenter="enter('-3760623583555134522');" onmouseout="out('-3760623583555134522');" style="">2527                  throw new IllegalArgumentException(&quot;Invalid URI: &quot; + url);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2528              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2529          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2530      }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2531 +                                                                                                                  </span>
<span class="-3139188310586380115" onmouseenter="enter('-3139188310586380115');" onmouseout="out('-3139188310586380115');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2532 +    static interface WorkspaceLoader {                                                                            </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2533 +        /**                                                                                                       </span>
<span class="-3098177944227224747" onmouseenter="enter('-3098177944227224747');" onmouseout="out('-3098177944227224747');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2534 +         * @param screenIds A mutable list of screen its                                                          </span>
<span class="987002808252756985" onmouseenter="enter('987002808252756985');" onmouseout="out('987002808252756985');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2535 +         * @return the number of workspace items added.                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2536 +         */                                                                                                       </span>
<span class="6770727346199503360" onmouseenter="enter('6770727346199503360');" onmouseout="out('6770727346199503360');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2537 +        int loadLayout(SQLiteDatabase db, ArrayList&lt;Long&gt; screenIds);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2538 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2539 +                                                                                                                  </span>
<span class="-6810572453627058620" onmouseenter="enter('-6810572453627058620');" onmouseout="out('-6810572453627058620');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2540 +    private static class SimpleWorkspaceLoader implements WorkspaceLoader {                                       </span>
<span class="-2219225490446500593" onmouseenter="enter('-2219225490446500593');" onmouseout="out('-2219225490446500593');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2541 +        private final Resources mRes;                                                                             </span>
<span class="-3366452129939698064" onmouseenter="enter('-3366452129939698064');" onmouseout="out('-3366452129939698064');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2542 +        private final int mWorkspaceId;                                                                           </span>
<span class="6266322654512692359" onmouseenter="enter('6266322654512692359');" onmouseout="out('6266322654512692359');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2543 +        private final DatabaseHelper mHelper;                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2544 +                                                                                                                  </span>
<span class="5321487022203331675" onmouseenter="enter('5321487022203331675');" onmouseout="out('5321487022203331675');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2545 +        SimpleWorkspaceLoader(DatabaseHelper helper, Resources res, int workspaceId) {                            </span>
<span class="3631311506378187050" onmouseenter="enter('3631311506378187050');" onmouseout="out('3631311506378187050');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2546 +            mHelper = helper;                                                                                     </span>
<span class="4740402107482375987" onmouseenter="enter('4740402107482375987');" onmouseout="out('4740402107482375987');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2547 +            mRes = res;                                                                                           </span>
<span class="5644903313888202397" onmouseenter="enter('5644903313888202397');" onmouseout="out('5644903313888202397');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2548 +            mWorkspaceId = workspaceId;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2549 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2550 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2551 +        @Override                                                                                                 </span>
<span class="-7017557007815113757" onmouseenter="enter('-7017557007815113757');" onmouseout="out('-7017557007815113757');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2552 +        public int loadLayout(SQLiteDatabase db, ArrayList&lt;Long&gt; screenIds) {                                     </span>
<span class="8904365510774480646" onmouseenter="enter('8904365510774480646');" onmouseout="out('8904365510774480646');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2553 +            return mHelper.loadFavoritesRecursive(db, mRes, mWorkspaceId, screenIds);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2554 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2555 +    }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2556  }                                                                                                                 </span></pre></td>
                            <td><pre></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            