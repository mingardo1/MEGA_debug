<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>259</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    259
                    <a href="258.html">prev</a>
                    <a href="260.html">next</a>
                    <a href="259_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    BroadleafCommerce/BroadleafCommerce_522131259c6f69ad7467dfcaf422c74f0f4c667c_admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/server/service/persistence/module/BasicPersistenceModule.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;522131259c6f69ad7467dfcaf422c74f0f4c667c:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/server/service/persistence/module/BasicPersistenceModule.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;522131259c6f69ad7467dfcaf422c74f0f4c667c^1:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/server/service/persistence/module/BasicPersistenceModule.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;522131259c6f69ad7467dfcaf422c74f0f4c667c^2:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/server/service/persistence/module/BasicPersistenceModule.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;f5f52a0a63fcbc018b0183c6fbb4fa4c84da7d26:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/server/service/persistence/module/BasicPersistenceModule.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bs], [bs], [j]], subset: [[bsj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span  style="">  18                                                                                                          </span>
<span class="-3730395872919143110" onmouseenter="enter('-3730395872919143110');" onmouseout="out('-3730395872919143110');" style="">  19 package org.broadleafcommerce.openadmin.server.service.persistence.module;                               </span>
<span  style="">  20                                                                                                          </span>
<span class="6585399145259537123" onmouseenter="enter('6585399145259537123');" onmouseout="out('6585399145259537123');" style="">  21 import org.apache.commons.beanutils.PropertyUtils;                                                       </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  22 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  23 import org.apache.commons.lang.ArrayUtils;                                                               </span>
<span class="7952073036463698968" onmouseenter="enter('7952073036463698968');" onmouseout="out('7952073036463698968');" style="">  24 import org.apache.commons.lang.StringUtils;                                                              </span>
<span class="-4811768396919678325" onmouseenter="enter('-4811768396919678325');" onmouseout="out('-4811768396919678325');" style="">  25 import org.apache.commons.lang3.BooleanUtils;                                                            </span>
<span class="-4496642532189438643" onmouseenter="enter('-4496642532189438643');" onmouseout="out('-4496642532189438643');" style="">  26 import org.apache.commons.lang3.reflect.FieldUtils;                                                      </span>
<span class="-7494130924703435694" onmouseenter="enter('-7494130924703435694');" onmouseout="out('-7494130924703435694');" style="">  27 import org.apache.commons.lang3.reflect.MethodUtils;                                                     </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  28 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  29 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  30 import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                        </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  31 import org.broadleafcommerce.common.exception.ExceptionHelper;                                           </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  32 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  33 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  34 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="-274639712180431568" onmouseenter="enter('-274639712180431568');" onmouseout="out('-274639712180431568');" style="">  35 import org.broadleafcommerce.common.money.Money;                                                         </span>
<span class="-212317658512913375" onmouseenter="enter('-212317658512913375');" onmouseout="out('-212317658512913375');" style="">  36 import org.broadleafcommerce.common.presentation.client.OperationType;                                   </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  37 import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                  </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  38 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  39 import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                  </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  40 import org.broadleafcommerce.common.util.FormatUtil;                                                     </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  41 import org.broadleafcommerce.common.util.StringUtil;                                                     </span>
<span class="-2926793360365808281" onmouseenter="enter('-2926793360365808281');" onmouseout="out('-2926793360365808281');" style="">  42 import org.broadleafcommerce.common.util.ValidationUtil;                                                 </span>
<span class="7948666462039628690" onmouseenter="enter('7948666462039628690');" onmouseout="out('7948666462039628690');" style="">  43 import org.broadleafcommerce.common.util.dao.TQJoin;                                                     </span>
<span class="4569891227290901556" onmouseenter="enter('4569891227290901556');" onmouseout="out('4569891227290901556');" style="">  44 import org.broadleafcommerce.common.util.dao.TQOrder;                                                    </span>
<span class="2808183798288001053" onmouseenter="enter('2808183798288001053');" onmouseout="out('2808183798288001053');" style="">  45 import org.broadleafcommerce.common.util.dao.TQRestriction;                                              </span>
<span class="8922526534929083638" onmouseenter="enter('8922526534929083638');" onmouseout="out('8922526534929083638');" style="">  46 import org.broadleafcommerce.common.util.dao.TypedQueryBuilder;                                          </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  47 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-9032655456699873894" onmouseenter="enter('-9032655456699873894');" onmouseout="out('-9032655456699873894');" style="">  48 import org.broadleafcommerce.openadmin.dto.*;                                                            </span>
<span class="-2518486623699289546" onmouseenter="enter('-2518486623699289546');" onmouseout="out('-2518486623699289546');" style=""><abbr title="  49 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvider;">  49 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvidðŸ”µ</abbr></span>
<span class="-3305750562841405447" onmouseenter="enter('-3305750562841405447');" onmouseout="out('-3305750562841405447');" style="">  50 import org.broadleafcommerce.openadmin.server.service.ValidationException;                               </span>
<span class="8378385081764163459" onmouseenter="enter('8378385081764163459');" onmouseout="out('8378385081764163459');" style="">  51 import org.broadleafcommerce.openadmin.server.service.persistence.ParentEntityPersistenceException;      </span>
<span class="5722165468172421658" onmouseenter="enter('5722165468172421658');" onmouseout="out('5722165468172421658');" style="">  52 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceException;                  </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  53 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                    </span>
<span class="5058784187408591906" onmouseenter="enter('5058784187408591906');" onmouseout="out('5058784187408591906');" style="">  54 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.*;                     </span>
<span class="-481493864845228243" onmouseenter="enter('-481493864845228243');" onmouseout="out('-481493864845228243');" style=""><abbr title="  55 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueConverter;">  55 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueCoðŸ”µ</abbr></span>
<span class="2179480323999346530" onmouseenter="enter('2179480323999346530');" onmouseout="out('2179480323999346530');" style=""><abbr title="  56 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicateProvider;">  56 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicatePrðŸ”µ</abbr></span>
<span class="8659565314530832704" onmouseenter="enter('8659565314530832704');" onmouseout="out('8659565314530832704');" style=""><abbr title="  57 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateProvider;">  57 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateðŸ”µ</abbr></span>
<span class="2225343043491731861" onmouseenter="enter('2225343043491731861');" onmouseout="out('2225343043491731861');" style=""><abbr title="  58 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvider;">  58 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvðŸ”µ</abbr></span>
<span class="1619823169108097395" onmouseenter="enter('1619823169108097395');" onmouseout="out('1619823169108097395');" style=""><abbr title="  59 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionManager;">  59 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleðŸ”µ</abbr></span>
<span class="2027605662300607419" onmouseenter="enter('2027605662300607419');" onmouseout="out('2027605662300607419');" style=""><abbr title="  60 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvider;">  60 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvideðŸ”µ</abbr></span>
<span class="-4946286896488271959" onmouseenter="enter('-4946286896488271959');" onmouseout="out('-4946286896488271959');" style=""><abbr title="  61 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequest;">  61 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterProperðŸ”µ</abbr></span>
<span class="-2189126569880350667" onmouseenter="enter('-2189126569880350667');" onmouseout="out('-2189126569880350667');" style=""><abbr title="  62 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappingRequest;">  62 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappinðŸ”µ</abbr></span>
<span class="6456213336650879315" onmouseenter="enter('6456213336650879315');" onmouseout="out('6456213336650879315');" style=""><abbr title="  63 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueRequest;">  63 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueReqðŸ”µ</abbr></span>
<span class="7338762877284211273" onmouseenter="enter('7338762877284211273');" onmouseout="out('7338762877284211273');" style=""><abbr title="  64 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueRequest;">  64 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueReðŸ”µ</abbr></span>
<span class="4906254842317893740" onmouseenter="enter('4906254842317893740');" onmouseout="out('4906254842317893740');" style="">  65 import org.broadleafcommerce.openadmin.server.service.persistence.validation.EntityValidatorService;     </span>
<span class="375927524796533683" onmouseenter="enter('375927524796533683');" onmouseout="out('375927524796533683');" style=""><abbr title="  66 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidator;">  66 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidatoðŸ”µ</abbr></span>
<span class="3919265641981654464" onmouseenter="enter('3919265641981654464');" onmouseout="out('3919265641981654464');" style="">  67 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PropertyValidationResult;   </span>
<span class="5692608280904331276" onmouseenter="enter('5692608280904331276');" onmouseout="out('5692608280904331276');" style="">  68 import org.broadleafcommerce.openadmin.server.service.type.MetadataProviderResponse;                     </span>
<span class="3891204800073608559" onmouseenter="enter('3891204800073608559');" onmouseout="out('3891204800073608559');" style="">  69 import org.hibernate.FlushMode;                                                                          </span>
<span class="-1504015732959009083" onmouseenter="enter('-1504015732959009083');" onmouseout="out('-1504015732959009083');" style="">  70 import org.hibernate.Session;                                                                            </span>
<span class="-6968089101617569818" onmouseenter="enter('-6968089101617569818');" onmouseout="out('-6968089101617569818');" style="">  71 import org.springframework.beans.BeansException;                                                         </span>
<span class="1015650858128177541" onmouseenter="enter('1015650858128177541');" onmouseout="out('1015650858128177541');" style="">  72 import org.springframework.context.ApplicationContext;                                                   </span>
<span class="5490156850800899437" onmouseenter="enter('5490156850800899437');" onmouseout="out('5490156850800899437');" style="">  73 import org.springframework.context.ApplicationContextAware;                                              </span>
<span class="1179989609458797828" onmouseenter="enter('1179989609458797828');" onmouseout="out('1179989609458797828');" style="">  74 import org.springframework.context.annotation.Primary;                                                   </span>
<span class="2368474895564125270" onmouseenter="enter('2368474895564125270');" onmouseout="out('2368474895564125270');" style="">  75 import org.springframework.context.annotation.Scope;                                                     </span>
<span class="8406454220154166073" onmouseenter="enter('8406454220154166073');" onmouseout="out('8406454220154166073');" style="">  76 import org.springframework.stereotype.Component;                                                         </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="">  77 import org.springframework.util.Assert;                                                                  </span>
<span  style="">  78                                                                                                          </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style="">  79 import javax.annotation.PostConstruct;                                                                   </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  80 import javax.annotation.Resource;                                                                        </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="">  81 import java.io.Serializable;                                                                             </span>
<span class="507320133330553151" onmouseenter="enter('507320133330553151');" onmouseout="out('507320133330553151');" style="">  82 import java.lang.reflect.Field;                                                                          </span>
<span class="5727252987923913" onmouseenter="enter('5727252987923913');" onmouseout="out('5727252987923913');" style="">  83 import java.lang.reflect.InvocationTargetException;                                                      </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style="">  84 import java.lang.reflect.Method;                                                                         </span>
<span class="347575814667778087" onmouseenter="enter('347575814667778087');" onmouseout="out('347575814667778087');" style="">  85 import java.lang.reflect.ParameterizedType;                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style="">  86 import java.math.BigDecimal;                                                                             </span>
<span class="-8993555010225969077" onmouseenter="enter('-8993555010225969077');" onmouseout="out('-8993555010225969077');" style="">  87 import java.sql.Timestamp;                                                                               </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style="">  88 import java.text.DecimalFormat;                                                                          </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style="">  89 import java.text.NumberFormat;                                                                           </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style="">  90 import java.text.SimpleDateFormat;                                                                       </span>
<span class="196713859697444637" onmouseenter="enter('196713859697444637');" onmouseout="out('196713859697444637');" style="">  91 import java.util.*;                                                                                      </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  92 import java.util.Map.Entry;                                                                              </span>
<span  style="">  93                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  94 /**                                                                                                      </span>
<span class="3104529581940833663" onmouseenter="enter('3104529581940833663');" onmouseout="out('3104529581940833663');" style="">  95  * @author jfischer                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  96  */                                                                                                      </span>
<span class="7759015212035044666" onmouseenter="enter('7759015212035044666');" onmouseout="out('7759015212035044666');" style="">  97 @Primary                                                                                                 </span>
<span class="1694546414662202322" onmouseenter="enter('1694546414662202322');" onmouseout="out('1694546414662202322');" style="">  98 @Component(&quot;blBasicPersistenceModule&quot;)                                                                   </span>
<span class="-3657083271113190387" onmouseenter="enter('-3657083271113190387');" onmouseout="out('-3657083271113190387');" style="">  99 @Scope(&quot;prototype&quot;)                                                                                      </span>
<span class="-7916582208788778889" onmouseenter="enter('-7916582208788778889');" onmouseout="out('-7916582208788778889');" style=""> 100 public class BasicPersistenceModule implements PersistenceModule, RecordHelper, ApplicationContextAware {</span>
<span  style=""> 101                                                                                                          </span>
<span class="8379422291463370013" onmouseenter="enter('8379422291463370013');" onmouseout="out('8379422291463370013');" style=""> 102     private static final Log LOG = LogFactory.getLog(BasicPersistenceModule.class);                      </span>
<span  style=""> 103                                                                                                          </span>
<span class="-381692932666242814" onmouseenter="enter('-381692932666242814');" onmouseout="out('-381692932666242814');" style=""> 104     public static final String MAIN_ENTITY_NAME_PROPERTY = &quot;MAIN_ENTITY_NAME&quot;;                           </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 105     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span  style=""> 106                                                                                                          </span>
<span class="-4770133548193901777" onmouseenter="enter('-4770133548193901777');" onmouseout="out('-4770133548193901777');" style=""> 107     protected ApplicationContext applicationContext;                                                     </span>
<span class="-6488622702665536176" onmouseenter="enter('-6488622702665536176');" onmouseout="out('-6488622702665536176');" style=""> 108     protected PersistenceManager persistenceManager;                                                     </span>
<span  style=""> 109                                                                                                          </span>
<span class="4305095825338649553" onmouseenter="enter('4305095825338649553');" onmouseout="out('4305095825338649553');" style=""> 110     @Resource(name = &quot;blEntityValidatorService&quot;)                                                         </span>
<span class="-2556035380928716519" onmouseenter="enter('-2556035380928716519');" onmouseout="out('-2556035380928716519');" style=""> 111     protected EntityValidatorService entityValidatorService;                                             </span>
<span  style=""> 112                                                                                                          </span>
<span class="6167230228674564015" onmouseenter="enter('6167230228674564015');" onmouseout="out('6167230228674564015');" style=""> 113     @Resource(name = &quot;blPersistenceProviders&quot;)                                                           </span>
<span class="5197193686792056094" onmouseenter="enter('5197193686792056094');" onmouseout="out('5197193686792056094');" style=""><abbr title=" 114     protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;();"> 114     protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistencePrðŸ”µ</abbr></span>
<span  style=""> 115                                                                                                          </span>
<span class="6566976708558343402" onmouseenter="enter('6566976708558343402');" onmouseout="out('6566976708558343402');" style=""> 116     @Resource(name = &quot;blPopulateValueRequestValidators&quot;)                                                 </span>
<span class="8688460549992818244" onmouseenter="enter('8688460549992818244');" onmouseout="out('8688460549992818244');" style=""> 117     protected List&lt;PopulateValueRequestValidator&gt; populateValidators;                                    </span>
<span  style=""> 118                                                                                                          </span>
<span class="2226562240918510507" onmouseenter="enter('2226562240918510507');" onmouseout="out('2226562240918510507');" style=""> 119     @Resource(name = &quot;blDefaultFieldPersistenceProvider&quot;)                                                </span>
<span class="3736553406868276704" onmouseenter="enter('3736553406868276704');" onmouseout="out('3736553406868276704');" style=""> 120     protected FieldPersistenceProvider defaultFieldPersistenceProvider;                                  </span>
<span  style=""> 121                                                                                                          </span>
<span class="-2696154002193407400" onmouseenter="enter('-2696154002193407400');" onmouseout="out('-2696154002193407400');" style=""> 122     @Resource(name = &quot;blCriteriaTranslator&quot;)                                                             </span>
<span class="6548648040486234931" onmouseenter="enter('6548648040486234931');" onmouseout="out('6548648040486234931');" style=""> 123     protected CriteriaTranslator criteriaTranslator;                                                     </span>
<span  style=""> 124                                                                                                          </span>
<span class="-4636653885273856120" onmouseenter="enter('-4636653885273856120');" onmouseout="out('-4636653885273856120');" style=""> 125     @Resource(name = &quot;blRestrictionFactory&quot;)                                                             </span>
<span class="-4515285046595655523" onmouseenter="enter('-4515285046595655523');" onmouseout="out('-4515285046595655523');" style=""> 126     protected RestrictionFactory restrictionFactory;                                                     </span>
<span  style=""> 127                                                                                                          </span>
<span class="2099612267381053384" onmouseenter="enter('2099612267381053384');" onmouseout="out('2099612267381053384');" style=""> 128     @Resource(name = &quot;blBasicPersistenceModuleExtensionManager&quot;)                                         </span>
<span class="4348825311931369098" onmouseenter="enter('4348825311931369098');" onmouseout="out('4348825311931369098');" style=""> 129     protected BasicPersistenceModuleExtensionManager extensionManager;                                   </span>
<span  style=""> 130                                                                                                          </span>
<span class="3131053547948330670" onmouseenter="enter('3131053547948330670');" onmouseout="out('3131053547948330670');" style=""> 131     @Resource(name = &quot;blFetchWrapper&quot;)                                                                   </span>
<span class="-359674182981681110" onmouseenter="enter('-359674182981681110');" onmouseout="out('-359674182981681110');" style=""> 132     protected FetchWrapper fetchWrapper;                                                                 </span>
<span  style=""> 133                                                                                                          </span>
<span class="-5680397040643859011" onmouseenter="enter('-5680397040643859011');" onmouseout="out('-5680397040643859011');" style=""> 134     @PostConstruct                                                                                       </span>
<span class="-5421613521494184453" onmouseenter="enter('-5421613521494184453');" onmouseout="out('-5421613521494184453');" style=""> 135     public void init() {                                                                                 </span>
<span class="4686299079232078395" onmouseenter="enter('4686299079232078395');" onmouseout="out('4686299079232078395');" style=""> 136         Collections.sort(fieldPersistenceProviders, new Comparator&lt;FieldPersistenceProvider&gt;() {         </span>
<span  style=""> 137                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 138             @Override                                                                                    </span>
<span class="3172150882386516312" onmouseenter="enter('3172150882386516312');" onmouseout="out('3172150882386516312');" style=""> 139             public int compare(FieldPersistenceProvider o1, FieldPersistenceProvider o2) {               </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 140                 return Integer.compare(o1.getOrder(), o2.getOrder());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 142         });                                                                                              </span>
<span class="-5522683723982909620" onmouseenter="enter('-5522683723982909620');" onmouseout="out('-5522683723982909620');" style=""> 143         Collections.sort(populateValidators, new Comparator&lt;PopulateValueRequestValidator&gt;() {           </span>
<span  style=""> 144                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 145             @Override                                                                                    </span>
<span class="-53383489616583041" onmouseenter="enter('-53383489616583041');" onmouseout="out('-53383489616583041');" style=""> 146             public int compare(PopulateValueRequestValidator o1, PopulateValueRequestValidator o2) {     </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 147                 return Integer.compare(o1.getOrder(), o2.getOrder());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 149         });                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150     }                                                                                                    </span>
<span  style=""> 151                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 152     @Override                                                                                            </span>
<span class="396918709943054648" onmouseenter="enter('396918709943054648');" onmouseout="out('396918709943054648');" style=""> 153     public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {     </span>
<span class="-8767252978178914531" onmouseenter="enter('-8767252978178914531');" onmouseout="out('-8767252978178914531');" style=""> 154         this.applicationContext = applicationContext;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155     }                                                                                                    </span>
<span  style=""> 156                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 157     @Override                                                                                            </span>
<span class="-3014786585495943162" onmouseenter="enter('-3014786585495943162');" onmouseout="out('-3014786585495943162');" style=""> 158     public boolean isCompatible(OperationType operationType) {                                           </span>
<span class="2141831482980401058" onmouseenter="enter('2141831482980401058');" onmouseout="out('2141831482980401058');" style=""><abbr title=" 159         return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationType;"> 159         return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationTypðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160     }                                                                                                    </span>
<span  style=""> 161                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 162     @Override                                                                                            </span>
<span class="-4646037950621881232" onmouseenter="enter('-4646037950621881232');" onmouseout="out('-4646037950621881232');" style=""> 163     public FieldManager getFieldManager() {                                                              </span>
<span class="5127492287871228389" onmouseenter="enter('5127492287871228389');" onmouseout="out('5127492287871228389');" style=""> 164         return persistenceManager.getDynamicEntityDao().getFieldManager();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165     }                                                                                                    </span>
<span  style=""> 166                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 167     @Override                                                                                            </span>
<span class="6292426019095192675" onmouseenter="enter('6292426019095192675');" onmouseout="out('6292426019095192675');" style=""> 168     public DecimalFormat getDecimalFormatter() {                                                         </span>
<span class="-8689839391291561327" onmouseenter="enter('-8689839391291561327');" onmouseout="out('-8689839391291561327');" style=""> 169         BroadleafRequestContext brc = BroadleafRequestContext.getBroadleafRequestContext();              </span>
<span class="-6419077469974014826" onmouseenter="enter('-6419077469974014826');" onmouseout="out('-6419077469974014826');" style=""> 170         Locale locale = brc.getJavaLocale();                                                             </span>
<span class="5393968905060170707" onmouseenter="enter('5393968905060170707');" onmouseout="out('5393968905060170707');" style=""> 171         DecimalFormat format = (DecimalFormat) NumberFormat.getInstance(locale);                         </span>
<span class="-6387263728450575912" onmouseenter="enter('-6387263728450575912');" onmouseout="out('-6387263728450575912');" style=""> 172         format.applyPattern(&quot;0.########&quot;);                                                               </span>
<span class="-7514226051094490374" onmouseenter="enter('-7514226051094490374');" onmouseout="out('-7514226051094490374');" style=""> 173         format.setGroupingUsed(false);                                                                   </span>
<span class="9058009825496417823" onmouseenter="enter('9058009825496417823');" onmouseout="out('9058009825496417823');" style=""> 174         return format;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175     }                                                                                                    </span>
<span  style=""> 176                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 177     @Override                                                                                            </span>
<span class="3673790992053213915" onmouseenter="enter('3673790992053213915');" onmouseout="out('3673790992053213915');" style=""> 178     public SimpleDateFormat getSimpleDateFormatter() {                                                   </span>
<span class="-4651469406949839699" onmouseenter="enter('-4651469406949839699');" onmouseout="out('-4651469406949839699');" style=""> 179         return FormatUtil.getDateFormat();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180     }                                                                                                    </span>
<span  style=""> 181                                                                                                          </span>
<span class="8865595993102688563" onmouseenter="enter('8865595993102688563');" onmouseout="out('8865595993102688563');" style=""><abbr title=" 182     protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata) {"> 182     protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata)ðŸ”µ</abbr></span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 183         if (metadata == null) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 184             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185         }                                                                                                </span>
<span class="4579536340012797507" onmouseenter="enter('4579536340012797507');" onmouseout="out('4579536340012797507');" style=""> 186         Map&lt;String, FieldMetadata&gt; newMap = new HashMap&lt;String, FieldMetadata&gt;();                        </span>
<span class="-7265940589949467353" onmouseenter="enter('-7265940589949467353');" onmouseout="out('-7265940589949467353');" style=""> 187         for (Map.Entry&lt;String, FieldMetadata&gt; entry : metadata.entrySet()) {                             </span>
<span class="8190629385805201553" onmouseenter="enter('8190629385805201553');" onmouseout="out('8190629385805201553');" style=""> 188             String fieldName = entry.getKey();                                                           </span>
<span class="-1384244356449002788" onmouseenter="enter('-1384244356449002788');" onmouseout="out('-1384244356449002788');" style=""> 189             FieldMetadata md = entry.getValue();                                                         </span>
<span class="-392734195208043155" onmouseenter="enter('-392734195208043155');" onmouseout="out('-392734195208043155');" style=""><abbr title=" 190             // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but also corresponds"> 190             // Detect instances where the actual metadata for the field is some sort of CollectionMetadatðŸ”µ</abbr></span>
<span class="5589067424379822421" onmouseenter="enter('5589067424379822421');" onmouseout="out('5589067424379822421');" style=""><abbr title=" 191             // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistenceModule}"> 191             // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasðŸ”µ</abbr></span>
<span class="3711520644201471237" onmouseenter="enter('3711520644201471237');" onmouseout="out('3711520644201471237');" style=""> 192             // can appropriate handle filtration and population                                          </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 193             if (entry.getValue() instanceof BasicFieldMetadata) {                                        </span>
<span class="-2739418553393512485" onmouseenter="enter('-2739418553393512485');" onmouseout="out('-2739418553393512485');" style=""> 194                 newMap.put(fieldName, md);                                                               </span>
<span class="4750432455054359328" onmouseenter="enter('4750432455054359328');" onmouseout="out('4750432455054359328');" style=""><abbr title=" 195             } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY)) {"> 195             } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FORðŸ”µ</abbr></span>
<span class="-8485840589316329792" onmouseenter="enter('-8485840589316329792');" onmouseout="out('-8485840589316329792');" style=""> 196                 newMap.put(fieldName,                                                                    </span>
<span class="-7674878801561950856" onmouseenter="enter('-7674878801561950856');" onmouseout="out('-7674878801561950856');" style=""><abbr title=" 197                         (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY));"> 197                         (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199         }                                                                                                </span>
<span  style=""> 200                                                                                                          </span>
<span class="-298172894898579181" onmouseenter="enter('-298172894898579181');" onmouseout="out('-298172894898579181');" style=""> 201         return newMap;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202     }                                                                                                    </span>
<span  style=""> 203                                                                                                          </span>
<span class="5188070027912515482" onmouseenter="enter('5188070027912515482');" onmouseout="out('5188070027912515482');" style=""> 204     protected Class&lt;?&gt; getBasicBroadleafType(SupportedFieldType fieldType) {                             </span>
<span class="4154961753427691315" onmouseenter="enter('4154961753427691315');" onmouseout="out('4154961753427691315');" style=""> 205         Class&lt;?&gt; response;                                                                               </span>
<span class="2733460625953438179" onmouseenter="enter('2733460625953438179');" onmouseout="out('2733460625953438179');" style=""> 206         switch (fieldType) {                                                                             </span>
<span class="-7896257890077828333" onmouseenter="enter('-7896257890077828333');" onmouseout="out('-7896257890077828333');" style=""> 207             case BOOLEAN:                                                                                </span>
<span class="3764755044082566978" onmouseenter="enter('3764755044082566978');" onmouseout="out('3764755044082566978');" style=""> 208                 response = Boolean.TYPE;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 209                 break;                                                                                   </span>
<span class="6347500693000317849" onmouseenter="enter('6347500693000317849');" onmouseout="out('6347500693000317849');" style=""> 210             case DATE:                                                                                   </span>
<span class="-9142021229939239714" onmouseenter="enter('-9142021229939239714');" onmouseout="out('-9142021229939239714');" style=""> 211                 response = Date.class;                                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 212                 break;                                                                                   </span>
<span class="-3124240416500440487" onmouseenter="enter('-3124240416500440487');" onmouseout="out('-3124240416500440487');" style=""> 213             case DECIMAL:                                                                                </span>
<span class="2581462076834923849" onmouseenter="enter('2581462076834923849');" onmouseout="out('2581462076834923849');" style=""> 214                 response = BigDecimal.class;                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 215                 break;                                                                                   </span>
<span class="-8874916124792368887" onmouseenter="enter('-8874916124792368887');" onmouseout="out('-8874916124792368887');" style=""> 216             case MONEY:                                                                                  </span>
<span class="-3304037034117053709" onmouseenter="enter('-3304037034117053709');" onmouseout="out('-3304037034117053709');" style=""> 217                 response = Money.class;                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 218                 break;                                                                                   </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 219             case INTEGER:                                                                                </span>
<span class="3505410153004371202" onmouseenter="enter('3505410153004371202');" onmouseout="out('3505410153004371202');" style=""> 220                 response = Integer.TYPE;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 221                 break;                                                                                   </span>
<span class="1143803050270343828" onmouseenter="enter('1143803050270343828');" onmouseout="out('1143803050270343828');" style=""> 222             case UNKNOWN:                                                                                </span>
<span class="-7560988579214347129" onmouseenter="enter('-7560988579214347129');" onmouseout="out('-7560988579214347129');" style=""> 223                 response = null;                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 224                 break;                                                                                   </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 225             default:                                                                                     </span>
<span class="5514005520990739575" onmouseenter="enter('5514005520990739575');" onmouseout="out('5514005520990739575');" style=""> 226                 response = String.class;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 227                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228         }                                                                                                </span>
<span  style=""> 229                                                                                                          </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 230         return response;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231     }                                                                                                    </span>
<span  style=""> 232                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 233     @Override                                                                                            </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 234     public Serializable createPopulatedInstance(Serializable instance, Entity entity,                    </span>
<span class="7620597898847416584" onmouseenter="enter('7620597898847416584');" onmouseout="out('7620597898847416584');" style=""> 235             Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId) throws ValidationException { </span>
<span class="895901652489968225" onmouseenter="enter('895901652489968225');" onmouseout="out('895901652489968225');" style=""> 236         return createPopulatedInstance(instance, entity, unfilteredProperties, setId, true);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237     }                                                                                                    </span>
<span  style=""> 238                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 239     @Override                                                                                            </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 240     public Serializable createPopulatedInstance(Serializable instance, Entity entity,                    </span>
<span class="-6938882731089232507" onmouseenter="enter('-6938882731089232507');" onmouseout="out('-6938882731089232507');" style=""><abbr title=" 241             Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties) throws ValidationException {"> 241             Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedPrðŸ”µ</abbr></span>
<span class="-8732291188132739434" onmouseenter="enter('-8732291188132739434');" onmouseout="out('-8732291188132739434');" style=""><abbr title=" 242         final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredProperties);"> 242         final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredPropertðŸ”µ</abbr></span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 243         FieldManager fieldManager = getFieldManager();                                                   </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 244         boolean handled = false;                                                                         </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 245         for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {            </span>
<span class="930709630548418813" onmouseenter="enter('930709630548418813');" onmouseout="out('930709630548418813');" style=""><abbr title=" 246             MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 246             MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPrðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 247             if (MetadataProviderResponse.NOT_HANDLED != response) {                                      </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 248                 handled = true;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249             }                                                                                            </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 250             if (MetadataProviderResponse.HANDLED_BREAK == response) {                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 251                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253         }                                                                                                </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 254         if (!handled) {                                                                                  </span>
<span class="6331160453122921870" onmouseenter="enter('6331160453122921870');" onmouseout="out('6331160453122921870');" style=""><abbr title=" 255             defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 255             defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256         }                                                                                                </span>
<span class="-3308237452429324216" onmouseenter="enter('-3308237452429324216');" onmouseout="out('-3308237452429324216');" style=""><abbr title=" 257         //Order media field, map field and rule builder fields last, as they will have some validation components that depend on previous values"> 257         //Order media field, map field and rule builder fields last, as they will have some validation coðŸ”µ</abbr></span>
<span class="4866803097244618146" onmouseenter="enter('4866803097244618146');" onmouseout="out('4866803097244618146');" style=""> 258         Property[] sortedProperties = entity.getProperties();                                            </span>
<span class="5005865694587957669" onmouseenter="enter('5005865694587957669');" onmouseout="out('5005865694587957669');" style=""> 259         Arrays.sort(sortedProperties, new Comparator&lt;Property&gt;() {                                       </span>
<span  style=""> 260                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 261             @Override                                                                                    </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 262             public int compare(Property o1, Property o2) {                                               </span>
<span class="4801041391951231473" onmouseenter="enter('4801041391951231473');" onmouseout="out('4801041391951231473');" style=""> 263                 BasicFieldMetadata mo1 = (BasicFieldMetadata) mergedProperties.get(o1.getName());        </span>
<span class="8712312491906706674" onmouseenter="enter('8712312491906706674');" onmouseout="out('8712312491906706674');" style=""> 264                 BasicFieldMetadata mo2 = (BasicFieldMetadata) mergedProperties.get(o2.getName());        </span>
<span class="5597729834250389465" onmouseenter="enter('5597729834250389465');" onmouseout="out('5597729834250389465');" style=""><abbr title=" 265                 boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo1.getFieldType() ||"> 265                 boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (ðŸ”µ</abbr></span>
<span class="-5228840553210193176" onmouseenter="enter('-5228840553210193176');" onmouseout="out('-5228840553210193176');" style=""> 266                         SupportedFieldType.RULE_WITH_QUANTITY==mo1.getFieldType() ||                     </span>
<span class="-2825740162482404988" onmouseenter="enter('-2825740162482404988');" onmouseout="out('-2825740162482404988');" style=""> 267                         SupportedFieldType.RULE_SIMPLE_TIME==mo1.getFieldType() ||                       </span>
<span class="-2758640436691235457" onmouseenter="enter('-2758640436691235457');" onmouseout="out('-2758640436691235457');" style=""><abbr title=" 268                         SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 268                         SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManageðŸ”µ</abbr></span>
<span class="4460185052151715074" onmouseenter="enter('4460185052151715074');" onmouseout="out('4460185052151715074');" style=""><abbr title=" 269                 boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo2.getFieldType() ||"> 269                 boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (ðŸ”µ</abbr></span>
<span class="1101038090453452590" onmouseenter="enter('1101038090453452590');" onmouseout="out('1101038090453452590');" style=""> 270                         SupportedFieldType.RULE_WITH_QUANTITY==mo2.getFieldType() ||                     </span>
<span class="-8197603398477948159" onmouseenter="enter('-8197603398477948159');" onmouseout="out('-8197603398477948159');" style=""> 271                         SupportedFieldType.RULE_SIMPLE_TIME==mo2.getFieldType() ||                       </span>
<span class="-275758415706895485" onmouseenter="enter('-275758415706895485');" onmouseout="out('-275758415706895485');" style=""><abbr title=" 272                         SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 272                         SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManageðŸ”µ</abbr></span>
<span class="-2026914999367619686" onmouseenter="enter('-2026914999367619686');" onmouseout="out('-2026914999367619686');" style=""> 273                 if (isLate1 &amp;&amp; !isLate2) {                                                               </span>
<span class="6787741487180588680" onmouseenter="enter('6787741487180588680');" onmouseout="out('6787741487180588680');" style=""> 274                     return 1;                                                                            </span>
<span class="-3681644454129428558" onmouseenter="enter('-3681644454129428558');" onmouseout="out('-3681644454129428558');" style=""> 275                 } else if (!isLate1 &amp;&amp; isLate2) {                                                        </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 276                     return -1;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277                 }                                                                                        </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 278                 return 0;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 280         });                                                                                              </span>
<span class="1932565359130544851" onmouseenter="enter('1932565359130544851');" onmouseout="out('1932565359130544851');" style=""><abbr title=" 281         Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.class);"> 281         Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrapðŸ”µ</abbr></span>
<span class="5994630726155221613" onmouseenter="enter('5994630726155221613');" onmouseout="out('5994630726155221613');" style=""> 282         FlushMode originalFlushMode = session.getHibernateFlushMode();                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 283         try {                                                                                            </span>
<span class="5642929065352278415" onmouseenter="enter('5642929065352278415');" onmouseout="out('5642929065352278415');" style=""> 284             session.setHibernateFlushMode(FlushMode.MANUAL);                                             </span>
<span class="3800930097913678918" onmouseenter="enter('3800930097913678918');" onmouseout="out('3800930097913678918');" style=""> 285             RuntimeException entityPersistenceException = null;                                          </span>
<span class="7436252520289959863" onmouseenter="enter('7436252520289959863');" onmouseout="out('7436252520289959863');" style=""> 286             for (Property property : sortedProperties) {                                                 </span>
<span class="1357949122558141334" onmouseenter="enter('1357949122558141334');" onmouseout="out('1357949122558141334');" style=""><abbr title=" 287                 BasicFieldMetadata metadata = (BasicFieldMetadata) mergedProperties.get(property.getName());"> 287                 BasicFieldMetadata metadata = (BasicFieldMetadata) mergedProperties.get(property.getName(ðŸ”µ</abbr></span>
<span class="-2710932228242800712" onmouseenter="enter('-2710932228242800712');" onmouseout="out('-2710932228242800712');" style=""> 288                 Class&lt;?&gt; returnType;                                                                     </span>
<span class="8439611434668123958" onmouseenter="enter('8439611434668123958');" onmouseout="out('8439611434668123958');" style=""><abbr title=" 289                 if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().startsWith(&quot;__&quot;)) {"> 289                 if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().sðŸ”µ</abbr></span>
<span class="-3329718253928059141" onmouseenter="enter('-3329718253928059141');" onmouseout="out('-3329718253928059141');" style=""> 290                     Field field = fieldManager.getField(instance.getClass(), property.getName());        </span>
<span class="-6389169260302086885" onmouseenter="enter('-6389169260302086885');" onmouseout="out('-6389169260302086885');" style=""> 291                     if (field == null) {                                                                 </span>
<span class="2139581581669054854" onmouseenter="enter('2139581581669054854');" onmouseout="out('2139581581669054854');" style=""><abbr title=" 292                         LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 292                         LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 293                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294                     }                                                                                    </span>
<span class="8953519469960391957" onmouseenter="enter('8953519469960391957');" onmouseout="out('8953519469960391957');" style=""> 295                     returnType = field.getType();                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 296                 } else {                                                                                 </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 297                     if (metadata == null) {                                                              </span>
<span class="8114946394939525604" onmouseenter="enter('8114946394939525604');" onmouseout="out('8114946394939525604');" style=""><abbr title=" 298                         LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 298                         LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StriðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 299                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300                     }                                                                                    </span>
<span class="-8567483443765194758" onmouseenter="enter('-8567483443765194758');" onmouseout="out('-8567483443765194758');" style=""> 301                     returnType = getMapFieldType(instance, fieldManager, property);                      </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 302                     if (returnType == null) {                                                            </span>
<span class="1531226167473626096" onmouseenter="enter('1531226167473626096');" onmouseout="out('1531226167473626096');" style=""> 303                         returnType = getBasicBroadleafType(metadata.getFieldType());                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305                 }                                                                                        </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 306                 if (returnType == null) {                                                                </span>
<span class="8716882681587381997" onmouseenter="enter('8716882681587381997');" onmouseout="out('8716882681587381997');" style=""><abbr title=" 307                     throw new IllegalAccessException(&quot;Unable to determine the value type for the property (&quot; + property.getName() + &quot;)&quot;);"> 307                     throw new IllegalAccessException(&quot;Unable to determine the value type for the propertyðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308                 }                                                                                        </span>
<span class="-1342740262664655807" onmouseenter="enter('-1342740262664655807');" onmouseout="out('-1342740262664655807');" style=""> 309                 String value = property.getValue();                                                      </span>
<span class="6116690946102675760" onmouseenter="enter('6116690946102675760');" onmouseout="out('6116690946102675760');" style=""> 310                 if (metadata != null) {                                                                  </span>
<span  style=""> 311                                                                                                          </span>
<span class="6432907771531110343" onmouseenter="enter('6432907771531110343');" onmouseout="out('6432907771531110343');" style=""> 312                     if (metadata.getFieldType().equals(SupportedFieldType.BOOLEAN)) {                    </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 313                         if (value == null) {                                                             </span>
<span class="-8520936090313964890" onmouseenter="enter('-8520936090313964890');" onmouseout="out('-8520936090313964890');" style=""> 314                             String defaultValue = metadata.getDefaultValue();                            </span>
<span class="-7748715783254025298" onmouseenter="enter('-7748715783254025298');" onmouseout="out('-7748715783254025298');" style=""> 315                             value = StringUtils.isBlank(defaultValue)? &quot;false&quot; : defaultValue;           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316                         }                                                                                </span>
<span class="5830462858832599582" onmouseenter="enter('5830462858832599582');" onmouseout="out('5830462858832599582');" style=""> 317                     } else if (metadata.getFieldType().equals(SupportedFieldType.DATE)) {                </span>
<span class="1584182115233885945" onmouseenter="enter('1584182115233885945');" onmouseout="out('1584182115233885945');" style=""> 318                         if (StringUtils.isEmpty(value)) {                                                </span>
<span class="-7092419811380344208" onmouseenter="enter('-7092419811380344208');" onmouseout="out('-7092419811380344208');" style=""> 319                             value = null;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321                     }                                                                                    </span>
<span  style=""> 322                                                                                                          </span>
<span class="5304497076822353807" onmouseenter="enter('5304497076822353807');" onmouseout="out('5304497076822353807');" style=""><abbr title=" 323                     if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) {"> 323                     if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity,ðŸ”µ</abbr></span>
<span class="-486793269557446445" onmouseenter="enter('-486793269557446445');" onmouseout="out('-486793269557446445');" style=""> 324                         boolean isValid = true;                                                          </span>
<span class="1658940141758117529" onmouseenter="enter('1658940141758117529');" onmouseout="out('1658940141758117529');" style=""><abbr title=" 325                         PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd());"> 325                         PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, propðŸ”µ</abbr></span>
<span class="-7942780495263533884" onmouseenter="enter('-7942780495263533884');" onmouseout="out('-7942780495263533884');" style=""> 326                         handled = false;                                                                 </span>
<span class="3197362083799660545" onmouseenter="enter('3197362083799660545');" onmouseout="out('3197362083799660545');" style=""> 327                         if (value != null) {                                                             </span>
<span class="-3229008606700200313" onmouseenter="enter('-3229008606700200313');" onmouseout="out('-3229008606700200313');" style=""> 328                             for (PopulateValueRequestValidator validator : populateValidators) {         </span>
<span class="884666747315214760" onmouseenter="enter('884666747315214760');" onmouseout="out('884666747315214760');" style=""><abbr title=" 329                                 PropertyValidationResult validationResult = validator.validate(request, instance);"> 329                                 PropertyValidationResult validationResult = validator.validate(request, iðŸ”µ</abbr></span>
<span class="-4364264466893249362" onmouseenter="enter('-4364264466893249362');" onmouseout="out('-4364264466893249362');" style=""> 330                                 if (!validationResult.isValid()) {                                       </span>
<span class="-8273348184937120120" onmouseenter="enter('-8273348184937120120');" onmouseout="out('-8273348184937120120');" style=""><abbr title=" 331                                     entity.addValidationError(property.getName(), validationResult.getErrorMessage());"> 331                                     entity.addValidationError(property.getName(), validationResult.getErrðŸ”µ</abbr></span>
<span class="-5133746822051192612" onmouseenter="enter('-5133746822051192612');" onmouseout="out('-5133746822051192612');" style=""> 332                                     isValid = false;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335                         }                                                                                </span>
<span class="-2043265533105198042" onmouseenter="enter('-2043265533105198042');" onmouseout="out('-2043265533105198042');" style=""> 336                         if (isValid) {                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 337                             try {                                                                        </span>
<span class="493530022350283834" onmouseenter="enter('493530022350283834');" onmouseout="out('493530022350283834');" style=""> 338                                 boolean isBreakDetected = false;                                         </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 339                                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 339                                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceðŸ”µ</abbr></span>
<span class="-2175392382273122455" onmouseenter="enter('-2175392382273122455');" onmouseout="out('-2175392382273122455');" style=""><abbr title=" 340                                     if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (value != null || fieldPersistenceProvider.canHandlePopulateNull())) {"> 340                                     if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (vaðŸ”µ</abbr></span>
<span class="-9063763262484694182" onmouseenter="enter('-9063763262484694182');" onmouseout="out('-9063763262484694182');" style=""><abbr title=" 341                                         MetadataProviderResponse response = fieldPersistenceProvider.populateValue(request, instance);"> 341                                         MetadataProviderResponse response = fieldPersistenceProvider.popuðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 342                                         if (MetadataProviderResponse.NOT_HANDLED != response) {          </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 343                                             handled = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344                                         }                                                                </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 345                                         if (MetadataProviderResponse.HANDLED_BREAK == response) {        </span>
<span class="7683637701498275712" onmouseenter="enter('7683637701498275712');" onmouseout="out('7683637701498275712');" style=""> 346                                             isBreakDetected = true;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349                                 }                                                                        </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 350                                 if (!handled) {                                                          </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 351                                     if (value == null) {                                                 </span>
<span class="882791416935144082" onmouseenter="enter('882791416935144082');" onmouseout="out('882791416935144082');" style=""> 352                                         property.setIsDirty(true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353                                     }                                                                    </span>
<span class="1375938864856367065" onmouseenter="enter('1375938864856367065');" onmouseout="out('1375938864856367065');" style=""><abbr title=" 354                                     defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd()), instance);"> 354                                     defaultFieldPersistenceProvider.populateValue(new PopulateValueRequesðŸ”µ</abbr></span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 355                                     if (value == null) {                                                 </span>
<span class="-9084682385294658879" onmouseenter="enter('-9084682385294658879');" onmouseout="out('-9084682385294658879');" style=""> 356                                         fieldManager.setFieldValue(instance, property.getName(), null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358                                 }                                                                        </span>
<span class="8793300741685062154" onmouseenter="enter('8793300741685062154');" onmouseout="out('8793300741685062154');" style=""><abbr title=" 359                             } catch (ParentEntityPersistenceException | javax.validation.ValidationException e) {"> 359                             } catch (ParentEntityPersistenceException | javax.validation.ValidationExceptðŸ”µ</abbr></span>
<span class="9214632560148736873" onmouseenter="enter('9214632560148736873');" onmouseout="out('9214632560148736873');" style=""> 360                                 entityPersistenceException = e;                                          </span>
<span class="8194585295280636961" onmouseenter="enter('8194585295280636961');" onmouseout="out('8194585295280636961');" style=""> 361                                 cleanupFailedPersistenceAttempt(instance);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 362                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 363                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367             }                                                                                            </span>
<span class="-8941633054064108755" onmouseenter="enter('-8941633054064108755');" onmouseout="out('-8941633054064108755');" style=""> 368             // Only check validation if not the initial add                                              </span>
<span class="3237544980725266527" onmouseenter="enter('3237544980725266527');" onmouseout="out('3237544980725266527');" style=""> 369             if (!entity.isPreAdd()) {                                                                    </span>
<span class="-9050207745018896152" onmouseenter="enter('-9050207745018896152');" onmouseout="out('-9050207745018896152');" style=""> 370                 validate(entity, instance, mergedProperties, validateUnsubmittedProperties);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371             }                                                                                            </span>
<span class="32753067189116500" onmouseenter="enter('32753067189116500');" onmouseout="out('32753067189116500');" style=""><abbr title=" 372             //if validation failed, refresh the current instance so that none of the changes will be persisted"> 372             //if validation failed, refresh the current instance so that none of the changes will be persðŸ”µ</abbr></span>
<span class="-2597695263377724387" onmouseenter="enter('-2597695263377724387');" onmouseout="out('-2597695263377724387');" style=""> 373             if (entity.isValidationFailure()) {                                                          </span>
<span class="-5245333264083845326" onmouseenter="enter('-5245333264083845326');" onmouseout="out('-5245333264083845326');" style=""> 374                 //only refresh the instance if it was managed to begin with                              </span>
<span class="9192371448315551444" onmouseenter="enter('9192371448315551444');" onmouseout="out('9192371448315551444');" style=""><abbr title=" 375                 if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instance)) {"> 375                 if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instanceðŸ”µ</abbr></span>
<span class="5068098197212588956" onmouseenter="enter('5068098197212588956');" onmouseout="out('5068098197212588956');" style=""> 376                     persistenceManager.getDynamicEntityDao().refresh(instance);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377                 }                                                                                        </span>
<span  style=""> 378                                                                                                          </span>
<span class="-2797407664577460515" onmouseenter="enter('-2797407664577460515');" onmouseout="out('-2797407664577460515');" style=""><abbr title=" 379                 //re-initialize the valid properties for the entity in order to deal with the potential of not"> 379                 //re-initialize the valid properties for the entity in order to deal with the potential oðŸ”µ</abbr></span>
<span class="7620881433898036398" onmouseenter="enter('7620881433898036398');" onmouseout="out('7620881433898036398');" style=""> 380                 //completely sending over all checkbox/radio fields                                      </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 381                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 382                 entityList.add(instance);                                                                </span>
<span class="-903163901416962067" onmouseenter="enter('-903163901416962067');" onmouseout="out('-903163901416962067');" style=""> 383                 Entity invalid = getRecords(mergedProperties, entityList, null, null, null)[0];          </span>
<span class="-434334858457397385" onmouseenter="enter('-434334858457397385');" onmouseout="out('-434334858457397385');" style=""> 384                 invalid.setPropertyValidationErrors(entity.getPropertyValidationErrors());               </span>
<span class="-4617220526414327800" onmouseenter="enter('-4617220526414327800');" onmouseout="out('-4617220526414327800');" style=""> 385                 invalid.setGlobalValidationErrors(entity.getGlobalValidationErrors());                   </span>
<span class="-3275304366399180151" onmouseenter="enter('-3275304366399180151');" onmouseout="out('-3275304366399180151');" style=""> 386                 invalid.overridePropertyValues(entity);                                                  </span>
<span  style=""> 387                                                                                                          </span>
<span class="-5826985379545468824" onmouseenter="enter('-5826985379545468824');" onmouseout="out('-5826985379545468824');" style=""><abbr title=" 388                 String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.getGlobalValidationErrors());"> 388                 String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), ðŸ”µ</abbr></span>
<span class="-1571824840661221764" onmouseenter="enter('-1571824840661221764');" onmouseout="out('-1571824840661221764');" style=""> 389                 throw new ValidationException(invalid, message);                                         </span>
<span class="-4684713380455277597" onmouseenter="enter('-4684713380455277597');" onmouseout="out('-4684713380455277597');" style=""> 390             } else if (entityPersistenceException != null) {                                             </span>
<span class="1045288364868684284" onmouseenter="enter('1045288364868684284');" onmouseout="out('1045288364868684284');" style=""> 391                 throw ExceptionHelper.refineException(entityPersistenceException.getCause());            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 392             } else {                                                                                     </span>
<span class="7383617604540684898" onmouseenter="enter('7383617604540684898');" onmouseout="out('7383617604540684898');" style=""> 393                 fieldManager.persistMiddleEntities();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 394             }                                                                                            </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 395         } catch (IllegalAccessException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 396             throw new PersistenceException(e);                                                           </span>
<span class="6243028624057522413" onmouseenter="enter('6243028624057522413');" onmouseout="out('6243028624057522413');" style=""> 397         } catch (InstantiationException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 398             throw new PersistenceException(e);                                                           </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 399         } finally {                                                                                      </span>
<span class="4677599505604490897" onmouseenter="enter('4677599505604490897');" onmouseout="out('4677599505604490897');" style=""> 400             session.setHibernateFlushMode(originalFlushMode);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401         }                                                                                                </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style=""> 402         return instance;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403     }                                                                                                    </span>
<span  style=""> 404                                                                                                          </span>
<span class="461529783746476585" onmouseenter="enter('461529783746476585');" onmouseout="out('461529783746476585');" style=""><abbr title=" 405     protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable instance,"> 405     protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable iðŸ”µ</abbr></span>
<span class="3885863412641560188" onmouseenter="enter('3885863412641560188');" onmouseout="out('3885863412641560188');" style=""><abbr title=" 406                                              Boolean setId, BasicFieldMetadata metadata, Entity entity, String value) throws IllegalAccessException {"> 406                                              Boolean setId, BasicFieldMetadata metadata, Entity entity, SðŸ”µ</abbr></span>
<span class="-8863585303780993216" onmouseenter="enter('-8863585303780993216');" onmouseout="out('-8863585303780993216');" style=""> 407         Boolean mutable = metadata.getMutable();                                                         </span>
<span class="8777806519724314753" onmouseenter="enter('8777806519724314753');" onmouseout="out('8777806519724314753');" style=""> 408         Boolean readOnly = metadata.getReadOnly();                                                       </span>
<span class="949029723485795199" onmouseenter="enter('949029723485795199');" onmouseout="out('949029723485795199');" style=""><abbr title=" 409         boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp; property.getEnabled();"> 409         boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp;ðŸ”µ</abbr></span>
<span  style=""> 410                                                                                                          </span>
<span class="-5466596695953259298" onmouseenter="enter('-5466596695953259298');" onmouseout="out('-5466596695953259298');" style=""> 411         if (generalConditionsMet &amp;&amp; value == null) {                                                     </span>
<span class="3784846250944455561" onmouseenter="enter('3784846250944455561');" onmouseout="out('3784846250944455561');" style=""> 412             boolean currentValueIsNotNull = false;                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 413             try {                                                                                        </span>
<span class="-6026008610562760887" onmouseenter="enter('-6026008610562760887');" onmouseout="out('-6026008610562760887');" style=""> 414                 currentValueIsNotNull = fieldManager.getFieldValue(instance, property.getName()) != null;</span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 415             } catch (FieldNotAvailableException e) {                                                     </span>
<span class="5941411430976365683" onmouseenter="enter('5941411430976365683');" onmouseout="out('5941411430976365683');" style=""> 416                 throw new IllegalArgumentException(e);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417             }                                                                                            </span>
<span  style=""> 418                                                                                                          </span>
<span class="2174296922893169949" onmouseenter="enter('2174296922893169949');" onmouseout="out('2174296922893169949');" style=""> 419             boolean valueIsNotNullId = metadata.getFieldType() != SupportedFieldType.ID || setId;        </span>
<span class="3378189448655180920" onmouseenter="enter('3378189448655180920');" onmouseout="out('3378189448655180920');" style=""> 420             boolean valueIsNotPassword = metadata.getFieldType() != SupportedFieldType.PASSWORD;         </span>
<span  style=""> 421                                                                                                          </span>
<span class="-802153418821632058" onmouseenter="enter('-802153418821632058');" onmouseout="out('-802153418821632058');" style=""> 422             return currentValueIsNotNull &amp;&amp; !entity.isPreAdd() &amp;&amp; valueIsNotNullId &amp;&amp; valueIsNotPassword;</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423         }                                                                                                </span>
<span class="7805064061324166126" onmouseenter="enter('7805064061324166126');" onmouseout="out('7805064061324166126');" style=""> 424         return generalConditionsMet;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425     }                                                                                                    </span>
<span  style=""> 426                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 427     @Override                                                                                            </span>
<span class="1852783233485112885" onmouseenter="enter('1852783233485112885');" onmouseout="out('1852783233485112885');" style=""><abbr title=" 428     public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FieldMetadata&gt; alternateMergedProperties, String pathToTargetObject) {"> 428     public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;ðŸ”µ</abbr></span>
<span class="-6187207773895344621" onmouseenter="enter('-6187207773895344621');" onmouseout="out('-6187207773895344621');" style=""> 429         List&lt;Serializable&gt; records = new ArrayList&lt;Serializable&gt;(1);                                     </span>
<span class="5878022765752800842" onmouseenter="enter('5878022765752800842');" onmouseout="out('5878022765752800842');" style=""> 430         records.add(record);                                                                             </span>
<span class="496294912681907043" onmouseenter="enter('496294912681907043');" onmouseout="out('496294912681907043');" style=""><abbr title=" 431         Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTargetObject, null);"> 431         Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedPropertiesðŸ”µ</abbr></span>
<span class="-9062758151482460865" onmouseenter="enter('-9062758151482460865');" onmouseout="out('-9062758151482460865');" style=""> 432         return productEntities[0];                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433     }                                                                                                    </span>
<span  style=""> 434                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 435     @Override                                                                                            </span>
<span class="5781949221273262010" onmouseenter="enter('5781949221273262010');" onmouseout="out('5781949221273262010');" style=""><abbr title=" 436     public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, Serializable record) {"> 436     public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, SðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 437         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 437         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getNamðŸ”µ</abbr></span>
<span class="-5151099947242221721" onmouseenter="enter('-5151099947242221721');" onmouseout="out('-5151099947242221721');" style=""> 438         return getRecord(mergedProperties, record, null, null);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439     }                                                                                                    </span>
<span  style=""> 440                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 441     @Override                                                                                            </span>
<span class="-4520532598669526895" onmouseenter="enter('-4520532598669526895');" onmouseout="out('-4520532598669526895');" style=""><abbr title=" 442     public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? extends Serializable&gt; records) {"> 442     public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspectiveðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 443         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 443         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getNamðŸ”µ</abbr></span>
<span class="-928847591506271316" onmouseenter="enter('-928847591506271316');" onmouseout="out('-928847591506271316');" style=""> 444         return getRecords(mergedProperties, records, null, null, null);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445     }                                                                                                    </span>
<span  style=""> 446                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 447     @Override                                                                                            </span>
<span class="-8278894720012200265" onmouseenter="enter('-8278894720012200265');" onmouseout="out('-8278894720012200265');" style=""><abbr title=" 448     public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persistencePerspective) {"> 448     public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspectiveðŸ”µ</abbr></span>
<span class="-3722133806289408051" onmouseenter="enter('-3722133806289408051');" onmouseout="out('-3722133806289408051');" style=""><abbr title=" 449         return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspective);"> 449         return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistenceðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450     }                                                                                                    </span>
<span  style=""> 451                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 452     @Override                                                                                            </span>
<span class="-721724575932279638" onmouseenter="enter('-721724575932279638');" onmouseout="out('-721724575932279638');" style=""><abbr title=" 453     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; records) {"> 453     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends SerialiðŸ”µ</abbr></span>
<span class="8327530304239683256" onmouseenter="enter('8327530304239683256');" onmouseout="out('8327530304239683256');" style=""> 454         return getRecords(primaryMergedProperties, records, null, null, null);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455     }                                                                                                    </span>
<span  style=""> 456                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 457     @Override                                                                                            </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 458     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,             </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 459                                List&lt;? extends Serializable&gt; records,                                     </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 460                                Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,           </span>
<span class="-4377947839867578072" onmouseenter="enter('-4377947839867578072');" onmouseout="out('-4377947839867578072');" style=""> 461                                String pathToTargetObject) {                                              </span>
<span class="4685453067306146439" onmouseenter="enter('4685453067306146439');" onmouseout="out('4685453067306146439');" style=""><abbr title=" 462         return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTargetObject, null);"> 462         return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedPropertiesðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463     }                                                                                                    </span>
<span  style=""> 464                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 465     @Override                                                                                            </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 466     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,             </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 467                                List&lt;? extends Serializable&gt; records,                                     </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 468                                Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,           </span>
<span class="8335655514773173486" onmouseenter="enter('8335655514773173486');" onmouseout="out('8335655514773173486');" style=""> 469                                String pathToTargetObject,                                                </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 470                                String[] customCriteria) {                                                </span>
<span class="-7988348483038990196" onmouseenter="enter('-7988348483038990196');" onmouseout="out('-7988348483038990196');" style=""><abbr title=" 471         Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedProperties);"> 471         Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfiltereðŸ”µ</abbr></span>
<span class="-3378908089969836890" onmouseenter="enter('-3378908089969836890');" onmouseout="out('-3378908089969836890');" style=""><abbr title=" 472         Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergedProperties);"> 472         Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilðŸ”µ</abbr></span>
<span class="-6780502465801472168" onmouseenter="enter('-6780502465801472168');" onmouseout="out('-6780502465801472168');" style=""> 473         Entity[] entities = new Entity[records.size()];                                                  </span>
<span class="-3238093963120777374" onmouseenter="enter('-3238093963120777374');" onmouseout="out('-3238093963120777374');" style=""> 474         int j = 0;                                                                                       </span>
<span class="3456801759115552322" onmouseenter="enter('3456801759115552322');" onmouseout="out('3456801759115552322');" style=""> 475         for (Serializable recordEntity : records) {                                                      </span>
<span class="619523180404568822" onmouseenter="enter('619523180404568822');" onmouseout="out('619523180404568822');" style=""> 476             Serializable entity;                                                                         </span>
<span class="-2186067977699467203" onmouseenter="enter('-2186067977699467203');" onmouseout="out('-2186067977699467203');" style=""> 477             if (pathToTargetObject != null) {                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 478                 try {                                                                                    </span>
<span class="-5492139625117264664" onmouseenter="enter('-5492139625117264664');" onmouseout="out('-5492139625117264664');" style=""><abbr title=" 479                     entity = (Serializable) getFieldManager().getFieldValue(recordEntity, pathToTargetObject);"> 479                     entity = (Serializable) getFieldManager().getFieldValue(recordEntity, pathToTargetObjðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 480                 } catch (Exception e) {                                                                  </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 481                     throw new PersistenceException(e);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 483             } else {                                                                                     </span>
<span class="-6074236754568201796" onmouseenter="enter('-6074236754568201796');" onmouseout="out('-6074236754568201796');" style=""> 484                 entity = recordEntity;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485             }                                                                                            </span>
<span class="8514876957999010588" onmouseenter="enter('8514876957999010588');" onmouseout="out('8514876957999010588');" style=""> 486             Entity entityItem = new Entity();                                                            </span>
<span class="3587737780108495887" onmouseenter="enter('3587737780108495887');" onmouseout="out('3587737780108495887');" style=""> 487             entityItem.setType(new String[] { entity.getClass().getName() });                            </span>
<span class="-2252000440729832309" onmouseenter="enter('-2252000440729832309');" onmouseout="out('-2252000440729832309');" style=""> 488             entities[j] = entityItem;                                                                    </span>
<span  style=""> 489                                                                                                          </span>
<span class="3961822747852490020" onmouseenter="enter('3961822747852490020');" onmouseout="out('3961822747852490020');" style=""> 490             List&lt;Property&gt; props = new ArrayList&lt;Property&gt;(primaryMergedProperties.size());              </span>
<span class="-4152224460170095636" onmouseenter="enter('-4152224460170095636');" onmouseout="out('-4152224460170095636');" style=""><abbr title=" 491             extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria);"> 491             extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria)ðŸ”µ</abbr></span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 492             if (alternateMergedProperties != null) {                                                     </span>
<span class="-9087051985097357993" onmouseenter="enter('-9087051985097357993');" onmouseout="out('-9087051985097357993');" style=""><abbr title=" 493                 extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriteria);"> 493                 extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, cusðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 494             }                                                                                            </span>
<span  style=""> 495                                                                                                          </span>
<span class="-5089629635789493807" onmouseenter="enter('-5089629635789493807');" onmouseout="out('-5089629635789493807');" style=""> 496             // Try to add the &quot;main name&quot; property. Log a debug message if we can&#x27;t                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 497             try {                                                                                        </span>
<span class="5380947615780799183" onmouseenter="enter('5380947615780799183');" onmouseout="out('5380947615780799183');" style=""> 498                 Property p = new Property();                                                             </span>
<span class="1925482889972291082" onmouseenter="enter('1925482889972291082');" onmouseout="out('1925482889972291082');" style=""> 499                 p.setName(MAIN_ENTITY_NAME_PROPERTY);                                                    </span>
<span class="-280105646141823521" onmouseenter="enter('-280105646141823521');" onmouseout="out('-280105646141823521');" style=""> 500                 String mainEntityName = (String) MethodUtils.invokeMethod(entity, &quot;getMainEntityName&quot;);  </span>
<span class="-4568210868795612410" onmouseenter="enter('-4568210868795612410');" onmouseout="out('-4568210868795612410');" style=""> 501                 p.setValue(mainEntityName);                                                              </span>
<span class="-4361225624073911918" onmouseenter="enter('-4361225624073911918');" onmouseout="out('-4361225624073911918');" style=""> 502                 props.add(p);                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 503             } catch (Exception e) {                                                                      </span>
<span class="8396621627303093896" onmouseenter="enter('8396621627303093896');" onmouseout="out('8396621627303093896');" style=""> 504                 LOG.debug(String.format(&quot;Could not execute the getMainEntityName() method for [%s]&quot;,     </span>
<span class="210384044775512031" onmouseenter="enter('210384044775512031');" onmouseout="out('210384044775512031');" style=""> 505                         entity.getClass().getName()), e);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506             }                                                                                            </span>
<span  style=""> 507                                                                                                          </span>
<span class="-8721953412008939855" onmouseenter="enter('-8721953412008939855');" onmouseout="out('-8721953412008939855');" style=""> 508             // Try to add the alternate id property if available                                         </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 509             if (alternateMergedProperties != null) {                                                     </span>
<span class="-2729730257234978997" onmouseenter="enter('-2729730257234978997');" onmouseout="out('-2729730257234978997');" style=""> 510                 for (Entry&lt;String, FieldMetadata&gt; entry : alternateMergedProperties.entrySet()) {        </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 511                     if (entry.getValue() instanceof BasicFieldMetadata) {                                </span>
<span class="-3735738621021538581" onmouseenter="enter('-3735738621021538581');" onmouseout="out('-3735738621021538581');" style=""><abbr title=" 512                         if (((BasicFieldMetadata) entry.getValue()).getFieldType() == SupportedFieldType.ID) {"> 512                         if (((BasicFieldMetadata) entry.getValue()).getFieldType() == SupportedFieldType.ðŸ”µ</abbr></span>
<span class="475815096463760847" onmouseenter="enter('475815096463760847');" onmouseout="out('475815096463760847');" style=""><abbr title=" 513                             Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadata&gt;();"> 513                             Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadðŸ”µ</abbr></span>
<span class="-4538053591093527376" onmouseenter="enter('-4538053591093527376');" onmouseout="out('-4538053591093527376');" style=""> 514                             alternateOnEntity.put(entry.getKey(), entry.getValue());                     </span>
<span class="6846951436664779248" onmouseenter="enter('6846951436664779248');" onmouseout="out('6846951436664779248');" style=""> 515                             List&lt;Property&gt; props2 = new ArrayList&lt;Property&gt;();                           </span>
<span class="5345785186371221305" onmouseenter="enter('5345785186371221305');" onmouseout="out('5345785186371221305');" style=""><abbr title=" 516                             extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCriteria);"> 516                             extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2ðŸ”µ</abbr></span>
<span class="-7220107863695845032" onmouseenter="enter('-7220107863695845032');" onmouseout="out('-7220107863695845032');" style=""> 517                             List&lt;Property&gt; filtered = new ArrayList&lt;Property&gt;();                         </span>
<span class="-7311698525315213587" onmouseenter="enter('-7311698525315213587');" onmouseout="out('-7311698525315213587');" style=""> 518                             for (Property prop : props2) {                                               </span>
<span class="6017333932165432493" onmouseenter="enter('6017333932165432493');" onmouseout="out('6017333932165432493');" style=""> 519                                 if (!prop.getName().startsWith(&quot;__&quot;)) {                                  </span>
<span class="-5604579077622831568" onmouseenter="enter('-5604579077622831568');" onmouseout="out('-5604579077622831568');" style=""> 520                                     filtered.add(prop);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522                             }                                                                            </span>
<span class="7776429612545514862" onmouseenter="enter('7776429612545514862');" onmouseout="out('7776429612545514862');" style=""> 523                             if (filtered.size() == 1 &amp;&amp; !filtered.get(0).getName().contains(&quot;.&quot;)) {      </span>
<span class="766644908777739787" onmouseenter="enter('766644908777739787');" onmouseout="out('766644908777739787');" style=""> 524                                 Property alternateIdProp = filtered.get(0);                              </span>
<span class="1444561456824673058" onmouseenter="enter('1444561456824673058');" onmouseout="out('1444561456824673058');" style=""> 525                                 alternateIdProp.setName(ALTERNATE_ID_PROPERTY);                          </span>
<span class="-1260553957514386502" onmouseenter="enter('-1260553957514386502');" onmouseout="out('-1260553957514386502');" style=""> 526                                 props.add(alternateIdProp);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531             }                                                                                            </span>
<span  style=""> 532                                                                                                          </span>
<span class="3140965171760158820" onmouseenter="enter('3140965171760158820');" onmouseout="out('3140965171760158820');" style=""> 533             Property[] properties = new Property[props.size()];                                          </span>
<span class="-5540374985766964035" onmouseenter="enter('-5540374985766964035');" onmouseout="out('-5540374985766964035');" style=""> 534             properties = props.toArray(properties);                                                      </span>
<span class="2992548432186189131" onmouseenter="enter('2992548432186189131');" onmouseout="out('2992548432186189131');" style=""> 535             entityItem.setProperties(properties);                                                        </span>
<span class="-5688619574901767370" onmouseenter="enter('-5688619574901767370');" onmouseout="out('-5688619574901767370');" style=""> 536             j++;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537         }                                                                                                </span>
<span  style=""> 538                                                                                                          </span>
<span class="-7616126935915446236" onmouseenter="enter('-7616126935915446236');" onmouseout="out('-7616126935915446236');" style=""> 539         return entities;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540     }                                                                                                    </span>
<span  style=""> 541                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 542     @Override                                                                                            </span>
<span class="-1580059539469245457" onmouseenter="enter('-1580059539469245457');" onmouseout="out('-1580059539469245457');" style=""> 543     public Entity[] getRecords(FetchExtractionRequest fetchExtractionRequest) {                          </span>
<span class="-7749788048664948511" onmouseenter="enter('-7749788048664948511');" onmouseout="out('-7749788048664948511');" style=""> 544         return fetchWrapper.getRecords(fetchExtractionRequest);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545     }                                                                                                    </span>
<span  style=""> 546                                                                                                          </span>
<span class="2943865710042007016" onmouseenter="enter('2943865710042007016');" onmouseout="out('2943865710042007016');" style=""> 547     protected void extractPropertiesFromPersistentEntity(Map&lt;String, FieldMetadata&gt; mergedProperties,    </span>
<span class="-3214801195397343505" onmouseenter="enter('-3214801195397343505');" onmouseout="out('-3214801195397343505');" style=""> 548                                                          Serializable entity,                            </span>
<span class="6006324038342333129" onmouseenter="enter('6006324038342333129');" onmouseout="out('6006324038342333129');" style=""> 549                                                          List&lt;Property&gt; props,                           </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 550                                                          String[] customCriteria) {                      </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 551         FieldManager fieldManager = getFieldManager();                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 552         try {                                                                                            </span>
<span class="3586746813038594040" onmouseenter="enter('3586746813038594040');" onmouseout="out('3586746813038594040');" style=""> 553             if (entity instanceof AdminMainEntity) {                                                     </span>
<span class="-7831041928171184784" onmouseenter="enter('-7831041928171184784');" onmouseout="out('-7831041928171184784');" style=""> 554                 //Create an invisible property for the admin main entity name, if applicable.            </span>
<span class="4236597300486677730" onmouseenter="enter('4236597300486677730');" onmouseout="out('4236597300486677730');" style=""> 555                 //This is useful for ToOneLookups if that ToOneLookup uses AdminMainEntity to drive      </span>
<span class="2696338225815060194" onmouseenter="enter('2696338225815060194');" onmouseout="out('2696338225815060194');" style=""> 556                 //its display name.                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 557                 try {                                                                                    </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 558                     Property propertyItem = new Property();                                              </span>
<span class="459927527015615277" onmouseenter="enter('459927527015615277');" onmouseout="out('459927527015615277');" style=""> 559                     propertyItem.setName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);                     </span>
<span class="-3439538412113948348" onmouseenter="enter('-3439538412113948348');" onmouseout="out('-3439538412113948348');" style=""> 560                     propertyItem.setValue(((AdminMainEntity) entity).getMainEntityName());               </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 561                     props.add(propertyItem);                                                             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 562                 } catch (Exception e) {                                                                  </span>
<span class="-6660676054828691164" onmouseenter="enter('-6660676054828691164');" onmouseout="out('-6660676054828691164');" style=""><abbr title=" 563                     //do nothing here except for not add the property. Exceptions could occur when there is a validation"> 563                     //do nothing here except for not add the property. Exceptions could occur when there ðŸ”µ</abbr></span>
<span class="6622622754482242268" onmouseenter="enter('6622622754482242268');" onmouseout="out('6622622754482242268');" style=""><abbr title=" 564                     //issue and some properties/relationships that are used for gleaning the main entity name end up"> 564                     //issue and some properties/relationships that are used for gleaning the main entity ðŸ”µ</abbr></span>
<span class="-3324578144663288556" onmouseenter="enter('-3324578144663288556');" onmouseout="out('-3324578144663288556');" style=""> 565                     //not being set                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567             }                                                                                            </span>
<span class="6525223774393628953" onmouseenter="enter('6525223774393628953');" onmouseout="out('6525223774393628953');" style=""> 568             for (Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 569                 String property = entry.getKey();                                                        </span>
<span class="-6557658272043627235" onmouseenter="enter('-6557658272043627235');" onmouseout="out('-6557658272043627235');" style=""> 570                 BasicFieldMetadata metadata = (BasicFieldMetadata) entry.getValue();                     </span>
<span class="1571137238250878820" onmouseenter="enter('1571137238250878820');" onmouseout="out('1571137238250878820');" style=""><abbr title=" 571                 if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.getClass().isAssignableFrom(Class.forName(metadata.getInheritedFromType()))) {"> 571                 if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) ||ðŸ”µ</abbr></span>
<span class="6995086675671638042" onmouseenter="enter('6995086675671638042');" onmouseout="out('6995086675671638042');" style=""> 572                     boolean proceed = true;                                                              </span>
<span class="1084798123261065834" onmouseenter="enter('1084798123261065834');" onmouseout="out('1084798123261065834');" style=""> 573                     if (property.contains(&quot;.&quot;)) {                                                        </span>
<span class="-2955712908532642203" onmouseenter="enter('-2955712908532642203');" onmouseout="out('-2955712908532642203');" style=""> 574                         StringTokenizer tokens = new StringTokenizer(property, &quot;.&quot;);                     </span>
<span class="682329956200427964" onmouseenter="enter('682329956200427964');" onmouseout="out('682329956200427964');" style=""> 575                         Object testObject = entity;                                                      </span>
<span class="2196330750852339617" onmouseenter="enter('2196330750852339617');" onmouseout="out('2196330750852339617');" style=""> 576                         while (tokens.hasMoreTokens()) {                                                 </span>
<span class="-3851292165554806554" onmouseenter="enter('-3851292165554806554');" onmouseout="out('-3851292165554806554');" style=""> 577                             String token = tokens.nextToken();                                           </span>
<span class="7999260116794465545" onmouseenter="enter('7999260116794465545');" onmouseout="out('7999260116794465545');" style=""> 578                             if (tokens.hasMoreTokens()) {                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 579                                 try {                                                                    </span>
<span class="1542151824276478361" onmouseenter="enter('1542151824276478361');" onmouseout="out('1542151824276478361');" style=""> 580                                     testObject = fieldManager.getFieldValue(testObject, token);          </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 581                                 } catch (FieldNotAvailableException e) {                                 </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 582                                     proceed = false;                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 583                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584                                 }                                                                        </span>
<span class="8671980878137139761" onmouseenter="enter('8671980878137139761');" onmouseout="out('8671980878137139761');" style=""> 585                                 if (testObject == null) {                                                </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 586                                     Property propertyItem = new Property();                              </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 587                                     propertyItem.setName(property);                                      </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 588                                     if (props.contains(propertyItem)) {                                  </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 589                                         proceed = false;                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 590                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591                                     }                                                                    </span>
<span class="-1297206784742569730" onmouseenter="enter('-1297206784742569730');" onmouseout="out('-1297206784742569730');" style=""> 592                                     propertyItem.setValue(null);                                         </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 593                                     props.add(propertyItem);                                             </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 594                                     proceed = false;                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 595                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599                     }                                                                                    </span>
<span class="6772675439678687977" onmouseenter="enter('6772675439678687977');" onmouseout="out('6772675439678687977');" style=""> 600                     if (!proceed) {                                                                      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 601                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602                     }                                                                                    </span>
<span  style=""> 603                                                                                                          </span>
<span class="-7680907447726339638" onmouseenter="enter('-7680907447726339638');" onmouseout="out('-7680907447726339638');" style=""> 604                     boolean isFieldAccessible = true;                                                    </span>
<span class="1714704837357165345" onmouseenter="enter('1714704837357165345');" onmouseout="out('1714704837357165345');" style=""> 605                     Object value = null;                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 606                     try {                                                                                </span>
<span class="-802340144122893040" onmouseenter="enter('-802340144122893040');" onmouseout="out('-802340144122893040');" style=""> 607                         value = fieldManager.getFieldValue(entity, property);                            </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 608                     } catch (FieldNotAvailableException e) {                                             </span>
<span class="-5134531397184128099" onmouseenter="enter('-5134531397184128099');" onmouseout="out('-5134531397184128099');" style=""> 609                         isFieldAccessible = false;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610                     }                                                                                    </span>
<span class="-1242713994964830615" onmouseenter="enter('-1242713994964830615');" onmouseout="out('-1242713994964830615');" style=""> 611                     checkField:                                                                          </span>
<span class="5677081435180812955" onmouseenter="enter('5677081435180812955');" onmouseout="out('5677081435180812955');" style=""> 612                     {                                                                                    </span>
<span class="-358387007955156467" onmouseenter="enter('-358387007955156467');" onmouseout="out('-358387007955156467');" style=""> 613                         if (isFieldAccessible) {                                                         </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 614                             Property propertyItem = new Property();                                      </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 615                             propertyItem.setName(property);                                              </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 616                             if (props.contains(propertyItem)) {                                          </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 617                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618                             }                                                                            </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 619                             props.add(propertyItem);                                                     </span>
<span class="4812619489526695632" onmouseenter="enter('4812619489526695632');" onmouseout="out('4812619489526695632');" style=""> 620                             String displayVal = propertyItem.getDisplayValue();                          </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 621                             boolean handled = false;                                                     </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 622                             for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 622                             for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProvðŸ”µ</abbr></span>
<span class="-6209348320960420357" onmouseenter="enter('-6209348320960420357');" onmouseout="out('-6209348320960420357');" style=""><abbr title=" 623                                 MetadataProviderResponse response = fieldPersistenceProvider.extractValue("> 623                                 MetadataProviderResponse response = fieldPersistenceProvider.extractValueðŸ”µ</abbr></span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""><abbr title=" 624                                         new ExtractValueRequest(props, fieldManager, metadata, value, displayVal,"> 624                                         new ExtractValueRequest(props, fieldManager, metadata, value, disðŸ”µ</abbr></span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""><abbr title=" 625                                                 persistenceManager, this, entity, customCriteria), propertyItem);"> 625                                                 persistenceManager, this, entity, customCriteria), properðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 626                                 if (MetadataProviderResponse.NOT_HANDLED != response) {                  </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 627                                     handled = true;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628                                 }                                                                        </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 629                                 if (MetadataProviderResponse.HANDLED_BREAK == response) {                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 630                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 632                             }                                                                            </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 633                             if (!handled) {                                                              </span>
<span class="5660532463858602467" onmouseenter="enter('5660532463858602467');" onmouseout="out('5660532463858602467');" style=""> 634                                 defaultFieldPersistenceProvider.extractValue(                            </span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""><abbr title=" 635                                         new ExtractValueRequest(props, fieldManager, metadata, value, displayVal,"> 635                                         new ExtractValueRequest(props, fieldManager, metadata, value, disðŸ”µ</abbr></span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""><abbr title=" 636                                                 persistenceManager, this, entity, customCriteria), propertyItem);"> 636                                                 persistenceManager, this, entity, customCriteria), properðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 637                             }                                                                            </span>
<span class="-6426908400831293887" onmouseenter="enter('-6426908400831293887');" onmouseout="out('-6426908400831293887');" style=""> 638                             break checkField;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 639                         }                                                                                </span>
<span class="-243574896110033323" onmouseenter="enter('-243574896110033323');" onmouseout="out('-243574896110033323');" style=""> 640                         //try a direct property acquisition via reflection                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 641                         try {                                                                            </span>
<span class="7672623756603956505" onmouseenter="enter('7672623756603956505');" onmouseout="out('7672623756603956505');" style=""> 642                             String strVal = null;                                                        </span>
<span class="3529628081213965373" onmouseenter="enter('3529628081213965373');" onmouseout="out('3529628081213965373');" style=""> 643                             Method method;                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 644                             try {                                                                        </span>
<span class="-188265031890242666" onmouseenter="enter('-188265031890242666');" onmouseout="out('-188265031890242666');" style=""> 645                                 //try a &#x27;get&#x27; prefixed mutator first                                     </span>
<span class="2344864789387251771" onmouseenter="enter('2344864789387251771');" onmouseout="out('2344864789387251771');" style=""><abbr title=" 646                                 String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.substring(1, property.length());"> 646                                 String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.sðŸ”µ</abbr></span>
<span class="6434236432742156955" onmouseenter="enter('6434236432742156955');" onmouseout="out('6434236432742156955');" style=""> 647                                 method = entity.getClass().getMethod(temp, new Class[] {});              </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 648                             } catch (NoSuchMethodException e) {                                          </span>
<span class="5628920111567796624" onmouseenter="enter('5628920111567796624');" onmouseout="out('5628920111567796624');" style=""> 649                                 method = entity.getClass().getMethod(property, new Class[] {});          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650                             }                                                                            </span>
<span class="-1268801467547302511" onmouseenter="enter('-1268801467547302511');" onmouseout="out('-1268801467547302511');" style=""> 651                             value = method.invoke(entity, new String[] {});                              </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 652                             Property propertyItem = new Property();                                      </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 653                             propertyItem.setName(property);                                              </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 654                             if (props.contains(propertyItem)) {                                          </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 655                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 656                             }                                                                            </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 657                             props.add(propertyItem);                                                     </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 658                             if (value == null) {                                                         </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 659                                 strVal = null;                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 660                             } else {                                                                     </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 661                                 if (Date.class.isAssignableFrom(value.getClass())) {                     </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 662                                     strVal = getSimpleDateFormatter().format((Date) value);              </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 663                                 } else if (Timestamp.class.isAssignableFrom(value.getClass())) {         </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""><abbr title=" 664                                     strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));"> 664                                     strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value)ðŸ”µ</abbr></span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 665                                 } else if (Calendar.class.isAssignableFrom(value.getClass())) {          </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""><abbr title=" 666                                     strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());"> 666                                     strVal = getSimpleDateFormatter().format(((Calendar) value).getTime()ðŸ”µ</abbr></span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 667                                 } else if (Double.class.isAssignableFrom(value.getClass())) {            </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 668                                     strVal = getDecimalFormatter().format(value);                        </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 669                                 } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {        </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 670                                     strVal = getDecimalFormatter().format(value);                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 671                                 } else {                                                                 </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 672                                     strVal = value.toString();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 673                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674                             }                                                                            </span>
<span class="-430028306468799565" onmouseenter="enter('-430028306468799565');" onmouseout="out('-430028306468799565');" style=""> 675                             propertyItem.setValue(strVal);                                               </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 676                         } catch (NoSuchMethodException e) {                                              </span>
<span class="8429567218540762891" onmouseenter="enter('8429567218540762891');" onmouseout="out('8429567218540762891');" style=""><abbr title=" 677                             LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(property));"> 677                             LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.ðŸ”µ</abbr></span>
<span class="4115063574789816242" onmouseenter="enter('4115063574789816242');" onmouseout="out('4115063574789816242');" style=""> 678                             //do nothing - this property is simply not in the bean                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 682             }                                                                                            </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 683         } catch (ClassNotFoundException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 684             throw new PersistenceException(e);                                                           </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 685         } catch (IllegalAccessException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 686             throw new PersistenceException(e);                                                           </span>
<span class="-291101072954915259" onmouseenter="enter('-291101072954915259');" onmouseout="out('-291101072954915259');" style=""> 687         } catch (InvocationTargetException e) {                                                          </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 688             throw new PersistenceException(e);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690     }                                                                                                    </span>
<span  style=""> 691                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 692     @Override                                                                                            </span>
<span class="-6161842232508714198" onmouseenter="enter('-6161842232508714198');" onmouseout="out('-6161842232508714198');" style=""> 693     public String getStringValueFromGetter(Serializable instance, String propertyName)                   </span>
<span class="1769827535532852924" onmouseenter="enter('1769827535532852924');" onmouseout="out('1769827535532852924');" style=""> 694             throws IllegalAccessException, InvocationTargetException, NoSuchMethodException {            </span>
<span class="5278483549685517830" onmouseenter="enter('5278483549685517830');" onmouseout="out('5278483549685517830');" style=""> 695         Object value = PropertyUtils.getProperty(instance, propertyName);                                </span>
<span class="-6587533849078029241" onmouseenter="enter('-6587533849078029241');" onmouseout="out('-6587533849078029241');" style=""> 696         return formatValue(value);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 697     }                                                                                                    </span>
<span  style=""> 698                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 699     @Override                                                                                            </span>
<span class="1304124062790730283" onmouseenter="enter('1304124062790730283');" onmouseout="out('1304124062790730283');" style=""> 700     public String formatValue(Object value) {                                                            </span>
<span class="5239272094010467374" onmouseenter="enter('5239272094010467374');" onmouseout="out('5239272094010467374');" style=""> 701         String strVal;                                                                                   </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 702         if (value == null) {                                                                             </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 703             strVal = null;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 704         } else {                                                                                         </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 705             if (Date.class.isAssignableFrom(value.getClass())) {                                         </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 706                 strVal = getSimpleDateFormatter().format((Date) value);                                  </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 707             } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                             </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""> 708                 strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));       </span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 709             } else if (Calendar.class.isAssignableFrom(value.getClass())) {                              </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 710                 strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());                  </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 711             } else if (Double.class.isAssignableFrom(value.getClass())) {                                </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 712                 strVal = getDecimalFormatter().format(value);                                            </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 713             } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                            </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 714                 strVal = getDecimalFormatter().format(value);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 715             } else {                                                                                     </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 716                 strVal = value.toString();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718         }                                                                                                </span>
<span class="3782478248632503544" onmouseenter="enter('3782478248632503544');" onmouseout="out('3782478248632503544');" style=""> 719         return strVal;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720     }                                                                                                    </span>
<span  style=""> 721                                                                                                          </span>
<span class="1185233632623235579" onmouseenter="enter('1185233632623235579');" onmouseout="out('1185233632623235579');" style=""><abbr title=" 722     protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntity) throws ServiceException {"> 722     protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean incluðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 723         EntityResult entityResult = new EntityResult();                                                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 724         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 725         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title=" 726         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);"> 726         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style=""> 727         if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                            </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 728             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 729         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 730         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 731             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 731             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 732             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 732             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style=""> 733                     persistencePackage.getCeilingEntityFullyQualifiedClassname(),                        </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 734                     entities,                                                                            </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style=""> 735                     foreignKey,                                                                          </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 736                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 737                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 738                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 739                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 740                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 741                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 742                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 743                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 744                     );                                                                                   </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 745             if (primaryKey == null) {                                                                    </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style=""> 746                 primaryKey = getPrimaryKey(entity, mergedProperties);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 747             }                                                                                            </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title=" 748             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);"> 748             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entitðŸ”µ</abbr></span>
<span  style=""> 749                                                                                                          </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style=""> 750             Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                         </span>
<span  style=""> 751                                                                                                          </span>
<span class="861834480888806983" onmouseenter="enter('861834480888806983');" onmouseout="out('861834480888806983');" style=""> 752             if (!entity.isValidationFailure()) {                                                         </span>
<span class="-6661343286258909963" onmouseenter="enter('-6661343286258909963');" onmouseout="out('-6661343286258909963');" style=""> 753                 //Re-Balance the list if it is a Foreign Key toMany collection with a sort field property</span>
<span class="4247210219521112592" onmouseenter="enter('4247210219521112592');" onmouseout="out('4247210219521112592');" style=""> 754                 if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null &amp;&amp;                           </span>
<span class="235375556032951584" onmouseenter="enter('235375556032951584');" onmouseout="out('235375556032951584');" style=""> 755                         entity.findProperty(foreignKey.getSortField()) != null &amp;&amp;                        </span>
<span class="7175038170339042705" onmouseenter="enter('7175038170339042705');" onmouseout="out('7175038170339042705');" style=""> 756                         entity.findProperty(foreignKey.getSortField()).getValue() != null) {             </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""><abbr title=" 757                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();"> 757                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;(ðŸ”µ</abbr></span>
<span class="5598129937237964517" onmouseenter="enter('5598129937237964517');" onmouseout="out('5598129937237964517');" style=""> 758                     extensionManager.getProxy().rebalanceForUpdate(this, persistencePackage, instance,   </span>
<span class="4380637637969964834" onmouseenter="enter('4380637637969964834');" onmouseout="out('4380637637969964834');" style=""> 759                             mergedProperties, primaryKey, result);                                       </span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style=""> 760                     instance = result.getResult();                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 761                 } else {                                                                                 </span>
<span class="5297856757316311321" onmouseenter="enter('5297856757316311321');" onmouseout="out('5297856757316311321');" style=""><abbr title=" 762                     instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackage.isValidateUnsubmittedProperties());"> 762                     instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763                 }                                                                                        </span>
<span  style=""> 764                                                                                                          </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 765                 instance = persistenceManager.getDynamicEntityDao().merge(instance);                     </span>
<span class="-1264761314664469309" onmouseenter="enter('-1264761314664469309');" onmouseout="out('-1264761314664469309');" style=""> 766                 if (includeRealEntity) {                                                                 </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style=""> 767                     entityResult.setEntityBackingObject(instance);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768                 }                                                                                        </span>
<span  style=""> 769                                                                                                          </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 770                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 771                 entityList.add(instance);                                                                </span>
<span  style=""> 772                                                                                                          </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style=""> 773                 entity = getRecords(mergedProperties, entityList, null, null, null)[0];                  </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 774                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 775                 return entityResult;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 776             } else {                                                                                     </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 777                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 778                 return entityResult;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 779             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 780         } catch (Exception e) {                                                                          </span>
<span class="-3425838462618159609" onmouseenter="enter('-3425838462618159609');" onmouseout="out('-3425838462618159609');" style=""> 781             throw new ServiceException(&quot;Problem updating entity : &quot; + e.getMessage(), e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 783     }                                                                                                    </span>
<span  style=""> 784                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 785     @Override                                                                                            </span>
<span class="6684144434931310538" onmouseenter="enter('6684144434931310538');" onmouseout="out('6684144434931310538');" style=""> 786     public String getIdPropertyName(String entityClass) {                                                </span>
<span class="7569829358594867468" onmouseenter="enter('7569829358594867468');" onmouseout="out('7569829358594867468');" style=""> 787         return persistenceManager.getIdPropertyName(entityClass);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 788     }                                                                                                    </span>
<span  style=""> 789                                                                                                          </span>
<span class="7385985390784408317" onmouseenter="enter('7385985390784408317');" onmouseout="out('7385985390784408317');" style=""> 790     public String getIdPropertyName(Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {             </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 791         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 791         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 792         for (String property : mergedProperties.keySet()) {                                              </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 793             BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);               </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 794             if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {               </span>
<span class="6489038301515904267" onmouseenter="enter('6489038301515904267');" onmouseout="out('6489038301515904267');" style=""> 795                 return property;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 797         }                                                                                                </span>
<span  style=""> 798                                                                                                          </span>
<span class="8030319575516697150" onmouseenter="enter('8030319575516697150');" onmouseout="out('8030319575516697150');" style=""><abbr title=" 799         throw new RuntimeException(&quot;Could not find a primary key property in the passed merged properties list&quot;);"> 799         throw new RuntimeException(&quot;Could not find a primary key property in the passed merged propertiesðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 800     }                                                                                                    </span>
<span  style=""> 801                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 802     @Override                                                                                            </span>
<span class="7601553640468247936" onmouseenter="enter('7601553640468247936');" onmouseout="out('7601553640468247936');" style=""> 803     public Object getPrimaryKey(Entity entity, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {  </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 804         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 804         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style=""> 805         Object primaryKey = null;                                                                        </span>
<span class="-4343749490203255033" onmouseenter="enter('-4343749490203255033');" onmouseout="out('-4343749490203255033');" style=""> 806         String idPropertyName = null;                                                                    </span>
<span class="-1032829863063040815" onmouseenter="enter('-1032829863063040815');" onmouseout="out('-1032829863063040815');" style=""> 807         BasicFieldMetadata metaData = null;                                                              </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 808         for (String property : mergedProperties.keySet()) {                                              </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 809             BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);               </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 810             if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {               </span>
<span class="4480138875282582699" onmouseenter="enter('4480138875282582699');" onmouseout="out('4480138875282582699');" style=""> 811                 idPropertyName = property;                                                               </span>
<span class="-6207089020080563293" onmouseenter="enter('-6207089020080563293');" onmouseout="out('-6207089020080563293');" style=""> 812                 metaData = temp;                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 813                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815         }                                                                                                </span>
<span class="-4447124933950039126" onmouseenter="enter('-4447124933950039126');" onmouseout="out('-4447124933950039126');" style=""> 816         if (idPropertyName == null) {                                                                    </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title=" 817             throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);"> 817             throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with tðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818         }                                                                                                </span>
<span class="-5346955267205588229" onmouseenter="enter('-5346955267205588229');" onmouseout="out('-5346955267205588229');" style=""> 819         for (Property property : entity.getProperties()) {                                               </span>
<span class="7886586292686555176" onmouseenter="enter('7886586292686555176');" onmouseout="out('7886586292686555176');" style=""> 820             if (property.getName().equals(idPropertyName)) {                                             </span>
<span class="2464652692956328654" onmouseenter="enter('2464652692956328654');" onmouseout="out('2464652692956328654');" style=""> 821                 switch (metaData.getSecondaryType()) {                                                   </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 822                     case INTEGER:                                                                        </span>
<span class="-6121369465424712252" onmouseenter="enter('-6121369465424712252');" onmouseout="out('-6121369465424712252');" style=""><abbr title=" 823                         primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValue());"> 823                         primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValuðŸ”µ</abbr></span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 824                         break;                                                                           </span>
<span class="6509618406235281730" onmouseenter="enter('6509618406235281730');" onmouseout="out('6509618406235281730');" style=""> 825                     case STRING:                                                                         </span>
<span class="1585063350949159261" onmouseenter="enter('1585063350949159261');" onmouseout="out('1585063350949159261');" style=""> 826                         primaryKey = property.getValue();                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 827                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 828                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 829                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 831         }                                                                                                </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 832         if (primaryKey == null) {                                                                        </span>
<span class="586132424145349171" onmouseenter="enter('586132424145349171');" onmouseout="out('586132424145349171');" style=""><abbr title=" 833             throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) in the passed entity with type: &quot; + entity.getType()[0]);"> 833             throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 834         }                                                                                                </span>
<span class="445877428068937777" onmouseenter="enter('445877428068937777');" onmouseout="out('445877428068937777');" style=""> 835         return primaryKey;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 836     }                                                                                                    </span>
<span  style=""> 837                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 838     @Override                                                                                            </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 839     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,          </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 840             CriteriaTransferObject cto,                                                                  </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 841             String ceilingEntityFullyQualifiedClassname,                                                 </span>
<span class="-8254447054846048089" onmouseenter="enter('-8254447054846048089');" onmouseout="out('-8254447054846048089');" style=""> 842             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties,                                       </span>
<span class="3731877525338754789" onmouseenter="enter('3731877525338754789');" onmouseout="out('3731877525338754789');" style=""> 843             RestrictionFactory customRestrictionFactory) {                                               </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 844         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 844         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="5454417750033935999" onmouseenter="enter('5454417750033935999');" onmouseout="out('5454417750033935999');" style=""> 845         List&lt;FilterMapping&gt; filterMappings = new ArrayList&lt;FilterMapping&gt;();                             </span>
<span  style=""> 846                                                                                                          </span>
<span class="5160955752092959572" onmouseenter="enter('5160955752092959572');" onmouseout="out('5160955752092959572');" style=""> 847         for (String propertyId : cto.getCriteriaMap().keySet()) {                                        </span>
<span class="4532640545066977906" onmouseenter="enter('4532640545066977906');" onmouseout="out('4532640545066977906');" style=""> 848             if (mergedProperties.containsKey(propertyId)) {                                              </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 849                 boolean handled = false;                                                                 </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 850                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {    </span>
<span class="-6114175924026036851" onmouseenter="enter('-6114175924026036851');" onmouseout="out('-6114175924026036851');" style=""> 851                     MetadataProviderResponse response = fieldPersistenceProvider.addSearchMapping(       </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 852                             new AddSearchMappingRequest(persistencePerspective, cto,                     </span>
<span class="5810135378246725068" onmouseenter="enter('5810135378246725068');" onmouseout="out('5810135378246725068');" style=""> 853                                     ceilingEntityFullyQualifiedClassname, mergedProperties,              </span>
<span class="5077524350528682045" onmouseenter="enter('5077524350528682045');" onmouseout="out('5077524350528682045');" style=""><abbr title=" 854                                     propertyId, getFieldManager(), this, this, customRestrictionFactory==null?restrictionFactory"> 854                                     propertyId, getFieldManager(), this, this, customRestrictionFactory==ðŸ”µ</abbr></span>
<span class="6427059933663878801" onmouseenter="enter('6427059933663878801');" onmouseout="out('6427059933663878801');" style=""> 855                                     :customRestrictionFactory), filterMappings);                         </span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 856                     if (MetadataProviderResponse.NOT_HANDLED != response) {                              </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 857                         handled = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 858                     }                                                                                    </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 859                     if (MetadataProviderResponse.HANDLED_BREAK == response) {                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 860                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 861                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 862                 }                                                                                        </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 863                 if (!handled) {                                                                          </span>
<span class="8038403104028382935" onmouseenter="enter('8038403104028382935');" onmouseout="out('8038403104028382935');" style=""> 864                     defaultFieldPersistenceProvider.addSearchMapping(                                    </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 865                             new AddSearchMappingRequest(persistencePerspective, cto,                     </span>
<span class="-1188580278753724323" onmouseenter="enter('-1188580278753724323');" onmouseout="out('-1188580278753724323');" style=""> 866                                     ceilingEntityFullyQualifiedClassname, mergedProperties, propertyId,  </span>
<span class="-6646794478608592484" onmouseenter="enter('-6646794478608592484');" onmouseout="out('-6646794478608592484');" style=""><abbr title=" 867                                     getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFactory"> 867                                     getFieldManager(), this, this, customRestrictionFactory == null ? resðŸ”µ</abbr></span>
<span class="878086898277429379" onmouseenter="enter('878086898277429379');" onmouseout="out('878086898277429379');" style=""> 868                                             : customRestrictionFactory), filterMappings);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871         }                                                                                                </span>
<span class="-1900027260049794739" onmouseenter="enter('-1900027260049794739');" onmouseout="out('-1900027260049794739');" style=""> 872         return filterMappings;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 873     }                                                                                                    </span>
<span  style=""> 874                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 875     @Override                                                                                            </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 876     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,          </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 877             CriteriaTransferObject cto,                                                                  </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 878             String ceilingEntityFullyQualifiedClassname,                                                 </span>
<span class="-8055727947789817499" onmouseenter="enter('-8055727947789817499');" onmouseout="out('-8055727947789817499');" style=""> 879             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                                     </span>
<span class="81017552378868833" onmouseenter="enter('81017552378868833');" onmouseout="out('81017552378868833');" style=""><abbr title=" 880         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilteredProperties, null);"> 880         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881     }                                                                                                    </span>
<span  style=""> 882                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 883     @Override                                                                                            </span>
<span class="897240738537618425" onmouseenter="enter('897240738537618425');" onmouseout="out('897240738537618425');" style=""><abbr title=" 884     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; mergedProperties, List&lt;Property&gt; properties) {"> 884     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMeðŸ”µ</abbr></span>
<span class="-5864020654264554558" onmouseenter="enter('-5864020654264554558');" onmouseout="out('-5864020654264554558');" style=""><abbr title=" 885         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), properties, false, MergedPropertyType.PRIMARY);"> 885         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 886     }                                                                                                    </span>
<span  style=""> 887                                                                                                          </span>
<span class="203860492987878792" onmouseenter="enter('203860492987878792');" onmouseout="out('203860492987878792');" style=""><abbr title=" 888     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedProperties, List&lt;Property&gt; properties, Boolean isHiddenOverride, MergedPropertyType type) {"> 888     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mðŸ”µ</abbr></span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style=""> 889         Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                                   </span>
<span  style=""> 890                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 891             @Override                                                                                    </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 892             public int compare(Property o1, Property o2) {                                               </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style=""> 893                 return o1.getName().compareTo(o2.getName());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 894             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 895         };                                                                                               </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 896 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-6235585592219807242" onmouseenter="enter('-6235585592219807242');" onmouseout="out('-6235585592219807242');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 897         properties.sort(comparator);                                                                     </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 898                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 899 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 900                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 901             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 902         }                                                                                                </span>
<span class="-1900027260049794739" onmouseenter="enter('-1900027260049794739');" onmouseout="out('-1900027260049794739');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 903         return filterMappings;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 904     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 905                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 906     @Override                                                                                            </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 907     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,          </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 908             CriteriaTransferObject cto,                                                                  </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 909             String ceilingEntityFullyQualifiedClassname,                                                 </span>
<span class="-8055727947789817499" onmouseenter="enter('-8055727947789817499');" onmouseout="out('-8055727947789817499');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 910             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                                     </span>
<span class="81017552378868833" onmouseenter="enter('81017552378868833');" onmouseout="out('81017552378868833');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 911         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilteredProperties, null);"> 911         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 912     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 913                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 914     @Override                                                                                            </span>
<span class="897240738537618425" onmouseenter="enter('897240738537618425');" onmouseout="out('897240738537618425');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 915     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; mergedProperties, List&lt;Property&gt; properties) {"> 915     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMeðŸ”µ</abbr></span>
<span class="-5864020654264554558" onmouseenter="enter('-5864020654264554558');" onmouseout="out('-5864020654264554558');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 916         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), properties, false, MergedPropertyType.PRIMARY);"> 916         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 917     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 918                                                                                                          </span>
<span class="203860492987878792" onmouseenter="enter('203860492987878792');" onmouseout="out('203860492987878792');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 919     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedProperties, List&lt;Property&gt; properties, Boolean isHiddenOverride, MergedPropertyType type) {"> 919     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mðŸ”µ</abbr></span>
<span class="-2434831074249628531" onmouseenter="enter('-2434831074249628531');" onmouseout="out('-2434831074249628531');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 920         for (Map.Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 921             String property = entry.getKey();                                                            </span>
<span class="-231152183806873874" onmouseenter="enter('-231152183806873874');" onmouseout="out('-231152183806873874');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 922             Property prop = new Property();                                                              </span>
<span class="-3770108933014957253" onmouseenter="enter('-3770108933014957253');" onmouseout="out('-3770108933014957253');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 923             FieldMetadata metadata = mergedProperties.get(property);                                     </span>
<span class="-6395393149471547560" onmouseenter="enter('-6395393149471547560');" onmouseout="out('-6395393149471547560');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 924             prop.setName(property);                                                                      </span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 925             Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 926                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 927                 @Override                                                                                </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 928 =======                                                                                                  </span>
<span class="-7612884103774291324" onmouseenter="enter('-7612884103774291324');" onmouseout="out('-7612884103774291324');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 929         Collections.sort(properties, comparator);                                                        </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 930 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-2434831074249628531" onmouseenter="enter('-2434831074249628531');" onmouseout="out('-2434831074249628531');" style=""> 931         for (Map.Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 932             String property = entry.getKey();                                                            </span>
<span class="-231152183806873874" onmouseenter="enter('-231152183806873874');" onmouseout="out('-231152183806873874');" style=""> 933             Property prop = new Property();                                                              </span>
<span class="-3770108933014957253" onmouseenter="enter('-3770108933014957253');" onmouseout="out('-3770108933014957253');" style=""> 934             FieldMetadata metadata = mergedProperties.get(property);                                     </span>
<span class="-6395393149471547560" onmouseenter="enter('-6395393149471547560');" onmouseout="out('-6395393149471547560');" style=""> 935             prop.setName(property);                                                                      </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 936 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 937 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 938     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,          </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 939             CriteriaTransferObject cto,                                                                  </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 940             String ceilingEntityFullyQualifiedClassname,                                                 </span>
<span class="-8055727947789817499" onmouseenter="enter('-8055727947789817499');" onmouseout="out('-8055727947789817499');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 941             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                                     </span>
<span class="81017552378868833" onmouseenter="enter('81017552378868833');" onmouseout="out('81017552378868833');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 942         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilteredProperties, null);"> 942         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 943     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 944                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 945     @Override                                                                                            </span>
<span class="897240738537618425" onmouseenter="enter('897240738537618425');" onmouseout="out('897240738537618425');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 946     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; mergedProperties, List&lt;Property&gt; properties) {"> 946     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMeðŸ”µ</abbr></span>
<span class="-5864020654264554558" onmouseenter="enter('-5864020654264554558');" onmouseout="out('-5864020654264554558');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 947         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), properties, false, MergedPropertyType.PRIMARY);"> 947         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 948     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 949                                                                                                          </span>
<span class="203860492987878792" onmouseenter="enter('203860492987878792');" onmouseout="out('203860492987878792');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 950     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedProperties, List&lt;Property&gt; properties, Boolean isHiddenOverride, MergedPropertyType type) {"> 950     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mðŸ”µ</abbr></span>
<span class="-2434831074249628531" onmouseenter="enter('-2434831074249628531');" onmouseout="out('-2434831074249628531');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 951         for (Map.Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 952             String property = entry.getKey();                                                            </span>
<span class="-231152183806873874" onmouseenter="enter('-231152183806873874');" onmouseout="out('-231152183806873874');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 953             Property prop = new Property();                                                              </span>
<span class="-3770108933014957253" onmouseenter="enter('-3770108933014957253');" onmouseout="out('-3770108933014957253');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 954             FieldMetadata metadata = mergedProperties.get(property);                                     </span>
<span class="-6395393149471547560" onmouseenter="enter('-6395393149471547560');" onmouseout="out('-6395393149471547560');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 955             prop.setName(property);                                                                      </span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 956             Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 957                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 958                 @Override                                                                                </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 959                 public int compare(Property o1, Property o2) {                                           </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 960                     return o1.getName().compareTo(o2.getName());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 961                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 962             };                                                                                           </span>
<span class="-7612884103774291324" onmouseenter="enter('-7612884103774291324');" onmouseout="out('-7612884103774291324');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 963             Collections.sort(properties, comparator);                                                    </span>
<span class="-2139676366648139964" onmouseenter="enter('-2139676366648139964');" onmouseout="out('-2139676366648139964');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 964             int pos = Collections.binarySearch(properties, prop, comparator);                            </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 965 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 966                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 967 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-2139676366648139964" onmouseenter="enter('-2139676366648139964');" onmouseout="out('-2139676366648139964');" style=""> 968             int pos = Collections.binarySearch(properties, prop, comparator);                            </span>
<span class="-2417851046359094762" onmouseenter="enter('-2417851046359094762');" onmouseout="out('-2417851046359094762');" style=""><abbr title=" 969             if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREVALUE != type) {"> 969             if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREðŸ”µ</abbr></span>
<span class="-1490193869050628697" onmouseenter="enter('-1490193869050628697');" onmouseout="out('-1490193869050628697');" style=""> 970                 logWarn: {                                                                               </span>
<span class="5327179807238785116" onmouseenter="enter('5327179807238785116');" onmouseout="out('5327179807238785116');" style=""><abbr title=" 971                     if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadata) metadata).getFieldType())) {"> 971                     if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFðŸ”µ</abbr></span>
<span class="6221076133691521085" onmouseenter="enter('6221076133691521085');" onmouseout="out('6221076133691521085');" style=""> 972                         //don&#x27;t warn for id field collisions, but still ignore the colliding fields      </span>
<span class="1303890499227207840" onmouseenter="enter('1303890499227207840');" onmouseout="out('1303890499227207840');" style=""> 973                         break logWarn;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 974                     }                                                                                    </span>
<span class="-3406896845088854457" onmouseenter="enter('-3406896845088854457');" onmouseout="out('-3406896845088854457');" style=""><abbr title=" 975                     //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + &quot;) during inspection for the inheritance line starting with (&quot; + inheritanceLine[0].getName() + &quot;). Ignoring the additional field. This can occur most commonly when using the @AdminPresentationAdornedTargetCollection and the collection type and target class have field names in common. This situation should be avoided, as the system will strip the repeated fields, which can cause unpredictable behavior.&quot;);"> 975                     //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + prðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 976                 }                                                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 977                 continue;                                                                                </span>
<span class="5067330164177088761" onmouseenter="enter('5067330164177088761');" onmouseout="out('5067330164177088761');" style=""> 978             } else if (pos &lt; 0) {                                                                        </span>
<span class="-8221812243074404132" onmouseenter="enter('-8221812243074404132');" onmouseout="out('-8221812243074404132');" style=""> 979                 pos = -pos - 1; // calculate position to insert                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 980             }                                                                                            </span>
<span class="2534204392443089313" onmouseenter="enter('2534204392443089313');" onmouseout="out('2534204392443089313');" style=""> 981             properties.add(pos, prop);                                                                   </span>
<span class="-4762622463962141865" onmouseenter="enter('-4762622463962141865');" onmouseout="out('-4762622463962141865');" style=""> 982             prop.setMetadata(metadata);                                                                  </span>
<span class="-6199017505159175940" onmouseenter="enter('-6199017505159175940');" onmouseout="out('-6199017505159175940');" style=""> 983             if (isHiddenOverride &amp;&amp; prop.getMetadata() instanceof BasicFieldMetadata) {                  </span>
<span class="-7685654662722475773" onmouseenter="enter('-7685654662722475773');" onmouseout="out('-7685654662722475773');" style=""> 984                 //this only makes sense for non collection types                                         </span>
<span class="-763482179748503913" onmouseenter="enter('-763482179748503913');" onmouseout="out('-763482179748503913');" style=""> 985                 ((BasicFieldMetadata) prop.getMetadata()).setVisibility(VisibilityEnum.HIDDEN_ALL);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 986             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 987         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 988     }                                                                                                    </span>
<span  style=""> 989                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 990     @Override                                                                                            </span>
<span class="-1145456305415279084" onmouseenter="enter('-1145456305415279084');" onmouseout="out('-1145456305415279084');" style=""><abbr title=" 991     public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; allMergedProperties) throws ServiceException {"> 991     public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, MapðŸ”µ</abbr></span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title=" 992         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();"> 992         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 993         try {                                                                                            </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""><abbr title=" 994             PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();"> 994             PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective(ðŸ”µ</abbr></span>
<span class="3509784211613018298" onmouseenter="enter('3509784211613018298');" onmouseout="out('3509784211613018298');" style=""><abbr title=" 995             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClassname);"> 995             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 996             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 996             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style=""> 997                     ceilingEntityFullyQualifiedClassname,                                                </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 998                     entities,                                                                            </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title=" 999                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),"> 999                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1000                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1001                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1002                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1003                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1004                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1005                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1006                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1007                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1008                     );                                                                                   </span>
<span class="3843057087083113739" onmouseenter="enter('3843057087083113739');" onmouseout="out('3843057087083113739');" style="">1009             allMergedProperties.put(MergedPropertyType.PRIMARY, mergedProperties);                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1010         } catch (Exception e) {                                                                          </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1011             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1011             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1012         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013     }                                                                                                    </span>
<span  style="">1014                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1015     @Override                                                                                            </span>
<span class="-4783803183233062984" onmouseenter="enter('-4783803183233062984');" onmouseout="out('-4783803183233062984');" style=""><abbr title="1016     public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {">1016     public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) thðŸ”µ</abbr></span>
<span class="-5998034243161331810" onmouseenter="enter('-5998034243161331810');" onmouseout="out('-5998034243161331810');" style="">1017         return update(persistencePackage, null, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1018     }                                                                                                    </span>
<span  style="">1019                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1020     @Override                                                                                            </span>
<span class="-2807508720531838872" onmouseenter="enter('-2807508720531838872');" onmouseout="out('-2807508720531838872');" style="">1021     public Entity update(PersistencePackage persistencePackage) throws ServiceException {                </span>
<span class="-5671722244832067224" onmouseenter="enter('-5671722244832067224');" onmouseout="out('-5671722244832067224');" style="">1022         EntityResult er = update(persistencePackage, null, false);                                       </span>
<span class="-4364232546893819072" onmouseenter="enter('-4364232546893819072');" onmouseout="out('-4364232546893819072');" style="">1023         return er.getEntity();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1024     }                                                                                                    </span>
<span  style="">1025                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1026     @Override                                                                                            </span>
<span class="6001696775937434965" onmouseenter="enter('6001696775937434965');" onmouseout="out('6001696775937434965');" style="">1027     public Entity add(PersistencePackage persistencePackage) throws ServiceException {                   </span>
<span class="-7059200088088645842" onmouseenter="enter('-7059200088088645842');" onmouseout="out('-7059200088088645842');" style="">1028         EntityResult entityResult = add(persistencePackage, false);                                      </span>
<span class="2936146364192771277" onmouseenter="enter('2936146364192771277');" onmouseout="out('2936146364192771277');" style="">1029         return entityResult.getEntity();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1030     }                                                                                                    </span>
<span  style="">1031                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1032     @Override                                                                                            </span>
<span class="7079650910076086428" onmouseenter="enter('7079650910076086428');" onmouseout="out('7079650910076086428');" style=""><abbr title="1033     public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {">1033     public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throwðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style="">1034         EntityResult entityResult = new EntityResult();                                                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1035         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1036         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1037         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1037         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1038         if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                            </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1039             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1040         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1041         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1042             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1042             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1043             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1043             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDaðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1044                     persistencePackage.getCeilingEntityFullyQualifiedClassname(),                        </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1045                     entities,                                                                            </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1046                     foreignKey,                                                                          </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1047                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1048                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1049                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1050                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1051                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1052                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1053                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1054                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1055                     );                                                                                   </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title="1056             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);">1056             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProðŸ”µ</abbr></span>
<span  style="">1057                                                                                                          </span>
<span class="-4432713425684374872" onmouseenter="enter('-4432713425684374872');" onmouseout="out('-4432713425684374872');" style="">1058             String idProperty = null;                                                                    </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style="">1059             for (String property : mergedProperties.keySet()) {                                          </span>
<span class="-2221369290108753372" onmouseenter="enter('-2221369290108753372');" onmouseout="out('-2221369290108753372');" style=""><abbr title="1060                 if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFieldType.ID) {">1060                 if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFielðŸ”µ</abbr></span>
<span class="-5524453042327008702" onmouseenter="enter('-5524453042327008702');" onmouseout="out('-5524453042327008702');" style="">1061                     idProperty = property;                                                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1062                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064             }                                                                                            </span>
<span class="1924041731168261447" onmouseenter="enter('1924041731168261447');" onmouseout="out('1924041731168261447');" style="">1065             if (idProperty == null) {                                                                    </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title="1066                 throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);">1066                 throw new RuntimeException(&quot;Could not find a primary key property in the passed entity wiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1067             }                                                                                            </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style="">1068             Object primaryKey = null;                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1069             try {                                                                                        </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style="">1070                 primaryKey = getPrimaryKey(entity, mergedProperties);                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1071             } catch (Exception e) {                                                                      </span>
<span class="-2276199612445624795" onmouseenter="enter('-2276199612445624795');" onmouseout="out('-2276199612445624795');" style="">1072                 //don&#x27;t do anything - this is a valid case                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1073             }                                                                                            </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style="">1074             if (primaryKey == null) {                                                                    </span>
<span  style="">1075                                                                                                          </span>
<span class="-425360514461332458" onmouseenter="enter('-425360514461332458');" onmouseout="out('-425360514461332458');" style="">1076                 Serializable instance = (Serializable) Class.forName(entity.getType()[0]).newInstance(); </span>
<span  style="">1077                                                                                                          </span>
<span class="-2986273728837208353" onmouseenter="enter('-2986273728837208353');" onmouseout="out('-2986273728837208353');" style="">1078                 instance = createPopulatedInstance(instance, entity, mergedProperties, false);           </span>
<span  style="">1079                                                                                                          </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1080                 if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                           </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""><abbr title="1081                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();">1081                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;(ðŸ”µ</abbr></span>
<span class="1481560234407270538" onmouseenter="enter('1481560234407270538');" onmouseout="out('1481560234407270538');" style=""><abbr title="1082                     extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedProperties, result);">1082                     extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergeðŸ”µ</abbr></span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style="">1083                     instance = result.getResult();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084                 }                                                                                        </span>
<span  style="">1085                                                                                                          </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1086                 instance = persistenceManager.getDynamicEntityDao().merge(instance);                     </span>
<span class="7937797480137547171" onmouseenter="enter('7937797480137547171');" onmouseout="out('7937797480137547171');" style="">1087                 if (includeRealEntityObject) {                                                           </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style="">1088                     entityResult.setEntityBackingObject(instance);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1089                 }                                                                                        </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style="">1090                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style="">1091                 entityList.add(instance);                                                                </span>
<span  style="">1092                                                                                                          </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style="">1093                 entity = getRecords(mergedProperties, entityList, null, null, null)[0];                  </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style="">1094                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style="">1095                 return entityResult;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1096             } else {                                                                                     </span>
<span class="-5905945487992976049" onmouseenter="enter('-5905945487992976049');" onmouseout="out('-5905945487992976049');" style="">1097                 return update(persistencePackage, primaryKey, includeRealEntityObject);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1098             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1099         } catch (Exception e) {                                                                          </span>
<span class="-3635977582445593738" onmouseenter="enter('-3635977582445593738');" onmouseout="out('-3635977582445593738');" style="">1100             throw new ServiceException(&quot;Problem adding new entity : &quot; + e.getMessage(), e);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1101         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1102     }                                                                                                    </span>
<span  style="">1103                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1104     @Override                                                                                            </span>
<span class="-8285012329134109181" onmouseenter="enter('-8285012329134109181');" onmouseout="out('-8285012329134109181');" style="">1105     public void remove(PersistencePackage persistencePackage) throws ServiceException {                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1106         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1107         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1108         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1108         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1109         if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                            </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1110             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1111         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1112         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1113             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1113             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1114             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1114             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDaðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1115                     persistencePackage.getCeilingEntityFullyQualifiedClassname(),                        </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1116                     entities,                                                                            </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1117                     foreignKey,                                                                          </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1118                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1119                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1120                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1121                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1122                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1123                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1124                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1125                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1126                     );                                                                                   </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title="1127             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);">1127             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProðŸ”µ</abbr></span>
<span class="-1223682136408553234" onmouseenter="enter('-1223682136408553234');" onmouseout="out('-1223682136408553234');" style="">1128             Object primaryKey = getPrimaryKey(entity, mergedProperties);                                 </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title="1129             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);">1129             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entitðŸ”µ</abbr></span>
<span  style="">1130                                                                                                          </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style="">1131             Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                         </span>
<span  style="">1132                                                                                                          </span>
<span class="6713488701284006207" onmouseenter="enter('6713488701284006207');" onmouseout="out('6713488701284006207');" style="">1133             switch (persistencePerspective.getOperationTypes().getRemoveType()) {                        </span>
<span class="5189123261615208670" onmouseenter="enter('5189123261615208670');" onmouseout="out('5189123261615208670');" style="">1134                 case NONDESTRUCTIVEREMOVE:                                                               </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style="">1135                     FieldManager fieldManager = getFieldManager();                                       </span>
<span class="3973215198680528904" onmouseenter="enter('3973215198680528904');" onmouseout="out('3973215198680528904');" style=""><abbr title="1136                     FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField());">1136                     FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyðŸ”µ</abbr></span>
<span class="1169143210599293613" onmouseenter="enter('1169143210599293613');" onmouseout="out('1169143210599293613');" style=""><abbr title="1137                     Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue();">1137                     Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue()ðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1138                     try {                                                                                </span>
<span class="-7359786243551687396" onmouseenter="enter('-7359786243551687396');" onmouseout="out('-7359786243551687396');" style="">1139                         foreignKeyValue = Long.valueOf((String) foreignKeyValue);                        </span>
<span class="7366941412324817508" onmouseenter="enter('7366941412324817508');" onmouseout="out('7366941412324817508');" style="">1140                     } catch (NumberFormatException e) {                                                  </span>
<span class="7012272079852218418" onmouseenter="enter('7012272079852218418');" onmouseout="out('7012272079852218418');" style=""><abbr title="1141                         LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove lookup&quot;);">1141                         LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove looðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1142                     }                                                                                    </span>
<span class="7279695966184570355" onmouseenter="enter('7279695966184570355');" onmouseout="out('7279695966184570355');" style=""><abbr title="1143                     Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(foreignKey.getForeignKeyClass()), foreignKeyValue);">1143                     Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(ClasðŸ”µ</abbr></span>
<span class="-6891408169238328357" onmouseenter="enter('-6891408169238328357');" onmouseout="out('-6891408169238328357');" style=""><abbr title="1144                     Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreignKey.getOriginatingField());">1144                     Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreðŸ”µ</abbr></span>
<span class="8045950107739873006" onmouseenter="enter('8045950107739873006');" onmouseout="out('8045950107739873006');" style="">1145                     collection.remove(instance);                                                         </span>
<span class="7309400259168651936" onmouseenter="enter('7309400259168651936');" onmouseout="out('7309400259168651936');" style=""><abbr title="1146                     // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreign key on">1146                     // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (justðŸ”µ</abbr></span>
<span class="7114131295623762638" onmouseenter="enter('7114131295623762638');" onmouseout="out('7114131295623762638');" style=""><abbr title="1147                     // the @ManyToOne side) then it will not be updated. In that instance, we have to explicitly">1147                     // the @ManyToOne side) then it will not be updated. In that instance, we have to expðŸ”µ</abbr></span>
<span class="3943491933719923666" onmouseenter="enter('3943491933719923666');" onmouseout="out('3943491933719923666');" style="">1148                     // set the manyTo field to null so that subsequent lookups will not find it          </span>
<span class="2820622934029903464" onmouseenter="enter('2820622934029903464');" onmouseout="out('2820622934029903464');" style="">1149                     if (manyToFieldMetadata instanceof BasicFieldMetadata) {                             </span>
<span class="3041576912599376884" onmouseenter="enter('3041576912599376884');" onmouseout="out('3041576912599376884');" style=""><abbr title="1150                         if (BooleanUtils.isTrue(((BasicFieldMetadata) manyToFieldMetadata).getRequired())) {">1150                         if (BooleanUtils.isTrue(((BasicFieldMetadata) manyToFieldMetadata).getRequired())ðŸ”µ</abbr></span>
<span class="-3179114257339016284" onmouseenter="enter('-3179114257339016284');" onmouseout="out('-3179114257339016284');" style=""><abbr title="1151                             throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne side is a&quot;">1151                             throw new ServiceException(&quot;Could not remove from the collection as the ManyTðŸ”µ</abbr></span>
<span class="-7704143059315768665" onmouseenter="enter('-7704143059315768665');" onmouseout="out('-7704143059315768665');" style=""><abbr title="1152                                     + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyToOne annotation&quot;">1152                                     + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in tðŸ”µ</abbr></span>
<span class="-8899164530562544377" onmouseenter="enter('-8899164530562544377');" onmouseout="out('-8899164530562544377');" style="">1153                                     + &quot; or nullable=true within the @JoinColumn annotation&quot;);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1154                         }                                                                                </span>
<span class="1164649929234803369" onmouseenter="enter('1164649929234803369');" onmouseout="out('1164649929234803369');" style=""><abbr title="1155                         //Since this is occuring on a remove persistence package, merge up-front (before making a change) for proper operation in the presence of the enterprise module">1155                         //Since this is occuring on a remove persistence package, merge up-front (before ðŸ”µ</abbr></span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1156                         instance = persistenceManager.getDynamicEntityDao().merge(instance);             </span>
<span class="-3549582829608652451" onmouseenter="enter('-3549582829608652451');" onmouseout="out('-3549582829608652451');" style=""><abbr title="1157                         Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField());">1157                         Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyðŸ”µ</abbr></span>
<span class="-2737504991189218406" onmouseenter="enter('-2737504991189218406');" onmouseout="out('-2737504991189218406');" style="">1158                         Object manyToObject = manyToField.get(instance);                                 </span>
<span class="-7515244788292498989" onmouseenter="enter('-7515244788292498989');" onmouseout="out('-7515244788292498989');" style=""><abbr title="1159                         if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObject instanceof Map)) {">1159                         if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObjeðŸ”µ</abbr></span>
<span class="-3600933715630852255" onmouseenter="enter('-3600933715630852255');" onmouseout="out('-3600933715630852255');" style="">1160                             manyToField.set(instance, null);                                             </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1161                             instance = persistenceManager.getDynamicEntityDao().merge(instance);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1162                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1163                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1164                     break;                                                                               </span>
<span class="-5424424301156351095" onmouseenter="enter('-5424424301156351095');" onmouseout="out('-5424424301156351095');" style="">1165                 case BASIC:                                                                              </span>
<span class="-3622621852197441069" onmouseenter="enter('-3622621852197441069');" onmouseout="out('-3622621852197441069');" style="">1166                     persistenceManager.getDynamicEntityDao().remove(instance);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1167                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1168             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1169         } catch (Exception e) {                                                                          </span>
<span class="-1927777960097045518" onmouseenter="enter('-1927777960097045518');" onmouseout="out('-1927777960097045518');" style="">1170             throw new ServiceException(&quot;Problem removing entity : &quot; + e.getMessage(), e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1172     }                                                                                                    </span>
<span  style="">1173                                                                                                          </span>
<span class="-5101078461080852406" onmouseenter="enter('-5101078461080852406');" onmouseout="out('-5101078461080852406');" style="">1174     public Map&lt;String, FieldMetadata&gt; getMergedProperties(PersistencePackage persistencePackage,         </span>
<span class="-1790491118666975112" onmouseenter="enter('-1790491118666975112');" onmouseout="out('-1790491118666975112');" style="">1175             CriteriaTransferObject cto) throws ServiceException {                                        </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1176         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1177         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1177         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span  style="">1178                                                                                                          </span>
<span class="-5573073822220246070" onmouseenter="enter('-5573073822220246070');" onmouseout="out('-5573073822220246070');" style="">1179         if (StringUtils.isEmpty(persistencePackage.getFetchTypeFullyQualifiedClassname())) {             </span>
<span class="8779313298045253029" onmouseenter="enter('8779313298045253029');" onmouseout="out('8779313298045253029');" style="">1180             persistencePackage.setFetchTypeFullyQualifiedClassname(ceilingEntityFullyQualifiedClassname);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1181         }                                                                                                </span>
<span  style="">1182                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1183         try {                                                                                            </span>
<span class="-5197892520502431560" onmouseenter="enter('-5197892520502431560');" onmouseout="out('-5197892520502431560');" style=""><abbr title="1184             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(Class.forName(ceilingEntityFullyQualifiedClassname));">1184             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCðŸ”µ</abbr></span>
<span  style="">1185                                                                                                          </span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title="1186             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1186             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style="">1187                     ceilingEntityFullyQualifiedClassname,                                                </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1188                     entities,                                                                            </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title="1189                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),">1189                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1190                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1191                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1192                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1193                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1194                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1195                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1196                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1197                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1198                     );                                                                                   </span>
<span  style="">1199                                                                                                          </span>
<span class="513114689449481379" onmouseenter="enter('513114689449481379');" onmouseout="out('513114689449481379');" style="">1200             return mergedProperties;                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1201         } catch (Exception e) {                                                                          </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1202             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1202             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1203         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1204     }                                                                                                    </span>
<span  style="">1205                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1206     @Override                                                                                            </span>
<span class="8546305990485145221" onmouseenter="enter('8546305990485145221');" onmouseout="out('8546305990485145221');" style=""><abbr title="1207     public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {">1207     public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throðŸ”µ</abbr></span>
<span class="-772649916350085514" onmouseenter="enter('-772649916350085514');" onmouseout="out('-772649916350085514');" style="">1208         Entity[] payload;                                                                                </span>
<span class="3229522520950860553" onmouseenter="enter('3229522520950860553');" onmouseout="out('3229522520950860553');" style="">1209         int totalRecords;                                                                                </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1210         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1211         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1211         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1212         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1212         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span  style="">1213                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1214         try {                                                                                            </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1215             if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                               </span>
<span class="2404625472493330195" onmouseenter="enter('2404625472493330195');" onmouseout="out('2404625472493330195');" style="">1216                 FilterAndSortCriteria sortCriteria = cto.get(foreignKey.getSortField());                 </span>
<span class="-7029642347361419040" onmouseenter="enter('-7029642347361419040');" onmouseout="out('-7029642347361419040');" style="">1217                 sortCriteria.setSortAscending(foreignKey.getSortAscending());                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1218             }                                                                                            </span>
<span  style="">1219                                                                                                          </span>
<span class="-3998990817835064526" onmouseenter="enter('-3998990817835064526');" onmouseout="out('-3998990817835064526');" style="">1220             Map&lt;String, FieldMetadata&gt; mergedProperties = getMergedProperties(persistencePackage, cto);  </span>
<span  style="">1221                                                                                                          </span>
<span class="-6342955113620354561" onmouseenter="enter('-6342955113620354561');" onmouseout="out('-6342955113620354561');" style=""><abbr title="1222             List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistencePackage">1222             List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistenðŸ”µ</abbr></span>
<span class="-8965082019915054990" onmouseenter="enter('-8965082019915054990');" onmouseout="out('-8965082019915054990');" style="">1223                     .getFetchTypeFullyQualifiedClassname(), mergedProperties);                           </span>
<span class="3150984124528274911" onmouseenter="enter('3150984124528274911');" onmouseout="out('3150984124528274911');" style="">1224             List&lt;FilterMapping&gt; standardFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);   </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1225             if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                         </span>
<span class="8416184071019923073" onmouseenter="enter('8416184071019923073');" onmouseout="out('8416184071019923073');" style="">1226                 standardFilterMappings.addAll(cto.getAdditionalFilterMappings());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1227             }                                                                                            </span>
<span class="371531837080654072" onmouseenter="enter('371531837080654072');" onmouseout="out('371531837080654072');" style="">1228             if (CollectionUtils.isNotEmpty(cto.getNonCountAdditionalFilterMappings())) {                 </span>
<span class="1437073849667335666" onmouseenter="enter('1437073849667335666');" onmouseout="out('1437073849667335666');" style="">1229                 standardFilterMappings.addAll(cto.getNonCountAdditionalFilterMappings());                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1230             }                                                                                            </span>
<span  style="">1231                                                                                                          </span>
<span class="-1243671803049331237" onmouseenter="enter('-1243671803049331237');" onmouseout="out('-1243671803049331237');" style="">1232             FetchRequest fetchRequest = new FetchRequest(persistencePackage, cto,                        </span>
<span class="4292734980783020060" onmouseenter="enter('4292734980783020060');" onmouseout="out('4292734980783020060');" style="">1233                     persistencePackage.getFetchTypeFullyQualifiedClassname(), standardFilterMappings);   </span>
<span class="6303456555516158535" onmouseenter="enter('6303456555516158535');" onmouseout="out('6303456555516158535');" style="">1234             List&lt;Serializable&gt; records = getPersistentRecords(fetchRequest);                             </span>
<span  style="">1235                                                                                                          </span>
<span class="-2850022341577176338" onmouseenter="enter('-2850022341577176338');" onmouseout="out('-2850022341577176338');" style="">1236             List&lt;FilterMapping&gt; countFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);      </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1237             if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                         </span>
<span class="2702453385268728814" onmouseenter="enter('2702453385268728814');" onmouseout="out('2702453385268728814');" style="">1238                 countFilterMappings.addAll(cto.getAdditionalFilterMappings());                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1239             }                                                                                            </span>
<span class="-3999242298419802693" onmouseenter="enter('-3999242298419802693');" onmouseout="out('-3999242298419802693');" style="">1240             FetchRequest countFetchRequest = new FetchRequest(persistencePackage, cto,                   </span>
<span class="-3552477247406350113" onmouseenter="enter('-3552477247406350113');" onmouseout="out('-3552477247406350113');" style="">1241                     persistencePackage.getFetchTypeFullyQualifiedClassname(), countFilterMappings);      </span>
<span class="8724074426546236268" onmouseenter="enter('8724074426546236268');" onmouseout="out('8724074426546236268');" style="">1242             totalRecords = getTotalRecords(countFetchRequest);                                           </span>
<span  style="">1243                                                                                                          </span>
<span class="-5158650912512765537" onmouseenter="enter('-5158650912512765537');" onmouseout="out('-5158650912512765537');" style=""><abbr title="1244             FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackage, cto,">1244             FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackageðŸ”µ</abbr></span>
<span class="6467880611752491014" onmouseenter="enter('6467880611752491014');" onmouseout="out('6467880611752491014');" style="">1245                     persistencePackage.getFetchTypeFullyQualifiedClassname(), mergedProperties, records);</span>
<span class="8156899482235304262" onmouseenter="enter('8156899482235304262');" onmouseout="out('8156899482235304262');" style="">1246             payload = getRecords(fetchExtractionRequest);                                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1247         } catch (Exception e) {                                                                          </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1248             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1248             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1249         }                                                                                                </span>
<span  style="">1250                                                                                                          </span>
<span class="-3114265280987831722" onmouseenter="enter('-3114265280987831722');" onmouseout="out('-3114265280987831722');" style="">1251         return new DynamicResultSet(null, payload, totalRecords);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1252     }                                                                                                    </span>
<span  style="">1253                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1254     @Override                                                                                            </span>
<span class="-2578660758180960" onmouseenter="enter('-2578660758180960');" onmouseout="out('-2578660758180960');" style="">1255     public Integer getTotalRecords(FetchRequest fetchRequest) {                                          </span>
<span class="3552750659307215192" onmouseenter="enter('3552750659307215192');" onmouseout="out('3552750659307215192');" style="">1256         return fetchWrapper.getTotalRecords(fetchRequest);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257     }                                                                                                    </span>
<span  style="">1258                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1259     @Override                                                                                            </span>
<span class="5133967305615212146" onmouseenter="enter('5133967305615212146');" onmouseout="out('5133967305615212146');" style="">1260     public Integer getTotalRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings) {           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1261         try {                                                                                            </span>
<span class="2992791529598050608" onmouseenter="enter('2992791529598050608');" onmouseout="out('2992791529598050608');" style=""><abbr title="1262             return ((Long) criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(),">1262             return ((Long) criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(ðŸ”µ</abbr></span>
<span class="9038213180647386393" onmouseenter="enter('9038213180647386393');" onmouseout="out('9038213180647386393');" style="">1263                     ceilingEntity, filterMappings).getSingleResult()).intValue();                        </span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1264         } catch (CriteriaConversionException e) {                                                        </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1265             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1265             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilðŸ”µ</abbr></span>
<span class="3717478470762679000" onmouseenter="enter('3717478470762679000');" onmouseout="out('3717478470762679000');" style=""><abbr title="1266             return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getSingleResult()).intValue();">1266             return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1267         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1268     }                                                                                                    </span>
<span  style="">1269                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1270     @Override                                                                                            </span>
<span class="-7091292263578945571" onmouseenter="enter('-7091292263578945571');" onmouseout="out('-7091292263578945571');" style=""><abbr title="1271     public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxField) {">1271     public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxFðŸ”µ</abbr></span>
<span class="378343015895903420" onmouseenter="enter('378343015895903420');" onmouseout="out('378343015895903420');" style="">1272         return criteriaTranslator.translateMaxQuery(persistenceManager.getDynamicEntityDao(),            </span>
<span class="-8797211071846459738" onmouseenter="enter('-8797211071846459738');" onmouseout="out('-8797211071846459738');" style="">1273                 ceilingEntity, filterMappings, maxField).getSingleResult();                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1274     }                                                                                                    </span>
<span  style="">1275                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1276     @Override                                                                                            </span>
<span class="-7700127040847294453" onmouseenter="enter('-7700127040847294453');" onmouseout="out('-7700127040847294453');" style="">1277     public List&lt;Serializable&gt; getPersistentRecords(FetchRequest fetchRequest) {                          </span>
<span class="8379695074016758469" onmouseenter="enter('8379695074016758469');" onmouseout="out('8379695074016758469');" style="">1278         return fetchWrapper.getPersistentRecords(fetchRequest);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1279     }                                                                                                    </span>
<span  style="">1280                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1281     @Override                                                                                            </span>
<span class="-3765220535491808040" onmouseenter="enter('-3765220535491808040');" onmouseout="out('-3765220535491808040');" style=""><abbr title="1282     public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, Integer firstResult, Integer maxResults) {">1282     public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappinðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1283         try {                                                                                            </span>
<span class="389003939619547722" onmouseenter="enter('389003939619547722');" onmouseout="out('389003939619547722');" style=""><abbr title="1284             return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings, firstResult, maxResults).getResultList();">1284             return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntðŸ”µ</abbr></span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1285         } catch (CriteriaConversionException e) {                                                        </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1286             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1286             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilðŸ”µ</abbr></span>
<span class="-221814316245476979" onmouseenter="enter('-221814316245476979');" onmouseout="out('-221814316245476979');" style=""><abbr title="1287             return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getResultList();">1287             return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManagerðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1288         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289     }                                                                                                    </span>
<span  style="">1290                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1291     @Override                                                                                            </span>
<span class="-5264121643331936103" onmouseenter="enter('-5264121643331936103');" onmouseout="out('-5264121643331936103');" style=""><abbr title="1292     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1292     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; merðŸ”µ</abbr></span>
<span class="4828126916979552028" onmouseenter="enter('4828126916979552028');" onmouseout="out('4828126916979552028');" style="">1293         return validate(entity, populatedInstance, mergedProperties, true);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294     }                                                                                                    </span>
<span  style="">1295                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1296     @Override                                                                                            </span>
<span class="-2540520329201552550" onmouseenter="enter('-2540520329201552550');" onmouseout="out('-2540520329201552550');" style=""><abbr title="1297     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties,">1297     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; merðŸ”µ</abbr></span>
<span class="-646875273047375380" onmouseenter="enter('-646875273047375380');" onmouseout="out('-646875273047375380');" style="">1298             boolean validateUnsubmittedProperties) {                                                     </span>
<span class="-1767922062013594425" onmouseenter="enter('-1767922062013594425');" onmouseout="out('-1767922062013594425');" style=""><abbr title="1299         entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedProperties);">1299         entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmðŸ”µ</abbr></span>
<span class="3683508287945816806" onmouseenter="enter('3683508287945816806');" onmouseout="out('3683508287945816806');" style="">1300         return !entity.isValidationFailure();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1301     }                                                                                                    </span>
<span  style="">1302                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1303     @Override                                                                                            </span>
<span class="-7261136882877520523" onmouseenter="enter('-7261136882877520523');" onmouseout="out('-7261136882877520523');" style="">1304     public void setPersistenceManager(PersistenceManager persistenceManager) {                           </span>
<span class="420805913365778848" onmouseenter="enter('420805913365778848');" onmouseout="out('420805913365778848');" style="">1305         this.persistenceManager = persistenceManager;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1306     }                                                                                                    </span>
<span  style="">1307                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1308     @Override                                                                                            </span>
<span class="-2499387119652050167" onmouseenter="enter('-2499387119652050167');" onmouseout="out('-2499387119652050167');" style="">1309     public PersistenceModule getCompatibleModule(OperationType operationType) {                          </span>
<span class="-6680721005895887682" onmouseenter="enter('-6680721005895887682');" onmouseout="out('-6680721005895887682');" style="">1310         return ((InspectHelper) persistenceManager).getCompatibleModule(operationType);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1311     }                                                                                                    </span>
<span  style="">1312                                                                                                          </span>
<span class="3328492731591597182" onmouseenter="enter('3328492731591597182');" onmouseout="out('3328492731591597182');" style="">1313     public FieldPersistenceProvider getDefaultFieldPersistenceProvider() {                               </span>
<span class="1756204342632449191" onmouseenter="enter('1756204342632449191');" onmouseout="out('1756204342632449191');" style="">1314         return defaultFieldPersistenceProvider;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1315     }                                                                                                    </span>
<span  style="">1316                                                                                                          </span>
<span class="-2699135397458953097" onmouseenter="enter('-2699135397458953097');" onmouseout="out('-2699135397458953097');" style=""><abbr title="1317     public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvider) {">1317     public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvidðŸ”µ</abbr></span>
<span class="3999856981618428822" onmouseenter="enter('3999856981618428822');" onmouseout="out('3999856981618428822');" style="">1318         this.defaultFieldPersistenceProvider = defaultFieldPersistenceProvider;                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1319     }                                                                                                    </span>
<span  style="">1320                                                                                                          </span>
<span class="-3297513575264900381" onmouseenter="enter('-3297513575264900381');" onmouseout="out('-3297513575264900381');" style="">1321     public List&lt;FieldPersistenceProvider&gt; getFieldPersistenceProviders() {                               </span>
<span class="-2059463949907485093" onmouseenter="enter('-2059463949907485093');" onmouseout="out('-2059463949907485093');" style="">1322         return fieldPersistenceProviders;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1323     }                                                                                                    </span>
<span  style="">1324                                                                                                          </span>
<span class="-235472694817904036" onmouseenter="enter('-235472694817904036');" onmouseout="out('-235472694817904036');" style="">1325     public void setFieldPersistenceProviders(List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders) { </span>
<span class="-2955406707242124116" onmouseenter="enter('-2955406707242124116');" onmouseout="out('-2955406707242124116');" style="">1326         this.fieldPersistenceProviders = fieldPersistenceProviders;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327     }                                                                                                    </span>
<span  style="">1328                                                                                                          </span>
<span class="2527239256502116436" onmouseenter="enter('2527239256502116436');" onmouseout="out('2527239256502116436');" style="">1329     public CriteriaTranslator getCriteriaTranslator() {                                                  </span>
<span class="-7874987932723060666" onmouseenter="enter('-7874987932723060666');" onmouseout="out('-7874987932723060666');" style="">1330         return criteriaTranslator;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1331     }                                                                                                    </span>
<span  style="">1332                                                                                                          </span>
<span class="3030781032482147469" onmouseenter="enter('3030781032482147469');" onmouseout="out('3030781032482147469');" style="">1333     public void setCriteriaTranslator(CriteriaTranslator criteriaTranslator) {                           </span>
<span class="8514480012814343106" onmouseenter="enter('8514480012814343106');" onmouseout="out('8514480012814343106');" style="">1334         this.criteriaTranslator = criteriaTranslator;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335     }                                                                                                    </span>
<span  style="">1336                                                                                                          </span>
<span class="5879967825851129823" onmouseenter="enter('5879967825851129823');" onmouseout="out('5879967825851129823');" style="">1337     public EntityValidatorService getEntityValidatorService() {                                          </span>
<span class="5121045867689107592" onmouseenter="enter('5121045867689107592');" onmouseout="out('5121045867689107592');" style="">1338         return entityValidatorService;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1339     }                                                                                                    </span>
<span  style="">1340                                                                                                          </span>
<span class="1108892278031396141" onmouseenter="enter('1108892278031396141');" onmouseout="out('1108892278031396141');" style="">1341     public void setEntityValidatorService(EntityValidatorService entityValidatorService) {               </span>
<span class="-1870662827894286800" onmouseenter="enter('-1870662827894286800');" onmouseout="out('-1870662827894286800');" style="">1342         this.entityValidatorService = entityValidatorService;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1343     }                                                                                                    </span>
<span  style="">1344                                                                                                          </span>
<span class="-1748543627179535834" onmouseenter="enter('-1748543627179535834');" onmouseout="out('-1748543627179535834');" style="">1345     public RestrictionFactory getRestrictionFactory() {                                                  </span>
<span class="3824148827663415229" onmouseenter="enter('3824148827663415229');" onmouseout="out('3824148827663415229');" style="">1346         return restrictionFactory;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1347     }                                                                                                    </span>
<span  style="">1348                                                                                                          </span>
<span class="-2008652971927118074" onmouseenter="enter('-2008652971927118074');" onmouseout="out('-2008652971927118074');" style="">1349     public void setRestrictionFactory(RestrictionFactory restrictionFactory) {                           </span>
<span class="2351646543947184406" onmouseenter="enter('2351646543947184406');" onmouseout="out('2351646543947184406');" style="">1350         this.restrictionFactory = restrictionFactory;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1351     }                                                                                                    </span>
<span  style="">1352                                                                                                          </span>
<span class="-5029713949712177492" onmouseenter="enter('-5029713949712177492');" onmouseout="out('-5029713949712177492');" style="">1353     public PersistenceManager getPersistenceManager() {                                                  </span>
<span class="238620838116623116" onmouseenter="enter('238620838116623116');" onmouseout="out('238620838116623116');" style="">1354         return persistenceManager;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1355     }                                                                                                    </span>
<span  style="">1356                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1357     /**                                                                                                  </span>
<span class="-5659125667278957327" onmouseenter="enter('-5659125667278957327');" onmouseout="out('-5659125667278957327');" style=""><abbr title="1358      * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable object. Related">1358      * Use an alternate approach to generating a fetch query for a collection located inside of an @EmbedðŸ”µ</abbr></span>
<span class="4561034045985117681" onmouseenter="enter('4561034045985117681');" onmouseout="out('4561034045985117681');" style=""><abbr title="1359      * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA criteria,">1359      * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather thðŸ”µ</abbr></span>
<span class="6419934548242517763" onmouseenter="enter('6419934548242517763');" onmouseout="out('6419934548242517763');" style="">1360      * which seems to alleviate the problem.                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1361      *                                                                                                   </span>
<span class="-2077216329372670" onmouseenter="enter('-2077216329372670');" onmouseout="out('-2077216329372670');" style="">1362      * @param embeddedCollectionPath the path to the collection field itself                             </span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1363      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="500285512782550604" onmouseenter="enter('500285512782550604');" onmouseout="out('500285512782550604');" style="">1364      * @param collectionClass the type of the collection members                                         </span>
<span class="-124687443674998826" onmouseenter="enter('-124687443674998826');" onmouseout="out('-124687443674998826');" style="">1365      * @return the builder capable of generating an appropriate HQL query                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1366      */                                                                                                  </span>
<span class="318950424073468037" onmouseenter="enter('318950424073468037');" onmouseout="out('318950424073468037');" style=""><abbr title="1367     protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings, String collectionClass) {">1367     protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMðŸ”µ</abbr></span>
<span class="6393444935626899139" onmouseenter="enter('6393444935626899139');" onmouseout="out('6393444935626899139');" style="">1368         String specialPath = embeddedCollectionPath.getTargetProperty();                                 </span>
<span class="-5143159997305327734" onmouseenter="enter('-5143159997305327734');" onmouseout="out('-5143159997305327734');" style="">1369         String[] pieces = specialPath.split(&quot;\\.&quot;);                                                      </span>
<span class="5217253633788863143" onmouseenter="enter('5217253633788863143');" onmouseout="out('5217253633788863143');" style="">1370         if (pieces.length != 3) {                                                                        </span>
<span class="849365765552848208" onmouseenter="enter('849365765552848208');" onmouseout="out('849365765552848208');" style=""><abbr title="1371             throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embedded field].[collection field].[property] for the embedded collection path (%s)&quot;, specialPath), embeddedCollectionPath);">1371             throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of foðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1372         }                                                                                                </span>
<span class="-8198781854964897228" onmouseenter="enter('-8198781854964897228');" onmouseout="out('-8198781854964897228');" style="">1373         String expression = specialPath.substring(0, specialPath.lastIndexOf(&quot;.&quot;));                      </span>
<span class="7643896692389749892" onmouseenter="enter('7643896692389749892');" onmouseout="out('7643896692389749892');" style="">1374         TypedQueryBuilder builder;                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1375         try {                                                                                            </span>
<span class="-8552982106091258322" onmouseenter="enter('-8552982106091258322');" onmouseout="out('-8552982106091258322');" style="">1376             builder = new TypedQueryBuilder(Class.forName(collectionClass), &quot;specialEntity&quot;)             </span>
<span class="7429624725018559493" onmouseenter="enter('7429624725018559493');" onmouseout="out('7429624725018559493');" style="">1377                     .addJoin(new TQJoin(&quot;specialEntity.&quot; + expression, &quot;embeddedCollection&quot;));           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1378         } catch (Exception e) {                                                                          </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style="">1379             throw ExceptionHelper.refineException(e);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1380         }                                                                                                </span>
<span class="-3537338773035059274" onmouseenter="enter('-3537338773035059274');" onmouseout="out('-3537338773035059274');" style="">1381         for (TQRestriction restriction : buildSpecialRestrictions(expression, filterMappings)) {         </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1382             builder = builder.addRestriction(restriction);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383         }                                                                                                </span>
<span class="-3768831820353648531" onmouseenter="enter('-3768831820353648531');" onmouseout="out('-3768831820353648531');" style=""><abbr title="1384         for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappings)) {">1384         for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappingsðŸ”µ</abbr></span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1385             builder = builder.addRestriction(restriction);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1386         }                                                                                                </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1387         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="-4604402569484224232" onmouseenter="enter('-4604402569484224232');" onmouseout="out('-4604402569484224232');" style="">1388             if (mapping.getSortDirection() != null) {                                                    </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1389                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1389                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().gðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1390                 if (StringUtils.isEmpty(mappingProperty)) {                                              </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1391                     mappingProperty = mapping.getFullPropertyName();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1392                 }                                                                                        </span>
<span class="-8248548206415810836" onmouseenter="enter('-8248548206415810836');" onmouseout="out('-8248548206415810836');" style=""><abbr title="1393                 builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDING == mapping.getSortDirection()));">1393                 builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1394             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1395         }                                                                                                </span>
<span  style="">1396                                                                                                          </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style="">1397         return builder;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1398     }                                                                                                    </span>
<span  style="">1399                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1400     /**                                                                                                  </span>
<span class="-8346746296837651477" onmouseenter="enter('-8346746296837651477');" onmouseout="out('-8346746296837651477');" style=""><abbr title="1401      * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collection field in the @Embeddable object)">1401      * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not theðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1402      *                                                                                                   </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1403      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1403      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.moduleðŸ”µ</abbr></span>
<span class="6692178223307224172" onmouseenter="enter('6692178223307224172');" onmouseout="out('6692178223307224172');" style=""><abbr title="1404      * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caused the whole thing">1404      * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this iðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1405      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="-357236726942159378" onmouseenter="enter('-357236726942159378');" onmouseout="out('-357236726942159378');" style="">1406      * @return the list of restrictions on the root entity                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1407      */                                                                                                  </span>
<span class="-85615873681846318" onmouseenter="enter('-85615873681846318');" onmouseout="out('-85615873681846318');" style=""><abbr title="1408     protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings) {">1408     protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterðŸ”µ</abbr></span>
<span class="-1692895948334038289" onmouseenter="enter('-1692895948334038289');" onmouseout="out('-1692895948334038289');" style=""><abbr title="1409         String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargetProperty().lastIndexOf(&quot;.&quot;));">1409         String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPatðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1410         List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                               </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1411         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="5670151306593626605" onmouseenter="enter('5670151306593626605');" onmouseout="out('5670151306593626605');" style="">1412             checkProperty: {                                                                             </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1413                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1413                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().gðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1414                 if (StringUtils.isEmpty(mappingProperty)) {                                              </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1415                     mappingProperty = mapping.getFullPropertyName();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1416                 }                                                                                        </span>
<span class="-8226569942575396694" onmouseenter="enter('-8226569942575396694');" onmouseout="out('-8226569942575396694');" style=""><abbr title="1417                 if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.isEmpty(mappingProperty)) {">1417                 if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.iðŸ”µ</abbr></span>
<span class="-9008982404255839640" onmouseenter="enter('-9008982404255839640');" onmouseout="out('-9008982404255839640');" style=""><abbr title="1418                     PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider();">1418                     PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider()ðŸ”µ</abbr></span>
<span class="-3527643591612301478" onmouseenter="enter('-3527643591612301478');" onmouseout="out('-3527643591612301478');" style="">1419                     if (predicateProvider != null) {                                                     </span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style=""><abbr title="1420                         FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();">1420                         FilterValueConverter converter = mapping.getRestriction().getFilterValueConverterðŸ”µ</abbr></span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1421                         if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {</span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1422                             Object val = converter.convert(mapping.getFilterValues().get(0));            </span>
<span class="4919121251037931163" onmouseenter="enter('4919121251037931163');" onmouseout="out('4919121251037931163');" style="">1423                             if (predicateProvider instanceof LikePredicateProvider) {                    </span>
<span class="-1773061400470981891" onmouseenter="enter('-1773061400470981891');" onmouseout="out('-1773061400470981891');" style=""><abbr title="1424                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, val + &quot;%&quot;));">1424                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1425                                 break checkProperty;                                                     </span>
<span class="8904766331581746771" onmouseenter="enter('8904766331581746771');" onmouseout="out('8904766331581746771');" style="">1426                             } else if (predicateProvider instanceof EqPredicateProvider) {               </span>
<span class="1134572960833745712" onmouseenter="enter('1134572960833745712');" onmouseout="out('1134572960833745712');" style=""><abbr title="1427                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=&quot;, val));">1427                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=ðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1428                                 break checkProperty;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1429                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1431                     }                                                                                    </span>
<span class="-6733273180612799079" onmouseenter="enter('-6733273180612799079');" onmouseout="out('-6733273180612799079');" style=""><abbr title="1432                     LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional property (%s)&quot;,">1432                     LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additionaðŸ”µ</abbr></span>
<span class="-8181613750620164347" onmouseenter="enter('-8181613750620164347');" onmouseout="out('-8181613750620164347');" style="">1433                             StringUtil.sanitize(expression),                                             </span>
<span class="-5255115290358802775" onmouseenter="enter('-5255115290358802775');" onmouseout="out('-5255115290358802775');" style="">1434                             StringUtil.sanitize(mappingProperty)));                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1435                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1436             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437         }                                                                                                </span>
<span  style="">1438                                                                                                          </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1439         return restrictions;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1440     }                                                                                                    </span>
<span  style="">1441                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1442     /**                                                                                                  </span>
<span class="2167663911523579684" onmouseenter="enter('2167663911523579684');" onmouseout="out('2167663911523579684');" style=""><abbr title="1443      * Generate EQUALS restrictions for any filter property specified on the entity member of the collection field in the @Embeddable object">1443      * Generate EQUALS restrictions for any filter property specified on the entity member of the collectðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1444      *                                                                                                   </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1445      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1445      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.moduleðŸ”µ</abbr></span>
<span class="-9017749716487851104" onmouseenter="enter('-9017749716487851104');" onmouseout="out('-9017749716487851104');" style=""><abbr title="1446      * @param specialExpression the String representation of the path for the collection field in the @Embeddable object">1446      * @param specialExpression the String representation of the path for the collection field in the @EmðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1447      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="3793893128909469910" onmouseenter="enter('3793893128909469910');" onmouseout="out('3793893128909469910');" style="">1448      * @return the list of restrictions on the collection in the @Embeddable object                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1449      */                                                                                                  </span>
<span class="-1807551435758383985" onmouseenter="enter('-1807551435758383985');" onmouseout="out('-1807551435758383985');" style=""><abbr title="1450     protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMappings) {">1450     protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; ðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1451         List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                               </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1452         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="-7768046259105737972" onmouseenter="enter('-7768046259105737972');" onmouseout="out('-7768046259105737972');" style=""><abbr title="1453             if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mapping.getFieldPath().getTargetProperty().startsWith(specialExpression)) {">1453             if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mðŸ”µ</abbr></span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1454                 FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();     </span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1455                 if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {        </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1456                     Object val = converter.convert(mapping.getFilterValues().get(0));                    </span>
<span class="-3185664653595577967" onmouseenter="enter('-3185664653595577967');" onmouseout="out('-3185664653595577967');" style=""><abbr title="1457                     String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().getTargetProperty().lastIndexOf(&quot;.&quot;) + 1, mapping.getFieldPath().getTargetProperty().length());">1457                     String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieðŸ”µ</abbr></span>
<span class="6515773652350530653" onmouseenter="enter('6515773652350530653');" onmouseout="out('6515773652350530653');" style="">1458                     restrictions.add(new TQRestriction(&quot;embeddedCollection.&quot; + property, &quot;=&quot;, val));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1459                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1460             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1461         }                                                                                                </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1462         return restrictions;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1463     }                                                                                                    </span>
<span  style="">1464                                                                                                          </span>
<span class="-1847859638489008561" onmouseenter="enter('-1847859638489008561');" onmouseout="out('-1847859638489008561');" style="">1465     protected void cleanupFailedPersistenceAttempt(Serializable instance) throws IllegalAccessException {</span>
<span class="-761178418461683406" onmouseenter="enter('-761178418461683406');" onmouseout="out('-761178418461683406');" style="">1466         //Remove the entity from ORM management - no further attempts to persist                         </span>
<span class="-8509958237563709196" onmouseenter="enter('-8509958237563709196');" onmouseout="out('-8509958237563709196');" style=""><abbr title="1467         if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) {">1467         if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) ðŸ”µ</abbr></span>
<span class="-8381574259703143566" onmouseenter="enter('-8381574259703143566');" onmouseout="out('-8381574259703143566');" style="">1468             getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().detach(instance);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1469         }                                                                                                </span>
<span class="7196727024368525589" onmouseenter="enter('7196727024368525589');" onmouseout="out('7196727024368525589');" style="">1470         //Remove the id field value, if it&#x27;s set                                                         </span>
<span class="-8963497040678265373" onmouseenter="enter('-8963497040678265373');" onmouseout="out('-8963497040678265373');" style=""><abbr title="1471         String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClass()).get(&quot;name&quot;);">1471         String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instancðŸ”µ</abbr></span>
<span class="-7813482713010008669" onmouseenter="enter('-7813482713010008669');" onmouseout="out('-7813482713010008669');" style="">1472         Field idField = FieldUtils.getField(instance.getClass(), idFieldName, true);                     </span>
<span class="-5694238240637206409" onmouseenter="enter('-5694238240637206409');" onmouseout="out('-5694238240637206409');" style="">1473         if (idField == null) {                                                                           </span>
<span class="6113500709945049507" onmouseenter="enter('6113500709945049507');" onmouseout="out('6113500709945049507');" style=""><abbr title="1474             throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getName() + &quot; does not contain id field &quot; + idFieldName));">1474             throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1475         }                                                                                                </span>
<span class="7965871812340203707" onmouseenter="enter('7965871812340203707');" onmouseout="out('7965871812340203707');" style="">1476         idField.setAccessible(true);                                                                     </span>
<span class="-5148613654387121426" onmouseenter="enter('-5148613654387121426');" onmouseout="out('-5148613654387121426');" style="">1477         if (idField.get(instance) != null) {                                                             </span>
<span class="-3149499430961766795" onmouseenter="enter('-3149499430961766795');" onmouseout="out('-3149499430961766795');" style="">1478             idField.set(instance, null);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1479         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1480     }                                                                                                    </span>
<span  style="">1481                                                                                                          </span>
<span class="361057059065324955" onmouseenter="enter('361057059065324955');" onmouseout="out('361057059065324955');" style=""><abbr title="1482     protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property property) {">1482     protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property propertðŸ”µ</abbr></span>
<span class="1752551688027428994" onmouseenter="enter('1752551688027428994');" onmouseout="out('1752551688027428994');" style="">1483         Class&lt;?&gt; returnType = null;                                                                      </span>
<span class="3738304511666335991" onmouseenter="enter('3738304511666335991');" onmouseout="out('3738304511666335991');" style=""><abbr title="1484         Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName().indexOf(FieldManager.MAPFIELDSEPARATOR)));">1484         Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, propertyðŸ”µ</abbr></span>
<span class="5464468769050206957" onmouseenter="enter('5464468769050206957');" onmouseout="out('5464468769050206957');" style="">1485         java.lang.reflect.Type type = field.getGenericType();                                            </span>
<span class="-6389298272813932854" onmouseenter="enter('-6389298272813932854');" onmouseout="out('-6389298272813932854');" style="">1486         if (type instanceof ParameterizedType) {                                                         </span>
<span class="705860026972665445" onmouseenter="enter('705860026972665445');" onmouseout="out('705860026972665445');" style="">1487             ParameterizedType pType = (ParameterizedType) type;                                          </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style="">1488             Class&lt;?&gt; clazz;                                                                              </span>
<span class="7069691481162074648" onmouseenter="enter('7069691481162074648');" onmouseout="out('7069691481162074648');" style="">1489             if (pType.getActualTypeArguments().length &lt; 2) {                                             </span>
<span class="4541832948460311824" onmouseenter="enter('4541832948460311824');" onmouseout="out('4541832948460311824');" style="">1490                 clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[0];                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1491             } else {                                                                                     </span>
<span class="-5335821615199731853" onmouseenter="enter('-5335821615199731853');" onmouseout="out('-5335821615199731853');" style="">1492                 clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[1];                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493             }                                                                                            </span>
<span class="2546721200619882801" onmouseenter="enter('2546721200619882801');" onmouseout="out('2546721200619882801');" style=""><abbr title="1494             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clazz);">1494             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCðŸ”µ</abbr></span>
<span class="5482192784237496931" onmouseenter="enter('5482192784237496931');" onmouseout="out('5482192784237496931');" style="">1495             if (!ArrayUtils.isEmpty(entities)) {                                                         </span>
<span class="4302056969260211006" onmouseenter="enter('4302056969260211006');" onmouseout="out('4302056969260211006');" style="">1496                 returnType = entities[entities.length - 1];                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1497             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1498         }                                                                                                </span>
<span class="7163755908227734414" onmouseenter="enter('7163755908227734414');" onmouseout="out('7163755908227734414');" style="">1499         return returnType;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1500     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1501 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span  style="">  18                                                                                                          </span>
<span class="-3730395872919143110" onmouseenter="enter('-3730395872919143110');" onmouseout="out('-3730395872919143110');" style="">  19 package org.broadleafcommerce.openadmin.server.service.persistence.module;                               </span>
<span  style="">  20                                                                                                          </span>
<span class="6585399145259537123" onmouseenter="enter('6585399145259537123');" onmouseout="out('6585399145259537123');" style="">  21 import org.apache.commons.beanutils.PropertyUtils;                                                       </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  22 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  23 import org.apache.commons.lang.ArrayUtils;                                                               </span>
<span class="7952073036463698968" onmouseenter="enter('7952073036463698968');" onmouseout="out('7952073036463698968');" style="">  24 import org.apache.commons.lang.StringUtils;                                                              </span>
<span class="-4811768396919678325" onmouseenter="enter('-4811768396919678325');" onmouseout="out('-4811768396919678325');" style="">  25 import org.apache.commons.lang3.BooleanUtils;                                                            </span>
<span class="-4496642532189438643" onmouseenter="enter('-4496642532189438643');" onmouseout="out('-4496642532189438643');" style="">  26 import org.apache.commons.lang3.reflect.FieldUtils;                                                      </span>
<span class="-7494130924703435694" onmouseenter="enter('-7494130924703435694');" onmouseout="out('-7494130924703435694');" style="">  27 import org.apache.commons.lang3.reflect.MethodUtils;                                                     </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  28 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  29 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  30 import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                        </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  31 import org.broadleafcommerce.common.exception.ExceptionHelper;                                           </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  32 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  33 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  34 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="-274639712180431568" onmouseenter="enter('-274639712180431568');" onmouseout="out('-274639712180431568');" style="">  35 import org.broadleafcommerce.common.money.Money;                                                         </span>
<span class="-212317658512913375" onmouseenter="enter('-212317658512913375');" onmouseout="out('-212317658512913375');" style="">  36 import org.broadleafcommerce.common.presentation.client.OperationType;                                   </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  37 import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                  </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  38 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  39 import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                  </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  40 import org.broadleafcommerce.common.util.FormatUtil;                                                     </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  41 import org.broadleafcommerce.common.util.StringUtil;                                                     </span>
<span class="-2926793360365808281" onmouseenter="enter('-2926793360365808281');" onmouseout="out('-2926793360365808281');" style="">  42 import org.broadleafcommerce.common.util.ValidationUtil;                                                 </span>
<span class="7948666462039628690" onmouseenter="enter('7948666462039628690');" onmouseout="out('7948666462039628690');" style="">  43 import org.broadleafcommerce.common.util.dao.TQJoin;                                                     </span>
<span class="4569891227290901556" onmouseenter="enter('4569891227290901556');" onmouseout="out('4569891227290901556');" style="">  44 import org.broadleafcommerce.common.util.dao.TQOrder;                                                    </span>
<span class="2808183798288001053" onmouseenter="enter('2808183798288001053');" onmouseout="out('2808183798288001053');" style="">  45 import org.broadleafcommerce.common.util.dao.TQRestriction;                                              </span>
<span class="8922526534929083638" onmouseenter="enter('8922526534929083638');" onmouseout="out('8922526534929083638');" style="">  46 import org.broadleafcommerce.common.util.dao.TypedQueryBuilder;                                          </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  47 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-9032655456699873894" onmouseenter="enter('-9032655456699873894');" onmouseout="out('-9032655456699873894');" style="">  48 import org.broadleafcommerce.openadmin.dto.*;                                                            </span>
<span class="-2518486623699289546" onmouseenter="enter('-2518486623699289546');" onmouseout="out('-2518486623699289546');" style=""><abbr title="  49 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvider;">  49 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvidðŸ”µ</abbr></span>
<span class="-3305750562841405447" onmouseenter="enter('-3305750562841405447');" onmouseout="out('-3305750562841405447');" style="">  50 import org.broadleafcommerce.openadmin.server.service.ValidationException;                               </span>
<span class="8378385081764163459" onmouseenter="enter('8378385081764163459');" onmouseout="out('8378385081764163459');" style="">  51 import org.broadleafcommerce.openadmin.server.service.persistence.ParentEntityPersistenceException;      </span>
<span class="5722165468172421658" onmouseenter="enter('5722165468172421658');" onmouseout="out('5722165468172421658');" style="">  52 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceException;                  </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  53 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                    </span>
<span class="5058784187408591906" onmouseenter="enter('5058784187408591906');" onmouseout="out('5058784187408591906');" style="">  54 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.*;                     </span>
<span class="-481493864845228243" onmouseenter="enter('-481493864845228243');" onmouseout="out('-481493864845228243');" style=""><abbr title="  55 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueConverter;">  55 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueCoðŸ”µ</abbr></span>
<span class="2179480323999346530" onmouseenter="enter('2179480323999346530');" onmouseout="out('2179480323999346530');" style=""><abbr title="  56 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicateProvider;">  56 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicatePrðŸ”µ</abbr></span>
<span class="8659565314530832704" onmouseenter="enter('8659565314530832704');" onmouseout="out('8659565314530832704');" style=""><abbr title="  57 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateProvider;">  57 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateðŸ”µ</abbr></span>
<span class="2225343043491731861" onmouseenter="enter('2225343043491731861');" onmouseout="out('2225343043491731861');" style=""><abbr title="  58 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvider;">  58 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvðŸ”µ</abbr></span>
<span class="1619823169108097395" onmouseenter="enter('1619823169108097395');" onmouseout="out('1619823169108097395');" style=""><abbr title="  59 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionManager;">  59 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleðŸ”µ</abbr></span>
<span class="2027605662300607419" onmouseenter="enter('2027605662300607419');" onmouseout="out('2027605662300607419');" style=""><abbr title="  60 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvider;">  60 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvideðŸ”µ</abbr></span>
<span class="-4946286896488271959" onmouseenter="enter('-4946286896488271959');" onmouseout="out('-4946286896488271959');" style=""><abbr title="  61 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequest;">  61 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterProperðŸ”µ</abbr></span>
<span class="-2189126569880350667" onmouseenter="enter('-2189126569880350667');" onmouseout="out('-2189126569880350667');" style=""><abbr title="  62 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappingRequest;">  62 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappinðŸ”µ</abbr></span>
<span class="6456213336650879315" onmouseenter="enter('6456213336650879315');" onmouseout="out('6456213336650879315');" style=""><abbr title="  63 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueRequest;">  63 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueReqðŸ”µ</abbr></span>
<span class="7338762877284211273" onmouseenter="enter('7338762877284211273');" onmouseout="out('7338762877284211273');" style=""><abbr title="  64 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueRequest;">  64 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueReðŸ”µ</abbr></span>
<span class="4906254842317893740" onmouseenter="enter('4906254842317893740');" onmouseout="out('4906254842317893740');" style="">  65 import org.broadleafcommerce.openadmin.server.service.persistence.validation.EntityValidatorService;     </span>
<span class="375927524796533683" onmouseenter="enter('375927524796533683');" onmouseout="out('375927524796533683');" style=""><abbr title="  66 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidator;">  66 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidatoðŸ”µ</abbr></span>
<span class="3919265641981654464" onmouseenter="enter('3919265641981654464');" onmouseout="out('3919265641981654464');" style="">  67 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PropertyValidationResult;   </span>
<span class="5692608280904331276" onmouseenter="enter('5692608280904331276');" onmouseout="out('5692608280904331276');" style="">  68 import org.broadleafcommerce.openadmin.server.service.type.MetadataProviderResponse;                     </span>
<span class="3891204800073608559" onmouseenter="enter('3891204800073608559');" onmouseout="out('3891204800073608559');" style="">  69 import org.hibernate.FlushMode;                                                                          </span>
<span class="-1504015732959009083" onmouseenter="enter('-1504015732959009083');" onmouseout="out('-1504015732959009083');" style="">  70 import org.hibernate.Session;                                                                            </span>
<span class="-6968089101617569818" onmouseenter="enter('-6968089101617569818');" onmouseout="out('-6968089101617569818');" style="">  71 import org.springframework.beans.BeansException;                                                         </span>
<span class="1015650858128177541" onmouseenter="enter('1015650858128177541');" onmouseout="out('1015650858128177541');" style="">  72 import org.springframework.context.ApplicationContext;                                                   </span>
<span class="5490156850800899437" onmouseenter="enter('5490156850800899437');" onmouseout="out('5490156850800899437');" style="">  73 import org.springframework.context.ApplicationContextAware;                                              </span>
<span class="1179989609458797828" onmouseenter="enter('1179989609458797828');" onmouseout="out('1179989609458797828');" style="">  74 import org.springframework.context.annotation.Primary;                                                   </span>
<span class="2368474895564125270" onmouseenter="enter('2368474895564125270');" onmouseout="out('2368474895564125270');" style="">  75 import org.springframework.context.annotation.Scope;                                                     </span>
<span class="8406454220154166073" onmouseenter="enter('8406454220154166073');" onmouseout="out('8406454220154166073');" style="">  76 import org.springframework.stereotype.Component;                                                         </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="">  77 import org.springframework.util.Assert;                                                                  </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="">  78 import java.io.Serializable;                                                                             </span>
<span class="507320133330553151" onmouseenter="enter('507320133330553151');" onmouseout="out('507320133330553151');" style="">  79 import java.lang.reflect.Field;                                                                          </span>
<span class="5727252987923913" onmouseenter="enter('5727252987923913');" onmouseout="out('5727252987923913');" style="">  80 import java.lang.reflect.InvocationTargetException;                                                      </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style="">  81 import java.lang.reflect.Method;                                                                         </span>
<span class="347575814667778087" onmouseenter="enter('347575814667778087');" onmouseout="out('347575814667778087');" style="">  82 import java.lang.reflect.ParameterizedType;                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style="">  83 import java.math.BigDecimal;                                                                             </span>
<span class="-8993555010225969077" onmouseenter="enter('-8993555010225969077');" onmouseout="out('-8993555010225969077');" style="">  84 import java.sql.Timestamp;                                                                               </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style="">  85 import java.text.DecimalFormat;                                                                          </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style="">  86 import java.text.NumberFormat;                                                                           </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style="">  87 import java.text.SimpleDateFormat;                                                                       </span>
<span class="196713859697444637" onmouseenter="enter('196713859697444637');" onmouseout="out('196713859697444637');" style="">  88 import java.util.*;                                                                                      </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  89 import java.util.Map.Entry;                                                                              </span>
<span  style="">  90                                                                                                          </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style="">  91 import javax.annotation.PostConstruct;                                                                   </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  92 import javax.annotation.Resource;                                                                        </span>
<span  style="">  93                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  94 /**                                                                                                      </span>
<span class="3104529581940833663" onmouseenter="enter('3104529581940833663');" onmouseout="out('3104529581940833663');" style="">  95  * @author jfischer                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  96  */                                                                                                      </span>
<span class="7759015212035044666" onmouseenter="enter('7759015212035044666');" onmouseout="out('7759015212035044666');" style="">  97 @Primary                                                                                                 </span>
<span class="1694546414662202322" onmouseenter="enter('1694546414662202322');" onmouseout="out('1694546414662202322');" style="">  98 @Component(&quot;blBasicPersistenceModule&quot;)                                                                   </span>
<span class="-3657083271113190387" onmouseenter="enter('-3657083271113190387');" onmouseout="out('-3657083271113190387');" style="">  99 @Scope(&quot;prototype&quot;)                                                                                      </span>
<span class="-7916582208788778889" onmouseenter="enter('-7916582208788778889');" onmouseout="out('-7916582208788778889');" style=""> 100 public class BasicPersistenceModule implements PersistenceModule, RecordHelper, ApplicationContextAware {</span>
<span  style=""> 101                                                                                                          </span>
<span class="8379422291463370013" onmouseenter="enter('8379422291463370013');" onmouseout="out('8379422291463370013');" style=""> 102     private static final Log LOG = LogFactory.getLog(BasicPersistenceModule.class);                      </span>
<span  style=""> 103                                                                                                          </span>
<span class="-381692932666242814" onmouseenter="enter('-381692932666242814');" onmouseout="out('-381692932666242814');" style=""> 104     public static final String MAIN_ENTITY_NAME_PROPERTY = &quot;MAIN_ENTITY_NAME&quot;;                           </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 105     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span  style=""> 106                                                                                                          </span>
<span class="-4770133548193901777" onmouseenter="enter('-4770133548193901777');" onmouseout="out('-4770133548193901777');" style=""> 107     protected ApplicationContext applicationContext;                                                     </span>
<span class="-6488622702665536176" onmouseenter="enter('-6488622702665536176');" onmouseout="out('-6488622702665536176');" style=""> 108     protected PersistenceManager persistenceManager;                                                     </span>
<span  style=""> 109                                                                                                          </span>
<span class="4305095825338649553" onmouseenter="enter('4305095825338649553');" onmouseout="out('4305095825338649553');" style=""> 110     @Resource(name = &quot;blEntityValidatorService&quot;)                                                         </span>
<span class="-2556035380928716519" onmouseenter="enter('-2556035380928716519');" onmouseout="out('-2556035380928716519');" style=""> 111     protected EntityValidatorService entityValidatorService;                                             </span>
<span  style=""> 112                                                                                                          </span>
<span class="6167230228674564015" onmouseenter="enter('6167230228674564015');" onmouseout="out('6167230228674564015');" style=""> 113     @Resource(name = &quot;blPersistenceProviders&quot;)                                                           </span>
<span class="5197193686792056094" onmouseenter="enter('5197193686792056094');" onmouseout="out('5197193686792056094');" style=""><abbr title=" 114     protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;();"> 114     protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistencePrðŸ”µ</abbr></span>
<span  style=""> 115                                                                                                          </span>
<span class="6566976708558343402" onmouseenter="enter('6566976708558343402');" onmouseout="out('6566976708558343402');" style=""> 116     @Resource(name = &quot;blPopulateValueRequestValidators&quot;)                                                 </span>
<span class="8688460549992818244" onmouseenter="enter('8688460549992818244');" onmouseout="out('8688460549992818244');" style=""> 117     protected List&lt;PopulateValueRequestValidator&gt; populateValidators;                                    </span>
<span  style=""> 118                                                                                                          </span>
<span class="2226562240918510507" onmouseenter="enter('2226562240918510507');" onmouseout="out('2226562240918510507');" style=""> 119     @Resource(name = &quot;blDefaultFieldPersistenceProvider&quot;)                                                </span>
<span class="3736553406868276704" onmouseenter="enter('3736553406868276704');" onmouseout="out('3736553406868276704');" style=""> 120     protected FieldPersistenceProvider defaultFieldPersistenceProvider;                                  </span>
<span  style=""> 121                                                                                                          </span>
<span class="-2696154002193407400" onmouseenter="enter('-2696154002193407400');" onmouseout="out('-2696154002193407400');" style=""> 122     @Resource(name = &quot;blCriteriaTranslator&quot;)                                                             </span>
<span class="6548648040486234931" onmouseenter="enter('6548648040486234931');" onmouseout="out('6548648040486234931');" style=""> 123     protected CriteriaTranslator criteriaTranslator;                                                     </span>
<span  style=""> 124                                                                                                          </span>
<span class="-4636653885273856120" onmouseenter="enter('-4636653885273856120');" onmouseout="out('-4636653885273856120');" style=""> 125     @Resource(name = &quot;blRestrictionFactory&quot;)                                                             </span>
<span class="-4515285046595655523" onmouseenter="enter('-4515285046595655523');" onmouseout="out('-4515285046595655523');" style=""> 126     protected RestrictionFactory restrictionFactory;                                                     </span>
<span  style=""> 127                                                                                                          </span>
<span class="2099612267381053384" onmouseenter="enter('2099612267381053384');" onmouseout="out('2099612267381053384');" style=""> 128     @Resource(name = &quot;blBasicPersistenceModuleExtensionManager&quot;)                                         </span>
<span class="4348825311931369098" onmouseenter="enter('4348825311931369098');" onmouseout="out('4348825311931369098');" style=""> 129     protected BasicPersistenceModuleExtensionManager extensionManager;                                   </span>
<span  style=""> 130                                                                                                          </span>
<span class="3131053547948330670" onmouseenter="enter('3131053547948330670');" onmouseout="out('3131053547948330670');" style=""> 131     @Resource(name = &quot;blFetchWrapper&quot;)                                                                   </span>
<span class="-359674182981681110" onmouseenter="enter('-359674182981681110');" onmouseout="out('-359674182981681110');" style=""> 132     protected FetchWrapper fetchWrapper;                                                                 </span>
<span  style=""> 133                                                                                                          </span>
<span class="-5680397040643859011" onmouseenter="enter('-5680397040643859011');" onmouseout="out('-5680397040643859011');" style=""> 134     @PostConstruct                                                                                       </span>
<span class="-5421613521494184453" onmouseenter="enter('-5421613521494184453');" onmouseout="out('-5421613521494184453');" style=""> 135     public void init() {                                                                                 </span>
<span class="4686299079232078395" onmouseenter="enter('4686299079232078395');" onmouseout="out('4686299079232078395');" style=""> 136         Collections.sort(fieldPersistenceProviders, new Comparator&lt;FieldPersistenceProvider&gt;() {         </span>
<span  style=""> 137                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 138             @Override                                                                                    </span>
<span class="3172150882386516312" onmouseenter="enter('3172150882386516312');" onmouseout="out('3172150882386516312');" style=""> 139             public int compare(FieldPersistenceProvider o1, FieldPersistenceProvider o2) {               </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 140                 return Integer.compare(o1.getOrder(), o2.getOrder());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 142         });                                                                                              </span>
<span class="-5522683723982909620" onmouseenter="enter('-5522683723982909620');" onmouseout="out('-5522683723982909620');" style=""> 143         Collections.sort(populateValidators, new Comparator&lt;PopulateValueRequestValidator&gt;() {           </span>
<span  style=""> 144                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 145             @Override                                                                                    </span>
<span class="-53383489616583041" onmouseenter="enter('-53383489616583041');" onmouseout="out('-53383489616583041');" style=""> 146             public int compare(PopulateValueRequestValidator o1, PopulateValueRequestValidator o2) {     </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 147                 return Integer.compare(o1.getOrder(), o2.getOrder());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 149         });                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150     }                                                                                                    </span>
<span  style=""> 151                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 152     @Override                                                                                            </span>
<span class="396918709943054648" onmouseenter="enter('396918709943054648');" onmouseout="out('396918709943054648');" style=""> 153     public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {     </span>
<span class="-8767252978178914531" onmouseenter="enter('-8767252978178914531');" onmouseout="out('-8767252978178914531');" style=""> 154         this.applicationContext = applicationContext;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155     }                                                                                                    </span>
<span  style=""> 156                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 157     @Override                                                                                            </span>
<span class="-3014786585495943162" onmouseenter="enter('-3014786585495943162');" onmouseout="out('-3014786585495943162');" style=""> 158     public boolean isCompatible(OperationType operationType) {                                           </span>
<span class="2141831482980401058" onmouseenter="enter('2141831482980401058');" onmouseout="out('2141831482980401058');" style=""><abbr title=" 159         return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationType;"> 159         return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationTypðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160     }                                                                                                    </span>
<span  style=""> 161                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 162     @Override                                                                                            </span>
<span class="-4646037950621881232" onmouseenter="enter('-4646037950621881232');" onmouseout="out('-4646037950621881232');" style=""> 163     public FieldManager getFieldManager() {                                                              </span>
<span class="5127492287871228389" onmouseenter="enter('5127492287871228389');" onmouseout="out('5127492287871228389');" style=""> 164         return persistenceManager.getDynamicEntityDao().getFieldManager();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165     }                                                                                                    </span>
<span  style=""> 166                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 167     @Override                                                                                            </span>
<span class="6292426019095192675" onmouseenter="enter('6292426019095192675');" onmouseout="out('6292426019095192675');" style=""> 168     public DecimalFormat getDecimalFormatter() {                                                         </span>
<span class="-8689839391291561327" onmouseenter="enter('-8689839391291561327');" onmouseout="out('-8689839391291561327');" style=""> 169         BroadleafRequestContext brc = BroadleafRequestContext.getBroadleafRequestContext();              </span>
<span class="-6419077469974014826" onmouseenter="enter('-6419077469974014826');" onmouseout="out('-6419077469974014826');" style=""> 170         Locale locale = brc.getJavaLocale();                                                             </span>
<span class="5393968905060170707" onmouseenter="enter('5393968905060170707');" onmouseout="out('5393968905060170707');" style=""> 171         DecimalFormat format = (DecimalFormat) NumberFormat.getInstance(locale);                         </span>
<span class="-6387263728450575912" onmouseenter="enter('-6387263728450575912');" onmouseout="out('-6387263728450575912');" style=""> 172         format.applyPattern(&quot;0.########&quot;);                                                               </span>
<span class="-7514226051094490374" onmouseenter="enter('-7514226051094490374');" onmouseout="out('-7514226051094490374');" style=""> 173         format.setGroupingUsed(false);                                                                   </span>
<span class="9058009825496417823" onmouseenter="enter('9058009825496417823');" onmouseout="out('9058009825496417823');" style=""> 174         return format;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175     }                                                                                                    </span>
<span  style=""> 176                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 177     @Override                                                                                            </span>
<span class="3673790992053213915" onmouseenter="enter('3673790992053213915');" onmouseout="out('3673790992053213915');" style=""> 178     public SimpleDateFormat getSimpleDateFormatter() {                                                   </span>
<span class="-4651469406949839699" onmouseenter="enter('-4651469406949839699');" onmouseout="out('-4651469406949839699');" style=""> 179         return FormatUtil.getDateFormat();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180     }                                                                                                    </span>
<span  style=""> 181                                                                                                          </span>
<span class="8865595993102688563" onmouseenter="enter('8865595993102688563');" onmouseout="out('8865595993102688563');" style=""><abbr title=" 182     protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata) {"> 182     protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata)ðŸ”µ</abbr></span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 183         if (metadata == null) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 184             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185         }                                                                                                </span>
<span class="4579536340012797507" onmouseenter="enter('4579536340012797507');" onmouseout="out('4579536340012797507');" style=""> 186         Map&lt;String, FieldMetadata&gt; newMap = new HashMap&lt;String, FieldMetadata&gt;();                        </span>
<span class="-7265940589949467353" onmouseenter="enter('-7265940589949467353');" onmouseout="out('-7265940589949467353');" style=""> 187         for (Map.Entry&lt;String, FieldMetadata&gt; entry : metadata.entrySet()) {                             </span>
<span class="8190629385805201553" onmouseenter="enter('8190629385805201553');" onmouseout="out('8190629385805201553');" style=""> 188             String fieldName = entry.getKey();                                                           </span>
<span class="-1384244356449002788" onmouseenter="enter('-1384244356449002788');" onmouseout="out('-1384244356449002788');" style=""> 189             FieldMetadata md = entry.getValue();                                                         </span>
<span class="-392734195208043155" onmouseenter="enter('-392734195208043155');" onmouseout="out('-392734195208043155');" style=""><abbr title=" 190             // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but also corresponds"> 190             // Detect instances where the actual metadata for the field is some sort of CollectionMetadatðŸ”µ</abbr></span>
<span class="5589067424379822421" onmouseenter="enter('5589067424379822421');" onmouseout="out('5589067424379822421');" style=""><abbr title=" 191             // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistenceModule}"> 191             // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasðŸ”µ</abbr></span>
<span class="3711520644201471237" onmouseenter="enter('3711520644201471237');" onmouseout="out('3711520644201471237');" style=""> 192             // can appropriate handle filtration and population                                          </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 193             if (entry.getValue() instanceof BasicFieldMetadata) {                                        </span>
<span class="-2739418553393512485" onmouseenter="enter('-2739418553393512485');" onmouseout="out('-2739418553393512485');" style=""> 194                 newMap.put(fieldName, md);                                                               </span>
<span class="4750432455054359328" onmouseenter="enter('4750432455054359328');" onmouseout="out('4750432455054359328');" style=""><abbr title=" 195             } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY)) {"> 195             } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FORðŸ”µ</abbr></span>
<span class="-8485840589316329792" onmouseenter="enter('-8485840589316329792');" onmouseout="out('-8485840589316329792');" style=""> 196                 newMap.put(fieldName,                                                                    </span>
<span class="-7674878801561950856" onmouseenter="enter('-7674878801561950856');" onmouseout="out('-7674878801561950856');" style=""><abbr title=" 197                         (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY));"> 197                         (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199         }                                                                                                </span>
<span  style=""> 200                                                                                                          </span>
<span class="-298172894898579181" onmouseenter="enter('-298172894898579181');" onmouseout="out('-298172894898579181');" style=""> 201         return newMap;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202     }                                                                                                    </span>
<span  style=""> 203                                                                                                          </span>
<span class="5188070027912515482" onmouseenter="enter('5188070027912515482');" onmouseout="out('5188070027912515482');" style=""> 204     protected Class&lt;?&gt; getBasicBroadleafType(SupportedFieldType fieldType) {                             </span>
<span class="4154961753427691315" onmouseenter="enter('4154961753427691315');" onmouseout="out('4154961753427691315');" style=""> 205         Class&lt;?&gt; response;                                                                               </span>
<span class="2733460625953438179" onmouseenter="enter('2733460625953438179');" onmouseout="out('2733460625953438179');" style=""> 206         switch (fieldType) {                                                                             </span>
<span class="-7896257890077828333" onmouseenter="enter('-7896257890077828333');" onmouseout="out('-7896257890077828333');" style=""> 207             case BOOLEAN:                                                                                </span>
<span class="3764755044082566978" onmouseenter="enter('3764755044082566978');" onmouseout="out('3764755044082566978');" style=""> 208                 response = Boolean.TYPE;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 209                 break;                                                                                   </span>
<span class="6347500693000317849" onmouseenter="enter('6347500693000317849');" onmouseout="out('6347500693000317849');" style=""> 210             case DATE:                                                                                   </span>
<span class="-9142021229939239714" onmouseenter="enter('-9142021229939239714');" onmouseout="out('-9142021229939239714');" style=""> 211                 response = Date.class;                                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 212                 break;                                                                                   </span>
<span class="-3124240416500440487" onmouseenter="enter('-3124240416500440487');" onmouseout="out('-3124240416500440487');" style=""> 213             case DECIMAL:                                                                                </span>
<span class="2581462076834923849" onmouseenter="enter('2581462076834923849');" onmouseout="out('2581462076834923849');" style=""> 214                 response = BigDecimal.class;                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 215                 break;                                                                                   </span>
<span class="-8874916124792368887" onmouseenter="enter('-8874916124792368887');" onmouseout="out('-8874916124792368887');" style=""> 216             case MONEY:                                                                                  </span>
<span class="-3304037034117053709" onmouseenter="enter('-3304037034117053709');" onmouseout="out('-3304037034117053709');" style=""> 217                 response = Money.class;                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 218                 break;                                                                                   </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 219             case INTEGER:                                                                                </span>
<span class="3505410153004371202" onmouseenter="enter('3505410153004371202');" onmouseout="out('3505410153004371202');" style=""> 220                 response = Integer.TYPE;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 221                 break;                                                                                   </span>
<span class="1143803050270343828" onmouseenter="enter('1143803050270343828');" onmouseout="out('1143803050270343828');" style=""> 222             case UNKNOWN:                                                                                </span>
<span class="-7560988579214347129" onmouseenter="enter('-7560988579214347129');" onmouseout="out('-7560988579214347129');" style=""> 223                 response = null;                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 224                 break;                                                                                   </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 225             default:                                                                                     </span>
<span class="5514005520990739575" onmouseenter="enter('5514005520990739575');" onmouseout="out('5514005520990739575');" style=""> 226                 response = String.class;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 227                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228         }                                                                                                </span>
<span  style=""> 229                                                                                                          </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 230         return response;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231     }                                                                                                    </span>
<span  style=""> 232                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 233     @Override                                                                                            </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 234     public Serializable createPopulatedInstance(Serializable instance, Entity entity,                    </span>
<span class="7620597898847416584" onmouseenter="enter('7620597898847416584');" onmouseout="out('7620597898847416584');" style=""> 235             Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId) throws ValidationException { </span>
<span class="895901652489968225" onmouseenter="enter('895901652489968225');" onmouseout="out('895901652489968225');" style=""> 236         return createPopulatedInstance(instance, entity, unfilteredProperties, setId, true);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237     }                                                                                                    </span>
<span  style=""> 238                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 239     @Override                                                                                            </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 240     public Serializable createPopulatedInstance(Serializable instance, Entity entity,                    </span>
<span class="-6938882731089232507" onmouseenter="enter('-6938882731089232507');" onmouseout="out('-6938882731089232507');" style=""><abbr title=" 241             Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties) throws ValidationException {"> 241             Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedPrðŸ”µ</abbr></span>
<span class="-8732291188132739434" onmouseenter="enter('-8732291188132739434');" onmouseout="out('-8732291188132739434');" style=""><abbr title=" 242         final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredProperties);"> 242         final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredPropertðŸ”µ</abbr></span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 243         FieldManager fieldManager = getFieldManager();                                                   </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 244         boolean handled = false;                                                                         </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 245         for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {            </span>
<span class="930709630548418813" onmouseenter="enter('930709630548418813');" onmouseout="out('930709630548418813');" style=""><abbr title=" 246             MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 246             MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPrðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 247             if (MetadataProviderResponse.NOT_HANDLED != response) {                                      </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 248                 handled = true;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249             }                                                                                            </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 250             if (MetadataProviderResponse.HANDLED_BREAK == response) {                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 251                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253         }                                                                                                </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 254         if (!handled) {                                                                                  </span>
<span class="6331160453122921870" onmouseenter="enter('6331160453122921870');" onmouseout="out('6331160453122921870');" style=""><abbr title=" 255             defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 255             defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256         }                                                                                                </span>
<span class="-3308237452429324216" onmouseenter="enter('-3308237452429324216');" onmouseout="out('-3308237452429324216');" style=""><abbr title=" 257         //Order media field, map field and rule builder fields last, as they will have some validation components that depend on previous values"> 257         //Order media field, map field and rule builder fields last, as they will have some validation coðŸ”µ</abbr></span>
<span class="4866803097244618146" onmouseenter="enter('4866803097244618146');" onmouseout="out('4866803097244618146');" style=""> 258         Property[] sortedProperties = entity.getProperties();                                            </span>
<span class="5005865694587957669" onmouseenter="enter('5005865694587957669');" onmouseout="out('5005865694587957669');" style=""> 259         Arrays.sort(sortedProperties, new Comparator&lt;Property&gt;() {                                       </span>
<span  style=""> 260                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 261             @Override                                                                                    </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 262             public int compare(Property o1, Property o2) {                                               </span>
<span class="4801041391951231473" onmouseenter="enter('4801041391951231473');" onmouseout="out('4801041391951231473');" style=""> 263                 BasicFieldMetadata mo1 = (BasicFieldMetadata) mergedProperties.get(o1.getName());        </span>
<span class="8712312491906706674" onmouseenter="enter('8712312491906706674');" onmouseout="out('8712312491906706674');" style=""> 264                 BasicFieldMetadata mo2 = (BasicFieldMetadata) mergedProperties.get(o2.getName());        </span>
<span class="5597729834250389465" onmouseenter="enter('5597729834250389465');" onmouseout="out('5597729834250389465');" style=""><abbr title=" 265                 boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo1.getFieldType() ||"> 265                 boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (ðŸ”µ</abbr></span>
<span class="-5228840553210193176" onmouseenter="enter('-5228840553210193176');" onmouseout="out('-5228840553210193176');" style=""> 266                         SupportedFieldType.RULE_WITH_QUANTITY==mo1.getFieldType() ||                     </span>
<span class="-2825740162482404988" onmouseenter="enter('-2825740162482404988');" onmouseout="out('-2825740162482404988');" style=""> 267                         SupportedFieldType.RULE_SIMPLE_TIME==mo1.getFieldType() ||                       </span>
<span class="-2758640436691235457" onmouseenter="enter('-2758640436691235457');" onmouseout="out('-2758640436691235457');" style=""><abbr title=" 268                         SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 268                         SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManageðŸ”µ</abbr></span>
<span class="4460185052151715074" onmouseenter="enter('4460185052151715074');" onmouseout="out('4460185052151715074');" style=""><abbr title=" 269                 boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo2.getFieldType() ||"> 269                 boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (ðŸ”µ</abbr></span>
<span class="1101038090453452590" onmouseenter="enter('1101038090453452590');" onmouseout="out('1101038090453452590');" style=""> 270                         SupportedFieldType.RULE_WITH_QUANTITY==mo2.getFieldType() ||                     </span>
<span class="-8197603398477948159" onmouseenter="enter('-8197603398477948159');" onmouseout="out('-8197603398477948159');" style=""> 271                         SupportedFieldType.RULE_SIMPLE_TIME==mo2.getFieldType() ||                       </span>
<span class="-275758415706895485" onmouseenter="enter('-275758415706895485');" onmouseout="out('-275758415706895485');" style=""><abbr title=" 272                         SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 272                         SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManageðŸ”µ</abbr></span>
<span class="-2026914999367619686" onmouseenter="enter('-2026914999367619686');" onmouseout="out('-2026914999367619686');" style=""> 273                 if (isLate1 &amp;&amp; !isLate2) {                                                               </span>
<span class="6787741487180588680" onmouseenter="enter('6787741487180588680');" onmouseout="out('6787741487180588680');" style=""> 274                     return 1;                                                                            </span>
<span class="-3681644454129428558" onmouseenter="enter('-3681644454129428558');" onmouseout="out('-3681644454129428558');" style=""> 275                 } else if (!isLate1 &amp;&amp; isLate2) {                                                        </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 276                     return -1;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277                 }                                                                                        </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 278                 return 0;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 280         });                                                                                              </span>
<span class="1932565359130544851" onmouseenter="enter('1932565359130544851');" onmouseout="out('1932565359130544851');" style=""><abbr title=" 281         Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.class);"> 281         Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrapðŸ”µ</abbr></span>
<span class="5994630726155221613" onmouseenter="enter('5994630726155221613');" onmouseout="out('5994630726155221613');" style=""> 282         FlushMode originalFlushMode = session.getHibernateFlushMode();                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 283         try {                                                                                            </span>
<span class="5642929065352278415" onmouseenter="enter('5642929065352278415');" onmouseout="out('5642929065352278415');" style=""> 284             session.setHibernateFlushMode(FlushMode.MANUAL);                                             </span>
<span class="3800930097913678918" onmouseenter="enter('3800930097913678918');" onmouseout="out('3800930097913678918');" style=""> 285             RuntimeException entityPersistenceException = null;                                          </span>
<span class="7436252520289959863" onmouseenter="enter('7436252520289959863');" onmouseout="out('7436252520289959863');" style=""> 286             for (Property property : sortedProperties) {                                                 </span>
<span class="1357949122558141334" onmouseenter="enter('1357949122558141334');" onmouseout="out('1357949122558141334');" style=""><abbr title=" 287                 BasicFieldMetadata metadata = (BasicFieldMetadata) mergedProperties.get(property.getName());"> 287                 BasicFieldMetadata metadata = (BasicFieldMetadata) mergedProperties.get(property.getName(ðŸ”µ</abbr></span>
<span class="-2710932228242800712" onmouseenter="enter('-2710932228242800712');" onmouseout="out('-2710932228242800712');" style=""> 288                 Class&lt;?&gt; returnType;                                                                     </span>
<span class="8439611434668123958" onmouseenter="enter('8439611434668123958');" onmouseout="out('8439611434668123958');" style=""><abbr title=" 289                 if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().startsWith(&quot;__&quot;)) {"> 289                 if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().sðŸ”µ</abbr></span>
<span class="-3329718253928059141" onmouseenter="enter('-3329718253928059141');" onmouseout="out('-3329718253928059141');" style=""> 290                     Field field = fieldManager.getField(instance.getClass(), property.getName());        </span>
<span class="-6389169260302086885" onmouseenter="enter('-6389169260302086885');" onmouseout="out('-6389169260302086885');" style=""> 291                     if (field == null) {                                                                 </span>
<span class="2139581581669054854" onmouseenter="enter('2139581581669054854');" onmouseout="out('2139581581669054854');" style=""><abbr title=" 292                         LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 292                         LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 293                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294                     }                                                                                    </span>
<span class="8953519469960391957" onmouseenter="enter('8953519469960391957');" onmouseout="out('8953519469960391957');" style=""> 295                     returnType = field.getType();                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 296                 } else {                                                                                 </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 297                     if (metadata == null) {                                                              </span>
<span class="8114946394939525604" onmouseenter="enter('8114946394939525604');" onmouseout="out('8114946394939525604');" style=""><abbr title=" 298                         LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 298                         LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StriðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 299                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300                     }                                                                                    </span>
<span class="-8567483443765194758" onmouseenter="enter('-8567483443765194758');" onmouseout="out('-8567483443765194758');" style=""> 301                     returnType = getMapFieldType(instance, fieldManager, property);                      </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 302                     if (returnType == null) {                                                            </span>
<span class="1531226167473626096" onmouseenter="enter('1531226167473626096');" onmouseout="out('1531226167473626096');" style=""> 303                         returnType = getBasicBroadleafType(metadata.getFieldType());                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305                 }                                                                                        </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 306                 if (returnType == null) {                                                                </span>
<span class="8716882681587381997" onmouseenter="enter('8716882681587381997');" onmouseout="out('8716882681587381997');" style=""><abbr title=" 307                     throw new IllegalAccessException(&quot;Unable to determine the value type for the property (&quot; + property.getName() + &quot;)&quot;);"> 307                     throw new IllegalAccessException(&quot;Unable to determine the value type for the propertyðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308                 }                                                                                        </span>
<span class="-1342740262664655807" onmouseenter="enter('-1342740262664655807');" onmouseout="out('-1342740262664655807');" style=""> 309                 String value = property.getValue();                                                      </span>
<span class="6116690946102675760" onmouseenter="enter('6116690946102675760');" onmouseout="out('6116690946102675760');" style=""> 310                 if (metadata != null) {                                                                  </span>
<span  style=""> 311                                                                                                          </span>
<span class="6432907771531110343" onmouseenter="enter('6432907771531110343');" onmouseout="out('6432907771531110343');" style=""> 312                     if (metadata.getFieldType().equals(SupportedFieldType.BOOLEAN)) {                    </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 313                         if (value == null) {                                                             </span>
<span class="-8520936090313964890" onmouseenter="enter('-8520936090313964890');" onmouseout="out('-8520936090313964890');" style=""> 314                             String defaultValue = metadata.getDefaultValue();                            </span>
<span class="-7748715783254025298" onmouseenter="enter('-7748715783254025298');" onmouseout="out('-7748715783254025298');" style=""> 315                             value = StringUtils.isBlank(defaultValue)? &quot;false&quot; : defaultValue;           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316                         }                                                                                </span>
<span class="5830462858832599582" onmouseenter="enter('5830462858832599582');" onmouseout="out('5830462858832599582');" style=""> 317                     } else if (metadata.getFieldType().equals(SupportedFieldType.DATE)) {                </span>
<span class="1584182115233885945" onmouseenter="enter('1584182115233885945');" onmouseout="out('1584182115233885945');" style=""> 318                         if (StringUtils.isEmpty(value)) {                                                </span>
<span class="-7092419811380344208" onmouseenter="enter('-7092419811380344208');" onmouseout="out('-7092419811380344208');" style=""> 319                             value = null;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321                     }                                                                                    </span>
<span  style=""> 322                                                                                                          </span>
<span class="5304497076822353807" onmouseenter="enter('5304497076822353807');" onmouseout="out('5304497076822353807');" style=""><abbr title=" 323                     if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) {"> 323                     if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity,ðŸ”µ</abbr></span>
<span class="-486793269557446445" onmouseenter="enter('-486793269557446445');" onmouseout="out('-486793269557446445');" style=""> 324                         boolean isValid = true;                                                          </span>
<span class="1658940141758117529" onmouseenter="enter('1658940141758117529');" onmouseout="out('1658940141758117529');" style=""><abbr title=" 325                         PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd());"> 325                         PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, propðŸ”µ</abbr></span>
<span class="-7942780495263533884" onmouseenter="enter('-7942780495263533884');" onmouseout="out('-7942780495263533884');" style=""> 326                         handled = false;                                                                 </span>
<span class="3197362083799660545" onmouseenter="enter('3197362083799660545');" onmouseout="out('3197362083799660545');" style=""> 327                         if (value != null) {                                                             </span>
<span class="-3229008606700200313" onmouseenter="enter('-3229008606700200313');" onmouseout="out('-3229008606700200313');" style=""> 328                             for (PopulateValueRequestValidator validator : populateValidators) {         </span>
<span class="884666747315214760" onmouseenter="enter('884666747315214760');" onmouseout="out('884666747315214760');" style=""><abbr title=" 329                                 PropertyValidationResult validationResult = validator.validate(request, instance);"> 329                                 PropertyValidationResult validationResult = validator.validate(request, iðŸ”µ</abbr></span>
<span class="-4364264466893249362" onmouseenter="enter('-4364264466893249362');" onmouseout="out('-4364264466893249362');" style=""> 330                                 if (!validationResult.isValid()) {                                       </span>
<span class="-8273348184937120120" onmouseenter="enter('-8273348184937120120');" onmouseout="out('-8273348184937120120');" style=""><abbr title=" 331                                     entity.addValidationError(property.getName(), validationResult.getErrorMessage());"> 331                                     entity.addValidationError(property.getName(), validationResult.getErrðŸ”µ</abbr></span>
<span class="-5133746822051192612" onmouseenter="enter('-5133746822051192612');" onmouseout="out('-5133746822051192612');" style=""> 332                                     isValid = false;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335                         }                                                                                </span>
<span class="-2043265533105198042" onmouseenter="enter('-2043265533105198042');" onmouseout="out('-2043265533105198042');" style=""> 336                         if (isValid) {                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 337                             try {                                                                        </span>
<span class="493530022350283834" onmouseenter="enter('493530022350283834');" onmouseout="out('493530022350283834');" style=""> 338                                 boolean isBreakDetected = false;                                         </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 339                                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 339                                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceðŸ”µ</abbr></span>
<span class="-2175392382273122455" onmouseenter="enter('-2175392382273122455');" onmouseout="out('-2175392382273122455');" style=""><abbr title=" 340                                     if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (value != null || fieldPersistenceProvider.canHandlePopulateNull())) {"> 340                                     if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (vaðŸ”µ</abbr></span>
<span class="-9063763262484694182" onmouseenter="enter('-9063763262484694182');" onmouseout="out('-9063763262484694182');" style=""><abbr title=" 341                                         MetadataProviderResponse response = fieldPersistenceProvider.populateValue(request, instance);"> 341                                         MetadataProviderResponse response = fieldPersistenceProvider.popuðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 342                                         if (MetadataProviderResponse.NOT_HANDLED != response) {          </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 343                                             handled = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344                                         }                                                                </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 345                                         if (MetadataProviderResponse.HANDLED_BREAK == response) {        </span>
<span class="7683637701498275712" onmouseenter="enter('7683637701498275712');" onmouseout="out('7683637701498275712');" style=""> 346                                             isBreakDetected = true;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349                                 }                                                                        </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 350                                 if (!handled) {                                                          </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 351                                     if (value == null) {                                                 </span>
<span class="882791416935144082" onmouseenter="enter('882791416935144082');" onmouseout="out('882791416935144082');" style=""> 352                                         property.setIsDirty(true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353                                     }                                                                    </span>
<span class="1375938864856367065" onmouseenter="enter('1375938864856367065');" onmouseout="out('1375938864856367065');" style=""><abbr title=" 354                                     defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd()), instance);"> 354                                     defaultFieldPersistenceProvider.populateValue(new PopulateValueRequesðŸ”µ</abbr></span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 355                                     if (value == null) {                                                 </span>
<span class="-9084682385294658879" onmouseenter="enter('-9084682385294658879');" onmouseout="out('-9084682385294658879');" style=""> 356                                         fieldManager.setFieldValue(instance, property.getName(), null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358                                 }                                                                        </span>
<span class="8793300741685062154" onmouseenter="enter('8793300741685062154');" onmouseout="out('8793300741685062154');" style=""><abbr title=" 359                             } catch (ParentEntityPersistenceException | javax.validation.ValidationException e) {"> 359                             } catch (ParentEntityPersistenceException | javax.validation.ValidationExceptðŸ”µ</abbr></span>
<span class="9214632560148736873" onmouseenter="enter('9214632560148736873');" onmouseout="out('9214632560148736873');" style=""> 360                                 entityPersistenceException = e;                                          </span>
<span class="8194585295280636961" onmouseenter="enter('8194585295280636961');" onmouseout="out('8194585295280636961');" style=""> 361                                 cleanupFailedPersistenceAttempt(instance);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 362                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 363                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367             }                                                                                            </span>
<span class="-8941633054064108755" onmouseenter="enter('-8941633054064108755');" onmouseout="out('-8941633054064108755');" style=""> 368             // Only check validation if not the initial add                                              </span>
<span class="3237544980725266527" onmouseenter="enter('3237544980725266527');" onmouseout="out('3237544980725266527');" style=""> 369             if (!entity.isPreAdd()) {                                                                    </span>
<span class="-9050207745018896152" onmouseenter="enter('-9050207745018896152');" onmouseout="out('-9050207745018896152');" style=""> 370                 validate(entity, instance, mergedProperties, validateUnsubmittedProperties);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371             }                                                                                            </span>
<span class="32753067189116500" onmouseenter="enter('32753067189116500');" onmouseout="out('32753067189116500');" style=""><abbr title=" 372             //if validation failed, refresh the current instance so that none of the changes will be persisted"> 372             //if validation failed, refresh the current instance so that none of the changes will be persðŸ”µ</abbr></span>
<span class="-2597695263377724387" onmouseenter="enter('-2597695263377724387');" onmouseout="out('-2597695263377724387');" style=""> 373             if (entity.isValidationFailure()) {                                                          </span>
<span class="-5245333264083845326" onmouseenter="enter('-5245333264083845326');" onmouseout="out('-5245333264083845326');" style=""> 374                 //only refresh the instance if it was managed to begin with                              </span>
<span class="9192371448315551444" onmouseenter="enter('9192371448315551444');" onmouseout="out('9192371448315551444');" style=""><abbr title=" 375                 if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instance)) {"> 375                 if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instanceðŸ”µ</abbr></span>
<span class="5068098197212588956" onmouseenter="enter('5068098197212588956');" onmouseout="out('5068098197212588956');" style=""> 376                     persistenceManager.getDynamicEntityDao().refresh(instance);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377                 }                                                                                        </span>
<span  style=""> 378                                                                                                          </span>
<span class="-2797407664577460515" onmouseenter="enter('-2797407664577460515');" onmouseout="out('-2797407664577460515');" style=""><abbr title=" 379                 //re-initialize the valid properties for the entity in order to deal with the potential of not"> 379                 //re-initialize the valid properties for the entity in order to deal with the potential oðŸ”µ</abbr></span>
<span class="7620881433898036398" onmouseenter="enter('7620881433898036398');" onmouseout="out('7620881433898036398');" style=""> 380                 //completely sending over all checkbox/radio fields                                      </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 381                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 382                 entityList.add(instance);                                                                </span>
<span class="-903163901416962067" onmouseenter="enter('-903163901416962067');" onmouseout="out('-903163901416962067');" style=""> 383                 Entity invalid = getRecords(mergedProperties, entityList, null, null, null)[0];          </span>
<span class="-434334858457397385" onmouseenter="enter('-434334858457397385');" onmouseout="out('-434334858457397385');" style=""> 384                 invalid.setPropertyValidationErrors(entity.getPropertyValidationErrors());               </span>
<span class="-4617220526414327800" onmouseenter="enter('-4617220526414327800');" onmouseout="out('-4617220526414327800');" style=""> 385                 invalid.setGlobalValidationErrors(entity.getGlobalValidationErrors());                   </span>
<span class="-3275304366399180151" onmouseenter="enter('-3275304366399180151');" onmouseout="out('-3275304366399180151');" style=""> 386                 invalid.overridePropertyValues(entity);                                                  </span>
<span  style=""> 387                                                                                                          </span>
<span class="-5826985379545468824" onmouseenter="enter('-5826985379545468824');" onmouseout="out('-5826985379545468824');" style=""><abbr title=" 388                 String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.getGlobalValidationErrors());"> 388                 String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), ðŸ”µ</abbr></span>
<span class="-1571824840661221764" onmouseenter="enter('-1571824840661221764');" onmouseout="out('-1571824840661221764');" style=""> 389                 throw new ValidationException(invalid, message);                                         </span>
<span class="-4684713380455277597" onmouseenter="enter('-4684713380455277597');" onmouseout="out('-4684713380455277597');" style=""> 390             } else if (entityPersistenceException != null) {                                             </span>
<span class="1045288364868684284" onmouseenter="enter('1045288364868684284');" onmouseout="out('1045288364868684284');" style=""> 391                 throw ExceptionHelper.refineException(entityPersistenceException.getCause());            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 392             } else {                                                                                     </span>
<span class="7383617604540684898" onmouseenter="enter('7383617604540684898');" onmouseout="out('7383617604540684898');" style=""> 393                 fieldManager.persistMiddleEntities();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 394             }                                                                                            </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 395         } catch (IllegalAccessException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 396             throw new PersistenceException(e);                                                           </span>
<span class="6243028624057522413" onmouseenter="enter('6243028624057522413');" onmouseout="out('6243028624057522413');" style=""> 397         } catch (InstantiationException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 398             throw new PersistenceException(e);                                                           </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 399         } finally {                                                                                      </span>
<span class="4677599505604490897" onmouseenter="enter('4677599505604490897');" onmouseout="out('4677599505604490897');" style=""> 400             session.setHibernateFlushMode(originalFlushMode);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401         }                                                                                                </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style=""> 402         return instance;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403     }                                                                                                    </span>
<span  style=""> 404                                                                                                          </span>
<span class="461529783746476585" onmouseenter="enter('461529783746476585');" onmouseout="out('461529783746476585');" style=""><abbr title=" 405     protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable instance,"> 405     protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable iðŸ”µ</abbr></span>
<span class="3885863412641560188" onmouseenter="enter('3885863412641560188');" onmouseout="out('3885863412641560188');" style=""><abbr title=" 406                                              Boolean setId, BasicFieldMetadata metadata, Entity entity, String value) throws IllegalAccessException {"> 406                                              Boolean setId, BasicFieldMetadata metadata, Entity entity, SðŸ”µ</abbr></span>
<span class="-8863585303780993216" onmouseenter="enter('-8863585303780993216');" onmouseout="out('-8863585303780993216');" style=""> 407         Boolean mutable = metadata.getMutable();                                                         </span>
<span class="8777806519724314753" onmouseenter="enter('8777806519724314753');" onmouseout="out('8777806519724314753');" style=""> 408         Boolean readOnly = metadata.getReadOnly();                                                       </span>
<span class="949029723485795199" onmouseenter="enter('949029723485795199');" onmouseout="out('949029723485795199');" style=""><abbr title=" 409         boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp; property.getEnabled();"> 409         boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp;ðŸ”µ</abbr></span>
<span  style=""> 410                                                                                                          </span>
<span class="-5466596695953259298" onmouseenter="enter('-5466596695953259298');" onmouseout="out('-5466596695953259298');" style=""> 411         if (generalConditionsMet &amp;&amp; value == null) {                                                     </span>
<span class="3784846250944455561" onmouseenter="enter('3784846250944455561');" onmouseout="out('3784846250944455561');" style=""> 412             boolean currentValueIsNotNull = false;                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 413             try {                                                                                        </span>
<span class="-6026008610562760887" onmouseenter="enter('-6026008610562760887');" onmouseout="out('-6026008610562760887');" style=""> 414                 currentValueIsNotNull = fieldManager.getFieldValue(instance, property.getName()) != null;</span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 415             } catch (FieldNotAvailableException e) {                                                     </span>
<span class="5941411430976365683" onmouseenter="enter('5941411430976365683');" onmouseout="out('5941411430976365683');" style=""> 416                 throw new IllegalArgumentException(e);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417             }                                                                                            </span>
<span  style=""> 418                                                                                                          </span>
<span class="2174296922893169949" onmouseenter="enter('2174296922893169949');" onmouseout="out('2174296922893169949');" style=""> 419             boolean valueIsNotNullId = metadata.getFieldType() != SupportedFieldType.ID || setId;        </span>
<span class="3378189448655180920" onmouseenter="enter('3378189448655180920');" onmouseout="out('3378189448655180920');" style=""> 420             boolean valueIsNotPassword = metadata.getFieldType() != SupportedFieldType.PASSWORD;         </span>
<span  style=""> 421                                                                                                          </span>
<span class="-802153418821632058" onmouseenter="enter('-802153418821632058');" onmouseout="out('-802153418821632058');" style=""> 422             return currentValueIsNotNull &amp;&amp; !entity.isPreAdd() &amp;&amp; valueIsNotNullId &amp;&amp; valueIsNotPassword;</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423         }                                                                                                </span>
<span class="7805064061324166126" onmouseenter="enter('7805064061324166126');" onmouseout="out('7805064061324166126');" style=""> 424         return generalConditionsMet;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425     }                                                                                                    </span>
<span  style=""> 426                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 427     @Override                                                                                            </span>
<span class="1852783233485112885" onmouseenter="enter('1852783233485112885');" onmouseout="out('1852783233485112885');" style=""><abbr title=" 428     public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FieldMetadata&gt; alternateMergedProperties, String pathToTargetObject) {"> 428     public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;ðŸ”µ</abbr></span>
<span class="-6187207773895344621" onmouseenter="enter('-6187207773895344621');" onmouseout="out('-6187207773895344621');" style=""> 429         List&lt;Serializable&gt; records = new ArrayList&lt;Serializable&gt;(1);                                     </span>
<span class="5878022765752800842" onmouseenter="enter('5878022765752800842');" onmouseout="out('5878022765752800842');" style=""> 430         records.add(record);                                                                             </span>
<span class="496294912681907043" onmouseenter="enter('496294912681907043');" onmouseout="out('496294912681907043');" style=""><abbr title=" 431         Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTargetObject, null);"> 431         Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedPropertiesðŸ”µ</abbr></span>
<span class="-9062758151482460865" onmouseenter="enter('-9062758151482460865');" onmouseout="out('-9062758151482460865');" style=""> 432         return productEntities[0];                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433     }                                                                                                    </span>
<span  style=""> 434                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 435     @Override                                                                                            </span>
<span class="5781949221273262010" onmouseenter="enter('5781949221273262010');" onmouseout="out('5781949221273262010');" style=""><abbr title=" 436     public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, Serializable record) {"> 436     public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, SðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 437         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 437         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getNamðŸ”µ</abbr></span>
<span class="-5151099947242221721" onmouseenter="enter('-5151099947242221721');" onmouseout="out('-5151099947242221721');" style=""> 438         return getRecord(mergedProperties, record, null, null);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439     }                                                                                                    </span>
<span  style=""> 440                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 441     @Override                                                                                            </span>
<span class="-4520532598669526895" onmouseenter="enter('-4520532598669526895');" onmouseout="out('-4520532598669526895');" style=""><abbr title=" 442     public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? extends Serializable&gt; records) {"> 442     public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspectiveðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 443         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 443         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getNamðŸ”µ</abbr></span>
<span class="-928847591506271316" onmouseenter="enter('-928847591506271316');" onmouseout="out('-928847591506271316');" style=""> 444         return getRecords(mergedProperties, records, null, null, null);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445     }                                                                                                    </span>
<span  style=""> 446                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 447     @Override                                                                                            </span>
<span class="-8278894720012200265" onmouseenter="enter('-8278894720012200265');" onmouseout="out('-8278894720012200265');" style=""><abbr title=" 448     public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persistencePerspective) {"> 448     public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspectiveðŸ”µ</abbr></span>
<span class="-3722133806289408051" onmouseenter="enter('-3722133806289408051');" onmouseout="out('-3722133806289408051');" style=""><abbr title=" 449         return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspective);"> 449         return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistenceðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450     }                                                                                                    </span>
<span  style=""> 451                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 452     @Override                                                                                            </span>
<span class="-721724575932279638" onmouseenter="enter('-721724575932279638');" onmouseout="out('-721724575932279638');" style=""><abbr title=" 453     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; records) {"> 453     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends SerialiðŸ”µ</abbr></span>
<span class="8327530304239683256" onmouseenter="enter('8327530304239683256');" onmouseout="out('8327530304239683256');" style=""> 454         return getRecords(primaryMergedProperties, records, null, null, null);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455     }                                                                                                    </span>
<span  style=""> 456                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 457     @Override                                                                                            </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 458     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,             </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 459                                List&lt;? extends Serializable&gt; records,                                     </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 460                                Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,           </span>
<span class="-4377947839867578072" onmouseenter="enter('-4377947839867578072');" onmouseout="out('-4377947839867578072');" style=""> 461                                String pathToTargetObject) {                                              </span>
<span class="4685453067306146439" onmouseenter="enter('4685453067306146439');" onmouseout="out('4685453067306146439');" style=""><abbr title=" 462         return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTargetObject, null);"> 462         return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedPropertiesðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463     }                                                                                                    </span>
<span  style=""> 464                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 465     @Override                                                                                            </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 466     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,             </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 467                                List&lt;? extends Serializable&gt; records,                                     </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 468                                Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,           </span>
<span class="8335655514773173486" onmouseenter="enter('8335655514773173486');" onmouseout="out('8335655514773173486');" style=""> 469                                String pathToTargetObject,                                                </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 470                                String[] customCriteria) {                                                </span>
<span class="-7988348483038990196" onmouseenter="enter('-7988348483038990196');" onmouseout="out('-7988348483038990196');" style=""><abbr title=" 471         Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedProperties);"> 471         Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfiltereðŸ”µ</abbr></span>
<span class="-3378908089969836890" onmouseenter="enter('-3378908089969836890');" onmouseout="out('-3378908089969836890');" style=""><abbr title=" 472         Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergedProperties);"> 472         Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilðŸ”µ</abbr></span>
<span class="-6780502465801472168" onmouseenter="enter('-6780502465801472168');" onmouseout="out('-6780502465801472168');" style=""> 473         Entity[] entities = new Entity[records.size()];                                                  </span>
<span class="-3238093963120777374" onmouseenter="enter('-3238093963120777374');" onmouseout="out('-3238093963120777374');" style=""> 474         int j = 0;                                                                                       </span>
<span class="3456801759115552322" onmouseenter="enter('3456801759115552322');" onmouseout="out('3456801759115552322');" style=""> 475         for (Serializable recordEntity : records) {                                                      </span>
<span class="619523180404568822" onmouseenter="enter('619523180404568822');" onmouseout="out('619523180404568822');" style=""> 476             Serializable entity;                                                                         </span>
<span class="-2186067977699467203" onmouseenter="enter('-2186067977699467203');" onmouseout="out('-2186067977699467203');" style=""> 477             if (pathToTargetObject != null) {                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 478                 try {                                                                                    </span>
<span class="-5492139625117264664" onmouseenter="enter('-5492139625117264664');" onmouseout="out('-5492139625117264664');" style=""><abbr title=" 479                     entity = (Serializable) getFieldManager().getFieldValue(recordEntity, pathToTargetObject);"> 479                     entity = (Serializable) getFieldManager().getFieldValue(recordEntity, pathToTargetObjðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 480                 } catch (Exception e) {                                                                  </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 481                     throw new PersistenceException(e);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 483             } else {                                                                                     </span>
<span class="-6074236754568201796" onmouseenter="enter('-6074236754568201796');" onmouseout="out('-6074236754568201796');" style=""> 484                 entity = recordEntity;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485             }                                                                                            </span>
<span class="8514876957999010588" onmouseenter="enter('8514876957999010588');" onmouseout="out('8514876957999010588');" style=""> 486             Entity entityItem = new Entity();                                                            </span>
<span class="3587737780108495887" onmouseenter="enter('3587737780108495887');" onmouseout="out('3587737780108495887');" style=""> 487             entityItem.setType(new String[] { entity.getClass().getName() });                            </span>
<span class="-2252000440729832309" onmouseenter="enter('-2252000440729832309');" onmouseout="out('-2252000440729832309');" style=""> 488             entities[j] = entityItem;                                                                    </span>
<span  style=""> 489                                                                                                          </span>
<span class="3961822747852490020" onmouseenter="enter('3961822747852490020');" onmouseout="out('3961822747852490020');" style=""> 490             List&lt;Property&gt; props = new ArrayList&lt;Property&gt;(primaryMergedProperties.size());              </span>
<span class="-4152224460170095636" onmouseenter="enter('-4152224460170095636');" onmouseout="out('-4152224460170095636');" style=""><abbr title=" 491             extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria);"> 491             extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria)ðŸ”µ</abbr></span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 492             if (alternateMergedProperties != null) {                                                     </span>
<span class="-9087051985097357993" onmouseenter="enter('-9087051985097357993');" onmouseout="out('-9087051985097357993');" style=""><abbr title=" 493                 extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriteria);"> 493                 extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, cusðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 494             }                                                                                            </span>
<span  style=""> 495                                                                                                          </span>
<span class="-5089629635789493807" onmouseenter="enter('-5089629635789493807');" onmouseout="out('-5089629635789493807');" style=""> 496             // Try to add the &quot;main name&quot; property. Log a debug message if we can&#x27;t                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 497             try {                                                                                        </span>
<span class="5380947615780799183" onmouseenter="enter('5380947615780799183');" onmouseout="out('5380947615780799183');" style=""> 498                 Property p = new Property();                                                             </span>
<span class="1925482889972291082" onmouseenter="enter('1925482889972291082');" onmouseout="out('1925482889972291082');" style=""> 499                 p.setName(MAIN_ENTITY_NAME_PROPERTY);                                                    </span>
<span class="-280105646141823521" onmouseenter="enter('-280105646141823521');" onmouseout="out('-280105646141823521');" style=""> 500                 String mainEntityName = (String) MethodUtils.invokeMethod(entity, &quot;getMainEntityName&quot;);  </span>
<span class="-4568210868795612410" onmouseenter="enter('-4568210868795612410');" onmouseout="out('-4568210868795612410');" style=""> 501                 p.setValue(mainEntityName);                                                              </span>
<span class="-4361225624073911918" onmouseenter="enter('-4361225624073911918');" onmouseout="out('-4361225624073911918');" style=""> 502                 props.add(p);                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 503             } catch (Exception e) {                                                                      </span>
<span class="8396621627303093896" onmouseenter="enter('8396621627303093896');" onmouseout="out('8396621627303093896');" style=""> 504                 LOG.debug(String.format(&quot;Could not execute the getMainEntityName() method for [%s]&quot;,     </span>
<span class="210384044775512031" onmouseenter="enter('210384044775512031');" onmouseout="out('210384044775512031');" style=""> 505                         entity.getClass().getName()), e);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506             }                                                                                            </span>
<span  style=""> 507                                                                                                          </span>
<span class="-8721953412008939855" onmouseenter="enter('-8721953412008939855');" onmouseout="out('-8721953412008939855');" style=""> 508             // Try to add the alternate id property if available                                         </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 509             if (alternateMergedProperties != null) {                                                     </span>
<span class="-2729730257234978997" onmouseenter="enter('-2729730257234978997');" onmouseout="out('-2729730257234978997');" style=""> 510                 for (Entry&lt;String, FieldMetadata&gt; entry : alternateMergedProperties.entrySet()) {        </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 511                     if (entry.getValue() instanceof BasicFieldMetadata) {                                </span>
<span class="-3735738621021538581" onmouseenter="enter('-3735738621021538581');" onmouseout="out('-3735738621021538581');" style=""><abbr title=" 512                         if (((BasicFieldMetadata) entry.getValue()).getFieldType() == SupportedFieldType.ID) {"> 512                         if (((BasicFieldMetadata) entry.getValue()).getFieldType() == SupportedFieldType.ðŸ”µ</abbr></span>
<span class="475815096463760847" onmouseenter="enter('475815096463760847');" onmouseout="out('475815096463760847');" style=""><abbr title=" 513                             Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadata&gt;();"> 513                             Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadðŸ”µ</abbr></span>
<span class="-4538053591093527376" onmouseenter="enter('-4538053591093527376');" onmouseout="out('-4538053591093527376');" style=""> 514                             alternateOnEntity.put(entry.getKey(), entry.getValue());                     </span>
<span class="6846951436664779248" onmouseenter="enter('6846951436664779248');" onmouseout="out('6846951436664779248');" style=""> 515                             List&lt;Property&gt; props2 = new ArrayList&lt;Property&gt;();                           </span>
<span class="5345785186371221305" onmouseenter="enter('5345785186371221305');" onmouseout="out('5345785186371221305');" style=""><abbr title=" 516                             extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCriteria);"> 516                             extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2ðŸ”µ</abbr></span>
<span class="-7220107863695845032" onmouseenter="enter('-7220107863695845032');" onmouseout="out('-7220107863695845032');" style=""> 517                             List&lt;Property&gt; filtered = new ArrayList&lt;Property&gt;();                         </span>
<span class="-7311698525315213587" onmouseenter="enter('-7311698525315213587');" onmouseout="out('-7311698525315213587');" style=""> 518                             for (Property prop : props2) {                                               </span>
<span class="6017333932165432493" onmouseenter="enter('6017333932165432493');" onmouseout="out('6017333932165432493');" style=""> 519                                 if (!prop.getName().startsWith(&quot;__&quot;)) {                                  </span>
<span class="-5604579077622831568" onmouseenter="enter('-5604579077622831568');" onmouseout="out('-5604579077622831568');" style=""> 520                                     filtered.add(prop);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522                             }                                                                            </span>
<span class="7776429612545514862" onmouseenter="enter('7776429612545514862');" onmouseout="out('7776429612545514862');" style=""> 523                             if (filtered.size() == 1 &amp;&amp; !filtered.get(0).getName().contains(&quot;.&quot;)) {      </span>
<span class="766644908777739787" onmouseenter="enter('766644908777739787');" onmouseout="out('766644908777739787');" style=""> 524                                 Property alternateIdProp = filtered.get(0);                              </span>
<span class="1444561456824673058" onmouseenter="enter('1444561456824673058');" onmouseout="out('1444561456824673058');" style=""> 525                                 alternateIdProp.setName(ALTERNATE_ID_PROPERTY);                          </span>
<span class="-1260553957514386502" onmouseenter="enter('-1260553957514386502');" onmouseout="out('-1260553957514386502');" style=""> 526                                 props.add(alternateIdProp);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531             }                                                                                            </span>
<span  style=""> 532                                                                                                          </span>
<span class="3140965171760158820" onmouseenter="enter('3140965171760158820');" onmouseout="out('3140965171760158820');" style=""> 533             Property[] properties = new Property[props.size()];                                          </span>
<span class="-5540374985766964035" onmouseenter="enter('-5540374985766964035');" onmouseout="out('-5540374985766964035');" style=""> 534             properties = props.toArray(properties);                                                      </span>
<span class="2992548432186189131" onmouseenter="enter('2992548432186189131');" onmouseout="out('2992548432186189131');" style=""> 535             entityItem.setProperties(properties);                                                        </span>
<span class="-5688619574901767370" onmouseenter="enter('-5688619574901767370');" onmouseout="out('-5688619574901767370');" style=""> 536             j++;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537         }                                                                                                </span>
<span  style=""> 538                                                                                                          </span>
<span class="-7616126935915446236" onmouseenter="enter('-7616126935915446236');" onmouseout="out('-7616126935915446236');" style=""> 539         return entities;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540     }                                                                                                    </span>
<span  style=""> 541                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 542     @Override                                                                                            </span>
<span class="-1580059539469245457" onmouseenter="enter('-1580059539469245457');" onmouseout="out('-1580059539469245457');" style=""> 543     public Entity[] getRecords(FetchExtractionRequest fetchExtractionRequest) {                          </span>
<span class="-7749788048664948511" onmouseenter="enter('-7749788048664948511');" onmouseout="out('-7749788048664948511');" style=""> 544         return fetchWrapper.getRecords(fetchExtractionRequest);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545     }                                                                                                    </span>
<span  style=""> 546                                                                                                          </span>
<span class="2943865710042007016" onmouseenter="enter('2943865710042007016');" onmouseout="out('2943865710042007016');" style=""> 547     protected void extractPropertiesFromPersistentEntity(Map&lt;String, FieldMetadata&gt; mergedProperties,    </span>
<span class="-3214801195397343505" onmouseenter="enter('-3214801195397343505');" onmouseout="out('-3214801195397343505');" style=""> 548                                                          Serializable entity,                            </span>
<span class="6006324038342333129" onmouseenter="enter('6006324038342333129');" onmouseout="out('6006324038342333129');" style=""> 549                                                          List&lt;Property&gt; props,                           </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 550                                                          String[] customCriteria) {                      </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 551         FieldManager fieldManager = getFieldManager();                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 552         try {                                                                                            </span>
<span class="3586746813038594040" onmouseenter="enter('3586746813038594040');" onmouseout="out('3586746813038594040');" style=""> 553             if (entity instanceof AdminMainEntity) {                                                     </span>
<span class="-7831041928171184784" onmouseenter="enter('-7831041928171184784');" onmouseout="out('-7831041928171184784');" style=""> 554                 //Create an invisible property for the admin main entity name, if applicable.            </span>
<span class="4236597300486677730" onmouseenter="enter('4236597300486677730');" onmouseout="out('4236597300486677730');" style=""> 555                 //This is useful for ToOneLookups if that ToOneLookup uses AdminMainEntity to drive      </span>
<span class="2696338225815060194" onmouseenter="enter('2696338225815060194');" onmouseout="out('2696338225815060194');" style=""> 556                 //its display name.                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 557                 try {                                                                                    </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 558                     Property propertyItem = new Property();                                              </span>
<span class="459927527015615277" onmouseenter="enter('459927527015615277');" onmouseout="out('459927527015615277');" style=""> 559                     propertyItem.setName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);                     </span>
<span class="-3439538412113948348" onmouseenter="enter('-3439538412113948348');" onmouseout="out('-3439538412113948348');" style=""> 560                     propertyItem.setValue(((AdminMainEntity) entity).getMainEntityName());               </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 561                     props.add(propertyItem);                                                             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 562                 } catch (Exception e) {                                                                  </span>
<span class="-6660676054828691164" onmouseenter="enter('-6660676054828691164');" onmouseout="out('-6660676054828691164');" style=""><abbr title=" 563                     //do nothing here except for not add the property. Exceptions could occur when there is a validation"> 563                     //do nothing here except for not add the property. Exceptions could occur when there ðŸ”µ</abbr></span>
<span class="6622622754482242268" onmouseenter="enter('6622622754482242268');" onmouseout="out('6622622754482242268');" style=""><abbr title=" 564                     //issue and some properties/relationships that are used for gleaning the main entity name end up"> 564                     //issue and some properties/relationships that are used for gleaning the main entity ðŸ”µ</abbr></span>
<span class="-3324578144663288556" onmouseenter="enter('-3324578144663288556');" onmouseout="out('-3324578144663288556');" style=""> 565                     //not being set                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567             }                                                                                            </span>
<span class="6525223774393628953" onmouseenter="enter('6525223774393628953');" onmouseout="out('6525223774393628953');" style=""> 568             for (Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 569                 String property = entry.getKey();                                                        </span>
<span class="-6557658272043627235" onmouseenter="enter('-6557658272043627235');" onmouseout="out('-6557658272043627235');" style=""> 570                 BasicFieldMetadata metadata = (BasicFieldMetadata) entry.getValue();                     </span>
<span class="1571137238250878820" onmouseenter="enter('1571137238250878820');" onmouseout="out('1571137238250878820');" style=""><abbr title=" 571                 if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.getClass().isAssignableFrom(Class.forName(metadata.getInheritedFromType()))) {"> 571                 if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) ||ðŸ”µ</abbr></span>
<span class="6995086675671638042" onmouseenter="enter('6995086675671638042');" onmouseout="out('6995086675671638042');" style=""> 572                     boolean proceed = true;                                                              </span>
<span class="1084798123261065834" onmouseenter="enter('1084798123261065834');" onmouseout="out('1084798123261065834');" style=""> 573                     if (property.contains(&quot;.&quot;)) {                                                        </span>
<span class="-2955712908532642203" onmouseenter="enter('-2955712908532642203');" onmouseout="out('-2955712908532642203');" style=""> 574                         StringTokenizer tokens = new StringTokenizer(property, &quot;.&quot;);                     </span>
<span class="682329956200427964" onmouseenter="enter('682329956200427964');" onmouseout="out('682329956200427964');" style=""> 575                         Object testObject = entity;                                                      </span>
<span class="2196330750852339617" onmouseenter="enter('2196330750852339617');" onmouseout="out('2196330750852339617');" style=""> 576                         while (tokens.hasMoreTokens()) {                                                 </span>
<span class="-3851292165554806554" onmouseenter="enter('-3851292165554806554');" onmouseout="out('-3851292165554806554');" style=""> 577                             String token = tokens.nextToken();                                           </span>
<span class="7999260116794465545" onmouseenter="enter('7999260116794465545');" onmouseout="out('7999260116794465545');" style=""> 578                             if (tokens.hasMoreTokens()) {                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 579                                 try {                                                                    </span>
<span class="1542151824276478361" onmouseenter="enter('1542151824276478361');" onmouseout="out('1542151824276478361');" style=""> 580                                     testObject = fieldManager.getFieldValue(testObject, token);          </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 581                                 } catch (FieldNotAvailableException e) {                                 </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 582                                     proceed = false;                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 583                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584                                 }                                                                        </span>
<span class="8671980878137139761" onmouseenter="enter('8671980878137139761');" onmouseout="out('8671980878137139761');" style=""> 585                                 if (testObject == null) {                                                </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 586                                     Property propertyItem = new Property();                              </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 587                                     propertyItem.setName(property);                                      </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 588                                     if (props.contains(propertyItem)) {                                  </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 589                                         proceed = false;                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 590                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591                                     }                                                                    </span>
<span class="-1297206784742569730" onmouseenter="enter('-1297206784742569730');" onmouseout="out('-1297206784742569730');" style=""> 592                                     propertyItem.setValue(null);                                         </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 593                                     props.add(propertyItem);                                             </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 594                                     proceed = false;                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 595                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599                     }                                                                                    </span>
<span class="6772675439678687977" onmouseenter="enter('6772675439678687977');" onmouseout="out('6772675439678687977');" style=""> 600                     if (!proceed) {                                                                      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 601                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602                     }                                                                                    </span>
<span  style=""> 603                                                                                                          </span>
<span class="-7680907447726339638" onmouseenter="enter('-7680907447726339638');" onmouseout="out('-7680907447726339638');" style=""> 604                     boolean isFieldAccessible = true;                                                    </span>
<span class="1714704837357165345" onmouseenter="enter('1714704837357165345');" onmouseout="out('1714704837357165345');" style=""> 605                     Object value = null;                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 606                     try {                                                                                </span>
<span class="-802340144122893040" onmouseenter="enter('-802340144122893040');" onmouseout="out('-802340144122893040');" style=""> 607                         value = fieldManager.getFieldValue(entity, property);                            </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 608                     } catch (FieldNotAvailableException e) {                                             </span>
<span class="-5134531397184128099" onmouseenter="enter('-5134531397184128099');" onmouseout="out('-5134531397184128099');" style=""> 609                         isFieldAccessible = false;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610                     }                                                                                    </span>
<span class="-1242713994964830615" onmouseenter="enter('-1242713994964830615');" onmouseout="out('-1242713994964830615');" style=""> 611                     checkField:                                                                          </span>
<span class="5677081435180812955" onmouseenter="enter('5677081435180812955');" onmouseout="out('5677081435180812955');" style=""> 612                     {                                                                                    </span>
<span class="-358387007955156467" onmouseenter="enter('-358387007955156467');" onmouseout="out('-358387007955156467');" style=""> 613                         if (isFieldAccessible) {                                                         </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 614                             Property propertyItem = new Property();                                      </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 615                             propertyItem.setName(property);                                              </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 616                             if (props.contains(propertyItem)) {                                          </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 617                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618                             }                                                                            </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 619                             props.add(propertyItem);                                                     </span>
<span class="4812619489526695632" onmouseenter="enter('4812619489526695632');" onmouseout="out('4812619489526695632');" style=""> 620                             String displayVal = propertyItem.getDisplayValue();                          </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 621                             boolean handled = false;                                                     </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 622                             for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 622                             for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProvðŸ”µ</abbr></span>
<span class="-6209348320960420357" onmouseenter="enter('-6209348320960420357');" onmouseout="out('-6209348320960420357');" style=""><abbr title=" 623                                 MetadataProviderResponse response = fieldPersistenceProvider.extractValue("> 623                                 MetadataProviderResponse response = fieldPersistenceProvider.extractValueðŸ”µ</abbr></span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""><abbr title=" 624                                         new ExtractValueRequest(props, fieldManager, metadata, value, displayVal,"> 624                                         new ExtractValueRequest(props, fieldManager, metadata, value, disðŸ”µ</abbr></span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""><abbr title=" 625                                                 persistenceManager, this, entity, customCriteria), propertyItem);"> 625                                                 persistenceManager, this, entity, customCriteria), properðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 626                                 if (MetadataProviderResponse.NOT_HANDLED != response) {                  </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 627                                     handled = true;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628                                 }                                                                        </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 629                                 if (MetadataProviderResponse.HANDLED_BREAK == response) {                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 630                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 632                             }                                                                            </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 633                             if (!handled) {                                                              </span>
<span class="5660532463858602467" onmouseenter="enter('5660532463858602467');" onmouseout="out('5660532463858602467');" style=""> 634                                 defaultFieldPersistenceProvider.extractValue(                            </span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""><abbr title=" 635                                         new ExtractValueRequest(props, fieldManager, metadata, value, displayVal,"> 635                                         new ExtractValueRequest(props, fieldManager, metadata, value, disðŸ”µ</abbr></span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""><abbr title=" 636                                                 persistenceManager, this, entity, customCriteria), propertyItem);"> 636                                                 persistenceManager, this, entity, customCriteria), properðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 637                             }                                                                            </span>
<span class="-6426908400831293887" onmouseenter="enter('-6426908400831293887');" onmouseout="out('-6426908400831293887');" style=""> 638                             break checkField;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 639                         }                                                                                </span>
<span class="-243574896110033323" onmouseenter="enter('-243574896110033323');" onmouseout="out('-243574896110033323');" style=""> 640                         //try a direct property acquisition via reflection                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 641                         try {                                                                            </span>
<span class="7672623756603956505" onmouseenter="enter('7672623756603956505');" onmouseout="out('7672623756603956505');" style=""> 642                             String strVal = null;                                                        </span>
<span class="3529628081213965373" onmouseenter="enter('3529628081213965373');" onmouseout="out('3529628081213965373');" style=""> 643                             Method method;                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 644                             try {                                                                        </span>
<span class="-188265031890242666" onmouseenter="enter('-188265031890242666');" onmouseout="out('-188265031890242666');" style=""> 645                                 //try a &#x27;get&#x27; prefixed mutator first                                     </span>
<span class="2344864789387251771" onmouseenter="enter('2344864789387251771');" onmouseout="out('2344864789387251771');" style=""><abbr title=" 646                                 String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.substring(1, property.length());"> 646                                 String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.sðŸ”µ</abbr></span>
<span class="6434236432742156955" onmouseenter="enter('6434236432742156955');" onmouseout="out('6434236432742156955');" style=""> 647                                 method = entity.getClass().getMethod(temp, new Class[] {});              </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 648                             } catch (NoSuchMethodException e) {                                          </span>
<span class="5628920111567796624" onmouseenter="enter('5628920111567796624');" onmouseout="out('5628920111567796624');" style=""> 649                                 method = entity.getClass().getMethod(property, new Class[] {});          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650                             }                                                                            </span>
<span class="-1268801467547302511" onmouseenter="enter('-1268801467547302511');" onmouseout="out('-1268801467547302511');" style=""> 651                             value = method.invoke(entity, new String[] {});                              </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 652                             Property propertyItem = new Property();                                      </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 653                             propertyItem.setName(property);                                              </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 654                             if (props.contains(propertyItem)) {                                          </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 655                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 656                             }                                                                            </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 657                             props.add(propertyItem);                                                     </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 658                             if (value == null) {                                                         </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 659                                 strVal = null;                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 660                             } else {                                                                     </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 661                                 if (Date.class.isAssignableFrom(value.getClass())) {                     </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 662                                     strVal = getSimpleDateFormatter().format((Date) value);              </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 663                                 } else if (Timestamp.class.isAssignableFrom(value.getClass())) {         </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""><abbr title=" 664                                     strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));"> 664                                     strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value)ðŸ”µ</abbr></span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 665                                 } else if (Calendar.class.isAssignableFrom(value.getClass())) {          </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""><abbr title=" 666                                     strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());"> 666                                     strVal = getSimpleDateFormatter().format(((Calendar) value).getTime()ðŸ”µ</abbr></span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 667                                 } else if (Double.class.isAssignableFrom(value.getClass())) {            </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 668                                     strVal = getDecimalFormatter().format(value);                        </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 669                                 } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {        </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 670                                     strVal = getDecimalFormatter().format(value);                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 671                                 } else {                                                                 </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 672                                     strVal = value.toString();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 673                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674                             }                                                                            </span>
<span class="-430028306468799565" onmouseenter="enter('-430028306468799565');" onmouseout="out('-430028306468799565');" style=""> 675                             propertyItem.setValue(strVal);                                               </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 676                         } catch (NoSuchMethodException e) {                                              </span>
<span class="8429567218540762891" onmouseenter="enter('8429567218540762891');" onmouseout="out('8429567218540762891');" style=""><abbr title=" 677                             LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(property));"> 677                             LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.ðŸ”µ</abbr></span>
<span class="4115063574789816242" onmouseenter="enter('4115063574789816242');" onmouseout="out('4115063574789816242');" style=""> 678                             //do nothing - this property is simply not in the bean                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 682             }                                                                                            </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 683         } catch (ClassNotFoundException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 684             throw new PersistenceException(e);                                                           </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 685         } catch (IllegalAccessException e) {                                                             </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 686             throw new PersistenceException(e);                                                           </span>
<span class="-291101072954915259" onmouseenter="enter('-291101072954915259');" onmouseout="out('-291101072954915259');" style=""> 687         } catch (InvocationTargetException e) {                                                          </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 688             throw new PersistenceException(e);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690     }                                                                                                    </span>
<span  style=""> 691                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 692     @Override                                                                                            </span>
<span class="-6161842232508714198" onmouseenter="enter('-6161842232508714198');" onmouseout="out('-6161842232508714198');" style=""> 693     public String getStringValueFromGetter(Serializable instance, String propertyName)                   </span>
<span class="1769827535532852924" onmouseenter="enter('1769827535532852924');" onmouseout="out('1769827535532852924');" style=""> 694             throws IllegalAccessException, InvocationTargetException, NoSuchMethodException {            </span>
<span class="5278483549685517830" onmouseenter="enter('5278483549685517830');" onmouseout="out('5278483549685517830');" style=""> 695         Object value = PropertyUtils.getProperty(instance, propertyName);                                </span>
<span class="-6587533849078029241" onmouseenter="enter('-6587533849078029241');" onmouseout="out('-6587533849078029241');" style=""> 696         return formatValue(value);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 697     }                                                                                                    </span>
<span  style=""> 698                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 699     @Override                                                                                            </span>
<span class="1304124062790730283" onmouseenter="enter('1304124062790730283');" onmouseout="out('1304124062790730283');" style=""> 700     public String formatValue(Object value) {                                                            </span>
<span class="5239272094010467374" onmouseenter="enter('5239272094010467374');" onmouseout="out('5239272094010467374');" style=""> 701         String strVal;                                                                                   </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 702         if (value == null) {                                                                             </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 703             strVal = null;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 704         } else {                                                                                         </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 705             if (Date.class.isAssignableFrom(value.getClass())) {                                         </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 706                 strVal = getSimpleDateFormatter().format((Date) value);                                  </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 707             } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                             </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""> 708                 strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));       </span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 709             } else if (Calendar.class.isAssignableFrom(value.getClass())) {                              </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 710                 strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());                  </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 711             } else if (Double.class.isAssignableFrom(value.getClass())) {                                </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 712                 strVal = getDecimalFormatter().format(value);                                            </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 713             } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                            </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 714                 strVal = getDecimalFormatter().format(value);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 715             } else {                                                                                     </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 716                 strVal = value.toString();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718         }                                                                                                </span>
<span class="3782478248632503544" onmouseenter="enter('3782478248632503544');" onmouseout="out('3782478248632503544');" style=""> 719         return strVal;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720     }                                                                                                    </span>
<span  style=""> 721                                                                                                          </span>
<span class="1185233632623235579" onmouseenter="enter('1185233632623235579');" onmouseout="out('1185233632623235579');" style=""><abbr title=" 722     protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntity) throws ServiceException {"> 722     protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean incluðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 723         EntityResult entityResult = new EntityResult();                                                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 724         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 725         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title=" 726         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);"> 726         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style=""> 727         if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                            </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 728             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 729         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 730         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 731             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 731             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 732             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 732             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style=""> 733                     persistencePackage.getCeilingEntityFullyQualifiedClassname(),                        </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 734                     entities,                                                                            </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style=""> 735                     foreignKey,                                                                          </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 736                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 737                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 738                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 739                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 740                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 741                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 742                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 743                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 744                     );                                                                                   </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 745             if (primaryKey == null) {                                                                    </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style=""> 746                 primaryKey = getPrimaryKey(entity, mergedProperties);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 747             }                                                                                            </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title=" 748             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);"> 748             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entitðŸ”µ</abbr></span>
<span  style=""> 749                                                                                                          </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style=""> 750             Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                         </span>
<span  style=""> 751                                                                                                          </span>
<span class="861834480888806983" onmouseenter="enter('861834480888806983');" onmouseout="out('861834480888806983');" style=""> 752             if (!entity.isValidationFailure()) {                                                         </span>
<span class="-6661343286258909963" onmouseenter="enter('-6661343286258909963');" onmouseout="out('-6661343286258909963');" style=""> 753                 //Re-Balance the list if it is a Foreign Key toMany collection with a sort field property</span>
<span class="4247210219521112592" onmouseenter="enter('4247210219521112592');" onmouseout="out('4247210219521112592');" style=""> 754                 if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null &amp;&amp;                           </span>
<span class="235375556032951584" onmouseenter="enter('235375556032951584');" onmouseout="out('235375556032951584');" style=""> 755                         entity.findProperty(foreignKey.getSortField()) != null &amp;&amp;                        </span>
<span class="7175038170339042705" onmouseenter="enter('7175038170339042705');" onmouseout="out('7175038170339042705');" style=""> 756                         entity.findProperty(foreignKey.getSortField()).getValue() != null) {             </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""><abbr title=" 757                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();"> 757                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;(ðŸ”µ</abbr></span>
<span class="5598129937237964517" onmouseenter="enter('5598129937237964517');" onmouseout="out('5598129937237964517');" style=""> 758                     extensionManager.getProxy().rebalanceForUpdate(this, persistencePackage, instance,   </span>
<span class="4380637637969964834" onmouseenter="enter('4380637637969964834');" onmouseout="out('4380637637969964834');" style=""> 759                             mergedProperties, primaryKey, result);                                       </span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style=""> 760                     instance = result.getResult();                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 761                 } else {                                                                                 </span>
<span class="5297856757316311321" onmouseenter="enter('5297856757316311321');" onmouseout="out('5297856757316311321');" style=""><abbr title=" 762                     instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackage.isValidateUnsubmittedProperties());"> 762                     instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763                 }                                                                                        </span>
<span  style=""> 764                                                                                                          </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 765                 instance = persistenceManager.getDynamicEntityDao().merge(instance);                     </span>
<span class="-1264761314664469309" onmouseenter="enter('-1264761314664469309');" onmouseout="out('-1264761314664469309');" style=""> 766                 if (includeRealEntity) {                                                                 </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style=""> 767                     entityResult.setEntityBackingObject(instance);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768                 }                                                                                        </span>
<span  style=""> 769                                                                                                          </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 770                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 771                 entityList.add(instance);                                                                </span>
<span  style=""> 772                                                                                                          </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style=""> 773                 entity = getRecords(mergedProperties, entityList, null, null, null)[0];                  </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 774                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 775                 return entityResult;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 776             } else {                                                                                     </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 777                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 778                 return entityResult;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 779             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 780         } catch (Exception e) {                                                                          </span>
<span class="-3425838462618159609" onmouseenter="enter('-3425838462618159609');" onmouseout="out('-3425838462618159609');" style=""> 781             throw new ServiceException(&quot;Problem updating entity : &quot; + e.getMessage(), e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 783     }                                                                                                    </span>
<span  style=""> 784                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 785     @Override                                                                                            </span>
<span class="6684144434931310538" onmouseenter="enter('6684144434931310538');" onmouseout="out('6684144434931310538');" style=""> 786     public String getIdPropertyName(String entityClass) {                                                </span>
<span class="7569829358594867468" onmouseenter="enter('7569829358594867468');" onmouseout="out('7569829358594867468');" style=""> 787         return persistenceManager.getIdPropertyName(entityClass);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 788     }                                                                                                    </span>
<span  style=""> 789                                                                                                          </span>
<span class="7385985390784408317" onmouseenter="enter('7385985390784408317');" onmouseout="out('7385985390784408317');" style=""> 790     public String getIdPropertyName(Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {             </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 791         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 791         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 792         for (String property : mergedProperties.keySet()) {                                              </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 793             BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);               </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 794             if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {               </span>
<span class="6489038301515904267" onmouseenter="enter('6489038301515904267');" onmouseout="out('6489038301515904267');" style=""> 795                 return property;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 797         }                                                                                                </span>
<span  style=""> 798                                                                                                          </span>
<span class="8030319575516697150" onmouseenter="enter('8030319575516697150');" onmouseout="out('8030319575516697150');" style=""><abbr title=" 799         throw new RuntimeException(&quot;Could not find a primary key property in the passed merged properties list&quot;);"> 799         throw new RuntimeException(&quot;Could not find a primary key property in the passed merged propertiesðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 800     }                                                                                                    </span>
<span  style=""> 801                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 802     @Override                                                                                            </span>
<span class="7601553640468247936" onmouseenter="enter('7601553640468247936');" onmouseout="out('7601553640468247936');" style=""> 803     public Object getPrimaryKey(Entity entity, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {  </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 804         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 804         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style=""> 805         Object primaryKey = null;                                                                        </span>
<span class="-4343749490203255033" onmouseenter="enter('-4343749490203255033');" onmouseout="out('-4343749490203255033');" style=""> 806         String idPropertyName = null;                                                                    </span>
<span class="-1032829863063040815" onmouseenter="enter('-1032829863063040815');" onmouseout="out('-1032829863063040815');" style=""> 807         BasicFieldMetadata metaData = null;                                                              </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 808         for (String property : mergedProperties.keySet()) {                                              </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 809             BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);               </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 810             if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {               </span>
<span class="4480138875282582699" onmouseenter="enter('4480138875282582699');" onmouseout="out('4480138875282582699');" style=""> 811                 idPropertyName = property;                                                               </span>
<span class="-6207089020080563293" onmouseenter="enter('-6207089020080563293');" onmouseout="out('-6207089020080563293');" style=""> 812                 metaData = temp;                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 813                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815         }                                                                                                </span>
<span class="-4447124933950039126" onmouseenter="enter('-4447124933950039126');" onmouseout="out('-4447124933950039126');" style=""> 816         if (idPropertyName == null) {                                                                    </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title=" 817             throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);"> 817             throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with tðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818         }                                                                                                </span>
<span class="-5346955267205588229" onmouseenter="enter('-5346955267205588229');" onmouseout="out('-5346955267205588229');" style=""> 819         for (Property property : entity.getProperties()) {                                               </span>
<span class="7886586292686555176" onmouseenter="enter('7886586292686555176');" onmouseout="out('7886586292686555176');" style=""> 820             if (property.getName().equals(idPropertyName)) {                                             </span>
<span class="2464652692956328654" onmouseenter="enter('2464652692956328654');" onmouseout="out('2464652692956328654');" style=""> 821                 switch (metaData.getSecondaryType()) {                                                   </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 822                     case INTEGER:                                                                        </span>
<span class="-6121369465424712252" onmouseenter="enter('-6121369465424712252');" onmouseout="out('-6121369465424712252');" style=""><abbr title=" 823                         primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValue());"> 823                         primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValuðŸ”µ</abbr></span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 824                         break;                                                                           </span>
<span class="6509618406235281730" onmouseenter="enter('6509618406235281730');" onmouseout="out('6509618406235281730');" style=""> 825                     case STRING:                                                                         </span>
<span class="1585063350949159261" onmouseenter="enter('1585063350949159261');" onmouseout="out('1585063350949159261');" style=""> 826                         primaryKey = property.getValue();                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 827                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 828                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 829                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 831         }                                                                                                </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 832         if (primaryKey == null) {                                                                        </span>
<span class="586132424145349171" onmouseenter="enter('586132424145349171');" onmouseout="out('586132424145349171');" style=""><abbr title=" 833             throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) in the passed entity with type: &quot; + entity.getType()[0]);"> 833             throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 834         }                                                                                                </span>
<span class="445877428068937777" onmouseenter="enter('445877428068937777');" onmouseout="out('445877428068937777');" style=""> 835         return primaryKey;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 836     }                                                                                                    </span>
<span  style=""> 837                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 838     @Override                                                                                            </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 839     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,          </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 840             CriteriaTransferObject cto,                                                                  </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 841             String ceilingEntityFullyQualifiedClassname,                                                 </span>
<span class="-8254447054846048089" onmouseenter="enter('-8254447054846048089');" onmouseout="out('-8254447054846048089');" style=""> 842             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties,                                       </span>
<span class="3731877525338754789" onmouseenter="enter('3731877525338754789');" onmouseout="out('3731877525338754789');" style=""> 843             RestrictionFactory customRestrictionFactory) {                                               </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 844         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 844         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="5454417750033935999" onmouseenter="enter('5454417750033935999');" onmouseout="out('5454417750033935999');" style=""> 845         List&lt;FilterMapping&gt; filterMappings = new ArrayList&lt;FilterMapping&gt;();                             </span>
<span  style=""> 846                                                                                                          </span>
<span class="5160955752092959572" onmouseenter="enter('5160955752092959572');" onmouseout="out('5160955752092959572');" style=""> 847         for (String propertyId : cto.getCriteriaMap().keySet()) {                                        </span>
<span class="4532640545066977906" onmouseenter="enter('4532640545066977906');" onmouseout="out('4532640545066977906');" style=""> 848             if (mergedProperties.containsKey(propertyId)) {                                              </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 849                 boolean handled = false;                                                                 </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 850                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {    </span>
<span class="-6114175924026036851" onmouseenter="enter('-6114175924026036851');" onmouseout="out('-6114175924026036851');" style=""> 851                     MetadataProviderResponse response = fieldPersistenceProvider.addSearchMapping(       </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 852                             new AddSearchMappingRequest(persistencePerspective, cto,                     </span>
<span class="5810135378246725068" onmouseenter="enter('5810135378246725068');" onmouseout="out('5810135378246725068');" style=""> 853                                     ceilingEntityFullyQualifiedClassname, mergedProperties,              </span>
<span class="5077524350528682045" onmouseenter="enter('5077524350528682045');" onmouseout="out('5077524350528682045');" style=""><abbr title=" 854                                     propertyId, getFieldManager(), this, this, customRestrictionFactory==null?restrictionFactory"> 854                                     propertyId, getFieldManager(), this, this, customRestrictionFactory==ðŸ”µ</abbr></span>
<span class="6427059933663878801" onmouseenter="enter('6427059933663878801');" onmouseout="out('6427059933663878801');" style=""> 855                                     :customRestrictionFactory), filterMappings);                         </span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 856                     if (MetadataProviderResponse.NOT_HANDLED != response) {                              </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 857                         handled = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 858                     }                                                                                    </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 859                     if (MetadataProviderResponse.HANDLED_BREAK == response) {                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 860                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 861                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 862                 }                                                                                        </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 863                 if (!handled) {                                                                          </span>
<span class="8038403104028382935" onmouseenter="enter('8038403104028382935');" onmouseout="out('8038403104028382935');" style=""> 864                     defaultFieldPersistenceProvider.addSearchMapping(                                    </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 865                             new AddSearchMappingRequest(persistencePerspective, cto,                     </span>
<span class="-1188580278753724323" onmouseenter="enter('-1188580278753724323');" onmouseout="out('-1188580278753724323');" style=""> 866                                     ceilingEntityFullyQualifiedClassname, mergedProperties, propertyId,  </span>
<span class="-6646794478608592484" onmouseenter="enter('-6646794478608592484');" onmouseout="out('-6646794478608592484');" style=""><abbr title=" 867                                     getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFactory"> 867                                     getFieldManager(), this, this, customRestrictionFactory == null ? resðŸ”µ</abbr></span>
<span class="878086898277429379" onmouseenter="enter('878086898277429379');" onmouseout="out('878086898277429379');" style=""> 868                                             : customRestrictionFactory), filterMappings);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871         }                                                                                                </span>
<span class="-1900027260049794739" onmouseenter="enter('-1900027260049794739');" onmouseout="out('-1900027260049794739');" style=""> 872         return filterMappings;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 873     }                                                                                                    </span>
<span  style=""> 874                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 875     @Override                                                                                            </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 876     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,          </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 877             CriteriaTransferObject cto,                                                                  </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 878             String ceilingEntityFullyQualifiedClassname,                                                 </span>
<span class="-8055727947789817499" onmouseenter="enter('-8055727947789817499');" onmouseout="out('-8055727947789817499');" style=""> 879             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                                     </span>
<span class="81017552378868833" onmouseenter="enter('81017552378868833');" onmouseout="out('81017552378868833');" style=""><abbr title=" 880         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilteredProperties, null);"> 880         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881     }                                                                                                    </span>
<span  style=""> 882                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 883     @Override                                                                                            </span>
<span class="897240738537618425" onmouseenter="enter('897240738537618425');" onmouseout="out('897240738537618425');" style=""><abbr title=" 884     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; mergedProperties, List&lt;Property&gt; properties) {"> 884     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMeðŸ”µ</abbr></span>
<span class="-5864020654264554558" onmouseenter="enter('-5864020654264554558');" onmouseout="out('-5864020654264554558');" style=""><abbr title=" 885         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), properties, false, MergedPropertyType.PRIMARY);"> 885         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 886     }                                                                                                    </span>
<span  style=""> 887                                                                                                          </span>
<span class="203860492987878792" onmouseenter="enter('203860492987878792');" onmouseout="out('203860492987878792');" style=""><abbr title=" 888     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedProperties, List&lt;Property&gt; properties, Boolean isHiddenOverride, MergedPropertyType type) {"> 888     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mðŸ”µ</abbr></span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style=""> 889             Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                               </span>
<span  style=""> 890                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 891                 @Override                                                                                </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 892                 public int compare(Property o1, Property o2) {                                           </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style=""> 893                     return o1.getName().compareTo(o2.getName());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 894                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 895             };                                                                                           </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 896 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-6235585592219807242" onmouseenter="enter('-6235585592219807242');" onmouseout="out('-6235585592219807242');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 897         properties.sort(comparator);                                                                     </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 898                                                                                                          </span>
<span class="-2434831074249628531" onmouseenter="enter('-2434831074249628531');" onmouseout="out('-2434831074249628531');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 899         for (Map.Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 900             String property = entry.getKey();                                                            </span>
<span class="-231152183806873874" onmouseenter="enter('-231152183806873874');" onmouseout="out('-231152183806873874');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 901             Property prop = new Property();                                                              </span>
<span class="-3770108933014957253" onmouseenter="enter('-3770108933014957253');" onmouseout="out('-3770108933014957253');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 902             FieldMetadata metadata = mergedProperties.get(property);                                     </span>
<span class="-6395393149471547560" onmouseenter="enter('-6395393149471547560');" onmouseout="out('-6395393149471547560');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 903             prop.setName(property);                                                                      </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 904 ||||||| BASE                                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 905                 @Override                                                                                </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 906                 public int compare(Property o1, Property o2) {                                           </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 907                     return o1.getName().compareTo(o2.getName());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 908                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 909             };                                                                                           </span>
<span class="-7612884103774291324" onmouseenter="enter('-7612884103774291324');" onmouseout="out('-7612884103774291324');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 910             Collections.sort(properties, comparator);                                                    </span>
<span class="-2139676366648139964" onmouseenter="enter('-2139676366648139964');" onmouseout="out('-2139676366648139964');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 911             int pos = Collections.binarySearch(properties, prop, comparator);                            </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 912 =======                                                                                                  </span>
<span class="-7612884103774291324" onmouseenter="enter('-7612884103774291324');" onmouseout="out('-7612884103774291324');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 913         Collections.sort(properties, comparator);                                                        </span>
<span class="-2434831074249628531" onmouseenter="enter('-2434831074249628531');" onmouseout="out('-2434831074249628531');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 914         for (Map.Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 915             String property = entry.getKey();                                                            </span>
<span class="-231152183806873874" onmouseenter="enter('-231152183806873874');" onmouseout="out('-231152183806873874');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 916             Property prop = new Property();                                                              </span>
<span class="-3770108933014957253" onmouseenter="enter('-3770108933014957253');" onmouseout="out('-3770108933014957253');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 917             FieldMetadata metadata = mergedProperties.get(property);                                     </span>
<span class="-6395393149471547560" onmouseenter="enter('-6395393149471547560');" onmouseout="out('-6395393149471547560');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 918             prop.setName(property);                                                                      </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 919                                                                                                          </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 920 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-2139676366648139964" onmouseenter="enter('-2139676366648139964');" onmouseout="out('-2139676366648139964');" style=""> 921             int pos = Collections.binarySearch(properties, prop, comparator);                            </span>
<span class="-2417851046359094762" onmouseenter="enter('-2417851046359094762');" onmouseout="out('-2417851046359094762');" style=""><abbr title=" 922             if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREVALUE != type) {"> 922             if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREðŸ”µ</abbr></span>
<span class="-1490193869050628697" onmouseenter="enter('-1490193869050628697');" onmouseout="out('-1490193869050628697');" style=""> 923                 logWarn: {                                                                               </span>
<span class="5327179807238785116" onmouseenter="enter('5327179807238785116');" onmouseout="out('5327179807238785116');" style=""><abbr title=" 924                     if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadata) metadata).getFieldType())) {"> 924                     if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFðŸ”µ</abbr></span>
<span class="6221076133691521085" onmouseenter="enter('6221076133691521085');" onmouseout="out('6221076133691521085');" style=""> 925                         //don&#x27;t warn for id field collisions, but still ignore the colliding fields      </span>
<span class="1303890499227207840" onmouseenter="enter('1303890499227207840');" onmouseout="out('1303890499227207840');" style=""> 926                         break logWarn;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 927                     }                                                                                    </span>
<span class="-3406896845088854457" onmouseenter="enter('-3406896845088854457');" onmouseout="out('-3406896845088854457');" style=""><abbr title=" 928                     //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + &quot;) during inspection for the inheritance line starting with (&quot; + inheritanceLine[0].getName() + &quot;). Ignoring the additional field. This can occur most commonly when using the @AdminPresentationAdornedTargetCollection and the collection type and target class have field names in common. This situation should be avoided, as the system will strip the repeated fields, which can cause unpredictable behavior.&quot;);"> 928                     //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + prðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 929                 }                                                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 930                 continue;                                                                                </span>
<span class="5067330164177088761" onmouseenter="enter('5067330164177088761');" onmouseout="out('5067330164177088761');" style=""> 931             } else if (pos &lt; 0) {                                                                        </span>
<span class="-8221812243074404132" onmouseenter="enter('-8221812243074404132');" onmouseout="out('-8221812243074404132');" style=""> 932                 pos = -pos - 1; // calculate position to insert                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933             }                                                                                            </span>
<span class="2534204392443089313" onmouseenter="enter('2534204392443089313');" onmouseout="out('2534204392443089313');" style=""> 934             properties.add(pos, prop);                                                                   </span>
<span class="-4762622463962141865" onmouseenter="enter('-4762622463962141865');" onmouseout="out('-4762622463962141865');" style=""> 935             prop.setMetadata(metadata);                                                                  </span>
<span class="-6199017505159175940" onmouseenter="enter('-6199017505159175940');" onmouseout="out('-6199017505159175940');" style=""> 936             if (isHiddenOverride &amp;&amp; prop.getMetadata() instanceof BasicFieldMetadata) {                  </span>
<span class="-7685654662722475773" onmouseenter="enter('-7685654662722475773');" onmouseout="out('-7685654662722475773');" style=""> 937                 //this only makes sense for non collection types                                         </span>
<span class="-763482179748503913" onmouseenter="enter('-763482179748503913');" onmouseout="out('-763482179748503913');" style=""> 938                 ((BasicFieldMetadata) prop.getMetadata()).setVisibility(VisibilityEnum.HIDDEN_ALL);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 939             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 941     }                                                                                                    </span>
<span  style=""> 942                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 943     @Override                                                                                            </span>
<span class="-1145456305415279084" onmouseenter="enter('-1145456305415279084');" onmouseout="out('-1145456305415279084');" style=""><abbr title=" 944     public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; allMergedProperties) throws ServiceException {"> 944     public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, MapðŸ”µ</abbr></span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title=" 945         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();"> 945         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 946         try {                                                                                            </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""><abbr title=" 947             PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();"> 947             PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective(ðŸ”µ</abbr></span>
<span class="3509784211613018298" onmouseenter="enter('3509784211613018298');" onmouseout="out('3509784211613018298');" style=""><abbr title=" 948             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClassname);"> 948             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 949             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 949             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style=""> 950                     ceilingEntityFullyQualifiedClassname,                                                </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 951                     entities,                                                                            </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title=" 952                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),"> 952                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 953                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 954                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 955                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 956                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 957                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 958                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 959                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 960                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 961                     );                                                                                   </span>
<span class="3843057087083113739" onmouseenter="enter('3843057087083113739');" onmouseout="out('3843057087083113739');" style=""> 962             allMergedProperties.put(MergedPropertyType.PRIMARY, mergedProperties);                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 963         } catch (Exception e) {                                                                          </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title=" 964             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);"> 964             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 965         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 966     }                                                                                                    </span>
<span  style=""> 967                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 968     @Override                                                                                            </span>
<span class="-4783803183233062984" onmouseenter="enter('-4783803183233062984');" onmouseout="out('-4783803183233062984');" style=""><abbr title=" 969     public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {"> 969     public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) thðŸ”µ</abbr></span>
<span class="-5998034243161331810" onmouseenter="enter('-5998034243161331810');" onmouseout="out('-5998034243161331810');" style=""> 970         return update(persistencePackage, null, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 971     }                                                                                                    </span>
<span  style=""> 972                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 973     @Override                                                                                            </span>
<span class="-2807508720531838872" onmouseenter="enter('-2807508720531838872');" onmouseout="out('-2807508720531838872');" style=""> 974     public Entity update(PersistencePackage persistencePackage) throws ServiceException {                </span>
<span class="-5671722244832067224" onmouseenter="enter('-5671722244832067224');" onmouseout="out('-5671722244832067224');" style=""> 975         EntityResult er = update(persistencePackage, null, false);                                       </span>
<span class="-4364232546893819072" onmouseenter="enter('-4364232546893819072');" onmouseout="out('-4364232546893819072');" style=""> 976         return er.getEntity();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 977     }                                                                                                    </span>
<span  style=""> 978                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 979     @Override                                                                                            </span>
<span class="6001696775937434965" onmouseenter="enter('6001696775937434965');" onmouseout="out('6001696775937434965');" style=""> 980     public Entity add(PersistencePackage persistencePackage) throws ServiceException {                   </span>
<span class="-7059200088088645842" onmouseenter="enter('-7059200088088645842');" onmouseout="out('-7059200088088645842');" style=""> 981         EntityResult entityResult = add(persistencePackage, false);                                      </span>
<span class="2936146364192771277" onmouseenter="enter('2936146364192771277');" onmouseout="out('2936146364192771277');" style=""> 982         return entityResult.getEntity();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 983     }                                                                                                    </span>
<span  style=""> 984                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 985     @Override                                                                                            </span>
<span class="7079650910076086428" onmouseenter="enter('7079650910076086428');" onmouseout="out('7079650910076086428');" style=""><abbr title=" 986     public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {"> 986     public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throwðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 987         EntityResult entityResult = new EntityResult();                                                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 988         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 989         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title=" 990         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);"> 990         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style=""> 991         if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                            </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 992             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 993         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 994         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 995             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 995             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title=" 996             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 996             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDaðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style=""> 997                     persistencePackage.getCeilingEntityFullyQualifiedClassname(),                        </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 998                     entities,                                                                            </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style=""> 999                     foreignKey,                                                                          </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1000                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1001                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1002                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1003                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1004                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1005                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1006                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1007                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1008                     );                                                                                   </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title="1009             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);">1009             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProðŸ”µ</abbr></span>
<span  style="">1010                                                                                                          </span>
<span class="-4432713425684374872" onmouseenter="enter('-4432713425684374872');" onmouseout="out('-4432713425684374872');" style="">1011             String idProperty = null;                                                                    </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style="">1012             for (String property : mergedProperties.keySet()) {                                          </span>
<span class="-2221369290108753372" onmouseenter="enter('-2221369290108753372');" onmouseout="out('-2221369290108753372');" style=""><abbr title="1013                 if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFieldType.ID) {">1013                 if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFielðŸ”µ</abbr></span>
<span class="-5524453042327008702" onmouseenter="enter('-5524453042327008702');" onmouseout="out('-5524453042327008702');" style="">1014                     idProperty = property;                                                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1015                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1016                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1017             }                                                                                            </span>
<span class="1924041731168261447" onmouseenter="enter('1924041731168261447');" onmouseout="out('1924041731168261447');" style="">1018             if (idProperty == null) {                                                                    </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title="1019                 throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);">1019                 throw new RuntimeException(&quot;Could not find a primary key property in the passed entity wiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1020             }                                                                                            </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style="">1021             Object primaryKey = null;                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1022             try {                                                                                        </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style="">1023                 primaryKey = getPrimaryKey(entity, mergedProperties);                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1024             } catch (Exception e) {                                                                      </span>
<span class="-2276199612445624795" onmouseenter="enter('-2276199612445624795');" onmouseout="out('-2276199612445624795');" style="">1025                 //don&#x27;t do anything - this is a valid case                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1026             }                                                                                            </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style="">1027             if (primaryKey == null) {                                                                    </span>
<span  style="">1028                                                                                                          </span>
<span class="-425360514461332458" onmouseenter="enter('-425360514461332458');" onmouseout="out('-425360514461332458');" style="">1029                 Serializable instance = (Serializable) Class.forName(entity.getType()[0]).newInstance(); </span>
<span  style="">1030                                                                                                          </span>
<span class="-2986273728837208353" onmouseenter="enter('-2986273728837208353');" onmouseout="out('-2986273728837208353');" style="">1031                 instance = createPopulatedInstance(instance, entity, mergedProperties, false);           </span>
<span  style="">1032                                                                                                          </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1033                 if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                           </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""><abbr title="1034                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();">1034                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;(ðŸ”µ</abbr></span>
<span class="1481560234407270538" onmouseenter="enter('1481560234407270538');" onmouseout="out('1481560234407270538');" style=""><abbr title="1035                     extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedProperties, result);">1035                     extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergeðŸ”µ</abbr></span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style="">1036                     instance = result.getResult();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1037                 }                                                                                        </span>
<span  style="">1038                                                                                                          </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1039                 instance = persistenceManager.getDynamicEntityDao().merge(instance);                     </span>
<span class="7937797480137547171" onmouseenter="enter('7937797480137547171');" onmouseout="out('7937797480137547171');" style="">1040                 if (includeRealEntityObject) {                                                           </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style="">1041                     entityResult.setEntityBackingObject(instance);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1042                 }                                                                                        </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style="">1043                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style="">1044                 entityList.add(instance);                                                                </span>
<span  style="">1045                                                                                                          </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style="">1046                 entity = getRecords(mergedProperties, entityList, null, null, null)[0];                  </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style="">1047                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style="">1048                 return entityResult;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1049             } else {                                                                                     </span>
<span class="-5905945487992976049" onmouseenter="enter('-5905945487992976049');" onmouseout="out('-5905945487992976049');" style="">1050                 return update(persistencePackage, primaryKey, includeRealEntityObject);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1051             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1052         } catch (Exception e) {                                                                          </span>
<span class="-3635977582445593738" onmouseenter="enter('-3635977582445593738');" onmouseout="out('-3635977582445593738');" style="">1053             throw new ServiceException(&quot;Problem adding new entity : &quot; + e.getMessage(), e);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1054         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1055     }                                                                                                    </span>
<span  style="">1056                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1057     @Override                                                                                            </span>
<span class="-8285012329134109181" onmouseenter="enter('-8285012329134109181');" onmouseout="out('-8285012329134109181');" style="">1058     public void remove(PersistencePackage persistencePackage) throws ServiceException {                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1059         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1060         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1061         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1061         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1062         if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                            </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1063             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1065         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1066             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1066             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1067             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1067             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDaðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1068                     persistencePackage.getCeilingEntityFullyQualifiedClassname(),                        </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1069                     entities,                                                                            </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1070                     foreignKey,                                                                          </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1071                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1072                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1073                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1074                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1075                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1076                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1077                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1078                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1079                     );                                                                                   </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title="1080             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);">1080             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProðŸ”µ</abbr></span>
<span class="-1223682136408553234" onmouseenter="enter('-1223682136408553234');" onmouseout="out('-1223682136408553234');" style="">1081             Object primaryKey = getPrimaryKey(entity, mergedProperties);                                 </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title="1082             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);">1082             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entitðŸ”µ</abbr></span>
<span  style="">1083                                                                                                          </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style="">1084             Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                         </span>
<span  style="">1085                                                                                                          </span>
<span class="6713488701284006207" onmouseenter="enter('6713488701284006207');" onmouseout="out('6713488701284006207');" style="">1086             switch (persistencePerspective.getOperationTypes().getRemoveType()) {                        </span>
<span class="5189123261615208670" onmouseenter="enter('5189123261615208670');" onmouseout="out('5189123261615208670');" style="">1087                 case NONDESTRUCTIVEREMOVE:                                                               </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style="">1088                     FieldManager fieldManager = getFieldManager();                                       </span>
<span class="3973215198680528904" onmouseenter="enter('3973215198680528904');" onmouseout="out('3973215198680528904');" style=""><abbr title="1089                     FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField());">1089                     FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyðŸ”µ</abbr></span>
<span class="1169143210599293613" onmouseenter="enter('1169143210599293613');" onmouseout="out('1169143210599293613');" style=""><abbr title="1090                     Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue();">1090                     Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue()ðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1091                     try {                                                                                </span>
<span class="-7359786243551687396" onmouseenter="enter('-7359786243551687396');" onmouseout="out('-7359786243551687396');" style="">1092                         foreignKeyValue = Long.valueOf((String) foreignKeyValue);                        </span>
<span class="7366941412324817508" onmouseenter="enter('7366941412324817508');" onmouseout="out('7366941412324817508');" style="">1093                     } catch (NumberFormatException e) {                                                  </span>
<span class="7012272079852218418" onmouseenter="enter('7012272079852218418');" onmouseout="out('7012272079852218418');" style=""><abbr title="1094                         LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove lookup&quot;);">1094                         LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove looðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1095                     }                                                                                    </span>
<span class="7279695966184570355" onmouseenter="enter('7279695966184570355');" onmouseout="out('7279695966184570355');" style=""><abbr title="1096                     Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(foreignKey.getForeignKeyClass()), foreignKeyValue);">1096                     Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(ClasðŸ”µ</abbr></span>
<span class="-6891408169238328357" onmouseenter="enter('-6891408169238328357');" onmouseout="out('-6891408169238328357');" style=""><abbr title="1097                     Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreignKey.getOriginatingField());">1097                     Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreðŸ”µ</abbr></span>
<span class="8045950107739873006" onmouseenter="enter('8045950107739873006');" onmouseout="out('8045950107739873006');" style="">1098                     collection.remove(instance);                                                         </span>
<span class="7309400259168651936" onmouseenter="enter('7309400259168651936');" onmouseout="out('7309400259168651936');" style=""><abbr title="1099                     // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreign key on">1099                     // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (justðŸ”µ</abbr></span>
<span class="7114131295623762638" onmouseenter="enter('7114131295623762638');" onmouseout="out('7114131295623762638');" style=""><abbr title="1100                     // the @ManyToOne side) then it will not be updated. In that instance, we have to explicitly">1100                     // the @ManyToOne side) then it will not be updated. In that instance, we have to expðŸ”µ</abbr></span>
<span class="3943491933719923666" onmouseenter="enter('3943491933719923666');" onmouseout="out('3943491933719923666');" style="">1101                     // set the manyTo field to null so that subsequent lookups will not find it          </span>
<span class="2820622934029903464" onmouseenter="enter('2820622934029903464');" onmouseout="out('2820622934029903464');" style="">1102                     if (manyToFieldMetadata instanceof BasicFieldMetadata) {                             </span>
<span class="3041576912599376884" onmouseenter="enter('3041576912599376884');" onmouseout="out('3041576912599376884');" style=""><abbr title="1103                         if (BooleanUtils.isTrue(((BasicFieldMetadata) manyToFieldMetadata).getRequired())) {">1103                         if (BooleanUtils.isTrue(((BasicFieldMetadata) manyToFieldMetadata).getRequired())ðŸ”µ</abbr></span>
<span class="-3179114257339016284" onmouseenter="enter('-3179114257339016284');" onmouseout="out('-3179114257339016284');" style=""><abbr title="1104                             throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne side is a&quot;">1104                             throw new ServiceException(&quot;Could not remove from the collection as the ManyTðŸ”µ</abbr></span>
<span class="-7704143059315768665" onmouseenter="enter('-7704143059315768665');" onmouseout="out('-7704143059315768665');" style=""><abbr title="1105                                     + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyToOne annotation&quot;">1105                                     + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in tðŸ”µ</abbr></span>
<span class="-8899164530562544377" onmouseenter="enter('-8899164530562544377');" onmouseout="out('-8899164530562544377');" style="">1106                                     + &quot; or nullable=true within the @JoinColumn annotation&quot;);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107                         }                                                                                </span>
<span class="1164649929234803369" onmouseenter="enter('1164649929234803369');" onmouseout="out('1164649929234803369');" style=""><abbr title="1108                         //Since this is occuring on a remove persistence package, merge up-front (before making a change) for proper operation in the presence of the enterprise module">1108                         //Since this is occuring on a remove persistence package, merge up-front (before ðŸ”µ</abbr></span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1109                         instance = persistenceManager.getDynamicEntityDao().merge(instance);             </span>
<span class="-3549582829608652451" onmouseenter="enter('-3549582829608652451');" onmouseout="out('-3549582829608652451');" style=""><abbr title="1110                         Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField());">1110                         Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyðŸ”µ</abbr></span>
<span class="-2737504991189218406" onmouseenter="enter('-2737504991189218406');" onmouseout="out('-2737504991189218406');" style="">1111                         Object manyToObject = manyToField.get(instance);                                 </span>
<span class="-7515244788292498989" onmouseenter="enter('-7515244788292498989');" onmouseout="out('-7515244788292498989');" style=""><abbr title="1112                         if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObject instanceof Map)) {">1112                         if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObjeðŸ”µ</abbr></span>
<span class="-3600933715630852255" onmouseenter="enter('-3600933715630852255');" onmouseout="out('-3600933715630852255');" style="">1113                             manyToField.set(instance, null);                                             </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1114                             instance = persistenceManager.getDynamicEntityDao().merge(instance);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1115                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1116                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1117                     break;                                                                               </span>
<span class="-5424424301156351095" onmouseenter="enter('-5424424301156351095');" onmouseout="out('-5424424301156351095');" style="">1118                 case BASIC:                                                                              </span>
<span class="-3622621852197441069" onmouseenter="enter('-3622621852197441069');" onmouseout="out('-3622621852197441069');" style="">1119                     persistenceManager.getDynamicEntityDao().remove(instance);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1120                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1122         } catch (Exception e) {                                                                          </span>
<span class="-1927777960097045518" onmouseenter="enter('-1927777960097045518');" onmouseout="out('-1927777960097045518');" style="">1123             throw new ServiceException(&quot;Problem removing entity : &quot; + e.getMessage(), e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1124         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125     }                                                                                                    </span>
<span  style="">1126                                                                                                          </span>
<span class="-5101078461080852406" onmouseenter="enter('-5101078461080852406');" onmouseout="out('-5101078461080852406');" style="">1127     public Map&lt;String, FieldMetadata&gt; getMergedProperties(PersistencePackage persistencePackage,         </span>
<span class="-1790491118666975112" onmouseenter="enter('-1790491118666975112');" onmouseout="out('-1790491118666975112');" style="">1128             CriteriaTransferObject cto) throws ServiceException {                                        </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1129         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1130         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1130         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span  style="">1131                                                                                                          </span>
<span class="-5573073822220246070" onmouseenter="enter('-5573073822220246070');" onmouseout="out('-5573073822220246070');" style="">1132         if (StringUtils.isEmpty(persistencePackage.getFetchTypeFullyQualifiedClassname())) {             </span>
<span class="8779313298045253029" onmouseenter="enter('8779313298045253029');" onmouseout="out('8779313298045253029');" style="">1133             persistencePackage.setFetchTypeFullyQualifiedClassname(ceilingEntityFullyQualifiedClassname);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1134         }                                                                                                </span>
<span  style="">1135                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1136         try {                                                                                            </span>
<span class="-5197892520502431560" onmouseenter="enter('-5197892520502431560');" onmouseout="out('-5197892520502431560');" style=""><abbr title="1137             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(Class.forName(ceilingEntityFullyQualifiedClassname));">1137             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCðŸ”µ</abbr></span>
<span  style="">1138                                                                                                          </span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title="1139             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1139             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style="">1140                     ceilingEntityFullyQualifiedClassname,                                                </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1141                     entities,                                                                            </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title="1142                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),">1142                     (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1143                     persistencePerspective.getAdditionalNonPersistentProperties(),                       </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1144                     persistencePerspective.getAdditionalForeignKeys(),                                   </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1145                     MergedPropertyType.PRIMARY,                                                          </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1146                     persistencePerspective.getPopulateToOneFields(),                                     </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1147                     persistencePerspective.getIncludeFields(),                                           </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1148                     persistencePerspective.getExcludeFields(),                                           </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1149                     persistencePerspective.getConfigurationKey(),                                        </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1150                     &quot;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1151                     );                                                                                   </span>
<span  style="">1152                                                                                                          </span>
<span class="513114689449481379" onmouseenter="enter('513114689449481379');" onmouseout="out('513114689449481379');" style="">1153             return mergedProperties;                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1154         } catch (Exception e) {                                                                          </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1155             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1155             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1156         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1157     }                                                                                                    </span>
<span  style="">1158                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1159     @Override                                                                                            </span>
<span class="8546305990485145221" onmouseenter="enter('8546305990485145221');" onmouseout="out('8546305990485145221');" style=""><abbr title="1160     public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {">1160     public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throðŸ”µ</abbr></span>
<span class="-772649916350085514" onmouseenter="enter('-772649916350085514');" onmouseout="out('-772649916350085514');" style="">1161         Entity[] payload;                                                                                </span>
<span class="3229522520950860553" onmouseenter="enter('3229522520950860553');" onmouseout="out('3229522520950860553');" style="">1162         int totalRecords;                                                                                </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1163         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1164         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1164         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1165         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1165         ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(ðŸ”µ</abbr></span>
<span  style="">1166                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1167         try {                                                                                            </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1168             if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                               </span>
<span class="2404625472493330195" onmouseenter="enter('2404625472493330195');" onmouseout="out('2404625472493330195');" style="">1169                 FilterAndSortCriteria sortCriteria = cto.get(foreignKey.getSortField());                 </span>
<span class="-7029642347361419040" onmouseenter="enter('-7029642347361419040');" onmouseout="out('-7029642347361419040');" style="">1170                 sortCriteria.setSortAscending(foreignKey.getSortAscending());                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171             }                                                                                            </span>
<span  style="">1172                                                                                                          </span>
<span class="-3998990817835064526" onmouseenter="enter('-3998990817835064526');" onmouseout="out('-3998990817835064526');" style="">1173             Map&lt;String, FieldMetadata&gt; mergedProperties = getMergedProperties(persistencePackage, cto);  </span>
<span  style="">1174                                                                                                          </span>
<span class="-6342955113620354561" onmouseenter="enter('-6342955113620354561');" onmouseout="out('-6342955113620354561');" style=""><abbr title="1175             List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistencePackage">1175             List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistenðŸ”µ</abbr></span>
<span class="-8965082019915054990" onmouseenter="enter('-8965082019915054990');" onmouseout="out('-8965082019915054990');" style="">1176                     .getFetchTypeFullyQualifiedClassname(), mergedProperties);                           </span>
<span class="3150984124528274911" onmouseenter="enter('3150984124528274911');" onmouseout="out('3150984124528274911');" style="">1177             List&lt;FilterMapping&gt; standardFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);   </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1178             if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                         </span>
<span class="8416184071019923073" onmouseenter="enter('8416184071019923073');" onmouseout="out('8416184071019923073');" style="">1179                 standardFilterMappings.addAll(cto.getAdditionalFilterMappings());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180             }                                                                                            </span>
<span class="371531837080654072" onmouseenter="enter('371531837080654072');" onmouseout="out('371531837080654072');" style="">1181             if (CollectionUtils.isNotEmpty(cto.getNonCountAdditionalFilterMappings())) {                 </span>
<span class="1437073849667335666" onmouseenter="enter('1437073849667335666');" onmouseout="out('1437073849667335666');" style="">1182                 standardFilterMappings.addAll(cto.getNonCountAdditionalFilterMappings());                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1183             }                                                                                            </span>
<span  style="">1184                                                                                                          </span>
<span class="-1243671803049331237" onmouseenter="enter('-1243671803049331237');" onmouseout="out('-1243671803049331237');" style="">1185             FetchRequest fetchRequest = new FetchRequest(persistencePackage, cto,                        </span>
<span class="4292734980783020060" onmouseenter="enter('4292734980783020060');" onmouseout="out('4292734980783020060');" style="">1186                     persistencePackage.getFetchTypeFullyQualifiedClassname(), standardFilterMappings);   </span>
<span class="6303456555516158535" onmouseenter="enter('6303456555516158535');" onmouseout="out('6303456555516158535');" style="">1187             List&lt;Serializable&gt; records = getPersistentRecords(fetchRequest);                             </span>
<span  style="">1188                                                                                                          </span>
<span class="-2850022341577176338" onmouseenter="enter('-2850022341577176338');" onmouseout="out('-2850022341577176338');" style="">1189             List&lt;FilterMapping&gt; countFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);      </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1190             if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                         </span>
<span class="2702453385268728814" onmouseenter="enter('2702453385268728814');" onmouseout="out('2702453385268728814');" style="">1191                 countFilterMappings.addAll(cto.getAdditionalFilterMappings());                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1192             }                                                                                            </span>
<span class="-3999242298419802693" onmouseenter="enter('-3999242298419802693');" onmouseout="out('-3999242298419802693');" style="">1193             FetchRequest countFetchRequest = new FetchRequest(persistencePackage, cto,                   </span>
<span class="-3552477247406350113" onmouseenter="enter('-3552477247406350113');" onmouseout="out('-3552477247406350113');" style="">1194                     persistencePackage.getFetchTypeFullyQualifiedClassname(), countFilterMappings);      </span>
<span class="8724074426546236268" onmouseenter="enter('8724074426546236268');" onmouseout="out('8724074426546236268');" style="">1195             totalRecords = getTotalRecords(countFetchRequest);                                           </span>
<span  style="">1196                                                                                                          </span>
<span class="-5158650912512765537" onmouseenter="enter('-5158650912512765537');" onmouseout="out('-5158650912512765537');" style=""><abbr title="1197             FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackage, cto,">1197             FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackageðŸ”µ</abbr></span>
<span class="6467880611752491014" onmouseenter="enter('6467880611752491014');" onmouseout="out('6467880611752491014');" style="">1198                     persistencePackage.getFetchTypeFullyQualifiedClassname(), mergedProperties, records);</span>
<span class="8156899482235304262" onmouseenter="enter('8156899482235304262');" onmouseout="out('8156899482235304262');" style="">1199             payload = getRecords(fetchExtractionRequest);                                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1200         } catch (Exception e) {                                                                          </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1201             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1201             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202         }                                                                                                </span>
<span  style="">1203                                                                                                          </span>
<span class="-3114265280987831722" onmouseenter="enter('-3114265280987831722');" onmouseout="out('-3114265280987831722');" style="">1204         return new DynamicResultSet(null, payload, totalRecords);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1205     }                                                                                                    </span>
<span  style="">1206                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1207     @Override                                                                                            </span>
<span class="-2578660758180960" onmouseenter="enter('-2578660758180960');" onmouseout="out('-2578660758180960');" style="">1208     public Integer getTotalRecords(FetchRequest fetchRequest) {                                          </span>
<span class="3552750659307215192" onmouseenter="enter('3552750659307215192');" onmouseout="out('3552750659307215192');" style="">1209         return fetchWrapper.getTotalRecords(fetchRequest);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210     }                                                                                                    </span>
<span  style="">1211                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1212     @Override                                                                                            </span>
<span class="5133967305615212146" onmouseenter="enter('5133967305615212146');" onmouseout="out('5133967305615212146');" style="">1213     public Integer getTotalRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings) {           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1214         try {                                                                                            </span>
<span class="2992791529598050608" onmouseenter="enter('2992791529598050608');" onmouseout="out('2992791529598050608');" style=""><abbr title="1215             return ((Long) criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(),">1215             return ((Long) criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(ðŸ”µ</abbr></span>
<span class="9038213180647386393" onmouseenter="enter('9038213180647386393');" onmouseout="out('9038213180647386393');" style="">1216                     ceilingEntity, filterMappings).getSingleResult()).intValue();                        </span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1217         } catch (CriteriaConversionException e) {                                                        </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1218             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1218             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilðŸ”µ</abbr></span>
<span class="3717478470762679000" onmouseenter="enter('3717478470762679000');" onmouseout="out('3717478470762679000');" style=""><abbr title="1219             return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getSingleResult()).intValue();">1219             return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1220         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221     }                                                                                                    </span>
<span  style="">1222                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1223     @Override                                                                                            </span>
<span class="-7091292263578945571" onmouseenter="enter('-7091292263578945571');" onmouseout="out('-7091292263578945571');" style=""><abbr title="1224     public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxField) {">1224     public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxFðŸ”µ</abbr></span>
<span class="378343015895903420" onmouseenter="enter('378343015895903420');" onmouseout="out('378343015895903420');" style="">1225         return criteriaTranslator.translateMaxQuery(persistenceManager.getDynamicEntityDao(),            </span>
<span class="-8797211071846459738" onmouseenter="enter('-8797211071846459738');" onmouseout="out('-8797211071846459738');" style="">1226                 ceilingEntity, filterMappings, maxField).getSingleResult();                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1227     }                                                                                                    </span>
<span  style="">1228                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1229     @Override                                                                                            </span>
<span class="-7700127040847294453" onmouseenter="enter('-7700127040847294453');" onmouseout="out('-7700127040847294453');" style="">1230     public List&lt;Serializable&gt; getPersistentRecords(FetchRequest fetchRequest) {                          </span>
<span class="8379695074016758469" onmouseenter="enter('8379695074016758469');" onmouseout="out('8379695074016758469');" style="">1231         return fetchWrapper.getPersistentRecords(fetchRequest);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1232     }                                                                                                    </span>
<span  style="">1233                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1234     @Override                                                                                            </span>
<span class="-3765220535491808040" onmouseenter="enter('-3765220535491808040');" onmouseout="out('-3765220535491808040');" style=""><abbr title="1235     public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, Integer firstResult, Integer maxResults) {">1235     public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappinðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1236         try {                                                                                            </span>
<span class="389003939619547722" onmouseenter="enter('389003939619547722');" onmouseout="out('389003939619547722');" style=""><abbr title="1237             return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings, firstResult, maxResults).getResultList();">1237             return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntðŸ”µ</abbr></span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1238         } catch (CriteriaConversionException e) {                                                        </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1239             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1239             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilðŸ”µ</abbr></span>
<span class="-221814316245476979" onmouseenter="enter('-221814316245476979');" onmouseout="out('-221814316245476979');" style=""><abbr title="1240             return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getResultList();">1240             return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManagerðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1241         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1242     }                                                                                                    </span>
<span  style="">1243                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1244     @Override                                                                                            </span>
<span class="-5264121643331936103" onmouseenter="enter('-5264121643331936103');" onmouseout="out('-5264121643331936103');" style=""><abbr title="1245     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1245     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; merðŸ”µ</abbr></span>
<span class="4828126916979552028" onmouseenter="enter('4828126916979552028');" onmouseout="out('4828126916979552028');" style="">1246         return validate(entity, populatedInstance, mergedProperties, true);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1247     }                                                                                                    </span>
<span  style="">1248                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1249     @Override                                                                                            </span>
<span class="-2540520329201552550" onmouseenter="enter('-2540520329201552550');" onmouseout="out('-2540520329201552550');" style=""><abbr title="1250     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties,">1250     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; merðŸ”µ</abbr></span>
<span class="-646875273047375380" onmouseenter="enter('-646875273047375380');" onmouseout="out('-646875273047375380');" style="">1251             boolean validateUnsubmittedProperties) {                                                     </span>
<span class="-1767922062013594425" onmouseenter="enter('-1767922062013594425');" onmouseout="out('-1767922062013594425');" style=""><abbr title="1252         entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedProperties);">1252         entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmðŸ”µ</abbr></span>
<span class="3683508287945816806" onmouseenter="enter('3683508287945816806');" onmouseout="out('3683508287945816806');" style="">1253         return !entity.isValidationFailure();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254     }                                                                                                    </span>
<span  style="">1255                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1256     @Override                                                                                            </span>
<span class="-7261136882877520523" onmouseenter="enter('-7261136882877520523');" onmouseout="out('-7261136882877520523');" style="">1257     public void setPersistenceManager(PersistenceManager persistenceManager) {                           </span>
<span class="420805913365778848" onmouseenter="enter('420805913365778848');" onmouseout="out('420805913365778848');" style="">1258         this.persistenceManager = persistenceManager;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1259     }                                                                                                    </span>
<span  style="">1260                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1261     @Override                                                                                            </span>
<span class="-2499387119652050167" onmouseenter="enter('-2499387119652050167');" onmouseout="out('-2499387119652050167');" style="">1262     public PersistenceModule getCompatibleModule(OperationType operationType) {                          </span>
<span class="-6680721005895887682" onmouseenter="enter('-6680721005895887682');" onmouseout="out('-6680721005895887682');" style="">1263         return ((InspectHelper) persistenceManager).getCompatibleModule(operationType);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1264     }                                                                                                    </span>
<span  style="">1265                                                                                                          </span>
<span class="3328492731591597182" onmouseenter="enter('3328492731591597182');" onmouseout="out('3328492731591597182');" style="">1266     public FieldPersistenceProvider getDefaultFieldPersistenceProvider() {                               </span>
<span class="1756204342632449191" onmouseenter="enter('1756204342632449191');" onmouseout="out('1756204342632449191');" style="">1267         return defaultFieldPersistenceProvider;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1268     }                                                                                                    </span>
<span  style="">1269                                                                                                          </span>
<span class="-2699135397458953097" onmouseenter="enter('-2699135397458953097');" onmouseout="out('-2699135397458953097');" style=""><abbr title="1270     public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvider) {">1270     public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvidðŸ”µ</abbr></span>
<span class="3999856981618428822" onmouseenter="enter('3999856981618428822');" onmouseout="out('3999856981618428822');" style="">1271         this.defaultFieldPersistenceProvider = defaultFieldPersistenceProvider;                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272     }                                                                                                    </span>
<span  style="">1273                                                                                                          </span>
<span class="-3297513575264900381" onmouseenter="enter('-3297513575264900381');" onmouseout="out('-3297513575264900381');" style="">1274     public List&lt;FieldPersistenceProvider&gt; getFieldPersistenceProviders() {                               </span>
<span class="-2059463949907485093" onmouseenter="enter('-2059463949907485093');" onmouseout="out('-2059463949907485093');" style="">1275         return fieldPersistenceProviders;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1276     }                                                                                                    </span>
<span  style="">1277                                                                                                          </span>
<span class="-235472694817904036" onmouseenter="enter('-235472694817904036');" onmouseout="out('-235472694817904036');" style="">1278     public void setFieldPersistenceProviders(List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders) { </span>
<span class="-2955406707242124116" onmouseenter="enter('-2955406707242124116');" onmouseout="out('-2955406707242124116');" style="">1279         this.fieldPersistenceProviders = fieldPersistenceProviders;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1280     }                                                                                                    </span>
<span  style="">1281                                                                                                          </span>
<span class="2527239256502116436" onmouseenter="enter('2527239256502116436');" onmouseout="out('2527239256502116436');" style="">1282     public CriteriaTranslator getCriteriaTranslator() {                                                  </span>
<span class="-7874987932723060666" onmouseenter="enter('-7874987932723060666');" onmouseout="out('-7874987932723060666');" style="">1283         return criteriaTranslator;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1284     }                                                                                                    </span>
<span  style="">1285                                                                                                          </span>
<span class="3030781032482147469" onmouseenter="enter('3030781032482147469');" onmouseout="out('3030781032482147469');" style="">1286     public void setCriteriaTranslator(CriteriaTranslator criteriaTranslator) {                           </span>
<span class="8514480012814343106" onmouseenter="enter('8514480012814343106');" onmouseout="out('8514480012814343106');" style="">1287         this.criteriaTranslator = criteriaTranslator;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1288     }                                                                                                    </span>
<span  style="">1289                                                                                                          </span>
<span class="5879967825851129823" onmouseenter="enter('5879967825851129823');" onmouseout="out('5879967825851129823');" style="">1290     public EntityValidatorService getEntityValidatorService() {                                          </span>
<span class="5121045867689107592" onmouseenter="enter('5121045867689107592');" onmouseout="out('5121045867689107592');" style="">1291         return entityValidatorService;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1292     }                                                                                                    </span>
<span  style="">1293                                                                                                          </span>
<span class="1108892278031396141" onmouseenter="enter('1108892278031396141');" onmouseout="out('1108892278031396141');" style="">1294     public void setEntityValidatorService(EntityValidatorService entityValidatorService) {               </span>
<span class="-1870662827894286800" onmouseenter="enter('-1870662827894286800');" onmouseout="out('-1870662827894286800');" style="">1295         this.entityValidatorService = entityValidatorService;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1296     }                                                                                                    </span>
<span  style="">1297                                                                                                          </span>
<span class="-1748543627179535834" onmouseenter="enter('-1748543627179535834');" onmouseout="out('-1748543627179535834');" style="">1298     public RestrictionFactory getRestrictionFactory() {                                                  </span>
<span class="3824148827663415229" onmouseenter="enter('3824148827663415229');" onmouseout="out('3824148827663415229');" style="">1299         return restrictionFactory;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300     }                                                                                                    </span>
<span  style="">1301                                                                                                          </span>
<span class="-2008652971927118074" onmouseenter="enter('-2008652971927118074');" onmouseout="out('-2008652971927118074');" style="">1302     public void setRestrictionFactory(RestrictionFactory restrictionFactory) {                           </span>
<span class="2351646543947184406" onmouseenter="enter('2351646543947184406');" onmouseout="out('2351646543947184406');" style="">1303         this.restrictionFactory = restrictionFactory;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304     }                                                                                                    </span>
<span  style="">1305                                                                                                          </span>
<span class="-5029713949712177492" onmouseenter="enter('-5029713949712177492');" onmouseout="out('-5029713949712177492');" style="">1306     public PersistenceManager getPersistenceManager() {                                                  </span>
<span class="238620838116623116" onmouseenter="enter('238620838116623116');" onmouseout="out('238620838116623116');" style="">1307         return persistenceManager;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1308     }                                                                                                    </span>
<span  style="">1309                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1310     /**                                                                                                  </span>
<span class="-5659125667278957327" onmouseenter="enter('-5659125667278957327');" onmouseout="out('-5659125667278957327');" style=""><abbr title="1311      * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable object. Related">1311      * Use an alternate approach to generating a fetch query for a collection located inside of an @EmbedðŸ”µ</abbr></span>
<span class="4561034045985117681" onmouseenter="enter('4561034045985117681');" onmouseout="out('4561034045985117681');" style=""><abbr title="1312      * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA criteria,">1312      * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather thðŸ”µ</abbr></span>
<span class="6419934548242517763" onmouseenter="enter('6419934548242517763');" onmouseout="out('6419934548242517763');" style="">1313      * which seems to alleviate the problem.                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1314      *                                                                                                   </span>
<span class="-2077216329372670" onmouseenter="enter('-2077216329372670');" onmouseout="out('-2077216329372670');" style="">1315      * @param embeddedCollectionPath the path to the collection field itself                             </span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1316      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="500285512782550604" onmouseenter="enter('500285512782550604');" onmouseout="out('500285512782550604');" style="">1317      * @param collectionClass the type of the collection members                                         </span>
<span class="-124687443674998826" onmouseenter="enter('-124687443674998826');" onmouseout="out('-124687443674998826');" style="">1318      * @return the builder capable of generating an appropriate HQL query                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1319      */                                                                                                  </span>
<span class="318950424073468037" onmouseenter="enter('318950424073468037');" onmouseout="out('318950424073468037');" style=""><abbr title="1320     protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings, String collectionClass) {">1320     protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMðŸ”µ</abbr></span>
<span class="6393444935626899139" onmouseenter="enter('6393444935626899139');" onmouseout="out('6393444935626899139');" style="">1321         String specialPath = embeddedCollectionPath.getTargetProperty();                                 </span>
<span class="-5143159997305327734" onmouseenter="enter('-5143159997305327734');" onmouseout="out('-5143159997305327734');" style="">1322         String[] pieces = specialPath.split(&quot;\\.&quot;);                                                      </span>
<span class="5217253633788863143" onmouseenter="enter('5217253633788863143');" onmouseout="out('5217253633788863143');" style="">1323         if (pieces.length != 3) {                                                                        </span>
<span class="849365765552848208" onmouseenter="enter('849365765552848208');" onmouseout="out('849365765552848208');" style=""><abbr title="1324             throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embedded field].[collection field].[property] for the embedded collection path (%s)&quot;, specialPath), embeddedCollectionPath);">1324             throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of foðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1325         }                                                                                                </span>
<span class="-8198781854964897228" onmouseenter="enter('-8198781854964897228');" onmouseout="out('-8198781854964897228');" style="">1326         String expression = specialPath.substring(0, specialPath.lastIndexOf(&quot;.&quot;));                      </span>
<span class="7643896692389749892" onmouseenter="enter('7643896692389749892');" onmouseout="out('7643896692389749892');" style="">1327         TypedQueryBuilder builder;                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1328         try {                                                                                            </span>
<span class="-8552982106091258322" onmouseenter="enter('-8552982106091258322');" onmouseout="out('-8552982106091258322');" style="">1329             builder = new TypedQueryBuilder(Class.forName(collectionClass), &quot;specialEntity&quot;)             </span>
<span class="7429624725018559493" onmouseenter="enter('7429624725018559493');" onmouseout="out('7429624725018559493');" style="">1330                     .addJoin(new TQJoin(&quot;specialEntity.&quot; + expression, &quot;embeddedCollection&quot;));           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1331         } catch (Exception e) {                                                                          </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style="">1332             throw ExceptionHelper.refineException(e);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1333         }                                                                                                </span>
<span class="-3537338773035059274" onmouseenter="enter('-3537338773035059274');" onmouseout="out('-3537338773035059274');" style="">1334         for (TQRestriction restriction : buildSpecialRestrictions(expression, filterMappings)) {         </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1335             builder = builder.addRestriction(restriction);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1336         }                                                                                                </span>
<span class="-3768831820353648531" onmouseenter="enter('-3768831820353648531');" onmouseout="out('-3768831820353648531');" style=""><abbr title="1337         for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappings)) {">1337         for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappingsðŸ”µ</abbr></span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1338             builder = builder.addRestriction(restriction);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1339         }                                                                                                </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1340         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="-4604402569484224232" onmouseenter="enter('-4604402569484224232');" onmouseout="out('-4604402569484224232');" style="">1341             if (mapping.getSortDirection() != null) {                                                    </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1342                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1342                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().gðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1343                 if (StringUtils.isEmpty(mappingProperty)) {                                              </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1344                     mappingProperty = mapping.getFullPropertyName();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1345                 }                                                                                        </span>
<span class="-8248548206415810836" onmouseenter="enter('-8248548206415810836');" onmouseout="out('-8248548206415810836');" style=""><abbr title="1346                 builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDING == mapping.getSortDirection()));">1346                 builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1347             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1348         }                                                                                                </span>
<span  style="">1349                                                                                                          </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style="">1350         return builder;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1351     }                                                                                                    </span>
<span  style="">1352                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1353     /**                                                                                                  </span>
<span class="-8346746296837651477" onmouseenter="enter('-8346746296837651477');" onmouseout="out('-8346746296837651477');" style=""><abbr title="1354      * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collection field in the @Embeddable object)">1354      * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not theðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1355      *                                                                                                   </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1356      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1356      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.moduleðŸ”µ</abbr></span>
<span class="6692178223307224172" onmouseenter="enter('6692178223307224172');" onmouseout="out('6692178223307224172');" style=""><abbr title="1357      * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caused the whole thing">1357      * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this iðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1358      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="-357236726942159378" onmouseenter="enter('-357236726942159378');" onmouseout="out('-357236726942159378');" style="">1359      * @return the list of restrictions on the root entity                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1360      */                                                                                                  </span>
<span class="-85615873681846318" onmouseenter="enter('-85615873681846318');" onmouseout="out('-85615873681846318');" style=""><abbr title="1361     protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings) {">1361     protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterðŸ”µ</abbr></span>
<span class="-1692895948334038289" onmouseenter="enter('-1692895948334038289');" onmouseout="out('-1692895948334038289');" style=""><abbr title="1362         String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargetProperty().lastIndexOf(&quot;.&quot;));">1362         String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPatðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1363         List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                               </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1364         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="5670151306593626605" onmouseenter="enter('5670151306593626605');" onmouseout="out('5670151306593626605');" style="">1365             checkProperty: {                                                                             </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1366                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1366                 String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().gðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1367                 if (StringUtils.isEmpty(mappingProperty)) {                                              </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1368                     mappingProperty = mapping.getFullPropertyName();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1369                 }                                                                                        </span>
<span class="-8226569942575396694" onmouseenter="enter('-8226569942575396694');" onmouseout="out('-8226569942575396694');" style=""><abbr title="1370                 if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.isEmpty(mappingProperty)) {">1370                 if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.iðŸ”µ</abbr></span>
<span class="-9008982404255839640" onmouseenter="enter('-9008982404255839640');" onmouseout="out('-9008982404255839640');" style=""><abbr title="1371                     PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider();">1371                     PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider()ðŸ”µ</abbr></span>
<span class="-3527643591612301478" onmouseenter="enter('-3527643591612301478');" onmouseout="out('-3527643591612301478');" style="">1372                     if (predicateProvider != null) {                                                     </span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style=""><abbr title="1373                         FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();">1373                         FilterValueConverter converter = mapping.getRestriction().getFilterValueConverterðŸ”µ</abbr></span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1374                         if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {</span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1375                             Object val = converter.convert(mapping.getFilterValues().get(0));            </span>
<span class="4919121251037931163" onmouseenter="enter('4919121251037931163');" onmouseout="out('4919121251037931163');" style="">1376                             if (predicateProvider instanceof LikePredicateProvider) {                    </span>
<span class="-1773061400470981891" onmouseenter="enter('-1773061400470981891');" onmouseout="out('-1773061400470981891');" style=""><abbr title="1377                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, val + &quot;%&quot;));">1377                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1378                                 break checkProperty;                                                     </span>
<span class="8904766331581746771" onmouseenter="enter('8904766331581746771');" onmouseout="out('8904766331581746771');" style="">1379                             } else if (predicateProvider instanceof EqPredicateProvider) {               </span>
<span class="1134572960833745712" onmouseenter="enter('1134572960833745712');" onmouseout="out('1134572960833745712');" style=""><abbr title="1380                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=&quot;, val));">1380                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=ðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1381                                 break checkProperty;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1384                     }                                                                                    </span>
<span class="-6733273180612799079" onmouseenter="enter('-6733273180612799079');" onmouseout="out('-6733273180612799079');" style=""><abbr title="1385                     LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional property (%s)&quot;,">1385                     LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additionaðŸ”µ</abbr></span>
<span class="-8181613750620164347" onmouseenter="enter('-8181613750620164347');" onmouseout="out('-8181613750620164347');" style="">1386                             StringUtil.sanitize(expression),                                             </span>
<span class="-5255115290358802775" onmouseenter="enter('-5255115290358802775');" onmouseout="out('-5255115290358802775');" style="">1387                             StringUtil.sanitize(mappingProperty)));                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1388                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1389             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1390         }                                                                                                </span>
<span  style="">1391                                                                                                          </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1392         return restrictions;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1393     }                                                                                                    </span>
<span  style="">1394                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1395     /**                                                                                                  </span>
<span class="2167663911523579684" onmouseenter="enter('2167663911523579684');" onmouseout="out('2167663911523579684');" style=""><abbr title="1396      * Generate EQUALS restrictions for any filter property specified on the entity member of the collection field in the @Embeddable object">1396      * Generate EQUALS restrictions for any filter property specified on the entity member of the collectðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1397      *                                                                                                   </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1398      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1398      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.moduleðŸ”µ</abbr></span>
<span class="-9017749716487851104" onmouseenter="enter('-9017749716487851104');" onmouseout="out('-9017749716487851104');" style=""><abbr title="1399      * @param specialExpression the String representation of the path for the collection field in the @Embeddable object">1399      * @param specialExpression the String representation of the path for the collection field in the @EmðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1400      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="3793893128909469910" onmouseenter="enter('3793893128909469910');" onmouseout="out('3793893128909469910');" style="">1401      * @return the list of restrictions on the collection in the @Embeddable object                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1402      */                                                                                                  </span>
<span class="-1807551435758383985" onmouseenter="enter('-1807551435758383985');" onmouseout="out('-1807551435758383985');" style=""><abbr title="1403     protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMappings) {">1403     protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; ðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1404         List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                               </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1405         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="-7768046259105737972" onmouseenter="enter('-7768046259105737972');" onmouseout="out('-7768046259105737972');" style=""><abbr title="1406             if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mapping.getFieldPath().getTargetProperty().startsWith(specialExpression)) {">1406             if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mðŸ”µ</abbr></span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1407                 FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();     </span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1408                 if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {        </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1409                     Object val = converter.convert(mapping.getFilterValues().get(0));                    </span>
<span class="-3185664653595577967" onmouseenter="enter('-3185664653595577967');" onmouseout="out('-3185664653595577967');" style=""><abbr title="1410                     String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().getTargetProperty().lastIndexOf(&quot;.&quot;) + 1, mapping.getFieldPath().getTargetProperty().length());">1410                     String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieðŸ”µ</abbr></span>
<span class="6515773652350530653" onmouseenter="enter('6515773652350530653');" onmouseout="out('6515773652350530653');" style="">1411                     restrictions.add(new TQRestriction(&quot;embeddedCollection.&quot; + property, &quot;=&quot;, val));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1413             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1414         }                                                                                                </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1415         return restrictions;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1416     }                                                                                                    </span>
<span  style="">1417                                                                                                          </span>
<span class="-1847859638489008561" onmouseenter="enter('-1847859638489008561');" onmouseout="out('-1847859638489008561');" style="">1418     protected void cleanupFailedPersistenceAttempt(Serializable instance) throws IllegalAccessException {</span>
<span class="-761178418461683406" onmouseenter="enter('-761178418461683406');" onmouseout="out('-761178418461683406');" style="">1419         //Remove the entity from ORM management - no further attempts to persist                         </span>
<span class="-8509958237563709196" onmouseenter="enter('-8509958237563709196');" onmouseout="out('-8509958237563709196');" style=""><abbr title="1420         if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) {">1420         if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) ðŸ”µ</abbr></span>
<span class="-8381574259703143566" onmouseenter="enter('-8381574259703143566');" onmouseout="out('-8381574259703143566');" style="">1421             getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().detach(instance);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422         }                                                                                                </span>
<span class="7196727024368525589" onmouseenter="enter('7196727024368525589');" onmouseout="out('7196727024368525589');" style="">1423         //Remove the id field value, if it&#x27;s set                                                         </span>
<span class="-8963497040678265373" onmouseenter="enter('-8963497040678265373');" onmouseout="out('-8963497040678265373');" style=""><abbr title="1424         String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClass()).get(&quot;name&quot;);">1424         String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instancðŸ”µ</abbr></span>
<span class="-7813482713010008669" onmouseenter="enter('-7813482713010008669');" onmouseout="out('-7813482713010008669');" style="">1425         Field idField = FieldUtils.getField(instance.getClass(), idFieldName, true);                     </span>
<span class="-5694238240637206409" onmouseenter="enter('-5694238240637206409');" onmouseout="out('-5694238240637206409');" style="">1426         if (idField == null) {                                                                           </span>
<span class="6113500709945049507" onmouseenter="enter('6113500709945049507');" onmouseout="out('6113500709945049507');" style=""><abbr title="1427             throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getName() + &quot; does not contain id field &quot; + idFieldName));">1427             throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1428         }                                                                                                </span>
<span class="7965871812340203707" onmouseenter="enter('7965871812340203707');" onmouseout="out('7965871812340203707');" style="">1429         idField.setAccessible(true);                                                                     </span>
<span class="-5148613654387121426" onmouseenter="enter('-5148613654387121426');" onmouseout="out('-5148613654387121426');" style="">1430         if (idField.get(instance) != null) {                                                             </span>
<span class="-3149499430961766795" onmouseenter="enter('-3149499430961766795');" onmouseout="out('-3149499430961766795');" style="">1431             idField.set(instance, null);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1432         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1433     }                                                                                                    </span>
<span  style="">1434                                                                                                          </span>
<span class="361057059065324955" onmouseenter="enter('361057059065324955');" onmouseout="out('361057059065324955');" style=""><abbr title="1435     protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property property) {">1435     protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property propertðŸ”µ</abbr></span>
<span class="1752551688027428994" onmouseenter="enter('1752551688027428994');" onmouseout="out('1752551688027428994');" style="">1436         Class&lt;?&gt; returnType = null;                                                                      </span>
<span class="3738304511666335991" onmouseenter="enter('3738304511666335991');" onmouseout="out('3738304511666335991');" style=""><abbr title="1437         Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName().indexOf(FieldManager.MAPFIELDSEPARATOR)));">1437         Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, propertyðŸ”µ</abbr></span>
<span class="5464468769050206957" onmouseenter="enter('5464468769050206957');" onmouseout="out('5464468769050206957');" style="">1438         java.lang.reflect.Type type = field.getGenericType();                                            </span>
<span class="-6389298272813932854" onmouseenter="enter('-6389298272813932854');" onmouseout="out('-6389298272813932854');" style="">1439         if (type instanceof ParameterizedType) {                                                         </span>
<span class="705860026972665445" onmouseenter="enter('705860026972665445');" onmouseout="out('705860026972665445');" style="">1440             ParameterizedType pType = (ParameterizedType) type;                                          </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style="">1441             Class&lt;?&gt; clazz;                                                                              </span>
<span class="7069691481162074648" onmouseenter="enter('7069691481162074648');" onmouseout="out('7069691481162074648');" style="">1442             if (pType.getActualTypeArguments().length &lt; 2) {                                             </span>
<span class="4541832948460311824" onmouseenter="enter('4541832948460311824');" onmouseout="out('4541832948460311824');" style="">1443                 clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[0];                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1444             } else {                                                                                     </span>
<span class="-5335821615199731853" onmouseenter="enter('-5335821615199731853');" onmouseout="out('-5335821615199731853');" style="">1445                 clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[1];                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1446             }                                                                                            </span>
<span class="2546721200619882801" onmouseenter="enter('2546721200619882801');" onmouseout="out('2546721200619882801');" style=""><abbr title="1447             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clazz);">1447             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCðŸ”µ</abbr></span>
<span class="5482192784237496931" onmouseenter="enter('5482192784237496931');" onmouseout="out('5482192784237496931');" style="">1448             if (!ArrayUtils.isEmpty(entities)) {                                                         </span>
<span class="4302056969260211006" onmouseenter="enter('4302056969260211006');" onmouseout="out('4302056969260211006');" style="">1449                 returnType = entities[entities.length - 1];                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1450             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1451         }                                                                                                </span>
<span class="7163755908227734414" onmouseenter="enter('7163755908227734414');" onmouseout="out('7163755908227734414');" style="">1452         return returnType;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1453     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1454 }                                                                                                        </span>













































</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="-3730395872919143110" onmouseenter="enter('-3730395872919143110');" onmouseout="out('-3730395872919143110');" style="">  18 package org.broadleafcommerce.openadmin.server.service.persistence.module;                               </span>
<span  style="">  19                                                                                                          </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="">  20 import java.io.Serializable;                                                                             </span>
<span class="507320133330553151" onmouseenter="enter('507320133330553151');" onmouseout="out('507320133330553151');" style="">  21 import java.lang.reflect.Field;                                                                          </span>
<span class="5727252987923913" onmouseenter="enter('5727252987923913');" onmouseout="out('5727252987923913');" style="">  22 import java.lang.reflect.InvocationTargetException;                                                      </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style="">  23 import java.lang.reflect.Method;                                                                         </span>
<span class="347575814667778087" onmouseenter="enter('347575814667778087');" onmouseout="out('347575814667778087');" style="">  24 import java.lang.reflect.ParameterizedType;                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style="">  25 import java.math.BigDecimal;                                                                             </span>
<span class="-8993555010225969077" onmouseenter="enter('-8993555010225969077');" onmouseout="out('-8993555010225969077');" style="">  26 import java.sql.Timestamp;                                                                               </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style="">  27 import java.text.DecimalFormat;                                                                          </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style="">  28 import java.text.NumberFormat;                                                                           </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style="">  29 import java.text.SimpleDateFormat;                                                                       </span>
<span class="196713859697444637" onmouseenter="enter('196713859697444637');" onmouseout="out('196713859697444637');" style="">  30 import java.util.*;                                                                                      </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  31 import java.util.Map.Entry;                                                                              </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style="">  32 import javax.annotation.PostConstruct;                                                                   </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  33 import javax.annotation.Resource;                                                                        </span>
<span class="6585399145259537123" onmouseenter="enter('6585399145259537123');" onmouseout="out('6585399145259537123');" style="">  34 import org.apache.commons.beanutils.PropertyUtils;                                                       </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  35 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  36 import org.apache.commons.lang.ArrayUtils;                                                               </span>
<span class="7952073036463698968" onmouseenter="enter('7952073036463698968');" onmouseout="out('7952073036463698968');" style="">  37 import org.apache.commons.lang.StringUtils;                                                              </span>
<span class="-4811768396919678325" onmouseenter="enter('-4811768396919678325');" onmouseout="out('-4811768396919678325');" style="">  38 import org.apache.commons.lang3.BooleanUtils;                                                            </span>
<span class="-4496642532189438643" onmouseenter="enter('-4496642532189438643');" onmouseout="out('-4496642532189438643');" style="">  39 import org.apache.commons.lang3.reflect.FieldUtils;                                                      </span>
<span class="-7494130924703435694" onmouseenter="enter('-7494130924703435694');" onmouseout="out('-7494130924703435694');" style="">  40 import org.apache.commons.lang3.reflect.MethodUtils;                                                     </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  41 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  42 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  43 import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                        </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  44 import org.broadleafcommerce.common.exception.ExceptionHelper;                                           </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  45 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  46 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  47 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="-274639712180431568" onmouseenter="enter('-274639712180431568');" onmouseout="out('-274639712180431568');" style="">  48 import org.broadleafcommerce.common.money.Money;                                                         </span>
<span class="-212317658512913375" onmouseenter="enter('-212317658512913375');" onmouseout="out('-212317658512913375');" style="">  49 import org.broadleafcommerce.common.presentation.client.OperationType;                                   </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  50 import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                  </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  51 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  52 import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                  </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  53 import org.broadleafcommerce.common.util.FormatUtil;                                                     </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  54 import org.broadleafcommerce.common.util.StringUtil;                                                     </span>
<span class="-2926793360365808281" onmouseenter="enter('-2926793360365808281');" onmouseout="out('-2926793360365808281');" style="">  55 import org.broadleafcommerce.common.util.ValidationUtil;                                                 </span>
<span class="7948666462039628690" onmouseenter="enter('7948666462039628690');" onmouseout="out('7948666462039628690');" style="">  56 import org.broadleafcommerce.common.util.dao.TQJoin;                                                     </span>
<span class="4569891227290901556" onmouseenter="enter('4569891227290901556');" onmouseout="out('4569891227290901556');" style="">  57 import org.broadleafcommerce.common.util.dao.TQOrder;                                                    </span>
<span class="2808183798288001053" onmouseenter="enter('2808183798288001053');" onmouseout="out('2808183798288001053');" style="">  58 import org.broadleafcommerce.common.util.dao.TQRestriction;                                              </span>
<span class="8922526534929083638" onmouseenter="enter('8922526534929083638');" onmouseout="out('8922526534929083638');" style="">  59 import org.broadleafcommerce.common.util.dao.TypedQueryBuilder;                                          </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  60 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-9032655456699873894" onmouseenter="enter('-9032655456699873894');" onmouseout="out('-9032655456699873894');" style="">  61 import org.broadleafcommerce.openadmin.dto.*;                                                            </span>
<span class="-2518486623699289546" onmouseenter="enter('-2518486623699289546');" onmouseout="out('-2518486623699289546');" style=""><abbr title="  62 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvider;">  62 import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvidðŸ”µ</abbr></span>
<span class="-3305750562841405447" onmouseenter="enter('-3305750562841405447');" onmouseout="out('-3305750562841405447');" style="">  63 import org.broadleafcommerce.openadmin.server.service.ValidationException;                               </span>
<span class="8378385081764163459" onmouseenter="enter('8378385081764163459');" onmouseout="out('8378385081764163459');" style="">  64 import org.broadleafcommerce.openadmin.server.service.persistence.ParentEntityPersistenceException;      </span>
<span class="5722165468172421658" onmouseenter="enter('5722165468172421658');" onmouseout="out('5722165468172421658');" style="">  65 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceException;                  </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  66 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                    </span>
<span class="5058784187408591906" onmouseenter="enter('5058784187408591906');" onmouseout="out('5058784187408591906');" style="">  67 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.*;                     </span>
<span class="-481493864845228243" onmouseenter="enter('-481493864845228243');" onmouseout="out('-481493864845228243');" style=""><abbr title="  68 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueConverter;">  68 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueCoðŸ”µ</abbr></span>
<span class="2179480323999346530" onmouseenter="enter('2179480323999346530');" onmouseout="out('2179480323999346530');" style=""><abbr title="  69 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicateProvider;">  69 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicatePrðŸ”µ</abbr></span>
<span class="8659565314530832704" onmouseenter="enter('8659565314530832704');" onmouseout="out('8659565314530832704');" style=""><abbr title="  70 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateProvider;">  70 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateðŸ”µ</abbr></span>
<span class="2225343043491731861" onmouseenter="enter('2225343043491731861');" onmouseout="out('2225343043491731861');" style=""><abbr title="  71 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvider;">  71 import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvðŸ”µ</abbr></span>
<span class="1619823169108097395" onmouseenter="enter('1619823169108097395');" onmouseout="out('1619823169108097395');" style=""><abbr title="  72 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionManager;">  72 import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleðŸ”µ</abbr></span>
<span class="2027605662300607419" onmouseenter="enter('2027605662300607419');" onmouseout="out('2027605662300607419');" style=""><abbr title="  73 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvider;">  73 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvideðŸ”µ</abbr></span>
<span class="-4946286896488271959" onmouseenter="enter('-4946286896488271959');" onmouseout="out('-4946286896488271959');" style=""><abbr title="  74 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequest;">  74 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterProperðŸ”µ</abbr></span>
<span class="-2189126569880350667" onmouseenter="enter('-2189126569880350667');" onmouseout="out('-2189126569880350667');" style=""><abbr title="  75 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappingRequest;">  75 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappinðŸ”µ</abbr></span>
<span class="6456213336650879315" onmouseenter="enter('6456213336650879315');" onmouseout="out('6456213336650879315');" style=""><abbr title="  76 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueRequest;">  76 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueReqðŸ”µ</abbr></span>
<span class="7338762877284211273" onmouseenter="enter('7338762877284211273');" onmouseout="out('7338762877284211273');" style=""><abbr title="  77 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueRequest;">  77 import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueReðŸ”µ</abbr></span>
<span class="4906254842317893740" onmouseenter="enter('4906254842317893740');" onmouseout="out('4906254842317893740');" style="">  78 import org.broadleafcommerce.openadmin.server.service.persistence.validation.EntityValidatorService;     </span>
<span class="375927524796533683" onmouseenter="enter('375927524796533683');" onmouseout="out('375927524796533683');" style=""><abbr title="  79 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidator;">  79 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidatoðŸ”µ</abbr></span>
<span class="3919265641981654464" onmouseenter="enter('3919265641981654464');" onmouseout="out('3919265641981654464');" style="">  80 import org.broadleafcommerce.openadmin.server.service.persistence.validation.PropertyValidationResult;   </span>
<span class="5692608280904331276" onmouseenter="enter('5692608280904331276');" onmouseout="out('5692608280904331276');" style="">  81 import org.broadleafcommerce.openadmin.server.service.type.MetadataProviderResponse;                     </span>
<span class="3891204800073608559" onmouseenter="enter('3891204800073608559');" onmouseout="out('3891204800073608559');" style="">  82 import org.hibernate.FlushMode;                                                                          </span>
<span class="-1504015732959009083" onmouseenter="enter('-1504015732959009083');" onmouseout="out('-1504015732959009083');" style="">  83 import org.hibernate.Session;                                                                            </span>
<span class="-6968089101617569818" onmouseenter="enter('-6968089101617569818');" onmouseout="out('-6968089101617569818');" style="">  84 import org.springframework.beans.BeansException;                                                         </span>
<span class="1015650858128177541" onmouseenter="enter('1015650858128177541');" onmouseout="out('1015650858128177541');" style="">  85 import org.springframework.context.ApplicationContext;                                                   </span>
<span class="5490156850800899437" onmouseenter="enter('5490156850800899437');" onmouseout="out('5490156850800899437');" style="">  86 import org.springframework.context.ApplicationContextAware;                                              </span>
<span class="1179989609458797828" onmouseenter="enter('1179989609458797828');" onmouseout="out('1179989609458797828');" style="">  87 import org.springframework.context.annotation.Primary;                                                   </span>
<span class="2368474895564125270" onmouseenter="enter('2368474895564125270');" onmouseout="out('2368474895564125270');" style="">  88 import org.springframework.context.annotation.Scope;                                                     </span>
<span class="8406454220154166073" onmouseenter="enter('8406454220154166073');" onmouseout="out('8406454220154166073');" style="">  89 import org.springframework.stereotype.Component;                                                         </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="">  90 import org.springframework.util.Assert;                                                                  </span>
<span  style="">  91                                                                                                          </span>
<span  style="">  92                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  93 /**                                                                                                      </span>
<span class="3104529581940833663" onmouseenter="enter('3104529581940833663');" onmouseout="out('3104529581940833663');" style="">  94  * @author jfischer                                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  95  */                                                                                                      </span>
<span class="7759015212035044666" onmouseenter="enter('7759015212035044666');" onmouseout="out('7759015212035044666');" style="">  96 @Primary                                                                                                 </span>
<span class="1694546414662202322" onmouseenter="enter('1694546414662202322');" onmouseout="out('1694546414662202322');" style="">  97 @Component(&quot;blBasicPersistenceModule&quot;)                                                                   </span>
<span class="-3657083271113190387" onmouseenter="enter('-3657083271113190387');" onmouseout="out('-3657083271113190387');" style="">  98 @Scope(&quot;prototype&quot;)                                                                                      </span>
<span class="1065304803760142735" onmouseenter="enter('1065304803760142735');" onmouseout="out('1065304803760142735');" style=""><abbr title="  99 public class BasicPersistenceModule implements PersistenceModule , RecordHelper , ApplicationContextAware {">  99 public class BasicPersistenceModule implements PersistenceModule , RecordHelper , ApplicationContextAwareðŸ”µ</abbr></span>
<span class="8379422291463370013" onmouseenter="enter('8379422291463370013');" onmouseout="out('8379422291463370013');" style=""> 100     private static final Log LOG = LogFactory.getLog(BasicPersistenceModule.class);                      </span>
<span  style=""> 101                                                                                                          </span>
<span class="-381692932666242814" onmouseenter="enter('-381692932666242814');" onmouseout="out('-381692932666242814');" style=""> 102     public static final String MAIN_ENTITY_NAME_PROPERTY = &quot;MAIN_ENTITY_NAME&quot;;                           </span>
<span  style=""> 103                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 104     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span  style=""> 105                                                                                                          </span>
<span class="-4770133548193901777" onmouseenter="enter('-4770133548193901777');" onmouseout="out('-4770133548193901777');" style=""> 106     protected ApplicationContext applicationContext;                                                     </span>
<span  style=""> 107                                                                                                          </span>
<span class="-6488622702665536176" onmouseenter="enter('-6488622702665536176');" onmouseout="out('-6488622702665536176');" style=""> 108     protected PersistenceManager persistenceManager;                                                     </span>
<span  style=""> 109                                                                                                          </span>
<span class="4305095825338649553" onmouseenter="enter('4305095825338649553');" onmouseout="out('4305095825338649553');" style=""> 110     @Resource(name = &quot;blEntityValidatorService&quot;)                                                         </span>
<span class="-2556035380928716519" onmouseenter="enter('-2556035380928716519');" onmouseout="out('-2556035380928716519');" style=""> 111     protected EntityValidatorService entityValidatorService;                                             </span>
<span  style=""> 112                                                                                                          </span>
<span class="6167230228674564015" onmouseenter="enter('6167230228674564015');" onmouseout="out('6167230228674564015');" style=""> 113     @Resource(name = &quot;blPersistenceProviders&quot;)                                                           </span>
<span class="5197193686792056094" onmouseenter="enter('5197193686792056094');" onmouseout="out('5197193686792056094');" style=""><abbr title=" 114     protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;();"> 114     protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistencePrðŸ”µ</abbr></span>
<span  style=""> 115                                                                                                          </span>
<span class="6566976708558343402" onmouseenter="enter('6566976708558343402');" onmouseout="out('6566976708558343402');" style=""> 116     @Resource(name = &quot;blPopulateValueRequestValidators&quot;)                                                 </span>
<span class="8688460549992818244" onmouseenter="enter('8688460549992818244');" onmouseout="out('8688460549992818244');" style=""> 117     protected List&lt;PopulateValueRequestValidator&gt; populateValidators;                                    </span>
<span  style=""> 118                                                                                                          </span>
<span class="2226562240918510507" onmouseenter="enter('2226562240918510507');" onmouseout="out('2226562240918510507');" style=""> 119     @Resource(name = &quot;blDefaultFieldPersistenceProvider&quot;)                                                </span>
<span class="3736553406868276704" onmouseenter="enter('3736553406868276704');" onmouseout="out('3736553406868276704');" style=""> 120     protected FieldPersistenceProvider defaultFieldPersistenceProvider;                                  </span>
<span  style=""> 121                                                                                                          </span>
<span class="-2696154002193407400" onmouseenter="enter('-2696154002193407400');" onmouseout="out('-2696154002193407400');" style=""> 122     @Resource(name = &quot;blCriteriaTranslator&quot;)                                                             </span>
<span class="6548648040486234931" onmouseenter="enter('6548648040486234931');" onmouseout="out('6548648040486234931');" style=""> 123     protected CriteriaTranslator criteriaTranslator;                                                     </span>
<span  style=""> 124                                                                                                          </span>
<span class="-4636653885273856120" onmouseenter="enter('-4636653885273856120');" onmouseout="out('-4636653885273856120');" style=""> 125     @Resource(name = &quot;blRestrictionFactory&quot;)                                                             </span>
<span class="-4515285046595655523" onmouseenter="enter('-4515285046595655523');" onmouseout="out('-4515285046595655523');" style=""> 126     protected RestrictionFactory restrictionFactory;                                                     </span>
<span  style=""> 127                                                                                                          </span>
<span class="2099612267381053384" onmouseenter="enter('2099612267381053384');" onmouseout="out('2099612267381053384');" style=""> 128     @Resource(name = &quot;blBasicPersistenceModuleExtensionManager&quot;)                                         </span>
<span class="4348825311931369098" onmouseenter="enter('4348825311931369098');" onmouseout="out('4348825311931369098');" style=""> 129     protected BasicPersistenceModuleExtensionManager extensionManager;                                   </span>
<span  style=""> 130                                                                                                          </span>
<span class="3131053547948330670" onmouseenter="enter('3131053547948330670');" onmouseout="out('3131053547948330670');" style=""> 131     @Resource(name = &quot;blFetchWrapper&quot;)                                                                   </span>
<span class="-359674182981681110" onmouseenter="enter('-359674182981681110');" onmouseout="out('-359674182981681110');" style=""> 132     protected FetchWrapper fetchWrapper;                                                                 </span>
<span  style=""> 133                                                                                                          </span>
<span class="-5680397040643859011" onmouseenter="enter('-5680397040643859011');" onmouseout="out('-5680397040643859011');" style=""> 134     @PostConstruct                                                                                       </span>
<span class="-5421613521494184453" onmouseenter="enter('-5421613521494184453');" onmouseout="out('-5421613521494184453');" style=""> 135     public void init() {                                                                                 </span>
<span class="4686299079232078395" onmouseenter="enter('4686299079232078395');" onmouseout="out('4686299079232078395');" style=""> 136         Collections.sort(fieldPersistenceProviders, new Comparator&lt;FieldPersistenceProvider&gt;() {         </span>
<span  style=""> 137                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 138             @Override                                                                                    </span>
<span class="3172150882386516312" onmouseenter="enter('3172150882386516312');" onmouseout="out('3172150882386516312');" style=""> 139             public int compare(FieldPersistenceProvider o1, FieldPersistenceProvider o2) {               </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 140                 return Integer.compare(o1.getOrder(), o2.getOrder());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 142         });                                                                                              </span>
<span class="-5522683723982909620" onmouseenter="enter('-5522683723982909620');" onmouseout="out('-5522683723982909620');" style=""> 143         Collections.sort(populateValidators, new Comparator&lt;PopulateValueRequestValidator&gt;() {           </span>
<span  style=""> 144                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 145             @Override                                                                                    </span>
<span class="-53383489616583041" onmouseenter="enter('-53383489616583041');" onmouseout="out('-53383489616583041');" style=""> 146             public int compare(PopulateValueRequestValidator o1, PopulateValueRequestValidator o2) {     </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 147                 return Integer.compare(o1.getOrder(), o2.getOrder());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 149         });                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150     }                                                                                                    </span>
<span  style=""> 151                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 152     @Override                                                                                            </span>
<span class="396918709943054648" onmouseenter="enter('396918709943054648');" onmouseout="out('396918709943054648');" style=""> 153     public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {     </span>
<span class="-8767252978178914531" onmouseenter="enter('-8767252978178914531');" onmouseout="out('-8767252978178914531');" style=""> 154         this.applicationContext = applicationContext;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155     }                                                                                                    </span>
<span  style=""> 156                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 157     @Override                                                                                            </span>
<span class="-3014786585495943162" onmouseenter="enter('-3014786585495943162');" onmouseout="out('-3014786585495943162');" style=""> 158     public boolean isCompatible(OperationType operationType) {                                           </span>
<span class="2141831482980401058" onmouseenter="enter('2141831482980401058');" onmouseout="out('2141831482980401058');" style=""><abbr title=" 159         return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationType;"> 159         return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationTypðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160     }                                                                                                    </span>
<span  style=""> 161                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 162     @Override                                                                                            </span>
<span class="-4646037950621881232" onmouseenter="enter('-4646037950621881232');" onmouseout="out('-4646037950621881232');" style=""> 163     public FieldManager getFieldManager() {                                                              </span>
<span class="5127492287871228389" onmouseenter="enter('5127492287871228389');" onmouseout="out('5127492287871228389');" style=""> 164         return persistenceManager.getDynamicEntityDao().getFieldManager();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165     }                                                                                                    </span>
<span  style=""> 166                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 167     @Override                                                                                            </span>
<span class="6292426019095192675" onmouseenter="enter('6292426019095192675');" onmouseout="out('6292426019095192675');" style=""> 168     public DecimalFormat getDecimalFormatter() {                                                         </span>
<span class="-8689839391291561327" onmouseenter="enter('-8689839391291561327');" onmouseout="out('-8689839391291561327');" style=""> 169         BroadleafRequestContext brc = BroadleafRequestContext.getBroadleafRequestContext();              </span>
<span class="-6419077469974014826" onmouseenter="enter('-6419077469974014826');" onmouseout="out('-6419077469974014826');" style=""> 170         Locale locale = brc.getJavaLocale();                                                             </span>
<span class="5393968905060170707" onmouseenter="enter('5393968905060170707');" onmouseout="out('5393968905060170707');" style=""> 171         DecimalFormat format = (DecimalFormat) NumberFormat.getInstance(locale);                         </span>
<span class="-6387263728450575912" onmouseenter="enter('-6387263728450575912');" onmouseout="out('-6387263728450575912');" style=""> 172         format.applyPattern(&quot;0.########&quot;);                                                               </span>
<span class="-7514226051094490374" onmouseenter="enter('-7514226051094490374');" onmouseout="out('-7514226051094490374');" style=""> 173         format.setGroupingUsed(false);                                                                   </span>
<span class="9058009825496417823" onmouseenter="enter('9058009825496417823');" onmouseout="out('9058009825496417823');" style=""> 174         return format;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175     }                                                                                                    </span>
<span  style=""> 176                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 177     @Override                                                                                            </span>
<span class="3673790992053213915" onmouseenter="enter('3673790992053213915');" onmouseout="out('3673790992053213915');" style=""> 178     public SimpleDateFormat getSimpleDateFormatter() {                                                   </span>
<span class="-4651469406949839699" onmouseenter="enter('-4651469406949839699');" onmouseout="out('-4651469406949839699');" style=""> 179         return FormatUtil.getDateFormat();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180     }                                                                                                    </span>
<span  style=""> 181                                                                                                          </span>
<span class="8865595993102688563" onmouseenter="enter('8865595993102688563');" onmouseout="out('8865595993102688563');" style=""><abbr title=" 182     protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata) {"> 182     protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata)ðŸ”µ</abbr></span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 183         if (metadata == null) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 184             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185         }                                                                                                </span>
<span class="4579536340012797507" onmouseenter="enter('4579536340012797507');" onmouseout="out('4579536340012797507');" style=""> 186         Map&lt;String, FieldMetadata&gt; newMap = new HashMap&lt;String, FieldMetadata&gt;();                        </span>
<span class="-7265940589949467353" onmouseenter="enter('-7265940589949467353');" onmouseout="out('-7265940589949467353');" style=""> 187         for (Map.Entry&lt;String, FieldMetadata&gt; entry : metadata.entrySet()) {                             </span>
<span class="8190629385805201553" onmouseenter="enter('8190629385805201553');" onmouseout="out('8190629385805201553');" style=""> 188             String fieldName = entry.getKey();                                                           </span>
<span class="-1384244356449002788" onmouseenter="enter('-1384244356449002788');" onmouseout="out('-1384244356449002788');" style=""> 189             FieldMetadata md = entry.getValue();                                                         </span>
<span class="-392734195208043155" onmouseenter="enter('-392734195208043155');" onmouseout="out('-392734195208043155');" style=""><abbr title=" 190             // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but also corresponds"> 190             // Detect instances where the actual metadata for the field is some sort of CollectionMetadatðŸ”µ</abbr></span>
<span class="5589067424379822421" onmouseenter="enter('5589067424379822421');" onmouseout="out('5589067424379822421');" style=""><abbr title=" 191             // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistenceModule}"> 191             // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasðŸ”µ</abbr></span>
<span class="3711520644201471237" onmouseenter="enter('3711520644201471237');" onmouseout="out('3711520644201471237');" style=""> 192             // can appropriate handle filtration and population                                          </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 193             if (entry.getValue() instanceof BasicFieldMetadata) {                                        </span>
<span class="-2739418553393512485" onmouseenter="enter('-2739418553393512485');" onmouseout="out('-2739418553393512485');" style=""> 194                 newMap.put(fieldName, md);                                                               </span>
<span class="4750432455054359328" onmouseenter="enter('4750432455054359328');" onmouseout="out('4750432455054359328');" style=""><abbr title=" 195             } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY)) {"> 195             } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FORðŸ”µ</abbr></span>
<span class="-2679713042458666087" onmouseenter="enter('-2679713042458666087');" onmouseout="out('-2679713042458666087');" style=""><abbr title=" 196                 newMap.put(fieldName, ((BasicFieldMetadata) (md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY))));"> 196                 newMap.put(fieldName, ((BasicFieldMetadata) (md.getAdditionalMetadata().get(AdvancedColleðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198         }                                                                                                </span>
<span class="-298172894898579181" onmouseenter="enter('-298172894898579181');" onmouseout="out('-298172894898579181');" style=""> 199         return newMap;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200     }                                                                                                    </span>
<span  style=""> 201                                                                                                          </span>
<span class="5188070027912515482" onmouseenter="enter('5188070027912515482');" onmouseout="out('5188070027912515482');" style=""> 202     protected Class&lt;?&gt; getBasicBroadleafType(SupportedFieldType fieldType) {                             </span>
<span class="4154961753427691315" onmouseenter="enter('4154961753427691315');" onmouseout="out('4154961753427691315');" style=""> 203         Class&lt;?&gt; response;                                                                               </span>
<span class="2733460625953438179" onmouseenter="enter('2733460625953438179');" onmouseout="out('2733460625953438179');" style=""> 204         switch (fieldType) {                                                                             </span>
<span class="-7896257890077828333" onmouseenter="enter('-7896257890077828333');" onmouseout="out('-7896257890077828333');" style=""> 205             case BOOLEAN:                                                                                </span>
<span class="3764755044082566978" onmouseenter="enter('3764755044082566978');" onmouseout="out('3764755044082566978');" style=""> 206                 response = Boolean.TYPE;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 207                 break;                                                                                   </span>
<span class="6347500693000317849" onmouseenter="enter('6347500693000317849');" onmouseout="out('6347500693000317849');" style=""> 208             case DATE:                                                                                   </span>
<span class="-9142021229939239714" onmouseenter="enter('-9142021229939239714');" onmouseout="out('-9142021229939239714');" style=""> 209                 response = Date.class;                                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 210                 break;                                                                                   </span>
<span class="-3124240416500440487" onmouseenter="enter('-3124240416500440487');" onmouseout="out('-3124240416500440487');" style=""> 211             case DECIMAL:                                                                                </span>
<span class="2581462076834923849" onmouseenter="enter('2581462076834923849');" onmouseout="out('2581462076834923849');" style=""> 212                 response = BigDecimal.class;                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 213                 break;                                                                                   </span>
<span class="-8874916124792368887" onmouseenter="enter('-8874916124792368887');" onmouseout="out('-8874916124792368887');" style=""> 214             case MONEY:                                                                                  </span>
<span class="-3304037034117053709" onmouseenter="enter('-3304037034117053709');" onmouseout="out('-3304037034117053709');" style=""> 215                 response = Money.class;                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 216                 break;                                                                                   </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 217             case INTEGER:                                                                                </span>
<span class="3505410153004371202" onmouseenter="enter('3505410153004371202');" onmouseout="out('3505410153004371202');" style=""> 218                 response = Integer.TYPE;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 219                 break;                                                                                   </span>
<span class="1143803050270343828" onmouseenter="enter('1143803050270343828');" onmouseout="out('1143803050270343828');" style=""> 220             case UNKNOWN:                                                                                </span>
<span class="-7560988579214347129" onmouseenter="enter('-7560988579214347129');" onmouseout="out('-7560988579214347129');" style=""> 221                 response = null;                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 222                 break;                                                                                   </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 223             default:                                                                                     </span>
<span class="5514005520990739575" onmouseenter="enter('5514005520990739575');" onmouseout="out('5514005520990739575');" style=""> 224                 response = String.class;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 225                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226         }                                                                                                </span>
<span  style=""> 227                                                                                                          </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 228         return response;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229     }                                                                                                    </span>
<span  style=""> 230                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 231     @Override                                                                                            </span>
<span class="9140503876431781889" onmouseenter="enter('9140503876431781889');" onmouseout="out('9140503876431781889');" style=""><abbr title=" 232     public Serializable createPopulatedInstance(Serializable instance, Entity entity, Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId) throws ValidationException {"> 232     public Serializable createPopulatedInstance(Serializable instance, Entity entity, Map&lt;String, FieldMeðŸ”µ</abbr></span>
<span class="895901652489968225" onmouseenter="enter('895901652489968225');" onmouseout="out('895901652489968225');" style=""> 233         return createPopulatedInstance(instance, entity, unfilteredProperties, setId, true);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234     }                                                                                                    </span>
<span  style=""> 235                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 236     @Override                                                                                            </span>
<span class="-7020372606553926938" onmouseenter="enter('-7020372606553926938');" onmouseout="out('-7020372606553926938');" style=""><abbr title=" 237     public Serializable createPopulatedInstance(Serializable instance, Entity entity, Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties) throws ValidationException {"> 237     public Serializable createPopulatedInstance(Serializable instance, Entity entity, Map&lt;String, FieldMeðŸ”µ</abbr></span>
<span class="-8732291188132739434" onmouseenter="enter('-8732291188132739434');" onmouseout="out('-8732291188132739434');" style=""><abbr title=" 238         final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredProperties);"> 238         final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredPropertðŸ”µ</abbr></span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 239         FieldManager fieldManager = getFieldManager();                                                   </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 240         boolean handled = false;                                                                         </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 241         for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {            </span>
<span class="930709630548418813" onmouseenter="enter('930709630548418813');" onmouseout="out('930709630548418813');" style=""><abbr title=" 242             MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 242             MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPrðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 243             if (MetadataProviderResponse.NOT_HANDLED != response) {                                      </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 244                 handled = true;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245             }                                                                                            </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 246             if (MetadataProviderResponse.HANDLED_BREAK == response) {                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 247                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249         }                                                                                                </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 250         if (!handled) {                                                                                  </span>
<span class="6331160453122921870" onmouseenter="enter('6331160453122921870');" onmouseout="out('6331160453122921870');" style=""><abbr title=" 251             defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 251             defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252         }                                                                                                </span>
<span class="-3308237452429324216" onmouseenter="enter('-3308237452429324216');" onmouseout="out('-3308237452429324216');" style=""><abbr title=" 253         //Order media field, map field and rule builder fields last, as they will have some validation components that depend on previous values"> 253         //Order media field, map field and rule builder fields last, as they will have some validation coðŸ”µ</abbr></span>
<span class="4866803097244618146" onmouseenter="enter('4866803097244618146');" onmouseout="out('4866803097244618146');" style=""> 254         Property[] sortedProperties = entity.getProperties();                                            </span>
<span class="5005865694587957669" onmouseenter="enter('5005865694587957669');" onmouseout="out('5005865694587957669');" style=""> 255         Arrays.sort(sortedProperties, new Comparator&lt;Property&gt;() {                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 256             @Override                                                                                    </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 257             public int compare(Property o1, Property o2) {                                               </span>
<span class="2463065884987512190" onmouseenter="enter('2463065884987512190');" onmouseout="out('2463065884987512190');" style=""> 258                 BasicFieldMetadata mo1 = ((BasicFieldMetadata) (mergedProperties.get(o1.getName())));    </span>
<span class="-8475059538497777965" onmouseenter="enter('-8475059538497777965');" onmouseout="out('-8475059538497777965');" style=""> 259                 BasicFieldMetadata mo2 = ((BasicFieldMetadata) (mergedProperties.get(o2.getName())));    </span>
<span class="-6929562501569500630" onmouseenter="enter('-6929562501569500630');" onmouseout="out('-6929562501569500630');" style=""><abbr title=" 260                 boolean isLate1 = (((mo1 != null) &amp;&amp; (mo1.getFieldType() != null)) &amp;&amp; (mo1.getName() != null)) &amp;&amp; (((((SupportedFieldType.RULE_SIMPLE == mo1.getFieldType()) || (SupportedFieldType.RULE_WITH_QUANTITY == mo1.getFieldType())) || (SupportedFieldType.RULE_SIMPLE_TIME == mo1.getFieldType())) || (SupportedFieldType.MEDIA == mo1.getFieldType())) || o1.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 260                 boolean isLate1 = (((mo1 != null) &amp;&amp; (mo1.getFieldType() != null)) &amp;&amp; (mo1.getName() != nðŸ”µ</abbr></span>
<span class="2168627307559448624" onmouseenter="enter('2168627307559448624');" onmouseout="out('2168627307559448624');" style=""><abbr title=" 261                 boolean isLate2 = (((mo2 != null) &amp;&amp; (mo2.getFieldType() != null)) &amp;&amp; (mo2.getName() != null)) &amp;&amp; (((((SupportedFieldType.RULE_SIMPLE == mo2.getFieldType()) || (SupportedFieldType.RULE_WITH_QUANTITY == mo2.getFieldType())) || (SupportedFieldType.RULE_SIMPLE_TIME == mo2.getFieldType())) || (SupportedFieldType.MEDIA == mo2.getFieldType())) || o2.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 261                 boolean isLate2 = (((mo2 != null) &amp;&amp; (mo2.getFieldType() != null)) &amp;&amp; (mo2.getName() != nðŸ”µ</abbr></span>
<span class="-3819336154797151545" onmouseenter="enter('-3819336154797151545');" onmouseout="out('-3819336154797151545');" style=""> 262                 if (isLate1 &amp;&amp; (!isLate2)) {                                                             </span>
<span class="6787741487180588680" onmouseenter="enter('6787741487180588680');" onmouseout="out('6787741487180588680');" style=""> 263                     return 1;                                                                            </span>
<span class="-509320053190784502" onmouseenter="enter('-509320053190784502');" onmouseout="out('-509320053190784502');" style=""> 264                 } else if ((!isLate1) &amp;&amp; isLate2) {                                                      </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 265                     return -1;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266                 }                                                                                        </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 267                 return 0;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 269         });                                                                                              </span>
<span class="1932565359130544851" onmouseenter="enter('1932565359130544851');" onmouseout="out('1932565359130544851');" style=""><abbr title=" 270         Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.class);"> 270         Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrapðŸ”µ</abbr></span>
<span class="5994630726155221613" onmouseenter="enter('5994630726155221613');" onmouseout="out('5994630726155221613');" style=""> 271         FlushMode originalFlushMode = session.getHibernateFlushMode();                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 272         try {                                                                                            </span>
<span class="5642929065352278415" onmouseenter="enter('5642929065352278415');" onmouseout="out('5642929065352278415');" style=""> 273             session.setHibernateFlushMode(FlushMode.MANUAL);                                             </span>
<span class="3800930097913678918" onmouseenter="enter('3800930097913678918');" onmouseout="out('3800930097913678918');" style=""> 274             RuntimeException entityPersistenceException = null;                                          </span>
<span class="7436252520289959863" onmouseenter="enter('7436252520289959863');" onmouseout="out('7436252520289959863');" style=""> 275             for (Property property : sortedProperties) {                                                 </span>
<span class="-6260061789817992450" onmouseenter="enter('-6260061789817992450');" onmouseout="out('-6260061789817992450');" style=""><abbr title=" 276                 BasicFieldMetadata metadata = ((BasicFieldMetadata) (mergedProperties.get(property.getName())));"> 276                 BasicFieldMetadata metadata = ((BasicFieldMetadata) (mergedProperties.get(property.getNamðŸ”µ</abbr></span>
<span class="-2710932228242800712" onmouseenter="enter('-2710932228242800712');" onmouseout="out('-2710932228242800712');" style=""> 277                 Class&lt;?&gt; returnType;                                                                     </span>
<span class="-3476209394550836719" onmouseenter="enter('-3476209394550836719');" onmouseout="out('-3476209394550836719');" style=""><abbr title=" 278                 if ((!property.getName().contains(FieldManager.MAPFIELDSEPARATOR)) &amp;&amp; (!property.getName().startsWith(&quot;__&quot;))) {"> 278                 if ((!property.getName().contains(FieldManager.MAPFIELDSEPARATOR)) &amp;&amp; (!property.getName(ðŸ”µ</abbr></span>
<span class="-3329718253928059141" onmouseenter="enter('-3329718253928059141');" onmouseout="out('-3329718253928059141');" style=""> 279                     Field field = fieldManager.getField(instance.getClass(), property.getName());        </span>
<span class="-6389169260302086885" onmouseenter="enter('-6389169260302086885');" onmouseout="out('-6389169260302086885');" style=""> 280                     if (field == null) {                                                                 </span>
<span class="1212343711820066941" onmouseenter="enter('1212343711820066941');" onmouseout="out('1212343711820066941');" style=""><abbr title=" 281                         LOG.debug((&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitize(property.getName())) + &quot;. Ignoring property.&quot;);"> 281                         LOG.debug((&quot;Unable to find a bean property for the reported property: &quot; + StringUðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 282                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283                     }                                                                                    </span>
<span class="8953519469960391957" onmouseenter="enter('8953519469960391957');" onmouseout="out('8953519469960391957');" style=""> 284                     returnType = field.getType();                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 285                 } else {                                                                                 </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 286                     if (metadata == null) {                                                              </span>
<span class="7533167748241732386" onmouseenter="enter('7533167748241732386');" onmouseout="out('7533167748241732386');" style=""><abbr title=" 287                         LOG.debug((&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.sanitize(property.getName())) + &quot;. Ignoring property.&quot;);"> 287                         LOG.debug((&quot;Unable to find a metadata property for the reported property: &quot; + StrðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 288                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289                     }                                                                                    </span>
<span class="-8567483443765194758" onmouseenter="enter('-8567483443765194758');" onmouseout="out('-8567483443765194758');" style=""> 290                     returnType = getMapFieldType(instance, fieldManager, property);                      </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 291                     if (returnType == null) {                                                            </span>
<span class="1531226167473626096" onmouseenter="enter('1531226167473626096');" onmouseout="out('1531226167473626096');" style=""> 292                         returnType = getBasicBroadleafType(metadata.getFieldType());                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294                 }                                                                                        </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 295                 if (returnType == null) {                                                                </span>
<span class="6378707186421382713" onmouseenter="enter('6378707186421382713');" onmouseout="out('6378707186421382713');" style=""><abbr title=" 296                     throw new IllegalAccessException((&quot;Unable to determine the value type for the property (&quot; + property.getName()) + &quot;)&quot;);"> 296                     throw new IllegalAccessException((&quot;Unable to determine the value type for the propertðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 297                 }                                                                                        </span>
<span class="-1342740262664655807" onmouseenter="enter('-1342740262664655807');" onmouseout="out('-1342740262664655807');" style=""> 298                 String value = property.getValue();                                                      </span>
<span class="6116690946102675760" onmouseenter="enter('6116690946102675760');" onmouseout="out('6116690946102675760');" style=""> 299                 if (metadata != null) {                                                                  </span>
<span class="6432907771531110343" onmouseenter="enter('6432907771531110343');" onmouseout="out('6432907771531110343');" style=""> 300                     if (metadata.getFieldType().equals(SupportedFieldType.BOOLEAN)) {                    </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 301                         if (value == null) {                                                             </span>
<span class="-8520936090313964890" onmouseenter="enter('-8520936090313964890');" onmouseout="out('-8520936090313964890');" style=""> 302                             String defaultValue = metadata.getDefaultValue();                            </span>
<span class="-7355839783687037578" onmouseenter="enter('-7355839783687037578');" onmouseout="out('-7355839783687037578');" style=""> 303                             value = (StringUtils.isBlank(defaultValue)) ? &quot;false&quot; : defaultValue;        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304                         }                                                                                </span>
<span class="5830462858832599582" onmouseenter="enter('5830462858832599582');" onmouseout="out('5830462858832599582');" style=""> 305                     } else if (metadata.getFieldType().equals(SupportedFieldType.DATE)) {                </span>
<span class="1584182115233885945" onmouseenter="enter('1584182115233885945');" onmouseout="out('1584182115233885945');" style=""> 306                         if (StringUtils.isEmpty(value)) {                                                </span>
<span class="-7092419811380344208" onmouseenter="enter('-7092419811380344208');" onmouseout="out('-7092419811380344208');" style=""> 307                             value = null;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309                     }                                                                                    </span>
<span class="5304497076822353807" onmouseenter="enter('5304497076822353807');" onmouseout="out('5304497076822353807');" style=""><abbr title=" 310                     if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) {"> 310                     if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity,ðŸ”µ</abbr></span>
<span class="-486793269557446445" onmouseenter="enter('-486793269557446445');" onmouseout="out('-486793269557446445');" style=""> 311                         boolean isValid = true;                                                          </span>
<span class="1658940141758117529" onmouseenter="enter('1658940141758117529');" onmouseout="out('1658940141758117529');" style=""><abbr title=" 312                         PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd());"> 312                         PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, propðŸ”µ</abbr></span>
<span class="-7942780495263533884" onmouseenter="enter('-7942780495263533884');" onmouseout="out('-7942780495263533884');" style=""> 313                         handled = false;                                                                 </span>
<span class="3197362083799660545" onmouseenter="enter('3197362083799660545');" onmouseout="out('3197362083799660545');" style=""> 314                         if (value != null) {                                                             </span>
<span class="-3229008606700200313" onmouseenter="enter('-3229008606700200313');" onmouseout="out('-3229008606700200313');" style=""> 315                             for (PopulateValueRequestValidator validator : populateValidators) {         </span>
<span class="884666747315214760" onmouseenter="enter('884666747315214760');" onmouseout="out('884666747315214760');" style=""><abbr title=" 316                                 PropertyValidationResult validationResult = validator.validate(request, instance);"> 316                                 PropertyValidationResult validationResult = validator.validate(request, iðŸ”µ</abbr></span>
<span class="-4364264466893249362" onmouseenter="enter('-4364264466893249362');" onmouseout="out('-4364264466893249362');" style=""> 317                                 if (!validationResult.isValid()) {                                       </span>
<span class="-8273348184937120120" onmouseenter="enter('-8273348184937120120');" onmouseout="out('-8273348184937120120');" style=""><abbr title=" 318                                     entity.addValidationError(property.getName(), validationResult.getErrorMessage());"> 318                                     entity.addValidationError(property.getName(), validationResult.getErrðŸ”µ</abbr></span>
<span class="-5133746822051192612" onmouseenter="enter('-5133746822051192612');" onmouseout="out('-5133746822051192612');" style=""> 319                                     isValid = false;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 322                         }                                                                                </span>
<span class="-2043265533105198042" onmouseenter="enter('-2043265533105198042');" onmouseout="out('-2043265533105198042');" style=""> 323                         if (isValid) {                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 324                             try {                                                                        </span>
<span class="493530022350283834" onmouseenter="enter('493530022350283834');" onmouseout="out('493530022350283834');" style=""> 325                                 boolean isBreakDetected = false;                                         </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 326                                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 326                                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceðŸ”µ</abbr></span>
<span class="-7259286066970943612" onmouseenter="enter('-7259286066970943612');" onmouseout="out('-7259286066970943612');" style=""><abbr title=" 327                                     if (((!isBreakDetected) || fieldPersistenceProvider.alwaysRun()) &amp;&amp; ((value != null) || fieldPersistenceProvider.canHandlePopulateNull())) {"> 327                                     if (((!isBreakDetected) || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (ðŸ”µ</abbr></span>
<span class="-9063763262484694182" onmouseenter="enter('-9063763262484694182');" onmouseout="out('-9063763262484694182');" style=""><abbr title=" 328                                         MetadataProviderResponse response = fieldPersistenceProvider.populateValue(request, instance);"> 328                                         MetadataProviderResponse response = fieldPersistenceProvider.popuðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 329                                         if (MetadataProviderResponse.NOT_HANDLED != response) {          </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 330                                             handled = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331                                         }                                                                </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 332                                         if (MetadataProviderResponse.HANDLED_BREAK == response) {        </span>
<span class="7683637701498275712" onmouseenter="enter('7683637701498275712');" onmouseout="out('7683637701498275712');" style=""> 333                                             isBreakDetected = true;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336                                 }                                                                        </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 337                                 if (!handled) {                                                          </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 338                                     if (value == null) {                                                 </span>
<span class="882791416935144082" onmouseenter="enter('882791416935144082');" onmouseout="out('882791416935144082');" style=""> 339                                         property.setIsDirty(true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340                                     }                                                                    </span>
<span class="1375938864856367065" onmouseenter="enter('1375938864856367065');" onmouseout="out('1375938864856367065');" style=""><abbr title=" 341                                     defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd()), instance);"> 341                                     defaultFieldPersistenceProvider.populateValue(new PopulateValueRequesðŸ”µ</abbr></span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 342                                     if (value == null) {                                                 </span>
<span class="-9084682385294658879" onmouseenter="enter('-9084682385294658879');" onmouseout="out('-9084682385294658879');" style=""> 343                                         fieldManager.setFieldValue(instance, property.getName(), null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345                                 }                                                                        </span>
<span class="3832349856237680933" onmouseenter="enter('3832349856237680933');" onmouseout="out('3832349856237680933');" style=""> 346                             } catch (ParentEntityPersistenceException | validation e) {                  </span>
<span class="9214632560148736873" onmouseenter="enter('9214632560148736873');" onmouseout="out('9214632560148736873');" style=""> 347                                 entityPersistenceException = e;                                          </span>
<span class="8194585295280636961" onmouseenter="enter('8194585295280636961');" onmouseout="out('8194585295280636961');" style=""> 348                                 cleanupFailedPersistenceAttempt(instance);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 349                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354             }                                                                                            </span>
<span class="-8941633054064108755" onmouseenter="enter('-8941633054064108755');" onmouseout="out('-8941633054064108755');" style=""> 355             // Only check validation if not the initial add                                              </span>
<span class="3237544980725266527" onmouseenter="enter('3237544980725266527');" onmouseout="out('3237544980725266527');" style=""> 356             if (!entity.isPreAdd()) {                                                                    </span>
<span class="-9050207745018896152" onmouseenter="enter('-9050207745018896152');" onmouseout="out('-9050207745018896152');" style=""> 357                 validate(entity, instance, mergedProperties, validateUnsubmittedProperties);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358             }                                                                                            </span>
<span class="32753067189116500" onmouseenter="enter('32753067189116500');" onmouseout="out('32753067189116500');" style=""><abbr title=" 359             //if validation failed, refresh the current instance so that none of the changes will be persisted"> 359             //if validation failed, refresh the current instance so that none of the changes will be persðŸ”µ</abbr></span>
<span class="-2597695263377724387" onmouseenter="enter('-2597695263377724387');" onmouseout="out('-2597695263377724387');" style=""> 360             if (entity.isValidationFailure()) {                                                          </span>
<span class="-8969892038594607693" onmouseenter="enter('-8969892038594607693');" onmouseout="out('-8969892038594607693');" style=""> 361                 // only refresh the instance if it was managed to begin with                             </span>
<span class="9192371448315551444" onmouseenter="enter('9192371448315551444');" onmouseout="out('9192371448315551444');" style=""><abbr title=" 362                 if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instance)) {"> 362                 if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instanceðŸ”µ</abbr></span>
<span class="5068098197212588956" onmouseenter="enter('5068098197212588956');" onmouseout="out('5068098197212588956');" style=""> 363                     persistenceManager.getDynamicEntityDao().refresh(instance);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364                 }                                                                                        </span>
<span class="1787582277904250536" onmouseenter="enter('1787582277904250536');" onmouseout="out('1787582277904250536');" style=""><abbr title=" 365                 // re-initialize the valid properties for the entity in order to deal with the potential of not"> 365                 // re-initialize the valid properties for the entity in order to deal with the potential ðŸ”µ</abbr></span>
<span class="-2299815299068924272" onmouseenter="enter('-2299815299068924272');" onmouseout="out('-2299815299068924272');" style=""> 366                 // completely sending over all checkbox/radio fields                                     </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 367                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 368                 entityList.add(instance);                                                                </span>
<span class="-903163901416962067" onmouseenter="enter('-903163901416962067');" onmouseout="out('-903163901416962067');" style=""> 369                 Entity invalid = getRecords(mergedProperties, entityList, null, null, null)[0];          </span>
<span class="-434334858457397385" onmouseenter="enter('-434334858457397385');" onmouseout="out('-434334858457397385');" style=""> 370                 invalid.setPropertyValidationErrors(entity.getPropertyValidationErrors());               </span>
<span class="-4617220526414327800" onmouseenter="enter('-4617220526414327800');" onmouseout="out('-4617220526414327800');" style=""> 371                 invalid.setGlobalValidationErrors(entity.getGlobalValidationErrors());                   </span>
<span class="-3275304366399180151" onmouseenter="enter('-3275304366399180151');" onmouseout="out('-3275304366399180151');" style=""> 372                 invalid.overridePropertyValues(entity);                                                  </span>
<span class="-5826985379545468824" onmouseenter="enter('-5826985379545468824');" onmouseout="out('-5826985379545468824');" style=""><abbr title=" 373                 String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.getGlobalValidationErrors());"> 373                 String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), ðŸ”µ</abbr></span>
<span class="-1571824840661221764" onmouseenter="enter('-1571824840661221764');" onmouseout="out('-1571824840661221764');" style=""> 374                 throw new ValidationException(invalid, message);                                         </span>
<span class="-4684713380455277597" onmouseenter="enter('-4684713380455277597');" onmouseout="out('-4684713380455277597');" style=""> 375             } else if (entityPersistenceException != null) {                                             </span>
<span class="1045288364868684284" onmouseenter="enter('1045288364868684284');" onmouseout="out('1045288364868684284');" style=""> 376                 throw ExceptionHelper.refineException(entityPersistenceException.getCause());            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 377             } else {                                                                                     </span>
<span class="7383617604540684898" onmouseenter="enter('7383617604540684898');" onmouseout="out('7383617604540684898');" style=""> 378                 fieldManager.persistMiddleEntities();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379             }                                                                                            </span>
<span class="1719180133827210930" onmouseenter="enter('1719180133827210930');" onmouseout="out('1719180133827210930');" style=""> 380         } catch (java.lang.IllegalAccessException e) {                                                   </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 381             throw new PersistenceException(e);                                                           </span>
<span class="-7511883255711123624" onmouseenter="enter('-7511883255711123624');" onmouseout="out('-7511883255711123624');" style=""> 382         } catch (java.lang.InstantiationException e) {                                                   </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 383             throw new PersistenceException(e);                                                           </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 384         } finally {                                                                                      </span>
<span class="4677599505604490897" onmouseenter="enter('4677599505604490897');" onmouseout="out('4677599505604490897');" style=""> 385             session.setHibernateFlushMode(originalFlushMode);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386         }                                                                                                </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style=""> 387         return instance;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388     }                                                                                                    </span>
<span  style=""> 389                                                                                                          </span>
<span class="8134762858963910121" onmouseenter="enter('8134762858963910121');" onmouseout="out('8134762858963910121');" style=""><abbr title=" 390     protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable instance, Boolean setId, BasicFieldMetadata metadata, Entity entity, String value) throws IllegalAccessException {"> 390     protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable iðŸ”µ</abbr></span>
<span class="-8863585303780993216" onmouseenter="enter('-8863585303780993216');" onmouseout="out('-8863585303780993216');" style=""> 391         Boolean mutable = metadata.getMutable();                                                         </span>
<span class="8777806519724314753" onmouseenter="enter('8777806519724314753');" onmouseout="out('8777806519724314753');" style=""> 392         Boolean readOnly = metadata.getReadOnly();                                                       </span>
<span class="-6050868424852633932" onmouseenter="enter('-6050868424852633932');" onmouseout="out('-6050868424852633932');" style=""><abbr title=" 393         boolean generalConditionsMet = (((mutable == null) || mutable) &amp;&amp; ((readOnly == null) || (!readOnly))) &amp;&amp; property.getEnabled();"> 393         boolean generalConditionsMet = (((mutable == null) || mutable) &amp;&amp; ((readOnly == null) || (!readOnðŸ”µ</abbr></span>
<span class="-3315585342667864056" onmouseenter="enter('-3315585342667864056');" onmouseout="out('-3315585342667864056');" style=""> 394         if (generalConditionsMet &amp;&amp; (value == null)) {                                                   </span>
<span class="3784846250944455561" onmouseenter="enter('3784846250944455561');" onmouseout="out('3784846250944455561');" style=""> 395             boolean currentValueIsNotNull = false;                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 396             try {                                                                                        </span>
<span class="-6026008610562760887" onmouseenter="enter('-6026008610562760887');" onmouseout="out('-6026008610562760887');" style=""> 397                 currentValueIsNotNull = fieldManager.getFieldValue(instance, property.getName()) != null;</span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 398             } catch (FieldNotAvailableException e) {                                                     </span>
<span class="5941411430976365683" onmouseenter="enter('5941411430976365683');" onmouseout="out('5941411430976365683');" style=""> 399                 throw new IllegalArgumentException(e);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400             }                                                                                            </span>
<span class="7940049496971698158" onmouseenter="enter('7940049496971698158');" onmouseout="out('7940049496971698158');" style=""> 401             boolean valueIsNotNullId = (metadata.getFieldType() != SupportedFieldType.ID) || setId;      </span>
<span class="3378189448655180920" onmouseenter="enter('3378189448655180920');" onmouseout="out('3378189448655180920');" style=""> 402             boolean valueIsNotPassword = metadata.getFieldType() != SupportedFieldType.PASSWORD;         </span>
<span class="-8291989319077971492" onmouseenter="enter('-8291989319077971492');" onmouseout="out('-8291989319077971492');" style=""><abbr title=" 403             return ((currentValueIsNotNull &amp;&amp; (!entity.isPreAdd())) &amp;&amp; valueIsNotNullId) &amp;&amp; valueIsNotPassword;"> 403             return ((currentValueIsNotNull &amp;&amp; (!entity.isPreAdd())) &amp;&amp; valueIsNotNullId) &amp;&amp; valueIsNotPasðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404         }                                                                                                </span>
<span class="7805064061324166126" onmouseenter="enter('7805064061324166126');" onmouseout="out('7805064061324166126');" style=""> 405         return generalConditionsMet;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406     }                                                                                                    </span>
<span  style=""> 407                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 408     @Override                                                                                            </span>
<span class="1852783233485112885" onmouseenter="enter('1852783233485112885');" onmouseout="out('1852783233485112885');" style=""><abbr title=" 409     public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FieldMetadata&gt; alternateMergedProperties, String pathToTargetObject) {"> 409     public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;ðŸ”µ</abbr></span>
<span class="-6187207773895344621" onmouseenter="enter('-6187207773895344621');" onmouseout="out('-6187207773895344621');" style=""> 410         List&lt;Serializable&gt; records = new ArrayList&lt;Serializable&gt;(1);                                     </span>
<span class="5878022765752800842" onmouseenter="enter('5878022765752800842');" onmouseout="out('5878022765752800842');" style=""> 411         records.add(record);                                                                             </span>
<span class="496294912681907043" onmouseenter="enter('496294912681907043');" onmouseout="out('496294912681907043');" style=""><abbr title=" 412         Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTargetObject, null);"> 412         Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedPropertiesðŸ”µ</abbr></span>
<span class="-9062758151482460865" onmouseenter="enter('-9062758151482460865');" onmouseout="out('-9062758151482460865');" style=""> 413         return productEntities[0];                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414     }                                                                                                    </span>
<span  style=""> 415                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 416     @Override                                                                                            </span>
<span class="5781949221273262010" onmouseenter="enter('5781949221273262010');" onmouseout="out('5781949221273262010');" style=""><abbr title=" 417     public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, Serializable record) {"> 417     public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, SðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 418         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 418         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getNamðŸ”µ</abbr></span>
<span class="-5151099947242221721" onmouseenter="enter('-5151099947242221721');" onmouseout="out('-5151099947242221721');" style=""> 419         return getRecord(mergedProperties, record, null, null);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420     }                                                                                                    </span>
<span  style=""> 421                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 422     @Override                                                                                            </span>
<span class="-4520532598669526895" onmouseenter="enter('-4520532598669526895');" onmouseout="out('-4520532598669526895');" style=""><abbr title=" 423     public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? extends Serializable&gt; records) {"> 423     public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspectiveðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 424         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 424         Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getNamðŸ”µ</abbr></span>
<span class="-928847591506271316" onmouseenter="enter('-928847591506271316');" onmouseout="out('-928847591506271316');" style=""> 425         return getRecords(mergedProperties, records, null, null, null);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 426     }                                                                                                    </span>
<span  style=""> 427                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 428     @Override                                                                                            </span>
<span class="-8278894720012200265" onmouseenter="enter('-8278894720012200265');" onmouseout="out('-8278894720012200265');" style=""><abbr title=" 429     public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persistencePerspective) {"> 429     public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspectiveðŸ”µ</abbr></span>
<span class="-3722133806289408051" onmouseenter="enter('-3722133806289408051');" onmouseout="out('-3722133806289408051');" style=""><abbr title=" 430         return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspective);"> 430         return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistenceðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431     }                                                                                                    </span>
<span  style=""> 432                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 433     @Override                                                                                            </span>
<span class="-721724575932279638" onmouseenter="enter('-721724575932279638');" onmouseout="out('-721724575932279638');" style=""><abbr title=" 434     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; records) {"> 434     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends SerialiðŸ”µ</abbr></span>
<span class="8327530304239683256" onmouseenter="enter('8327530304239683256');" onmouseout="out('8327530304239683256');" style=""> 435         return getRecords(primaryMergedProperties, records, null, null, null);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436     }                                                                                                    </span>
<span  style=""> 437                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 438     @Override                                                                                            </span>
<span class="-709830068230433213" onmouseenter="enter('-709830068230433213');" onmouseout="out('-709830068230433213');" style=""><abbr title=" 439     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties, List&lt;? extends Serializable&gt; records, Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties, String pathToTargetObject) {"> 439     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties, List&lt;? extenðŸ”µ</abbr></span>
<span class="4685453067306146439" onmouseenter="enter('4685453067306146439');" onmouseout="out('4685453067306146439');" style=""><abbr title=" 440         return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTargetObject, null);"> 440         return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedPropertiesðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441     }                                                                                                    </span>
<span  style=""> 442                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 443     @Override                                                                                            </span>
<span class="-2383938559120790833" onmouseenter="enter('-2383938559120790833');" onmouseout="out('-2383938559120790833');" style=""><abbr title=" 444     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties, List&lt;? extends Serializable&gt; records, Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties, String pathToTargetObject, String[] customCriteria) {"> 444     public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties, List&lt;? extenðŸ”µ</abbr></span>
<span class="-7988348483038990196" onmouseenter="enter('-7988348483038990196');" onmouseout="out('-7988348483038990196');" style=""><abbr title=" 445         Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedProperties);"> 445         Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfiltereðŸ”µ</abbr></span>
<span class="-3378908089969836890" onmouseenter="enter('-3378908089969836890');" onmouseout="out('-3378908089969836890');" style=""><abbr title=" 446         Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergedProperties);"> 446         Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilðŸ”µ</abbr></span>
<span class="-6780502465801472168" onmouseenter="enter('-6780502465801472168');" onmouseout="out('-6780502465801472168');" style=""> 447         Entity[] entities = new Entity[records.size()];                                                  </span>
<span class="-3238093963120777374" onmouseenter="enter('-3238093963120777374');" onmouseout="out('-3238093963120777374');" style=""> 448         int j = 0;                                                                                       </span>
<span class="3456801759115552322" onmouseenter="enter('3456801759115552322');" onmouseout="out('3456801759115552322');" style=""> 449         for (Serializable recordEntity : records) {                                                      </span>
<span class="619523180404568822" onmouseenter="enter('619523180404568822');" onmouseout="out('619523180404568822');" style=""> 450             Serializable entity;                                                                         </span>
<span class="-2186067977699467203" onmouseenter="enter('-2186067977699467203');" onmouseout="out('-2186067977699467203');" style=""> 451             if (pathToTargetObject != null) {                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 452                 try {                                                                                    </span>
<span class="8092430585586094613" onmouseenter="enter('8092430585586094613');" onmouseout="out('8092430585586094613');" style=""><abbr title=" 453                     entity = ((Serializable) (getFieldManager().getFieldValue(recordEntity, pathToTargetObject)));"> 453                     entity = ((Serializable) (getFieldManager().getFieldValue(recordEntity, pathToTargetOðŸ”µ</abbr></span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 454                 } catch (java.lang.Exception e) {                                                        </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 455                     throw new PersistenceException(e);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 457             } else {                                                                                     </span>
<span class="-6074236754568201796" onmouseenter="enter('-6074236754568201796');" onmouseout="out('-6074236754568201796');" style=""> 458                 entity = recordEntity;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459             }                                                                                            </span>
<span class="8514876957999010588" onmouseenter="enter('8514876957999010588');" onmouseout="out('8514876957999010588');" style=""> 460             Entity entityItem = new Entity();                                                            </span>
<span class="4821790133949377855" onmouseenter="enter('4821790133949377855');" onmouseout="out('4821790133949377855');" style=""> 461             entityItem.setType(new String[]{ entity.getClass().getName() });                             </span>
<span class="-2252000440729832309" onmouseenter="enter('-2252000440729832309');" onmouseout="out('-2252000440729832309');" style=""> 462             entities[j] = entityItem;                                                                    </span>
<span class="3961822747852490020" onmouseenter="enter('3961822747852490020');" onmouseout="out('3961822747852490020');" style=""> 463             List&lt;Property&gt; props = new ArrayList&lt;Property&gt;(primaryMergedProperties.size());              </span>
<span class="-4152224460170095636" onmouseenter="enter('-4152224460170095636');" onmouseout="out('-4152224460170095636');" style=""><abbr title=" 464             extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria);"> 464             extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria)ðŸ”µ</abbr></span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 465             if (alternateMergedProperties != null) {                                                     </span>
<span class="-9087051985097357993" onmouseenter="enter('-9087051985097357993');" onmouseout="out('-9087051985097357993');" style=""><abbr title=" 466                 extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriteria);"> 466                 extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, cusðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467             }                                                                                            </span>
<span class="-5089629635789493807" onmouseenter="enter('-5089629635789493807');" onmouseout="out('-5089629635789493807');" style=""> 468             // Try to add the &quot;main name&quot; property. Log a debug message if we can&#x27;t                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 469             try {                                                                                        </span>
<span class="5380947615780799183" onmouseenter="enter('5380947615780799183');" onmouseout="out('5380947615780799183');" style=""> 470                 Property p = new Property();                                                             </span>
<span class="1925482889972291082" onmouseenter="enter('1925482889972291082');" onmouseout="out('1925482889972291082');" style=""> 471                 p.setName(MAIN_ENTITY_NAME_PROPERTY);                                                    </span>
<span class="8982792589285289046" onmouseenter="enter('8982792589285289046');" onmouseout="out('8982792589285289046');" style=""><abbr title=" 472                 String mainEntityName = ((String) (MethodUtils.invokeMethod(entity, &quot;getMainEntityName&quot;)));"> 472                 String mainEntityName = ((String) (MethodUtils.invokeMethod(entity, &quot;getMainEntityName&quot;))ðŸ”µ</abbr></span>
<span class="-4568210868795612410" onmouseenter="enter('-4568210868795612410');" onmouseout="out('-4568210868795612410');" style=""> 473                 p.setValue(mainEntityName);                                                              </span>
<span class="-4361225624073911918" onmouseenter="enter('-4361225624073911918');" onmouseout="out('-4361225624073911918');" style=""> 474                 props.add(p);                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 475             } catch (java.lang.Exception e) {                                                            </span>
<span class="-1660146654333002213" onmouseenter="enter('-1660146654333002213');" onmouseout="out('-1660146654333002213');" style=""><abbr title=" 476                 LOG.debug(String.format(&quot;Could not execute the getMainEntityName() method for [%s]&quot;, entity.getClass().getName()), e);"> 476                 LOG.debug(String.format(&quot;Could not execute the getMainEntityName() method for [%s]&quot;, entiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477             }                                                                                            </span>
<span class="-8721953412008939855" onmouseenter="enter('-8721953412008939855');" onmouseout="out('-8721953412008939855');" style=""> 478             // Try to add the alternate id property if available                                         </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 479             if (alternateMergedProperties != null) {                                                     </span>
<span class="-2729730257234978997" onmouseenter="enter('-2729730257234978997');" onmouseout="out('-2729730257234978997');" style=""> 480                 for (Entry&lt;String, FieldMetadata&gt; entry : alternateMergedProperties.entrySet()) {        </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 481                     if (entry.getValue() instanceof BasicFieldMetadata) {                                </span>
<span class="2600247396988132656" onmouseenter="enter('2600247396988132656');" onmouseout="out('2600247396988132656');" style=""><abbr title=" 482                         if (((BasicFieldMetadata) (entry.getValue())).getFieldType() == SupportedFieldType.ID) {"> 482                         if (((BasicFieldMetadata) (entry.getValue())).getFieldType() == SupportedFieldTypðŸ”µ</abbr></span>
<span class="475815096463760847" onmouseenter="enter('475815096463760847');" onmouseout="out('475815096463760847');" style=""><abbr title=" 483                             Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadata&gt;();"> 483                             Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadðŸ”µ</abbr></span>
<span class="-4538053591093527376" onmouseenter="enter('-4538053591093527376');" onmouseout="out('-4538053591093527376');" style=""> 484                             alternateOnEntity.put(entry.getKey(), entry.getValue());                     </span>
<span class="6846951436664779248" onmouseenter="enter('6846951436664779248');" onmouseout="out('6846951436664779248');" style=""> 485                             List&lt;Property&gt; props2 = new ArrayList&lt;Property&gt;();                           </span>
<span class="5345785186371221305" onmouseenter="enter('5345785186371221305');" onmouseout="out('5345785186371221305');" style=""><abbr title=" 486                             extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCriteria);"> 486                             extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2ðŸ”µ</abbr></span>
<span class="-7220107863695845032" onmouseenter="enter('-7220107863695845032');" onmouseout="out('-7220107863695845032');" style=""> 487                             List&lt;Property&gt; filtered = new ArrayList&lt;Property&gt;();                         </span>
<span class="-7311698525315213587" onmouseenter="enter('-7311698525315213587');" onmouseout="out('-7311698525315213587');" style=""> 488                             for (Property prop : props2) {                                               </span>
<span class="6017333932165432493" onmouseenter="enter('6017333932165432493');" onmouseout="out('6017333932165432493');" style=""> 489                                 if (!prop.getName().startsWith(&quot;__&quot;)) {                                  </span>
<span class="-5604579077622831568" onmouseenter="enter('-5604579077622831568');" onmouseout="out('-5604579077622831568');" style=""> 490                                     filtered.add(prop);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 492                             }                                                                            </span>
<span class="8545840255355279194" onmouseenter="enter('8545840255355279194');" onmouseout="out('8545840255355279194');" style=""> 493                             if ((filtered.size() == 1) &amp;&amp; (!filtered.get(0).getName().contains(&quot;.&quot;))) {  </span>
<span class="766644908777739787" onmouseenter="enter('766644908777739787');" onmouseout="out('766644908777739787');" style=""> 494                                 Property alternateIdProp = filtered.get(0);                              </span>
<span class="1444561456824673058" onmouseenter="enter('1444561456824673058');" onmouseout="out('1444561456824673058');" style=""> 495                                 alternateIdProp.setName(ALTERNATE_ID_PROPERTY);                          </span>
<span class="-1260553957514386502" onmouseenter="enter('-1260553957514386502');" onmouseout="out('-1260553957514386502');" style=""> 496                                 props.add(alternateIdProp);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 498                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501             }                                                                                            </span>
<span class="3140965171760158820" onmouseenter="enter('3140965171760158820');" onmouseout="out('3140965171760158820');" style=""> 502             Property[] properties = new Property[props.size()];                                          </span>
<span class="-5540374985766964035" onmouseenter="enter('-5540374985766964035');" onmouseout="out('-5540374985766964035');" style=""> 503             properties = props.toArray(properties);                                                      </span>
<span class="2992548432186189131" onmouseenter="enter('2992548432186189131');" onmouseout="out('2992548432186189131');" style=""> 504             entityItem.setProperties(properties);                                                        </span>
<span class="-5688619574901767370" onmouseenter="enter('-5688619574901767370');" onmouseout="out('-5688619574901767370');" style=""> 505             j++;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506         }                                                                                                </span>
<span class="-7616126935915446236" onmouseenter="enter('-7616126935915446236');" onmouseout="out('-7616126935915446236');" style=""> 507         return entities;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 508     }                                                                                                    </span>
<span  style=""> 509                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 510     @Override                                                                                            </span>
<span class="-1580059539469245457" onmouseenter="enter('-1580059539469245457');" onmouseout="out('-1580059539469245457');" style=""> 511     public Entity[] getRecords(FetchExtractionRequest fetchExtractionRequest) {                          </span>
<span class="-7749788048664948511" onmouseenter="enter('-7749788048664948511');" onmouseout="out('-7749788048664948511');" style=""> 512         return fetchWrapper.getRecords(fetchExtractionRequest);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 513     }                                                                                                    </span>
<span  style=""> 514                                                                                                          </span>
<span class="402950671367523298" onmouseenter="enter('402950671367523298');" onmouseout="out('402950671367523298');" style=""><abbr title=" 515     protected void extractPropertiesFromPersistentEntity(Map&lt;String, FieldMetadata&gt; mergedProperties, Serializable entity, List&lt;Property&gt; props, String[] customCriteria) {"> 515     protected void extractPropertiesFromPersistentEntity(Map&lt;String, FieldMetadata&gt; mergedProperties, SerðŸ”µ</abbr></span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 516         FieldManager fieldManager = getFieldManager();                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 517         try {                                                                                            </span>
<span class="3586746813038594040" onmouseenter="enter('3586746813038594040');" onmouseout="out('3586746813038594040');" style=""> 518             if (entity instanceof AdminMainEntity) {                                                     </span>
<span class="-7831041928171184784" onmouseenter="enter('-7831041928171184784');" onmouseout="out('-7831041928171184784');" style=""> 519                 //Create an invisible property for the admin main entity name, if applicable.            </span>
<span class="4236597300486677730" onmouseenter="enter('4236597300486677730');" onmouseout="out('4236597300486677730');" style=""> 520                 //This is useful for ToOneLookups if that ToOneLookup uses AdminMainEntity to drive      </span>
<span class="2696338225815060194" onmouseenter="enter('2696338225815060194');" onmouseout="out('2696338225815060194');" style=""> 521                 //its display name.                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 522                 try {                                                                                    </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 523                     Property propertyItem = new Property();                                              </span>
<span class="459927527015615277" onmouseenter="enter('459927527015615277');" onmouseout="out('459927527015615277');" style=""> 524                     propertyItem.setName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);                     </span>
<span class="-9086113788587820330" onmouseenter="enter('-9086113788587820330');" onmouseout="out('-9086113788587820330');" style=""> 525                     propertyItem.setValue(((AdminMainEntity) (entity)).getMainEntityName());             </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 526                     props.add(propertyItem);                                                             </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 527                 } catch (java.lang.Exception e) {                                                        </span>
<span class="6081116632745046614" onmouseenter="enter('6081116632745046614');" onmouseout="out('6081116632745046614');" style=""><abbr title=" 528                     // do nothing here except for not add the property. Exceptions could occur when there is a validation"> 528                     // do nothing here except for not add the property. Exceptions could occur when thereðŸ”µ</abbr></span>
<span class="-8380642892784592262" onmouseenter="enter('-8380642892784592262');" onmouseout="out('-8380642892784592262');" style=""><abbr title=" 529                     // issue and some properties/relationships that are used for gleaning the main entity name end up"> 529                     // issue and some properties/relationships that are used for gleaning the main entityðŸ”µ</abbr></span>
<span class="3602890251629998271" onmouseenter="enter('3602890251629998271');" onmouseout="out('3602890251629998271');" style=""> 530                     // not being set                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532             }                                                                                            </span>
<span class="6525223774393628953" onmouseenter="enter('6525223774393628953');" onmouseout="out('6525223774393628953');" style=""> 533             for (Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 534                 String property = entry.getKey();                                                        </span>
<span class="152445406816498608" onmouseenter="enter('152445406816498608');" onmouseout="out('152445406816498608');" style=""> 535                 BasicFieldMetadata metadata = ((BasicFieldMetadata) (entry.getValue()));                 </span>
<span class="1571137238250878820" onmouseenter="enter('1571137238250878820');" onmouseout="out('1571137238250878820');" style=""><abbr title=" 536                 if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.getClass().isAssignableFrom(Class.forName(metadata.getInheritedFromType()))) {"> 536                 if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) ||ðŸ”µ</abbr></span>
<span class="6995086675671638042" onmouseenter="enter('6995086675671638042');" onmouseout="out('6995086675671638042');" style=""> 537                     boolean proceed = true;                                                              </span>
<span class="1084798123261065834" onmouseenter="enter('1084798123261065834');" onmouseout="out('1084798123261065834');" style=""> 538                     if (property.contains(&quot;.&quot;)) {                                                        </span>
<span class="-2955712908532642203" onmouseenter="enter('-2955712908532642203');" onmouseout="out('-2955712908532642203');" style=""> 539                         StringTokenizer tokens = new StringTokenizer(property, &quot;.&quot;);                     </span>
<span class="682329956200427964" onmouseenter="enter('682329956200427964');" onmouseout="out('682329956200427964');" style=""> 540                         Object testObject = entity;                                                      </span>
<span class="2196330750852339617" onmouseenter="enter('2196330750852339617');" onmouseout="out('2196330750852339617');" style=""> 541                         while (tokens.hasMoreTokens()) {                                                 </span>
<span class="-3851292165554806554" onmouseenter="enter('-3851292165554806554');" onmouseout="out('-3851292165554806554');" style=""> 542                             String token = tokens.nextToken();                                           </span>
<span class="7999260116794465545" onmouseenter="enter('7999260116794465545');" onmouseout="out('7999260116794465545');" style=""> 543                             if (tokens.hasMoreTokens()) {                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 544                                 try {                                                                    </span>
<span class="1542151824276478361" onmouseenter="enter('1542151824276478361');" onmouseout="out('1542151824276478361');" style=""> 545                                     testObject = fieldManager.getFieldValue(testObject, token);          </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 546                                 } catch (FieldNotAvailableException e) {                                 </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 547                                     proceed = false;                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 548                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549                                 }                                                                        </span>
<span class="8671980878137139761" onmouseenter="enter('8671980878137139761');" onmouseout="out('8671980878137139761');" style=""> 550                                 if (testObject == null) {                                                </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 551                                     Property propertyItem = new Property();                              </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 552                                     propertyItem.setName(property);                                      </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 553                                     if (props.contains(propertyItem)) {                                  </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 554                                         proceed = false;                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 555                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556                                     }                                                                    </span>
<span class="-1297206784742569730" onmouseenter="enter('-1297206784742569730');" onmouseout="out('-1297206784742569730');" style=""> 557                                     propertyItem.setValue(null);                                         </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 558                                     props.add(propertyItem);                                             </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 559                                     proceed = false;                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 560                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 563                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564                     }                                                                                    </span>
<span class="6772675439678687977" onmouseenter="enter('6772675439678687977');" onmouseout="out('6772675439678687977');" style=""> 565                     if (!proceed) {                                                                      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 566                         continue;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567                     }                                                                                    </span>
<span class="-7680907447726339638" onmouseenter="enter('-7680907447726339638');" onmouseout="out('-7680907447726339638');" style=""> 568                     boolean isFieldAccessible = true;                                                    </span>
<span class="1714704837357165345" onmouseenter="enter('1714704837357165345');" onmouseout="out('1714704837357165345');" style=""> 569                     Object value = null;                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 570                     try {                                                                                </span>
<span class="-802340144122893040" onmouseenter="enter('-802340144122893040');" onmouseout="out('-802340144122893040');" style=""> 571                         value = fieldManager.getFieldValue(entity, property);                            </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 572                     } catch (FieldNotAvailableException e) {                                             </span>
<span class="-5134531397184128099" onmouseenter="enter('-5134531397184128099');" onmouseout="out('-5134531397184128099');" style=""> 573                         isFieldAccessible = false;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574                     }                                                                                    </span>
<span class="-395470139210522993" onmouseenter="enter('-395470139210522993');" onmouseout="out('-395470139210522993');" style=""> 575                     checkField : {                                                                       </span>
<span class="-358387007955156467" onmouseenter="enter('-358387007955156467');" onmouseout="out('-358387007955156467');" style=""> 576                         if (isFieldAccessible) {                                                         </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 577                             Property propertyItem = new Property();                                      </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 578                             propertyItem.setName(property);                                              </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 579                             if (props.contains(propertyItem)) {                                          </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 580                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 581                             }                                                                            </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 582                             props.add(propertyItem);                                                     </span>
<span class="4812619489526695632" onmouseenter="enter('4812619489526695632');" onmouseout="out('4812619489526695632');" style=""> 583                             String displayVal = propertyItem.getDisplayValue();                          </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 584                             boolean handled = false;                                                     </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 585                             for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 585                             for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProvðŸ”µ</abbr></span>
<span class="-5011952326211088481" onmouseenter="enter('-5011952326211088481');" onmouseout="out('-5011952326211088481');" style=""><abbr title=" 586                                 MetadataProviderResponse response = fieldPersistenceProvider.extractValue(new ExtractValueRequest(props, fieldManager, metadata, value, displayVal, persistenceManager, this, entity, customCriteria), propertyItem);"> 586                                 MetadataProviderResponse response = fieldPersistenceProvider.extractValueðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 587                                 if (MetadataProviderResponse.NOT_HANDLED != response) {                  </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 588                                     handled = true;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589                                 }                                                                        </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 590                                 if (MetadataProviderResponse.HANDLED_BREAK == response) {                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 591                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 593                             }                                                                            </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 594                             if (!handled) {                                                              </span>
<span class="-4696769326244627405" onmouseenter="enter('-4696769326244627405');" onmouseout="out('-4696769326244627405');" style=""><abbr title=" 595                                 defaultFieldPersistenceProvider.extractValue(new ExtractValueRequest(props, fieldManager, metadata, value, displayVal, persistenceManager, this, entity, customCriteria), propertyItem);"> 595                                 defaultFieldPersistenceProvider.extractValue(new ExtractValueRequest(propðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596                             }                                                                            </span>
<span class="-6426908400831293887" onmouseenter="enter('-6426908400831293887');" onmouseout="out('-6426908400831293887');" style=""> 597                             break checkField;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598                         }                                                                                </span>
<span class="-243574896110033323" onmouseenter="enter('-243574896110033323');" onmouseout="out('-243574896110033323');" style=""> 599                         //try a direct property acquisition via reflection                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 600                         try {                                                                            </span>
<span class="7672623756603956505" onmouseenter="enter('7672623756603956505');" onmouseout="out('7672623756603956505');" style=""> 601                             String strVal = null;                                                        </span>
<span class="3529628081213965373" onmouseenter="enter('3529628081213965373');" onmouseout="out('3529628081213965373');" style=""> 602                             Method method;                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 603                             try {                                                                        </span>
<span class="-1798391636455890646" onmouseenter="enter('-1798391636455890646');" onmouseout="out('-1798391636455890646');" style=""> 604                                 // try a &#x27;get&#x27; prefixed mutator first                                    </span>
<span class="7435702377730641897" onmouseenter="enter('7435702377730641897');" onmouseout="out('7435702377730641897');" style=""><abbr title=" 605                                 String temp = (&quot;get&quot; + property.substring(0, 1).toUpperCase()) + property.substring(1, property.length());"> 605                                 String temp = (&quot;get&quot; + property.substring(0, 1).toUpperCase()) + propertyðŸ”µ</abbr></span>
<span class="-4778345320120097366" onmouseenter="enter('-4778345320120097366');" onmouseout="out('-4778345320120097366');" style=""> 606                                 method = entity.getClass().getMethod(temp, new Class[]{  });             </span>
<span class="5128954153220851217" onmouseenter="enter('5128954153220851217');" onmouseout="out('5128954153220851217');" style=""> 607                             } catch (java.lang.NoSuchMethodException e) {                                </span>
<span class="9023003814127164292" onmouseenter="enter('9023003814127164292');" onmouseout="out('9023003814127164292');" style=""> 608                                 method = entity.getClass().getMethod(property, new Class[]{  });         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 609                             }                                                                            </span>
<span class="-5580774230721267569" onmouseenter="enter('-5580774230721267569');" onmouseout="out('-5580774230721267569');" style=""> 610                             value = method.invoke(entity, new String[]{  });                             </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 611                             Property propertyItem = new Property();                                      </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 612                             propertyItem.setName(property);                                              </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 613                             if (props.contains(propertyItem)) {                                          </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 614                                 continue;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615                             }                                                                            </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 616                             props.add(propertyItem);                                                     </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 617                             if (value == null) {                                                         </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 618                                 strVal = null;                                                           </span>
<span class="773085658303013028" onmouseenter="enter('773085658303013028');" onmouseout="out('773085658303013028');" style=""> 619                             } else if (Date.class.isAssignableFrom(value.getClass())) {                  </span>
<span class="-1039455398020614014" onmouseenter="enter('-1039455398020614014');" onmouseout="out('-1039455398020614014');" style=""> 620                                 strVal = getSimpleDateFormatter().format(((Date) (value)));              </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 621                             } else if (Timestamp.class.isAssignableFrom(value.getClass())) {             </span>
<span class="8826059092820512259" onmouseenter="enter('8826059092820512259');" onmouseout="out('8826059092820512259');" style=""><abbr title=" 622                                 strVal = getSimpleDateFormatter().format(new Date(((Timestamp) (value)).getTime()));"> 622                                 strVal = getSimpleDateFormatter().format(new Date(((Timestamp) (value)).gðŸ”µ</abbr></span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 623                             } else if (Calendar.class.isAssignableFrom(value.getClass())) {              </span>
<span class="6187048619204773000" onmouseenter="enter('6187048619204773000');" onmouseout="out('6187048619204773000');" style=""> 624                                 strVal = getSimpleDateFormatter().format(((Calendar) (value)).getTime());</span>
<span class="-8000513140171445641" onmouseenter="enter('-8000513140171445641');" onmouseout="out('-8000513140171445641');" style=""> 625                             } else if (java.lang.Double.class.isAssignableFrom(value.getClass())) {      </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 626                                 strVal = getDecimalFormatter().format(value);                            </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 627                             } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {            </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 628                                 strVal = getDecimalFormatter().format(value);                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 629                             } else {                                                                     </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 630                                 strVal = value.toString();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631                             }                                                                            </span>
<span class="-430028306468799565" onmouseenter="enter('-430028306468799565');" onmouseout="out('-430028306468799565');" style=""> 632                             propertyItem.setValue(strVal);                                               </span>
<span class="5128954153220851217" onmouseenter="enter('5128954153220851217');" onmouseout="out('5128954153220851217');" style=""> 633                         } catch (java.lang.NoSuchMethodException e) {                                    </span>
<span class="8429567218540762891" onmouseenter="enter('8429567218540762891');" onmouseout="out('8429567218540762891');" style=""><abbr title=" 634                             LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(property));"> 634                             LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.ðŸ”µ</abbr></span>
<span class="-474645157140037388" onmouseenter="enter('-474645157140037388');" onmouseout="out('-474645157140037388');" style=""> 635                             // do nothing - this property is simply not in the bean                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 637                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 638                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 639             }                                                                                            </span>
<span class="-4826617111900065805" onmouseenter="enter('-4826617111900065805');" onmouseout="out('-4826617111900065805');" style=""> 640         } catch (java.lang.ClassNotFoundException e) {                                                   </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 641             throw new PersistenceException(e);                                                           </span>
<span class="1719180133827210930" onmouseenter="enter('1719180133827210930');" onmouseout="out('1719180133827210930');" style=""> 642         } catch (java.lang.IllegalAccessException e) {                                                   </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 643             throw new PersistenceException(e);                                                           </span>
<span class="-291101072954915259" onmouseenter="enter('-291101072954915259');" onmouseout="out('-291101072954915259');" style=""> 644         } catch (InvocationTargetException e) {                                                          </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 645             throw new PersistenceException(e);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 646         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647     }                                                                                                    </span>
<span  style=""> 648                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 649     @Override                                                                                            </span>
<span class="-6161842232508714198" onmouseenter="enter('-6161842232508714198');" onmouseout="out('-6161842232508714198');" style=""> 650     public String getStringValueFromGetter(Serializable instance, String propertyName)                   </span>
<span class="1769827535532852924" onmouseenter="enter('1769827535532852924');" onmouseout="out('1769827535532852924');" style=""> 651             throws IllegalAccessException, InvocationTargetException, NoSuchMethodException {            </span>
<span class="5278483549685517830" onmouseenter="enter('5278483549685517830');" onmouseout="out('5278483549685517830');" style=""> 652         Object value = PropertyUtils.getProperty(instance, propertyName);                                </span>
<span class="-6587533849078029241" onmouseenter="enter('-6587533849078029241');" onmouseout="out('-6587533849078029241');" style=""> 653         return formatValue(value);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 654     }                                                                                                    </span>
<span  style=""> 655                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 656     @Override                                                                                            </span>
<span class="1304124062790730283" onmouseenter="enter('1304124062790730283');" onmouseout="out('1304124062790730283');" style=""> 657     public String formatValue(Object value) {                                                            </span>
<span class="5239272094010467374" onmouseenter="enter('5239272094010467374');" onmouseout="out('5239272094010467374');" style=""> 658         String strVal;                                                                                   </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 659         if (value == null) {                                                                             </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 660             strVal = null;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 661         } else {                                                                                         </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 662             if (Date.class.isAssignableFrom(value.getClass())) {                                         </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 663                 strVal = getSimpleDateFormatter().format((Date) value);                                  </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 664             } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                             </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""> 665                 strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));       </span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 666             } else if (Calendar.class.isAssignableFrom(value.getClass())) {                              </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 667                 strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());                  </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 668             } else if (Double.class.isAssignableFrom(value.getClass())) {                                </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 669                 strVal = getDecimalFormatter().format(value);                                            </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 670             } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                            </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 671                 strVal = getDecimalFormatter().format(value);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 672             } else {                                                                                     </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 673                 strVal = value.toString();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675         }                                                                                                </span>
<span class="3782478248632503544" onmouseenter="enter('3782478248632503544');" onmouseout="out('3782478248632503544');" style=""> 676         return strVal;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677     }                                                                                                    </span>
<span  style=""> 678                                                                                                          </span>
<span class="1185233632623235579" onmouseenter="enter('1185233632623235579');" onmouseout="out('1185233632623235579');" style=""><abbr title=" 679     protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntity) throws ServiceException {"> 679     protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean incluðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 680         EntityResult entityResult = new EntityResult();                                                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 681         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 682         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-6574648083356776864" onmouseenter="enter('-6574648083356776864');" onmouseout="out('-6574648083356776864');" style=""><abbr title=" 683         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY)));"> 683         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().geðŸ”µ</abbr></span>
<span class="2810923578864584163" onmouseenter="enter('2810923578864584163');" onmouseout="out('2810923578864584163');" style=""> 684         if ((foreignKey != null) &amp;&amp; (!foreignKey.getMutable())) {                                        </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 685             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 686         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 687         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 688             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 688             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="489034708612369752" onmouseenter="enter('489034708612369752');" onmouseout="out('489034708612369752');" style=""><abbr title=" 689             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(persistencePackage.getCeilingEntityFullyQualifiedClassname(), entities, foreignKey, persistencePerspective.getAdditionalNonPersistentProperties(), persistencePerspective.getAdditionalForeignKeys(), MergedPropertyType.PRIMARY, persistencePerspective.getPopulateToOneFields(), persistencePerspective.getIncludeFields(), persistencePerspective.getExcludeFields(), persistencePerspective.getConfigurationKey(), &quot;&quot;);"> 689             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 690             if (primaryKey == null) {                                                                    </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style=""> 691                 primaryKey = getPrimaryKey(entity, mergedProperties);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692             }                                                                                            </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title=" 693             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);"> 693             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entitðŸ”µ</abbr></span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style=""> 694             Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                         </span>
<span class="861834480888806983" onmouseenter="enter('861834480888806983');" onmouseout="out('861834480888806983');" style=""> 695             if (!entity.isValidationFailure()) {                                                         </span>
<span class="-6661343286258909963" onmouseenter="enter('-6661343286258909963');" onmouseout="out('-6661343286258909963');" style=""> 696                 //Re-Balance the list if it is a Foreign Key toMany collection with a sort field property</span>
<span class="223804448508639776" onmouseenter="enter('223804448508639776');" onmouseout="out('223804448508639776');" style=""><abbr title=" 697                 if ((((foreignKey != null) &amp;&amp; (foreignKey.getSortField() != null)) &amp;&amp; (entity.findProperty(foreignKey.getSortField()) != null)) &amp;&amp; (entity.findProperty(foreignKey.getSortField()).getValue() != null)) {"> 697                 if ((((foreignKey != null) &amp;&amp; (foreignKey.getSortField() != null)) &amp;&amp; (entity.findPropertðŸ”µ</abbr></span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""><abbr title=" 698                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();"> 698                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;(ðŸ”µ</abbr></span>
<span class="72752549748996882" onmouseenter="enter('72752549748996882');" onmouseout="out('72752549748996882');" style=""><abbr title=" 699                     extensionManager.getProxy().rebalanceForUpdate(this, persistencePackage, instance, mergedProperties, primaryKey, result);"> 699                     extensionManager.getProxy().rebalanceForUpdate(this, persistencePackage, instance, meðŸ”µ</abbr></span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style=""> 700                     instance = result.getResult();                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 701                 } else {                                                                                 </span>
<span class="5297856757316311321" onmouseenter="enter('5297856757316311321');" onmouseout="out('5297856757316311321');" style=""><abbr title=" 702                     instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackage.isValidateUnsubmittedProperties());"> 702                     instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703                 }                                                                                        </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 704                 instance = persistenceManager.getDynamicEntityDao().merge(instance);                     </span>
<span class="-1264761314664469309" onmouseenter="enter('-1264761314664469309');" onmouseout="out('-1264761314664469309');" style=""> 705                 if (includeRealEntity) {                                                                 </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style=""> 706                     entityResult.setEntityBackingObject(instance);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 707                 }                                                                                        </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 708                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 709                 entityList.add(instance);                                                                </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style=""> 710                 entity = getRecords(mergedProperties, entityList, null, null, null)[0];                  </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 711                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 712                 return entityResult;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 713             } else {                                                                                     </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 714                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 715                 return entityResult;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 717         } catch (java.lang.Exception e) {                                                                </span>
<span class="-3425838462618159609" onmouseenter="enter('-3425838462618159609');" onmouseout="out('-3425838462618159609');" style=""> 718             throw new ServiceException(&quot;Problem updating entity : &quot; + e.getMessage(), e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 719         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720     }                                                                                                    </span>
<span  style=""> 721                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 722     @Override                                                                                            </span>
<span class="6684144434931310538" onmouseenter="enter('6684144434931310538');" onmouseout="out('6684144434931310538');" style=""> 723     public String getIdPropertyName(String entityClass) {                                                </span>
<span class="7569829358594867468" onmouseenter="enter('7569829358594867468');" onmouseout="out('7569829358594867468');" style=""> 724         return persistenceManager.getIdPropertyName(entityClass);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725     }                                                                                                    </span>
<span  style=""> 726                                                                                                          </span>
<span class="7385985390784408317" onmouseenter="enter('7385985390784408317');" onmouseout="out('7385985390784408317');" style=""> 727     public String getIdPropertyName(Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {             </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 728         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 728         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 729         for (String property : mergedProperties.keySet()) {                                              </span>
<span class="-2918742519902049887" onmouseenter="enter('-2918742519902049887');" onmouseout="out('-2918742519902049887');" style=""> 730             BasicFieldMetadata temp = ((BasicFieldMetadata) (mergedProperties.get(property)));           </span>
<span class="-5683108998705740453" onmouseenter="enter('-5683108998705740453');" onmouseout="out('-5683108998705740453');" style=""> 731             if ((temp.getFieldType() == SupportedFieldType.ID) &amp;&amp; (!property.contains(&quot;.&quot;))) {           </span>
<span class="6489038301515904267" onmouseenter="enter('6489038301515904267');" onmouseout="out('6489038301515904267');" style=""> 732                 return property;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 734         }                                                                                                </span>
<span class="8030319575516697150" onmouseenter="enter('8030319575516697150');" onmouseout="out('8030319575516697150');" style=""><abbr title=" 735         throw new RuntimeException(&quot;Could not find a primary key property in the passed merged properties list&quot;);"> 735         throw new RuntimeException(&quot;Could not find a primary key property in the passed merged propertiesðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 736     }                                                                                                    </span>
<span  style=""> 737                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 738     @Override                                                                                            </span>
<span class="7601553640468247936" onmouseenter="enter('7601553640468247936');" onmouseout="out('7601553640468247936');" style=""> 739     public Object getPrimaryKey(Entity entity, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {  </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 740         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 740         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style=""> 741         Object primaryKey = null;                                                                        </span>
<span class="-4343749490203255033" onmouseenter="enter('-4343749490203255033');" onmouseout="out('-4343749490203255033');" style=""> 742         String idPropertyName = null;                                                                    </span>
<span class="-1032829863063040815" onmouseenter="enter('-1032829863063040815');" onmouseout="out('-1032829863063040815');" style=""> 743         BasicFieldMetadata metaData = null;                                                              </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 744         for (String property : mergedProperties.keySet()) {                                              </span>
<span class="-2918742519902049887" onmouseenter="enter('-2918742519902049887');" onmouseout="out('-2918742519902049887');" style=""> 745             BasicFieldMetadata temp = ((BasicFieldMetadata) (mergedProperties.get(property)));           </span>
<span class="-5683108998705740453" onmouseenter="enter('-5683108998705740453');" onmouseout="out('-5683108998705740453');" style=""> 746             if ((temp.getFieldType() == SupportedFieldType.ID) &amp;&amp; (!property.contains(&quot;.&quot;))) {           </span>
<span class="4480138875282582699" onmouseenter="enter('4480138875282582699');" onmouseout="out('4480138875282582699');" style=""> 747                 idPropertyName = property;                                                               </span>
<span class="-6207089020080563293" onmouseenter="enter('-6207089020080563293');" onmouseout="out('-6207089020080563293');" style=""> 748                 metaData = temp;                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 749                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 750             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 751         }                                                                                                </span>
<span class="-4447124933950039126" onmouseenter="enter('-4447124933950039126');" onmouseout="out('-4447124933950039126');" style=""> 752         if (idPropertyName == null) {                                                                    </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title=" 753             throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);"> 753             throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with tðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 754         }                                                                                                </span>
<span class="-5346955267205588229" onmouseenter="enter('-5346955267205588229');" onmouseout="out('-5346955267205588229');" style=""> 755         for (Property property : entity.getProperties()) {                                               </span>
<span class="7886586292686555176" onmouseenter="enter('7886586292686555176');" onmouseout="out('7886586292686555176');" style=""> 756             if (property.getName().equals(idPropertyName)) {                                             </span>
<span class="2464652692956328654" onmouseenter="enter('2464652692956328654');" onmouseout="out('2464652692956328654');" style=""> 757                 switch (metaData.getSecondaryType()) {                                                   </span>
<span class="3414571945316628455" onmouseenter="enter('3414571945316628455');" onmouseout="out('3414571945316628455');" style=""> 758                     case INTEGER :                                                                       </span>
<span class="-6121369465424712252" onmouseenter="enter('-6121369465424712252');" onmouseout="out('-6121369465424712252');" style=""><abbr title=" 759                         primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValue());"> 759                         primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValuðŸ”µ</abbr></span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 760                         break;                                                                           </span>
<span class="8574078210225677907" onmouseenter="enter('8574078210225677907');" onmouseout="out('8574078210225677907');" style=""> 761                     case STRING :                                                                        </span>
<span class="1585063350949159261" onmouseenter="enter('1585063350949159261');" onmouseout="out('1585063350949159261');" style=""> 762                         primaryKey = property.getValue();                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 763                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 765                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767         }                                                                                                </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 768         if (primaryKey == null) {                                                                        </span>
<span class="-782560894109424745" onmouseenter="enter('-782560894109424745');" onmouseout="out('-782560894109424745');" style=""><abbr title=" 769             throw new RuntimeException(((&quot;Could not find the primary key property (&quot; + idPropertyName) + &quot;) in the passed entity with type: &quot;) + entity.getType()[0]);"> 769             throw new RuntimeException(((&quot;Could not find the primary key property (&quot; + idPropertyName) + ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 770         }                                                                                                </span>
<span class="445877428068937777" onmouseenter="enter('445877428068937777');" onmouseout="out('445877428068937777');" style=""> 771         return primaryKey;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772     }                                                                                                    </span>
<span  style=""> 773                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 774     @Override                                                                                            </span>
<span class="8348793631888876933" onmouseenter="enter('8348793631888876933');" onmouseout="out('8348793631888876933');" style=""><abbr title=" 775     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective, CriteriaTransferObject cto, String ceilingEntityFullyQualifiedClassname, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties, RestrictionFactory customRestrictionFactory) {"> 775     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective, CriteriaTðŸ”µ</abbr></span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 776         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 776         Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredPropertðŸ”µ</abbr></span>
<span class="5454417750033935999" onmouseenter="enter('5454417750033935999');" onmouseout="out('5454417750033935999');" style=""> 777         List&lt;FilterMapping&gt; filterMappings = new ArrayList&lt;FilterMapping&gt;();                             </span>
<span class="5160955752092959572" onmouseenter="enter('5160955752092959572');" onmouseout="out('5160955752092959572');" style=""> 778         for (String propertyId : cto.getCriteriaMap().keySet()) {                                        </span>
<span class="4532640545066977906" onmouseenter="enter('4532640545066977906');" onmouseout="out('4532640545066977906');" style=""> 779             if (mergedProperties.containsKey(propertyId)) {                                              </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 780                 boolean handled = false;                                                                 </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 781                 for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {    </span>
<span class="-7159139530677495719" onmouseenter="enter('-7159139530677495719');" onmouseout="out('-7159139530677495719');" style=""><abbr title=" 782                     MetadataProviderResponse response = fieldPersistenceProvider.addSearchMapping(new AddSearchMappingRequest(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedProperties, propertyId, getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFactory : customRestrictionFactory), filterMappings);"> 782                     MetadataProviderResponse response = fieldPersistenceProvider.addSearchMapping(new AddðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 783                     if (MetadataProviderResponse.NOT_HANDLED != response) {                              </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 784                         handled = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 785                     }                                                                                    </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 786                     if (MetadataProviderResponse.HANDLED_BREAK == response) {                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 787                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 788                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 789                 }                                                                                        </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 790                 if (!handled) {                                                                          </span>
<span class="-6710096082108719164" onmouseenter="enter('-6710096082108719164');" onmouseout="out('-6710096082108719164');" style=""><abbr title=" 791                     defaultFieldPersistenceProvider.addSearchMapping(new AddSearchMappingRequest(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedProperties, propertyId, getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFactory : customRestrictionFactory), filterMappings);"> 791                     defaultFieldPersistenceProvider.addSearchMapping(new AddSearchMappingRequest(persisteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 792                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 793             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794         }                                                                                                </span>
<span class="-1900027260049794739" onmouseenter="enter('-1900027260049794739');" onmouseout="out('-1900027260049794739');" style=""> 795         return filterMappings;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796     }                                                                                                    </span>
<span  style=""> 797                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 798     @Override                                                                                            </span>
<span class="-8929616746934601136" onmouseenter="enter('-8929616746934601136');" onmouseout="out('-8929616746934601136');" style=""><abbr title=" 799     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective, CriteriaTransferObject cto, String ceilingEntityFullyQualifiedClassname, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {"> 799     public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective, CriteriaTðŸ”µ</abbr></span>
<span class="81017552378868833" onmouseenter="enter('81017552378868833');" onmouseout="out('81017552378868833');" style=""><abbr title=" 800         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilteredProperties, null);"> 800         return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 801     }                                                                                                    </span>
<span  style=""> 802                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 803     @Override                                                                                            </span>
<span class="897240738537618425" onmouseenter="enter('897240738537618425');" onmouseout="out('897240738537618425');" style=""><abbr title=" 804     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; mergedProperties, List&lt;Property&gt; properties) {"> 804     public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMeðŸ”µ</abbr></span>
<span class="-5864020654264554558" onmouseenter="enter('-5864020654264554558');" onmouseout="out('-5864020654264554558');" style=""><abbr title=" 805         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), properties, false, MergedPropertyType.PRIMARY);"> 805         extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806     }                                                                                                    </span>
<span  style=""> 807                                                                                                          </span>
<span class="203860492987878792" onmouseenter="enter('203860492987878792');" onmouseout="out('203860492987878792');" style=""><abbr title=" 808     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedProperties, List&lt;Property&gt; properties, Boolean isHiddenOverride, MergedPropertyType type) {"> 808     protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mðŸ”µ</abbr></span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style=""> 809         Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                                   </span>
<span  style=""> 810                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 811             @Override                                                                                    </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 812             public int compare(Property o1, Property o2) {                                               </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style=""> 813                 return o1.getName().compareTo(o2.getName());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 815         };                                                                                               </span>
<span  style=""> 816                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style=""> 817 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="-6235585592219807242" onmouseenter="enter('-6235585592219807242');" onmouseout="out('-6235585592219807242');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 818         properties.sort(comparator);                                                                     </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 819                                                                                                          </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 820                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 821 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 822 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 822 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 823 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 824                                                                                                          </span>
<span class="-7612884103774291324" onmouseenter="enter('-7612884103774291324');" onmouseout="out('-7612884103774291324');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 825         Collections.sort(properties, comparator);                                                        </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 826                                                                                                          </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 827 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span class="-2434831074249628531" onmouseenter="enter('-2434831074249628531');" onmouseout="out('-2434831074249628531');" style=""> 828         for (Map.Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                     </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 829             String property = entry.getKey();                                                            </span>
<span class="-231152183806873874" onmouseenter="enter('-231152183806873874');" onmouseout="out('-231152183806873874');" style=""> 830             Property prop = new Property();                                                              </span>
<span class="-3770108933014957253" onmouseenter="enter('-3770108933014957253');" onmouseout="out('-3770108933014957253');" style=""> 831             FieldMetadata metadata = mergedProperties.get(property);                                     </span>
<span class="-6395393149471547560" onmouseenter="enter('-6395393149471547560');" onmouseout="out('-6395393149471547560');" style=""> 832             prop.setName(property);                                                                      </span>
<span  style=""> 833                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style=""> 834 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 835                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 836 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 837 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 837 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 838 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 839                                                                                                          </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 840                                                                                                          </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 841                                                                                                          </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 842 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span class="-2139676366648139964" onmouseenter="enter('-2139676366648139964');" onmouseout="out('-2139676366648139964');" style=""> 843             int pos = Collections.binarySearch(properties, prop, comparator);                            </span>
<span class="-2417851046359094762" onmouseenter="enter('-2417851046359094762');" onmouseout="out('-2417851046359094762');" style=""><abbr title=" 844             if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREVALUE != type) {"> 844             if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREðŸ”µ</abbr></span>
<span class="-1490193869050628697" onmouseenter="enter('-1490193869050628697');" onmouseout="out('-1490193869050628697');" style=""> 845                 logWarn: {                                                                               </span>
<span class="5327179807238785116" onmouseenter="enter('5327179807238785116');" onmouseout="out('5327179807238785116');" style=""><abbr title=" 846                     if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadata) metadata).getFieldType())) {"> 846                     if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFðŸ”µ</abbr></span>
<span class="6221076133691521085" onmouseenter="enter('6221076133691521085');" onmouseout="out('6221076133691521085');" style=""> 847                         //don&#x27;t warn for id field collisions, but still ignore the colliding fields      </span>
<span class="1303890499227207840" onmouseenter="enter('1303890499227207840');" onmouseout="out('1303890499227207840');" style=""> 848                         break logWarn;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 849                     }                                                                                    </span>
<span class="-3406896845088854457" onmouseenter="enter('-3406896845088854457');" onmouseout="out('-3406896845088854457');" style=""><abbr title=" 850                     //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + &quot;) during inspection for the inheritance line starting with (&quot; + inheritanceLine[0].getName() + &quot;). Ignoring the additional field. This can occur most commonly when using the @AdminPresentationAdornedTargetCollection and the collection type and target class have field names in common. This situation should be avoided, as the system will strip the repeated fields, which can cause unpredictable behavior.&quot;);"> 850                     //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + prðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851                 }                                                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 852                 continue;                                                                                </span>
<span class="5067330164177088761" onmouseenter="enter('5067330164177088761');" onmouseout="out('5067330164177088761');" style=""> 853             } else if (pos &lt; 0) {                                                                        </span>
<span class="-8221812243074404132" onmouseenter="enter('-8221812243074404132');" onmouseout="out('-8221812243074404132');" style=""> 854                 pos = -pos - 1; // calculate position to insert                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855             }                                                                                            </span>
<span class="2534204392443089313" onmouseenter="enter('2534204392443089313');" onmouseout="out('2534204392443089313');" style=""> 856             properties.add(pos, prop);                                                                   </span>
<span class="-4762622463962141865" onmouseenter="enter('-4762622463962141865');" onmouseout="out('-4762622463962141865');" style=""> 857             prop.setMetadata(metadata);                                                                  </span>
<span class="-6199017505159175940" onmouseenter="enter('-6199017505159175940');" onmouseout="out('-6199017505159175940');" style=""> 858             if (isHiddenOverride &amp;&amp; prop.getMetadata() instanceof BasicFieldMetadata) {                  </span>
<span class="-7685654662722475773" onmouseenter="enter('-7685654662722475773');" onmouseout="out('-7685654662722475773');" style=""> 859                 //this only makes sense for non collection types                                         </span>
<span class="-763482179748503913" onmouseenter="enter('-763482179748503913');" onmouseout="out('-763482179748503913');" style=""> 860                 ((BasicFieldMetadata) prop.getMetadata()).setVisibility(VisibilityEnum.HIDDEN_ALL);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 861             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 862         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 863     }                                                                                                    </span>
<span  style=""> 864                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 865     @Override                                                                                            </span>
<span class="-1145456305415279084" onmouseenter="enter('-1145456305415279084');" onmouseout="out('-1145456305415279084');" style=""><abbr title=" 866     public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; allMergedProperties) throws ServiceException {"> 866     public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, MapðŸ”µ</abbr></span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title=" 867         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();"> 867         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 868         try {                                                                                            </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""><abbr title=" 869             PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();"> 869             PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective(ðŸ”µ</abbr></span>
<span class="3509784211613018298" onmouseenter="enter('3509784211613018298');" onmouseout="out('3509784211613018298');" style=""><abbr title=" 870             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClassname);"> 870             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="1054635470267988291" onmouseenter="enter('1054635470267988291');" onmouseout="out('1054635470267988291');" style=""><abbr title=" 871             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(ceilingEntityFullyQualifiedClassname, entities, ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY))), persistencePerspective.getAdditionalNonPersistentProperties(), persistencePerspective.getAdditionalForeignKeys(), MergedPropertyType.PRIMARY, persistencePerspective.getPopulateToOneFields(), persistencePerspective.getIncludeFields(), persistencePerspective.getExcludeFields(), persistencePerspective.getConfigurationKey(), &quot;&quot;);"> 871             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="3843057087083113739" onmouseenter="enter('3843057087083113739');" onmouseout="out('3843057087083113739');" style=""> 872             allMergedProperties.put(MergedPropertyType.PRIMARY, mergedProperties);                       </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 873         } catch (java.lang.Exception e) {                                                                </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title=" 874             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);"> 874             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 875         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 876     }                                                                                                    </span>
<span  style=""> 877                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 878     @Override                                                                                            </span>
<span class="-4783803183233062984" onmouseenter="enter('-4783803183233062984');" onmouseout="out('-4783803183233062984');" style=""><abbr title=" 879     public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {"> 879     public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) thðŸ”µ</abbr></span>
<span class="-5998034243161331810" onmouseenter="enter('-5998034243161331810');" onmouseout="out('-5998034243161331810');" style=""> 880         return update(persistencePackage, null, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881     }                                                                                                    </span>
<span  style=""> 882                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 883     @Override                                                                                            </span>
<span class="-2807508720531838872" onmouseenter="enter('-2807508720531838872');" onmouseout="out('-2807508720531838872');" style=""> 884     public Entity update(PersistencePackage persistencePackage) throws ServiceException {                </span>
<span class="-5671722244832067224" onmouseenter="enter('-5671722244832067224');" onmouseout="out('-5671722244832067224');" style=""> 885         EntityResult er = update(persistencePackage, null, false);                                       </span>
<span class="-4364232546893819072" onmouseenter="enter('-4364232546893819072');" onmouseout="out('-4364232546893819072');" style=""> 886         return er.getEntity();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887     }                                                                                                    </span>
<span  style=""> 888                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 889     @Override                                                                                            </span>
<span class="6001696775937434965" onmouseenter="enter('6001696775937434965');" onmouseout="out('6001696775937434965');" style=""> 890     public Entity add(PersistencePackage persistencePackage) throws ServiceException {                   </span>
<span class="-7059200088088645842" onmouseenter="enter('-7059200088088645842');" onmouseout="out('-7059200088088645842');" style=""> 891         EntityResult entityResult = add(persistencePackage, false);                                      </span>
<span class="2936146364192771277" onmouseenter="enter('2936146364192771277');" onmouseout="out('2936146364192771277');" style=""> 892         return entityResult.getEntity();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 893     }                                                                                                    </span>
<span  style=""> 894                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 895     @Override                                                                                            </span>
<span class="7079650910076086428" onmouseenter="enter('7079650910076086428');" onmouseout="out('7079650910076086428');" style=""><abbr title=" 896     public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {"> 896     public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throwðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 897         EntityResult entityResult = new EntityResult();                                                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 898         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 899         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-6574648083356776864" onmouseenter="enter('-6574648083356776864');" onmouseout="out('-6574648083356776864');" style=""><abbr title=" 900         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY)));"> 900         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().geðŸ”µ</abbr></span>
<span class="2810923578864584163" onmouseenter="enter('2810923578864584163');" onmouseout="out('2810923578864584163');" style=""> 901         if ((foreignKey != null) &amp;&amp; (!foreignKey.getMutable())) {                                        </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 902             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 903         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 904         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 905             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 905             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="8820266687956758411" onmouseenter="enter('8820266687956758411');" onmouseout="out('8820266687956758411');" style=""><abbr title=" 906             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(persistencePackage.getCeilingEntityFullyQualifiedClassname(), entities, foreignKey, persistencePerspective.getAdditionalNonPersistentProperties(), persistencePerspective.getAdditionalForeignKeys(), MergedPropertyType.PRIMARY, persistencePerspective.getPopulateToOneFields(), persistencePerspective.getIncludeFields(), persistencePerspective.getExcludeFields(), persistencePerspective.getConfigurationKey(), &quot;&quot;);"> 906             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDaðŸ”µ</abbr></span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 907             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 907             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProðŸ”µ</abbr></span>
<span class="-4432713425684374872" onmouseenter="enter('-4432713425684374872');" onmouseout="out('-4432713425684374872');" style=""> 908             String idProperty = null;                                                                    </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 909             for (String property : mergedProperties.keySet()) {                                          </span>
<span class="2006913739212116449" onmouseenter="enter('2006913739212116449');" onmouseout="out('2006913739212116449');" style=""><abbr title=" 910                 if (((BasicFieldMetadata) (mergedProperties.get(property))).getFieldType() == SupportedFieldType.ID) {"> 910                 if (((BasicFieldMetadata) (mergedProperties.get(property))).getFieldType() == SupportedFiðŸ”µ</abbr></span>
<span class="-5524453042327008702" onmouseenter="enter('-5524453042327008702');" onmouseout="out('-5524453042327008702');" style=""> 911                     idProperty = property;                                                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 912                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 913                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 914             }                                                                                            </span>
<span class="1924041731168261447" onmouseenter="enter('1924041731168261447');" onmouseout="out('1924041731168261447');" style=""> 915             if (idProperty == null) {                                                                    </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title=" 916                 throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);"> 916                 throw new RuntimeException(&quot;Could not find a primary key property in the passed entity wiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 917             }                                                                                            </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style=""> 918             Object primaryKey = null;                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 919             try {                                                                                        </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style=""> 920                 primaryKey = getPrimaryKey(entity, mergedProperties);                                    </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 921             } catch (java.lang.Exception e) {                                                            </span>
<span class="1765240511479733113" onmouseenter="enter('1765240511479733113');" onmouseout="out('1765240511479733113');" style=""> 922                 // don&#x27;t do anything - this is a valid case                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 923             }                                                                                            </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 924             if (primaryKey == null) {                                                                    </span>
<span class="2338163775309691724" onmouseenter="enter('2338163775309691724');" onmouseout="out('2338163775309691724');" style=""><abbr title=" 925                 Serializable instance = ((Serializable) (Class.forName(entity.getType()[0]).newInstance()));"> 925                 Serializable instance = ((Serializable) (Class.forName(entity.getType()[0]).newInstance()ðŸ”µ</abbr></span>
<span class="-2986273728837208353" onmouseenter="enter('-2986273728837208353');" onmouseout="out('-2986273728837208353');" style=""> 926                 instance = createPopulatedInstance(instance, entity, mergedProperties, false);           </span>
<span class="-2673597301429377432" onmouseenter="enter('-2673597301429377432');" onmouseout="out('-2673597301429377432');" style=""> 927                 if ((foreignKey != null) &amp;&amp; (foreignKey.getSortField() != null)) {                       </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""><abbr title=" 928                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();"> 928                     ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;(ðŸ”µ</abbr></span>
<span class="1481560234407270538" onmouseenter="enter('1481560234407270538');" onmouseout="out('1481560234407270538');" style=""><abbr title=" 929                     extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedProperties, result);"> 929                     extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergeðŸ”µ</abbr></span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style=""> 930                     instance = result.getResult();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 931                 }                                                                                        </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 932                 instance = persistenceManager.getDynamicEntityDao().merge(instance);                     </span>
<span class="7937797480137547171" onmouseenter="enter('7937797480137547171');" onmouseout="out('7937797480137547171');" style=""> 933                 if (includeRealEntityObject) {                                                           </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style=""> 934                     entityResult.setEntityBackingObject(instance);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 935                 }                                                                                        </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 936                 List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                          </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 937                 entityList.add(instance);                                                                </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style=""> 938                 entity = getRecords(mergedProperties, entityList, null, null, null)[0];                  </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 939                 entityResult.setEntity(entity);                                                          </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 940                 return entityResult;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 941             } else {                                                                                     </span>
<span class="-5905945487992976049" onmouseenter="enter('-5905945487992976049');" onmouseout="out('-5905945487992976049');" style=""> 942                 return update(persistencePackage, primaryKey, includeRealEntityObject);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 943             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 944         } catch (java.lang.Exception e) {                                                                </span>
<span class="-3635977582445593738" onmouseenter="enter('-3635977582445593738');" onmouseout="out('-3635977582445593738');" style=""> 945             throw new ServiceException(&quot;Problem adding new entity : &quot; + e.getMessage(), e);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 946         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947     }                                                                                                    </span>
<span  style=""> 948                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 949     @Override                                                                                            </span>
<span class="-8285012329134109181" onmouseenter="enter('-8285012329134109181');" onmouseout="out('-8285012329134109181');" style=""> 950     public void remove(PersistencePackage persistencePackage) throws ServiceException {                  </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 951         Entity entity = persistencePackage.getEntity();                                                  </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 952         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="-6574648083356776864" onmouseenter="enter('-6574648083356776864');" onmouseout="out('-6574648083356776864');" style=""><abbr title=" 953         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY)));"> 953         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().geðŸ”µ</abbr></span>
<span class="2810923578864584163" onmouseenter="enter('2810923578864584163');" onmouseout="out('2810923578864584163');" style=""> 954         if ((foreignKey != null) &amp;&amp; (!foreignKey.getMutable())) {                                        </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 955             throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 956         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 957         try {                                                                                            </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 958             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 958             Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingðŸ”µ</abbr></span>
<span class="8820266687956758411" onmouseenter="enter('8820266687956758411');" onmouseout="out('8820266687956758411');" style=""><abbr title=" 959             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(persistencePackage.getCeilingEntityFullyQualifiedClassname(), entities, foreignKey, persistencePerspective.getAdditionalNonPersistentProperties(), persistencePerspective.getAdditionalForeignKeys(), MergedPropertyType.PRIMARY, persistencePerspective.getPopulateToOneFields(), persistencePerspective.getIncludeFields(), persistencePerspective.getExcludeFields(), persistencePerspective.getConfigurationKey(), &quot;&quot;);"> 959             Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDaðŸ”µ</abbr></span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""><abbr title=" 960             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);"> 960             Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProðŸ”µ</abbr></span>
<span class="-1223682136408553234" onmouseenter="enter('-1223682136408553234');" onmouseout="out('-1223682136408553234');" style=""> 961             Object primaryKey = getPrimaryKey(entity, mergedProperties);                                 </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title=" 962             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);"> 962             Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entitðŸ”µ</abbr></span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style=""> 963             Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                         </span>
<span class="6713488701284006207" onmouseenter="enter('6713488701284006207');" onmouseout="out('6713488701284006207');" style=""> 964             switch (persistencePerspective.getOperationTypes().getRemoveType()) {                        </span>
<span class="1142445618842124271" onmouseenter="enter('1142445618842124271');" onmouseout="out('1142445618842124271');" style=""> 965                 case NONDESTRUCTIVEREMOVE :                                                              </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 966                     FieldManager fieldManager = getFieldManager();                                       </span>
<span class="3973215198680528904" onmouseenter="enter('3973215198680528904');" onmouseout="out('3973215198680528904');" style=""><abbr title=" 967                     FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField());"> 967                     FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyðŸ”µ</abbr></span>
<span class="1169143210599293613" onmouseenter="enter('1169143210599293613');" onmouseout="out('1169143210599293613');" style=""><abbr title=" 968                     Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue();"> 968                     Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue()ðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 969                     try {                                                                                </span>
<span class="5481501032486366952" onmouseenter="enter('5481501032486366952');" onmouseout="out('5481501032486366952');" style=""> 970                         foreignKeyValue = Long.valueOf(((String) (foreignKeyValue)));                    </span>
<span class="5607511864385965813" onmouseenter="enter('5607511864385965813');" onmouseout="out('5607511864385965813');" style=""> 971                     } catch (java.lang.NumberFormatException e) {                                        </span>
<span class="7012272079852218418" onmouseenter="enter('7012272079852218418');" onmouseout="out('7012272079852218418');" style=""><abbr title=" 972                         LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove lookup&quot;);"> 972                         LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove looðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 973                     }                                                                                    </span>
<span class="7279695966184570355" onmouseenter="enter('7279695966184570355');" onmouseout="out('7279695966184570355');" style=""><abbr title=" 974                     Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(foreignKey.getForeignKeyClass()), foreignKeyValue);"> 974                     Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(ClasðŸ”µ</abbr></span>
<span class="-4517376354405682059" onmouseenter="enter('-4517376354405682059');" onmouseout="out('-4517376354405682059');" style=""><abbr title=" 975                     Collection collection = ((Collection) (fieldManager.getFieldValue(foreignInstance, foreignKey.getOriginatingField())));"> 975                     Collection collection = ((Collection) (fieldManager.getFieldValue(foreignInstance, foðŸ”µ</abbr></span>
<span class="8045950107739873006" onmouseenter="enter('8045950107739873006');" onmouseout="out('8045950107739873006');" style=""> 976                     collection.remove(instance);                                                         </span>
<span class="7309400259168651936" onmouseenter="enter('7309400259168651936');" onmouseout="out('7309400259168651936');" style=""><abbr title=" 977                     // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreign key on"> 977                     // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (justðŸ”µ</abbr></span>
<span class="7114131295623762638" onmouseenter="enter('7114131295623762638');" onmouseout="out('7114131295623762638');" style=""><abbr title=" 978                     // the @ManyToOne side) then it will not be updated. In that instance, we have to explicitly"> 978                     // the @ManyToOne side) then it will not be updated. In that instance, we have to expðŸ”µ</abbr></span>
<span class="3943491933719923666" onmouseenter="enter('3943491933719923666');" onmouseout="out('3943491933719923666');" style=""> 979                     // set the manyTo field to null so that subsequent lookups will not find it          </span>
<span class="2820622934029903464" onmouseenter="enter('2820622934029903464');" onmouseout="out('2820622934029903464');" style=""> 980                     if (manyToFieldMetadata instanceof BasicFieldMetadata) {                             </span>
<span class="-7109466749209802804" onmouseenter="enter('-7109466749209802804');" onmouseout="out('-7109466749209802804');" style=""><abbr title=" 981                         if (BooleanUtils.isTrue(((BasicFieldMetadata) (manyToFieldMetadata)).getRequired())) {"> 981                         if (BooleanUtils.isTrue(((BasicFieldMetadata) (manyToFieldMetadata)).getRequired(ðŸ”µ</abbr></span>
<span class="-6517838810722879881" onmouseenter="enter('-6517838810722879881');" onmouseout="out('-6517838810722879881');" style=""><abbr title=" 982                             throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne side is a&quot; + (&quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyToOne annotation&quot; + &quot; or nullable=true within the @JoinColumn annotation&quot;));"> 982                             throw new ServiceException(&quot;Could not remove from the collection as the ManyTðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 983                         }                                                                                </span>
<span class="-7414876815352490832" onmouseenter="enter('-7414876815352490832');" onmouseout="out('-7414876815352490832');" style=""><abbr title=" 984                         // Since this is occuring on a remove persistence package, merge up-front (before making a change) for proper operation in the presence of the enterprise module"> 984                         // Since this is occuring on a remove persistence package, merge up-front (beforeðŸ”µ</abbr></span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 985                         instance = persistenceManager.getDynamicEntityDao().merge(instance);             </span>
<span class="-3549582829608652451" onmouseenter="enter('-3549582829608652451');" onmouseout="out('-3549582829608652451');" style=""><abbr title=" 986                         Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField());"> 986                         Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyðŸ”µ</abbr></span>
<span class="-2737504991189218406" onmouseenter="enter('-2737504991189218406');" onmouseout="out('-2737504991189218406');" style=""> 987                         Object manyToObject = manyToField.get(instance);                                 </span>
<span class="-3949036003110653717" onmouseenter="enter('-3949036003110653717');" onmouseout="out('-3949036003110653717');" style=""><abbr title=" 988                         if (((manyToObject != null) &amp;&amp; (!(manyToObject instanceof Collection))) &amp;&amp; (!(manyToObject instanceof Map))) {"> 988                         if (((manyToObject != null) &amp;&amp; (!(manyToObject instanceof Collection))) &amp;&amp; (!(manðŸ”µ</abbr></span>
<span class="-3600933715630852255" onmouseenter="enter('-3600933715630852255');" onmouseout="out('-3600933715630852255');" style=""> 989                             manyToField.set(instance, null);                                             </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 990                             instance = persistenceManager.getDynamicEntityDao().merge(instance);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 991                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 992                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 993                     break;                                                                               </span>
<span class="2582537678465774458" onmouseenter="enter('2582537678465774458');" onmouseout="out('2582537678465774458');" style=""> 994                 case BASIC :                                                                             </span>
<span class="-3622621852197441069" onmouseenter="enter('-3622621852197441069');" onmouseout="out('-3622621852197441069');" style=""> 995                     persistenceManager.getDynamicEntityDao().remove(instance);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 996                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 997             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 998         } catch (java.lang.Exception e) {                                                                </span>
<span class="-1927777960097045518" onmouseenter="enter('-1927777960097045518');" onmouseout="out('-1927777960097045518');" style=""> 999             throw new ServiceException(&quot;Problem removing entity : &quot; + e.getMessage(), e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1000         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1001     }                                                                                                    </span>
<span  style="">1002                                                                                                          </span>
<span class="513510735216993654" onmouseenter="enter('513510735216993654');" onmouseout="out('513510735216993654');" style=""><abbr title="1003     public Map&lt;String, FieldMetadata&gt; getMergedProperties(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {">1003     public Map&lt;String, FieldMetadata&gt; getMergedProperties(PersistencePackage persistencePackage, CriteriaðŸ”µ</abbr></span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1004         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1005         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1005         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-5573073822220246070" onmouseenter="enter('-5573073822220246070');" onmouseout="out('-5573073822220246070');" style="">1006         if (StringUtils.isEmpty(persistencePackage.getFetchTypeFullyQualifiedClassname())) {             </span>
<span class="8779313298045253029" onmouseenter="enter('8779313298045253029');" onmouseout="out('8779313298045253029');" style="">1007             persistencePackage.setFetchTypeFullyQualifiedClassname(ceilingEntityFullyQualifiedClassname);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1008         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1009         try {                                                                                            </span>
<span class="-5197892520502431560" onmouseenter="enter('-5197892520502431560');" onmouseout="out('-5197892520502431560');" style=""><abbr title="1010             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(Class.forName(ceilingEntityFullyQualifiedClassname));">1010             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCðŸ”µ</abbr></span>
<span class="1054635470267988291" onmouseenter="enter('1054635470267988291');" onmouseout="out('1054635470267988291');" style=""><abbr title="1011             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(ceilingEntityFullyQualifiedClassname, entities, ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY))), persistencePerspective.getAdditionalNonPersistentProperties(), persistencePerspective.getAdditionalForeignKeys(), MergedPropertyType.PRIMARY, persistencePerspective.getPopulateToOneFields(), persistencePerspective.getIncludeFields(), persistencePerspective.getExcludeFields(), persistencePerspective.getConfigurationKey(), &quot;&quot;);">1011             Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMerðŸ”µ</abbr></span>
<span class="513114689449481379" onmouseenter="enter('513114689449481379');" onmouseout="out('513114689449481379');" style="">1012             return mergedProperties;                                                                     </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">1013         } catch (java.lang.Exception e) {                                                                </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1014             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1014             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1015         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1016     }                                                                                                    </span>
<span  style="">1017                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1018     @Override                                                                                            </span>
<span class="8546305990485145221" onmouseenter="enter('8546305990485145221');" onmouseout="out('8546305990485145221');" style=""><abbr title="1019     public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {">1019     public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throðŸ”µ</abbr></span>
<span class="-772649916350085514" onmouseenter="enter('-772649916350085514');" onmouseout="out('-772649916350085514');" style="">1020         Entity[] payload;                                                                                </span>
<span class="3229522520950860553" onmouseenter="enter('3229522520950860553');" onmouseout="out('3229522520950860553');" style="">1021         int totalRecords;                                                                                </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1022         PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();  </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1023         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1023         String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClðŸ”µ</abbr></span>
<span class="-6574648083356776864" onmouseenter="enter('-6574648083356776864');" onmouseout="out('-6574648083356776864');" style=""><abbr title="1024         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY)));">1024         ForeignKey foreignKey = ((ForeignKey) (persistencePerspective.getPersistencePerspectiveItems().geðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1025         try {                                                                                            </span>
<span class="-2673597301429377432" onmouseenter="enter('-2673597301429377432');" onmouseout="out('-2673597301429377432');" style="">1026             if ((foreignKey != null) &amp;&amp; (foreignKey.getSortField() != null)) {                           </span>
<span class="2404625472493330195" onmouseenter="enter('2404625472493330195');" onmouseout="out('2404625472493330195');" style="">1027                 FilterAndSortCriteria sortCriteria = cto.get(foreignKey.getSortField());                 </span>
<span class="-7029642347361419040" onmouseenter="enter('-7029642347361419040');" onmouseout="out('-7029642347361419040');" style="">1028                 sortCriteria.setSortAscending(foreignKey.getSortAscending());                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1029             }                                                                                            </span>
<span class="-3998990817835064526" onmouseenter="enter('-3998990817835064526');" onmouseout="out('-3998990817835064526');" style="">1030             Map&lt;String, FieldMetadata&gt; mergedProperties = getMergedProperties(persistencePackage, cto);  </span>
<span class="7364642128609949837" onmouseenter="enter('7364642128609949837');" onmouseout="out('7364642128609949837');" style=""><abbr title="1031             List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistencePackage.getFetchTypeFullyQualifiedClassname(), mergedProperties);">1031             List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistenðŸ”µ</abbr></span>
<span class="3150984124528274911" onmouseenter="enter('3150984124528274911');" onmouseout="out('3150984124528274911');" style="">1032             List&lt;FilterMapping&gt; standardFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);   </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1033             if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                         </span>
<span class="8416184071019923073" onmouseenter="enter('8416184071019923073');" onmouseout="out('8416184071019923073');" style="">1034                 standardFilterMappings.addAll(cto.getAdditionalFilterMappings());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1035             }                                                                                            </span>
<span class="371531837080654072" onmouseenter="enter('371531837080654072');" onmouseout="out('371531837080654072');" style="">1036             if (CollectionUtils.isNotEmpty(cto.getNonCountAdditionalFilterMappings())) {                 </span>
<span class="1437073849667335666" onmouseenter="enter('1437073849667335666');" onmouseout="out('1437073849667335666');" style="">1037                 standardFilterMappings.addAll(cto.getNonCountAdditionalFilterMappings());                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1038             }                                                                                            </span>
<span class="5923409016849567594" onmouseenter="enter('5923409016849567594');" onmouseout="out('5923409016849567594');" style=""><abbr title="1039             FetchRequest fetchRequest = new FetchRequest(persistencePackage, cto, persistencePackage.getFetchTypeFullyQualifiedClassname(), standardFilterMappings);">1039             FetchRequest fetchRequest = new FetchRequest(persistencePackage, cto, persistencePackage.getFðŸ”µ</abbr></span>
<span class="6303456555516158535" onmouseenter="enter('6303456555516158535');" onmouseout="out('6303456555516158535');" style="">1040             List&lt;Serializable&gt; records = getPersistentRecords(fetchRequest);                             </span>
<span class="-2850022341577176338" onmouseenter="enter('-2850022341577176338');" onmouseout="out('-2850022341577176338');" style="">1041             List&lt;FilterMapping&gt; countFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);      </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1042             if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                         </span>
<span class="2702453385268728814" onmouseenter="enter('2702453385268728814');" onmouseout="out('2702453385268728814');" style="">1043                 countFilterMappings.addAll(cto.getAdditionalFilterMappings());                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1044             }                                                                                            </span>
<span class="-6858810223014839204" onmouseenter="enter('-6858810223014839204');" onmouseout="out('-6858810223014839204');" style=""><abbr title="1045             FetchRequest countFetchRequest = new FetchRequest(persistencePackage, cto, persistencePackage.getFetchTypeFullyQualifiedClassname(), countFilterMappings);">1045             FetchRequest countFetchRequest = new FetchRequest(persistencePackage, cto, persistencePackageðŸ”µ</abbr></span>
<span class="8724074426546236268" onmouseenter="enter('8724074426546236268');" onmouseout="out('8724074426546236268');" style="">1046             totalRecords = getTotalRecords(countFetchRequest);                                           </span>
<span class="29160359336504019" onmouseenter="enter('29160359336504019');" onmouseout="out('29160359336504019');" style=""><abbr title="1047             FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackage, cto, persistencePackage.getFetchTypeFullyQualifiedClassname(), mergedProperties, records);">1047             FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackageðŸ”µ</abbr></span>
<span class="8156899482235304262" onmouseenter="enter('8156899482235304262');" onmouseout="out('8156899482235304262');" style="">1048             payload = getRecords(fetchExtractionRequest);                                                </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">1049         } catch (java.lang.Exception e) {                                                                </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""><abbr title="1050             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e);">1050             throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassnðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1051         }                                                                                                </span>
<span class="-3114265280987831722" onmouseenter="enter('-3114265280987831722');" onmouseout="out('-3114265280987831722');" style="">1052         return new DynamicResultSet(null, payload, totalRecords);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1053     }                                                                                                    </span>
<span  style="">1054                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1055     @Override                                                                                            </span>
<span class="-2578660758180960" onmouseenter="enter('-2578660758180960');" onmouseout="out('-2578660758180960');" style="">1056     public Integer getTotalRecords(FetchRequest fetchRequest) {                                          </span>
<span class="3552750659307215192" onmouseenter="enter('3552750659307215192');" onmouseout="out('3552750659307215192');" style="">1057         return fetchWrapper.getTotalRecords(fetchRequest);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1058     }                                                                                                    </span>
<span  style="">1059                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1060     @Override                                                                                            </span>
<span class="5133967305615212146" onmouseenter="enter('5133967305615212146');" onmouseout="out('5133967305615212146');" style="">1061     public Integer getTotalRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings) {           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1062         try {                                                                                            </span>
<span class="779760690581428066" onmouseenter="enter('779760690581428066');" onmouseout="out('779760690581428066');" style=""><abbr title="1063             return ((Long) (criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings).getSingleResult())).intValue();">1063             return ((Long) (criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDaoðŸ”µ</abbr></span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1064         } catch (CriteriaConversionException e) {                                                        </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1065             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1065             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilðŸ”µ</abbr></span>
<span class="301817421820724152" onmouseenter="enter('301817421820724152');" onmouseout="out('301817421820724152');" style=""><abbr title="1066             return ((Long) (builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getSingleResult())).intValue();">1066             return ((Long) (builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandarðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1067         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1068     }                                                                                                    </span>
<span  style="">1069                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1070     @Override                                                                                            </span>
<span class="-7091292263578945571" onmouseenter="enter('-7091292263578945571');" onmouseout="out('-7091292263578945571');" style=""><abbr title="1071     public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxField) {">1071     public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxFðŸ”µ</abbr></span>
<span class="793889105442484323" onmouseenter="enter('793889105442484323');" onmouseout="out('793889105442484323');" style=""><abbr title="1072         return criteriaTranslator.translateMaxQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings, maxField).getSingleResult();">1072         return criteriaTranslator.translateMaxQuery(persistenceManager.getDynamicEntityDao(), ceilingEntiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1073     }                                                                                                    </span>
<span  style="">1074                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1075     @Override                                                                                            </span>
<span class="-7700127040847294453" onmouseenter="enter('-7700127040847294453');" onmouseout="out('-7700127040847294453');" style="">1076     public List&lt;Serializable&gt; getPersistentRecords(FetchRequest fetchRequest) {                          </span>
<span class="8379695074016758469" onmouseenter="enter('8379695074016758469');" onmouseout="out('8379695074016758469');" style="">1077         return fetchWrapper.getPersistentRecords(fetchRequest);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1078     }                                                                                                    </span>
<span  style="">1079                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1080     @Override                                                                                            </span>
<span class="-3765220535491808040" onmouseenter="enter('-3765220535491808040');" onmouseout="out('-3765220535491808040');" style=""><abbr title="1081     public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, Integer firstResult, Integer maxResults) {">1081     public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappinðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1082         try {                                                                                            </span>
<span class="389003939619547722" onmouseenter="enter('389003939619547722');" onmouseout="out('389003939619547722');" style=""><abbr title="1083             return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings, firstResult, maxResults).getResultList();">1083             return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntðŸ”µ</abbr></span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1084         } catch (CriteriaConversionException e) {                                                        </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1085             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1085             TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilðŸ”µ</abbr></span>
<span class="-221814316245476979" onmouseenter="enter('-221814316245476979');" onmouseout="out('-221814316245476979');" style=""><abbr title="1086             return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getResultList();">1086             return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManagerðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088     }                                                                                                    </span>
<span  style="">1089                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1090     @Override                                                                                            </span>
<span class="-5264121643331936103" onmouseenter="enter('-5264121643331936103');" onmouseout="out('-5264121643331936103');" style=""><abbr title="1091     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1091     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; merðŸ”µ</abbr></span>
<span class="4828126916979552028" onmouseenter="enter('4828126916979552028');" onmouseout="out('4828126916979552028');" style="">1092         return validate(entity, populatedInstance, mergedProperties, true);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1093     }                                                                                                    </span>
<span  style="">1094                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1095     @Override                                                                                            </span>
<span class="729304134647630610" onmouseenter="enter('729304134647630610');" onmouseout="out('729304134647630610');" style=""><abbr title="1096     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties, boolean validateUnsubmittedProperties) {">1096     public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; merðŸ”µ</abbr></span>
<span class="-1767922062013594425" onmouseenter="enter('-1767922062013594425');" onmouseout="out('-1767922062013594425');" style=""><abbr title="1097         entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedProperties);">1097         entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmðŸ”µ</abbr></span>
<span class="3683508287945816806" onmouseenter="enter('3683508287945816806');" onmouseout="out('3683508287945816806');" style="">1098         return !entity.isValidationFailure();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1099     }                                                                                                    </span>
<span  style="">1100                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1101     @Override                                                                                            </span>
<span class="-7261136882877520523" onmouseenter="enter('-7261136882877520523');" onmouseout="out('-7261136882877520523');" style="">1102     public void setPersistenceManager(PersistenceManager persistenceManager) {                           </span>
<span class="420805913365778848" onmouseenter="enter('420805913365778848');" onmouseout="out('420805913365778848');" style="">1103         this.persistenceManager = persistenceManager;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1104     }                                                                                                    </span>
<span  style="">1105                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1106     @Override                                                                                            </span>
<span class="-2499387119652050167" onmouseenter="enter('-2499387119652050167');" onmouseout="out('-2499387119652050167');" style="">1107     public PersistenceModule getCompatibleModule(OperationType operationType) {                          </span>
<span class="-7427303697741971710" onmouseenter="enter('-7427303697741971710');" onmouseout="out('-7427303697741971710');" style="">1108         return ((InspectHelper) (persistenceManager)).getCompatibleModule(operationType);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1109     }                                                                                                    </span>
<span  style="">1110                                                                                                          </span>
<span class="3328492731591597182" onmouseenter="enter('3328492731591597182');" onmouseout="out('3328492731591597182');" style="">1111     public FieldPersistenceProvider getDefaultFieldPersistenceProvider() {                               </span>
<span class="1756204342632449191" onmouseenter="enter('1756204342632449191');" onmouseout="out('1756204342632449191');" style="">1112         return defaultFieldPersistenceProvider;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1113     }                                                                                                    </span>
<span  style="">1114                                                                                                          </span>
<span class="-2699135397458953097" onmouseenter="enter('-2699135397458953097');" onmouseout="out('-2699135397458953097');" style=""><abbr title="1115     public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvider) {">1115     public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvidðŸ”µ</abbr></span>
<span class="3999856981618428822" onmouseenter="enter('3999856981618428822');" onmouseout="out('3999856981618428822');" style="">1116         this.defaultFieldPersistenceProvider = defaultFieldPersistenceProvider;                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1117     }                                                                                                    </span>
<span  style="">1118                                                                                                          </span>
<span class="-3297513575264900381" onmouseenter="enter('-3297513575264900381');" onmouseout="out('-3297513575264900381');" style="">1119     public List&lt;FieldPersistenceProvider&gt; getFieldPersistenceProviders() {                               </span>
<span class="-2059463949907485093" onmouseenter="enter('-2059463949907485093');" onmouseout="out('-2059463949907485093');" style="">1120         return fieldPersistenceProviders;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121     }                                                                                                    </span>
<span  style="">1122                                                                                                          </span>
<span class="-235472694817904036" onmouseenter="enter('-235472694817904036');" onmouseout="out('-235472694817904036');" style="">1123     public void setFieldPersistenceProviders(List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders) { </span>
<span class="-2955406707242124116" onmouseenter="enter('-2955406707242124116');" onmouseout="out('-2955406707242124116');" style="">1124         this.fieldPersistenceProviders = fieldPersistenceProviders;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125     }                                                                                                    </span>
<span  style="">1126                                                                                                          </span>
<span class="2527239256502116436" onmouseenter="enter('2527239256502116436');" onmouseout="out('2527239256502116436');" style="">1127     public CriteriaTranslator getCriteriaTranslator() {                                                  </span>
<span class="-7874987932723060666" onmouseenter="enter('-7874987932723060666');" onmouseout="out('-7874987932723060666');" style="">1128         return criteriaTranslator;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1129     }                                                                                                    </span>
<span  style="">1130                                                                                                          </span>
<span class="3030781032482147469" onmouseenter="enter('3030781032482147469');" onmouseout="out('3030781032482147469');" style="">1131     public void setCriteriaTranslator(CriteriaTranslator criteriaTranslator) {                           </span>
<span class="8514480012814343106" onmouseenter="enter('8514480012814343106');" onmouseout="out('8514480012814343106');" style="">1132         this.criteriaTranslator = criteriaTranslator;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1133     }                                                                                                    </span>
<span  style="">1134                                                                                                          </span>
<span class="5879967825851129823" onmouseenter="enter('5879967825851129823');" onmouseout="out('5879967825851129823');" style="">1135     public EntityValidatorService getEntityValidatorService() {                                          </span>
<span class="5121045867689107592" onmouseenter="enter('5121045867689107592');" onmouseout="out('5121045867689107592');" style="">1136         return entityValidatorService;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1137     }                                                                                                    </span>
<span  style="">1138                                                                                                          </span>
<span class="1108892278031396141" onmouseenter="enter('1108892278031396141');" onmouseout="out('1108892278031396141');" style="">1139     public void setEntityValidatorService(EntityValidatorService entityValidatorService) {               </span>
<span class="-1870662827894286800" onmouseenter="enter('-1870662827894286800');" onmouseout="out('-1870662827894286800');" style="">1140         this.entityValidatorService = entityValidatorService;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1141     }                                                                                                    </span>
<span  style="">1142                                                                                                          </span>
<span class="-1748543627179535834" onmouseenter="enter('-1748543627179535834');" onmouseout="out('-1748543627179535834');" style="">1143     public RestrictionFactory getRestrictionFactory() {                                                  </span>
<span class="3824148827663415229" onmouseenter="enter('3824148827663415229');" onmouseout="out('3824148827663415229');" style="">1144         return restrictionFactory;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1145     }                                                                                                    </span>
<span  style="">1146                                                                                                          </span>
<span class="-2008652971927118074" onmouseenter="enter('-2008652971927118074');" onmouseout="out('-2008652971927118074');" style="">1147     public void setRestrictionFactory(RestrictionFactory restrictionFactory) {                           </span>
<span class="2351646543947184406" onmouseenter="enter('2351646543947184406');" onmouseout="out('2351646543947184406');" style="">1148         this.restrictionFactory = restrictionFactory;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149     }                                                                                                    </span>
<span  style="">1150                                                                                                          </span>
<span class="-5029713949712177492" onmouseenter="enter('-5029713949712177492');" onmouseout="out('-5029713949712177492');" style="">1151     public PersistenceManager getPersistenceManager() {                                                  </span>
<span class="238620838116623116" onmouseenter="enter('238620838116623116');" onmouseout="out('238620838116623116');" style="">1152         return persistenceManager;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1153     }                                                                                                    </span>
<span  style="">1154                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1155     /**                                                                                                  </span>
<span class="-5659125667278957327" onmouseenter="enter('-5659125667278957327');" onmouseout="out('-5659125667278957327');" style=""><abbr title="1156      * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable object. Related">1156      * Use an alternate approach to generating a fetch query for a collection located inside of an @EmbedðŸ”µ</abbr></span>
<span class="4561034045985117681" onmouseenter="enter('4561034045985117681');" onmouseout="out('4561034045985117681');" style=""><abbr title="1157      * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA criteria,">1157      * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather thðŸ”µ</abbr></span>
<span class="6419934548242517763" onmouseenter="enter('6419934548242517763');" onmouseout="out('6419934548242517763');" style="">1158      * which seems to alleviate the problem.                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1159      *                                                                                                   </span>
<span class="-2077216329372670" onmouseenter="enter('-2077216329372670');" onmouseout="out('-2077216329372670');" style="">1160      * @param embeddedCollectionPath the path to the collection field itself                             </span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1161      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="500285512782550604" onmouseenter="enter('500285512782550604');" onmouseout="out('500285512782550604');" style="">1162      * @param collectionClass the type of the collection members                                         </span>
<span class="-124687443674998826" onmouseenter="enter('-124687443674998826');" onmouseout="out('-124687443674998826');" style="">1163      * @return the builder capable of generating an appropriate HQL query                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1164      */                                                                                                  </span>
<span class="318950424073468037" onmouseenter="enter('318950424073468037');" onmouseout="out('318950424073468037');" style=""><abbr title="1165     protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings, String collectionClass) {">1165     protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMðŸ”µ</abbr></span>
<span class="6393444935626899139" onmouseenter="enter('6393444935626899139');" onmouseout="out('6393444935626899139');" style="">1166         String specialPath = embeddedCollectionPath.getTargetProperty();                                 </span>
<span class="-5143159997305327734" onmouseenter="enter('-5143159997305327734');" onmouseout="out('-5143159997305327734');" style="">1167         String[] pieces = specialPath.split(&quot;\\.&quot;);                                                      </span>
<span class="5217253633788863143" onmouseenter="enter('5217253633788863143');" onmouseout="out('5217253633788863143');" style="">1168         if (pieces.length != 3) {                                                                        </span>
<span class="849365765552848208" onmouseenter="enter('849365765552848208');" onmouseout="out('849365765552848208');" style=""><abbr title="1169             throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embedded field].[collection field].[property] for the embedded collection path (%s)&quot;, specialPath), embeddedCollectionPath);">1169             throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of foðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170         }                                                                                                </span>
<span class="-8198781854964897228" onmouseenter="enter('-8198781854964897228');" onmouseout="out('-8198781854964897228');" style="">1171         String expression = specialPath.substring(0, specialPath.lastIndexOf(&quot;.&quot;));                      </span>
<span class="7643896692389749892" onmouseenter="enter('7643896692389749892');" onmouseout="out('7643896692389749892');" style="">1172         TypedQueryBuilder builder;                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1173         try {                                                                                            </span>
<span class="-3418087850184102775" onmouseenter="enter('-3418087850184102775');" onmouseout="out('-3418087850184102775');" style=""><abbr title="1174             builder = new TypedQueryBuilder(Class.forName(collectionClass), &quot;specialEntity&quot;).addJoin(new TQJoin(&quot;specialEntity.&quot; + expression, &quot;embeddedCollection&quot;));">1174             builder = new TypedQueryBuilder(Class.forName(collectionClass), &quot;specialEntity&quot;).addJoin(new ðŸ”µ</abbr></span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">1175         } catch (java.lang.Exception e) {                                                                </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style="">1176             throw ExceptionHelper.refineException(e);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1177         }                                                                                                </span>
<span class="-3537338773035059274" onmouseenter="enter('-3537338773035059274');" onmouseout="out('-3537338773035059274');" style="">1178         for (TQRestriction restriction : buildSpecialRestrictions(expression, filterMappings)) {         </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1179             builder = builder.addRestriction(restriction);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180         }                                                                                                </span>
<span class="-3768831820353648531" onmouseenter="enter('-3768831820353648531');" onmouseout="out('-3768831820353648531');" style=""><abbr title="1181         for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappings)) {">1181         for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappingsðŸ”µ</abbr></span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1182             builder = builder.addRestriction(restriction);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1183         }                                                                                                </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1184         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="-4604402569484224232" onmouseenter="enter('-4604402569484224232');" onmouseout="out('-4604402569484224232');" style="">1185             if (mapping.getSortDirection() != null) {                                                    </span>
<span class="-1365516568891359032" onmouseenter="enter('-1365516568891359032');" onmouseout="out('-1365516568891359032');" style=""><abbr title="1186                 String mappingProperty = (mapping.getFieldPath() == null) ? null : mapping.getFieldPath().getTargetProperty();">1186                 String mappingProperty = (mapping.getFieldPath() == null) ? null : mapping.getFieldPath()ðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1187                 if (StringUtils.isEmpty(mappingProperty)) {                                              </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1188                     mappingProperty = mapping.getFullPropertyName();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1189                 }                                                                                        </span>
<span class="-8248548206415810836" onmouseenter="enter('-8248548206415810836');" onmouseout="out('-8248548206415810836');" style=""><abbr title="1190                 builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDING == mapping.getSortDirection()));">1190                 builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1192         }                                                                                                </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style="">1193         return builder;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194     }                                                                                                    </span>
<span  style="">1195                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1196     /**                                                                                                  </span>
<span class="-8346746296837651477" onmouseenter="enter('-8346746296837651477');" onmouseout="out('-8346746296837651477');" style=""><abbr title="1197      * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collection field in the @Embeddable object)">1197      * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not theðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1198      *                                                                                                   </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1199      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1199      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.moduleðŸ”µ</abbr></span>
<span class="6692178223307224172" onmouseenter="enter('6692178223307224172');" onmouseout="out('6692178223307224172');" style=""><abbr title="1200      * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caused the whole thing">1200      * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this iðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1201      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="-357236726942159378" onmouseenter="enter('-357236726942159378');" onmouseout="out('-357236726942159378');" style="">1202      * @return the list of restrictions on the root entity                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1203      */                                                                                                  </span>
<span class="-85615873681846318" onmouseenter="enter('-85615873681846318');" onmouseout="out('-85615873681846318');" style=""><abbr title="1204     protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings) {">1204     protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterðŸ”µ</abbr></span>
<span class="-1692895948334038289" onmouseenter="enter('-1692895948334038289');" onmouseout="out('-1692895948334038289');" style=""><abbr title="1205         String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargetProperty().lastIndexOf(&quot;.&quot;));">1205         String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPatðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1206         List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                               </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1207         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="4178758118598554907" onmouseenter="enter('4178758118598554907');" onmouseout="out('4178758118598554907');" style="">1208             checkProperty : {                                                                            </span>
<span class="-1365516568891359032" onmouseenter="enter('-1365516568891359032');" onmouseout="out('-1365516568891359032');" style=""><abbr title="1209                 String mappingProperty = (mapping.getFieldPath() == null) ? null : mapping.getFieldPath().getTargetProperty();">1209                 String mappingProperty = (mapping.getFieldPath() == null) ? null : mapping.getFieldPath()ðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1210                 if (StringUtils.isEmpty(mappingProperty)) {                                              </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1211                     mappingProperty = mapping.getFullPropertyName();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1212                 }                                                                                        </span>
<span class="3246436473353089511" onmouseenter="enter('3246436473353089511');" onmouseout="out('3246436473353089511');" style=""><abbr title="1213                 if ((!embeddedCollectionPath.getTargetProperty().equals(mappingProperty)) &amp;&amp; (!StringUtils.isEmpty(mappingProperty))) {">1213                 if ((!embeddedCollectionPath.getTargetProperty().equals(mappingProperty)) &amp;&amp; (!StringUtilðŸ”µ</abbr></span>
<span class="-9008982404255839640" onmouseenter="enter('-9008982404255839640');" onmouseout="out('-9008982404255839640');" style=""><abbr title="1214                     PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider();">1214                     PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider()ðŸ”µ</abbr></span>
<span class="-3527643591612301478" onmouseenter="enter('-3527643591612301478');" onmouseout="out('-3527643591612301478');" style="">1215                     if (predicateProvider != null) {                                                     </span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style=""><abbr title="1216                         FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();">1216                         FilterValueConverter converter = mapping.getRestriction().getFilterValueConverterðŸ”µ</abbr></span>
<span class="2828712592765886814" onmouseenter="enter('2828712592765886814');" onmouseout="out('2828712592765886814');" style=""><abbr title="1217                         if ((converter != null) &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {">1217                         if ((converter != null) &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues()))ðŸ”µ</abbr></span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1218                             Object val = converter.convert(mapping.getFilterValues().get(0));            </span>
<span class="4919121251037931163" onmouseenter="enter('4919121251037931163');" onmouseout="out('4919121251037931163');" style="">1219                             if (predicateProvider instanceof LikePredicateProvider) {                    </span>
<span class="-1773061400470981891" onmouseenter="enter('-1773061400470981891');" onmouseout="out('-1773061400470981891');" style=""><abbr title="1220                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, val + &quot;%&quot;));">1220                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1221                                 break checkProperty;                                                     </span>
<span class="8904766331581746771" onmouseenter="enter('8904766331581746771');" onmouseout="out('8904766331581746771');" style="">1222                             } else if (predicateProvider instanceof EqPredicateProvider) {               </span>
<span class="1134572960833745712" onmouseenter="enter('1134572960833745712');" onmouseout="out('1134572960833745712');" style=""><abbr title="1223                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=&quot;, val));">1223                                 restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=ðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1224                                 break checkProperty;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1225                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1226                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1227                     }                                                                                    </span>
<span class="7092560648886274919" onmouseenter="enter('7092560648886274919');" onmouseout="out('7092560648886274919');" style=""><abbr title="1228                     LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional property (%s)&quot;, StringUtil.sanitize(expression), StringUtil.sanitize(mappingProperty)));">1228                     LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additionaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1230             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1231         }                                                                                                </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1232         return restrictions;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233     }                                                                                                    </span>
<span  style="">1234                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1235     /**                                                                                                  </span>
<span class="2167663911523579684" onmouseenter="enter('2167663911523579684');" onmouseout="out('2167663911523579684');" style=""><abbr title="1236      * Generate EQUALS restrictions for any filter property specified on the entity member of the collection field in the @Embeddable object">1236      * Generate EQUALS restrictions for any filter property specified on the entity member of the collectðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1237      *                                                                                                   </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1238      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1238      * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.moduleðŸ”µ</abbr></span>
<span class="-9017749716487851104" onmouseenter="enter('-9017749716487851104');" onmouseout="out('-9017749716487851104');" style=""><abbr title="1239      * @param specialExpression the String representation of the path for the collection field in the @Embeddable object">1239      * @param specialExpression the String representation of the path for the collection field in the @EmðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1240      * @param filterMappings all the fetch restrictions for this request                                 </span>
<span class="3793893128909469910" onmouseenter="enter('3793893128909469910');" onmouseout="out('3793893128909469910');" style="">1241      * @return the list of restrictions on the collection in the @Embeddable object                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1242      */                                                                                                  </span>
<span class="-1807551435758383985" onmouseenter="enter('-1807551435758383985');" onmouseout="out('-1807551435758383985');" style=""><abbr title="1243     protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMappings) {">1243     protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; ðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1244         List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                               </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1245         for (FilterMapping mapping : filterMappings) {                                                   </span>
<span class="-5273458843713330250" onmouseenter="enter('-5273458843713330250');" onmouseout="out('-5273458843713330250');" style=""><abbr title="1246             if (((mapping.getFieldPath() != null) &amp;&amp; (mapping.getFieldPath().getTargetProperty() != null)) &amp;&amp; mapping.getFieldPath().getTargetProperty().startsWith(specialExpression)) {">1246             if (((mapping.getFieldPath() != null) &amp;&amp; (mapping.getFieldPath().getTargetProperty() != null)ðŸ”µ</abbr></span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1247                 FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();     </span>
<span class="2828712592765886814" onmouseenter="enter('2828712592765886814');" onmouseout="out('2828712592765886814');" style="">1248                 if ((converter != null) &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {      </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1249                     Object val = converter.convert(mapping.getFilterValues().get(0));                    </span>
<span class="-3185664653595577967" onmouseenter="enter('-3185664653595577967');" onmouseout="out('-3185664653595577967');" style=""><abbr title="1250                     String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().getTargetProperty().lastIndexOf(&quot;.&quot;) + 1, mapping.getFieldPath().getTargetProperty().length());">1250                     String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieðŸ”µ</abbr></span>
<span class="6515773652350530653" onmouseenter="enter('6515773652350530653');" onmouseout="out('6515773652350530653');" style="">1251                     restrictions.add(new TQRestriction(&quot;embeddedCollection.&quot; + property, &quot;=&quot;, val));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1252                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254         }                                                                                                </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1255         return restrictions;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1256     }                                                                                                    </span>
<span  style="">1257                                                                                                          </span>
<span class="-1847859638489008561" onmouseenter="enter('-1847859638489008561');" onmouseout="out('-1847859638489008561');" style="">1258     protected void cleanupFailedPersistenceAttempt(Serializable instance) throws IllegalAccessException {</span>
<span class="-761178418461683406" onmouseenter="enter('-761178418461683406');" onmouseout="out('-761178418461683406');" style="">1259         //Remove the entity from ORM management - no further attempts to persist                         </span>
<span class="-8509958237563709196" onmouseenter="enter('-8509958237563709196');" onmouseout="out('-8509958237563709196');" style=""><abbr title="1260         if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) {">1260         if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) ðŸ”µ</abbr></span>
<span class="-8381574259703143566" onmouseenter="enter('-8381574259703143566');" onmouseout="out('-8381574259703143566');" style="">1261             getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().detach(instance);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262         }                                                                                                </span>
<span class="7196727024368525589" onmouseenter="enter('7196727024368525589');" onmouseout="out('7196727024368525589');" style="">1263         //Remove the id field value, if it&#x27;s set                                                         </span>
<span class="-8963497040678265373" onmouseenter="enter('-8963497040678265373');" onmouseout="out('-8963497040678265373');" style=""><abbr title="1264         String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClass()).get(&quot;name&quot;);">1264         String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instancðŸ”µ</abbr></span>
<span class="-7813482713010008669" onmouseenter="enter('-7813482713010008669');" onmouseout="out('-7813482713010008669');" style="">1265         Field idField = FieldUtils.getField(instance.getClass(), idFieldName, true);                     </span>
<span class="-5694238240637206409" onmouseenter="enter('-5694238240637206409');" onmouseout="out('-5694238240637206409');" style="">1266         if (idField == null) {                                                                           </span>
<span class="6113500709945049507" onmouseenter="enter('6113500709945049507');" onmouseout="out('6113500709945049507');" style=""><abbr title="1267             throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getName() + &quot; does not contain id field &quot; + idFieldName));">1267             throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1268         }                                                                                                </span>
<span class="7965871812340203707" onmouseenter="enter('7965871812340203707');" onmouseout="out('7965871812340203707');" style="">1269         idField.setAccessible(true);                                                                     </span>
<span class="-5148613654387121426" onmouseenter="enter('-5148613654387121426');" onmouseout="out('-5148613654387121426');" style="">1270         if (idField.get(instance) != null) {                                                             </span>
<span class="-3149499430961766795" onmouseenter="enter('-3149499430961766795');" onmouseout="out('-3149499430961766795');" style="">1271             idField.set(instance, null);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273     }                                                                                                    </span>
<span  style="">1274                                                                                                          </span>
<span class="361057059065324955" onmouseenter="enter('361057059065324955');" onmouseout="out('361057059065324955');" style=""><abbr title="1275     protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property property) {">1275     protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property propertðŸ”µ</abbr></span>
<span class="1752551688027428994" onmouseenter="enter('1752551688027428994');" onmouseout="out('1752551688027428994');" style="">1276         Class&lt;?&gt; returnType = null;                                                                      </span>
<span class="3738304511666335991" onmouseenter="enter('3738304511666335991');" onmouseout="out('3738304511666335991');" style=""><abbr title="1277         Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName().indexOf(FieldManager.MAPFIELDSEPARATOR)));">1277         Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, propertyðŸ”µ</abbr></span>
<span class="5464468769050206957" onmouseenter="enter('5464468769050206957');" onmouseout="out('5464468769050206957');" style="">1278         java.lang.reflect.Type type = field.getGenericType();                                            </span>
<span class="-6389298272813932854" onmouseenter="enter('-6389298272813932854');" onmouseout="out('-6389298272813932854');" style="">1279         if (type instanceof ParameterizedType) {                                                         </span>
<span class="-6709038845954129207" onmouseenter="enter('-6709038845954129207');" onmouseout="out('-6709038845954129207');" style="">1280             ParameterizedType pType = ((ParameterizedType) (type));                                      </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style="">1281             Class&lt;?&gt; clazz;                                                                              </span>
<span class="7069691481162074648" onmouseenter="enter('7069691481162074648');" onmouseout="out('7069691481162074648');" style="">1282             if (pType.getActualTypeArguments().length &lt; 2) {                                             </span>
<span class="3405725510929758931" onmouseenter="enter('3405725510929758931');" onmouseout="out('3405725510929758931');" style="">1283                 clazz = ((Class&lt;?&gt;) (pType.getActualTypeArguments()[0]));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1284             } else {                                                                                     </span>
<span class="-5796622521841635218" onmouseenter="enter('-5796622521841635218');" onmouseout="out('-5796622521841635218');" style="">1285                 clazz = ((Class&lt;?&gt;) (pType.getActualTypeArguments()[1]));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1286             }                                                                                            </span>
<span class="2546721200619882801" onmouseenter="enter('2546721200619882801');" onmouseout="out('2546721200619882801');" style=""><abbr title="1287             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clazz);">1287             Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCðŸ”µ</abbr></span>
<span class="5482192784237496931" onmouseenter="enter('5482192784237496931');" onmouseout="out('5482192784237496931');" style="">1288             if (!ArrayUtils.isEmpty(entities)) {                                                         </span>
<span class="4302056969260211006" onmouseenter="enter('4302056969260211006');" onmouseout="out('4302056969260211006');" style="">1289                 returnType = entities[entities.length - 1];                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1290             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1291         }                                                                                                </span>
<span class="7163755908227734414" onmouseenter="enter('7163755908227734414');" onmouseout="out('7163755908227734414');" style="">1292         return returnType;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1293     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294 }                                                                                                        </span>













































































































































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3   * BroadleafCommerce Open Admin Platform                                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span  style="">  18                                                                                                                    </span>
<span class="-3730395872919143110" onmouseenter="enter('-3730395872919143110');" onmouseout="out('-3730395872919143110');" style="">  19  package org.broadleafcommerce.openadmin.server.service.persistence.module;                                        </span>
<span  style="">  20                                                                                                                    </span>
<span class="6585399145259537123" onmouseenter="enter('6585399145259537123');" onmouseout="out('6585399145259537123');" style="">  21  import org.apache.commons.beanutils.PropertyUtils;                                                                </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  22  import org.apache.commons.collections.CollectionUtils;                                                            </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  23  import org.apache.commons.lang.ArrayUtils;                                                                        </span>
<span class="7952073036463698968" onmouseenter="enter('7952073036463698968');" onmouseout="out('7952073036463698968');" style="">  24  import org.apache.commons.lang.StringUtils;                                                                       </span>
<span class="-4811768396919678325" onmouseenter="enter('-4811768396919678325');" onmouseout="out('-4811768396919678325');" style="">  25  import org.apache.commons.lang3.BooleanUtils;                                                                     </span>
<span class="-4496642532189438643" onmouseenter="enter('-4496642532189438643');" onmouseout="out('-4496642532189438643');" style="">  26  import org.apache.commons.lang3.reflect.FieldUtils;                                                               </span>
<span class="-7494130924703435694" onmouseenter="enter('-7494130924703435694');" onmouseout="out('-7494130924703435694');" style="">  27  import org.apache.commons.lang3.reflect.MethodUtils;                                                              </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  28  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  29  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  30  import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                                 </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  31  import org.broadleafcommerce.common.exception.ExceptionHelper;                                                    </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  32  import org.broadleafcommerce.common.exception.SecurityServiceException;                                           </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  33  import org.broadleafcommerce.common.exception.ServiceException;                                                   </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  34  import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                              </span>
<span class="-274639712180431568" onmouseenter="enter('-274639712180431568');" onmouseout="out('-274639712180431568');" style="">  35  import org.broadleafcommerce.common.money.Money;                                                                  </span>
<span class="-212317658512913375" onmouseenter="enter('-212317658512913375');" onmouseout="out('-212317658512913375');" style="">  36  import org.broadleafcommerce.common.presentation.client.OperationType;                                            </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  37  import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                           </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  38  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                                       </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  39  import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                           </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  40  import org.broadleafcommerce.common.util.FormatUtil;                                                              </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  41  import org.broadleafcommerce.common.util.StringUtil;                                                              </span>
<span class="-2926793360365808281" onmouseenter="enter('-2926793360365808281');" onmouseout="out('-2926793360365808281');" style="">  42  import org.broadleafcommerce.common.util.ValidationUtil;                                                          </span>
<span class="7948666462039628690" onmouseenter="enter('7948666462039628690');" onmouseout="out('7948666462039628690');" style="">  43  import org.broadleafcommerce.common.util.dao.TQJoin;                                                              </span>
<span class="4569891227290901556" onmouseenter="enter('4569891227290901556');" onmouseout="out('4569891227290901556');" style="">  44  import org.broadleafcommerce.common.util.dao.TQOrder;                                                             </span>
<span class="2808183798288001053" onmouseenter="enter('2808183798288001053');" onmouseout="out('2808183798288001053');" style="">  45  import org.broadleafcommerce.common.util.dao.TQRestriction;                                                       </span>
<span class="8922526534929083638" onmouseenter="enter('8922526534929083638');" onmouseout="out('8922526534929083638');" style="">  46  import org.broadleafcommerce.common.util.dao.TypedQueryBuilder;                                                   </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  47  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  48 -import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                                    </span>
<span class="-8970007776478821592" onmouseenter="enter('-8970007776478821592');" onmouseout="out('-8970007776478821592');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  49 -import org.broadleafcommerce.openadmin.dto.CriteriaTransferObject;                                                </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  50 -import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                                      </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  51 -import org.broadleafcommerce.openadmin.dto.Entity;                                                                </span>
<span class="-3504337137222904883" onmouseenter="enter('-3504337137222904883');" onmouseout="out('-3504337137222904883');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  52 -import org.broadleafcommerce.openadmin.dto.EntityResult;                                                          </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  53 -import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                         </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  54 -import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                                 </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  55 -import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                            </span>
<span class="7333603239996951733" onmouseenter="enter('7333603239996951733');" onmouseout="out('7333603239996951733');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  56 -import org.broadleafcommerce.openadmin.dto.MergedPropertyType;                                                    </span>
<span class="5387066876064049952" onmouseenter="enter('5387066876064049952');" onmouseout="out('5387066876064049952');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  57 -import org.broadleafcommerce.openadmin.dto.PersistencePackage;                                                    </span>
<span class="8079401142601162613" onmouseenter="enter('8079401142601162613');" onmouseout="out('8079401142601162613');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  58 -import org.broadleafcommerce.openadmin.dto.PersistencePerspective;                                                </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  59 -import org.broadleafcommerce.openadmin.dto.Property;                                                              </span>
<span class="-3940598810559639452" onmouseenter="enter('-3940598810559639452');" onmouseout="out('-3940598810559639452');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  60 -import org.broadleafcommerce.openadmin.dto.SortDirection;                                                         </span>
<span class="-9032655456699873894" onmouseenter="enter('-9032655456699873894');" onmouseout="out('-9032655456699873894');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  61 +import org.broadleafcommerce.openadmin.dto.*;                                                                     </span>
<span class="-2518486623699289546" onmouseenter="enter('-2518486623699289546');" onmouseout="out('-2518486623699289546');" style="">  62  import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvider;      </span>
<span class="-3305750562841405447" onmouseenter="enter('-3305750562841405447');" onmouseout="out('-3305750562841405447');" style="">  63  import org.broadleafcommerce.openadmin.server.service.ValidationException;                                        </span>
<span class="8378385081764163459" onmouseenter="enter('8378385081764163459');" onmouseout="out('8378385081764163459');" style="">  64  import org.broadleafcommerce.openadmin.server.service.persistence.ParentEntityPersistenceException;               </span>
<span class="5722165468172421658" onmouseenter="enter('5722165468172421658');" onmouseout="out('5722165468172421658');" style="">  65  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceException;                           </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  66  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                             </span>
<span class="-1323272794227318551" onmouseenter="enter('-1323272794227318551');" onmouseout="out('-1323272794227318551');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  67 -import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaConversionException;    </span>
<span class="-4125327013079009203" onmouseenter="enter('-4125327013079009203');" onmouseout="out('-4125327013079009203');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  68 -import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaTranslator;             </span>
<span class="7637154476457570035" onmouseenter="enter('7637154476457570035');" onmouseout="out('7637154476457570035');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  69 -import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath;                      </span>
<span class="7520439988643323618" onmouseenter="enter('7520439988643323618');" onmouseout="out('7520439988643323618');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  70 -import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FilterMapping;                  </span>
<span class="-4250688222066528552" onmouseenter="enter('-4250688222066528552');" onmouseout="out('-4250688222066528552');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  71 -import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.RestrictionFactory;             </span>
<span class="5058784187408591906" onmouseenter="enter('5058784187408591906');" onmouseout="out('5058784187408591906');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  72 +import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.*;                              </span>
<span class="-481493864845228243" onmouseenter="enter('-481493864845228243');" onmouseout="out('-481493864845228243');" style="">  73  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueConverter; </span>
<span class="2179480323999346530" onmouseenter="enter('2179480323999346530');" onmouseout="out('2179480323999346530');" style="">  74  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicateProvider;  </span>
<span class="8659565314530832704" onmouseenter="enter('8659565314530832704');" onmouseout="out('8659565314530832704');" style="">  75  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateProvider;</span>
<span class="2225343043491731861" onmouseenter="enter('2225343043491731861');" onmouseout="out('2225343043491731861');" style="">  76  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvider;    </span>
<span class="1619823169108097395" onmouseenter="enter('1619823169108097395');" onmouseout="out('1619823169108097395');" style=""><abbr title="  77  import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionManager;">  77  import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionðŸ”µ</abbr></span>
<span class="2027605662300607419" onmouseenter="enter('2027605662300607419');" onmouseout="out('2027605662300607419');" style="">  78  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvider;       </span>
<span class="-4946286896488271959" onmouseenter="enter('-4946286896488271959');" onmouseout="out('-4946286896488271959');" style=""><abbr title="  79  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequest;">  79  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequeðŸ”µ</abbr></span>
<span class="-2189126569880350667" onmouseenter="enter('-2189126569880350667');" onmouseout="out('-2189126569880350667');" style="">  80  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappingRequest;</span>
<span class="6456213336650879315" onmouseenter="enter('6456213336650879315');" onmouseout="out('6456213336650879315');" style="">  81  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueRequest;    </span>
<span class="7338762877284211273" onmouseenter="enter('7338762877284211273');" onmouseout="out('7338762877284211273');" style="">  82  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueRequest;   </span>
<span class="4906254842317893740" onmouseenter="enter('4906254842317893740');" onmouseout="out('4906254842317893740');" style="">  83  import org.broadleafcommerce.openadmin.server.service.persistence.validation.EntityValidatorService;              </span>
<span class="375927524796533683" onmouseenter="enter('375927524796533683');" onmouseout="out('375927524796533683');" style="">  84  import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidator;       </span>
<span class="3919265641981654464" onmouseenter="enter('3919265641981654464');" onmouseout="out('3919265641981654464');" style="">  85  import org.broadleafcommerce.openadmin.server.service.persistence.validation.PropertyValidationResult;            </span>
<span class="5692608280904331276" onmouseenter="enter('5692608280904331276');" onmouseout="out('5692608280904331276');" style="">  86  import org.broadleafcommerce.openadmin.server.service.type.MetadataProviderResponse;                              </span>
<span class="3891204800073608559" onmouseenter="enter('3891204800073608559');" onmouseout="out('3891204800073608559');" style="">  87  import org.hibernate.FlushMode;                                                                                   </span>
<span class="-1504015732959009083" onmouseenter="enter('-1504015732959009083');" onmouseout="out('-1504015732959009083');" style="">  88  import org.hibernate.Session;                                                                                     </span>
<span class="-6968089101617569818" onmouseenter="enter('-6968089101617569818');" onmouseout="out('-6968089101617569818');" style="">  89  import org.springframework.beans.BeansException;                                                                  </span>
<span class="1015650858128177541" onmouseenter="enter('1015650858128177541');" onmouseout="out('1015650858128177541');" style="">  90  import org.springframework.context.ApplicationContext;                                                            </span>
<span class="5490156850800899437" onmouseenter="enter('5490156850800899437');" onmouseout="out('5490156850800899437');" style="">  91  import org.springframework.context.ApplicationContextAware;                                                       </span>
<span class="1179989609458797828" onmouseenter="enter('1179989609458797828');" onmouseout="out('1179989609458797828');" style="">  92  import org.springframework.context.annotation.Primary;                                                            </span>
<span class="2368474895564125270" onmouseenter="enter('2368474895564125270');" onmouseout="out('2368474895564125270');" style="">  93  import org.springframework.context.annotation.Scope;                                                              </span>
<span class="8406454220154166073" onmouseenter="enter('8406454220154166073');" onmouseout="out('8406454220154166073');" style="">  94  import org.springframework.stereotype.Component;                                                                  </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="">  95  import org.springframework.util.Assert;                                                                           </span>
<span  style="">  96                                                                                                                    </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  97 +import javax.annotation.PostConstruct;                                                                            </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  98 +import javax.annotation.Resource;                                                                                 </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="">  99  import java.io.Serializable;                                                                                      </span>
<span class="507320133330553151" onmouseenter="enter('507320133330553151');" onmouseout="out('507320133330553151');" style=""> 100  import java.lang.reflect.Field;                                                                                   </span>
<span class="5727252987923913" onmouseenter="enter('5727252987923913');" onmouseout="out('5727252987923913');" style=""> 101  import java.lang.reflect.InvocationTargetException;                                                               </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style=""> 102  import java.lang.reflect.Method;                                                                                  </span>
<span class="347575814667778087" onmouseenter="enter('347575814667778087');" onmouseout="out('347575814667778087');" style=""> 103  import java.lang.reflect.ParameterizedType;                                                                       </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style=""> 104  import java.math.BigDecimal;                                                                                      </span>
<span class="-8993555010225969077" onmouseenter="enter('-8993555010225969077');" onmouseout="out('-8993555010225969077');" style=""> 105  import java.sql.Timestamp;                                                                                        </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style=""> 106  import java.text.DecimalFormat;                                                                                   </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style=""> 107  import java.text.NumberFormat;                                                                                    </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style=""> 108  import java.text.SimpleDateFormat;                                                                                </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 109 -import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 110 -import java.util.Arrays;                                                                                          </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 111 -import java.util.Calendar;                                                                                        </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 112 -import java.util.Collection;                                                                                      </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 113 -import java.util.Collections;                                                                                     </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 114 -import java.util.Comparator;                                                                                      </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 115 -import java.util.Date;                                                                                            </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 116 -import java.util.HashMap;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 117 -import java.util.List;                                                                                            </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 118 -import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 119 -import java.util.Map;                                                                                             </span>
<span class="196713859697444637" onmouseenter="enter('196713859697444637');" onmouseout="out('196713859697444637');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 120 +import java.util.*;                                                                                               </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 121  import java.util.Map.Entry;                                                                                       </span>
<span class="-61738751204335518" onmouseenter="enter('-61738751204335518');" onmouseout="out('-61738751204335518');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 122 -import java.util.StringTokenizer;                                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 123 -                                                                                                                  </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 124 -import javax.annotation.PostConstruct;                                                                            </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 125 -import javax.annotation.Resource;                                                                                 </span>
<span  style=""> 126                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 127  /**                                                                                                               </span>
<span class="3104529581940833663" onmouseenter="enter('3104529581940833663');" onmouseout="out('3104529581940833663');" style=""> 128   * @author jfischer                                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 129   */                                                                                                               </span>
<span class="7759015212035044666" onmouseenter="enter('7759015212035044666');" onmouseout="out('7759015212035044666');" style=""> 130  @Primary                                                                                                          </span>
<span class="1694546414662202322" onmouseenter="enter('1694546414662202322');" onmouseout="out('1694546414662202322');" style=""> 131  @Component(&quot;blBasicPersistenceModule&quot;)                                                                            </span>
<span class="-3657083271113190387" onmouseenter="enter('-3657083271113190387');" onmouseout="out('-3657083271113190387');" style=""> 132  @Scope(&quot;prototype&quot;)                                                                                               </span>
<span class="-7916582208788778889" onmouseenter="enter('-7916582208788778889');" onmouseout="out('-7916582208788778889');" style=""> 133  public class BasicPersistenceModule implements PersistenceModule, RecordHelper, ApplicationContextAware {         </span>
<span  style=""> 134                                                                                                                    </span>
<span class="8379422291463370013" onmouseenter="enter('8379422291463370013');" onmouseout="out('8379422291463370013');" style=""> 135      private static final Log LOG = LogFactory.getLog(BasicPersistenceModule.class);                               </span>
<span  style=""> 136                                                                                                                    </span>
<span class="-381692932666242814" onmouseenter="enter('-381692932666242814');" onmouseout="out('-381692932666242814');" style=""> 137      public static final String MAIN_ENTITY_NAME_PROPERTY = &quot;MAIN_ENTITY_NAME&quot;;                                    </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 138      public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                            </span>
<span  style=""> 139                                                                                                                    </span>
<span class="-4770133548193901777" onmouseenter="enter('-4770133548193901777');" onmouseout="out('-4770133548193901777');" style=""> 140      protected ApplicationContext applicationContext;                                                              </span>
<span class="-6488622702665536176" onmouseenter="enter('-6488622702665536176');" onmouseout="out('-6488622702665536176');" style=""> 141      protected PersistenceManager persistenceManager;                                                              </span>
<span  style=""> 142                                                                                                                    </span>
<span class="4305095825338649553" onmouseenter="enter('4305095825338649553');" onmouseout="out('4305095825338649553');" style=""> 143      @Resource(name = &quot;blEntityValidatorService&quot;)                                                                  </span>
<span class="-2556035380928716519" onmouseenter="enter('-2556035380928716519');" onmouseout="out('-2556035380928716519');" style=""> 144      protected EntityValidatorService entityValidatorService;                                                      </span>
<span  style=""> 145                                                                                                                    </span>
<span class="6167230228674564015" onmouseenter="enter('6167230228674564015');" onmouseout="out('6167230228674564015');" style=""> 146      @Resource(name = &quot;blPersistenceProviders&quot;)                                                                    </span>
<span class="5197193686792056094" onmouseenter="enter('5197193686792056094');" onmouseout="out('5197193686792056094');" style=""><abbr title=" 147      protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;();"> 147      protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;()ðŸ”µ</abbr></span>
<span  style=""> 148                                                                                                                    </span>
<span class="6566976708558343402" onmouseenter="enter('6566976708558343402');" onmouseout="out('6566976708558343402');" style=""> 149      @Resource(name = &quot;blPopulateValueRequestValidators&quot;)                                                          </span>
<span class="8688460549992818244" onmouseenter="enter('8688460549992818244');" onmouseout="out('8688460549992818244');" style=""> 150      protected List&lt;PopulateValueRequestValidator&gt; populateValidators;                                             </span>
<span  style=""> 151                                                                                                                    </span>
<span class="2226562240918510507" onmouseenter="enter('2226562240918510507');" onmouseout="out('2226562240918510507');" style=""> 152      @Resource(name = &quot;blDefaultFieldPersistenceProvider&quot;)                                                         </span>
<span class="3736553406868276704" onmouseenter="enter('3736553406868276704');" onmouseout="out('3736553406868276704');" style=""> 153      protected FieldPersistenceProvider defaultFieldPersistenceProvider;                                           </span>
<span  style=""> 154                                                                                                                    </span>
<span class="-2696154002193407400" onmouseenter="enter('-2696154002193407400');" onmouseout="out('-2696154002193407400');" style=""> 155      @Resource(name = &quot;blCriteriaTranslator&quot;)                                                                      </span>
<span class="6548648040486234931" onmouseenter="enter('6548648040486234931');" onmouseout="out('6548648040486234931');" style=""> 156      protected CriteriaTranslator criteriaTranslator;                                                              </span>
<span  style=""> 157                                                                                                                    </span>
<span class="-4636653885273856120" onmouseenter="enter('-4636653885273856120');" onmouseout="out('-4636653885273856120');" style=""> 158      @Resource(name = &quot;blRestrictionFactory&quot;)                                                                      </span>
<span class="-4515285046595655523" onmouseenter="enter('-4515285046595655523');" onmouseout="out('-4515285046595655523');" style=""> 159      protected RestrictionFactory restrictionFactory;                                                              </span>
<span  style=""> 160                                                                                                                    </span>
<span class="2099612267381053384" onmouseenter="enter('2099612267381053384');" onmouseout="out('2099612267381053384');" style=""> 161      @Resource(name = &quot;blBasicPersistenceModuleExtensionManager&quot;)                                                  </span>
<span class="4348825311931369098" onmouseenter="enter('4348825311931369098');" onmouseout="out('4348825311931369098');" style=""> 162      protected BasicPersistenceModuleExtensionManager extensionManager;                                            </span>
<span  style=""> 163                                                                                                                    </span>
<span class="3131053547948330670" onmouseenter="enter('3131053547948330670');" onmouseout="out('3131053547948330670');" style=""> 164      @Resource(name = &quot;blFetchWrapper&quot;)                                                                            </span>
<span class="-359674182981681110" onmouseenter="enter('-359674182981681110');" onmouseout="out('-359674182981681110');" style=""> 165      protected FetchWrapper fetchWrapper;                                                                          </span>
<span  style=""> 166                                                                                                                    </span>
<span class="-5680397040643859011" onmouseenter="enter('-5680397040643859011');" onmouseout="out('-5680397040643859011');" style=""> 167      @PostConstruct                                                                                                </span>
<span class="-5421613521494184453" onmouseenter="enter('-5421613521494184453');" onmouseout="out('-5421613521494184453');" style=""> 168      public void init() {                                                                                          </span>
<span class="4686299079232078395" onmouseenter="enter('4686299079232078395');" onmouseout="out('4686299079232078395');" style=""> 169          Collections.sort(fieldPersistenceProviders, new Comparator&lt;FieldPersistenceProvider&gt;() {                  </span>
<span  style=""> 170                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 171              @Override                                                                                             </span>
<span class="3172150882386516312" onmouseenter="enter('3172150882386516312');" onmouseout="out('3172150882386516312');" style=""> 172              public int compare(FieldPersistenceProvider o1, FieldPersistenceProvider o2) {                        </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 173                  return Integer.compare(o1.getOrder(), o2.getOrder());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 175          });                                                                                                       </span>
<span class="-5522683723982909620" onmouseenter="enter('-5522683723982909620');" onmouseout="out('-5522683723982909620');" style=""> 176          Collections.sort(populateValidators, new Comparator&lt;PopulateValueRequestValidator&gt;() {                    </span>
<span  style=""> 177                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 178              @Override                                                                                             </span>
<span class="-53383489616583041" onmouseenter="enter('-53383489616583041');" onmouseout="out('-53383489616583041');" style=""> 179              public int compare(PopulateValueRequestValidator o1, PopulateValueRequestValidator o2) {              </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 180                  return Integer.compare(o1.getOrder(), o2.getOrder());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 182          });                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183      }                                                                                                             </span>
<span  style=""> 184                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 185      @Override                                                                                                     </span>
<span class="396918709943054648" onmouseenter="enter('396918709943054648');" onmouseout="out('396918709943054648');" style=""> 186      public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {              </span>
<span class="-8767252978178914531" onmouseenter="enter('-8767252978178914531');" onmouseout="out('-8767252978178914531');" style=""> 187          this.applicationContext = applicationContext;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188      }                                                                                                             </span>
<span  style=""> 189                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 190      @Override                                                                                                     </span>
<span class="-3014786585495943162" onmouseenter="enter('-3014786585495943162');" onmouseout="out('-3014786585495943162');" style=""> 191      public boolean isCompatible(OperationType operationType) {                                                    </span>
<span class="2141831482980401058" onmouseenter="enter('2141831482980401058');" onmouseout="out('2141831482980401058');" style=""> 192          return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationType;       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193      }                                                                                                             </span>
<span  style=""> 194                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 195      @Override                                                                                                     </span>
<span class="-4646037950621881232" onmouseenter="enter('-4646037950621881232');" onmouseout="out('-4646037950621881232');" style=""> 196      public FieldManager getFieldManager() {                                                                       </span>
<span class="5127492287871228389" onmouseenter="enter('5127492287871228389');" onmouseout="out('5127492287871228389');" style=""> 197          return persistenceManager.getDynamicEntityDao().getFieldManager();                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198      }                                                                                                             </span>
<span  style=""> 199                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 200      @Override                                                                                                     </span>
<span class="6292426019095192675" onmouseenter="enter('6292426019095192675');" onmouseout="out('6292426019095192675');" style=""> 201      public DecimalFormat getDecimalFormatter() {                                                                  </span>
<span class="-8689839391291561327" onmouseenter="enter('-8689839391291561327');" onmouseout="out('-8689839391291561327');" style=""> 202          BroadleafRequestContext brc = BroadleafRequestContext.getBroadleafRequestContext();                       </span>
<span class="-6419077469974014826" onmouseenter="enter('-6419077469974014826');" onmouseout="out('-6419077469974014826');" style=""> 203          Locale locale = brc.getJavaLocale();                                                                      </span>
<span class="5393968905060170707" onmouseenter="enter('5393968905060170707');" onmouseout="out('5393968905060170707');" style=""> 204          DecimalFormat format = (DecimalFormat) NumberFormat.getInstance(locale);                                  </span>
<span class="-6387263728450575912" onmouseenter="enter('-6387263728450575912');" onmouseout="out('-6387263728450575912');" style=""> 205          format.applyPattern(&quot;0.########&quot;);                                                                        </span>
<span class="-7514226051094490374" onmouseenter="enter('-7514226051094490374');" onmouseout="out('-7514226051094490374');" style=""> 206          format.setGroupingUsed(false);                                                                            </span>
<span class="9058009825496417823" onmouseenter="enter('9058009825496417823');" onmouseout="out('9058009825496417823');" style=""> 207          return format;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208      }                                                                                                             </span>
<span  style=""> 209                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 210      @Override                                                                                                     </span>
<span class="3673790992053213915" onmouseenter="enter('3673790992053213915');" onmouseout="out('3673790992053213915');" style=""> 211      public SimpleDateFormat getSimpleDateFormatter() {                                                            </span>
<span class="-4651469406949839699" onmouseenter="enter('-4651469406949839699');" onmouseout="out('-4651469406949839699');" style=""> 212          return FormatUtil.getDateFormat();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213      }                                                                                                             </span>
<span  style=""> 214                                                                                                                    </span>
<span class="8865595993102688563" onmouseenter="enter('8865595993102688563');" onmouseout="out('8865595993102688563');" style=""> 215      protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata) {       </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 216          if (metadata == null) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 217              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218          }                                                                                                         </span>
<span class="4579536340012797507" onmouseenter="enter('4579536340012797507');" onmouseout="out('4579536340012797507');" style=""> 219          Map&lt;String, FieldMetadata&gt; newMap = new HashMap&lt;String, FieldMetadata&gt;();                                 </span>
<span class="-7265940589949467353" onmouseenter="enter('-7265940589949467353');" onmouseout="out('-7265940589949467353');" style=""> 220          for (Map.Entry&lt;String, FieldMetadata&gt; entry : metadata.entrySet()) {                                      </span>
<span class="8190629385805201553" onmouseenter="enter('8190629385805201553');" onmouseout="out('8190629385805201553');" style=""> 221              String fieldName = entry.getKey();                                                                    </span>
<span class="-1384244356449002788" onmouseenter="enter('-1384244356449002788');" onmouseout="out('-1384244356449002788');" style=""> 222              FieldMetadata md = entry.getValue();                                                                  </span>
<span class="-392734195208043155" onmouseenter="enter('-392734195208043155');" onmouseout="out('-392734195208043155');" style=""><abbr title=" 223              // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but also corresponds"> 223              // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but alsðŸ”µ</abbr></span>
<span class="5589067424379822421" onmouseenter="enter('5589067424379822421');" onmouseout="out('5589067424379822421');" style=""><abbr title=" 224              // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistenceModule}"> 224              // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistðŸ”µ</abbr></span>
<span class="3711520644201471237" onmouseenter="enter('3711520644201471237');" onmouseout="out('3711520644201471237');" style=""> 225              // can appropriate handle filtration and population                                                   </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 226              if (entry.getValue() instanceof BasicFieldMetadata) {                                                 </span>
<span class="-2739418553393512485" onmouseenter="enter('-2739418553393512485');" onmouseout="out('-2739418553393512485');" style=""> 227                  newMap.put(fieldName, md);                                                                        </span>
<span class="4750432455054359328" onmouseenter="enter('4750432455054359328');" onmouseout="out('4750432455054359328');" style=""><abbr title=" 228              } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY)) {"> 228              } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ðŸ”µ</abbr></span>
<span class="-8485840589316329792" onmouseenter="enter('-8485840589316329792');" onmouseout="out('-8485840589316329792');" style=""> 229                  newMap.put(fieldName,                                                                             </span>
<span class="-7674878801561950856" onmouseenter="enter('-7674878801561950856');" onmouseout="out('-7674878801561950856');" style=""><abbr title=" 230                          (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY));"> 230                          (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvideðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232          }                                                                                                         </span>
<span  style=""> 233                                                                                                                    </span>
<span class="-298172894898579181" onmouseenter="enter('-298172894898579181');" onmouseout="out('-298172894898579181');" style=""> 234          return newMap;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235      }                                                                                                             </span>
<span  style=""> 236                                                                                                                    </span>
<span class="5188070027912515482" onmouseenter="enter('5188070027912515482');" onmouseout="out('5188070027912515482');" style=""> 237      protected Class&lt;?&gt; getBasicBroadleafType(SupportedFieldType fieldType) {                                      </span>
<span class="4154961753427691315" onmouseenter="enter('4154961753427691315');" onmouseout="out('4154961753427691315');" style=""> 238          Class&lt;?&gt; response;                                                                                        </span>
<span class="2733460625953438179" onmouseenter="enter('2733460625953438179');" onmouseout="out('2733460625953438179');" style=""> 239          switch (fieldType) {                                                                                      </span>
<span class="-7896257890077828333" onmouseenter="enter('-7896257890077828333');" onmouseout="out('-7896257890077828333');" style=""> 240              case BOOLEAN:                                                                                         </span>
<span class="3764755044082566978" onmouseenter="enter('3764755044082566978');" onmouseout="out('3764755044082566978');" style=""> 241                  response = Boolean.TYPE;                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 242                  break;                                                                                            </span>
<span class="6347500693000317849" onmouseenter="enter('6347500693000317849');" onmouseout="out('6347500693000317849');" style=""> 243              case DATE:                                                                                            </span>
<span class="-9142021229939239714" onmouseenter="enter('-9142021229939239714');" onmouseout="out('-9142021229939239714');" style=""> 244                  response = Date.class;                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 245                  break;                                                                                            </span>
<span class="-3124240416500440487" onmouseenter="enter('-3124240416500440487');" onmouseout="out('-3124240416500440487');" style=""> 246              case DECIMAL:                                                                                         </span>
<span class="2581462076834923849" onmouseenter="enter('2581462076834923849');" onmouseout="out('2581462076834923849');" style=""> 247                  response = BigDecimal.class;                                                                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 248                  break;                                                                                            </span>
<span class="-8874916124792368887" onmouseenter="enter('-8874916124792368887');" onmouseout="out('-8874916124792368887');" style=""> 249              case MONEY:                                                                                           </span>
<span class="-3304037034117053709" onmouseenter="enter('-3304037034117053709');" onmouseout="out('-3304037034117053709');" style=""> 250                  response = Money.class;                                                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 251                  break;                                                                                            </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 252              case INTEGER:                                                                                         </span>
<span class="3505410153004371202" onmouseenter="enter('3505410153004371202');" onmouseout="out('3505410153004371202');" style=""> 253                  response = Integer.TYPE;                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 254                  break;                                                                                            </span>
<span class="1143803050270343828" onmouseenter="enter('1143803050270343828');" onmouseout="out('1143803050270343828');" style=""> 255              case UNKNOWN:                                                                                         </span>
<span class="-7560988579214347129" onmouseenter="enter('-7560988579214347129');" onmouseout="out('-7560988579214347129');" style=""> 256                  response = null;                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 257                  break;                                                                                            </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 258              default:                                                                                              </span>
<span class="5514005520990739575" onmouseenter="enter('5514005520990739575');" onmouseout="out('5514005520990739575');" style=""> 259                  response = String.class;                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 260                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261          }                                                                                                         </span>
<span  style=""> 262                                                                                                                    </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 263          return response;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264      }                                                                                                             </span>
<span  style=""> 265                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 266      @Override                                                                                                     </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 267      public Serializable createPopulatedInstance(Serializable instance, Entity entity,                             </span>
<span class="7620597898847416584" onmouseenter="enter('7620597898847416584');" onmouseout="out('7620597898847416584');" style=""> 268              Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId) throws ValidationException {          </span>
<span class="895901652489968225" onmouseenter="enter('895901652489968225');" onmouseout="out('895901652489968225');" style=""> 269          return createPopulatedInstance(instance, entity, unfilteredProperties, setId, true);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270      }                                                                                                             </span>
<span  style=""> 271                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 272      @Override                                                                                                     </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 273      public Serializable createPopulatedInstance(Serializable instance, Entity entity,                             </span>
<span class="-6938882731089232507" onmouseenter="enter('-6938882731089232507');" onmouseout="out('-6938882731089232507');" style=""><abbr title=" 274              Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties) throws ValidationException {"> 274              Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties)ðŸ”µ</abbr></span>
<span class="-8732291188132739434" onmouseenter="enter('-8732291188132739434');" onmouseout="out('-8732291188132739434');" style=""> 275          final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredProperties);    </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 276          FieldManager fieldManager = getFieldManager();                                                            </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 277          boolean handled = false;                                                                                  </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 278          for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {                     </span>
<span class="930709630548418813" onmouseenter="enter('930709630548418813');" onmouseout="out('930709630548418813');" style=""><abbr title=" 279              MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 279              MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 280              if (MetadataProviderResponse.NOT_HANDLED != response) {                                               </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 281                  handled = true;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282              }                                                                                                     </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 283              if (MetadataProviderResponse.HANDLED_BREAK == response) {                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 284                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286          }                                                                                                         </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 287          if (!handled) {                                                                                           </span>
<span class="6331160453122921870" onmouseenter="enter('6331160453122921870');" onmouseout="out('6331160453122921870');" style=""><abbr title=" 288              defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 288              defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289          }                                                                                                         </span>
<span class="-3308237452429324216" onmouseenter="enter('-3308237452429324216');" onmouseout="out('-3308237452429324216');" style=""><abbr title=" 290          //Order media field, map field and rule builder fields last, as they will have some validation components that depend on previous values"> 290          //Order media field, map field and rule builder fields last, as they will have some validation components ðŸ”µ</abbr></span>
<span class="4866803097244618146" onmouseenter="enter('4866803097244618146');" onmouseout="out('4866803097244618146');" style=""> 291          Property[] sortedProperties = entity.getProperties();                                                     </span>
<span class="5005865694587957669" onmouseenter="enter('5005865694587957669');" onmouseout="out('5005865694587957669');" style=""> 292          Arrays.sort(sortedProperties, new Comparator&lt;Property&gt;() {                                                </span>
<span  style=""> 293                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 294              @Override                                                                                             </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 295              public int compare(Property o1, Property o2) {                                                        </span>
<span class="4801041391951231473" onmouseenter="enter('4801041391951231473');" onmouseout="out('4801041391951231473');" style=""> 296                  BasicFieldMetadata mo1 = (BasicFieldMetadata) mergedProperties.get(o1.getName());                 </span>
<span class="8712312491906706674" onmouseenter="enter('8712312491906706674');" onmouseout="out('8712312491906706674');" style=""> 297                  BasicFieldMetadata mo2 = (BasicFieldMetadata) mergedProperties.get(o2.getName());                 </span>
<span class="5597729834250389465" onmouseenter="enter('5597729834250389465');" onmouseout="out('5597729834250389465');" style=""><abbr title=" 298                  boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo1.getFieldType() ||"> 298                  boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (SupportedðŸ”µ</abbr></span>
<span class="-5228840553210193176" onmouseenter="enter('-5228840553210193176');" onmouseout="out('-5228840553210193176');" style=""> 299                          SupportedFieldType.RULE_WITH_QUANTITY==mo1.getFieldType() ||                              </span>
<span class="-2825740162482404988" onmouseenter="enter('-2825740162482404988');" onmouseout="out('-2825740162482404988');" style=""> 300                          SupportedFieldType.RULE_SIMPLE_TIME==mo1.getFieldType() ||                                </span>
<span class="-2758640436691235457" onmouseenter="enter('-2758640436691235457');" onmouseout="out('-2758640436691235457');" style=""><abbr title=" 301                          SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 301                          SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManager.MAPFIELðŸ”µ</abbr></span>
<span class="4460185052151715074" onmouseenter="enter('4460185052151715074');" onmouseout="out('4460185052151715074');" style=""><abbr title=" 302                  boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo2.getFieldType() ||"> 302                  boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (SupportedðŸ”µ</abbr></span>
<span class="1101038090453452590" onmouseenter="enter('1101038090453452590');" onmouseout="out('1101038090453452590');" style=""> 303                          SupportedFieldType.RULE_WITH_QUANTITY==mo2.getFieldType() ||                              </span>
<span class="-8197603398477948159" onmouseenter="enter('-8197603398477948159');" onmouseout="out('-8197603398477948159');" style=""> 304                          SupportedFieldType.RULE_SIMPLE_TIME==mo2.getFieldType() ||                                </span>
<span class="-275758415706895485" onmouseenter="enter('-275758415706895485');" onmouseout="out('-275758415706895485');" style=""><abbr title=" 305                          SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 305                          SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManager.MAPFIELðŸ”µ</abbr></span>
<span class="-2026914999367619686" onmouseenter="enter('-2026914999367619686');" onmouseout="out('-2026914999367619686');" style=""> 306                  if (isLate1 &amp;&amp; !isLate2) {                                                                        </span>
<span class="6787741487180588680" onmouseenter="enter('6787741487180588680');" onmouseout="out('6787741487180588680');" style=""> 307                      return 1;                                                                                     </span>
<span class="-3681644454129428558" onmouseenter="enter('-3681644454129428558');" onmouseout="out('-3681644454129428558');" style=""> 308                  } else if (!isLate1 &amp;&amp; isLate2) {                                                                 </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 309                      return -1;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310                  }                                                                                                 </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 311                  return 0;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 313          });                                                                                                       </span>
<span class="1932565359130544851" onmouseenter="enter('1932565359130544851');" onmouseout="out('1932565359130544851');" style=""><abbr title=" 314          Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.class);"> 314          Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.ðŸ”µ</abbr></span>
<span class="2352236362444167215" onmouseenter="enter('2352236362444167215');" onmouseout="out('2352236362444167215');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 315 -        FlushMode originalFlushMode = session.getFlushMode();                                                     </span>
<span class="5994630726155221613" onmouseenter="enter('5994630726155221613');" onmouseout="out('5994630726155221613');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 316 +        FlushMode originalFlushMode = session.getHibernateFlushMode();                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 317          try {                                                                                                     </span>
<span class="-20881645087342177" onmouseenter="enter('-20881645087342177');" onmouseout="out('-20881645087342177');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 318 -            session.setFlushMode(FlushMode.MANUAL);                                                               </span>
<span class="5642929065352278415" onmouseenter="enter('5642929065352278415');" onmouseout="out('5642929065352278415');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 319 +            session.setHibernateFlushMode(FlushMode.MANUAL);                                                      </span>
<span class="3800930097913678918" onmouseenter="enter('3800930097913678918');" onmouseout="out('3800930097913678918');" style=""> 320              RuntimeException entityPersistenceException = null;                                                   </span>
<span class="7436252520289959863" onmouseenter="enter('7436252520289959863');" onmouseout="out('7436252520289959863');" style=""> 321              for (Property property : sortedProperties) {                                                          </span>
<span class="1357949122558141334" onmouseenter="enter('1357949122558141334');" onmouseout="out('1357949122558141334');" style=""> 322                  BasicFieldMetadata metadata = (BasicFieldMetadata) mergedProperties.get(property.getName());      </span>
<span class="-2710932228242800712" onmouseenter="enter('-2710932228242800712');" onmouseout="out('-2710932228242800712');" style=""> 323                  Class&lt;?&gt; returnType;                                                                              </span>
<span class="8439611434668123958" onmouseenter="enter('8439611434668123958');" onmouseout="out('8439611434668123958');" style=""><abbr title=" 324                  if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().startsWith(&quot;__&quot;)) {"> 324                  if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().startsWithðŸ”µ</abbr></span>
<span class="-3329718253928059141" onmouseenter="enter('-3329718253928059141');" onmouseout="out('-3329718253928059141');" style=""> 325                      Field field = fieldManager.getField(instance.getClass(), property.getName());                 </span>
<span class="-6389169260302086885" onmouseenter="enter('-6389169260302086885');" onmouseout="out('-6389169260302086885');" style=""> 326                      if (field == null) {                                                                          </span>
<span class="2139581581669054854" onmouseenter="enter('2139581581669054854');" onmouseout="out('2139581581669054854');" style=""><abbr title=" 327                          LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 327                          LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitiðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 328                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329                      }                                                                                             </span>
<span class="8953519469960391957" onmouseenter="enter('8953519469960391957');" onmouseout="out('8953519469960391957');" style=""> 330                      returnType = field.getType();                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 331                  } else {                                                                                          </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 332                      if (metadata == null) {                                                                       </span>
<span class="8114946394939525604" onmouseenter="enter('8114946394939525604');" onmouseout="out('8114946394939525604');" style=""><abbr title=" 333                          LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 333                          LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.saðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 334                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335                      }                                                                                             </span>
<span class="-8567483443765194758" onmouseenter="enter('-8567483443765194758');" onmouseout="out('-8567483443765194758');" style=""> 336                      returnType = getMapFieldType(instance, fieldManager, property);                               </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 337                      if (returnType == null) {                                                                     </span>
<span class="1531226167473626096" onmouseenter="enter('1531226167473626096');" onmouseout="out('1531226167473626096');" style=""> 338                          returnType = getBasicBroadleafType(metadata.getFieldType());                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 339                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340                  }                                                                                                 </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 341                  if (returnType == null) {                                                                         </span>
<span class="8716882681587381997" onmouseenter="enter('8716882681587381997');" onmouseout="out('8716882681587381997');" style=""><abbr title=" 342                      throw new IllegalAccessException(&quot;Unable to determine the value type for the property (&quot; + property.getName() + &quot;)&quot;);"> 342                      throw new IllegalAccessException(&quot;Unable to determine the value type for the property (&quot; + proðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343                  }                                                                                                 </span>
<span class="-1342740262664655807" onmouseenter="enter('-1342740262664655807');" onmouseout="out('-1342740262664655807');" style=""> 344                  String value = property.getValue();                                                               </span>
<span class="6116690946102675760" onmouseenter="enter('6116690946102675760');" onmouseout="out('6116690946102675760');" style=""> 345                  if (metadata != null) {                                                                           </span>
<span  style=""> 346                                                                                                                    </span>
<span class="6432907771531110343" onmouseenter="enter('6432907771531110343');" onmouseout="out('6432907771531110343');" style=""> 347                      if (metadata.getFieldType().equals(SupportedFieldType.BOOLEAN)) {                             </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 348                          if (value == null) {                                                                      </span>
<span class="3558706163819897442" onmouseenter="enter('3558706163819897442');" onmouseout="out('3558706163819897442');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 349 -                            value = &quot;false&quot;;                                                                      </span>
<span class="-8520936090313964890" onmouseenter="enter('-8520936090313964890');" onmouseout="out('-8520936090313964890');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 350 +                            String defaultValue = metadata.getDefaultValue();                                     </span>
<span class="-7748715783254025298" onmouseenter="enter('-7748715783254025298');" onmouseout="out('-7748715783254025298');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 351 +                            value = StringUtils.isBlank(defaultValue)? &quot;false&quot; : defaultValue;                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352                          }                                                                                         </span>
<span class="5830462858832599582" onmouseenter="enter('5830462858832599582');" onmouseout="out('5830462858832599582');" style=""> 353                      } else if (metadata.getFieldType().equals(SupportedFieldType.DATE)) {                         </span>
<span class="1584182115233885945" onmouseenter="enter('1584182115233885945');" onmouseout="out('1584182115233885945');" style=""> 354                          if (StringUtils.isEmpty(value)) {                                                         </span>
<span class="-7092419811380344208" onmouseenter="enter('-7092419811380344208');" onmouseout="out('-7092419811380344208');" style=""> 355                              value = null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357                      }                                                                                             </span>
<span  style=""> 358                                                                                                                    </span>
<span class="5304497076822353807" onmouseenter="enter('5304497076822353807');" onmouseout="out('5304497076822353807');" style=""><abbr title=" 359                      if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) {"> 359                      if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) ðŸ”µ</abbr></span>
<span class="-486793269557446445" onmouseenter="enter('-486793269557446445');" onmouseout="out('-486793269557446445');" style=""> 360                          boolean isValid = true;                                                                   </span>
<span class="1658940141758117529" onmouseenter="enter('1658940141758117529');" onmouseout="out('1658940141758117529');" style=""><abbr title=" 361                          PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd());"> 361                          PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metðŸ”µ</abbr></span>
<span class="-7942780495263533884" onmouseenter="enter('-7942780495263533884');" onmouseout="out('-7942780495263533884');" style=""> 362                          handled = false;                                                                          </span>
<span class="3197362083799660545" onmouseenter="enter('3197362083799660545');" onmouseout="out('3197362083799660545');" style=""> 363                          if (value != null) {                                                                      </span>
<span class="-3229008606700200313" onmouseenter="enter('-3229008606700200313');" onmouseout="out('-3229008606700200313');" style=""> 364                              for (PopulateValueRequestValidator validator : populateValidators) {                  </span>
<span class="884666747315214760" onmouseenter="enter('884666747315214760');" onmouseout="out('884666747315214760');" style=""> 365                                  PropertyValidationResult validationResult = validator.validate(request, instance);</span>
<span class="-4364264466893249362" onmouseenter="enter('-4364264466893249362');" onmouseout="out('-4364264466893249362');" style=""> 366                                  if (!validationResult.isValid()) {                                                </span>
<span class="-8273348184937120120" onmouseenter="enter('-8273348184937120120');" onmouseout="out('-8273348184937120120');" style=""><abbr title=" 367                                      entity.addValidationError(property.getName(), validationResult.getErrorMessage());"> 367                                      entity.addValidationError(property.getName(), validationResult.getErrorMessageðŸ”µ</abbr></span>
<span class="-5133746822051192612" onmouseenter="enter('-5133746822051192612');" onmouseout="out('-5133746822051192612');" style=""> 368                                      isValid = false;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371                          }                                                                                         </span>
<span class="-2043265533105198042" onmouseenter="enter('-2043265533105198042');" onmouseout="out('-2043265533105198042');" style=""> 372                          if (isValid) {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 373                              try {                                                                                 </span>
<span class="493530022350283834" onmouseenter="enter('493530022350283834');" onmouseout="out('493530022350283834');" style=""> 374                                  boolean isBreakDetected = false;                                                  </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 375                                  for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 375                                  for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProvidersðŸ”µ</abbr></span>
<span class="-2175392382273122455" onmouseenter="enter('-2175392382273122455');" onmouseout="out('-2175392382273122455');" style=""><abbr title=" 376                                      if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (value != null || fieldPersistenceProvider.canHandlePopulateNull())) {"> 376                                      if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (value != nuðŸ”µ</abbr></span>
<span class="-9063763262484694182" onmouseenter="enter('-9063763262484694182');" onmouseout="out('-9063763262484694182');" style=""><abbr title=" 377                                          MetadataProviderResponse response = fieldPersistenceProvider.populateValue(request, instance);"> 377                                          MetadataProviderResponse response = fieldPersistenceProvider.populateValueðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 378                                          if (MetadataProviderResponse.NOT_HANDLED != response) {                   </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 379                                              handled = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380                                          }                                                                         </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 381                                          if (MetadataProviderResponse.HANDLED_BREAK == response) {                 </span>
<span class="7683637701498275712" onmouseenter="enter('7683637701498275712');" onmouseout="out('7683637701498275712');" style=""> 382                                              isBreakDetected = true;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383                                          }                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385                                  }                                                                                 </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 386                                  if (!handled) {                                                                   </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 387                                      if (value == null) {                                                          </span>
<span class="882791416935144082" onmouseenter="enter('882791416935144082');" onmouseout="out('882791416935144082');" style=""> 388                                          property.setIsDirty(true);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389                                      }                                                                             </span>
<span class="1375938864856367065" onmouseenter="enter('1375938864856367065');" onmouseout="out('1375938864856367065');" style=""><abbr title=" 390                                      defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd()), instance);"> 390                                      defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, ðŸ”µ</abbr></span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 391                                      if (value == null) {                                                          </span>
<span class="-9084682385294658879" onmouseenter="enter('-9084682385294658879');" onmouseout="out('-9084682385294658879');" style=""> 392                                          fieldManager.setFieldValue(instance, property.getName(), null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 394                                  }                                                                                 </span>
<span class="8793300741685062154" onmouseenter="enter('8793300741685062154');" onmouseout="out('8793300741685062154');" style=""> 395                              } catch (ParentEntityPersistenceException | javax.validation.ValidationException e) { </span>
<span class="9214632560148736873" onmouseenter="enter('9214632560148736873');" onmouseout="out('9214632560148736873');" style=""> 396                                  entityPersistenceException = e;                                                   </span>
<span class="8194585295280636961" onmouseenter="enter('8194585295280636961');" onmouseout="out('8194585295280636961');" style=""> 397                                  cleanupFailedPersistenceAttempt(instance);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 398                                  break;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403              }                                                                                                     </span>
<span class="-8941633054064108755" onmouseenter="enter('-8941633054064108755');" onmouseout="out('-8941633054064108755');" style=""> 404              // Only check validation if not the initial add                                                       </span>
<span class="3237544980725266527" onmouseenter="enter('3237544980725266527');" onmouseout="out('3237544980725266527');" style=""> 405              if (!entity.isPreAdd()) {                                                                             </span>
<span class="-9050207745018896152" onmouseenter="enter('-9050207745018896152');" onmouseout="out('-9050207745018896152');" style=""> 406                  validate(entity, instance, mergedProperties, validateUnsubmittedProperties);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407              }                                                                                                     </span>
<span class="32753067189116500" onmouseenter="enter('32753067189116500');" onmouseout="out('32753067189116500');" style=""> 408              //if validation failed, refresh the current instance so that none of the changes will be persisted    </span>
<span class="-2597695263377724387" onmouseenter="enter('-2597695263377724387');" onmouseout="out('-2597695263377724387');" style=""> 409              if (entity.isValidationFailure()) {                                                                   </span>
<span class="-5245333264083845326" onmouseenter="enter('-5245333264083845326');" onmouseout="out('-5245333264083845326');" style=""> 410                  //only refresh the instance if it was managed to begin with                                       </span>
<span class="9192371448315551444" onmouseenter="enter('9192371448315551444');" onmouseout="out('9192371448315551444');" style=""> 411                  if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instance)) {     </span>
<span class="5068098197212588956" onmouseenter="enter('5068098197212588956');" onmouseout="out('5068098197212588956');" style=""> 412                      persistenceManager.getDynamicEntityDao().refresh(instance);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413                  }                                                                                                 </span>
<span  style=""> 414                                                                                                                    </span>
<span class="-2797407664577460515" onmouseenter="enter('-2797407664577460515');" onmouseout="out('-2797407664577460515');" style=""> 415                  //re-initialize the valid properties for the entity in order to deal with the potential of not    </span>
<span class="7620881433898036398" onmouseenter="enter('7620881433898036398');" onmouseout="out('7620881433898036398');" style=""> 416                  //completely sending over all checkbox/radio fields                                               </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 417                  List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                                   </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 418                  entityList.add(instance);                                                                         </span>
<span class="-903163901416962067" onmouseenter="enter('-903163901416962067');" onmouseout="out('-903163901416962067');" style=""> 419                  Entity invalid = getRecords(mergedProperties, entityList, null, null, null)[0];                   </span>
<span class="-434334858457397385" onmouseenter="enter('-434334858457397385');" onmouseout="out('-434334858457397385');" style=""> 420                  invalid.setPropertyValidationErrors(entity.getPropertyValidationErrors());                        </span>
<span class="-4617220526414327800" onmouseenter="enter('-4617220526414327800');" onmouseout="out('-4617220526414327800');" style=""> 421                  invalid.setGlobalValidationErrors(entity.getGlobalValidationErrors());                            </span>
<span class="-3275304366399180151" onmouseenter="enter('-3275304366399180151');" onmouseout="out('-3275304366399180151');" style=""> 422                  invalid.overridePropertyValues(entity);                                                           </span>
<span  style=""> 423                                                                                                                    </span>
<span class="-5826985379545468824" onmouseenter="enter('-5826985379545468824');" onmouseout="out('-5826985379545468824');" style=""><abbr title=" 424                  String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.getGlobalValidationErrors());"> 424                  String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.gðŸ”µ</abbr></span>
<span class="-1571824840661221764" onmouseenter="enter('-1571824840661221764');" onmouseout="out('-1571824840661221764');" style=""> 425                  throw new ValidationException(invalid, message);                                                  </span>
<span class="-4684713380455277597" onmouseenter="enter('-4684713380455277597');" onmouseout="out('-4684713380455277597');" style=""> 426              } else if (entityPersistenceException != null) {                                                      </span>
<span class="1045288364868684284" onmouseenter="enter('1045288364868684284');" onmouseout="out('1045288364868684284');" style=""> 427                  throw ExceptionHelper.refineException(entityPersistenceException.getCause());                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 428              } else {                                                                                              </span>
<span class="7383617604540684898" onmouseenter="enter('7383617604540684898');" onmouseout="out('7383617604540684898');" style=""> 429                  fieldManager.persistMiddleEntities();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430              }                                                                                                     </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 431          } catch (IllegalAccessException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 432              throw new PersistenceException(e);                                                                    </span>
<span class="6243028624057522413" onmouseenter="enter('6243028624057522413');" onmouseout="out('6243028624057522413');" style=""> 433          } catch (InstantiationException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 434              throw new PersistenceException(e);                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 435          } finally {                                                                                               </span>
<span class="6063597376304480914" onmouseenter="enter('6063597376304480914');" onmouseout="out('6063597376304480914');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 436 -            session.setFlushMode(originalFlushMode);                                                              </span>
<span class="4677599505604490897" onmouseenter="enter('4677599505604490897');" onmouseout="out('4677599505604490897');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 437 +            session.setHibernateFlushMode(originalFlushMode);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 438          }                                                                                                         </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style=""> 439          return instance;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440      }                                                                                                             </span>
<span  style=""> 441                                                                                                                    </span>
<span class="461529783746476585" onmouseenter="enter('461529783746476585');" onmouseout="out('461529783746476585');" style=""> 442      protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable instance, </span>
<span class="3885863412641560188" onmouseenter="enter('3885863412641560188');" onmouseout="out('3885863412641560188');" style=""><abbr title=" 443                                               Boolean setId, BasicFieldMetadata metadata, Entity entity, String value) throws IllegalAccessException {"> 443                                               Boolean setId, BasicFieldMetadata metadata, Entity entity, String valðŸ”µ</abbr></span>
<span class="-8863585303780993216" onmouseenter="enter('-8863585303780993216');" onmouseout="out('-8863585303780993216');" style=""> 444          Boolean mutable = metadata.getMutable();                                                                  </span>
<span class="8777806519724314753" onmouseenter="enter('8777806519724314753');" onmouseout="out('8777806519724314753');" style=""> 445          Boolean readOnly = metadata.getReadOnly();                                                                </span>
<span class="949029723485795199" onmouseenter="enter('949029723485795199');" onmouseout="out('949029723485795199');" style=""><abbr title=" 446          boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp; property.getEnabled();"> 446          boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp; propertyðŸ”µ</abbr></span>
<span  style=""> 447                                                                                                                    </span>
<span class="-5466596695953259298" onmouseenter="enter('-5466596695953259298');" onmouseout="out('-5466596695953259298');" style=""> 448          if (generalConditionsMet &amp;&amp; value == null) {                                                              </span>
<span class="3784846250944455561" onmouseenter="enter('3784846250944455561');" onmouseout="out('3784846250944455561');" style=""> 449              boolean currentValueIsNotNull = false;                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 450              try {                                                                                                 </span>
<span class="-6026008610562760887" onmouseenter="enter('-6026008610562760887');" onmouseout="out('-6026008610562760887');" style=""> 451                  currentValueIsNotNull = fieldManager.getFieldValue(instance, property.getName()) != null;         </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 452              } catch (FieldNotAvailableException e) {                                                              </span>
<span class="5941411430976365683" onmouseenter="enter('5941411430976365683');" onmouseout="out('5941411430976365683');" style=""> 453                  throw new IllegalArgumentException(e);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454              }                                                                                                     </span>
<span  style=""> 455                                                                                                                    </span>
<span class="2174296922893169949" onmouseenter="enter('2174296922893169949');" onmouseout="out('2174296922893169949');" style=""> 456              boolean valueIsNotNullId = metadata.getFieldType() != SupportedFieldType.ID || setId;                 </span>
<span class="3378189448655180920" onmouseenter="enter('3378189448655180920');" onmouseout="out('3378189448655180920');" style=""> 457              boolean valueIsNotPassword = metadata.getFieldType() != SupportedFieldType.PASSWORD;                  </span>
<span  style=""> 458                                                                                                                    </span>
<span class="-802153418821632058" onmouseenter="enter('-802153418821632058');" onmouseout="out('-802153418821632058');" style=""> 459              return currentValueIsNotNull &amp;&amp; !entity.isPreAdd() &amp;&amp; valueIsNotNullId &amp;&amp; valueIsNotPassword;         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460          }                                                                                                         </span>
<span class="7805064061324166126" onmouseenter="enter('7805064061324166126');" onmouseout="out('7805064061324166126');" style=""> 461          return generalConditionsMet;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462      }                                                                                                             </span>
<span  style=""> 463                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 464      @Override                                                                                                     </span>
<span class="1852783233485112885" onmouseenter="enter('1852783233485112885');" onmouseout="out('1852783233485112885');" style=""><abbr title=" 465      public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FieldMetadata&gt; alternateMergedProperties, String pathToTargetObject) {"> 465      public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FðŸ”µ</abbr></span>
<span class="-6187207773895344621" onmouseenter="enter('-6187207773895344621');" onmouseout="out('-6187207773895344621');" style=""> 466          List&lt;Serializable&gt; records = new ArrayList&lt;Serializable&gt;(1);                                              </span>
<span class="5878022765752800842" onmouseenter="enter('5878022765752800842');" onmouseout="out('5878022765752800842');" style=""> 467          records.add(record);                                                                                      </span>
<span class="496294912681907043" onmouseenter="enter('496294912681907043');" onmouseout="out('496294912681907043');" style=""><abbr title=" 468          Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTargetObject, null);"> 468          Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTðŸ”µ</abbr></span>
<span class="-9062758151482460865" onmouseenter="enter('-9062758151482460865');" onmouseout="out('-9062758151482460865');" style=""> 469          return productEntities[0];                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 470      }                                                                                                             </span>
<span  style=""> 471                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 472      @Override                                                                                                     </span>
<span class="5781949221273262010" onmouseenter="enter('5781949221273262010');" onmouseout="out('5781949221273262010');" style=""><abbr title=" 473      public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, Serializable record) {"> 473      public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, SerializabðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 474          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 474          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persðŸ”µ</abbr></span>
<span class="-5151099947242221721" onmouseenter="enter('-5151099947242221721');" onmouseout="out('-5151099947242221721');" style=""> 475          return getRecord(mergedProperties, record, null, null);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476      }                                                                                                             </span>
<span  style=""> 477                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 478      @Override                                                                                                     </span>
<span class="-4520532598669526895" onmouseenter="enter('-4520532598669526895');" onmouseout="out('-4520532598669526895');" style=""><abbr title=" 479      public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? extends Serializable&gt; records) {"> 479      public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? ðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 480          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 480          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persðŸ”µ</abbr></span>
<span class="-928847591506271316" onmouseenter="enter('-928847591506271316');" onmouseout="out('-928847591506271316');" style=""> 481          return getRecords(mergedProperties, records, null, null, null);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482      }                                                                                                             </span>
<span  style=""> 483                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 484      @Override                                                                                                     </span>
<span class="-8278894720012200265" onmouseenter="enter('-8278894720012200265');" onmouseout="out('-8278894720012200265');" style=""><abbr title=" 485      public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persistencePerspective) {"> 485      public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persisteðŸ”µ</abbr></span>
<span class="-3722133806289408051" onmouseenter="enter('-3722133806289408051');" onmouseout="out('-3722133806289408051');" style=""><abbr title=" 486          return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspective);"> 486          return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspectiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487      }                                                                                                             </span>
<span  style=""> 488                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 489      @Override                                                                                                     </span>
<span class="-721724575932279638" onmouseenter="enter('-721724575932279638');" onmouseout="out('-721724575932279638');" style=""><abbr title=" 490      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; records) {"> 490      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; reðŸ”µ</abbr></span>
<span class="8327530304239683256" onmouseenter="enter('8327530304239683256');" onmouseout="out('8327530304239683256');" style=""> 491          return getRecords(primaryMergedProperties, records, null, null, null);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 492      }                                                                                                             </span>
<span  style=""> 493                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 494      @Override                                                                                                     </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 495      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,                      </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 496                                 List&lt;? extends Serializable&gt; records,                                              </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 497                                 Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,                    </span>
<span class="-4377947839867578072" onmouseenter="enter('-4377947839867578072');" onmouseout="out('-4377947839867578072');" style=""> 498                                 String pathToTargetObject) {                                                       </span>
<span class="4685453067306146439" onmouseenter="enter('4685453067306146439');" onmouseout="out('4685453067306146439');" style=""><abbr title=" 499          return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTargetObject, null);"> 499          return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500      }                                                                                                             </span>
<span  style=""> 501                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 502      @Override                                                                                                     </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 503      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,                      </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 504                                 List&lt;? extends Serializable&gt; records,                                              </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 505                                 Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,                    </span>
<span class="8335655514773173486" onmouseenter="enter('8335655514773173486');" onmouseout="out('8335655514773173486');" style=""> 506                                 String pathToTargetObject,                                                         </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 507                                 String[] customCriteria) {                                                         </span>
<span class="-7988348483038990196" onmouseenter="enter('-7988348483038990196');" onmouseout="out('-7988348483038990196');" style=""><abbr title=" 508          Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedProperties);"> 508          Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedPrðŸ”µ</abbr></span>
<span class="-3378908089969836890" onmouseenter="enter('-3378908089969836890');" onmouseout="out('-3378908089969836890');" style=""><abbr title=" 509          Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergedProperties);"> 509          Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergðŸ”µ</abbr></span>
<span class="-6780502465801472168" onmouseenter="enter('-6780502465801472168');" onmouseout="out('-6780502465801472168');" style=""> 510          Entity[] entities = new Entity[records.size()];                                                           </span>
<span class="-3238093963120777374" onmouseenter="enter('-3238093963120777374');" onmouseout="out('-3238093963120777374');" style=""> 511          int j = 0;                                                                                                </span>
<span class="3456801759115552322" onmouseenter="enter('3456801759115552322');" onmouseout="out('3456801759115552322');" style=""> 512          for (Serializable recordEntity : records) {                                                               </span>
<span class="619523180404568822" onmouseenter="enter('619523180404568822');" onmouseout="out('619523180404568822');" style=""> 513              Serializable entity;                                                                                  </span>
<span class="-2186067977699467203" onmouseenter="enter('-2186067977699467203');" onmouseout="out('-2186067977699467203');" style=""> 514              if (pathToTargetObject != null) {                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 515                  try {                                                                                             </span>
<span class="-5492139625117264664" onmouseenter="enter('-5492139625117264664');" onmouseout="out('-5492139625117264664');" style=""> 516                      entity = (Serializable) getFieldManager().getFieldValue(recordEntity, pathToTargetObject);    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 517                  } catch (Exception e) {                                                                           </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 518                      throw new PersistenceException(e);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 520              } else {                                                                                              </span>
<span class="-6074236754568201796" onmouseenter="enter('-6074236754568201796');" onmouseout="out('-6074236754568201796');" style=""> 521                  entity = recordEntity;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522              }                                                                                                     </span>
<span class="8514876957999010588" onmouseenter="enter('8514876957999010588');" onmouseout="out('8514876957999010588');" style=""> 523              Entity entityItem = new Entity();                                                                     </span>
<span class="3587737780108495887" onmouseenter="enter('3587737780108495887');" onmouseout="out('3587737780108495887');" style=""> 524              entityItem.setType(new String[] { entity.getClass().getName() });                                     </span>
<span class="-2252000440729832309" onmouseenter="enter('-2252000440729832309');" onmouseout="out('-2252000440729832309');" style=""> 525              entities[j] = entityItem;                                                                             </span>
<span  style=""> 526                                                                                                                    </span>
<span class="3961822747852490020" onmouseenter="enter('3961822747852490020');" onmouseout="out('3961822747852490020');" style=""> 527              List&lt;Property&gt; props = new ArrayList&lt;Property&gt;(primaryMergedProperties.size());                       </span>
<span class="-4152224460170095636" onmouseenter="enter('-4152224460170095636');" onmouseout="out('-4152224460170095636');" style=""> 528              extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria);        </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 529              if (alternateMergedProperties != null) {                                                              </span>
<span class="-9087051985097357993" onmouseenter="enter('-9087051985097357993');" onmouseout="out('-9087051985097357993');" style=""><abbr title=" 530                  extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriteria);"> 530                  extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriterðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531              }                                                                                                     </span>
<span  style=""> 532                                                                                                                    </span>
<span class="-5089629635789493807" onmouseenter="enter('-5089629635789493807');" onmouseout="out('-5089629635789493807');" style=""> 533              // Try to add the &quot;main name&quot; property. Log a debug message if we can&#x27;t                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 534              try {                                                                                                 </span>
<span class="5380947615780799183" onmouseenter="enter('5380947615780799183');" onmouseout="out('5380947615780799183');" style=""> 535                  Property p = new Property();                                                                      </span>
<span class="1925482889972291082" onmouseenter="enter('1925482889972291082');" onmouseout="out('1925482889972291082');" style=""> 536                  p.setName(MAIN_ENTITY_NAME_PROPERTY);                                                             </span>
<span class="-280105646141823521" onmouseenter="enter('-280105646141823521');" onmouseout="out('-280105646141823521');" style=""> 537                  String mainEntityName = (String) MethodUtils.invokeMethod(entity, &quot;getMainEntityName&quot;);           </span>
<span class="-4568210868795612410" onmouseenter="enter('-4568210868795612410');" onmouseout="out('-4568210868795612410');" style=""> 538                  p.setValue(mainEntityName);                                                                       </span>
<span class="-4361225624073911918" onmouseenter="enter('-4361225624073911918');" onmouseout="out('-4361225624073911918');" style=""> 539                  props.add(p);                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 540              } catch (Exception e) {                                                                               </span>
<span class="8396621627303093896" onmouseenter="enter('8396621627303093896');" onmouseout="out('8396621627303093896');" style=""> 541                  LOG.debug(String.format(&quot;Could not execute the getMainEntityName() method for [%s]&quot;,              </span>
<span class="210384044775512031" onmouseenter="enter('210384044775512031');" onmouseout="out('210384044775512031');" style=""> 542                          entity.getClass().getName()), e);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543              }                                                                                                     </span>
<span  style=""> 544                                                                                                                    </span>
<span class="-8721953412008939855" onmouseenter="enter('-8721953412008939855');" onmouseout="out('-8721953412008939855');" style=""> 545              // Try to add the alternate id property if available                                                  </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 546              if (alternateMergedProperties != null) {                                                              </span>
<span class="-2729730257234978997" onmouseenter="enter('-2729730257234978997');" onmouseout="out('-2729730257234978997');" style=""> 547                  for (Entry&lt;String, FieldMetadata&gt; entry : alternateMergedProperties.entrySet()) {                 </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 548                      if (entry.getValue() instanceof BasicFieldMetadata) {                                         </span>
<span class="-3735738621021538581" onmouseenter="enter('-3735738621021538581');" onmouseout="out('-3735738621021538581');" style=""> 549                          if (((BasicFieldMetadata) entry.getValue()).getFieldType() == SupportedFieldType.ID) {    </span>
<span class="475815096463760847" onmouseenter="enter('475815096463760847');" onmouseout="out('475815096463760847');" style=""> 550                              Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadata&gt;();  </span>
<span class="-4538053591093527376" onmouseenter="enter('-4538053591093527376');" onmouseout="out('-4538053591093527376');" style=""> 551                              alternateOnEntity.put(entry.getKey(), entry.getValue());                              </span>
<span class="6846951436664779248" onmouseenter="enter('6846951436664779248');" onmouseout="out('6846951436664779248');" style=""> 552                              List&lt;Property&gt; props2 = new ArrayList&lt;Property&gt;();                                    </span>
<span class="5345785186371221305" onmouseenter="enter('5345785186371221305');" onmouseout="out('5345785186371221305');" style=""><abbr title=" 553                              extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCriteria);"> 553                              extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCðŸ”µ</abbr></span>
<span class="-7220107863695845032" onmouseenter="enter('-7220107863695845032');" onmouseout="out('-7220107863695845032');" style=""> 554                              List&lt;Property&gt; filtered = new ArrayList&lt;Property&gt;();                                  </span>
<span class="-7311698525315213587" onmouseenter="enter('-7311698525315213587');" onmouseout="out('-7311698525315213587');" style=""> 555                              for (Property prop : props2) {                                                        </span>
<span class="6017333932165432493" onmouseenter="enter('6017333932165432493');" onmouseout="out('6017333932165432493');" style=""> 556                                  if (!prop.getName().startsWith(&quot;__&quot;)) {                                           </span>
<span class="-5604579077622831568" onmouseenter="enter('-5604579077622831568');" onmouseout="out('-5604579077622831568');" style=""> 557                                      filtered.add(prop);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 558                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 559                              }                                                                                     </span>
<span class="7776429612545514862" onmouseenter="enter('7776429612545514862');" onmouseout="out('7776429612545514862');" style=""> 560                              if (filtered.size() == 1 &amp;&amp; !filtered.get(0).getName().contains(&quot;.&quot;)) {               </span>
<span class="766644908777739787" onmouseenter="enter('766644908777739787');" onmouseout="out('766644908777739787');" style=""> 561                                  Property alternateIdProp = filtered.get(0);                                       </span>
<span class="1444561456824673058" onmouseenter="enter('1444561456824673058');" onmouseout="out('1444561456824673058');" style=""> 562                                  alternateIdProp.setName(ALTERNATE_ID_PROPERTY);                                   </span>
<span class="-1260553957514386502" onmouseenter="enter('-1260553957514386502');" onmouseout="out('-1260553957514386502');" style=""> 563                                  props.add(alternateIdProp);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 565                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 568              }                                                                                                     </span>
<span  style=""> 569                                                                                                                    </span>
<span class="3140965171760158820" onmouseenter="enter('3140965171760158820');" onmouseout="out('3140965171760158820');" style=""> 570              Property[] properties = new Property[props.size()];                                                   </span>
<span class="-5540374985766964035" onmouseenter="enter('-5540374985766964035');" onmouseout="out('-5540374985766964035');" style=""> 571              properties = props.toArray(properties);                                                               </span>
<span class="2992548432186189131" onmouseenter="enter('2992548432186189131');" onmouseout="out('2992548432186189131');" style=""> 572              entityItem.setProperties(properties);                                                                 </span>
<span class="-5688619574901767370" onmouseenter="enter('-5688619574901767370');" onmouseout="out('-5688619574901767370');" style=""> 573              j++;                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574          }                                                                                                         </span>
<span  style=""> 575                                                                                                                    </span>
<span class="-7616126935915446236" onmouseenter="enter('-7616126935915446236');" onmouseout="out('-7616126935915446236');" style=""> 576          return entities;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577      }                                                                                                             </span>
<span  style=""> 578                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 579      @Override                                                                                                     </span>
<span class="-1580059539469245457" onmouseenter="enter('-1580059539469245457');" onmouseout="out('-1580059539469245457');" style=""> 580      public Entity[] getRecords(FetchExtractionRequest fetchExtractionRequest) {                                   </span>
<span class="-7749788048664948511" onmouseenter="enter('-7749788048664948511');" onmouseout="out('-7749788048664948511');" style=""> 581          return fetchWrapper.getRecords(fetchExtractionRequest);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 582      }                                                                                                             </span>
<span  style=""> 583                                                                                                                    </span>
<span class="2943865710042007016" onmouseenter="enter('2943865710042007016');" onmouseout="out('2943865710042007016');" style=""> 584      protected void extractPropertiesFromPersistentEntity(Map&lt;String, FieldMetadata&gt; mergedProperties,             </span>
<span class="-3214801195397343505" onmouseenter="enter('-3214801195397343505');" onmouseout="out('-3214801195397343505');" style=""> 585                                                           Serializable entity,                                     </span>
<span class="6006324038342333129" onmouseenter="enter('6006324038342333129');" onmouseout="out('6006324038342333129');" style=""> 586                                                           List&lt;Property&gt; props,                                    </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 587                                                           String[] customCriteria) {                               </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 588          FieldManager fieldManager = getFieldManager();                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 589          try {                                                                                                     </span>
<span class="3586746813038594040" onmouseenter="enter('3586746813038594040');" onmouseout="out('3586746813038594040');" style=""> 590              if (entity instanceof AdminMainEntity) {                                                              </span>
<span class="-7831041928171184784" onmouseenter="enter('-7831041928171184784');" onmouseout="out('-7831041928171184784');" style=""> 591                  //Create an invisible property for the admin main entity name, if applicable.                     </span>
<span class="4236597300486677730" onmouseenter="enter('4236597300486677730');" onmouseout="out('4236597300486677730');" style=""> 592                  //This is useful for ToOneLookups if that ToOneLookup uses AdminMainEntity to drive               </span>
<span class="2696338225815060194" onmouseenter="enter('2696338225815060194');" onmouseout="out('2696338225815060194');" style=""> 593                  //its display name.                                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 594                  try {                                                                                             </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 595                      Property propertyItem = new Property();                                                       </span>
<span class="459927527015615277" onmouseenter="enter('459927527015615277');" onmouseout="out('459927527015615277');" style=""> 596                      propertyItem.setName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);                              </span>
<span class="-3439538412113948348" onmouseenter="enter('-3439538412113948348');" onmouseout="out('-3439538412113948348');" style=""> 597                      propertyItem.setValue(((AdminMainEntity) entity).getMainEntityName());                        </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 598                      props.add(propertyItem);                                                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 599                  } catch (Exception e) {                                                                           </span>
<span class="-6660676054828691164" onmouseenter="enter('-6660676054828691164');" onmouseout="out('-6660676054828691164');" style=""><abbr title=" 600                      //do nothing here except for not add the property. Exceptions could occur when there is a validation"> 600                      //do nothing here except for not add the property. Exceptions could occur when there is a valiðŸ”µ</abbr></span>
<span class="6622622754482242268" onmouseenter="enter('6622622754482242268');" onmouseout="out('6622622754482242268');" style=""><abbr title=" 601                      //issue and some properties/relationships that are used for gleaning the main entity name end up"> 601                      //issue and some properties/relationships that are used for gleaning the main entity name end ðŸ”µ</abbr></span>
<span class="-3324578144663288556" onmouseenter="enter('-3324578144663288556');" onmouseout="out('-3324578144663288556');" style=""> 602                      //not being set                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 603                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 604              }                                                                                                     </span>
<span class="6525223774393628953" onmouseenter="enter('6525223774393628953');" onmouseout="out('6525223774393628953');" style=""> 605              for (Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                              </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 606                  String property = entry.getKey();                                                                 </span>
<span class="-6557658272043627235" onmouseenter="enter('-6557658272043627235');" onmouseout="out('-6557658272043627235');" style=""> 607                  BasicFieldMetadata metadata = (BasicFieldMetadata) entry.getValue();                              </span>
<span class="1571137238250878820" onmouseenter="enter('1571137238250878820');" onmouseout="out('1571137238250878820');" style=""><abbr title=" 608                  if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.getClass().isAssignableFrom(Class.forName(metadata.getInheritedFromType()))) {"> 608                  if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.gðŸ”µ</abbr></span>
<span class="6995086675671638042" onmouseenter="enter('6995086675671638042');" onmouseout="out('6995086675671638042');" style=""> 609                      boolean proceed = true;                                                                       </span>
<span class="1084798123261065834" onmouseenter="enter('1084798123261065834');" onmouseout="out('1084798123261065834');" style=""> 610                      if (property.contains(&quot;.&quot;)) {                                                                 </span>
<span class="-2955712908532642203" onmouseenter="enter('-2955712908532642203');" onmouseout="out('-2955712908532642203');" style=""> 611                          StringTokenizer tokens = new StringTokenizer(property, &quot;.&quot;);                              </span>
<span class="682329956200427964" onmouseenter="enter('682329956200427964');" onmouseout="out('682329956200427964');" style=""> 612                          Object testObject = entity;                                                               </span>
<span class="2196330750852339617" onmouseenter="enter('2196330750852339617');" onmouseout="out('2196330750852339617');" style=""> 613                          while (tokens.hasMoreTokens()) {                                                          </span>
<span class="-3851292165554806554" onmouseenter="enter('-3851292165554806554');" onmouseout="out('-3851292165554806554');" style=""> 614                              String token = tokens.nextToken();                                                    </span>
<span class="7999260116794465545" onmouseenter="enter('7999260116794465545');" onmouseout="out('7999260116794465545');" style=""> 615                              if (tokens.hasMoreTokens()) {                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 616                                  try {                                                                             </span>
<span class="1542151824276478361" onmouseenter="enter('1542151824276478361');" onmouseout="out('1542151824276478361');" style=""> 617                                      testObject = fieldManager.getFieldValue(testObject, token);                   </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 618                                  } catch (FieldNotAvailableException e) {                                          </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 619                                      proceed = false;                                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 620                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621                                  }                                                                                 </span>
<span class="8671980878137139761" onmouseenter="enter('8671980878137139761');" onmouseout="out('8671980878137139761');" style=""> 622                                  if (testObject == null) {                                                         </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 623                                      Property propertyItem = new Property();                                       </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 624                                      propertyItem.setName(property);                                               </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 625                                      if (props.contains(propertyItem)) {                                           </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 626                                          proceed = false;                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 627                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628                                      }                                                                             </span>
<span class="-1297206784742569730" onmouseenter="enter('-1297206784742569730');" onmouseout="out('-1297206784742569730');" style=""> 629                                      propertyItem.setValue(null);                                                  </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 630                                      props.add(propertyItem);                                                      </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 631                                      proceed = false;                                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 632                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 633                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636                      }                                                                                             </span>
<span class="6772675439678687977" onmouseenter="enter('6772675439678687977');" onmouseout="out('6772675439678687977');" style=""> 637                      if (!proceed) {                                                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 638                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 639                      }                                                                                             </span>
<span  style=""> 640                                                                                                                    </span>
<span class="-7680907447726339638" onmouseenter="enter('-7680907447726339638');" onmouseout="out('-7680907447726339638');" style=""> 641                      boolean isFieldAccessible = true;                                                             </span>
<span class="1714704837357165345" onmouseenter="enter('1714704837357165345');" onmouseout="out('1714704837357165345');" style=""> 642                      Object value = null;                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 643                      try {                                                                                         </span>
<span class="-802340144122893040" onmouseenter="enter('-802340144122893040');" onmouseout="out('-802340144122893040');" style=""> 644                          value = fieldManager.getFieldValue(entity, property);                                     </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 645                      } catch (FieldNotAvailableException e) {                                                      </span>
<span class="-5134531397184128099" onmouseenter="enter('-5134531397184128099');" onmouseout="out('-5134531397184128099');" style=""> 646                          isFieldAccessible = false;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647                      }                                                                                             </span>
<span class="-1242713994964830615" onmouseenter="enter('-1242713994964830615');" onmouseout="out('-1242713994964830615');" style=""> 648                      checkField:                                                                                   </span>
<span class="5677081435180812955" onmouseenter="enter('5677081435180812955');" onmouseout="out('5677081435180812955');" style=""> 649                      {                                                                                             </span>
<span class="-358387007955156467" onmouseenter="enter('-358387007955156467');" onmouseout="out('-358387007955156467');" style=""> 650                          if (isFieldAccessible) {                                                                  </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 651                              Property propertyItem = new Property();                                               </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 652                              propertyItem.setName(property);                                                       </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 653                              if (props.contains(propertyItem)) {                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 654                                  continue;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655                              }                                                                                     </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 656                              props.add(propertyItem);                                                              </span>
<span class="4812619489526695632" onmouseenter="enter('4812619489526695632');" onmouseout="out('4812619489526695632');" style=""> 657                              String displayVal = propertyItem.getDisplayValue();                                   </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 658                              boolean handled = false;                                                              </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 659                              for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) { </span>
<span class="-6209348320960420357" onmouseenter="enter('-6209348320960420357');" onmouseout="out('-6209348320960420357');" style=""> 660                                  MetadataProviderResponse response = fieldPersistenceProvider.extractValue(        </span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""> 661                                          new ExtractValueRequest(props, fieldManager, metadata, value, displayVal, </span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""> 662                                                  persistenceManager, this, entity, customCriteria), propertyItem); </span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 663                                  if (MetadataProviderResponse.NOT_HANDLED != response) {                           </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 664                                      handled = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 665                                  }                                                                                 </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 666                                  if (MetadataProviderResponse.HANDLED_BREAK == response) {                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 667                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 668                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 669                              }                                                                                     </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 670                              if (!handled) {                                                                       </span>
<span class="5660532463858602467" onmouseenter="enter('5660532463858602467');" onmouseout="out('5660532463858602467');" style=""> 671                                  defaultFieldPersistenceProvider.extractValue(                                     </span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""> 672                                          new ExtractValueRequest(props, fieldManager, metadata, value, displayVal, </span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""> 673                                                  persistenceManager, this, entity, customCriteria), propertyItem); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674                              }                                                                                     </span>
<span class="-6426908400831293887" onmouseenter="enter('-6426908400831293887');" onmouseout="out('-6426908400831293887');" style=""> 675                              break checkField;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 676                          }                                                                                         </span>
<span class="-243574896110033323" onmouseenter="enter('-243574896110033323');" onmouseout="out('-243574896110033323');" style=""> 677                          //try a direct property acquisition via reflection                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 678                          try {                                                                                     </span>
<span class="7672623756603956505" onmouseenter="enter('7672623756603956505');" onmouseout="out('7672623756603956505');" style=""> 679                              String strVal = null;                                                                 </span>
<span class="3529628081213965373" onmouseenter="enter('3529628081213965373');" onmouseout="out('3529628081213965373');" style=""> 680                              Method method;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 681                              try {                                                                                 </span>
<span class="-188265031890242666" onmouseenter="enter('-188265031890242666');" onmouseout="out('-188265031890242666');" style=""> 682                                  //try a &#x27;get&#x27; prefixed mutator first                                              </span>
<span class="2344864789387251771" onmouseenter="enter('2344864789387251771');" onmouseout="out('2344864789387251771');" style=""><abbr title=" 683                                  String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.substring(1, property.length());"> 683                                  String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.substring(ðŸ”µ</abbr></span>
<span class="6434236432742156955" onmouseenter="enter('6434236432742156955');" onmouseout="out('6434236432742156955');" style=""> 684                                  method = entity.getClass().getMethod(temp, new Class[] {});                       </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 685                              } catch (NoSuchMethodException e) {                                                   </span>
<span class="5628920111567796624" onmouseenter="enter('5628920111567796624');" onmouseout="out('5628920111567796624');" style=""> 686                                  method = entity.getClass().getMethod(property, new Class[] {});                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 687                              }                                                                                     </span>
<span class="-1268801467547302511" onmouseenter="enter('-1268801467547302511');" onmouseout="out('-1268801467547302511');" style=""> 688                              value = method.invoke(entity, new String[] {});                                       </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 689                              Property propertyItem = new Property();                                               </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 690                              propertyItem.setName(property);                                                       </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 691                              if (props.contains(propertyItem)) {                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 692                                  continue;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 693                              }                                                                                     </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 694                              props.add(propertyItem);                                                              </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 695                              if (value == null) {                                                                  </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 696                                  strVal = null;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 697                              } else {                                                                              </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 698                                  if (Date.class.isAssignableFrom(value.getClass())) {                              </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 699                                      strVal = getSimpleDateFormatter().format((Date) value);                       </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 700                                  } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                  </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""><abbr title=" 701                                      strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));"> 701                                      strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime(ðŸ”µ</abbr></span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 702                                  } else if (Calendar.class.isAssignableFrom(value.getClass())) {                   </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 703                                      strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());       </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 704                                  } else if (Double.class.isAssignableFrom(value.getClass())) {                     </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 705                                      strVal = getDecimalFormatter().format(value);                                 </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 706                                  } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                 </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 707                                      strVal = getDecimalFormatter().format(value);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 708                                  } else {                                                                          </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 709                                      strVal = value.toString();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 711                              }                                                                                     </span>
<span class="-430028306468799565" onmouseenter="enter('-430028306468799565');" onmouseout="out('-430028306468799565');" style=""> 712                              propertyItem.setValue(strVal);                                                        </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 713                          } catch (NoSuchMethodException e) {                                                       </span>
<span class="8429567218540762891" onmouseenter="enter('8429567218540762891');" onmouseout="out('8429567218540762891');" style=""><abbr title=" 714                              LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(property));"> 714                              LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(ðŸ”µ</abbr></span>
<span class="4115063574789816242" onmouseenter="enter('4115063574789816242');" onmouseout="out('4115063574789816242');" style=""> 715                              //do nothing - this property is simply not in the bean                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 719              }                                                                                                     </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 720          } catch (ClassNotFoundException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 721              throw new PersistenceException(e);                                                                    </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 722          } catch (IllegalAccessException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 723              throw new PersistenceException(e);                                                                    </span>
<span class="-291101072954915259" onmouseenter="enter('-291101072954915259');" onmouseout="out('-291101072954915259');" style=""> 724          } catch (InvocationTargetException e) {                                                                   </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 725              throw new PersistenceException(e);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727      }                                                                                                             </span>
<span  style=""> 728                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 729      @Override                                                                                                     </span>
<span class="-6161842232508714198" onmouseenter="enter('-6161842232508714198');" onmouseout="out('-6161842232508714198');" style=""> 730      public String getStringValueFromGetter(Serializable instance, String propertyName)                            </span>
<span class="1769827535532852924" onmouseenter="enter('1769827535532852924');" onmouseout="out('1769827535532852924');" style=""> 731              throws IllegalAccessException, InvocationTargetException, NoSuchMethodException {                     </span>
<span class="5278483549685517830" onmouseenter="enter('5278483549685517830');" onmouseout="out('5278483549685517830');" style=""> 732          Object value = PropertyUtils.getProperty(instance, propertyName);                                         </span>
<span class="-6587533849078029241" onmouseenter="enter('-6587533849078029241');" onmouseout="out('-6587533849078029241');" style=""> 733          return formatValue(value);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 734      }                                                                                                             </span>
<span  style=""> 735                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 736      @Override                                                                                                     </span>
<span class="1304124062790730283" onmouseenter="enter('1304124062790730283');" onmouseout="out('1304124062790730283');" style=""> 737      public String formatValue(Object value) {                                                                     </span>
<span class="5239272094010467374" onmouseenter="enter('5239272094010467374');" onmouseout="out('5239272094010467374');" style=""> 738          String strVal;                                                                                            </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 739          if (value == null) {                                                                                      </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 740              strVal = null;                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 741          } else {                                                                                                  </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 742              if (Date.class.isAssignableFrom(value.getClass())) {                                                  </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 743                  strVal = getSimpleDateFormatter().format((Date) value);                                           </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 744              } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                                      </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""> 745                  strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));                </span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 746              } else if (Calendar.class.isAssignableFrom(value.getClass())) {                                       </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 747                  strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());                           </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 748              } else if (Double.class.isAssignableFrom(value.getClass())) {                                         </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 749                  strVal = getDecimalFormatter().format(value);                                                     </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 750              } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                                     </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 751                  strVal = getDecimalFormatter().format(value);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 752              } else {                                                                                              </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 753                  strVal = value.toString();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 754              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 755          }                                                                                                         </span>
<span class="3782478248632503544" onmouseenter="enter('3782478248632503544');" onmouseout="out('3782478248632503544');" style=""> 756          return strVal;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 757      }                                                                                                             </span>
<span  style=""> 758                                                                                                                    </span>
<span class="1185233632623235579" onmouseenter="enter('1185233632623235579');" onmouseout="out('1185233632623235579');" style=""><abbr title=" 759      protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntity) throws ServiceException {"> 759      protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 760          EntityResult entityResult = new EntityResult();                                                           </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 761          Entity entity = persistencePackage.getEntity();                                                           </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 762          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title=" 763          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);"> 763          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style=""> 764          if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                                     </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 765              throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766          }                                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 767          try {                                                                                                     </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 768              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 768              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFulðŸ”µ</abbr></span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 769              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 769              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style=""> 770                      persistencePackage.getCeilingEntityFullyQualifiedClassname(),                                 </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 771                      entities,                                                                                     </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style=""> 772                      foreignKey,                                                                                   </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 773                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 774                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 775                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 776                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 777                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 778                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 779                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 780                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 781                      );                                                                                            </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 782              if (primaryKey == null) {                                                                             </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style=""> 783                  primaryKey = getPrimaryKey(entity, mergedProperties);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 784              }                                                                                                     </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title=" 785              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);"> 785              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getTypeðŸ”µ</abbr></span>
<span  style=""> 786                                                                                                                    </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style=""> 787              Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                                  </span>
<span  style=""> 788                                                                                                                    </span>
<span class="861834480888806983" onmouseenter="enter('861834480888806983');" onmouseout="out('861834480888806983');" style=""> 789              if (!entity.isValidationFailure()) {                                                                  </span>
<span class="-6661343286258909963" onmouseenter="enter('-6661343286258909963');" onmouseout="out('-6661343286258909963');" style=""> 790                  //Re-Balance the list if it is a Foreign Key toMany collection with a sort field property         </span>
<span class="4247210219521112592" onmouseenter="enter('4247210219521112592');" onmouseout="out('4247210219521112592');" style=""> 791                  if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null &amp;&amp;                                    </span>
<span class="235375556032951584" onmouseenter="enter('235375556032951584');" onmouseout="out('235375556032951584');" style=""> 792                          entity.findProperty(foreignKey.getSortField()) != null &amp;&amp;                                 </span>
<span class="7175038170339042705" onmouseenter="enter('7175038170339042705');" onmouseout="out('7175038170339042705');" style=""> 793                          entity.findProperty(foreignKey.getSortField()).getValue() != null) {                      </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""> 794                      ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();       </span>
<span class="5598129937237964517" onmouseenter="enter('5598129937237964517');" onmouseout="out('5598129937237964517');" style=""> 795                      extensionManager.getProxy().rebalanceForUpdate(this, persistencePackage, instance,            </span>
<span class="4380637637969964834" onmouseenter="enter('4380637637969964834');" onmouseout="out('4380637637969964834');" style=""> 796                              mergedProperties, primaryKey, result);                                                </span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style=""> 797                      instance = result.getResult();                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 798                  } else {                                                                                          </span>
<span class="5297856757316311321" onmouseenter="enter('5297856757316311321');" onmouseout="out('5297856757316311321');" style=""><abbr title=" 799                      instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackage.isValidateUnsubmittedProperties());"> 799                      instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 800                  }                                                                                                 </span>
<span  style=""> 801                                                                                                                    </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 802                  instance = persistenceManager.getDynamicEntityDao().merge(instance);                              </span>
<span class="-1264761314664469309" onmouseenter="enter('-1264761314664469309');" onmouseout="out('-1264761314664469309');" style=""> 803                  if (includeRealEntity) {                                                                          </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style=""> 804                      entityResult.setEntityBackingObject(instance);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 805                  }                                                                                                 </span>
<span  style=""> 806                                                                                                                    </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 807                  List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                                   </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 808                  entityList.add(instance);                                                                         </span>
<span  style=""> 809                                                                                                                    </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style=""> 810                  entity = getRecords(mergedProperties, entityList, null, null, null)[0];                           </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 811                  entityResult.setEntity(entity);                                                                   </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 812                  return entityResult;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 813              } else {                                                                                              </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 814                  entityResult.setEntity(entity);                                                                   </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 815                  return entityResult;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 817          } catch (Exception e) {                                                                                   </span>
<span class="-3425838462618159609" onmouseenter="enter('-3425838462618159609');" onmouseout="out('-3425838462618159609');" style=""> 818              throw new ServiceException(&quot;Problem updating entity : &quot; + e.getMessage(), e);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 820      }                                                                                                             </span>
<span  style=""> 821                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 822      @Override                                                                                                     </span>
<span class="6684144434931310538" onmouseenter="enter('6684144434931310538');" onmouseout="out('6684144434931310538');" style=""> 823      public String getIdPropertyName(String entityClass) {                                                         </span>
<span class="7569829358594867468" onmouseenter="enter('7569829358594867468');" onmouseout="out('7569829358594867468');" style=""> 824          return persistenceManager.getIdPropertyName(entityClass);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825      }                                                                                                             </span>
<span  style=""> 826                                                                                                                    </span>
<span class="7385985390784408317" onmouseenter="enter('7385985390784408317');" onmouseout="out('7385985390784408317');" style=""> 827      public String getIdPropertyName(Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                      </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""> 828          Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);    </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 829          for (String property : mergedProperties.keySet()) {                                                       </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 830              BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);                        </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 831              if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {                        </span>
<span class="6489038301515904267" onmouseenter="enter('6489038301515904267');" onmouseout="out('6489038301515904267');" style=""> 832                  return property;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 834          }                                                                                                         </span>
<span  style=""> 835                                                                                                                    </span>
<span class="8030319575516697150" onmouseenter="enter('8030319575516697150');" onmouseout="out('8030319575516697150');" style=""> 836          throw new RuntimeException(&quot;Could not find a primary key property in the passed merged properties list&quot;); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 837      }                                                                                                             </span>
<span  style=""> 838                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 839      @Override                                                                                                     </span>
<span class="7601553640468247936" onmouseenter="enter('7601553640468247936');" onmouseout="out('7601553640468247936');" style=""> 840      public Object getPrimaryKey(Entity entity, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {           </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""> 841          Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);    </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style=""> 842          Object primaryKey = null;                                                                                 </span>
<span class="-4343749490203255033" onmouseenter="enter('-4343749490203255033');" onmouseout="out('-4343749490203255033');" style=""> 843          String idPropertyName = null;                                                                             </span>
<span class="-1032829863063040815" onmouseenter="enter('-1032829863063040815');" onmouseout="out('-1032829863063040815');" style=""> 844          BasicFieldMetadata metaData = null;                                                                       </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 845          for (String property : mergedProperties.keySet()) {                                                       </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 846              BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);                        </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 847              if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {                        </span>
<span class="4480138875282582699" onmouseenter="enter('4480138875282582699');" onmouseout="out('4480138875282582699');" style=""> 848                  idPropertyName = property;                                                                        </span>
<span class="-6207089020080563293" onmouseenter="enter('-6207089020080563293');" onmouseout="out('-6207089020080563293');" style=""> 849                  metaData = temp;                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 850                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852          }                                                                                                         </span>
<span class="-4447124933950039126" onmouseenter="enter('-4447124933950039126');" onmouseout="out('-4447124933950039126');" style=""> 853          if (idPropertyName == null) {                                                                             </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title=" 854              throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);"> 854              throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855          }                                                                                                         </span>
<span class="-5346955267205588229" onmouseenter="enter('-5346955267205588229');" onmouseout="out('-5346955267205588229');" style=""> 856          for (Property property : entity.getProperties()) {                                                        </span>
<span class="7886586292686555176" onmouseenter="enter('7886586292686555176');" onmouseout="out('7886586292686555176');" style=""> 857              if (property.getName().equals(idPropertyName)) {                                                      </span>
<span class="2464652692956328654" onmouseenter="enter('2464652692956328654');" onmouseout="out('2464652692956328654');" style=""> 858                  switch (metaData.getSecondaryType()) {                                                            </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 859                      case INTEGER:                                                                                 </span>
<span class="-6121369465424712252" onmouseenter="enter('-6121369465424712252');" onmouseout="out('-6121369465424712252');" style=""> 860                          primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValue());    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 861                          break;                                                                                    </span>
<span class="6509618406235281730" onmouseenter="enter('6509618406235281730');" onmouseout="out('6509618406235281730');" style=""> 862                      case STRING:                                                                                  </span>
<span class="1585063350949159261" onmouseenter="enter('1585063350949159261');" onmouseout="out('1585063350949159261');" style=""> 863                          primaryKey = property.getValue();                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 864                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 865                  }                                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 866                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 867              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868          }                                                                                                         </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 869          if (primaryKey == null) {                                                                                 </span>
<span class="586132424145349171" onmouseenter="enter('586132424145349171');" onmouseout="out('586132424145349171');" style=""><abbr title=" 870              throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) in the passed entity with type: &quot; + entity.getType()[0]);"> 870              throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) in the paðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871          }                                                                                                         </span>
<span class="445877428068937777" onmouseenter="enter('445877428068937777');" onmouseout="out('445877428068937777');" style=""> 872          return primaryKey;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 873      }                                                                                                             </span>
<span  style=""> 874                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 875      @Override                                                                                                     </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 876      public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,                   </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 877              CriteriaTransferObject cto,                                                                           </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 878              String ceilingEntityFullyQualifiedClassname,                                                          </span>
<span class="-8254447054846048089" onmouseenter="enter('-8254447054846048089');" onmouseout="out('-8254447054846048089');" style=""> 879              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties,                                                </span>
<span class="3731877525338754789" onmouseenter="enter('3731877525338754789');" onmouseout="out('3731877525338754789');" style=""> 880              RestrictionFactory customRestrictionFactory) {                                                        </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""> 881          Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);    </span>
<span class="5454417750033935999" onmouseenter="enter('5454417750033935999');" onmouseout="out('5454417750033935999');" style=""> 882          List&lt;FilterMapping&gt; filterMappings = new ArrayList&lt;FilterMapping&gt;();                                      </span>
<span  style=""> 883                                                                                                                    </span>
<span class="5160955752092959572" onmouseenter="enter('5160955752092959572');" onmouseout="out('5160955752092959572');" style=""> 884          for (String propertyId : cto.getCriteriaMap().keySet()) {                                                 </span>
<span class="4532640545066977906" onmouseenter="enter('4532640545066977906');" onmouseout="out('4532640545066977906');" style=""> 885              if (mergedProperties.containsKey(propertyId)) {                                                       </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 886                  boolean handled = false;                                                                          </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 887                  for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {             </span>
<span class="-6114175924026036851" onmouseenter="enter('-6114175924026036851');" onmouseout="out('-6114175924026036851');" style=""> 888                      MetadataProviderResponse response = fieldPersistenceProvider.addSearchMapping(                </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 889                              new AddSearchMappingRequest(persistencePerspective, cto,                              </span>
<span class="5810135378246725068" onmouseenter="enter('5810135378246725068');" onmouseout="out('5810135378246725068');" style=""> 890                                      ceilingEntityFullyQualifiedClassname, mergedProperties,                       </span>
<span class="5077524350528682045" onmouseenter="enter('5077524350528682045');" onmouseout="out('5077524350528682045');" style=""><abbr title=" 891                                      propertyId, getFieldManager(), this, this, customRestrictionFactory==null?restrictionFactory"> 891                                      propertyId, getFieldManager(), this, this, customRestrictionFactory==null?restðŸ”µ</abbr></span>
<span class="6427059933663878801" onmouseenter="enter('6427059933663878801');" onmouseout="out('6427059933663878801');" style=""> 892                                      :customRestrictionFactory), filterMappings);                                  </span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 893                      if (MetadataProviderResponse.NOT_HANDLED != response) {                                       </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 894                          handled = true;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895                      }                                                                                             </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 896                      if (MetadataProviderResponse.HANDLED_BREAK == response) {                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 897                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 898                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 899                  }                                                                                                 </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 900                  if (!handled) {                                                                                   </span>
<span class="8038403104028382935" onmouseenter="enter('8038403104028382935');" onmouseout="out('8038403104028382935');" style=""> 901                      defaultFieldPersistenceProvider.addSearchMapping(                                             </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 902                              new AddSearchMappingRequest(persistencePerspective, cto,                              </span>
<span class="-1188580278753724323" onmouseenter="enter('-1188580278753724323');" onmouseout="out('-1188580278753724323');" style=""> 903                                      ceilingEntityFullyQualifiedClassname, mergedProperties, propertyId,           </span>
<span class="-6646794478608592484" onmouseenter="enter('-6646794478608592484');" onmouseout="out('-6646794478608592484');" style=""><abbr title=" 904                                      getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFactory"> 904                                      getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFðŸ”µ</abbr></span>
<span class="878086898277429379" onmouseenter="enter('878086898277429379');" onmouseout="out('878086898277429379');" style=""> 905                                              : customRestrictionFactory), filterMappings);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 906                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 907              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 908          }                                                                                                         </span>
<span class="-1900027260049794739" onmouseenter="enter('-1900027260049794739');" onmouseout="out('-1900027260049794739');" style=""> 909          return filterMappings;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910      }                                                                                                             </span>
<span  style=""> 911                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 912      @Override                                                                                                     </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 913      public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,                   </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 914              CriteriaTransferObject cto,                                                                           </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 915              String ceilingEntityFullyQualifiedClassname,                                                          </span>
<span class="-8055727947789817499" onmouseenter="enter('-8055727947789817499');" onmouseout="out('-8055727947789817499');" style=""> 916              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                                              </span>
<span class="81017552378868833" onmouseenter="enter('81017552378868833');" onmouseout="out('81017552378868833');" style=""><abbr title=" 917          return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilteredProperties, null);"> 917          return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilterðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 918      }                                                                                                             </span>
<span  style=""> 919                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 920      @Override                                                                                                     </span>
<span class="897240738537618425" onmouseenter="enter('897240738537618425');" onmouseout="out('897240738537618425');" style=""><abbr title=" 921      public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; mergedProperties, List&lt;Property&gt; properties) {"> 921      public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; ðŸ”µ</abbr></span>
<span class="-5864020654264554558" onmouseenter="enter('-5864020654264554558');" onmouseout="out('-5864020654264554558');" style=""><abbr title=" 922          extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), properties, false, MergedPropertyType.PRIMARY);"> 922          extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), propertieðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 923      }                                                                                                             </span>
<span  style=""> 924                                                                                                                    </span>
<span class="203860492987878792" onmouseenter="enter('203860492987878792');" onmouseout="out('203860492987878792');" style=""><abbr title=" 925      protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedProperties, List&lt;Property&gt; properties, Boolean isHiddenOverride, MergedPropertyType type) {"> 925      protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedPropðŸ”µ</abbr></span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 926 +        Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 927 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 928 +            @Override                                                                                             </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 929 +            public int compare(Property o1, Property o2) {                                                        </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 930 +                return o1.getName().compareTo(o2.getName());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 931 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 932 +        };                                                                                                        </span>
<span class="-6235585592219807242" onmouseenter="enter('-6235585592219807242');" onmouseout="out('-6235585592219807242');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 933 +        properties.sort(comparator);                                                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 934 +                                                                                                                  </span>
<span class="-2434831074249628531" onmouseenter="enter('-2434831074249628531');" onmouseout="out('-2434831074249628531');" style=""> 935          for (Map.Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                              </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 936              String property = entry.getKey();                                                                     </span>
<span class="-231152183806873874" onmouseenter="enter('-231152183806873874');" onmouseout="out('-231152183806873874');" style=""> 937              Property prop = new Property();                                                                       </span>
<span class="-3770108933014957253" onmouseenter="enter('-3770108933014957253');" onmouseout="out('-3770108933014957253');" style=""> 938              FieldMetadata metadata = mergedProperties.get(property);                                              </span>
<span class="-6395393149471547560" onmouseenter="enter('-6395393149471547560');" onmouseout="out('-6395393149471547560');" style=""> 939              prop.setName(property);                                                                               </span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 940 -            Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 941 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 942 -                @Override                                                                                         </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 943 -                public int compare(Property o1, Property o2) {                                                    </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 944 -                    return o1.getName().compareTo(o2.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 945 -                }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 946 -            };                                                                                                    </span>
<span class="-7612884103774291324" onmouseenter="enter('-7612884103774291324');" onmouseout="out('-7612884103774291324');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 947 -            Collections.sort(properties, comparator);                                                             </span>

<span class="-2139676366648139964" onmouseenter="enter('-2139676366648139964');" onmouseout="out('-2139676366648139964');" style=""> 948              int pos = Collections.binarySearch(properties, prop, comparator);                                     </span>
<span class="-2417851046359094762" onmouseenter="enter('-2417851046359094762');" onmouseout="out('-2417851046359094762');" style=""><abbr title=" 949              if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREVALUE != type) {"> 949              if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREVALUE != ðŸ”µ</abbr></span>
<span class="-1490193869050628697" onmouseenter="enter('-1490193869050628697');" onmouseout="out('-1490193869050628697');" style=""> 950                  logWarn: {                                                                                        </span>
<span class="5327179807238785116" onmouseenter="enter('5327179807238785116');" onmouseout="out('5327179807238785116');" style=""><abbr title=" 951                      if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadata) metadata).getFieldType())) {"> 951                      if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadðŸ”µ</abbr></span>
<span class="6221076133691521085" onmouseenter="enter('6221076133691521085');" onmouseout="out('6221076133691521085');" style=""> 952                          //don&#x27;t warn for id field collisions, but still ignore the colliding fields               </span>
<span class="1303890499227207840" onmouseenter="enter('1303890499227207840');" onmouseout="out('1303890499227207840');" style=""> 953                          break logWarn;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 954                      }                                                                                             </span>
<span class="-3406896845088854457" onmouseenter="enter('-3406896845088854457');" onmouseout="out('-3406896845088854457');" style=""><abbr title=" 955                      //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + &quot;) during inspection for the inheritance line starting with (&quot; + inheritanceLine[0].getName() + &quot;). Ignoring the additional field. This can occur most commonly when using the @AdminPresentationAdornedTargetCollection and the collection type and target class have field names in common. This situation should be avoided, as the system will strip the repeated fields, which can cause unpredictable behavior.&quot;);"> 955                      //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 956                  }                                                                                                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 957                  continue;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 958 -            }                                                                                                     </span>
<span class="1144051059552551899" onmouseenter="enter('1144051059552551899');" onmouseout="out('1144051059552551899');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 959 -            properties.add(prop);                                                                                 </span>
<span class="5067330164177088761" onmouseenter="enter('5067330164177088761');" onmouseout="out('5067330164177088761');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 960 +            } else if (pos &lt; 0) {                                                                                 </span>
<span class="-8221812243074404132" onmouseenter="enter('-8221812243074404132');" onmouseout="out('-8221812243074404132');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 961 +                pos = -pos - 1; // calculate position to insert                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 962 +            }                                                                                                     </span>
<span class="2534204392443089313" onmouseenter="enter('2534204392443089313');" onmouseout="out('2534204392443089313');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 963 +            properties.add(pos, prop);                                                                            </span>
<span class="-4762622463962141865" onmouseenter="enter('-4762622463962141865');" onmouseout="out('-4762622463962141865');" style=""> 964              prop.setMetadata(metadata);                                                                           </span>
<span class="-6199017505159175940" onmouseenter="enter('-6199017505159175940');" onmouseout="out('-6199017505159175940');" style=""> 965              if (isHiddenOverride &amp;&amp; prop.getMetadata() instanceof BasicFieldMetadata) {                           </span>
<span class="-7685654662722475773" onmouseenter="enter('-7685654662722475773');" onmouseout="out('-7685654662722475773');" style=""> 966                  //this only makes sense for non collection types                                                  </span>
<span class="-763482179748503913" onmouseenter="enter('-763482179748503913');" onmouseout="out('-763482179748503913');" style=""> 967                  ((BasicFieldMetadata) prop.getMetadata()).setVisibility(VisibilityEnum.HIDDEN_ALL);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 968              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 969          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 970      }                                                                                                             </span>
<span  style=""> 971                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 972      @Override                                                                                                     </span>
<span class="-1145456305415279084" onmouseenter="enter('-1145456305415279084');" onmouseout="out('-1145456305415279084');" style=""><abbr title=" 973      public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; allMergedProperties) throws ServiceException {"> 973      public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, ðŸ”µ</abbr></span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title=" 974          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();"> 974          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname()ðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 975          try {                                                                                                     </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 976              PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();       </span>
<span class="3509784211613018298" onmouseenter="enter('3509784211613018298');" onmouseout="out('3509784211613018298');" style=""> 977              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClassname);</span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 978              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 978              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style=""> 979                      ceilingEntityFullyQualifiedClassname,                                                         </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 980                      entities,                                                                                     </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title=" 981                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),"> 981                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectivðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 982                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 983                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 984                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 985                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 986                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 987                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 988                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 989                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 990                      );                                                                                            </span>
<span class="3843057087083113739" onmouseenter="enter('3843057087083113739');" onmouseout="out('3843057087083113739');" style=""> 991              allMergedProperties.put(MergedPropertyType.PRIMARY, mergedProperties);                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 992          } catch (Exception e) {                                                                                   </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""> 993              throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 994          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995      }                                                                                                             </span>
<span  style=""> 996                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 997      @Override                                                                                                     </span>
<span class="-4783803183233062984" onmouseenter="enter('-4783803183233062984');" onmouseout="out('-4783803183233062984');" style=""><abbr title=" 998      public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {"> 998      public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServðŸ”µ</abbr></span>
<span class="-5998034243161331810" onmouseenter="enter('-5998034243161331810');" onmouseout="out('-5998034243161331810');" style=""> 999          return update(persistencePackage, null, true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1000      }                                                                                                             </span>
<span  style="">1001                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1002      @Override                                                                                                     </span>
<span class="-2807508720531838872" onmouseenter="enter('-2807508720531838872');" onmouseout="out('-2807508720531838872');" style="">1003      public Entity update(PersistencePackage persistencePackage) throws ServiceException {                         </span>
<span class="-5671722244832067224" onmouseenter="enter('-5671722244832067224');" onmouseout="out('-5671722244832067224');" style="">1004          EntityResult er = update(persistencePackage, null, false);                                                </span>
<span class="-4364232546893819072" onmouseenter="enter('-4364232546893819072');" onmouseout="out('-4364232546893819072');" style="">1005          return er.getEntity();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1006      }                                                                                                             </span>
<span  style="">1007                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1008      @Override                                                                                                     </span>
<span class="6001696775937434965" onmouseenter="enter('6001696775937434965');" onmouseout="out('6001696775937434965');" style="">1009      public Entity add(PersistencePackage persistencePackage) throws ServiceException {                            </span>
<span class="-7059200088088645842" onmouseenter="enter('-7059200088088645842');" onmouseout="out('-7059200088088645842');" style="">1010          EntityResult entityResult = add(persistencePackage, false);                                               </span>
<span class="2936146364192771277" onmouseenter="enter('2936146364192771277');" onmouseout="out('2936146364192771277');" style="">1011          return entityResult.getEntity();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1012      }                                                                                                             </span>
<span  style="">1013                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1014      @Override                                                                                                     </span>
<span class="7079650910076086428" onmouseenter="enter('7079650910076086428');" onmouseout="out('7079650910076086428');" style=""><abbr title="1015      public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {">1015      public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style="">1016          EntityResult entityResult = new EntityResult();                                                           </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1017          Entity entity = persistencePackage.getEntity();                                                           </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1018          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1019          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1019          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1020          if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                                     </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1021              throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1022          }                                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1023          try {                                                                                                     </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1024              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1024              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFulðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1025              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1025              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMeðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1026                      persistencePackage.getCeilingEntityFullyQualifiedClassname(),                                 </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1027                      entities,                                                                                     </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1028                      foreignKey,                                                                                   </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1029                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1030                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1031                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1032                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1033                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1034                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1035                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1036                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1037                      );                                                                                            </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style="">1038              Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);</span>
<span  style="">1039                                                                                                                    </span>
<span class="-4432713425684374872" onmouseenter="enter('-4432713425684374872');" onmouseout="out('-4432713425684374872');" style="">1040              String idProperty = null;                                                                             </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style="">1041              for (String property : mergedProperties.keySet()) {                                                   </span>
<span class="-2221369290108753372" onmouseenter="enter('-2221369290108753372');" onmouseout="out('-2221369290108753372');" style=""><abbr title="1042                  if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFieldType.ID) {">1042                  if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFieldType.ID)ðŸ”µ</abbr></span>
<span class="-5524453042327008702" onmouseenter="enter('-5524453042327008702');" onmouseout="out('-5524453042327008702');" style="">1043                      idProperty = property;                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1044                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1045                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046              }                                                                                                     </span>
<span class="1924041731168261447" onmouseenter="enter('1924041731168261447');" onmouseout="out('1924041731168261447');" style="">1047              if (idProperty == null) {                                                                             </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title="1048                  throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);">1048                  throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1049              }                                                                                                     </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style="">1050              Object primaryKey = null;                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1051              try {                                                                                                 </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style="">1052                  primaryKey = getPrimaryKey(entity, mergedProperties);                                             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1053              } catch (Exception e) {                                                                               </span>
<span class="-2276199612445624795" onmouseenter="enter('-2276199612445624795');" onmouseout="out('-2276199612445624795');" style="">1054                  //don&#x27;t do anything - this is a valid case                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1055              }                                                                                                     </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style="">1056              if (primaryKey == null) {                                                                             </span>
<span  style="">1057                                                                                                                    </span>
<span class="-425360514461332458" onmouseenter="enter('-425360514461332458');" onmouseout="out('-425360514461332458');" style="">1058                  Serializable instance = (Serializable) Class.forName(entity.getType()[0]).newInstance();          </span>
<span  style="">1059                                                                                                                    </span>
<span class="-2986273728837208353" onmouseenter="enter('-2986273728837208353');" onmouseout="out('-2986273728837208353');" style="">1060                  instance = createPopulatedInstance(instance, entity, mergedProperties, false);                    </span>
<span  style="">1061                                                                                                                    </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1062                  if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                                    </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style="">1063                      ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();       </span>
<span class="1481560234407270538" onmouseenter="enter('1481560234407270538');" onmouseout="out('1481560234407270538');" style=""><abbr title="1064                      extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedProperties, result);">1064                      extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedPropertiðŸ”µ</abbr></span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style="">1065                      instance = result.getResult();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1066                  }                                                                                                 </span>
<span  style="">1067                                                                                                                    </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1068                  instance = persistenceManager.getDynamicEntityDao().merge(instance);                              </span>
<span class="7937797480137547171" onmouseenter="enter('7937797480137547171');" onmouseout="out('7937797480137547171');" style="">1069                  if (includeRealEntityObject) {                                                                    </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style="">1070                      entityResult.setEntityBackingObject(instance);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1071                  }                                                                                                 </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style="">1072                  List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                                   </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style="">1073                  entityList.add(instance);                                                                         </span>
<span  style="">1074                                                                                                                    </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style="">1075                  entity = getRecords(mergedProperties, entityList, null, null, null)[0];                           </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style="">1076                  entityResult.setEntity(entity);                                                                   </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style="">1077                  return entityResult;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1078              } else {                                                                                              </span>
<span class="-5905945487992976049" onmouseenter="enter('-5905945487992976049');" onmouseout="out('-5905945487992976049');" style="">1079                  return update(persistencePackage, primaryKey, includeRealEntityObject);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1080              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1081          } catch (Exception e) {                                                                                   </span>
<span class="-3635977582445593738" onmouseenter="enter('-3635977582445593738');" onmouseout="out('-3635977582445593738');" style="">1082              throw new ServiceException(&quot;Problem adding new entity : &quot; + e.getMessage(), e);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1083          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084      }                                                                                                             </span>
<span  style="">1085                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1086      @Override                                                                                                     </span>
<span class="-8285012329134109181" onmouseenter="enter('-8285012329134109181');" onmouseout="out('-8285012329134109181');" style="">1087      public void remove(PersistencePackage persistencePackage) throws ServiceException {                           </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1088          Entity entity = persistencePackage.getEntity();                                                           </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1089          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1090          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1090          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1091          if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                                     </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1092              throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1093          }                                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1094          try {                                                                                                     </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1095              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1095              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFulðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1096              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1096              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMeðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1097                      persistencePackage.getCeilingEntityFullyQualifiedClassname(),                                 </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1098                      entities,                                                                                     </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1099                      foreignKey,                                                                                   </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1100                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1101                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1102                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1103                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1104                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1105                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1106                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1107                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1108                      );                                                                                            </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style="">1109              Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);</span>
<span class="-1223682136408553234" onmouseenter="enter('-1223682136408553234');" onmouseout="out('-1223682136408553234');" style="">1110              Object primaryKey = getPrimaryKey(entity, mergedProperties);                                          </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title="1111              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);">1111              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getTypeðŸ”µ</abbr></span>
<span  style="">1112                                                                                                                    </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style="">1113              Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                                  </span>
<span  style="">1114                                                                                                                    </span>
<span class="6713488701284006207" onmouseenter="enter('6713488701284006207');" onmouseout="out('6713488701284006207');" style="">1115              switch (persistencePerspective.getOperationTypes().getRemoveType()) {                                 </span>
<span class="5189123261615208670" onmouseenter="enter('5189123261615208670');" onmouseout="out('5189123261615208670');" style="">1116                  case NONDESTRUCTIVEREMOVE:                                                                        </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style="">1117                      FieldManager fieldManager = getFieldManager();                                                </span>
<span class="3973215198680528904" onmouseenter="enter('3973215198680528904');" onmouseout="out('3973215198680528904');" style=""><abbr title="1118                      FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField());">1118                      FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField()ðŸ”µ</abbr></span>
<span class="1169143210599293613" onmouseenter="enter('1169143210599293613');" onmouseout="out('1169143210599293613');" style="">1119                      Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue();        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1120                      try {                                                                                         </span>
<span class="-7359786243551687396" onmouseenter="enter('-7359786243551687396');" onmouseout="out('-7359786243551687396');" style="">1121                          foreignKeyValue = Long.valueOf((String) foreignKeyValue);                                 </span>
<span class="7366941412324817508" onmouseenter="enter('7366941412324817508');" onmouseout="out('7366941412324817508');" style="">1122                      } catch (NumberFormatException e) {                                                           </span>
<span class="7012272079852218418" onmouseenter="enter('7012272079852218418');" onmouseout="out('7012272079852218418');" style="">1123                          LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove lookup&quot;);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1124                      }                                                                                             </span>
<span class="7279695966184570355" onmouseenter="enter('7279695966184570355');" onmouseout="out('7279695966184570355');" style=""><abbr title="1125                      Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(foreignKey.getForeignKeyClass()), foreignKeyValue);">1125                      Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forNameðŸ”µ</abbr></span>
<span class="-6891408169238328357" onmouseenter="enter('-6891408169238328357');" onmouseout="out('-6891408169238328357');" style=""><abbr title="1126                      Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreignKey.getOriginatingField());">1126                      Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreignKey.geðŸ”µ</abbr></span>
<span class="8045950107739873006" onmouseenter="enter('8045950107739873006');" onmouseout="out('8045950107739873006');" style="">1127                      collection.remove(instance);                                                                  </span>
<span class="7309400259168651936" onmouseenter="enter('7309400259168651936');" onmouseout="out('7309400259168651936');" style=""><abbr title="1128                      // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreign key on">1128                      // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreigðŸ”µ</abbr></span>
<span class="7114131295623762638" onmouseenter="enter('7114131295623762638');" onmouseout="out('7114131295623762638');" style="">1129                      // the @ManyToOne side) then it will not be updated. In that instance, we have to explicitly  </span>
<span class="3943491933719923666" onmouseenter="enter('3943491933719923666');" onmouseout="out('3943491933719923666');" style="">1130                      // set the manyTo field to null so that subsequent lookups will not find it                   </span>
<span class="2820622934029903464" onmouseenter="enter('2820622934029903464');" onmouseout="out('2820622934029903464');" style="">1131                      if (manyToFieldMetadata instanceof BasicFieldMetadata) {                                      </span>
<span class="3041576912599376884" onmouseenter="enter('3041576912599376884');" onmouseout="out('3041576912599376884');" style="">1132                          if (BooleanUtils.isTrue(((BasicFieldMetadata) manyToFieldMetadata).getRequired())) {      </span>
<span class="-3179114257339016284" onmouseenter="enter('-3179114257339016284');" onmouseout="out('-3179114257339016284');" style=""><abbr title="1133                              throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne side is a&quot;">1133                              throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne sideðŸ”µ</abbr></span>
<span class="-7704143059315768665" onmouseenter="enter('-7704143059315768665');" onmouseout="out('-7704143059315768665');" style=""><abbr title="1134                                      + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyToOne annotation&quot;">1134                                      + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyTðŸ”µ</abbr></span>
<span class="-8899164530562544377" onmouseenter="enter('-8899164530562544377');" onmouseout="out('-8899164530562544377');" style="">1135                                      + &quot; or nullable=true within the @JoinColumn annotation&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136                          }                                                                                         </span>
<span class="1164649929234803369" onmouseenter="enter('1164649929234803369');" onmouseout="out('1164649929234803369');" style=""><abbr title="1137                          //Since this is occuring on a remove persistence package, merge up-front (before making a change) for proper operation in the presence of the enterprise module">1137                          //Since this is occuring on a remove persistence package, merge up-front (before making a ðŸ”µ</abbr></span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1138                          instance = persistenceManager.getDynamicEntityDao().merge(instance);                      </span>
<span class="-3549582829608652451" onmouseenter="enter('-3549582829608652451');" onmouseout="out('-3549582829608652451');" style=""><abbr title="1139                          Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField());">1139                          Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField()ðŸ”µ</abbr></span>
<span class="-2737504991189218406" onmouseenter="enter('-2737504991189218406');" onmouseout="out('-2737504991189218406');" style="">1140                          Object manyToObject = manyToField.get(instance);                                          </span>
<span class="-7515244788292498989" onmouseenter="enter('-7515244788292498989');" onmouseout="out('-7515244788292498989');" style=""><abbr title="1141                          if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObject instanceof Map)) {">1141                          if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObject instanðŸ”µ</abbr></span>
<span class="-3600933715630852255" onmouseenter="enter('-3600933715630852255');" onmouseout="out('-3600933715630852255');" style="">1142                              manyToField.set(instance, null);                                                      </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1143                              instance = persistenceManager.getDynamicEntityDao().merge(instance);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1144                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1145                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1146                      break;                                                                                        </span>
<span class="-5424424301156351095" onmouseenter="enter('-5424424301156351095');" onmouseout="out('-5424424301156351095');" style="">1147                  case BASIC:                                                                                       </span>
<span class="-3622621852197441069" onmouseenter="enter('-3622621852197441069');" onmouseout="out('-3622621852197441069');" style="">1148                      persistenceManager.getDynamicEntityDao().remove(instance);                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1149                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1150              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1151          } catch (Exception e) {                                                                                   </span>
<span class="-1927777960097045518" onmouseenter="enter('-1927777960097045518');" onmouseout="out('-1927777960097045518');" style="">1152              throw new ServiceException(&quot;Problem removing entity : &quot; + e.getMessage(), e);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1153          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1154      }                                                                                                             </span>
<span  style="">1155                                                                                                                    </span>
<span class="-5101078461080852406" onmouseenter="enter('-5101078461080852406');" onmouseout="out('-5101078461080852406');" style="">1156      public Map&lt;String, FieldMetadata&gt; getMergedProperties(PersistencePackage persistencePackage,                  </span>
<span class="-1790491118666975112" onmouseenter="enter('-1790491118666975112');" onmouseout="out('-1790491118666975112');" style="">1157              CriteriaTransferObject cto) throws ServiceException {                                                 </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1158          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1159          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1159          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname()ðŸ”µ</abbr></span>
<span  style="">1160                                                                                                                    </span>
<span class="-5573073822220246070" onmouseenter="enter('-5573073822220246070');" onmouseout="out('-5573073822220246070');" style="">1161          if (StringUtils.isEmpty(persistencePackage.getFetchTypeFullyQualifiedClassname())) {                      </span>
<span class="8779313298045253029" onmouseenter="enter('8779313298045253029');" onmouseout="out('8779313298045253029');" style="">1162              persistencePackage.setFetchTypeFullyQualifiedClassname(ceilingEntityFullyQualifiedClassname);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1163          }                                                                                                         </span>
<span  style="">1164                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1165          try {                                                                                                     </span>
<span class="-5197892520502431560" onmouseenter="enter('-5197892520502431560');" onmouseout="out('-5197892520502431560');" style=""><abbr title="1166              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(Class.forName(ceilingEntityFullyQualifiedClassname));">1166              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(ClðŸ”µ</abbr></span>
<span  style="">1167                                                                                                                    </span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title="1168              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1168              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style="">1169                      ceilingEntityFullyQualifiedClassname,                                                         </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1170                      entities,                                                                                     </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title="1171                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),">1171                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectivðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1172                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1173                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1174                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1175                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1176                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1177                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1178                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1179                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1180                      );                                                                                            </span>
<span  style="">1181                                                                                                                    </span>
<span class="513114689449481379" onmouseenter="enter('513114689449481379');" onmouseout="out('513114689449481379');" style="">1182              return mergedProperties;                                                                              </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1183          } catch (Exception e) {                                                                                   </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style="">1184              throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186      }                                                                                                             </span>
<span  style="">1187                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1188      @Override                                                                                                     </span>
<span class="8546305990485145221" onmouseenter="enter('8546305990485145221');" onmouseout="out('8546305990485145221');" style=""><abbr title="1189      public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {">1189      public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServicðŸ”µ</abbr></span>
<span class="-772649916350085514" onmouseenter="enter('-772649916350085514');" onmouseout="out('-772649916350085514');" style="">1190          Entity[] payload;                                                                                         </span>
<span class="3229522520950860553" onmouseenter="enter('3229522520950860553');" onmouseout="out('3229522520950860553');" style="">1191          int totalRecords;                                                                                         </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1192          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1193          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1193          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname()ðŸ”µ</abbr></span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1194          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1194          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span  style="">1195                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1196          try {                                                                                                     </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1197              if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                                        </span>
<span class="2404625472493330195" onmouseenter="enter('2404625472493330195');" onmouseout="out('2404625472493330195');" style="">1198                  FilterAndSortCriteria sortCriteria = cto.get(foreignKey.getSortField());                          </span>
<span class="-7029642347361419040" onmouseenter="enter('-7029642347361419040');" onmouseout="out('-7029642347361419040');" style="">1199                  sortCriteria.setSortAscending(foreignKey.getSortAscending());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1200              }                                                                                                     </span>
<span  style="">1201                                                                                                                    </span>
<span class="-3998990817835064526" onmouseenter="enter('-3998990817835064526');" onmouseout="out('-3998990817835064526');" style="">1202              Map&lt;String, FieldMetadata&gt; mergedProperties = getMergedProperties(persistencePackage, cto);           </span>
<span  style="">1203                                                                                                                    </span>
<span class="-6342955113620354561" onmouseenter="enter('-6342955113620354561');" onmouseout="out('-6342955113620354561');" style="">1204              List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistencePackage</span>
<span class="-8965082019915054990" onmouseenter="enter('-8965082019915054990');" onmouseout="out('-8965082019915054990');" style="">1205                      .getFetchTypeFullyQualifiedClassname(), mergedProperties);                                    </span>
<span class="3150984124528274911" onmouseenter="enter('3150984124528274911');" onmouseout="out('3150984124528274911');" style="">1206              List&lt;FilterMapping&gt; standardFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);            </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1207              if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                                  </span>
<span class="8416184071019923073" onmouseenter="enter('8416184071019923073');" onmouseout="out('8416184071019923073');" style="">1208                  standardFilterMappings.addAll(cto.getAdditionalFilterMappings());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1209              }                                                                                                     </span>
<span class="371531837080654072" onmouseenter="enter('371531837080654072');" onmouseout="out('371531837080654072');" style="">1210              if (CollectionUtils.isNotEmpty(cto.getNonCountAdditionalFilterMappings())) {                          </span>
<span class="1437073849667335666" onmouseenter="enter('1437073849667335666');" onmouseout="out('1437073849667335666');" style="">1211                  standardFilterMappings.addAll(cto.getNonCountAdditionalFilterMappings());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1212              }                                                                                                     </span>
<span  style="">1213                                                                                                                    </span>
<span class="-1243671803049331237" onmouseenter="enter('-1243671803049331237');" onmouseout="out('-1243671803049331237');" style="">1214              FetchRequest fetchRequest = new FetchRequest(persistencePackage, cto,                                 </span>
<span class="4292734980783020060" onmouseenter="enter('4292734980783020060');" onmouseout="out('4292734980783020060');" style="">1215                      persistencePackage.getFetchTypeFullyQualifiedClassname(), standardFilterMappings);            </span>
<span class="6303456555516158535" onmouseenter="enter('6303456555516158535');" onmouseout="out('6303456555516158535');" style="">1216              List&lt;Serializable&gt; records = getPersistentRecords(fetchRequest);                                      </span>
<span  style="">1217                                                                                                                    </span>
<span class="-2850022341577176338" onmouseenter="enter('-2850022341577176338');" onmouseout="out('-2850022341577176338');" style="">1218              List&lt;FilterMapping&gt; countFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);               </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1219              if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                                  </span>
<span class="2702453385268728814" onmouseenter="enter('2702453385268728814');" onmouseout="out('2702453385268728814');" style="">1220                  countFilterMappings.addAll(cto.getAdditionalFilterMappings());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221              }                                                                                                     </span>
<span class="-3999242298419802693" onmouseenter="enter('-3999242298419802693');" onmouseout="out('-3999242298419802693');" style="">1222              FetchRequest countFetchRequest = new FetchRequest(persistencePackage, cto,                            </span>
<span class="-3552477247406350113" onmouseenter="enter('-3552477247406350113');" onmouseout="out('-3552477247406350113');" style="">1223                      persistencePackage.getFetchTypeFullyQualifiedClassname(), countFilterMappings);               </span>
<span class="8724074426546236268" onmouseenter="enter('8724074426546236268');" onmouseout="out('8724074426546236268');" style="">1224              totalRecords = getTotalRecords(countFetchRequest);                                                    </span>
<span  style="">1225                                                                                                                    </span>
<span class="-5158650912512765537" onmouseenter="enter('-5158650912512765537');" onmouseout="out('-5158650912512765537');" style="">1226              FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackage, cto,   </span>
<span class="6467880611752491014" onmouseenter="enter('6467880611752491014');" onmouseout="out('6467880611752491014');" style="">1227                      persistencePackage.getFetchTypeFullyQualifiedClassname(), mergedProperties, records);         </span>
<span class="8156899482235304262" onmouseenter="enter('8156899482235304262');" onmouseout="out('8156899482235304262');" style="">1228              payload = getRecords(fetchExtractionRequest);                                                         </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1229          } catch (Exception e) {                                                                                   </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style="">1230              throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1231          }                                                                                                         </span>
<span  style="">1232                                                                                                                    </span>
<span class="-3114265280987831722" onmouseenter="enter('-3114265280987831722');" onmouseout="out('-3114265280987831722');" style="">1233          return new DynamicResultSet(null, payload, totalRecords);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234      }                                                                                                             </span>
<span  style="">1235                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1236      @Override                                                                                                     </span>
<span class="-2578660758180960" onmouseenter="enter('-2578660758180960');" onmouseout="out('-2578660758180960');" style="">1237      public Integer getTotalRecords(FetchRequest fetchRequest) {                                                   </span>
<span class="3552750659307215192" onmouseenter="enter('3552750659307215192');" onmouseout="out('3552750659307215192');" style="">1238          return fetchWrapper.getTotalRecords(fetchRequest);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1239      }                                                                                                             </span>
<span  style="">1240                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1241      @Override                                                                                                     </span>
<span class="5133967305615212146" onmouseenter="enter('5133967305615212146');" onmouseout="out('5133967305615212146');" style="">1242      public Integer getTotalRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1243          try {                                                                                                     </span>
<span class="2992791529598050608" onmouseenter="enter('2992791529598050608');" onmouseout="out('2992791529598050608');" style="">1244              return ((Long) criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(),       </span>
<span class="9038213180647386393" onmouseenter="enter('9038213180647386393');" onmouseout="out('9038213180647386393');" style="">1245                      ceilingEntity, filterMappings).getSingleResult()).intValue();                                 </span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1246          } catch (CriteriaConversionException e) {                                                                 </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1247              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1247              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntityðŸ”µ</abbr></span>
<span class="3717478470762679000" onmouseenter="enter('3717478470762679000');" onmouseout="out('3717478470762679000');" style=""><abbr title="1248              return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getSingleResult()).intValue();">1248              return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1249          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1250      }                                                                                                             </span>
<span  style="">1251                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1252      @Override                                                                                                     </span>
<span class="-7091292263578945571" onmouseenter="enter('-7091292263578945571');" onmouseout="out('-7091292263578945571');" style="">1253      public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxField) {  </span>
<span class="378343015895903420" onmouseenter="enter('378343015895903420');" onmouseout="out('378343015895903420');" style="">1254          return criteriaTranslator.translateMaxQuery(persistenceManager.getDynamicEntityDao(),                     </span>
<span class="-8797211071846459738" onmouseenter="enter('-8797211071846459738');" onmouseout="out('-8797211071846459738');" style="">1255                  ceilingEntity, filterMappings, maxField).getSingleResult();                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1256      }                                                                                                             </span>
<span  style="">1257                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1258      @Override                                                                                                     </span>
<span class="-7700127040847294453" onmouseenter="enter('-7700127040847294453');" onmouseout="out('-7700127040847294453');" style="">1259      public List&lt;Serializable&gt; getPersistentRecords(FetchRequest fetchRequest) {                                   </span>
<span class="8379695074016758469" onmouseenter="enter('8379695074016758469');" onmouseout="out('8379695074016758469');" style="">1260          return fetchWrapper.getPersistentRecords(fetchRequest);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1261      }                                                                                                             </span>
<span  style="">1262                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1263      @Override                                                                                                     </span>
<span class="-3765220535491808040" onmouseenter="enter('-3765220535491808040');" onmouseout="out('-3765220535491808040');" style=""><abbr title="1264      public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, Integer firstResult, Integer maxResults) {">1264      public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, IntegðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1265          try {                                                                                                     </span>
<span class="389003939619547722" onmouseenter="enter('389003939619547722');" onmouseout="out('389003939619547722');" style=""><abbr title="1266              return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings, firstResult, maxResults).getResultList();">1266              return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filtðŸ”µ</abbr></span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1267          } catch (CriteriaConversionException e) {                                                                 </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1268              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1268              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntityðŸ”µ</abbr></span>
<span class="-221814316245476979" onmouseenter="enter('-221814316245476979');" onmouseout="out('-221814316245476979');" style=""><abbr title="1269              return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getResultList();">1269              return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getReðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1270          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271      }                                                                                                             </span>
<span  style="">1272                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1273      @Override                                                                                                     </span>
<span class="-5264121643331936103" onmouseenter="enter('-5264121643331936103');" onmouseout="out('-5264121643331936103');" style=""><abbr title="1274      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1274      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperðŸ”µ</abbr></span>
<span class="4828126916979552028" onmouseenter="enter('4828126916979552028');" onmouseout="out('4828126916979552028');" style="">1275          return validate(entity, populatedInstance, mergedProperties, true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1276      }                                                                                                             </span>
<span  style="">1277                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1278      @Override                                                                                                     </span>
<span class="-2540520329201552550" onmouseenter="enter('-2540520329201552550');" onmouseout="out('-2540520329201552550');" style=""><abbr title="1279      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties,">1279      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperðŸ”µ</abbr></span>
<span class="-646875273047375380" onmouseenter="enter('-646875273047375380');" onmouseout="out('-646875273047375380');" style="">1280              boolean validateUnsubmittedProperties) {                                                              </span>
<span class="-1767922062013594425" onmouseenter="enter('-1767922062013594425');" onmouseout="out('-1767922062013594425');" style=""><abbr title="1281          entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedProperties);">1281          entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedPropðŸ”µ</abbr></span>
<span class="3683508287945816806" onmouseenter="enter('3683508287945816806');" onmouseout="out('3683508287945816806');" style="">1282          return !entity.isValidationFailure();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1283      }                                                                                                             </span>
<span  style="">1284                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1285      @Override                                                                                                     </span>
<span class="-7261136882877520523" onmouseenter="enter('-7261136882877520523');" onmouseout="out('-7261136882877520523');" style="">1286      public void setPersistenceManager(PersistenceManager persistenceManager) {                                    </span>
<span class="420805913365778848" onmouseenter="enter('420805913365778848');" onmouseout="out('420805913365778848');" style="">1287          this.persistenceManager = persistenceManager;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1288      }                                                                                                             </span>
<span  style="">1289                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1290      @Override                                                                                                     </span>
<span class="-2499387119652050167" onmouseenter="enter('-2499387119652050167');" onmouseout="out('-2499387119652050167');" style="">1291      public PersistenceModule getCompatibleModule(OperationType operationType) {                                   </span>
<span class="-6680721005895887682" onmouseenter="enter('-6680721005895887682');" onmouseout="out('-6680721005895887682');" style="">1292          return ((InspectHelper) persistenceManager).getCompatibleModule(operationType);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1293      }                                                                                                             </span>
<span  style="">1294                                                                                                                    </span>
<span class="3328492731591597182" onmouseenter="enter('3328492731591597182');" onmouseout="out('3328492731591597182');" style="">1295      public FieldPersistenceProvider getDefaultFieldPersistenceProvider() {                                        </span>
<span class="1756204342632449191" onmouseenter="enter('1756204342632449191');" onmouseout="out('1756204342632449191');" style="">1296          return defaultFieldPersistenceProvider;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1297      }                                                                                                             </span>
<span  style="">1298                                                                                                                    </span>
<span class="-2699135397458953097" onmouseenter="enter('-2699135397458953097');" onmouseout="out('-2699135397458953097');" style="">1299      public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvider) {    </span>
<span class="3999856981618428822" onmouseenter="enter('3999856981618428822');" onmouseout="out('3999856981618428822');" style="">1300          this.defaultFieldPersistenceProvider = defaultFieldPersistenceProvider;                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1301      }                                                                                                             </span>
<span  style="">1302                                                                                                                    </span>
<span class="-3297513575264900381" onmouseenter="enter('-3297513575264900381');" onmouseout="out('-3297513575264900381');" style="">1303      public List&lt;FieldPersistenceProvider&gt; getFieldPersistenceProviders() {                                        </span>
<span class="-2059463949907485093" onmouseenter="enter('-2059463949907485093');" onmouseout="out('-2059463949907485093');" style="">1304          return fieldPersistenceProviders;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305      }                                                                                                             </span>
<span  style="">1306                                                                                                                    </span>
<span class="-235472694817904036" onmouseenter="enter('-235472694817904036');" onmouseout="out('-235472694817904036');" style="">1307      public void setFieldPersistenceProviders(List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders) {          </span>
<span class="-2955406707242124116" onmouseenter="enter('-2955406707242124116');" onmouseout="out('-2955406707242124116');" style="">1308          this.fieldPersistenceProviders = fieldPersistenceProviders;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1309      }                                                                                                             </span>
<span  style="">1310                                                                                                                    </span>
<span class="2527239256502116436" onmouseenter="enter('2527239256502116436');" onmouseout="out('2527239256502116436');" style="">1311      public CriteriaTranslator getCriteriaTranslator() {                                                           </span>
<span class="-7874987932723060666" onmouseenter="enter('-7874987932723060666');" onmouseout="out('-7874987932723060666');" style="">1312          return criteriaTranslator;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1313      }                                                                                                             </span>
<span  style="">1314                                                                                                                    </span>
<span class="3030781032482147469" onmouseenter="enter('3030781032482147469');" onmouseout="out('3030781032482147469');" style="">1315      public void setCriteriaTranslator(CriteriaTranslator criteriaTranslator) {                                    </span>
<span class="8514480012814343106" onmouseenter="enter('8514480012814343106');" onmouseout="out('8514480012814343106');" style="">1316          this.criteriaTranslator = criteriaTranslator;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1317      }                                                                                                             </span>
<span  style="">1318                                                                                                                    </span>
<span class="5879967825851129823" onmouseenter="enter('5879967825851129823');" onmouseout="out('5879967825851129823');" style="">1319      public EntityValidatorService getEntityValidatorService() {                                                   </span>
<span class="5121045867689107592" onmouseenter="enter('5121045867689107592');" onmouseout="out('5121045867689107592');" style="">1320          return entityValidatorService;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1321      }                                                                                                             </span>
<span  style="">1322                                                                                                                    </span>
<span class="1108892278031396141" onmouseenter="enter('1108892278031396141');" onmouseout="out('1108892278031396141');" style="">1323      public void setEntityValidatorService(EntityValidatorService entityValidatorService) {                        </span>
<span class="-1870662827894286800" onmouseenter="enter('-1870662827894286800');" onmouseout="out('-1870662827894286800');" style="">1324          this.entityValidatorService = entityValidatorService;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1325      }                                                                                                             </span>
<span  style="">1326                                                                                                                    </span>
<span class="-1748543627179535834" onmouseenter="enter('-1748543627179535834');" onmouseout="out('-1748543627179535834');" style="">1327      public RestrictionFactory getRestrictionFactory() {                                                           </span>
<span class="3824148827663415229" onmouseenter="enter('3824148827663415229');" onmouseout="out('3824148827663415229');" style="">1328          return restrictionFactory;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329      }                                                                                                             </span>
<span  style="">1330                                                                                                                    </span>
<span class="-2008652971927118074" onmouseenter="enter('-2008652971927118074');" onmouseout="out('-2008652971927118074');" style="">1331      public void setRestrictionFactory(RestrictionFactory restrictionFactory) {                                    </span>
<span class="2351646543947184406" onmouseenter="enter('2351646543947184406');" onmouseout="out('2351646543947184406');" style="">1332          this.restrictionFactory = restrictionFactory;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1333      }                                                                                                             </span>
<span  style="">1334                                                                                                                    </span>
<span class="-5029713949712177492" onmouseenter="enter('-5029713949712177492');" onmouseout="out('-5029713949712177492');" style="">1335      public PersistenceManager getPersistenceManager() {                                                           </span>
<span class="238620838116623116" onmouseenter="enter('238620838116623116');" onmouseout="out('238620838116623116');" style="">1336          return persistenceManager;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337      }                                                                                                             </span>
<span  style="">1338                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1339      /**                                                                                                           </span>
<span class="-5659125667278957327" onmouseenter="enter('-5659125667278957327');" onmouseout="out('-5659125667278957327');" style=""><abbr title="1340       * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable object. Related">1340       * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable objðŸ”µ</abbr></span>
<span class="4561034045985117681" onmouseenter="enter('4561034045985117681');" onmouseout="out('4561034045985117681');" style=""><abbr title="1341       * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA criteria,">1341       * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA crðŸ”µ</abbr></span>
<span class="6419934548242517763" onmouseenter="enter('6419934548242517763');" onmouseout="out('6419934548242517763');" style="">1342       * which seems to alleviate the problem.                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1343       *                                                                                                            </span>
<span class="-2077216329372670" onmouseenter="enter('-2077216329372670');" onmouseout="out('-2077216329372670');" style="">1344       * @param embeddedCollectionPath the path to the collection field itself                                      </span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1345       * @param filterMappings all the fetch restrictions for this request                                          </span>
<span class="500285512782550604" onmouseenter="enter('500285512782550604');" onmouseout="out('500285512782550604');" style="">1346       * @param collectionClass the type of the collection members                                                  </span>
<span class="-124687443674998826" onmouseenter="enter('-124687443674998826');" onmouseout="out('-124687443674998826');" style="">1347       * @return the builder capable of generating an appropriate HQL query                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1348       */                                                                                                           </span>
<span class="318950424073468037" onmouseenter="enter('318950424073468037');" onmouseout="out('318950424073468037');" style=""><abbr title="1349      protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings, String collectionClass) {">1349      protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; fðŸ”µ</abbr></span>
<span class="6393444935626899139" onmouseenter="enter('6393444935626899139');" onmouseout="out('6393444935626899139');" style="">1350          String specialPath = embeddedCollectionPath.getTargetProperty();                                          </span>
<span class="-5143159997305327734" onmouseenter="enter('-5143159997305327734');" onmouseout="out('-5143159997305327734');" style="">1351          String[] pieces = specialPath.split(&quot;\\.&quot;);                                                               </span>
<span class="5217253633788863143" onmouseenter="enter('5217253633788863143');" onmouseout="out('5217253633788863143');" style="">1352          if (pieces.length != 3) {                                                                                 </span>
<span class="849365765552848208" onmouseenter="enter('849365765552848208');" onmouseout="out('849365765552848208');" style=""><abbr title="1353              throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embedded field].[collection field].[property] for the embedded collection path (%s)&quot;, specialPath), embeddedCollectionPath);">1353              throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1354          }                                                                                                         </span>
<span class="-8198781854964897228" onmouseenter="enter('-8198781854964897228');" onmouseout="out('-8198781854964897228');" style="">1355          String expression = specialPath.substring(0, specialPath.lastIndexOf(&quot;.&quot;));                               </span>
<span class="7643896692389749892" onmouseenter="enter('7643896692389749892');" onmouseout="out('7643896692389749892');" style="">1356          TypedQueryBuilder builder;                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1357          try {                                                                                                     </span>
<span class="-8552982106091258322" onmouseenter="enter('-8552982106091258322');" onmouseout="out('-8552982106091258322');" style="">1358              builder = new TypedQueryBuilder(Class.forName(collectionClass), &quot;specialEntity&quot;)                      </span>
<span class="7429624725018559493" onmouseenter="enter('7429624725018559493');" onmouseout="out('7429624725018559493');" style="">1359                      .addJoin(new TQJoin(&quot;specialEntity.&quot; + expression, &quot;embeddedCollection&quot;));                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1360          } catch (Exception e) {                                                                                   </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style="">1361              throw ExceptionHelper.refineException(e);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1362          }                                                                                                         </span>
<span class="-3537338773035059274" onmouseenter="enter('-3537338773035059274');" onmouseout="out('-3537338773035059274');" style="">1363          for (TQRestriction restriction : buildSpecialRestrictions(expression, filterMappings)) {                  </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1364              builder = builder.addRestriction(restriction);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1365          }                                                                                                         </span>
<span class="-3768831820353648531" onmouseenter="enter('-3768831820353648531');" onmouseout="out('-3768831820353648531');" style="">1366          for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappings)) {     </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1367              builder = builder.addRestriction(restriction);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1368          }                                                                                                         </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1369          for (FilterMapping mapping : filterMappings) {                                                            </span>
<span class="-4604402569484224232" onmouseenter="enter('-4604402569484224232');" onmouseout="out('-4604402569484224232');" style="">1370              if (mapping.getSortDirection() != null) {                                                             </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1371                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1371                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetPðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1372                  if (StringUtils.isEmpty(mappingProperty)) {                                                       </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1373                      mappingProperty = mapping.getFullPropertyName();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1374                  }                                                                                                 </span>
<span class="-8248548206415810836" onmouseenter="enter('-8248548206415810836');" onmouseout="out('-8248548206415810836');" style=""><abbr title="1375                  builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDING == mapping.getSortDirection()));">1375                  builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDINGðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1376              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1377          }                                                                                                         </span>
<span  style="">1378                                                                                                                    </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style="">1379          return builder;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1380      }                                                                                                             </span>
<span  style="">1381                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1382      /**                                                                                                           </span>
<span class="-8346746296837651477" onmouseenter="enter('-8346746296837651477');" onmouseout="out('-8346746296837651477');" style=""><abbr title="1383       * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collection field in the @Embeddable object)">1383       * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collectiðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1384       *                                                                                                            </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1385       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1385       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteriaðŸ”µ</abbr></span>
<span class="6692178223307224172" onmouseenter="enter('6692178223307224172');" onmouseout="out('6692178223307224172');" style=""><abbr title="1386       * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caused the whole thing">1386       * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1387       * @param filterMappings all the fetch restrictions for this request                                          </span>
<span class="-357236726942159378" onmouseenter="enter('-357236726942159378');" onmouseout="out('-357236726942159378');" style="">1388       * @return the list of restrictions on the root entity                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1389       */                                                                                                           </span>
<span class="-85615873681846318" onmouseenter="enter('-85615873681846318');" onmouseout="out('-85615873681846318');" style=""><abbr title="1390      protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings) {">1390      protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; ðŸ”µ</abbr></span>
<span class="-1692895948334038289" onmouseenter="enter('-1692895948334038289');" onmouseout="out('-1692895948334038289');" style=""><abbr title="1391          String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargetProperty().lastIndexOf(&quot;.&quot;));">1391          String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1392          List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                                        </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1393          for (FilterMapping mapping : filterMappings) {                                                            </span>
<span class="5670151306593626605" onmouseenter="enter('5670151306593626605');" onmouseout="out('5670151306593626605');" style="">1394              checkProperty: {                                                                                      </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1395                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1395                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetPðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1396                  if (StringUtils.isEmpty(mappingProperty)) {                                                       </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1397                      mappingProperty = mapping.getFullPropertyName();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1398                  }                                                                                                 </span>
<span class="-8226569942575396694" onmouseenter="enter('-8226569942575396694');" onmouseout="out('-8226569942575396694');" style=""><abbr title="1399                  if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.isEmpty(mappingProperty)) {">1399                  if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.isEmpty(maðŸ”µ</abbr></span>
<span class="-9008982404255839640" onmouseenter="enter('-9008982404255839640');" onmouseout="out('-9008982404255839640');" style="">1400                      PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider();        </span>
<span class="-3527643591612301478" onmouseenter="enter('-3527643591612301478');" onmouseout="out('-3527643591612301478');" style="">1401                      if (predicateProvider != null) {                                                              </span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1402                          FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();      </span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1403                          if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {         </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1404                              Object val = converter.convert(mapping.getFilterValues().get(0));                     </span>
<span class="4919121251037931163" onmouseenter="enter('4919121251037931163');" onmouseout="out('4919121251037931163');" style="">1405                              if (predicateProvider instanceof LikePredicateProvider) {                             </span>
<span class="-1773061400470981891" onmouseenter="enter('-1773061400470981891');" onmouseout="out('-1773061400470981891');" style=""><abbr title="1406                                  restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, val + &quot;%&quot;));">1406                                  restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, valðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1407                                  break checkProperty;                                                              </span>
<span class="8904766331581746771" onmouseenter="enter('8904766331581746771');" onmouseout="out('8904766331581746771');" style="">1408                              } else if (predicateProvider instanceof EqPredicateProvider) {                        </span>
<span class="1134572960833745712" onmouseenter="enter('1134572960833745712');" onmouseout="out('1134572960833745712');" style="">1409                                  restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=&quot;, val));</span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1410                                  break checkProperty;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1413                      }                                                                                             </span>
<span class="-6733273180612799079" onmouseenter="enter('-6733273180612799079');" onmouseout="out('-6733273180612799079');" style=""><abbr title="1414                      LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional property (%s)&quot;,">1414                      LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional propertðŸ”µ</abbr></span>
<span class="-8181613750620164347" onmouseenter="enter('-8181613750620164347');" onmouseout="out('-8181613750620164347');" style="">1415                              StringUtil.sanitize(expression),                                                      </span>
<span class="-5255115290358802775" onmouseenter="enter('-5255115290358802775');" onmouseout="out('-5255115290358802775');" style="">1416                              StringUtil.sanitize(mappingProperty)));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1417                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1418              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419          }                                                                                                         </span>
<span  style="">1420                                                                                                                    </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1421          return restrictions;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422      }                                                                                                             </span>
<span  style="">1423                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1424      /**                                                                                                           </span>
<span class="2167663911523579684" onmouseenter="enter('2167663911523579684');" onmouseout="out('2167663911523579684');" style=""><abbr title="1425       * Generate EQUALS restrictions for any filter property specified on the entity member of the collection field in the @Embeddable object">1425       * Generate EQUALS restrictions for any filter property specified on the entity member of the collection fieldðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1426       *                                                                                                            </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1427       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1427       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteriaðŸ”µ</abbr></span>
<span class="-9017749716487851104" onmouseenter="enter('-9017749716487851104');" onmouseout="out('-9017749716487851104');" style=""><abbr title="1428       * @param specialExpression the String representation of the path for the collection field in the @Embeddable object">1428       * @param specialExpression the String representation of the path for the collection field in the @Embeddable ðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1429       * @param filterMappings all the fetch restrictions for this request                                          </span>
<span class="3793893128909469910" onmouseenter="enter('3793893128909469910');" onmouseout="out('3793893128909469910');" style="">1430       * @return the list of restrictions on the collection in the @Embeddable object                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1431       */                                                                                                           </span>
<span class="-1807551435758383985" onmouseenter="enter('-1807551435758383985');" onmouseout="out('-1807551435758383985');" style=""><abbr title="1432      protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMappings) {">1432      protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMapðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1433          List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                                        </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1434          for (FilterMapping mapping : filterMappings) {                                                            </span>
<span class="-7768046259105737972" onmouseenter="enter('-7768046259105737972');" onmouseout="out('-7768046259105737972');" style=""><abbr title="1435              if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mapping.getFieldPath().getTargetProperty().startsWith(specialExpression)) {">1435              if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mapping.geðŸ”µ</abbr></span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1436                  FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();              </span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1437                  if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {                 </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1438                      Object val = converter.convert(mapping.getFilterValues().get(0));                             </span>
<span class="-3185664653595577967" onmouseenter="enter('-3185664653595577967');" onmouseout="out('-3185664653595577967');" style=""><abbr title="1439                      String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().getTargetProperty().lastIndexOf(&quot;.&quot;) + 1, mapping.getFieldPath().getTargetProperty().length());">1439                      String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().ðŸ”µ</abbr></span>
<span class="6515773652350530653" onmouseenter="enter('6515773652350530653');" onmouseout="out('6515773652350530653');" style="">1440                      restrictions.add(new TQRestriction(&quot;embeddedCollection.&quot; + property, &quot;=&quot;, val));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1441                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1442              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1443          }                                                                                                         </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1444          return restrictions;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1445      }                                                                                                             </span>
<span  style="">1446                                                                                                                    </span>
<span class="-1847859638489008561" onmouseenter="enter('-1847859638489008561');" onmouseout="out('-1847859638489008561');" style="">1447      protected void cleanupFailedPersistenceAttempt(Serializable instance) throws IllegalAccessException {         </span>
<span class="-761178418461683406" onmouseenter="enter('-761178418461683406');" onmouseout="out('-761178418461683406');" style="">1448          //Remove the entity from ORM management - no further attempts to persist                                  </span>
<span class="-8509958237563709196" onmouseenter="enter('-8509958237563709196');" onmouseout="out('-8509958237563709196');" style="">1449          if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) {        </span>
<span class="-8381574259703143566" onmouseenter="enter('-8381574259703143566');" onmouseout="out('-8381574259703143566');" style="">1450              getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().detach(instance);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1451          }                                                                                                         </span>
<span class="7196727024368525589" onmouseenter="enter('7196727024368525589');" onmouseout="out('7196727024368525589');" style="">1452          //Remove the id field value, if it&#x27;s set                                                                  </span>
<span class="-8963497040678265373" onmouseenter="enter('-8963497040678265373');" onmouseout="out('-8963497040678265373');" style=""><abbr title="1453          String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClass()).get(&quot;name&quot;);">1453          String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClasðŸ”µ</abbr></span>
<span class="-7813482713010008669" onmouseenter="enter('-7813482713010008669');" onmouseout="out('-7813482713010008669');" style="">1454          Field idField = FieldUtils.getField(instance.getClass(), idFieldName, true);                              </span>
<span class="-5694238240637206409" onmouseenter="enter('-5694238240637206409');" onmouseout="out('-5694238240637206409');" style="">1455          if (idField == null) {                                                                                    </span>
<span class="6113500709945049507" onmouseenter="enter('6113500709945049507');" onmouseout="out('6113500709945049507');" style=""><abbr title="1456              throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getName() + &quot; does not contain id field &quot; + idFieldName));">1456              throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getNameðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1457          }                                                                                                         </span>
<span class="7965871812340203707" onmouseenter="enter('7965871812340203707');" onmouseout="out('7965871812340203707');" style="">1458          idField.setAccessible(true);                                                                              </span>
<span class="-5148613654387121426" onmouseenter="enter('-5148613654387121426');" onmouseout="out('-5148613654387121426');" style="">1459          if (idField.get(instance) != null) {                                                                      </span>
<span class="-3149499430961766795" onmouseenter="enter('-3149499430961766795');" onmouseout="out('-3149499430961766795');" style="">1460              idField.set(instance, null);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1461          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1462      }                                                                                                             </span>
<span  style="">1463                                                                                                                    </span>
<span class="361057059065324955" onmouseenter="enter('361057059065324955');" onmouseout="out('361057059065324955');" style="">1464      protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property property) {     </span>
<span class="1752551688027428994" onmouseenter="enter('1752551688027428994');" onmouseout="out('1752551688027428994');" style="">1465          Class&lt;?&gt; returnType = null;                                                                               </span>
<span class="3738304511666335991" onmouseenter="enter('3738304511666335991');" onmouseout="out('3738304511666335991');" style=""><abbr title="1466          Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName().indexOf(FieldManager.MAPFIELDSEPARATOR)));">1466          Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName(ðŸ”µ</abbr></span>
<span class="5464468769050206957" onmouseenter="enter('5464468769050206957');" onmouseout="out('5464468769050206957');" style="">1467          java.lang.reflect.Type type = field.getGenericType();                                                     </span>
<span class="-6389298272813932854" onmouseenter="enter('-6389298272813932854');" onmouseout="out('-6389298272813932854');" style="">1468          if (type instanceof ParameterizedType) {                                                                  </span>
<span class="705860026972665445" onmouseenter="enter('705860026972665445');" onmouseout="out('705860026972665445');" style="">1469              ParameterizedType pType = (ParameterizedType) type;                                                   </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style="">1470              Class&lt;?&gt; clazz;                                                                                       </span>
<span class="7069691481162074648" onmouseenter="enter('7069691481162074648');" onmouseout="out('7069691481162074648');" style="">1471              if (pType.getActualTypeArguments().length &lt; 2) {                                                      </span>
<span class="4541832948460311824" onmouseenter="enter('4541832948460311824');" onmouseout="out('4541832948460311824');" style="">1472                  clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[0];                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1473              } else {                                                                                              </span>
<span class="-5335821615199731853" onmouseenter="enter('-5335821615199731853');" onmouseout="out('-5335821615199731853');" style="">1474                  clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[1];                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1475              }                                                                                                     </span>
<span class="2546721200619882801" onmouseenter="enter('2546721200619882801');" onmouseout="out('2546721200619882801');" style=""><abbr title="1476              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clazz);">1476              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clðŸ”µ</abbr></span>
<span class="5482192784237496931" onmouseenter="enter('5482192784237496931');" onmouseout="out('5482192784237496931');" style="">1477              if (!ArrayUtils.isEmpty(entities)) {                                                                  </span>
<span class="4302056969260211006" onmouseenter="enter('4302056969260211006');" onmouseout="out('4302056969260211006');" style="">1478                  returnType = entities[entities.length - 1];                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1479              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1480          }                                                                                                         </span>
<span class="7163755908227734414" onmouseenter="enter('7163755908227734414');" onmouseout="out('7163755908227734414');" style="">1481          return returnType;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1482      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1483  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3   * BroadleafCommerce Open Admin Platform                                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span  style="">  18                                                                                                                    </span>
<span class="-3730395872919143110" onmouseenter="enter('-3730395872919143110');" onmouseout="out('-3730395872919143110');" style="">  19  package org.broadleafcommerce.openadmin.server.service.persistence.module;                                        </span>
<span  style="">  20                                                                                                                    </span>
<span class="6585399145259537123" onmouseenter="enter('6585399145259537123');" onmouseout="out('6585399145259537123');" style="">  21  import org.apache.commons.beanutils.PropertyUtils;                                                                </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  22  import org.apache.commons.collections.CollectionUtils;                                                            </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  23  import org.apache.commons.lang.ArrayUtils;                                                                        </span>
<span class="7952073036463698968" onmouseenter="enter('7952073036463698968');" onmouseout="out('7952073036463698968');" style="">  24  import org.apache.commons.lang.StringUtils;                                                                       </span>
<span class="-4811768396919678325" onmouseenter="enter('-4811768396919678325');" onmouseout="out('-4811768396919678325');" style="">  25  import org.apache.commons.lang3.BooleanUtils;                                                                     </span>
<span class="-4496642532189438643" onmouseenter="enter('-4496642532189438643');" onmouseout="out('-4496642532189438643');" style="">  26  import org.apache.commons.lang3.reflect.FieldUtils;                                                               </span>
<span class="-7494130924703435694" onmouseenter="enter('-7494130924703435694');" onmouseout="out('-7494130924703435694');" style="">  27  import org.apache.commons.lang3.reflect.MethodUtils;                                                              </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  28  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  29  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  30  import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                                 </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  31  import org.broadleafcommerce.common.exception.ExceptionHelper;                                                    </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  32  import org.broadleafcommerce.common.exception.SecurityServiceException;                                           </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  33  import org.broadleafcommerce.common.exception.ServiceException;                                                   </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  34  import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                              </span>
<span class="-274639712180431568" onmouseenter="enter('-274639712180431568');" onmouseout="out('-274639712180431568');" style="">  35  import org.broadleafcommerce.common.money.Money;                                                                  </span>
<span class="-212317658512913375" onmouseenter="enter('-212317658512913375');" onmouseout="out('-212317658512913375');" style="">  36  import org.broadleafcommerce.common.presentation.client.OperationType;                                            </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  37  import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                           </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  38  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                                       </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  39  import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                           </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  40  import org.broadleafcommerce.common.util.FormatUtil;                                                              </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  41  import org.broadleafcommerce.common.util.StringUtil;                                                              </span>
<span class="-2926793360365808281" onmouseenter="enter('-2926793360365808281');" onmouseout="out('-2926793360365808281');" style="">  42  import org.broadleafcommerce.common.util.ValidationUtil;                                                          </span>
<span class="7948666462039628690" onmouseenter="enter('7948666462039628690');" onmouseout="out('7948666462039628690');" style="">  43  import org.broadleafcommerce.common.util.dao.TQJoin;                                                              </span>
<span class="4569891227290901556" onmouseenter="enter('4569891227290901556');" onmouseout="out('4569891227290901556');" style="">  44  import org.broadleafcommerce.common.util.dao.TQOrder;                                                             </span>
<span class="2808183798288001053" onmouseenter="enter('2808183798288001053');" onmouseout="out('2808183798288001053');" style="">  45  import org.broadleafcommerce.common.util.dao.TQRestriction;                                                       </span>
<span class="8922526534929083638" onmouseenter="enter('8922526534929083638');" onmouseout="out('8922526534929083638');" style="">  46  import org.broadleafcommerce.common.util.dao.TypedQueryBuilder;                                                   </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  47  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  48  import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                                    </span>
<span class="-8970007776478821592" onmouseenter="enter('-8970007776478821592');" onmouseout="out('-8970007776478821592');" style="">  49  import org.broadleafcommerce.openadmin.dto.CriteriaTransferObject;                                                </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  50  import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                                      </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  51  import org.broadleafcommerce.openadmin.dto.Entity;                                                                </span>
<span class="-3504337137222904883" onmouseenter="enter('-3504337137222904883');" onmouseout="out('-3504337137222904883');" style="">  52  import org.broadleafcommerce.openadmin.dto.EntityResult;                                                          </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  53  import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                         </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="">  54  import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                                 </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="">  55  import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                            </span>
<span class="7333603239996951733" onmouseenter="enter('7333603239996951733');" onmouseout="out('7333603239996951733');" style="">  56  import org.broadleafcommerce.openadmin.dto.MergedPropertyType;                                                    </span>
<span class="5387066876064049952" onmouseenter="enter('5387066876064049952');" onmouseout="out('5387066876064049952');" style="">  57  import org.broadleafcommerce.openadmin.dto.PersistencePackage;                                                    </span>
<span class="8079401142601162613" onmouseenter="enter('8079401142601162613');" onmouseout="out('8079401142601162613');" style="">  58  import org.broadleafcommerce.openadmin.dto.PersistencePerspective;                                                </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  59  import org.broadleafcommerce.openadmin.dto.Property;                                                              </span>
<span class="-3940598810559639452" onmouseenter="enter('-3940598810559639452');" onmouseout="out('-3940598810559639452');" style="">  60  import org.broadleafcommerce.openadmin.dto.SortDirection;                                                         </span>

<span class="-2518486623699289546" onmouseenter="enter('-2518486623699289546');" onmouseout="out('-2518486623699289546');" style="">  61  import org.broadleafcommerce.openadmin.server.dao.provider.metadata.AdvancedCollectionFieldMetadataProvider;      </span>
<span class="-3305750562841405447" onmouseenter="enter('-3305750562841405447');" onmouseout="out('-3305750562841405447');" style="">  62  import org.broadleafcommerce.openadmin.server.service.ValidationException;                                        </span>
<span class="8378385081764163459" onmouseenter="enter('8378385081764163459');" onmouseout="out('8378385081764163459');" style="">  63  import org.broadleafcommerce.openadmin.server.service.persistence.ParentEntityPersistenceException;               </span>
<span class="5722165468172421658" onmouseenter="enter('5722165468172421658');" onmouseout="out('5722165468172421658');" style="">  64  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceException;                           </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  65  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                             </span>
<span class="-1323272794227318551" onmouseenter="enter('-1323272794227318551');" onmouseout="out('-1323272794227318551');" style="">  66  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaConversionException;    </span>
<span class="-4125327013079009203" onmouseenter="enter('-4125327013079009203');" onmouseout="out('-4125327013079009203');" style="">  67  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.CriteriaTranslator;             </span>
<span class="7637154476457570035" onmouseenter="enter('7637154476457570035');" onmouseout="out('7637154476457570035');" style="">  68  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath;                      </span>
<span class="7520439988643323618" onmouseenter="enter('7520439988643323618');" onmouseout="out('7520439988643323618');" style="">  69  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FilterMapping;                  </span>
<span class="-4250688222066528552" onmouseenter="enter('-4250688222066528552');" onmouseout="out('-4250688222066528552');" style="">  70  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.RestrictionFactory;             </span>

<span class="-481493864845228243" onmouseenter="enter('-481493864845228243');" onmouseout="out('-481493864845228243');" style="">  71  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.converter.FilterValueConverter; </span>
<span class="2179480323999346530" onmouseenter="enter('2179480323999346530');" onmouseout="out('2179480323999346530');" style="">  72  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.EqPredicateProvider;  </span>
<span class="8659565314530832704" onmouseenter="enter('8659565314530832704');" onmouseout="out('8659565314530832704');" style="">  73  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.LikePredicateProvider;</span>
<span class="2225343043491731861" onmouseenter="enter('2225343043491731861');" onmouseout="out('2225343043491731861');" style="">  74  import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.predicate.PredicateProvider;    </span>
<span class="1619823169108097395" onmouseenter="enter('1619823169108097395');" onmouseout="out('1619823169108097395');" style=""><abbr title="  75  import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionManager;">  75  import org.broadleafcommerce.openadmin.server.service.persistence.module.extension.BasicPersistenceModuleExtensionðŸ”µ</abbr></span>
<span class="2027605662300607419" onmouseenter="enter('2027605662300607419');" onmouseout="out('2027605662300607419');" style="">  76  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.FieldPersistenceProvider;       </span>
<span class="-4946286896488271959" onmouseenter="enter('-4946286896488271959');" onmouseout="out('-4946286896488271959');" style=""><abbr title="  77  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequest;">  77  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddFilterPropertiesRequeðŸ”µ</abbr></span>
<span class="-2189126569880350667" onmouseenter="enter('-2189126569880350667');" onmouseout="out('-2189126569880350667');" style="">  78  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.AddSearchMappingRequest;</span>
<span class="6456213336650879315" onmouseenter="enter('6456213336650879315');" onmouseout="out('6456213336650879315');" style="">  79  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.ExtractValueRequest;    </span>
<span class="7338762877284211273" onmouseenter="enter('7338762877284211273');" onmouseout="out('7338762877284211273');" style="">  80  import org.broadleafcommerce.openadmin.server.service.persistence.module.provider.request.PopulateValueRequest;   </span>
<span class="4906254842317893740" onmouseenter="enter('4906254842317893740');" onmouseout="out('4906254842317893740');" style="">  81  import org.broadleafcommerce.openadmin.server.service.persistence.validation.EntityValidatorService;              </span>
<span class="375927524796533683" onmouseenter="enter('375927524796533683');" onmouseout="out('375927524796533683');" style="">  82  import org.broadleafcommerce.openadmin.server.service.persistence.validation.PopulateValueRequestValidator;       </span>
<span class="3919265641981654464" onmouseenter="enter('3919265641981654464');" onmouseout="out('3919265641981654464');" style="">  83  import org.broadleafcommerce.openadmin.server.service.persistence.validation.PropertyValidationResult;            </span>
<span class="5692608280904331276" onmouseenter="enter('5692608280904331276');" onmouseout="out('5692608280904331276');" style="">  84  import org.broadleafcommerce.openadmin.server.service.type.MetadataProviderResponse;                              </span>
<span class="3891204800073608559" onmouseenter="enter('3891204800073608559');" onmouseout="out('3891204800073608559');" style="">  85  import org.hibernate.FlushMode;                                                                                   </span>
<span class="-1504015732959009083" onmouseenter="enter('-1504015732959009083');" onmouseout="out('-1504015732959009083');" style="">  86  import org.hibernate.Session;                                                                                     </span>
<span class="-6968089101617569818" onmouseenter="enter('-6968089101617569818');" onmouseout="out('-6968089101617569818');" style="">  87  import org.springframework.beans.BeansException;                                                                  </span>
<span class="1015650858128177541" onmouseenter="enter('1015650858128177541');" onmouseout="out('1015650858128177541');" style="">  88  import org.springframework.context.ApplicationContext;                                                            </span>
<span class="5490156850800899437" onmouseenter="enter('5490156850800899437');" onmouseout="out('5490156850800899437');" style="">  89  import org.springframework.context.ApplicationContextAware;                                                       </span>
<span class="1179989609458797828" onmouseenter="enter('1179989609458797828');" onmouseout="out('1179989609458797828');" style="">  90  import org.springframework.context.annotation.Primary;                                                            </span>
<span class="2368474895564125270" onmouseenter="enter('2368474895564125270');" onmouseout="out('2368474895564125270');" style="">  91  import org.springframework.context.annotation.Scope;                                                              </span>
<span class="8406454220154166073" onmouseenter="enter('8406454220154166073');" onmouseout="out('8406454220154166073');" style="">  92  import org.springframework.stereotype.Component;                                                                  </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="">  93  import org.springframework.util.Assert;                                                                           </span>
<span  style="">  94                                                                                                                    </span>


<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="">  95  import java.io.Serializable;                                                                                      </span>
<span class="507320133330553151" onmouseenter="enter('507320133330553151');" onmouseout="out('507320133330553151');" style="">  96  import java.lang.reflect.Field;                                                                                   </span>
<span class="5727252987923913" onmouseenter="enter('5727252987923913');" onmouseout="out('5727252987923913');" style="">  97  import java.lang.reflect.InvocationTargetException;                                                               </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style="">  98  import java.lang.reflect.Method;                                                                                  </span>
<span class="347575814667778087" onmouseenter="enter('347575814667778087');" onmouseout="out('347575814667778087');" style="">  99  import java.lang.reflect.ParameterizedType;                                                                       </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style=""> 100  import java.math.BigDecimal;                                                                                      </span>
<span class="-8993555010225969077" onmouseenter="enter('-8993555010225969077');" onmouseout="out('-8993555010225969077');" style=""> 101  import java.sql.Timestamp;                                                                                        </span>
<span class="1491934911577693694" onmouseenter="enter('1491934911577693694');" onmouseout="out('1491934911577693694');" style=""> 102  import java.text.DecimalFormat;                                                                                   </span>
<span class="-76499702739685611" onmouseenter="enter('-76499702739685611');" onmouseout="out('-76499702739685611');" style=""> 103  import java.text.NumberFormat;                                                                                    </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style=""> 104  import java.text.SimpleDateFormat;                                                                                </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style=""> 105  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style=""> 106  import java.util.Arrays;                                                                                          </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style=""> 107  import java.util.Calendar;                                                                                        </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style=""> 108  import java.util.Collection;                                                                                      </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style=""> 109  import java.util.Collections;                                                                                     </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style=""> 110  import java.util.Comparator;                                                                                      </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style=""> 111  import java.util.Date;                                                                                            </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 112  import java.util.HashMap;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 113  import java.util.List;                                                                                            </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style=""> 114  import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 115  import java.util.Map;                                                                                             </span>

<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 116  import java.util.Map.Entry;                                                                                       </span>
<span class="-61738751204335518" onmouseenter="enter('-61738751204335518');" onmouseout="out('-61738751204335518');" style=""> 117  import java.util.StringTokenizer;                                                                                 </span>
<span  style=""> 118                                                                                                                    </span>
<span class="-1842700952879713169" onmouseenter="enter('-1842700952879713169');" onmouseout="out('-1842700952879713169');" style=""> 119  import javax.annotation.PostConstruct;                                                                            </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 120  import javax.annotation.Resource;                                                                                 </span>
<span  style=""> 121                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 122  /**                                                                                                               </span>
<span class="3104529581940833663" onmouseenter="enter('3104529581940833663');" onmouseout="out('3104529581940833663');" style=""> 123   * @author jfischer                                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 124   */                                                                                                               </span>
<span class="7759015212035044666" onmouseenter="enter('7759015212035044666');" onmouseout="out('7759015212035044666');" style=""> 125  @Primary                                                                                                          </span>
<span class="1694546414662202322" onmouseenter="enter('1694546414662202322');" onmouseout="out('1694546414662202322');" style=""> 126  @Component(&quot;blBasicPersistenceModule&quot;)                                                                            </span>
<span class="-3657083271113190387" onmouseenter="enter('-3657083271113190387');" onmouseout="out('-3657083271113190387');" style=""> 127  @Scope(&quot;prototype&quot;)                                                                                               </span>
<span class="-7916582208788778889" onmouseenter="enter('-7916582208788778889');" onmouseout="out('-7916582208788778889');" style=""> 128  public class BasicPersistenceModule implements PersistenceModule, RecordHelper, ApplicationContextAware {         </span>
<span  style=""> 129                                                                                                                    </span>
<span class="8379422291463370013" onmouseenter="enter('8379422291463370013');" onmouseout="out('8379422291463370013');" style=""> 130      private static final Log LOG = LogFactory.getLog(BasicPersistenceModule.class);                               </span>
<span  style=""> 131                                                                                                                    </span>
<span class="-381692932666242814" onmouseenter="enter('-381692932666242814');" onmouseout="out('-381692932666242814');" style=""> 132      public static final String MAIN_ENTITY_NAME_PROPERTY = &quot;MAIN_ENTITY_NAME&quot;;                                    </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 133      public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                            </span>
<span  style=""> 134                                                                                                                    </span>
<span class="-4770133548193901777" onmouseenter="enter('-4770133548193901777');" onmouseout="out('-4770133548193901777');" style=""> 135      protected ApplicationContext applicationContext;                                                              </span>
<span class="-6488622702665536176" onmouseenter="enter('-6488622702665536176');" onmouseout="out('-6488622702665536176');" style=""> 136      protected PersistenceManager persistenceManager;                                                              </span>
<span  style=""> 137                                                                                                                    </span>
<span class="4305095825338649553" onmouseenter="enter('4305095825338649553');" onmouseout="out('4305095825338649553');" style=""> 138      @Resource(name = &quot;blEntityValidatorService&quot;)                                                                  </span>
<span class="-2556035380928716519" onmouseenter="enter('-2556035380928716519');" onmouseout="out('-2556035380928716519');" style=""> 139      protected EntityValidatorService entityValidatorService;                                                      </span>
<span  style=""> 140                                                                                                                    </span>
<span class="6167230228674564015" onmouseenter="enter('6167230228674564015');" onmouseout="out('6167230228674564015');" style=""> 141      @Resource(name = &quot;blPersistenceProviders&quot;)                                                                    </span>
<span class="5197193686792056094" onmouseenter="enter('5197193686792056094');" onmouseout="out('5197193686792056094');" style=""><abbr title=" 142      protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;();"> 142      protected List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders = new ArrayList&lt;FieldPersistenceProvider&gt;()ðŸ”µ</abbr></span>
<span  style=""> 143                                                                                                                    </span>
<span class="6566976708558343402" onmouseenter="enter('6566976708558343402');" onmouseout="out('6566976708558343402');" style=""> 144      @Resource(name = &quot;blPopulateValueRequestValidators&quot;)                                                          </span>
<span class="8688460549992818244" onmouseenter="enter('8688460549992818244');" onmouseout="out('8688460549992818244');" style=""> 145      protected List&lt;PopulateValueRequestValidator&gt; populateValidators;                                             </span>
<span  style=""> 146                                                                                                                    </span>
<span class="2226562240918510507" onmouseenter="enter('2226562240918510507');" onmouseout="out('2226562240918510507');" style=""> 147      @Resource(name = &quot;blDefaultFieldPersistenceProvider&quot;)                                                         </span>
<span class="3736553406868276704" onmouseenter="enter('3736553406868276704');" onmouseout="out('3736553406868276704');" style=""> 148      protected FieldPersistenceProvider defaultFieldPersistenceProvider;                                           </span>
<span  style=""> 149                                                                                                                    </span>
<span class="-2696154002193407400" onmouseenter="enter('-2696154002193407400');" onmouseout="out('-2696154002193407400');" style=""> 150      @Resource(name = &quot;blCriteriaTranslator&quot;)                                                                      </span>
<span class="6548648040486234931" onmouseenter="enter('6548648040486234931');" onmouseout="out('6548648040486234931');" style=""> 151      protected CriteriaTranslator criteriaTranslator;                                                              </span>
<span  style=""> 152                                                                                                                    </span>
<span class="-4636653885273856120" onmouseenter="enter('-4636653885273856120');" onmouseout="out('-4636653885273856120');" style=""> 153      @Resource(name = &quot;blRestrictionFactory&quot;)                                                                      </span>
<span class="-4515285046595655523" onmouseenter="enter('-4515285046595655523');" onmouseout="out('-4515285046595655523');" style=""> 154      protected RestrictionFactory restrictionFactory;                                                              </span>
<span  style=""> 155                                                                                                                    </span>
<span class="2099612267381053384" onmouseenter="enter('2099612267381053384');" onmouseout="out('2099612267381053384');" style=""> 156      @Resource(name = &quot;blBasicPersistenceModuleExtensionManager&quot;)                                                  </span>
<span class="4348825311931369098" onmouseenter="enter('4348825311931369098');" onmouseout="out('4348825311931369098');" style=""> 157      protected BasicPersistenceModuleExtensionManager extensionManager;                                            </span>
<span  style=""> 158                                                                                                                    </span>
<span class="3131053547948330670" onmouseenter="enter('3131053547948330670');" onmouseout="out('3131053547948330670');" style=""> 159      @Resource(name = &quot;blFetchWrapper&quot;)                                                                            </span>
<span class="-359674182981681110" onmouseenter="enter('-359674182981681110');" onmouseout="out('-359674182981681110');" style=""> 160      protected FetchWrapper fetchWrapper;                                                                          </span>
<span  style=""> 161                                                                                                                    </span>
<span class="-5680397040643859011" onmouseenter="enter('-5680397040643859011');" onmouseout="out('-5680397040643859011');" style=""> 162      @PostConstruct                                                                                                </span>
<span class="-5421613521494184453" onmouseenter="enter('-5421613521494184453');" onmouseout="out('-5421613521494184453');" style=""> 163      public void init() {                                                                                          </span>
<span class="4686299079232078395" onmouseenter="enter('4686299079232078395');" onmouseout="out('4686299079232078395');" style=""> 164          Collections.sort(fieldPersistenceProviders, new Comparator&lt;FieldPersistenceProvider&gt;() {                  </span>
<span  style=""> 165                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 166              @Override                                                                                             </span>
<span class="3172150882386516312" onmouseenter="enter('3172150882386516312');" onmouseout="out('3172150882386516312');" style=""> 167              public int compare(FieldPersistenceProvider o1, FieldPersistenceProvider o2) {                        </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 168                  return Integer.compare(o1.getOrder(), o2.getOrder());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 170          });                                                                                                       </span>
<span class="-5522683723982909620" onmouseenter="enter('-5522683723982909620');" onmouseout="out('-5522683723982909620');" style=""> 171          Collections.sort(populateValidators, new Comparator&lt;PopulateValueRequestValidator&gt;() {                    </span>
<span  style=""> 172                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 173              @Override                                                                                             </span>
<span class="-53383489616583041" onmouseenter="enter('-53383489616583041');" onmouseout="out('-53383489616583041');" style=""> 174              public int compare(PopulateValueRequestValidator o1, PopulateValueRequestValidator o2) {              </span>
<span class="5620998118806141661" onmouseenter="enter('5620998118806141661');" onmouseout="out('5620998118806141661');" style=""> 175                  return Integer.compare(o1.getOrder(), o2.getOrder());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 177          });                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178      }                                                                                                             </span>
<span  style=""> 179                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 180      @Override                                                                                                     </span>
<span class="396918709943054648" onmouseenter="enter('396918709943054648');" onmouseout="out('396918709943054648');" style=""> 181      public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {              </span>
<span class="-8767252978178914531" onmouseenter="enter('-8767252978178914531');" onmouseout="out('-8767252978178914531');" style=""> 182          this.applicationContext = applicationContext;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183      }                                                                                                             </span>
<span  style=""> 184                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 185      @Override                                                                                                     </span>
<span class="-3014786585495943162" onmouseenter="enter('-3014786585495943162');" onmouseout="out('-3014786585495943162');" style=""> 186      public boolean isCompatible(OperationType operationType) {                                                    </span>
<span class="2141831482980401058" onmouseenter="enter('2141831482980401058');" onmouseout="out('2141831482980401058');" style=""> 187          return OperationType.BASIC == operationType || OperationType.NONDESTRUCTIVEREMOVE == operationType;       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188      }                                                                                                             </span>
<span  style=""> 189                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 190      @Override                                                                                                     </span>
<span class="-4646037950621881232" onmouseenter="enter('-4646037950621881232');" onmouseout="out('-4646037950621881232');" style=""> 191      public FieldManager getFieldManager() {                                                                       </span>
<span class="5127492287871228389" onmouseenter="enter('5127492287871228389');" onmouseout="out('5127492287871228389');" style=""> 192          return persistenceManager.getDynamicEntityDao().getFieldManager();                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193      }                                                                                                             </span>
<span  style=""> 194                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 195      @Override                                                                                                     </span>
<span class="6292426019095192675" onmouseenter="enter('6292426019095192675');" onmouseout="out('6292426019095192675');" style=""> 196      public DecimalFormat getDecimalFormatter() {                                                                  </span>
<span class="-8689839391291561327" onmouseenter="enter('-8689839391291561327');" onmouseout="out('-8689839391291561327');" style=""> 197          BroadleafRequestContext brc = BroadleafRequestContext.getBroadleafRequestContext();                       </span>
<span class="-6419077469974014826" onmouseenter="enter('-6419077469974014826');" onmouseout="out('-6419077469974014826');" style=""> 198          Locale locale = brc.getJavaLocale();                                                                      </span>
<span class="5393968905060170707" onmouseenter="enter('5393968905060170707');" onmouseout="out('5393968905060170707');" style=""> 199          DecimalFormat format = (DecimalFormat) NumberFormat.getInstance(locale);                                  </span>
<span class="-6387263728450575912" onmouseenter="enter('-6387263728450575912');" onmouseout="out('-6387263728450575912');" style=""> 200          format.applyPattern(&quot;0.########&quot;);                                                                        </span>
<span class="-7514226051094490374" onmouseenter="enter('-7514226051094490374');" onmouseout="out('-7514226051094490374');" style=""> 201          format.setGroupingUsed(false);                                                                            </span>
<span class="9058009825496417823" onmouseenter="enter('9058009825496417823');" onmouseout="out('9058009825496417823');" style=""> 202          return format;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203      }                                                                                                             </span>
<span  style=""> 204                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 205      @Override                                                                                                     </span>
<span class="3673790992053213915" onmouseenter="enter('3673790992053213915');" onmouseout="out('3673790992053213915');" style=""> 206      public SimpleDateFormat getSimpleDateFormatter() {                                                            </span>
<span class="-4651469406949839699" onmouseenter="enter('-4651469406949839699');" onmouseout="out('-4651469406949839699');" style=""> 207          return FormatUtil.getDateFormat();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208      }                                                                                                             </span>
<span  style=""> 209                                                                                                                    </span>
<span class="8865595993102688563" onmouseenter="enter('8865595993102688563');" onmouseout="out('8865595993102688563');" style=""> 210      protected Map&lt;String, FieldMetadata&gt; filterOutCollectionMetadata(Map&lt;String, FieldMetadata&gt; metadata) {       </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 211          if (metadata == null) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 212              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213          }                                                                                                         </span>
<span class="4579536340012797507" onmouseenter="enter('4579536340012797507');" onmouseout="out('4579536340012797507');" style=""> 214          Map&lt;String, FieldMetadata&gt; newMap = new HashMap&lt;String, FieldMetadata&gt;();                                 </span>
<span class="-7265940589949467353" onmouseenter="enter('-7265940589949467353');" onmouseout="out('-7265940589949467353');" style=""> 215          for (Map.Entry&lt;String, FieldMetadata&gt; entry : metadata.entrySet()) {                                      </span>
<span class="8190629385805201553" onmouseenter="enter('8190629385805201553');" onmouseout="out('8190629385805201553');" style=""> 216              String fieldName = entry.getKey();                                                                    </span>
<span class="-1384244356449002788" onmouseenter="enter('-1384244356449002788');" onmouseout="out('-1384244356449002788');" style=""> 217              FieldMetadata md = entry.getValue();                                                                  </span>
<span class="-392734195208043155" onmouseenter="enter('-392734195208043155');" onmouseout="out('-392734195208043155');" style=""><abbr title=" 218              // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but also corresponds"> 218              // Detect instances where the actual metadata for the field is some sort of CollectionMetadata but alsðŸ”µ</abbr></span>
<span class="5589067424379822421" onmouseenter="enter('5589067424379822421');" onmouseout="out('5589067424379822421');" style=""><abbr title=" 219              // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistenceModule}"> 219              // to a ForeignKey and ensure that gets included in the filtered map. That way the {@link BasicPersistðŸ”µ</abbr></span>
<span class="3711520644201471237" onmouseenter="enter('3711520644201471237');" onmouseout="out('3711520644201471237');" style=""> 220              // can appropriate handle filtration and population                                                   </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 221              if (entry.getValue() instanceof BasicFieldMetadata) {                                                 </span>
<span class="-2739418553393512485" onmouseenter="enter('-2739418553393512485');" onmouseout="out('-2739418553393512485');" style=""> 222                  newMap.put(fieldName, md);                                                                        </span>
<span class="4750432455054359328" onmouseenter="enter('4750432455054359328');" onmouseout="out('4750432455054359328');" style=""><abbr title=" 223              } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY)) {"> 223              } else if (md.getAdditionalMetadata().containsKey(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ðŸ”µ</abbr></span>
<span class="-8485840589316329792" onmouseenter="enter('-8485840589316329792');" onmouseout="out('-8485840589316329792');" style=""> 224                  newMap.put(fieldName,                                                                             </span>
<span class="-7674878801561950856" onmouseenter="enter('-7674878801561950856');" onmouseout="out('-7674878801561950856');" style=""><abbr title=" 225                          (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvider.FOREIGN_KEY_ADDITIONAL_METADATA_KEY));"> 225                          (BasicFieldMetadata) md.getAdditionalMetadata().get(AdvancedCollectionFieldMetadataProvideðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227          }                                                                                                         </span>
<span  style=""> 228                                                                                                                    </span>
<span class="-298172894898579181" onmouseenter="enter('-298172894898579181');" onmouseout="out('-298172894898579181');" style=""> 229          return newMap;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230      }                                                                                                             </span>
<span  style=""> 231                                                                                                                    </span>
<span class="5188070027912515482" onmouseenter="enter('5188070027912515482');" onmouseout="out('5188070027912515482');" style=""> 232      protected Class&lt;?&gt; getBasicBroadleafType(SupportedFieldType fieldType) {                                      </span>
<span class="4154961753427691315" onmouseenter="enter('4154961753427691315');" onmouseout="out('4154961753427691315');" style=""> 233          Class&lt;?&gt; response;                                                                                        </span>
<span class="2733460625953438179" onmouseenter="enter('2733460625953438179');" onmouseout="out('2733460625953438179');" style=""> 234          switch (fieldType) {                                                                                      </span>
<span class="-7896257890077828333" onmouseenter="enter('-7896257890077828333');" onmouseout="out('-7896257890077828333');" style=""> 235              case BOOLEAN:                                                                                         </span>
<span class="3764755044082566978" onmouseenter="enter('3764755044082566978');" onmouseout="out('3764755044082566978');" style=""> 236                  response = Boolean.TYPE;                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 237                  break;                                                                                            </span>
<span class="6347500693000317849" onmouseenter="enter('6347500693000317849');" onmouseout="out('6347500693000317849');" style=""> 238              case DATE:                                                                                            </span>
<span class="-9142021229939239714" onmouseenter="enter('-9142021229939239714');" onmouseout="out('-9142021229939239714');" style=""> 239                  response = Date.class;                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 240                  break;                                                                                            </span>
<span class="-3124240416500440487" onmouseenter="enter('-3124240416500440487');" onmouseout="out('-3124240416500440487');" style=""> 241              case DECIMAL:                                                                                         </span>
<span class="2581462076834923849" onmouseenter="enter('2581462076834923849');" onmouseout="out('2581462076834923849');" style=""> 242                  response = BigDecimal.class;                                                                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 243                  break;                                                                                            </span>
<span class="-8874916124792368887" onmouseenter="enter('-8874916124792368887');" onmouseout="out('-8874916124792368887');" style=""> 244              case MONEY:                                                                                           </span>
<span class="-3304037034117053709" onmouseenter="enter('-3304037034117053709');" onmouseout="out('-3304037034117053709');" style=""> 245                  response = Money.class;                                                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 246                  break;                                                                                            </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 247              case INTEGER:                                                                                         </span>
<span class="3505410153004371202" onmouseenter="enter('3505410153004371202');" onmouseout="out('3505410153004371202');" style=""> 248                  response = Integer.TYPE;                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 249                  break;                                                                                            </span>
<span class="1143803050270343828" onmouseenter="enter('1143803050270343828');" onmouseout="out('1143803050270343828');" style=""> 250              case UNKNOWN:                                                                                         </span>
<span class="-7560988579214347129" onmouseenter="enter('-7560988579214347129');" onmouseout="out('-7560988579214347129');" style=""> 251                  response = null;                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 252                  break;                                                                                            </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 253              default:                                                                                              </span>
<span class="5514005520990739575" onmouseenter="enter('5514005520990739575');" onmouseout="out('5514005520990739575');" style=""> 254                  response = String.class;                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 255                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256          }                                                                                                         </span>
<span  style=""> 257                                                                                                                    </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 258          return response;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259      }                                                                                                             </span>
<span  style=""> 260                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 261      @Override                                                                                                     </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 262      public Serializable createPopulatedInstance(Serializable instance, Entity entity,                             </span>
<span class="7620597898847416584" onmouseenter="enter('7620597898847416584');" onmouseout="out('7620597898847416584');" style=""> 263              Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId) throws ValidationException {          </span>
<span class="895901652489968225" onmouseenter="enter('895901652489968225');" onmouseout="out('895901652489968225');" style=""> 264          return createPopulatedInstance(instance, entity, unfilteredProperties, setId, true);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265      }                                                                                                             </span>
<span  style=""> 266                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 267      @Override                                                                                                     </span>
<span class="-376594888181403797" onmouseenter="enter('-376594888181403797');" onmouseout="out('-376594888181403797');" style=""> 268      public Serializable createPopulatedInstance(Serializable instance, Entity entity,                             </span>
<span class="-6938882731089232507" onmouseenter="enter('-6938882731089232507');" onmouseout="out('-6938882731089232507');" style=""><abbr title=" 269              Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties) throws ValidationException {"> 269              Map&lt;String, FieldMetadata&gt; unfilteredProperties, Boolean setId, Boolean validateUnsubmittedProperties)ðŸ”µ</abbr></span>
<span class="-8732291188132739434" onmouseenter="enter('-8732291188132739434');" onmouseout="out('-8732291188132739434');" style=""> 270          final Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(unfilteredProperties);    </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 271          FieldManager fieldManager = getFieldManager();                                                            </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 272          boolean handled = false;                                                                                  </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 273          for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {                     </span>
<span class="930709630548418813" onmouseenter="enter('930709630548418813');" onmouseout="out('930709630548418813');" style=""><abbr title=" 274              MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 274              MetadataProviderResponse response = fieldPersistenceProvider.filterProperties(new AddFilterPropertiesRðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 275              if (MetadataProviderResponse.NOT_HANDLED != response) {                                               </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 276                  handled = true;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277              }                                                                                                     </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 278              if (MetadataProviderResponse.HANDLED_BREAK == response) {                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 279                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281          }                                                                                                         </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 282          if (!handled) {                                                                                           </span>
<span class="6331160453122921870" onmouseenter="enter('6331160453122921870');" onmouseout="out('6331160453122921870');" style=""><abbr title=" 283              defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProperties);"> 283              defaultFieldPersistenceProvider.filterProperties(new AddFilterPropertiesRequest(entity), unfilteredProðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284          }                                                                                                         </span>
<span class="-3308237452429324216" onmouseenter="enter('-3308237452429324216');" onmouseout="out('-3308237452429324216');" style=""><abbr title=" 285          //Order media field, map field and rule builder fields last, as they will have some validation components that depend on previous values"> 285          //Order media field, map field and rule builder fields last, as they will have some validation components ðŸ”µ</abbr></span>
<span class="4866803097244618146" onmouseenter="enter('4866803097244618146');" onmouseout="out('4866803097244618146');" style=""> 286          Property[] sortedProperties = entity.getProperties();                                                     </span>
<span class="5005865694587957669" onmouseenter="enter('5005865694587957669');" onmouseout="out('5005865694587957669');" style=""> 287          Arrays.sort(sortedProperties, new Comparator&lt;Property&gt;() {                                                </span>
<span  style=""> 288                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 289              @Override                                                                                             </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style=""> 290              public int compare(Property o1, Property o2) {                                                        </span>
<span class="4801041391951231473" onmouseenter="enter('4801041391951231473');" onmouseout="out('4801041391951231473');" style=""> 291                  BasicFieldMetadata mo1 = (BasicFieldMetadata) mergedProperties.get(o1.getName());                 </span>
<span class="8712312491906706674" onmouseenter="enter('8712312491906706674');" onmouseout="out('8712312491906706674');" style=""> 292                  BasicFieldMetadata mo2 = (BasicFieldMetadata) mergedProperties.get(o2.getName());                 </span>
<span class="5597729834250389465" onmouseenter="enter('5597729834250389465');" onmouseout="out('5597729834250389465');" style=""><abbr title=" 293                  boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo1.getFieldType() ||"> 293                  boolean isLate1 = mo1 != null &amp;&amp; mo1.getFieldType() != null &amp;&amp; mo1.getName() != null &amp;&amp; (SupportedðŸ”µ</abbr></span>
<span class="-5228840553210193176" onmouseenter="enter('-5228840553210193176');" onmouseout="out('-5228840553210193176');" style=""> 294                          SupportedFieldType.RULE_WITH_QUANTITY==mo1.getFieldType() ||                              </span>
<span class="-2825740162482404988" onmouseenter="enter('-2825740162482404988');" onmouseout="out('-2825740162482404988');" style=""> 295                          SupportedFieldType.RULE_SIMPLE_TIME==mo1.getFieldType() ||                                </span>
<span class="-2758640436691235457" onmouseenter="enter('-2758640436691235457');" onmouseout="out('-2758640436691235457');" style=""><abbr title=" 296                          SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 296                          SupportedFieldType.MEDIA==mo1.getFieldType() || o1.getName().contains(FieldManager.MAPFIELðŸ”µ</abbr></span>
<span class="4460185052151715074" onmouseenter="enter('4460185052151715074');" onmouseout="out('4460185052151715074');" style=""><abbr title=" 297                  boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (SupportedFieldType.RULE_SIMPLE==mo2.getFieldType() ||"> 297                  boolean isLate2 = mo2 != null &amp;&amp; mo2.getFieldType() != null &amp;&amp; mo2.getName() != null &amp;&amp; (SupportedðŸ”µ</abbr></span>
<span class="1101038090453452590" onmouseenter="enter('1101038090453452590');" onmouseout="out('1101038090453452590');" style=""> 298                          SupportedFieldType.RULE_WITH_QUANTITY==mo2.getFieldType() ||                              </span>
<span class="-8197603398477948159" onmouseenter="enter('-8197603398477948159');" onmouseout="out('-8197603398477948159');" style=""> 299                          SupportedFieldType.RULE_SIMPLE_TIME==mo2.getFieldType() ||                                </span>
<span class="-275758415706895485" onmouseenter="enter('-275758415706895485');" onmouseout="out('-275758415706895485');" style=""><abbr title=" 300                          SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManager.MAPFIELDSEPARATOR));"> 300                          SupportedFieldType.MEDIA==mo2.getFieldType() || o2.getName().contains(FieldManager.MAPFIELðŸ”µ</abbr></span>
<span class="-2026914999367619686" onmouseenter="enter('-2026914999367619686');" onmouseout="out('-2026914999367619686');" style=""> 301                  if (isLate1 &amp;&amp; !isLate2) {                                                                        </span>
<span class="6787741487180588680" onmouseenter="enter('6787741487180588680');" onmouseout="out('6787741487180588680');" style=""> 302                      return 1;                                                                                     </span>
<span class="-3681644454129428558" onmouseenter="enter('-3681644454129428558');" onmouseout="out('-3681644454129428558');" style=""> 303                  } else if (!isLate1 &amp;&amp; isLate2) {                                                                 </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 304                      return -1;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305                  }                                                                                                 </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 306                  return 0;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 308          });                                                                                                       </span>
<span class="1932565359130544851" onmouseenter="enter('1932565359130544851');" onmouseout="out('1932565359130544851');" style=""><abbr title=" 309          Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.class);"> 309          Session session = getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().unwrap(Session.ðŸ”µ</abbr></span>
<span class="2352236362444167215" onmouseenter="enter('2352236362444167215');" onmouseout="out('2352236362444167215');" style=""> 310          FlushMode originalFlushMode = session.getFlushMode();                                                     </span>

<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 311          try {                                                                                                     </span>
<span class="-20881645087342177" onmouseenter="enter('-20881645087342177');" onmouseout="out('-20881645087342177');" style=""> 312              session.setFlushMode(FlushMode.MANUAL);                                                               </span>

<span class="3800930097913678918" onmouseenter="enter('3800930097913678918');" onmouseout="out('3800930097913678918');" style=""> 313              RuntimeException entityPersistenceException = null;                                                   </span>
<span class="7436252520289959863" onmouseenter="enter('7436252520289959863');" onmouseout="out('7436252520289959863');" style=""> 314              for (Property property : sortedProperties) {                                                          </span>
<span class="1357949122558141334" onmouseenter="enter('1357949122558141334');" onmouseout="out('1357949122558141334');" style=""> 315                  BasicFieldMetadata metadata = (BasicFieldMetadata) mergedProperties.get(property.getName());      </span>
<span class="-2710932228242800712" onmouseenter="enter('-2710932228242800712');" onmouseout="out('-2710932228242800712');" style=""> 316                  Class&lt;?&gt; returnType;                                                                              </span>
<span class="8439611434668123958" onmouseenter="enter('8439611434668123958');" onmouseout="out('8439611434668123958');" style=""><abbr title=" 317                  if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().startsWith(&quot;__&quot;)) {"> 317                  if (!property.getName().contains(FieldManager.MAPFIELDSEPARATOR) &amp;&amp; !property.getName().startsWithðŸ”µ</abbr></span>
<span class="-3329718253928059141" onmouseenter="enter('-3329718253928059141');" onmouseout="out('-3329718253928059141');" style=""> 318                      Field field = fieldManager.getField(instance.getClass(), property.getName());                 </span>
<span class="-6389169260302086885" onmouseenter="enter('-6389169260302086885');" onmouseout="out('-6389169260302086885');" style=""> 319                      if (field == null) {                                                                          </span>
<span class="2139581581669054854" onmouseenter="enter('2139581581669054854');" onmouseout="out('2139581581669054854');" style=""><abbr title=" 320                          LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 320                          LOG.debug(&quot;Unable to find a bean property for the reported property: &quot; + StringUtil.sanitiðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 321                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 322                      }                                                                                             </span>
<span class="8953519469960391957" onmouseenter="enter('8953519469960391957');" onmouseout="out('8953519469960391957');" style=""> 323                      returnType = field.getType();                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 324                  } else {                                                                                          </span>
<span class="168581035279896700" onmouseenter="enter('168581035279896700');" onmouseout="out('168581035279896700');" style=""> 325                      if (metadata == null) {                                                                       </span>
<span class="8114946394939525604" onmouseenter="enter('8114946394939525604');" onmouseout="out('8114946394939525604');" style=""><abbr title=" 326                          LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.sanitize(property.getName()) + &quot;. Ignoring property.&quot;);"> 326                          LOG.debug(&quot;Unable to find a metadata property for the reported property: &quot; + StringUtil.saðŸ”µ</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 327                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328                      }                                                                                             </span>
<span class="-8567483443765194758" onmouseenter="enter('-8567483443765194758');" onmouseout="out('-8567483443765194758');" style=""> 329                      returnType = getMapFieldType(instance, fieldManager, property);                               </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 330                      if (returnType == null) {                                                                     </span>
<span class="1531226167473626096" onmouseenter="enter('1531226167473626096');" onmouseout="out('1531226167473626096');" style=""> 331                          returnType = getBasicBroadleafType(metadata.getFieldType());                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333                  }                                                                                                 </span>
<span class="122354970840334348" onmouseenter="enter('122354970840334348');" onmouseout="out('122354970840334348');" style=""> 334                  if (returnType == null) {                                                                         </span>
<span class="8716882681587381997" onmouseenter="enter('8716882681587381997');" onmouseout="out('8716882681587381997');" style=""><abbr title=" 335                      throw new IllegalAccessException(&quot;Unable to determine the value type for the property (&quot; + property.getName() + &quot;)&quot;);"> 335                      throw new IllegalAccessException(&quot;Unable to determine the value type for the property (&quot; + proðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336                  }                                                                                                 </span>
<span class="-1342740262664655807" onmouseenter="enter('-1342740262664655807');" onmouseout="out('-1342740262664655807');" style=""> 337                  String value = property.getValue();                                                               </span>
<span class="6116690946102675760" onmouseenter="enter('6116690946102675760');" onmouseout="out('6116690946102675760');" style=""> 338                  if (metadata != null) {                                                                           </span>
<span  style=""> 339                                                                                                                    </span>
<span class="6432907771531110343" onmouseenter="enter('6432907771531110343');" onmouseout="out('6432907771531110343');" style=""> 340                      if (metadata.getFieldType().equals(SupportedFieldType.BOOLEAN)) {                             </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 341                          if (value == null) {                                                                      </span>
<span class="3558706163819897442" onmouseenter="enter('3558706163819897442');" onmouseout="out('3558706163819897442');" style=""> 342                              value = &quot;false&quot;;                                                                      </span>


<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343                          }                                                                                         </span>
<span class="5830462858832599582" onmouseenter="enter('5830462858832599582');" onmouseout="out('5830462858832599582');" style=""> 344                      } else if (metadata.getFieldType().equals(SupportedFieldType.DATE)) {                         </span>
<span class="1584182115233885945" onmouseenter="enter('1584182115233885945');" onmouseout="out('1584182115233885945');" style=""> 345                          if (StringUtils.isEmpty(value)) {                                                         </span>
<span class="-7092419811380344208" onmouseenter="enter('-7092419811380344208');" onmouseout="out('-7092419811380344208');" style=""> 346                              value = null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348                      }                                                                                             </span>
<span  style=""> 349                                                                                                                    </span>
<span class="5304497076822353807" onmouseenter="enter('5304497076822353807');" onmouseout="out('5304497076822353807');" style=""><abbr title=" 350                      if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) {"> 350                      if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) ðŸ”µ</abbr></span>
<span class="-486793269557446445" onmouseenter="enter('-486793269557446445');" onmouseout="out('-486793269557446445');" style=""> 351                          boolean isValid = true;                                                                   </span>
<span class="1658940141758117529" onmouseenter="enter('1658940141758117529');" onmouseout="out('1658940141758117529');" style=""><abbr title=" 352                          PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd());"> 352                          PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metðŸ”µ</abbr></span>
<span class="-7942780495263533884" onmouseenter="enter('-7942780495263533884');" onmouseout="out('-7942780495263533884');" style=""> 353                          handled = false;                                                                          </span>
<span class="3197362083799660545" onmouseenter="enter('3197362083799660545');" onmouseout="out('3197362083799660545');" style=""> 354                          if (value != null) {                                                                      </span>
<span class="-3229008606700200313" onmouseenter="enter('-3229008606700200313');" onmouseout="out('-3229008606700200313');" style=""> 355                              for (PopulateValueRequestValidator validator : populateValidators) {                  </span>
<span class="884666747315214760" onmouseenter="enter('884666747315214760');" onmouseout="out('884666747315214760');" style=""> 356                                  PropertyValidationResult validationResult = validator.validate(request, instance);</span>
<span class="-4364264466893249362" onmouseenter="enter('-4364264466893249362');" onmouseout="out('-4364264466893249362');" style=""> 357                                  if (!validationResult.isValid()) {                                                </span>
<span class="-8273348184937120120" onmouseenter="enter('-8273348184937120120');" onmouseout="out('-8273348184937120120');" style=""><abbr title=" 358                                      entity.addValidationError(property.getName(), validationResult.getErrorMessage());"> 358                                      entity.addValidationError(property.getName(), validationResult.getErrorMessageðŸ”µ</abbr></span>
<span class="-5133746822051192612" onmouseenter="enter('-5133746822051192612');" onmouseout="out('-5133746822051192612');" style=""> 359                                      isValid = false;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 361                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 362                          }                                                                                         </span>
<span class="-2043265533105198042" onmouseenter="enter('-2043265533105198042');" onmouseout="out('-2043265533105198042');" style=""> 363                          if (isValid) {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 364                              try {                                                                                 </span>
<span class="493530022350283834" onmouseenter="enter('493530022350283834');" onmouseout="out('493530022350283834');" style=""> 365                                  boolean isBreakDetected = false;                                                  </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""><abbr title=" 366                                  for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {"> 366                                  for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProvidersðŸ”µ</abbr></span>
<span class="-2175392382273122455" onmouseenter="enter('-2175392382273122455');" onmouseout="out('-2175392382273122455');" style=""><abbr title=" 367                                      if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (value != null || fieldPersistenceProvider.canHandlePopulateNull())) {"> 367                                      if ((!isBreakDetected || fieldPersistenceProvider.alwaysRun()) &amp;&amp; (value != nuðŸ”µ</abbr></span>
<span class="-9063763262484694182" onmouseenter="enter('-9063763262484694182');" onmouseout="out('-9063763262484694182');" style=""><abbr title=" 368                                          MetadataProviderResponse response = fieldPersistenceProvider.populateValue(request, instance);"> 368                                          MetadataProviderResponse response = fieldPersistenceProvider.populateValueðŸ”µ</abbr></span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 369                                          if (MetadataProviderResponse.NOT_HANDLED != response) {                   </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 370                                              handled = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371                                          }                                                                         </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 372                                          if (MetadataProviderResponse.HANDLED_BREAK == response) {                 </span>
<span class="7683637701498275712" onmouseenter="enter('7683637701498275712');" onmouseout="out('7683637701498275712');" style=""> 373                                              isBreakDetected = true;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374                                          }                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 375                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376                                  }                                                                                 </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 377                                  if (!handled) {                                                                   </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 378                                      if (value == null) {                                                          </span>
<span class="882791416935144082" onmouseenter="enter('882791416935144082');" onmouseout="out('882791416935144082');" style=""> 379                                          property.setIsDirty(true);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380                                      }                                                                             </span>
<span class="1375938864856367065" onmouseenter="enter('1375938864856367065');" onmouseout="out('1375938864856367065');" style=""><abbr title=" 381                                      defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd()), instance);"> 381                                      defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, ðŸ”µ</abbr></span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 382                                      if (value == null) {                                                          </span>
<span class="-9084682385294658879" onmouseenter="enter('-9084682385294658879');" onmouseout="out('-9084682385294658879');" style=""> 383                                          fieldManager.setFieldValue(instance, property.getName(), null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385                                  }                                                                                 </span>
<span class="8793300741685062154" onmouseenter="enter('8793300741685062154');" onmouseout="out('8793300741685062154');" style=""> 386                              } catch (ParentEntityPersistenceException | javax.validation.ValidationException e) { </span>
<span class="9214632560148736873" onmouseenter="enter('9214632560148736873');" onmouseout="out('9214632560148736873');" style=""> 387                                  entityPersistenceException = e;                                                   </span>
<span class="8194585295280636961" onmouseenter="enter('8194585295280636961');" onmouseout="out('8194585295280636961');" style=""> 388                                  cleanupFailedPersistenceAttempt(instance);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 389                                  break;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 394              }                                                                                                     </span>
<span class="-8941633054064108755" onmouseenter="enter('-8941633054064108755');" onmouseout="out('-8941633054064108755');" style=""> 395              // Only check validation if not the initial add                                                       </span>
<span class="3237544980725266527" onmouseenter="enter('3237544980725266527');" onmouseout="out('3237544980725266527');" style=""> 396              if (!entity.isPreAdd()) {                                                                             </span>
<span class="-9050207745018896152" onmouseenter="enter('-9050207745018896152');" onmouseout="out('-9050207745018896152');" style=""> 397                  validate(entity, instance, mergedProperties, validateUnsubmittedProperties);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398              }                                                                                                     </span>
<span class="32753067189116500" onmouseenter="enter('32753067189116500');" onmouseout="out('32753067189116500');" style=""> 399              //if validation failed, refresh the current instance so that none of the changes will be persisted    </span>
<span class="-2597695263377724387" onmouseenter="enter('-2597695263377724387');" onmouseout="out('-2597695263377724387');" style=""> 400              if (entity.isValidationFailure()) {                                                                   </span>
<span class="-5245333264083845326" onmouseenter="enter('-5245333264083845326');" onmouseout="out('-5245333264083845326');" style=""> 401                  //only refresh the instance if it was managed to begin with                                       </span>
<span class="9192371448315551444" onmouseenter="enter('9192371448315551444');" onmouseout="out('9192371448315551444');" style=""> 402                  if (persistenceManager.getDynamicEntityDao().getStandardEntityManager().contains(instance)) {     </span>
<span class="5068098197212588956" onmouseenter="enter('5068098197212588956');" onmouseout="out('5068098197212588956');" style=""> 403                      persistenceManager.getDynamicEntityDao().refresh(instance);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404                  }                                                                                                 </span>
<span  style=""> 405                                                                                                                    </span>
<span class="-2797407664577460515" onmouseenter="enter('-2797407664577460515');" onmouseout="out('-2797407664577460515');" style=""> 406                  //re-initialize the valid properties for the entity in order to deal with the potential of not    </span>
<span class="7620881433898036398" onmouseenter="enter('7620881433898036398');" onmouseout="out('7620881433898036398');" style=""> 407                  //completely sending over all checkbox/radio fields                                               </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 408                  List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                                   </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 409                  entityList.add(instance);                                                                         </span>
<span class="-903163901416962067" onmouseenter="enter('-903163901416962067');" onmouseout="out('-903163901416962067');" style=""> 410                  Entity invalid = getRecords(mergedProperties, entityList, null, null, null)[0];                   </span>
<span class="-434334858457397385" onmouseenter="enter('-434334858457397385');" onmouseout="out('-434334858457397385');" style=""> 411                  invalid.setPropertyValidationErrors(entity.getPropertyValidationErrors());                        </span>
<span class="-4617220526414327800" onmouseenter="enter('-4617220526414327800');" onmouseout="out('-4617220526414327800');" style=""> 412                  invalid.setGlobalValidationErrors(entity.getGlobalValidationErrors());                            </span>
<span class="-3275304366399180151" onmouseenter="enter('-3275304366399180151');" onmouseout="out('-3275304366399180151');" style=""> 413                  invalid.overridePropertyValues(entity);                                                           </span>
<span  style=""> 414                                                                                                                    </span>
<span class="-5826985379545468824" onmouseenter="enter('-5826985379545468824');" onmouseout="out('-5826985379545468824');" style=""><abbr title=" 415                  String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.getGlobalValidationErrors());"> 415                  String message = ValidationUtil.buildErrorMessage(invalid.getPropertyValidationErrors(), invalid.gðŸ”µ</abbr></span>
<span class="-1571824840661221764" onmouseenter="enter('-1571824840661221764');" onmouseout="out('-1571824840661221764');" style=""> 416                  throw new ValidationException(invalid, message);                                                  </span>
<span class="-4684713380455277597" onmouseenter="enter('-4684713380455277597');" onmouseout="out('-4684713380455277597');" style=""> 417              } else if (entityPersistenceException != null) {                                                      </span>
<span class="1045288364868684284" onmouseenter="enter('1045288364868684284');" onmouseout="out('1045288364868684284');" style=""> 418                  throw ExceptionHelper.refineException(entityPersistenceException.getCause());                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 419              } else {                                                                                              </span>
<span class="7383617604540684898" onmouseenter="enter('7383617604540684898');" onmouseout="out('7383617604540684898');" style=""> 420                  fieldManager.persistMiddleEntities();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421              }                                                                                                     </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 422          } catch (IllegalAccessException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 423              throw new PersistenceException(e);                                                                    </span>
<span class="6243028624057522413" onmouseenter="enter('6243028624057522413');" onmouseout="out('6243028624057522413');" style=""> 424          } catch (InstantiationException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 425              throw new PersistenceException(e);                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 426          } finally {                                                                                               </span>
<span class="6063597376304480914" onmouseenter="enter('6063597376304480914');" onmouseout="out('6063597376304480914');" style=""> 427              session.setFlushMode(originalFlushMode);                                                              </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428          }                                                                                                         </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style=""> 429          return instance;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430      }                                                                                                             </span>
<span  style=""> 431                                                                                                                    </span>
<span class="461529783746476585" onmouseenter="enter('461529783746476585');" onmouseout="out('461529783746476585');" style=""> 432      protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable instance, </span>
<span class="3885863412641560188" onmouseenter="enter('3885863412641560188');" onmouseout="out('3885863412641560188');" style=""><abbr title=" 433                                               Boolean setId, BasicFieldMetadata metadata, Entity entity, String value) throws IllegalAccessException {"> 433                                               Boolean setId, BasicFieldMetadata metadata, Entity entity, String valðŸ”µ</abbr></span>
<span class="-8863585303780993216" onmouseenter="enter('-8863585303780993216');" onmouseout="out('-8863585303780993216');" style=""> 434          Boolean mutable = metadata.getMutable();                                                                  </span>
<span class="8777806519724314753" onmouseenter="enter('8777806519724314753');" onmouseout="out('8777806519724314753');" style=""> 435          Boolean readOnly = metadata.getReadOnly();                                                                </span>
<span class="949029723485795199" onmouseenter="enter('949029723485795199');" onmouseout="out('949029723485795199');" style=""><abbr title=" 436          boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp; property.getEnabled();"> 436          boolean generalConditionsMet = (mutable == null || mutable) &amp;&amp; (readOnly == null || !readOnly) &amp;&amp; propertyðŸ”µ</abbr></span>
<span  style=""> 437                                                                                                                    </span>
<span class="-5466596695953259298" onmouseenter="enter('-5466596695953259298');" onmouseout="out('-5466596695953259298');" style=""> 438          if (generalConditionsMet &amp;&amp; value == null) {                                                              </span>
<span class="3784846250944455561" onmouseenter="enter('3784846250944455561');" onmouseout="out('3784846250944455561');" style=""> 439              boolean currentValueIsNotNull = false;                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 440              try {                                                                                                 </span>
<span class="-6026008610562760887" onmouseenter="enter('-6026008610562760887');" onmouseout="out('-6026008610562760887');" style=""> 441                  currentValueIsNotNull = fieldManager.getFieldValue(instance, property.getName()) != null;         </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 442              } catch (FieldNotAvailableException e) {                                                              </span>
<span class="5941411430976365683" onmouseenter="enter('5941411430976365683');" onmouseout="out('5941411430976365683');" style=""> 443                  throw new IllegalArgumentException(e);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444              }                                                                                                     </span>
<span  style=""> 445                                                                                                                    </span>
<span class="2174296922893169949" onmouseenter="enter('2174296922893169949');" onmouseout="out('2174296922893169949');" style=""> 446              boolean valueIsNotNullId = metadata.getFieldType() != SupportedFieldType.ID || setId;                 </span>
<span class="3378189448655180920" onmouseenter="enter('3378189448655180920');" onmouseout="out('3378189448655180920');" style=""> 447              boolean valueIsNotPassword = metadata.getFieldType() != SupportedFieldType.PASSWORD;                  </span>
<span  style=""> 448                                                                                                                    </span>
<span class="-802153418821632058" onmouseenter="enter('-802153418821632058');" onmouseout="out('-802153418821632058');" style=""> 449              return currentValueIsNotNull &amp;&amp; !entity.isPreAdd() &amp;&amp; valueIsNotNullId &amp;&amp; valueIsNotPassword;         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450          }                                                                                                         </span>
<span class="7805064061324166126" onmouseenter="enter('7805064061324166126');" onmouseout="out('7805064061324166126');" style=""> 451          return generalConditionsMet;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452      }                                                                                                             </span>
<span  style=""> 453                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 454      @Override                                                                                                     </span>
<span class="1852783233485112885" onmouseenter="enter('1852783233485112885');" onmouseout="out('1852783233485112885');" style=""><abbr title=" 455      public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FieldMetadata&gt; alternateMergedProperties, String pathToTargetObject) {"> 455      public Entity getRecord(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, Serializable record, Map&lt;String, FðŸ”µ</abbr></span>
<span class="-6187207773895344621" onmouseenter="enter('-6187207773895344621');" onmouseout="out('-6187207773895344621');" style=""> 456          List&lt;Serializable&gt; records = new ArrayList&lt;Serializable&gt;(1);                                              </span>
<span class="5878022765752800842" onmouseenter="enter('5878022765752800842');" onmouseout="out('5878022765752800842');" style=""> 457          records.add(record);                                                                                      </span>
<span class="496294912681907043" onmouseenter="enter('496294912681907043');" onmouseout="out('496294912681907043');" style=""><abbr title=" 458          Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTargetObject, null);"> 458          Entity[] productEntities = getRecords(primaryMergedProperties, records, alternateMergedProperties, pathToTðŸ”µ</abbr></span>
<span class="-9062758151482460865" onmouseenter="enter('-9062758151482460865');" onmouseout="out('-9062758151482460865');" style=""> 459          return productEntities[0];                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460      }                                                                                                             </span>
<span  style=""> 461                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 462      @Override                                                                                                     </span>
<span class="5781949221273262010" onmouseenter="enter('5781949221273262010');" onmouseout="out('5781949221273262010');" style=""><abbr title=" 463      public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, Serializable record) {"> 463      public Entity getRecord(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, SerializabðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 464          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 464          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persðŸ”µ</abbr></span>
<span class="-5151099947242221721" onmouseenter="enter('-5151099947242221721');" onmouseout="out('-5151099947242221721');" style=""> 465          return getRecord(mergedProperties, record, null, null);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466      }                                                                                                             </span>
<span  style=""> 467                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 468      @Override                                                                                                     </span>
<span class="-4520532598669526895" onmouseenter="enter('-4520532598669526895');" onmouseout="out('-4520532598669526895');" style=""><abbr title=" 469      public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? extends Serializable&gt; records) {"> 469      public Entity[] getRecords(Class&lt;?&gt; ceilingEntityClass, PersistencePerspective persistencePerspective, List&lt;? ðŸ”µ</abbr></span>
<span class="-2823456350382238497" onmouseenter="enter('-2823456350382238497');" onmouseout="out('-2823456350382238497');" style=""><abbr title=" 470          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persistencePerspective);"> 470          Map&lt;String, FieldMetadata&gt; mergedProperties = getSimpleMergedProperties(ceilingEntityClass.getName(), persðŸ”µ</abbr></span>
<span class="-928847591506271316" onmouseenter="enter('-928847591506271316');" onmouseout="out('-928847591506271316');" style=""> 471          return getRecords(mergedProperties, records, null, null, null);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472      }                                                                                                             </span>
<span  style=""> 473                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 474      @Override                                                                                                     </span>
<span class="-8278894720012200265" onmouseenter="enter('-8278894720012200265');" onmouseout="out('-8278894720012200265');" style=""><abbr title=" 475      public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persistencePerspective) {"> 475      public Map&lt;String, FieldMetadata&gt; getSimpleMergedProperties(String entityName, PersistencePerspective persisteðŸ”µ</abbr></span>
<span class="-3722133806289408051" onmouseenter="enter('-3722133806289408051');" onmouseout="out('-3722133806289408051');" style=""><abbr title=" 476          return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspective);"> 476          return persistenceManager.getDynamicEntityDao().getSimpleMergedProperties(entityName, persistencePerspectiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477      }                                                                                                             </span>
<span  style=""> 478                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 479      @Override                                                                                                     </span>
<span class="-721724575932279638" onmouseenter="enter('-721724575932279638');" onmouseout="out('-721724575932279638');" style=""><abbr title=" 480      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; records) {"> 480      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryMergedProperties, List&lt;? extends Serializable&gt; reðŸ”µ</abbr></span>
<span class="8327530304239683256" onmouseenter="enter('8327530304239683256');" onmouseout="out('8327530304239683256');" style=""> 481          return getRecords(primaryMergedProperties, records, null, null, null);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482      }                                                                                                             </span>
<span  style=""> 483                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 484      @Override                                                                                                     </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 485      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,                      </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 486                                 List&lt;? extends Serializable&gt; records,                                              </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 487                                 Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,                    </span>
<span class="-4377947839867578072" onmouseenter="enter('-4377947839867578072');" onmouseout="out('-4377947839867578072');" style=""> 488                                 String pathToTargetObject) {                                                       </span>
<span class="4685453067306146439" onmouseenter="enter('4685453067306146439');" onmouseout="out('4685453067306146439');" style=""><abbr title=" 489          return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTargetObject, null);"> 489          return getRecords(primaryUnfilteredMergedProperties, records, alternateUnfilteredMergedProperties, pathToTðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490      }                                                                                                             </span>
<span  style=""> 491                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 492      @Override                                                                                                     </span>
<span class="577594908411756580" onmouseenter="enter('577594908411756580');" onmouseout="out('577594908411756580');" style=""> 493      public Entity[] getRecords(Map&lt;String, FieldMetadata&gt; primaryUnfilteredMergedProperties,                      </span>
<span class="-2006135984993497970" onmouseenter="enter('-2006135984993497970');" onmouseout="out('-2006135984993497970');" style=""> 494                                 List&lt;? extends Serializable&gt; records,                                              </span>
<span class="-965848040469310744" onmouseenter="enter('-965848040469310744');" onmouseout="out('-965848040469310744');" style=""> 495                                 Map&lt;String, FieldMetadata&gt; alternateUnfilteredMergedProperties,                    </span>
<span class="8335655514773173486" onmouseenter="enter('8335655514773173486');" onmouseout="out('8335655514773173486');" style=""> 496                                 String pathToTargetObject,                                                         </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 497                                 String[] customCriteria) {                                                         </span>
<span class="-7988348483038990196" onmouseenter="enter('-7988348483038990196');" onmouseout="out('-7988348483038990196');" style=""><abbr title=" 498          Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedProperties);"> 498          Map&lt;String, FieldMetadata&gt; primaryMergedProperties = filterOutCollectionMetadata(primaryUnfilteredMergedPrðŸ”µ</abbr></span>
<span class="-3378908089969836890" onmouseenter="enter('-3378908089969836890');" onmouseout="out('-3378908089969836890');" style=""><abbr title=" 499          Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergedProperties);"> 499          Map&lt;String, FieldMetadata&gt; alternateMergedProperties = filterOutCollectionMetadata(alternateUnfilteredMergðŸ”µ</abbr></span>
<span class="-6780502465801472168" onmouseenter="enter('-6780502465801472168');" onmouseout="out('-6780502465801472168');" style=""> 500          Entity[] entities = new Entity[records.size()];                                                           </span>
<span class="-3238093963120777374" onmouseenter="enter('-3238093963120777374');" onmouseout="out('-3238093963120777374');" style=""> 501          int j = 0;                                                                                                </span>
<span class="3456801759115552322" onmouseenter="enter('3456801759115552322');" onmouseout="out('3456801759115552322');" style=""> 502          for (Serializable recordEntity : records) {                                                               </span>
<span class="619523180404568822" onmouseenter="enter('619523180404568822');" onmouseout="out('619523180404568822');" style=""> 503              Serializable entity;                                                                                  </span>
<span class="-2186067977699467203" onmouseenter="enter('-2186067977699467203');" onmouseout="out('-2186067977699467203');" style=""> 504              if (pathToTargetObject != null) {                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 505                  try {                                                                                             </span>
<span class="-5492139625117264664" onmouseenter="enter('-5492139625117264664');" onmouseout="out('-5492139625117264664');" style=""> 506                      entity = (Serializable) getFieldManager().getFieldValue(recordEntity, pathToTargetObject);    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 507                  } catch (Exception e) {                                                                           </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 508                      throw new PersistenceException(e);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 510              } else {                                                                                              </span>
<span class="-6074236754568201796" onmouseenter="enter('-6074236754568201796');" onmouseout="out('-6074236754568201796');" style=""> 511                  entity = recordEntity;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512              }                                                                                                     </span>
<span class="8514876957999010588" onmouseenter="enter('8514876957999010588');" onmouseout="out('8514876957999010588');" style=""> 513              Entity entityItem = new Entity();                                                                     </span>
<span class="3587737780108495887" onmouseenter="enter('3587737780108495887');" onmouseout="out('3587737780108495887');" style=""> 514              entityItem.setType(new String[] { entity.getClass().getName() });                                     </span>
<span class="-2252000440729832309" onmouseenter="enter('-2252000440729832309');" onmouseout="out('-2252000440729832309');" style=""> 515              entities[j] = entityItem;                                                                             </span>
<span  style=""> 516                                                                                                                    </span>
<span class="3961822747852490020" onmouseenter="enter('3961822747852490020');" onmouseout="out('3961822747852490020');" style=""> 517              List&lt;Property&gt; props = new ArrayList&lt;Property&gt;(primaryMergedProperties.size());                       </span>
<span class="-4152224460170095636" onmouseenter="enter('-4152224460170095636');" onmouseout="out('-4152224460170095636');" style=""> 518              extractPropertiesFromPersistentEntity(primaryMergedProperties, entity, props, customCriteria);        </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 519              if (alternateMergedProperties != null) {                                                              </span>
<span class="-9087051985097357993" onmouseenter="enter('-9087051985097357993');" onmouseout="out('-9087051985097357993');" style=""><abbr title=" 520                  extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriteria);"> 520                  extractPropertiesFromPersistentEntity(alternateMergedProperties, recordEntity, props, customCriterðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521              }                                                                                                     </span>
<span  style=""> 522                                                                                                                    </span>
<span class="-5089629635789493807" onmouseenter="enter('-5089629635789493807');" onmouseout="out('-5089629635789493807');" style=""> 523              // Try to add the &quot;main name&quot; property. Log a debug message if we can&#x27;t                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 524              try {                                                                                                 </span>
<span class="5380947615780799183" onmouseenter="enter('5380947615780799183');" onmouseout="out('5380947615780799183');" style=""> 525                  Property p = new Property();                                                                      </span>
<span class="1925482889972291082" onmouseenter="enter('1925482889972291082');" onmouseout="out('1925482889972291082');" style=""> 526                  p.setName(MAIN_ENTITY_NAME_PROPERTY);                                                             </span>
<span class="-280105646141823521" onmouseenter="enter('-280105646141823521');" onmouseout="out('-280105646141823521');" style=""> 527                  String mainEntityName = (String) MethodUtils.invokeMethod(entity, &quot;getMainEntityName&quot;);           </span>
<span class="-4568210868795612410" onmouseenter="enter('-4568210868795612410');" onmouseout="out('-4568210868795612410');" style=""> 528                  p.setValue(mainEntityName);                                                                       </span>
<span class="-4361225624073911918" onmouseenter="enter('-4361225624073911918');" onmouseout="out('-4361225624073911918');" style=""> 529                  props.add(p);                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 530              } catch (Exception e) {                                                                               </span>
<span class="8396621627303093896" onmouseenter="enter('8396621627303093896');" onmouseout="out('8396621627303093896');" style=""> 531                  LOG.debug(String.format(&quot;Could not execute the getMainEntityName() method for [%s]&quot;,              </span>
<span class="210384044775512031" onmouseenter="enter('210384044775512031');" onmouseout="out('210384044775512031');" style=""> 532                          entity.getClass().getName()), e);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533              }                                                                                                     </span>
<span  style=""> 534                                                                                                                    </span>
<span class="-8721953412008939855" onmouseenter="enter('-8721953412008939855');" onmouseout="out('-8721953412008939855');" style=""> 535              // Try to add the alternate id property if available                                                  </span>
<span class="-7480474276737122540" onmouseenter="enter('-7480474276737122540');" onmouseout="out('-7480474276737122540');" style=""> 536              if (alternateMergedProperties != null) {                                                              </span>
<span class="-2729730257234978997" onmouseenter="enter('-2729730257234978997');" onmouseout="out('-2729730257234978997');" style=""> 537                  for (Entry&lt;String, FieldMetadata&gt; entry : alternateMergedProperties.entrySet()) {                 </span>
<span class="-4746038496027221029" onmouseenter="enter('-4746038496027221029');" onmouseout="out('-4746038496027221029');" style=""> 538                      if (entry.getValue() instanceof BasicFieldMetadata) {                                         </span>
<span class="-3735738621021538581" onmouseenter="enter('-3735738621021538581');" onmouseout="out('-3735738621021538581');" style=""> 539                          if (((BasicFieldMetadata) entry.getValue()).getFieldType() == SupportedFieldType.ID) {    </span>
<span class="475815096463760847" onmouseenter="enter('475815096463760847');" onmouseout="out('475815096463760847');" style=""> 540                              Map&lt;String, FieldMetadata&gt; alternateOnEntity = new HashMap&lt;String, FieldMetadata&gt;();  </span>
<span class="-4538053591093527376" onmouseenter="enter('-4538053591093527376');" onmouseout="out('-4538053591093527376');" style=""> 541                              alternateOnEntity.put(entry.getKey(), entry.getValue());                              </span>
<span class="6846951436664779248" onmouseenter="enter('6846951436664779248');" onmouseout="out('6846951436664779248');" style=""> 542                              List&lt;Property&gt; props2 = new ArrayList&lt;Property&gt;();                                    </span>
<span class="5345785186371221305" onmouseenter="enter('5345785186371221305');" onmouseout="out('5345785186371221305');" style=""><abbr title=" 543                              extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCriteria);"> 543                              extractPropertiesFromPersistentEntity(alternateOnEntity, recordEntity, props2, customCðŸ”µ</abbr></span>
<span class="-7220107863695845032" onmouseenter="enter('-7220107863695845032');" onmouseout="out('-7220107863695845032');" style=""> 544                              List&lt;Property&gt; filtered = new ArrayList&lt;Property&gt;();                                  </span>
<span class="-7311698525315213587" onmouseenter="enter('-7311698525315213587');" onmouseout="out('-7311698525315213587');" style=""> 545                              for (Property prop : props2) {                                                        </span>
<span class="6017333932165432493" onmouseenter="enter('6017333932165432493');" onmouseout="out('6017333932165432493');" style=""> 546                                  if (!prop.getName().startsWith(&quot;__&quot;)) {                                           </span>
<span class="-5604579077622831568" onmouseenter="enter('-5604579077622831568');" onmouseout="out('-5604579077622831568');" style=""> 547                                      filtered.add(prop);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549                              }                                                                                     </span>
<span class="7776429612545514862" onmouseenter="enter('7776429612545514862');" onmouseout="out('7776429612545514862');" style=""> 550                              if (filtered.size() == 1 &amp;&amp; !filtered.get(0).getName().contains(&quot;.&quot;)) {               </span>
<span class="766644908777739787" onmouseenter="enter('766644908777739787');" onmouseout="out('766644908777739787');" style=""> 551                                  Property alternateIdProp = filtered.get(0);                                       </span>
<span class="1444561456824673058" onmouseenter="enter('1444561456824673058');" onmouseout="out('1444561456824673058');" style=""> 552                                  alternateIdProp.setName(ALTERNATE_ID_PROPERTY);                                   </span>
<span class="-1260553957514386502" onmouseenter="enter('-1260553957514386502');" onmouseout="out('-1260553957514386502');" style=""> 553                                  props.add(alternateIdProp);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 557                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 558              }                                                                                                     </span>
<span  style=""> 559                                                                                                                    </span>
<span class="3140965171760158820" onmouseenter="enter('3140965171760158820');" onmouseout="out('3140965171760158820');" style=""> 560              Property[] properties = new Property[props.size()];                                                   </span>
<span class="-5540374985766964035" onmouseenter="enter('-5540374985766964035');" onmouseout="out('-5540374985766964035');" style=""> 561              properties = props.toArray(properties);                                                               </span>
<span class="2992548432186189131" onmouseenter="enter('2992548432186189131');" onmouseout="out('2992548432186189131');" style=""> 562              entityItem.setProperties(properties);                                                                 </span>
<span class="-5688619574901767370" onmouseenter="enter('-5688619574901767370');" onmouseout="out('-5688619574901767370');" style=""> 563              j++;                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564          }                                                                                                         </span>
<span  style=""> 565                                                                                                                    </span>
<span class="-7616126935915446236" onmouseenter="enter('-7616126935915446236');" onmouseout="out('-7616126935915446236');" style=""> 566          return entities;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567      }                                                                                                             </span>
<span  style=""> 568                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 569      @Override                                                                                                     </span>
<span class="-1580059539469245457" onmouseenter="enter('-1580059539469245457');" onmouseout="out('-1580059539469245457');" style=""> 570      public Entity[] getRecords(FetchExtractionRequest fetchExtractionRequest) {                                   </span>
<span class="-7749788048664948511" onmouseenter="enter('-7749788048664948511');" onmouseout="out('-7749788048664948511');" style=""> 571          return fetchWrapper.getRecords(fetchExtractionRequest);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572      }                                                                                                             </span>
<span  style=""> 573                                                                                                                    </span>
<span class="2943865710042007016" onmouseenter="enter('2943865710042007016');" onmouseout="out('2943865710042007016');" style=""> 574      protected void extractPropertiesFromPersistentEntity(Map&lt;String, FieldMetadata&gt; mergedProperties,             </span>
<span class="-3214801195397343505" onmouseenter="enter('-3214801195397343505');" onmouseout="out('-3214801195397343505');" style=""> 575                                                           Serializable entity,                                     </span>
<span class="6006324038342333129" onmouseenter="enter('6006324038342333129');" onmouseout="out('6006324038342333129');" style=""> 576                                                           List&lt;Property&gt; props,                                    </span>
<span class="-5904701999123045237" onmouseenter="enter('-5904701999123045237');" onmouseout="out('-5904701999123045237');" style=""> 577                                                           String[] customCriteria) {                               </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style=""> 578          FieldManager fieldManager = getFieldManager();                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 579          try {                                                                                                     </span>
<span class="3586746813038594040" onmouseenter="enter('3586746813038594040');" onmouseout="out('3586746813038594040');" style=""> 580              if (entity instanceof AdminMainEntity) {                                                              </span>
<span class="-7831041928171184784" onmouseenter="enter('-7831041928171184784');" onmouseout="out('-7831041928171184784');" style=""> 581                  //Create an invisible property for the admin main entity name, if applicable.                     </span>
<span class="4236597300486677730" onmouseenter="enter('4236597300486677730');" onmouseout="out('4236597300486677730');" style=""> 582                  //This is useful for ToOneLookups if that ToOneLookup uses AdminMainEntity to drive               </span>
<span class="2696338225815060194" onmouseenter="enter('2696338225815060194');" onmouseout="out('2696338225815060194');" style=""> 583                  //its display name.                                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 584                  try {                                                                                             </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 585                      Property propertyItem = new Property();                                                       </span>
<span class="459927527015615277" onmouseenter="enter('459927527015615277');" onmouseout="out('459927527015615277');" style=""> 586                      propertyItem.setName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);                              </span>
<span class="-3439538412113948348" onmouseenter="enter('-3439538412113948348');" onmouseout="out('-3439538412113948348');" style=""> 587                      propertyItem.setValue(((AdminMainEntity) entity).getMainEntityName());                        </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 588                      props.add(propertyItem);                                                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 589                  } catch (Exception e) {                                                                           </span>
<span class="-6660676054828691164" onmouseenter="enter('-6660676054828691164');" onmouseout="out('-6660676054828691164');" style=""><abbr title=" 590                      //do nothing here except for not add the property. Exceptions could occur when there is a validation"> 590                      //do nothing here except for not add the property. Exceptions could occur when there is a valiðŸ”µ</abbr></span>
<span class="6622622754482242268" onmouseenter="enter('6622622754482242268');" onmouseout="out('6622622754482242268');" style=""><abbr title=" 591                      //issue and some properties/relationships that are used for gleaning the main entity name end up"> 591                      //issue and some properties/relationships that are used for gleaning the main entity name end ðŸ”µ</abbr></span>
<span class="-3324578144663288556" onmouseenter="enter('-3324578144663288556');" onmouseout="out('-3324578144663288556');" style=""> 592                      //not being set                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 593                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 594              }                                                                                                     </span>
<span class="6525223774393628953" onmouseenter="enter('6525223774393628953');" onmouseout="out('6525223774393628953');" style=""> 595              for (Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                              </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 596                  String property = entry.getKey();                                                                 </span>
<span class="-6557658272043627235" onmouseenter="enter('-6557658272043627235');" onmouseout="out('-6557658272043627235');" style=""> 597                  BasicFieldMetadata metadata = (BasicFieldMetadata) entry.getValue();                              </span>
<span class="1571137238250878820" onmouseenter="enter('1571137238250878820');" onmouseout="out('1571137238250878820');" style=""><abbr title=" 598                  if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.getClass().isAssignableFrom(Class.forName(metadata.getInheritedFromType()))) {"> 598                  if (Class.forName(metadata.getInheritedFromType()).isAssignableFrom(entity.getClass()) || entity.gðŸ”µ</abbr></span>
<span class="6995086675671638042" onmouseenter="enter('6995086675671638042');" onmouseout="out('6995086675671638042');" style=""> 599                      boolean proceed = true;                                                                       </span>
<span class="1084798123261065834" onmouseenter="enter('1084798123261065834');" onmouseout="out('1084798123261065834');" style=""> 600                      if (property.contains(&quot;.&quot;)) {                                                                 </span>
<span class="-2955712908532642203" onmouseenter="enter('-2955712908532642203');" onmouseout="out('-2955712908532642203');" style=""> 601                          StringTokenizer tokens = new StringTokenizer(property, &quot;.&quot;);                              </span>
<span class="682329956200427964" onmouseenter="enter('682329956200427964');" onmouseout="out('682329956200427964');" style=""> 602                          Object testObject = entity;                                                               </span>
<span class="2196330750852339617" onmouseenter="enter('2196330750852339617');" onmouseout="out('2196330750852339617');" style=""> 603                          while (tokens.hasMoreTokens()) {                                                          </span>
<span class="-3851292165554806554" onmouseenter="enter('-3851292165554806554');" onmouseout="out('-3851292165554806554');" style=""> 604                              String token = tokens.nextToken();                                                    </span>
<span class="7999260116794465545" onmouseenter="enter('7999260116794465545');" onmouseout="out('7999260116794465545');" style=""> 605                              if (tokens.hasMoreTokens()) {                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 606                                  try {                                                                             </span>
<span class="1542151824276478361" onmouseenter="enter('1542151824276478361');" onmouseout="out('1542151824276478361');" style=""> 607                                      testObject = fieldManager.getFieldValue(testObject, token);                   </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 608                                  } catch (FieldNotAvailableException e) {                                          </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 609                                      proceed = false;                                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 610                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611                                  }                                                                                 </span>
<span class="8671980878137139761" onmouseenter="enter('8671980878137139761');" onmouseout="out('8671980878137139761');" style=""> 612                                  if (testObject == null) {                                                         </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 613                                      Property propertyItem = new Property();                                       </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 614                                      propertyItem.setName(property);                                               </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 615                                      if (props.contains(propertyItem)) {                                           </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 616                                          proceed = false;                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 617                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618                                      }                                                                             </span>
<span class="-1297206784742569730" onmouseenter="enter('-1297206784742569730');" onmouseout="out('-1297206784742569730');" style=""> 619                                      propertyItem.setValue(null);                                                  </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 620                                      props.add(propertyItem);                                                      </span>
<span class="-7427062456381980222" onmouseenter="enter('-7427062456381980222');" onmouseout="out('-7427062456381980222');" style=""> 621                                      proceed = false;                                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 622                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626                      }                                                                                             </span>
<span class="6772675439678687977" onmouseenter="enter('6772675439678687977');" onmouseout="out('6772675439678687977');" style=""> 627                      if (!proceed) {                                                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 628                          continue;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 629                      }                                                                                             </span>
<span  style=""> 630                                                                                                                    </span>
<span class="-7680907447726339638" onmouseenter="enter('-7680907447726339638');" onmouseout="out('-7680907447726339638');" style=""> 631                      boolean isFieldAccessible = true;                                                             </span>
<span class="1714704837357165345" onmouseenter="enter('1714704837357165345');" onmouseout="out('1714704837357165345');" style=""> 632                      Object value = null;                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 633                      try {                                                                                         </span>
<span class="-802340144122893040" onmouseenter="enter('-802340144122893040');" onmouseout="out('-802340144122893040');" style=""> 634                          value = fieldManager.getFieldValue(entity, property);                                     </span>
<span class="5389158034360572653" onmouseenter="enter('5389158034360572653');" onmouseout="out('5389158034360572653');" style=""> 635                      } catch (FieldNotAvailableException e) {                                                      </span>
<span class="-5134531397184128099" onmouseenter="enter('-5134531397184128099');" onmouseout="out('-5134531397184128099');" style=""> 636                          isFieldAccessible = false;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 637                      }                                                                                             </span>
<span class="-1242713994964830615" onmouseenter="enter('-1242713994964830615');" onmouseout="out('-1242713994964830615');" style=""> 638                      checkField:                                                                                   </span>
<span class="5677081435180812955" onmouseenter="enter('5677081435180812955');" onmouseout="out('5677081435180812955');" style=""> 639                      {                                                                                             </span>
<span class="-358387007955156467" onmouseenter="enter('-358387007955156467');" onmouseout="out('-358387007955156467');" style=""> 640                          if (isFieldAccessible) {                                                                  </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 641                              Property propertyItem = new Property();                                               </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 642                              propertyItem.setName(property);                                                       </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 643                              if (props.contains(propertyItem)) {                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 644                                  continue;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645                              }                                                                                     </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 646                              props.add(propertyItem);                                                              </span>
<span class="4812619489526695632" onmouseenter="enter('4812619489526695632');" onmouseout="out('4812619489526695632');" style=""> 647                              String displayVal = propertyItem.getDisplayValue();                                   </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 648                              boolean handled = false;                                                              </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 649                              for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) { </span>
<span class="-6209348320960420357" onmouseenter="enter('-6209348320960420357');" onmouseout="out('-6209348320960420357');" style=""> 650                                  MetadataProviderResponse response = fieldPersistenceProvider.extractValue(        </span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""> 651                                          new ExtractValueRequest(props, fieldManager, metadata, value, displayVal, </span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""> 652                                                  persistenceManager, this, entity, customCriteria), propertyItem); </span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 653                                  if (MetadataProviderResponse.NOT_HANDLED != response) {                           </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 654                                      handled = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655                                  }                                                                                 </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 656                                  if (MetadataProviderResponse.HANDLED_BREAK == response) {                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 657                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659                              }                                                                                     </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 660                              if (!handled) {                                                                       </span>
<span class="5660532463858602467" onmouseenter="enter('5660532463858602467');" onmouseout="out('5660532463858602467');" style=""> 661                                  defaultFieldPersistenceProvider.extractValue(                                     </span>
<span class="-2851381019961062968" onmouseenter="enter('-2851381019961062968');" onmouseout="out('-2851381019961062968');" style=""> 662                                          new ExtractValueRequest(props, fieldManager, metadata, value, displayVal, </span>
<span class="-7818258133326672525" onmouseenter="enter('-7818258133326672525');" onmouseout="out('-7818258133326672525');" style=""> 663                                                  persistenceManager, this, entity, customCriteria), propertyItem); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664                              }                                                                                     </span>
<span class="-6426908400831293887" onmouseenter="enter('-6426908400831293887');" onmouseout="out('-6426908400831293887');" style=""> 665                              break checkField;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666                          }                                                                                         </span>
<span class="-243574896110033323" onmouseenter="enter('-243574896110033323');" onmouseout="out('-243574896110033323');" style=""> 667                          //try a direct property acquisition via reflection                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 668                          try {                                                                                     </span>
<span class="7672623756603956505" onmouseenter="enter('7672623756603956505');" onmouseout="out('7672623756603956505');" style=""> 669                              String strVal = null;                                                                 </span>
<span class="3529628081213965373" onmouseenter="enter('3529628081213965373');" onmouseout="out('3529628081213965373');" style=""> 670                              Method method;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 671                              try {                                                                                 </span>
<span class="-188265031890242666" onmouseenter="enter('-188265031890242666');" onmouseout="out('-188265031890242666');" style=""> 672                                  //try a &#x27;get&#x27; prefixed mutator first                                              </span>
<span class="2344864789387251771" onmouseenter="enter('2344864789387251771');" onmouseout="out('2344864789387251771');" style=""><abbr title=" 673                                  String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.substring(1, property.length());"> 673                                  String temp = &quot;get&quot; + property.substring(0, 1).toUpperCase() + property.substring(ðŸ”µ</abbr></span>
<span class="6434236432742156955" onmouseenter="enter('6434236432742156955');" onmouseout="out('6434236432742156955');" style=""> 674                                  method = entity.getClass().getMethod(temp, new Class[] {});                       </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 675                              } catch (NoSuchMethodException e) {                                                   </span>
<span class="5628920111567796624" onmouseenter="enter('5628920111567796624');" onmouseout="out('5628920111567796624');" style=""> 676                                  method = entity.getClass().getMethod(property, new Class[] {});                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677                              }                                                                                     </span>
<span class="-1268801467547302511" onmouseenter="enter('-1268801467547302511');" onmouseout="out('-1268801467547302511');" style=""> 678                              value = method.invoke(entity, new String[] {});                                       </span>
<span class="-797277942109019478" onmouseenter="enter('-797277942109019478');" onmouseout="out('-797277942109019478');" style=""> 679                              Property propertyItem = new Property();                                               </span>
<span class="-8335161890074671239" onmouseenter="enter('-8335161890074671239');" onmouseout="out('-8335161890074671239');" style=""> 680                              propertyItem.setName(property);                                                       </span>
<span class="2462476940668631976" onmouseenter="enter('2462476940668631976');" onmouseout="out('2462476940668631976');" style=""> 681                              if (props.contains(propertyItem)) {                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 682                                  continue;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683                              }                                                                                     </span>
<span class="3732784289505791657" onmouseenter="enter('3732784289505791657');" onmouseout="out('3732784289505791657');" style=""> 684                              props.add(propertyItem);                                                              </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 685                              if (value == null) {                                                                  </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 686                                  strVal = null;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 687                              } else {                                                                              </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 688                                  if (Date.class.isAssignableFrom(value.getClass())) {                              </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 689                                      strVal = getSimpleDateFormatter().format((Date) value);                       </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 690                                  } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                  </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""><abbr title=" 691                                      strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));"> 691                                      strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime(ðŸ”µ</abbr></span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 692                                  } else if (Calendar.class.isAssignableFrom(value.getClass())) {                   </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 693                                      strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());       </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 694                                  } else if (Double.class.isAssignableFrom(value.getClass())) {                     </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 695                                      strVal = getDecimalFormatter().format(value);                                 </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 696                                  } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                 </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 697                                      strVal = getDecimalFormatter().format(value);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 698                                  } else {                                                                          </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 699                                      strVal = value.toString();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701                              }                                                                                     </span>
<span class="-430028306468799565" onmouseenter="enter('-430028306468799565');" onmouseout="out('-430028306468799565');" style=""> 702                              propertyItem.setValue(strVal);                                                        </span>
<span class="-4617077893838138158" onmouseenter="enter('-4617077893838138158');" onmouseout="out('-4617077893838138158');" style=""> 703                          } catch (NoSuchMethodException e) {                                                       </span>
<span class="8429567218540762891" onmouseenter="enter('8429567218540762891');" onmouseout="out('8429567218540762891');" style=""><abbr title=" 704                              LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(property));"> 704                              LOG.debug(&quot;Unable to find a specified property in the entity: &quot; + StringUtil.sanitize(ðŸ”µ</abbr></span>
<span class="4115063574789816242" onmouseenter="enter('4115063574789816242');" onmouseout="out('4115063574789816242');" style=""> 705                              //do nothing - this property is simply not in the bean                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 706                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 707                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 708                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 709              }                                                                                                     </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 710          } catch (ClassNotFoundException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 711              throw new PersistenceException(e);                                                                    </span>
<span class="-4283655124212124805" onmouseenter="enter('-4283655124212124805');" onmouseout="out('-4283655124212124805');" style=""> 712          } catch (IllegalAccessException e) {                                                                      </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 713              throw new PersistenceException(e);                                                                    </span>
<span class="-291101072954915259" onmouseenter="enter('-291101072954915259');" onmouseout="out('-291101072954915259');" style=""> 714          } catch (InvocationTargetException e) {                                                                   </span>
<span class="5879531334898432697" onmouseenter="enter('5879531334898432697');" onmouseout="out('5879531334898432697');" style=""> 715              throw new PersistenceException(e);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717      }                                                                                                             </span>
<span  style=""> 718                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 719      @Override                                                                                                     </span>
<span class="-6161842232508714198" onmouseenter="enter('-6161842232508714198');" onmouseout="out('-6161842232508714198');" style=""> 720      public String getStringValueFromGetter(Serializable instance, String propertyName)                            </span>
<span class="1769827535532852924" onmouseenter="enter('1769827535532852924');" onmouseout="out('1769827535532852924');" style=""> 721              throws IllegalAccessException, InvocationTargetException, NoSuchMethodException {                     </span>
<span class="5278483549685517830" onmouseenter="enter('5278483549685517830');" onmouseout="out('5278483549685517830');" style=""> 722          Object value = PropertyUtils.getProperty(instance, propertyName);                                         </span>
<span class="-6587533849078029241" onmouseenter="enter('-6587533849078029241');" onmouseout="out('-6587533849078029241');" style=""> 723          return formatValue(value);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724      }                                                                                                             </span>
<span  style=""> 725                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 726      @Override                                                                                                     </span>
<span class="1304124062790730283" onmouseenter="enter('1304124062790730283');" onmouseout="out('1304124062790730283');" style=""> 727      public String formatValue(Object value) {                                                                     </span>
<span class="5239272094010467374" onmouseenter="enter('5239272094010467374');" onmouseout="out('5239272094010467374');" style=""> 728          String strVal;                                                                                            </span>
<span class="-5708365098537636921" onmouseenter="enter('-5708365098537636921');" onmouseout="out('-5708365098537636921');" style=""> 729          if (value == null) {                                                                                      </span>
<span class="-2810545533219523391" onmouseenter="enter('-2810545533219523391');" onmouseout="out('-2810545533219523391');" style=""> 730              strVal = null;                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 731          } else {                                                                                                  </span>
<span class="-1844051353778354247" onmouseenter="enter('-1844051353778354247');" onmouseout="out('-1844051353778354247');" style=""> 732              if (Date.class.isAssignableFrom(value.getClass())) {                                                  </span>
<span class="-6225044220050260039" onmouseenter="enter('-6225044220050260039');" onmouseout="out('-6225044220050260039');" style=""> 733                  strVal = getSimpleDateFormatter().format((Date) value);                                           </span>
<span class="-4610441406673719402" onmouseenter="enter('-4610441406673719402');" onmouseout="out('-4610441406673719402');" style=""> 734              } else if (Timestamp.class.isAssignableFrom(value.getClass())) {                                      </span>
<span class="796595786562828756" onmouseenter="enter('796595786562828756');" onmouseout="out('796595786562828756');" style=""> 735                  strVal = getSimpleDateFormatter().format(new Date(((Timestamp) value).getTime()));                </span>
<span class="6899034919137819184" onmouseenter="enter('6899034919137819184');" onmouseout="out('6899034919137819184');" style=""> 736              } else if (Calendar.class.isAssignableFrom(value.getClass())) {                                       </span>
<span class="8098362770906465320" onmouseenter="enter('8098362770906465320');" onmouseout="out('8098362770906465320');" style=""> 737                  strVal = getSimpleDateFormatter().format(((Calendar) value).getTime());                           </span>
<span class="5283864258497358806" onmouseenter="enter('5283864258497358806');" onmouseout="out('5283864258497358806');" style=""> 738              } else if (Double.class.isAssignableFrom(value.getClass())) {                                         </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 739                  strVal = getDecimalFormatter().format(value);                                                     </span>
<span class="-1957554009734701184" onmouseenter="enter('-1957554009734701184');" onmouseout="out('-1957554009734701184');" style=""> 740              } else if (BigDecimal.class.isAssignableFrom(value.getClass())) {                                     </span>
<span class="-5148543796286844238" onmouseenter="enter('-5148543796286844238');" onmouseout="out('-5148543796286844238');" style=""> 741                  strVal = getDecimalFormatter().format(value);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 742              } else {                                                                                              </span>
<span class="359031869021087624" onmouseenter="enter('359031869021087624');" onmouseout="out('359031869021087624');" style=""> 743                  strVal = value.toString();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745          }                                                                                                         </span>
<span class="3782478248632503544" onmouseenter="enter('3782478248632503544');" onmouseout="out('3782478248632503544');" style=""> 746          return strVal;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 747      }                                                                                                             </span>
<span  style=""> 748                                                                                                                    </span>
<span class="1185233632623235579" onmouseenter="enter('1185233632623235579');" onmouseout="out('1185233632623235579');" style=""><abbr title=" 749      protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntity) throws ServiceException {"> 749      protected EntityResult update(PersistencePackage persistencePackage, Object primaryKey, boolean includeRealEntðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style=""> 750          EntityResult entityResult = new EntityResult();                                                           </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style=""> 751          Entity entity = persistencePackage.getEntity();                                                           </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 752          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title=" 753          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);"> 753          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style=""> 754          if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                                     </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style=""> 755              throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 756          }                                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 757          try {                                                                                                     </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title=" 758              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());"> 758              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFulðŸ”µ</abbr></span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 759              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 759              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style=""> 760                      persistencePackage.getCeilingEntityFullyQualifiedClassname(),                                 </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 761                      entities,                                                                                     </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style=""> 762                      foreignKey,                                                                                   </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 763                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 764                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 765                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 766                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 767                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 768                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 769                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 770                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 771                      );                                                                                            </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 772              if (primaryKey == null) {                                                                             </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style=""> 773                  primaryKey = getPrimaryKey(entity, mergedProperties);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774              }                                                                                                     </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title=" 775              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);"> 775              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getTypeðŸ”µ</abbr></span>
<span  style=""> 776                                                                                                                    </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style=""> 777              Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                                  </span>
<span  style=""> 778                                                                                                                    </span>
<span class="861834480888806983" onmouseenter="enter('861834480888806983');" onmouseout="out('861834480888806983');" style=""> 779              if (!entity.isValidationFailure()) {                                                                  </span>
<span class="-6661343286258909963" onmouseenter="enter('-6661343286258909963');" onmouseout="out('-6661343286258909963');" style=""> 780                  //Re-Balance the list if it is a Foreign Key toMany collection with a sort field property         </span>
<span class="4247210219521112592" onmouseenter="enter('4247210219521112592');" onmouseout="out('4247210219521112592');" style=""> 781                  if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null &amp;&amp;                                    </span>
<span class="235375556032951584" onmouseenter="enter('235375556032951584');" onmouseout="out('235375556032951584');" style=""> 782                          entity.findProperty(foreignKey.getSortField()) != null &amp;&amp;                                 </span>
<span class="7175038170339042705" onmouseenter="enter('7175038170339042705');" onmouseout="out('7175038170339042705');" style=""> 783                          entity.findProperty(foreignKey.getSortField()).getValue() != null) {                      </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style=""> 784                      ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();       </span>
<span class="5598129937237964517" onmouseenter="enter('5598129937237964517');" onmouseout="out('5598129937237964517');" style=""> 785                      extensionManager.getProxy().rebalanceForUpdate(this, persistencePackage, instance,            </span>
<span class="4380637637969964834" onmouseenter="enter('4380637637969964834');" onmouseout="out('4380637637969964834');" style=""> 786                              mergedProperties, primaryKey, result);                                                </span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style=""> 787                      instance = result.getResult();                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 788                  } else {                                                                                          </span>
<span class="5297856757316311321" onmouseenter="enter('5297856757316311321');" onmouseout="out('5297856757316311321');" style=""><abbr title=" 789                      instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackage.isValidateUnsubmittedProperties());"> 789                      instance = createPopulatedInstance(instance, entity, mergedProperties, false, persistencePackaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790                  }                                                                                                 </span>
<span  style=""> 791                                                                                                                    </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style=""> 792                  instance = persistenceManager.getDynamicEntityDao().merge(instance);                              </span>
<span class="-1264761314664469309" onmouseenter="enter('-1264761314664469309');" onmouseout="out('-1264761314664469309');" style=""> 793                  if (includeRealEntity) {                                                                          </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style=""> 794                      entityResult.setEntityBackingObject(instance);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 795                  }                                                                                                 </span>
<span  style=""> 796                                                                                                                    </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style=""> 797                  List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                                   </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style=""> 798                  entityList.add(instance);                                                                         </span>
<span  style=""> 799                                                                                                                    </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style=""> 800                  entity = getRecords(mergedProperties, entityList, null, null, null)[0];                           </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 801                  entityResult.setEntity(entity);                                                                   </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 802                  return entityResult;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 803              } else {                                                                                              </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style=""> 804                  entityResult.setEntity(entity);                                                                   </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style=""> 805                  return entityResult;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 807          } catch (Exception e) {                                                                                   </span>
<span class="-3425838462618159609" onmouseenter="enter('-3425838462618159609');" onmouseout="out('-3425838462618159609');" style=""> 808              throw new ServiceException(&quot;Problem updating entity : &quot; + e.getMessage(), e);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 809          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 810      }                                                                                                             </span>
<span  style=""> 811                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 812      @Override                                                                                                     </span>
<span class="6684144434931310538" onmouseenter="enter('6684144434931310538');" onmouseout="out('6684144434931310538');" style=""> 813      public String getIdPropertyName(String entityClass) {                                                         </span>
<span class="7569829358594867468" onmouseenter="enter('7569829358594867468');" onmouseout="out('7569829358594867468');" style=""> 814          return persistenceManager.getIdPropertyName(entityClass);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815      }                                                                                                             </span>
<span  style=""> 816                                                                                                                    </span>
<span class="7385985390784408317" onmouseenter="enter('7385985390784408317');" onmouseout="out('7385985390784408317');" style=""> 817      public String getIdPropertyName(Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                      </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""> 818          Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);    </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 819          for (String property : mergedProperties.keySet()) {                                                       </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 820              BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);                        </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 821              if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {                        </span>
<span class="6489038301515904267" onmouseenter="enter('6489038301515904267');" onmouseout="out('6489038301515904267');" style=""> 822                  return property;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 823              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824          }                                                                                                         </span>
<span  style=""> 825                                                                                                                    </span>
<span class="8030319575516697150" onmouseenter="enter('8030319575516697150');" onmouseout="out('8030319575516697150');" style=""> 826          throw new RuntimeException(&quot;Could not find a primary key property in the passed merged properties list&quot;); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 827      }                                                                                                             </span>
<span  style=""> 828                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 829      @Override                                                                                                     </span>
<span class="7601553640468247936" onmouseenter="enter('7601553640468247936');" onmouseout="out('7601553640468247936');" style=""> 830      public Object getPrimaryKey(Entity entity, Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {           </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""> 831          Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);    </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style=""> 832          Object primaryKey = null;                                                                                 </span>
<span class="-4343749490203255033" onmouseenter="enter('-4343749490203255033');" onmouseout="out('-4343749490203255033');" style=""> 833          String idPropertyName = null;                                                                             </span>
<span class="-1032829863063040815" onmouseenter="enter('-1032829863063040815');" onmouseout="out('-1032829863063040815');" style=""> 834          BasicFieldMetadata metaData = null;                                                                       </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style=""> 835          for (String property : mergedProperties.keySet()) {                                                       </span>
<span class="2362080005447498759" onmouseenter="enter('2362080005447498759');" onmouseout="out('2362080005447498759');" style=""> 836              BasicFieldMetadata temp = (BasicFieldMetadata) mergedProperties.get(property);                        </span>
<span class="2227707427687514157" onmouseenter="enter('2227707427687514157');" onmouseout="out('2227707427687514157');" style=""> 837              if (temp.getFieldType() == SupportedFieldType.ID &amp;&amp; !property.contains(&quot;.&quot;)) {                        </span>
<span class="4480138875282582699" onmouseenter="enter('4480138875282582699');" onmouseout="out('4480138875282582699');" style=""> 838                  idPropertyName = property;                                                                        </span>
<span class="-6207089020080563293" onmouseenter="enter('-6207089020080563293');" onmouseout="out('-6207089020080563293');" style=""> 839                  metaData = temp;                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 840                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 841              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 842          }                                                                                                         </span>
<span class="-4447124933950039126" onmouseenter="enter('-4447124933950039126');" onmouseout="out('-4447124933950039126');" style=""> 843          if (idPropertyName == null) {                                                                             </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title=" 844              throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);"> 844              throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 845          }                                                                                                         </span>
<span class="-5346955267205588229" onmouseenter="enter('-5346955267205588229');" onmouseout="out('-5346955267205588229');" style=""> 846          for (Property property : entity.getProperties()) {                                                        </span>
<span class="7886586292686555176" onmouseenter="enter('7886586292686555176');" onmouseout="out('7886586292686555176');" style=""> 847              if (property.getName().equals(idPropertyName)) {                                                      </span>
<span class="2464652692956328654" onmouseenter="enter('2464652692956328654');" onmouseout="out('2464652692956328654');" style=""> 848                  switch (metaData.getSecondaryType()) {                                                            </span>
<span class="9053618002976530550" onmouseenter="enter('9053618002976530550');" onmouseout="out('9053618002976530550');" style=""> 849                      case INTEGER:                                                                                 </span>
<span class="-6121369465424712252" onmouseenter="enter('-6121369465424712252');" onmouseout="out('-6121369465424712252');" style=""> 850                          primaryKey = (property.getValue() == null) ? null : Long.valueOf(property.getValue());    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 851                          break;                                                                                    </span>
<span class="6509618406235281730" onmouseenter="enter('6509618406235281730');" onmouseout="out('6509618406235281730');" style=""> 852                      case STRING:                                                                                  </span>
<span class="1585063350949159261" onmouseenter="enter('1585063350949159261');" onmouseout="out('1585063350949159261');" style=""> 853                          primaryKey = property.getValue();                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 854                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855                  }                                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 856                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 858          }                                                                                                         </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style=""> 859          if (primaryKey == null) {                                                                                 </span>
<span class="586132424145349171" onmouseenter="enter('586132424145349171');" onmouseout="out('586132424145349171');" style=""><abbr title=" 860              throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) in the passed entity with type: &quot; + entity.getType()[0]);"> 860              throw new RuntimeException(&quot;Could not find the primary key property (&quot; + idPropertyName + &quot;) in the paðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 861          }                                                                                                         </span>
<span class="445877428068937777" onmouseenter="enter('445877428068937777');" onmouseout="out('445877428068937777');" style=""> 862          return primaryKey;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 863      }                                                                                                             </span>
<span  style=""> 864                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 865      @Override                                                                                                     </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 866      public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,                   </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 867              CriteriaTransferObject cto,                                                                           </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 868              String ceilingEntityFullyQualifiedClassname,                                                          </span>
<span class="-8254447054846048089" onmouseenter="enter('-8254447054846048089');" onmouseout="out('-8254447054846048089');" style=""> 869              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties,                                                </span>
<span class="3731877525338754789" onmouseenter="enter('3731877525338754789');" onmouseout="out('3731877525338754789');" style=""> 870              RestrictionFactory customRestrictionFactory) {                                                        </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style=""> 871          Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);    </span>
<span class="5454417750033935999" onmouseenter="enter('5454417750033935999');" onmouseout="out('5454417750033935999');" style=""> 872          List&lt;FilterMapping&gt; filterMappings = new ArrayList&lt;FilterMapping&gt;();                                      </span>
<span  style=""> 873                                                                                                                    </span>
<span class="5160955752092959572" onmouseenter="enter('5160955752092959572');" onmouseout="out('5160955752092959572');" style=""> 874          for (String propertyId : cto.getCriteriaMap().keySet()) {                                                 </span>
<span class="4532640545066977906" onmouseenter="enter('4532640545066977906');" onmouseout="out('4532640545066977906');" style=""> 875              if (mergedProperties.containsKey(propertyId)) {                                                       </span>
<span class="-2571070256044572115" onmouseenter="enter('-2571070256044572115');" onmouseout="out('-2571070256044572115');" style=""> 876                  boolean handled = false;                                                                          </span>
<span class="5732938062394351537" onmouseenter="enter('5732938062394351537');" onmouseout="out('5732938062394351537');" style=""> 877                  for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {             </span>
<span class="-6114175924026036851" onmouseenter="enter('-6114175924026036851');" onmouseout="out('-6114175924026036851');" style=""> 878                      MetadataProviderResponse response = fieldPersistenceProvider.addSearchMapping(                </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 879                              new AddSearchMappingRequest(persistencePerspective, cto,                              </span>
<span class="5810135378246725068" onmouseenter="enter('5810135378246725068');" onmouseout="out('5810135378246725068');" style=""> 880                                      ceilingEntityFullyQualifiedClassname, mergedProperties,                       </span>
<span class="5077524350528682045" onmouseenter="enter('5077524350528682045');" onmouseout="out('5077524350528682045');" style=""><abbr title=" 881                                      propertyId, getFieldManager(), this, this, customRestrictionFactory==null?restrictionFactory"> 881                                      propertyId, getFieldManager(), this, this, customRestrictionFactory==null?restðŸ”µ</abbr></span>
<span class="6427059933663878801" onmouseenter="enter('6427059933663878801');" onmouseout="out('6427059933663878801');" style=""> 882                                      :customRestrictionFactory), filterMappings);                                  </span>
<span class="8559454943472111437" onmouseenter="enter('8559454943472111437');" onmouseout="out('8559454943472111437');" style=""> 883                      if (MetadataProviderResponse.NOT_HANDLED != response) {                                       </span>
<span class="1499405865428993019" onmouseenter="enter('1499405865428993019');" onmouseout="out('1499405865428993019');" style=""> 884                          handled = true;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 885                      }                                                                                             </span>
<span class="1946339943699358363" onmouseenter="enter('1946339943699358363');" onmouseout="out('1946339943699358363');" style=""> 886                      if (MetadataProviderResponse.HANDLED_BREAK == response) {                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 887                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 888                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 889                  }                                                                                                 </span>
<span class="6122548445509025326" onmouseenter="enter('6122548445509025326');" onmouseout="out('6122548445509025326');" style=""> 890                  if (!handled) {                                                                                   </span>
<span class="8038403104028382935" onmouseenter="enter('8038403104028382935');" onmouseout="out('8038403104028382935');" style=""> 891                      defaultFieldPersistenceProvider.addSearchMapping(                                             </span>
<span class="-9039194684684412835" onmouseenter="enter('-9039194684684412835');" onmouseout="out('-9039194684684412835');" style=""> 892                              new AddSearchMappingRequest(persistencePerspective, cto,                              </span>
<span class="-1188580278753724323" onmouseenter="enter('-1188580278753724323');" onmouseout="out('-1188580278753724323');" style=""> 893                                      ceilingEntityFullyQualifiedClassname, mergedProperties, propertyId,           </span>
<span class="-6646794478608592484" onmouseenter="enter('-6646794478608592484');" onmouseout="out('-6646794478608592484');" style=""><abbr title=" 894                                      getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFactory"> 894                                      getFieldManager(), this, this, customRestrictionFactory == null ? restrictionFðŸ”µ</abbr></span>
<span class="878086898277429379" onmouseenter="enter('878086898277429379');" onmouseout="out('878086898277429379');" style=""> 895                                              : customRestrictionFactory), filterMappings);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 898          }                                                                                                         </span>
<span class="-1900027260049794739" onmouseenter="enter('-1900027260049794739');" onmouseout="out('-1900027260049794739');" style=""> 899          return filterMappings;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900      }                                                                                                             </span>
<span  style=""> 901                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 902      @Override                                                                                                     </span>
<span class="8980898846191871135" onmouseenter="enter('8980898846191871135');" onmouseout="out('8980898846191871135');" style=""> 903      public List&lt;FilterMapping&gt; getFilterMappings(PersistencePerspective persistencePerspective,                   </span>
<span class="-5315020292123905493" onmouseenter="enter('-5315020292123905493');" onmouseout="out('-5315020292123905493');" style=""> 904              CriteriaTransferObject cto,                                                                           </span>
<span class="1534793341678378199" onmouseenter="enter('1534793341678378199');" onmouseout="out('1534793341678378199');" style=""> 905              String ceilingEntityFullyQualifiedClassname,                                                          </span>
<span class="-8055727947789817499" onmouseenter="enter('-8055727947789817499');" onmouseout="out('-8055727947789817499');" style=""> 906              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties) {                                              </span>
<span class="81017552378868833" onmouseenter="enter('81017552378868833');" onmouseout="out('81017552378868833');" style=""><abbr title=" 907          return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilteredProperties, null);"> 907          return getFilterMappings(persistencePerspective, cto, ceilingEntityFullyQualifiedClassname, mergedUnfilterðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 908      }                                                                                                             </span>
<span  style=""> 909                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 910      @Override                                                                                                     </span>
<span class="897240738537618425" onmouseenter="enter('897240738537618425');" onmouseout="out('897240738537618425');" style=""><abbr title=" 911      public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; mergedProperties, List&lt;Property&gt; properties) {"> 911      public void extractProperties(Class&lt;?&gt;[] inheritanceLine, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; ðŸ”µ</abbr></span>
<span class="-5864020654264554558" onmouseenter="enter('-5864020654264554558');" onmouseout="out('-5864020654264554558');" style=""><abbr title=" 912          extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), properties, false, MergedPropertyType.PRIMARY);"> 912          extractPropertiesFromMetadata(inheritanceLine, mergedProperties.get(MergedPropertyType.PRIMARY), propertieðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 913      }                                                                                                             </span>
<span  style=""> 914                                                                                                                    </span>
<span class="203860492987878792" onmouseenter="enter('203860492987878792');" onmouseout="out('203860492987878792');" style=""><abbr title=" 915      protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedProperties, List&lt;Property&gt; properties, Boolean isHiddenOverride, MergedPropertyType type) {"> 915      protected void extractPropertiesFromMetadata(Class&lt;?&gt;[] inheritanceLine, Map&lt;String, FieldMetadata&gt; mergedPropðŸ”µ</abbr></span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 916 +        Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 917 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 918 +            @Override                                                                                             </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 919 +            public int compare(Property o1, Property o2) {                                                        </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 920 +                return o1.getName().compareTo(o2.getName());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 921 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 922 +        };                                                                                                        </span>
<span class="-7612884103774291324" onmouseenter="enter('-7612884103774291324');" onmouseout="out('-7612884103774291324');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 923 +        Collections.sort(properties, comparator);                                                                 </span>

<span class="-2434831074249628531" onmouseenter="enter('-2434831074249628531');" onmouseout="out('-2434831074249628531');" style=""> 924          for (Map.Entry&lt;String, FieldMetadata&gt; entry : mergedProperties.entrySet()) {                              </span>
<span class="334503235152382836" onmouseenter="enter('334503235152382836');" onmouseout="out('334503235152382836');" style=""> 925              String property = entry.getKey();                                                                     </span>
<span class="-231152183806873874" onmouseenter="enter('-231152183806873874');" onmouseout="out('-231152183806873874');" style=""> 926              Property prop = new Property();                                                                       </span>
<span class="-3770108933014957253" onmouseenter="enter('-3770108933014957253');" onmouseout="out('-3770108933014957253');" style=""> 927              FieldMetadata metadata = mergedProperties.get(property);                                              </span>
<span class="-6395393149471547560" onmouseenter="enter('-6395393149471547560');" onmouseout="out('-6395393149471547560');" style=""> 928              prop.setName(property);                                                                               </span>
<span class="-1336693479246603581" onmouseenter="enter('-1336693479246603581');" onmouseout="out('-1336693479246603581');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 929 -            Comparator&lt;Property&gt; comparator = new Comparator&lt;Property&gt;() {                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 930 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 931 -                @Override                                                                                         </span>
<span class="1424778009740239449" onmouseenter="enter('1424778009740239449');" onmouseout="out('1424778009740239449');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 932 -                public int compare(Property o1, Property o2) {                                                    </span>
<span class="-2944010027249876527" onmouseenter="enter('-2944010027249876527');" onmouseout="out('-2944010027249876527');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 933 -                    return o1.getName().compareTo(o2.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 934 -                }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 935 -            };                                                                                                    </span>
<span class="-7612884103774291324" onmouseenter="enter('-7612884103774291324');" onmouseout="out('-7612884103774291324');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 936 -            Collections.sort(properties, comparator);                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 937 +                                                                                                                  </span>
<span class="-2139676366648139964" onmouseenter="enter('-2139676366648139964');" onmouseout="out('-2139676366648139964');" style=""> 938              int pos = Collections.binarySearch(properties, prop, comparator);                                     </span>
<span class="-2417851046359094762" onmouseenter="enter('-2417851046359094762');" onmouseout="out('-2417851046359094762');" style=""><abbr title=" 939              if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREVALUE != type) {"> 939              if (pos &gt;= 0 &amp;&amp; MergedPropertyType.MAPSTRUCTUREKEY != type &amp;&amp; MergedPropertyType.MAPSTRUCTUREVALUE != ðŸ”µ</abbr></span>
<span class="-1490193869050628697" onmouseenter="enter('-1490193869050628697');" onmouseout="out('-1490193869050628697');" style=""> 940                  logWarn: {                                                                                        </span>
<span class="5327179807238785116" onmouseenter="enter('5327179807238785116');" onmouseout="out('5327179807238785116');" style=""><abbr title=" 941                      if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadata) metadata).getFieldType())) {"> 941                      if ((metadata instanceof BasicFieldMetadata) &amp;&amp; SupportedFieldType.ID.equals(((BasicFieldMetadðŸ”µ</abbr></span>
<span class="6221076133691521085" onmouseenter="enter('6221076133691521085');" onmouseout="out('6221076133691521085');" style=""> 942                          //don&#x27;t warn for id field collisions, but still ignore the colliding fields               </span>
<span class="1303890499227207840" onmouseenter="enter('1303890499227207840');" onmouseout="out('1303890499227207840');" style=""> 943                          break logWarn;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 944                      }                                                                                             </span>
<span class="-3406896845088854457" onmouseenter="enter('-3406896845088854457');" onmouseout="out('-3406896845088854457');" style=""><abbr title=" 945                      //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + &quot;) during inspection for the inheritance line starting with (&quot; + inheritanceLine[0].getName() + &quot;). Ignoring the additional field. This can occur most commonly when using the @AdminPresentationAdornedTargetCollection and the collection type and target class have field names in common. This situation should be avoided, as the system will strip the repeated fields, which can cause unpredictable behavior.&quot;);"> 945                      //LOG.warn(&quot;Detected a field name collision (&quot; + metadata.getTargetClass() + &quot;.&quot; + property + ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 946                  }                                                                                                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 947                  continue;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 948 -            }                                                                                                     </span>
<span class="1144051059552551899" onmouseenter="enter('1144051059552551899');" onmouseout="out('1144051059552551899');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 949 -            properties.add(prop);                                                                                 </span>
<span class="5067330164177088761" onmouseenter="enter('5067330164177088761');" onmouseout="out('5067330164177088761');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 950 +            } else if (pos &lt; 0) {                                                                                 </span>
<span class="-8221812243074404132" onmouseenter="enter('-8221812243074404132');" onmouseout="out('-8221812243074404132');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 951 +                pos = -pos - 1; // calculate position to insert                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 952 +            }                                                                                                     </span>
<span class="2534204392443089313" onmouseenter="enter('2534204392443089313');" onmouseout="out('2534204392443089313');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 953 +            properties.add(pos, prop);                                                                            </span>
<span class="-4762622463962141865" onmouseenter="enter('-4762622463962141865');" onmouseout="out('-4762622463962141865');" style=""> 954              prop.setMetadata(metadata);                                                                           </span>
<span class="-6199017505159175940" onmouseenter="enter('-6199017505159175940');" onmouseout="out('-6199017505159175940');" style=""> 955              if (isHiddenOverride &amp;&amp; prop.getMetadata() instanceof BasicFieldMetadata) {                           </span>
<span class="-7685654662722475773" onmouseenter="enter('-7685654662722475773');" onmouseout="out('-7685654662722475773');" style=""> 956                  //this only makes sense for non collection types                                                  </span>
<span class="-763482179748503913" onmouseenter="enter('-763482179748503913');" onmouseout="out('-763482179748503913');" style=""> 957                  ((BasicFieldMetadata) prop.getMetadata()).setVisibility(VisibilityEnum.HIDDEN_ALL);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 958              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 959          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 960      }                                                                                                             </span>
<span  style=""> 961                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 962      @Override                                                                                                     </span>
<span class="-1145456305415279084" onmouseenter="enter('-1145456305415279084');" onmouseout="out('-1145456305415279084');" style=""><abbr title=" 963      public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, FieldMetadata&gt;&gt; allMergedProperties) throws ServiceException {"> 963      public void updateMergedProperties(PersistencePackage persistencePackage, Map&lt;MergedPropertyType, Map&lt;String, ðŸ”µ</abbr></span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title=" 964          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();"> 964          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname()ðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 965          try {                                                                                                     </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style=""> 966              PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();       </span>
<span class="3509784211613018298" onmouseenter="enter('3509784211613018298');" onmouseout="out('3509784211613018298');" style=""> 967              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(ceilingEntityFullyQualifiedClassname);</span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title=" 968              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties("> 968              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style=""> 969                      ceilingEntityFullyQualifiedClassname,                                                         </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style=""> 970                      entities,                                                                                     </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title=" 971                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),"> 971                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectivðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style=""> 972                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style=""> 973                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style=""> 974                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style=""> 975                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style=""> 976                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style=""> 977                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style=""> 978                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 979                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 980                      );                                                                                            </span>
<span class="3843057087083113739" onmouseenter="enter('3843057087083113739');" onmouseout="out('3843057087083113739');" style=""> 981              allMergedProperties.put(MergedPropertyType.PRIMARY, mergedProperties);                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 982          } catch (Exception e) {                                                                                   </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style=""> 983              throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 984          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985      }                                                                                                             </span>
<span  style=""> 986                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 987      @Override                                                                                                     </span>
<span class="-4783803183233062984" onmouseenter="enter('-4783803183233062984');" onmouseout="out('-4783803183233062984');" style=""><abbr title=" 988      public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {"> 988      public EntityResult update(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServðŸ”µ</abbr></span>
<span class="-5998034243161331810" onmouseenter="enter('-5998034243161331810');" onmouseout="out('-5998034243161331810');" style=""> 989          return update(persistencePackage, null, true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 990      }                                                                                                             </span>
<span  style=""> 991                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 992      @Override                                                                                                     </span>
<span class="-2807508720531838872" onmouseenter="enter('-2807508720531838872');" onmouseout="out('-2807508720531838872');" style=""> 993      public Entity update(PersistencePackage persistencePackage) throws ServiceException {                         </span>
<span class="-5671722244832067224" onmouseenter="enter('-5671722244832067224');" onmouseout="out('-5671722244832067224');" style=""> 994          EntityResult er = update(persistencePackage, null, false);                                                </span>
<span class="-4364232546893819072" onmouseenter="enter('-4364232546893819072');" onmouseout="out('-4364232546893819072');" style=""> 995          return er.getEntity();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 996      }                                                                                                             </span>
<span  style=""> 997                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 998      @Override                                                                                                     </span>
<span class="6001696775937434965" onmouseenter="enter('6001696775937434965');" onmouseout="out('6001696775937434965');" style=""> 999      public Entity add(PersistencePackage persistencePackage) throws ServiceException {                            </span>
<span class="-7059200088088645842" onmouseenter="enter('-7059200088088645842');" onmouseout="out('-7059200088088645842');" style="">1000          EntityResult entityResult = add(persistencePackage, false);                                               </span>
<span class="2936146364192771277" onmouseenter="enter('2936146364192771277');" onmouseout="out('2936146364192771277');" style="">1001          return entityResult.getEntity();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1002      }                                                                                                             </span>
<span  style="">1003                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1004      @Override                                                                                                     </span>
<span class="7079650910076086428" onmouseenter="enter('7079650910076086428');" onmouseout="out('7079650910076086428');" style=""><abbr title="1005      public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceException {">1005      public EntityResult add(PersistencePackage persistencePackage, boolean includeRealEntityObject) throws ServiceðŸ”µ</abbr></span>
<span class="9099399000468117532" onmouseenter="enter('9099399000468117532');" onmouseout="out('9099399000468117532');" style="">1006          EntityResult entityResult = new EntityResult();                                                           </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1007          Entity entity = persistencePackage.getEntity();                                                           </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1008          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1009          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1009          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1010          if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                                     </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1011              throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1012          }                                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1013          try {                                                                                                     </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1014              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1014              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFulðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1015              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1015              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMeðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1016                      persistencePackage.getCeilingEntityFullyQualifiedClassname(),                                 </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1017                      entities,                                                                                     </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1018                      foreignKey,                                                                                   </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1019                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1020                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1021                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1022                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1023                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1024                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1025                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1026                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1027                      );                                                                                            </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style="">1028              Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);</span>
<span  style="">1029                                                                                                                    </span>
<span class="-4432713425684374872" onmouseenter="enter('-4432713425684374872');" onmouseout="out('-4432713425684374872');" style="">1030              String idProperty = null;                                                                             </span>
<span class="-7847461871452779452" onmouseenter="enter('-7847461871452779452');" onmouseout="out('-7847461871452779452');" style="">1031              for (String property : mergedProperties.keySet()) {                                                   </span>
<span class="-2221369290108753372" onmouseenter="enter('-2221369290108753372');" onmouseout="out('-2221369290108753372');" style=""><abbr title="1032                  if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFieldType.ID) {">1032                  if (((BasicFieldMetadata) mergedProperties.get(property)).getFieldType() == SupportedFieldType.ID)ðŸ”µ</abbr></span>
<span class="-5524453042327008702" onmouseenter="enter('-5524453042327008702');" onmouseout="out('-5524453042327008702');" style="">1033                      idProperty = property;                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1034                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1035                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1036              }                                                                                                     </span>
<span class="1924041731168261447" onmouseenter="enter('1924041731168261447');" onmouseout="out('1924041731168261447');" style="">1037              if (idProperty == null) {                                                                             </span>
<span class="8575457199392875963" onmouseenter="enter('8575457199392875963');" onmouseout="out('8575457199392875963');" style=""><abbr title="1038                  throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: &quot; + entity.getType()[0]);">1038                  throw new RuntimeException(&quot;Could not find a primary key property in the passed entity with type: ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039              }                                                                                                     </span>
<span class="-2695656832111219868" onmouseenter="enter('-2695656832111219868');" onmouseout="out('-2695656832111219868');" style="">1040              Object primaryKey = null;                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1041              try {                                                                                                 </span>
<span class="5189906759073631622" onmouseenter="enter('5189906759073631622');" onmouseout="out('5189906759073631622');" style="">1042                  primaryKey = getPrimaryKey(entity, mergedProperties);                                             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1043              } catch (Exception e) {                                                                               </span>
<span class="-2276199612445624795" onmouseenter="enter('-2276199612445624795');" onmouseout="out('-2276199612445624795');" style="">1044                  //don&#x27;t do anything - this is a valid case                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1045              }                                                                                                     </span>
<span class="3737687275742524827" onmouseenter="enter('3737687275742524827');" onmouseout="out('3737687275742524827');" style="">1046              if (primaryKey == null) {                                                                             </span>
<span  style="">1047                                                                                                                    </span>
<span class="-425360514461332458" onmouseenter="enter('-425360514461332458');" onmouseout="out('-425360514461332458');" style="">1048                  Serializable instance = (Serializable) Class.forName(entity.getType()[0]).newInstance();          </span>
<span  style="">1049                                                                                                                    </span>
<span class="-2986273728837208353" onmouseenter="enter('-2986273728837208353');" onmouseout="out('-2986273728837208353');" style="">1050                  instance = createPopulatedInstance(instance, entity, mergedProperties, false);                    </span>
<span  style="">1051                                                                                                                    </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1052                  if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                                    </span>
<span class="-4493395642857636083" onmouseenter="enter('-4493395642857636083');" onmouseout="out('-4493395642857636083');" style="">1053                      ExtensionResultHolder&lt;Serializable&gt; result = new ExtensionResultHolder&lt;Serializable&gt;();       </span>
<span class="1481560234407270538" onmouseenter="enter('1481560234407270538');" onmouseout="out('1481560234407270538');" style=""><abbr title="1054                      extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedProperties, result);">1054                      extensionManager.getProxy().rebalanceForAdd(this, persistencePackage, instance, mergedPropertiðŸ”µ</abbr></span>
<span class="-7891998919165944851" onmouseenter="enter('-7891998919165944851');" onmouseout="out('-7891998919165944851');" style="">1055                      instance = result.getResult();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1056                  }                                                                                                 </span>
<span  style="">1057                                                                                                                    </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1058                  instance = persistenceManager.getDynamicEntityDao().merge(instance);                              </span>
<span class="7937797480137547171" onmouseenter="enter('7937797480137547171');" onmouseout="out('7937797480137547171');" style="">1059                  if (includeRealEntityObject) {                                                                    </span>
<span class="8893824581926121943" onmouseenter="enter('8893824581926121943');" onmouseout="out('8893824581926121943');" style="">1060                      entityResult.setEntityBackingObject(instance);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061                  }                                                                                                 </span>
<span class="6014095005111992785" onmouseenter="enter('6014095005111992785');" onmouseout="out('6014095005111992785');" style="">1062                  List&lt;Serializable&gt; entityList = new ArrayList&lt;Serializable&gt;(1);                                   </span>
<span class="-3591397090455486710" onmouseenter="enter('-3591397090455486710');" onmouseout="out('-3591397090455486710');" style="">1063                  entityList.add(instance);                                                                         </span>
<span  style="">1064                                                                                                                    </span>
<span class="1708653531237771072" onmouseenter="enter('1708653531237771072');" onmouseout="out('1708653531237771072');" style="">1065                  entity = getRecords(mergedProperties, entityList, null, null, null)[0];                           </span>
<span class="-6704825771367960285" onmouseenter="enter('-6704825771367960285');" onmouseout="out('-6704825771367960285');" style="">1066                  entityResult.setEntity(entity);                                                                   </span>
<span class="1882223645075142334" onmouseenter="enter('1882223645075142334');" onmouseout="out('1882223645075142334');" style="">1067                  return entityResult;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1068              } else {                                                                                              </span>
<span class="-5905945487992976049" onmouseenter="enter('-5905945487992976049');" onmouseout="out('-5905945487992976049');" style="">1069                  return update(persistencePackage, primaryKey, includeRealEntityObject);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1070              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1071          } catch (Exception e) {                                                                                   </span>
<span class="-3635977582445593738" onmouseenter="enter('-3635977582445593738');" onmouseout="out('-3635977582445593738');" style="">1072              throw new ServiceException(&quot;Problem adding new entity : &quot; + e.getMessage(), e);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1073          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1074      }                                                                                                             </span>
<span  style="">1075                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1076      @Override                                                                                                     </span>
<span class="-8285012329134109181" onmouseenter="enter('-8285012329134109181');" onmouseout="out('-8285012329134109181');" style="">1077      public void remove(PersistencePackage persistencePackage) throws ServiceException {                           </span>
<span class="-5517088049392213417" onmouseenter="enter('-5517088049392213417');" onmouseout="out('-5517088049392213417');" style="">1078          Entity entity = persistencePackage.getEntity();                                                           </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1079          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1080          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1080          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span class="-6771725697703958451" onmouseenter="enter('-6771725697703958451');" onmouseout="out('-6771725697703958451');" style="">1081          if (foreignKey != null &amp;&amp; !foreignKey.getMutable()) {                                                     </span>
<span class="9168716188774732541" onmouseenter="enter('9168716188774732541');" onmouseout="out('9168716188774732541');" style="">1082              throw new SecurityServiceException(&quot;Entity not mutable&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1083          }                                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1084          try {                                                                                                     </span>
<span class="-1690225534641832669" onmouseenter="enter('-1690225534641832669');" onmouseout="out('-1690225534641832669');" style=""><abbr title="1085              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFullyQualifiedClassname());">1085              Class&lt;?&gt;[] entities = persistenceManager.getPolymorphicEntities(persistencePackage.getCeilingEntityFulðŸ”µ</abbr></span>
<span class="4211379902970225843" onmouseenter="enter('4211379902970225843');" onmouseout="out('4211379902970225843');" style=""><abbr title="1086              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1086              Map&lt;String, FieldMetadata&gt; mergedUnfilteredProperties = persistenceManager.getDynamicEntityDao().getMeðŸ”µ</abbr></span>
<span class="-8133116513743756905" onmouseenter="enter('-8133116513743756905');" onmouseout="out('-8133116513743756905');" style="">1087                      persistencePackage.getCeilingEntityFullyQualifiedClassname(),                                 </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1088                      entities,                                                                                     </span>
<span class="-2459049258713903861" onmouseenter="enter('-2459049258713903861');" onmouseout="out('-2459049258713903861');" style="">1089                      foreignKey,                                                                                   </span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1090                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1091                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1092                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1093                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1094                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1095                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1096                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1097                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1098                      );                                                                                            </span>
<span class="-3565650389379182252" onmouseenter="enter('-3565650389379182252');" onmouseout="out('-3565650389379182252');" style="">1099              Map&lt;String, FieldMetadata&gt; mergedProperties = filterOutCollectionMetadata(mergedUnfilteredProperties);</span>
<span class="-1223682136408553234" onmouseenter="enter('-1223682136408553234');" onmouseout="out('-1223682136408553234');" style="">1100              Object primaryKey = getPrimaryKey(entity, mergedProperties);                                          </span>
<span class="-1082578318289496849" onmouseenter="enter('-1082578318289496849');" onmouseout="out('-1082578318289496849');" style=""><abbr title="1101              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getType()[0]), primaryKey);">1101              Serializable instance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(entity.getTypeðŸ”µ</abbr></span>
<span  style="">1102                                                                                                                    </span>
<span class="5080654263660671169" onmouseenter="enter('5080654263660671169');" onmouseout="out('5080654263660671169');" style="">1103              Assert.isTrue(instance != null, &quot;Entity not found&quot;);                                                  </span>
<span  style="">1104                                                                                                                    </span>
<span class="6713488701284006207" onmouseenter="enter('6713488701284006207');" onmouseout="out('6713488701284006207');" style="">1105              switch (persistencePerspective.getOperationTypes().getRemoveType()) {                                 </span>
<span class="5189123261615208670" onmouseenter="enter('5189123261615208670');" onmouseout="out('5189123261615208670');" style="">1106                  case NONDESTRUCTIVEREMOVE:                                                                        </span>
<span class="-7506477621396500397" onmouseenter="enter('-7506477621396500397');" onmouseout="out('-7506477621396500397');" style="">1107                      FieldManager fieldManager = getFieldManager();                                                </span>
<span class="3973215198680528904" onmouseenter="enter('3973215198680528904');" onmouseout="out('3973215198680528904');" style=""><abbr title="1108                      FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField());">1108                      FieldMetadata manyToFieldMetadata = mergedUnfilteredProperties.get(foreignKey.getManyToField()ðŸ”µ</abbr></span>
<span class="1169143210599293613" onmouseenter="enter('1169143210599293613');" onmouseout="out('1169143210599293613');" style="">1109                      Object foreignKeyValue = entity.getPMap().get(foreignKey.getManyToField()).getValue();        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1110                      try {                                                                                         </span>
<span class="-7359786243551687396" onmouseenter="enter('-7359786243551687396');" onmouseout="out('-7359786243551687396');" style="">1111                          foreignKeyValue = Long.valueOf((String) foreignKeyValue);                                 </span>
<span class="7366941412324817508" onmouseenter="enter('7366941412324817508');" onmouseout="out('7366941412324817508');" style="">1112                      } catch (NumberFormatException e) {                                                           </span>
<span class="7012272079852218418" onmouseenter="enter('7012272079852218418');" onmouseout="out('7012272079852218418');" style="">1113                          LOG.warn(&quot;Foreign primary key is not of type Long, assuming String for remove lookup&quot;);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114                      }                                                                                             </span>
<span class="7279695966184570355" onmouseenter="enter('7279695966184570355');" onmouseout="out('7279695966184570355');" style=""><abbr title="1115                      Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forName(foreignKey.getForeignKeyClass()), foreignKeyValue);">1115                      Serializable foreignInstance = persistenceManager.getDynamicEntityDao().retrieve(Class.forNameðŸ”µ</abbr></span>
<span class="-6891408169238328357" onmouseenter="enter('-6891408169238328357');" onmouseout="out('-6891408169238328357');" style=""><abbr title="1116                      Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreignKey.getOriginatingField());">1116                      Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreignKey.geðŸ”µ</abbr></span>
<span class="8045950107739873006" onmouseenter="enter('8045950107739873006');" onmouseout="out('8045950107739873006');" style="">1117                      collection.remove(instance);                                                                  </span>
<span class="7309400259168651936" onmouseenter="enter('7309400259168651936');" onmouseout="out('7309400259168651936');" style=""><abbr title="1118                      // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreign key on">1118                      // if this is a bi-directional @OneToMany/@ManyToOne and there is no @JoinTable (just a foreigðŸ”µ</abbr></span>
<span class="7114131295623762638" onmouseenter="enter('7114131295623762638');" onmouseout="out('7114131295623762638');" style="">1119                      // the @ManyToOne side) then it will not be updated. In that instance, we have to explicitly  </span>
<span class="3943491933719923666" onmouseenter="enter('3943491933719923666');" onmouseout="out('3943491933719923666');" style="">1120                      // set the manyTo field to null so that subsequent lookups will not find it                   </span>
<span class="2820622934029903464" onmouseenter="enter('2820622934029903464');" onmouseout="out('2820622934029903464');" style="">1121                      if (manyToFieldMetadata instanceof BasicFieldMetadata) {                                      </span>
<span class="3041576912599376884" onmouseenter="enter('3041576912599376884');" onmouseout="out('3041576912599376884');" style="">1122                          if (BooleanUtils.isTrue(((BasicFieldMetadata) manyToFieldMetadata).getRequired())) {      </span>
<span class="-3179114257339016284" onmouseenter="enter('-3179114257339016284');" onmouseout="out('-3179114257339016284');" style=""><abbr title="1123                              throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne side is a&quot;">1123                              throw new ServiceException(&quot;Could not remove from the collection as the ManyToOne sideðŸ”µ</abbr></span>
<span class="-7704143059315768665" onmouseenter="enter('-7704143059315768665');" onmouseout="out('-7704143059315768665');" style=""><abbr title="1124                                      + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyToOne annotation&quot;">1124                                      + &quot; non-optional relationship. Consider changing &#x27;optional=true&#x27; in the @ManyTðŸ”µ</abbr></span>
<span class="-8899164530562544377" onmouseenter="enter('-8899164530562544377');" onmouseout="out('-8899164530562544377');" style="">1125                                      + &quot; or nullable=true within the @JoinColumn annotation&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1126                          }                                                                                         </span>
<span class="1164649929234803369" onmouseenter="enter('1164649929234803369');" onmouseout="out('1164649929234803369');" style=""><abbr title="1127                          //Since this is occuring on a remove persistence package, merge up-front (before making a change) for proper operation in the presence of the enterprise module">1127                          //Since this is occuring on a remove persistence package, merge up-front (before making a ðŸ”µ</abbr></span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1128                          instance = persistenceManager.getDynamicEntityDao().merge(instance);                      </span>
<span class="-3549582829608652451" onmouseenter="enter('-3549582829608652451');" onmouseout="out('-3549582829608652451');" style=""><abbr title="1129                          Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField());">1129                          Field manyToField = fieldManager.getField(instance.getClass(), foreignKey.getManyToField()ðŸ”µ</abbr></span>
<span class="-2737504991189218406" onmouseenter="enter('-2737504991189218406');" onmouseout="out('-2737504991189218406');" style="">1130                          Object manyToObject = manyToField.get(instance);                                          </span>
<span class="-7515244788292498989" onmouseenter="enter('-7515244788292498989');" onmouseout="out('-7515244788292498989');" style=""><abbr title="1131                          if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObject instanceof Map)) {">1131                          if (manyToObject != null &amp;&amp; !(manyToObject instanceof Collection) &amp;&amp; !(manyToObject instanðŸ”µ</abbr></span>
<span class="-3600933715630852255" onmouseenter="enter('-3600933715630852255');" onmouseout="out('-3600933715630852255');" style="">1132                              manyToField.set(instance, null);                                                      </span>
<span class="-8357702035340588039" onmouseenter="enter('-8357702035340588039');" onmouseout="out('-8357702035340588039');" style="">1133                              instance = persistenceManager.getDynamicEntityDao().merge(instance);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1134                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1135                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1136                      break;                                                                                        </span>
<span class="-5424424301156351095" onmouseenter="enter('-5424424301156351095');" onmouseout="out('-5424424301156351095');" style="">1137                  case BASIC:                                                                                       </span>
<span class="-3622621852197441069" onmouseenter="enter('-3622621852197441069');" onmouseout="out('-3622621852197441069');" style="">1138                      persistenceManager.getDynamicEntityDao().remove(instance);                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1139                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1141          } catch (Exception e) {                                                                                   </span>
<span class="-1927777960097045518" onmouseenter="enter('-1927777960097045518');" onmouseout="out('-1927777960097045518');" style="">1142              throw new ServiceException(&quot;Problem removing entity : &quot; + e.getMessage(), e);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1143          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1144      }                                                                                                             </span>
<span  style="">1145                                                                                                                    </span>
<span class="-5101078461080852406" onmouseenter="enter('-5101078461080852406');" onmouseout="out('-5101078461080852406');" style="">1146      public Map&lt;String, FieldMetadata&gt; getMergedProperties(PersistencePackage persistencePackage,                  </span>
<span class="-1790491118666975112" onmouseenter="enter('-1790491118666975112');" onmouseout="out('-1790491118666975112');" style="">1147              CriteriaTransferObject cto) throws ServiceException {                                                 </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1148          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1149          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1149          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname()ðŸ”µ</abbr></span>
<span  style="">1150                                                                                                                    </span>
<span class="-5573073822220246070" onmouseenter="enter('-5573073822220246070');" onmouseout="out('-5573073822220246070');" style="">1151          if (StringUtils.isEmpty(persistencePackage.getFetchTypeFullyQualifiedClassname())) {                      </span>
<span class="8779313298045253029" onmouseenter="enter('8779313298045253029');" onmouseout="out('8779313298045253029');" style="">1152              persistencePackage.setFetchTypeFullyQualifiedClassname(ceilingEntityFullyQualifiedClassname);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1153          }                                                                                                         </span>
<span  style="">1154                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1155          try {                                                                                                     </span>
<span class="-5197892520502431560" onmouseenter="enter('-5197892520502431560');" onmouseout="out('-5197892520502431560');" style=""><abbr title="1156              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(Class.forName(ceilingEntityFullyQualifiedClassname));">1156              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(ClðŸ”µ</abbr></span>
<span  style="">1157                                                                                                                    </span>
<span class="-4251074184121745335" onmouseenter="enter('-4251074184121745335');" onmouseout="out('-4251074184121745335');" style=""><abbr title="1158              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperties(">1158              Map&lt;String, FieldMetadata&gt; mergedProperties = persistenceManager.getDynamicEntityDao().getMergedProperðŸ”µ</abbr></span>
<span class="1538663517770224953" onmouseenter="enter('1538663517770224953');" onmouseout="out('1538663517770224953');" style="">1159                      ceilingEntityFullyQualifiedClassname,                                                         </span>
<span class="-583385414269598767" onmouseenter="enter('-583385414269598767');" onmouseout="out('-583385414269598767');" style="">1160                      entities,                                                                                     </span>
<span class="2672253840392185137" onmouseenter="enter('2672253840392185137');" onmouseout="out('2672253840392185137');" style=""><abbr title="1161                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY),">1161                      (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectivðŸ”µ</abbr></span>
<span class="-511081153909681017" onmouseenter="enter('-511081153909681017');" onmouseout="out('-511081153909681017');" style="">1162                      persistencePerspective.getAdditionalNonPersistentProperties(),                                </span>
<span class="-8097424273297448867" onmouseenter="enter('-8097424273297448867');" onmouseout="out('-8097424273297448867');" style="">1163                      persistencePerspective.getAdditionalForeignKeys(),                                            </span>
<span class="-4873414737121807493" onmouseenter="enter('-4873414737121807493');" onmouseout="out('-4873414737121807493');" style="">1164                      MergedPropertyType.PRIMARY,                                                                   </span>
<span class="4909382021697039943" onmouseenter="enter('4909382021697039943');" onmouseout="out('4909382021697039943');" style="">1165                      persistencePerspective.getPopulateToOneFields(),                                              </span>
<span class="-3161949951730306138" onmouseenter="enter('-3161949951730306138');" onmouseout="out('-3161949951730306138');" style="">1166                      persistencePerspective.getIncludeFields(),                                                    </span>
<span class="-5136584035020426097" onmouseenter="enter('-5136584035020426097');" onmouseout="out('-5136584035020426097');" style="">1167                      persistencePerspective.getExcludeFields(),                                                    </span>
<span class="-8790411051451712235" onmouseenter="enter('-8790411051451712235');" onmouseout="out('-8790411051451712235');" style="">1168                      persistencePerspective.getConfigurationKey(),                                                 </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style="">1169                      &quot;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1170                      );                                                                                            </span>
<span  style="">1171                                                                                                                    </span>
<span class="513114689449481379" onmouseenter="enter('513114689449481379');" onmouseout="out('513114689449481379');" style="">1172              return mergedProperties;                                                                              </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1173          } catch (Exception e) {                                                                                   </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style="">1174              throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1175          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1176      }                                                                                                             </span>
<span  style="">1177                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1178      @Override                                                                                                     </span>
<span class="8546305990485145221" onmouseenter="enter('8546305990485145221');" onmouseout="out('8546305990485145221');" style=""><abbr title="1179      public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {">1179      public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServicðŸ”µ</abbr></span>
<span class="-772649916350085514" onmouseenter="enter('-772649916350085514');" onmouseout="out('-772649916350085514');" style="">1180          Entity[] payload;                                                                                         </span>
<span class="3229522520950860553" onmouseenter="enter('3229522520950860553');" onmouseout="out('3229522520950860553');" style="">1181          int totalRecords;                                                                                         </span>
<span class="818057629322979073" onmouseenter="enter('818057629322979073');" onmouseout="out('818057629322979073');" style="">1182          PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();           </span>
<span class="2519389108374285224" onmouseenter="enter('2519389108374285224');" onmouseout="out('2519389108374285224');" style=""><abbr title="1183          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();">1183          String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname()ðŸ”µ</abbr></span>
<span class="-1142901053640862845" onmouseenter="enter('-1142901053640862845');" onmouseout="out('-1142901053640862845');" style=""><abbr title="1184          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);">1184          ForeignKey foreignKey = (ForeignKey) persistencePerspective.getPersistencePerspectiveItems().get(PersistenðŸ”µ</abbr></span>
<span  style="">1185                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1186          try {                                                                                                     </span>
<span class="-8009858600593299361" onmouseenter="enter('-8009858600593299361');" onmouseout="out('-8009858600593299361');" style="">1187              if (foreignKey != null &amp;&amp; foreignKey.getSortField() != null) {                                        </span>
<span class="2404625472493330195" onmouseenter="enter('2404625472493330195');" onmouseout="out('2404625472493330195');" style="">1188                  FilterAndSortCriteria sortCriteria = cto.get(foreignKey.getSortField());                          </span>
<span class="-7029642347361419040" onmouseenter="enter('-7029642347361419040');" onmouseout="out('-7029642347361419040');" style="">1189                  sortCriteria.setSortAscending(foreignKey.getSortAscending());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190              }                                                                                                     </span>
<span  style="">1191                                                                                                                    </span>
<span class="-3998990817835064526" onmouseenter="enter('-3998990817835064526');" onmouseout="out('-3998990817835064526');" style="">1192              Map&lt;String, FieldMetadata&gt; mergedProperties = getMergedProperties(persistencePackage, cto);           </span>
<span  style="">1193                                                                                                                    </span>
<span class="-6342955113620354561" onmouseenter="enter('-6342955113620354561');" onmouseout="out('-6342955113620354561');" style="">1194              List&lt;FilterMapping&gt; filterMappings = getFilterMappings(persistencePerspective, cto, persistencePackage</span>
<span class="-8965082019915054990" onmouseenter="enter('-8965082019915054990');" onmouseout="out('-8965082019915054990');" style="">1195                      .getFetchTypeFullyQualifiedClassname(), mergedProperties);                                    </span>
<span class="3150984124528274911" onmouseenter="enter('3150984124528274911');" onmouseout="out('3150984124528274911');" style="">1196              List&lt;FilterMapping&gt; standardFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);            </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1197              if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                                  </span>
<span class="8416184071019923073" onmouseenter="enter('8416184071019923073');" onmouseout="out('8416184071019923073');" style="">1198                  standardFilterMappings.addAll(cto.getAdditionalFilterMappings());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1199              }                                                                                                     </span>
<span class="371531837080654072" onmouseenter="enter('371531837080654072');" onmouseout="out('371531837080654072');" style="">1200              if (CollectionUtils.isNotEmpty(cto.getNonCountAdditionalFilterMappings())) {                          </span>
<span class="1437073849667335666" onmouseenter="enter('1437073849667335666');" onmouseout="out('1437073849667335666');" style="">1201                  standardFilterMappings.addAll(cto.getNonCountAdditionalFilterMappings());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202              }                                                                                                     </span>
<span  style="">1203                                                                                                                    </span>
<span class="-1243671803049331237" onmouseenter="enter('-1243671803049331237');" onmouseout="out('-1243671803049331237');" style="">1204              FetchRequest fetchRequest = new FetchRequest(persistencePackage, cto,                                 </span>
<span class="4292734980783020060" onmouseenter="enter('4292734980783020060');" onmouseout="out('4292734980783020060');" style="">1205                      persistencePackage.getFetchTypeFullyQualifiedClassname(), standardFilterMappings);            </span>
<span class="6303456555516158535" onmouseenter="enter('6303456555516158535');" onmouseout="out('6303456555516158535');" style="">1206              List&lt;Serializable&gt; records = getPersistentRecords(fetchRequest);                                      </span>
<span  style="">1207                                                                                                                    </span>
<span class="-2850022341577176338" onmouseenter="enter('-2850022341577176338');" onmouseout="out('-2850022341577176338');" style="">1208              List&lt;FilterMapping&gt; countFilterMappings = new ArrayList&lt;FilterMapping&gt;(filterMappings);               </span>
<span class="-7234483564503350831" onmouseenter="enter('-7234483564503350831');" onmouseout="out('-7234483564503350831');" style="">1209              if (CollectionUtils.isNotEmpty(cto.getAdditionalFilterMappings())) {                                  </span>
<span class="2702453385268728814" onmouseenter="enter('2702453385268728814');" onmouseout="out('2702453385268728814');" style="">1210                  countFilterMappings.addAll(cto.getAdditionalFilterMappings());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211              }                                                                                                     </span>
<span class="-3999242298419802693" onmouseenter="enter('-3999242298419802693');" onmouseout="out('-3999242298419802693');" style="">1212              FetchRequest countFetchRequest = new FetchRequest(persistencePackage, cto,                            </span>
<span class="-3552477247406350113" onmouseenter="enter('-3552477247406350113');" onmouseout="out('-3552477247406350113');" style="">1213                      persistencePackage.getFetchTypeFullyQualifiedClassname(), countFilterMappings);               </span>
<span class="8724074426546236268" onmouseenter="enter('8724074426546236268');" onmouseout="out('8724074426546236268');" style="">1214              totalRecords = getTotalRecords(countFetchRequest);                                                    </span>
<span  style="">1215                                                                                                                    </span>
<span class="-5158650912512765537" onmouseenter="enter('-5158650912512765537');" onmouseout="out('-5158650912512765537');" style="">1216              FetchExtractionRequest fetchExtractionRequest = new FetchExtractionRequest(persistencePackage, cto,   </span>
<span class="6467880611752491014" onmouseenter="enter('6467880611752491014');" onmouseout="out('6467880611752491014');" style="">1217                      persistencePackage.getFetchTypeFullyQualifiedClassname(), mergedProperties, records);         </span>
<span class="8156899482235304262" onmouseenter="enter('8156899482235304262');" onmouseout="out('8156899482235304262');" style="">1218              payload = getRecords(fetchExtractionRequest);                                                         </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1219          } catch (Exception e) {                                                                                   </span>
<span class="-606937886990764978" onmouseenter="enter('-606937886990764978');" onmouseout="out('-606937886990764978');" style="">1220              throw new ServiceException(&quot;Unable to fetch results for &quot; + ceilingEntityFullyQualifiedClassname, e); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221          }                                                                                                         </span>
<span  style="">1222                                                                                                                    </span>
<span class="-3114265280987831722" onmouseenter="enter('-3114265280987831722');" onmouseout="out('-3114265280987831722');" style="">1223          return new DynamicResultSet(null, payload, totalRecords);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1224      }                                                                                                             </span>
<span  style="">1225                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1226      @Override                                                                                                     </span>
<span class="-2578660758180960" onmouseenter="enter('-2578660758180960');" onmouseout="out('-2578660758180960');" style="">1227      public Integer getTotalRecords(FetchRequest fetchRequest) {                                                   </span>
<span class="3552750659307215192" onmouseenter="enter('3552750659307215192');" onmouseout="out('3552750659307215192');" style="">1228          return fetchWrapper.getTotalRecords(fetchRequest);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229      }                                                                                                             </span>
<span  style="">1230                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1231      @Override                                                                                                     </span>
<span class="5133967305615212146" onmouseenter="enter('5133967305615212146');" onmouseout="out('5133967305615212146');" style="">1232      public Integer getTotalRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1233          try {                                                                                                     </span>
<span class="2992791529598050608" onmouseenter="enter('2992791529598050608');" onmouseout="out('2992791529598050608');" style="">1234              return ((Long) criteriaTranslator.translateCountQuery(persistenceManager.getDynamicEntityDao(),       </span>
<span class="9038213180647386393" onmouseenter="enter('9038213180647386393');" onmouseout="out('9038213180647386393');" style="">1235                      ceilingEntity, filterMappings).getSingleResult()).intValue();                                 </span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1236          } catch (CriteriaConversionException e) {                                                                 </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1237              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1237              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntityðŸ”µ</abbr></span>
<span class="3717478470762679000" onmouseenter="enter('3717478470762679000');" onmouseout="out('3717478470762679000');" style=""><abbr title="1238              return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getSingleResult()).intValue();">1238              return ((Long) builder.toCountQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1239          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1240      }                                                                                                             </span>
<span  style="">1241                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1242      @Override                                                                                                     </span>
<span class="-7091292263578945571" onmouseenter="enter('-7091292263578945571');" onmouseout="out('-7091292263578945571');" style="">1243      public Serializable getMaxValue(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, String maxField) {  </span>
<span class="378343015895903420" onmouseenter="enter('378343015895903420');" onmouseout="out('378343015895903420');" style="">1244          return criteriaTranslator.translateMaxQuery(persistenceManager.getDynamicEntityDao(),                     </span>
<span class="-8797211071846459738" onmouseenter="enter('-8797211071846459738');" onmouseout="out('-8797211071846459738');" style="">1245                  ceilingEntity, filterMappings, maxField).getSingleResult();                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246      }                                                                                                             </span>
<span  style="">1247                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1248      @Override                                                                                                     </span>
<span class="-7700127040847294453" onmouseenter="enter('-7700127040847294453');" onmouseout="out('-7700127040847294453');" style="">1249      public List&lt;Serializable&gt; getPersistentRecords(FetchRequest fetchRequest) {                                   </span>
<span class="8379695074016758469" onmouseenter="enter('8379695074016758469');" onmouseout="out('8379695074016758469');" style="">1250          return fetchWrapper.getPersistentRecords(fetchRequest);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1251      }                                                                                                             </span>
<span  style="">1252                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1253      @Override                                                                                                     </span>
<span class="-3765220535491808040" onmouseenter="enter('-3765220535491808040');" onmouseout="out('-3765220535491808040');" style=""><abbr title="1254      public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, Integer firstResult, Integer maxResults) {">1254      public List&lt;Serializable&gt; getPersistentRecords(String ceilingEntity, List&lt;FilterMapping&gt; filterMappings, IntegðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1255          try {                                                                                                     </span>
<span class="389003939619547722" onmouseenter="enter('389003939619547722');" onmouseout="out('389003939619547722');" style=""><abbr title="1256              return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filterMappings, firstResult, maxResults).getResultList();">1256              return criteriaTranslator.translateQuery(persistenceManager.getDynamicEntityDao(), ceilingEntity, filtðŸ”µ</abbr></span>
<span class="7948822067828238535" onmouseenter="enter('7948822067828238535');" onmouseout="out('7948822067828238535');" style="">1257          } catch (CriteriaConversionException e) {                                                                 </span>
<span class="3183188479719760792" onmouseenter="enter('3183188479719760792');" onmouseout="out('3183188479719760792');" style=""><abbr title="1258              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntity);">1258              TypedQueryBuilder builder = getSpecialCaseQueryBuilder(e.getFieldPath(), filterMappings, ceilingEntityðŸ”µ</abbr></span>
<span class="-221814316245476979" onmouseenter="enter('-221814316245476979');" onmouseout="out('-221814316245476979');" style=""><abbr title="1259              return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getResultList();">1259              return builder.toQuery(getPersistenceManager().getDynamicEntityDao().getStandardEntityManager()).getReðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1260          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1261      }                                                                                                             </span>
<span  style="">1262                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1263      @Override                                                                                                     </span>
<span class="-5264121643331936103" onmouseenter="enter('-5264121643331936103');" onmouseout="out('-5264121643331936103');" style=""><abbr title="1264      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties) {">1264      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperðŸ”µ</abbr></span>
<span class="4828126916979552028" onmouseenter="enter('4828126916979552028');" onmouseout="out('4828126916979552028');" style="">1265          return validate(entity, populatedInstance, mergedProperties, true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1266      }                                                                                                             </span>
<span  style="">1267                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1268      @Override                                                                                                     </span>
<span class="-2540520329201552550" onmouseenter="enter('-2540520329201552550');" onmouseout="out('-2540520329201552550');" style=""><abbr title="1269      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperties,">1269      public boolean validate(Entity entity, Serializable populatedInstance, Map&lt;String, FieldMetadata&gt; mergedProperðŸ”µ</abbr></span>
<span class="-646875273047375380" onmouseenter="enter('-646875273047375380');" onmouseout="out('-646875273047375380');" style="">1270              boolean validateUnsubmittedProperties) {                                                              </span>
<span class="-1767922062013594425" onmouseenter="enter('-1767922062013594425');" onmouseout="out('-1767922062013594425');" style=""><abbr title="1271          entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedProperties);">1271          entityValidatorService.validate(entity, populatedInstance, mergedProperties, this, validateUnsubmittedPropðŸ”µ</abbr></span>
<span class="3683508287945816806" onmouseenter="enter('3683508287945816806');" onmouseout="out('3683508287945816806');" style="">1272          return !entity.isValidationFailure();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273      }                                                                                                             </span>
<span  style="">1274                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1275      @Override                                                                                                     </span>
<span class="-7261136882877520523" onmouseenter="enter('-7261136882877520523');" onmouseout="out('-7261136882877520523');" style="">1276      public void setPersistenceManager(PersistenceManager persistenceManager) {                                    </span>
<span class="420805913365778848" onmouseenter="enter('420805913365778848');" onmouseout="out('420805913365778848');" style="">1277          this.persistenceManager = persistenceManager;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278      }                                                                                                             </span>
<span  style="">1279                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1280      @Override                                                                                                     </span>
<span class="-2499387119652050167" onmouseenter="enter('-2499387119652050167');" onmouseout="out('-2499387119652050167');" style="">1281      public PersistenceModule getCompatibleModule(OperationType operationType) {                                   </span>
<span class="-6680721005895887682" onmouseenter="enter('-6680721005895887682');" onmouseout="out('-6680721005895887682');" style="">1282          return ((InspectHelper) persistenceManager).getCompatibleModule(operationType);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1283      }                                                                                                             </span>
<span  style="">1284                                                                                                                    </span>
<span class="3328492731591597182" onmouseenter="enter('3328492731591597182');" onmouseout="out('3328492731591597182');" style="">1285      public FieldPersistenceProvider getDefaultFieldPersistenceProvider() {                                        </span>
<span class="1756204342632449191" onmouseenter="enter('1756204342632449191');" onmouseout="out('1756204342632449191');" style="">1286          return defaultFieldPersistenceProvider;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1287      }                                                                                                             </span>
<span  style="">1288                                                                                                                    </span>
<span class="-2699135397458953097" onmouseenter="enter('-2699135397458953097');" onmouseout="out('-2699135397458953097');" style="">1289      public void setDefaultFieldPersistenceProvider(FieldPersistenceProvider defaultFieldPersistenceProvider) {    </span>
<span class="3999856981618428822" onmouseenter="enter('3999856981618428822');" onmouseout="out('3999856981618428822');" style="">1290          this.defaultFieldPersistenceProvider = defaultFieldPersistenceProvider;                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1291      }                                                                                                             </span>
<span  style="">1292                                                                                                                    </span>
<span class="-3297513575264900381" onmouseenter="enter('-3297513575264900381');" onmouseout="out('-3297513575264900381');" style="">1293      public List&lt;FieldPersistenceProvider&gt; getFieldPersistenceProviders() {                                        </span>
<span class="-2059463949907485093" onmouseenter="enter('-2059463949907485093');" onmouseout="out('-2059463949907485093');" style="">1294          return fieldPersistenceProviders;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295      }                                                                                                             </span>
<span  style="">1296                                                                                                                    </span>
<span class="-235472694817904036" onmouseenter="enter('-235472694817904036');" onmouseout="out('-235472694817904036');" style="">1297      public void setFieldPersistenceProviders(List&lt;FieldPersistenceProvider&gt; fieldPersistenceProviders) {          </span>
<span class="-2955406707242124116" onmouseenter="enter('-2955406707242124116');" onmouseout="out('-2955406707242124116');" style="">1298          this.fieldPersistenceProviders = fieldPersistenceProviders;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1299      }                                                                                                             </span>
<span  style="">1300                                                                                                                    </span>
<span class="2527239256502116436" onmouseenter="enter('2527239256502116436');" onmouseout="out('2527239256502116436');" style="">1301      public CriteriaTranslator getCriteriaTranslator() {                                                           </span>
<span class="-7874987932723060666" onmouseenter="enter('-7874987932723060666');" onmouseout="out('-7874987932723060666');" style="">1302          return criteriaTranslator;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1303      }                                                                                                             </span>
<span  style="">1304                                                                                                                    </span>
<span class="3030781032482147469" onmouseenter="enter('3030781032482147469');" onmouseout="out('3030781032482147469');" style="">1305      public void setCriteriaTranslator(CriteriaTranslator criteriaTranslator) {                                    </span>
<span class="8514480012814343106" onmouseenter="enter('8514480012814343106');" onmouseout="out('8514480012814343106');" style="">1306          this.criteriaTranslator = criteriaTranslator;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1307      }                                                                                                             </span>
<span  style="">1308                                                                                                                    </span>
<span class="5879967825851129823" onmouseenter="enter('5879967825851129823');" onmouseout="out('5879967825851129823');" style="">1309      public EntityValidatorService getEntityValidatorService() {                                                   </span>
<span class="5121045867689107592" onmouseenter="enter('5121045867689107592');" onmouseout="out('5121045867689107592');" style="">1310          return entityValidatorService;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1311      }                                                                                                             </span>
<span  style="">1312                                                                                                                    </span>
<span class="1108892278031396141" onmouseenter="enter('1108892278031396141');" onmouseout="out('1108892278031396141');" style="">1313      public void setEntityValidatorService(EntityValidatorService entityValidatorService) {                        </span>
<span class="-1870662827894286800" onmouseenter="enter('-1870662827894286800');" onmouseout="out('-1870662827894286800');" style="">1314          this.entityValidatorService = entityValidatorService;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1315      }                                                                                                             </span>
<span  style="">1316                                                                                                                    </span>
<span class="-1748543627179535834" onmouseenter="enter('-1748543627179535834');" onmouseout="out('-1748543627179535834');" style="">1317      public RestrictionFactory getRestrictionFactory() {                                                           </span>
<span class="3824148827663415229" onmouseenter="enter('3824148827663415229');" onmouseout="out('3824148827663415229');" style="">1318          return restrictionFactory;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1319      }                                                                                                             </span>
<span  style="">1320                                                                                                                    </span>
<span class="-2008652971927118074" onmouseenter="enter('-2008652971927118074');" onmouseout="out('-2008652971927118074');" style="">1321      public void setRestrictionFactory(RestrictionFactory restrictionFactory) {                                    </span>
<span class="2351646543947184406" onmouseenter="enter('2351646543947184406');" onmouseout="out('2351646543947184406');" style="">1322          this.restrictionFactory = restrictionFactory;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1323      }                                                                                                             </span>
<span  style="">1324                                                                                                                    </span>
<span class="-5029713949712177492" onmouseenter="enter('-5029713949712177492');" onmouseout="out('-5029713949712177492');" style="">1325      public PersistenceManager getPersistenceManager() {                                                           </span>
<span class="238620838116623116" onmouseenter="enter('238620838116623116');" onmouseout="out('238620838116623116');" style="">1326          return persistenceManager;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327      }                                                                                                             </span>
<span  style="">1328                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1329      /**                                                                                                           </span>
<span class="-5659125667278957327" onmouseenter="enter('-5659125667278957327');" onmouseout="out('-5659125667278957327');" style=""><abbr title="1330       * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable object. Related">1330       * Use an alternate approach to generating a fetch query for a collection located inside of an @Embeddable objðŸ”µ</abbr></span>
<span class="4561034045985117681" onmouseenter="enter('4561034045985117681');" onmouseout="out('4561034045985117681');" style=""><abbr title="1331       * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA criteria,">1331       * to https://hibernate.atlassian.net/browse/HHH-8802. The alternate approach leverages HQL rather than JPA crðŸ”µ</abbr></span>
<span class="6419934548242517763" onmouseenter="enter('6419934548242517763');" onmouseout="out('6419934548242517763');" style="">1332       * which seems to alleviate the problem.                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1333       *                                                                                                            </span>
<span class="-2077216329372670" onmouseenter="enter('-2077216329372670');" onmouseout="out('-2077216329372670');" style="">1334       * @param embeddedCollectionPath the path to the collection field itself                                      </span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1335       * @param filterMappings all the fetch restrictions for this request                                          </span>
<span class="500285512782550604" onmouseenter="enter('500285512782550604');" onmouseout="out('500285512782550604');" style="">1336       * @param collectionClass the type of the collection members                                                  </span>
<span class="-124687443674998826" onmouseenter="enter('-124687443674998826');" onmouseout="out('-124687443674998826');" style="">1337       * @return the builder capable of generating an appropriate HQL query                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1338       */                                                                                                           </span>
<span class="318950424073468037" onmouseenter="enter('318950424073468037');" onmouseout="out('318950424073468037');" style=""><abbr title="1339      protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings, String collectionClass) {">1339      protected TypedQueryBuilder getSpecialCaseQueryBuilder(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; fðŸ”µ</abbr></span>
<span class="6393444935626899139" onmouseenter="enter('6393444935626899139');" onmouseout="out('6393444935626899139');" style="">1340          String specialPath = embeddedCollectionPath.getTargetProperty();                                          </span>
<span class="-5143159997305327734" onmouseenter="enter('-5143159997305327734');" onmouseout="out('-5143159997305327734');" style="">1341          String[] pieces = specialPath.split(&quot;\\.&quot;);                                                               </span>
<span class="5217253633788863143" onmouseenter="enter('5217253633788863143');" onmouseout="out('5217253633788863143');" style="">1342          if (pieces.length != 3) {                                                                                 </span>
<span class="849365765552848208" onmouseenter="enter('849365765552848208');" onmouseout="out('849365765552848208');" style=""><abbr title="1343              throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embedded field].[collection field].[property] for the embedded collection path (%s)&quot;, specialPath), embeddedCollectionPath);">1343              throw new CriteriaConversionException(String.format(&quot;Expected to find a target property of format [embðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1344          }                                                                                                         </span>
<span class="-8198781854964897228" onmouseenter="enter('-8198781854964897228');" onmouseout="out('-8198781854964897228');" style="">1345          String expression = specialPath.substring(0, specialPath.lastIndexOf(&quot;.&quot;));                               </span>
<span class="7643896692389749892" onmouseenter="enter('7643896692389749892');" onmouseout="out('7643896692389749892');" style="">1346          TypedQueryBuilder builder;                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1347          try {                                                                                                     </span>
<span class="-8552982106091258322" onmouseenter="enter('-8552982106091258322');" onmouseout="out('-8552982106091258322');" style="">1348              builder = new TypedQueryBuilder(Class.forName(collectionClass), &quot;specialEntity&quot;)                      </span>
<span class="7429624725018559493" onmouseenter="enter('7429624725018559493');" onmouseout="out('7429624725018559493');" style="">1349                      .addJoin(new TQJoin(&quot;specialEntity.&quot; + expression, &quot;embeddedCollection&quot;));                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1350          } catch (Exception e) {                                                                                   </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style="">1351              throw ExceptionHelper.refineException(e);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1352          }                                                                                                         </span>
<span class="-3537338773035059274" onmouseenter="enter('-3537338773035059274');" onmouseout="out('-3537338773035059274');" style="">1353          for (TQRestriction restriction : buildSpecialRestrictions(expression, filterMappings)) {                  </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1354              builder = builder.addRestriction(restriction);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1355          }                                                                                                         </span>
<span class="-3768831820353648531" onmouseenter="enter('-3768831820353648531');" onmouseout="out('-3768831820353648531');" style="">1356          for (TQRestriction restriction : buildStandardRestrictions(embeddedCollectionPath, filterMappings)) {     </span>
<span class="-1460191330369272529" onmouseenter="enter('-1460191330369272529');" onmouseout="out('-1460191330369272529');" style="">1357              builder = builder.addRestriction(restriction);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1358          }                                                                                                         </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1359          for (FilterMapping mapping : filterMappings) {                                                            </span>
<span class="-4604402569484224232" onmouseenter="enter('-4604402569484224232');" onmouseout="out('-4604402569484224232');" style="">1360              if (mapping.getSortDirection() != null) {                                                             </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1361                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1361                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetPðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1362                  if (StringUtils.isEmpty(mappingProperty)) {                                                       </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1363                      mappingProperty = mapping.getFullPropertyName();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1364                  }                                                                                                 </span>
<span class="-8248548206415810836" onmouseenter="enter('-8248548206415810836');" onmouseout="out('-8248548206415810836');" style=""><abbr title="1365                  builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDING == mapping.getSortDirection()));">1365                  builder = builder.addOrder(new TQOrder(&quot;specialEntity.&quot; + mappingProperty, SortDirection.ASCENDINGðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1366              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367          }                                                                                                         </span>
<span  style="">1368                                                                                                                    </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style="">1369          return builder;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1370      }                                                                                                             </span>
<span  style="">1371                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1372      /**                                                                                                           </span>
<span class="-8346746296837651477" onmouseenter="enter('-8346746296837651477');" onmouseout="out('-8346746296837651477');" style=""><abbr title="1373       * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collection field in the @Embeddable object)">1373       * Generate LIKE or EQUALS restrictions for any filter property specified on the root entity (not the collectiðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1374       *                                                                                                            </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1375       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1375       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteriaðŸ”µ</abbr></span>
<span class="6692178223307224172" onmouseenter="enter('6692178223307224172');" onmouseout="out('6692178223307224172');" style=""><abbr title="1376       * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caused the whole thing">1376       * @param embeddedCollectionPath the path for the collection field in the @Embeddable object - this is what caðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1377       * @param filterMappings all the fetch restrictions for this request                                          </span>
<span class="-357236726942159378" onmouseenter="enter('-357236726942159378');" onmouseout="out('-357236726942159378');" style="">1378       * @return the list of restrictions on the root entity                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1379       */                                                                                                           </span>
<span class="-85615873681846318" onmouseenter="enter('-85615873681846318');" onmouseout="out('-85615873681846318');" style=""><abbr title="1380      protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; filterMappings) {">1380      protected List&lt;TQRestriction&gt; buildStandardRestrictions(FieldPath embeddedCollectionPath, List&lt;FilterMapping&gt; ðŸ”µ</abbr></span>
<span class="-1692895948334038289" onmouseenter="enter('-1692895948334038289');" onmouseout="out('-1692895948334038289');" style=""><abbr title="1381          String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargetProperty().lastIndexOf(&quot;.&quot;));">1381          String expression = embeddedCollectionPath.getTargetProperty().substring(0, embeddedCollectionPath.getTargðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1382          List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                                        </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1383          for (FilterMapping mapping : filterMappings) {                                                            </span>
<span class="5670151306593626605" onmouseenter="enter('5670151306593626605');" onmouseout="out('5670151306593626605');" style="">1384              checkProperty: {                                                                                      </span>
<span class="-5861702296264894296" onmouseenter="enter('-5861702296264894296');" onmouseout="out('-5861702296264894296');" style=""><abbr title="1385                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetProperty();">1385                  String mappingProperty = mapping.getFieldPath() == null ? null : mapping.getFieldPath().getTargetPðŸ”µ</abbr></span>
<span class="2566075859107001308" onmouseenter="enter('2566075859107001308');" onmouseout="out('2566075859107001308');" style="">1386                  if (StringUtils.isEmpty(mappingProperty)) {                                                       </span>
<span class="6351963214617280306" onmouseenter="enter('6351963214617280306');" onmouseout="out('6351963214617280306');" style="">1387                      mappingProperty = mapping.getFullPropertyName();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1388                  }                                                                                                 </span>
<span class="-8226569942575396694" onmouseenter="enter('-8226569942575396694');" onmouseout="out('-8226569942575396694');" style=""><abbr title="1389                  if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.isEmpty(mappingProperty)) {">1389                  if (!embeddedCollectionPath.getTargetProperty().equals(mappingProperty) &amp;&amp; !StringUtils.isEmpty(maðŸ”µ</abbr></span>
<span class="-9008982404255839640" onmouseenter="enter('-9008982404255839640');" onmouseout="out('-9008982404255839640');" style="">1390                      PredicateProvider predicateProvider = mapping.getRestriction().getPredicateProvider();        </span>
<span class="-3527643591612301478" onmouseenter="enter('-3527643591612301478');" onmouseout="out('-3527643591612301478');" style="">1391                      if (predicateProvider != null) {                                                              </span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1392                          FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();      </span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1393                          if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {         </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1394                              Object val = converter.convert(mapping.getFilterValues().get(0));                     </span>
<span class="4919121251037931163" onmouseenter="enter('4919121251037931163');" onmouseout="out('4919121251037931163');" style="">1395                              if (predicateProvider instanceof LikePredicateProvider) {                             </span>
<span class="-1773061400470981891" onmouseenter="enter('-1773061400470981891');" onmouseout="out('-1773061400470981891');" style=""><abbr title="1396                                  restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, val + &quot;%&quot;));">1396                                  restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;LIKE&quot;, valðŸ”µ</abbr></span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1397                                  break checkProperty;                                                              </span>
<span class="8904766331581746771" onmouseenter="enter('8904766331581746771');" onmouseout="out('8904766331581746771');" style="">1398                              } else if (predicateProvider instanceof EqPredicateProvider) {                        </span>
<span class="1134572960833745712" onmouseenter="enter('1134572960833745712');" onmouseout="out('1134572960833745712');" style="">1399                                  restrictions.add(new TQRestriction(&quot;specialEntity.&quot; + mappingProperty, &quot;=&quot;, val));</span>
<span class="8239193033787249728" onmouseenter="enter('8239193033787249728');" onmouseout="out('8239193033787249728');" style="">1400                                  break checkProperty;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1401                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1402                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1403                      }                                                                                             </span>
<span class="-6733273180612799079" onmouseenter="enter('-6733273180612799079');" onmouseout="out('-6733273180612799079');" style=""><abbr title="1404                      LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional property (%s)&quot;,">1404                      LOG.warn(String.format(&quot;Unable to filter the embedded collection (%s) on an additional propertðŸ”µ</abbr></span>
<span class="-8181613750620164347" onmouseenter="enter('-8181613750620164347');" onmouseout="out('-8181613750620164347');" style="">1405                              StringUtil.sanitize(expression),                                                      </span>
<span class="-5255115290358802775" onmouseenter="enter('-5255115290358802775');" onmouseout="out('-5255115290358802775');" style="">1406                              StringUtil.sanitize(mappingProperty)));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1407                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1409          }                                                                                                         </span>
<span  style="">1410                                                                                                                    </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1411          return restrictions;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412      }                                                                                                             </span>
<span  style="">1413                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1414      /**                                                                                                           </span>
<span class="2167663911523579684" onmouseenter="enter('2167663911523579684');" onmouseout="out('2167663911523579684');" style=""><abbr title="1415       * Generate EQUALS restrictions for any filter property specified on the entity member of the collection field in the @Embeddable object">1415       * Generate EQUALS restrictions for any filter property specified on the entity member of the collection fieldðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1416       *                                                                                                            </span>
<span class="-8881177896144452594" onmouseenter="enter('-8881177896144452594');" onmouseout="out('-8881177896144452594');" style=""><abbr title="1417       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath, java.util.List, String)">1417       * @see #getSpecialCaseQueryBuilder(org.broadleafcommerce.openadmin.server.service.persistence.module.criteriaðŸ”µ</abbr></span>
<span class="-9017749716487851104" onmouseenter="enter('-9017749716487851104');" onmouseout="out('-9017749716487851104');" style=""><abbr title="1418       * @param specialExpression the String representation of the path for the collection field in the @Embeddable object">1418       * @param specialExpression the String representation of the path for the collection field in the @Embeddable ðŸ”µ</abbr></span>
<span class="9105195802530359790" onmouseenter="enter('9105195802530359790');" onmouseout="out('9105195802530359790');" style="">1419       * @param filterMappings all the fetch restrictions for this request                                          </span>
<span class="3793893128909469910" onmouseenter="enter('3793893128909469910');" onmouseout="out('3793893128909469910');" style="">1420       * @return the list of restrictions on the collection in the @Embeddable object                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1421       */                                                                                                           </span>
<span class="-1807551435758383985" onmouseenter="enter('-1807551435758383985');" onmouseout="out('-1807551435758383985');" style=""><abbr title="1422      protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMappings) {">1422      protected List&lt;TQRestriction&gt; buildSpecialRestrictions(String specialExpression, List&lt;FilterMapping&gt; filterMapðŸ”µ</abbr></span>
<span class="2904629228140548627" onmouseenter="enter('2904629228140548627');" onmouseout="out('2904629228140548627');" style="">1423          List&lt;TQRestriction&gt; restrictions = new ArrayList&lt;TQRestriction&gt;();                                        </span>
<span class="8276214756944979077" onmouseenter="enter('8276214756944979077');" onmouseout="out('8276214756944979077');" style="">1424          for (FilterMapping mapping : filterMappings) {                                                            </span>
<span class="-7768046259105737972" onmouseenter="enter('-7768046259105737972');" onmouseout="out('-7768046259105737972');" style=""><abbr title="1425              if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mapping.getFieldPath().getTargetProperty().startsWith(specialExpression)) {">1425              if (mapping.getFieldPath() != null &amp;&amp; mapping.getFieldPath().getTargetProperty() != null &amp;&amp; mapping.geðŸ”µ</abbr></span>
<span class="-6468502324425103343" onmouseenter="enter('-6468502324425103343');" onmouseout="out('-6468502324425103343');" style="">1426                  FilterValueConverter converter = mapping.getRestriction().getFilterValueConverter();              </span>
<span class="943245120545171274" onmouseenter="enter('943245120545171274');" onmouseout="out('943245120545171274');" style="">1427                  if (converter != null &amp;&amp; CollectionUtils.isNotEmpty(mapping.getFilterValues())) {                 </span>
<span class="-58899903434565093" onmouseenter="enter('-58899903434565093');" onmouseout="out('-58899903434565093');" style="">1428                      Object val = converter.convert(mapping.getFilterValues().get(0));                             </span>
<span class="-3185664653595577967" onmouseenter="enter('-3185664653595577967');" onmouseout="out('-3185664653595577967');" style=""><abbr title="1429                      String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().getTargetProperty().lastIndexOf(&quot;.&quot;) + 1, mapping.getFieldPath().getTargetProperty().length());">1429                      String property = mapping.getFieldPath().getTargetProperty().substring(mapping.getFieldPath().ðŸ”µ</abbr></span>
<span class="6515773652350530653" onmouseenter="enter('6515773652350530653');" onmouseout="out('6515773652350530653');" style="">1430                      restrictions.add(new TQRestriction(&quot;embeddedCollection.&quot; + property, &quot;=&quot;, val));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1431                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1432              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1433          }                                                                                                         </span>
<span class="-8786893991419488769" onmouseenter="enter('-8786893991419488769');" onmouseout="out('-8786893991419488769');" style="">1434          return restrictions;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1435      }                                                                                                             </span>
<span  style="">1436                                                                                                                    </span>
<span class="-1847859638489008561" onmouseenter="enter('-1847859638489008561');" onmouseout="out('-1847859638489008561');" style="">1437      protected void cleanupFailedPersistenceAttempt(Serializable instance) throws IllegalAccessException {         </span>
<span class="-761178418461683406" onmouseenter="enter('-761178418461683406');" onmouseout="out('-761178418461683406');" style="">1438          //Remove the entity from ORM management - no further attempts to persist                                  </span>
<span class="-8509958237563709196" onmouseenter="enter('-8509958237563709196');" onmouseout="out('-8509958237563709196');" style="">1439          if (getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().contains(instance)) {        </span>
<span class="-8381574259703143566" onmouseenter="enter('-8381574259703143566');" onmouseout="out('-8381574259703143566');" style="">1440              getPersistenceManager().getDynamicEntityDao().getStandardEntityManager().detach(instance);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1441          }                                                                                                         </span>
<span class="7196727024368525589" onmouseenter="enter('7196727024368525589');" onmouseout="out('7196727024368525589');" style="">1442          //Remove the id field value, if it&#x27;s set                                                                  </span>
<span class="-8963497040678265373" onmouseenter="enter('-8963497040678265373');" onmouseout="out('-8963497040678265373');" style=""><abbr title="1443          String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClass()).get(&quot;name&quot;);">1443          String idFieldName = (String) getPersistenceManager().getDynamicEntityDao().getIdMetadata(instance.getClasðŸ”µ</abbr></span>
<span class="-7813482713010008669" onmouseenter="enter('-7813482713010008669');" onmouseout="out('-7813482713010008669');" style="">1444          Field idField = FieldUtils.getField(instance.getClass(), idFieldName, true);                              </span>
<span class="-5694238240637206409" onmouseenter="enter('-5694238240637206409');" onmouseout="out('-5694238240637206409');" style="">1445          if (idField == null) {                                                                                    </span>
<span class="6113500709945049507" onmouseenter="enter('6113500709945049507');" onmouseout="out('6113500709945049507');" style=""><abbr title="1446              throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getName() + &quot; does not contain id field &quot; + idFieldName));">1446              throw ExceptionHelper.refineException(new NoSuchFieldException(&quot;Entity &quot; + instance.getClass().getNameðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1447          }                                                                                                         </span>
<span class="7965871812340203707" onmouseenter="enter('7965871812340203707');" onmouseout="out('7965871812340203707');" style="">1448          idField.setAccessible(true);                                                                              </span>
<span class="-5148613654387121426" onmouseenter="enter('-5148613654387121426');" onmouseout="out('-5148613654387121426');" style="">1449          if (idField.get(instance) != null) {                                                                      </span>
<span class="-3149499430961766795" onmouseenter="enter('-3149499430961766795');" onmouseout="out('-3149499430961766795');" style="">1450              idField.set(instance, null);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1451          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1452      }                                                                                                             </span>
<span  style="">1453                                                                                                                    </span>
<span class="361057059065324955" onmouseenter="enter('361057059065324955');" onmouseout="out('361057059065324955');" style="">1454      protected Class&lt;?&gt; getMapFieldType(Serializable instance, FieldManager fieldManager, Property property) {     </span>
<span class="1752551688027428994" onmouseenter="enter('1752551688027428994');" onmouseout="out('1752551688027428994');" style="">1455          Class&lt;?&gt; returnType = null;                                                                               </span>
<span class="3738304511666335991" onmouseenter="enter('3738304511666335991');" onmouseout="out('3738304511666335991');" style=""><abbr title="1456          Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName().indexOf(FieldManager.MAPFIELDSEPARATOR)));">1456          Field field = fieldManager.getField(instance.getClass(), property.getName().substring(0, property.getName(ðŸ”µ</abbr></span>
<span class="5464468769050206957" onmouseenter="enter('5464468769050206957');" onmouseout="out('5464468769050206957');" style="">1457          java.lang.reflect.Type type = field.getGenericType();                                                     </span>
<span class="-6389298272813932854" onmouseenter="enter('-6389298272813932854');" onmouseout="out('-6389298272813932854');" style="">1458          if (type instanceof ParameterizedType) {                                                                  </span>
<span class="705860026972665445" onmouseenter="enter('705860026972665445');" onmouseout="out('705860026972665445');" style="">1459              ParameterizedType pType = (ParameterizedType) type;                                                   </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style="">1460              Class&lt;?&gt; clazz;                                                                                       </span>
<span class="7069691481162074648" onmouseenter="enter('7069691481162074648');" onmouseout="out('7069691481162074648');" style="">1461              if (pType.getActualTypeArguments().length &lt; 2) {                                                      </span>
<span class="4541832948460311824" onmouseenter="enter('4541832948460311824');" onmouseout="out('4541832948460311824');" style="">1462                  clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[0];                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1463              } else {                                                                                              </span>
<span class="-5335821615199731853" onmouseenter="enter('-5335821615199731853');" onmouseout="out('-5335821615199731853');" style="">1464                  clazz = (Class&lt;?&gt;) pType.getActualTypeArguments()[1];                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1465              }                                                                                                     </span>
<span class="2546721200619882801" onmouseenter="enter('2546721200619882801');" onmouseout="out('2546721200619882801');" style=""><abbr title="1466              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clazz);">1466              Class&lt;?&gt;[] entities = persistenceManager.getDynamicEntityDao().getAllPolymorphicEntitiesFromCeiling(clðŸ”µ</abbr></span>
<span class="5482192784237496931" onmouseenter="enter('5482192784237496931');" onmouseout="out('5482192784237496931');" style="">1467              if (!ArrayUtils.isEmpty(entities)) {                                                                  </span>
<span class="4302056969260211006" onmouseenter="enter('4302056969260211006');" onmouseout="out('4302056969260211006');" style="">1468                  returnType = entities[entities.length - 1];                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1469              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470          }                                                                                                         </span>
<span class="7163755908227734414" onmouseenter="enter('7163755908227734414');" onmouseout="out('7163755908227734414');" style="">1471          return returnType;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1473  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            