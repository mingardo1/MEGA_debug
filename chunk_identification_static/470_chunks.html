<!DOCTYPE html>
<html lang="en">
          <head>
            <meta charset="utf-8">
            <title>470 chunks</title>
                <style>
                    #top {
                        height: 48vh;
                        overflow-y: auto;
                    }
                    #bottom {
                        height: 48vh;
                        overflow-y: auto;
                    }
                </style>
          </head>
          <body>
            <pre>[[{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;    public void addAndBindAddedApps(final Context &#x27;
                         &#x27;context, final ArrayList&lt;ItemInfo&gt; workspaceApps,\n&#x27;
                         &#x27;                                    final &#x27;
                         &#x27;ArrayList&lt;AppInfo&gt; allAppsApps) {\n&#x27;
                         &#x27;        Callbacks cb = mCallbacks != null ? &#x27;
                         &#x27;mCallbacks.get() : null;\n&#x27;
                         &#x27;        addAndBindAddedApps(context, workspaceApps, &#x27;
                         &#x27;cb, allAppsApps);\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;    public void addAppsToAllApps(final Context &#x27;
                           &#x27;ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {\n&#x27;
                           &#x27;        final Callbacks callbacks = mCallbacks != &#x27;
                           &#x27;null ? mCallbacks.get() : null;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        if (allAppsApps == null) {\n&#x27;
                           &#x27;            throw new &#x27;
                           &#x27;RuntimeException(&quot;allAppsApps must not be null&quot;);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        if (allAppsApps.isEmpty()) {\n&#x27;
                           &#x27;            return;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        final ArrayList&lt;AppInfo&gt; restoredAppsFinal &#x27;
                           &#x27;= new ArrayList&lt;AppInfo&gt;();\n&#x27;
                           &#x27;        Iterator&lt;AppInfo&gt; iter = &#x27;
                           &#x27;allAppsApps.iterator();\n&#x27;
                           &#x27;        while (iter.hasNext()) {\n&#x27;
                           &#x27;            ItemInfo a = iter.next();\n&#x27;
                           &#x27;            if (LauncherModel.appWasRestored(ctx, &#x27;
                           &#x27;a.getIntent())) {\n&#x27;
                           &#x27;                restoredAppsFinal.add((AppInfo) &#x27;
                           &#x27;a);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Process the newly added applications &#x27;
                           &#x27;and add them to the database first\n&#x27;
                           &#x27;        Runnable r = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                runOnMainThread(new Runnable() {\n&#x27;
                           &#x27;                    public void run() {\n&#x27;
                           &#x27;                        Callbacks cb = mCallbacks &#x27;
                           &#x27;!= null ? mCallbacks.get() : null;\n&#x27;
                           &#x27;                        if (callbacks == cb &amp;&amp; cb &#x27;
                           &#x27;!= null) {\n&#x27;
                           &#x27;                            &#x27;
                           &#x27;callbacks.bindAppsAdded(null, null, null, &#x27;
                           &#x27;allAppsApps);\n&#x27;
                           &#x27;                            if &#x27;
                           &#x27;(!restoredAppsFinal.isEmpty()) {\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;callbacks.bindAppsUpdated(restoredAppsFinal);\n&#x27;
                           &#x27;                            }\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                });\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        runOnWorkerThread(r);\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;                                        &#x27;
                         &#x27;addNotAnimated, addAnimated, allAppsApps);\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;                                        &#x27;
                           &#x27;addNotAnimated, addAnimated, null);\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(!restoredAppsFinal.isEmpty()) {\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;callbacks.bindAppsUpdated(restoredAppsFinal);\n&#x27;
                           &#x27;                                }\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;public void addAppsToAllApps(final Context ctx, &#x27;
                           &#x27;final ArrayList&lt;AppInfo&gt; allAppsApps) {\n&#x27;
                           &#x27;        final Callbacks callbacks = mCallbacks != &#x27;
                           &#x27;null ? mCallbacks.get() : null;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        if (allAppsApps == null) {\n&#x27;
                           &#x27;            throw new &#x27;
                           &#x27;RuntimeException(&quot;allAppsApps must not be null&quot;);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        if (allAppsApps.isEmpty()) {\n&#x27;
                           &#x27;            return;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        final ArrayList&lt;AppInfo&gt; restoredAppsFinal &#x27;
                           &#x27;= new ArrayList&lt;AppInfo&gt;();\n&#x27;
                           &#x27;        Iterator&lt;AppInfo&gt; iter = &#x27;
                           &#x27;allAppsApps.iterator();\n&#x27;
                           &#x27;        while (iter.hasNext()) {\n&#x27;
                           &#x27;            ItemInfo a = iter.next();\n&#x27;
                           &#x27;            if (LauncherModel.appWasRestored(ctx, &#x27;
                           &#x27;a.getIntent())) {\n&#x27;
                           &#x27;                restoredAppsFinal.add((AppInfo) &#x27;
                           &#x27;a);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Process the newly added applications &#x27;
                           &#x27;and add them to the database first\n&#x27;
                           &#x27;        Runnable r = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                runOnMainThread(new Runnable() {\n&#x27;
                           &#x27;                    public void run() {\n&#x27;
                           &#x27;                        Callbacks cb = mCallbacks &#x27;
                           &#x27;!= null ? mCallbacks.get() : null;\n&#x27;
                           &#x27;                        if (callbacks == cb &amp;&amp; cb &#x27;
                           &#x27;!= null) {\n&#x27;
                           &#x27;                            &#x27;
                           &#x27;callbacks.bindAppsAdded(null, null, null, &#x27;
                           &#x27;allAppsApps);\n&#x27;
                           &#x27;                            if &#x27;
                           &#x27;(!restoredAppsFinal.isEmpty()) {\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;callbacks.bindAppsUpdated(restoredAppsFinal);\n&#x27;
                           &#x27;                            }\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                });\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        runOnWorkerThread(r);\n&#x27;
                           &#x27;    }\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;jfstmerge&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;public void addAndBindAddedWorkspaceApps(final &#x27;
                           &#x27;Context context,\n&#x27;
                           &#x27;            final ArrayList&lt;ItemInfo&gt; &#x27;
                           &#x27;workspaceApps) {\n&#x27;
                           &#x27;        final Callbacks callbacks = mCallbacks != &#x27;
                           &#x27;null ? mCallbacks.get() : null;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        if (workspaceApps == null) {\n&#x27;
                           &#x27;            throw new &#x27;
                           &#x27;RuntimeException(&quot;workspaceApps and allAppsApps &#x27;
                           &#x27;must not be null&quot;);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        if (workspaceApps.isEmpty()) {\n&#x27;
                           &#x27;            return;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        // Process the newly added applications &#x27;
                           &#x27;and add them to the database first\n&#x27;
                           &#x27;        Runnable r = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                final ArrayList&lt;ItemInfo&gt; &#x27;
                           &#x27;addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();\n&#x27;
                           &#x27;                final ArrayList&lt;Long&gt; &#x27;
                           &#x27;addedWorkspaceScreensFinal = new &#x27;
                           &#x27;ArrayList&lt;Long&gt;();\n&#x27;
                           &#x27;                final ArrayList&lt;AppInfo&gt; &#x27;
                           &#x27;restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                // Get the list of workspace &#x27;
                           &#x27;screens.  We need to append to this list and\n&#x27;
                           &#x27;                // can not use sBgWorkspaceScreens &#x27;
                           &#x27;because loadWorkspace() may not have been\n&#x27;
                           &#x27;                // called.\n&#x27;
                           &#x27;                ArrayList&lt;Long&gt; workspaceScreens = &#x27;
                           &#x27;new ArrayList&lt;Long&gt;();\n&#x27;
                           &#x27;                TreeMap&lt;Integer, Long&gt; &#x27;
                           &#x27;orderedScreens = loadWorkspaceScreensDb(context);\n&#x27;
                           &#x27;                for (Integer i : &#x27;
                           &#x27;orderedScreens.keySet()) {\n&#x27;
                           &#x27;                    long screenId = &#x27;
                           &#x27;orderedScreens.get(i);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;workspaceScreens.add(screenId);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                synchronized(sBgLock) {\n&#x27;
                           &#x27;                    Iterator&lt;ItemInfo&gt; iter = &#x27;
                           &#x27;workspaceApps.iterator();\n&#x27;
                           &#x27;                    while (iter.hasNext()) {\n&#x27;
                           &#x27;                        ItemInfo a = iter.next();\n&#x27;
                           &#x27;                        final String name = &#x27;
                           &#x27;a.title.toString();\n&#x27;
                           &#x27;                        final Intent launchIntent &#x27;
                           &#x27;= a.getIntent();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                        // Short-circuit this &#x27;
                           &#x27;logic if the icon exists somewhere on the &#x27;
                           &#x27;workspace\n&#x27;
                           &#x27;                        if &#x27;
                           &#x27;(LauncherModel.shortcutExists(context, name, &#x27;
                           &#x27;launchIntent)) {\n&#x27;
                           &#x27;                            // Only &#x27;
                           &#x27;InstallShortcutReceiver sends us shortcutInfos, &#x27;
                           &#x27;ignore them\n&#x27;
                           &#x27;                            if (a instanceof &#x27;
                           &#x27;AppInfo &amp;&amp;\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;LauncherModel.appWasRestored(context, &#x27;
                           &#x27;launchIntent)) {\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;restoredAppsFinal.add((AppInfo) a);\n&#x27;
                           &#x27;                            }\n&#x27;
                           &#x27;                            continue;\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                        // Add this icon to the &#x27;
                           &#x27;db, creating a new page if necessary.  If there\n&#x27;
                           &#x27;                        // is only the empty page &#x27;
                           &#x27;then we just add items to the first page.\n&#x27;
                           &#x27;                        // Otherwise, we add them &#x27;
                           &#x27;to the next pages.\n&#x27;
                           &#x27;                        int startSearchPageIndex = &#x27;
                           &#x27;workspaceScreens.isEmpty() ? 0 : 1;\n&#x27;
                           &#x27;                        Pair&lt;Long, int[]&gt; coords = &#x27;
                           &#x27;LauncherModel.findNextAvailableIconSpace(context,\n&#x27;
                           &#x27;                                name, &#x27;
                           &#x27;launchIntent, startSearchPageIndex, &#x27;
                           &#x27;workspaceScreens);\n&#x27;
                           &#x27;                        if (coords == null) {\n&#x27;
                           &#x27;                            LauncherProvider lp = &#x27;
                           &#x27;LauncherAppState.getLauncherProvider();\n&#x27;
                           &#x27;\n&#x27;
                           &quot;                            // If we can&#x27;t find a &quot;
                           &#x27;valid position, then just add a new screen.\n&#x27;
                           &#x27;                            // This takes time so &#x27;
                           &#x27;we need to re-queue the add until the new\n&#x27;
                           &#x27;                            // page is added.  &#x27;
                           &#x27;Create as many screens as necessary to satisfy\n&#x27;
                           &#x27;                            // the &#x27;
                           &#x27;startSearchPageIndex.\n&#x27;
                           &#x27;                            int numPagesToAdd = &#x27;
                           &#x27;Math.max(1, startSearchPageIndex + 1 -\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;workspaceScreens.size());\n&#x27;
                           &#x27;                            while (numPagesToAdd &gt; &#x27;
                           &#x27;0) {\n&#x27;
                           &#x27;                                long screenId = &#x27;
                           &#x27;lp.generateNewScreenId();\n&#x27;
                           &#x27;                                // Save the screen &#x27;
                           &#x27;id for binding in the workspace\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;workspaceScreens.add(screenId);\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;addedWorkspaceScreensFinal.add(screenId);\n&#x27;
                           &#x27;                                numPagesToAdd--;\n&#x27;
                           &#x27;                            }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                            // Find the coordinate &#x27;
                           &#x27;again\n&#x27;
                           &#x27;                            coords = &#x27;
                           &#x27;LauncherModel.findNextAvailableIconSpace(context,\n&#x27;
                           &#x27;                                    name, &#x27;
                           &#x27;launchIntent, startSearchPageIndex, &#x27;
                           &#x27;workspaceScreens);\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;                        if (coords == null) {\n&#x27;
                           &#x27;                            throw new &#x27;
                           &#x27;RuntimeException(&quot;Coordinates should not be &#x27;
                           &#x27;null&quot;);\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                        ShortcutInfo &#x27;
                           &#x27;shortcutInfo;\n&#x27;
                           &#x27;                        if (a instanceof &#x27;
                           &#x27;ShortcutInfo) {\n&#x27;
                           &#x27;                            shortcutInfo = &#x27;
                           &#x27;(ShortcutInfo) a;\n&#x27;
                           &#x27;                        } else if (a instanceof &#x27;
                           &#x27;AppInfo) {\n&#x27;
                           &#x27;                            shortcutInfo = &#x27;
                           &#x27;((AppInfo) a).makeShortcut();\n&#x27;
                           &#x27;                        } else {\n&#x27;
                           &#x27;                            throw new &#x27;
                           &#x27;RuntimeException(&quot;Unexpected info type&quot;);\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                        // Add the shortcut to the &#x27;
                           &#x27;db\n&#x27;
                           &#x27;                        addItemToDatabase(context, &#x27;
                           &#x27;shortcutInfo,\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;LauncherSettings.Favorites.CONTAINER_DESKTOP,\n&#x27;
                           &#x27;                                coords.first, &#x27;
                           &#x27;coords.second[0], coords.second[1], false);\n&#x27;
                           &#x27;                        // Save the ShortcutInfo &#x27;
                           &#x27;for binding in the workspace\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;addedShortcutsFinal.add(shortcutInfo);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                // Update the workspace screens\n&#x27;
                           &#x27;                &#x27;
                           &#x27;updateWorkspaceScreenOrder(context, &#x27;
                           &#x27;workspaceScreens);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                if &#x27;
                           &#x27;(!addedShortcutsFinal.isEmpty()) {\n&#x27;
                           &#x27;                    runOnMainThread(new Runnable() &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                        public void run() {\n&#x27;
                           &#x27;                            Callbacks cb = &#x27;
                           &#x27;mCallbacks != null ? mCallbacks.get() : null;\n&#x27;
                           &#x27;                            if (callbacks == cb &amp;&amp; &#x27;
                           &#x27;cb != null) {\n&#x27;
                           &#x27;                                final &#x27;
                           &#x27;ArrayList&lt;ItemInfo&gt; addAnimated = new &#x27;
                           &#x27;ArrayList&lt;ItemInfo&gt;();\n&#x27;
                           &#x27;                                final &#x27;
                           &#x27;ArrayList&lt;ItemInfo&gt; addNotAnimated = new &#x27;
                           &#x27;ArrayList&lt;ItemInfo&gt;();\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(!addedShortcutsFinal.isEmpty()) {\n&#x27;
                           &#x27;                                    ItemInfo info &#x27;
                           &#x27;= &#x27;
                           &#x27;addedShortcutsFinal.get(addedShortcutsFinal.size() &#x27;
                           &#x27;- 1);\n&#x27;
                           &#x27;                                    long &#x27;
                           &#x27;lastScreenId = info.screenId;\n&#x27;
                           &#x27;                                    for (ItemInfo &#x27;
                           &#x27;i : addedShortcutsFinal) {\n&#x27;
                           &#x27;                                        if &#x27;
                           &#x27;(i.screenId == lastScreenId) {\n&#x27;
                           &#x27;                                            &#x27;
                           &#x27;addAnimated.add(i);\n&#x27;
                           &#x27;                                        } else {\n&#x27;
                           &#x27;                                            &#x27;
                           &#x27;addNotAnimated.add(i);\n&#x27;
                           &#x27;                                        }\n&#x27;
                           &#x27;                                    }\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;callbacks.bindAppsAdded(addedWorkspaceScreensFinal,\n&#x27;
                           &#x27;                                        &#x27;
                           &#x27;addNotAnimated, addAnimated, null);\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(!restoredAppsFinal.isEmpty()) {\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;callbacks.bindAppsUpdated(restoredAppsFinal);\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                            }\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;                    });\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        runOnWorkerThread(r);\n&#x27;
                           &#x27;    }\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;jfstmerge&#x27;}}],
 [{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;    public void addAndBindAddedApps(final Context &#x27;
                         &#x27;context, final ArrayList&lt;ItemInfo&gt; workspaceApps,\n&#x27;
                         &#x27;                                    final &#x27;
                         &#x27;ArrayList&lt;AppInfo&gt; allAppsApps) {\n&#x27;
                         &#x27;        Callbacks cb = mCallbacks != null ? &#x27;
                         &#x27;mCallbacks.get() : null;\n&#x27;
                         &#x27;        addAndBindAddedApps(context, workspaceApps, &#x27;
                         &#x27;cb, allAppsApps);\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;    public void addAppsToAllApps(final Context &#x27;
                           &#x27;ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {\n&#x27;
                           &#x27;        final Callbacks callbacks = mCallbacks != &#x27;
                           &#x27;null ? mCallbacks.get() : null;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        if (allAppsApps == null) {\n&#x27;
                           &#x27;            throw new &#x27;
                           &#x27;RuntimeException(&quot;allAppsApps must not be null&quot;);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        if (allAppsApps.isEmpty()) {\n&#x27;
                           &#x27;            return;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        final ArrayList&lt;AppInfo&gt; restoredAppsFinal &#x27;
                           &#x27;= new ArrayList&lt;AppInfo&gt;();\n&#x27;
                           &#x27;        Iterator&lt;AppInfo&gt; iter = &#x27;
                           &#x27;allAppsApps.iterator();\n&#x27;
                           &#x27;        while (iter.hasNext()) {\n&#x27;
                           &#x27;            ItemInfo a = iter.next();\n&#x27;
                           &#x27;            if (LauncherModel.appWasRestored(ctx, &#x27;
                           &#x27;a.getIntent())) {\n&#x27;
                           &#x27;                restoredAppsFinal.add((AppInfo) &#x27;
                           &#x27;a);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Process the newly added applications &#x27;
                           &#x27;and add them to the database first\n&#x27;
                           &#x27;        Runnable r = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                runOnMainThread(new Runnable() {\n&#x27;
                           &#x27;                    public void run() {\n&#x27;
                           &#x27;                        Callbacks cb = mCallbacks &#x27;
                           &#x27;!= null ? mCallbacks.get() : null;\n&#x27;
                           &#x27;                        if (callbacks == cb &amp;&amp; cb &#x27;
                           &#x27;!= null) {\n&#x27;
                           &#x27;                            &#x27;
                           &#x27;callbacks.bindAppsAdded(null, null, null, &#x27;
                           &#x27;allAppsApps);\n&#x27;
                           &#x27;                            if &#x27;
                           &#x27;(!restoredAppsFinal.isEmpty()) {\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;callbacks.bindAppsUpdated(restoredAppsFinal);\n&#x27;
                           &#x27;                            }\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                });\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        runOnWorkerThread(r);\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;                                        &#x27;
                         &#x27;addNotAnimated, addAnimated, allAppsApps);\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;                                        &#x27;
                           &#x27;addNotAnimated, addAnimated, null);\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(!restoredAppsFinal.isEmpty()) {\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;callbacks.bindAppsUpdated(restoredAppsFinal);\n&#x27;
                           &#x27;                                }\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;public void addAppsToAllApps(final Context ctx, &#x27;
                           &#x27;final ArrayList&lt;AppInfo&gt; allAppsApps) {\n&#x27;
                           &#x27;        final Callbacks callbacks = mCallbacks != &#x27;
                           &#x27;null ? mCallbacks.get() : null;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        if (allAppsApps == null) {\n&#x27;
                           &#x27;            throw new &#x27;
                           &#x27;RuntimeException(&quot;allAppsApps must not be null&quot;);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        if (allAppsApps.isEmpty()) {\n&#x27;
                           &#x27;            return;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        final ArrayList&lt;AppInfo&gt; restoredAppsFinal &#x27;
                           &#x27;= new ArrayList&lt;AppInfo&gt;();\n&#x27;
                           &#x27;        Iterator&lt;AppInfo&gt; iter = &#x27;
                           &#x27;allAppsApps.iterator();\n&#x27;
                           &#x27;        while (iter.hasNext()) {\n&#x27;
                           &#x27;            ItemInfo a = iter.next();\n&#x27;
                           &#x27;            if (LauncherModel.appWasRestored(ctx, &#x27;
                           &#x27;a.getIntent())) {\n&#x27;
                           &#x27;                restoredAppsFinal.add((AppInfo) &#x27;
                           &#x27;a);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Process the newly added applications &#x27;
                           &#x27;and add them to the database first\n&#x27;
                           &#x27;        Runnable r = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                runOnMainThread(new Runnable() {\n&#x27;
                           &#x27;                    public void run() {\n&#x27;
                           &#x27;                        Callbacks cb = mCallbacks &#x27;
                           &#x27;!= null ? mCallbacks.get() : null;\n&#x27;
                           &#x27;                        if (callbacks == cb &amp;&amp; cb &#x27;
                           &#x27;!= null) {\n&#x27;
                           &#x27;                            &#x27;
                           &#x27;callbacks.bindAppsAdded(null, null, null, &#x27;
                           &#x27;allAppsApps);\n&#x27;
                           &#x27;                            if &#x27;
                           &#x27;(!restoredAppsFinal.isEmpty()) {\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;callbacks.bindAppsUpdated(restoredAppsFinal);\n&#x27;
                           &#x27;                            }\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                });\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        runOnWorkerThread(r);\n&#x27;
                           &#x27;    }\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;jfstmerge&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;public void addAndBindAddedWorkspaceApps(final &#x27;
                           &#x27;Context context,\n&#x27;
                           &#x27;            final ArrayList&lt;ItemInfo&gt; &#x27;
                           &#x27;workspaceApps) {\n&#x27;
                           &#x27;        final Callbacks callbacks = mCallbacks != &#x27;
                           &#x27;null ? mCallbacks.get() : null;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        if (workspaceApps == null) {\n&#x27;
                           &#x27;            throw new &#x27;
                           &#x27;RuntimeException(&quot;workspaceApps and allAppsApps &#x27;
                           &#x27;must not be null&quot;);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        if (workspaceApps.isEmpty()) {\n&#x27;
                           &#x27;            return;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        // Process the newly added applications &#x27;
                           &#x27;and add them to the database first\n&#x27;
                           &#x27;        Runnable r = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                final ArrayList&lt;ItemInfo&gt; &#x27;
                           &#x27;addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();\n&#x27;
                           &#x27;                final ArrayList&lt;Long&gt; &#x27;
                           &#x27;addedWorkspaceScreensFinal = new &#x27;
                           &#x27;ArrayList&lt;Long&gt;();\n&#x27;
                           &#x27;                final ArrayList&lt;AppInfo&gt; &#x27;
                           &#x27;restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                // Get the list of workspace &#x27;
                           &#x27;screens.  We need to append to this list and\n&#x27;
                           &#x27;                // can not use sBgWorkspaceScreens &#x27;
                           &#x27;because loadWorkspace() may not have been\n&#x27;
                           &#x27;                // called.\n&#x27;
                           &#x27;                ArrayList&lt;Long&gt; workspaceScreens = &#x27;
                           &#x27;new ArrayList&lt;Long&gt;();\n&#x27;
                           &#x27;                TreeMap&lt;Integer, Long&gt; &#x27;
                           &#x27;orderedScreens = loadWorkspaceScreensDb(context);\n&#x27;
                           &#x27;                for (Integer i : &#x27;
                           &#x27;orderedScreens.keySet()) {\n&#x27;
                           &#x27;                    long screenId = &#x27;
                           &#x27;orderedScreens.get(i);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;workspaceScreens.add(screenId);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                synchronized(sBgLock) {\n&#x27;
                           &#x27;                    Iterator&lt;ItemInfo&gt; iter = &#x27;
                           &#x27;workspaceApps.iterator();\n&#x27;
                           &#x27;                    while (iter.hasNext()) {\n&#x27;
                           &#x27;                        ItemInfo a = iter.next();\n&#x27;
                           &#x27;                        final String name = &#x27;
                           &#x27;a.title.toString();\n&#x27;
                           &#x27;                        final Intent launchIntent &#x27;
                           &#x27;= a.getIntent();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                        // Short-circuit this &#x27;
                           &#x27;logic if the icon exists somewhere on the &#x27;
                           &#x27;workspace\n&#x27;
                           &#x27;                        if &#x27;
                           &#x27;(LauncherModel.shortcutExists(context, name, &#x27;
                           &#x27;launchIntent)) {\n&#x27;
                           &#x27;                            // Only &#x27;
                           &#x27;InstallShortcutReceiver sends us shortcutInfos, &#x27;
                           &#x27;ignore them\n&#x27;
                           &#x27;                            if (a instanceof &#x27;
                           &#x27;AppInfo &amp;&amp;\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;LauncherModel.appWasRestored(context, &#x27;
                           &#x27;launchIntent)) {\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;restoredAppsFinal.add((AppInfo) a);\n&#x27;
                           &#x27;                            }\n&#x27;
                           &#x27;                            continue;\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                        // Add this icon to the &#x27;
                           &#x27;db, creating a new page if necessary.  If there\n&#x27;
                           &#x27;                        // is only the empty page &#x27;
                           &#x27;then we just add items to the first page.\n&#x27;
                           &#x27;                        // Otherwise, we add them &#x27;
                           &#x27;to the next pages.\n&#x27;
                           &#x27;                        int startSearchPageIndex = &#x27;
                           &#x27;workspaceScreens.isEmpty() ? 0 : 1;\n&#x27;
                           &#x27;                        Pair&lt;Long, int[]&gt; coords = &#x27;
                           &#x27;LauncherModel.findNextAvailableIconSpace(context,\n&#x27;
                           &#x27;                                name, &#x27;
                           &#x27;launchIntent, startSearchPageIndex, &#x27;
                           &#x27;workspaceScreens);\n&#x27;
                           &#x27;                        if (coords == null) {\n&#x27;
                           &#x27;                            LauncherProvider lp = &#x27;
                           &#x27;LauncherAppState.getLauncherProvider();\n&#x27;
                           &#x27;\n&#x27;
                           &quot;                            // If we can&#x27;t find a &quot;
                           &#x27;valid position, then just add a new screen.\n&#x27;
                           &#x27;                            // This takes time so &#x27;
                           &#x27;we need to re-queue the add until the new\n&#x27;
                           &#x27;                            // page is added.  &#x27;
                           &#x27;Create as many screens as necessary to satisfy\n&#x27;
                           &#x27;                            // the &#x27;
                           &#x27;startSearchPageIndex.\n&#x27;
                           &#x27;                            int numPagesToAdd = &#x27;
                           &#x27;Math.max(1, startSearchPageIndex + 1 -\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;workspaceScreens.size());\n&#x27;
                           &#x27;                            while (numPagesToAdd &gt; &#x27;
                           &#x27;0) {\n&#x27;
                           &#x27;                                long screenId = &#x27;
                           &#x27;lp.generateNewScreenId();\n&#x27;
                           &#x27;                                // Save the screen &#x27;
                           &#x27;id for binding in the workspace\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;workspaceScreens.add(screenId);\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;addedWorkspaceScreensFinal.add(screenId);\n&#x27;
                           &#x27;                                numPagesToAdd--;\n&#x27;
                           &#x27;                            }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                            // Find the coordinate &#x27;
                           &#x27;again\n&#x27;
                           &#x27;                            coords = &#x27;
                           &#x27;LauncherModel.findNextAvailableIconSpace(context,\n&#x27;
                           &#x27;                                    name, &#x27;
                           &#x27;launchIntent, startSearchPageIndex, &#x27;
                           &#x27;workspaceScreens);\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;                        if (coords == null) {\n&#x27;
                           &#x27;                            throw new &#x27;
                           &#x27;RuntimeException(&quot;Coordinates should not be &#x27;
                           &#x27;null&quot;);\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                        ShortcutInfo &#x27;
                           &#x27;shortcutInfo;\n&#x27;
                           &#x27;                        if (a instanceof &#x27;
                           &#x27;ShortcutInfo) {\n&#x27;
                           &#x27;                            shortcutInfo = &#x27;
                           &#x27;(ShortcutInfo) a;\n&#x27;
                           &#x27;                        } else if (a instanceof &#x27;
                           &#x27;AppInfo) {\n&#x27;
                           &#x27;                            shortcutInfo = &#x27;
                           &#x27;((AppInfo) a).makeShortcut();\n&#x27;
                           &#x27;                        } else {\n&#x27;
                           &#x27;                            throw new &#x27;
                           &#x27;RuntimeException(&quot;Unexpected info type&quot;);\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                        // Add the shortcut to the &#x27;
                           &#x27;db\n&#x27;
                           &#x27;                        addItemToDatabase(context, &#x27;
                           &#x27;shortcutInfo,\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;LauncherSettings.Favorites.CONTAINER_DESKTOP,\n&#x27;
                           &#x27;                                coords.first, &#x27;
                           &#x27;coords.second[0], coords.second[1], false);\n&#x27;
                           &#x27;                        // Save the ShortcutInfo &#x27;
                           &#x27;for binding in the workspace\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;addedShortcutsFinal.add(shortcutInfo);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                // Update the workspace screens\n&#x27;
                           &#x27;                &#x27;
                           &#x27;updateWorkspaceScreenOrder(context, &#x27;
                           &#x27;workspaceScreens);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;                if &#x27;
                           &#x27;(!addedShortcutsFinal.isEmpty()) {\n&#x27;
                           &#x27;                    runOnMainThread(new Runnable() &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                        public void run() {\n&#x27;
                           &#x27;                            Callbacks cb = &#x27;
                           &#x27;mCallbacks != null ? mCallbacks.get() : null;\n&#x27;
                           &#x27;                            if (callbacks == cb &amp;&amp; &#x27;
                           &#x27;cb != null) {\n&#x27;
                           &#x27;                                final &#x27;
                           &#x27;ArrayList&lt;ItemInfo&gt; addAnimated = new &#x27;
                           &#x27;ArrayList&lt;ItemInfo&gt;();\n&#x27;
                           &#x27;                                final &#x27;
                           &#x27;ArrayList&lt;ItemInfo&gt; addNotAnimated = new &#x27;
                           &#x27;ArrayList&lt;ItemInfo&gt;();\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(!addedShortcutsFinal.isEmpty()) {\n&#x27;
                           &#x27;                                    ItemInfo info &#x27;
                           &#x27;= &#x27;
                           &#x27;addedShortcutsFinal.get(addedShortcutsFinal.size() &#x27;
                           &#x27;- 1);\n&#x27;
                           &#x27;                                    long &#x27;
                           &#x27;lastScreenId = info.screenId;\n&#x27;
                           &#x27;                                    for (ItemInfo &#x27;
                           &#x27;i : addedShortcutsFinal) {\n&#x27;
                           &#x27;                                        if &#x27;
                           &#x27;(i.screenId == lastScreenId) {\n&#x27;
                           &#x27;                                            &#x27;
                           &#x27;addAnimated.add(i);\n&#x27;
                           &#x27;                                        } else {\n&#x27;
                           &#x27;                                            &#x27;
                           &#x27;addNotAnimated.add(i);\n&#x27;
                           &#x27;                                        }\n&#x27;
                           &#x27;                                    }\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                                &#x27;
                           &#x27;callbacks.bindAppsAdded(addedWorkspaceScreensFinal,\n&#x27;
                           &#x27;                                        &#x27;
                           &#x27;addNotAnimated, addAnimated, null);\n&#x27;
                           &#x27;                                if &#x27;
                           &#x27;(!restoredAppsFinal.isEmpty()) {\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;callbacks.bindAppsUpdated(restoredAppsFinal);\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                            }\n&#x27;
                           &#x27;                        }\n&#x27;
                           &#x27;                    });\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        runOnWorkerThread(r);\n&#x27;
                           &#x27;    }\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;jfstmerge&#x27;}}]]</pre>
          </body>
        </html>
        