<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>535</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    535
                    <a href="534.html">prev</a>
                    <a href="536.html">next</a>
                    <a href="535_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Freeyourgadget/Gadgetbridge_5ab075b373de62574ff88d018d7db07596365617_app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/DeviceHelper.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;5ab075b373de62574ff88d018d7db07596365617:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/DeviceHelper.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;5ab075b373de62574ff88d018d7db07596365617^1:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/DeviceHelper.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;5ab075b373de62574ff88d018d7db07596365617^2:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/DeviceHelper.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;4060efeeca376a15a8bf5b40312ebf8908f2916c:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/util/DeviceHelper.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="-5200878630337924680" onmouseenter="enter('-5200878630337924680');" onmouseout="out('-5200878630337924680');" style="">   1 /*  Copyright (C) 2015-2018 0nse, Andreas Shimokawa, Carsten Pfeiffer,                                   </span>
<span class="3588757660813990934" onmouseenter="enter('3588757660813990934');" onmouseout="out('3588757660813990934');" style="">   2     Daniele Gobbetti, JoaÌƒo Paulo Barraca, Kranz, ladbsoft, maxirnilian,                                 </span>
<span class="-5208925406365664903" onmouseenter="enter('-5208925406365664903');" onmouseout="out('-5208925406365664903');" style="">   3     protomors, Quallenauge, Sami Alaoui, tiparega, Vadim Kaushan                                         </span>
<span  style="">   4                                                                                                          </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   5     This file is part of Gadgetbridge.                                                                   </span>
<span  style="">   6                                                                                                          </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   7     Gadgetbridge is free software: you can redistribute it and/or modify                                 </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   8     it under the terms of the GNU Affero General Public License as published                             </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   9     by the Free Software Foundation, either version 3 of the License, or                                 </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">  10     (at your option) any later version.                                                                  </span>
<span  style="">  11                                                                                                          </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  12     Gadgetbridge is distributed in the hope that it will be useful,                                      </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  13     but WITHOUT ANY WARRANTY; without even the implied warranty of                                       </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  14     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                        </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  15     GNU Affero General Public License for more details.                                                  </span>
<span  style="">  16                                                                                                          </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  17     You should have received a copy of the GNU Affero General Public License                             </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  18     along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                             </span>
<span class="-5427540757158912607" onmouseenter="enter('-5427540757158912607');" onmouseout="out('-5427540757158912607');" style="">  19 package nodomain.freeyourgadget.gadgetbridge.util;                                                       </span>
<span  style="">  20                                                                                                          </span>
<span class="-8028506601233233593" onmouseenter="enter('-8028506601233233593');" onmouseout="out('-8028506601233233593');" style="">  21 import android.bluetooth.BluetoothAdapter;                                                               </span>
<span class="2859895893394018468" onmouseenter="enter('2859895893394018468');" onmouseout="out('2859895893394018468');" style="">  22 import android.bluetooth.BluetoothDevice;                                                                </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  23 import android.content.Context;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  24 import android.widget.Toast;                                                                             </span>
<span  style="">  25                                                                                                          </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  26 import org.slf4j.Logger;                                                                                 </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  27 import org.slf4j.LoggerFactory;                                                                          </span>
<span  style="">  28                                                                                                          </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style="">  29 import java.lang.reflect.Method;                                                                         </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  30 import java.util.ArrayList;                                                                              </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  31 import java.util.Collections;                                                                            </span>
<span class="8609815663253459563" onmouseenter="enter('8609815663253459563');" onmouseout="out('8609815663253459563');" style="">  32 import java.util.LinkedHashSet;                                                                          </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  33 import java.util.List;                                                                                   </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  34 import java.util.Set;                                                                                    </span>
<span  style="">  35                                                                                                          </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  36 import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                               </span>
<span class="-1471644270559892265" onmouseenter="enter('-1471644270559892265');" onmouseout="out('-1471644270559892265');" style="">  37 import nodomain.freeyourgadget.gadgetbridge.GBException;                                                 </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  38 import nodomain.freeyourgadget.gadgetbridge.R;                                                           </span>
<span class="6679513218772020996" onmouseenter="enter('6679513218772020996');" onmouseout="out('6679513218772020996');" style="">  39 import nodomain.freeyourgadget.gadgetbridge.database.DBHandler;                                          </span>
<span class="4338650188295783318" onmouseenter="enter('4338650188295783318');" onmouseout="out('4338650188295783318');" style="">  40 import nodomain.freeyourgadget.gadgetbridge.database.DBHelper;                                           </span>
<span class="6852267181356803593" onmouseenter="enter('6852267181356803593');" onmouseout="out('6852267181356803593');" style="">  41 import nodomain.freeyourgadget.gadgetbridge.devices.DeviceCoordinator;                                   </span>
<span class="6706901399385249836" onmouseenter="enter('6706901399385249836');" onmouseout="out('6706901399385249836');" style="">  42 import nodomain.freeyourgadget.gadgetbridge.devices.UnknownDeviceCoordinator;                            </span>
<span class="-2946949855778130048" onmouseenter="enter('-2946949855778130048');" onmouseout="out('-2946949855778130048');" style="">  43 import nodomain.freeyourgadget.gadgetbridge.devices.casiogb6900.CasioGB6900DeviceCoordinator;            </span>
<span class="1831953906102313699" onmouseenter="enter('1831953906102313699');" onmouseout="out('1831953906102313699');" style="">  44 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.EXRIZUK8Coordinator;                           </span>
<span class="-4973236722115174269" onmouseenter="enter('-4973236722115174269');" onmouseout="out('-4973236722115174269');" style="">  45 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusCoordinator;                              </span>
<span class="9204923228813511004" onmouseenter="enter('9204923228813511004');" onmouseout="out('9204923228813511004');" style="">  46 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.MakibesF68Coordinator;                         </span>
<span class="3078186574701620561" onmouseenter="enter('3078186574701620561');" onmouseout="out('3078186574701620561');" style="">  47 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.Q8Coordinator;                                 </span>
<span class="7272678525497799472" onmouseenter="enter('7272678525497799472');" onmouseout="out('7272678525497799472');" style="">  48 import nodomain.freeyourgadget.gadgetbridge.devices.huami.amazfitbip.AmazfitBipCoordinator;              </span>
<span class="9054045240569218327" onmouseenter="enter('9054045240569218327');" onmouseout="out('9054045240569218327');" style="">  49 import nodomain.freeyourgadget.gadgetbridge.devices.huami.amazfitcor.AmazfitCorCoordinator;              </span>
<span class="3142529718171766552" onmouseenter="enter('3142529718171766552');" onmouseout="out('3142529718171766552');" style="">  50 import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband2.MiBand2Coordinator;                    </span>
<span class="-336757578436190430" onmouseenter="enter('-336757578436190430');" onmouseout="out('-336757578436190430');" style="">  51 import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband2.MiBand2HRXCoordinator;                 </span>
<span class="-4959563064822725763" onmouseenter="enter('-4959563064822725763');" onmouseout="out('-4959563064822725763');" style="">  52 import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband3.MiBand3Coordinator;                    </span>
<span class="-8257747607607390324" onmouseenter="enter('-8257747607607390324');" onmouseout="out('-8257747607607390324');" style="">  53 import nodomain.freeyourgadget.gadgetbridge.devices.id115.ID115Coordinator;                              </span>
<span class="-8097912228071563035" onmouseenter="enter('-8097912228071563035');" onmouseout="out('-8097912228071563035');" style="">  54 import nodomain.freeyourgadget.gadgetbridge.devices.jyou.TeclastH30Coordinator;                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  55 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="5408583638288829167" onmouseenter="enter('5408583638288829167');" onmouseout="out('5408583638288829167');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  56 import nodomain.freeyourgadget.gadgetbridge.devices.miscale2.MiScale2DeviceCoordinator;                  </span>
<span class="-8566867472430384418" onmouseenter="enter('-8566867472430384418');" onmouseout="out('-8566867472430384418');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  57 import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi1Coordinator;                           </span>
<span class="6916358320845634609" onmouseenter="enter('6916358320845634609');" onmouseout="out('6916358320845634609');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  58 import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi3Coordinator;                           </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  59 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-8097912228071563035" onmouseenter="enter('-8097912228071563035');" onmouseout="out('-8097912228071563035');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  60 import nodomain.freeyourgadget.gadgetbridge.devices.jyou.TeclastH30Coordinator;                          </span>
<span class="-8566867472430384418" onmouseenter="enter('-8566867472430384418');" onmouseout="out('-8566867472430384418');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  61 import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi1Coordinator;                           </span>
<span class="6916358320845634609" onmouseenter="enter('6916358320845634609');" onmouseout="out('6916358320845634609');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  62 import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi3Coordinator;                           </span>
<span class="-2735380447578037326" onmouseenter="enter('-2735380447578037326');" onmouseout="out('-2735380447578037326');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  63 import nodomain.freeyourgadget.gadgetbridge.devices.liveview.LiveviewCoordinator;                        </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  64 =======                                                                                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  65 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-2735380447578037326" onmouseenter="enter('-2735380447578037326');" onmouseout="out('-2735380447578037326');" style="">  66 import nodomain.freeyourgadget.gadgetbridge.devices.liveview.LiveviewCoordinator;                        </span>
<span class="7979044249022447808" onmouseenter="enter('7979044249022447808');" onmouseout="out('7979044249022447808');" style="">  67 import nodomain.freeyourgadget.gadgetbridge.devices.miband.MiBandConst;                                  </span>
<span class="-3275943466867468904" onmouseenter="enter('-3275943466867468904');" onmouseout="out('-3275943466867468904');" style="">  68 import nodomain.freeyourgadget.gadgetbridge.devices.miband.MiBandCoordinator;                            </span>
<span class="-7557474927703111213" onmouseenter="enter('-7557474927703111213');" onmouseout="out('-7557474927703111213');" style="">  69 import nodomain.freeyourgadget.gadgetbridge.devices.no1f1.No1F1Coordinator;                              </span>
<span class="181119070723040218" onmouseenter="enter('181119070723040218');" onmouseout="out('181119070723040218');" style="">  70 import nodomain.freeyourgadget.gadgetbridge.devices.pebble.PebbleCoordinator;                            </span>
<span class="-8566867472430384418" onmouseenter="enter('-8566867472430384418');" onmouseout="out('-8566867472430384418');" style="">  71 import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi1Coordinator;                           </span>
<span class="6916358320845634609" onmouseenter="enter('6916358320845634609');" onmouseout="out('6916358320845634609');" style="">  72 import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi3Coordinator;                           </span>
<span class="8078015553085849089" onmouseenter="enter('8078015553085849089');" onmouseout="out('8078015553085849089');" style="">  73 import nodomain.freeyourgadget.gadgetbridge.devices.vibratissimo.VibratissimoCoordinator;                </span>
<span class="1896763010744176890" onmouseenter="enter('1896763010744176890');" onmouseout="out('1896763010744176890');" style="">  74 import nodomain.freeyourgadget.gadgetbridge.devices.watch9.Watch9DeviceCoordinator;                      </span>
<span class="-6235753869290001827" onmouseenter="enter('-6235753869290001827');" onmouseout="out('-6235753869290001827');" style="">  75 import nodomain.freeyourgadget.gadgetbridge.devices.xwatch.XWatchCoordinator;                            </span>
<span class="-8964272158633129718" onmouseenter="enter('-8964272158633129718');" onmouseout="out('-8964272158633129718');" style="">  76 import nodomain.freeyourgadget.gadgetbridge.devices.zetime.ZeTimeCoordinator;                            </span>
<span class="4469307411224397441" onmouseenter="enter('4469307411224397441');" onmouseout="out('4469307411224397441');" style="">  77 import nodomain.freeyourgadget.gadgetbridge.entities.Device;                                             </span>
<span class="-3040591784778258047" onmouseenter="enter('-3040591784778258047');" onmouseout="out('-3040591784778258047');" style="">  78 import nodomain.freeyourgadget.gadgetbridge.entities.DeviceAttributes;                                   </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  79 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                               </span>
<span class="-1351120908834620909" onmouseenter="enter('-1351120908834620909');" onmouseout="out('-1351120908834620909');" style="">  80 import nodomain.freeyourgadget.gadgetbridge.impl.GBDeviceCandidate;                                      </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  81 import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                            </span>
<span  style="">  82                                                                                                          </span>
<span class="-7246281683414074276" onmouseenter="enter('-7246281683414074276');" onmouseout="out('-7246281683414074276');" style="">  83 public class DeviceHelper {                                                                              </span>
<span  style="">  84                                                                                                          </span>
<span class="-7179396888031157102" onmouseenter="enter('-7179396888031157102');" onmouseout="out('-7179396888031157102');" style="">  85     private static final Logger LOG = LoggerFactory.getLogger(DeviceHelper.class);                       </span>
<span  style="">  86                                                                                                          </span>
<span class="1809257599229613641" onmouseenter="enter('1809257599229613641');" onmouseout="out('1809257599229613641');" style="">  87     private static final DeviceHelper instance = new DeviceHelper();                                     </span>
<span  style="">  88                                                                                                          </span>
<span class="-2529270569084750615" onmouseenter="enter('-2529270569084750615');" onmouseout="out('-2529270569084750615');" style="">  89     public static DeviceHelper getInstance() {                                                           </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style="">  90         return instance;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91     }                                                                                                    </span>
<span  style="">  92                                                                                                          </span>
<span class="1477217874849666720" onmouseenter="enter('1477217874849666720');" onmouseout="out('1477217874849666720');" style="">  93     // lazily created                                                                                    </span>
<span class="-1712942286504952582" onmouseenter="enter('-1712942286504952582');" onmouseout="out('-1712942286504952582');" style="">  94     private List&lt;DeviceCoordinator&gt; coordinators;                                                        </span>
<span  style="">  95                                                                                                          </span>
<span class="311137942692300687" onmouseenter="enter('311137942692300687');" onmouseout="out('311137942692300687');" style="">  96     public DeviceType getSupportedType(GBDeviceCandidate candidate) {                                    </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style="">  97         for (DeviceCoordinator coordinator : getAllCoordinators()) {                                     </span>
<span class="-6820733209455168532" onmouseenter="enter('-6820733209455168532');" onmouseout="out('-6820733209455168532');" style="">  98             DeviceType deviceType = coordinator.getSupportedType(candidate);                             </span>
<span class="5988197616953595638" onmouseenter="enter('5988197616953595638');" onmouseout="out('5988197616953595638');" style="">  99             if (deviceType.isSupported()) {                                                              </span>
<span class="7940989030742339244" onmouseenter="enter('7940989030742339244');" onmouseout="out('7940989030742339244');" style=""> 100                 return deviceType;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 101             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 102         }                                                                                                </span>
<span class="2733059175620106263" onmouseenter="enter('2733059175620106263');" onmouseout="out('2733059175620106263');" style=""> 103         return DeviceType.UNKNOWN;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104     }                                                                                                    </span>
<span  style=""> 105                                                                                                          </span>
<span class="-262573812517796151" onmouseenter="enter('-262573812517796151');" onmouseout="out('-262573812517796151');" style=""> 106     public boolean getSupportedType(GBDevice device) {                                                   </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style=""> 107         for (DeviceCoordinator coordinator : getAllCoordinators()) {                                     </span>
<span class="5941075233090253090" onmouseenter="enter('5941075233090253090');" onmouseout="out('5941075233090253090');" style=""> 108             if (coordinator.supports(device)) {                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 109                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 112         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113     }                                                                                                    </span>
<span  style=""> 114                                                                                                          </span>
<span class="8714408707514425620" onmouseenter="enter('8714408707514425620');" onmouseout="out('8714408707514425620');" style=""> 115     public GBDevice findAvailableDevice(String deviceAddress, Context context) {                         </span>
<span class="6902685203421244703" onmouseenter="enter('6902685203421244703');" onmouseout="out('6902685203421244703');" style=""> 116         Set&lt;GBDevice&gt; availableDevices = getAvailableDevices(context);                                   </span>
<span class="-2018824320601815207" onmouseenter="enter('-2018824320601815207');" onmouseout="out('-2018824320601815207');" style=""> 117         for (GBDevice availableDevice : availableDevices) {                                              </span>
<span class="4097611337760018422" onmouseenter="enter('4097611337760018422');" onmouseout="out('4097611337760018422');" style=""> 118             if (deviceAddress.equals(availableDevice.getAddress())) {                                    </span>
<span class="-4049705911540768690" onmouseenter="enter('-4049705911540768690');" onmouseout="out('-4049705911540768690');" style=""> 119                 return availableDevice;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 122         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123     }                                                                                                    </span>
<span  style=""> 124                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 125     /**                                                                                                  </span>
<span class="8378781591414513441" onmouseenter="enter('8378781591414513441');" onmouseout="out('8378781591414513441');" style=""> 126      * Returns the list of all available devices that are supported by Gadgetbridge.                     </span>
<span class="2803654733430477892" onmouseenter="enter('2803654733430477892');" onmouseout="out('2803654733430477892');" style=""> 127      * Note that no state is known about the returned devices. Even if one of those                      </span>
<span class="2191300811029215791" onmouseenter="enter('2191300811029215791');" onmouseout="out('2191300811029215791');" style=""> 128      * devices is connected, it will report the default not-connected state.                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 129      *                                                                                                   </span>
<span class="5072949809304800738" onmouseenter="enter('5072949809304800738');" onmouseout="out('5072949809304800738');" style=""> 130      * Clients interested in the &quot;live&quot; devices being managed should use the class                       </span>
<span class="-803398468380583905" onmouseenter="enter('-803398468380583905');" onmouseout="out('-803398468380583905');" style=""> 131      * DeviceManager.                                                                                    </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style=""> 132      * @param context                                                                                    </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 133      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 134      */                                                                                                  </span>
<span class="8379590169787447751" onmouseenter="enter('8379590169787447751');" onmouseout="out('8379590169787447751');" style=""> 135     public Set&lt;GBDevice&gt; getAvailableDevices(Context context) {                                          </span>
<span class="-8531133286137168432" onmouseenter="enter('-8531133286137168432');" onmouseout="out('-8531133286137168432');" style=""> 136         BluetoothAdapter btAdapter = BluetoothAdapter.getDefaultAdapter();                               </span>
<span  style=""> 137                                                                                                          </span>
<span class="6162896112907059694" onmouseenter="enter('6162896112907059694');" onmouseout="out('6162896112907059694');" style=""> 138         Set&lt;GBDevice&gt; availableDevices = new LinkedHashSet&lt;GBDevice&gt;();                                  </span>
<span  style=""> 139                                                                                                          </span>
<span class="6119012127556406196" onmouseenter="enter('6119012127556406196');" onmouseout="out('6119012127556406196');" style=""> 140         if (btAdapter == null) {                                                                         </span>
<span class="-8992361903677634121" onmouseenter="enter('-8992361903677634121');" onmouseout="out('-8992361903677634121');" style=""><abbr title=" 141             GB.toast(context, context.getString(R.string.bluetooth_is_not_supported_), Toast.LENGTH_SHORT, GB.WARN);"> 141             GB.toast(context, context.getString(R.string.bluetooth_is_not_supported_), Toast.LENGTH_SHORTðŸ”µ</abbr></span>
<span class="7082490255995433787" onmouseenter="enter('7082490255995433787');" onmouseout="out('7082490255995433787');" style=""> 142         } else if (!btAdapter.isEnabled()) {                                                             </span>
<span class="6363457106270493050" onmouseenter="enter('6363457106270493050');" onmouseout="out('6363457106270493050');" style=""><abbr title=" 143             GB.toast(context, context.getString(R.string.bluetooth_is_disabled_), Toast.LENGTH_SHORT, GB.WARN);"> 143             GB.toast(context, context.getString(R.string.bluetooth_is_disabled_), Toast.LENGTH_SHORT, GB.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144         }                                                                                                </span>
<span class="-3377224776558714047" onmouseenter="enter('-3377224776558714047');" onmouseout="out('-3377224776558714047');" style=""> 145         List&lt;GBDevice&gt; dbDevices = getDatabaseDevices();                                                 </span>
<span class="-6353595300668739192" onmouseenter="enter('-6353595300668739192');" onmouseout="out('-6353595300668739192');" style=""> 146         availableDevices.addAll(dbDevices);                                                              </span>
<span  style=""> 147                                                                                                          </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 148         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="-6735964885073070564" onmouseenter="enter('-6735964885073070564');" onmouseout="out('-6735964885073070564');" style=""> 149         String miAddr = prefs.getString(MiBandConst.PREF_MIBAND_ADDRESS, &quot;&quot;);                            </span>
<span class="-8301264850737854302" onmouseenter="enter('-8301264850737854302');" onmouseout="out('-8301264850737854302');" style=""> 150         if (miAddr.length() &gt; 0) {                                                                       </span>
<span class="-1526992099316589239" onmouseenter="enter('-1526992099316589239');" onmouseout="out('-1526992099316589239');" style=""> 151             GBDevice miDevice = new GBDevice(miAddr, &quot;MI&quot;, DeviceType.MIBAND);                           </span>
<span class="-7870407245378512448" onmouseenter="enter('-7870407245378512448');" onmouseout="out('-7870407245378512448');" style=""> 152             availableDevices.add(miDevice);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153         }                                                                                                </span>
<span  style=""> 154                                                                                                          </span>
<span class="7681435883288593574" onmouseenter="enter('7681435883288593574');" onmouseout="out('7681435883288593574');" style=""> 155         String pebbleEmuAddr = prefs.getString(&quot;pebble_emu_addr&quot;, &quot;&quot;);                                   </span>
<span class="-1326069915361848697" onmouseenter="enter('-1326069915361848697');" onmouseout="out('-1326069915361848697');" style=""> 156         String pebbleEmuPort = prefs.getString(&quot;pebble_emu_port&quot;, &quot;&quot;);                                   </span>
<span class="-3516508780907274278" onmouseenter="enter('-3516508780907274278');" onmouseout="out('-3516508780907274278');" style=""> 157         if (pebbleEmuAddr.length() &gt;= 7 &amp;&amp; pebbleEmuPort.length() &gt; 0) {                                 </span>
<span class="-6361666938108258288" onmouseenter="enter('-6361666938108258288');" onmouseout="out('-6361666938108258288');" style=""><abbr title=" 158             GBDevice pebbleEmuDevice = new GBDevice(pebbleEmuAddr + &quot;:&quot; + pebbleEmuPort, &quot;Pebble qemu&quot;, DeviceType.PEBBLE);"> 158             GBDevice pebbleEmuDevice = new GBDevice(pebbleEmuAddr + &quot;:&quot; + pebbleEmuPort, &quot;Pebble qemu&quot;, DðŸ”µ</abbr></span>
<span class="6982341110438288246" onmouseenter="enter('6982341110438288246');" onmouseout="out('6982341110438288246');" style=""> 159             availableDevices.add(pebbleEmuDevice);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160         }                                                                                                </span>
<span class="-6314022782668503707" onmouseenter="enter('-6314022782668503707');" onmouseout="out('-6314022782668503707');" style=""> 161         return availableDevices;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162     }                                                                                                    </span>
<span  style=""> 163                                                                                                          </span>
<span class="5388093685262108156" onmouseenter="enter('5388093685262108156');" onmouseout="out('5388093685262108156');" style=""> 164     public GBDevice toSupportedDevice(BluetoothDevice device) {                                          </span>
<span class="8849584801955056895" onmouseenter="enter('8849584801955056895');" onmouseout="out('8849584801955056895');" style=""><abbr title=" 165         GBDeviceCandidate candidate = new GBDeviceCandidate(device, GBDevice.RSSI_UNKNOWN, device.getUuids());"> 165         GBDeviceCandidate candidate = new GBDeviceCandidate(device, GBDevice.RSSI_UNKNOWN, device.getUuidðŸ”µ</abbr></span>
<span class="-318413986788990089" onmouseenter="enter('-318413986788990089');" onmouseout="out('-318413986788990089');" style=""> 166         return toSupportedDevice(candidate);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167     }                                                                                                    </span>
<span  style=""> 168                                                                                                          </span>
<span class="-4051355324352763386" onmouseenter="enter('-4051355324352763386');" onmouseout="out('-4051355324352763386');" style=""> 169     public GBDevice toSupportedDevice(GBDeviceCandidate candidate) {                                     </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style=""> 170         for (DeviceCoordinator coordinator : getAllCoordinators()) {                                     </span>
<span class="7746899366251330745" onmouseenter="enter('7746899366251330745');" onmouseout="out('7746899366251330745');" style=""> 171             if (coordinator.supports(candidate)) {                                                       </span>
<span class="-7778797991172760546" onmouseenter="enter('-7778797991172760546');" onmouseout="out('-7778797991172760546');" style=""> 172                 return coordinator.createDevice(candidate);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 175         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176     }                                                                                                    </span>
<span  style=""> 177                                                                                                          </span>
<span class="-5651035503093566961" onmouseenter="enter('-5651035503093566961');" onmouseout="out('-5651035503093566961');" style=""> 178     public DeviceCoordinator getCoordinator(GBDeviceCandidate device) {                                  </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 179         synchronized (this) {                                                                            </span>
<span class="5581566123633040849" onmouseenter="enter('5581566123633040849');" onmouseout="out('5581566123633040849');" style=""> 180             for (DeviceCoordinator coord : getAllCoordinators()) {                                       </span>
<span class="-456707873662890645" onmouseenter="enter('-456707873662890645');" onmouseout="out('-456707873662890645');" style=""> 181                 if (coord.supports(device)) {                                                            </span>
<span class="-7554628627552477108" onmouseenter="enter('-7554628627552477108');" onmouseout="out('-7554628627552477108');" style=""> 182                     return coord;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185         }                                                                                                </span>
<span class="-8562800692924603282" onmouseenter="enter('-8562800692924603282');" onmouseout="out('-8562800692924603282');" style=""> 186         return new UnknownDeviceCoordinator();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187     }                                                                                                    </span>
<span  style=""> 188                                                                                                          </span>
<span class="2088636936691911169" onmouseenter="enter('2088636936691911169');" onmouseout="out('2088636936691911169');" style=""> 189     public DeviceCoordinator getCoordinator(GBDevice device) {                                           </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 190         synchronized (this) {                                                                            </span>
<span class="5581566123633040849" onmouseenter="enter('5581566123633040849');" onmouseout="out('5581566123633040849');" style=""> 191             for (DeviceCoordinator coord : getAllCoordinators()) {                                       </span>
<span class="-456707873662890645" onmouseenter="enter('-456707873662890645');" onmouseout="out('-456707873662890645');" style=""> 192                 if (coord.supports(device)) {                                                            </span>
<span class="-7554628627552477108" onmouseenter="enter('-7554628627552477108');" onmouseout="out('-7554628627552477108');" style=""> 193                     return coord;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 194                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196         }                                                                                                </span>
<span class="-8562800692924603282" onmouseenter="enter('-8562800692924603282');" onmouseout="out('-8562800692924603282');" style=""> 197         return new UnknownDeviceCoordinator();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198     }                                                                                                    </span>
<span  style=""> 199                                                                                                          </span>
<span class="610514956454116910" onmouseenter="enter('610514956454116910');" onmouseout="out('610514956454116910');" style=""> 200     public synchronized List&lt;DeviceCoordinator&gt; getAllCoordinators() {                                   </span>
<span class="-5653167495443109834" onmouseenter="enter('-5653167495443109834');" onmouseout="out('-5653167495443109834');" style=""> 201         if (coordinators == null) {                                                                      </span>
<span class="6535460489050040084" onmouseenter="enter('6535460489050040084');" onmouseout="out('6535460489050040084');" style=""> 202             coordinators = createCoordinators();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203         }                                                                                                </span>
<span class="7608420427240005700" onmouseenter="enter('7608420427240005700');" onmouseout="out('7608420427240005700');" style=""> 204         return coordinators;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205     }                                                                                                    </span>
<span  style=""> 206                                                                                                          </span>
<span class="5367250377489878658" onmouseenter="enter('5367250377489878658');" onmouseout="out('5367250377489878658');" style=""> 207     private List&lt;DeviceCoordinator&gt; createCoordinators() {                                               </span>
<span class="-8659885373666106675" onmouseenter="enter('-8659885373666106675');" onmouseout="out('-8659885373666106675');" style=""> 208         List&lt;DeviceCoordinator&gt; result = new ArrayList&lt;&gt;();                                              </span>
<span class="7179280396014719844" onmouseenter="enter('7179280396014719844');" onmouseout="out('7179280396014719844');" style=""><abbr title=" 209         result.add(new MiScale2DeviceCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm"> 209         result.add(new MiScale2DeviceCoordinator()); // Note: must come before MiBand2 because detection ðŸ”µ</abbr></span>
<span class="3669774305908054055" onmouseenter="enter('3669774305908054055');" onmouseout="out('3669774305908054055');" style=""><abbr title=" 210         result.add(new AmazfitBipCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm"> 210         result.add(new AmazfitBipCoordinator()); // Note: must come before MiBand2 because detection is hðŸ”µ</abbr></span>
<span class="-7117613783968222510" onmouseenter="enter('-7117613783968222510');" onmouseout="out('-7117613783968222510');" style=""><abbr title=" 211         result.add(new AmazfitCorCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm"> 211         result.add(new AmazfitCorCoordinator()); // Note: must come before MiBand2 because detection is hðŸ”µ</abbr></span>
<span class="-1078845644300418098" onmouseenter="enter('-1078845644300418098');" onmouseout="out('-1078845644300418098');" style=""><abbr title=" 212         result.add(new MiBand3Coordinator());  // Note: must come before MiBand2 because detection is hacky, atm"> 212         result.add(new MiBand3Coordinator());  // Note: must come before MiBand2 because detection is hacðŸ”µ</abbr></span>
<span class="-5997211381002485660" onmouseenter="enter('-5997211381002485660');" onmouseout="out('-5997211381002485660');" style=""><abbr title=" 213         result.add(new MiBand2HRXCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm"> 213         result.add(new MiBand2HRXCoordinator()); // Note: must come before MiBand2 because detection is hðŸ”µ</abbr></span>
<span class="4970251816251507839" onmouseenter="enter('4970251816251507839');" onmouseout="out('4970251816251507839');" style=""><abbr title=" 214         result.add(new MiBand2Coordinator()); // Note: MiBand2 must come before MiBand because detection is hacky, atm"> 214         result.add(new MiBand2Coordinator()); // Note: MiBand2 must come before MiBand because detection ðŸ”µ</abbr></span>
<span class="-5481576563447422020" onmouseenter="enter('-5481576563447422020');" onmouseout="out('-5481576563447422020');" style=""> 215         result.add(new MiBandCoordinator());                                                             </span>
<span class="6190871288444688318" onmouseenter="enter('6190871288444688318');" onmouseout="out('6190871288444688318');" style=""> 216         result.add(new PebbleCoordinator());                                                             </span>
<span class="6793070632976028692" onmouseenter="enter('6793070632976028692');" onmouseout="out('6793070632976028692');" style=""> 217         result.add(new VibratissimoCoordinator());                                                       </span>
<span class="5131269263148398875" onmouseenter="enter('5131269263148398875');" onmouseout="out('5131269263148398875');" style=""> 218         result.add(new LiveviewCoordinator());                                                           </span>
<span class="1595212057085836033" onmouseenter="enter('1595212057085836033');" onmouseout="out('1595212057085836033');" style=""> 219         result.add(new HPlusCoordinator());                                                              </span>
<span class="3332735665937364473" onmouseenter="enter('3332735665937364473');" onmouseout="out('3332735665937364473');" style=""> 220         result.add(new No1F1Coordinator());                                                              </span>
<span class="3699860687323138670" onmouseenter="enter('3699860687323138670');" onmouseout="out('3699860687323138670');" style=""> 221         result.add(new MakibesF68Coordinator());                                                         </span>
<span class="-5481362583103427017" onmouseenter="enter('-5481362583103427017');" onmouseout="out('-5481362583103427017');" style=""> 222         result.add(new Q8Coordinator());                                                                 </span>
<span class="8067903992183633568" onmouseenter="enter('8067903992183633568');" onmouseout="out('8067903992183633568');" style=""> 223         result.add(new EXRIZUK8Coordinator());                                                           </span>
<span class="-6898555743395836902" onmouseenter="enter('-6898555743395836902');" onmouseout="out('-6898555743395836902');" style=""> 224         result.add(new TeclastH30Coordinator());                                                         </span>
<span class="-5904825641300533735" onmouseenter="enter('-5904825641300533735');" onmouseout="out('-5904825641300533735');" style=""> 225         result.add(new XWatchCoordinator());                                                             </span>
<span class="-1342788656175506629" onmouseenter="enter('-1342788656175506629');" onmouseout="out('-1342788656175506629');" style=""> 226         result.add(new ZeTimeCoordinator());                                                             </span>
<span class="-5172501225405919533" onmouseenter="enter('-5172501225405919533');" onmouseout="out('-5172501225405919533');" style=""> 227         result.add(new ID115Coordinator());                                                              </span>
<span class="-5671094850717710707" onmouseenter="enter('-5671094850717710707');" onmouseout="out('-5671094850717710707');" style=""> 228         result.add(new Watch9DeviceCoordinator());                                                       </span>
<span class="9072674293611744445" onmouseenter="enter('9072674293611744445');" onmouseout="out('9072674293611744445');" style=""> 229         result.add(new Roidmi1Coordinator());                                                            </span>
<span class="-9202027692962819030" onmouseenter="enter('-9202027692962819030');" onmouseout="out('-9202027692962819030');" style=""> 230         result.add(new Roidmi3Coordinator());                                                            </span>
<span class="-3417192720312420869" onmouseenter="enter('-3417192720312420869');" onmouseout="out('-3417192720312420869');" style=""> 231         result.add(new CasioGB6900DeviceCoordinator());                                                  </span>
<span  style=""> 232                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 233         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234     }                                                                                                    </span>
<span  style=""> 235                                                                                                          </span>
<span class="3182429837156194527" onmouseenter="enter('3182429837156194527');" onmouseout="out('3182429837156194527');" style=""> 236     private List&lt;GBDevice&gt; getDatabaseDevices() {                                                        </span>
<span class="840115391726385579" onmouseenter="enter('840115391726385579');" onmouseout="out('840115391726385579');" style=""> 237         List&lt;GBDevice&gt; result = new ArrayList&lt;&gt;();                                                       </span>
<span class="1983564060177123024" onmouseenter="enter('1983564060177123024');" onmouseout="out('1983564060177123024');" style=""> 238         try (DBHandler lockHandler = GBApplication.acquireDB()) {                                        </span>
<span class="8940139265610706617" onmouseenter="enter('8940139265610706617');" onmouseout="out('8940139265610706617');" style=""> 239             List&lt;Device&gt; activeDevices = DBHelper.getActiveDevices(lockHandler.getDaoSession());         </span>
<span class="6007915031492495476" onmouseenter="enter('6007915031492495476');" onmouseout="out('6007915031492495476');" style=""> 240             for (Device dbDevice : activeDevices) {                                                      </span>
<span class="-4172089683425383837" onmouseenter="enter('-4172089683425383837');" onmouseout="out('-4172089683425383837');" style=""> 241                 GBDevice gbDevice = toGBDevice(dbDevice);                                                </span>
<span class="-2890086854640002908" onmouseenter="enter('-2890086854640002908');" onmouseout="out('-2890086854640002908');" style=""> 242                 if (gbDevice != null &amp;&amp; DeviceHelper.getInstance().getSupportedType(gbDevice)) {         </span>
<span class="5237701413799306923" onmouseenter="enter('5237701413799306923');" onmouseout="out('5237701413799306923');" style=""> 243                     result.add(gbDevice);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245             }                                                                                            </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 246             return result;                                                                               </span>
<span  style=""> 247                                                                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 248         } catch (Exception e) {                                                                          </span>
<span class="-187514096336122593" onmouseenter="enter('-187514096336122593');" onmouseout="out('-187514096336122593');" style=""> 249             GB.toast(&quot;Error retrieving devices from database&quot;, Toast.LENGTH_SHORT, GB.ERROR);            </span>
<span class="-6093315130064080899" onmouseenter="enter('-6093315130064080899');" onmouseout="out('-6093315130064080899');" style=""> 250             return Collections.emptyList();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252     }                                                                                                    </span>
<span  style=""> 253                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 254     /**                                                                                                  </span>
<span class="-8078490980994469589" onmouseenter="enter('-8078490980994469589');" onmouseout="out('-8078490980994469589');" style=""> 255      * Converts a known device from the database to a GBDevice.                                          </span>
<span class="7713530361969283549" onmouseenter="enter('7713530361969283549');" onmouseout="out('7713530361969283549');" style=""> 256      * Note: The device might not be supported anymore, so callers should verify that.                   </span>
<span class="-6700615312658933431" onmouseenter="enter('-6700615312658933431');" onmouseout="out('-6700615312658933431');" style=""> 257      * @param dbDevice                                                                                   </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 258      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 259      */                                                                                                  </span>
<span class="2606688045344874841" onmouseenter="enter('2606688045344874841');" onmouseout="out('2606688045344874841');" style=""> 260     public GBDevice toGBDevice(Device dbDevice) {                                                        </span>
<span class="1652882496457315529" onmouseenter="enter('1652882496457315529');" onmouseout="out('1652882496457315529');" style=""> 261         DeviceType deviceType = DeviceType.fromKey(dbDevice.getType());                                  </span>
<span class="5855596366176965620" onmouseenter="enter('5855596366176965620');" onmouseout="out('5855596366176965620');" style=""> 262         GBDevice gbDevice = new GBDevice(dbDevice.getIdentifier(), dbDevice.getName(), deviceType);      </span>
<span class="9004683367408636271" onmouseenter="enter('9004683367408636271');" onmouseout="out('9004683367408636271');" style=""> 263         List&lt;DeviceAttributes&gt; deviceAttributesList = dbDevice.getDeviceAttributesList();                </span>
<span class="-694602091282451513" onmouseenter="enter('-694602091282451513');" onmouseout="out('-694602091282451513');" style=""> 264         if (deviceAttributesList.size() &gt; 0) {                                                           </span>
<span class="-3212481810427050137" onmouseenter="enter('-3212481810427050137');" onmouseout="out('-3212481810427050137');" style=""> 265             gbDevice.setModel(dbDevice.getModel());                                                      </span>
<span class="354034525378834429" onmouseenter="enter('354034525378834429');" onmouseout="out('354034525378834429');" style=""> 266             DeviceAttributes attrs = deviceAttributesList.get(0);                                        </span>
<span class="-8620968705551486244" onmouseenter="enter('-8620968705551486244');" onmouseout="out('-8620968705551486244');" style=""> 267             gbDevice.setFirmwareVersion(attrs.getFirmwareVersion1());                                    </span>
<span class="-2407126446549023078" onmouseenter="enter('-2407126446549023078');" onmouseout="out('-2407126446549023078');" style=""> 268             gbDevice.setFirmwareVersion2(attrs.getFirmwareVersion2());                                   </span>
<span class="6046344818374293876" onmouseenter="enter('6046344818374293876');" onmouseout="out('6046344818374293876');" style=""> 269             gbDevice.setVolatileAddress(attrs.getVolatileIdentifier());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270         }                                                                                                </span>
<span  style=""> 271                                                                                                          </span>
<span class="-9206390224358820403" onmouseenter="enter('-9206390224358820403');" onmouseout="out('-9206390224358820403');" style=""> 272         return gbDevice;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273     }                                                                                                    </span>
<span  style=""> 274                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 275     /**                                                                                                  </span>
<span class="8342379087536305506" onmouseenter="enter('8342379087536305506');" onmouseout="out('8342379087536305506');" style=""> 276      * Attempts to removing the bonding with the given device. Returns true                              </span>
<span class="-9119695278064429966" onmouseenter="enter('-9119695278064429966');" onmouseout="out('-9119695278064429966');" style=""> 277      * if bonding was supposedly successful and false if anything went wrong                             </span>
<span class="1113685536488546558" onmouseenter="enter('1113685536488546558');" onmouseout="out('1113685536488546558');" style=""> 278      * @param device                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 279      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 280      */                                                                                                  </span>
<span class="-8639258336155222707" onmouseenter="enter('-8639258336155222707');" onmouseout="out('-8639258336155222707');" style=""> 281     public boolean removeBond(GBDevice device) throws GBException {                                      </span>
<span class="5527337570660915921" onmouseenter="enter('5527337570660915921');" onmouseout="out('5527337570660915921');" style=""> 282         BluetoothAdapter defaultAdapter = BluetoothAdapter.getDefaultAdapter();                          </span>
<span class="6535479181747156907" onmouseenter="enter('6535479181747156907');" onmouseout="out('6535479181747156907');" style=""> 283         if (defaultAdapter != null) {                                                                    </span>
<span class="-6099553505981596341" onmouseenter="enter('-6099553505981596341');" onmouseout="out('-6099553505981596341');" style=""> 284             BluetoothDevice remoteDevice = defaultAdapter.getRemoteDevice(device.getAddress());          </span>
<span class="-6902931335510683219" onmouseenter="enter('-6902931335510683219');" onmouseout="out('-6902931335510683219');" style=""> 285             if (remoteDevice != null) {                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 286                 try {                                                                                    </span>
<span class="6635920500800020475" onmouseenter="enter('6635920500800020475');" onmouseout="out('6635920500800020475');" style=""> 287                     Method method = BluetoothDevice.class.getMethod(&quot;removeBond&quot;, (Class[]) null);       </span>
<span class="4415940968731599000" onmouseenter="enter('4415940968731599000');" onmouseout="out('4415940968731599000');" style=""> 288                     Object result = method.invoke(remoteDevice, (Object[]) null);                        </span>
<span class="6302849373420131955" onmouseenter="enter('6302849373420131955');" onmouseout="out('6302849373420131955');" style=""> 289                     return Boolean.TRUE.equals(result);                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 290                 } catch (Exception e) {                                                                  </span>
<span class="8351198176145398153" onmouseenter="enter('8351198176145398153');" onmouseout="out('8351198176145398153');" style=""> 291                     throw new GBException(&quot;Error removing bond to device: &quot; + device, e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 295         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296     }                                                                                                    </span>
<span  style=""> 297                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298 }                                                                                                        </span></pre></td>
                            <td><pre><span class="-5200878630337924680" onmouseenter="enter('-5200878630337924680');" onmouseout="out('-5200878630337924680');" style="">   1 /*  Copyright (C) 2015-2018 0nse, Andreas Shimokawa, Carsten Pfeiffer,                                   </span>
<span class="3588757660813990934" onmouseenter="enter('3588757660813990934');" onmouseout="out('3588757660813990934');" style="">   2     Daniele Gobbetti, JoaÌƒo Paulo Barraca, Kranz, ladbsoft, maxirnilian,                                 </span>
<span class="-5208925406365664903" onmouseenter="enter('-5208925406365664903');" onmouseout="out('-5208925406365664903');" style="">   3     protomors, Quallenauge, Sami Alaoui, tiparega, Vadim Kaushan                                         </span>
<span  style="">   4                                                                                                          </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   5     This file is part of Gadgetbridge.                                                                   </span>
<span  style="">   6                                                                                                          </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   7     Gadgetbridge is free software: you can redistribute it and/or modify                                 </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   8     it under the terms of the GNU Affero General Public License as published                             </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   9     by the Free Software Foundation, either version 3 of the License, or                                 </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">  10     (at your option) any later version.                                                                  </span>
<span  style="">  11                                                                                                          </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  12     Gadgetbridge is distributed in the hope that it will be useful,                                      </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  13     but WITHOUT ANY WARRANTY; without even the implied warranty of                                       </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  14     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                        </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  15     GNU Affero General Public License for more details.                                                  </span>
<span  style="">  16                                                                                                          </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  17     You should have received a copy of the GNU Affero General Public License                             </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  18     along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                             </span>
<span class="-5427540757158912607" onmouseenter="enter('-5427540757158912607');" onmouseout="out('-5427540757158912607');" style="">  19 package nodomain.freeyourgadget.gadgetbridge.util;                                                       </span>
<span  style="">  20                                                                                                          </span>
<span class="-8028506601233233593" onmouseenter="enter('-8028506601233233593');" onmouseout="out('-8028506601233233593');" style="">  21 import android.bluetooth.BluetoothAdapter;                                                               </span>
<span class="2859895893394018468" onmouseenter="enter('2859895893394018468');" onmouseout="out('2859895893394018468');" style="">  22 import android.bluetooth.BluetoothDevice;                                                                </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  23 import android.content.Context;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  24 import android.widget.Toast;                                                                             </span>
<span  style="">  25                                                                                                          </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  26 import org.slf4j.Logger;                                                                                 </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  27 import org.slf4j.LoggerFactory;                                                                          </span>
<span  style="">  28                                                                                                          </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style="">  29 import java.lang.reflect.Method;                                                                         </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  30 import java.util.ArrayList;                                                                              </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  31 import java.util.Collections;                                                                            </span>
<span class="8609815663253459563" onmouseenter="enter('8609815663253459563');" onmouseout="out('8609815663253459563');" style="">  32 import java.util.LinkedHashSet;                                                                          </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  33 import java.util.List;                                                                                   </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  34 import java.util.Set;                                                                                    </span>
<span  style="">  35                                                                                                          </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  36 import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                               </span>
<span class="-1471644270559892265" onmouseenter="enter('-1471644270559892265');" onmouseout="out('-1471644270559892265');" style="">  37 import nodomain.freeyourgadget.gadgetbridge.GBException;                                                 </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  38 import nodomain.freeyourgadget.gadgetbridge.R;                                                           </span>
<span class="6679513218772020996" onmouseenter="enter('6679513218772020996');" onmouseout="out('6679513218772020996');" style="">  39 import nodomain.freeyourgadget.gadgetbridge.database.DBHandler;                                          </span>
<span class="4338650188295783318" onmouseenter="enter('4338650188295783318');" onmouseout="out('4338650188295783318');" style="">  40 import nodomain.freeyourgadget.gadgetbridge.database.DBHelper;                                           </span>
<span class="6852267181356803593" onmouseenter="enter('6852267181356803593');" onmouseout="out('6852267181356803593');" style="">  41 import nodomain.freeyourgadget.gadgetbridge.devices.DeviceCoordinator;                                   </span>
<span class="6706901399385249836" onmouseenter="enter('6706901399385249836');" onmouseout="out('6706901399385249836');" style="">  42 import nodomain.freeyourgadget.gadgetbridge.devices.UnknownDeviceCoordinator;                            </span>
<span class="-2946949855778130048" onmouseenter="enter('-2946949855778130048');" onmouseout="out('-2946949855778130048');" style="">  43 import nodomain.freeyourgadget.gadgetbridge.devices.casiogb6900.CasioGB6900DeviceCoordinator;            </span>
<span class="1831953906102313699" onmouseenter="enter('1831953906102313699');" onmouseout="out('1831953906102313699');" style="">  44 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.EXRIZUK8Coordinator;                           </span>
<span class="-4973236722115174269" onmouseenter="enter('-4973236722115174269');" onmouseout="out('-4973236722115174269');" style="">  45 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusCoordinator;                              </span>
<span class="9204923228813511004" onmouseenter="enter('9204923228813511004');" onmouseout="out('9204923228813511004');" style="">  46 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.MakibesF68Coordinator;                         </span>
<span class="3078186574701620561" onmouseenter="enter('3078186574701620561');" onmouseout="out('3078186574701620561');" style="">  47 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.Q8Coordinator;                                 </span>
<span class="7272678525497799472" onmouseenter="enter('7272678525497799472');" onmouseout="out('7272678525497799472');" style="">  48 import nodomain.freeyourgadget.gadgetbridge.devices.huami.amazfitbip.AmazfitBipCoordinator;              </span>
<span class="9054045240569218327" onmouseenter="enter('9054045240569218327');" onmouseout="out('9054045240569218327');" style="">  49 import nodomain.freeyourgadget.gadgetbridge.devices.huami.amazfitcor.AmazfitCorCoordinator;              </span>
<span class="3142529718171766552" onmouseenter="enter('3142529718171766552');" onmouseout="out('3142529718171766552');" style="">  50 import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband2.MiBand2Coordinator;                    </span>
<span class="-336757578436190430" onmouseenter="enter('-336757578436190430');" onmouseout="out('-336757578436190430');" style="">  51 import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband2.MiBand2HRXCoordinator;                 </span>
<span class="-4959563064822725763" onmouseenter="enter('-4959563064822725763');" onmouseout="out('-4959563064822725763');" style="">  52 import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband3.MiBand3Coordinator;                    </span>
<span class="-8257747607607390324" onmouseenter="enter('-8257747607607390324');" onmouseout="out('-8257747607607390324');" style="">  53 import nodomain.freeyourgadget.gadgetbridge.devices.id115.ID115Coordinator;                              </span>
<span class="-8097912228071563035" onmouseenter="enter('-8097912228071563035');" onmouseout="out('-8097912228071563035');" style="">  54 import nodomain.freeyourgadget.gadgetbridge.devices.jyou.TeclastH30Coordinator;                          </span>
<span class="5408583638288829167" onmouseenter="enter('5408583638288829167');" onmouseout="out('5408583638288829167');" style="">  55 import nodomain.freeyourgadget.gadgetbridge.devices.miscale2.MiScale2DeviceCoordinator;                  </span>
<span class="-2735380447578037326" onmouseenter="enter('-2735380447578037326');" onmouseout="out('-2735380447578037326');" style="">  56 import nodomain.freeyourgadget.gadgetbridge.devices.liveview.LiveviewCoordinator;                        </span>
<span class="7979044249022447808" onmouseenter="enter('7979044249022447808');" onmouseout="out('7979044249022447808');" style="">  57 import nodomain.freeyourgadget.gadgetbridge.devices.miband.MiBandConst;                                  </span>
<span class="-3275943466867468904" onmouseenter="enter('-3275943466867468904');" onmouseout="out('-3275943466867468904');" style="">  58 import nodomain.freeyourgadget.gadgetbridge.devices.miband.MiBandCoordinator;                            </span>
<span class="-7557474927703111213" onmouseenter="enter('-7557474927703111213');" onmouseout="out('-7557474927703111213');" style="">  59 import nodomain.freeyourgadget.gadgetbridge.devices.no1f1.No1F1Coordinator;                              </span>
<span class="181119070723040218" onmouseenter="enter('181119070723040218');" onmouseout="out('181119070723040218');" style="">  60 import nodomain.freeyourgadget.gadgetbridge.devices.pebble.PebbleCoordinator;                            </span>
<span class="-8566867472430384418" onmouseenter="enter('-8566867472430384418');" onmouseout="out('-8566867472430384418');" style="">  61 import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi1Coordinator;                           </span>
<span class="6916358320845634609" onmouseenter="enter('6916358320845634609');" onmouseout="out('6916358320845634609');" style="">  62 import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi3Coordinator;                           </span>
<span class="8078015553085849089" onmouseenter="enter('8078015553085849089');" onmouseout="out('8078015553085849089');" style="">  63 import nodomain.freeyourgadget.gadgetbridge.devices.vibratissimo.VibratissimoCoordinator;                </span>
<span class="1896763010744176890" onmouseenter="enter('1896763010744176890');" onmouseout="out('1896763010744176890');" style="">  64 import nodomain.freeyourgadget.gadgetbridge.devices.watch9.Watch9DeviceCoordinator;                      </span>
<span class="-6235753869290001827" onmouseenter="enter('-6235753869290001827');" onmouseout="out('-6235753869290001827');" style="">  65 import nodomain.freeyourgadget.gadgetbridge.devices.xwatch.XWatchCoordinator;                            </span>
<span class="-8964272158633129718" onmouseenter="enter('-8964272158633129718');" onmouseout="out('-8964272158633129718');" style="">  66 import nodomain.freeyourgadget.gadgetbridge.devices.zetime.ZeTimeCoordinator;                            </span>
<span class="4469307411224397441" onmouseenter="enter('4469307411224397441');" onmouseout="out('4469307411224397441');" style="">  67 import nodomain.freeyourgadget.gadgetbridge.entities.Device;                                             </span>
<span class="-3040591784778258047" onmouseenter="enter('-3040591784778258047');" onmouseout="out('-3040591784778258047');" style="">  68 import nodomain.freeyourgadget.gadgetbridge.entities.DeviceAttributes;                                   </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  69 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                               </span>
<span class="-1351120908834620909" onmouseenter="enter('-1351120908834620909');" onmouseout="out('-1351120908834620909');" style="">  70 import nodomain.freeyourgadget.gadgetbridge.impl.GBDeviceCandidate;                                      </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  71 import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                            </span>
<span  style="">  72                                                                                                          </span>
<span class="-7246281683414074276" onmouseenter="enter('-7246281683414074276');" onmouseout="out('-7246281683414074276');" style="">  73 public class DeviceHelper {                                                                              </span>
<span  style="">  74                                                                                                          </span>
<span class="-7179396888031157102" onmouseenter="enter('-7179396888031157102');" onmouseout="out('-7179396888031157102');" style="">  75     private static final Logger LOG = LoggerFactory.getLogger(DeviceHelper.class);                       </span>
<span  style="">  76                                                                                                          </span>
<span class="1809257599229613641" onmouseenter="enter('1809257599229613641');" onmouseout="out('1809257599229613641');" style="">  77     private static final DeviceHelper instance = new DeviceHelper();                                     </span>
<span  style="">  78                                                                                                          </span>
<span class="-2529270569084750615" onmouseenter="enter('-2529270569084750615');" onmouseout="out('-2529270569084750615');" style="">  79     public static DeviceHelper getInstance() {                                                           </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style="">  80         return instance;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81     }                                                                                                    </span>
<span  style="">  82                                                                                                          </span>
<span class="1477217874849666720" onmouseenter="enter('1477217874849666720');" onmouseout="out('1477217874849666720');" style="">  83     // lazily created                                                                                    </span>
<span class="-1712942286504952582" onmouseenter="enter('-1712942286504952582');" onmouseout="out('-1712942286504952582');" style="">  84     private List&lt;DeviceCoordinator&gt; coordinators;                                                        </span>
<span  style="">  85                                                                                                          </span>
<span class="311137942692300687" onmouseenter="enter('311137942692300687');" onmouseout="out('311137942692300687');" style="">  86     public DeviceType getSupportedType(GBDeviceCandidate candidate) {                                    </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style="">  87         for (DeviceCoordinator coordinator : getAllCoordinators()) {                                     </span>
<span class="-6820733209455168532" onmouseenter="enter('-6820733209455168532');" onmouseout="out('-6820733209455168532');" style="">  88             DeviceType deviceType = coordinator.getSupportedType(candidate);                             </span>
<span class="5988197616953595638" onmouseenter="enter('5988197616953595638');" onmouseout="out('5988197616953595638');" style="">  89             if (deviceType.isSupported()) {                                                              </span>
<span class="7940989030742339244" onmouseenter="enter('7940989030742339244');" onmouseout="out('7940989030742339244');" style="">  90                 return deviceType;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92         }                                                                                                </span>
<span class="2733059175620106263" onmouseenter="enter('2733059175620106263');" onmouseout="out('2733059175620106263');" style="">  93         return DeviceType.UNKNOWN;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  94     }                                                                                                    </span>
<span  style="">  95                                                                                                          </span>
<span class="-262573812517796151" onmouseenter="enter('-262573812517796151');" onmouseout="out('-262573812517796151');" style="">  96     public boolean getSupportedType(GBDevice device) {                                                   </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style="">  97         for (DeviceCoordinator coordinator : getAllCoordinators()) {                                     </span>
<span class="5941075233090253090" onmouseenter="enter('5941075233090253090');" onmouseout="out('5941075233090253090');" style="">  98             if (coordinator.supports(device)) {                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  99                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 101         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 102         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103     }                                                                                                    </span>
<span  style=""> 104                                                                                                          </span>
<span class="8714408707514425620" onmouseenter="enter('8714408707514425620');" onmouseout="out('8714408707514425620');" style=""> 105     public GBDevice findAvailableDevice(String deviceAddress, Context context) {                         </span>
<span class="6902685203421244703" onmouseenter="enter('6902685203421244703');" onmouseout="out('6902685203421244703');" style=""> 106         Set&lt;GBDevice&gt; availableDevices = getAvailableDevices(context);                                   </span>
<span class="-2018824320601815207" onmouseenter="enter('-2018824320601815207');" onmouseout="out('-2018824320601815207');" style=""> 107         for (GBDevice availableDevice : availableDevices) {                                              </span>
<span class="4097611337760018422" onmouseenter="enter('4097611337760018422');" onmouseout="out('4097611337760018422');" style=""> 108             if (deviceAddress.equals(availableDevice.getAddress())) {                                    </span>
<span class="-4049705911540768690" onmouseenter="enter('-4049705911540768690');" onmouseout="out('-4049705911540768690');" style=""> 109                 return availableDevice;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 112         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113     }                                                                                                    </span>
<span  style=""> 114                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 115     /**                                                                                                  </span>
<span class="8378781591414513441" onmouseenter="enter('8378781591414513441');" onmouseout="out('8378781591414513441');" style=""> 116      * Returns the list of all available devices that are supported by Gadgetbridge.                     </span>
<span class="2803654733430477892" onmouseenter="enter('2803654733430477892');" onmouseout="out('2803654733430477892');" style=""> 117      * Note that no state is known about the returned devices. Even if one of those                      </span>
<span class="2191300811029215791" onmouseenter="enter('2191300811029215791');" onmouseout="out('2191300811029215791');" style=""> 118      * devices is connected, it will report the default not-connected state.                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 119      *                                                                                                   </span>
<span class="5072949809304800738" onmouseenter="enter('5072949809304800738');" onmouseout="out('5072949809304800738');" style=""> 120      * Clients interested in the &quot;live&quot; devices being managed should use the class                       </span>
<span class="-803398468380583905" onmouseenter="enter('-803398468380583905');" onmouseout="out('-803398468380583905');" style=""> 121      * DeviceManager.                                                                                    </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style=""> 122      * @param context                                                                                    </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 123      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 124      */                                                                                                  </span>
<span class="8379590169787447751" onmouseenter="enter('8379590169787447751');" onmouseout="out('8379590169787447751');" style=""> 125     public Set&lt;GBDevice&gt; getAvailableDevices(Context context) {                                          </span>
<span class="-8531133286137168432" onmouseenter="enter('-8531133286137168432');" onmouseout="out('-8531133286137168432');" style=""> 126         BluetoothAdapter btAdapter = BluetoothAdapter.getDefaultAdapter();                               </span>
<span  style=""> 127                                                                                                          </span>
<span class="6162896112907059694" onmouseenter="enter('6162896112907059694');" onmouseout="out('6162896112907059694');" style=""> 128         Set&lt;GBDevice&gt; availableDevices = new LinkedHashSet&lt;GBDevice&gt;();                                  </span>
<span  style=""> 129                                                                                                          </span>
<span class="6119012127556406196" onmouseenter="enter('6119012127556406196');" onmouseout="out('6119012127556406196');" style=""> 130         if (btAdapter == null) {                                                                         </span>
<span class="-8992361903677634121" onmouseenter="enter('-8992361903677634121');" onmouseout="out('-8992361903677634121');" style=""><abbr title=" 131             GB.toast(context, context.getString(R.string.bluetooth_is_not_supported_), Toast.LENGTH_SHORT, GB.WARN);"> 131             GB.toast(context, context.getString(R.string.bluetooth_is_not_supported_), Toast.LENGTH_SHORTðŸ”µ</abbr></span>
<span class="7082490255995433787" onmouseenter="enter('7082490255995433787');" onmouseout="out('7082490255995433787');" style=""> 132         } else if (!btAdapter.isEnabled()) {                                                             </span>
<span class="6363457106270493050" onmouseenter="enter('6363457106270493050');" onmouseout="out('6363457106270493050');" style=""><abbr title=" 133             GB.toast(context, context.getString(R.string.bluetooth_is_disabled_), Toast.LENGTH_SHORT, GB.WARN);"> 133             GB.toast(context, context.getString(R.string.bluetooth_is_disabled_), Toast.LENGTH_SHORT, GB.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134         }                                                                                                </span>
<span class="-3377224776558714047" onmouseenter="enter('-3377224776558714047');" onmouseout="out('-3377224776558714047');" style=""> 135         List&lt;GBDevice&gt; dbDevices = getDatabaseDevices();                                                 </span>
<span class="-6353595300668739192" onmouseenter="enter('-6353595300668739192');" onmouseout="out('-6353595300668739192');" style=""> 136         availableDevices.addAll(dbDevices);                                                              </span>
<span  style=""> 137                                                                                                          </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 138         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="-6735964885073070564" onmouseenter="enter('-6735964885073070564');" onmouseout="out('-6735964885073070564');" style=""> 139         String miAddr = prefs.getString(MiBandConst.PREF_MIBAND_ADDRESS, &quot;&quot;);                            </span>
<span class="-8301264850737854302" onmouseenter="enter('-8301264850737854302');" onmouseout="out('-8301264850737854302');" style=""> 140         if (miAddr.length() &gt; 0) {                                                                       </span>
<span class="-1526992099316589239" onmouseenter="enter('-1526992099316589239');" onmouseout="out('-1526992099316589239');" style=""> 141             GBDevice miDevice = new GBDevice(miAddr, &quot;MI&quot;, DeviceType.MIBAND);                           </span>
<span class="-7870407245378512448" onmouseenter="enter('-7870407245378512448');" onmouseout="out('-7870407245378512448');" style=""> 142             availableDevices.add(miDevice);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 143         }                                                                                                </span>
<span  style=""> 144                                                                                                          </span>
<span class="7681435883288593574" onmouseenter="enter('7681435883288593574');" onmouseout="out('7681435883288593574');" style=""> 145         String pebbleEmuAddr = prefs.getString(&quot;pebble_emu_addr&quot;, &quot;&quot;);                                   </span>
<span class="-1326069915361848697" onmouseenter="enter('-1326069915361848697');" onmouseout="out('-1326069915361848697');" style=""> 146         String pebbleEmuPort = prefs.getString(&quot;pebble_emu_port&quot;, &quot;&quot;);                                   </span>
<span class="-3516508780907274278" onmouseenter="enter('-3516508780907274278');" onmouseout="out('-3516508780907274278');" style=""> 147         if (pebbleEmuAddr.length() &gt;= 7 &amp;&amp; pebbleEmuPort.length() &gt; 0) {                                 </span>
<span class="-6361666938108258288" onmouseenter="enter('-6361666938108258288');" onmouseout="out('-6361666938108258288');" style=""><abbr title=" 148             GBDevice pebbleEmuDevice = new GBDevice(pebbleEmuAddr + &quot;:&quot; + pebbleEmuPort, &quot;Pebble qemu&quot;, DeviceType.PEBBLE);"> 148             GBDevice pebbleEmuDevice = new GBDevice(pebbleEmuAddr + &quot;:&quot; + pebbleEmuPort, &quot;Pebble qemu&quot;, DðŸ”µ</abbr></span>
<span class="6982341110438288246" onmouseenter="enter('6982341110438288246');" onmouseout="out('6982341110438288246');" style=""> 149             availableDevices.add(pebbleEmuDevice);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150         }                                                                                                </span>
<span class="-6314022782668503707" onmouseenter="enter('-6314022782668503707');" onmouseout="out('-6314022782668503707');" style=""> 151         return availableDevices;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152     }                                                                                                    </span>
<span  style=""> 153                                                                                                          </span>
<span class="5388093685262108156" onmouseenter="enter('5388093685262108156');" onmouseout="out('5388093685262108156');" style=""> 154     public GBDevice toSupportedDevice(BluetoothDevice device) {                                          </span>
<span class="8849584801955056895" onmouseenter="enter('8849584801955056895');" onmouseout="out('8849584801955056895');" style=""><abbr title=" 155         GBDeviceCandidate candidate = new GBDeviceCandidate(device, GBDevice.RSSI_UNKNOWN, device.getUuids());"> 155         GBDeviceCandidate candidate = new GBDeviceCandidate(device, GBDevice.RSSI_UNKNOWN, device.getUuidðŸ”µ</abbr></span>
<span class="-318413986788990089" onmouseenter="enter('-318413986788990089');" onmouseout="out('-318413986788990089');" style=""> 156         return toSupportedDevice(candidate);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157     }                                                                                                    </span>
<span  style=""> 158                                                                                                          </span>
<span class="-4051355324352763386" onmouseenter="enter('-4051355324352763386');" onmouseout="out('-4051355324352763386');" style=""> 159     public GBDevice toSupportedDevice(GBDeviceCandidate candidate) {                                     </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style=""> 160         for (DeviceCoordinator coordinator : getAllCoordinators()) {                                     </span>
<span class="7746899366251330745" onmouseenter="enter('7746899366251330745');" onmouseout="out('7746899366251330745');" style=""> 161             if (coordinator.supports(candidate)) {                                                       </span>
<span class="-7778797991172760546" onmouseenter="enter('-7778797991172760546');" onmouseout="out('-7778797991172760546');" style=""> 162                 return coordinator.createDevice(candidate);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 163             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 165         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166     }                                                                                                    </span>
<span  style=""> 167                                                                                                          </span>
<span class="-5651035503093566961" onmouseenter="enter('-5651035503093566961');" onmouseout="out('-5651035503093566961');" style=""> 168     public DeviceCoordinator getCoordinator(GBDeviceCandidate device) {                                  </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 169         synchronized (this) {                                                                            </span>
<span class="5581566123633040849" onmouseenter="enter('5581566123633040849');" onmouseout="out('5581566123633040849');" style=""> 170             for (DeviceCoordinator coord : getAllCoordinators()) {                                       </span>
<span class="-456707873662890645" onmouseenter="enter('-456707873662890645');" onmouseout="out('-456707873662890645');" style=""> 171                 if (coord.supports(device)) {                                                            </span>
<span class="-7554628627552477108" onmouseenter="enter('-7554628627552477108');" onmouseout="out('-7554628627552477108');" style=""> 172                     return coord;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175         }                                                                                                </span>
<span class="-8562800692924603282" onmouseenter="enter('-8562800692924603282');" onmouseout="out('-8562800692924603282');" style=""> 176         return new UnknownDeviceCoordinator();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177     }                                                                                                    </span>
<span  style=""> 178                                                                                                          </span>
<span class="2088636936691911169" onmouseenter="enter('2088636936691911169');" onmouseout="out('2088636936691911169');" style=""> 179     public DeviceCoordinator getCoordinator(GBDevice device) {                                           </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 180         synchronized (this) {                                                                            </span>
<span class="5581566123633040849" onmouseenter="enter('5581566123633040849');" onmouseout="out('5581566123633040849');" style=""> 181             for (DeviceCoordinator coord : getAllCoordinators()) {                                       </span>
<span class="-456707873662890645" onmouseenter="enter('-456707873662890645');" onmouseout="out('-456707873662890645');" style=""> 182                 if (coord.supports(device)) {                                                            </span>
<span class="-7554628627552477108" onmouseenter="enter('-7554628627552477108');" onmouseout="out('-7554628627552477108');" style=""> 183                     return coord;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186         }                                                                                                </span>
<span class="-8562800692924603282" onmouseenter="enter('-8562800692924603282');" onmouseout="out('-8562800692924603282');" style=""> 187         return new UnknownDeviceCoordinator();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188     }                                                                                                    </span>
<span  style=""> 189                                                                                                          </span>
<span class="610514956454116910" onmouseenter="enter('610514956454116910');" onmouseout="out('610514956454116910');" style=""> 190     public synchronized List&lt;DeviceCoordinator&gt; getAllCoordinators() {                                   </span>
<span class="-5653167495443109834" onmouseenter="enter('-5653167495443109834');" onmouseout="out('-5653167495443109834');" style=""> 191         if (coordinators == null) {                                                                      </span>
<span class="6535460489050040084" onmouseenter="enter('6535460489050040084');" onmouseout="out('6535460489050040084');" style=""> 192             coordinators = createCoordinators();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193         }                                                                                                </span>
<span class="7608420427240005700" onmouseenter="enter('7608420427240005700');" onmouseout="out('7608420427240005700');" style=""> 194         return coordinators;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195     }                                                                                                    </span>
<span  style=""> 196                                                                                                          </span>
<span class="5367250377489878658" onmouseenter="enter('5367250377489878658');" onmouseout="out('5367250377489878658');" style=""> 197     private List&lt;DeviceCoordinator&gt; createCoordinators() {                                               </span>
<span class="-8659885373666106675" onmouseenter="enter('-8659885373666106675');" onmouseout="out('-8659885373666106675');" style=""> 198         List&lt;DeviceCoordinator&gt; result = new ArrayList&lt;&gt;();                                              </span>
<span class="7179280396014719844" onmouseenter="enter('7179280396014719844');" onmouseout="out('7179280396014719844');" style=""><abbr title=" 199         result.add(new MiScale2DeviceCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm"> 199         result.add(new MiScale2DeviceCoordinator()); // Note: must come before MiBand2 because detection ðŸ”µ</abbr></span>
<span class="3669774305908054055" onmouseenter="enter('3669774305908054055');" onmouseout="out('3669774305908054055');" style=""><abbr title=" 200         result.add(new AmazfitBipCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm"> 200         result.add(new AmazfitBipCoordinator()); // Note: must come before MiBand2 because detection is hðŸ”µ</abbr></span>
<span class="-7117613783968222510" onmouseenter="enter('-7117613783968222510');" onmouseout="out('-7117613783968222510');" style=""><abbr title=" 201         result.add(new AmazfitCorCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm"> 201         result.add(new AmazfitCorCoordinator()); // Note: must come before MiBand2 because detection is hðŸ”µ</abbr></span>
<span class="-1078845644300418098" onmouseenter="enter('-1078845644300418098');" onmouseout="out('-1078845644300418098');" style=""><abbr title=" 202         result.add(new MiBand3Coordinator());  // Note: must come before MiBand2 because detection is hacky, atm"> 202         result.add(new MiBand3Coordinator());  // Note: must come before MiBand2 because detection is hacðŸ”µ</abbr></span>
<span class="-5997211381002485660" onmouseenter="enter('-5997211381002485660');" onmouseout="out('-5997211381002485660');" style=""><abbr title=" 203         result.add(new MiBand2HRXCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm"> 203         result.add(new MiBand2HRXCoordinator()); // Note: must come before MiBand2 because detection is hðŸ”µ</abbr></span>
<span class="4970251816251507839" onmouseenter="enter('4970251816251507839');" onmouseout="out('4970251816251507839');" style=""><abbr title=" 204         result.add(new MiBand2Coordinator()); // Note: MiBand2 must come before MiBand because detection is hacky, atm"> 204         result.add(new MiBand2Coordinator()); // Note: MiBand2 must come before MiBand because detection ðŸ”µ</abbr></span>
<span class="-5481576563447422020" onmouseenter="enter('-5481576563447422020');" onmouseout="out('-5481576563447422020');" style=""> 205         result.add(new MiBandCoordinator());                                                             </span>
<span class="6190871288444688318" onmouseenter="enter('6190871288444688318');" onmouseout="out('6190871288444688318');" style=""> 206         result.add(new PebbleCoordinator());                                                             </span>
<span class="6793070632976028692" onmouseenter="enter('6793070632976028692');" onmouseout="out('6793070632976028692');" style=""> 207         result.add(new VibratissimoCoordinator());                                                       </span>
<span class="5131269263148398875" onmouseenter="enter('5131269263148398875');" onmouseout="out('5131269263148398875');" style=""> 208         result.add(new LiveviewCoordinator());                                                           </span>
<span class="1595212057085836033" onmouseenter="enter('1595212057085836033');" onmouseout="out('1595212057085836033');" style=""> 209         result.add(new HPlusCoordinator());                                                              </span>
<span class="3332735665937364473" onmouseenter="enter('3332735665937364473');" onmouseout="out('3332735665937364473');" style=""> 210         result.add(new No1F1Coordinator());                                                              </span>
<span class="3699860687323138670" onmouseenter="enter('3699860687323138670');" onmouseout="out('3699860687323138670');" style=""> 211         result.add(new MakibesF68Coordinator());                                                         </span>
<span class="-5481362583103427017" onmouseenter="enter('-5481362583103427017');" onmouseout="out('-5481362583103427017');" style=""> 212         result.add(new Q8Coordinator());                                                                 </span>
<span class="8067903992183633568" onmouseenter="enter('8067903992183633568');" onmouseout="out('8067903992183633568');" style=""> 213         result.add(new EXRIZUK8Coordinator());                                                           </span>
<span class="-6898555743395836902" onmouseenter="enter('-6898555743395836902');" onmouseout="out('-6898555743395836902');" style=""> 214         result.add(new TeclastH30Coordinator());                                                         </span>
<span class="-5904825641300533735" onmouseenter="enter('-5904825641300533735');" onmouseout="out('-5904825641300533735');" style=""> 215         result.add(new XWatchCoordinator());                                                             </span>
<span class="-1342788656175506629" onmouseenter="enter('-1342788656175506629');" onmouseout="out('-1342788656175506629');" style=""> 216         result.add(new ZeTimeCoordinator());                                                             </span>
<span class="-5172501225405919533" onmouseenter="enter('-5172501225405919533');" onmouseout="out('-5172501225405919533');" style=""> 217         result.add(new ID115Coordinator());                                                              </span>
<span class="-5671094850717710707" onmouseenter="enter('-5671094850717710707');" onmouseout="out('-5671094850717710707');" style=""> 218         result.add(new Watch9DeviceCoordinator());                                                       </span>
<span class="9072674293611744445" onmouseenter="enter('9072674293611744445');" onmouseout="out('9072674293611744445');" style=""> 219         result.add(new Roidmi1Coordinator());                                                            </span>
<span class="-9202027692962819030" onmouseenter="enter('-9202027692962819030');" onmouseout="out('-9202027692962819030');" style=""> 220         result.add(new Roidmi3Coordinator());                                                            </span>
<span class="-3417192720312420869" onmouseenter="enter('-3417192720312420869');" onmouseout="out('-3417192720312420869');" style=""> 221         result.add(new CasioGB6900DeviceCoordinator());                                                  </span>
<span  style=""> 222                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 223         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224     }                                                                                                    </span>
<span  style=""> 225                                                                                                          </span>
<span class="3182429837156194527" onmouseenter="enter('3182429837156194527');" onmouseout="out('3182429837156194527');" style=""> 226     private List&lt;GBDevice&gt; getDatabaseDevices() {                                                        </span>
<span class="840115391726385579" onmouseenter="enter('840115391726385579');" onmouseout="out('840115391726385579');" style=""> 227         List&lt;GBDevice&gt; result = new ArrayList&lt;&gt;();                                                       </span>
<span class="1983564060177123024" onmouseenter="enter('1983564060177123024');" onmouseout="out('1983564060177123024');" style=""> 228         try (DBHandler lockHandler = GBApplication.acquireDB()) {                                        </span>
<span class="8940139265610706617" onmouseenter="enter('8940139265610706617');" onmouseout="out('8940139265610706617');" style=""> 229             List&lt;Device&gt; activeDevices = DBHelper.getActiveDevices(lockHandler.getDaoSession());         </span>
<span class="6007915031492495476" onmouseenter="enter('6007915031492495476');" onmouseout="out('6007915031492495476');" style=""> 230             for (Device dbDevice : activeDevices) {                                                      </span>
<span class="-4172089683425383837" onmouseenter="enter('-4172089683425383837');" onmouseout="out('-4172089683425383837');" style=""> 231                 GBDevice gbDevice = toGBDevice(dbDevice);                                                </span>
<span class="-2890086854640002908" onmouseenter="enter('-2890086854640002908');" onmouseout="out('-2890086854640002908');" style=""> 232                 if (gbDevice != null &amp;&amp; DeviceHelper.getInstance().getSupportedType(gbDevice)) {         </span>
<span class="5237701413799306923" onmouseenter="enter('5237701413799306923');" onmouseout="out('5237701413799306923');" style=""> 233                     result.add(gbDevice);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235             }                                                                                            </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 236             return result;                                                                               </span>
<span  style=""> 237                                                                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 238         } catch (Exception e) {                                                                          </span>
<span class="-187514096336122593" onmouseenter="enter('-187514096336122593');" onmouseout="out('-187514096336122593');" style=""> 239             GB.toast(&quot;Error retrieving devices from database&quot;, Toast.LENGTH_SHORT, GB.ERROR);            </span>
<span class="-6093315130064080899" onmouseenter="enter('-6093315130064080899');" onmouseout="out('-6093315130064080899');" style=""> 240             return Collections.emptyList();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242     }                                                                                                    </span>
<span  style=""> 243                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 244     /**                                                                                                  </span>
<span class="-8078490980994469589" onmouseenter="enter('-8078490980994469589');" onmouseout="out('-8078490980994469589');" style=""> 245      * Converts a known device from the database to a GBDevice.                                          </span>
<span class="7713530361969283549" onmouseenter="enter('7713530361969283549');" onmouseout="out('7713530361969283549');" style=""> 246      * Note: The device might not be supported anymore, so callers should verify that.                   </span>
<span class="-6700615312658933431" onmouseenter="enter('-6700615312658933431');" onmouseout="out('-6700615312658933431');" style=""> 247      * @param dbDevice                                                                                   </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 248      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 249      */                                                                                                  </span>
<span class="2606688045344874841" onmouseenter="enter('2606688045344874841');" onmouseout="out('2606688045344874841');" style=""> 250     public GBDevice toGBDevice(Device dbDevice) {                                                        </span>
<span class="1652882496457315529" onmouseenter="enter('1652882496457315529');" onmouseout="out('1652882496457315529');" style=""> 251         DeviceType deviceType = DeviceType.fromKey(dbDevice.getType());                                  </span>
<span class="5855596366176965620" onmouseenter="enter('5855596366176965620');" onmouseout="out('5855596366176965620');" style=""> 252         GBDevice gbDevice = new GBDevice(dbDevice.getIdentifier(), dbDevice.getName(), deviceType);      </span>
<span class="9004683367408636271" onmouseenter="enter('9004683367408636271');" onmouseout="out('9004683367408636271');" style=""> 253         List&lt;DeviceAttributes&gt; deviceAttributesList = dbDevice.getDeviceAttributesList();                </span>
<span class="-694602091282451513" onmouseenter="enter('-694602091282451513');" onmouseout="out('-694602091282451513');" style=""> 254         if (deviceAttributesList.size() &gt; 0) {                                                           </span>
<span class="-3212481810427050137" onmouseenter="enter('-3212481810427050137');" onmouseout="out('-3212481810427050137');" style=""> 255             gbDevice.setModel(dbDevice.getModel());                                                      </span>
<span class="354034525378834429" onmouseenter="enter('354034525378834429');" onmouseout="out('354034525378834429');" style=""> 256             DeviceAttributes attrs = deviceAttributesList.get(0);                                        </span>
<span class="-8620968705551486244" onmouseenter="enter('-8620968705551486244');" onmouseout="out('-8620968705551486244');" style=""> 257             gbDevice.setFirmwareVersion(attrs.getFirmwareVersion1());                                    </span>
<span class="-2407126446549023078" onmouseenter="enter('-2407126446549023078');" onmouseout="out('-2407126446549023078');" style=""> 258             gbDevice.setFirmwareVersion2(attrs.getFirmwareVersion2());                                   </span>
<span class="6046344818374293876" onmouseenter="enter('6046344818374293876');" onmouseout="out('6046344818374293876');" style=""> 259             gbDevice.setVolatileAddress(attrs.getVolatileIdentifier());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260         }                                                                                                </span>
<span  style=""> 261                                                                                                          </span>
<span class="-9206390224358820403" onmouseenter="enter('-9206390224358820403');" onmouseout="out('-9206390224358820403');" style=""> 262         return gbDevice;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263     }                                                                                                    </span>
<span  style=""> 264                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 265     /**                                                                                                  </span>
<span class="8342379087536305506" onmouseenter="enter('8342379087536305506');" onmouseout="out('8342379087536305506');" style=""> 266      * Attempts to removing the bonding with the given device. Returns true                              </span>
<span class="-9119695278064429966" onmouseenter="enter('-9119695278064429966');" onmouseout="out('-9119695278064429966');" style=""> 267      * if bonding was supposedly successful and false if anything went wrong                             </span>
<span class="1113685536488546558" onmouseenter="enter('1113685536488546558');" onmouseout="out('1113685536488546558');" style=""> 268      * @param device                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 269      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 270      */                                                                                                  </span>
<span class="-8639258336155222707" onmouseenter="enter('-8639258336155222707');" onmouseout="out('-8639258336155222707');" style=""> 271     public boolean removeBond(GBDevice device) throws GBException {                                      </span>
<span class="5527337570660915921" onmouseenter="enter('5527337570660915921');" onmouseout="out('5527337570660915921');" style=""> 272         BluetoothAdapter defaultAdapter = BluetoothAdapter.getDefaultAdapter();                          </span>
<span class="6535479181747156907" onmouseenter="enter('6535479181747156907');" onmouseout="out('6535479181747156907');" style=""> 273         if (defaultAdapter != null) {                                                                    </span>
<span class="-6099553505981596341" onmouseenter="enter('-6099553505981596341');" onmouseout="out('-6099553505981596341');" style=""> 274             BluetoothDevice remoteDevice = defaultAdapter.getRemoteDevice(device.getAddress());          </span>
<span class="-6902931335510683219" onmouseenter="enter('-6902931335510683219');" onmouseout="out('-6902931335510683219');" style=""> 275             if (remoteDevice != null) {                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 276                 try {                                                                                    </span>
<span class="6635920500800020475" onmouseenter="enter('6635920500800020475');" onmouseout="out('6635920500800020475');" style=""> 277                     Method method = BluetoothDevice.class.getMethod(&quot;removeBond&quot;, (Class[]) null);       </span>
<span class="4415940968731599000" onmouseenter="enter('4415940968731599000');" onmouseout="out('4415940968731599000');" style=""> 278                     Object result = method.invoke(remoteDevice, (Object[]) null);                        </span>
<span class="6302849373420131955" onmouseenter="enter('6302849373420131955');" onmouseout="out('6302849373420131955');" style=""> 279                     return Boolean.TRUE.equals(result);                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 280                 } catch (Exception e) {                                                                  </span>
<span class="8351198176145398153" onmouseenter="enter('8351198176145398153');" onmouseout="out('8351198176145398153');" style=""> 281                     throw new GBException(&quot;Error removing bond to device: &quot; + device, e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 285         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286     }                                                                                                    </span>
<span  style=""> 287                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288 }                                                                                                        </span>








</pre></td>
                            <td><pre><span class="-5200878630337924680" onmouseenter="enter('-5200878630337924680');" onmouseout="out('-5200878630337924680');" style="">   1 /*  Copyright (C) 2015-2018 0nse, Andreas Shimokawa, Carsten Pfeiffer,                                   </span>
<span class="3588757660813990934" onmouseenter="enter('3588757660813990934');" onmouseout="out('3588757660813990934');" style="">   2     Daniele Gobbetti, JoaÌƒo Paulo Barraca, Kranz, ladbsoft, maxirnilian,                                 </span>
<span class="-5208925406365664903" onmouseenter="enter('-5208925406365664903');" onmouseout="out('-5208925406365664903');" style="">   3     protomors, Quallenauge, Sami Alaoui, tiparega, Vadim Kaushan                                         </span>
<span  style="">   4                                                                                                          </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   5     This file is part of Gadgetbridge.                                                                   </span>
<span  style="">   6                                                                                                          </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   7     Gadgetbridge is free software: you can redistribute it and/or modify                                 </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   8     it under the terms of the GNU Affero General Public License as published                             </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   9     by the Free Software Foundation, either version 3 of the License, or                                 </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">  10     (at your option) any later version.                                                                  </span>
<span  style="">  11                                                                                                          </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  12     Gadgetbridge is distributed in the hope that it will be useful,                                      </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  13     but WITHOUT ANY WARRANTY; without even the implied warranty of                                       </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  14     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                        </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  15     GNU Affero General Public License for more details.                                                  </span>
<span  style="">  16                                                                                                          </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  17     You should have received a copy of the GNU Affero General Public License                             </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  18     along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                             </span>
<span class="-5427540757158912607" onmouseenter="enter('-5427540757158912607');" onmouseout="out('-5427540757158912607');" style="">  19 package nodomain.freeyourgadget.gadgetbridge.util;                                                       </span>
<span  style="">  20                                                                                                          </span>
<span class="-8028506601233233593" onmouseenter="enter('-8028506601233233593');" onmouseout="out('-8028506601233233593');" style="">  21 import android.bluetooth.BluetoothAdapter;                                                               </span>
<span class="2859895893394018468" onmouseenter="enter('2859895893394018468');" onmouseout="out('2859895893394018468');" style="">  22 import android.bluetooth.BluetoothDevice;                                                                </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  23 import android.content.Context;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  24 import android.widget.Toast;                                                                             </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style="">  25 import java.lang.reflect.Method;                                                                         </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  26 import java.util.ArrayList;                                                                              </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  27 import java.util.Collections;                                                                            </span>
<span class="8609815663253459563" onmouseenter="enter('8609815663253459563');" onmouseout="out('8609815663253459563');" style="">  28 import java.util.LinkedHashSet;                                                                          </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  29 import java.util.List;                                                                                   </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  30 import java.util.Set;                                                                                    </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  31 import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                               </span>
<span class="-1471644270559892265" onmouseenter="enter('-1471644270559892265');" onmouseout="out('-1471644270559892265');" style="">  32 import nodomain.freeyourgadget.gadgetbridge.GBException;                                                 </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  33 import nodomain.freeyourgadget.gadgetbridge.R;                                                           </span>
<span class="6679513218772020996" onmouseenter="enter('6679513218772020996');" onmouseout="out('6679513218772020996');" style="">  34 import nodomain.freeyourgadget.gadgetbridge.database.DBHandler;                                          </span>
<span class="4338650188295783318" onmouseenter="enter('4338650188295783318');" onmouseout="out('4338650188295783318');" style="">  35 import nodomain.freeyourgadget.gadgetbridge.database.DBHelper;                                           </span>
<span class="6852267181356803593" onmouseenter="enter('6852267181356803593');" onmouseout="out('6852267181356803593');" style="">  36 import nodomain.freeyourgadget.gadgetbridge.devices.DeviceCoordinator;                                   </span>
<span class="6706901399385249836" onmouseenter="enter('6706901399385249836');" onmouseout="out('6706901399385249836');" style="">  37 import nodomain.freeyourgadget.gadgetbridge.devices.UnknownDeviceCoordinator;                            </span>
<span class="-2946949855778130048" onmouseenter="enter('-2946949855778130048');" onmouseout="out('-2946949855778130048');" style="">  38 import nodomain.freeyourgadget.gadgetbridge.devices.casiogb6900.CasioGB6900DeviceCoordinator;            </span>
<span class="1831953906102313699" onmouseenter="enter('1831953906102313699');" onmouseout="out('1831953906102313699');" style="">  39 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.EXRIZUK8Coordinator;                           </span>
<span class="-4973236722115174269" onmouseenter="enter('-4973236722115174269');" onmouseout="out('-4973236722115174269');" style="">  40 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusCoordinator;                              </span>
<span class="9204923228813511004" onmouseenter="enter('9204923228813511004');" onmouseout="out('9204923228813511004');" style="">  41 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.MakibesF68Coordinator;                         </span>
<span class="3078186574701620561" onmouseenter="enter('3078186574701620561');" onmouseout="out('3078186574701620561');" style="">  42 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.Q8Coordinator;                                 </span>
<span class="7272678525497799472" onmouseenter="enter('7272678525497799472');" onmouseout="out('7272678525497799472');" style="">  43 import nodomain.freeyourgadget.gadgetbridge.devices.huami.amazfitbip.AmazfitBipCoordinator;              </span>
<span class="9054045240569218327" onmouseenter="enter('9054045240569218327');" onmouseout="out('9054045240569218327');" style="">  44 import nodomain.freeyourgadget.gadgetbridge.devices.huami.amazfitcor.AmazfitCorCoordinator;              </span>
<span class="3142529718171766552" onmouseenter="enter('3142529718171766552');" onmouseout="out('3142529718171766552');" style="">  45 import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband2.MiBand2Coordinator;                    </span>
<span class="-336757578436190430" onmouseenter="enter('-336757578436190430');" onmouseout="out('-336757578436190430');" style="">  46 import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband2.MiBand2HRXCoordinator;                 </span>
<span class="-4959563064822725763" onmouseenter="enter('-4959563064822725763');" onmouseout="out('-4959563064822725763');" style="">  47 import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband3.MiBand3Coordinator;                    </span>
<span class="-8257747607607390324" onmouseenter="enter('-8257747607607390324');" onmouseout="out('-8257747607607390324');" style="">  48 import nodomain.freeyourgadget.gadgetbridge.devices.id115.ID115Coordinator;                              </span>
<span class="-8097912228071563035" onmouseenter="enter('-8097912228071563035');" onmouseout="out('-8097912228071563035');" style="">  49 import nodomain.freeyourgadget.gadgetbridge.devices.jyou.TeclastH30Coordinator;                          </span>
<span class="-2735380447578037326" onmouseenter="enter('-2735380447578037326');" onmouseout="out('-2735380447578037326');" style="">  50 import nodomain.freeyourgadget.gadgetbridge.devices.liveview.LiveviewCoordinator;                        </span>
<span class="7979044249022447808" onmouseenter="enter('7979044249022447808');" onmouseout="out('7979044249022447808');" style="">  51 import nodomain.freeyourgadget.gadgetbridge.devices.miband.MiBandConst;                                  </span>
<span class="-3275943466867468904" onmouseenter="enter('-3275943466867468904');" onmouseout="out('-3275943466867468904');" style="">  52 import nodomain.freeyourgadget.gadgetbridge.devices.miband.MiBandCoordinator;                            </span>
<span class="5408583638288829167" onmouseenter="enter('5408583638288829167');" onmouseout="out('5408583638288829167');" style="">  53 import nodomain.freeyourgadget.gadgetbridge.devices.miscale2.MiScale2DeviceCoordinator;                  </span>
<span class="-7557474927703111213" onmouseenter="enter('-7557474927703111213');" onmouseout="out('-7557474927703111213');" style="">  54 import nodomain.freeyourgadget.gadgetbridge.devices.no1f1.No1F1Coordinator;                              </span>
<span class="181119070723040218" onmouseenter="enter('181119070723040218');" onmouseout="out('181119070723040218');" style="">  55 import nodomain.freeyourgadget.gadgetbridge.devices.pebble.PebbleCoordinator;                            </span>
<span class="-8566867472430384418" onmouseenter="enter('-8566867472430384418');" onmouseout="out('-8566867472430384418');" style="">  56 import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi1Coordinator;                           </span>
<span class="6916358320845634609" onmouseenter="enter('6916358320845634609');" onmouseout="out('6916358320845634609');" style="">  57 import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi3Coordinator;                           </span>
<span class="8078015553085849089" onmouseenter="enter('8078015553085849089');" onmouseout="out('8078015553085849089');" style="">  58 import nodomain.freeyourgadget.gadgetbridge.devices.vibratissimo.VibratissimoCoordinator;                </span>
<span class="1896763010744176890" onmouseenter="enter('1896763010744176890');" onmouseout="out('1896763010744176890');" style="">  59 import nodomain.freeyourgadget.gadgetbridge.devices.watch9.Watch9DeviceCoordinator;                      </span>
<span class="-6235753869290001827" onmouseenter="enter('-6235753869290001827');" onmouseout="out('-6235753869290001827');" style="">  60 import nodomain.freeyourgadget.gadgetbridge.devices.xwatch.XWatchCoordinator;                            </span>
<span class="-8964272158633129718" onmouseenter="enter('-8964272158633129718');" onmouseout="out('-8964272158633129718');" style="">  61 import nodomain.freeyourgadget.gadgetbridge.devices.zetime.ZeTimeCoordinator;                            </span>
<span class="4469307411224397441" onmouseenter="enter('4469307411224397441');" onmouseout="out('4469307411224397441');" style="">  62 import nodomain.freeyourgadget.gadgetbridge.entities.Device;                                             </span>
<span class="-3040591784778258047" onmouseenter="enter('-3040591784778258047');" onmouseout="out('-3040591784778258047');" style="">  63 import nodomain.freeyourgadget.gadgetbridge.entities.DeviceAttributes;                                   </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  64 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                               </span>
<span class="-1351120908834620909" onmouseenter="enter('-1351120908834620909');" onmouseout="out('-1351120908834620909');" style="">  65 import nodomain.freeyourgadget.gadgetbridge.impl.GBDeviceCandidate;                                      </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  66 import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                            </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  67 import org.slf4j.Logger;                                                                                 </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  68 import org.slf4j.LoggerFactory;                                                                          </span>
<span  style="">  69                                                                                                          </span>
<span  style="">  70                                                                                                          </span>
<span class="-7246281683414074276" onmouseenter="enter('-7246281683414074276');" onmouseout="out('-7246281683414074276');" style="">  71 public class DeviceHelper {                                                                              </span>
<span class="-7179396888031157102" onmouseenter="enter('-7179396888031157102');" onmouseout="out('-7179396888031157102');" style="">  72     private static final Logger LOG = LoggerFactory.getLogger(DeviceHelper.class);                       </span>
<span  style="">  73                                                                                                          </span>
<span class="1809257599229613641" onmouseenter="enter('1809257599229613641');" onmouseout="out('1809257599229613641');" style="">  74     private static final DeviceHelper instance = new DeviceHelper();                                     </span>
<span  style="">  75                                                                                                          </span>
<span class="-2529270569084750615" onmouseenter="enter('-2529270569084750615');" onmouseout="out('-2529270569084750615');" style="">  76     public static DeviceHelper getInstance() {                                                           </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style="">  77         return instance;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78     }                                                                                                    </span>
<span  style="">  79                                                                                                          </span>
<span class="1477217874849666720" onmouseenter="enter('1477217874849666720');" onmouseout="out('1477217874849666720');" style="">  80     // lazily created                                                                                    </span>
<span class="1477217874849666720" onmouseenter="enter('1477217874849666720');" onmouseout="out('1477217874849666720');" style="">  81     // lazily created                                                                                    </span>
<span class="-1712942286504952582" onmouseenter="enter('-1712942286504952582');" onmouseout="out('-1712942286504952582');" style="">  82     private List&lt;DeviceCoordinator&gt; coordinators;                                                        </span>
<span  style="">  83                                                                                                          </span>
<span class="311137942692300687" onmouseenter="enter('311137942692300687');" onmouseout="out('311137942692300687');" style="">  84     public DeviceType getSupportedType(GBDeviceCandidate candidate) {                                    </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style="">  85         for (DeviceCoordinator coordinator : getAllCoordinators()) {                                     </span>
<span class="-6820733209455168532" onmouseenter="enter('-6820733209455168532');" onmouseout="out('-6820733209455168532');" style="">  86             DeviceType deviceType = coordinator.getSupportedType(candidate);                             </span>
<span class="5988197616953595638" onmouseenter="enter('5988197616953595638');" onmouseout="out('5988197616953595638');" style="">  87             if (deviceType.isSupported()) {                                                              </span>
<span class="7940989030742339244" onmouseenter="enter('7940989030742339244');" onmouseout="out('7940989030742339244');" style="">  88                 return deviceType;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  89             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90         }                                                                                                </span>
<span class="2733059175620106263" onmouseenter="enter('2733059175620106263');" onmouseout="out('2733059175620106263');" style="">  91         return DeviceType.UNKNOWN;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92     }                                                                                                    </span>
<span  style="">  93                                                                                                          </span>
<span class="-262573812517796151" onmouseenter="enter('-262573812517796151');" onmouseout="out('-262573812517796151');" style="">  94     public boolean getSupportedType(GBDevice device) {                                                   </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style="">  95         for (DeviceCoordinator coordinator : getAllCoordinators()) {                                     </span>
<span class="5941075233090253090" onmouseenter="enter('5941075233090253090');" onmouseout="out('5941075233090253090');" style="">  96             if (coordinator.supports(device)) {                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  97                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 100         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 101     }                                                                                                    </span>
<span  style=""> 102                                                                                                          </span>
<span class="8714408707514425620" onmouseenter="enter('8714408707514425620');" onmouseout="out('8714408707514425620');" style=""> 103     public GBDevice findAvailableDevice(String deviceAddress, Context context) {                         </span>
<span class="6902685203421244703" onmouseenter="enter('6902685203421244703');" onmouseout="out('6902685203421244703');" style=""> 104         Set&lt;GBDevice&gt; availableDevices = getAvailableDevices(context);                                   </span>
<span class="-2018824320601815207" onmouseenter="enter('-2018824320601815207');" onmouseout="out('-2018824320601815207');" style=""> 105         for (GBDevice availableDevice : availableDevices) {                                              </span>
<span class="4097611337760018422" onmouseenter="enter('4097611337760018422');" onmouseout="out('4097611337760018422');" style=""> 106             if (deviceAddress.equals(availableDevice.getAddress())) {                                    </span>
<span class="-4049705911540768690" onmouseenter="enter('-4049705911540768690');" onmouseout="out('-4049705911540768690');" style=""> 107                 return availableDevice;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 110         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111     }                                                                                                    </span>
<span  style=""> 112                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 113     /**                                                                                                  </span>
<span class="8378781591414513441" onmouseenter="enter('8378781591414513441');" onmouseout="out('8378781591414513441');" style=""> 114      * Returns the list of all available devices that are supported by Gadgetbridge.                     </span>
<span class="2803654733430477892" onmouseenter="enter('2803654733430477892');" onmouseout="out('2803654733430477892');" style=""> 115      * Note that no state is known about the returned devices. Even if one of those                      </span>
<span class="2191300811029215791" onmouseenter="enter('2191300811029215791');" onmouseout="out('2191300811029215791');" style=""> 116      * devices is connected, it will report the default not-connected state.                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 117      *                                                                                                   </span>
<span class="5072949809304800738" onmouseenter="enter('5072949809304800738');" onmouseout="out('5072949809304800738');" style=""> 118      * Clients interested in the &quot;live&quot; devices being managed should use the class                       </span>
<span class="-803398468380583905" onmouseenter="enter('-803398468380583905');" onmouseout="out('-803398468380583905');" style=""> 119      * DeviceManager.                                                                                    </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style=""> 120      * @param context                                                                                    </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 121      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 122      */                                                                                                  </span>
<span class="8379590169787447751" onmouseenter="enter('8379590169787447751');" onmouseout="out('8379590169787447751');" style=""> 123     public Set&lt;GBDevice&gt; getAvailableDevices(Context context) {                                          </span>
<span class="-8531133286137168432" onmouseenter="enter('-8531133286137168432');" onmouseout="out('-8531133286137168432');" style=""> 124         BluetoothAdapter btAdapter = BluetoothAdapter.getDefaultAdapter();                               </span>
<span  style=""> 125                                                                                                          </span>
<span class="6162896112907059694" onmouseenter="enter('6162896112907059694');" onmouseout="out('6162896112907059694');" style=""> 126         Set&lt;GBDevice&gt; availableDevices = new LinkedHashSet&lt;GBDevice&gt;();                                  </span>
<span  style=""> 127                                                                                                          </span>
<span class="6119012127556406196" onmouseenter="enter('6119012127556406196');" onmouseout="out('6119012127556406196');" style=""> 128         if (btAdapter == null) {                                                                         </span>
<span class="-8992361903677634121" onmouseenter="enter('-8992361903677634121');" onmouseout="out('-8992361903677634121');" style=""><abbr title=" 129             GB.toast(context, context.getString(R.string.bluetooth_is_not_supported_), Toast.LENGTH_SHORT, GB.WARN);"> 129             GB.toast(context, context.getString(R.string.bluetooth_is_not_supported_), Toast.LENGTH_SHORTðŸ”µ</abbr></span>
<span class="7082490255995433787" onmouseenter="enter('7082490255995433787');" onmouseout="out('7082490255995433787');" style=""> 130         } else if (!btAdapter.isEnabled()) {                                                             </span>
<span class="6363457106270493050" onmouseenter="enter('6363457106270493050');" onmouseout="out('6363457106270493050');" style=""><abbr title=" 131             GB.toast(context, context.getString(R.string.bluetooth_is_disabled_), Toast.LENGTH_SHORT, GB.WARN);"> 131             GB.toast(context, context.getString(R.string.bluetooth_is_disabled_), Toast.LENGTH_SHORT, GB.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 132         }                                                                                                </span>
<span class="-3377224776558714047" onmouseenter="enter('-3377224776558714047');" onmouseout="out('-3377224776558714047');" style=""> 133         List&lt;GBDevice&gt; dbDevices = getDatabaseDevices();                                                 </span>
<span class="-6353595300668739192" onmouseenter="enter('-6353595300668739192');" onmouseout="out('-6353595300668739192');" style=""> 134         availableDevices.addAll(dbDevices);                                                              </span>
<span  style=""> 135                                                                                                          </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 136         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="-6735964885073070564" onmouseenter="enter('-6735964885073070564');" onmouseout="out('-6735964885073070564');" style=""> 137         String miAddr = prefs.getString(MiBandConst.PREF_MIBAND_ADDRESS, &quot;&quot;);                            </span>
<span class="-8301264850737854302" onmouseenter="enter('-8301264850737854302');" onmouseout="out('-8301264850737854302');" style=""> 138         if (miAddr.length() &gt; 0) {                                                                       </span>
<span class="-1526992099316589239" onmouseenter="enter('-1526992099316589239');" onmouseout="out('-1526992099316589239');" style=""> 139             GBDevice miDevice = new GBDevice(miAddr, &quot;MI&quot;, DeviceType.MIBAND);                           </span>
<span class="-7870407245378512448" onmouseenter="enter('-7870407245378512448');" onmouseout="out('-7870407245378512448');" style=""> 140             availableDevices.add(miDevice);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141         }                                                                                                </span>
<span  style=""> 142                                                                                                          </span>
<span class="7681435883288593574" onmouseenter="enter('7681435883288593574');" onmouseout="out('7681435883288593574');" style=""> 143         String pebbleEmuAddr = prefs.getString(&quot;pebble_emu_addr&quot;, &quot;&quot;);                                   </span>
<span class="-1326069915361848697" onmouseenter="enter('-1326069915361848697');" onmouseout="out('-1326069915361848697');" style=""> 144         String pebbleEmuPort = prefs.getString(&quot;pebble_emu_port&quot;, &quot;&quot;);                                   </span>
<span class="-3516508780907274278" onmouseenter="enter('-3516508780907274278');" onmouseout="out('-3516508780907274278');" style=""> 145         if (pebbleEmuAddr.length() &gt;= 7 &amp;&amp; pebbleEmuPort.length() &gt; 0) {                                 </span>
<span class="-6361666938108258288" onmouseenter="enter('-6361666938108258288');" onmouseout="out('-6361666938108258288');" style=""><abbr title=" 146             GBDevice pebbleEmuDevice = new GBDevice(pebbleEmuAddr + &quot;:&quot; + pebbleEmuPort, &quot;Pebble qemu&quot;, DeviceType.PEBBLE);"> 146             GBDevice pebbleEmuDevice = new GBDevice(pebbleEmuAddr + &quot;:&quot; + pebbleEmuPort, &quot;Pebble qemu&quot;, DðŸ”µ</abbr></span>
<span class="6982341110438288246" onmouseenter="enter('6982341110438288246');" onmouseout="out('6982341110438288246');" style=""> 147             availableDevices.add(pebbleEmuDevice);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148         }                                                                                                </span>
<span class="-6314022782668503707" onmouseenter="enter('-6314022782668503707');" onmouseout="out('-6314022782668503707');" style=""> 149         return availableDevices;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150     }                                                                                                    </span>
<span  style=""> 151                                                                                                          </span>
<span class="5388093685262108156" onmouseenter="enter('5388093685262108156');" onmouseout="out('5388093685262108156');" style=""> 152     public GBDevice toSupportedDevice(BluetoothDevice device) {                                          </span>
<span class="8849584801955056895" onmouseenter="enter('8849584801955056895');" onmouseout="out('8849584801955056895');" style=""><abbr title=" 153         GBDeviceCandidate candidate = new GBDeviceCandidate(device, GBDevice.RSSI_UNKNOWN, device.getUuids());"> 153         GBDeviceCandidate candidate = new GBDeviceCandidate(device, GBDevice.RSSI_UNKNOWN, device.getUuidðŸ”µ</abbr></span>
<span class="-318413986788990089" onmouseenter="enter('-318413986788990089');" onmouseout="out('-318413986788990089');" style=""> 154         return toSupportedDevice(candidate);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155     }                                                                                                    </span>
<span  style=""> 156                                                                                                          </span>
<span class="-4051355324352763386" onmouseenter="enter('-4051355324352763386');" onmouseout="out('-4051355324352763386');" style=""> 157     public GBDevice toSupportedDevice(GBDeviceCandidate candidate) {                                     </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style=""> 158         for (DeviceCoordinator coordinator : getAllCoordinators()) {                                     </span>
<span class="7746899366251330745" onmouseenter="enter('7746899366251330745');" onmouseout="out('7746899366251330745');" style=""> 159             if (coordinator.supports(candidate)) {                                                       </span>
<span class="-7778797991172760546" onmouseenter="enter('-7778797991172760546');" onmouseout="out('-7778797991172760546');" style=""> 160                 return coordinator.createDevice(candidate);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 163         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164     }                                                                                                    </span>
<span  style=""> 165                                                                                                          </span>
<span class="-5651035503093566961" onmouseenter="enter('-5651035503093566961');" onmouseout="out('-5651035503093566961');" style=""> 166     public DeviceCoordinator getCoordinator(GBDeviceCandidate device) {                                  </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 167         synchronized (this) {                                                                            </span>
<span class="5581566123633040849" onmouseenter="enter('5581566123633040849');" onmouseout="out('5581566123633040849');" style=""> 168             for (DeviceCoordinator coord : getAllCoordinators()) {                                       </span>
<span class="-456707873662890645" onmouseenter="enter('-456707873662890645');" onmouseout="out('-456707873662890645');" style=""> 169                 if (coord.supports(device)) {                                                            </span>
<span class="-7554628627552477108" onmouseenter="enter('-7554628627552477108');" onmouseout="out('-7554628627552477108');" style=""> 170                     return coord;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173         }                                                                                                </span>
<span class="-8562800692924603282" onmouseenter="enter('-8562800692924603282');" onmouseout="out('-8562800692924603282');" style=""> 174         return new UnknownDeviceCoordinator();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175     }                                                                                                    </span>
<span  style=""> 176                                                                                                          </span>
<span class="2088636936691911169" onmouseenter="enter('2088636936691911169');" onmouseout="out('2088636936691911169');" style=""> 177     public DeviceCoordinator getCoordinator(GBDevice device) {                                           </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 178         synchronized (this) {                                                                            </span>
<span class="5581566123633040849" onmouseenter="enter('5581566123633040849');" onmouseout="out('5581566123633040849');" style=""> 179             for (DeviceCoordinator coord : getAllCoordinators()) {                                       </span>
<span class="-456707873662890645" onmouseenter="enter('-456707873662890645');" onmouseout="out('-456707873662890645');" style=""> 180                 if (coord.supports(device)) {                                                            </span>
<span class="-7554628627552477108" onmouseenter="enter('-7554628627552477108');" onmouseout="out('-7554628627552477108');" style=""> 181                     return coord;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184         }                                                                                                </span>
<span class="-8562800692924603282" onmouseenter="enter('-8562800692924603282');" onmouseout="out('-8562800692924603282');" style=""> 185         return new UnknownDeviceCoordinator();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186     }                                                                                                    </span>
<span  style=""> 187                                                                                                          </span>
<span class="610514956454116910" onmouseenter="enter('610514956454116910');" onmouseout="out('610514956454116910');" style=""> 188     public synchronized List&lt;DeviceCoordinator&gt; getAllCoordinators() {                                   </span>
<span class="-5653167495443109834" onmouseenter="enter('-5653167495443109834');" onmouseout="out('-5653167495443109834');" style=""> 189         if (coordinators == null) {                                                                      </span>
<span class="6535460489050040084" onmouseenter="enter('6535460489050040084');" onmouseout="out('6535460489050040084');" style=""> 190             coordinators = createCoordinators();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191         }                                                                                                </span>
<span class="7608420427240005700" onmouseenter="enter('7608420427240005700');" onmouseout="out('7608420427240005700');" style=""> 192         return coordinators;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193     }                                                                                                    </span>
<span  style=""> 194                                                                                                          </span>
<span class="5367250377489878658" onmouseenter="enter('5367250377489878658');" onmouseout="out('5367250377489878658');" style=""> 195     private List&lt;DeviceCoordinator&gt; createCoordinators() {                                               </span>
<span class="-8659885373666106675" onmouseenter="enter('-8659885373666106675');" onmouseout="out('-8659885373666106675');" style=""> 196         List&lt;DeviceCoordinator&gt; result = new ArrayList&lt;&gt;();                                              </span>
<span class="2561754256941409985" onmouseenter="enter('2561754256941409985');" onmouseout="out('2561754256941409985');" style=""><abbr title=" 197         result.add(new MiScale2DeviceCoordinator());// Note: must come before MiBand2 because detection is hacky, atm"> 197         result.add(new MiScale2DeviceCoordinator());// Note: must come before MiBand2 because detection iðŸ”µ</abbr></span>
<span  style=""> 198                                                                                                          </span>
<span class="5734434874249856866" onmouseenter="enter('5734434874249856866');" onmouseout="out('5734434874249856866');" style=""><abbr title=" 199         result.add(new AmazfitBipCoordinator());// Note: must come before MiBand2 because detection is hacky, atm"> 199         result.add(new AmazfitBipCoordinator());// Note: must come before MiBand2 because detection is haðŸ”µ</abbr></span>
<span  style=""> 200                                                                                                          </span>
<span class="-8251040711968654238" onmouseenter="enter('-8251040711968654238');" onmouseout="out('-8251040711968654238');" style=""><abbr title=" 201         result.add(new AmazfitCorCoordinator());// Note: must come before MiBand2 because detection is hacky, atm"> 201         result.add(new AmazfitCorCoordinator());// Note: must come before MiBand2 because detection is haðŸ”µ</abbr></span>
<span  style=""> 202                                                                                                          </span>
<span class="-3964958242215749580" onmouseenter="enter('-3964958242215749580');" onmouseout="out('-3964958242215749580');" style=""><abbr title=" 203         result.add(new MiBand3Coordinator());// Note: must come before MiBand2 because detection is hacky, atm"> 203         result.add(new MiBand3Coordinator());// Note: must come before MiBand2 because detection is hackyðŸ”µ</abbr></span>
<span  style=""> 204                                                                                                          </span>
<span class="4700496070211867500" onmouseenter="enter('4700496070211867500');" onmouseout="out('4700496070211867500');" style=""><abbr title=" 205         result.add(new MiBand2HRXCoordinator());// Note: must come before MiBand2 because detection is hacky, atm"> 205         result.add(new MiBand2HRXCoordinator());// Note: must come before MiBand2 because detection is haðŸ”µ</abbr></span>
<span  style=""> 206                                                                                                          </span>
<span class="1879238275993691961" onmouseenter="enter('1879238275993691961');" onmouseout="out('1879238275993691961');" style=""><abbr title=" 207         result.add(new MiBand2Coordinator());// Note: MiBand2 must come before MiBand because detection is hacky, atm"> 207         result.add(new MiBand2Coordinator());// Note: MiBand2 must come before MiBand because detection iðŸ”µ</abbr></span>
<span  style=""> 208                                                                                                          </span>
<span class="-5481576563447422020" onmouseenter="enter('-5481576563447422020');" onmouseout="out('-5481576563447422020');" style=""> 209         result.add(new MiBandCoordinator());                                                             </span>
<span class="6190871288444688318" onmouseenter="enter('6190871288444688318');" onmouseout="out('6190871288444688318');" style=""> 210         result.add(new PebbleCoordinator());                                                             </span>
<span class="6793070632976028692" onmouseenter="enter('6793070632976028692');" onmouseout="out('6793070632976028692');" style=""> 211         result.add(new VibratissimoCoordinator());                                                       </span>
<span class="5131269263148398875" onmouseenter="enter('5131269263148398875');" onmouseout="out('5131269263148398875');" style=""> 212         result.add(new LiveviewCoordinator());                                                           </span>
<span class="1595212057085836033" onmouseenter="enter('1595212057085836033');" onmouseout="out('1595212057085836033');" style=""> 213         result.add(new HPlusCoordinator());                                                              </span>
<span class="3332735665937364473" onmouseenter="enter('3332735665937364473');" onmouseout="out('3332735665937364473');" style=""> 214         result.add(new No1F1Coordinator());                                                              </span>
<span class="3699860687323138670" onmouseenter="enter('3699860687323138670');" onmouseout="out('3699860687323138670');" style=""> 215         result.add(new MakibesF68Coordinator());                                                         </span>
<span class="-5481362583103427017" onmouseenter="enter('-5481362583103427017');" onmouseout="out('-5481362583103427017');" style=""> 216         result.add(new Q8Coordinator());                                                                 </span>
<span class="8067903992183633568" onmouseenter="enter('8067903992183633568');" onmouseout="out('8067903992183633568');" style=""> 217         result.add(new EXRIZUK8Coordinator());                                                           </span>
<span class="-6898555743395836902" onmouseenter="enter('-6898555743395836902');" onmouseout="out('-6898555743395836902');" style=""> 218         result.add(new TeclastH30Coordinator());                                                         </span>
<span class="-5904825641300533735" onmouseenter="enter('-5904825641300533735');" onmouseout="out('-5904825641300533735');" style=""> 219         result.add(new XWatchCoordinator());                                                             </span>
<span class="-1342788656175506629" onmouseenter="enter('-1342788656175506629');" onmouseout="out('-1342788656175506629');" style=""> 220         result.add(new ZeTimeCoordinator());                                                             </span>
<span class="-5172501225405919533" onmouseenter="enter('-5172501225405919533');" onmouseout="out('-5172501225405919533');" style=""> 221         result.add(new ID115Coordinator());                                                              </span>
<span class="-5671094850717710707" onmouseenter="enter('-5671094850717710707');" onmouseout="out('-5671094850717710707');" style=""> 222         result.add(new Watch9DeviceCoordinator());                                                       </span>
<span class="9072674293611744445" onmouseenter="enter('9072674293611744445');" onmouseout="out('9072674293611744445');" style=""> 223         result.add(new Roidmi1Coordinator());                                                            </span>
<span class="-9202027692962819030" onmouseenter="enter('-9202027692962819030');" onmouseout="out('-9202027692962819030');" style=""> 224         result.add(new Roidmi3Coordinator());                                                            </span>
<span class="-3417192720312420869" onmouseenter="enter('-3417192720312420869');" onmouseout="out('-3417192720312420869');" style=""> 225         result.add(new CasioGB6900DeviceCoordinator());                                                  </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 226         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227     }                                                                                                    </span>
<span  style=""> 228                                                                                                          </span>
<span class="3182429837156194527" onmouseenter="enter('3182429837156194527');" onmouseout="out('3182429837156194527');" style=""> 229     private List&lt;GBDevice&gt; getDatabaseDevices() {                                                        </span>
<span class="840115391726385579" onmouseenter="enter('840115391726385579');" onmouseout="out('840115391726385579');" style=""> 230         List&lt;GBDevice&gt; result = new ArrayList&lt;&gt;();                                                       </span>
<span class="1983564060177123024" onmouseenter="enter('1983564060177123024');" onmouseout="out('1983564060177123024');" style=""> 231         try (DBHandler lockHandler = GBApplication.acquireDB()) {                                        </span>
<span class="8940139265610706617" onmouseenter="enter('8940139265610706617');" onmouseout="out('8940139265610706617');" style=""> 232             List&lt;Device&gt; activeDevices = DBHelper.getActiveDevices(lockHandler.getDaoSession());         </span>
<span class="6007915031492495476" onmouseenter="enter('6007915031492495476');" onmouseout="out('6007915031492495476');" style=""> 233             for (Device dbDevice : activeDevices) {                                                      </span>
<span class="-4172089683425383837" onmouseenter="enter('-4172089683425383837');" onmouseout="out('-4172089683425383837');" style=""> 234                 GBDevice gbDevice = toGBDevice(dbDevice);                                                </span>
<span class="-2890086854640002908" onmouseenter="enter('-2890086854640002908');" onmouseout="out('-2890086854640002908');" style=""> 235                 if (gbDevice != null &amp;&amp; DeviceHelper.getInstance().getSupportedType(gbDevice)) {         </span>
<span class="5237701413799306923" onmouseenter="enter('5237701413799306923');" onmouseout="out('5237701413799306923');" style=""> 236                     result.add(gbDevice);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238             }                                                                                            </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 239             return result;                                                                               </span>
<span  style=""> 240                                                                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 241         } catch (Exception e) {                                                                          </span>
<span class="-187514096336122593" onmouseenter="enter('-187514096336122593');" onmouseout="out('-187514096336122593');" style=""> 242             GB.toast(&quot;Error retrieving devices from database&quot;, Toast.LENGTH_SHORT, GB.ERROR);            </span>
<span class="-6093315130064080899" onmouseenter="enter('-6093315130064080899');" onmouseout="out('-6093315130064080899');" style=""> 243             return Collections.emptyList();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245     }                                                                                                    </span>
<span  style=""> 246                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 247     /**                                                                                                  </span>
<span class="-8078490980994469589" onmouseenter="enter('-8078490980994469589');" onmouseout="out('-8078490980994469589');" style=""> 248      * Converts a known device from the database to a GBDevice.                                          </span>
<span class="7713530361969283549" onmouseenter="enter('7713530361969283549');" onmouseout="out('7713530361969283549');" style=""> 249      * Note: The device might not be supported anymore, so callers should verify that.                   </span>
<span class="-6700615312658933431" onmouseenter="enter('-6700615312658933431');" onmouseout="out('-6700615312658933431');" style=""> 250      * @param dbDevice                                                                                   </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 251      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 252      */                                                                                                  </span>
<span class="2606688045344874841" onmouseenter="enter('2606688045344874841');" onmouseout="out('2606688045344874841');" style=""> 253     public GBDevice toGBDevice(Device dbDevice) {                                                        </span>
<span class="1652882496457315529" onmouseenter="enter('1652882496457315529');" onmouseout="out('1652882496457315529');" style=""> 254         DeviceType deviceType = DeviceType.fromKey(dbDevice.getType());                                  </span>
<span class="5855596366176965620" onmouseenter="enter('5855596366176965620');" onmouseout="out('5855596366176965620');" style=""> 255         GBDevice gbDevice = new GBDevice(dbDevice.getIdentifier(), dbDevice.getName(), deviceType);      </span>
<span class="9004683367408636271" onmouseenter="enter('9004683367408636271');" onmouseout="out('9004683367408636271');" style=""> 256         List&lt;DeviceAttributes&gt; deviceAttributesList = dbDevice.getDeviceAttributesList();                </span>
<span class="-694602091282451513" onmouseenter="enter('-694602091282451513');" onmouseout="out('-694602091282451513');" style=""> 257         if (deviceAttributesList.size() &gt; 0) {                                                           </span>
<span class="-3212481810427050137" onmouseenter="enter('-3212481810427050137');" onmouseout="out('-3212481810427050137');" style=""> 258             gbDevice.setModel(dbDevice.getModel());                                                      </span>
<span class="354034525378834429" onmouseenter="enter('354034525378834429');" onmouseout="out('354034525378834429');" style=""> 259             DeviceAttributes attrs = deviceAttributesList.get(0);                                        </span>
<span class="-8620968705551486244" onmouseenter="enter('-8620968705551486244');" onmouseout="out('-8620968705551486244');" style=""> 260             gbDevice.setFirmwareVersion(attrs.getFirmwareVersion1());                                    </span>
<span class="-2407126446549023078" onmouseenter="enter('-2407126446549023078');" onmouseout="out('-2407126446549023078');" style=""> 261             gbDevice.setFirmwareVersion2(attrs.getFirmwareVersion2());                                   </span>
<span class="6046344818374293876" onmouseenter="enter('6046344818374293876');" onmouseout="out('6046344818374293876');" style=""> 262             gbDevice.setVolatileAddress(attrs.getVolatileIdentifier());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263         }                                                                                                </span>
<span  style=""> 264                                                                                                          </span>
<span class="-9206390224358820403" onmouseenter="enter('-9206390224358820403');" onmouseout="out('-9206390224358820403');" style=""> 265         return gbDevice;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266     }                                                                                                    </span>
<span  style=""> 267                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 268     /**                                                                                                  </span>
<span class="8342379087536305506" onmouseenter="enter('8342379087536305506');" onmouseout="out('8342379087536305506');" style=""> 269      * Attempts to removing the bonding with the given device. Returns true                              </span>
<span class="-9119695278064429966" onmouseenter="enter('-9119695278064429966');" onmouseout="out('-9119695278064429966');" style=""> 270      * if bonding was supposedly successful and false if anything went wrong                             </span>
<span class="1113685536488546558" onmouseenter="enter('1113685536488546558');" onmouseout="out('1113685536488546558');" style=""> 271      * @param device                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 272      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 273      */                                                                                                  </span>
<span class="-8639258336155222707" onmouseenter="enter('-8639258336155222707');" onmouseout="out('-8639258336155222707');" style=""> 274     public boolean removeBond(GBDevice device) throws GBException {                                      </span>
<span class="5527337570660915921" onmouseenter="enter('5527337570660915921');" onmouseout="out('5527337570660915921');" style=""> 275         BluetoothAdapter defaultAdapter = BluetoothAdapter.getDefaultAdapter();                          </span>
<span class="6535479181747156907" onmouseenter="enter('6535479181747156907');" onmouseout="out('6535479181747156907');" style=""> 276         if (defaultAdapter != null) {                                                                    </span>
<span class="-6099553505981596341" onmouseenter="enter('-6099553505981596341');" onmouseout="out('-6099553505981596341');" style=""> 277             BluetoothDevice remoteDevice = defaultAdapter.getRemoteDevice(device.getAddress());          </span>
<span class="-6902931335510683219" onmouseenter="enter('-6902931335510683219');" onmouseout="out('-6902931335510683219');" style=""> 278             if (remoteDevice != null) {                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 279                 try {                                                                                    </span>
<span class="6635920500800020475" onmouseenter="enter('6635920500800020475');" onmouseout="out('6635920500800020475');" style=""> 280                     Method method = BluetoothDevice.class.getMethod(&quot;removeBond&quot;, (Class[]) null);       </span>
<span class="4415940968731599000" onmouseenter="enter('4415940968731599000');" onmouseout="out('4415940968731599000');" style=""> 281                     Object result = method.invoke(remoteDevice, (Object[]) null);                        </span>
<span class="6302849373420131955" onmouseenter="enter('6302849373420131955');" onmouseout="out('6302849373420131955');" style=""> 282                     return Boolean.TRUE.equals(result);                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 283                 } catch (Exception e) {                                                                  </span>
<span class="8351198176145398153" onmouseenter="enter('8351198176145398153');" onmouseout="out('8351198176145398153');" style=""> 284                     throw new GBException(&quot;Error removing bond to device: &quot; + device, e);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 288         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290 }                                                                                                        </span>






</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="-5200878630337924680" onmouseenter="enter('-5200878630337924680');" onmouseout="out('-5200878630337924680');" style="">   1  /*  Copyright (C) 2015-2018 0nse, Andreas Shimokawa, Carsten Pfeiffer,                                            </span>
<span class="3588757660813990934" onmouseenter="enter('3588757660813990934');" onmouseout="out('3588757660813990934');" style="">   2      Daniele Gobbetti, JoaÌƒo Paulo Barraca, Kranz, ladbsoft, maxirnilian,                                          </span>
<span class="-5208925406365664903" onmouseenter="enter('-5208925406365664903');" onmouseout="out('-5208925406365664903');" style="">   3      protomors, Quallenauge, Sami Alaoui, tiparega, Vadim Kaushan                                                  </span>
<span  style="">   4                                                                                                                    </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   5      This file is part of Gadgetbridge.                                                                            </span>
<span  style="">   6                                                                                                                    </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   7      Gadgetbridge is free software: you can redistribute it and/or modify                                          </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   8      it under the terms of the GNU Affero General Public License as published                                      </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   9      by the Free Software Foundation, either version 3 of the License, or                                          </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">  10      (at your option) any later version.                                                                           </span>
<span  style="">  11                                                                                                                    </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  12      Gadgetbridge is distributed in the hope that it will be useful,                                               </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  13      but WITHOUT ANY WARRANTY; without even the implied warranty of                                                </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  14      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                                 </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  15      GNU Affero General Public License for more details.                                                           </span>
<span  style="">  16                                                                                                                    </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  17      You should have received a copy of the GNU Affero General Public License                                      </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  18      along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                                      </span>
<span class="-5427540757158912607" onmouseenter="enter('-5427540757158912607');" onmouseout="out('-5427540757158912607');" style="">  19  package nodomain.freeyourgadget.gadgetbridge.util;                                                                </span>
<span  style="">  20                                                                                                                    </span>
<span class="-8028506601233233593" onmouseenter="enter('-8028506601233233593');" onmouseout="out('-8028506601233233593');" style="">  21  import android.bluetooth.BluetoothAdapter;                                                                        </span>
<span class="2859895893394018468" onmouseenter="enter('2859895893394018468');" onmouseout="out('2859895893394018468');" style="">  22  import android.bluetooth.BluetoothDevice;                                                                         </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  23  import android.content.Context;                                                                                   </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  24  import android.support.annotation.NonNull;                                                                        </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  25  import android.widget.Toast;                                                                                      </span>
<span  style="">  26                                                                                                                    </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  27  import org.slf4j.Logger;                                                                                          </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  28  import org.slf4j.LoggerFactory;                                                                                   </span>
<span  style="">  29                                                                                                                    </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style="">  30  import java.lang.reflect.Method;                                                                                  </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  31  import java.util.ArrayList;                                                                                       </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  32  import java.util.Collections;                                                                                     </span>
<span class="8609815663253459563" onmouseenter="enter('8609815663253459563');" onmouseout="out('8609815663253459563');" style="">  33  import java.util.LinkedHashSet;                                                                                   </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  34  import java.util.List;                                                                                            </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  35  import java.util.Set;                                                                                             </span>
<span  style="">  36                                                                                                                    </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  37  import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                                        </span>
<span class="-1471644270559892265" onmouseenter="enter('-1471644270559892265');" onmouseout="out('-1471644270559892265');" style="">  38  import nodomain.freeyourgadget.gadgetbridge.GBException;                                                          </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  39  import nodomain.freeyourgadget.gadgetbridge.R;                                                                    </span>
<span class="6679513218772020996" onmouseenter="enter('6679513218772020996');" onmouseout="out('6679513218772020996');" style="">  40  import nodomain.freeyourgadget.gadgetbridge.database.DBHandler;                                                   </span>
<span class="4338650188295783318" onmouseenter="enter('4338650188295783318');" onmouseout="out('4338650188295783318');" style="">  41  import nodomain.freeyourgadget.gadgetbridge.database.DBHelper;                                                    </span>
<span class="6852267181356803593" onmouseenter="enter('6852267181356803593');" onmouseout="out('6852267181356803593');" style="">  42  import nodomain.freeyourgadget.gadgetbridge.devices.DeviceCoordinator;                                            </span>
<span class="6706901399385249836" onmouseenter="enter('6706901399385249836');" onmouseout="out('6706901399385249836');" style="">  43  import nodomain.freeyourgadget.gadgetbridge.devices.UnknownDeviceCoordinator;                                     </span>
<span class="-2946949855778130048" onmouseenter="enter('-2946949855778130048');" onmouseout="out('-2946949855778130048');" style="">  44  import nodomain.freeyourgadget.gadgetbridge.devices.casiogb6900.CasioGB6900DeviceCoordinator;                     </span>
<span class="1831953906102313699" onmouseenter="enter('1831953906102313699');" onmouseout="out('1831953906102313699');" style="">  45  import nodomain.freeyourgadget.gadgetbridge.devices.hplus.EXRIZUK8Coordinator;                                    </span>
<span class="-4973236722115174269" onmouseenter="enter('-4973236722115174269');" onmouseout="out('-4973236722115174269');" style="">  46  import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusCoordinator;                                       </span>
<span class="9204923228813511004" onmouseenter="enter('9204923228813511004');" onmouseout="out('9204923228813511004');" style="">  47  import nodomain.freeyourgadget.gadgetbridge.devices.hplus.MakibesF68Coordinator;                                  </span>
<span class="3078186574701620561" onmouseenter="enter('3078186574701620561');" onmouseout="out('3078186574701620561');" style="">  48  import nodomain.freeyourgadget.gadgetbridge.devices.hplus.Q8Coordinator;                                          </span>
<span class="7272678525497799472" onmouseenter="enter('7272678525497799472');" onmouseout="out('7272678525497799472');" style="">  49  import nodomain.freeyourgadget.gadgetbridge.devices.huami.amazfitbip.AmazfitBipCoordinator;                       </span>
<span class="9054045240569218327" onmouseenter="enter('9054045240569218327');" onmouseout="out('9054045240569218327');" style="">  50  import nodomain.freeyourgadget.gadgetbridge.devices.huami.amazfitcor.AmazfitCorCoordinator;                       </span>
<span class="3142529718171766552" onmouseenter="enter('3142529718171766552');" onmouseout="out('3142529718171766552');" style="">  51  import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband2.MiBand2Coordinator;                             </span>
<span class="-336757578436190430" onmouseenter="enter('-336757578436190430');" onmouseout="out('-336757578436190430');" style="">  52  import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband2.MiBand2HRXCoordinator;                          </span>
<span class="-4959563064822725763" onmouseenter="enter('-4959563064822725763');" onmouseout="out('-4959563064822725763');" style="">  53  import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband3.MiBand3Coordinator;                             </span>
<span class="-8257747607607390324" onmouseenter="enter('-8257747607607390324');" onmouseout="out('-8257747607607390324');" style="">  54  import nodomain.freeyourgadget.gadgetbridge.devices.id115.ID115Coordinator;                                       </span>
<span class="-8097912228071563035" onmouseenter="enter('-8097912228071563035');" onmouseout="out('-8097912228071563035');" style="">  55  import nodomain.freeyourgadget.gadgetbridge.devices.jyou.TeclastH30Coordinator;                                   </span>
<span class="5408583638288829167" onmouseenter="enter('5408583638288829167');" onmouseout="out('5408583638288829167');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  56 +import nodomain.freeyourgadget.gadgetbridge.devices.miscale2.MiScale2DeviceCoordinator;                           </span>
<span class="-8566867472430384418" onmouseenter="enter('-8566867472430384418');" onmouseout="out('-8566867472430384418');" style="">  57  import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi1Coordinator;                                    </span>
<span class="6916358320845634609" onmouseenter="enter('6916358320845634609');" onmouseout="out('6916358320845634609');" style="">  58  import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi3Coordinator;                                    </span>
<span class="-2735380447578037326" onmouseenter="enter('-2735380447578037326');" onmouseout="out('-2735380447578037326');" style="">  59  import nodomain.freeyourgadget.gadgetbridge.devices.liveview.LiveviewCoordinator;                                 </span>
<span class="7979044249022447808" onmouseenter="enter('7979044249022447808');" onmouseout="out('7979044249022447808');" style="">  60  import nodomain.freeyourgadget.gadgetbridge.devices.miband.MiBandConst;                                           </span>
<span class="-3275943466867468904" onmouseenter="enter('-3275943466867468904');" onmouseout="out('-3275943466867468904');" style="">  61  import nodomain.freeyourgadget.gadgetbridge.devices.miband.MiBandCoordinator;                                     </span>
<span class="-7557474927703111213" onmouseenter="enter('-7557474927703111213');" onmouseout="out('-7557474927703111213');" style="">  62  import nodomain.freeyourgadget.gadgetbridge.devices.no1f1.No1F1Coordinator;                                       </span>
<span class="181119070723040218" onmouseenter="enter('181119070723040218');" onmouseout="out('181119070723040218');" style="">  63  import nodomain.freeyourgadget.gadgetbridge.devices.pebble.PebbleCoordinator;                                     </span>


<span class="8078015553085849089" onmouseenter="enter('8078015553085849089');" onmouseout="out('8078015553085849089');" style="">  64  import nodomain.freeyourgadget.gadgetbridge.devices.vibratissimo.VibratissimoCoordinator;                         </span>
<span class="1896763010744176890" onmouseenter="enter('1896763010744176890');" onmouseout="out('1896763010744176890');" style="">  65  import nodomain.freeyourgadget.gadgetbridge.devices.watch9.Watch9DeviceCoordinator;                               </span>
<span class="-6235753869290001827" onmouseenter="enter('-6235753869290001827');" onmouseout="out('-6235753869290001827');" style="">  66  import nodomain.freeyourgadget.gadgetbridge.devices.xwatch.XWatchCoordinator;                                     </span>
<span class="-8964272158633129718" onmouseenter="enter('-8964272158633129718');" onmouseout="out('-8964272158633129718');" style="">  67  import nodomain.freeyourgadget.gadgetbridge.devices.zetime.ZeTimeCoordinator;                                     </span>
<span class="4469307411224397441" onmouseenter="enter('4469307411224397441');" onmouseout="out('4469307411224397441');" style="">  68  import nodomain.freeyourgadget.gadgetbridge.entities.Device;                                                      </span>
<span class="-3040591784778258047" onmouseenter="enter('-3040591784778258047');" onmouseout="out('-3040591784778258047');" style="">  69  import nodomain.freeyourgadget.gadgetbridge.entities.DeviceAttributes;                                            </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  70  import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                                        </span>
<span class="-1351120908834620909" onmouseenter="enter('-1351120908834620909');" onmouseout="out('-1351120908834620909');" style="">  71  import nodomain.freeyourgadget.gadgetbridge.impl.GBDeviceCandidate;                                               </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  72  import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                                     </span>
<span  style="">  73                                                                                                                    </span>
<span class="-7246281683414074276" onmouseenter="enter('-7246281683414074276');" onmouseout="out('-7246281683414074276');" style="">  74  public class DeviceHelper {                                                                                       </span>
<span  style="">  75                                                                                                                    </span>
<span class="-7179396888031157102" onmouseenter="enter('-7179396888031157102');" onmouseout="out('-7179396888031157102');" style="">  76      private static final Logger LOG = LoggerFactory.getLogger(DeviceHelper.class);                                </span>
<span  style="">  77                                                                                                                    </span>
<span class="1809257599229613641" onmouseenter="enter('1809257599229613641');" onmouseout="out('1809257599229613641');" style="">  78      private static final DeviceHelper instance = new DeviceHelper();                                              </span>
<span  style="">  79                                                                                                                    </span>
<span class="-2529270569084750615" onmouseenter="enter('-2529270569084750615');" onmouseout="out('-2529270569084750615');" style="">  80      public static DeviceHelper getInstance() {                                                                    </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style="">  81          return instance;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82      }                                                                                                             </span>
<span  style="">  83                                                                                                                    </span>
<span class="1477217874849666720" onmouseenter="enter('1477217874849666720');" onmouseout="out('1477217874849666720');" style="">  84      // lazily created                                                                                             </span>
<span class="-1712942286504952582" onmouseenter="enter('-1712942286504952582');" onmouseout="out('-1712942286504952582');" style="">  85      private List&lt;DeviceCoordinator&gt; coordinators;                                                                 </span>
<span  style="">  86                                                                                                                    </span>
<span class="311137942692300687" onmouseenter="enter('311137942692300687');" onmouseout="out('311137942692300687');" style="">  87      public DeviceType getSupportedType(GBDeviceCandidate candidate) {                                             </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style="">  88          for (DeviceCoordinator coordinator : getAllCoordinators()) {                                              </span>
<span class="-6820733209455168532" onmouseenter="enter('-6820733209455168532');" onmouseout="out('-6820733209455168532');" style="">  89              DeviceType deviceType = coordinator.getSupportedType(candidate);                                      </span>
<span class="5988197616953595638" onmouseenter="enter('5988197616953595638');" onmouseout="out('5988197616953595638');" style="">  90              if (deviceType.isSupported()) {                                                                       </span>
<span class="7940989030742339244" onmouseenter="enter('7940989030742339244');" onmouseout="out('7940989030742339244');" style="">  91                  return deviceType;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93          }                                                                                                         </span>
<span class="2733059175620106263" onmouseenter="enter('2733059175620106263');" onmouseout="out('2733059175620106263');" style="">  94          return DeviceType.UNKNOWN;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95      }                                                                                                             </span>
<span  style="">  96                                                                                                                    </span>
<span class="-262573812517796151" onmouseenter="enter('-262573812517796151');" onmouseout="out('-262573812517796151');" style="">  97      public boolean getSupportedType(GBDevice device) {                                                            </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style="">  98          for (DeviceCoordinator coordinator : getAllCoordinators()) {                                              </span>
<span class="5941075233090253090" onmouseenter="enter('5941075233090253090');" onmouseout="out('5941075233090253090');" style="">  99              if (coordinator.supports(device)) {                                                                   </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 100                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 101              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 102          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 103          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104      }                                                                                                             </span>
<span  style=""> 105                                                                                                                    </span>
<span class="8714408707514425620" onmouseenter="enter('8714408707514425620');" onmouseout="out('8714408707514425620');" style=""> 106      public GBDevice findAvailableDevice(String deviceAddress, Context context) {                                  </span>
<span class="6902685203421244703" onmouseenter="enter('6902685203421244703');" onmouseout="out('6902685203421244703');" style=""> 107          Set&lt;GBDevice&gt; availableDevices = getAvailableDevices(context);                                            </span>
<span class="-2018824320601815207" onmouseenter="enter('-2018824320601815207');" onmouseout="out('-2018824320601815207');" style=""> 108          for (GBDevice availableDevice : availableDevices) {                                                       </span>
<span class="4097611337760018422" onmouseenter="enter('4097611337760018422');" onmouseout="out('4097611337760018422');" style=""> 109              if (deviceAddress.equals(availableDevice.getAddress())) {                                             </span>
<span class="-4049705911540768690" onmouseenter="enter('-4049705911540768690');" onmouseout="out('-4049705911540768690');" style=""> 110                  return availableDevice;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 113          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114      }                                                                                                             </span>
<span  style=""> 115                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 116      /**                                                                                                           </span>
<span class="8378781591414513441" onmouseenter="enter('8378781591414513441');" onmouseout="out('8378781591414513441');" style=""> 117       * Returns the list of all available devices that are supported by Gadgetbridge.                              </span>
<span class="2803654733430477892" onmouseenter="enter('2803654733430477892');" onmouseout="out('2803654733430477892');" style=""> 118       * Note that no state is known about the returned devices. Even if one of those                               </span>
<span class="2191300811029215791" onmouseenter="enter('2191300811029215791');" onmouseout="out('2191300811029215791');" style=""> 119       * devices is connected, it will report the default not-connected state.                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 120       *                                                                                                            </span>
<span class="5072949809304800738" onmouseenter="enter('5072949809304800738');" onmouseout="out('5072949809304800738');" style=""> 121       * Clients interested in the &quot;live&quot; devices being managed should use the class                                </span>
<span class="-803398468380583905" onmouseenter="enter('-803398468380583905');" onmouseout="out('-803398468380583905');" style=""> 122       * DeviceManager.                                                                                             </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style=""> 123       * @param context                                                                                             </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 124       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 125       */                                                                                                           </span>
<span class="8379590169787447751" onmouseenter="enter('8379590169787447751');" onmouseout="out('8379590169787447751');" style=""> 126      public Set&lt;GBDevice&gt; getAvailableDevices(Context context) {                                                   </span>
<span class="-8531133286137168432" onmouseenter="enter('-8531133286137168432');" onmouseout="out('-8531133286137168432');" style=""> 127          BluetoothAdapter btAdapter = BluetoothAdapter.getDefaultAdapter();                                        </span>
<span  style=""> 128                                                                                                                    </span>
<span class="6162896112907059694" onmouseenter="enter('6162896112907059694');" onmouseout="out('6162896112907059694');" style=""> 129          Set&lt;GBDevice&gt; availableDevices = new LinkedHashSet&lt;GBDevice&gt;();                                           </span>
<span  style=""> 130                                                                                                                    </span>
<span class="6119012127556406196" onmouseenter="enter('6119012127556406196');" onmouseout="out('6119012127556406196');" style=""> 131          if (btAdapter == null) {                                                                                  </span>
<span class="-8992361903677634121" onmouseenter="enter('-8992361903677634121');" onmouseout="out('-8992361903677634121');" style=""><abbr title=" 132              GB.toast(context, context.getString(R.string.bluetooth_is_not_supported_), Toast.LENGTH_SHORT, GB.WARN);"> 132              GB.toast(context, context.getString(R.string.bluetooth_is_not_supported_), Toast.LENGTH_SHORT, GB.WARNðŸ”µ</abbr></span>
<span class="7082490255995433787" onmouseenter="enter('7082490255995433787');" onmouseout="out('7082490255995433787');" style=""> 133          } else if (!btAdapter.isEnabled()) {                                                                      </span>
<span class="6363457106270493050" onmouseenter="enter('6363457106270493050');" onmouseout="out('6363457106270493050');" style=""> 134              GB.toast(context, context.getString(R.string.bluetooth_is_disabled_), Toast.LENGTH_SHORT, GB.WARN);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135          }                                                                                                         </span>
<span class="-3377224776558714047" onmouseenter="enter('-3377224776558714047');" onmouseout="out('-3377224776558714047');" style=""> 136          List&lt;GBDevice&gt; dbDevices = getDatabaseDevices();                                                          </span>
<span class="-6353595300668739192" onmouseenter="enter('-6353595300668739192');" onmouseout="out('-6353595300668739192');" style=""> 137          availableDevices.addAll(dbDevices);                                                                       </span>
<span  style=""> 138                                                                                                                    </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 139          Prefs prefs = GBApplication.getPrefs();                                                                   </span>
<span class="-6735964885073070564" onmouseenter="enter('-6735964885073070564');" onmouseout="out('-6735964885073070564');" style=""> 140          String miAddr = prefs.getString(MiBandConst.PREF_MIBAND_ADDRESS, &quot;&quot;);                                     </span>
<span class="-8301264850737854302" onmouseenter="enter('-8301264850737854302');" onmouseout="out('-8301264850737854302');" style=""> 141          if (miAddr.length() &gt; 0) {                                                                                </span>
<span class="-1526992099316589239" onmouseenter="enter('-1526992099316589239');" onmouseout="out('-1526992099316589239');" style=""> 142              GBDevice miDevice = new GBDevice(miAddr, &quot;MI&quot;, DeviceType.MIBAND);                                    </span>
<span class="-7870407245378512448" onmouseenter="enter('-7870407245378512448');" onmouseout="out('-7870407245378512448');" style=""> 143              availableDevices.add(miDevice);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144          }                                                                                                         </span>
<span  style=""> 145                                                                                                                    </span>
<span class="7681435883288593574" onmouseenter="enter('7681435883288593574');" onmouseout="out('7681435883288593574');" style=""> 146          String pebbleEmuAddr = prefs.getString(&quot;pebble_emu_addr&quot;, &quot;&quot;);                                            </span>
<span class="-1326069915361848697" onmouseenter="enter('-1326069915361848697');" onmouseout="out('-1326069915361848697');" style=""> 147          String pebbleEmuPort = prefs.getString(&quot;pebble_emu_port&quot;, &quot;&quot;);                                            </span>
<span class="-3516508780907274278" onmouseenter="enter('-3516508780907274278');" onmouseout="out('-3516508780907274278');" style=""> 148          if (pebbleEmuAddr.length() &gt;= 7 &amp;&amp; pebbleEmuPort.length() &gt; 0) {                                          </span>
<span class="-6361666938108258288" onmouseenter="enter('-6361666938108258288');" onmouseout="out('-6361666938108258288');" style=""><abbr title=" 149              GBDevice pebbleEmuDevice = new GBDevice(pebbleEmuAddr + &quot;:&quot; + pebbleEmuPort, &quot;Pebble qemu&quot;, DeviceType.PEBBLE);"> 149              GBDevice pebbleEmuDevice = new GBDevice(pebbleEmuAddr + &quot;:&quot; + pebbleEmuPort, &quot;Pebble qemu&quot;, DeviceTypeðŸ”µ</abbr></span>
<span class="6982341110438288246" onmouseenter="enter('6982341110438288246');" onmouseout="out('6982341110438288246');" style=""> 150              availableDevices.add(pebbleEmuDevice);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151          }                                                                                                         </span>
<span class="-6314022782668503707" onmouseenter="enter('-6314022782668503707');" onmouseout="out('-6314022782668503707');" style=""> 152          return availableDevices;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153      }                                                                                                             </span>
<span  style=""> 154                                                                                                                    </span>
<span class="5388093685262108156" onmouseenter="enter('5388093685262108156');" onmouseout="out('5388093685262108156');" style=""> 155      public GBDevice toSupportedDevice(BluetoothDevice device) {                                                   </span>
<span class="8849584801955056895" onmouseenter="enter('8849584801955056895');" onmouseout="out('8849584801955056895');" style=""> 156          GBDeviceCandidate candidate = new GBDeviceCandidate(device, GBDevice.RSSI_UNKNOWN, device.getUuids());    </span>
<span class="-318413986788990089" onmouseenter="enter('-318413986788990089');" onmouseout="out('-318413986788990089');" style=""> 157          return toSupportedDevice(candidate);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158      }                                                                                                             </span>
<span  style=""> 159                                                                                                                    </span>
<span class="-4051355324352763386" onmouseenter="enter('-4051355324352763386');" onmouseout="out('-4051355324352763386');" style=""> 160      public GBDevice toSupportedDevice(GBDeviceCandidate candidate) {                                              </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style=""> 161          for (DeviceCoordinator coordinator : getAllCoordinators()) {                                              </span>
<span class="7746899366251330745" onmouseenter="enter('7746899366251330745');" onmouseout="out('7746899366251330745');" style=""> 162              if (coordinator.supports(candidate)) {                                                                </span>
<span class="-7778797991172760546" onmouseenter="enter('-7778797991172760546');" onmouseout="out('-7778797991172760546');" style=""> 163                  return coordinator.createDevice(candidate);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 166          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167      }                                                                                                             </span>
<span  style=""> 168                                                                                                                    </span>
<span class="-5651035503093566961" onmouseenter="enter('-5651035503093566961');" onmouseout="out('-5651035503093566961');" style=""> 169      public DeviceCoordinator getCoordinator(GBDeviceCandidate device) {                                           </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 170          synchronized (this) {                                                                                     </span>
<span class="5581566123633040849" onmouseenter="enter('5581566123633040849');" onmouseout="out('5581566123633040849');" style=""> 171              for (DeviceCoordinator coord : getAllCoordinators()) {                                                </span>
<span class="-456707873662890645" onmouseenter="enter('-456707873662890645');" onmouseout="out('-456707873662890645');" style=""> 172                  if (coord.supports(device)) {                                                                     </span>
<span class="-7554628627552477108" onmouseenter="enter('-7554628627552477108');" onmouseout="out('-7554628627552477108');" style=""> 173                      return coord;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176          }                                                                                                         </span>
<span class="-8562800692924603282" onmouseenter="enter('-8562800692924603282');" onmouseout="out('-8562800692924603282');" style=""> 177          return new UnknownDeviceCoordinator();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178      }                                                                                                             </span>
<span  style=""> 179                                                                                                                    </span>
<span class="2088636936691911169" onmouseenter="enter('2088636936691911169');" onmouseout="out('2088636936691911169');" style=""> 180      public DeviceCoordinator getCoordinator(GBDevice device) {                                                    </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 181          synchronized (this) {                                                                                     </span>
<span class="5581566123633040849" onmouseenter="enter('5581566123633040849');" onmouseout="out('5581566123633040849');" style=""> 182              for (DeviceCoordinator coord : getAllCoordinators()) {                                                </span>
<span class="-456707873662890645" onmouseenter="enter('-456707873662890645');" onmouseout="out('-456707873662890645');" style=""> 183                  if (coord.supports(device)) {                                                                     </span>
<span class="-7554628627552477108" onmouseenter="enter('-7554628627552477108');" onmouseout="out('-7554628627552477108');" style=""> 184                      return coord;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187          }                                                                                                         </span>
<span class="-8562800692924603282" onmouseenter="enter('-8562800692924603282');" onmouseout="out('-8562800692924603282');" style=""> 188          return new UnknownDeviceCoordinator();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189      }                                                                                                             </span>
<span  style=""> 190                                                                                                                    </span>
<span class="610514956454116910" onmouseenter="enter('610514956454116910');" onmouseout="out('610514956454116910');" style=""> 191      public synchronized List&lt;DeviceCoordinator&gt; getAllCoordinators() {                                            </span>
<span class="-5653167495443109834" onmouseenter="enter('-5653167495443109834');" onmouseout="out('-5653167495443109834');" style=""> 192          if (coordinators == null) {                                                                               </span>
<span class="6535460489050040084" onmouseenter="enter('6535460489050040084');" onmouseout="out('6535460489050040084');" style=""> 193              coordinators = createCoordinators();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 194          }                                                                                                         </span>
<span class="7608420427240005700" onmouseenter="enter('7608420427240005700');" onmouseout="out('7608420427240005700');" style=""> 195          return coordinators;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196      }                                                                                                             </span>
<span  style=""> 197                                                                                                                    </span>
<span class="5367250377489878658" onmouseenter="enter('5367250377489878658');" onmouseout="out('5367250377489878658');" style=""> 198      private List&lt;DeviceCoordinator&gt; createCoordinators() {                                                        </span>
<span class="-8659885373666106675" onmouseenter="enter('-8659885373666106675');" onmouseout="out('-8659885373666106675');" style=""> 199          List&lt;DeviceCoordinator&gt; result = new ArrayList&lt;&gt;();                                                       </span>
<span class="7179280396014719844" onmouseenter="enter('7179280396014719844');" onmouseout="out('7179280396014719844');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 200 +        result.add(new MiScale2DeviceCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm"> 200 +        result.add(new MiScale2DeviceCoordinator()); // Note: must come before MiBand2 because detection is hacky,ðŸ”µ</abbr></span>
<span class="3669774305908054055" onmouseenter="enter('3669774305908054055');" onmouseout="out('3669774305908054055');" style=""> 201          result.add(new AmazfitBipCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm</span>
<span class="-7117613783968222510" onmouseenter="enter('-7117613783968222510');" onmouseout="out('-7117613783968222510');" style=""> 202          result.add(new AmazfitCorCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm</span>
<span class="-1078845644300418098" onmouseenter="enter('-1078845644300418098');" onmouseout="out('-1078845644300418098');" style=""> 203          result.add(new MiBand3Coordinator());  // Note: must come before MiBand2 because detection is hacky, atm  </span>
<span class="-5997211381002485660" onmouseenter="enter('-5997211381002485660');" onmouseout="out('-5997211381002485660');" style=""> 204          result.add(new MiBand2HRXCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm</span>
<span class="4970251816251507839" onmouseenter="enter('4970251816251507839');" onmouseout="out('4970251816251507839');" style=""><abbr title=" 205          result.add(new MiBand2Coordinator()); // Note: MiBand2 must come before MiBand because detection is hacky, atm"> 205          result.add(new MiBand2Coordinator()); // Note: MiBand2 must come before MiBand because detection is hacky,ðŸ”µ</abbr></span>
<span class="-5481576563447422020" onmouseenter="enter('-5481576563447422020');" onmouseout="out('-5481576563447422020');" style=""> 206          result.add(new MiBandCoordinator());                                                                      </span>
<span class="6190871288444688318" onmouseenter="enter('6190871288444688318');" onmouseout="out('6190871288444688318');" style=""> 207          result.add(new PebbleCoordinator());                                                                      </span>
<span class="6793070632976028692" onmouseenter="enter('6793070632976028692');" onmouseout="out('6793070632976028692');" style=""> 208          result.add(new VibratissimoCoordinator());                                                                </span>
<span class="5131269263148398875" onmouseenter="enter('5131269263148398875');" onmouseout="out('5131269263148398875');" style=""> 209          result.add(new LiveviewCoordinator());                                                                    </span>
<span class="1595212057085836033" onmouseenter="enter('1595212057085836033');" onmouseout="out('1595212057085836033');" style=""> 210          result.add(new HPlusCoordinator());                                                                       </span>
<span class="3332735665937364473" onmouseenter="enter('3332735665937364473');" onmouseout="out('3332735665937364473');" style=""> 211          result.add(new No1F1Coordinator());                                                                       </span>
<span class="3699860687323138670" onmouseenter="enter('3699860687323138670');" onmouseout="out('3699860687323138670');" style=""> 212          result.add(new MakibesF68Coordinator());                                                                  </span>
<span class="-5481362583103427017" onmouseenter="enter('-5481362583103427017');" onmouseout="out('-5481362583103427017');" style=""> 213          result.add(new Q8Coordinator());                                                                          </span>
<span class="8067903992183633568" onmouseenter="enter('8067903992183633568');" onmouseout="out('8067903992183633568');" style=""> 214          result.add(new EXRIZUK8Coordinator());                                                                    </span>
<span class="-6898555743395836902" onmouseenter="enter('-6898555743395836902');" onmouseout="out('-6898555743395836902');" style=""> 215          result.add(new TeclastH30Coordinator());                                                                  </span>
<span class="-5904825641300533735" onmouseenter="enter('-5904825641300533735');" onmouseout="out('-5904825641300533735');" style=""> 216          result.add(new XWatchCoordinator());                                                                      </span>
<span class="-1342788656175506629" onmouseenter="enter('-1342788656175506629');" onmouseout="out('-1342788656175506629');" style=""> 217          result.add(new ZeTimeCoordinator());                                                                      </span>
<span class="-5172501225405919533" onmouseenter="enter('-5172501225405919533');" onmouseout="out('-5172501225405919533');" style=""> 218          result.add(new ID115Coordinator());                                                                       </span>
<span class="-5671094850717710707" onmouseenter="enter('-5671094850717710707');" onmouseout="out('-5671094850717710707');" style=""> 219          result.add(new Watch9DeviceCoordinator());                                                                </span>
<span class="9072674293611744445" onmouseenter="enter('9072674293611744445');" onmouseout="out('9072674293611744445');" style=""> 220          result.add(new Roidmi1Coordinator());                                                                     </span>
<span class="-9202027692962819030" onmouseenter="enter('-9202027692962819030');" onmouseout="out('-9202027692962819030');" style=""> 221          result.add(new Roidmi3Coordinator());                                                                     </span>
<span class="-3417192720312420869" onmouseenter="enter('-3417192720312420869');" onmouseout="out('-3417192720312420869');" style=""> 222          result.add(new CasioGB6900DeviceCoordinator());                                                           </span>
<span  style=""> 223                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 224          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225      }                                                                                                             </span>
<span  style=""> 226                                                                                                                    </span>
<span class="3182429837156194527" onmouseenter="enter('3182429837156194527');" onmouseout="out('3182429837156194527');" style=""> 227      private List&lt;GBDevice&gt; getDatabaseDevices() {                                                                 </span>
<span class="840115391726385579" onmouseenter="enter('840115391726385579');" onmouseout="out('840115391726385579');" style=""> 228          List&lt;GBDevice&gt; result = new ArrayList&lt;&gt;();                                                                </span>
<span class="1983564060177123024" onmouseenter="enter('1983564060177123024');" onmouseout="out('1983564060177123024');" style=""> 229          try (DBHandler lockHandler = GBApplication.acquireDB()) {                                                 </span>
<span class="8940139265610706617" onmouseenter="enter('8940139265610706617');" onmouseout="out('8940139265610706617');" style=""> 230              List&lt;Device&gt; activeDevices = DBHelper.getActiveDevices(lockHandler.getDaoSession());                  </span>
<span class="6007915031492495476" onmouseenter="enter('6007915031492495476');" onmouseout="out('6007915031492495476');" style=""> 231              for (Device dbDevice : activeDevices) {                                                               </span>
<span class="-4172089683425383837" onmouseenter="enter('-4172089683425383837');" onmouseout="out('-4172089683425383837');" style=""> 232                  GBDevice gbDevice = toGBDevice(dbDevice);                                                         </span>
<span class="-2890086854640002908" onmouseenter="enter('-2890086854640002908');" onmouseout="out('-2890086854640002908');" style=""> 233                  if (gbDevice != null &amp;&amp; DeviceHelper.getInstance().getSupportedType(gbDevice)) {                  </span>
<span class="5237701413799306923" onmouseenter="enter('5237701413799306923');" onmouseout="out('5237701413799306923');" style=""> 234                      result.add(gbDevice);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236              }                                                                                                     </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 237              return result;                                                                                        </span>
<span  style=""> 238                                                                                                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 239          } catch (Exception e) {                                                                                   </span>
<span class="-187514096336122593" onmouseenter="enter('-187514096336122593');" onmouseout="out('-187514096336122593');" style=""> 240              GB.toast(&quot;Error retrieving devices from database&quot;, Toast.LENGTH_SHORT, GB.ERROR);                     </span>
<span class="-6093315130064080899" onmouseenter="enter('-6093315130064080899');" onmouseout="out('-6093315130064080899');" style=""> 241              return Collections.emptyList();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243      }                                                                                                             </span>
<span  style=""> 244                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 245      /**                                                                                                           </span>
<span class="-8078490980994469589" onmouseenter="enter('-8078490980994469589');" onmouseout="out('-8078490980994469589');" style=""> 246       * Converts a known device from the database to a GBDevice.                                                   </span>
<span class="7713530361969283549" onmouseenter="enter('7713530361969283549');" onmouseout="out('7713530361969283549');" style=""> 247       * Note: The device might not be supported anymore, so callers should verify that.                            </span>
<span class="-6700615312658933431" onmouseenter="enter('-6700615312658933431');" onmouseout="out('-6700615312658933431');" style=""> 248       * @param dbDevice                                                                                            </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 249       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 250       */                                                                                                           </span>
<span class="2606688045344874841" onmouseenter="enter('2606688045344874841');" onmouseout="out('2606688045344874841');" style=""> 251      public GBDevice toGBDevice(Device dbDevice) {                                                                 </span>
<span class="1652882496457315529" onmouseenter="enter('1652882496457315529');" onmouseout="out('1652882496457315529');" style=""> 252          DeviceType deviceType = DeviceType.fromKey(dbDevice.getType());                                           </span>
<span class="5855596366176965620" onmouseenter="enter('5855596366176965620');" onmouseout="out('5855596366176965620');" style=""> 253          GBDevice gbDevice = new GBDevice(dbDevice.getIdentifier(), dbDevice.getName(), deviceType);               </span>
<span class="9004683367408636271" onmouseenter="enter('9004683367408636271');" onmouseout="out('9004683367408636271');" style=""> 254          List&lt;DeviceAttributes&gt; deviceAttributesList = dbDevice.getDeviceAttributesList();                         </span>
<span class="-694602091282451513" onmouseenter="enter('-694602091282451513');" onmouseout="out('-694602091282451513');" style=""> 255          if (deviceAttributesList.size() &gt; 0) {                                                                    </span>
<span class="-3212481810427050137" onmouseenter="enter('-3212481810427050137');" onmouseout="out('-3212481810427050137');" style=""> 256              gbDevice.setModel(dbDevice.getModel());                                                               </span>
<span class="354034525378834429" onmouseenter="enter('354034525378834429');" onmouseout="out('354034525378834429');" style=""> 257              DeviceAttributes attrs = deviceAttributesList.get(0);                                                 </span>
<span class="-8620968705551486244" onmouseenter="enter('-8620968705551486244');" onmouseout="out('-8620968705551486244');" style=""> 258              gbDevice.setFirmwareVersion(attrs.getFirmwareVersion1());                                             </span>
<span class="-2407126446549023078" onmouseenter="enter('-2407126446549023078');" onmouseout="out('-2407126446549023078');" style=""> 259              gbDevice.setFirmwareVersion2(attrs.getFirmwareVersion2());                                            </span>
<span class="6046344818374293876" onmouseenter="enter('6046344818374293876');" onmouseout="out('6046344818374293876');" style=""> 260              gbDevice.setVolatileAddress(attrs.getVolatileIdentifier());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261          }                                                                                                         </span>
<span  style=""> 262                                                                                                                    </span>
<span class="-9206390224358820403" onmouseenter="enter('-9206390224358820403');" onmouseout="out('-9206390224358820403');" style=""> 263          return gbDevice;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264      }                                                                                                             </span>
<span  style=""> 265                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 266      /**                                                                                                           </span>
<span class="8342379087536305506" onmouseenter="enter('8342379087536305506');" onmouseout="out('8342379087536305506');" style=""> 267       * Attempts to removing the bonding with the given device. Returns true                                       </span>
<span class="-9119695278064429966" onmouseenter="enter('-9119695278064429966');" onmouseout="out('-9119695278064429966');" style=""> 268       * if bonding was supposedly successful and false if anything went wrong                                      </span>
<span class="1113685536488546558" onmouseenter="enter('1113685536488546558');" onmouseout="out('1113685536488546558');" style=""> 269       * @param device                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 270       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 271       */                                                                                                           </span>
<span class="-8639258336155222707" onmouseenter="enter('-8639258336155222707');" onmouseout="out('-8639258336155222707');" style=""> 272      public boolean removeBond(GBDevice device) throws GBException {                                               </span>
<span class="5527337570660915921" onmouseenter="enter('5527337570660915921');" onmouseout="out('5527337570660915921');" style=""> 273          BluetoothAdapter defaultAdapter = BluetoothAdapter.getDefaultAdapter();                                   </span>
<span class="6535479181747156907" onmouseenter="enter('6535479181747156907');" onmouseout="out('6535479181747156907');" style=""> 274          if (defaultAdapter != null) {                                                                             </span>
<span class="-6099553505981596341" onmouseenter="enter('-6099553505981596341');" onmouseout="out('-6099553505981596341');" style=""> 275              BluetoothDevice remoteDevice = defaultAdapter.getRemoteDevice(device.getAddress());                   </span>
<span class="-6902931335510683219" onmouseenter="enter('-6902931335510683219');" onmouseout="out('-6902931335510683219');" style=""> 276              if (remoteDevice != null) {                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 277                  try {                                                                                             </span>
<span class="6635920500800020475" onmouseenter="enter('6635920500800020475');" onmouseout="out('6635920500800020475');" style=""> 278                      Method method = BluetoothDevice.class.getMethod(&quot;removeBond&quot;, (Class[]) null);                </span>
<span class="4415940968731599000" onmouseenter="enter('4415940968731599000');" onmouseout="out('4415940968731599000');" style=""> 279                      Object result = method.invoke(remoteDevice, (Object[]) null);                                 </span>
<span class="6302849373420131955" onmouseenter="enter('6302849373420131955');" onmouseout="out('6302849373420131955');" style=""> 280                      return Boolean.TRUE.equals(result);                                                           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 281                  } catch (Exception e) {                                                                           </span>
<span class="8351198176145398153" onmouseenter="enter('8351198176145398153');" onmouseout="out('8351198176145398153');" style=""> 282                      throw new GBException(&quot;Error removing bond to device: &quot; + device, e);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 286          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287      }                                                                                                             </span>
<span  style=""> 288                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="-5200878630337924680" onmouseenter="enter('-5200878630337924680');" onmouseout="out('-5200878630337924680');" style="">   1  /*  Copyright (C) 2015-2018 0nse, Andreas Shimokawa, Carsten Pfeiffer,                                            </span>
<span class="3588757660813990934" onmouseenter="enter('3588757660813990934');" onmouseout="out('3588757660813990934');" style="">   2      Daniele Gobbetti, JoaÌƒo Paulo Barraca, Kranz, ladbsoft, maxirnilian,                                          </span>
<span class="-5208925406365664903" onmouseenter="enter('-5208925406365664903');" onmouseout="out('-5208925406365664903');" style="">   3      protomors, Quallenauge, Sami Alaoui, tiparega, Vadim Kaushan                                                  </span>
<span  style="">   4                                                                                                                    </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   5      This file is part of Gadgetbridge.                                                                            </span>
<span  style="">   6                                                                                                                    </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   7      Gadgetbridge is free software: you can redistribute it and/or modify                                          </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   8      it under the terms of the GNU Affero General Public License as published                                      </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   9      by the Free Software Foundation, either version 3 of the License, or                                          </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">  10      (at your option) any later version.                                                                           </span>
<span  style="">  11                                                                                                                    </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  12      Gadgetbridge is distributed in the hope that it will be useful,                                               </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  13      but WITHOUT ANY WARRANTY; without even the implied warranty of                                                </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  14      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                                 </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  15      GNU Affero General Public License for more details.                                                           </span>
<span  style="">  16                                                                                                                    </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  17      You should have received a copy of the GNU Affero General Public License                                      </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  18      along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                                      </span>
<span class="-5427540757158912607" onmouseenter="enter('-5427540757158912607');" onmouseout="out('-5427540757158912607');" style="">  19  package nodomain.freeyourgadget.gadgetbridge.util;                                                                </span>
<span  style="">  20                                                                                                                    </span>
<span class="-8028506601233233593" onmouseenter="enter('-8028506601233233593');" onmouseout="out('-8028506601233233593');" style="">  21  import android.bluetooth.BluetoothAdapter;                                                                        </span>
<span class="2859895893394018468" onmouseenter="enter('2859895893394018468');" onmouseout="out('2859895893394018468');" style="">  22  import android.bluetooth.BluetoothDevice;                                                                         </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  23  import android.content.Context;                                                                                   </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  24 -import android.support.annotation.NonNull;                                                                        </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  25  import android.widget.Toast;                                                                                      </span>
<span  style="">  26                                                                                                                    </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  27  import org.slf4j.Logger;                                                                                          </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  28  import org.slf4j.LoggerFactory;                                                                                   </span>
<span  style="">  29                                                                                                                    </span>
<span class="3877996116863688216" onmouseenter="enter('3877996116863688216');" onmouseout="out('3877996116863688216');" style="">  30  import java.lang.reflect.Method;                                                                                  </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  31  import java.util.ArrayList;                                                                                       </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  32  import java.util.Collections;                                                                                     </span>
<span class="8609815663253459563" onmouseenter="enter('8609815663253459563');" onmouseout="out('8609815663253459563');" style="">  33  import java.util.LinkedHashSet;                                                                                   </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  34  import java.util.List;                                                                                            </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  35  import java.util.Set;                                                                                             </span>
<span  style="">  36                                                                                                                    </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  37  import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                                        </span>
<span class="-1471644270559892265" onmouseenter="enter('-1471644270559892265');" onmouseout="out('-1471644270559892265');" style="">  38  import nodomain.freeyourgadget.gadgetbridge.GBException;                                                          </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  39  import nodomain.freeyourgadget.gadgetbridge.R;                                                                    </span>
<span class="6679513218772020996" onmouseenter="enter('6679513218772020996');" onmouseout="out('6679513218772020996');" style="">  40  import nodomain.freeyourgadget.gadgetbridge.database.DBHandler;                                                   </span>
<span class="4338650188295783318" onmouseenter="enter('4338650188295783318');" onmouseout="out('4338650188295783318');" style="">  41  import nodomain.freeyourgadget.gadgetbridge.database.DBHelper;                                                    </span>
<span class="6852267181356803593" onmouseenter="enter('6852267181356803593');" onmouseout="out('6852267181356803593');" style="">  42  import nodomain.freeyourgadget.gadgetbridge.devices.DeviceCoordinator;                                            </span>
<span class="6706901399385249836" onmouseenter="enter('6706901399385249836');" onmouseout="out('6706901399385249836');" style="">  43  import nodomain.freeyourgadget.gadgetbridge.devices.UnknownDeviceCoordinator;                                     </span>
<span class="-2946949855778130048" onmouseenter="enter('-2946949855778130048');" onmouseout="out('-2946949855778130048');" style="">  44  import nodomain.freeyourgadget.gadgetbridge.devices.casiogb6900.CasioGB6900DeviceCoordinator;                     </span>
<span class="1831953906102313699" onmouseenter="enter('1831953906102313699');" onmouseout="out('1831953906102313699');" style="">  45  import nodomain.freeyourgadget.gadgetbridge.devices.hplus.EXRIZUK8Coordinator;                                    </span>
<span class="-4973236722115174269" onmouseenter="enter('-4973236722115174269');" onmouseout="out('-4973236722115174269');" style="">  46  import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusCoordinator;                                       </span>
<span class="9204923228813511004" onmouseenter="enter('9204923228813511004');" onmouseout="out('9204923228813511004');" style="">  47  import nodomain.freeyourgadget.gadgetbridge.devices.hplus.MakibesF68Coordinator;                                  </span>
<span class="3078186574701620561" onmouseenter="enter('3078186574701620561');" onmouseout="out('3078186574701620561');" style="">  48  import nodomain.freeyourgadget.gadgetbridge.devices.hplus.Q8Coordinator;                                          </span>
<span class="7272678525497799472" onmouseenter="enter('7272678525497799472');" onmouseout="out('7272678525497799472');" style="">  49  import nodomain.freeyourgadget.gadgetbridge.devices.huami.amazfitbip.AmazfitBipCoordinator;                       </span>
<span class="9054045240569218327" onmouseenter="enter('9054045240569218327');" onmouseout="out('9054045240569218327');" style="">  50  import nodomain.freeyourgadget.gadgetbridge.devices.huami.amazfitcor.AmazfitCorCoordinator;                       </span>
<span class="3142529718171766552" onmouseenter="enter('3142529718171766552');" onmouseout="out('3142529718171766552');" style="">  51  import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband2.MiBand2Coordinator;                             </span>
<span class="-336757578436190430" onmouseenter="enter('-336757578436190430');" onmouseout="out('-336757578436190430');" style="">  52  import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband2.MiBand2HRXCoordinator;                          </span>
<span class="-4959563064822725763" onmouseenter="enter('-4959563064822725763');" onmouseout="out('-4959563064822725763');" style="">  53  import nodomain.freeyourgadget.gadgetbridge.devices.huami.miband3.MiBand3Coordinator;                             </span>
<span class="-8257747607607390324" onmouseenter="enter('-8257747607607390324');" onmouseout="out('-8257747607607390324');" style="">  54  import nodomain.freeyourgadget.gadgetbridge.devices.id115.ID115Coordinator;                                       </span>
<span class="-8097912228071563035" onmouseenter="enter('-8097912228071563035');" onmouseout="out('-8097912228071563035');" style="">  55  import nodomain.freeyourgadget.gadgetbridge.devices.jyou.TeclastH30Coordinator;                                   </span>

<span class="-8566867472430384418" onmouseenter="enter('-8566867472430384418');" onmouseout="out('-8566867472430384418');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  56 -import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi1Coordinator;                                    </span>
<span class="6916358320845634609" onmouseenter="enter('6916358320845634609');" onmouseout="out('6916358320845634609');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  57 -import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi3Coordinator;                                    </span>
<span class="-2735380447578037326" onmouseenter="enter('-2735380447578037326');" onmouseout="out('-2735380447578037326');" style="">  58  import nodomain.freeyourgadget.gadgetbridge.devices.liveview.LiveviewCoordinator;                                 </span>
<span class="7979044249022447808" onmouseenter="enter('7979044249022447808');" onmouseout="out('7979044249022447808');" style="">  59  import nodomain.freeyourgadget.gadgetbridge.devices.miband.MiBandConst;                                           </span>
<span class="-3275943466867468904" onmouseenter="enter('-3275943466867468904');" onmouseout="out('-3275943466867468904');" style="">  60  import nodomain.freeyourgadget.gadgetbridge.devices.miband.MiBandCoordinator;                                     </span>
<span class="-7557474927703111213" onmouseenter="enter('-7557474927703111213');" onmouseout="out('-7557474927703111213');" style="">  61  import nodomain.freeyourgadget.gadgetbridge.devices.no1f1.No1F1Coordinator;                                       </span>
<span class="181119070723040218" onmouseenter="enter('181119070723040218');" onmouseout="out('181119070723040218');" style="">  62  import nodomain.freeyourgadget.gadgetbridge.devices.pebble.PebbleCoordinator;                                     </span>
<span class="-8566867472430384418" onmouseenter="enter('-8566867472430384418');" onmouseout="out('-8566867472430384418');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  63 +import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi1Coordinator;                                    </span>
<span class="6916358320845634609" onmouseenter="enter('6916358320845634609');" onmouseout="out('6916358320845634609');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  64 +import nodomain.freeyourgadget.gadgetbridge.devices.roidmi.Roidmi3Coordinator;                                    </span>
<span class="8078015553085849089" onmouseenter="enter('8078015553085849089');" onmouseout="out('8078015553085849089');" style="">  65  import nodomain.freeyourgadget.gadgetbridge.devices.vibratissimo.VibratissimoCoordinator;                         </span>
<span class="1896763010744176890" onmouseenter="enter('1896763010744176890');" onmouseout="out('1896763010744176890');" style="">  66  import nodomain.freeyourgadget.gadgetbridge.devices.watch9.Watch9DeviceCoordinator;                               </span>
<span class="-6235753869290001827" onmouseenter="enter('-6235753869290001827');" onmouseout="out('-6235753869290001827');" style="">  67  import nodomain.freeyourgadget.gadgetbridge.devices.xwatch.XWatchCoordinator;                                     </span>
<span class="-8964272158633129718" onmouseenter="enter('-8964272158633129718');" onmouseout="out('-8964272158633129718');" style="">  68  import nodomain.freeyourgadget.gadgetbridge.devices.zetime.ZeTimeCoordinator;                                     </span>
<span class="4469307411224397441" onmouseenter="enter('4469307411224397441');" onmouseout="out('4469307411224397441');" style="">  69  import nodomain.freeyourgadget.gadgetbridge.entities.Device;                                                      </span>
<span class="-3040591784778258047" onmouseenter="enter('-3040591784778258047');" onmouseout="out('-3040591784778258047');" style="">  70  import nodomain.freeyourgadget.gadgetbridge.entities.DeviceAttributes;                                            </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  71  import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                                        </span>
<span class="-1351120908834620909" onmouseenter="enter('-1351120908834620909');" onmouseout="out('-1351120908834620909');" style="">  72  import nodomain.freeyourgadget.gadgetbridge.impl.GBDeviceCandidate;                                               </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  73  import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                                     </span>
<span  style="">  74                                                                                                                    </span>
<span class="-7246281683414074276" onmouseenter="enter('-7246281683414074276');" onmouseout="out('-7246281683414074276');" style="">  75  public class DeviceHelper {                                                                                       </span>
<span  style="">  76                                                                                                                    </span>
<span class="-7179396888031157102" onmouseenter="enter('-7179396888031157102');" onmouseout="out('-7179396888031157102');" style="">  77      private static final Logger LOG = LoggerFactory.getLogger(DeviceHelper.class);                                </span>
<span  style="">  78                                                                                                                    </span>
<span class="1809257599229613641" onmouseenter="enter('1809257599229613641');" onmouseout="out('1809257599229613641');" style="">  79      private static final DeviceHelper instance = new DeviceHelper();                                              </span>
<span  style="">  80                                                                                                                    </span>
<span class="-2529270569084750615" onmouseenter="enter('-2529270569084750615');" onmouseout="out('-2529270569084750615');" style="">  81      public static DeviceHelper getInstance() {                                                                    </span>
<span class="4536392404528694633" onmouseenter="enter('4536392404528694633');" onmouseout="out('4536392404528694633');" style="">  82          return instance;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83      }                                                                                                             </span>
<span  style="">  84                                                                                                                    </span>
<span class="1477217874849666720" onmouseenter="enter('1477217874849666720');" onmouseout="out('1477217874849666720');" style="">  85      // lazily created                                                                                             </span>
<span class="-1712942286504952582" onmouseenter="enter('-1712942286504952582');" onmouseout="out('-1712942286504952582');" style="">  86      private List&lt;DeviceCoordinator&gt; coordinators;                                                                 </span>
<span  style="">  87                                                                                                                    </span>
<span class="311137942692300687" onmouseenter="enter('311137942692300687');" onmouseout="out('311137942692300687');" style="">  88      public DeviceType getSupportedType(GBDeviceCandidate candidate) {                                             </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style="">  89          for (DeviceCoordinator coordinator : getAllCoordinators()) {                                              </span>
<span class="-6820733209455168532" onmouseenter="enter('-6820733209455168532');" onmouseout="out('-6820733209455168532');" style="">  90              DeviceType deviceType = coordinator.getSupportedType(candidate);                                      </span>
<span class="5988197616953595638" onmouseenter="enter('5988197616953595638');" onmouseout="out('5988197616953595638');" style="">  91              if (deviceType.isSupported()) {                                                                       </span>
<span class="7940989030742339244" onmouseenter="enter('7940989030742339244');" onmouseout="out('7940989030742339244');" style="">  92                  return deviceType;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  94          }                                                                                                         </span>
<span class="2733059175620106263" onmouseenter="enter('2733059175620106263');" onmouseout="out('2733059175620106263');" style="">  95          return DeviceType.UNKNOWN;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  96      }                                                                                                             </span>
<span  style="">  97                                                                                                                    </span>
<span class="-262573812517796151" onmouseenter="enter('-262573812517796151');" onmouseout="out('-262573812517796151');" style="">  98      public boolean getSupportedType(GBDevice device) {                                                            </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style="">  99          for (DeviceCoordinator coordinator : getAllCoordinators()) {                                              </span>
<span class="5941075233090253090" onmouseenter="enter('5941075233090253090');" onmouseout="out('5941075233090253090');" style=""> 100              if (coordinator.supports(device)) {                                                                   </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 101                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 102              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 104          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105      }                                                                                                             </span>
<span  style=""> 106                                                                                                                    </span>
<span class="8714408707514425620" onmouseenter="enter('8714408707514425620');" onmouseout="out('8714408707514425620');" style=""> 107      public GBDevice findAvailableDevice(String deviceAddress, Context context) {                                  </span>
<span class="6902685203421244703" onmouseenter="enter('6902685203421244703');" onmouseout="out('6902685203421244703');" style=""> 108          Set&lt;GBDevice&gt; availableDevices = getAvailableDevices(context);                                            </span>
<span class="-2018824320601815207" onmouseenter="enter('-2018824320601815207');" onmouseout="out('-2018824320601815207');" style=""> 109          for (GBDevice availableDevice : availableDevices) {                                                       </span>
<span class="4097611337760018422" onmouseenter="enter('4097611337760018422');" onmouseout="out('4097611337760018422');" style=""> 110              if (deviceAddress.equals(availableDevice.getAddress())) {                                             </span>
<span class="-4049705911540768690" onmouseenter="enter('-4049705911540768690');" onmouseout="out('-4049705911540768690');" style=""> 111                  return availableDevice;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 114          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 115      }                                                                                                             </span>
<span  style=""> 116                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 117      /**                                                                                                           </span>
<span class="8378781591414513441" onmouseenter="enter('8378781591414513441');" onmouseout="out('8378781591414513441');" style=""> 118       * Returns the list of all available devices that are supported by Gadgetbridge.                              </span>
<span class="2803654733430477892" onmouseenter="enter('2803654733430477892');" onmouseout="out('2803654733430477892');" style=""> 119       * Note that no state is known about the returned devices. Even if one of those                               </span>
<span class="2191300811029215791" onmouseenter="enter('2191300811029215791');" onmouseout="out('2191300811029215791');" style=""> 120       * devices is connected, it will report the default not-connected state.                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 121       *                                                                                                            </span>
<span class="5072949809304800738" onmouseenter="enter('5072949809304800738');" onmouseout="out('5072949809304800738');" style=""> 122       * Clients interested in the &quot;live&quot; devices being managed should use the class                                </span>
<span class="-803398468380583905" onmouseenter="enter('-803398468380583905');" onmouseout="out('-803398468380583905');" style=""> 123       * DeviceManager.                                                                                             </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style=""> 124       * @param context                                                                                             </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 125       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 126       */                                                                                                           </span>
<span class="8379590169787447751" onmouseenter="enter('8379590169787447751');" onmouseout="out('8379590169787447751');" style=""> 127      public Set&lt;GBDevice&gt; getAvailableDevices(Context context) {                                                   </span>
<span class="-8531133286137168432" onmouseenter="enter('-8531133286137168432');" onmouseout="out('-8531133286137168432');" style=""> 128          BluetoothAdapter btAdapter = BluetoothAdapter.getDefaultAdapter();                                        </span>
<span  style=""> 129                                                                                                                    </span>
<span class="6162896112907059694" onmouseenter="enter('6162896112907059694');" onmouseout="out('6162896112907059694');" style=""> 130          Set&lt;GBDevice&gt; availableDevices = new LinkedHashSet&lt;GBDevice&gt;();                                           </span>
<span  style=""> 131                                                                                                                    </span>
<span class="6119012127556406196" onmouseenter="enter('6119012127556406196');" onmouseout="out('6119012127556406196');" style=""> 132          if (btAdapter == null) {                                                                                  </span>
<span class="-8992361903677634121" onmouseenter="enter('-8992361903677634121');" onmouseout="out('-8992361903677634121');" style=""><abbr title=" 133              GB.toast(context, context.getString(R.string.bluetooth_is_not_supported_), Toast.LENGTH_SHORT, GB.WARN);"> 133              GB.toast(context, context.getString(R.string.bluetooth_is_not_supported_), Toast.LENGTH_SHORT, GB.WARNðŸ”µ</abbr></span>
<span class="7082490255995433787" onmouseenter="enter('7082490255995433787');" onmouseout="out('7082490255995433787');" style=""> 134          } else if (!btAdapter.isEnabled()) {                                                                      </span>
<span class="6363457106270493050" onmouseenter="enter('6363457106270493050');" onmouseout="out('6363457106270493050');" style=""> 135              GB.toast(context, context.getString(R.string.bluetooth_is_disabled_), Toast.LENGTH_SHORT, GB.WARN);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136          }                                                                                                         </span>
<span class="-3377224776558714047" onmouseenter="enter('-3377224776558714047');" onmouseout="out('-3377224776558714047');" style=""> 137          List&lt;GBDevice&gt; dbDevices = getDatabaseDevices();                                                          </span>
<span class="-6353595300668739192" onmouseenter="enter('-6353595300668739192');" onmouseout="out('-6353595300668739192');" style=""> 138          availableDevices.addAll(dbDevices);                                                                       </span>
<span  style=""> 139                                                                                                                    </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 140          Prefs prefs = GBApplication.getPrefs();                                                                   </span>
<span class="-6735964885073070564" onmouseenter="enter('-6735964885073070564');" onmouseout="out('-6735964885073070564');" style=""> 141          String miAddr = prefs.getString(MiBandConst.PREF_MIBAND_ADDRESS, &quot;&quot;);                                     </span>
<span class="-8301264850737854302" onmouseenter="enter('-8301264850737854302');" onmouseout="out('-8301264850737854302');" style=""> 142          if (miAddr.length() &gt; 0) {                                                                                </span>
<span class="-1526992099316589239" onmouseenter="enter('-1526992099316589239');" onmouseout="out('-1526992099316589239');" style=""> 143              GBDevice miDevice = new GBDevice(miAddr, &quot;MI&quot;, DeviceType.MIBAND);                                    </span>
<span class="-7870407245378512448" onmouseenter="enter('-7870407245378512448');" onmouseout="out('-7870407245378512448');" style=""> 144              availableDevices.add(miDevice);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145          }                                                                                                         </span>
<span  style=""> 146                                                                                                                    </span>
<span class="7681435883288593574" onmouseenter="enter('7681435883288593574');" onmouseout="out('7681435883288593574');" style=""> 147          String pebbleEmuAddr = prefs.getString(&quot;pebble_emu_addr&quot;, &quot;&quot;);                                            </span>
<span class="-1326069915361848697" onmouseenter="enter('-1326069915361848697');" onmouseout="out('-1326069915361848697');" style=""> 148          String pebbleEmuPort = prefs.getString(&quot;pebble_emu_port&quot;, &quot;&quot;);                                            </span>
<span class="-3516508780907274278" onmouseenter="enter('-3516508780907274278');" onmouseout="out('-3516508780907274278');" style=""> 149          if (pebbleEmuAddr.length() &gt;= 7 &amp;&amp; pebbleEmuPort.length() &gt; 0) {                                          </span>
<span class="-6361666938108258288" onmouseenter="enter('-6361666938108258288');" onmouseout="out('-6361666938108258288');" style=""><abbr title=" 150              GBDevice pebbleEmuDevice = new GBDevice(pebbleEmuAddr + &quot;:&quot; + pebbleEmuPort, &quot;Pebble qemu&quot;, DeviceType.PEBBLE);"> 150              GBDevice pebbleEmuDevice = new GBDevice(pebbleEmuAddr + &quot;:&quot; + pebbleEmuPort, &quot;Pebble qemu&quot;, DeviceTypeðŸ”µ</abbr></span>
<span class="6982341110438288246" onmouseenter="enter('6982341110438288246');" onmouseout="out('6982341110438288246');" style=""> 151              availableDevices.add(pebbleEmuDevice);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152          }                                                                                                         </span>
<span class="-6314022782668503707" onmouseenter="enter('-6314022782668503707');" onmouseout="out('-6314022782668503707');" style=""> 153          return availableDevices;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 154      }                                                                                                             </span>
<span  style=""> 155                                                                                                                    </span>
<span class="5388093685262108156" onmouseenter="enter('5388093685262108156');" onmouseout="out('5388093685262108156');" style=""> 156      public GBDevice toSupportedDevice(BluetoothDevice device) {                                                   </span>
<span class="8849584801955056895" onmouseenter="enter('8849584801955056895');" onmouseout="out('8849584801955056895');" style=""> 157          GBDeviceCandidate candidate = new GBDeviceCandidate(device, GBDevice.RSSI_UNKNOWN, device.getUuids());    </span>
<span class="-318413986788990089" onmouseenter="enter('-318413986788990089');" onmouseout="out('-318413986788990089');" style=""> 158          return toSupportedDevice(candidate);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159      }                                                                                                             </span>
<span  style=""> 160                                                                                                                    </span>
<span class="-4051355324352763386" onmouseenter="enter('-4051355324352763386');" onmouseout="out('-4051355324352763386');" style=""> 161      public GBDevice toSupportedDevice(GBDeviceCandidate candidate) {                                              </span>
<span class="-2876547279184531898" onmouseenter="enter('-2876547279184531898');" onmouseout="out('-2876547279184531898');" style=""> 162          for (DeviceCoordinator coordinator : getAllCoordinators()) {                                              </span>
<span class="7746899366251330745" onmouseenter="enter('7746899366251330745');" onmouseout="out('7746899366251330745');" style=""> 163              if (coordinator.supports(candidate)) {                                                                </span>
<span class="-7778797991172760546" onmouseenter="enter('-7778797991172760546');" onmouseout="out('-7778797991172760546');" style=""> 164                  return coordinator.createDevice(candidate);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 167          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168      }                                                                                                             </span>
<span  style=""> 169                                                                                                                    </span>
<span class="-5651035503093566961" onmouseenter="enter('-5651035503093566961');" onmouseout="out('-5651035503093566961');" style=""> 170      public DeviceCoordinator getCoordinator(GBDeviceCandidate device) {                                           </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 171          synchronized (this) {                                                                                     </span>
<span class="5581566123633040849" onmouseenter="enter('5581566123633040849');" onmouseout="out('5581566123633040849');" style=""> 172              for (DeviceCoordinator coord : getAllCoordinators()) {                                                </span>
<span class="-456707873662890645" onmouseenter="enter('-456707873662890645');" onmouseout="out('-456707873662890645');" style=""> 173                  if (coord.supports(device)) {                                                                     </span>
<span class="-7554628627552477108" onmouseenter="enter('-7554628627552477108');" onmouseout="out('-7554628627552477108');" style=""> 174                      return coord;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177          }                                                                                                         </span>
<span class="-8562800692924603282" onmouseenter="enter('-8562800692924603282');" onmouseout="out('-8562800692924603282');" style=""> 178          return new UnknownDeviceCoordinator();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179      }                                                                                                             </span>
<span  style=""> 180                                                                                                                    </span>
<span class="2088636936691911169" onmouseenter="enter('2088636936691911169');" onmouseout="out('2088636936691911169');" style=""> 181      public DeviceCoordinator getCoordinator(GBDevice device) {                                                    </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 182          synchronized (this) {                                                                                     </span>
<span class="5581566123633040849" onmouseenter="enter('5581566123633040849');" onmouseout="out('5581566123633040849');" style=""> 183              for (DeviceCoordinator coord : getAllCoordinators()) {                                                </span>
<span class="-456707873662890645" onmouseenter="enter('-456707873662890645');" onmouseout="out('-456707873662890645');" style=""> 184                  if (coord.supports(device)) {                                                                     </span>
<span class="-7554628627552477108" onmouseenter="enter('-7554628627552477108');" onmouseout="out('-7554628627552477108');" style=""> 185                      return coord;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188          }                                                                                                         </span>
<span class="-8562800692924603282" onmouseenter="enter('-8562800692924603282');" onmouseout="out('-8562800692924603282');" style=""> 189          return new UnknownDeviceCoordinator();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190      }                                                                                                             </span>
<span  style=""> 191                                                                                                                    </span>
<span class="610514956454116910" onmouseenter="enter('610514956454116910');" onmouseout="out('610514956454116910');" style=""> 192      public synchronized List&lt;DeviceCoordinator&gt; getAllCoordinators() {                                            </span>
<span class="-5653167495443109834" onmouseenter="enter('-5653167495443109834');" onmouseout="out('-5653167495443109834');" style=""> 193          if (coordinators == null) {                                                                               </span>
<span class="6535460489050040084" onmouseenter="enter('6535460489050040084');" onmouseout="out('6535460489050040084');" style=""> 194              coordinators = createCoordinators();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195          }                                                                                                         </span>
<span class="7608420427240005700" onmouseenter="enter('7608420427240005700');" onmouseout="out('7608420427240005700');" style=""> 196          return coordinators;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197      }                                                                                                             </span>
<span  style=""> 198                                                                                                                    </span>
<span class="5367250377489878658" onmouseenter="enter('5367250377489878658');" onmouseout="out('5367250377489878658');" style=""> 199      private List&lt;DeviceCoordinator&gt; createCoordinators() {                                                        </span>
<span class="-8659885373666106675" onmouseenter="enter('-8659885373666106675');" onmouseout="out('-8659885373666106675');" style=""> 200          List&lt;DeviceCoordinator&gt; result = new ArrayList&lt;&gt;();                                                       </span>

<span class="3669774305908054055" onmouseenter="enter('3669774305908054055');" onmouseout="out('3669774305908054055');" style=""> 201          result.add(new AmazfitBipCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm</span>
<span class="-7117613783968222510" onmouseenter="enter('-7117613783968222510');" onmouseout="out('-7117613783968222510');" style=""> 202          result.add(new AmazfitCorCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm</span>
<span class="-1078845644300418098" onmouseenter="enter('-1078845644300418098');" onmouseout="out('-1078845644300418098');" style=""> 203          result.add(new MiBand3Coordinator());  // Note: must come before MiBand2 because detection is hacky, atm  </span>
<span class="-5997211381002485660" onmouseenter="enter('-5997211381002485660');" onmouseout="out('-5997211381002485660');" style=""> 204          result.add(new MiBand2HRXCoordinator()); // Note: must come before MiBand2 because detection is hacky, atm</span>
<span class="4970251816251507839" onmouseenter="enter('4970251816251507839');" onmouseout="out('4970251816251507839');" style=""><abbr title=" 205          result.add(new MiBand2Coordinator()); // Note: MiBand2 must come before MiBand because detection is hacky, atm"> 205          result.add(new MiBand2Coordinator()); // Note: MiBand2 must come before MiBand because detection is hacky,ðŸ”µ</abbr></span>
<span class="-5481576563447422020" onmouseenter="enter('-5481576563447422020');" onmouseout="out('-5481576563447422020');" style=""> 206          result.add(new MiBandCoordinator());                                                                      </span>
<span class="6190871288444688318" onmouseenter="enter('6190871288444688318');" onmouseout="out('6190871288444688318');" style=""> 207          result.add(new PebbleCoordinator());                                                                      </span>
<span class="6793070632976028692" onmouseenter="enter('6793070632976028692');" onmouseout="out('6793070632976028692');" style=""> 208          result.add(new VibratissimoCoordinator());                                                                </span>
<span class="5131269263148398875" onmouseenter="enter('5131269263148398875');" onmouseout="out('5131269263148398875');" style=""> 209          result.add(new LiveviewCoordinator());                                                                    </span>
<span class="1595212057085836033" onmouseenter="enter('1595212057085836033');" onmouseout="out('1595212057085836033');" style=""> 210          result.add(new HPlusCoordinator());                                                                       </span>
<span class="3332735665937364473" onmouseenter="enter('3332735665937364473');" onmouseout="out('3332735665937364473');" style=""> 211          result.add(new No1F1Coordinator());                                                                       </span>
<span class="3699860687323138670" onmouseenter="enter('3699860687323138670');" onmouseout="out('3699860687323138670');" style=""> 212          result.add(new MakibesF68Coordinator());                                                                  </span>
<span class="-5481362583103427017" onmouseenter="enter('-5481362583103427017');" onmouseout="out('-5481362583103427017');" style=""> 213          result.add(new Q8Coordinator());                                                                          </span>
<span class="8067903992183633568" onmouseenter="enter('8067903992183633568');" onmouseout="out('8067903992183633568');" style=""> 214          result.add(new EXRIZUK8Coordinator());                                                                    </span>
<span class="-6898555743395836902" onmouseenter="enter('-6898555743395836902');" onmouseout="out('-6898555743395836902');" style=""> 215          result.add(new TeclastH30Coordinator());                                                                  </span>
<span class="-5904825641300533735" onmouseenter="enter('-5904825641300533735');" onmouseout="out('-5904825641300533735');" style=""> 216          result.add(new XWatchCoordinator());                                                                      </span>
<span class="-1342788656175506629" onmouseenter="enter('-1342788656175506629');" onmouseout="out('-1342788656175506629');" style=""> 217          result.add(new ZeTimeCoordinator());                                                                      </span>
<span class="-5172501225405919533" onmouseenter="enter('-5172501225405919533');" onmouseout="out('-5172501225405919533');" style=""> 218          result.add(new ID115Coordinator());                                                                       </span>
<span class="-5671094850717710707" onmouseenter="enter('-5671094850717710707');" onmouseout="out('-5671094850717710707');" style=""> 219          result.add(new Watch9DeviceCoordinator());                                                                </span>
<span class="9072674293611744445" onmouseenter="enter('9072674293611744445');" onmouseout="out('9072674293611744445');" style=""> 220          result.add(new Roidmi1Coordinator());                                                                     </span>
<span class="-9202027692962819030" onmouseenter="enter('-9202027692962819030');" onmouseout="out('-9202027692962819030');" style=""> 221          result.add(new Roidmi3Coordinator());                                                                     </span>
<span class="-3417192720312420869" onmouseenter="enter('-3417192720312420869');" onmouseout="out('-3417192720312420869');" style=""> 222          result.add(new CasioGB6900DeviceCoordinator());                                                           </span>
<span  style=""> 223                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 224          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225      }                                                                                                             </span>
<span  style=""> 226                                                                                                                    </span>
<span class="3182429837156194527" onmouseenter="enter('3182429837156194527');" onmouseout="out('3182429837156194527');" style=""> 227      private List&lt;GBDevice&gt; getDatabaseDevices() {                                                                 </span>
<span class="840115391726385579" onmouseenter="enter('840115391726385579');" onmouseout="out('840115391726385579');" style=""> 228          List&lt;GBDevice&gt; result = new ArrayList&lt;&gt;();                                                                </span>
<span class="1983564060177123024" onmouseenter="enter('1983564060177123024');" onmouseout="out('1983564060177123024');" style=""> 229          try (DBHandler lockHandler = GBApplication.acquireDB()) {                                                 </span>
<span class="8940139265610706617" onmouseenter="enter('8940139265610706617');" onmouseout="out('8940139265610706617');" style=""> 230              List&lt;Device&gt; activeDevices = DBHelper.getActiveDevices(lockHandler.getDaoSession());                  </span>
<span class="6007915031492495476" onmouseenter="enter('6007915031492495476');" onmouseout="out('6007915031492495476');" style=""> 231              for (Device dbDevice : activeDevices) {                                                               </span>
<span class="-4172089683425383837" onmouseenter="enter('-4172089683425383837');" onmouseout="out('-4172089683425383837');" style=""> 232                  GBDevice gbDevice = toGBDevice(dbDevice);                                                         </span>
<span class="-2890086854640002908" onmouseenter="enter('-2890086854640002908');" onmouseout="out('-2890086854640002908');" style=""> 233                  if (gbDevice != null &amp;&amp; DeviceHelper.getInstance().getSupportedType(gbDevice)) {                  </span>
<span class="5237701413799306923" onmouseenter="enter('5237701413799306923');" onmouseout="out('5237701413799306923');" style=""> 234                      result.add(gbDevice);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236              }                                                                                                     </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 237              return result;                                                                                        </span>
<span  style=""> 238                                                                                                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 239          } catch (Exception e) {                                                                                   </span>
<span class="-187514096336122593" onmouseenter="enter('-187514096336122593');" onmouseout="out('-187514096336122593');" style=""> 240              GB.toast(&quot;Error retrieving devices from database&quot;, Toast.LENGTH_SHORT, GB.ERROR);                     </span>
<span class="-6093315130064080899" onmouseenter="enter('-6093315130064080899');" onmouseout="out('-6093315130064080899');" style=""> 241              return Collections.emptyList();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243      }                                                                                                             </span>
<span  style=""> 244                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 245      /**                                                                                                           </span>
<span class="-8078490980994469589" onmouseenter="enter('-8078490980994469589');" onmouseout="out('-8078490980994469589');" style=""> 246       * Converts a known device from the database to a GBDevice.                                                   </span>
<span class="7713530361969283549" onmouseenter="enter('7713530361969283549');" onmouseout="out('7713530361969283549');" style=""> 247       * Note: The device might not be supported anymore, so callers should verify that.                            </span>
<span class="-6700615312658933431" onmouseenter="enter('-6700615312658933431');" onmouseout="out('-6700615312658933431');" style=""> 248       * @param dbDevice                                                                                            </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 249       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 250       */                                                                                                           </span>
<span class="2606688045344874841" onmouseenter="enter('2606688045344874841');" onmouseout="out('2606688045344874841');" style=""> 251      public GBDevice toGBDevice(Device dbDevice) {                                                                 </span>
<span class="1652882496457315529" onmouseenter="enter('1652882496457315529');" onmouseout="out('1652882496457315529');" style=""> 252          DeviceType deviceType = DeviceType.fromKey(dbDevice.getType());                                           </span>
<span class="5855596366176965620" onmouseenter="enter('5855596366176965620');" onmouseout="out('5855596366176965620');" style=""> 253          GBDevice gbDevice = new GBDevice(dbDevice.getIdentifier(), dbDevice.getName(), deviceType);               </span>
<span class="9004683367408636271" onmouseenter="enter('9004683367408636271');" onmouseout="out('9004683367408636271');" style=""> 254          List&lt;DeviceAttributes&gt; deviceAttributesList = dbDevice.getDeviceAttributesList();                         </span>
<span class="-694602091282451513" onmouseenter="enter('-694602091282451513');" onmouseout="out('-694602091282451513');" style=""> 255          if (deviceAttributesList.size() &gt; 0) {                                                                    </span>
<span class="-3212481810427050137" onmouseenter="enter('-3212481810427050137');" onmouseout="out('-3212481810427050137');" style=""> 256              gbDevice.setModel(dbDevice.getModel());                                                               </span>
<span class="354034525378834429" onmouseenter="enter('354034525378834429');" onmouseout="out('354034525378834429');" style=""> 257              DeviceAttributes attrs = deviceAttributesList.get(0);                                                 </span>
<span class="-8620968705551486244" onmouseenter="enter('-8620968705551486244');" onmouseout="out('-8620968705551486244');" style=""> 258              gbDevice.setFirmwareVersion(attrs.getFirmwareVersion1());                                             </span>
<span class="-2407126446549023078" onmouseenter="enter('-2407126446549023078');" onmouseout="out('-2407126446549023078');" style=""> 259              gbDevice.setFirmwareVersion2(attrs.getFirmwareVersion2());                                            </span>
<span class="6046344818374293876" onmouseenter="enter('6046344818374293876');" onmouseout="out('6046344818374293876');" style=""> 260              gbDevice.setVolatileAddress(attrs.getVolatileIdentifier());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261          }                                                                                                         </span>
<span  style=""> 262                                                                                                                    </span>
<span class="-9206390224358820403" onmouseenter="enter('-9206390224358820403');" onmouseout="out('-9206390224358820403');" style=""> 263          return gbDevice;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264      }                                                                                                             </span>
<span  style=""> 265                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 266      /**                                                                                                           </span>
<span class="8342379087536305506" onmouseenter="enter('8342379087536305506');" onmouseout="out('8342379087536305506');" style=""> 267       * Attempts to removing the bonding with the given device. Returns true                                       </span>
<span class="-9119695278064429966" onmouseenter="enter('-9119695278064429966');" onmouseout="out('-9119695278064429966');" style=""> 268       * if bonding was supposedly successful and false if anything went wrong                                      </span>
<span class="1113685536488546558" onmouseenter="enter('1113685536488546558');" onmouseout="out('1113685536488546558');" style=""> 269       * @param device                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 270       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 271       */                                                                                                           </span>
<span class="-8639258336155222707" onmouseenter="enter('-8639258336155222707');" onmouseout="out('-8639258336155222707');" style=""> 272      public boolean removeBond(GBDevice device) throws GBException {                                               </span>
<span class="5527337570660915921" onmouseenter="enter('5527337570660915921');" onmouseout="out('5527337570660915921');" style=""> 273          BluetoothAdapter defaultAdapter = BluetoothAdapter.getDefaultAdapter();                                   </span>
<span class="6535479181747156907" onmouseenter="enter('6535479181747156907');" onmouseout="out('6535479181747156907');" style=""> 274          if (defaultAdapter != null) {                                                                             </span>
<span class="-6099553505981596341" onmouseenter="enter('-6099553505981596341');" onmouseout="out('-6099553505981596341');" style=""> 275              BluetoothDevice remoteDevice = defaultAdapter.getRemoteDevice(device.getAddress());                   </span>
<span class="-6902931335510683219" onmouseenter="enter('-6902931335510683219');" onmouseout="out('-6902931335510683219');" style=""> 276              if (remoteDevice != null) {                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 277                  try {                                                                                             </span>
<span class="6635920500800020475" onmouseenter="enter('6635920500800020475');" onmouseout="out('6635920500800020475');" style=""> 278                      Method method = BluetoothDevice.class.getMethod(&quot;removeBond&quot;, (Class[]) null);                </span>
<span class="4415940968731599000" onmouseenter="enter('4415940968731599000');" onmouseout="out('4415940968731599000');" style=""> 279                      Object result = method.invoke(remoteDevice, (Object[]) null);                                 </span>
<span class="6302849373420131955" onmouseenter="enter('6302849373420131955');" onmouseout="out('6302849373420131955');" style=""> 280                      return Boolean.TRUE.equals(result);                                                           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 281                  } catch (Exception e) {                                                                           </span>
<span class="8351198176145398153" onmouseenter="enter('8351198176145398153');" onmouseout="out('8351198176145398153');" style=""> 282                      throw new GBException(&quot;Error removing bond to device: &quot; + device, e);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 286          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287      }                                                                                                             </span>
<span  style=""> 288                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            