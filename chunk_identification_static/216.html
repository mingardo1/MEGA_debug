<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>216</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    216
                    <a href="215.html">prev</a>
                    <a href="217.html">next</a>
                    <a href="216_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    CyanogenMod/android_packages_apps_Trebuchet_393631d4b5600c33bd5ebe4ed21c5a49e6f5f66e_src/com/android/launcher3/LauncherAppWidgetHost.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;393631d4b5600c33bd5ebe4ed21c5a49e6f5f66e:src/com/android/launcher3/LauncherAppWidgetHost.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;393631d4b5600c33bd5ebe4ed21c5a49e6f5f66e^1:src/com/android/launcher3/LauncherAppWidgetHost.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;393631d4b5600c33bd5ebe4ed21c5a49e6f5f66e^2:src/com/android/launcher3/LauncherAppWidgetHost.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;68fdeaadc621b7a9200f5c75790eb756a1983d02:src/com/android/launcher3/LauncherAppWidgetHost.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [j]], subset: [[bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7315961432178920529" onmouseenter="enter('7315961432178920529');" onmouseout="out('7315961432178920529');" style="">   2  * Copyright (C) 2009 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="504928717176532115" onmouseenter="enter('504928717176532115');" onmouseout="out('504928717176532115');" style="">  19 import android.appwidget.AppWidgetHost;                                                                  </span>
<span class="3579758368375369133" onmouseenter="enter('3579758368375369133');" onmouseout="out('3579758368375369133');" style="">  20 import android.appwidget.AppWidgetHostView;                                                              </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  22 import android.content.Context;                                                                          </span>
<span class="-7843999199481383489" onmouseenter="enter('-7843999199481383489');" onmouseout="out('-7843999199481383489');" style="">  23 import android.os.TransactionTooLargeException;                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24 import android.view.LayoutInflater;                                                                      </span>
<span  style="">  25                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  26 import java.util.ArrayList;                                                                              </span>
<span  style="">  27                                                                                                          </span>
<span  style="">  28                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  29 /**                                                                                                      </span>
<span class="-6416338870112299444" onmouseenter="enter('-6416338870112299444');" onmouseout="out('-6416338870112299444');" style="">  30  * Specific {@link AppWidgetHost} that creates our {@link LauncherAppWidgetHostView}                     </span>
<span class="9032716678594186410" onmouseenter="enter('9032716678594186410');" onmouseout="out('9032716678594186410');" style="">  31  * which correctly captures all long-press events. This ensures that users can                           </span>
<span class="-3542564283938605982" onmouseenter="enter('-3542564283938605982');" onmouseout="out('-3542564283938605982');" style="">  32  * always pick up and move widgets.                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  33  */                                                                                                      </span>
<span class="6401519679823635910" onmouseenter="enter('6401519679823635910');" onmouseout="out('6401519679823635910');" style="">  34 public class LauncherAppWidgetHost extends AppWidgetHost {                                               </span>
<span  style="">  35                                                                                                          </span>
<span class="-271136877627924668" onmouseenter="enter('-271136877627924668');" onmouseout="out('-271136877627924668');" style="">  36     private final ArrayList&lt;Runnable&gt; mProviderChangeListeners = new ArrayList&lt;Runnable&gt;();              </span>
<span  style="">  37                                                                                                          </span>
<span class="-831155609933568730" onmouseenter="enter('-831155609933568730');" onmouseout="out('-831155609933568730');" style="">  38     Launcher mLauncher;                                                                                  </span>
<span  style="">  39                                                                                                          </span>
<span class="-3763838228317560570" onmouseenter="enter('-3763838228317560570');" onmouseout="out('-3763838228317560570');" style="">  40     public LauncherAppWidgetHost(Launcher launcher, int hostId) {                                        </span>
<span class="-2696406565996516772" onmouseenter="enter('-2696406565996516772');" onmouseout="out('-2696406565996516772');" style="">  41         super(launcher, hostId);                                                                         </span>
<span class="2298492052814421644" onmouseenter="enter('2298492052814421644');" onmouseout="out('2298492052814421644');" style="">  42         mLauncher = launcher;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  43     }                                                                                                    </span>
<span  style="">  44                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  45     @Override                                                                                            </span>
<span class="-4065032842914424982" onmouseenter="enter('-4065032842914424982');" onmouseout="out('-4065032842914424982');" style="">  46     protected AppWidgetHostView onCreateView(Context context, int appWidgetId,                           </span>
<span class="7540978812572243669" onmouseenter="enter('7540978812572243669');" onmouseout="out('7540978812572243669');" style="">  47             AppWidgetProviderInfo appWidget) {                                                           </span>
<span class="-1565306010018075342" onmouseenter="enter('-1565306010018075342');" onmouseout="out('-1565306010018075342');" style="">  48         return new LauncherAppWidgetHostView(context);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  49     }                                                                                                    </span>
<span  style="">  50                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  51     @Override                                                                                            </span>
<span class="1003231409568374748" onmouseenter="enter('1003231409568374748');" onmouseout="out('1003231409568374748');" style="">  52     public void startListening() {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  53         try {                                                                                            </span>
<span class="2112121225013781615" onmouseenter="enter('2112121225013781615');" onmouseout="out('2112121225013781615');" style="">  54             super.startListening();                                                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">  55         } catch (Exception e) {                                                                          </span>
<span class="-8489628015829867106" onmouseenter="enter('-8489628015829867106');" onmouseout="out('-8489628015829867106');" style="">  56             if (e.getCause() instanceof TransactionTooLargeException) {                                  </span>
<span class="-6274022530743329717" onmouseenter="enter('-6274022530743329717');" onmouseout="out('-6274022530743329717');" style="">  57                 // We&#x27;re willing to let this slide. The exception is being caused by the list of         </span>
<span class="-1093726023100183918" onmouseenter="enter('-1093726023100183918');" onmouseout="out('-1093726023100183918');" style="">  58                 // RemoteViews which is being passed back. The startListening relationship will          </span>
<span class="4569729839198546944" onmouseenter="enter('4569729839198546944');" onmouseout="out('4569729839198546944');" style="">  59                 // have been established by this point, and we will end up populating the                </span>
<span class="7285809756812679141" onmouseenter="enter('7285809756812679141');" onmouseout="out('7285809756812679141');" style="">  60                 // widgets upon bind anyway. See issue 14255011 for more context.                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  61             } else {                                                                                     </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">  62                 throw new RuntimeException(e);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  63             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  64         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  65     }                                                                                                    </span>
<span  style="">  66                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  67     @Override                                                                                            </span>
<span class="-11300768212058069" onmouseenter="enter('-11300768212058069');" onmouseout="out('-11300768212058069');" style="">  68     public void stopListening() {                                                                        </span>
<span class="8233666029387384192" onmouseenter="enter('8233666029387384192');" onmouseout="out('8233666029387384192');" style="">  69         super.stopListening();                                                                           </span>
<span class="6726186665403103927" onmouseenter="enter('6726186665403103927');" onmouseout="out('6726186665403103927');" style="">  70         clearViews();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  71     }                                                                                                    </span>
<span  style="">  72                                                                                                          </span>
<span class="5345359630716031492" onmouseenter="enter('5345359630716031492');" onmouseout="out('5345359630716031492');" style="">  73     public void addProviderChangeListener(Runnable callback) {                                           </span>
<span class="8930602826919612577" onmouseenter="enter('8930602826919612577');" onmouseout="out('8930602826919612577');" style="">  74         mProviderChangeListeners.add(callback);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75     }                                                                                                    </span>
<span  style="">  76                                                                                                          </span>
<span class="-634081077670693469" onmouseenter="enter('-634081077670693469');" onmouseout="out('-634081077670693469');" style="">  77     public void removeProviderChangeListener(Runnable callback) {                                        </span>
<span class="-4650626910524333538" onmouseenter="enter('-4650626910524333538');" onmouseout="out('-4650626910524333538');" style="">  78         mProviderChangeListeners.remove(callback);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79     }                                                                                                    </span>
<span  style="">  80                                                                                                          </span>
<span class="-4794542314147662229" onmouseenter="enter('-4794542314147662229');" onmouseout="out('-4794542314147662229');" style="">  81     protected void onProvidersChanged() {                                                                </span>
<span class="1007042212039586347" onmouseenter="enter('1007042212039586347');" onmouseout="out('1007042212039586347');" style="">  82         // Once we get the message that widget packages are updated, we need to rebind items             </span>
<span class="2476923213548612822" onmouseenter="enter('2476923213548612822');" onmouseout="out('2476923213548612822');" style="">  83         // in AppsCustomize accordingly.                                                                 </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  84 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-1771284736667896970" onmouseenter="enter('-1771284736667896970');" onmouseout="out('-1771284736667896970');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  85         mLauncher.bindPackagesUpdated(LauncherModel.getSortedWidgetsAndShortcuts(mLauncher,              </span>
<span class="-5514854621328752591" onmouseenter="enter('-5514854621328752591');" onmouseout="out('-5514854621328752591');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  86                 true /* refresh */));                                                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  87                                                                                                          </span>
<span class="6100461671288922035" onmouseenter="enter('6100461671288922035');" onmouseout="out('6100461671288922035');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  88         if (!mProviderChangeListeners.isEmpty()) {                                                       </span>
<span class="-9210209063533946103" onmouseenter="enter('-9210209063533946103');" onmouseout="out('-9210209063533946103');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  89             for (Runnable callback : new ArrayList&lt;&gt;(mProviderChangeListeners)) {                        </span>
<span class="8286986459013221147" onmouseenter="enter('8286986459013221147');" onmouseout="out('8286986459013221147');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  90                 callback.run();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  91             }                                                                                            </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  92 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1771284736667896970" onmouseenter="enter('-1771284736667896970');" onmouseout="out('-1771284736667896970');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93         mLauncher.bindPackagesUpdated(LauncherModel.getSortedWidgetsAndShortcuts(mLauncher,              </span>
<span class="-5514854621328752591" onmouseenter="enter('-5514854621328752591');" onmouseout="out('-5514854621328752591');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94                 true /* refresh */));                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95                                                                                                          </span>
<span class="170115593382414736" onmouseenter="enter('170115593382414736');" onmouseout="out('170115593382414736');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  96         for (Runnable callback : mProviderChangeListeners) {                                             </span>
<span class="8286986459013221147" onmouseenter="enter('8286986459013221147');" onmouseout="out('8286986459013221147');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97             callback.run();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99     }                                                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 100 =======                                                                                                  </span>
<span class="4150942567603581329" onmouseenter="enter('4150942567603581329');" onmouseout="out('4150942567603581329');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 101         mLauncher.getModel().loadAndBindWidgetsAndShortcuts(mLauncher, mLauncher);                       </span>
<span class="170115593382414736" onmouseenter="enter('170115593382414736');" onmouseout="out('170115593382414736');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 102         for (Runnable callback : mProviderChangeListeners) {                                             </span>
<span class="8286986459013221147" onmouseenter="enter('8286986459013221147');" onmouseout="out('8286986459013221147');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 103             callback.run();                                                                              </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 104 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106     }                                                                                                    </span>
<span  style=""> 107                                                                                                          </span>
<span class="-2647142615511777880" onmouseenter="enter('-2647142615511777880');" onmouseout="out('-2647142615511777880');" style=""> 108     public AppWidgetHostView createView(Context context, int appWidgetId,                                </span>
<span class="5548212965052374172" onmouseenter="enter('5548212965052374172');" onmouseout="out('5548212965052374172');" style=""> 109             LauncherAppWidgetProviderInfo appWidget) {                                                   </span>
<span class="7345638167174726636" onmouseenter="enter('7345638167174726636');" onmouseout="out('7345638167174726636');" style=""> 110         if (appWidget.isCustomWidget) {                                                                  </span>
<span class="-5841757436065436863" onmouseenter="enter('-5841757436065436863');" onmouseout="out('-5841757436065436863');" style=""> 111             LauncherAppWidgetHostView lahv = new LauncherAppWidgetHostView(context);                     </span>
<span class="-9041050344388994571" onmouseenter="enter('-9041050344388994571');" onmouseout="out('-9041050344388994571');" style=""> 112             LayoutInflater inflater = (LayoutInflater)                                                   </span>
<span class="-4098440014614609785" onmouseenter="enter('-4098440014614609785');" onmouseout="out('-4098440014614609785');" style=""> 113                     context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);                           </span>
<span class="-7040908358148037802" onmouseenter="enter('-7040908358148037802');" onmouseout="out('-7040908358148037802');" style=""> 114             inflater.inflate(appWidget.initialLayout, lahv);                                             </span>
<span class="-3606823766616163624" onmouseenter="enter('-3606823766616163624');" onmouseout="out('-3606823766616163624');" style=""> 115             lahv.setAppWidget(0, appWidget);                                                             </span>
<span class="2130522704205004214" onmouseenter="enter('2130522704205004214');" onmouseout="out('2130522704205004214');" style=""> 116             lahv.updateLastInflationOrientation();                                                       </span>
<span class="-5405456384816996431" onmouseenter="enter('-5405456384816996431');" onmouseout="out('-5405456384816996431');" style=""> 117             return lahv;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 118         } else {                                                                                         </span>
<span class="5726689088153707814" onmouseenter="enter('5726689088153707814');" onmouseout="out('5726689088153707814');" style=""> 119             return super.createView(context, appWidgetId, appWidget);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121     }                                                                                                    </span>
<span  style=""> 122                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 123     /**                                                                                                  </span>
<span class="1370523622879915223" onmouseenter="enter('1370523622879915223');" onmouseout="out('1370523622879915223');" style=""> 124      * Called when the AppWidget provider for a AppWidget has been upgraded to a new apk.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 125      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 126     @Override                                                                                            </span>
<span class="7819115799145472039" onmouseenter="enter('7819115799145472039');" onmouseout="out('7819115799145472039');" style=""> 127     protected void onProviderChanged(int appWidgetId, AppWidgetProviderInfo appWidget) {                 </span>
<span class="4180849937732055332" onmouseenter="enter('4180849937732055332');" onmouseout="out('4180849937732055332');" style=""> 128         LauncherAppWidgetProviderInfo info = LauncherAppWidgetProviderInfo.fromProviderInfo(             </span>
<span class="4794270408633035007" onmouseenter="enter('4794270408633035007');" onmouseout="out('4794270408633035007');" style=""> 129                 mLauncher, appWidget);                                                                   </span>
<span class="401411839946285880" onmouseenter="enter('401411839946285880');" onmouseout="out('401411839946285880');" style=""> 130         super.onProviderChanged(appWidgetId, info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 131     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 132 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7315961432178920529" onmouseenter="enter('7315961432178920529');" onmouseout="out('7315961432178920529');" style="">   2  * Copyright (C) 2009 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="504928717176532115" onmouseenter="enter('504928717176532115');" onmouseout="out('504928717176532115');" style="">  19 import android.appwidget.AppWidgetHost;                                                                  </span>
<span class="3579758368375369133" onmouseenter="enter('3579758368375369133');" onmouseout="out('3579758368375369133');" style="">  20 import android.appwidget.AppWidgetHostView;                                                              </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  22 import android.content.Context;                                                                          </span>
<span class="-7843999199481383489" onmouseenter="enter('-7843999199481383489');" onmouseout="out('-7843999199481383489');" style="">  23 import android.os.TransactionTooLargeException;                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24 import android.view.LayoutInflater;                                                                      </span>
<span  style="">  25                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  26 import java.util.ArrayList;                                                                              </span>
<span  style="">  27                                                                                                          </span>
<span  style="">  28                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  29 /**                                                                                                      </span>
<span class="-6416338870112299444" onmouseenter="enter('-6416338870112299444');" onmouseout="out('-6416338870112299444');" style="">  30  * Specific {@link AppWidgetHost} that creates our {@link LauncherAppWidgetHostView}                     </span>
<span class="9032716678594186410" onmouseenter="enter('9032716678594186410');" onmouseout="out('9032716678594186410');" style="">  31  * which correctly captures all long-press events. This ensures that users can                           </span>
<span class="-3542564283938605982" onmouseenter="enter('-3542564283938605982');" onmouseout="out('-3542564283938605982');" style="">  32  * always pick up and move widgets.                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  33  */                                                                                                      </span>
<span class="6401519679823635910" onmouseenter="enter('6401519679823635910');" onmouseout="out('6401519679823635910');" style="">  34 public class LauncherAppWidgetHost extends AppWidgetHost {                                               </span>
<span  style="">  35                                                                                                          </span>
<span class="-271136877627924668" onmouseenter="enter('-271136877627924668');" onmouseout="out('-271136877627924668');" style="">  36     private final ArrayList&lt;Runnable&gt; mProviderChangeListeners = new ArrayList&lt;Runnable&gt;();              </span>
<span  style="">  37                                                                                                          </span>
<span class="-831155609933568730" onmouseenter="enter('-831155609933568730');" onmouseout="out('-831155609933568730');" style="">  38     Launcher mLauncher;                                                                                  </span>
<span  style="">  39                                                                                                          </span>
<span class="-3763838228317560570" onmouseenter="enter('-3763838228317560570');" onmouseout="out('-3763838228317560570');" style="">  40     public LauncherAppWidgetHost(Launcher launcher, int hostId) {                                        </span>
<span class="-2696406565996516772" onmouseenter="enter('-2696406565996516772');" onmouseout="out('-2696406565996516772');" style="">  41         super(launcher, hostId);                                                                         </span>
<span class="2298492052814421644" onmouseenter="enter('2298492052814421644');" onmouseout="out('2298492052814421644');" style="">  42         mLauncher = launcher;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  43     }                                                                                                    </span>
<span  style="">  44                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  45     @Override                                                                                            </span>
<span class="-4065032842914424982" onmouseenter="enter('-4065032842914424982');" onmouseout="out('-4065032842914424982');" style="">  46     protected AppWidgetHostView onCreateView(Context context, int appWidgetId,                           </span>
<span class="7540978812572243669" onmouseenter="enter('7540978812572243669');" onmouseout="out('7540978812572243669');" style="">  47             AppWidgetProviderInfo appWidget) {                                                           </span>
<span class="-1565306010018075342" onmouseenter="enter('-1565306010018075342');" onmouseout="out('-1565306010018075342');" style="">  48         return new LauncherAppWidgetHostView(context);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  49     }                                                                                                    </span>
<span  style="">  50                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  51     @Override                                                                                            </span>
<span class="1003231409568374748" onmouseenter="enter('1003231409568374748');" onmouseout="out('1003231409568374748');" style="">  52     public void startListening() {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  53         try {                                                                                            </span>
<span class="2112121225013781615" onmouseenter="enter('2112121225013781615');" onmouseout="out('2112121225013781615');" style="">  54             super.startListening();                                                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">  55         } catch (Exception e) {                                                                          </span>
<span class="-8489628015829867106" onmouseenter="enter('-8489628015829867106');" onmouseout="out('-8489628015829867106');" style="">  56             if (e.getCause() instanceof TransactionTooLargeException) {                                  </span>
<span class="-6274022530743329717" onmouseenter="enter('-6274022530743329717');" onmouseout="out('-6274022530743329717');" style="">  57                 // We&#x27;re willing to let this slide. The exception is being caused by the list of         </span>
<span class="-1093726023100183918" onmouseenter="enter('-1093726023100183918');" onmouseout="out('-1093726023100183918');" style="">  58                 // RemoteViews which is being passed back. The startListening relationship will          </span>
<span class="4569729839198546944" onmouseenter="enter('4569729839198546944');" onmouseout="out('4569729839198546944');" style="">  59                 // have been established by this point, and we will end up populating the                </span>
<span class="7285809756812679141" onmouseenter="enter('7285809756812679141');" onmouseout="out('7285809756812679141');" style="">  60                 // widgets upon bind anyway. See issue 14255011 for more context.                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  61             } else {                                                                                     </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">  62                 throw new RuntimeException(e);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  63             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  64         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  65     }                                                                                                    </span>
<span  style="">  66                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  67     @Override                                                                                            </span>
<span class="-11300768212058069" onmouseenter="enter('-11300768212058069');" onmouseout="out('-11300768212058069');" style="">  68     public void stopListening() {                                                                        </span>
<span class="8233666029387384192" onmouseenter="enter('8233666029387384192');" onmouseout="out('8233666029387384192');" style="">  69         super.stopListening();                                                                           </span>
<span class="6726186665403103927" onmouseenter="enter('6726186665403103927');" onmouseout="out('6726186665403103927');" style="">  70         clearViews();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  71     }                                                                                                    </span>
<span  style="">  72                                                                                                          </span>
<span class="5345359630716031492" onmouseenter="enter('5345359630716031492');" onmouseout="out('5345359630716031492');" style="">  73     public void addProviderChangeListener(Runnable callback) {                                           </span>
<span class="8930602826919612577" onmouseenter="enter('8930602826919612577');" onmouseout="out('8930602826919612577');" style="">  74         mProviderChangeListeners.add(callback);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75     }                                                                                                    </span>
<span  style="">  76                                                                                                          </span>
<span class="-634081077670693469" onmouseenter="enter('-634081077670693469');" onmouseout="out('-634081077670693469');" style="">  77     public void removeProviderChangeListener(Runnable callback) {                                        </span>
<span class="-4650626910524333538" onmouseenter="enter('-4650626910524333538');" onmouseout="out('-4650626910524333538');" style="">  78         mProviderChangeListeners.remove(callback);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79     }                                                                                                    </span>
<span  style="">  80                                                                                                          </span>
<span class="-4794542314147662229" onmouseenter="enter('-4794542314147662229');" onmouseout="out('-4794542314147662229');" style="">  81     protected void onProvidersChanged() {                                                                </span>
<span class="1007042212039586347" onmouseenter="enter('1007042212039586347');" onmouseout="out('1007042212039586347');" style="">  82         // Once we get the message that widget packages are updated, we need to rebind items             </span>
<span class="2476923213548612822" onmouseenter="enter('2476923213548612822');" onmouseout="out('2476923213548612822');" style="">  83         // in AppsCustomize accordingly.                                                                 </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">  84 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-1771284736667896970" onmouseenter="enter('-1771284736667896970');" onmouseout="out('-1771284736667896970');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  85         mLauncher.bindPackagesUpdated(LauncherModel.getSortedWidgetsAndShortcuts(mLauncher,              </span>
<span class="-5514854621328752591" onmouseenter="enter('-5514854621328752591');" onmouseout="out('-5514854621328752591');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  86                 true /* refresh */));                                                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  87                                                                                                          </span>
<span class="6100461671288922035" onmouseenter="enter('6100461671288922035');" onmouseout="out('6100461671288922035');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  88         if (!mProviderChangeListeners.isEmpty()) {                                                       </span>
<span class="-9210209063533946103" onmouseenter="enter('-9210209063533946103');" onmouseout="out('-9210209063533946103');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  89             for (Runnable callback : new ArrayList&lt;&gt;(mProviderChangeListeners)) {                        </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  90 ||||||| BASE                                                                                             </span>
<span class="-1771284736667896970" onmouseenter="enter('-1771284736667896970');" onmouseout="out('-1771284736667896970');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  91         mLauncher.bindPackagesUpdated(LauncherModel.getSortedWidgetsAndShortcuts(mLauncher,              </span>
<span class="-5514854621328752591" onmouseenter="enter('-5514854621328752591');" onmouseout="out('-5514854621328752591');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92                 true /* refresh */));                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93                                                                                                          </span>
<span class="170115593382414736" onmouseenter="enter('170115593382414736');" onmouseout="out('170115593382414736');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94         for (Runnable callback : mProviderChangeListeners) {                                             </span>
<span class="8286986459013221147" onmouseenter="enter('8286986459013221147');" onmouseout="out('8286986459013221147');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95             callback.run();                                                                              </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  96 =======                                                                                                  </span>
<span class="4150942567603581329" onmouseenter="enter('4150942567603581329');" onmouseout="out('4150942567603581329');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  97         mLauncher.getModel().loadAndBindWidgetsAndShortcuts(mLauncher, mLauncher);                       </span>
<span class="170115593382414736" onmouseenter="enter('170115593382414736');" onmouseout="out('170115593382414736');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  98         for (Runnable callback : mProviderChangeListeners) {                                             </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style="">  99 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="8286986459013221147" onmouseenter="enter('8286986459013221147');" onmouseout="out('8286986459013221147');" style=""> 100             callback.run();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 101         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 102     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103     }                                                                                                    </span>
<span  style=""> 104                                                                                                          </span>
<span class="-2647142615511777880" onmouseenter="enter('-2647142615511777880');" onmouseout="out('-2647142615511777880');" style=""> 105     public AppWidgetHostView createView(Context context, int appWidgetId,                                </span>
<span class="5548212965052374172" onmouseenter="enter('5548212965052374172');" onmouseout="out('5548212965052374172');" style=""> 106             LauncherAppWidgetProviderInfo appWidget) {                                                   </span>
<span class="7345638167174726636" onmouseenter="enter('7345638167174726636');" onmouseout="out('7345638167174726636');" style=""> 107         if (appWidget.isCustomWidget) {                                                                  </span>
<span class="-5841757436065436863" onmouseenter="enter('-5841757436065436863');" onmouseout="out('-5841757436065436863');" style=""> 108             LauncherAppWidgetHostView lahv = new LauncherAppWidgetHostView(context);                     </span>
<span class="-9041050344388994571" onmouseenter="enter('-9041050344388994571');" onmouseout="out('-9041050344388994571');" style=""> 109             LayoutInflater inflater = (LayoutInflater)                                                   </span>
<span class="-4098440014614609785" onmouseenter="enter('-4098440014614609785');" onmouseout="out('-4098440014614609785');" style=""> 110                     context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);                           </span>
<span class="-7040908358148037802" onmouseenter="enter('-7040908358148037802');" onmouseout="out('-7040908358148037802');" style=""> 111             inflater.inflate(appWidget.initialLayout, lahv);                                             </span>
<span class="-3606823766616163624" onmouseenter="enter('-3606823766616163624');" onmouseout="out('-3606823766616163624');" style=""> 112             lahv.setAppWidget(0, appWidget);                                                             </span>
<span class="2130522704205004214" onmouseenter="enter('2130522704205004214');" onmouseout="out('2130522704205004214');" style=""> 113             lahv.updateLastInflationOrientation();                                                       </span>
<span class="-5405456384816996431" onmouseenter="enter('-5405456384816996431');" onmouseout="out('-5405456384816996431');" style=""> 114             return lahv;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 115         } else {                                                                                         </span>
<span class="5726689088153707814" onmouseenter="enter('5726689088153707814');" onmouseout="out('5726689088153707814');" style=""> 116             return super.createView(context, appWidgetId, appWidget);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118     }                                                                                                    </span>
<span  style=""> 119                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 120     /**                                                                                                  </span>
<span class="1370523622879915223" onmouseenter="enter('1370523622879915223');" onmouseout="out('1370523622879915223');" style=""> 121      * Called when the AppWidget provider for a AppWidget has been upgraded to a new apk.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 122      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 123     @Override                                                                                            </span>
<span class="7819115799145472039" onmouseenter="enter('7819115799145472039');" onmouseout="out('7819115799145472039');" style=""> 124     protected void onProviderChanged(int appWidgetId, AppWidgetProviderInfo appWidget) {                 </span>
<span class="4180849937732055332" onmouseenter="enter('4180849937732055332');" onmouseout="out('4180849937732055332');" style=""> 125         LauncherAppWidgetProviderInfo info = LauncherAppWidgetProviderInfo.fromProviderInfo(             </span>
<span class="4794270408633035007" onmouseenter="enter('4794270408633035007');" onmouseout="out('4794270408633035007');" style=""> 126                 mLauncher, appWidget);                                                                   </span>
<span class="401411839946285880" onmouseenter="enter('401411839946285880');" onmouseout="out('401411839946285880');" style=""> 127         super.onProviderChanged(appWidgetId, info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129 }                                                                                                        </span>

</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7315961432178920529" onmouseenter="enter('7315961432178920529');" onmouseout="out('7315961432178920529');" style="">   2  * Copyright (C) 2009 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  16 package com.android.launcher3;                                                                           </span>
<span  style="">  17                                                                                                          </span>
<span class="504928717176532115" onmouseenter="enter('504928717176532115');" onmouseout="out('504928717176532115');" style="">  18 import android.appwidget.AppWidgetHost;                                                                  </span>
<span class="3579758368375369133" onmouseenter="enter('3579758368375369133');" onmouseout="out('3579758368375369133');" style="">  19 import android.appwidget.AppWidgetHostView;                                                              </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  20 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  21 import android.content.Context;                                                                          </span>
<span class="-7843999199481383489" onmouseenter="enter('-7843999199481383489');" onmouseout="out('-7843999199481383489');" style="">  22 import android.os.TransactionTooLargeException;                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  23 import android.view.LayoutInflater;                                                                      </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  24 import java.util.ArrayList;                                                                              </span>
<span  style="">  25                                                                                                          </span>
<span  style="">  26                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  27 /**                                                                                                      </span>
<span class="-6416338870112299444" onmouseenter="enter('-6416338870112299444');" onmouseout="out('-6416338870112299444');" style="">  28  * Specific {@link AppWidgetHost} that creates our {@link LauncherAppWidgetHostView}                     </span>
<span class="9032716678594186410" onmouseenter="enter('9032716678594186410');" onmouseout="out('9032716678594186410');" style="">  29  * which correctly captures all long-press events. This ensures that users can                           </span>
<span class="-3542564283938605982" onmouseenter="enter('-3542564283938605982');" onmouseout="out('-3542564283938605982');" style="">  30  * always pick up and move widgets.                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  31  */                                                                                                      </span>
<span class="6401519679823635910" onmouseenter="enter('6401519679823635910');" onmouseout="out('6401519679823635910');" style="">  32 public class LauncherAppWidgetHost extends AppWidgetHost {                                               </span>
<span class="-271136877627924668" onmouseenter="enter('-271136877627924668');" onmouseout="out('-271136877627924668');" style="">  33     private final ArrayList&lt;Runnable&gt; mProviderChangeListeners = new ArrayList&lt;Runnable&gt;();              </span>
<span  style="">  34                                                                                                          </span>
<span class="-831155609933568730" onmouseenter="enter('-831155609933568730');" onmouseout="out('-831155609933568730');" style="">  35     Launcher mLauncher;                                                                                  </span>
<span  style="">  36                                                                                                          </span>
<span class="-3763838228317560570" onmouseenter="enter('-3763838228317560570');" onmouseout="out('-3763838228317560570');" style="">  37     public LauncherAppWidgetHost(Launcher launcher, int hostId) {                                        </span>
<span class="-2696406565996516772" onmouseenter="enter('-2696406565996516772');" onmouseout="out('-2696406565996516772');" style="">  38         super(launcher, hostId);                                                                         </span>
<span class="2298492052814421644" onmouseenter="enter('2298492052814421644');" onmouseout="out('2298492052814421644');" style="">  39         mLauncher = launcher;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  40     }                                                                                                    </span>
<span  style="">  41                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  42     @Override                                                                                            </span>
<span class="-4065032842914424982" onmouseenter="enter('-4065032842914424982');" onmouseout="out('-4065032842914424982');" style="">  43     protected AppWidgetHostView onCreateView(Context context, int appWidgetId,                           </span>
<span class="7540978812572243669" onmouseenter="enter('7540978812572243669');" onmouseout="out('7540978812572243669');" style="">  44             AppWidgetProviderInfo appWidget) {                                                           </span>
<span class="-1565306010018075342" onmouseenter="enter('-1565306010018075342');" onmouseout="out('-1565306010018075342');" style="">  45         return new LauncherAppWidgetHostView(context);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  46     }                                                                                                    </span>
<span  style="">  47                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  48     @Override                                                                                            </span>
<span class="1003231409568374748" onmouseenter="enter('1003231409568374748');" onmouseout="out('1003231409568374748');" style="">  49     public void startListening() {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  50         try {                                                                                            </span>
<span class="2112121225013781615" onmouseenter="enter('2112121225013781615');" onmouseout="out('2112121225013781615');" style="">  51             super.startListening();                                                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">  52         } catch (Exception e) {                                                                          </span>
<span class="-8489628015829867106" onmouseenter="enter('-8489628015829867106');" onmouseout="out('-8489628015829867106');" style="">  53             if (e.getCause() instanceof TransactionTooLargeException) {                                  </span>
<span class="-6274022530743329717" onmouseenter="enter('-6274022530743329717');" onmouseout="out('-6274022530743329717');" style="">  54                 // We&#x27;re willing to let this slide. The exception is being caused by the list of         </span>
<span class="-1093726023100183918" onmouseenter="enter('-1093726023100183918');" onmouseout="out('-1093726023100183918');" style="">  55                 // RemoteViews which is being passed back. The startListening relationship will          </span>
<span class="4569729839198546944" onmouseenter="enter('4569729839198546944');" onmouseout="out('4569729839198546944');" style="">  56                 // have been established by this point, and we will end up populating the                </span>
<span class="7285809756812679141" onmouseenter="enter('7285809756812679141');" onmouseout="out('7285809756812679141');" style="">  57                 // widgets upon bind anyway. See issue 14255011 for more context.                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  58             } else {                                                                                     </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">  59                 throw new RuntimeException(e);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  60             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  61         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62     }                                                                                                    </span>
<span  style="">  63                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  64     @Override                                                                                            </span>
<span class="-11300768212058069" onmouseenter="enter('-11300768212058069');" onmouseout="out('-11300768212058069');" style="">  65     public void stopListening() {                                                                        </span>
<span class="8233666029387384192" onmouseenter="enter('8233666029387384192');" onmouseout="out('8233666029387384192');" style="">  66         super.stopListening();                                                                           </span>
<span class="6726186665403103927" onmouseenter="enter('6726186665403103927');" onmouseout="out('6726186665403103927');" style="">  67         clearViews();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  68     }                                                                                                    </span>
<span  style="">  69                                                                                                          </span>
<span class="5345359630716031492" onmouseenter="enter('5345359630716031492');" onmouseout="out('5345359630716031492');" style="">  70     public void addProviderChangeListener(Runnable callback) {                                           </span>
<span class="8930602826919612577" onmouseenter="enter('8930602826919612577');" onmouseout="out('8930602826919612577');" style="">  71         mProviderChangeListeners.add(callback);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  72     }                                                                                                    </span>
<span  style="">  73                                                                                                          </span>
<span class="-634081077670693469" onmouseenter="enter('-634081077670693469');" onmouseout="out('-634081077670693469');" style="">  74     public void removeProviderChangeListener(Runnable callback) {                                        </span>
<span class="-4650626910524333538" onmouseenter="enter('-4650626910524333538');" onmouseout="out('-4650626910524333538');" style="">  75         mProviderChangeListeners.remove(callback);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76     }                                                                                                    </span>
<span  style="">  77                                                                                                          </span>
<span class="-4794542314147662229" onmouseenter="enter('-4794542314147662229');" onmouseout="out('-4794542314147662229');" style="">  78     protected void onProvidersChanged() {                                                                </span>
<span class="1007042212039586347" onmouseenter="enter('1007042212039586347');" onmouseout="out('1007042212039586347');" style="">  79         // Once we get the message that widget packages are updated, we need to rebind items             </span>
<span class="2476923213548612822" onmouseenter="enter('2476923213548612822');" onmouseout="out('2476923213548612822');" style="">  80         // in AppsCustomize accordingly.                                                                 </span>
<span class="4150942567603581329" onmouseenter="enter('4150942567603581329');" onmouseout="out('4150942567603581329');" style="">  81         mLauncher.getModel().loadAndBindWidgetsAndShortcuts(mLauncher, mLauncher);                       </span>
<span class="6100461671288922035" onmouseenter="enter('6100461671288922035');" onmouseout="out('6100461671288922035');" style="">  82         if (!mProviderChangeListeners.isEmpty()) {                                                       </span>
<span class="-9210209063533946103" onmouseenter="enter('-9210209063533946103');" onmouseout="out('-9210209063533946103');" style="">  83             for (Runnable callback : new ArrayList&lt;&gt;(mProviderChangeListeners)) {                        </span>
<span class="8286986459013221147" onmouseenter="enter('8286986459013221147');" onmouseout="out('8286986459013221147');" style="">  84                 callback.run();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87     }                                                                                                    </span>
<span  style="">  88                                                                                                          </span>
<span class="-2647142615511777880" onmouseenter="enter('-2647142615511777880');" onmouseout="out('-2647142615511777880');" style="">  89     public AppWidgetHostView createView(Context context, int appWidgetId,                                </span>
<span class="5548212965052374172" onmouseenter="enter('5548212965052374172');" onmouseout="out('5548212965052374172');" style="">  90             LauncherAppWidgetProviderInfo appWidget) {                                                   </span>
<span class="7345638167174726636" onmouseenter="enter('7345638167174726636');" onmouseout="out('7345638167174726636');" style="">  91         if (appWidget.isCustomWidget) {                                                                  </span>
<span class="-5841757436065436863" onmouseenter="enter('-5841757436065436863');" onmouseout="out('-5841757436065436863');" style="">  92             LauncherAppWidgetHostView lahv = new LauncherAppWidgetHostView(context);                     </span>
<span class="-9041050344388994571" onmouseenter="enter('-9041050344388994571');" onmouseout="out('-9041050344388994571');" style="">  93             LayoutInflater inflater = (LayoutInflater)                                                   </span>
<span class="-4098440014614609785" onmouseenter="enter('-4098440014614609785');" onmouseout="out('-4098440014614609785');" style="">  94                     context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);                           </span>
<span class="-7040908358148037802" onmouseenter="enter('-7040908358148037802');" onmouseout="out('-7040908358148037802');" style="">  95             inflater.inflate(appWidget.initialLayout, lahv);                                             </span>
<span class="-3606823766616163624" onmouseenter="enter('-3606823766616163624');" onmouseout="out('-3606823766616163624');" style="">  96             lahv.setAppWidget(0, appWidget);                                                             </span>
<span class="2130522704205004214" onmouseenter="enter('2130522704205004214');" onmouseout="out('2130522704205004214');" style="">  97             lahv.updateLastInflationOrientation();                                                       </span>
<span class="-5405456384816996431" onmouseenter="enter('-5405456384816996431');" onmouseout="out('-5405456384816996431');" style="">  98             return lahv;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  99         } else {                                                                                         </span>
<span class="5726689088153707814" onmouseenter="enter('5726689088153707814');" onmouseout="out('5726689088153707814');" style=""> 100             return super.createView(context, appWidgetId, appWidget);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 101         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 102     }                                                                                                    </span>
<span  style=""> 103                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 104     /**                                                                                                  </span>
<span class="1370523622879915223" onmouseenter="enter('1370523622879915223');" onmouseout="out('1370523622879915223');" style=""> 105      * Called when the AppWidget provider for a AppWidget has been upgraded to a new apk.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 106      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 107     @Override                                                                                            </span>
<span class="7819115799145472039" onmouseenter="enter('7819115799145472039');" onmouseout="out('7819115799145472039');" style=""> 108     protected void onProviderChanged(int appWidgetId, AppWidgetProviderInfo appWidget) {                 </span>
<span class="4180849937732055332" onmouseenter="enter('4180849937732055332');" onmouseout="out('4180849937732055332');" style=""> 109         LauncherAppWidgetProviderInfo info = LauncherAppWidgetProviderInfo.fromProviderInfo(             </span>
<span class="4794270408633035007" onmouseenter="enter('4794270408633035007');" onmouseout="out('4794270408633035007');" style=""> 110                 mLauncher, appWidget);                                                                   </span>
<span class="401411839946285880" onmouseenter="enter('401411839946285880');" onmouseout="out('401411839946285880');" style=""> 111         super.onProviderChanged(appWidgetId, info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113 }                                                                                                        </span>

















</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7315961432178920529" onmouseenter="enter('7315961432178920529');" onmouseout="out('7315961432178920529');" style="">   2   * Copyright (C) 2009 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17  package com.android.launcher3;                                                                                    </span>
<span  style="">  18                                                                                                                    </span>
<span class="504928717176532115" onmouseenter="enter('504928717176532115');" onmouseout="out('504928717176532115');" style="">  19  import android.appwidget.AppWidgetHost;                                                                           </span>
<span class="3579758368375369133" onmouseenter="enter('3579758368375369133');" onmouseout="out('3579758368375369133');" style="">  20  import android.appwidget.AppWidgetHostView;                                                                       </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21  import android.appwidget.AppWidgetProviderInfo;                                                                   </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  22  import android.content.Context;                                                                                   </span>
<span class="-7843999199481383489" onmouseenter="enter('-7843999199481383489');" onmouseout="out('-7843999199481383489');" style="">  23  import android.os.TransactionTooLargeException;                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24  import android.view.LayoutInflater;                                                                               </span>
<span  style="">  25                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  26  import java.util.ArrayList;                                                                                       </span>
<span  style="">  27                                                                                                                    </span>
<span  style="">  28                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  29  /**                                                                                                               </span>
<span class="-6416338870112299444" onmouseenter="enter('-6416338870112299444');" onmouseout="out('-6416338870112299444');" style="">  30   * Specific {@link AppWidgetHost} that creates our {@link LauncherAppWidgetHostView}                              </span>
<span class="9032716678594186410" onmouseenter="enter('9032716678594186410');" onmouseout="out('9032716678594186410');" style="">  31   * which correctly captures all long-press events. This ensures that users can                                    </span>
<span class="-3542564283938605982" onmouseenter="enter('-3542564283938605982');" onmouseout="out('-3542564283938605982');" style="">  32   * always pick up and move widgets.                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  33   */                                                                                                               </span>
<span class="6401519679823635910" onmouseenter="enter('6401519679823635910');" onmouseout="out('6401519679823635910');" style="">  34  public class LauncherAppWidgetHost extends AppWidgetHost {                                                        </span>
<span  style="">  35                                                                                                                    </span>
<span class="-271136877627924668" onmouseenter="enter('-271136877627924668');" onmouseout="out('-271136877627924668');" style="">  36      private final ArrayList&lt;Runnable&gt; mProviderChangeListeners = new ArrayList&lt;Runnable&gt;();                       </span>
<span  style="">  37                                                                                                                    </span>
<span class="-831155609933568730" onmouseenter="enter('-831155609933568730');" onmouseout="out('-831155609933568730');" style="">  38      Launcher mLauncher;                                                                                           </span>
<span  style="">  39                                                                                                                    </span>
<span class="-3763838228317560570" onmouseenter="enter('-3763838228317560570');" onmouseout="out('-3763838228317560570');" style="">  40      public LauncherAppWidgetHost(Launcher launcher, int hostId) {                                                 </span>
<span class="-2696406565996516772" onmouseenter="enter('-2696406565996516772');" onmouseout="out('-2696406565996516772');" style="">  41          super(launcher, hostId);                                                                                  </span>
<span class="2298492052814421644" onmouseenter="enter('2298492052814421644');" onmouseout="out('2298492052814421644');" style="">  42          mLauncher = launcher;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  43      }                                                                                                             </span>
<span  style="">  44                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  45      @Override                                                                                                     </span>
<span class="-4065032842914424982" onmouseenter="enter('-4065032842914424982');" onmouseout="out('-4065032842914424982');" style="">  46      protected AppWidgetHostView onCreateView(Context context, int appWidgetId,                                    </span>
<span class="7540978812572243669" onmouseenter="enter('7540978812572243669');" onmouseout="out('7540978812572243669');" style="">  47              AppWidgetProviderInfo appWidget) {                                                                    </span>
<span class="-1565306010018075342" onmouseenter="enter('-1565306010018075342');" onmouseout="out('-1565306010018075342');" style="">  48          return new LauncherAppWidgetHostView(context);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  49      }                                                                                                             </span>
<span  style="">  50                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  51      @Override                                                                                                     </span>
<span class="1003231409568374748" onmouseenter="enter('1003231409568374748');" onmouseout="out('1003231409568374748');" style="">  52      public void startListening() {                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  53          try {                                                                                                     </span>
<span class="2112121225013781615" onmouseenter="enter('2112121225013781615');" onmouseout="out('2112121225013781615');" style="">  54              super.startListening();                                                                               </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">  55          } catch (Exception e) {                                                                                   </span>
<span class="-8489628015829867106" onmouseenter="enter('-8489628015829867106');" onmouseout="out('-8489628015829867106');" style="">  56              if (e.getCause() instanceof TransactionTooLargeException) {                                           </span>
<span class="-6274022530743329717" onmouseenter="enter('-6274022530743329717');" onmouseout="out('-6274022530743329717');" style="">  57                  // We&#x27;re willing to let this slide. The exception is being caused by the list of                  </span>
<span class="-1093726023100183918" onmouseenter="enter('-1093726023100183918');" onmouseout="out('-1093726023100183918');" style="">  58                  // RemoteViews which is being passed back. The startListening relationship will                   </span>
<span class="4569729839198546944" onmouseenter="enter('4569729839198546944');" onmouseout="out('4569729839198546944');" style="">  59                  // have been established by this point, and we will end up populating the                         </span>
<span class="7285809756812679141" onmouseenter="enter('7285809756812679141');" onmouseout="out('7285809756812679141');" style="">  60                  // widgets upon bind anyway. See issue 14255011 for more context.                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  61              } else {                                                                                              </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">  62                  throw new RuntimeException(e);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  63              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  64          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  65      }                                                                                                             </span>
<span  style="">  66                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  67      @Override                                                                                                     </span>
<span class="-11300768212058069" onmouseenter="enter('-11300768212058069');" onmouseout="out('-11300768212058069');" style="">  68      public void stopListening() {                                                                                 </span>
<span class="8233666029387384192" onmouseenter="enter('8233666029387384192');" onmouseout="out('8233666029387384192');" style="">  69          super.stopListening();                                                                                    </span>
<span class="6726186665403103927" onmouseenter="enter('6726186665403103927');" onmouseout="out('6726186665403103927');" style="">  70          clearViews();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  71      }                                                                                                             </span>
<span  style="">  72                                                                                                                    </span>
<span class="5345359630716031492" onmouseenter="enter('5345359630716031492');" onmouseout="out('5345359630716031492');" style="">  73      public void addProviderChangeListener(Runnable callback) {                                                    </span>
<span class="8930602826919612577" onmouseenter="enter('8930602826919612577');" onmouseout="out('8930602826919612577');" style="">  74          mProviderChangeListeners.add(callback);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75      }                                                                                                             </span>
<span  style="">  76                                                                                                                    </span>
<span class="-634081077670693469" onmouseenter="enter('-634081077670693469');" onmouseout="out('-634081077670693469');" style="">  77      public void removeProviderChangeListener(Runnable callback) {                                                 </span>
<span class="-4650626910524333538" onmouseenter="enter('-4650626910524333538');" onmouseout="out('-4650626910524333538');" style="">  78          mProviderChangeListeners.remove(callback);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79      }                                                                                                             </span>
<span  style="">  80                                                                                                                    </span>
<span class="-4794542314147662229" onmouseenter="enter('-4794542314147662229');" onmouseout="out('-4794542314147662229');" style="">  81      protected void onProvidersChanged() {                                                                         </span>
<span class="1007042212039586347" onmouseenter="enter('1007042212039586347');" onmouseout="out('1007042212039586347');" style="">  82          // Once we get the message that widget packages are updated, we need to rebind items                      </span>
<span class="2476923213548612822" onmouseenter="enter('2476923213548612822');" onmouseout="out('2476923213548612822');" style="">  83          // in AppsCustomize accordingly.                                                                          </span>
<span class="-1771284736667896970" onmouseenter="enter('-1771284736667896970');" onmouseout="out('-1771284736667896970');" style="">  84          mLauncher.bindPackagesUpdated(LauncherModel.getSortedWidgetsAndShortcuts(mLauncher,                       </span>
<span class="-5514854621328752591" onmouseenter="enter('-5514854621328752591');" onmouseout="out('-5514854621328752591');" style="">  85                  true /* refresh */));                                                                             </span>
<span  style="">  86                                                                                                                    </span>

<span class="170115593382414736" onmouseenter="enter('170115593382414736');" onmouseout="out('170115593382414736');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  87 -        for (Runnable callback : mProviderChangeListeners) {                                                      </span>
<span class="8286986459013221147" onmouseenter="enter('8286986459013221147');" onmouseout="out('8286986459013221147');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  88 -            callback.run();                                                                                       </span>
<span class="6100461671288922035" onmouseenter="enter('6100461671288922035');" onmouseout="out('6100461671288922035');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  89 +        if (!mProviderChangeListeners.isEmpty()) {                                                                </span>
<span class="-9210209063533946103" onmouseenter="enter('-9210209063533946103');" onmouseout="out('-9210209063533946103');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  90 +            for (Runnable callback : new ArrayList&lt;&gt;(mProviderChangeListeners)) {                                 </span>
<span class="8286986459013221147" onmouseenter="enter('8286986459013221147');" onmouseout="out('8286986459013221147');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  91 +                callback.run();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  92 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  94      }                                                                                                             </span>
<span  style="">  95                                                                                                                    </span>
<span class="-2647142615511777880" onmouseenter="enter('-2647142615511777880');" onmouseout="out('-2647142615511777880');" style="">  96      public AppWidgetHostView createView(Context context, int appWidgetId,                                         </span>
<span class="5548212965052374172" onmouseenter="enter('5548212965052374172');" onmouseout="out('5548212965052374172');" style="">  97              LauncherAppWidgetProviderInfo appWidget) {                                                            </span>
<span class="7345638167174726636" onmouseenter="enter('7345638167174726636');" onmouseout="out('7345638167174726636');" style="">  98          if (appWidget.isCustomWidget) {                                                                           </span>
<span class="-5841757436065436863" onmouseenter="enter('-5841757436065436863');" onmouseout="out('-5841757436065436863');" style="">  99              LauncherAppWidgetHostView lahv = new LauncherAppWidgetHostView(context);                              </span>
<span class="-9041050344388994571" onmouseenter="enter('-9041050344388994571');" onmouseout="out('-9041050344388994571');" style=""> 100              LayoutInflater inflater = (LayoutInflater)                                                            </span>
<span class="-4098440014614609785" onmouseenter="enter('-4098440014614609785');" onmouseout="out('-4098440014614609785');" style=""> 101                      context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);                                    </span>
<span class="-7040908358148037802" onmouseenter="enter('-7040908358148037802');" onmouseout="out('-7040908358148037802');" style=""> 102              inflater.inflate(appWidget.initialLayout, lahv);                                                      </span>
<span class="-3606823766616163624" onmouseenter="enter('-3606823766616163624');" onmouseout="out('-3606823766616163624');" style=""> 103              lahv.setAppWidget(0, appWidget);                                                                      </span>
<span class="2130522704205004214" onmouseenter="enter('2130522704205004214');" onmouseout="out('2130522704205004214');" style=""> 104              lahv.updateLastInflationOrientation();                                                                </span>
<span class="-5405456384816996431" onmouseenter="enter('-5405456384816996431');" onmouseout="out('-5405456384816996431');" style=""> 105              return lahv;                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 106          } else {                                                                                                  </span>
<span class="5726689088153707814" onmouseenter="enter('5726689088153707814');" onmouseout="out('5726689088153707814');" style=""> 107              return super.createView(context, appWidgetId, appWidget);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109      }                                                                                                             </span>
<span  style=""> 110                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 111      /**                                                                                                           </span>
<span class="1370523622879915223" onmouseenter="enter('1370523622879915223');" onmouseout="out('1370523622879915223');" style=""> 112       * Called when the AppWidget provider for a AppWidget has been upgraded to a new apk.                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 113       */                                                                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 114      @Override                                                                                                     </span>
<span class="7819115799145472039" onmouseenter="enter('7819115799145472039');" onmouseout="out('7819115799145472039');" style=""> 115      protected void onProviderChanged(int appWidgetId, AppWidgetProviderInfo appWidget) {                          </span>
<span class="4180849937732055332" onmouseenter="enter('4180849937732055332');" onmouseout="out('4180849937732055332');" style=""> 116          LauncherAppWidgetProviderInfo info = LauncherAppWidgetProviderInfo.fromProviderInfo(                      </span>
<span class="4794270408633035007" onmouseenter="enter('4794270408633035007');" onmouseout="out('4794270408633035007');" style=""> 117                  mLauncher, appWidget);                                                                            </span>
<span class="401411839946285880" onmouseenter="enter('401411839946285880');" onmouseout="out('401411839946285880');" style=""> 118          super.onProviderChanged(appWidgetId, info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7315961432178920529" onmouseenter="enter('7315961432178920529');" onmouseout="out('7315961432178920529');" style="">   2   * Copyright (C) 2009 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17  package com.android.launcher3;                                                                                    </span>
<span  style="">  18                                                                                                                    </span>
<span class="504928717176532115" onmouseenter="enter('504928717176532115');" onmouseout="out('504928717176532115');" style="">  19  import android.appwidget.AppWidgetHost;                                                                           </span>
<span class="3579758368375369133" onmouseenter="enter('3579758368375369133');" onmouseout="out('3579758368375369133');" style="">  20  import android.appwidget.AppWidgetHostView;                                                                       </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21  import android.appwidget.AppWidgetProviderInfo;                                                                   </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  22  import android.content.Context;                                                                                   </span>
<span class="-7843999199481383489" onmouseenter="enter('-7843999199481383489');" onmouseout="out('-7843999199481383489');" style="">  23  import android.os.TransactionTooLargeException;                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24  import android.view.LayoutInflater;                                                                               </span>
<span  style="">  25                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  26  import java.util.ArrayList;                                                                                       </span>
<span  style="">  27                                                                                                                    </span>
<span  style="">  28                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  29  /**                                                                                                               </span>
<span class="-6416338870112299444" onmouseenter="enter('-6416338870112299444');" onmouseout="out('-6416338870112299444');" style="">  30   * Specific {@link AppWidgetHost} that creates our {@link LauncherAppWidgetHostView}                              </span>
<span class="9032716678594186410" onmouseenter="enter('9032716678594186410');" onmouseout="out('9032716678594186410');" style="">  31   * which correctly captures all long-press events. This ensures that users can                                    </span>
<span class="-3542564283938605982" onmouseenter="enter('-3542564283938605982');" onmouseout="out('-3542564283938605982');" style="">  32   * always pick up and move widgets.                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  33   */                                                                                                               </span>
<span class="6401519679823635910" onmouseenter="enter('6401519679823635910');" onmouseout="out('6401519679823635910');" style="">  34  public class LauncherAppWidgetHost extends AppWidgetHost {                                                        </span>
<span  style="">  35                                                                                                                    </span>
<span class="-271136877627924668" onmouseenter="enter('-271136877627924668');" onmouseout="out('-271136877627924668');" style="">  36      private final ArrayList&lt;Runnable&gt; mProviderChangeListeners = new ArrayList&lt;Runnable&gt;();                       </span>
<span  style="">  37                                                                                                                    </span>
<span class="-831155609933568730" onmouseenter="enter('-831155609933568730');" onmouseout="out('-831155609933568730');" style="">  38      Launcher mLauncher;                                                                                           </span>
<span  style="">  39                                                                                                                    </span>
<span class="-3763838228317560570" onmouseenter="enter('-3763838228317560570');" onmouseout="out('-3763838228317560570');" style="">  40      public LauncherAppWidgetHost(Launcher launcher, int hostId) {                                                 </span>
<span class="-2696406565996516772" onmouseenter="enter('-2696406565996516772');" onmouseout="out('-2696406565996516772');" style="">  41          super(launcher, hostId);                                                                                  </span>
<span class="2298492052814421644" onmouseenter="enter('2298492052814421644');" onmouseout="out('2298492052814421644');" style="">  42          mLauncher = launcher;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  43      }                                                                                                             </span>
<span  style="">  44                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  45      @Override                                                                                                     </span>
<span class="-4065032842914424982" onmouseenter="enter('-4065032842914424982');" onmouseout="out('-4065032842914424982');" style="">  46      protected AppWidgetHostView onCreateView(Context context, int appWidgetId,                                    </span>
<span class="7540978812572243669" onmouseenter="enter('7540978812572243669');" onmouseout="out('7540978812572243669');" style="">  47              AppWidgetProviderInfo appWidget) {                                                                    </span>
<span class="-1565306010018075342" onmouseenter="enter('-1565306010018075342');" onmouseout="out('-1565306010018075342');" style="">  48          return new LauncherAppWidgetHostView(context);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  49      }                                                                                                             </span>
<span  style="">  50                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  51      @Override                                                                                                     </span>
<span class="1003231409568374748" onmouseenter="enter('1003231409568374748');" onmouseout="out('1003231409568374748');" style="">  52      public void startListening() {                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  53          try {                                                                                                     </span>
<span class="2112121225013781615" onmouseenter="enter('2112121225013781615');" onmouseout="out('2112121225013781615');" style="">  54              super.startListening();                                                                               </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">  55          } catch (Exception e) {                                                                                   </span>
<span class="-8489628015829867106" onmouseenter="enter('-8489628015829867106');" onmouseout="out('-8489628015829867106');" style="">  56              if (e.getCause() instanceof TransactionTooLargeException) {                                           </span>
<span class="-6274022530743329717" onmouseenter="enter('-6274022530743329717');" onmouseout="out('-6274022530743329717');" style="">  57                  // We&#x27;re willing to let this slide. The exception is being caused by the list of                  </span>
<span class="-1093726023100183918" onmouseenter="enter('-1093726023100183918');" onmouseout="out('-1093726023100183918');" style="">  58                  // RemoteViews which is being passed back. The startListening relationship will                   </span>
<span class="4569729839198546944" onmouseenter="enter('4569729839198546944');" onmouseout="out('4569729839198546944');" style="">  59                  // have been established by this point, and we will end up populating the                         </span>
<span class="7285809756812679141" onmouseenter="enter('7285809756812679141');" onmouseout="out('7285809756812679141');" style="">  60                  // widgets upon bind anyway. See issue 14255011 for more context.                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  61              } else {                                                                                              </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">  62                  throw new RuntimeException(e);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  63              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  64          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  65      }                                                                                                             </span>
<span  style="">  66                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  67      @Override                                                                                                     </span>
<span class="-11300768212058069" onmouseenter="enter('-11300768212058069');" onmouseout="out('-11300768212058069');" style="">  68      public void stopListening() {                                                                                 </span>
<span class="8233666029387384192" onmouseenter="enter('8233666029387384192');" onmouseout="out('8233666029387384192');" style="">  69          super.stopListening();                                                                                    </span>
<span class="6726186665403103927" onmouseenter="enter('6726186665403103927');" onmouseout="out('6726186665403103927');" style="">  70          clearViews();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  71      }                                                                                                             </span>
<span  style="">  72                                                                                                                    </span>
<span class="5345359630716031492" onmouseenter="enter('5345359630716031492');" onmouseout="out('5345359630716031492');" style="">  73      public void addProviderChangeListener(Runnable callback) {                                                    </span>
<span class="8930602826919612577" onmouseenter="enter('8930602826919612577');" onmouseout="out('8930602826919612577');" style="">  74          mProviderChangeListeners.add(callback);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75      }                                                                                                             </span>
<span  style="">  76                                                                                                                    </span>
<span class="-634081077670693469" onmouseenter="enter('-634081077670693469');" onmouseout="out('-634081077670693469');" style="">  77      public void removeProviderChangeListener(Runnable callback) {                                                 </span>
<span class="-4650626910524333538" onmouseenter="enter('-4650626910524333538');" onmouseout="out('-4650626910524333538');" style="">  78          mProviderChangeListeners.remove(callback);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79      }                                                                                                             </span>
<span  style="">  80                                                                                                                    </span>
<span class="-4794542314147662229" onmouseenter="enter('-4794542314147662229');" onmouseout="out('-4794542314147662229');" style="">  81      protected void onProvidersChanged() {                                                                         </span>
<span class="1007042212039586347" onmouseenter="enter('1007042212039586347');" onmouseout="out('1007042212039586347');" style="">  82          // Once we get the message that widget packages are updated, we need to rebind items                      </span>
<span class="2476923213548612822" onmouseenter="enter('2476923213548612822');" onmouseout="out('2476923213548612822');" style="">  83          // in AppsCustomize accordingly.                                                                          </span>
<span class="-1771284736667896970" onmouseenter="enter('-1771284736667896970');" onmouseout="out('-1771284736667896970');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  84 -        mLauncher.bindPackagesUpdated(LauncherModel.getSortedWidgetsAndShortcuts(mLauncher,                       </span>
<span class="-5514854621328752591" onmouseenter="enter('-5514854621328752591');" onmouseout="out('-5514854621328752591');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  85 -                true /* refresh */));                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  86 -                                                                                                                  </span>
<span class="4150942567603581329" onmouseenter="enter('4150942567603581329');" onmouseout="out('4150942567603581329');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  87 +        mLauncher.getModel().loadAndBindWidgetsAndShortcuts(mLauncher, mLauncher);                                </span>
<span class="170115593382414736" onmouseenter="enter('170115593382414736');" onmouseout="out('170115593382414736');" style="">  88          for (Runnable callback : mProviderChangeListeners) {                                                      </span>
<span class="8286986459013221147" onmouseenter="enter('8286986459013221147');" onmouseout="out('8286986459013221147');" style="">  89              callback.run();                                                                                       </span>




<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91      }                                                                                                             </span>
<span  style="">  92                                                                                                                    </span>
<span class="-2647142615511777880" onmouseenter="enter('-2647142615511777880');" onmouseout="out('-2647142615511777880');" style="">  93      public AppWidgetHostView createView(Context context, int appWidgetId,                                         </span>
<span class="5548212965052374172" onmouseenter="enter('5548212965052374172');" onmouseout="out('5548212965052374172');" style="">  94              LauncherAppWidgetProviderInfo appWidget) {                                                            </span>
<span class="7345638167174726636" onmouseenter="enter('7345638167174726636');" onmouseout="out('7345638167174726636');" style="">  95          if (appWidget.isCustomWidget) {                                                                           </span>
<span class="-5841757436065436863" onmouseenter="enter('-5841757436065436863');" onmouseout="out('-5841757436065436863');" style="">  96              LauncherAppWidgetHostView lahv = new LauncherAppWidgetHostView(context);                              </span>
<span class="-9041050344388994571" onmouseenter="enter('-9041050344388994571');" onmouseout="out('-9041050344388994571');" style="">  97              LayoutInflater inflater = (LayoutInflater)                                                            </span>
<span class="-4098440014614609785" onmouseenter="enter('-4098440014614609785');" onmouseout="out('-4098440014614609785');" style="">  98                      context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);                                    </span>
<span class="-7040908358148037802" onmouseenter="enter('-7040908358148037802');" onmouseout="out('-7040908358148037802');" style="">  99              inflater.inflate(appWidget.initialLayout, lahv);                                                      </span>
<span class="-3606823766616163624" onmouseenter="enter('-3606823766616163624');" onmouseout="out('-3606823766616163624');" style=""> 100              lahv.setAppWidget(0, appWidget);                                                                      </span>
<span class="2130522704205004214" onmouseenter="enter('2130522704205004214');" onmouseout="out('2130522704205004214');" style=""> 101              lahv.updateLastInflationOrientation();                                                                </span>
<span class="-5405456384816996431" onmouseenter="enter('-5405456384816996431');" onmouseout="out('-5405456384816996431');" style=""> 102              return lahv;                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 103          } else {                                                                                                  </span>
<span class="5726689088153707814" onmouseenter="enter('5726689088153707814');" onmouseout="out('5726689088153707814');" style=""> 104              return super.createView(context, appWidgetId, appWidget);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106      }                                                                                                             </span>
<span  style=""> 107                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 108      /**                                                                                                           </span>
<span class="1370523622879915223" onmouseenter="enter('1370523622879915223');" onmouseout="out('1370523622879915223');" style=""> 109       * Called when the AppWidget provider for a AppWidget has been upgraded to a new apk.                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 110       */                                                                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 111      @Override                                                                                                     </span>
<span class="7819115799145472039" onmouseenter="enter('7819115799145472039');" onmouseout="out('7819115799145472039');" style=""> 112      protected void onProviderChanged(int appWidgetId, AppWidgetProviderInfo appWidget) {                          </span>
<span class="4180849937732055332" onmouseenter="enter('4180849937732055332');" onmouseout="out('4180849937732055332');" style=""> 113          LauncherAppWidgetProviderInfo info = LauncherAppWidgetProviderInfo.fromProviderInfo(                      </span>
<span class="4794270408633035007" onmouseenter="enter('4794270408633035007');" onmouseout="out('4794270408633035007');" style=""> 114                  mLauncher, appWidget);                                                                            </span>
<span class="401411839946285880" onmouseenter="enter('401411839946285880');" onmouseout="out('401411839946285880');" style=""> 115          super.onProviderChanged(appWidgetId, info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 116      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            