<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>503</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    503
                    <a href="502.html">prev</a>
                    <a href="504.html">next</a>
                    <a href="503_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    CyanogenMod/android_packages_apps_Trebuchet_7118d9dd17f51d998440f257935d6670c927383f_src/com/android/launcher3/LauncherModel.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;7118d9dd17f51d998440f257935d6670c927383f:src/com/android/launcher3/LauncherModel.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;7118d9dd17f51d998440f257935d6670c927383f^1:src/com/android/launcher3/LauncherModel.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;7118d9dd17f51d998440f257935d6670c927383f^2:src/com/android/launcher3/LauncherModel.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;58dcef7b28ec0bbc8e097b2cd45a6c6542a4cdef:src/com/android/launcher3/LauncherModel.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [b], [b], [b]], subset: [[b], [b], [b], [b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  19 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  20 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-489389385851058391" onmouseenter="enter('-489389385851058391');" onmouseout="out('-489389385851058391');" style="">  22 import android.content.BroadcastReceiver;                                                                </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  23 import android.content.ComponentName;                                                                    </span>
<span class="5843991090186771909" onmouseenter="enter('5843991090186771909');" onmouseout="out('5843991090186771909');" style="">  24 import android.content.ContentProviderClient;                                                            </span>
<span class="3739800667450215943" onmouseenter="enter('3739800667450215943');" onmouseout="out('3739800667450215943');" style="">  25 import android.content.ContentProviderOperation;                                                         </span>
<span class="6126857652515451632" onmouseenter="enter('6126857652515451632');" onmouseout="out('6126857652515451632');" style="">  26 import android.content.ContentResolver;                                                                  </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="">  27 import android.content.ContentValues;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  28 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  29 import android.content.Intent;                                                                           </span>
<span class="-8524679231303418936" onmouseenter="enter('-8524679231303418936');" onmouseout="out('-8524679231303418936');" style="">  30 import android.content.Intent.ShortcutIconResource;                                                      </span>
<span class="8697221465021235869" onmouseenter="enter('8697221465021235869');" onmouseout="out('8697221465021235869');" style="">  31 import android.content.IntentFilter;                                                                     </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  32 import android.content.SharedPreferences;                                                                </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  33 import android.content.pm.PackageManager;                                                                </span>
<span class="-7427681121873781918" onmouseenter="enter('-7427681121873781918');" onmouseout="out('-7427681121873781918');" style="">  34 import android.content.pm.ProviderInfo;                                                                  </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  35 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  36 import android.content.res.Configuration;                                                                </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  37 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  38 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  39 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  40 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  41 import android.net.Uri;                                                                                  </span>
<span class="-5861542142927414420" onmouseenter="enter('-5861542142927414420');" onmouseout="out('-5861542142927414420');" style="">  42 import android.os.Environment;                                                                           </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  43 import android.os.Handler;                                                                               </span>
<span class="5075624728668821268" onmouseenter="enter('5075624728668821268');" onmouseout="out('5075624728668821268');" style="">  44 import android.os.HandlerThread;                                                                         </span>
<span class="-3467845820974384276" onmouseenter="enter('-3467845820974384276');" onmouseout="out('-3467845820974384276');" style="">  45 import android.os.Parcelable;                                                                            </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  46 import android.os.Process;                                                                               </span>
<span class="2671599330745315048" onmouseenter="enter('2671599330745315048');" onmouseout="out('2671599330745315048');" style="">  47 import android.os.RemoteException;                                                                       </span>
<span class="2720528326800018495" onmouseenter="enter('2720528326800018495');" onmouseout="out('2720528326800018495');" style="">  48 import android.os.SystemClock;                                                                           </span>
<span class="9209739606564279934" onmouseenter="enter('9209739606564279934');" onmouseout="out('9209739606564279934');" style="">  49 import android.provider.BaseColumns;                                                                     </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  50 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  51 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  52 import android.util.Pair;                                                                                </span>
<span  style="">  53                                                                                                          </span>
<span class="-2301578055393860706" onmouseenter="enter('-2301578055393860706');" onmouseout="out('-2301578055393860706');" style="">  54 import com.android.launcher3.compat.AppWidgetManagerCompat;                                              </span>
<span class="-394760018964595537" onmouseenter="enter('-394760018964595537');" onmouseout="out('-394760018964595537');" style="">  55 import com.android.launcher3.compat.LauncherActivityInfoCompat;                                          </span>
<span class="7348855441893227306" onmouseenter="enter('7348855441893227306');" onmouseout="out('7348855441893227306');" style="">  56 import com.android.launcher3.compat.LauncherAppsCompat;                                                  </span>
<span class="-6378403157506113444" onmouseenter="enter('-6378403157506113444');" onmouseout="out('-6378403157506113444');" style="">  57 import com.android.launcher3.compat.PackageInstallerCompat;                                              </span>
<span class="-9185808437279523438" onmouseenter="enter('-9185808437279523438');" onmouseout="out('-9185808437279523438');" style="">  58 import com.android.launcher3.compat.PackageInstallerCompat.PackageInstallInfo;                           </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="">  59 import com.android.launcher3.compat.UserHandleCompat;                                                    </span>
<span class="-8849211230761127863" onmouseenter="enter('-8849211230761127863');" onmouseout="out('-8849211230761127863');" style="">  60 import com.android.launcher3.compat.UserManagerCompat;                                                   </span>
<span  style="">  61                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  62 import java.lang.ref.WeakReference;                                                                      </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  63 import java.net.URISyntaxException;                                                                      </span>
<span class="4163694070296964880" onmouseenter="enter('4163694070296964880');" onmouseout="out('4163694070296964880');" style="">  64 import java.security.InvalidParameterException;                                                          </span>
<span class="-2082349054173013619" onmouseenter="enter('-2082349054173013619');" onmouseout="out('-2082349054173013619');" style="">  65 import java.text.Collator;                                                                               </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  66 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  67 import java.util.Arrays;                                                                                 </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  68 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  69 import java.util.Collections;                                                                            </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  70 import java.util.Comparator;                                                                             </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  71 import java.util.HashMap;                                                                                </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  72 import java.util.HashSet;                                                                                </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  73 import java.util.Iterator;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  74 import java.util.List;                                                                                   </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  75 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  76 import java.util.Set;                                                                                    </span>
<span class="7536840878424124946" onmouseenter="enter('7536840878424124946');" onmouseout="out('7536840878424124946');" style="">  77 import java.util.TreeMap;                                                                                </span>
<span class="-2705241621224930031" onmouseenter="enter('-2705241621224930031');" onmouseout="out('-2705241621224930031');" style="">  78 import java.util.concurrent.atomic.AtomicBoolean;                                                        </span>
<span  style="">  79                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  80 /**                                                                                                      </span>
<span class="-4436404655378914540" onmouseenter="enter('-4436404655378914540');" onmouseout="out('-4436404655378914540');" style="">  81  * Maintains in-memory state of the Launcher. It is expected that there should be only one               </span>
<span class="-4273357065044936134" onmouseenter="enter('-4273357065044936134');" onmouseout="out('-4273357065044936134');" style="">  82  * LauncherModel object held in a static. Also provide APIs for updating the database state              </span>
<span class="-4398933382026523538" onmouseenter="enter('-4398933382026523538');" onmouseout="out('-4398933382026523538');" style="">  83  * for the Launcher.                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  84  */                                                                                                      </span>
<span class="-2442101869408899034" onmouseenter="enter('-2442101869408899034');" onmouseout="out('-2442101869408899034');" style="">  85 public class LauncherModel extends BroadcastReceiver                                                     </span>
<span class="-6161550071310903350" onmouseenter="enter('-6161550071310903350');" onmouseout="out('-6161550071310903350');" style="">  86         implements LauncherAppsCompat.OnAppsChangedCallbackCompat {                                      </span>
<span class="4817350607901898392" onmouseenter="enter('4817350607901898392');" onmouseout="out('4817350607901898392');" style="">  87     static final boolean DEBUG_LOADERS = false;                                                          </span>
<span class="-5037112122408598239" onmouseenter="enter('-5037112122408598239');" onmouseout="out('-5037112122408598239');" style="">  88     private static final boolean DEBUG_RECEIVER = false;                                                 </span>
<span class="-4012347986936200510" onmouseenter="enter('-4012347986936200510');" onmouseout="out('-4012347986936200510');" style="">  89     private static final boolean REMOVE_UNRESTORED_ICONS = true;                                         </span>
<span  style="">  90                                                                                                          </span>
<span class="7166020908404799948" onmouseenter="enter('7166020908404799948');" onmouseout="out('7166020908404799948');" style="">  91     static final String TAG = &quot;Launcher.Model&quot;;                                                          </span>
<span  style="">  92                                                                                                          </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  93     // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                 </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  94     // false = strew non-workspace apps across the workspace on upgrade                                  </span>
<span class="-258177193926802879" onmouseenter="enter('-258177193926802879');" onmouseout="out('-258177193926802879');" style="">  95     public static final boolean UPGRADE_USE_MORE_APPS_FOLDER = false;                                    </span>
<span class="2412961508740342038" onmouseenter="enter('2412961508740342038');" onmouseout="out('2412961508740342038');" style="">  96     public static final int LOADER_FLAG_NONE = 0;                                                        </span>
<span class="-3582007365816200905" onmouseenter="enter('-3582007365816200905');" onmouseout="out('-3582007365816200905');" style="">  97     public static final int LOADER_FLAG_CLEAR_WORKSPACE = 1 &lt;&lt; 0;                                        </span>
<span class="2276565639346953559" onmouseenter="enter('2276565639346953559');" onmouseout="out('2276565639346953559');" style="">  98     public static final int LOADER_FLAG_MIGRATE_SHORTCUTS = 1 &lt;&lt; 1;                                      </span>
<span  style="">  99                                                                                                          </span>
<span class="-4154694662050657236" onmouseenter="enter('-4154694662050657236');" onmouseout="out('-4154694662050657236');" style=""> 100     private static final int ITEMS_CHUNK = 6; // batch size for the workspace icons                      </span>
<span class="-5674768092661618077" onmouseenter="enter('-5674768092661618077');" onmouseout="out('-5674768092661618077');" style=""> 101     private static final long INVALID_SCREEN_ID = -1L;                                                   </span>
<span  style=""> 102                                                                                                          </span>
<span class="-2106715535373822300" onmouseenter="enter('-2106715535373822300');" onmouseout="out('-2106715535373822300');" style=""> 103     private final boolean mAppsCanBeOnRemoveableStorage;                                                 </span>
<span class="4731979794377415890" onmouseenter="enter('4731979794377415890');" onmouseout="out('4731979794377415890');" style=""> 104     private final boolean mOldContentProviderExists;                                                     </span>
<span  style=""> 105                                                                                                          </span>
<span class="3718007027314914184" onmouseenter="enter('3718007027314914184');" onmouseout="out('3718007027314914184');" style=""> 106     private final LauncherAppState mApp;                                                                 </span>
<span class="-7373075918619999414" onmouseenter="enter('-7373075918619999414');" onmouseout="out('-7373075918619999414');" style=""> 107     private final Object mLock = new Object();                                                           </span>
<span class="6556510276342102272" onmouseenter="enter('6556510276342102272');" onmouseout="out('6556510276342102272');" style=""> 108     private DeferredHandler mHandler = new DeferredHandler();                                            </span>
<span class="-7862379002163915329" onmouseenter="enter('-7862379002163915329');" onmouseout="out('-7862379002163915329');" style=""> 109     private LoaderTask mLoaderTask;                                                                      </span>
<span class="-3485037850110155122" onmouseenter="enter('-3485037850110155122');" onmouseout="out('-3485037850110155122');" style=""> 110     private boolean mIsLoaderTaskRunning;                                                                </span>
<span class="7419034271767928159" onmouseenter="enter('7419034271767928159');" onmouseout="out('7419034271767928159');" style=""> 111     private volatile boolean mFlushingWorkerThread;                                                      </span>
<span  style=""> 112                                                                                                          </span>
<span class="7008336552769109798" onmouseenter="enter('7008336552769109798');" onmouseout="out('7008336552769109798');" style=""> 113     // Specific runnable types that are run on the main thread deferred handler, this allows us to       </span>
<span class="-2862621427901202146" onmouseenter="enter('-2862621427901202146');" onmouseout="out('-2862621427901202146');" style=""> 114     // clear all queued binding runnables when the Launcher activity is destroyed.                       </span>
<span class="2773124109533293313" onmouseenter="enter('2773124109533293313');" onmouseout="out('2773124109533293313');" style=""> 115     private static final int MAIN_THREAD_NORMAL_RUNNABLE = 0;                                            </span>
<span class="3742092121997602406" onmouseenter="enter('3742092121997602406');" onmouseout="out('3742092121997602406');" style=""> 116     private static final int MAIN_THREAD_BINDING_RUNNABLE = 1;                                           </span>
<span  style=""> 117                                                                                                          </span>
<span class="5026118005036723308" onmouseenter="enter('5026118005036723308');" onmouseout="out('5026118005036723308');" style=""> 118     private static final String MIGRATE_AUTHORITY = &quot;com.android.launcher2.settings&quot;;                    </span>
<span  style=""> 119                                                                                                          </span>
<span class="1887278082230738056" onmouseenter="enter('1887278082230738056');" onmouseout="out('1887278082230738056');" style=""> 120     private static final HandlerThread sWorkerThread = new HandlerThread(&quot;launcher-loader&quot;);             </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style=""> 121     static {                                                                                             </span>
<span class="3211376391739143126" onmouseenter="enter('3211376391739143126');" onmouseout="out('3211376391739143126');" style=""> 122         sWorkerThread.start();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123     }                                                                                                    </span>
<span class="2264102646027284513" onmouseenter="enter('2264102646027284513');" onmouseout="out('2264102646027284513');" style=""> 124     private static final Handler sWorker = new Handler(sWorkerThread.getLooper());                       </span>
<span  style=""> 125                                                                                                          </span>
<span class="3535035959074757881" onmouseenter="enter('3535035959074757881');" onmouseout="out('3535035959074757881');" style=""> 126     // We start off with everything not loaded.  After that, we assume that                              </span>
<span class="2643799052940090988" onmouseenter="enter('2643799052940090988');" onmouseout="out('2643799052940090988');" style=""> 127     // our monitoring of the package manager provides all updates and we never                           </span>
<span class="-1838192547825761021" onmouseenter="enter('-1838192547825761021');" onmouseout="out('-1838192547825761021');" style=""> 128     // need to do a requery.  These are only ever touched from the loader thread.                        </span>
<span class="-8758726942217087840" onmouseenter="enter('-8758726942217087840');" onmouseout="out('-8758726942217087840');" style=""> 129     private boolean mWorkspaceLoaded;                                                                    </span>
<span class="-1682003936594375249" onmouseenter="enter('-1682003936594375249');" onmouseout="out('-1682003936594375249');" style=""> 130     private boolean mAllAppsLoaded;                                                                      </span>
<span  style=""> 131                                                                                                          </span>
<span class="4437381645098142172" onmouseenter="enter('4437381645098142172');" onmouseout="out('4437381645098142172');" style=""> 132     // When we are loading pages synchronously, we can&#x27;t just post the binding of items on the side      </span>
<span class="3512738277131757196" onmouseenter="enter('3512738277131757196');" onmouseout="out('3512738277131757196');" style=""> 133     // pages as this delays the rotation process.  Instead, we wait for a callback from the first        </span>
<span class="1019766179129744653" onmouseenter="enter('1019766179129744653');" onmouseout="out('1019766179129744653');" style=""> 134     // draw (in Workspace) to initiate the binding of the remaining side pages.  Any time we start       </span>
<span class="7373070490167110663" onmouseenter="enter('7373070490167110663');" onmouseout="out('7373070490167110663');" style=""> 135     // a normal load, we also clear this set of Runnables.                                               </span>
<span class="4843369785562403466" onmouseenter="enter('4843369785562403466');" onmouseout="out('4843369785562403466');" style=""> 136     static final ArrayList&lt;Runnable&gt; mDeferredBindRunnables = new ArrayList&lt;Runnable&gt;();                 </span>
<span  style=""> 137                                                                                                          </span>
<span class="5593309185710650450" onmouseenter="enter('5593309185710650450');" onmouseout="out('5593309185710650450');" style=""> 138     private WeakReference&lt;Callbacks&gt; mCallbacks;                                                         </span>
<span  style=""> 139                                                                                                          </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 140     // &lt; only access in worker thread &gt;                                                                  </span>
<span class="-7893410053402242276" onmouseenter="enter('-7893410053402242276');" onmouseout="out('-7893410053402242276');" style=""> 141     AllAppsList mBgAllAppsList;                                                                          </span>
<span  style=""> 142                                                                                                          </span>
<span class="-4696524037009093502" onmouseenter="enter('-4696524037009093502');" onmouseout="out('-4696524037009093502');" style=""> 143     // The lock that must be acquired before referencing any static bg data structures.  Unlike          </span>
<span class="-2471307598696798987" onmouseenter="enter('-2471307598696798987');" onmouseout="out('-2471307598696798987');" style=""> 144     // other locks, this one can generally be held long-term because we never expect any of these        </span>
<span class="4310884307601416106" onmouseenter="enter('4310884307601416106');" onmouseout="out('4310884307601416106');" style=""> 145     // static data structures to be referenced outside of the worker thread except on the first          </span>
<span class="2260118264672300125" onmouseenter="enter('2260118264672300125');" onmouseout="out('2260118264672300125');" style=""> 146     // load after configuration change.                                                                  </span>
<span class="-8652324765300755578" onmouseenter="enter('-8652324765300755578');" onmouseout="out('-8652324765300755578');" style=""> 147     static final Object sBgLock = new Object();                                                          </span>
<span  style=""> 148                                                                                                          </span>
<span class="861828438456678075" onmouseenter="enter('861828438456678075');" onmouseout="out('861828438456678075');" style=""> 149     // sBgItemsIdMap maps *all* the ItemInfos (shortcuts, folders, and widgets) created by               </span>
<span class="3964854605559074701" onmouseenter="enter('3964854605559074701');" onmouseout="out('3964854605559074701');" style=""> 150     // LauncherModel to their ids                                                                        </span>
<span class="8713038185903703074" onmouseenter="enter('8713038185903703074');" onmouseout="out('8713038185903703074');" style=""> 151     static final HashMap&lt;Long, ItemInfo&gt; sBgItemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                  </span>
<span  style=""> 152                                                                                                          </span>
<span class="-4875305940507672487" onmouseenter="enter('-4875305940507672487');" onmouseout="out('-4875305940507672487');" style=""> 153     // sBgWorkspaceItems is passed to bindItems, which expects a list of all folders and shortcuts       </span>
<span class="5836863726682543660" onmouseenter="enter('5836863726682543660');" onmouseout="out('5836863726682543660');" style=""> 154     //       created by LauncherModel that are directly on the home screen (however, no widgets or       </span>
<span class="4941255916545901139" onmouseenter="enter('4941255916545901139');" onmouseout="out('4941255916545901139');" style=""> 155     //       shortcuts within folders).                                                                  </span>
<span class="4770535944422974992" onmouseenter="enter('4770535944422974992');" onmouseout="out('4770535944422974992');" style=""> 156     static final ArrayList&lt;ItemInfo&gt; sBgWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                      </span>
<span  style=""> 157                                                                                                          </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 158     // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()    </span>
<span class="2792930227258213532" onmouseenter="enter('2792930227258213532');" onmouseout="out('2792930227258213532');" style=""> 159     static final ArrayList&lt;LauncherAppWidgetInfo&gt; sBgAppWidgets =                                        </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style=""> 160         new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                          </span>
<span  style=""> 161                                                                                                          </span>
<span class="8356003681152445460" onmouseenter="enter('8356003681152445460');" onmouseout="out('8356003681152445460');" style=""> 162     // sBgFolders is all FolderInfos created by LauncherModel. Passed to bindFolders()                   </span>
<span class="8065187755370300271" onmouseenter="enter('8065187755370300271');" onmouseout="out('8065187755370300271');" style=""> 163     static final HashMap&lt;Long, FolderInfo&gt; sBgFolders = new HashMap&lt;Long, FolderInfo&gt;();                 </span>
<span  style=""> 164                                                                                                          </span>
<span class="-6906235458204319724" onmouseenter="enter('-6906235458204319724');" onmouseout="out('-6906235458204319724');" style=""> 165     // sBgDbIconCache is the set of ItemInfos that need to have their icons updated in the database      </span>
<span class="-2979801471293813396" onmouseenter="enter('-2979801471293813396');" onmouseout="out('-2979801471293813396');" style=""> 166     static final HashMap&lt;Object, byte[]&gt; sBgDbIconCache = new HashMap&lt;Object, byte[]&gt;();                 </span>
<span  style=""> 167                                                                                                          </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 168     // sBgWorkspaceScreens is the ordered set of workspace screens.                                      </span>
<span class="-1373680151983800221" onmouseenter="enter('-1373680151983800221');" onmouseout="out('-1373680151983800221');" style=""> 169     static final ArrayList&lt;Long&gt; sBgWorkspaceScreens = new ArrayList&lt;Long&gt;();                            </span>
<span  style=""> 170                                                                                                          </span>
<span class="8587182513202290942" onmouseenter="enter('8587182513202290942');" onmouseout="out('8587182513202290942');" style=""> 171     // sPendingPackages is a set of packages which could be on sdcard and are not available yet          </span>
<span class="7668483630172593446" onmouseenter="enter('7668483630172593446');" onmouseout="out('7668483630172593446');" style=""> 172     static final HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; sPendingPackages =                           </span>
<span class="3743105789756038321" onmouseenter="enter('3743105789756038321');" onmouseout="out('3743105789756038321');" style=""> 173             new HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt;();                                            </span>
<span  style=""> 174                                                                                                          </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 175     // &lt;/ only access in worker thread &gt;                                                                 </span>
<span  style=""> 176                                                                                                          </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style=""> 177     private IconCache mIconCache;                                                                        </span>
<span  style=""> 178                                                                                                          </span>
<span class="-1428370913368008087" onmouseenter="enter('-1428370913368008087');" onmouseout="out('-1428370913368008087');" style=""> 179     protected int mPreviousConfigMcc;                                                                    </span>
<span  style=""> 180                                                                                                          </span>
<span class="-1392466613073934971" onmouseenter="enter('-1392466613073934971');" onmouseout="out('-1392466613073934971');" style=""> 181     private final LauncherAppsCompat mLauncherApps;                                                      </span>
<span class="-6177668713869523688" onmouseenter="enter('-6177668713869523688');" onmouseout="out('-6177668713869523688');" style=""> 182     private final UserManagerCompat mUserManager;                                                        </span>
<span  style=""> 183                                                                                                          </span>
<span class="-3338718885622541528" onmouseenter="enter('-3338718885622541528');" onmouseout="out('-3338718885622541528');" style=""> 184     public interface Callbacks {                                                                         </span>
<span class="-4231961333511672310" onmouseenter="enter('-4231961333511672310');" onmouseout="out('-4231961333511672310');" style=""> 185         public boolean setLoadOnResume();                                                                </span>
<span class="803814078537529918" onmouseenter="enter('803814078537529918');" onmouseout="out('803814078537529918');" style=""> 186         public int getCurrentWorkspaceScreen();                                                          </span>
<span class="9018975241375557324" onmouseenter="enter('9018975241375557324');" onmouseout="out('9018975241375557324');" style=""> 187         public void startBinding();                                                                      </span>
<span class="3160017311795321748" onmouseenter="enter('3160017311795321748');" onmouseout="out('3160017311795321748');" style=""> 188         public void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end,                         </span>
<span class="2581406714293150955" onmouseenter="enter('2581406714293150955');" onmouseout="out('2581406714293150955');" style=""> 189                               boolean forceAnimateIcons);                                                </span>
<span class="5464078408309929972" onmouseenter="enter('5464078408309929972');" onmouseout="out('5464078408309929972');" style=""> 190         public void bindScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                       </span>
<span class="8828153861812868297" onmouseenter="enter('8828153861812868297');" onmouseout="out('8828153861812868297');" style=""> 191         public void bindAddScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                    </span>
<span class="6163649300164694862" onmouseenter="enter('6163649300164694862');" onmouseout="out('6163649300164694862');" style=""> 192         public void bindFolders(HashMap&lt;Long,FolderInfo&gt; folders);                                       </span>
<span class="-3241982460320043016" onmouseenter="enter('-3241982460320043016');" onmouseout="out('-3241982460320043016');" style=""> 193         public void finishBindingItems(boolean upgradePath);                                             </span>
<span class="-1509675786278068914" onmouseenter="enter('-1509675786278068914');" onmouseout="out('-1509675786278068914');" style=""> 194         public void bindAppWidget(LauncherAppWidgetInfo info);                                           </span>
<span class="-8847143600952784869" onmouseenter="enter('-8847143600952784869');" onmouseout="out('-8847143600952784869');" style=""> 195         public void bindAllApplications(ArrayList&lt;AppInfo&gt; apps);                                        </span>
<span class="1774766681438121710" onmouseenter="enter('1774766681438121710');" onmouseout="out('1774766681438121710');" style=""> 196         public void bindAppsAdded(ArrayList&lt;Long&gt; newScreens,                                            </span>
<span class="-4634129325608240116" onmouseenter="enter('-4634129325608240116');" onmouseout="out('-4634129325608240116');" style=""> 197                                   ArrayList&lt;ItemInfo&gt; addNotAnimated,                                    </span>
<span class="-7991947031099209517" onmouseenter="enter('-7991947031099209517');" onmouseout="out('-7991947031099209517');" style=""> 198                                   ArrayList&lt;ItemInfo&gt; addAnimated,                                       </span>
<span class="7647862954797634111" onmouseenter="enter('7647862954797634111');" onmouseout="out('7647862954797634111');" style=""> 199                                   ArrayList&lt;AppInfo&gt; addedApps);                                         </span>
<span class="4809991796097108143" onmouseenter="enter('4809991796097108143');" onmouseout="out('4809991796097108143');" style=""> 200         public void bindAppsUpdated(ArrayList&lt;AppInfo&gt; apps);                                            </span>
<span class="-6991207189725786229" onmouseenter="enter('-6991207189725786229');" onmouseout="out('-6991207189725786229');" style=""> 201         public void bindAppsRestored(ArrayList&lt;AppInfo&gt; apps);                                           </span>
<span class="1552205679904733456" onmouseenter="enter('1552205679904733456');" onmouseout="out('1552205679904733456');" style=""> 202         public void updatePackageState(ArrayList&lt;PackageInstallInfo&gt; installInfo);                       </span>
<span class="3764474087617128758" onmouseenter="enter('3764474087617128758');" onmouseout="out('3764474087617128758');" style=""> 203         public void updatePackageBadge(String packageName);                                              </span>
<span class="-3322135261875169793" onmouseenter="enter('-3322135261875169793');" onmouseout="out('-3322135261875169793');" style=""> 204         public void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames,                                </span>
<span class="-1539895317750647539" onmouseenter="enter('-1539895317750647539');" onmouseout="out('-1539895317750647539');" style=""> 205                         ArrayList&lt;AppInfo&gt; appInfos, UserHandleCompat user);                             </span>
<span class="-5054203298075540925" onmouseenter="enter('-5054203298075540925');" onmouseout="out('-5054203298075540925');" style=""> 206         public void bindPackagesUpdated(ArrayList&lt;Object&gt; widgetsAndShortcuts);                          </span>
<span class="7466294501708892199" onmouseenter="enter('7466294501708892199');" onmouseout="out('7466294501708892199');" style=""> 207         public void bindSearchablesChanged();                                                            </span>
<span class="-4863664490041232492" onmouseenter="enter('-4863664490041232492');" onmouseout="out('-4863664490041232492');" style=""> 208         public boolean isAllAppsButtonRank(int rank);                                                    </span>
<span class="-6469605959563265863" onmouseenter="enter('-6469605959563265863');" onmouseout="out('-6469605959563265863');" style=""> 209         public void onPageBoundSynchronously(int page);                                                  </span>
<span class="2927470839806734779" onmouseenter="enter('2927470839806734779');" onmouseout="out('2927470839806734779');" style=""> 210         public void dumpLogsToLocalData();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211     }                                                                                                    </span>
<span  style=""> 212                                                                                                          </span>
<span class="6660553528201779332" onmouseenter="enter('6660553528201779332');" onmouseout="out('6660553528201779332');" style=""> 213     public interface ItemInfoFilter {                                                                    </span>
<span class="-4205302945183309423" onmouseenter="enter('-4205302945183309423');" onmouseout="out('-4205302945183309423');" style=""> 214         public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215     }                                                                                                    </span>
<span  style=""> 216                                                                                                          </span>
<span class="-7540253694606934273" onmouseenter="enter('-7540253694606934273');" onmouseout="out('-7540253694606934273');" style=""> 217     LauncherModel(LauncherAppState app, IconCache iconCache, AppFilter appFilter) {                      </span>
<span class="-3815285143453777974" onmouseenter="enter('-3815285143453777974');" onmouseout="out('-3815285143453777974');" style=""> 218         Context context = app.getContext();                                                              </span>
<span  style=""> 219                                                                                                          </span>
<span class="1644001329477881511" onmouseenter="enter('1644001329477881511');" onmouseout="out('1644001329477881511');" style=""> 220         mAppsCanBeOnRemoveableStorage = Environment.isExternalStorageRemovable();                        </span>
<span class="6456618698786728431" onmouseenter="enter('6456618698786728431');" onmouseout="out('6456618698786728431');" style=""> 221         String oldProvider = context.getString(R.string.old_launcher_provider_uri);                      </span>
<span class="-4473607088242738177" onmouseenter="enter('-4473607088242738177');" onmouseout="out('-4473607088242738177');" style=""> 222         // This may be the same as MIGRATE_AUTHORITY, or it may be replaced by a different               </span>
<span class="-5811264300229071057" onmouseenter="enter('-5811264300229071057');" onmouseout="out('-5811264300229071057');" style=""> 223         // resource string.                                                                              </span>
<span class="7826951633422431656" onmouseenter="enter('7826951633422431656');" onmouseout="out('7826951633422431656');" style=""> 224         String redirectAuthority = Uri.parse(oldProvider).getAuthority();                                </span>
<span class="6066736278849717257" onmouseenter="enter('6066736278849717257');" onmouseout="out('6066736278849717257');" style=""> 225         ProviderInfo providerInfo =                                                                      </span>
<span class="-9141516768909079071" onmouseenter="enter('-9141516768909079071');" onmouseout="out('-9141516768909079071');" style=""> 226                 context.getPackageManager().resolveContentProvider(MIGRATE_AUTHORITY, 0);                </span>
<span class="765698750338601416" onmouseenter="enter('765698750338601416');" onmouseout="out('765698750338601416');" style=""> 227         ProviderInfo redirectProvider =                                                                  </span>
<span class="-45874905823641339" onmouseenter="enter('-45874905823641339');" onmouseout="out('-45874905823641339');" style=""> 228                 context.getPackageManager().resolveContentProvider(redirectAuthority, 0);                </span>
<span  style=""> 229                                                                                                          </span>
<span class="314259485526307626" onmouseenter="enter('314259485526307626');" onmouseout="out('314259485526307626');" style=""> 230         Log.d(TAG, &quot;Old launcher provider: &quot; + oldProvider);                                             </span>
<span class="-8592116164695986182" onmouseenter="enter('-8592116164695986182');" onmouseout="out('-8592116164695986182');" style=""> 231         mOldContentProviderExists = (providerInfo != null) &amp;&amp; (redirectProvider != null);                </span>
<span  style=""> 232                                                                                                          </span>
<span class="6861009572404401042" onmouseenter="enter('6861009572404401042');" onmouseout="out('6861009572404401042');" style=""> 233         if (mOldContentProviderExists) {                                                                 </span>
<span class="-1855952710226164095" onmouseenter="enter('-1855952710226164095');" onmouseout="out('-1855952710226164095');" style=""> 234             Log.d(TAG, &quot;Old launcher provider exists.&quot;);                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 235         } else {                                                                                         </span>
<span class="-884548298796331780" onmouseenter="enter('-884548298796331780');" onmouseout="out('-884548298796331780');" style=""> 236             Log.d(TAG, &quot;Old launcher provider does not exist.&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237         }                                                                                                </span>
<span  style=""> 238                                                                                                          </span>
<span class="8987557410347250467" onmouseenter="enter('8987557410347250467');" onmouseout="out('8987557410347250467');" style=""> 239         mApp = app;                                                                                      </span>
<span class="-1240051748269974178" onmouseenter="enter('-1240051748269974178');" onmouseout="out('-1240051748269974178');" style=""> 240         mBgAllAppsList = new AllAppsList(iconCache, appFilter);                                          </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style=""> 241         mIconCache = iconCache;                                                                          </span>
<span  style=""> 242                                                                                                          </span>
<span class="3654972388535142593" onmouseenter="enter('3654972388535142593');" onmouseout="out('3654972388535142593');" style=""> 243         final Resources res = context.getResources();                                                    </span>
<span class="-4708036118337437843" onmouseenter="enter('-4708036118337437843');" onmouseout="out('-4708036118337437843');" style=""> 244         Configuration config = res.getConfiguration();                                                   </span>
<span class="-32775646941108504" onmouseenter="enter('-32775646941108504');" onmouseout="out('-32775646941108504');" style=""> 245         mPreviousConfigMcc = config.mcc;                                                                 </span>
<span class="-1186313261969242146" onmouseenter="enter('-1186313261969242146');" onmouseout="out('-1186313261969242146');" style=""> 246         mLauncherApps = LauncherAppsCompat.getInstance(context);                                         </span>
<span class="5028106411018262806" onmouseenter="enter('5028106411018262806');" onmouseout="out('5028106411018262806');" style=""> 247         mUserManager = UserManagerCompat.getInstance(context);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248     }                                                                                                    </span>
<span  style=""> 249                                                                                                          </span>
<span class="7032781054018231449" onmouseenter="enter('7032781054018231449');" onmouseout="out('7032781054018231449');" style=""> 250     /** Runs the specified runnable immediately if called from the main thread, otherwise it is          </span>
<span class="7688515897456092220" onmouseenter="enter('7688515897456092220');" onmouseout="out('7688515897456092220');" style=""> 251      * posted on the main thread handler. */                                                             </span>
<span class="-3461925467760565643" onmouseenter="enter('-3461925467760565643');" onmouseout="out('-3461925467760565643');" style=""> 252     private void runOnMainThread(Runnable r) {                                                           </span>
<span class="-8277339055128647976" onmouseenter="enter('-8277339055128647976');" onmouseout="out('-8277339055128647976');" style=""> 253         runOnMainThread(r, 0);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254     }                                                                                                    </span>
<span class="2979979552252814736" onmouseenter="enter('2979979552252814736');" onmouseout="out('2979979552252814736');" style=""> 255     private void runOnMainThread(Runnable r, int type) {                                                 </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 256         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="-8713172384634047131" onmouseenter="enter('-8713172384634047131');" onmouseout="out('-8713172384634047131');" style=""> 257             // If we are on the worker thread, post onto the main handler                                </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 258             mHandler.post(r);                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 259         } else {                                                                                         </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 260             r.run();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262     }                                                                                                    </span>
<span  style=""> 263                                                                                                          </span>
<span class="3207003836565128" onmouseenter="enter('3207003836565128');" onmouseout="out('3207003836565128');" style=""> 264     /** Runs the specified runnable immediately if called from the worker thread, otherwise it is        </span>
<span class="-2756655390038865740" onmouseenter="enter('-2756655390038865740');" onmouseout="out('-2756655390038865740');" style=""> 265      * posted on the worker thread handler. */                                                           </span>
<span class="-6815764929820931194" onmouseenter="enter('-6815764929820931194');" onmouseout="out('-6815764929820931194');" style=""> 266     private static void runOnWorkerThread(Runnable r) {                                                  </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 267         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 268             r.run();                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 269         } else {                                                                                         </span>
<span class="4127612692606453253" onmouseenter="enter('4127612692606453253');" onmouseout="out('4127612692606453253');" style=""> 270             // If we are not on the worker thread, then post to the worker handler                       </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style=""> 271             sWorker.post(r);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273     }                                                                                                    </span>
<span  style=""> 274                                                                                                          </span>
<span class="-7044369129545244866" onmouseenter="enter('-7044369129545244866');" onmouseout="out('-7044369129545244866');" style=""> 275     boolean canMigrateFromOldLauncherDb(Launcher launcher) {                                             </span>
<span class="7588769537569950934" onmouseenter="enter('7588769537569950934');" onmouseout="out('7588769537569950934');" style=""> 276         return mOldContentProviderExists &amp;&amp; !launcher.isLauncherPreinstalled() ;                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277     }                                                                                                    </span>
<span  style=""> 278                                                                                                          </span>
<span class="7006856679254675514" onmouseenter="enter('7006856679254675514');" onmouseout="out('7006856679254675514');" style=""> 279     static boolean findNextAvailableIconSpaceInScreen(ArrayList&lt;ItemInfo&gt; items, int[] xy,               </span>
<span class="-6492711054324248109" onmouseenter="enter('-6492711054324248109');" onmouseout="out('-6492711054324248109');" style=""> 280                                  long screen) {                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 281         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 282         DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                    </span>
<span class="559481881935924132" onmouseenter="enter('559481881935924132');" onmouseout="out('559481881935924132');" style=""> 283         final int xCount = (int) grid.numColumns;                                                        </span>
<span class="-3430391683121642487" onmouseenter="enter('-3430391683121642487');" onmouseout="out('-3430391683121642487');" style=""> 284         final int yCount = (int) grid.numRows;                                                           </span>
<span class="9207855715228317472" onmouseenter="enter('9207855715228317472');" onmouseout="out('9207855715228317472');" style=""> 285         boolean[][] occupied = new boolean[xCount][yCount];                                              </span>
<span  style=""> 286                                                                                                          </span>
<span class="2963072137114824070" onmouseenter="enter('2963072137114824070');" onmouseout="out('2963072137114824070');" style=""> 287         int cellX, cellY, spanX, spanY;                                                                  </span>
<span class="5020765328610170980" onmouseenter="enter('5020765328610170980');" onmouseout="out('5020765328610170980');" style=""> 288         for (int i = 0; i &lt; items.size(); ++i) {                                                         </span>
<span class="3181415890192694055" onmouseenter="enter('3181415890192694055');" onmouseout="out('3181415890192694055');" style=""> 289             final ItemInfo item = items.get(i);                                                          </span>
<span class="-4074076028767186492" onmouseenter="enter('-4074076028767186492');" onmouseout="out('-4074076028767186492');" style=""> 290             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                        </span>
<span class="4879929299303230054" onmouseenter="enter('4879929299303230054');" onmouseout="out('4879929299303230054');" style=""> 291                 if (item.screenId == screen) {                                                           </span>
<span class="-5253640052908660766" onmouseenter="enter('-5253640052908660766');" onmouseout="out('-5253640052908660766');" style=""> 292                     cellX = item.cellX;                                                                  </span>
<span class="8289808867760126989" onmouseenter="enter('8289808867760126989');" onmouseout="out('8289808867760126989');" style=""> 293                     cellY = item.cellY;                                                                  </span>
<span class="-1153670204852401248" onmouseenter="enter('-1153670204852401248');" onmouseout="out('-1153670204852401248');" style=""> 294                     spanX = item.spanX;                                                                  </span>
<span class="-1841066671071348880" onmouseenter="enter('-1841066671071348880');" onmouseout="out('-1841066671071348880');" style=""> 295                     spanY = item.spanY;                                                                  </span>
<span class="3713894754787265371" onmouseenter="enter('3713894754787265371');" onmouseout="out('3713894754787265371');" style=""> 296                     for (int x = cellX; 0 &lt;= x &amp;&amp; x &lt; cellX + spanX &amp;&amp; x &lt; xCount; x++) {                </span>
<span class="1312990358377437379" onmouseenter="enter('1312990358377437379');" onmouseout="out('1312990358377437379');" style=""> 297                         for (int y = cellY; 0 &lt;= y &amp;&amp; y &lt; cellY + spanY &amp;&amp; y &lt; yCount; y++) {            </span>
<span class="-8702463444488690423" onmouseenter="enter('-8702463444488690423');" onmouseout="out('-8702463444488690423');" style=""> 298                             occupied[x][y] = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303         }                                                                                                </span>
<span  style=""> 304                                                                                                          </span>
<span class="-8431133162249858978" onmouseenter="enter('-8431133162249858978');" onmouseout="out('-8431133162249858978');" style=""> 305         return CellLayout.findVacantCell(xy, 1, 1, xCount, yCount, occupied);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306     }                                                                                                    </span>
<span class="-6259456544478400180" onmouseenter="enter('-6259456544478400180');" onmouseout="out('-6259456544478400180');" style=""> 307     static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name,                    </span>
<span class="-5771883199866145387" onmouseenter="enter('-5771883199866145387');" onmouseout="out('-5771883199866145387');" style=""> 308                                                         Intent launchIntent,                             </span>
<span class="245504953411362786" onmouseenter="enter('245504953411362786');" onmouseout="out('245504953411362786');" style=""> 309                                                         int firstScreenIndex,                            </span>
<span class="-3030748495081078938" onmouseenter="enter('-3030748495081078938');" onmouseout="out('-3030748495081078938');" style=""> 310                                                         ArrayList&lt;Long&gt; workspaceScreens) {              </span>
<span class="721182088367487597" onmouseenter="enter('721182088367487597');" onmouseout="out('721182088367487597');" style=""> 311         // Lock on the app so that we don&#x27;t try and get the items while apps are being added             </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 312         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-2530158852228207709" onmouseenter="enter('-2530158852228207709');" onmouseout="out('-2530158852228207709');" style=""> 313         LauncherModel model = app.getModel();                                                            </span>
<span class="-7742650363035610838" onmouseenter="enter('-7742650363035610838');" onmouseout="out('-7742650363035610838');" style=""> 314         boolean found = false;                                                                           </span>
<span class="8915607661092661586" onmouseenter="enter('8915607661092661586');" onmouseout="out('8915607661092661586');" style=""> 315         synchronized (app) {                                                                             </span>
<span class="7297018345010768725" onmouseenter="enter('7297018345010768725');" onmouseout="out('7297018345010768725');" style=""> 316             if (sWorkerThread.getThreadId() != Process.myTid()) {                                        </span>
<span class="-8468687854737954991" onmouseenter="enter('-8468687854737954991');" onmouseout="out('-8468687854737954991');" style=""> 317                 // Flush the LauncherModel worker thread, so that if we just did another                 </span>
<span class="-8915737001643417667" onmouseenter="enter('-8915737001643417667');" onmouseout="out('-8915737001643417667');" style=""> 318                 // processInstallShortcut, we give it time for its shortcut to get added to the          </span>
<span class="2341850028976611589" onmouseenter="enter('2341850028976611589');" onmouseout="out('2341850028976611589');" style=""> 319                 // database (getItemsInLocalCoordinates reads the database)                              </span>
<span class="-3308163450517263024" onmouseenter="enter('-3308163450517263024');" onmouseout="out('-3308163450517263024');" style=""> 320                 model.flushWorkerThread();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321             }                                                                                            </span>
<span class="8797318797001481965" onmouseenter="enter('8797318797001481965');" onmouseout="out('8797318797001481965');" style=""> 322             final ArrayList&lt;ItemInfo&gt; items = LauncherModel.getItemsInLocalCoordinates(context);         </span>
<span  style=""> 323                                                                                                          </span>
<span class="2319873497820841755" onmouseenter="enter('2319873497820841755');" onmouseout="out('2319873497820841755');" style=""> 324             // Try adding to the workspace screens incrementally, starting at the default or center      </span>
<span class="1139467458780899300" onmouseenter="enter('1139467458780899300');" onmouseout="out('1139467458780899300');" style=""> 325             // screen and alternating between +1, -1, +2, -2, etc. (using ~ ceil(i/2f)*(-1)^(i-1))       </span>
<span class="8331999200789555153" onmouseenter="enter('8331999200789555153');" onmouseout="out('8331999200789555153');" style=""> 326             firstScreenIndex = Math.min(firstScreenIndex, workspaceScreens.size());                      </span>
<span class="-5057452471390749214" onmouseenter="enter('-5057452471390749214');" onmouseout="out('-5057452471390749214');" style=""> 327             int count = workspaceScreens.size();                                                         </span>
<span class="6323561107141122979" onmouseenter="enter('6323561107141122979');" onmouseout="out('6323561107141122979');" style=""> 328             for (int screen = firstScreenIndex; screen &lt; count &amp;&amp; !found; screen++) {                    </span>
<span class="-2680594161355971081" onmouseenter="enter('-2680594161355971081');" onmouseout="out('-2680594161355971081');" style=""> 329                 int[] tmpCoordinates = new int[2];                                                       </span>
<span class="7117247924377105749" onmouseenter="enter('7117247924377105749');" onmouseout="out('7117247924377105749');" style=""> 330                 if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates,                            </span>
<span class="-6258224581011394116" onmouseenter="enter('-6258224581011394116');" onmouseout="out('-6258224581011394116');" style=""> 331                         workspaceScreens.get(screen))) {                                                 </span>
<span class="-4461607076234575183" onmouseenter="enter('-4461607076234575183');" onmouseout="out('-4461607076234575183');" style=""> 332                     // Update the Launcher db                                                            </span>
<span class="-6316225509374818886" onmouseenter="enter('-6316225509374818886');" onmouseout="out('-6316225509374818886');" style=""> 333                     return new Pair&lt;Long, int[]&gt;(workspaceScreens.get(screen), tmpCoordinates);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 337         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338     }                                                                                                    </span>
<span  style=""> 339                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 340 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-7586986915858549354" onmouseenter="enter('-7586986915858549354');" onmouseout="out('-7586986915858549354');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 341     public void setPackageState(final ArrayList&lt;PackageInstallInfo&gt; installInfo) {                       </span>
<span class="-7600698850277173095" onmouseenter="enter('-7600698850277173095');" onmouseout="out('-7600698850277173095');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 342         // Process the updated package state                                                             </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 343         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 344             public void run() {                                                                          </span>
<span class="2781538483798405833" onmouseenter="enter('2781538483798405833');" onmouseout="out('2781538483798405833');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 345                 Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 346                 if (callbacks != null) {                                                                 </span>
<span class="-2122958624687225435" onmouseenter="enter('-2122958624687225435');" onmouseout="out('-2122958624687225435');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 347                     callbacks.updatePackageState(installInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 348                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 349             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 350         };                                                                                               </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 351         mHandler.post(r);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 352     }                                                                                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 353                                                                                                          </span>
<span class="-4348975915921845586" onmouseenter="enter('-4348975915921845586');" onmouseout="out('-4348975915921845586');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 354     public void updatePackageBadge(final String packageName) {                                           </span>
<span class="7729714843616329773" onmouseenter="enter('7729714843616329773');" onmouseout="out('7729714843616329773');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 355         // Process the updated package badge                                                             </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 356         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 357             public void run() {                                                                          </span>
<span class="2781538483798405833" onmouseenter="enter('2781538483798405833');" onmouseout="out('2781538483798405833');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 358                 Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 359                 if (callbacks != null) {                                                                 </span>
<span class="-175082648182985609" onmouseenter="enter('-175082648182985609');" onmouseout="out('-175082648182985609');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 360                     callbacks.updatePackageBadge(packageName);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 361                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 362             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 363         };                                                                                               </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 364         mHandler.post(r);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 365     }                                                                                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 366                                                                                                          </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 367     public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {              </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 368         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 369                                                                                                          </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 370         if (allAppsApps == null) {                                                                       </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 371             throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 372         }                                                                                                </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 373         if (allAppsApps.isEmpty()) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 374             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 375         }                                                                                                </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 376                                                                                                          </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 377         final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                           </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 378         Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                 </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 379         while (iter.hasNext()) {                                                                         </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 380             ItemInfo a = iter.next();                                                                    </span>
<span class="788818030959001981" onmouseenter="enter('788818030959001981');" onmouseout="out('788818030959001981');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 381             if (LauncherModel.appWasPromise(ctx, a.getIntent(), a.user)) {                               </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 382                 restoredAppsFinal.add((AppInfo) a);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 383             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 384         }                                                                                                </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 385                                                                                                          </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 386         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 387         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 388             public void run() {                                                                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 389                 runOnMainThread(new Runnable() {                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 390                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 391                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 392                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 393                             if (!restoredAppsFinal.isEmpty()) {                                          </span>
<span class="74801564058707670" onmouseenter="enter('74801564058707670');" onmouseout="out('74801564058707670');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 394                                 for (AppInfo info : restoredAppsFinal) {                                 </span>
<span class="5803126433316087462" onmouseenter="enter('5803126433316087462');" onmouseout="out('5803126433316087462');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 395                                     final Intent intent = info.getIntent();                              </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 396                                     if (intent != null) {                                                </span>
<span class="7948974687398618411" onmouseenter="enter('7948974687398618411');" onmouseout="out('7948974687398618411');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 397                                         mIconCache.deletePreloadedIcon(intent.getComponent(),            </span>
<span class="1609339875512298297" onmouseenter="enter('1609339875512298297');" onmouseout="out('1609339875512298297');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 398                                                 info.user);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 399                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 400                                 }                                                                        </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 401                                 callbacks.bindAppsUpdated(restoredAppsFinal);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 402                             }                                                                            </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 403                             callbacks.bindAppsAdded(null, null, null, allAppsApps);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 404                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 405                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 406                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 407             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 408         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 409         runOnWorkerThread(r);                                                                            </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 410 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="7560529663732492491" onmouseenter="enter('7560529663732492491');" onmouseout="out('7560529663732492491');" style=""> 411 &lt;&lt;&lt;&lt;&lt;&lt;&lt; OURS                                                                                             </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 412     public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,      </span>
<span class="9200705866279837671" onmouseenter="enter('9200705866279837671');" onmouseout="out('9200705866279837671');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 413                                     final ArrayList&lt;AppInfo&gt; allAppsApps) {                              </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 414         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                     </span>
<span class="-5825036277829220629" onmouseenter="enter('-5825036277829220629');" onmouseout="out('-5825036277829220629');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 415         addAndBindAddedApps(context, workspaceApps, cb, allAppsApps);                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 416 =======                                                                                                  </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 417     public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {              </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 418         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 419                                                                                                          </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 420         if (allAppsApps == null) {                                                                       </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 421             throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 422         }                                                                                                </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 423         if (allAppsApps.isEmpty()) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 424             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 425         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 426                                                                                                          </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 427         final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                           </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 428         Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                 </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 429         while (iter.hasNext()) {                                                                         </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 430             ItemInfo a = iter.next();                                                                    </span>
<span class="-1900793198524744852" onmouseenter="enter('-1900793198524744852');" onmouseout="out('-1900793198524744852');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 431             if (LauncherModel.appWasRestored(ctx, a.getIntent())) {                                      </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 432                 restoredAppsFinal.add((AppInfo) a);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 433             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 434         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 435                                                                                                          </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 436         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 437         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 438             public void run() {                                                                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 439                 runOnMainThread(new Runnable() {                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 440                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 441                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 442                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 443                             if (!restoredAppsFinal.isEmpty()) {                                          </span>
<span class="74801564058707670" onmouseenter="enter('74801564058707670');" onmouseout="out('74801564058707670');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 444                                 for (AppInfo info : restoredAppsFinal) {                                 </span>
<span class="5803126433316087462" onmouseenter="enter('5803126433316087462');" onmouseout="out('5803126433316087462');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 445                                     final Intent intent = info.getIntent();                              </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 446                                     if (intent != null) {                                                </span>
<span class="-1988411798343692534" onmouseenter="enter('-1988411798343692534');" onmouseout="out('-1988411798343692534');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 447                                         mIconCache.deletePreloadedIcon(intent.getComponent());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 448                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 449                                 }                                                                        </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 450                                 callbacks.bindAppsUpdated(restoredAppsFinal);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 451                             }                                                                            </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 452                             callbacks.bindAppsAdded(null, null, null, allAppsApps);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 453                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 454                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 455                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 456             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 457         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 458         runOnWorkerThread(r);                                                                            </span>
<span class="-1379186895432660313" onmouseenter="enter('-1379186895432660313');" onmouseout="out('-1379186895432660313');" style=""> 459 &gt;&gt;&gt;&gt;&gt;&gt;&gt; THEIRS                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460     }                                                                                                    </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style=""> 461     public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,      </span>
<span class="-6487660545798143403" onmouseenter="enter('-6487660545798143403');" onmouseout="out('-6487660545798143403');" style=""> 462                                 final Callbacks callbacks, final ArrayList&lt;AppInfo&gt; allAppsApps) {       </span>
<span class="-1944739770126231100" onmouseenter="enter('-1944739770126231100');" onmouseout="out('-1944739770126231100');" style=""> 463         if (workspaceApps == null || allAppsApps == null) {                                              </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 464             throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465         }                                                                                                </span>
<span class="6140956863670038829" onmouseenter="enter('6140956863670038829');" onmouseout="out('6140956863670038829');" style=""> 466         if (workspaceApps.isEmpty() &amp;&amp; allAppsApps.isEmpty()) {                                          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 467             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 468         }                                                                                                </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 469         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 470         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 471             public void run() {                                                                          </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 472                 final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();               </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 473                 final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                </span>
<span  style=""> 474                                                                                                          </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 475                 // Get the list of workspace screens.  We need to append to this list and                </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 476                 // can not use sBgWorkspaceScreens because loadWorkspace() may not have been             </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 477                 // called.                                                                               </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 478                 ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 479                 TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                 </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 480                 for (Integer i : orderedScreens.keySet()) {                                              </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 481                     long screenId = orderedScreens.get(i);                                               </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 482                     workspaceScreens.add(screenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483                 }                                                                                        </span>
<span  style=""> 484                                                                                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 485                 synchronized(sBgLock) {                                                                  </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 486                     Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                  </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 487                     while (iter.hasNext()) {                                                             </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 488                         ItemInfo a = iter.next();                                                        </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 489                         final String name = a.title.toString();                                          </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 490                         final Intent launchIntent = a.getIntent();                                       </span>
<span  style=""> 491                                                                                                          </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 492                         // Short-circuit this logic if the icon exists somewhere on the workspace        </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 493                         if (LauncherModel.shortcutExists(context, name, launchIntent)) {                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 494                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495                         }                                                                                </span>
<span  style=""> 496                                                                                                          </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 497                         // Add this icon to the db, creating a new page if necessary.  If there          </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 498                         // is only the empty page then we just add items to the first page.              </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 499                         // Otherwise, we add them to the next pages.                                     </span>
<span class="-506120048723665625" onmouseenter="enter('-506120048723665625');" onmouseout="out('-506120048723665625');" style=""> 500                         int startSearchPageIndex = workspaceScreens.isEmpty() ? 0 : 1;                   </span>
<span class="89807873419961601" onmouseenter="enter('89807873419961601');" onmouseout="out('89807873419961601');" style=""> 501                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context,     </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 502                                 name, launchIntent, startSearchPageIndex, workspaceScreens);             </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 503                         if (coords == null) {                                                            </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 504                             LauncherProvider lp = LauncherAppState.getLauncherProvider();                </span>
<span  style=""> 505                                                                                                          </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 506                             // If we can&#x27;t find a valid position, then just add a new screen.            </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 507                             // This takes time so we need to re-queue the add until the new              </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 508                             // page is added.  Create as many screens as necessary to satisfy            </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 509                             // the startSearchPageIndex.                                                 </span>
<span class="8487048175242917271" onmouseenter="enter('8487048175242917271');" onmouseout="out('8487048175242917271');" style=""> 510                             int numPagesToAdd = Math.max(1, startSearchPageIndex + 1 -                   </span>
<span class="-1324774811555943949" onmouseenter="enter('-1324774811555943949');" onmouseout="out('-1324774811555943949');" style=""> 511                                     workspaceScreens.size());                                            </span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 512                             while (numPagesToAdd &gt; 0) {                                                  </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 513                                 long screenId = lp.generateNewScreenId();                                </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 514                                 // Save the screen id for binding in the workspace                       </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 515                                 workspaceScreens.add(screenId);                                          </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 516                                 addedWorkspaceScreensFinal.add(screenId);                                </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 517                                 numPagesToAdd--;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518                             }                                                                            </span>
<span  style=""> 519                                                                                                          </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 520                             // Find the coordinate again                                                 </span>
<span class="-3135847744636951602" onmouseenter="enter('-3135847744636951602');" onmouseout="out('-3135847744636951602');" style=""> 521                             coords = LauncherModel.findNextAvailableIconSpace(context,                   </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 522                                     name, launchIntent, startSearchPageIndex, workspaceScreens);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523                         }                                                                                </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 524                         if (coords == null) {                                                            </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 525 =======                                                                                                  </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style=""> 526     public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,      </span>
<span class="9200705866279837671" onmouseenter="enter('9200705866279837671');" onmouseout="out('9200705866279837671');" style=""> 527                                     final ArrayList&lt;AppInfo&gt; allAppsApps) {                              </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 528         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                     </span>
<span class="-5825036277829220629" onmouseenter="enter('-5825036277829220629');" onmouseout="out('-5825036277829220629');" style=""> 529         addAndBindAddedApps(context, workspaceApps, cb, allAppsApps);                                    </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 530 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531     }                                                                                                    </span>
<span  style=""> 532                                                                                                          </span>
<span class="-1568395532324485066" onmouseenter="enter('-1568395532324485066');" onmouseout="out('-1568395532324485066');" style=""> 533     public void addAndBindAddedWorkspaceApps(final Context context,                                      </span>
<span class="-2077533935123746745" onmouseenter="enter('-2077533935123746745');" onmouseout="out('-2077533935123746745');" style=""> 534             final ArrayList&lt;ItemInfo&gt; workspaceApps) {                                                   </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style=""> 535         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style=""> 536                                                                                                          </span>
<span class="7068544170534510976" onmouseenter="enter('7068544170534510976');" onmouseout="out('7068544170534510976');" style=""> 537         if (workspaceApps == null) {                                                                     </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 538             throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 539         }                                                                                                </span>
<span class="3300400308027950866" onmouseenter="enter('3300400308027950866');" onmouseout="out('3300400308027950866');" style=""> 540         if (workspaceApps.isEmpty()) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 541             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542         }                                                                                                </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 543         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 544         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 545             public void run() {                                                                          </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 546                 final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();               </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 547                 final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style=""> 548                 final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                   </span>
<span  style=""> 549                                                                                                          </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 550                 // Get the list of workspace screens.  We need to append to this list and                </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 551                 // can not use sBgWorkspaceScreens because loadWorkspace() may not have been             </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 552                 // called.                                                                               </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 553                 ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 554                 TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                 </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 555                 for (Integer i : orderedScreens.keySet()) {                                              </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 556                     long screenId = orderedScreens.get(i);                                               </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 557                     workspaceScreens.add(screenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 558                 }                                                                                        </span>
<span  style=""> 559                                                                                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 560                 synchronized(sBgLock) {                                                                  </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 561                     Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                  </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 562                     while (iter.hasNext()) {                                                             </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 563                         ItemInfo a = iter.next();                                                        </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 564                         final String name = a.title.toString();                                          </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 565                         final Intent launchIntent = a.getIntent();                                       </span>
<span  style=""> 566                                                                                                          </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 567                         // Short-circuit this logic if the icon exists somewhere on the workspace        </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 568                         if (LauncherModel.shortcutExists(context, name, launchIntent)) {                 </span>
<span class="1114901652794496627" onmouseenter="enter('1114901652794496627');" onmouseout="out('1114901652794496627');" style=""> 569                             // Only InstallShortcutReceiver sends us shortcutInfos, ignore them          </span>
<span class="-8314395278706468200" onmouseenter="enter('-8314395278706468200');" onmouseout="out('-8314395278706468200');" style=""> 570                             if (a instanceof AppInfo &amp;&amp;                                                  </span>
<span class="-4816286524033800367" onmouseenter="enter('-4816286524033800367');" onmouseout="out('-4816286524033800367');" style=""> 571                                     LauncherModel.appWasPromise(context, launchIntent, a.user)) {        </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style=""> 572                                 restoredAppsFinal.add((AppInfo) a);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 573                             }                                                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 574                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575                         }                                                                                </span>
<span  style=""> 576                                                                                                          </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 577                         // Add this icon to the db, creating a new page if necessary.  If there          </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 578                         // is only the empty page then we just add items to the first page.              </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 579                         // Otherwise, we add them to the next pages.                                     </span>
<span class="-506120048723665625" onmouseenter="enter('-506120048723665625');" onmouseout="out('-506120048723665625');" style=""> 580                         int startSearchPageIndex = workspaceScreens.isEmpty() ? 0 : 1;                   </span>
<span class="89807873419961601" onmouseenter="enter('89807873419961601');" onmouseout="out('89807873419961601');" style=""> 581                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context,     </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 582                                 name, launchIntent, startSearchPageIndex, workspaceScreens);             </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 583                         if (coords == null) {                                                            </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 584                             LauncherProvider lp = LauncherAppState.getLauncherProvider();                </span>
<span  style=""> 585                                                                                                          </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 586                             // If we can&#x27;t find a valid position, then just add a new screen.            </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 587                             // This takes time so we need to re-queue the add until the new              </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 588                             // page is added.  Create as many screens as necessary to satisfy            </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 589                             // the startSearchPageIndex.                                                 </span>
<span class="8487048175242917271" onmouseenter="enter('8487048175242917271');" onmouseout="out('8487048175242917271');" style=""> 590                             int numPagesToAdd = Math.max(1, startSearchPageIndex + 1 -                   </span>
<span class="-1324774811555943949" onmouseenter="enter('-1324774811555943949');" onmouseout="out('-1324774811555943949');" style=""> 591                                     workspaceScreens.size());                                            </span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 592                             while (numPagesToAdd &gt; 0) {                                                  </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 593                                 long screenId = lp.generateNewScreenId();                                </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 594                                 // Save the screen id for binding in the workspace                       </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 595                                 workspaceScreens.add(screenId);                                          </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 596                                 addedWorkspaceScreensFinal.add(screenId);                                </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 597                                 numPagesToAdd--;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598                             }                                                                            </span>
<span  style=""> 599                                                                                                          </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 600                             // Find the coordinate again                                                 </span>
<span class="-3135847744636951602" onmouseenter="enter('-3135847744636951602');" onmouseout="out('-3135847744636951602');" style=""> 601                             coords = LauncherModel.findNextAvailableIconSpace(context,                   </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 602                                     name, launchIntent, startSearchPageIndex, workspaceScreens);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 603                         }                                                                                </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 604                         if (coords == null) {                                                            </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style=""> 605                             throw new RuntimeException(&quot;Coordinates should not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606                         }                                                                                </span>
<span  style=""> 607                                                                                                          </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style=""> 608                         ShortcutInfo shortcutInfo;                                                       </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style=""> 609                         if (a instanceof ShortcutInfo) {                                                 </span>
<span class="-5249556100657982245" onmouseenter="enter('-5249556100657982245');" onmouseout="out('-5249556100657982245');" style=""> 610                             shortcutInfo = (ShortcutInfo) a;                                             </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style=""> 611                         } else if (a instanceof AppInfo) {                                               </span>
<span class="1865505886056520689" onmouseenter="enter('1865505886056520689');" onmouseout="out('1865505886056520689');" style=""> 612                             shortcutInfo = ((AppInfo) a).makeShortcut();                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 613                         } else {                                                                         </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style=""> 614                             throw new RuntimeException(&quot;Unexpected info type&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615                         }                                                                                </span>
<span  style=""> 616                                                                                                          </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style=""> 617                         // Add the shortcut to the db                                                    </span>
<span class="-7320352620243561318" onmouseenter="enter('-7320352620243561318');" onmouseout="out('-7320352620243561318');" style=""> 618                         addItemToDatabase(context, shortcutInfo,                                         </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style=""> 619                                 LauncherSettings.Favorites.CONTAINER_DESKTOP,                            </span>
<span class="-5434732926326446745" onmouseenter="enter('-5434732926326446745');" onmouseout="out('-5434732926326446745');" style=""> 620                                 coords.first, coords.second[0], coords.second[1], false);                </span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style=""> 621                         // Save the ShortcutInfo for binding in the workspace                            </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style=""> 622                         addedShortcutsFinal.add(shortcutInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624                 }                                                                                        </span>
<span  style=""> 625                                                                                                          </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style=""> 626                 // Update the workspace screens                                                          </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style=""> 627                 updateWorkspaceScreenOrder(context, workspaceScreens);                                   </span>
<span  style=""> 628                                                                                                          </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 629                 if (!addedShortcutsFinal.isEmpty()) {                                                    </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 630                     runOnMainThread(new Runnable() {                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 631                         public void run() {                                                              </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 632                             Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                 </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style=""> 633                             if (callbacks == cb &amp;&amp; cb != null) {                                         </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style=""> 634                                 final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();       </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style=""> 635                                 final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();    </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 636                                 if (!addedShortcutsFinal.isEmpty()) {                                    </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style=""><abbr title=" 637                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);"> 637                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - </abbr></span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style=""> 638                                     long lastScreenId = info.screenId;                                   </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style=""> 639                                     for (ItemInfo i : addedShortcutsFinal) {                             </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style=""> 640                                         if (i.screenId == lastScreenId) {                                </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style=""> 641                                             addAnimated.add(i);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 642                                         } else {                                                         </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style=""> 643                                             addNotAnimated.add(i);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 646                                 }                                                                        </span>
<span class="6311741688571123959" onmouseenter="enter('6311741688571123959');" onmouseout="out('6311741688571123959');" style=""> 647                                 callbacks.bindAppsAdded(addedWorkspaceScreensFinal,                      </span>
<span class="6252030951506738248" onmouseenter="enter('6252030951506738248');" onmouseout="out('6252030951506738248');" style=""> 648                                         addNotAnimated, addAnimated, null);                              </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style=""> 649                                 if (!restoredAppsFinal.isEmpty()) {                                      </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style=""> 650                                     callbacks.bindAppsUpdated(restoredAppsFinal);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 651                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 654                     });                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 656             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 657         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 658         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659     }                                                                                                    </span>
<span  style=""> 660                                                                                                          </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style=""> 661     public void unbindItemInfosAndClearQueuedBindRunnables() {                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 662         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="3234081821162543737" onmouseenter="enter('3234081821162543737');" onmouseout="out('3234081821162543737');" style=""> 663             throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; +     </span>
<span class="-2105866874193436772" onmouseenter="enter('-2105866874193436772');" onmouseout="out('-2105866874193436772');" style=""> 664                     &quot;main thread&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 665         }                                                                                                </span>
<span  style=""> 666                                                                                                          </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style=""> 667         // Clear any deferred bind runnables                                                             </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style=""> 668         synchronized (mDeferredBindRunnables) {                                                          </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style=""> 669             mDeferredBindRunnables.clear();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 670         }                                                                                                </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style=""> 671         // Remove any queued bind runnables                                                              </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style=""> 672         mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                 </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style=""> 673         // Unbind all the workspace items                                                                </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style=""> 674         unbindWorkspaceItemsOnMainThread();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675     }                                                                                                    </span>
<span  style=""> 676                                                                                                          </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style=""> 677     /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                        </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style=""> 678     void unbindWorkspaceItemsOnMainThread() {                                                            </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style=""> 679         // Ensure that we don&#x27;t use the same workspace items data structure on the main thread           </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style=""> 680         // by making a copy of workspace items first.                                                    </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style=""> 681         final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style=""> 682         final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                             </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 683         synchronized (sBgLock) {                                                                         </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style=""> 684             tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                 </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style=""> 685             tmpAppWidgets.addAll(sBgAppWidgets);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 686         }                                                                                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 687         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 688                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 689                 public void run() {                                                                      </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style=""> 690                    for (ItemInfo item : tmpWorkspaceItems) {                                             </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 691                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692                    }                                                                                     </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style=""> 693                    for (ItemInfo item : tmpAppWidgets) {                                                 </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 694                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695                    }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 697             };                                                                                           </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style=""> 698         runOnMainThread(r);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699     }                                                                                                    </span>
<span  style=""> 700                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 701     /**                                                                                                  </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style=""> 702      * Adds an item to the DB if it was not created previously, or move it to a new                      </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style=""> 703      * &lt;container, screen, cellX, cellY&gt;                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 704      */                                                                                                  </span>
<span class="-51543303805672089" onmouseenter="enter('-51543303805672089');" onmouseout="out('-51543303805672089');" style=""> 705     static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container,                  </span>
<span class="-5245876562794627197" onmouseenter="enter('-5245876562794627197');" onmouseout="out('-5245876562794627197');" style=""> 706             long screenId, int cellX, int cellY) {                                                       </span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style=""> 707         if (item.container == ItemInfo.NO_ID) {                                                          </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style=""> 708             // From all apps                                                                             </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style=""> 709             addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 710         } else {                                                                                         </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style=""> 711             // From somewhere else                                                                       </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style=""> 712             moveItemInDatabase(context, item, container, screenId, cellX, cellY);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714     }                                                                                                    </span>
<span  style=""> 715                                                                                                          </span>
<span class="4702100753708951937" onmouseenter="enter('4702100753708951937');" onmouseout="out('4702100753708951937');" style=""> 716     static void checkItemInfoLocked(                                                                     </span>
<span class="5364875648309494693" onmouseenter="enter('5364875648309494693');" onmouseout="out('5364875648309494693');" style=""> 717             final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {                    </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 718         ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                  </span>
<span class="2193901808277988725" onmouseenter="enter('2193901808277988725');" onmouseout="out('2193901808277988725');" style=""> 719         if (modelItem != null &amp;&amp; item != modelItem) {                                                    </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style=""> 720             // check all the data is consistent                                                          </span>
<span class="3167281191986023088" onmouseenter="enter('3167281191986023088');" onmouseout="out('3167281191986023088');" style=""> 721             if (modelItem instanceof ShortcutInfo &amp;&amp; item instanceof ShortcutInfo) {                     </span>
<span class="-1653864946297504770" onmouseenter="enter('-1653864946297504770');" onmouseout="out('-1653864946297504770');" style=""> 722                 ShortcutInfo modelShortcut = (ShortcutInfo) modelItem;                                   </span>
<span class="-8536587564734321572" onmouseenter="enter('-8536587564734321572');" onmouseout="out('-8536587564734321572');" style=""> 723                 ShortcutInfo shortcut = (ShortcutInfo) item;                                             </span>
<span class="-7217994585765985559" onmouseenter="enter('-7217994585765985559');" onmouseout="out('-7217994585765985559');" style=""> 724                 if (modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp;                  </span>
<span class="7021740932722535577" onmouseenter="enter('7021740932722535577');" onmouseout="out('7021740932722535577');" style=""> 725                         modelShortcut.intent.filterEquals(shortcut.intent) &amp;&amp;                            </span>
<span class="4925161259592804600" onmouseenter="enter('4925161259592804600');" onmouseout="out('4925161259592804600');" style=""> 726                         modelShortcut.id == shortcut.id &amp;&amp;                                               </span>
<span class="-1606801806764943644" onmouseenter="enter('-1606801806764943644');" onmouseout="out('-1606801806764943644');" style=""> 727                         modelShortcut.itemType == shortcut.itemType &amp;&amp;                                   </span>
<span class="-380653198024077357" onmouseenter="enter('-380653198024077357');" onmouseout="out('-380653198024077357');" style=""> 728                         modelShortcut.container == shortcut.container &amp;&amp;                                 </span>
<span class="2095015237441904975" onmouseenter="enter('2095015237441904975');" onmouseout="out('2095015237441904975');" style=""> 729                         modelShortcut.screenId == shortcut.screenId &amp;&amp;                                   </span>
<span class="8356312788511485655" onmouseenter="enter('8356312788511485655');" onmouseout="out('8356312788511485655');" style=""> 730                         modelShortcut.cellX == shortcut.cellX &amp;&amp;                                         </span>
<span class="-8074804825298555262" onmouseenter="enter('-8074804825298555262');" onmouseout="out('-8074804825298555262');" style=""> 731                         modelShortcut.cellY == shortcut.cellY &amp;&amp;                                         </span>
<span class="-7194734667210277438" onmouseenter="enter('-7194734667210277438');" onmouseout="out('-7194734667210277438');" style=""> 732                         modelShortcut.spanX == shortcut.spanX &amp;&amp;                                         </span>
<span class="-7990526823057792041" onmouseenter="enter('-7990526823057792041');" onmouseout="out('-7990526823057792041');" style=""> 733                         modelShortcut.spanY == shortcut.spanY &amp;&amp;                                         </span>
<span class="1791877648440959041" onmouseenter="enter('1791877648440959041');" onmouseout="out('1791877648440959041');" style=""> 734                         ((modelShortcut.dropPos == null &amp;&amp; shortcut.dropPos == null) ||                  </span>
<span class="-2385997644828375020" onmouseenter="enter('-2385997644828375020');" onmouseout="out('-2385997644828375020');" style=""> 735                         (modelShortcut.dropPos != null &amp;&amp;                                                </span>
<span class="8673154118418480877" onmouseenter="enter('8673154118418480877');" onmouseout="out('8673154118418480877');" style=""> 736                                 shortcut.dropPos != null &amp;&amp;                                              </span>
<span class="1110472284758384589" onmouseenter="enter('1110472284758384589');" onmouseout="out('1110472284758384589');" style=""> 737                                 modelShortcut.dropPos[0] == shortcut.dropPos[0] &amp;&amp;                       </span>
<span class="8614743944867507225" onmouseenter="enter('8614743944867507225');" onmouseout="out('8614743944867507225');" style=""> 738                         modelShortcut.dropPos[1] == shortcut.dropPos[1]))) {                             </span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style=""> 739                     // For all intents and purposes, this is the same object                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 740                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 742             }                                                                                            </span>
<span  style=""> 743                                                                                                          </span>
<span class="-2302662152798801960" onmouseenter="enter('-2302662152798801960');" onmouseout="out('-2302662152798801960');" style=""> 744             // the modelItem needs to match up perfectly with item if our model is                       </span>
<span class="2528116919227347475" onmouseenter="enter('2528116919227347475');" onmouseout="out('2528116919227347475');" style=""> 745             // to be consistent with the database-- for now, just require                                </span>
<span class="-7120210409264493846" onmouseenter="enter('-7120210409264493846');" onmouseout="out('-7120210409264493846');" style=""> 746             // modelItem == item or the equality check above                                             </span>
<span class="-3667577266304831846" onmouseenter="enter('-3667577266304831846');" onmouseout="out('-3667577266304831846');" style=""> 747             String msg = &quot;item: &quot; + ((item != null) ? item.toString() : &quot;null&quot;) +                        </span>
<span class="-2910805653187511799" onmouseenter="enter('-2910805653187511799');" onmouseout="out('-2910805653187511799');" style=""> 748                     &quot;modelItem: &quot; +                                                                      </span>
<span class="-7298566834322238485" onmouseenter="enter('-7298566834322238485');" onmouseout="out('-7298566834322238485');" style=""> 749                     ((modelItem != null) ? modelItem.toString() : &quot;null&quot;) +                              </span>
<span class="-1970027720063810255" onmouseenter="enter('-1970027720063810255');" onmouseout="out('-1970027720063810255');" style=""> 750                     &quot;Error: ItemInfo passed to checkItemInfo doesn&#x27;t match original&quot;;                    </span>
<span class="889449931745068267" onmouseenter="enter('889449931745068267');" onmouseout="out('889449931745068267');" style=""> 751             RuntimeException e = new RuntimeException(msg);                                              </span>
<span class="746494671138810715" onmouseenter="enter('746494671138810715');" onmouseout="out('746494671138810715');" style=""> 752             if (stackTrace != null) {                                                                    </span>
<span class="6991917147302354492" onmouseenter="enter('6991917147302354492');" onmouseout="out('6991917147302354492');" style=""> 753                 e.setStackTrace(stackTrace);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 754             }                                                                                            </span>
<span class="-2532054300390783036" onmouseenter="enter('-2532054300390783036');" onmouseout="out('-2532054300390783036');" style=""> 755             throw e;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 756         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 757     }                                                                                                    </span>
<span  style=""> 758                                                                                                          </span>
<span class="8253262720993766341" onmouseenter="enter('8253262720993766341');" onmouseout="out('8253262720993766341');" style=""> 759     static void checkItemInfo(final ItemInfo item) {                                                     </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 760         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 761         final long itemId = item.id;                                                                     </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 762         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 763             public void run() {                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 764                 synchronized (sBgLock) {                                                                 </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 765                     checkItemInfoLocked(itemId, item, stackTrace);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 768         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 769         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 770     }                                                                                                    </span>
<span  style=""> 771                                                                                                          </span>
<span class="-7795546628976526290" onmouseenter="enter('-7795546628976526290');" onmouseout="out('-7795546628976526290');" style=""> 772     static void updateItemInDatabaseHelper(Context context, final ContentValues values,                  </span>
<span class="-8227938209854841132" onmouseenter="enter('-8227938209854841132');" onmouseout="out('-8227938209854841132');" style=""> 773             final ItemInfo item, final String callingFunction) {                                         </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 774         final long itemId = item.id;                                                                     </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 775         final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 776         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 777                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 778         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 779         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 780             public void run() {                                                                          </span>
<span class="6508684228899883734" onmouseenter="enter('6508684228899883734');" onmouseout="out('6508684228899883734');" style=""> 781                 cr.update(uri, values, null, null);                                                      </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 782                 updateItemArrays(item, itemId, stackTrace);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 783             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 784         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 785         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 786     }                                                                                                    </span>
<span  style=""> 787                                                                                                          </span>
<span class="-5268011833856431518" onmouseenter="enter('-5268011833856431518');" onmouseout="out('-5268011833856431518');" style=""> 788     static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList,  </span>
<span class="-6813896065968537303" onmouseenter="enter('-6813896065968537303');" onmouseout="out('-6813896065968537303');" style=""> 789             final ArrayList&lt;ItemInfo&gt; items, final String callingFunction) {                             </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 790         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 791                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 792         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 793         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 794             public void run() {                                                                          </span>
<span class="870344729843570934" onmouseenter="enter('870344729843570934');" onmouseout="out('870344729843570934');" style=""> 795                 ArrayList&lt;ContentProviderOperation&gt; ops =                                                </span>
<span class="9022468941674050374" onmouseenter="enter('9022468941674050374');" onmouseout="out('9022468941674050374');" style=""> 796                         new ArrayList&lt;ContentProviderOperation&gt;();                                       </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 797                 int count = items.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 798                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 799                     ItemInfo item = items.get(i);                                                        </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 800                     final long itemId = item.id;                                                         </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 801                     final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);             </span>
<span class="-8860263448497272048" onmouseenter="enter('-8860263448497272048');" onmouseout="out('-8860263448497272048');" style=""> 802                     ContentValues values = valuesList.get(i);                                            </span>
<span  style=""> 803                                                                                                          </span>
<span class="2997765192602662390" onmouseenter="enter('2997765192602662390');" onmouseout="out('2997765192602662390');" style=""> 804                     ops.add(ContentProviderOperation.newUpdate(uri).withValues(values).build());         </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 805                     updateItemArrays(item, itemId, stackTrace);                                          </span>
<span  style=""> 806                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807                 }                                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 808                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style=""> 809                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 810                 } catch (Exception e) {                                                                  </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 811                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 812                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 813             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 814         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 815         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816     }                                                                                                    </span>
<span  style=""> 817                                                                                                          </span>
<span class="2082626234385770383" onmouseenter="enter('2082626234385770383');" onmouseout="out('2082626234385770383');" style=""> 818     static void updateItemArrays(ItemInfo item, long itemId, StackTraceElement[] stackTrace) {           </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 819         // Lock on mBgLock *after* the db operation                                                      </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 820         synchronized (sBgLock) {                                                                         </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 821             checkItemInfoLocked(itemId, item, stackTrace);                                               </span>
<span  style=""> 822                                                                                                          </span>
<span class="5861445851049755510" onmouseenter="enter('5861445851049755510');" onmouseout="out('5861445851049755510');" style=""> 823             if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-7006113140306734361" onmouseenter="enter('-7006113140306734361');" onmouseout="out('-7006113140306734361');" style=""> 824                     item.container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                    </span>
<span class="-6294566488312473300" onmouseenter="enter('-6294566488312473300');" onmouseout="out('-6294566488312473300');" style=""> 825                 // Item is in a folder, make sure this folder exists                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 826                 if (!sBgFolders.containsKey(item.container)) {                                           </span>
<span class="9065703941205621353" onmouseenter="enter('9065703941205621353');" onmouseout="out('9065703941205621353');" style=""> 827                     // An items container is being set to a that of an item which is not in              </span>
<span class="-3172747387014066058" onmouseenter="enter('-3172747387014066058');" onmouseout="out('-3172747387014066058');" style=""> 828                     // the list of Folders.                                                              </span>
<span class="151828163632620756" onmouseenter="enter('151828163632620756');" onmouseout="out('151828163632620756');" style=""> 829                     String msg = &quot;item: &quot; + item + &quot; container being set to: &quot; +                         </span>
<span class="9080161357490611974" onmouseenter="enter('9080161357490611974');" onmouseout="out('9080161357490611974');" style=""> 830                             item.container + &quot;, not in the list of folders&quot;;                             </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 831                     Log.e(TAG, msg);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 832                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833             }                                                                                            </span>
<span  style=""> 834                                                                                                          </span>
<span class="8378072337545652807" onmouseenter="enter('8378072337545652807');" onmouseout="out('8378072337545652807');" style=""> 835             // Items are added/removed from the corresponding FolderInfo elsewhere, such                 </span>
<span class="7844728369218635164" onmouseenter="enter('7844728369218635164');" onmouseout="out('7844728369218635164');" style=""> 836             // as in Workspace.onDrop. Here, we just add/remove them from the list of items              </span>
<span class="4553148780571708557" onmouseenter="enter('4553148780571708557');" onmouseout="out('4553148780571708557');" style=""> 837             // that are on the desktop, as appropriate                                                   </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 838             ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                              </span>
<span class="-8392915416586226921" onmouseenter="enter('-8392915416586226921');" onmouseout="out('-8392915416586226921');" style=""> 839             if (modelItem != null &amp;&amp;                                                                     </span>
<span class="3168075572498915363" onmouseenter="enter('3168075572498915363');" onmouseout="out('3168075572498915363');" style=""> 840                     (modelItem.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||              </span>
<span class="-2354507674725904195" onmouseenter="enter('-2354507674725904195');" onmouseout="out('-2354507674725904195');" style=""> 841                      modelItem.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {             </span>
<span class="-8474980351342559163" onmouseenter="enter('-8474980351342559163');" onmouseout="out('-8474980351342559163');" style=""> 842                 switch (modelItem.itemType) {                                                            </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 843                     case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                               </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 844                     case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                  </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 845                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="-2945309969071223861" onmouseenter="enter('-2945309969071223861');" onmouseout="out('-2945309969071223861');" style=""> 846                         if (!sBgWorkspaceItems.contains(modelItem)) {                                    </span>
<span class="-5660475538824179031" onmouseenter="enter('-5660475538824179031');" onmouseout="out('-5660475538824179031');" style=""> 847                             sBgWorkspaceItems.add(modelItem);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 848                         }                                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 849                         break;                                                                           </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 850                     default:                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 851                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 853             } else {                                                                                     </span>
<span class="-7939766627444392355" onmouseenter="enter('-7939766627444392355');" onmouseout="out('-7939766627444392355');" style=""> 854                 sBgWorkspaceItems.remove(modelItem);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 856         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857     }                                                                                                    </span>
<span  style=""> 858                                                                                                          </span>
<span class="-4020360329970845372" onmouseenter="enter('-4020360329970845372');" onmouseout="out('-4020360329970845372');" style=""> 859     public void flushWorkerThread() {                                                                    </span>
<span class="2458440832416538563" onmouseenter="enter('2458440832416538563');" onmouseout="out('2458440832416538563');" style=""> 860         mFlushingWorkerThread = true;                                                                    </span>
<span class="2941590529192344100" onmouseenter="enter('2941590529192344100');" onmouseout="out('2941590529192344100');" style=""> 861         Runnable waiter = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 862                 public void run() {                                                                      </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 863                     synchronized (this) {                                                                </span>
<span class="-1428047894310886643" onmouseenter="enter('-1428047894310886643');" onmouseout="out('-1428047894310886643');" style=""> 864                         notifyAll();                                                                     </span>
<span class="3926508156885202999" onmouseenter="enter('3926508156885202999');" onmouseout="out('3926508156885202999');" style=""> 865                         mFlushingWorkerThread = false;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 866                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 867                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 868             };                                                                                           </span>
<span  style=""> 869                                                                                                          </span>
<span class="-7483564469787643608" onmouseenter="enter('-7483564469787643608');" onmouseout="out('-7483564469787643608');" style=""> 870         synchronized(waiter) {                                                                           </span>
<span class="-8072658497280753067" onmouseenter="enter('-8072658497280753067');" onmouseout="out('-8072658497280753067');" style=""> 871             runOnWorkerThread(waiter);                                                                   </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style=""> 872             if (mLoaderTask != null) {                                                                   </span>
<span class="-756902833484627430" onmouseenter="enter('-756902833484627430');" onmouseout="out('-756902833484627430');" style=""> 873                 synchronized(mLoaderTask) {                                                              </span>
<span class="58891182273081261" onmouseenter="enter('58891182273081261');" onmouseout="out('58891182273081261');" style=""> 874                     mLoaderTask.notify();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 875                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 876             }                                                                                            </span>
<span class="4859668596787406566" onmouseenter="enter('4859668596787406566');" onmouseout="out('4859668596787406566');" style=""> 877             boolean success = false;                                                                     </span>
<span class="7536073198725464588" onmouseenter="enter('7536073198725464588');" onmouseout="out('7536073198725464588');" style=""> 878             while (!success) {                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 879                 try {                                                                                    </span>
<span class="8661527805225995774" onmouseenter="enter('8661527805225995774');" onmouseout="out('8661527805225995774');" style=""> 880                     waiter.wait();                                                                       </span>
<span class="-5965625035307022309" onmouseenter="enter('-5965625035307022309');" onmouseout="out('-5965625035307022309');" style=""> 881                     success = true;                                                                      </span>
<span class="-7528533024404460182" onmouseenter="enter('-7528533024404460182');" onmouseout="out('-7528533024404460182');" style=""> 882                 } catch (InterruptedException e) {                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 883                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 884             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 885         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 886     }                                                                                                    </span>
<span  style=""> 887                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 888     /**                                                                                                  </span>
<span class="6993284491606696239" onmouseenter="enter('6993284491606696239');" onmouseout="out('6993284491606696239');" style=""> 889      * Move an item in the DB to a new &lt;container, screen, cellX, cellY&gt;                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 890      */                                                                                                  </span>
<span class="4065343735615789149" onmouseenter="enter('4065343735615789149');" onmouseout="out('4065343735615789149');" style=""> 891     static void moveItemInDatabase(Context context, final ItemInfo item, final long container,           </span>
<span class="-6409391853534757752" onmouseenter="enter('-6409391853534757752');" onmouseout="out('-6409391853534757752');" style=""> 892             final long screenId, final int cellX, final int cellY) {                                     </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 893         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 894         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 895         item.cellY = cellY;                                                                              </span>
<span  style=""> 896                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 897         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 898         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 899         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 900                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 901             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 902         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 903             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 904         }                                                                                                </span>
<span  style=""> 905                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 906         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 907         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 908         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 909         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 910         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style=""> 911                                                                                                          </span>
<span class="-198415815572970699" onmouseenter="enter('-198415815572970699');" onmouseout="out('-198415815572970699');" style=""> 912         updateItemInDatabaseHelper(context, values, item, &quot;moveItemInDatabase&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 913     }                                                                                                    </span>
<span  style=""> 914                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 915     /**                                                                                                  </span>
<span class="-2318253408843035081" onmouseenter="enter('-2318253408843035081');" onmouseout="out('-2318253408843035081');" style=""> 916      * Move items in the DB to a new &lt;container, screen, cellX, cellY&gt;. We assume that the               </span>
<span class="9095568381627098065" onmouseenter="enter('9095568381627098065');" onmouseout="out('9095568381627098065');" style=""> 917      * cellX, cellY have already been updated on the ItemInfos.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 918      */                                                                                                  </span>
<span class="2993462226149949147" onmouseenter="enter('2993462226149949147');" onmouseout="out('2993462226149949147');" style=""> 919     static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items,                    </span>
<span class="4351605778470855925" onmouseenter="enter('4351605778470855925');" onmouseout="out('4351605778470855925');" style=""> 920             final long container, final int screen) {                                                    </span>
<span  style=""> 921                                                                                                          </span>
<span class="3335073963685886452" onmouseenter="enter('3335073963685886452');" onmouseout="out('3335073963685886452');" style=""> 922         ArrayList&lt;ContentValues&gt; contentValues = new ArrayList&lt;ContentValues&gt;();                         </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 923         int count = items.size();                                                                        </span>
<span  style=""> 924                                                                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 925         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 926             ItemInfo item = items.get(i);                                                                </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 927             item.container = container;                                                                  </span>
<span  style=""> 928                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 929             // We store hotseat items in canonical form which is this orientation invariant position     </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 930             // in the hotseat                                                                            </span>
<span class="6331311558654873539" onmouseenter="enter('6331311558654873539');" onmouseout="out('6331311558654873539');" style=""> 931             if (context instanceof Launcher &amp;&amp; screen &lt; 0 &amp;&amp;                                             </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 932                     container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                         </span>
<span class="-3476894176903330001" onmouseenter="enter('-3476894176903330001');" onmouseout="out('-3476894176903330001');" style=""> 933                 item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(item.cellX,          </span>
<span class="8891673712343428946" onmouseenter="enter('8891673712343428946');" onmouseout="out('8891673712343428946');" style=""> 934                         item.cellY);                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 935             } else {                                                                                     </span>
<span class="-4307617232085975705" onmouseenter="enter('-4307617232085975705');" onmouseout="out('-4307617232085975705');" style=""> 936                 item.screenId = screen;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 937             }                                                                                            </span>
<span  style=""> 938                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 939             final ContentValues values = new ContentValues();                                            </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 940             values.put(LauncherSettings.Favorites.CONTAINER, item.container);                            </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 941             values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                    </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 942             values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                    </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 943             values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                </span>
<span  style=""> 944                                                                                                          </span>
<span class="2833686190506555422" onmouseenter="enter('2833686190506555422');" onmouseout="out('2833686190506555422');" style=""> 945             contentValues.add(values);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 946         }                                                                                                </span>
<span class="-3017110074752693492" onmouseenter="enter('-3017110074752693492');" onmouseout="out('-3017110074752693492');" style=""> 947         updateItemsInDatabaseHelper(context, contentValues, items, &quot;moveItemInDatabase&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 948     }                                                                                                    </span>
<span  style=""> 949                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 950     /**                                                                                                  </span>
<span class="5893714151144352360" onmouseenter="enter('5893714151144352360');" onmouseout="out('5893714151144352360');" style=""> 951      * Move and/or resize item in the DB to a new &lt;container, screen, cellX, cellY, spanX, spanY&gt;        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 952      */                                                                                                  </span>
<span class="2794810618835410616" onmouseenter="enter('2794810618835410616');" onmouseout="out('2794810618835410616');" style=""> 953     static void modifyItemInDatabase(Context context, final ItemInfo item, final long container,         </span>
<span class="5104971199972279845" onmouseenter="enter('5104971199972279845');" onmouseout="out('5104971199972279845');" style=""> 954             final long screenId, final int cellX, final int cellY, final int spanX, final int spanY) {   </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 955         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 956         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 957         item.cellY = cellY;                                                                              </span>
<span class="-7444681703441257019" onmouseenter="enter('-7444681703441257019');" onmouseout="out('-7444681703441257019');" style=""> 958         item.spanX = spanX;                                                                              </span>
<span class="1797194204222415457" onmouseenter="enter('1797194204222415457');" onmouseout="out('1797194204222415457');" style=""> 959         item.spanY = spanY;                                                                              </span>
<span  style=""> 960                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 961         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 962         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 963         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 964                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 965             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 966         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 967             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 968         }                                                                                                </span>
<span  style=""> 969                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 970         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 971         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 972         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 973         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="-1263713769577317048" onmouseenter="enter('-1263713769577317048');" onmouseout="out('-1263713769577317048');" style=""> 974         values.put(LauncherSettings.Favorites.SPANX, item.spanX);                                        </span>
<span class="847673422027095164" onmouseenter="enter('847673422027095164');" onmouseout="out('847673422027095164');" style=""> 975         values.put(LauncherSettings.Favorites.SPANY, item.spanY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 976         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style=""> 977                                                                                                          </span>
<span class="5688211233374147409" onmouseenter="enter('5688211233374147409');" onmouseout="out('5688211233374147409');" style=""> 978         updateItemInDatabaseHelper(context, values, item, &quot;modifyItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 979     }                                                                                                    </span>
<span  style=""> 980                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 981     /**                                                                                                  </span>
<span class="3263486289839218660" onmouseenter="enter('3263486289839218660');" onmouseout="out('3263486289839218660');" style=""> 982      * Update an item to the database in a specified container.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 983      */                                                                                                  </span>
<span class="459681340980680258" onmouseenter="enter('459681340980680258');" onmouseout="out('459681340980680258');" style=""> 984     static void updateItemInDatabase(Context context, final ItemInfo item) {                             </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 985         final ContentValues values = new ContentValues();                                                </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style=""> 986         item.onAddToDatabase(context, values);                                                           </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 987         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span class="-2640379359931023102" onmouseenter="enter('-2640379359931023102');" onmouseout="out('-2640379359931023102');" style=""> 988         updateItemInDatabaseHelper(context, values, item, &quot;updateItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 989     }                                                                                                    </span>
<span  style=""> 990                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 991     /**                                                                                                  </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style=""> 992      * Returns true if the shortcuts already exists in the database.                                     </span>
<span class="-3331700288971341517" onmouseenter="enter('-3331700288971341517');" onmouseout="out('-3331700288971341517');" style=""> 993      * we identify a shortcut by its title and intent.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 994      */                                                                                                  </span>
<span class="-6388905982866518653" onmouseenter="enter('-6388905982866518653');" onmouseout="out('-6388905982866518653');" style=""> 995     static boolean shortcutExists(Context context, String title, Intent intent) {                        </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 996         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-4175900686448469518" onmouseenter="enter('-4175900686448469518');" onmouseout="out('-4175900686448469518');" style=""> 997         final Intent intentWithPkg, intentWithoutPkg;                                                    </span>
<span  style=""> 998                                                                                                          </span>
<span class="-1192314096420314309" onmouseenter="enter('-1192314096420314309');" onmouseout="out('-1192314096420314309');" style=""> 999         if (intent.getComponent() != null) {                                                             </span>
<span class="5013412415263932655" onmouseenter="enter('5013412415263932655');" onmouseout="out('5013412415263932655');" style="">1000             // If component is not null, an intent with null package will produce                        </span>
<span class="-2056261929714512728" onmouseenter="enter('-2056261929714512728');" onmouseout="out('-2056261929714512728');" style="">1001             // the same result and should also be a match.                                               </span>
<span class="8293829844581049791" onmouseenter="enter('8293829844581049791');" onmouseout="out('8293829844581049791');" style="">1002             if (intent.getPackage() != null) {                                                           </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style="">1003                 intentWithPkg = intent;                                                                  </span>
<span class="302721143002808724" onmouseenter="enter('302721143002808724');" onmouseout="out('302721143002808724');" style="">1004                 intentWithoutPkg = new Intent(intent).setPackage(null);                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1005             } else {                                                                                     </span>
<span class="411509146924686636" onmouseenter="enter('411509146924686636');" onmouseout="out('411509146924686636');" style="">1006                 intentWithPkg = new Intent(intent).setPackage(                                           </span>
<span class="-8194702512537292868" onmouseenter="enter('-8194702512537292868');" onmouseout="out('-8194702512537292868');" style="">1007                         intent.getComponent().getPackageName());                                         </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style="">1008                 intentWithoutPkg = intent;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1009             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1010         } else {                                                                                         </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style="">1011             intentWithPkg = intent;                                                                      </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style="">1012             intentWithoutPkg = intent;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013         }                                                                                                </span>
<span class="2591581294492270218" onmouseenter="enter('2591581294492270218');" onmouseout="out('2591581294492270218');" style="">1014         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI,                                      </span>
<span class="-6373969991306358457" onmouseenter="enter('-6373969991306358457');" onmouseout="out('-6373969991306358457');" style="">1015             new String[] { &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and (intent=? or intent=?)&quot;,                    </span>
<span class="-338282616399686930" onmouseenter="enter('-338282616399686930');" onmouseout="out('-338282616399686930');" style="">1016             new String[] { title, intentWithPkg.toUri(0), intentWithoutPkg.toUri(0) }, null);            </span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style="">1017         boolean result = false;                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1018         try {                                                                                            </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style="">1019             result = c.moveToFirst();                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1020         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1021             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1022         }                                                                                                </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">1023         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1024     }                                                                                                    </span>
<span  style="">1025                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1026     /**                                                                                                  </span>
<span class="2522962036775885267" onmouseenter="enter('2522962036775885267');" onmouseout="out('2522962036775885267');" style="">1027      * Returns true if the promise shortcuts with the same package name exists on the workspace.         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1028      */                                                                                                  </span>
<span class="-6588164927851751704" onmouseenter="enter('-6588164927851751704');" onmouseout="out('-6588164927851751704');" style="">1029     static boolean appWasPromise(Context context, Intent intent, UserHandleCompat user) {                </span>
<span class="-3491314044087926833" onmouseenter="enter('-3491314044087926833');" onmouseout="out('-3491314044087926833');" style="">1030         final ComponentName component = intent.getComponent();                                           </span>
<span class="-8432366264448055826" onmouseenter="enter('-8432366264448055826');" onmouseout="out('-8432366264448055826');" style="">1031         if (component == null) {                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1032             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1033         }                                                                                                </span>
<span class="-5254167698548486612" onmouseenter="enter('-5254167698548486612');" onmouseout="out('-5254167698548486612');" style="">1034         return !getItemsByPackageName(component.getPackageName(), user).isEmpty();                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1035     }                                                                                                    </span>
<span  style="">1036                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1037     /**                                                                                                  </span>
<span class="9160518604603288134" onmouseenter="enter('9160518604603288134');" onmouseout="out('9160518604603288134');" style="">1038      * Returns an ItemInfo array containing all the items in the LauncherModel.                          </span>
<span class="-7541433293033039987" onmouseenter="enter('-7541433293033039987');" onmouseout="out('-7541433293033039987');" style="">1039      * The ItemInfo.id is not set through this function.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1040      */                                                                                                  </span>
<span class="2306578838706816090" onmouseenter="enter('2306578838706816090');" onmouseout="out('2306578838706816090');" style="">1041     static ArrayList&lt;ItemInfo&gt; getItemsInLocalCoordinates(Context context) {                             </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style="">1042         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1043         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="7862348045873845742" onmouseenter="enter('7862348045873845742');" onmouseout="out('7862348045873845742');" style="">1044         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[] {                       </span>
<span class="-9030044796723696333" onmouseenter="enter('-9030044796723696333');" onmouseout="out('-9030044796723696333');" style="">1045                 LauncherSettings.Favorites.ITEM_TYPE, LauncherSettings.Favorites.CONTAINER,              </span>
<span class="-5597662442381403391" onmouseenter="enter('-5597662442381403391');" onmouseout="out('-5597662442381403391');" style="">1046                 LauncherSettings.Favorites.SCREEN,                                                       </span>
<span class="-2919624041508816442" onmouseenter="enter('-2919624041508816442');" onmouseout="out('-2919624041508816442');" style="">1047                 LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY,                      </span>
<span class="-6977762317278061139" onmouseenter="enter('-6977762317278061139');" onmouseout="out('-6977762317278061139');" style="">1048                 LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY,                      </span>
<span class="-7245839497619612656" onmouseenter="enter('-7245839497619612656');" onmouseout="out('-7245839497619612656');" style="">1049                 LauncherSettings.Favorites.PROFILE_ID }, null, null, null);                              </span>
<span  style="">1050                                                                                                          </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style="">1051         final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);         </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style="">1052         final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);        </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style="">1053         final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);              </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style="">1054         final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style="">1055         final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style="">1056         final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);                </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style="">1057         final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);                </span>
<span class="-7743472832601810579" onmouseenter="enter('-7743472832601810579');" onmouseout="out('-7743472832601810579');" style="">1058         final int profileIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.PROFILE_ID);       </span>
<span class="4378196374401845990" onmouseenter="enter('4378196374401845990');" onmouseout="out('4378196374401845990');" style="">1059         UserManagerCompat userManager = UserManagerCompat.getInstance(context);                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1060         try {                                                                                            </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style="">1061             while (c.moveToNext()) {                                                                     </span>
<span class="-4116264954015845780" onmouseenter="enter('-4116264954015845780');" onmouseout="out('-4116264954015845780');" style="">1062                 ItemInfo item = new ItemInfo();                                                          </span>
<span class="3361172632220058931" onmouseenter="enter('3361172632220058931');" onmouseout="out('3361172632220058931');" style="">1063                 item.cellX = c.getInt(cellXIndex);                                                       </span>
<span class="-3320299110004327663" onmouseenter="enter('-3320299110004327663');" onmouseout="out('-3320299110004327663');" style="">1064                 item.cellY = c.getInt(cellYIndex);                                                       </span>
<span class="-3998513073647472943" onmouseenter="enter('-3998513073647472943');" onmouseout="out('-3998513073647472943');" style="">1065                 item.spanX = Math.max(1, c.getInt(spanXIndex));                                          </span>
<span class="584206030510259358" onmouseenter="enter('584206030510259358');" onmouseout="out('584206030510259358');" style="">1066                 item.spanY = Math.max(1, c.getInt(spanYIndex));                                          </span>
<span class="7755197868117966754" onmouseenter="enter('7755197868117966754');" onmouseout="out('7755197868117966754');" style="">1067                 item.container = c.getInt(containerIndex);                                               </span>
<span class="2520990540941204818" onmouseenter="enter('2520990540941204818');" onmouseout="out('2520990540941204818');" style="">1068                 item.itemType = c.getInt(itemTypeIndex);                                                 </span>
<span class="-2693827439071435274" onmouseenter="enter('-2693827439071435274');" onmouseout="out('-2693827439071435274');" style="">1069                 item.screenId = c.getInt(screenIndex);                                                   </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style="">1070                 long serialNumber = c.getInt(profileIdIndex);                                            </span>
<span class="8590899978146640866" onmouseenter="enter('8590899978146640866');" onmouseout="out('8590899978146640866');" style="">1071                 item.user = userManager.getUserForSerialNumber(serialNumber);                            </span>
<span class="-2267817568611630151" onmouseenter="enter('-2267817568611630151');" onmouseout="out('-2267817568611630151');" style="">1072                 // Skip if user has been deleted.                                                        </span>
<span class="-8057177251913525905" onmouseenter="enter('-8057177251913525905');" onmouseout="out('-8057177251913525905');" style="">1073                 if (item.user != null) {                                                                 </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="">1074                     items.add(item);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1075                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1076             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1077         } catch (Exception e) {                                                                          </span>
<span class="4333495016815960454" onmouseenter="enter('4333495016815960454');" onmouseout="out('4333495016815960454');" style="">1078             items.clear();                                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1079         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1080             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1081         }                                                                                                </span>
<span  style="">1082                                                                                                          </span>
<span class="4279419839789234429" onmouseenter="enter('4279419839789234429');" onmouseout="out('4279419839789234429');" style="">1083         return items;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084     }                                                                                                    </span>
<span  style="">1085                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1086     /**                                                                                                  </span>
<span class="-8400747742808132543" onmouseenter="enter('-8400747742808132543');" onmouseout="out('-8400747742808132543');" style="">1087      * Find a folder in the db, creating the FolderInfo if necessary, and adding it to folderList.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1088      */                                                                                                  </span>
<span class="5907754851540050864" onmouseenter="enter('5907754851540050864');" onmouseout="out('5907754851540050864');" style="">1089     FolderInfo getFolderById(Context context, HashMap&lt;Long,FolderInfo&gt; folderList, long id) {            </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1090         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-4509017961772931337" onmouseenter="enter('-4509017961772931337');" onmouseout="out('-4509017961772931337');" style="">1091         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null,                                </span>
<span class="-4259949945589236527" onmouseenter="enter('-4259949945589236527');" onmouseout="out('-4259949945589236527');" style="">1092                 &quot;_id=? and (itemType=? or itemType=?)&quot;,                                                  </span>
<span class="6839251627547830421" onmouseenter="enter('6839251627547830421');" onmouseout="out('6839251627547830421');" style="">1093                 new String[] { String.valueOf(id),                                                       </span>
<span class="-7910525153585982304" onmouseenter="enter('-7910525153585982304');" onmouseout="out('-7910525153585982304');" style="">1094                         String.valueOf(LauncherSettings.Favorites.ITEM_TYPE_FOLDER)}, null);             </span>
<span  style="">1095                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1096         try {                                                                                            </span>
<span class="-6302304746326789409" onmouseenter="enter('-6302304746326789409');" onmouseout="out('-6302304746326789409');" style="">1097             if (c.moveToFirst()) {                                                                       </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style="">1098                 final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE); </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style="">1099                 final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);        </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style="">1100                 final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);</span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style="">1101                 final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);      </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style="">1102                 final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);        </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style="">1103                 final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);        </span>
<span  style="">1104                                                                                                          </span>
<span class="7004752326616919357" onmouseenter="enter('7004752326616919357');" onmouseout="out('7004752326616919357');" style="">1105                 FolderInfo folderInfo = null;                                                            </span>
<span class="2938602155061951308" onmouseenter="enter('2938602155061951308');" onmouseout="out('2938602155061951308');" style="">1106                 switch (c.getInt(itemTypeIndex)) {                                                       </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1107                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="8497686210844969517" onmouseenter="enter('8497686210844969517');" onmouseout="out('8497686210844969517');" style="">1108                         folderInfo = findOrMakeFolder(folderList, id);                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1109                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1110                 }                                                                                        </span>
<span  style="">1111                                                                                                          </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">1112                 folderInfo.title = c.getString(titleIndex);                                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">1113                 folderInfo.id = id;                                                                      </span>
<span class="-3770649288661071555" onmouseenter="enter('-3770649288661071555');" onmouseout="out('-3770649288661071555');" style="">1114                 folderInfo.container = c.getInt(containerIndex);                                         </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">1115                 folderInfo.screenId = c.getInt(screenIndex);                                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">1116                 folderInfo.cellX = c.getInt(cellXIndex);                                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">1117                 folderInfo.cellY = c.getInt(cellYIndex);                                                 </span>
<span  style="">1118                                                                                                          </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">1119                 return folderInfo;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1120             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1121         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1122             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1123         }                                                                                                </span>
<span  style="">1124                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1125         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1126     }                                                                                                    </span>
<span  style="">1127                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1128     /**                                                                                                  </span>
<span class="-4485876183654335246" onmouseenter="enter('-4485876183654335246');" onmouseout="out('-4485876183654335246');" style="">1129      * Add an item to the database in a specified container. Sets the container, screen, cellX and       </span>
<span class="5014383815638293688" onmouseenter="enter('5014383815638293688');" onmouseout="out('5014383815638293688');" style="">1130      * cellY fields of the item. Also assigns an ID to the item.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1131      */                                                                                                  </span>
<span class="7688823130205554121" onmouseenter="enter('7688823130205554121');" onmouseout="out('7688823130205554121');" style="">1132     static void addItemToDatabase(Context context, final ItemInfo item, final long container,            </span>
<span class="-5047869274291255898" onmouseenter="enter('-5047869274291255898');" onmouseout="out('-5047869274291255898');" style="">1133             final long screenId, final int cellX, final int cellY, final boolean notify) {               </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style="">1134         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style="">1135         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style="">1136         item.cellY = cellY;                                                                              </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style="">1137         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style="">1138         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style="">1139         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style="">1140                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style="">1141             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1142         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style="">1143             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1144         }                                                                                                </span>
<span  style="">1145                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1146         final ContentValues values = new ContentValues();                                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1147         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style="">1148         item.onAddToDatabase(context, values);                                                           </span>
<span  style="">1149                                                                                                          </span>
<span class="-1899316649519192705" onmouseenter="enter('-1899316649519192705');" onmouseout="out('-1899316649519192705');" style="">1150         item.id = LauncherAppState.getLauncherProvider().generateNewItemId();                            </span>
<span class="-154850703316330893" onmouseenter="enter('-154850703316330893');" onmouseout="out('-154850703316330893');" style="">1151         values.put(LauncherSettings.Favorites._ID, item.id);                                             </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style="">1152         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span  style="">1153                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style="">1154         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1155         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1156             public void run() {                                                                          </span>
<span class="-9004016634042314269" onmouseenter="enter('-9004016634042314269');" onmouseout="out('-9004016634042314269');" style="">1157                 cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI :                              </span>
<span class="-612779074530505821" onmouseenter="enter('-612779074530505821');" onmouseout="out('-612779074530505821');" style="">1158                         LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values);                 </span>
<span  style="">1159                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1160                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1161                 synchronized (sBgLock) {                                                                 </span>
<span class="-4593486021211754382" onmouseenter="enter('-4593486021211754382');" onmouseout="out('-4593486021211754382');" style="">1162                     checkItemInfoLocked(item.id, item, stackTrace);                                      </span>
<span class="-1016681302040734126" onmouseenter="enter('-1016681302040734126');" onmouseout="out('-1016681302040734126');" style="">1163                     sBgItemsIdMap.put(item.id, item);                                                    </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1164                     switch (item.itemType) {                                                             </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1165                         case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                </span>
<span class="7914552456706159325" onmouseenter="enter('7914552456706159325');" onmouseout="out('7914552456706159325');" style="">1166                             sBgFolders.put(item.id, (FolderInfo) item);                                  </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="">1167                             // Fall through                                                              </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1168                         case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                           </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1169                         case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                              </span>
<span class="-1329080713393586591" onmouseenter="enter('-1329080713393586591');" onmouseout="out('-1329080713393586591');" style="">1170                             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||        </span>
<span class="-8703099407725800834" onmouseenter="enter('-8703099407725800834');" onmouseout="out('-8703099407725800834');" style="">1171                                     item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {    </span>
<span class="-8146326631995897363" onmouseenter="enter('-8146326631995897363');" onmouseout="out('-8146326631995897363');" style="">1172                                 sBgWorkspaceItems.add(item);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1173                             } else {                                                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style="">1174                                 if (!sBgFolders.containsKey(item.container)) {                           </span>
<span class="-54073947043614801" onmouseenter="enter('-54073947043614801');" onmouseout="out('-54073947043614801');" style="">1175                                     // Adding an item to a folder that doesn&#x27;t exist.                    </span>
<span class="-8178862485732913035" onmouseenter="enter('-8178862485732913035');" onmouseout="out('-8178862485732913035');" style="">1176                                     String msg = &quot;adding item: &quot; + item + &quot; to a folder that &quot; +         </span>
<span class="8069959129571777545" onmouseenter="enter('8069959129571777545');" onmouseout="out('8069959129571777545');" style="">1177                                             &quot; doesn&#x27;t exist&quot;;                                            </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1178                                     Log.e(TAG, msg);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1179                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180                             }                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1181                             break;                                                                       </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1182                         case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                             </span>
<span class="-7161913213134623334" onmouseenter="enter('-7161913213134623334');" onmouseout="out('-7161913213134623334');" style="">1183                             sBgAppWidgets.add((LauncherAppWidgetInfo) item);                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1184                             break;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1188         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1189         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190     }                                                                                                    </span>
<span  style="">1191                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1192     /**                                                                                                  </span>
<span class="7476806510728309142" onmouseenter="enter('7476806510728309142');" onmouseout="out('7476806510728309142');" style="">1193      * Creates a new unique child id, for a given cell span across all layouts.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1194      */                                                                                                  </span>
<span class="6041396781761029986" onmouseenter="enter('6041396781761029986');" onmouseout="out('6041396781761029986');" style="">1195     static int getCellLayoutChildId(                                                                     </span>
<span class="-7149445532835734900" onmouseenter="enter('-7149445532835734900');" onmouseout="out('-7149445532835734900');" style="">1196             long container, long screen, int localCellX, int localCellY, int spanX, int spanY) {         </span>
<span class="513362613558309253" onmouseenter="enter('513362613558309253');" onmouseout="out('513362613558309253');" style="">1197         return (((int) container &amp; 0xFF) &lt;&lt; 24)                                                          </span>
<span class="-7388843269158644047" onmouseenter="enter('-7388843269158644047');" onmouseout="out('-7388843269158644047');" style="">1198                 | ((int) screen &amp; 0xFF) &lt;&lt; 16 | (localCellX &amp; 0xFF) &lt;&lt; 8 | (localCellY &amp; 0xFF);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1199     }                                                                                                    </span>
<span  style="">1200                                                                                                          </span>
<span class="-2977858468662335030" onmouseenter="enter('-2977858468662335030');" onmouseout="out('-2977858468662335030');" style="">1201     private static ArrayList&lt;ItemInfo&gt; getItemsByPackageName(                                            </span>
<span class="-4648411385517347510" onmouseenter="enter('-4648411385517347510');" onmouseout="out('-4648411385517347510');" style="">1202             final String pn, final UserHandleCompat user) {                                              </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">1203         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1204             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">1205             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="-3698999064980760147" onmouseenter="enter('-3698999064980760147');" onmouseout="out('-3698999064980760147');" style="">1206                 return cn.getPackageName().equals(pn) &amp;&amp; info.user.equals(user);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1207             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1208         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">1209         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210     }                                                                                                    </span>
<span  style="">1211                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1212     /**                                                                                                  </span>
<span class="2342361889363691922" onmouseenter="enter('2342361889363691922');" onmouseout="out('2342361889363691922');" style="">1213      * Removes all the items from the database corresponding to the specified package.                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1214      */                                                                                                  </span>
<span class="-4223841609537991203" onmouseenter="enter('-4223841609537991203');" onmouseout="out('-4223841609537991203');" style="">1215     static void deletePackageFromDatabase(Context context, final String pn,                              </span>
<span class="-8990624712004338264" onmouseenter="enter('-8990624712004338264');" onmouseout="out('-8990624712004338264');" style="">1216             final UserHandleCompat user) {                                                               </span>
<span class="-3124051924336649718" onmouseenter="enter('-3124051924336649718');" onmouseout="out('-3124051924336649718');" style="">1217         deleteItemsFromDatabase(context, getItemsByPackageName(pn, user));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1218     }                                                                                                    </span>
<span  style="">1219                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1220     /**                                                                                                  </span>
<span class="-1037279788887787658" onmouseenter="enter('-1037279788887787658');" onmouseout="out('-1037279788887787658');" style="">1221      * Removes the specified item from the database                                                      </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1222      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1223      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1224      */                                                                                                  </span>
<span class="6689175154077652032" onmouseenter="enter('6689175154077652032');" onmouseout="out('6689175154077652032');" style="">1225     static void deleteItemFromDatabase(Context context, final ItemInfo item) {                           </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style="">1226         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="">1227         items.add(item);                                                                                 </span>
<span class="-1343420386438024026" onmouseenter="enter('-1343420386438024026');" onmouseout="out('-1343420386438024026');" style="">1228         deleteItemsFromDatabase(context, items);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229     }                                                                                                    </span>
<span  style="">1230                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1231     /**                                                                                                  </span>
<span class="6785840277050217586" onmouseenter="enter('6785840277050217586');" onmouseout="out('6785840277050217586');" style="">1232      * Removes the specified items from the database                                                     </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1233      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1234      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1235      */                                                                                                  </span>
<span class="8840034600723804424" onmouseenter="enter('8840034600723804424');" onmouseout="out('8840034600723804424');" style="">1236     static void deleteItemsFromDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items) {              </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1237         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style="">1238                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1239         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1240             public void run() {                                                                          </span>
<span class="6119320427209693879" onmouseenter="enter('6119320427209693879');" onmouseout="out('6119320427209693879');" style="">1241                 for (ItemInfo item : items) {                                                            </span>
<span class="-8969008621964178653" onmouseenter="enter('-8969008621964178653');" onmouseout="out('-8969008621964178653');" style="">1242                     final Uri uri = LauncherSettings.Favorites.getContentUri(item.id, false);            </span>
<span class="-3994993193884804986" onmouseenter="enter('-3994993193884804986');" onmouseout="out('-3994993193884804986');" style="">1243                     cr.delete(uri, null, null);                                                          </span>
<span  style="">1244                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1245                     // Lock on mBgLock *after* the db operation                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1246                     synchronized (sBgLock) {                                                             </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1247                         switch (item.itemType) {                                                         </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1248                             case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                            </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="">1249                                 sBgFolders.remove(item.id);                                              </span>
<span class="-7253547809349647013" onmouseenter="enter('-7253547809349647013');" onmouseout="out('-7253547809349647013');" style="">1250                                 for (ItemInfo info: sBgItemsIdMap.values()) {                            </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="">1251                                     if (info.container == item.id) {                                     </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="">1252                                         // We are deleting a folder which still contains items that      </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="">1253                                         // think they are contained by that folder.                      </span>
<span class="-2989844263372177086" onmouseenter="enter('-2989844263372177086');" onmouseout="out('-2989844263372177086');" style="">1254                                         String msg = &quot;deleting a folder (&quot; + item + &quot;) which still &quot; +   </span>
<span class="-6063695738801794388" onmouseenter="enter('-6063695738801794388');" onmouseout="out('-6063695738801794388');" style="">1255                                                 &quot;contains items (&quot; + info + &quot;)&quot;;                         </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1256                                         Log.e(TAG, msg);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1258                                 }                                                                        </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1259                                 sBgWorkspaceItems.remove(item);                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1260                                 break;                                                                   </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1261                             case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                       </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1262                             case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                          </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1263                                 sBgWorkspaceItems.remove(item);                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1264                                 break;                                                                   </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1265                             case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                         </span>
<span class="5035692159539723007" onmouseenter="enter('5035692159539723007');" onmouseout="out('5035692159539723007');" style="">1266                                 sBgAppWidgets.remove((LauncherAppWidgetInfo) item);                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1267                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1268                         }                                                                                </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="">1269                         sBgItemsIdMap.remove(item.id);                                                   </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="">1270                         sBgDbIconCache.remove(item);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1274         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1275         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1276     }                                                                                                    </span>
<span  style="">1277                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1278     /**                                                                                                  </span>
<span class="-7001721478473539684" onmouseenter="enter('-7001721478473539684');" onmouseout="out('-7001721478473539684');" style="">1279      * Update the order of the workspace screens in the database. The array list contains                </span>
<span class="-8575814248656839337" onmouseenter="enter('-8575814248656839337');" onmouseout="out('-8575814248656839337');" style="">1280      * a list of screen ids in the order that they should appear.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1281      */                                                                                                  </span>
<span class="8428215756529453230" onmouseenter="enter('8428215756529453230');" onmouseout="out('8428215756529453230');" style="">1282     void updateWorkspaceScreenOrder(Context context, final ArrayList&lt;Long&gt; screens) {                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1283         // Log to disk                                                                                   </span>
<span class="2597844157040813179" onmouseenter="enter('2597844157040813179');" onmouseout="out('2597844157040813179');" style="">1284         Launcher.addDumpLog(TAG, &quot;11683562 - updateWorkspaceScreenOrder()&quot;, true);                       </span>
<span class="-6712172470308057727" onmouseenter="enter('-6712172470308057727');" onmouseout="out('-6712172470308057727');" style="">1285         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, screens), true);        </span>
<span  style="">1286                                                                                                          </span>
<span class="468782492563171594" onmouseenter="enter('468782492563171594');" onmouseout="out('468782492563171594');" style="">1287         final ArrayList&lt;Long&gt; screensCopy = new ArrayList&lt;Long&gt;(screens);                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1288         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="543518355232884435" onmouseenter="enter('543518355232884435');" onmouseout="out('543518355232884435');" style="">1289         final Uri uri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                   </span>
<span  style="">1290                                                                                                          </span>
<span class="4254834681163937802" onmouseenter="enter('4254834681163937802');" onmouseout="out('4254834681163937802');" style="">1291         // Remove any negative screen ids -- these aren&#x27;t persisted                                      </span>
<span class="2152325044441302341" onmouseenter="enter('2152325044441302341');" onmouseout="out('2152325044441302341');" style="">1292         Iterator&lt;Long&gt; iter = screensCopy.iterator();                                                    </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">1293         while (iter.hasNext()) {                                                                         </span>
<span class="-927390677227055343" onmouseenter="enter('-927390677227055343');" onmouseout="out('-927390677227055343');" style="">1294             long id = iter.next();                                                                       </span>
<span class="-1178150068928662840" onmouseenter="enter('-1178150068928662840');" onmouseout="out('-1178150068928662840');" style="">1295             if (id &lt; 0) {                                                                                </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">1296                 iter.remove();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1297             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1298         }                                                                                                </span>
<span  style="">1299                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1300         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1301             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1302             public void run() {                                                                          </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style="">1303                 ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();     </span>
<span class="-6225505341206658348" onmouseenter="enter('-6225505341206658348');" onmouseout="out('-6225505341206658348');" style="">1304                 // Clear the table                                                                       </span>
<span class="-429946239562688464" onmouseenter="enter('-429946239562688464');" onmouseout="out('-429946239562688464');" style="">1305                 ops.add(ContentProviderOperation.newDelete(uri).build());                                </span>
<span class="-2619892188160552062" onmouseenter="enter('-2619892188160552062');" onmouseout="out('-2619892188160552062');" style="">1306                 int count = screensCopy.size();                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1307                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1308                     ContentValues v = new ContentValues();                                               </span>
<span class="-1711185173807510695" onmouseenter="enter('-1711185173807510695');" onmouseout="out('-1711185173807510695');" style="">1309                     long screenId = screensCopy.get(i);                                                  </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1310                     v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                              </span>
<span class="4685968830084375092" onmouseenter="enter('4685968830084375092');" onmouseout="out('4685968830084375092');" style="">1311                     v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                             </span>
<span class="2820655584610684032" onmouseenter="enter('2820655584610684032');" onmouseout="out('2820655584610684032');" style="">1312                     ops.add(ContentProviderOperation.newInsert(uri).withValues(v).build());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1313                 }                                                                                        </span>
<span  style="">1314                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1315                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style="">1316                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">1317                 } catch (Exception ex) {                                                                 </span>
<span class="-9047539165825913138" onmouseenter="enter('-9047539165825913138');" onmouseout="out('-9047539165825913138');" style="">1318                     throw new RuntimeException(ex);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1319                 }                                                                                        </span>
<span  style="">1320                                                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1321                 synchronized (sBgLock) {                                                                 </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1322                     sBgWorkspaceScreens.clear();                                                         </span>
<span class="-2640283764679238318" onmouseenter="enter('-2640283764679238318');" onmouseout="out('-2640283764679238318');" style="">1323                     sBgWorkspaceScreens.addAll(screensCopy);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1324                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1325             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1326         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1327         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328     }                                                                                                    </span>
<span  style="">1329                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1330     /**                                                                                                  </span>
<span class="-6789515923938750727" onmouseenter="enter('-6789515923938750727');" onmouseout="out('-6789515923938750727');" style="">1331      * Remove the contents of the specified folder from the database                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1332      */                                                                                                  </span>
<span class="686021856205334545" onmouseenter="enter('686021856205334545');" onmouseout="out('686021856205334545');" style="">1333     static void deleteFolderContentsFromDatabase(Context context, final FolderInfo info) {               </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1334         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style="">1335                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1336         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1337             public void run() {                                                                          </span>
<span class="-8793927488200240422" onmouseenter="enter('-8793927488200240422');" onmouseout="out('-8793927488200240422');" style="">1338                 cr.delete(LauncherSettings.Favorites.getContentUri(info.id, false), null, null);         </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1339                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1340                 synchronized (sBgLock) {                                                                 </span>
<span class="-4714602177116521128" onmouseenter="enter('-4714602177116521128');" onmouseout="out('-4714602177116521128');" style="">1341                     sBgItemsIdMap.remove(info.id);                                                       </span>
<span class="-3189879738488687685" onmouseenter="enter('-3189879738488687685');" onmouseout="out('-3189879738488687685');" style="">1342                     sBgFolders.remove(info.id);                                                          </span>
<span class="5895316081502731153" onmouseenter="enter('5895316081502731153');" onmouseout="out('5895316081502731153');" style="">1343                     sBgDbIconCache.remove(info);                                                         </span>
<span class="-6074846806723656328" onmouseenter="enter('-6074846806723656328');" onmouseout="out('-6074846806723656328');" style="">1344                     sBgWorkspaceItems.remove(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1345                 }                                                                                        </span>
<span  style="">1346                                                                                                          </span>
<span class="-1937171462652594970" onmouseenter="enter('-1937171462652594970');" onmouseout="out('-1937171462652594970');" style="">1347                 cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,                        </span>
<span class="9128354258649337519" onmouseenter="enter('9128354258649337519');" onmouseout="out('9128354258649337519');" style="">1348                         LauncherSettings.Favorites.CONTAINER + &quot;=&quot; + info.id, null);                     </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1349                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1350                 synchronized (sBgLock) {                                                                 </span>
<span class="7541292827914562010" onmouseenter="enter('7541292827914562010');" onmouseout="out('7541292827914562010');" style="">1351                     for (ItemInfo childInfo : info.contents) {                                           </span>
<span class="-2237983399964272530" onmouseenter="enter('-2237983399964272530');" onmouseout="out('-2237983399964272530');" style="">1352                         sBgItemsIdMap.remove(childInfo.id);                                              </span>
<span class="7662249246062224172" onmouseenter="enter('7662249246062224172');" onmouseout="out('7662249246062224172');" style="">1353                         sBgDbIconCache.remove(childInfo);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1354                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1355                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1356             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1357         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1358         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1359     }                                                                                                    </span>
<span  style="">1360                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1361     /**                                                                                                  </span>
<span class="8050600461131576642" onmouseenter="enter('8050600461131576642');" onmouseout="out('8050600461131576642');" style="">1362      * Set this as the current Launcher activity object for the loader.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1363      */                                                                                                  </span>
<span class="8980870975348708436" onmouseenter="enter('8980870975348708436');" onmouseout="out('8980870975348708436');" style="">1364     public void initialize(Callbacks callbacks) {                                                        </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1365         synchronized (mLock) {                                                                           </span>
<span class="-641895236165954122" onmouseenter="enter('-641895236165954122');" onmouseout="out('-641895236165954122');" style="">1366             mCallbacks = new WeakReference&lt;Callbacks&gt;(callbacks);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1368     }                                                                                                    </span>
<span  style="">1369                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1370     @Override                                                                                            </span>
<span class="-2337875492294712218" onmouseenter="enter('-2337875492294712218');" onmouseout="out('-2337875492294712218');" style="">1371     public void onPackageChanged(String packageName, UserHandleCompat user) {                            </span>
<span class="4778571821882595512" onmouseenter="enter('4778571821882595512');" onmouseout="out('4778571821882595512');" style="">1372         int op = PackageUpdatedTask.OP_UPDATE;                                                           </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="">1373         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                   </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1374                 user));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1375     }                                                                                                    </span>
<span  style="">1376                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1377     @Override                                                                                            </span>
<span class="-927554855118637848" onmouseenter="enter('-927554855118637848');" onmouseout="out('-927554855118637848');" style="">1378     public void onPackageRemoved(String packageName, UserHandleCompat user) {                            </span>
<span class="-8281859875413044704" onmouseenter="enter('-8281859875413044704');" onmouseout="out('-8281859875413044704');" style="">1379         int op = PackageUpdatedTask.OP_REMOVE;                                                           </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="">1380         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                   </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1381                 user));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382     }                                                                                                    </span>
<span  style="">1383                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1384     @Override                                                                                            </span>
<span class="105632639707841197" onmouseenter="enter('105632639707841197');" onmouseout="out('105632639707841197');" style="">1385     public void onPackageAdded(String packageName, UserHandleCompat user) {                              </span>
<span class="4828685442078193889" onmouseenter="enter('4828685442078193889');" onmouseout="out('4828685442078193889');" style="">1386         int op = PackageUpdatedTask.OP_ADD;                                                              </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="">1387         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                   </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1388                 user));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1389     }                                                                                                    </span>
<span  style="">1390                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1391     @Override                                                                                            </span>
<span class="-5272203289606218807" onmouseenter="enter('-5272203289606218807');" onmouseout="out('-5272203289606218807');" style="">1392     public void onPackagesAvailable(String[] packageNames, UserHandleCompat user,                        </span>
<span class="-6741651152973358021" onmouseenter="enter('-6741651152973358021');" onmouseout="out('-6741651152973358021');" style="">1393             boolean replacing) {                                                                         </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1394         if (!replacing) {                                                                                </span>
<span class="5127769788151278220" onmouseenter="enter('5127769788151278220');" onmouseout="out('5127769788151278220');" style="">1395             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packageNames,        </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1396                     user));                                                                              </span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="">1397             if (mAppsCanBeOnRemoveableStorage) {                                                         </span>
<span class="-2089495423111974436" onmouseenter="enter('-2089495423111974436');" onmouseout="out('-2089495423111974436');" style="">1398                 // Only rebind if we support removable storage. It catches the                           </span>
<span class="3966636659656955596" onmouseenter="enter('3966636659656955596');" onmouseout="out('3966636659656955596');" style="">1399                 // case where                                                                            </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="">1400                 // apps on the external sd card need to be reloaded                                      </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1401                 startLoaderFromBackground();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1402             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1403         } else {                                                                                         </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="">1404             // If we are replacing then just update the packages in the list                             </span>
<span class="5890557645886373945" onmouseenter="enter('5890557645886373945');" onmouseout="out('5890557645886373945');" style="">1405             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,                   </span>
<span class="-8173810846920498048" onmouseenter="enter('-8173810846920498048');" onmouseout="out('-8173810846920498048');" style="">1406                     packageNames, user));                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1407         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408     }                                                                                                    </span>
<span  style="">1409                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1410     @Override                                                                                            </span>
<span class="-3988876954819926239" onmouseenter="enter('-3988876954819926239');" onmouseout="out('-3988876954819926239');" style="">1411     public void onPackagesUnavailable(String[] packageNames, UserHandleCompat user,                      </span>
<span class="-6741651152973358021" onmouseenter="enter('-6741651152973358021');" onmouseout="out('-6741651152973358021');" style="">1412             boolean replacing) {                                                                         </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1413         if (!replacing) {                                                                                </span>
<span class="-7496430100396306440" onmouseenter="enter('-7496430100396306440');" onmouseout="out('-7496430100396306440');" style="">1414             enqueuePackageUpdated(new PackageUpdatedTask(                                                </span>
<span class="8606082806154374174" onmouseenter="enter('8606082806154374174');" onmouseout="out('8606082806154374174');" style="">1415                     PackageUpdatedTask.OP_UNAVAILABLE, packageNames,                                     </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1416                     user));                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1417         }                                                                                                </span>
<span  style="">1418                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419     }                                                                                                    </span>
<span  style="">1420                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1421     /**                                                                                                  </span>
<span class="2369304932228112448" onmouseenter="enter('2369304932228112448');" onmouseout="out('2369304932228112448');" style="">1422      * Call from the handler for ACTION_PACKAGE_ADDED, ACTION_PACKAGE_REMOVED and                        </span>
<span class="-8845819122914862467" onmouseenter="enter('-8845819122914862467');" onmouseout="out('-8845819122914862467');" style="">1423      * ACTION_PACKAGE_CHANGED.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1424      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1425     @Override                                                                                            </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">1426     public void onReceive(Context context, Intent intent) {                                              </span>
<span class="-5855592430187821970" onmouseenter="enter('-5855592430187821970');" onmouseout="out('-5855592430187821970');" style="">1427         if (DEBUG_RECEIVER) Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                    </span>
<span  style="">1428                                                                                                          </span>
<span class="-4990819661547905021" onmouseenter="enter('-4990819661547905021');" onmouseout="out('-4990819661547905021');" style="">1429         final String action = intent.getAction();                                                        </span>
<span class="2827193781436621695" onmouseenter="enter('2827193781436621695');" onmouseout="out('2827193781436621695');" style="">1430         if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                               </span>
<span class="-6283043286710203920" onmouseenter="enter('-6283043286710203920');" onmouseout="out('-6283043286710203920');" style="">1431             // If we have changed locale we need to clear out the labels in all apps/workspace.          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1432             forceReload();                                                                               </span>
<span class="4348516547288755383" onmouseenter="enter('4348516547288755383');" onmouseout="out('4348516547288755383');" style="">1433         } else if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {                                 </span>
<span class="6164116257081582847" onmouseenter="enter('6164116257081582847');" onmouseout="out('6164116257081582847');" style="">1434              // Check if configuration change was an mcc/mnc change which would affect app resources     </span>
<span class="-1334400353911346867" onmouseenter="enter('-1334400353911346867');" onmouseout="out('-1334400353911346867');" style="">1435              // and we would need to clear out the labels in all apps/workspace. Same handling as        </span>
<span class="-5650891854452971889" onmouseenter="enter('-5650891854452971889');" onmouseout="out('-5650891854452971889');" style="">1436              // above for ACTION_LOCALE_CHANGED                                                          </span>
<span class="5411318685984925146" onmouseenter="enter('5411318685984925146');" onmouseout="out('5411318685984925146');" style="">1437              Configuration currentConfig = context.getResources().getConfiguration();                    </span>
<span class="-5822569774152959183" onmouseenter="enter('-5822569774152959183');" onmouseout="out('-5822569774152959183');" style="">1438              if (mPreviousConfigMcc != currentConfig.mcc) {                                              </span>
<span class="84255665079130844" onmouseenter="enter('84255665079130844');" onmouseout="out('84255665079130844');" style="">1439                    Log.d(TAG, &quot;Reload apps on config change. curr_mcc:&quot;                                  </span>
<span class="-5209278319615985301" onmouseenter="enter('-5209278319615985301');" onmouseout="out('-5209278319615985301');" style="">1440                        + currentConfig.mcc + &quot; prevmcc:&quot; + mPreviousConfigMcc);                          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1441                    forceReload();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1442              }                                                                                           </span>
<span class="-3935663267934034322" onmouseenter="enter('-3935663267934034322');" onmouseout="out('-3935663267934034322');" style="">1443              // Update previousConfig                                                                    </span>
<span class="3962364908604221868" onmouseenter="enter('3962364908604221868');" onmouseout="out('3962364908604221868');" style="">1444              mPreviousConfigMcc = currentConfig.mcc;                                                     </span>
<span class="-625815149698974703" onmouseenter="enter('-625815149698974703');" onmouseout="out('-625815149698974703');" style="">1445         } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) ||                 </span>
<span class="-3901926890039161494" onmouseenter="enter('-3901926890039161494');" onmouseout="out('-3901926890039161494');" style="">1446                    SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {                     </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1447             if (mCallbacks != null) {                                                                    </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1448                 Callbacks callbacks = mCallbacks.get();                                                  </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1449                 if (callbacks != null) {                                                                 </span>
<span class="-1936765454200843013" onmouseenter="enter('-1936765454200843013');" onmouseout="out('-1936765454200843013');" style="">1450                     callbacks.bindSearchablesChanged();                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1451                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1452             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1453         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1454     }                                                                                                    </span>
<span  style="">1455                                                                                                          </span>
<span class="-17594942140375151" onmouseenter="enter('-17594942140375151');" onmouseout="out('-17594942140375151');" style="">1456     void forceReload() {                                                                                 </span>
<span class="778547048286075437" onmouseenter="enter('778547048286075437');" onmouseout="out('778547048286075437');" style="">1457         resetLoadedState(true, true);                                                                    </span>
<span  style="">1458                                                                                                          </span>
<span class="4237924176832789189" onmouseenter="enter('4237924176832789189');" onmouseout="out('4237924176832789189');" style="">1459         // Do this here because if the launcher activity is running it will be restarted.                </span>
<span class="-3504249388484505584" onmouseenter="enter('-3504249388484505584');" onmouseout="out('-3504249388484505584');" style="">1460         // If it&#x27;s not running startLoaderFromBackground will merely tell it that it needs               </span>
<span class="5637742608155670431" onmouseenter="enter('5637742608155670431');" onmouseout="out('5637742608155670431');" style="">1461         // to reload.                                                                                    </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1462         startLoaderFromBackground();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1463     }                                                                                                    </span>
<span  style="">1464                                                                                                          </span>
<span class="-4293128577464776735" onmouseenter="enter('-4293128577464776735');" onmouseout="out('-4293128577464776735');" style="">1465     public void resetLoadedState(boolean resetAllAppsLoaded, boolean resetWorkspaceLoaded) {             </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1466         synchronized (mLock) {                                                                           </span>
<span class="-2609781935860166694" onmouseenter="enter('-2609781935860166694');" onmouseout="out('-2609781935860166694');" style="">1467             // Stop any existing loaders first, so they don&#x27;t set mAllAppsLoaded or                      </span>
<span class="1916843454374538934" onmouseenter="enter('1916843454374538934');" onmouseout="out('1916843454374538934');" style="">1468             // mWorkspaceLoaded to true later                                                            </span>
<span class="-1528282254597569426" onmouseenter="enter('-1528282254597569426');" onmouseout="out('-1528282254597569426');" style="">1469             stopLoaderLocked();                                                                          </span>
<span class="-4094161784675318974" onmouseenter="enter('-4094161784675318974');" onmouseout="out('-4094161784675318974');" style="">1470             if (resetAllAppsLoaded) mAllAppsLoaded = false;                                              </span>
<span class="-3582216479388479825" onmouseenter="enter('-3582216479388479825');" onmouseout="out('-3582216479388479825');" style="">1471             if (resetWorkspaceLoaded) mWorkspaceLoaded = false;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1473     }                                                                                                    </span>
<span  style="">1474                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1475     /**                                                                                                  </span>
<span class="-2117548427273174966" onmouseenter="enter('-2117548427273174966');" onmouseout="out('-2117548427273174966');" style="">1476      * When the launcher is in the background, it&#x27;s possible for it to miss paired                       </span>
<span class="9045642034745197537" onmouseenter="enter('9045642034745197537');" onmouseout="out('9045642034745197537');" style="">1477      * configuration changes.  So whenever we trigger the loader from the background                     </span>
<span class="3717077838570548717" onmouseenter="enter('3717077838570548717');" onmouseout="out('3717077838570548717');" style="">1478      * tell the launcher that it needs to re-run the loader when it comes back instead                   </span>
<span class="8619803709595782118" onmouseenter="enter('8619803709595782118');" onmouseout="out('8619803709595782118');" style="">1479      * of doing it now.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1480      */                                                                                                  </span>
<span class="2053805597450117019" onmouseenter="enter('2053805597450117019');" onmouseout="out('2053805597450117019');" style="">1481     public void startLoaderFromBackground() {                                                            </span>
<span class="-3760886775206602162" onmouseenter="enter('-3760886775206602162');" onmouseout="out('-3760886775206602162');" style="">1482         boolean runLoader = false;                                                                       </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1483         if (mCallbacks != null) {                                                                        </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1484             Callbacks callbacks = mCallbacks.get();                                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1485             if (callbacks != null) {                                                                     </span>
<span class="-8461765931128288918" onmouseenter="enter('-8461765931128288918');" onmouseout="out('-8461765931128288918');" style="">1486                 // Only actually run the loader if they&#x27;re not paused.                                   </span>
<span class="-462943306960371545" onmouseenter="enter('-462943306960371545');" onmouseout="out('-462943306960371545');" style="">1487                 if (!callbacks.setLoadOnResume()) {                                                      </span>
<span class="-8889848208331327581" onmouseenter="enter('-8889848208331327581');" onmouseout="out('-8889848208331327581');" style="">1488                     runLoader = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1489                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1490             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1491         }                                                                                                </span>
<span class="-2622291522100283788" onmouseenter="enter('-2622291522100283788');" onmouseout="out('-2622291522100283788');" style="">1492         if (runLoader) {                                                                                 </span>
<span class="-8998147482804817647" onmouseenter="enter('-8998147482804817647');" onmouseout="out('-8998147482804817647');" style="">1493             startLoader(false, PagedView.INVALID_RESTORE_PAGE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1494         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1495     }                                                                                                    </span>
<span  style="">1496                                                                                                          </span>
<span class="5010903034251856801" onmouseenter="enter('5010903034251856801');" onmouseout="out('5010903034251856801');" style="">1497     // If there is already a loader task running, tell it to stop.                                       </span>
<span class="796557558969242789" onmouseenter="enter('796557558969242789');" onmouseout="out('796557558969242789');" style="">1498     // returns true if isLaunching() was true on the old task                                            </span>
<span class="-4581932122990216089" onmouseenter="enter('-4581932122990216089');" onmouseout="out('-4581932122990216089');" style="">1499     private boolean stopLoaderLocked() {                                                                 </span>
<span class="-998934784399408070" onmouseenter="enter('-998934784399408070');" onmouseout="out('-998934784399408070');" style="">1500         boolean isLaunching = false;                                                                     </span>
<span class="-7986438653599299764" onmouseenter="enter('-7986438653599299764');" onmouseout="out('-7986438653599299764');" style="">1501         LoaderTask oldTask = mLoaderTask;                                                                </span>
<span class="-2859449282457612659" onmouseenter="enter('-2859449282457612659');" onmouseout="out('-2859449282457612659');" style="">1502         if (oldTask != null) {                                                                           </span>
<span class="5507271139955657849" onmouseenter="enter('5507271139955657849');" onmouseout="out('5507271139955657849');" style="">1503             if (oldTask.isLaunching()) {                                                                 </span>
<span class="-2542349725897719409" onmouseenter="enter('-2542349725897719409');" onmouseout="out('-2542349725897719409');" style="">1504                 isLaunching = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505             }                                                                                            </span>
<span class="-1151918806087352732" onmouseenter="enter('-1151918806087352732');" onmouseout="out('-1151918806087352732');" style="">1506             oldTask.stopLocked();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1507         }                                                                                                </span>
<span class="353443281501806148" onmouseenter="enter('353443281501806148');" onmouseout="out('353443281501806148');" style="">1508         return isLaunching;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1509     }                                                                                                    </span>
<span  style="">1510                                                                                                          </span>
<span class="-650602055294598310" onmouseenter="enter('-650602055294598310');" onmouseout="out('-650602055294598310');" style="">1511     public boolean isCurrentCallbacks(Callbacks callbacks) {                                             </span>
<span class="-2678194210930296625" onmouseenter="enter('-2678194210930296625');" onmouseout="out('-2678194210930296625');" style="">1512         return (mCallbacks != null &amp;&amp; mCallbacks.get() == callbacks);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1513     }                                                                                                    </span>
<span  style="">1514                                                                                                          </span>
<span class="3837278165301095000" onmouseenter="enter('3837278165301095000');" onmouseout="out('3837278165301095000');" style="">1515     public void startLoader(boolean isLaunching, int synchronousBindPage) {                              </span>
<span class="-5265370469502082000" onmouseenter="enter('-5265370469502082000');" onmouseout="out('-5265370469502082000');" style="">1516         startLoader(isLaunching, synchronousBindPage, LOADER_FLAG_NONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1517     }                                                                                                    </span>
<span  style="">1518                                                                                                          </span>
<span class="4886983231320039031" onmouseenter="enter('4886983231320039031');" onmouseout="out('4886983231320039031');" style="">1519     public void startLoader(boolean isLaunching, int synchronousBindPage, int loadFlags) {               </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1520         synchronized (mLock) {                                                                           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1521             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-3508213546782417324" onmouseenter="enter('-3508213546782417324');" onmouseout="out('-3508213546782417324');" style="">1522                 Log.d(TAG, &quot;startLoader isLaunching=&quot; + isLaunching);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1523             }                                                                                            </span>
<span  style="">1524                                                                                                          </span>
<span class="6333826815871699731" onmouseenter="enter('6333826815871699731');" onmouseout="out('6333826815871699731');" style="">1525             // Clear any deferred bind-runnables from the synchronized load process                      </span>
<span class="-7033809362198181476" onmouseenter="enter('-7033809362198181476');" onmouseout="out('-7033809362198181476');" style="">1526             // We must do this before any loading/binding is scheduled below.                            </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">1527             synchronized (mDeferredBindRunnables) {                                                      </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1528                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1529             }                                                                                            </span>
<span  style="">1530                                                                                                          </span>
<span class="-2785438828901225561" onmouseenter="enter('-2785438828901225561');" onmouseout="out('-2785438828901225561');" style="">1531             // Don&#x27;t bother to start the thread if we know it&#x27;s not going to do anything                 </span>
<span class="-784058118581736702" onmouseenter="enter('-784058118581736702');" onmouseout="out('-784058118581736702');" style="">1532             if (mCallbacks != null &amp;&amp; mCallbacks.get() != null) {                                        </span>
<span class="-5820527225743363271" onmouseenter="enter('-5820527225743363271');" onmouseout="out('-5820527225743363271');" style="">1533                 // If there is already one running, tell it to stop.                                     </span>
<span class="3990358955275755027" onmouseenter="enter('3990358955275755027');" onmouseout="out('3990358955275755027');" style="">1534                 // also, don&#x27;t downgrade isLaunching if we&#x27;re already running                            </span>
<span class="-6024742637751579231" onmouseenter="enter('-6024742637751579231');" onmouseout="out('-6024742637751579231');" style="">1535                 isLaunching = isLaunching || stopLoaderLocked();                                         </span>
<span class="7022676154060365524" onmouseenter="enter('7022676154060365524');" onmouseout="out('7022676154060365524');" style="">1536                 mLoaderTask = new LoaderTask(mApp.getContext(), isLaunching, loadFlags);                 </span>
<span class="1771251463067889729" onmouseenter="enter('1771251463067889729');" onmouseout="out('1771251463067889729');" style="">1537                 if (synchronousBindPage != PagedView.INVALID_RESTORE_PAGE                                </span>
<span class="7049103546590409467" onmouseenter="enter('7049103546590409467');" onmouseout="out('7049103546590409467');" style="">1538                         &amp;&amp; mAllAppsLoaded &amp;&amp; mWorkspaceLoaded) {                                         </span>
<span class="-8342371766149337044" onmouseenter="enter('-8342371766149337044');" onmouseout="out('-8342371766149337044');" style="">1539                     mLoaderTask.runBindSynchronousPage(synchronousBindPage);                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1540                 } else {                                                                                 </span>
<span class="-600387258114093875" onmouseenter="enter('-600387258114093875');" onmouseout="out('-600387258114093875');" style="">1541                     sWorkerThread.setPriority(Thread.NORM_PRIORITY);                                     </span>
<span class="7243935410050079045" onmouseenter="enter('7243935410050079045');" onmouseout="out('7243935410050079045');" style="">1542                     sWorker.post(mLoaderTask);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1543                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1544             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1545         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546     }                                                                                                    </span>
<span  style="">1547                                                                                                          </span>
<span class="8791491145548048370" onmouseenter="enter('8791491145548048370');" onmouseout="out('8791491145548048370');" style="">1548     void bindRemainingSynchronousPages() {                                                               </span>
<span class="5033608739884582118" onmouseenter="enter('5033608739884582118');" onmouseout="out('5033608739884582118');" style="">1549         // Post the remaining side pages to be loaded                                                    </span>
<span class="-5332743236356375648" onmouseenter="enter('-5332743236356375648');" onmouseout="out('-5332743236356375648');" style="">1550         if (!mDeferredBindRunnables.isEmpty()) {                                                         </span>
<span class="3864855355327062414" onmouseenter="enter('3864855355327062414');" onmouseout="out('3864855355327062414');" style="">1551             Runnable[] deferredBindRunnables = null;                                                     </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">1552             synchronized (mDeferredBindRunnables) {                                                      </span>
<span class="-7323371485266753329" onmouseenter="enter('-7323371485266753329');" onmouseout="out('-7323371485266753329');" style="">1553                 deferredBindRunnables = mDeferredBindRunnables.toArray(                                  </span>
<span class="-5228620787203084012" onmouseenter="enter('-5228620787203084012');" onmouseout="out('-5228620787203084012');" style="">1554                         new Runnable[mDeferredBindRunnables.size()]);                                    </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1555                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1556             }                                                                                            </span>
<span class="-4818994596267375040" onmouseenter="enter('-4818994596267375040');" onmouseout="out('-4818994596267375040');" style="">1557             for (final Runnable r : deferredBindRunnables) {                                             </span>
<span class="352794200584805787" onmouseenter="enter('352794200584805787');" onmouseout="out('352794200584805787');" style="">1558                 mHandler.post(r, MAIN_THREAD_BINDING_RUNNABLE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1559             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1560         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1561     }                                                                                                    </span>
<span  style="">1562                                                                                                          </span>
<span class="2340632222115195329" onmouseenter="enter('2340632222115195329');" onmouseout="out('2340632222115195329');" style="">1563     public void stopLoader() {                                                                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1564         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1565             if (mLoaderTask != null) {                                                                   </span>
<span class="-3264656657741930991" onmouseenter="enter('-3264656657741930991');" onmouseout="out('-3264656657741930991');" style="">1566                 mLoaderTask.stopLocked();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1567             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1568         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1569     }                                                                                                    </span>
<span  style="">1570                                                                                                          </span>
<span class="-7250027300190670202" onmouseenter="enter('-7250027300190670202');" onmouseout="out('-7250027300190670202');" style="">1571     /** Loads the workspace screens db into a map of Rank -&gt; ScreenId */                                 </span>
<span class="122992606215727554" onmouseenter="enter('122992606215727554');" onmouseout="out('122992606215727554');" style="">1572     private static TreeMap&lt;Integer, Long&gt; loadWorkspaceScreensDb(Context context) {                      </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1573         final ContentResolver contentResolver = context.getContentResolver();                            </span>
<span class="-2220596623746218138" onmouseenter="enter('-2220596623746218138');" onmouseout="out('-2220596623746218138');" style="">1574         final Uri screensUri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                            </span>
<span class="6273592658286011909" onmouseenter="enter('6273592658286011909');" onmouseout="out('6273592658286011909');" style="">1575         final Cursor sc = contentResolver.query(screensUri, null, null, null, null);                     </span>
<span class="-750342796873513708" onmouseenter="enter('-750342796873513708');" onmouseout="out('-750342796873513708');" style="">1576         TreeMap&lt;Integer, Long&gt; orderedScreens = new TreeMap&lt;Integer, Long&gt;();                            </span>
<span  style="">1577                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1578         try {                                                                                            </span>
<span class="-8175558610564469753" onmouseenter="enter('-8175558610564469753');" onmouseout="out('-8175558610564469753');" style="">1579             final int idIndex = sc.getColumnIndexOrThrow(                                                </span>
<span class="-8946142257769661598" onmouseenter="enter('-8946142257769661598');" onmouseout="out('-8946142257769661598');" style="">1580                     LauncherSettings.WorkspaceScreens._ID);                                              </span>
<span class="-8868089630781298600" onmouseenter="enter('-8868089630781298600');" onmouseout="out('-8868089630781298600');" style="">1581             final int rankIndex = sc.getColumnIndexOrThrow(                                              </span>
<span class="5916017515631826997" onmouseenter="enter('5916017515631826997');" onmouseout="out('5916017515631826997');" style="">1582                     LauncherSettings.WorkspaceScreens.SCREEN_RANK);                                      </span>
<span class="204728523712198078" onmouseenter="enter('204728523712198078');" onmouseout="out('204728523712198078');" style="">1583             while (sc.moveToNext()) {                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1584                 try {                                                                                    </span>
<span class="-3927530459574574291" onmouseenter="enter('-3927530459574574291');" onmouseout="out('-3927530459574574291');" style="">1585                     long screenId = sc.getLong(idIndex);                                                 </span>
<span class="4944528408544996755" onmouseenter="enter('4944528408544996755');" onmouseout="out('4944528408544996755');" style="">1586                     int rank = sc.getInt(rankIndex);                                                     </span>
<span class="3308047316092947062" onmouseenter="enter('3308047316092947062');" onmouseout="out('3308047316092947062');" style="">1587                     orderedScreens.put(rank, screenId);                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1588                 } catch (Exception e) {                                                                  </span>
<span class="-7912680121623740950" onmouseenter="enter('-7912680121623740950');" onmouseout="out('-7912680121623740950');" style=""><abbr title="1589                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e, true);">1589                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e,</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1590                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1591             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1592         } finally {                                                                                      </span>
<span class="8048076729460304726" onmouseenter="enter('8048076729460304726');" onmouseout="out('8048076729460304726');" style="">1593             sc.close();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1594         }                                                                                                </span>
<span  style="">1595                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1596         // Log to disk                                                                                   </span>
<span class="395286336309272035" onmouseenter="enter('395286336309272035');" onmouseout="out('395286336309272035');" style="">1597         Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspaceScreensDb()&quot;, true);                           </span>
<span class="218635510720911915" onmouseenter="enter('218635510720911915');" onmouseout="out('218635510720911915');" style="">1598         ArrayList&lt;String&gt; orderedScreensPairs= new ArrayList&lt;String&gt;();                                  </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">1599         for (Integer i : orderedScreens.keySet()) {                                                      </span>
<span class="7491860136402808405" onmouseenter="enter('7491860136402808405');" onmouseout="out('7491860136402808405');" style="">1600             orderedScreensPairs.add(&quot;{ &quot; + i + &quot;: &quot; + orderedScreens.get(i) + &quot; }&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1601         }                                                                                                </span>
<span class="-1337084683171534745" onmouseenter="enter('-1337084683171534745');" onmouseout="out('-1337084683171534745');" style="">1602         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; +                                              </span>
<span class="-2164573057986762020" onmouseenter="enter('-2164573057986762020');" onmouseout="out('-2164573057986762020');" style="">1603                 TextUtils.join(&quot;, &quot;, orderedScreensPairs), true);                                        </span>
<span class="1470292219769535286" onmouseenter="enter('1470292219769535286');" onmouseout="out('1470292219769535286');" style="">1604         return orderedScreens;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1605     }                                                                                                    </span>
<span  style="">1606                                                                                                          </span>
<span class="3555732154070898598" onmouseenter="enter('3555732154070898598');" onmouseout="out('3555732154070898598');" style="">1607     public boolean isAllAppsLoaded() {                                                                   </span>
<span class="-4479372220598901856" onmouseenter="enter('-4479372220598901856');" onmouseout="out('-4479372220598901856');" style="">1608         return mAllAppsLoaded;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1609     }                                                                                                    </span>
<span  style="">1610                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1611     boolean isLoadingWorkspace() {                                                                       </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1612         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1613             if (mLoaderTask != null) {                                                                   </span>
<span class="-8784543184221518678" onmouseenter="enter('-8784543184221518678');" onmouseout="out('-8784543184221518678');" style="">1614                 return mLoaderTask.isLoadingWorkspace();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1615             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1616         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1617         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1618     }                                                                                                    </span>
<span  style="">1619                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1620     /**                                                                                                  </span>
<span class="2155822975232422030" onmouseenter="enter('2155822975232422030');" onmouseout="out('2155822975232422030');" style="">1621      * Runnable for the thread that loads the contents of the launcher:                                  </span>
<span class="2245504796345070456" onmouseenter="enter('2245504796345070456');" onmouseout="out('2245504796345070456');" style="">1622      *   - workspace icons                                                                               </span>
<span class="3748531824399873232" onmouseenter="enter('3748531824399873232');" onmouseout="out('3748531824399873232');" style="">1623      *   - widgets                                                                                       </span>
<span class="-1174287823865228312" onmouseenter="enter('-1174287823865228312');" onmouseout="out('-1174287823865228312');" style="">1624      *   - all apps icons                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1625      */                                                                                                  </span>
<span class="5152324394883908677" onmouseenter="enter('5152324394883908677');" onmouseout="out('5152324394883908677');" style="">1626     private class LoaderTask implements Runnable {                                                       </span>
<span class="6683852815807951473" onmouseenter="enter('6683852815807951473');" onmouseout="out('6683852815807951473');" style="">1627         private Context mContext;                                                                        </span>
<span class="-8892613002903674576" onmouseenter="enter('-8892613002903674576');" onmouseout="out('-8892613002903674576');" style="">1628         private boolean mIsLaunching;                                                                    </span>
<span class="-8472062509666230595" onmouseenter="enter('-8472062509666230595');" onmouseout="out('-8472062509666230595');" style="">1629         private boolean mIsLoadingAndBindingWorkspace;                                                   </span>
<span class="840925515877441947" onmouseenter="enter('840925515877441947');" onmouseout="out('840925515877441947');" style="">1630         private boolean mStopped;                                                                        </span>
<span class="-1108993435799622018" onmouseenter="enter('-1108993435799622018');" onmouseout="out('-1108993435799622018');" style="">1631         private boolean mLoadAndBindStepFinished;                                                        </span>
<span class="2080823019438326837" onmouseenter="enter('2080823019438326837');" onmouseout="out('2080823019438326837');" style="">1632         private int mFlags;                                                                              </span>
<span  style="">1633                                                                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">1634         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span  style="">1635                                                                                                          </span>
<span class="-3637406926963361525" onmouseenter="enter('-3637406926963361525');" onmouseout="out('-3637406926963361525');" style="">1636         LoaderTask(Context context, boolean isLaunching, int flags) {                                    </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style="">1637             mContext = context;                                                                          </span>
<span class="7512260519858493354" onmouseenter="enter('7512260519858493354');" onmouseout="out('7512260519858493354');" style="">1638             mIsLaunching = isLaunching;                                                                  </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">1639             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="6183718553459964087" onmouseenter="enter('6183718553459964087');" onmouseout="out('6183718553459964087');" style="">1640             mFlags = flags;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1641         }                                                                                                </span>
<span  style="">1642                                                                                                          </span>
<span class="-3427713478562425776" onmouseenter="enter('-3427713478562425776');" onmouseout="out('-3427713478562425776');" style="">1643         boolean isLaunching() {                                                                          </span>
<span class="-4684239236966951132" onmouseenter="enter('-4684239236966951132');" onmouseout="out('-4684239236966951132');" style="">1644             return mIsLaunching;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1645         }                                                                                                </span>
<span  style="">1646                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1647         boolean isLoadingWorkspace() {                                                                   </span>
<span class="-1565626489511429864" onmouseenter="enter('-1565626489511429864');" onmouseout="out('-1565626489511429864');" style="">1648             return mIsLoadingAndBindingWorkspace;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1649         }                                                                                                </span>
<span  style="">1650                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1651         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-4912644643880785787" onmouseenter="enter('-4912644643880785787');" onmouseout="out('-4912644643880785787');" style="">1652         private boolean loadAndBindWorkspace() {                                                         </span>
<span class="3221067006114111971" onmouseenter="enter('3221067006114111971');" onmouseout="out('3221067006114111971');" style="">1653             mIsLoadingAndBindingWorkspace = true;                                                        </span>
<span  style="">1654                                                                                                          </span>
<span class="1537270917172214589" onmouseenter="enter('1537270917172214589');" onmouseout="out('1537270917172214589');" style="">1655             // Load the workspace                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1656             if (DEBUG_LOADERS) {                                                                         </span>
<span class="8901273111544619292" onmouseenter="enter('8901273111544619292');" onmouseout="out('8901273111544619292');" style="">1657                 Log.d(TAG, &quot;loadAndBindWorkspace mWorkspaceLoaded=&quot; + mWorkspaceLoaded);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1658             }                                                                                            </span>
<span  style="">1659                                                                                                          </span>
<span class="-7050118912026035967" onmouseenter="enter('-7050118912026035967');" onmouseout="out('-7050118912026035967');" style="">1660             boolean isUpgradePath = false;                                                               </span>
<span class="-6627511839388696673" onmouseenter="enter('-6627511839388696673');" onmouseout="out('-6627511839388696673');" style="">1661             if (!mWorkspaceLoaded) {                                                                     </span>
<span class="-5751837054227838000" onmouseenter="enter('-5751837054227838000');" onmouseout="out('-5751837054227838000');" style="">1662                 isUpgradePath = loadWorkspace();                                                         </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1663                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1664                     if (mStopped) {                                                                      </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1665                         return isUpgradePath;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1666                     }                                                                                    </span>
<span class="3247008524984054391" onmouseenter="enter('3247008524984054391');" onmouseout="out('3247008524984054391');" style="">1667                     mWorkspaceLoaded = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1668                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1669             }                                                                                            </span>
<span  style="">1670                                                                                                          </span>
<span class="8161409494754485761" onmouseenter="enter('8161409494754485761');" onmouseout="out('8161409494754485761');" style="">1671             // Bind the workspace                                                                        </span>
<span class="7984749853310309686" onmouseenter="enter('7984749853310309686');" onmouseout="out('7984749853310309686');" style="">1672             bindWorkspace(-1, isUpgradePath);                                                            </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1673             return isUpgradePath;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1674         }                                                                                                </span>
<span  style="">1675                                                                                                          </span>
<span class="-1989226029052835978" onmouseenter="enter('-1989226029052835978');" onmouseout="out('-1989226029052835978');" style="">1676         private void waitForIdle() {                                                                     </span>
<span class="755597645611528735" onmouseenter="enter('755597645611528735');" onmouseout="out('755597645611528735');" style="">1677             // Wait until the either we&#x27;re stopped or the other threads are done.                        </span>
<span class="-8727414813590658044" onmouseenter="enter('-8727414813590658044');" onmouseout="out('-8727414813590658044');" style="">1678             // This way we don&#x27;t start loading all apps until the workspace has settled                  </span>
<span class="519327046885180501" onmouseenter="enter('519327046885180501');" onmouseout="out('519327046885180501');" style="">1679             // down.                                                                                     </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1680             synchronized (LoaderTask.this) {                                                             </span>
<span class="-83798755248439808" onmouseenter="enter('-83798755248439808');" onmouseout="out('-83798755248439808');" style="">1681                 final long workspaceWaitTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;           </span>
<span  style="">1682                                                                                                          </span>
<span class="-8997106023930440912" onmouseenter="enter('-8997106023930440912');" onmouseout="out('-8997106023930440912');" style="">1683                 mHandler.postIdle(new Runnable() {                                                       </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1684                         public void run() {                                                              </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1685                             synchronized (LoaderTask.this) {                                             </span>
<span class="-4593766760064909367" onmouseenter="enter('-4593766760064909367');" onmouseout="out('-4593766760064909367');" style="">1686                                 mLoadAndBindStepFinished = true;                                         </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1687                                 if (DEBUG_LOADERS) {                                                     </span>
<span class="-7140275656523627984" onmouseenter="enter('-7140275656523627984');" onmouseout="out('-7140275656523627984');" style="">1688                                     Log.d(TAG, &quot;done with previous binding step&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1689                                 }                                                                        </span>
<span class="8111819661104992685" onmouseenter="enter('8111819661104992685');" onmouseout="out('8111819661104992685');" style="">1690                                 LoaderTask.this.notify();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1691                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1692                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1693                     });                                                                                  </span>
<span  style="">1694                                                                                                          </span>
<span class="7673579852599691461" onmouseenter="enter('7673579852599691461');" onmouseout="out('7673579852599691461');" style="">1695                 while (!mStopped &amp;&amp; !mLoadAndBindStepFinished &amp;&amp; !mFlushingWorkerThread) {               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1696                     try {                                                                                </span>
<span class="-1997675543177729859" onmouseenter="enter('-1997675543177729859');" onmouseout="out('-1997675543177729859');" style="">1697                         // Just in case mFlushingWorkerThread changes but we aren&#x27;t woken up,            </span>
<span class="4998753984474875942" onmouseenter="enter('4998753984474875942');" onmouseout="out('4998753984474875942');" style="">1698                         // wait no longer than 1sec at a time                                            </span>
<span class="1515790047903299628" onmouseenter="enter('1515790047903299628');" onmouseout="out('1515790047903299628');" style="">1699                         this.wait(1000);                                                                 </span>
<span class="3493957724480568133" onmouseenter="enter('3493957724480568133');" onmouseout="out('3493957724480568133');" style="">1700                     } catch (InterruptedException ex) {                                                  </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1701                         // Ignore                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1702                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1703                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1704                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-72139740866353106" onmouseenter="enter('-72139740866353106');" onmouseout="out('-72139740866353106');" style="">1705                     Log.d(TAG, &quot;waited &quot;                                                                 </span>
<span class="3094974955332165680" onmouseenter="enter('3094974955332165680');" onmouseout="out('3094974955332165680');" style="">1706                             + (SystemClock.uptimeMillis()-workspaceWaitTime)                             </span>
<span class="4719480645001782920" onmouseenter="enter('4719480645001782920');" onmouseout="out('4719480645001782920');" style="">1707                             + &quot;ms for previous step to finish binding&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1708                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1709             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1710         }                                                                                                </span>
<span  style="">1711                                                                                                          </span>
<span class="6003497491863497289" onmouseenter="enter('6003497491863497289');" onmouseout="out('6003497491863497289');" style="">1712         void runBindSynchronousPage(int synchronousBindPage) {                                           </span>
<span class="26631348189854486" onmouseenter="enter('26631348189854486');" onmouseout="out('26631348189854486');" style="">1713             if (synchronousBindPage == PagedView.INVALID_RESTORE_PAGE) {                                 </span>
<span class="-8503902330989669437" onmouseenter="enter('-8503902330989669437');" onmouseout="out('-8503902330989669437');" style="">1714                 // Ensure that we have a valid page index to load synchronously                          </span>
<span class="4351877111278684588" onmouseenter="enter('4351877111278684588');" onmouseout="out('4351877111278684588');" style="">1715                 throw new RuntimeException(&quot;Should not call runBindSynchronousPage() without &quot; +         </span>
<span class="-7231071987017264740" onmouseenter="enter('-7231071987017264740');" onmouseout="out('-7231071987017264740');" style="">1716                         &quot;valid page index&quot;);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1717             }                                                                                            </span>
<span class="-1078848978706070277" onmouseenter="enter('-1078848978706070277');" onmouseout="out('-1078848978706070277');" style="">1718             if (!mAllAppsLoaded || !mWorkspaceLoaded) {                                                  </span>
<span class="2879437365312389694" onmouseenter="enter('2879437365312389694');" onmouseout="out('2879437365312389694');" style="">1719                 // Ensure that we don&#x27;t try and bind a specified page when the pages have not been       </span>
<span class="169159946226030638" onmouseenter="enter('169159946226030638');" onmouseout="out('169159946226030638');" style="">1720                 // loaded already (we should load everything asynchronously in that case)                </span>
<span class="2803547673173241327" onmouseenter="enter('2803547673173241327');" onmouseout="out('2803547673173241327');" style="">1721                 throw new RuntimeException(&quot;Expecting AllApps and Workspace to be loaded&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1722             }                                                                                            </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1723             synchronized (mLock) {                                                                       </span>
<span class="6834879657722268045" onmouseenter="enter('6834879657722268045');" onmouseout="out('6834879657722268045');" style="">1724                 if (mIsLoaderTaskRunning) {                                                              </span>
<span class="3479473486057258175" onmouseenter="enter('3479473486057258175');" onmouseout="out('3479473486057258175');" style="">1725                     // Ensure that we are never running the background loading at this point since       </span>
<span class="5690931735845958615" onmouseenter="enter('5690931735845958615');" onmouseout="out('5690931735845958615');" style="">1726                     // we also touch the background collections                                          </span>
<span class="-8789687649412956769" onmouseenter="enter('-8789687649412956769');" onmouseout="out('-8789687649412956769');" style="">1727                     throw new RuntimeException(&quot;Error! Background loading is already running&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1728                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1729             }                                                                                            </span>
<span  style="">1730                                                                                                          </span>
<span class="4081886748823582405" onmouseenter="enter('4081886748823582405');" onmouseout="out('4081886748823582405');" style="">1731             // XXX: Throw an exception if we are already loading (since we touch the worker thread       </span>
<span class="-98490365064007765" onmouseenter="enter('-98490365064007765');" onmouseout="out('-98490365064007765');" style="">1732             //      data structures, we can&#x27;t allow any other thread to touch that data, but because     </span>
<span class="4680477662519922026" onmouseenter="enter('4680477662519922026');" onmouseout="out('4680477662519922026');" style="">1733             //      this call is synchronous, we can get away with not locking).                         </span>
<span  style="">1734                                                                                                          </span>
<span class="-6012373927983533730" onmouseenter="enter('-6012373927983533730');" onmouseout="out('-6012373927983533730');" style="">1735             // The LauncherModel is static in the LauncherAppState and mHandler may have queued          </span>
<span class="7586418927072898518" onmouseenter="enter('7586418927072898518');" onmouseout="out('7586418927072898518');" style="">1736             // operations from the previous activity.  We need to ensure that all queued operations      </span>
<span class="-70743228311848279" onmouseenter="enter('-70743228311848279');" onmouseout="out('-70743228311848279');" style="">1737             // are executed before any synchronous binding work is done.                                 </span>
<span class="-4498008587479034521" onmouseenter="enter('-4498008587479034521');" onmouseout="out('-4498008587479034521');" style="">1738             mHandler.flush();                                                                            </span>
<span  style="">1739                                                                                                          </span>
<span class="-3771221013488357479" onmouseenter="enter('-3771221013488357479');" onmouseout="out('-3771221013488357479');" style="">1740             // Divide the set of loaded items into those that we are binding synchronously, and          </span>
<span class="5224432435633178726" onmouseenter="enter('5224432435633178726');" onmouseout="out('5224432435633178726');" style="">1741             // everything else that is to be bound normally (asynchronously).                            </span>
<span class="-6685180061336045314" onmouseenter="enter('-6685180061336045314');" onmouseout="out('-6685180061336045314');" style="">1742             bindWorkspace(synchronousBindPage, false);                                                   </span>
<span class="6689685850222943783" onmouseenter="enter('6689685850222943783');" onmouseout="out('6689685850222943783');" style="">1743             // XXX: For now, continue posting the binding of AllApps as there are other issues that      </span>
<span class="-1574502332056641514" onmouseenter="enter('-1574502332056641514');" onmouseout="out('-1574502332056641514');" style="">1744             //      arise from that.                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">1745             onlyBindAllApps();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1746         }                                                                                                </span>
<span  style="">1747                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1748         public void run() {                                                                              </span>
<span class="5752535899438246447" onmouseenter="enter('5752535899438246447');" onmouseout="out('5752535899438246447');" style="">1749             boolean isUpgrade = false;                                                                   </span>
<span  style="">1750                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1751             synchronized (mLock) {                                                                       </span>
<span class="4738665752688002399" onmouseenter="enter('4738665752688002399');" onmouseout="out('4738665752688002399');" style="">1752                 mIsLoaderTaskRunning = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1753             }                                                                                            </span>
<span class="-1737494436521525410" onmouseenter="enter('-1737494436521525410');" onmouseout="out('-1737494436521525410');" style="">1754             // Optimize for end-user experience: if the Launcher is up and // running with the           </span>
<span class="892988660615454533" onmouseenter="enter('892988660615454533');" onmouseout="out('892988660615454533');" style="">1755             // All Apps interface in the foreground, load All Apps first. Otherwise, load the            </span>
<span class="-1944482210197593446" onmouseenter="enter('-1944482210197593446');" onmouseout="out('-1944482210197593446');" style="">1756             // workspace first (default).                                                                </span>
<span class="-8128861992085659189" onmouseenter="enter('-8128861992085659189');" onmouseout="out('-8128861992085659189');" style="">1757             keep_running: {                                                                              </span>
<span class="2293067736949718284" onmouseenter="enter('2293067736949718284');" onmouseout="out('2293067736949718284');" style="">1758                 // Elevate priority when Home launches for the first time to avoid                       </span>
<span class="-1381926741216219064" onmouseenter="enter('-1381926741216219064');" onmouseout="out('-1381926741216219064');" style="">1759                 // starving at boot time. Staring at a blank home is not cool.                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1760                 synchronized (mLock) {                                                                   </span>
<span class="8946499537685848583" onmouseenter="enter('8946499537685848583');" onmouseout="out('8946499537685848583');" style="">1761                     if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to &quot; +                        </span>
<span class="1787109731546912352" onmouseenter="enter('1787109731546912352');" onmouseout="out('1787109731546912352');" style="">1762                             (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUND&quot;));                                  </span>
<span class="-1912109441925598991" onmouseenter="enter('-1912109441925598991');" onmouseout="out('-1912109441925598991');" style="">1763                     android.os.Process.setThreadPriority(mIsLaunching                                    </span>
<span class="-5572949467661441178" onmouseenter="enter('-5572949467661441178');" onmouseout="out('-5572949467661441178');" style="">1764                             ? Process.THREAD_PRIORITY_DEFAULT : Process.THREAD_PRIORITY_BACKGROUND);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1765                 }                                                                                        </span>
<span class="9220749004793568337" onmouseenter="enter('9220749004793568337');" onmouseout="out('9220749004793568337');" style="">1766                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 1: loading workspace&quot;);                              </span>
<span class="8482653655407072483" onmouseenter="enter('8482653655407072483');" onmouseout="out('8482653655407072483');" style="">1767                 isUpgrade = loadAndBindWorkspace();                                                      </span>
<span  style="">1768                                                                                                          </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1769                 if (mStopped) {                                                                          </span>
<span class="-6818805659412975442" onmouseenter="enter('-6818805659412975442');" onmouseout="out('-6818805659412975442');" style="">1770                     break keep_running;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1771                 }                                                                                        </span>
<span  style="">1772                                                                                                          </span>
<span class="-5777092162251517407" onmouseenter="enter('-5777092162251517407');" onmouseout="out('-5777092162251517407');" style="">1773                 // Whew! Hard work done.  Slow us down, and wait until the UI thread has                 </span>
<span class="-4075896614387769686" onmouseenter="enter('-4075896614387769686');" onmouseout="out('-4075896614387769686');" style="">1774                 // settled down.                                                                         </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1775                 synchronized (mLock) {                                                                   </span>
<span class="1926990202484285414" onmouseenter="enter('1926990202484285414');" onmouseout="out('1926990202484285414');" style="">1776                     if (mIsLaunching) {                                                                  </span>
<span class="-8046035155088057723" onmouseenter="enter('-8046035155088057723');" onmouseout="out('-8046035155088057723');" style="">1777                         if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to BACKGROUND&quot;);          </span>
<span class="6194754511830950532" onmouseenter="enter('6194754511830950532');" onmouseout="out('6194754511830950532');" style="">1778                         android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1779                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1780                 }                                                                                        </span>
<span class="2443484392604792624" onmouseenter="enter('2443484392604792624');" onmouseout="out('2443484392604792624');" style="">1781                 waitForIdle();                                                                           </span>
<span  style="">1782                                                                                                          </span>
<span class="1529750222663563109" onmouseenter="enter('1529750222663563109');" onmouseout="out('1529750222663563109');" style="">1783                 // second step                                                                           </span>
<span class="4805812105190008803" onmouseenter="enter('4805812105190008803');" onmouseout="out('4805812105190008803');" style="">1784                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 2: loading all apps&quot;);                               </span>
<span class="3758302759319518479" onmouseenter="enter('3758302759319518479');" onmouseout="out('3758302759319518479');" style="">1785                 loadAndBindAllApps();                                                                    </span>
<span  style="">1786                                                                                                          </span>
<span class="4031538869478111" onmouseenter="enter('4031538869478111');" onmouseout="out('4031538869478111');" style="">1787                 // Restore the default thread priority after we are done loading items                   </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1788                 synchronized (mLock) {                                                                   </span>
<span class="6299511964324687923" onmouseenter="enter('6299511964324687923');" onmouseout="out('6299511964324687923');" style="">1789                     android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_DEFAULT);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1790                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1791             }                                                                                            </span>
<span  style="">1792                                                                                                          </span>
<span class="3508545587953199453" onmouseenter="enter('3508545587953199453');" onmouseout="out('3508545587953199453');" style="">1793             // Update the saved icons if necessary                                                       </span>
<span class="-4757805943857079956" onmouseenter="enter('-4757805943857079956');" onmouseout="out('-4757805943857079956');" style="">1794             if (DEBUG_LOADERS) Log.d(TAG, &quot;Comparing loaded icons to database icons&quot;);                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1795             synchronized (sBgLock) {                                                                     </span>
<span class="5900553346724410681" onmouseenter="enter('5900553346724410681');" onmouseout="out('5900553346724410681');" style="">1796                 for (Object key : sBgDbIconCache.keySet()) {                                             </span>
<span class="404633043401473554" onmouseenter="enter('404633043401473554');" onmouseout="out('404633043401473554');" style="">1797                     updateSavedIcon(mContext, (ShortcutInfo) key, sBgDbIconCache.get(key));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1798                 }                                                                                        </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1799                 sBgDbIconCache.clear();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1800             }                                                                                            </span>
<span  style="">1801                                                                                                          </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">1802             if (LauncherAppState.isDisableAllApps()) {                                                   </span>
<span class="6125270178763735331" onmouseenter="enter('6125270178763735331');" onmouseout="out('6125270178763735331');" style="">1803                 // Ensure that all the applications that are in the system are                           </span>
<span class="305725628855266005" onmouseenter="enter('305725628855266005');" onmouseout="out('305725628855266005');" style="">1804                 // represented on the home screen.                                                       </span>
<span class="3562864863119627268" onmouseenter="enter('3562864863119627268');" onmouseout="out('3562864863119627268');" style="">1805                 if (!UPGRADE_USE_MORE_APPS_FOLDER || !isUpgrade) {                                       </span>
<span class="5095093339904195112" onmouseenter="enter('5095093339904195112');" onmouseout="out('5095093339904195112');" style="">1806                     verifyApplications();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1807                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1808             }                                                                                            </span>
<span  style="">1809                                                                                                          </span>
<span class="-745190257815883733" onmouseenter="enter('-745190257815883733');" onmouseout="out('-745190257815883733');" style="">1810             // Clear out this reference, otherwise we end up holding it until all of the                 </span>
<span class="4646172956484107396" onmouseenter="enter('4646172956484107396');" onmouseout="out('4646172956484107396');" style="">1811             // callback runnables are done.                                                              </span>
<span class="-5116782011037529434" onmouseenter="enter('-5116782011037529434');" onmouseout="out('-5116782011037529434');" style="">1812             mContext = null;                                                                             </span>
<span  style="">1813                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1814             synchronized (mLock) {                                                                       </span>
<span class="-2953553521466488464" onmouseenter="enter('-2953553521466488464');" onmouseout="out('-2953553521466488464');" style="">1815                 // If we are still the last one to be scheduled, remove ourselves.                       </span>
<span class="-1560897046285527036" onmouseenter="enter('-1560897046285527036');" onmouseout="out('-1560897046285527036');" style="">1816                 if (mLoaderTask == this) {                                                               </span>
<span class="-8540970856372433004" onmouseenter="enter('-8540970856372433004');" onmouseout="out('-8540970856372433004');" style="">1817                     mLoaderTask = null;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1818                 }                                                                                        </span>
<span class="8472658350888958885" onmouseenter="enter('8472658350888958885');" onmouseout="out('8472658350888958885');" style="">1819                 mIsLoaderTaskRunning = false;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1820             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1821         }                                                                                                </span>
<span  style="">1822                                                                                                          </span>
<span class="200135487053889456" onmouseenter="enter('200135487053889456');" onmouseout="out('200135487053889456');" style="">1823         public void stopLocked() {                                                                       </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1824             synchronized (LoaderTask.this) {                                                             </span>
<span class="8214677179915027824" onmouseenter="enter('8214677179915027824');" onmouseout="out('8214677179915027824');" style="">1825                 mStopped = true;                                                                         </span>
<span class="3056713147428312392" onmouseenter="enter('3056713147428312392');" onmouseout="out('3056713147428312392');" style="">1826                 this.notify();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1827             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1828         }                                                                                                </span>
<span  style="">1829                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1830         /**                                                                                              </span>
<span class="8543020973836575883" onmouseenter="enter('8543020973836575883');" onmouseout="out('8543020973836575883');" style="">1831          * Gets the callbacks object.  If we&#x27;ve been stopped, or if the launcher object                  </span>
<span class="-5710779889390340322" onmouseenter="enter('-5710779889390340322');" onmouseout="out('-5710779889390340322');" style="">1832          * has somehow been garbage collected, return null instead.  Pass in the Callbacks               </span>
<span class="1695163395735776366" onmouseenter="enter('1695163395735776366');" onmouseout="out('1695163395735776366');" style="">1833          * object that was around when the deferred message was scheduled, and if there&#x27;s                </span>
<span class="7856411153887025232" onmouseenter="enter('7856411153887025232');" onmouseout="out('7856411153887025232');" style="">1834          * a new Callbacks object around then also return null.  This will save us from                  </span>
<span class="2242983124447893975" onmouseenter="enter('2242983124447893975');" onmouseout="out('2242983124447893975');" style="">1835          * calling onto it with data that will be ignored.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1836          */                                                                                              </span>
<span class="-2719659093140206912" onmouseenter="enter('-2719659093140206912');" onmouseout="out('-2719659093140206912');" style="">1837         Callbacks tryGetCallbacks(Callbacks oldCallbacks) {                                              </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1838             synchronized (mLock) {                                                                       </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1839                 if (mStopped) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1840                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1841                 }                                                                                        </span>
<span  style="">1842                                                                                                          </span>
<span class="-1148437149844317216" onmouseenter="enter('-1148437149844317216');" onmouseout="out('-1148437149844317216');" style="">1843                 if (mCallbacks == null) {                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1844                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1845                 }                                                                                        </span>
<span  style="">1846                                                                                                          </span>
<span class="4487336468213395696" onmouseenter="enter('4487336468213395696');" onmouseout="out('4487336468213395696');" style="">1847                 final Callbacks callbacks = mCallbacks.get();                                            </span>
<span class="-1088473782403214817" onmouseenter="enter('-1088473782403214817');" onmouseout="out('-1088473782403214817');" style="">1848                 if (callbacks != oldCallbacks) {                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1849                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1850                 }                                                                                        </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">1851                 if (callbacks == null) {                                                                 </span>
<span class="-94531209925935523" onmouseenter="enter('-94531209925935523');" onmouseout="out('-94531209925935523');" style="">1852                     Log.w(TAG, &quot;no mCallbacks&quot;);                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1853                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1854                 }                                                                                        </span>
<span  style="">1855                                                                                                          </span>
<span class="7316466478630645098" onmouseenter="enter('7316466478630645098');" onmouseout="out('7316466478630645098');" style="">1856                 return callbacks;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1857             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1858         }                                                                                                </span>
<span  style="">1859                                                                                                          </span>
<span class="-732845747997402687" onmouseenter="enter('-732845747997402687');" onmouseout="out('-732845747997402687');" style="">1860         private void verifyApplications() {                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">1861             final Context context = mApp.getContext();                                                   </span>
<span  style="">1862                                                                                                          </span>
<span class="-895975897487385508" onmouseenter="enter('-895975897487385508');" onmouseout="out('-895975897487385508');" style="">1863             // Cross reference all the applications in our apps list with items in the workspace         </span>
<span class="-10165714367555844" onmouseenter="enter('-10165714367555844');" onmouseout="out('-10165714367555844');" style="">1864             ArrayList&lt;ItemInfo&gt; tmpInfos;                                                                </span>
<span class="-1498611641211142735" onmouseenter="enter('-1498611641211142735');" onmouseout="out('-1498611641211142735');" style="">1865             ArrayList&lt;ItemInfo&gt; added = new ArrayList&lt;ItemInfo&gt;();                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1866             synchronized (sBgLock) {                                                                     </span>
<span class="-8503045385813305184" onmouseenter="enter('-8503045385813305184');" onmouseout="out('-8503045385813305184');" style="">1867                 for (AppInfo app : mBgAllAppsList.data) {                                                </span>
<span class="3468492706943039059" onmouseenter="enter('3468492706943039059');" onmouseout="out('3468492706943039059');" style="">1868                     tmpInfos = getItemInfoForComponentName(app.componentName, app.user);                 </span>
<span class="2520781471180992241" onmouseenter="enter('2520781471180992241');" onmouseout="out('2520781471180992241');" style="">1869                     if (tmpInfos.isEmpty()) {                                                            </span>
<span class="-8553694446545507920" onmouseenter="enter('-8553694446545507920');" onmouseout="out('-8553694446545507920');" style="">1870                         // We are missing an application icon, so add this to the workspace              </span>
<span class="-4039639638749761552" onmouseenter="enter('-4039639638749761552');" onmouseout="out('-4039639638749761552');" style="">1871                         added.add(app);                                                                  </span>
<span class="-6087209586339664607" onmouseenter="enter('-6087209586339664607');" onmouseout="out('-6087209586339664607');" style="">1872                         // This is a rare event, so lets log it                                          </span>
<span class="-8409193735080295855" onmouseenter="enter('-8409193735080295855');" onmouseout="out('-8409193735080295855');" style="">1873                         Log.e(TAG, &quot;Missing Application on load: &quot; + app);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1874                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1875                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1876             }                                                                                            </span>
<span class="-3228275885243238792" onmouseenter="enter('-3228275885243238792');" onmouseout="out('-3228275885243238792');" style="">1877             if (!added.isEmpty()) {                                                                      </span>
<span class="-2532202186705808951" onmouseenter="enter('-2532202186705808951');" onmouseout="out('-2532202186705808951');" style="">1878                 addAndBindAddedWorkspaceApps(context, added);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1879             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1880         }                                                                                                </span>
<span  style="">1881                                                                                                          </span>
<span class="1799876722918383990" onmouseenter="enter('1799876722918383990');" onmouseout="out('1799876722918383990');" style="">1882         // check &amp; update map of what&#x27;s occupied; used to discard overlapping/invalid items              </span>
<span class="1369641317894879083" onmouseenter="enter('1369641317894879083');" onmouseout="out('1369641317894879083');" style="">1883         private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item,          </span>
<span class="-1114457745240921120" onmouseenter="enter('-1114457745240921120');" onmouseout="out('-1114457745240921120');" style="">1884                                            AtomicBoolean deleteOnInvalidPlacement) {                     </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1885             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1886             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="2610967815704817337" onmouseenter="enter('2610967815704817337');" onmouseout="out('2610967815704817337');" style="">1887             final int countX = (int) grid.numColumns;                                                    </span>
<span class="-4666114634626787340" onmouseenter="enter('-4666114634626787340');" onmouseout="out('-4666114634626787340');" style="">1888             final int countY = (int) grid.numRows;                                                       </span>
<span  style="">1889                                                                                                          </span>
<span class="6034161250987228772" onmouseenter="enter('6034161250987228772');" onmouseout="out('6034161250987228772');" style="">1890             long containerIndex = item.screenId;                                                         </span>
<span class="-7373493273183889597" onmouseenter="enter('-7373493273183889597');" onmouseout="out('-7373493273183889597');" style="">1891             if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                        </span>
<span class="2673995963777381740" onmouseenter="enter('2673995963777381740');" onmouseout="out('2673995963777381740');" style="">1892                 // Return early if we detect that an item is under the hotseat button                    </span>
<span class="8439501161968406722" onmouseenter="enter('8439501161968406722');" onmouseout="out('8439501161968406722');" style="">1893                 if (mCallbacks == null ||                                                                </span>
<span class="2765367117287235525" onmouseenter="enter('2765367117287235525');" onmouseout="out('2765367117287235525');" style="">1894                         mCallbacks.get().isAllAppsButtonRank((int) item.screenId)) {                     </span>
<span class="-5585792196891628830" onmouseenter="enter('-5585792196891628830');" onmouseout="out('-5585792196891628830');" style="">1895                     deleteOnInvalidPlacement.set(true);                                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1896                     Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                             </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1897                             + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                </span>
<span class="-6945266911057923165" onmouseenter="enter('-6945266911057923165');" onmouseout="out('-6945266911057923165');" style="">1898                             + item.cellY + &quot;) occupied by all apps&quot;);                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1899                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1900                 }                                                                                        </span>
<span  style="">1901                                                                                                          </span>
<span class="1283283798458548935" onmouseenter="enter('1283283798458548935');" onmouseout="out('1283283798458548935');" style="">1902                 final ItemInfo[][] hotseatItems =                                                        </span>
<span class="1949963606333422560" onmouseenter="enter('1949963606333422560');" onmouseout="out('1949963606333422560');" style="">1903                         occupied.get((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT);               </span>
<span  style="">1904                                                                                                          </span>
<span class="4306415300339150674" onmouseenter="enter('4306415300339150674');" onmouseout="out('4306415300339150674');" style="">1905                 if (item.screenId &gt;= grid.numHotseatIcons) {                                             </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1906                     Log.e(TAG, &quot;Error loading shortcut &quot; + item                                          </span>
<span class="5751503886607422325" onmouseenter="enter('5751503886607422325');" onmouseout="out('5751503886607422325');" style="">1907                             + &quot; into hotseat position &quot; + item.screenId                                  </span>
<span class="8586084608145250937" onmouseenter="enter('8586084608145250937');" onmouseout="out('8586084608145250937');" style="">1908                             + &quot;, position out of bounds: (0 to &quot; + (grid.numHotseatIcons - 1)            </span>
<span class="4670108460576455524" onmouseenter="enter('4670108460576455524');" onmouseout="out('4670108460576455524');" style="">1909                             + &quot;)&quot;);                                                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1910                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1911                 }                                                                                        </span>
<span  style="">1912                                                                                                          </span>
<span class="-96711597696201103" onmouseenter="enter('-96711597696201103');" onmouseout="out('-96711597696201103');" style="">1913                 if (hotseatItems != null) {                                                              </span>
<span class="-5719492878362044891" onmouseenter="enter('-5719492878362044891');" onmouseout="out('-5719492878362044891');" style="">1914                     if (hotseatItems[(int) item.screenId][0] != null) {                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1915                         Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                         </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1916                                 + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;            </span>
<span class="-5608765342526697238" onmouseenter="enter('-5608765342526697238');" onmouseout="out('-5608765342526697238');" style="">1917                                 + item.cellY + &quot;) occupied by &quot;                                          </span>
<span class="-9216450188742256868" onmouseenter="enter('-9216450188742256868');" onmouseout="out('-9216450188742256868');" style="">1918                                 + occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)             </span>
<span class="8078550196904492215" onmouseenter="enter('8078550196904492215');" onmouseout="out('8078550196904492215');" style="">1919                                 [(int) item.screenId][0]);                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1920                             return false;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1921                     } else {                                                                             </span>
<span class="774944626646586019" onmouseenter="enter('774944626646586019');" onmouseout="out('774944626646586019');" style="">1922                         hotseatItems[(int) item.screenId][0] = item;                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1923                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1924                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1925                 } else {                                                                                 </span>
<span class="7358314474516221203" onmouseenter="enter('7358314474516221203');" onmouseout="out('7358314474516221203');" style="">1926                     final ItemInfo[][] items = new ItemInfo[(int) grid.numHotseatIcons][1];              </span>
<span class="-9070162012537345427" onmouseenter="enter('-9070162012537345427');" onmouseout="out('-9070162012537345427');" style="">1927                     items[(int) item.screenId][0] = item;                                                </span>
<span class="-8158366679753027651" onmouseenter="enter('-8158366679753027651');" onmouseout="out('-8158366679753027651');" style="">1928                     occupied.put((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT, items);            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1929                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1930                 }                                                                                        </span>
<span class="-303831338253138618" onmouseenter="enter('-303831338253138618');" onmouseout="out('-303831338253138618');" style="">1931             } else if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                 </span>
<span class="2023083187637338837" onmouseenter="enter('2023083187637338837');" onmouseout="out('2023083187637338837');" style="">1932                 // Skip further checking if it is not the hotseat or workspace container                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1933                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1934             }                                                                                            </span>
<span  style="">1935                                                                                                          </span>
<span class="4900594953050523912" onmouseenter="enter('4900594953050523912');" onmouseout="out('4900594953050523912');" style="">1936             if (!occupied.containsKey(item.screenId)) {                                                  </span>
<span class="4145930087010840378" onmouseenter="enter('4145930087010840378');" onmouseout="out('4145930087010840378');" style="">1937                 ItemInfo[][] items = new ItemInfo[countX + 1][countY + 1];                               </span>
<span class="1227421706021504577" onmouseenter="enter('1227421706021504577');" onmouseout="out('1227421706021504577');" style="">1938                 occupied.put(item.screenId, items);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1939             }                                                                                            </span>
<span  style="">1940                                                                                                          </span>
<span class="1896300602190974138" onmouseenter="enter('1896300602190974138');" onmouseout="out('1896300602190974138');" style="">1941             final ItemInfo[][] screens = occupied.get(item.screenId);                                    </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">1942             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-5368423457014206987" onmouseenter="enter('-5368423457014206987');" onmouseout="out('-5368423457014206987');" style="">1943                     item.cellX &lt; 0 || item.cellY &lt; 0 ||                                                  </span>
<span class="-4742334469567284144" onmouseenter="enter('-4742334469567284144');" onmouseout="out('-4742334469567284144');" style="">1944                     item.cellX + item.spanX &gt; countX || item.cellY + item.spanY &gt; countY) {              </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1945                 Log.e(TAG, &quot;Error loading shortcut &quot; + item                                              </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1946                         + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                    </span>
<span class="6594976635866090975" onmouseenter="enter('6594976635866090975');" onmouseout="out('6594976635866090975');" style="">1947                         + item.cellX + &quot;,&quot; + item.cellY                                                  </span>
<span class="7810872796641797088" onmouseenter="enter('7810872796641797088');" onmouseout="out('7810872796641797088');" style="">1948                         + &quot;) out of screen bounds ( &quot; + countX + &quot;x&quot; + countY + &quot;)&quot;);                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1949                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1950             }                                                                                            </span>
<span  style="">1951                                                                                                          </span>
<span class="-5156128896960485993" onmouseenter="enter('-5156128896960485993');" onmouseout="out('-5156128896960485993');" style="">1952             // Check if any workspace icons overlap with each other                                      </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1953             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1954                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="-6569355555223387047" onmouseenter="enter('-6569355555223387047');" onmouseout="out('-6569355555223387047');" style="">1955                     if (screens[x][y] != null) {                                                         </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1956                         Log.e(TAG, &quot;Error loading shortcut &quot; + item                                      </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1957                             + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                </span>
<span class="6817243246217428495" onmouseenter="enter('6817243246217428495');" onmouseout="out('6817243246217428495');" style="">1958                             + x + &quot;,&quot; + y                                                                </span>
<span class="5682441617128381013" onmouseenter="enter('5682441617128381013');" onmouseout="out('5682441617128381013');" style="">1959                             + &quot;) occupied by &quot;                                                           </span>
<span class="-1033476021967432581" onmouseenter="enter('-1033476021967432581');" onmouseout="out('-1033476021967432581');" style="">1960                             + screens[x][y]);                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1961                         return false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1962                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1963                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1964             }                                                                                            </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1965             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1966                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="4088526838574697064" onmouseenter="enter('4088526838574697064');" onmouseout="out('4088526838574697064');" style="">1967                     screens[x][y] = item;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1968                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1969             }                                                                                            </span>
<span  style="">1970                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1971             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1972         }                                                                                                </span>
<span  style="">1973                                                                                                          </span>
<span class="-7185136003210132674" onmouseenter="enter('-7185136003210132674');" onmouseout="out('-7185136003210132674');" style="">1974         /** Clears all the sBg data structures */                                                        </span>
<span class="1801132344752176061" onmouseenter="enter('1801132344752176061');" onmouseout="out('1801132344752176061');" style="">1975         private void clearSBgDataStructures() {                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1976             synchronized (sBgLock) {                                                                     </span>
<span class="-7129433888089157992" onmouseenter="enter('-7129433888089157992');" onmouseout="out('-7129433888089157992');" style="">1977                 sBgWorkspaceItems.clear();                                                               </span>
<span class="5052861278193385910" onmouseenter="enter('5052861278193385910');" onmouseout="out('5052861278193385910');" style="">1978                 sBgAppWidgets.clear();                                                                   </span>
<span class="3133219754838100126" onmouseenter="enter('3133219754838100126');" onmouseout="out('3133219754838100126');" style="">1979                 sBgFolders.clear();                                                                      </span>
<span class="-8505695193908377238" onmouseenter="enter('-8505695193908377238');" onmouseout="out('-8505695193908377238');" style="">1980                 sBgItemsIdMap.clear();                                                                   </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1981                 sBgDbIconCache.clear();                                                                  </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1982                 sBgWorkspaceScreens.clear();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1983             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1984         }                                                                                                </span>
<span  style="">1985                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1986         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-134197683999376379" onmouseenter="enter('-134197683999376379');" onmouseout="out('-134197683999376379');" style="">1987         private boolean loadWorkspace() {                                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1988             // Log to disk                                                                               </span>
<span class="-1716174542198683127" onmouseenter="enter('-1716174542198683127');" onmouseout="out('-1716174542198683127');" style="">1989             Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspace()&quot;, true);                                </span>
<span  style="">1990                                                                                                          </span>
<span class="-1293377954506719064" onmouseenter="enter('-1293377954506719064');" onmouseout="out('-1293377954506719064');" style="">1991             final long t = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                               </span>
<span  style="">1992                                                                                                          </span>
<span class="-7540672363138308565" onmouseenter="enter('-7540672363138308565');" onmouseout="out('-7540672363138308565');" style="">1993             final Context context = mContext;                                                            </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1994             final ContentResolver contentResolver = context.getContentResolver();                        </span>
<span class="-2531056455834918617" onmouseenter="enter('-2531056455834918617');" onmouseout="out('-2531056455834918617');" style="">1995             final PackageManager manager = context.getPackageManager();                                  </span>
<span class="9164904653123292763" onmouseenter="enter('9164904653123292763');" onmouseout="out('9164904653123292763');" style="">1996             final AppWidgetManager widgets = AppWidgetManager.getInstance(context);                      </span>
<span class="-100432956626051671" onmouseenter="enter('-100432956626051671');" onmouseout="out('-100432956626051671');" style="">1997             final boolean isSafeMode = manager.isSafeMode();                                             </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">1998             final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);             </span>
<span class="-1126483394746043247" onmouseenter="enter('-1126483394746043247');" onmouseout="out('-1126483394746043247');" style="">1999             final boolean isSdCardReady = context.registerReceiver(null,                                 </span>
<span class="235951794025782625" onmouseenter="enter('235951794025782625');" onmouseout="out('235951794025782625');" style="">2000                     new IntentFilter(StartupReceiver.SYSTEM_READY)) != null;                             </span>
<span  style="">2001                                                                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">2002             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">2003             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="-1268645472287944818" onmouseenter="enter('-1268645472287944818');" onmouseout="out('-1268645472287944818');" style="">2004             int countX = (int) grid.numColumns;                                                          </span>
<span class="5825733578535079508" onmouseenter="enter('5825733578535079508');" onmouseout="out('5825733578535079508');" style="">2005             int countY = (int) grid.numRows;                                                             </span>
<span  style="">2006                                                                                                          </span>
<span class="4685154999280536885" onmouseenter="enter('4685154999280536885');" onmouseout="out('4685154999280536885');" style="">2007             if ((mFlags &amp; LOADER_FLAG_CLEAR_WORKSPACE) != 0) {                                           </span>
<span class="1874866184467615023" onmouseenter="enter('1874866184467615023');" onmouseout="out('1874866184467615023');" style="">2008                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: resetting launcher database&quot;, true);            </span>
<span class="7130003991883838563" onmouseenter="enter('7130003991883838563');" onmouseout="out('7130003991883838563');" style="">2009                 LauncherAppState.getLauncherProvider().deleteDatabase();                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2010             }                                                                                            </span>
<span  style="">2011                                                                                                          </span>
<span class="1786245758308608184" onmouseenter="enter('1786245758308608184');" onmouseout="out('1786245758308608184');" style="">2012             if ((mFlags &amp; LOADER_FLAG_MIGRATE_SHORTCUTS) != 0) {                                         </span>
<span class="2622187273755861990" onmouseenter="enter('2622187273755861990');" onmouseout="out('2622187273755861990');" style="">2013                 // append the user&#x27;s Launcher2 shortcuts                                                 </span>
<span class="7991450201866933364" onmouseenter="enter('7991450201866933364');" onmouseout="out('7991450201866933364');" style="">2014                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: migrating from launcher2&quot;, true);               </span>
<span class="-4928149528895358870" onmouseenter="enter('-4928149528895358870');" onmouseout="out('-4928149528895358870');" style="">2015                 LauncherAppState.getLauncherProvider().migrateLauncher2Shortcuts();                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2016             } else {                                                                                     </span>
<span class="-6772917437561183819" onmouseenter="enter('-6772917437561183819');" onmouseout="out('-6772917437561183819');" style="">2017                 // Make sure the default workspace is loaded                                             </span>
<span class="3161347234478650527" onmouseenter="enter('3161347234478650527');" onmouseout="out('3161347234478650527');" style="">2018                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: loading default favorites&quot;, false);             </span>
<span class="4180233289947251537" onmouseenter="enter('4180233289947251537');" onmouseout="out('4180233289947251537');" style="">2019                 LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary();                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2020             }                                                                                            </span>
<span  style="">2021                                                                                                          </span>
<span class="6918238907049954147" onmouseenter="enter('6918238907049954147');" onmouseout="out('6918238907049954147');" style="">2022             // This code path is for our old migration code and should no longer be exercised            </span>
<span class="-6111060399811000023" onmouseenter="enter('-6111060399811000023');" onmouseout="out('-6111060399811000023');" style="">2023             boolean loadedOldDb = false;                                                                 </span>
<span  style="">2024                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2025             // Log to disk                                                                               </span>
<span class="4915608034810943289" onmouseenter="enter('4915608034810943289');" onmouseout="out('4915608034810943289');" style="">2026             Launcher.addDumpLog(TAG, &quot;11683562 -   loadedOldDb: &quot; + loadedOldDb, true);                  </span>
<span  style="">2027                                                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2028             synchronized (sBgLock) {                                                                     </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2029                 clearSBgDataStructures();                                                                </span>
<span class="8252648371202855385" onmouseenter="enter('8252648371202855385');" onmouseout="out('8252648371202855385');" style="">2030                 final HashSet&lt;String&gt; installingPkgs = PackageInstallerCompat                            </span>
<span class="-5267108265550912858" onmouseenter="enter('-5267108265550912858');" onmouseout="out('-5267108265550912858');" style="">2031                         .getInstance(mContext).updateAndGetActiveSessionCache();                         </span>
<span  style="">2032                                                                                                          </span>
<span class="4830013596372552761" onmouseenter="enter('4830013596372552761');" onmouseout="out('4830013596372552761');" style="">2033                 final ArrayList&lt;Long&gt; itemsToRemove = new ArrayList&lt;Long&gt;();                             </span>
<span class="-771425693233218078" onmouseenter="enter('-771425693233218078');" onmouseout="out('-771425693233218078');" style="">2034                 final ArrayList&lt;Long&gt; restoredRows = new ArrayList&lt;Long&gt;();                              </span>
<span class="2252334430881119805" onmouseenter="enter('2252334430881119805');" onmouseout="out('2252334430881119805');" style="">2035                 final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION;           </span>
<span class="6883183902805060832" onmouseenter="enter('6883183902805060832');" onmouseout="out('6883183902805060832');" style="">2036                 if (DEBUG_LOADERS) Log.d(TAG, &quot;loading model from &quot; + contentUri);                       </span>
<span class="4124323585340312806" onmouseenter="enter('4124323585340312806');" onmouseout="out('4124323585340312806');" style="">2037                 final Cursor c = contentResolver.query(contentUri, null, null, null, null);              </span>
<span  style="">2038                                                                                                          </span>
<span class="-6846195559440228008" onmouseenter="enter('-6846195559440228008');" onmouseout="out('-6846195559440228008');" style="">2039                 // +1 for the hotseat (it can be larger than the workspace)                              </span>
<span class="-6570434370371395868" onmouseenter="enter('-6570434370371395868');" onmouseout="out('-6570434370371395868');" style="">2040                 // Load workspace in reverse order to ensure that latest items are loaded first (and     </span>
<span class="-2496742724026288329" onmouseenter="enter('-2496742724026288329');" onmouseout="out('-2496742724026288329');" style="">2041                 // before any earlier duplicates)                                                        </span>
<span class="-575539041300461201" onmouseenter="enter('-575539041300461201');" onmouseout="out('-575539041300461201');" style="">2042                 final HashMap&lt;Long, ItemInfo[][]&gt; occupied = new HashMap&lt;Long, ItemInfo[][]&gt;();          </span>
<span  style="">2043                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2044                 try {                                                                                    </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">2045                     final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);         </span>
<span class="498695732843703978" onmouseenter="enter('498695732843703978');" onmouseout="out('498695732843703978');" style="">2046                     final int intentIndex = c.getColumnIndexOrThrow                                      </span>
<span class="-2710863683168773760" onmouseenter="enter('-2710863683168773760');" onmouseout="out('-2710863683168773760');" style="">2047                             (LauncherSettings.Favorites.INTENT);                                         </span>
<span class="3135911520873448784" onmouseenter="enter('3135911520873448784');" onmouseout="out('3135911520873448784');" style="">2048                     final int titleIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-7080768452290664563" onmouseenter="enter('-7080768452290664563');" onmouseout="out('-7080768452290664563');" style="">2049                             (LauncherSettings.Favorites.TITLE);                                          </span>
<span class="-4350901823494792660" onmouseenter="enter('-4350901823494792660');" onmouseout="out('-4350901823494792660');" style="">2050                     final int iconTypeIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="3108347623629035166" onmouseenter="enter('3108347623629035166');" onmouseout="out('3108347623629035166');" style="">2051                             LauncherSettings.Favorites.ICON_TYPE);                                       </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">2052                     final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);      </span>
<span class="-3909234361304575452" onmouseenter="enter('-3909234361304575452');" onmouseout="out('-3909234361304575452');" style="">2053                     final int iconPackageIndex = c.getColumnIndexOrThrow(                                </span>
<span class="-6787190495105525864" onmouseenter="enter('-6787190495105525864');" onmouseout="out('-6787190495105525864');" style="">2054                             LauncherSettings.Favorites.ICON_PACKAGE);                                    </span>
<span class="7790246664646081463" onmouseenter="enter('7790246664646081463');" onmouseout="out('7790246664646081463');" style="">2055                     final int iconResourceIndex = c.getColumnIndexOrThrow(                               </span>
<span class="-1781116612765105159" onmouseenter="enter('-1781116612765105159');" onmouseout="out('-1781116612765105159');" style="">2056                             LauncherSettings.Favorites.ICON_RESOURCE);                                   </span>
<span class="3335971636920715852" onmouseenter="enter('3335971636920715852');" onmouseout="out('3335971636920715852');" style="">2057                     final int containerIndex = c.getColumnIndexOrThrow(                                  </span>
<span class="6570903028117113418" onmouseenter="enter('6570903028117113418');" onmouseout="out('6570903028117113418');" style="">2058                             LauncherSettings.Favorites.CONTAINER);                                       </span>
<span class="-8309152441179821869" onmouseenter="enter('-8309152441179821869');" onmouseout="out('-8309152441179821869');" style="">2059                     final int itemTypeIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="7255885825914282267" onmouseenter="enter('7255885825914282267');" onmouseout="out('7255885825914282267');" style="">2060                             LauncherSettings.Favorites.ITEM_TYPE);                                       </span>
<span class="-9034335384452522965" onmouseenter="enter('-9034335384452522965');" onmouseout="out('-9034335384452522965');" style="">2061                     final int appWidgetIdIndex = c.getColumnIndexOrThrow(                                </span>
<span class="6807201781176448908" onmouseenter="enter('6807201781176448908');" onmouseout="out('6807201781176448908');" style="">2062                             LauncherSettings.Favorites.APPWIDGET_ID);                                    </span>
<span class="-6125671603078297888" onmouseenter="enter('-6125671603078297888');" onmouseout="out('-6125671603078297888');" style="">2063                     final int appWidgetProviderIndex = c.getColumnIndexOrThrow(                          </span>
<span class="4426033877353236522" onmouseenter="enter('4426033877353236522');" onmouseout="out('4426033877353236522');" style="">2064                             LauncherSettings.Favorites.APPWIDGET_PROVIDER);                              </span>
<span class="-3079236723582024955" onmouseenter="enter('-3079236723582024955');" onmouseout="out('-3079236723582024955');" style="">2065                     final int screenIndex = c.getColumnIndexOrThrow(                                     </span>
<span class="-6667712815858132414" onmouseenter="enter('-6667712815858132414');" onmouseout="out('-6667712815858132414');" style="">2066                             LauncherSettings.Favorites.SCREEN);                                          </span>
<span class="-6867547874094352828" onmouseenter="enter('-6867547874094352828');" onmouseout="out('-6867547874094352828');" style="">2067                     final int cellXIndex = c.getColumnIndexOrThrow                                       </span>
<span class="5262774206366152748" onmouseenter="enter('5262774206366152748');" onmouseout="out('5262774206366152748');" style="">2068                             (LauncherSettings.Favorites.CELLX);                                          </span>
<span class="8831781951312982826" onmouseenter="enter('8831781951312982826');" onmouseout="out('8831781951312982826');" style="">2069                     final int cellYIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-5037082342925021952" onmouseenter="enter('-5037082342925021952');" onmouseout="out('-5037082342925021952');" style="">2070                             (LauncherSettings.Favorites.CELLY);                                          </span>
<span class="4727532435646923125" onmouseenter="enter('4727532435646923125');" onmouseout="out('4727532435646923125');" style="">2071                     final int spanXIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-4661771410814353054" onmouseenter="enter('-4661771410814353054');" onmouseout="out('-4661771410814353054');" style="">2072                             (LauncherSettings.Favorites.SPANX);                                          </span>
<span class="-2910068933310438864" onmouseenter="enter('-2910068933310438864');" onmouseout="out('-2910068933310438864');" style="">2073                     final int spanYIndex = c.getColumnIndexOrThrow(                                      </span>
<span class="99270330838913893" onmouseenter="enter('99270330838913893');" onmouseout="out('99270330838913893');" style="">2074                             LauncherSettings.Favorites.SPANY);                                           </span>
<span class="4436227568732015168" onmouseenter="enter('4436227568732015168');" onmouseout="out('4436227568732015168');" style="">2075                     final int restoredIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="6353272533239034373" onmouseenter="enter('6353272533239034373');" onmouseout="out('6353272533239034373');" style="">2076                             LauncherSettings.Favorites.RESTORED);                                        </span>
<span class="3162637821619353517" onmouseenter="enter('3162637821619353517');" onmouseout="out('3162637821619353517');" style="">2077                     final int profileIdIndex = c.getColumnIndexOrThrow(                                  </span>
<span class="-1125432391574533143" onmouseenter="enter('-1125432391574533143');" onmouseout="out('-1125432391574533143');" style="">2078                             LauncherSettings.Favorites.PROFILE_ID);                                      </span>
<span class="4456964937873623262" onmouseenter="enter('4456964937873623262');" onmouseout="out('4456964937873623262');" style="">2079                     //final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);      </span>
<span class="2905983584052764586" onmouseenter="enter('2905983584052764586');" onmouseout="out('2905983584052764586');" style="">2080                     //final int displayModeIndex = c.getColumnIndexOrThrow(                              </span>
<span class="-8556687182597342656" onmouseenter="enter('-8556687182597342656');" onmouseout="out('-8556687182597342656');" style="">2081                     //        LauncherSettings.Favorites.DISPLAY_MODE);                                  </span>
<span  style="">2082                                                                                                          </span>
<span class="-6687913296565100881" onmouseenter="enter('-6687913296565100881');" onmouseout="out('-6687913296565100881');" style="">2083                     ShortcutInfo info;                                                                   </span>
<span class="-4294155297126257121" onmouseenter="enter('-4294155297126257121');" onmouseout="out('-4294155297126257121');" style="">2084                     String intentDescription;                                                            </span>
<span class="1875374791140575019" onmouseenter="enter('1875374791140575019');" onmouseout="out('1875374791140575019');" style="">2085                     LauncherAppWidgetInfo appWidgetInfo;                                                 </span>
<span class="-7299509265635558160" onmouseenter="enter('-7299509265635558160');" onmouseout="out('-7299509265635558160');" style="">2086                     int container;                                                                       </span>
<span class="3268793718289878117" onmouseenter="enter('3268793718289878117');" onmouseout="out('3268793718289878117');" style="">2087                     long id;                                                                             </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">2088                     Intent intent;                                                                       </span>
<span class="8928715163618104503" onmouseenter="enter('8928715163618104503');" onmouseout="out('8928715163618104503');" style="">2089                     UserHandleCompat user;                                                               </span>
<span  style="">2090                                                                                                          </span>
<span class="1538645125823697533" onmouseenter="enter('1538645125823697533');" onmouseout="out('1538645125823697533');" style="">2091                     while (!mStopped &amp;&amp; c.moveToNext()) {                                                </span>
<span class="-3056870665611820276" onmouseenter="enter('-3056870665611820276');" onmouseout="out('-3056870665611820276');" style="">2092                         AtomicBoolean deleteOnInvalidPlacement = new AtomicBoolean(false);               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2093                         try {                                                                            </span>
<span class="-4443967809239824632" onmouseenter="enter('-4443967809239824632');" onmouseout="out('-4443967809239824632');" style="">2094                             int itemType = c.getInt(itemTypeIndex);                                      </span>
<span class="7426878920983746504" onmouseenter="enter('7426878920983746504');" onmouseout="out('7426878920983746504');" style="">2095                             boolean restored = 0 != c.getInt(restoredIndex);                             </span>
<span class="4933910026947534491" onmouseenter="enter('4933910026947534491');" onmouseout="out('4933910026947534491');" style="">2096                             boolean allowMissingTarget = false;                                          </span>
<span  style="">2097                                                                                                          </span>
<span class="-5665081285487591411" onmouseenter="enter('-5665081285487591411');" onmouseout="out('-5665081285487591411');" style="">2098                             switch (itemType) {                                                          </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">2099                             case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                       </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">2100                             case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                          </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2101                                 id = c.getLong(idIndex);                                                 </span>
<span class="8199742400390876563" onmouseenter="enter('8199742400390876563');" onmouseout="out('8199742400390876563');" style="">2102                                 intentDescription = c.getString(intentIndex);                            </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style="">2103                                 long serialNumber = c.getInt(profileIdIndex);                            </span>
<span class="-4273089527731895214" onmouseenter="enter('-4273089527731895214');" onmouseout="out('-4273089527731895214');" style="">2104                                 user = mUserManager.getUserForSerialNumber(serialNumber);                </span>
<span class="-3834292976309282984" onmouseenter="enter('-3834292976309282984');" onmouseout="out('-3834292976309282984');" style="">2105                                 int promiseType = c.getInt(restoredIndex);                               </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="">2106                                 if (user == null) {                                                      </span>
<span class="-496594084298695862" onmouseenter="enter('-496594084298695862');" onmouseout="out('-496594084298695862');" style="">2107                                     // User has been deleted remove the item.                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2108                                     itemsToRemove.add(id);                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2109                                     continue;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2110                                 }                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2111                                 try {                                                                    </span>
<span class="-1059471947143689601" onmouseenter="enter('-1059471947143689601');" onmouseout="out('-1059471947143689601');" style="">2112                                     intent = Intent.parseUri(intentDescription, 0);                      </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style="">2113                                     ComponentName cn = intent.getComponent();                            </span>
<span class="3739674956299895084" onmouseenter="enter('3739674956299895084');" onmouseout="out('3739674956299895084');" style="">2114                                     if (cn != null &amp;&amp; cn.getPackageName() != null) {                     </span>
<span class="-7017860263960771696" onmouseenter="enter('-7017860263960771696');" onmouseout="out('-7017860263960771696');" style="">2115                                         boolean validPkg = launcherApps.isPackageEnabledForProfile(      </span>
<span class="-8206530135326160205" onmouseenter="enter('-8206530135326160205');" onmouseout="out('-8206530135326160205');" style="">2116                                                 cn.getPackageName(), user);                              </span>
<span class="2397899750057092636" onmouseenter="enter('2397899750057092636');" onmouseout="out('2397899750057092636');" style="">2117                                         boolean validComponent = validPkg &amp;&amp;                             </span>
<span class="8762069982139369869" onmouseenter="enter('8762069982139369869');" onmouseout="out('8762069982139369869');" style="">2118                                                 launcherApps.isActivityEnabledForProfile(cn, user);      </span>
<span  style="">2119                                                                                                          </span>
<span class="-99499348404964068" onmouseenter="enter('-99499348404964068');" onmouseout="out('-99499348404964068');" style="">2120                                         if (validComponent) {                                            </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2121                                             if (restored) {                                              </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="">2122                                                 // no special handling necessary for this item           </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2123                                                 restoredRows.add(id);                                    </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2124                                                 restored = false;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2125                                             }                                                            </span>
<span class="6348728592662235672" onmouseenter="enter('6348728592662235672');" onmouseout="out('6348728592662235672');" style="">2126                                         } else if (validPkg) {                                           </span>
<span class="-6379280176207841217" onmouseenter="enter('-6379280176207841217');" onmouseout="out('-6379280176207841217');" style="">2127                                             intent = null;                                               </span>
<span class="-5338271721329837400" onmouseenter="enter('-5338271721329837400');" onmouseout="out('-5338271721329837400');" style="">2128                                             if ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {</span>
<span class="5709472974278481468" onmouseenter="enter('5709472974278481468');" onmouseout="out('5709472974278481468');" style="">2129                                                 // We allow auto install apps to have their intent       </span>
<span class="-2650685759805982432" onmouseenter="enter('-2650685759805982432');" onmouseout="out('-2650685759805982432');" style="">2130                                                 // updated after an install.                             </span>
<span class="-9107195642058231815" onmouseenter="enter('-9107195642058231815');" onmouseout="out('-9107195642058231815');" style="">2131                                                 intent = manager.getLaunchIntentForPackage(              </span>
<span class="2095835690487424293" onmouseenter="enter('2095835690487424293');" onmouseout="out('2095835690487424293');" style="">2132                                                         cn.getPackageName());                            </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="">2133                                                 if (intent != null) {                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2134                                                     ContentValues values = new ContentValues();          </span>
<span class="-1283328052029016277" onmouseenter="enter('-1283328052029016277');" onmouseout="out('-1283328052029016277');" style="">2135                                                     values.put(LauncherSettings.Favorites.INTENT,        </span>
<span class="-6799954997008316510" onmouseenter="enter('-6799954997008316510');" onmouseout="out('-6799954997008316510');" style="">2136                                                             intent.toUri(0));                            </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2137                                                     String where = BaseColumns._ID + &quot;= ?&quot;;              </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="">2138                                                     String[] args = {Long.toString(id)};                 </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style=""><abbr title="2139                                                     contentResolver.update(contentUri, values, where, args);">2139                                                     contentResolver.update(contentUri, values, where, arg</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2140                                                 }                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2141                                             }                                                            </span>
<span  style="">2142                                                                                                          </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">2143                                             if (intent == null) {                                        </span>
<span class="8006468267706457929" onmouseenter="enter('8006468267706457929');" onmouseout="out('8006468267706457929');" style="">2144                                                 // The app is installed but the component is no          </span>
<span class="7757985899517234268" onmouseenter="enter('7757985899517234268');" onmouseout="out('7757985899517234268');" style="">2145                                                 // longer available.                                     </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2146                                                 Launcher.addDumpLog(TAG,                                 </span>
<span class="-4265604912045441952" onmouseenter="enter('-4265604912045441952');" onmouseout="out('-4265604912045441952');" style="">2147                                                         &quot;Invalid component removed: &quot; + cn, true);       </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2148                                                 itemsToRemove.add(id);                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2149                                                 continue;                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2150                                             } else {                                                     </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="">2151                                                 // no special handling necessary for this item           </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2152                                                 restoredRows.add(id);                                    </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2153                                                 restored = false;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2154                                             }                                                            </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="">2155                                         } else if (restored) {                                           </span>
<span class="6723757088957997679" onmouseenter="enter('6723757088957997679');" onmouseout="out('6723757088957997679');" style="">2156                                             // Package is not yet available but might be                 </span>
<span class="9210943103787239320" onmouseenter="enter('9210943103787239320');" onmouseout="out('9210943103787239320');" style="">2157                                             // installed later.                                          </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2158                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="1853248294024116603" onmouseenter="enter('1853248294024116603');" onmouseout="out('1853248294024116603');" style="">2159                                                     &quot;package not yet restored: &quot; + cn, true);            </span>
<span  style="">2160                                                                                                          </span>
<span class="-3623786309000722140" onmouseenter="enter('-3623786309000722140');" onmouseout="out('-3623786309000722140');" style="">2161                                             if ((promiseType &amp; ShortcutInfo.FLAG_RESTORE_STARTED) != 0) {</span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="">2162                                                 // Restore has started once.                             </span>
<span class="-3201378748433506719" onmouseenter="enter('-3201378748433506719');" onmouseout="out('-3201378748433506719');" style="">2163                                             } else if (installingPkgs.contains(cn.getPackageName())) {   </span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="">2164                                                 // App restore has started. Update the flag              </span>
<span class="-8644667183049601729" onmouseenter="enter('-8644667183049601729');" onmouseout="out('-8644667183049601729');" style="">2165                                                 promiseType |= ShortcutInfo.FLAG_RESTORE_STARTED;        </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2166                                                 ContentValues values = new ContentValues();              </span>
<span class="-3056571748664136340" onmouseenter="enter('-3056571748664136340');" onmouseout="out('-3056571748664136340');" style="">2167                                                 values.put(LauncherSettings.Favorites.RESTORED,          </span>
<span class="-6746125005705027516" onmouseenter="enter('-6746125005705027516');" onmouseout="out('-6746125005705027516');" style="">2168                                                         promiseType);                                    </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2169                                                 String where = BaseColumns._ID + &quot;= ?&quot;;                  </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="">2170                                                 String[] args = {Long.toString(id)};                     </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2171                                                 contentResolver.update(contentUri, values, where, args); </span>
<span  style="">2172                                                                                                          </span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="">2173                                             } else if (REMOVE_UNRESTORED_ICONS) {                        </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2174                                                 Launcher.addDumpLog(TAG,                                 </span>
<span class="-4630254631341932691" onmouseenter="enter('-4630254631341932691');" onmouseout="out('-4630254631341932691');" style="">2175                                                         &quot;Unrestored package removed: &quot; + cn, true);      </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2176                                                 itemsToRemove.add(id);                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2177                                                 continue;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2178                                             }                                                            </span>
<span class="-1386874848571608329" onmouseenter="enter('-1386874848571608329');" onmouseout="out('-1386874848571608329');" style="">2179                                         } else if (isSdCardReady) {                                      </span>
<span class="3796946079469102110" onmouseenter="enter('3796946079469102110');" onmouseout="out('3796946079469102110');" style="">2180                                             // Do not wait for external media load anymore.              </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="">2181                                             // Log the invalid package, and remove it                    </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2182                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="556389557067898835" onmouseenter="enter('556389557067898835');" onmouseout="out('556389557067898835');" style="">2183                                                     &quot;Invalid package removed: &quot; + cn, true);             </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2184                                             itemsToRemove.add(id);                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2185                                             continue;                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2186                                         } else {                                                         </span>
<span class="1407932970386463384" onmouseenter="enter('1407932970386463384');" onmouseout="out('1407932970386463384');" style="">2187                                             // SdCard is not ready yet. Package might get available,     </span>
<span class="8490114520358161793" onmouseenter="enter('8490114520358161793');" onmouseout="out('8490114520358161793');" style="">2188                                             // once it is ready.                                         </span>
<span class="-6360577143290119906" onmouseenter="enter('-6360577143290119906');" onmouseout="out('-6360577143290119906');" style="">2189                                             Launcher.addDumpLog(TAG, &quot;Invalid package: &quot; + cn            </span>
<span class="-4780001113233310924" onmouseenter="enter('-4780001113233310924');" onmouseout="out('-4780001113233310924');" style="">2190                                                     + &quot; (check again later)&quot;, true);                     </span>
<span class="-8366417370187832083" onmouseenter="enter('-8366417370187832083');" onmouseout="out('-8366417370187832083');" style="">2191                                             HashSet&lt;String&gt; pkgs = sPendingPackages.get(user);           </span>
<span class="3542388323197199472" onmouseenter="enter('3542388323197199472');" onmouseout="out('3542388323197199472');" style="">2192                                             if (pkgs == null) {                                          </span>
<span class="2501092745877296895" onmouseenter="enter('2501092745877296895');" onmouseout="out('2501092745877296895');" style="">2193                                                 pkgs = new HashSet&lt;String&gt;();                            </span>
<span class="-7473793273553333759" onmouseenter="enter('-7473793273553333759');" onmouseout="out('-7473793273553333759');" style="">2194                                                 sPendingPackages.put(user, pkgs);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2195                                             }                                                            </span>
<span class="-4896386049384421066" onmouseenter="enter('-4896386049384421066');" onmouseout="out('-4896386049384421066');" style="">2196                                             pkgs.add(cn.getPackageName());                               </span>
<span class="-7690684901319719205" onmouseenter="enter('-7690684901319719205');" onmouseout="out('-7690684901319719205');" style="">2197                                             allowMissingTarget = true;                                   </span>
<span class="7315818939061071709" onmouseenter="enter('7315818939061071709');" onmouseout="out('7315818939061071709');" style="">2198                                             // Add the icon on the workspace anyway.                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2199                                         }                                                                </span>
<span class="-237996807879267337" onmouseenter="enter('-237996807879267337');" onmouseout="out('-237996807879267337');" style="">2200                                     } else if (cn == null) {                                             </span>
<span class="8972274794412921183" onmouseenter="enter('8972274794412921183');" onmouseout="out('8972274794412921183');" style="">2201                                         // For shortcuts with no component, keep them as they are        </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2202                                         restoredRows.add(id);                                            </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2203                                         restored = false;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2204                                     }                                                                    </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">2205                                 } catch (URISyntaxException e) {                                         </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2206                                     Launcher.addDumpLog(TAG,                                             </span>
<span class="-68540878136764174" onmouseenter="enter('-68540878136764174');" onmouseout="out('-68540878136764174');" style="">2207                                             &quot;Invalid uri: &quot; + intentDescription, true);                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2208                                     continue;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2209                                 }                                                                        </span>
<span  style="">2210                                                                                                          </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2211                                 if (restored) {                                                          </span>
<span class="-3932834939055806292" onmouseenter="enter('-3932834939055806292');" onmouseout="out('-3932834939055806292');" style="">2212                                     if (user.equals(UserHandleCompat.myUserHandle())) {                  </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2213                                         Launcher.addDumpLog(TAG,                                         </span>
<span class="-7520999071046454576" onmouseenter="enter('-7520999071046454576');" onmouseout="out('-7520999071046454576');" style="">2214                                                 &quot;constructing info for partially restored package&quot;,      </span>
<span class="-159362617709534437" onmouseenter="enter('-159362617709534437');" onmouseout="out('-159362617709534437');" style="">2215                                                 true);                                                   </span>
<span class="9114514411241404985" onmouseenter="enter('9114514411241404985');" onmouseout="out('9114514411241404985');" style="">2216                                         info = getRestoredItemInfo(c, titleIndex, intent, promiseType);  </span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="">2217                                         intent = getRestoredItemIntent(c, context, intent);              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2218                                     } else {                                                             </span>
<span class="5174235078557753913" onmouseenter="enter('5174235078557753913');" onmouseout="out('5174235078557753913');" style="">2219                                         // Don&#x27;t restore items for other profiles.                       </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2220                                         itemsToRemove.add(id);                                           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2221                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2222                                     }                                                                    </span>
<span class="2485815571182318046" onmouseenter="enter('2485815571182318046');" onmouseout="out('2485815571182318046');" style="">2223                                 } else if (itemType ==                                                   </span>
<span class="2369871960694556087" onmouseenter="enter('2369871960694556087');" onmouseout="out('2369871960694556087');" style="">2224                                         LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {              </span>
<span class="-7549941140075833136" onmouseenter="enter('-7549941140075833136');" onmouseout="out('-7549941140075833136');" style="">2225                                     info = getShortcutInfo(manager, intent, user, context, c,            </span>
<span class="-4574059466099335125" onmouseenter="enter('-4574059466099335125');" onmouseout="out('-4574059466099335125');" style="">2226                                             iconIndex, titleIndex, mLabelCache, allowMissingTarget);     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2227                                 } else {                                                                 </span>
<span class="-7258494880704199189" onmouseenter="enter('-7258494880704199189');" onmouseout="out('-7258494880704199189');" style="">2228                                     info = getShortcutInfo(c, context, iconTypeIndex,                    </span>
<span class="6962748064109777554" onmouseenter="enter('6962748064109777554');" onmouseout="out('6962748064109777554');" style="">2229                                             iconPackageIndex, iconResourceIndex, iconIndex,              </span>
<span class="-1562426884587851404" onmouseenter="enter('-1562426884587851404');" onmouseout="out('-1562426884587851404');" style="">2230                                             titleIndex);                                                 </span>
<span  style="">2231                                                                                                          </span>
<span class="8787316375412349400" onmouseenter="enter('8787316375412349400');" onmouseout="out('8787316375412349400');" style="">2232                                     // App shortcuts that used to be automatically added to Launcher     </span>
<span class="4423348586531939182" onmouseenter="enter('4423348586531939182');" onmouseout="out('4423348586531939182');" style="">2233                                     // didn&#x27;t always have the correct intent flags set, so do that       </span>
<span class="906874877447394391" onmouseenter="enter('906874877447394391');" onmouseout="out('906874877447394391');" style="">2234                                     // here                                                              </span>
<span class="-8302893811746412301" onmouseenter="enter('-8302893811746412301');" onmouseout="out('-8302893811746412301');" style="">2235                                     if (intent.getAction() != null &amp;&amp;                                    </span>
<span class="-6792431597223839871" onmouseenter="enter('-6792431597223839871');" onmouseout="out('-6792431597223839871');" style="">2236                                         intent.getCategories() != null &amp;&amp;                                </span>
<span class="-4482526573741019726" onmouseenter="enter('-4482526573741019726');" onmouseout="out('-4482526573741019726');" style="">2237                                         intent.getAction().equals(Intent.ACTION_MAIN) &amp;&amp;                 </span>
<span class="8802373298636081036" onmouseenter="enter('8802373298636081036');" onmouseout="out('8802373298636081036');" style="">2238                                         intent.getCategories().contains(Intent.CATEGORY_LAUNCHER)) {     </span>
<span class="-1437204964726011747" onmouseenter="enter('-1437204964726011747');" onmouseout="out('-1437204964726011747');" style="">2239                                         intent.addFlags(                                                 </span>
<span class="7533444403523837279" onmouseenter="enter('7533444403523837279');" onmouseout="out('7533444403523837279');" style="">2240                                             Intent.FLAG_ACTIVITY_NEW_TASK |                              </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">2241                                             Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2242                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2243                                 }                                                                        </span>
<span  style="">2244                                                                                                          </span>
<span class="-1845287058566655413" onmouseenter="enter('-1845287058566655413');" onmouseout="out('-1845287058566655413');" style="">2245                                 if (info != null) {                                                      </span>
<span class="-7372776081672801393" onmouseenter="enter('-7372776081672801393');" onmouseout="out('-7372776081672801393');" style="">2246                                     info.id = id;                                                        </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">2247                                     info.intent = intent;                                                </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2248                                     container = c.getInt(containerIndex);                                </span>
<span class="5031599210604047094" onmouseenter="enter('5031599210604047094');" onmouseout="out('5031599210604047094');" style="">2249                                     info.container = container;                                          </span>
<span class="8385513109144822406" onmouseenter="enter('8385513109144822406');" onmouseout="out('8385513109144822406');" style="">2250                                     info.screenId = c.getInt(screenIndex);                               </span>
<span class="8733666235794055799" onmouseenter="enter('8733666235794055799');" onmouseout="out('8733666235794055799');" style="">2251                                     info.cellX = c.getInt(cellXIndex);                                   </span>
<span class="4988345900238836581" onmouseenter="enter('4988345900238836581');" onmouseout="out('4988345900238836581');" style="">2252                                     info.cellY = c.getInt(cellYIndex);                                   </span>
<span class="6314319831626461685" onmouseenter="enter('6314319831626461685');" onmouseout="out('6314319831626461685');" style="">2253                                     info.spanX = 1;                                                      </span>
<span class="-7635592400178984643" onmouseenter="enter('-7635592400178984643');" onmouseout="out('-7635592400178984643');" style="">2254                                     info.spanY = 1;                                                      </span>
<span class="3045271753555441709" onmouseenter="enter('3045271753555441709');" onmouseout="out('3045271753555441709');" style="">2255                                     info.intent.putExtra(ItemInfo.EXTRA_PROFILE, serialNumber);          </span>
<span class="-4153270497324690681" onmouseenter="enter('-4153270497324690681');" onmouseout="out('-4153270497324690681');" style="">2256                                     info.isDisabled = isSafeMode                                         </span>
<span class="7337397009343704544" onmouseenter="enter('7337397009343704544');" onmouseout="out('7337397009343704544');" style="">2257                                             &amp;&amp; !Utilities.isSystemApp(context, intent);                  </span>
<span  style="">2258                                                                                                          </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2259                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2260                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="8488570468437690238" onmouseenter="enter('8488570468437690238');" onmouseout="out('8488570468437690238');" style="">2261                                     if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)) { </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2262                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2263                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2264                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2265                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2266                                     }                                                                    </span>
<span  style="">2267                                                                                                          </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2268                                     switch (container) {                                                 </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2269                                     case LauncherSettings.Favorites.CONTAINER_DESKTOP:                   </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2270                                     case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                   </span>
<span class="-3665356032627215639" onmouseenter="enter('-3665356032627215639');" onmouseout="out('-3665356032627215639');" style="">2271                                         sBgWorkspaceItems.add(info);                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2272                                         break;                                                           </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">2273                                     default:                                                             </span>
<span class="3928258456344537563" onmouseenter="enter('3928258456344537563');" onmouseout="out('3928258456344537563');" style="">2274                                         // Item is in a user folder                                      </span>
<span class="7253808449036323039" onmouseenter="enter('7253808449036323039');" onmouseout="out('7253808449036323039');" style="">2275                                         FolderInfo folderInfo =                                          </span>
<span class="5827700611550420594" onmouseenter="enter('5827700611550420594');" onmouseout="out('5827700611550420594');" style="">2276                                                 findOrMakeFolder(sBgFolders, container);                 </span>
<span class="4210631970925384436" onmouseenter="enter('4210631970925384436');" onmouseout="out('4210631970925384436');" style="">2277                                         folderInfo.add(info);                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2278                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2279                                     }                                                                    </span>
<span class="-3593974647070903374" onmouseenter="enter('-3593974647070903374');" onmouseout="out('-3593974647070903374');" style="">2280                                     sBgItemsIdMap.put(info.id, info);                                    </span>
<span  style="">2281                                                                                                          </span>
<span class="-8292894264257510493" onmouseenter="enter('-8292894264257510493');" onmouseout="out('-8292894264257510493');" style="">2282                                     // now that we&#x27;ve loaded everthing re-save it with the               </span>
<span class="-1917607236140731811" onmouseenter="enter('-1917607236140731811');" onmouseout="out('-1917607236140731811');" style="">2283                                     // icon in case it disappears somehow.                               </span>
<span class="-3056528193758781985" onmouseenter="enter('-3056528193758781985');" onmouseout="out('-3056528193758781985');" style="">2284                                     queueIconToBeChecked(sBgDbIconCache, info, c, iconIndex);            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2285                                 } else {                                                                 </span>
<span class="477637279977673890" onmouseenter="enter('477637279977673890');" onmouseout="out('477637279977673890');" style="">2286                                     throw new RuntimeException(&quot;Unexpected null ShortcutInfo&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2287                                 }                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2288                                 break;                                                                   </span>
<span  style="">2289                                                                                                          </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">2290                             case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                            </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2291                                 id = c.getLong(idIndex);                                                 </span>
<span class="-711784092642716417" onmouseenter="enter('-711784092642716417');" onmouseout="out('-711784092642716417');" style="">2292                                 FolderInfo folderInfo = findOrMakeFolder(sBgFolders, id);                </span>
<span  style="">2293                                                                                                          </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">2294                                 folderInfo.title = c.getString(titleIndex);                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">2295                                 folderInfo.id = id;                                                      </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2296                                 container = c.getInt(containerIndex);                                    </span>
<span class="-7029361904102133577" onmouseenter="enter('-7029361904102133577');" onmouseout="out('-7029361904102133577');" style="">2297                                 folderInfo.container = container;                                        </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">2298                                 folderInfo.screenId = c.getInt(screenIndex);                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">2299                                 folderInfo.cellX = c.getInt(cellXIndex);                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">2300                                 folderInfo.cellY = c.getInt(cellYIndex);                                 </span>
<span class="5610283855861400391" onmouseenter="enter('5610283855861400391');" onmouseout="out('5610283855861400391');" style="">2301                                 folderInfo.spanX = 1;                                                    </span>
<span class="-3495026741287589829" onmouseenter="enter('-3495026741287589829');" onmouseout="out('-3495026741287589829');" style="">2302                                 folderInfo.spanY = 1;                                                    </span>
<span  style="">2303                                                                                                          </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2304                                 // check &amp; update map of what&#x27;s occupied                                 </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2305                                 deleteOnInvalidPlacement.set(false);                                     </span>
<span class="-7285209150210174951" onmouseenter="enter('-7285209150210174951');" onmouseout="out('-7285209150210174951');" style="">2306                                 if (!checkItemPlacement(occupied, folderInfo,                            </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2307                                         deleteOnInvalidPlacement)) {                                     </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2308                                     if (deleteOnInvalidPlacement.get()) {                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2309                                         itemsToRemove.add(id);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2310                                     }                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2311                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2312                                 }                                                                        </span>
<span  style="">2313                                                                                                          </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2314                                 switch (container) {                                                     </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2315                                     case LauncherSettings.Favorites.CONTAINER_DESKTOP:                   </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2316                                     case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                   </span>
<span class="-8699935089398023363" onmouseenter="enter('-8699935089398023363');" onmouseout="out('-8699935089398023363');" style="">2317                                         sBgWorkspaceItems.add(folderInfo);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2318                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2319                                 }                                                                        </span>
<span  style="">2320                                                                                                          </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2321                                 if (restored) {                                                          </span>
<span class="-4442362781295313201" onmouseenter="enter('-4442362781295313201');" onmouseout="out('-4442362781295313201');" style="">2322                                     // no special handling required for restored folders                 </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2323                                     restoredRows.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2324                                 }                                                                        </span>
<span  style="">2325                                                                                                          </span>
<span class="-3375208674862622715" onmouseenter="enter('-3375208674862622715');" onmouseout="out('-3375208674862622715');" style="">2326                                 sBgItemsIdMap.put(folderInfo.id, folderInfo);                            </span>
<span class="642717865586237287" onmouseenter="enter('642717865586237287');" onmouseout="out('642717865586237287');" style="">2327                                 sBgFolders.put(folderInfo.id, folderInfo);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2328                                 break;                                                                   </span>
<span  style="">2329                                                                                                          </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">2330                             case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                         </span>
<span class="-7956270215965694003" onmouseenter="enter('-7956270215965694003');" onmouseout="out('-7956270215965694003');" style="">2331                                 // Read all Launcher-specific widget details                             </span>
<span class="-1812352292626846958" onmouseenter="enter('-1812352292626846958');" onmouseout="out('-1812352292626846958');" style="">2332                                 int appWidgetId = c.getInt(appWidgetIdIndex);                            </span>
<span class="7731617805561144619" onmouseenter="enter('7731617805561144619');" onmouseout="out('7731617805561144619');" style="">2333                                 String savedProvider = c.getString(appWidgetProviderIndex);              </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2334                                 id = c.getLong(idIndex);                                                 </span>
<span class="-6617867489767824559" onmouseenter="enter('-6617867489767824559');" onmouseout="out('-6617867489767824559');" style="">2335                                 final ComponentName component =                                          </span>
<span class="2036133433071881641" onmouseenter="enter('2036133433071881641');" onmouseout="out('2036133433071881641');" style="">2336                                         ComponentName.unflattenFromString(savedProvider);                </span>
<span  style="">2337                                                                                                          </span>
<span class="-1033311611191387821" onmouseenter="enter('-1033311611191387821');" onmouseout="out('-1033311611191387821');" style="">2338                                 final int restoreStatus = c.getInt(restoredIndex);                       </span>
<span class="-4190680795845516969" onmouseenter="enter('-4190680795845516969');" onmouseout="out('-4190680795845516969');" style="">2339                                 final boolean isIdValid = (restoreStatus &amp;                               </span>
<span class="-1481780029747642556" onmouseenter="enter('-1481780029747642556');" onmouseout="out('-1481780029747642556');" style="">2340                                         LauncherAppWidgetInfo.FLAG_ID_NOT_VALID) == 0;                   </span>
<span  style="">2341                                                                                                          </span>
<span class="5101880033416706570" onmouseenter="enter('5101880033416706570');" onmouseout="out('5101880033416706570');" style="">2342                                 final boolean wasProviderReady = (restoreStatus &amp;                        </span>
<span class="1207335416094145871" onmouseenter="enter('1207335416094145871');" onmouseout="out('1207335416094145871');" style="">2343                                         LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY) == 0;             </span>
<span  style="">2344                                                                                                          </span>
<span class="-565532021680206913" onmouseenter="enter('-565532021680206913');" onmouseout="out('-565532021680206913');" style="">2345                                 final AppWidgetProviderInfo provider = isIdValid                         </span>
<span class="-1314040982621159070" onmouseenter="enter('-1314040982621159070');" onmouseout="out('-1314040982621159070');" style="">2346                                         ? widgets.getAppWidgetInfo(appWidgetId)                          </span>
<span class="-5208038715710523064" onmouseenter="enter('-5208038715710523064');" onmouseout="out('-5208038715710523064');" style="">2347                                         : findAppWidgetProviderInfoWithComponent(context, component);    </span>
<span  style="">2348                                                                                                          </span>
<span class="-3732530231777271434" onmouseenter="enter('-3732530231777271434');" onmouseout="out('-3732530231777271434');" style="">2349                                 final boolean isProviderReady = isValidProvider(provider);               </span>
<span class="-4031276934674956730" onmouseenter="enter('-4031276934674956730');" onmouseout="out('-4031276934674956730');" style="">2350                                 if (!isSafeMode &amp;&amp; wasProviderReady &amp;&amp; !isProviderReady) {               </span>
<span class="-7439259826635164411" onmouseenter="enter('-7439259826635164411');" onmouseout="out('-7439259826635164411');" style="">2351                                     String log = &quot;Deleting widget that isn&#x27;t installed anymore: &quot;        </span>
<span class="7602710093107620029" onmouseenter="enter('7602710093107620029');" onmouseout="out('7602710093107620029');" style="">2352                                             + &quot;id=&quot; + id + &quot; appWidgetId=&quot; + appWidgetId;                </span>
<span class="-1161653447976501517" onmouseenter="enter('-1161653447976501517');" onmouseout="out('-1161653447976501517');" style="">2353                                     Log.e(TAG, log);                                                     </span>
<span class="-8769286334876902652" onmouseenter="enter('-8769286334876902652');" onmouseout="out('-8769286334876902652');" style="">2354                                     Launcher.addDumpLog(TAG, log, false);                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2355                                     itemsToRemove.add(id);                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2356                                 } else {                                                                 </span>
<span class="-6990378869891346567" onmouseenter="enter('-6990378869891346567');" onmouseout="out('-6990378869891346567');" style="">2357                                     if (isProviderReady) {                                               </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="">2358                                         appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,           </span>
<span class="-1699940082949791423" onmouseenter="enter('-1699940082949791423');" onmouseout="out('-1699940082949791423');" style="">2359                                                 provider.provider);                                      </span>
<span class="-8791440271290591158" onmouseenter="enter('-8791440271290591158');" onmouseout="out('-8791440271290591158');" style="">2360                                         int[] minSpan =                                                  </span>
<span class="-461068380011135868" onmouseenter="enter('-461068380011135868');" onmouseout="out('-461068380011135868');" style="">2361                                                 Launcher.getMinSpanForWidget(context, provider);         </span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="">2362                                         appWidgetInfo.minSpanX = minSpan[0];                             </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="">2363                                         appWidgetInfo.minSpanY = minSpan[1];                             </span>
<span  style="">2364                                                                                                          </span>
<span class="-4125236257298908421" onmouseenter="enter('-4125236257298908421');" onmouseout="out('-4125236257298908421');" style="">2365                                         int status = restoreStatus;                                      </span>
<span class="7579397535150427943" onmouseenter="enter('7579397535150427943');" onmouseout="out('7579397535150427943');" style="">2366                                         if (!wasProviderReady) {                                         </span>
<span class="1257696726614810242" onmouseenter="enter('1257696726614810242');" onmouseout="out('1257696726614810242');" style="">2367                                             // If provider was not previously ready, update the          </span>
<span class="2493747474831820434" onmouseenter="enter('2493747474831820434');" onmouseout="out('2493747474831820434');" style="">2368                                             // status and UI flag.                                       </span>
<span  style="">2369                                                                                                          </span>
<span class="-551194396664004778" onmouseenter="enter('-551194396664004778');" onmouseout="out('-551194396664004778');" style=""><abbr title="2370                                             // Id would be valid only if the widget restore broadcast was received.">2370                                             // Id would be valid only if the widget restore broadcast was</abbr></span>
<span class="877884548755909685" onmouseenter="enter('877884548755909685');" onmouseout="out('877884548755909685');" style="">2371                                             if (isIdValid) {                                             </span>
<span class="7708410681175562751" onmouseenter="enter('7708410681175562751');" onmouseout="out('7708410681175562751');" style="">2372                                                 status = LauncherAppWidgetInfo.RESTORE_COMPLETED;        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2373                                             } else {                                                     </span>
<span class="-2615385138309932511" onmouseenter="enter('-2615385138309932511');" onmouseout="out('-2615385138309932511');" style="">2374                                                 status &amp;= ~LauncherAppWidgetInfo                         </span>
<span class="-1081946781001842885" onmouseenter="enter('-1081946781001842885');" onmouseout="out('-1081946781001842885');" style="">2375                                                         .FLAG_PROVIDER_NOT_READY;                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2376                                             }                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2377                                         }                                                                </span>
<span class="-5649718664209503492" onmouseenter="enter('-5649718664209503492');" onmouseout="out('-5649718664209503492');" style="">2378                                         appWidgetInfo.restoreStatus = status;                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2379                                     } else {                                                             </span>
<span class="1960922256572910963" onmouseenter="enter('1960922256572910963');" onmouseout="out('1960922256572910963');" style="">2380                                         Log.v(TAG, &quot;Widget restore pending id=&quot; + id                     </span>
<span class="-310807007133679357" onmouseenter="enter('-310807007133679357');" onmouseout="out('-310807007133679357');" style="">2381                                                 + &quot; appWidgetId=&quot; + appWidgetId                          </span>
<span class="-3553458184285370274" onmouseenter="enter('-3553458184285370274');" onmouseout="out('-3553458184285370274');" style="">2382                                                 + &quot; status =&quot; + restoreStatus);                          </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="">2383                                         appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,           </span>
<span class="-876368090679524620" onmouseenter="enter('-876368090679524620');" onmouseout="out('-876368090679524620');" style="">2384                                                 component);                                              </span>
<span class="5437344546404607904" onmouseenter="enter('5437344546404607904');" onmouseout="out('5437344546404607904');" style="">2385                                         appWidgetInfo.restoreStatus = restoreStatus;                     </span>
<span  style="">2386                                                                                                          </span>
<span class="3064749011557231100" onmouseenter="enter('3064749011557231100');" onmouseout="out('3064749011557231100');" style=""><abbr title="2387                                         if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_STARTED) != 0) {">2387                                         if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_STARTED) </abbr></span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="">2388                                             // Restore has started once.                                 </span>
<span class="1863960885189711466" onmouseenter="enter('1863960885189711466');" onmouseout="out('1863960885189711466');" style="">2389                                         } else if (installingPkgs.contains(component.getPackageName())) {</span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="">2390                                             // App restore has started. Update the flag                  </span>
<span class="-2352323974911641075" onmouseenter="enter('-2352323974911641075');" onmouseout="out('-2352323974911641075');" style="">2391                                             appWidgetInfo.restoreStatus |=                               </span>
<span class="8590583015720742314" onmouseenter="enter('8590583015720742314');" onmouseout="out('8590583015720742314');" style="">2392                                                     LauncherAppWidgetInfo.FLAG_RESTORE_STARTED;          </span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="">2393                                         } else if (REMOVE_UNRESTORED_ICONS) {                            </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2394                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="-6243477493514584052" onmouseenter="enter('-6243477493514584052');" onmouseout="out('-6243477493514584052');" style="">2395                                                     &quot;Unrestored widget removed: &quot; + component, true);    </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2396                                             itemsToRemove.add(id);                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2397                                             continue;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2398                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2399                                     }                                                                    </span>
<span  style="">2400                                                                                                          </span>
<span class="-3490214853915757695" onmouseenter="enter('-3490214853915757695');" onmouseout="out('-3490214853915757695');" style="">2401                                     appWidgetInfo.id = id;                                               </span>
<span class="-299823112742514494" onmouseenter="enter('-299823112742514494');" onmouseout="out('-299823112742514494');" style="">2402                                     appWidgetInfo.screenId = c.getInt(screenIndex);                      </span>
<span class="-3031374252236192886" onmouseenter="enter('-3031374252236192886');" onmouseout="out('-3031374252236192886');" style="">2403                                     appWidgetInfo.cellX = c.getInt(cellXIndex);                          </span>
<span class="-6373958662014470902" onmouseenter="enter('-6373958662014470902');" onmouseout="out('-6373958662014470902');" style="">2404                                     appWidgetInfo.cellY = c.getInt(cellYIndex);                          </span>
<span class="-1172974300892817728" onmouseenter="enter('-1172974300892817728');" onmouseout="out('-1172974300892817728');" style="">2405                                     appWidgetInfo.spanX = c.getInt(spanXIndex);                          </span>
<span class="948367348399442562" onmouseenter="enter('948367348399442562');" onmouseout="out('948367348399442562');" style="">2406                                     appWidgetInfo.spanY = c.getInt(spanYIndex);                          </span>
<span  style="">2407                                                                                                          </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2408                                     container = c.getInt(containerIndex);                                </span>
<span class="8804482754730728288" onmouseenter="enter('8804482754730728288');" onmouseout="out('8804482754730728288');" style="">2409                                     if (container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;     </span>
<span class="-8875646165072629077" onmouseenter="enter('-8875646165072629077');" onmouseout="out('-8875646165072629077');" style="">2410                                         container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {     </span>
<span class="8088576139032825639" onmouseenter="enter('8088576139032825639');" onmouseout="out('8088576139032825639');" style="">2411                                         Log.e(TAG, &quot;Widget found where container != &quot; +                  </span>
<span class="8462700098092543731" onmouseenter="enter('8462700098092543731');" onmouseout="out('8462700098092543731');" style="">2412                                             &quot;CONTAINER_DESKTOP nor CONTAINER_HOTSEAT - ignoring!&quot;);      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2413                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2414                                     }                                                                    </span>
<span  style="">2415                                                                                                          </span>
<span class="3497044279011134930" onmouseenter="enter('3497044279011134930');" onmouseout="out('3497044279011134930');" style="">2416                                     appWidgetInfo.container = c.getInt(containerIndex);                  </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2417                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2418                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="8646654463595497950" onmouseenter="enter('8646654463595497950');" onmouseout="out('8646654463595497950');" style="">2419                                     if (!checkItemPlacement(occupied, appWidgetInfo,                     </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2420                                             deleteOnInvalidPlacement)) {                                 </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2421                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2422                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2423                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2424                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2425                                     }                                                                    </span>
<span  style="">2426                                                                                                          </span>
<span class="-8698298148744232980" onmouseenter="enter('-8698298148744232980');" onmouseout="out('-8698298148744232980');" style="">2427                                     String providerName = appWidgetInfo.providerName.flattenToString();  </span>
<span class="2853568002576356463" onmouseenter="enter('2853568002576356463');" onmouseout="out('2853568002576356463');" style="">2428                                     if (!providerName.equals(savedProvider) ||                           </span>
<span class="4338446659263892125" onmouseenter="enter('4338446659263892125');" onmouseout="out('4338446659263892125');" style="">2429                                             (appWidgetInfo.restoreStatus != restoreStatus)) {            </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2430                                         ContentValues values = new ContentValues();                      </span>
<span class="-1769279011780203877" onmouseenter="enter('-1769279011780203877');" onmouseout="out('-1769279011780203877');" style="">2431                                         values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER,        </span>
<span class="-4101567385035018098" onmouseenter="enter('-4101567385035018098');" onmouseout="out('-4101567385035018098');" style="">2432                                                 providerName);                                           </span>
<span class="-3056571748664136340" onmouseenter="enter('-3056571748664136340');" onmouseout="out('-3056571748664136340');" style="">2433                                         values.put(LauncherSettings.Favorites.RESTORED,                  </span>
<span class="6174833257706459781" onmouseenter="enter('6174833257706459781');" onmouseout="out('6174833257706459781');" style="">2434                                                 appWidgetInfo.restoreStatus);                            </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2435                                         String where = BaseColumns._ID + &quot;= ?&quot;;                          </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="">2436                                         String[] args = {Long.toString(id)};                             </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2437                                         contentResolver.update(contentUri, values, where, args);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2438                                     }                                                                    </span>
<span class="-5618854840311135348" onmouseenter="enter('-5618854840311135348');" onmouseout="out('-5618854840311135348');" style="">2439                                     sBgItemsIdMap.put(appWidgetInfo.id, appWidgetInfo);                  </span>
<span class="-6085617845739613540" onmouseenter="enter('-6085617845739613540');" onmouseout="out('-6085617845739613540');" style="">2440                                     sBgAppWidgets.add(appWidgetInfo);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2441                                 }                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2442                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2443                             }                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2444                         } catch (Exception e) {                                                          </span>
<span class="5473197829797399592" onmouseenter="enter('5473197829797399592');" onmouseout="out('5473197829797399592');" style="">2445                             Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted&quot;, e, true);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2446                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2447                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2448                 } finally {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2449                     if (c != null) {                                                                     </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2450                         c.close();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2451                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2452                 }                                                                                        </span>
<span  style="">2453                                                                                                          </span>
<span class="3320499870953658089" onmouseenter="enter('3320499870953658089');" onmouseout="out('3320499870953658089');" style="">2454                 // Break early if we&#x27;ve stopped loading                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2455                 if (mStopped) {                                                                          </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2456                     clearSBgDataStructures();                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2457                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2458                 }                                                                                        </span>
<span  style="">2459                                                                                                          </span>
<span class="-1044970196577970229" onmouseenter="enter('-1044970196577970229');" onmouseout="out('-1044970196577970229');" style="">2460                 if (itemsToRemove.size() &gt; 0) {                                                          </span>
<span class="5677517768170489521" onmouseenter="enter('5677517768170489521');" onmouseout="out('5677517768170489521');" style="">2461                     ContentProviderClient client = contentResolver.acquireContentProviderClient(         </span>
<span class="3143035230192904555" onmouseenter="enter('3143035230192904555');" onmouseout="out('3143035230192904555');" style="">2462                             contentUri);                                                                 </span>
<span class="-6328990658741073682" onmouseenter="enter('-6328990658741073682');" onmouseout="out('-6328990658741073682');" style="">2463                     // Remove dead items                                                                 </span>
<span class="-2206673557334024830" onmouseenter="enter('-2206673557334024830');" onmouseout="out('-2206673557334024830');" style="">2464                     for (long id : itemsToRemove) {                                                      </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2465                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1693656419727492070" onmouseenter="enter('1693656419727492070');" onmouseout="out('1693656419727492070');" style="">2466                             Log.d(TAG, &quot;Removed id = &quot; + id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2467                         }                                                                                </span>
<span class="-756547997470617115" onmouseenter="enter('-756547997470617115');" onmouseout="out('-756547997470617115');" style="">2468                         // Don&#x27;t notify content observers                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2469                         try {                                                                            </span>
<span class="-2525008622658612811" onmouseenter="enter('-2525008622658612811');" onmouseout="out('-2525008622658612811');" style="">2470                             client.delete(LauncherSettings.Favorites.getContentUri(id, false),           </span>
<span class="789653475627010164" onmouseenter="enter('789653475627010164');" onmouseout="out('789653475627010164');" style="">2471                                     null, null);                                                         </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2472                         } catch (RemoteException e) {                                                    </span>
<span class="1576133554677134200" onmouseenter="enter('1576133554677134200');" onmouseout="out('1576133554677134200');" style="">2473                             Log.w(TAG, &quot;Could not remove id = &quot; + id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2474                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2475                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2476                 }                                                                                        </span>
<span  style="">2477                                                                                                          </span>
<span class="5384601782943406631" onmouseenter="enter('5384601782943406631');" onmouseout="out('5384601782943406631');" style="">2478                 if (restoredRows.size() &gt; 0) {                                                           </span>
<span class="-7146881939578869751" onmouseenter="enter('-7146881939578869751');" onmouseout="out('-7146881939578869751');" style="">2479                     ContentProviderClient updater = contentResolver.acquireContentProviderClient(        </span>
<span class="3143035230192904555" onmouseenter="enter('3143035230192904555');" onmouseout="out('3143035230192904555');" style="">2480                             contentUri);                                                                 </span>
<span class="7218829760546841504" onmouseenter="enter('7218829760546841504');" onmouseout="out('7218829760546841504');" style="">2481                     // Update restored items that no longer require special handling                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2482                     try {                                                                                </span>
<span class="-9131750597640912652" onmouseenter="enter('-9131750597640912652');" onmouseout="out('-9131750597640912652');" style="">2483                         StringBuilder selectionBuilder = new StringBuilder();                            </span>
<span class="-2095273116509361612" onmouseenter="enter('-2095273116509361612');" onmouseout="out('-2095273116509361612');" style="">2484                         selectionBuilder.append(LauncherSettings.Favorites._ID);                         </span>
<span class="6461653116160679746" onmouseenter="enter('6461653116160679746');" onmouseout="out('6461653116160679746');" style="">2485                         selectionBuilder.append(&quot; IN (&quot;);                                                </span>
<span class="5779162458108712939" onmouseenter="enter('5779162458108712939');" onmouseout="out('5779162458108712939');" style="">2486                         selectionBuilder.append(TextUtils.join(&quot;, &quot;, restoredRows));                     </span>
<span class="-266914319355369866" onmouseenter="enter('-266914319355369866');" onmouseout="out('-266914319355369866');" style="">2487                         selectionBuilder.append(&quot;)&quot;);                                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2488                         ContentValues values = new ContentValues();                                      </span>
<span class="-8469115157851156621" onmouseenter="enter('-8469115157851156621');" onmouseout="out('-8469115157851156621');" style="">2489                         values.put(LauncherSettings.Favorites.RESTORED, 0);                              </span>
<span class="5986100348417061644" onmouseenter="enter('5986100348417061644');" onmouseout="out('5986100348417061644');" style="">2490                         updater.update(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,           </span>
<span class="-593768018781143118" onmouseenter="enter('-593768018781143118');" onmouseout="out('-593768018781143118');" style="">2491                                 values, selectionBuilder.toString(), null);                              </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2492                     } catch (RemoteException e) {                                                        </span>
<span class="-2048384695223094681" onmouseenter="enter('-2048384695223094681');" onmouseout="out('-2048384695223094681');" style="">2493                         Log.w(TAG, &quot;Could not update restored rows&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2494                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2495                 }                                                                                        </span>
<span  style="">2496                                                                                                          </span>
<span class="-5457196494236388113" onmouseenter="enter('-5457196494236388113');" onmouseout="out('-5457196494236388113');" style="">2497                 if (!isSdCardReady &amp;&amp; !sPendingPackages.isEmpty()) {                                     </span>
<span class="371670048052179208" onmouseenter="enter('371670048052179208');" onmouseout="out('371670048052179208');" style="">2498                     context.registerReceiver(new AppsAvailabilityCheck(),                                </span>
<span class="-2250957496563467306" onmouseenter="enter('-2250957496563467306');" onmouseout="out('-2250957496563467306');" style="">2499                             new IntentFilter(StartupReceiver.SYSTEM_READY),                              </span>
<span class="-5536809824571506033" onmouseenter="enter('-5536809824571506033');" onmouseout="out('-5536809824571506033');" style="">2500                             null, sWorker);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2501                 }                                                                                        </span>
<span  style="">2502                                                                                                          </span>
<span class="-4804263783578470698" onmouseenter="enter('-4804263783578470698');" onmouseout="out('-4804263783578470698');" style="">2503                 if (loadedOldDb) {                                                                       </span>
<span class="7600073100480404232" onmouseenter="enter('7600073100480404232');" onmouseout="out('7600073100480404232');" style="">2504                     long maxScreenId = 0;                                                                </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2505                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2506                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2507                         long screenId = item.screenId;                                                   </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2508                         if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;            </span>
<span class="2624616925341674614" onmouseenter="enter('2624616925341674614');" onmouseout="out('2624616925341674614');" style="">2509                                 !sBgWorkspaceScreens.contains(screenId)) {                               </span>
<span class="-7031445051311703943" onmouseenter="enter('-7031445051311703943');" onmouseout="out('-7031445051311703943');" style="">2510                             sBgWorkspaceScreens.add(screenId);                                           </span>
<span class="3854679960473080150" onmouseenter="enter('3854679960473080150');" onmouseout="out('3854679960473080150');" style="">2511                             if (screenId &gt; maxScreenId) {                                                </span>
<span class="1021049293401799489" onmouseenter="enter('1021049293401799489');" onmouseout="out('1021049293401799489');" style="">2512                                 maxScreenId = screenId;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2513                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2514                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2515                     }                                                                                    </span>
<span class="6350361387624057443" onmouseenter="enter('6350361387624057443');" onmouseout="out('6350361387624057443');" style="">2516                     Collections.sort(sBgWorkspaceScreens);                                               </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2517                     // Log to disk                                                                       </span>
<span class="866898408466051726" onmouseenter="enter('866898408466051726');" onmouseout="out('866898408466051726');" style="">2518                     Launcher.addDumpLog(TAG, &quot;11683562 -   maxScreenId: &quot; + maxScreenId, true);          </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2519                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                      </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2520                             TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                            </span>
<span  style="">2521                                                                                                          </span>
<span class="7230913638388732518" onmouseenter="enter('7230913638388732518');" onmouseout="out('7230913638388732518');" style="">2522                     LauncherAppState.getLauncherProvider().updateMaxScreenId(maxScreenId);               </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2523                     updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                            </span>
<span  style="">2524                                                                                                          </span>
<span class="7660079450024453672" onmouseenter="enter('7660079450024453672');" onmouseout="out('7660079450024453672');" style="">2525                     // Update the max item id after we load an old db                                    </span>
<span class="-1395936485676380465" onmouseenter="enter('-1395936485676380465');" onmouseout="out('-1395936485676380465');" style="">2526                     long maxItemId = 0;                                                                  </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2527                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2528                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="570221416877950678" onmouseenter="enter('570221416877950678');" onmouseout="out('570221416877950678');" style="">2529                         maxItemId = Math.max(maxItemId, item.id);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2530                     }                                                                                    </span>
<span class="-9163109107539651846" onmouseenter="enter('-9163109107539651846');" onmouseout="out('-9163109107539651846');" style="">2531                     LauncherAppState.getLauncherProvider().updateMaxItemId(maxItemId);                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2532                 } else {                                                                                 </span>
<span class="-2685559954044032059" onmouseenter="enter('-2685559954044032059');" onmouseout="out('-2685559954044032059');" style="">2533                     TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(mContext);            </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">2534                     for (Integer i : orderedScreens.keySet()) {                                          </span>
<span class="6018672691004586758" onmouseenter="enter('6018672691004586758');" onmouseout="out('6018672691004586758');" style="">2535                         sBgWorkspaceScreens.add(orderedScreens.get(i));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2536                     }                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2537                     // Log to disk                                                                       </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2538                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                      </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2539                             TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                            </span>
<span  style="">2540                                                                                                          </span>
<span class="4349099944219760178" onmouseenter="enter('4349099944219760178');" onmouseout="out('4349099944219760178');" style="">2541                     // Remove any empty screens                                                          </span>
<span class="4802911702169047278" onmouseenter="enter('4802911702169047278');" onmouseout="out('4802911702169047278');" style="">2542                     ArrayList&lt;Long&gt; unusedScreens = new ArrayList&lt;Long&gt;(sBgWorkspaceScreens);            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2543                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2544                         long screenId = item.screenId;                                                   </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2545                         if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;            </span>
<span class="2084246428391599841" onmouseenter="enter('2084246428391599841');" onmouseout="out('2084246428391599841');" style="">2546                                 unusedScreens.contains(screenId)) {                                      </span>
<span class="2563817896724806900" onmouseenter="enter('2563817896724806900');" onmouseout="out('2563817896724806900');" style="">2547                             unusedScreens.remove(screenId);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2548                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2549                     }                                                                                    </span>
<span  style="">2550                                                                                                          </span>
<span class="589140823506694046" onmouseenter="enter('589140823506694046');" onmouseout="out('589140823506694046');" style="">2551                     // If there are any empty screens remove them, and update.                           </span>
<span class="-6359391369875412389" onmouseenter="enter('-6359391369875412389');" onmouseout="out('-6359391369875412389');" style="">2552                     if (unusedScreens.size() != 0) {                                                     </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2553                         // Log to disk                                                                   </span>
<span class="7523849534574985307" onmouseenter="enter('7523849534574985307');" onmouseout="out('7523849534574985307');" style="">2554                         Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; +        </span>
<span class="-5777150032383965255" onmouseenter="enter('-5777150032383965255');" onmouseout="out('-5777150032383965255');" style="">2555                                 TextUtils.join(&quot;, &quot;, unusedScreens), true);                              </span>
<span  style="">2556                                                                                                          </span>
<span class="672027419163159367" onmouseenter="enter('672027419163159367');" onmouseout="out('672027419163159367');" style="">2557                         sBgWorkspaceScreens.removeAll(unusedScreens);                                    </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2558                         updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2559                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2560                 }                                                                                        </span>
<span  style="">2561                                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2562                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="7893701829803555503" onmouseenter="enter('7893701829803555503');" onmouseout="out('7893701829803555503');" style="">2563                     Log.d(TAG, &quot;loaded workspace in &quot; + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);          </span>
<span class="-4264600990510120523" onmouseenter="enter('-4264600990510120523');" onmouseout="out('-4264600990510120523');" style="">2564                     Log.d(TAG, &quot;workspace layout: &quot;);                                                    </span>
<span class="-7545020173780618827" onmouseenter="enter('-7545020173780618827');" onmouseout="out('-7545020173780618827');" style="">2565                     int nScreens = occupied.size();                                                      </span>
<span class="-1430677680506572849" onmouseenter="enter('-1430677680506572849');" onmouseout="out('-1430677680506572849');" style="">2566                     for (int y = 0; y &lt; countY; y++) {                                                   </span>
<span class="7912371425440139270" onmouseenter="enter('7912371425440139270');" onmouseout="out('7912371425440139270');" style="">2567                         String line = &quot;&quot;;                                                                </span>
<span  style="">2568                                                                                                          </span>
<span class="6696569755228044488" onmouseenter="enter('6696569755228044488');" onmouseout="out('6696569755228044488');" style="">2569                         Iterator&lt;Long&gt; iter = occupied.keySet().iterator();                              </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2570                         while (iter.hasNext()) {                                                         </span>
<span class="5362610809116292523" onmouseenter="enter('5362610809116292523');" onmouseout="out('5362610809116292523');" style="">2571                             long screenId = iter.next();                                                 </span>
<span class="-6362485911021715109" onmouseenter="enter('-6362485911021715109');" onmouseout="out('-6362485911021715109');" style="">2572                             if (screenId &gt; 0) {                                                          </span>
<span class="6140668759815587097" onmouseenter="enter('6140668759815587097');" onmouseout="out('6140668759815587097');" style="">2573                                 line += &quot; | &quot;;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2574                             }                                                                            </span>
<span class="5745233440242438196" onmouseenter="enter('5745233440242438196');" onmouseout="out('5745233440242438196');" style="">2575                             for (int x = 0; x &lt; countX; x++) {                                           </span>
<span class="-6212011147390486077" onmouseenter="enter('-6212011147390486077');" onmouseout="out('-6212011147390486077');" style="">2576                                 ItemInfo[][] screen = occupied.get(screenId);                            </span>
<span class="-8528390042415740475" onmouseenter="enter('-8528390042415740475');" onmouseout="out('-8528390042415740475');" style="">2577                                 if (x &lt; screen.length &amp;&amp; y &lt; screen[x].length) {                         </span>
<span class="2138628812736326092" onmouseenter="enter('2138628812736326092');" onmouseout="out('2138628812736326092');" style="">2578                                     line += (screen[x][y] != null) ? &quot;#&quot; : &quot;.&quot;;                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2579                                 } else {                                                                 </span>
<span class="3801202768225819208" onmouseenter="enter('3801202768225819208');" onmouseout="out('3801202768225819208');" style="">2580                                     line += &quot;!&quot;;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2581                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2582                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2583                         }                                                                                </span>
<span class="-6176135763032133271" onmouseenter="enter('-6176135763032133271');" onmouseout="out('-6176135763032133271');" style="">2584                         Log.d(TAG, &quot;[ &quot; + line + &quot; ]&quot;);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2585                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2586                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2587             }                                                                                            </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style="">2588             return loadedOldDb;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2589         }                                                                                                </span>
<span  style="">2590                                                                                                          </span>
<span class="2277304499071840713" onmouseenter="enter('2277304499071840713');" onmouseout="out('2277304499071840713');" style="">2591         /** Filters the set of items who are directly or indirectly (via another container) on the       </span>
<span class="1409652257454698285" onmouseenter="enter('1409652257454698285');" onmouseout="out('1409652257454698285');" style="">2592          * specified screen. */                                                                          </span>
<span class="8795548304182075511" onmouseenter="enter('8795548304182075511');" onmouseout="out('8795548304182075511');" style="">2593         private void filterCurrentWorkspaceItems(long currentScreenId,                                   </span>
<span class="6681054994536048179" onmouseenter="enter('6681054994536048179');" onmouseout="out('6681054994536048179');" style="">2594                 ArrayList&lt;ItemInfo&gt; allWorkspaceItems,                                                   </span>
<span class="-22694560885899086" onmouseenter="enter('-22694560885899086');" onmouseout="out('-22694560885899086');" style="">2595                 ArrayList&lt;ItemInfo&gt; currentScreenItems,                                                  </span>
<span class="-4268074281529251610" onmouseenter="enter('-4268074281529251610');" onmouseout="out('-4268074281529251610');" style="">2596                 ArrayList&lt;ItemInfo&gt; otherScreenItems) {                                                  </span>
<span class="-3054856766549342984" onmouseenter="enter('-3054856766549342984');" onmouseout="out('-3054856766549342984');" style="">2597             // Purge any null ItemInfos                                                                  </span>
<span class="4510640209834542816" onmouseenter="enter('4510640209834542816');" onmouseout="out('4510640209834542816');" style="">2598             Iterator&lt;ItemInfo&gt; iter = allWorkspaceItems.iterator();                                      </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2599             while (iter.hasNext()) {                                                                     </span>
<span class="1859715860533284250" onmouseenter="enter('1859715860533284250');" onmouseout="out('1859715860533284250');" style="">2600                 ItemInfo i = iter.next();                                                                </span>
<span class="-7805046366392198151" onmouseenter="enter('-7805046366392198151');" onmouseout="out('-7805046366392198151');" style="">2601                 if (i == null) {                                                                         </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">2602                     iter.remove();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2603                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2604             }                                                                                            </span>
<span  style="">2605                                                                                                          </span>
<span class="-717820765531723775" onmouseenter="enter('-717820765531723775');" onmouseout="out('-717820765531723775');" style="">2606             // Order the set of items by their containers first, this allows use to walk through the     </span>
<span class="603841325148737819" onmouseenter="enter('603841325148737819');" onmouseout="out('603841325148737819');" style="">2607             // list sequentially, build up a list of containers that are in the specified screen,        </span>
<span class="4141488165570775341" onmouseenter="enter('4141488165570775341');" onmouseout="out('4141488165570775341');" style="">2608             // as well as all items in those containers.                                                 </span>
<span class="-9034158841912487174" onmouseenter="enter('-9034158841912487174');" onmouseout="out('-9034158841912487174');" style="">2609             Set&lt;Long&gt; itemsOnScreen = new HashSet&lt;Long&gt;();                                               </span>
<span class="8519661802904254165" onmouseenter="enter('8519661802904254165');" onmouseout="out('8519661802904254165');" style="">2610             Collections.sort(allWorkspaceItems, new Comparator&lt;ItemInfo&gt;() {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2611                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2612                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="-1156155221818606914" onmouseenter="enter('-1156155221818606914');" onmouseout="out('-1156155221818606914');" style="">2613                     return (int) (lhs.container - rhs.container);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2614                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2615             });                                                                                          </span>
<span class="8857216393150717712" onmouseenter="enter('8857216393150717712');" onmouseout="out('8857216393150717712');" style="">2616             for (ItemInfo info : allWorkspaceItems) {                                                    </span>
<span class="6411036295955728093" onmouseenter="enter('6411036295955728093');" onmouseout="out('6411036295955728093');" style="">2617                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                    </span>
<span class="243509375570472667" onmouseenter="enter('243509375570472667');" onmouseout="out('243509375570472667');" style="">2618                     if (info.screenId == currentScreenId) {                                              </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2619                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2620                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2621                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2622                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2623                     }                                                                                    </span>
<span class="8644731164584182238" onmouseenter="enter('8644731164584182238');" onmouseout="out('8644731164584182238');" style="">2624                 } else if (info.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2625                     currentScreenItems.add(info);                                                        </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2626                     itemsOnScreen.add(info.id);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2627                 } else {                                                                                 </span>
<span class="580654991680085358" onmouseenter="enter('580654991680085358');" onmouseout="out('580654991680085358');" style="">2628                     if (itemsOnScreen.contains(info.container)) {                                        </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2629                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2630                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2631                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2632                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2633                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2634                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2635             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2636         }                                                                                                </span>
<span  style="">2637                                                                                                          </span>
<span class="-2345588268248786161" onmouseenter="enter('-2345588268248786161');" onmouseout="out('-2345588268248786161');" style="">2638         /** Filters the set of widgets which are on the specified screen. */                             </span>
<span class="7796530082634599981" onmouseenter="enter('7796530082634599981');" onmouseout="out('7796530082634599981');" style="">2639         private void filterCurrentAppWidgets(long currentScreenId,                                       </span>
<span class="-6457080946795761374" onmouseenter="enter('-6457080946795761374');" onmouseout="out('-6457080946795761374');" style="">2640                 ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                             </span>
<span class="-4085190208868862406" onmouseenter="enter('-4085190208868862406');" onmouseout="out('-4085190208868862406');" style="">2641                 ArrayList&lt;LauncherAppWidgetInfo&gt; currentScreenWidgets,                                   </span>
<span class="-9000722418092093369" onmouseenter="enter('-9000722418092093369');" onmouseout="out('-9000722418092093369');" style="">2642                 ArrayList&lt;LauncherAppWidgetInfo&gt; otherScreenWidgets) {                                   </span>
<span  style="">2643                                                                                                          </span>
<span class="298213435107913715" onmouseenter="enter('298213435107913715');" onmouseout="out('298213435107913715');" style="">2644             for (LauncherAppWidgetInfo widget : appWidgets) {                                            </span>
<span class="2476844624609784590" onmouseenter="enter('2476844624609784590');" onmouseout="out('2476844624609784590');" style="">2645                 if (widget == null) continue;                                                            </span>
<span class="8795712760973120755" onmouseenter="enter('8795712760973120755');" onmouseout="out('8795712760973120755');" style="">2646                 if (widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                  </span>
<span class="-573639449604607321" onmouseenter="enter('-573639449604607321');" onmouseout="out('-573639449604607321');" style="">2647                         widget.screenId == currentScreenId) {                                            </span>
<span class="-7467860973438659792" onmouseenter="enter('-7467860973438659792');" onmouseout="out('-7467860973438659792');" style="">2648                     currentScreenWidgets.add(widget);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2649                 } else {                                                                                 </span>
<span class="918127297832417083" onmouseenter="enter('918127297832417083');" onmouseout="out('918127297832417083');" style="">2650                     otherScreenWidgets.add(widget);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2651                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2652             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2653         }                                                                                                </span>
<span  style="">2654                                                                                                          </span>
<span class="2890739696266248059" onmouseenter="enter('2890739696266248059');" onmouseout="out('2890739696266248059');" style="">2655         /** Filters the set of folders which are on the specified screen. */                             </span>
<span class="1006156668309097499" onmouseenter="enter('1006156668309097499');" onmouseout="out('1006156668309097499');" style="">2656         private void filterCurrentFolders(long currentScreenId,                                          </span>
<span class="5542015090877593488" onmouseenter="enter('5542015090877593488');" onmouseout="out('5542015090877593488');" style="">2657                 HashMap&lt;Long, ItemInfo&gt; itemsIdMap,                                                      </span>
<span class="5439463415012784721" onmouseenter="enter('5439463415012784721');" onmouseout="out('5439463415012784721');" style="">2658                 HashMap&lt;Long, FolderInfo&gt; folders,                                                       </span>
<span class="-835326304871961386" onmouseenter="enter('-835326304871961386');" onmouseout="out('-835326304871961386');" style="">2659                 HashMap&lt;Long, FolderInfo&gt; currentScreenFolders,                                          </span>
<span class="-5337898381804311151" onmouseenter="enter('-5337898381804311151');" onmouseout="out('-5337898381804311151');" style="">2660                 HashMap&lt;Long, FolderInfo&gt; otherScreenFolders) {                                          </span>
<span  style="">2661                                                                                                          </span>
<span class="5476103458254751398" onmouseenter="enter('5476103458254751398');" onmouseout="out('5476103458254751398');" style="">2662             for (long id : folders.keySet()) {                                                           </span>
<span class="-1043527829048640643" onmouseenter="enter('-1043527829048640643');" onmouseout="out('-1043527829048640643');" style="">2663                 ItemInfo info = itemsIdMap.get(id);                                                      </span>
<span class="2660177146353218833" onmouseenter="enter('2660177146353218833');" onmouseout="out('2660177146353218833');" style="">2664                 FolderInfo folder = folders.get(id);                                                     </span>
<span class="1070396563257369459" onmouseenter="enter('1070396563257369459');" onmouseout="out('1070396563257369459');" style="">2665                 if (info == null || folder == null) continue;                                            </span>
<span class="-2700526009056688618" onmouseenter="enter('-2700526009056688618');" onmouseout="out('-2700526009056688618');" style="">2666                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                    </span>
<span class="-6694119585175412501" onmouseenter="enter('-6694119585175412501');" onmouseout="out('-6694119585175412501');" style="">2667                         info.screenId == currentScreenId) {                                              </span>
<span class="9103793645851851238" onmouseenter="enter('9103793645851851238');" onmouseout="out('9103793645851851238');" style="">2668                     currentScreenFolders.put(id, folder);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2669                 } else {                                                                                 </span>
<span class="2209694610169579401" onmouseenter="enter('2209694610169579401');" onmouseout="out('2209694610169579401');" style="">2670                     otherScreenFolders.put(id, folder);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2671                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2672             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2673         }                                                                                                </span>
<span  style="">2674                                                                                                          </span>
<span class="-1404838629334872973" onmouseenter="enter('-1404838629334872973');" onmouseout="out('-1404838629334872973');" style="">2675         /** Sorts the set of items by hotseat, workspace (spatially from top to bottom, left to          </span>
<span class="2331484748997422212" onmouseenter="enter('2331484748997422212');" onmouseout="out('2331484748997422212');" style="">2676          * right) */                                                                                     </span>
<span class="4197577433481844567" onmouseenter="enter('4197577433481844567');" onmouseout="out('4197577433481844567');" style="">2677         private void sortWorkspaceItemsSpatially(ArrayList&lt;ItemInfo&gt; workspaceItems) {                   </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2678             final LauncherAppState app = LauncherAppState.getInstance();                                 </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2679             final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                          </span>
<span class="7420301678455304067" onmouseenter="enter('7420301678455304067');" onmouseout="out('7420301678455304067');" style="">2680             // XXX: review this                                                                          </span>
<span class="5036789581710507500" onmouseenter="enter('5036789581710507500');" onmouseout="out('5036789581710507500');" style="">2681             Collections.sort(workspaceItems, new Comparator&lt;ItemInfo&gt;() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2682                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2683                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="7519014981914073063" onmouseenter="enter('7519014981914073063');" onmouseout="out('7519014981914073063');" style="">2684                     int cellCountX = (int) grid.numColumns;                                              </span>
<span class="5038685396458105053" onmouseenter="enter('5038685396458105053');" onmouseout="out('5038685396458105053');" style="">2685                     int cellCountY = (int) grid.numRows;                                                 </span>
<span class="2270724071285143981" onmouseenter="enter('2270724071285143981');" onmouseout="out('2270724071285143981');" style="">2686                     int screenOffset = cellCountX * cellCountY;                                          </span>
<span class="-1359829540566141263" onmouseenter="enter('-1359829540566141263');" onmouseout="out('-1359829540566141263');" style="">2687                     int containerOffset = screenOffset * (Launcher.SCREEN_COUNT + 1); // +1 hotseat      </span>
<span class="-5686828087182476360" onmouseenter="enter('-5686828087182476360');" onmouseout="out('-5686828087182476360');" style="">2688                     long lr = (lhs.container * containerOffset + lhs.screenId * screenOffset +           </span>
<span class="7712455780852264002" onmouseenter="enter('7712455780852264002');" onmouseout="out('7712455780852264002');" style="">2689                             lhs.cellY * cellCountX + lhs.cellX);                                         </span>
<span class="4979104026657461493" onmouseenter="enter('4979104026657461493');" onmouseout="out('4979104026657461493');" style="">2690                     long rr = (rhs.container * containerOffset + rhs.screenId * screenOffset +           </span>
<span class="-2381270400025166051" onmouseenter="enter('-2381270400025166051');" onmouseout="out('-2381270400025166051');" style="">2691                             rhs.cellY * cellCountX + rhs.cellX);                                         </span>
<span class="-4118467969899844825" onmouseenter="enter('-4118467969899844825');" onmouseout="out('-4118467969899844825');" style="">2692                     return (int) (lr - rr);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2693                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2694             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2695         }                                                                                                </span>
<span  style="">2696                                                                                                          </span>
<span class="-2914095713166652734" onmouseenter="enter('-2914095713166652734');" onmouseout="out('-2914095713166652734');" style="">2697         private void bindWorkspaceScreens(final Callbacks oldCallbacks,                                  </span>
<span class="-4834279311466229697" onmouseenter="enter('-4834279311466229697');" onmouseout="out('-4834279311466229697');" style="">2698                 final ArrayList&lt;Long&gt; orderedScreens) {                                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2699             final Runnable r = new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2700                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2701                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2702                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2703                     if (callbacks != null) {                                                             </span>
<span class="-657438592163932392" onmouseenter="enter('-657438592163932392');" onmouseout="out('-657438592163932392');" style="">2704                         callbacks.bindScreens(orderedScreens);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2705                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2706                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2707             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2708             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2709         }                                                                                                </span>
<span  style="">2710                                                                                                          </span>
<span class="2462723938814167389" onmouseenter="enter('2462723938814167389');" onmouseout="out('2462723938814167389');" style="">2711         private void bindWorkspaceItems(final Callbacks oldCallbacks,                                    </span>
<span class="3131608111144182051" onmouseenter="enter('3131608111144182051');" onmouseout="out('3131608111144182051');" style="">2712                 final ArrayList&lt;ItemInfo&gt; workspaceItems,                                                </span>
<span class="-9171435870290402492" onmouseenter="enter('-9171435870290402492');" onmouseout="out('-9171435870290402492');" style="">2713                 final ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                       </span>
<span class="-215271553361392889" onmouseenter="enter('-215271553361392889');" onmouseout="out('-215271553361392889');" style="">2714                 final HashMap&lt;Long, FolderInfo&gt; folders,                                                 </span>
<span class="8358584326194096705" onmouseenter="enter('8358584326194096705');" onmouseout="out('8358584326194096705');" style="">2715                 ArrayList&lt;Runnable&gt; deferredBindRunnables) {                                             </span>
<span  style="">2716                                                                                                          </span>
<span class="6705996702729308966" onmouseenter="enter('6705996702729308966');" onmouseout="out('6705996702729308966');" style="">2717             final boolean postOnMainThread = (deferredBindRunnables != null);                            </span>
<span  style="">2718                                                                                                          </span>
<span class="-8582136977498244048" onmouseenter="enter('-8582136977498244048');" onmouseout="out('-8582136977498244048');" style="">2719             // Bind the workspace items                                                                  </span>
<span class="-7354566132986496753" onmouseenter="enter('-7354566132986496753');" onmouseout="out('-7354566132986496753');" style="">2720             int N = workspaceItems.size();                                                               </span>
<span class="8316943469476905111" onmouseenter="enter('8316943469476905111');" onmouseout="out('8316943469476905111');" style="">2721             for (int i = 0; i &lt; N; i += ITEMS_CHUNK) {                                                   </span>
<span class="4892427267481855411" onmouseenter="enter('4892427267481855411');" onmouseout="out('4892427267481855411');" style="">2722                 final int start = i;                                                                     </span>
<span class="-1876539668545683746" onmouseenter="enter('-1876539668545683746');" onmouseout="out('-1876539668545683746');" style="">2723                 final int chunkSize = (i+ITEMS_CHUNK &lt;= N) ? ITEMS_CHUNK : (N-i);                        </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2724                 final Runnable r = new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2725                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2726                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2727                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2728                         if (callbacks != null) {                                                         </span>
<span class="5089922212197568209" onmouseenter="enter('5089922212197568209');" onmouseout="out('5089922212197568209');" style="">2729                             callbacks.bindItems(workspaceItems, start, start+chunkSize,                  </span>
<span class="9106099237950392606" onmouseenter="enter('9106099237950392606');" onmouseout="out('9106099237950392606');" style="">2730                                     false);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2731                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2732                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2733                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2734                 if (postOnMainThread) {                                                                  </span>
<span class="-1789583999881960301" onmouseenter="enter('-1789583999881960301');" onmouseout="out('-1789583999881960301');" style="">2735                     synchronized (deferredBindRunnables) {                                               </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2736                         deferredBindRunnables.add(r);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2737                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2738                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2739                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2740                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2741             }                                                                                            </span>
<span  style="">2742                                                                                                          </span>
<span class="-3289339942871725334" onmouseenter="enter('-3289339942871725334');" onmouseout="out('-3289339942871725334');" style="">2743             // Bind the folders                                                                          </span>
<span class="-7483796215228262161" onmouseenter="enter('-7483796215228262161');" onmouseout="out('-7483796215228262161');" style="">2744             if (!folders.isEmpty()) {                                                                    </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2745                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2746                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2747                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2748                         if (callbacks != null) {                                                         </span>
<span class="-5386182796873001970" onmouseenter="enter('-5386182796873001970');" onmouseout="out('-5386182796873001970');" style="">2749                             callbacks.bindFolders(folders);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2750                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2751                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2752                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2753                 if (postOnMainThread) {                                                                  </span>
<span class="-1789583999881960301" onmouseenter="enter('-1789583999881960301');" onmouseout="out('-1789583999881960301');" style="">2754                     synchronized (deferredBindRunnables) {                                               </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2755                         deferredBindRunnables.add(r);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2756                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2757                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2758                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2759                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2760             }                                                                                            </span>
<span  style="">2761                                                                                                          </span>
<span class="-3655716380766613611" onmouseenter="enter('-3655716380766613611');" onmouseout="out('-3655716380766613611');" style="">2762             // Bind the widgets, one at a time                                                           </span>
<span class="-8489280060790503293" onmouseenter="enter('-8489280060790503293');" onmouseout="out('-8489280060790503293');" style="">2763             N = appWidgets.size();                                                                       </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2764             for (int i = 0; i &lt; N; i++) {                                                                </span>
<span class="1244623159456991119" onmouseenter="enter('1244623159456991119');" onmouseout="out('1244623159456991119');" style="">2765                 final LauncherAppWidgetInfo widget = appWidgets.get(i);                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2766                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2767                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2768                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2769                         if (callbacks != null) {                                                         </span>
<span class="-6128295543460120155" onmouseenter="enter('-6128295543460120155');" onmouseout="out('-6128295543460120155');" style="">2770                             callbacks.bindAppWidget(widget);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2771                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2772                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2773                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2774                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2775                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2776                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2777                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2778                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2779             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2780         }                                                                                                </span>
<span  style="">2781                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2782         /**                                                                                              </span>
<span class="2657234197326019604" onmouseenter="enter('2657234197326019604');" onmouseout="out('2657234197326019604');" style="">2783          * Binds all loaded data to actual views on the main thread.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2784          */                                                                                              </span>
<span class="2515782410575020505" onmouseenter="enter('2515782410575020505');" onmouseout="out('2515782410575020505');" style="">2785         private void bindWorkspace(int synchronizeBindPage, final boolean isUpgradePath) {               </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2786             final long t = SystemClock.uptimeMillis();                                                   </span>
<span class="-6867724507948428803" onmouseenter="enter('-6867724507948428803');" onmouseout="out('-6867724507948428803');" style="">2787             Runnable r;                                                                                  </span>
<span  style="">2788                                                                                                          </span>
<span class="7433359470613785749" onmouseenter="enter('7433359470613785749');" onmouseout="out('7433359470613785749');" style="">2789             // Don&#x27;t use these two variables in any of the callback runnables.                           </span>
<span class="-3941343762342876699" onmouseenter="enter('-3941343762342876699');" onmouseout="out('-3941343762342876699');" style="">2790             // Otherwise we hold a reference to them.                                                    </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2791             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2792             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2793                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="3451244406562267616" onmouseenter="enter('3451244406562267616');" onmouseout="out('3451244406562267616');" style="">2794                 Log.w(TAG, &quot;LoaderTask running with no launcher&quot;);                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2795                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2796             }                                                                                            </span>
<span  style="">2797                                                                                                          </span>
<span class="1896400737527502430" onmouseenter="enter('1896400737527502430');" onmouseout="out('1896400737527502430');" style="">2798             // Save a copy of all the bg-thread collections                                              </span>
<span class="8376150118125167095" onmouseenter="enter('8376150118125167095');" onmouseout="out('8376150118125167095');" style="">2799             ArrayList&lt;ItemInfo&gt; workspaceItems = new ArrayList&lt;ItemInfo&gt;();                              </span>
<span class="-9044996375001817267" onmouseenter="enter('-9044996375001817267');" onmouseout="out('-9044996375001817267');" style="">2800             ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets =                                                </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2801                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1486993560554459234" onmouseenter="enter('1486993560554459234');" onmouseout="out('1486993560554459234');" style="">2802             HashMap&lt;Long, FolderInfo&gt; folders = new HashMap&lt;Long, FolderInfo&gt;();                         </span>
<span class="-2531396011753159513" onmouseenter="enter('-2531396011753159513');" onmouseout="out('-2531396011753159513');" style="">2803             HashMap&lt;Long, ItemInfo&gt; itemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                          </span>
<span class="2122428953856879736" onmouseenter="enter('2122428953856879736');" onmouseout="out('2122428953856879736');" style="">2804             ArrayList&lt;Long&gt; orderedScreenIds = new ArrayList&lt;Long&gt;();                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2805             synchronized (sBgLock) {                                                                     </span>
<span class="2318166879831487746" onmouseenter="enter('2318166879831487746');" onmouseout="out('2318166879831487746');" style="">2806                 workspaceItems.addAll(sBgWorkspaceItems);                                                </span>
<span class="5776161881735381038" onmouseenter="enter('5776161881735381038');" onmouseout="out('5776161881735381038');" style="">2807                 appWidgets.addAll(sBgAppWidgets);                                                        </span>
<span class="1929780610659636161" onmouseenter="enter('1929780610659636161');" onmouseout="out('1929780610659636161');" style="">2808                 folders.putAll(sBgFolders);                                                              </span>
<span class="3382494184063613290" onmouseenter="enter('3382494184063613290');" onmouseout="out('3382494184063613290');" style="">2809                 itemsIdMap.putAll(sBgItemsIdMap);                                                        </span>
<span class="-8476373911620507604" onmouseenter="enter('-8476373911620507604');" onmouseout="out('-8476373911620507604');" style="">2810                 orderedScreenIds.addAll(sBgWorkspaceScreens);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2811             }                                                                                            </span>
<span  style="">2812                                                                                                          </span>
<span class="-6727444800593242016" onmouseenter="enter('-6727444800593242016');" onmouseout="out('-6727444800593242016');" style="">2813             final boolean isLoadingSynchronously =                                                       </span>
<span class="-5819807820500279130" onmouseenter="enter('-5819807820500279130');" onmouseout="out('-5819807820500279130');" style="">2814                     synchronizeBindPage != PagedView.INVALID_RESTORE_PAGE;                               </span>
<span class="2949253642379813881" onmouseenter="enter('2949253642379813881');" onmouseout="out('2949253642379813881');" style="">2815             int currScreen = isLoadingSynchronously ? synchronizeBindPage :                              </span>
<span class="-3178994835189561329" onmouseenter="enter('-3178994835189561329');" onmouseout="out('-3178994835189561329');" style="">2816                 oldCallbacks.getCurrentWorkspaceScreen();                                                </span>
<span class="-8072033936298463796" onmouseenter="enter('-8072033936298463796');" onmouseout="out('-8072033936298463796');" style="">2817             if (currScreen &gt;= orderedScreenIds.size()) {                                                 </span>
<span class="6825640116866860115" onmouseenter="enter('6825640116866860115');" onmouseout="out('6825640116866860115');" style="">2818                 // There may be no workspace screens (just hotseat items and an empty page).             </span>
<span class="-1349681419310339536" onmouseenter="enter('-1349681419310339536');" onmouseout="out('-1349681419310339536');" style="">2819                 currScreen = PagedView.INVALID_RESTORE_PAGE;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2820             }                                                                                            </span>
<span class="-335994314648006585" onmouseenter="enter('-335994314648006585');" onmouseout="out('-335994314648006585');" style="">2821             final int currentScreen = currScreen;                                                        </span>
<span class="2351793782480240365" onmouseenter="enter('2351793782480240365');" onmouseout="out('2351793782480240365');" style="">2822             final long currentScreenId = currentScreen &lt; 0                                               </span>
<span class="-3569859106639415689" onmouseenter="enter('-3569859106639415689');" onmouseout="out('-3569859106639415689');" style="">2823                     ? INVALID_SCREEN_ID : orderedScreenIds.get(currentScreen);                           </span>
<span  style="">2824                                                                                                          </span>
<span class="6814554556760518768" onmouseenter="enter('6814554556760518768');" onmouseout="out('6814554556760518768');" style="">2825             // Load all the items that are on the current page first (and in the process, unbind         </span>
<span class="-8025412368184811901" onmouseenter="enter('-8025412368184811901');" onmouseout="out('-8025412368184811901');" style="">2826             // all the existing workspace items before we call startBinding() below.                     </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="">2827             unbindWorkspaceItemsOnMainThread();                                                          </span>
<span  style="">2828                                                                                                          </span>
<span class="-2890632990436762470" onmouseenter="enter('-2890632990436762470');" onmouseout="out('-2890632990436762470');" style="">2829             // Separate the items that are on the current screen, and all the other remaining items      </span>
<span class="-1725873569461296561" onmouseenter="enter('-1725873569461296561');" onmouseout="out('-1725873569461296561');" style="">2830             ArrayList&lt;ItemInfo&gt; currentWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                       </span>
<span class="-3652813720009519444" onmouseenter="enter('-3652813720009519444');" onmouseout="out('-3652813720009519444');" style="">2831             ArrayList&lt;ItemInfo&gt; otherWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="1957921863279922763" onmouseenter="enter('1957921863279922763');" onmouseout="out('1957921863279922763');" style="">2832             ArrayList&lt;LauncherAppWidgetInfo&gt; currentAppWidgets =                                         </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2833                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="-340469327534164281" onmouseenter="enter('-340469327534164281');" onmouseout="out('-340469327534164281');" style="">2834             ArrayList&lt;LauncherAppWidgetInfo&gt; otherAppWidgets =                                           </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2835                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1678682221916250445" onmouseenter="enter('1678682221916250445');" onmouseout="out('1678682221916250445');" style="">2836             HashMap&lt;Long, FolderInfo&gt; currentFolders = new HashMap&lt;Long, FolderInfo&gt;();                  </span>
<span class="6055163357301009248" onmouseenter="enter('6055163357301009248');" onmouseout="out('6055163357301009248');" style="">2837             HashMap&lt;Long, FolderInfo&gt; otherFolders = new HashMap&lt;Long, FolderInfo&gt;();                    </span>
<span  style="">2838                                                                                                          </span>
<span class="-6089822518842723893" onmouseenter="enter('-6089822518842723893');" onmouseout="out('-6089822518842723893');" style="">2839             filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems,          </span>
<span class="-8375758480995422912" onmouseenter="enter('-8375758480995422912');" onmouseout="out('-8375758480995422912');" style="">2840                     otherWorkspaceItems);                                                                </span>
<span class="-866463348054163616" onmouseenter="enter('-866463348054163616');" onmouseout="out('-866463348054163616');" style="">2841             filterCurrentAppWidgets(currentScreenId, appWidgets, currentAppWidgets,                      </span>
<span class="4579895579276341407" onmouseenter="enter('4579895579276341407');" onmouseout="out('4579895579276341407');" style="">2842                     otherAppWidgets);                                                                    </span>
<span class="-8098352111604685386" onmouseenter="enter('-8098352111604685386');" onmouseout="out('-8098352111604685386');" style="">2843             filterCurrentFolders(currentScreenId, itemsIdMap, folders, currentFolders,                   </span>
<span class="9146999591596374961" onmouseenter="enter('9146999591596374961');" onmouseout="out('9146999591596374961');" style="">2844                     otherFolders);                                                                       </span>
<span class="-3334490908115707670" onmouseenter="enter('-3334490908115707670');" onmouseout="out('-3334490908115707670');" style="">2845             sortWorkspaceItemsSpatially(currentWorkspaceItems);                                          </span>
<span class="7557616132302919391" onmouseenter="enter('7557616132302919391');" onmouseout="out('7557616132302919391');" style="">2846             sortWorkspaceItemsSpatially(otherWorkspaceItems);                                            </span>
<span  style="">2847                                                                                                          </span>
<span class="-5681027322920042460" onmouseenter="enter('-5681027322920042460');" onmouseout="out('-5681027322920042460');" style="">2848             // Tell the workspace that we&#x27;re about to start binding items                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2849             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2850                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2851                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2852                     if (callbacks != null) {                                                             </span>
<span class="-4858717627969339167" onmouseenter="enter('-4858717627969339167');" onmouseout="out('-4858717627969339167');" style="">2853                         callbacks.startBinding();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2854                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2855                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2856             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2857             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span  style="">2858                                                                                                          </span>
<span class="5270406270692369283" onmouseenter="enter('5270406270692369283');" onmouseout="out('5270406270692369283');" style="">2859             bindWorkspaceScreens(oldCallbacks, orderedScreenIds);                                        </span>
<span  style="">2860                                                                                                          </span>
<span class="-8614752954403058095" onmouseenter="enter('-8614752954403058095');" onmouseout="out('-8614752954403058095');" style="">2861             // Load items on the current page                                                            </span>
<span class="7514755776427017102" onmouseenter="enter('7514755776427017102');" onmouseout="out('7514755776427017102');" style="">2862             bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets,                   </span>
<span class="-6104188658851873503" onmouseenter="enter('-6104188658851873503');" onmouseout="out('-6104188658851873503');" style="">2863                     currentFolders, null);                                                               </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2864             if (isLoadingSynchronously) {                                                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2865                 r = new Runnable() {                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2866                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2867                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="1520569606497568986" onmouseenter="enter('1520569606497568986');" onmouseout="out('1520569606497568986');" style="">2868                         if (callbacks != null &amp;&amp; currentScreen != PagedView.INVALID_RESTORE_PAGE) {      </span>
<span class="-8453570054408401460" onmouseenter="enter('-8453570054408401460');" onmouseout="out('-8453570054408401460');" style="">2869                             callbacks.onPageBoundSynchronously(currentScreen);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2870                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2871                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2872                 };                                                                                       </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2873                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2874             }                                                                                            </span>
<span  style="">2875                                                                                                          </span>
<span class="-5413736965388393233" onmouseenter="enter('-5413736965388393233');" onmouseout="out('-5413736965388393233');" style="">2876             // Load all the remaining pages (if we are loading synchronously, we want to defer this      </span>
<span class="-2955787106587599134" onmouseenter="enter('-2955787106587599134');" onmouseout="out('-2955787106587599134');" style="">2877             // work until after the first render)                                                        </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">2878             synchronized (mDeferredBindRunnables) {                                                      </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">2879                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2880             }                                                                                            </span>
<span class="5032352887958756295" onmouseenter="enter('5032352887958756295');" onmouseout="out('5032352887958756295');" style="">2881             bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders,         </span>
<span class="-2167949041803207061" onmouseenter="enter('-2167949041803207061');" onmouseout="out('-2167949041803207061');" style="">2882                     (isLoadingSynchronously ? mDeferredBindRunnables : null));                           </span>
<span  style="">2883                                                                                                          </span>
<span class="4011061048965913553" onmouseenter="enter('4011061048965913553');" onmouseout="out('4011061048965913553');" style="">2884             // Tell the workspace that we&#x27;re done binding items                                          </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2885             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2886                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2887                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2888                     if (callbacks != null) {                                                             </span>
<span class="4571657590383009749" onmouseenter="enter('4571657590383009749');" onmouseout="out('4571657590383009749');" style="">2889                         callbacks.finishBindingItems(isUpgradePath);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2890                     }                                                                                    </span>
<span  style="">2891                                                                                                          </span>
<span class="3327220122133784387" onmouseenter="enter('3327220122133784387');" onmouseout="out('3327220122133784387');" style="">2892                     // If we&#x27;re profiling, ensure this is the last thing in the queue.                   </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2893                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="355954012869630075" onmouseenter="enter('355954012869630075');" onmouseout="out('355954012869630075');" style="">2894                         Log.d(TAG, &quot;bound workspace in &quot;                                                 </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2895                             + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2896                     }                                                                                    </span>
<span  style="">2897                                                                                                          </span>
<span class="-2372807547969983284" onmouseenter="enter('-2372807547969983284');" onmouseout="out('-2372807547969983284');" style="">2898                     mIsLoadingAndBindingWorkspace = false;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2899                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2900             };                                                                                           </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2901             if (isLoadingSynchronously) {                                                                </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">2902                 synchronized (mDeferredBindRunnables) {                                                  </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="">2903                     mDeferredBindRunnables.add(r);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2904                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2905             } else {                                                                                     </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2906                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2907             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2908         }                                                                                                </span>
<span  style="">2909                                                                                                          </span>
<span class="-8837645024880398734" onmouseenter="enter('-8837645024880398734');" onmouseout="out('-8837645024880398734');" style="">2910         private void loadAndBindAllApps() {                                                              </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2911             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-2830976254331120227" onmouseenter="enter('-2830976254331120227');" onmouseout="out('-2830976254331120227');" style="">2912                 Log.d(TAG, &quot;loadAndBindAllApps mAllAppsLoaded=&quot; + mAllAppsLoaded);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2913             }                                                                                            </span>
<span class="-6125216986221494355" onmouseenter="enter('-6125216986221494355');" onmouseout="out('-6125216986221494355');" style="">2914             if (!mAllAppsLoaded) {                                                                       </span>
<span class="5842757820135196564" onmouseenter="enter('5842757820135196564');" onmouseout="out('5842757820135196564');" style="">2915                 loadAllApps();                                                                           </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">2916                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2917                     if (mStopped) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2918                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2919                     }                                                                                    </span>
<span class="4623635226903027710" onmouseenter="enter('4623635226903027710');" onmouseout="out('4623635226903027710');" style="">2920                     mAllAppsLoaded = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2921                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2922             } else {                                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">2923                 onlyBindAllApps();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2924             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2925         }                                                                                                </span>
<span  style="">2926                                                                                                          </span>
<span class="4707433981787810272" onmouseenter="enter('4707433981787810272');" onmouseout="out('4707433981787810272');" style="">2927         private void onlyBindAllApps() {                                                                 </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2928             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2929             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2930                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="1659909424723635951" onmouseenter="enter('1659909424723635951');" onmouseout="out('1659909424723635951');" style="">2931                 Log.w(TAG, &quot;LoaderTask running with no launcher (onlyBindAllApps)&quot;);                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2932                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2933             }                                                                                            </span>
<span  style="">2934                                                                                                          </span>
<span class="904073869424416989" onmouseenter="enter('904073869424416989');" onmouseout="out('904073869424416989');" style="">2935             // shallow copy                                                                              </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">2936             @SuppressWarnings(&quot;unchecked&quot;)                                                               </span>
<span class="6400779648201267598" onmouseenter="enter('6400779648201267598');" onmouseout="out('6400779648201267598');" style="">2937             final ArrayList&lt;AppInfo&gt; list                                                                </span>
<span class="-2385577679344520462" onmouseenter="enter('-2385577679344520462');" onmouseout="out('-2385577679344520462');" style="">2938                     = (ArrayList&lt;AppInfo&gt;) mBgAllAppsList.data.clone();                                  </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2939             Runnable r = new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2940                 public void run() {                                                                      </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2941                     final long t = SystemClock.uptimeMillis();                                           </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2942                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2943                     if (callbacks != null) {                                                             </span>
<span class="-4175293191087427555" onmouseenter="enter('-4175293191087427555');" onmouseout="out('-4175293191087427555');" style="">2944                         callbacks.bindAllApplications(list);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2945                     }                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2946                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="-8852680552322187165" onmouseenter="enter('-8852680552322187165');" onmouseout="out('-8852680552322187165');" style="">2947                         Log.d(TAG, &quot;bound all &quot; + list.size() + &quot; apps from cache in &quot;                   </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2948                                 + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2949                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2950                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2951             };                                                                                           </span>
<span class="1625697599418198126" onmouseenter="enter('1625697599418198126');" onmouseout="out('1625697599418198126');" style="">2952             boolean isRunningOnMainThread = !(sWorkerThread.getThreadId() == Process.myTid());           </span>
<span class="-5455987777066046644" onmouseenter="enter('-5455987777066046644');" onmouseout="out('-5455987777066046644');" style="">2953             if (isRunningOnMainThread) {                                                                 </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style="">2954                 r.run();                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2955             } else {                                                                                     </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="">2956                 mHandler.post(r);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2957             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2958         }                                                                                                </span>
<span  style="">2959                                                                                                          </span>
<span class="-6895852158956881814" onmouseenter="enter('-6895852158956881814');" onmouseout="out('-6895852158956881814');" style="">2960         private void loadAllApps() {                                                                     </span>
<span class="3240137791137450764" onmouseenter="enter('3240137791137450764');" onmouseout="out('3240137791137450764');" style="">2961             final long loadTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                        </span>
<span  style="">2962                                                                                                          </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2963             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2964             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2965                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="-6509823964207432628" onmouseenter="enter('-6509823964207432628');" onmouseout="out('-6509823964207432628');" style="">2966                 Log.w(TAG, &quot;LoaderTask running with no launcher (loadAllApps)&quot;);                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2967                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2968             }                                                                                            </span>
<span  style="">2969                                                                                                          </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="">2970             final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                              </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="">2971             mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                            </span>
<span  style="">2972                                                                                                          </span>
<span class="-3689765283860688946" onmouseenter="enter('-3689765283860688946');" onmouseout="out('-3689765283860688946');" style="">2973             final List&lt;UserHandleCompat&gt; profiles = mUserManager.getUserProfiles();                      </span>
<span  style="">2974                                                                                                          </span>
<span class="2323997493385795900" onmouseenter="enter('2323997493385795900');" onmouseout="out('2323997493385795900');" style="">2975             // Clear the list of apps                                                                    </span>
<span class="-3100741238331493656" onmouseenter="enter('-3100741238331493656');" onmouseout="out('-3100741238331493656');" style="">2976             mBgAllAppsList.clear();                                                                      </span>
<span class="-2262518428251923925" onmouseenter="enter('-2262518428251923925');" onmouseout="out('-2262518428251923925');" style="">2977             for (UserHandleCompat user : profiles) {                                                     </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="">2978                 // Query for the set of apps                                                             </span>
<span class="6799319218362813943" onmouseenter="enter('6799319218362813943');" onmouseout="out('6799319218362813943');" style="">2979                 final long qiaTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                     </span>
<span class="2012422809707549193" onmouseenter="enter('2012422809707549193');" onmouseout="out('2012422809707549193');" style="">2980                 List&lt;LauncherActivityInfoCompat&gt; apps = mLauncherApps.getActivityList(null, user);       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2981                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="2295985568720272905" onmouseenter="enter('2295985568720272905');" onmouseout="out('2295985568720272905');" style="">2982                     Log.d(TAG, &quot;getActivityList took &quot;                                                   </span>
<span class="-4615420342619003975" onmouseenter="enter('-4615420342619003975');" onmouseout="out('-4615420342619003975');" style="">2983                             + (SystemClock.uptimeMillis()-qiaTime) + &quot;ms for user &quot; + user);             </span>
<span class="-305887566992077245" onmouseenter="enter('-305887566992077245');" onmouseout="out('-305887566992077245');" style="">2984                     Log.d(TAG, &quot;getActivityList got &quot; + apps.size() + &quot; apps for user &quot; + user);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2985                 }                                                                                        </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="">2986                 // Fail if we don&#x27;t have any apps                                                        </span>
<span class="-1385682343056466434" onmouseenter="enter('-1385682343056466434');" onmouseout="out('-1385682343056466434');" style="">2987                 if (apps == null || apps.isEmpty()) {                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2988                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2989                 }                                                                                        </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="">2990                 // Sort the applications by name                                                         </span>
<span class="5879018485786384871" onmouseenter="enter('5879018485786384871');" onmouseout="out('5879018485786384871');" style="">2991                 final long sortTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                    </span>
<span class="3347614076781191804" onmouseenter="enter('3347614076781191804');" onmouseout="out('3347614076781191804');" style="">2992                 Collections.sort(apps,                                                                   </span>
<span class="-5419021632247745878" onmouseenter="enter('-5419021632247745878');" onmouseout="out('-5419021632247745878');" style="">2993                         new LauncherModel.ShortcutNameComparator(mLabelCache));                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2994                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="8116347759372038508" onmouseenter="enter('8116347759372038508');" onmouseout="out('8116347759372038508');" style="">2995                     Log.d(TAG, &quot;sort took &quot;                                                              </span>
<span class="992817212926202968" onmouseenter="enter('992817212926202968');" onmouseout="out('992817212926202968');" style="">2996                             + (SystemClock.uptimeMillis()-sortTime) + &quot;ms&quot;);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2997                 }                                                                                        </span>
<span  style="">2998                                                                                                          </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="">2999                 // Create the ApplicationInfos                                                           </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="">3000                 for (int i = 0; i &lt; apps.size(); i++) {                                                  </span>
<span class="236419152399396874" onmouseenter="enter('236419152399396874');" onmouseout="out('236419152399396874');" style="">3001                     LauncherActivityInfoCompat app = apps.get(i);                                        </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="">3002                     // This builds the icon bitmaps.                                                     </span>
<span class="-5742259461869454243" onmouseenter="enter('-5742259461869454243');" onmouseout="out('-5742259461869454243');" style="">3003                     mBgAllAppsList.add(new AppInfo(mContext, app, user, mIconCache, mLabelCache));       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3004                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3005             }                                                                                            </span>
<span class="-5221747652878631284" onmouseenter="enter('-5221747652878631284');" onmouseout="out('-5221747652878631284');" style="">3006             // Huh? Shouldn&#x27;t this be inside the Runnable below?                                         </span>
<span class="4457761250277868019" onmouseenter="enter('4457761250277868019');" onmouseout="out('4457761250277868019');" style="">3007             final ArrayList&lt;AppInfo&gt; added = mBgAllAppsList.added;                                       </span>
<span class="3218431008368817671" onmouseenter="enter('3218431008368817671');" onmouseout="out('3218431008368817671');" style="">3008             mBgAllAppsList.added = new ArrayList&lt;AppInfo&gt;();                                             </span>
<span  style="">3009                                                                                                          </span>
<span class="2526791049904400058" onmouseenter="enter('2526791049904400058');" onmouseout="out('2526791049904400058');" style="">3010             // Post callback on main thread                                                              </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3011             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3012                 public void run() {                                                                      </span>
<span class="-2007882421121122273" onmouseenter="enter('-2007882421121122273');" onmouseout="out('-2007882421121122273');" style="">3013                     final long bindTime = SystemClock.uptimeMillis();                                    </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">3014                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">3015                     if (callbacks != null) {                                                             </span>
<span class="8095088373687662981" onmouseenter="enter('8095088373687662981');" onmouseout="out('8095088373687662981');" style="">3016                         callbacks.bindAllApplications(added);                                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3017                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1059969227192257889" onmouseenter="enter('1059969227192257889');" onmouseout="out('1059969227192257889');" style="">3018                             Log.d(TAG, &quot;bound &quot; + added.size() + &quot; apps in &quot;                             </span>
<span class="-7437359873458345222" onmouseenter="enter('-7437359873458345222');" onmouseout="out('-7437359873458345222');" style="">3019                                 + (SystemClock.uptimeMillis() - bindTime) + &quot;ms&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3020                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3021                     } else {                                                                             </span>
<span class="7641212838781589328" onmouseenter="enter('7641212838781589328');" onmouseout="out('7641212838781589328');" style="">3022                         Log.i(TAG, &quot;not binding apps: no Launcher activity&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3023                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3024                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3025             });                                                                                          </span>
<span  style="">3026                                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3027             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-4702241865893587262" onmouseenter="enter('-4702241865893587262');" onmouseout="out('-4702241865893587262');" style="">3028                 Log.d(TAG, &quot;Icons processed in &quot;                                                         </span>
<span class="-1277503613614461490" onmouseenter="enter('-1277503613614461490');" onmouseout="out('-1277503613614461490');" style="">3029                         + (SystemClock.uptimeMillis() - loadTime) + &quot;ms&quot;);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3030             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3031         }                                                                                                </span>
<span  style="">3032                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">3033         public void dumpState() {                                                                        </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">3034             synchronized (sBgLock) {                                                                     </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="">3035                 Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                          </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="">3036                 Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                  </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="">3037                 Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                          </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="">3038                 Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);          </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="">3039                 Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3040             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3041         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3042     }                                                                                                    </span>
<span  style="">3043                                                                                                          </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="">3044     void enqueuePackageUpdated(PackageUpdatedTask task) {                                                </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="">3045         sWorker.post(task);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3046     }                                                                                                    </span>
<span  style="">3047                                                                                                          </span>
<span class="-2155382700972431684" onmouseenter="enter('-2155382700972431684');" onmouseout="out('-2155382700972431684');" style="">3048     private class AppsAvailabilityCheck extends BroadcastReceiver {                                      </span>
<span  style="">3049                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3050         @Override                                                                                        </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">3051         public void onReceive(Context context, Intent intent) {                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">3052             synchronized (sBgLock) {                                                                     </span>
<span class="4353137230087495395" onmouseenter="enter('4353137230087495395');" onmouseout="out('4353137230087495395');" style="">3053                 final LauncherAppsCompat launcherApps = LauncherAppsCompat                               </span>
<span class="7982344973763927300" onmouseenter="enter('7982344973763927300');" onmouseout="out('7982344973763927300');" style="">3054                         .getInstance(mApp.getContext());                                                 </span>
<span class="-4787354412045768116" onmouseenter="enter('-4787354412045768116');" onmouseout="out('-4787354412045768116');" style="">3055                 ArrayList&lt;String&gt; packagesRemoved;                                                       </span>
<span class="4244873154676657454" onmouseenter="enter('4244873154676657454');" onmouseout="out('4244873154676657454');" style="">3056                 for (Entry&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; entry : sPendingPackages.entrySet()) {     </span>
<span class="5975107845149456463" onmouseenter="enter('5975107845149456463');" onmouseout="out('5975107845149456463');" style="">3057                     UserHandleCompat user = entry.getKey();                                              </span>
<span class="-667022728008343360" onmouseenter="enter('-667022728008343360');" onmouseout="out('-667022728008343360');" style="">3058                     packagesRemoved = new ArrayList&lt;String&gt;();                                           </span>
<span class="1474457728386669675" onmouseenter="enter('1474457728386669675');" onmouseout="out('1474457728386669675');" style="">3059                     for (String pkg : entry.getValue()) {                                                </span>
<span class="-3589045475490406733" onmouseenter="enter('-3589045475490406733');" onmouseout="out('-3589045475490406733');" style="">3060                         if (!launcherApps.isPackageEnabledForProfile(pkg, user)) {                       </span>
<span class="-1955449888814909626" onmouseenter="enter('-1955449888814909626');" onmouseout="out('-1955449888814909626');" style="">3061                             Launcher.addDumpLog(TAG, &quot;Package not found: &quot; + pkg, true);                 </span>
<span class="-7762323097919758551" onmouseenter="enter('-7762323097919758551');" onmouseout="out('-7762323097919758551');" style="">3062                             packagesRemoved.add(pkg);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3063                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3064                     }                                                                                    </span>
<span class="-1545108570433514025" onmouseenter="enter('-1545108570433514025');" onmouseout="out('-1545108570433514025');" style="">3065                     if (!packagesRemoved.isEmpty()) {                                                    </span>
<span class="7608410434352572746" onmouseenter="enter('7608410434352572746');" onmouseout="out('7608410434352572746');" style="">3066                         enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_REMOVE,       </span>
<span class="-7140992629790434736" onmouseenter="enter('-7140992629790434736');" onmouseout="out('-7140992629790434736');" style="">3067                                 packagesRemoved.toArray(new String[packagesRemoved.size()]), user));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3068                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3069                 }                                                                                        </span>
<span class="483878637633217436" onmouseenter="enter('483878637633217436');" onmouseout="out('483878637633217436');" style="">3070                 sPendingPackages.clear();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3071             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3072         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3073     }                                                                                                    </span>
<span  style="">3074                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3075     /**                                                                                                  </span>
<span class="-4757889214551148663" onmouseenter="enter('-4757889214551148663');" onmouseout="out('-4757889214551148663');" style="">3076      * Workaround to re-check unrestored items, in-case they were installed but the Package-ADD          </span>
<span class="-7981308590935764825" onmouseenter="enter('-7981308590935764825');" onmouseout="out('-7981308590935764825');" style="">3077      * runnable was missed by the launcher.                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3078      */                                                                                                  </span>
<span class="-1837604298505960192" onmouseenter="enter('-1837604298505960192');" onmouseout="out('-1837604298505960192');" style="">3079     public void recheckRestoredItems(final Context context) {                                            </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">3080         Runnable r = new Runnable() {                                                                    </span>
<span  style="">3081                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3082             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3083             public void run() {                                                                          </span>
<span class="4897732594040868406" onmouseenter="enter('4897732594040868406');" onmouseout="out('4897732594040868406');" style="">3084                 LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);               </span>
<span class="2615938583470046073" onmouseenter="enter('2615938583470046073');" onmouseout="out('2615938583470046073');" style="">3085                 HashSet&lt;String&gt; installedPackages = new HashSet&lt;String&gt;();                               </span>
<span class="-7713836903288582020" onmouseenter="enter('-7713836903288582020');" onmouseout="out('-7713836903288582020');" style="">3086                 UserHandleCompat user = UserHandleCompat.myUserHandle();                                 </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">3087                 synchronized(sBgLock) {                                                                  </span>
<span class="-4290363400846595778" onmouseenter="enter('-4290363400846595778');" onmouseout="out('-4290363400846595778');" style="">3088                     for (ItemInfo info : sBgItemsIdMap.values()) {                                       </span>
<span class="3613572740963864398" onmouseenter="enter('3613572740963864398');" onmouseout="out('3613572740963864398');" style="">3089                         if (info instanceof ShortcutInfo) {                                              </span>
<span class="-639177275705060315" onmouseenter="enter('-639177275705060315');" onmouseout="out('-639177275705060315');" style="">3090                             ShortcutInfo si = (ShortcutInfo) info;                                       </span>
<span class="7536634611316201502" onmouseenter="enter('7536634611316201502');" onmouseout="out('7536634611316201502');" style="">3091                             if (si.isPromise() &amp;&amp; si.getTargetComponent() != null                        </span>
<span class="5125464606683441448" onmouseenter="enter('5125464606683441448');" onmouseout="out('5125464606683441448');" style="">3092                                     &amp;&amp; launcherApps.isPackageEnabledForProfile(                          </span>
<span class="8387940407390797707" onmouseenter="enter('8387940407390797707');" onmouseout="out('8387940407390797707');" style="">3093                                             si.getTargetComponent().getPackageName(), user)) {           </span>
<span class="8027032983651882823" onmouseenter="enter('8027032983651882823');" onmouseout="out('8027032983651882823');" style="">3094                                 installedPackages.add(si.getTargetComponent().getPackageName());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3095                             }                                                                            </span>
<span class="-1966513537137476875" onmouseenter="enter('-1966513537137476875');" onmouseout="out('-1966513537137476875');" style="">3096                         } else if (info instanceof LauncherAppWidgetInfo) {                              </span>
<span class="-3531080121586908110" onmouseenter="enter('-3531080121586908110');" onmouseout="out('-3531080121586908110');" style="">3097                             LauncherAppWidgetInfo widget = (LauncherAppWidgetInfo) info;                 </span>
<span class="-6148029265216954679" onmouseenter="enter('-6148029265216954679');" onmouseout="out('-6148029265216954679');" style="">3098                             if (widget.hasRestoreFlag(LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY)     </span>
<span class="5125464606683441448" onmouseenter="enter('5125464606683441448');" onmouseout="out('5125464606683441448');" style="">3099                                     &amp;&amp; launcherApps.isPackageEnabledForProfile(                          </span>
<span class="4286562368203116307" onmouseenter="enter('4286562368203116307');" onmouseout="out('4286562368203116307');" style="">3100                                             widget.providerName.getPackageName(), user)) {               </span>
<span class="-5968826008275428630" onmouseenter="enter('-5968826008275428630');" onmouseout="out('-5968826008275428630');" style="">3101                                 installedPackages.add(widget.providerName.getPackageName());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3102                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3103                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3104                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3105                 }                                                                                        </span>
<span  style="">3106                                                                                                          </span>
<span class="-8755538775344321333" onmouseenter="enter('-8755538775344321333');" onmouseout="out('-8755538775344321333');" style="">3107                 if (!installedPackages.isEmpty()) {                                                      </span>
<span class="1551205659826155261" onmouseenter="enter('1551205659826155261');" onmouseout="out('1551205659826155261');" style="">3108                     final ArrayList&lt;AppInfo&gt; restoredApps = new ArrayList&lt;AppInfo&gt;();                    </span>
<span class="-3020018355032355950" onmouseenter="enter('-3020018355032355950');" onmouseout="out('-3020018355032355950');" style="">3109                     for (String pkg : installedPackages) {                                               </span>
<span class="-1472387192310078173" onmouseenter="enter('-1472387192310078173');" onmouseout="out('-1472387192310078173');" style="">3110                         for (LauncherActivityInfoCompat info : launcherApps.getActivityList(pkg, user)) {</span>
<span class="-4626697810297530275" onmouseenter="enter('-4626697810297530275');" onmouseout="out('-4626697810297530275');" style="">3111                             restoredApps.add(new AppInfo(context, info, user, mIconCache, null));        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3112                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3113                     }                                                                                    </span>
<span  style="">3114                                                                                                          </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">3115                     final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;            </span>
<span class="838327603557009686" onmouseenter="enter('838327603557009686');" onmouseout="out('838327603557009686');" style="">3116                     if (!restoredApps.isEmpty()) {                                                       </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3117                         mHandler.post(new Runnable() {                                                   </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3118                             public void run() {                                                          </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3119                                 Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;             </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3120                                 if (callbacks == cb &amp;&amp; cb != null) {                                     </span>
<span class="-7685400884791180573" onmouseenter="enter('-7685400884791180573');" onmouseout="out('-7685400884791180573');" style="">3121                                     callbacks.bindAppsRestored(restoredApps);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3122                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3123                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3124                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3125                     }                                                                                    </span>
<span  style="">3126                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3127                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3128             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3129         };                                                                                               </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style="">3130         sWorker.post(r);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3131     }                                                                                                    </span>
<span  style="">3132                                                                                                          </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="">3133     private class PackageUpdatedTask implements Runnable {                                               </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="">3134         int mOp;                                                                                         </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="">3135         String[] mPackages;                                                                              </span>
<span class="2923888301096709084" onmouseenter="enter('2923888301096709084');" onmouseout="out('2923888301096709084');" style="">3136         UserHandleCompat mUser;                                                                          </span>
<span  style="">3137                                                                                                          </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="">3138         public static final int OP_NONE = 0;                                                             </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="">3139         public static final int OP_ADD = 1;                                                              </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="">3140         public static final int OP_UPDATE = 2;                                                           </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="">3141         public static final int OP_REMOVE = 3; // uninstlled                                             </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="">3142         public static final int OP_UNAVAILABLE = 4; // external media unmounted                          </span>
<span  style="">3143                                                                                                          </span>
<span  style="">3144                                                                                                          </span>
<span class="3202497835561249087" onmouseenter="enter('3202497835561249087');" onmouseout="out('3202497835561249087');" style="">3145         public PackageUpdatedTask(int op, String[] packages, UserHandleCompat user) {                    </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="">3146             mOp = op;                                                                                    </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="">3147             mPackages = packages;                                                                        </span>
<span class="2953270128049103408" onmouseenter="enter('2953270128049103408');" onmouseout="out('2953270128049103408');" style="">3148             mUser = user;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3149         }                                                                                                </span>
<span  style="">3150                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3151         public void run() {                                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">3152             final Context context = mApp.getContext();                                                   </span>
<span  style="">3153                                                                                                          </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="">3154             final String[] packages = mPackages;                                                         </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="">3155             final int N = packages.length;                                                               </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="">3156             switch (mOp) {                                                                               </span>
<span class="449333994232188305" onmouseenter="enter('449333994232188305');" onmouseout="out('449333994232188305');" style="">3157                 case OP_ADD:                                                                             </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3158                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="8529503526854951097" onmouseenter="enter('8529503526854951097');" onmouseout="out('8529503526854951097');" style="">3159                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);         </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">3160 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6575289823687229863" onmouseenter="enter('6575289823687229863');" onmouseout="out('6575289823687229863');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3161                         mIconCache.remove(packages[i], mUser);                                           </span>
<span class="-4330949928576769866" onmouseenter="enter('-4330949928576769866');" onmouseout="out('-4330949928576769866');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3162                         mBgAllAppsList.addPackage(context, packages[i], mUser);                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">3163 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-4702241865893587262" onmouseenter="enter('-4702241865893587262');" onmouseout="out('-4702241865893587262');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3164                 Log.d(TAG, &quot;Icons processed in &quot;                                                         </span>
<span class="-1277503613614461490" onmouseenter="enter('-1277503613614461490');" onmouseout="out('-1277503613614461490');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3165                         + (SystemClock.uptimeMillis() - loadTime) + &quot;ms&quot;);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3166             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3167         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3168                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3169         public void dumpState() {                                                                        </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3170             synchronized (sBgLock) {                                                                     </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3171                 Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                          </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3172                 Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                  </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3173                 Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                          </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3174                 Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);          </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3175                 Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3176             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3177         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3178     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3179                                                                                                          </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3180     void enqueuePackageUpdated(PackageUpdatedTask task) {                                                </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3181         sWorker.post(task);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3182     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3183                                                                                                          </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3184     private class PackageUpdatedTask implements Runnable {                                               </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3185         int mOp;                                                                                         </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3186         String[] mPackages;                                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3187                                                                                                          </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3188         public static final int OP_NONE = 0;                                                             </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3189         public static final int OP_ADD = 1;                                                              </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3190         public static final int OP_UPDATE = 2;                                                           </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3191         public static final int OP_REMOVE = 3; // uninstlled                                             </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3192         public static final int OP_UNAVAILABLE = 4; // external media unmounted                          </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3193                                                                                                          </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3194                                                                                                          </span>
<span class="-2899951589874278155" onmouseenter="enter('-2899951589874278155');" onmouseout="out('-2899951589874278155');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3195         public PackageUpdatedTask(int op, String[] packages) {                                           </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3196             mOp = op;                                                                                    </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3197             mPackages = packages;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3198         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3199                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3200         public void run() {                                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3201             final Context context = mApp.getContext();                                                   </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3202                                                                                                          </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3203             final String[] packages = mPackages;                                                         </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3204             final int N = packages.length;                                                               </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3205             switch (mOp) {                                                                               </span>
<span class="449333994232188305" onmouseenter="enter('449333994232188305');" onmouseout="out('449333994232188305');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3206                 case OP_ADD:                                                                             </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3207                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="8529503526854951097" onmouseenter="enter('8529503526854951097');" onmouseout="out('8529503526854951097');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3208                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);         </span>
<span class="-7654565316708220659" onmouseenter="enter('-7654565316708220659');" onmouseout="out('-7654565316708220659');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3209                         mIconCache.remove(packages[i]);                                                  </span>
<span class="-2949849672001849759" onmouseenter="enter('-2949849672001849759');" onmouseout="out('-2949849672001849759');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3210                         mBgAllAppsList.addPackage(context, packages[i]);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3211                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3212                     break;                                                                               </span>
<span class="-4770369244410347850" onmouseenter="enter('-4770369244410347850');" onmouseout="out('-4770369244410347850');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3213                 case OP_UPDATE:                                                                          </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3214                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="-3432436938232924374" onmouseenter="enter('-3432436938232924374');" onmouseout="out('-3432436938232924374');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3215                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);      </span>
<span class="-272128531266392722" onmouseenter="enter('-272128531266392722');" onmouseout="out('-272128531266392722');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3216                         mBgAllAppsList.updatePackage(context, packages[i]);                              </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3217                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3218                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3219                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3220                     break;                                                                               </span>
<span class="-5474983820901132713" onmouseenter="enter('-5474983820901132713');" onmouseout="out('-5474983820901132713');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3221                 case OP_REMOVE:                                                                          </span>
<span class="9130220194739024640" onmouseenter="enter('9130220194739024640');" onmouseout="out('9130220194739024640');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3222                 case OP_UNAVAILABLE:                                                                     </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3223                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="3815138171377980553" onmouseenter="enter('3815138171377980553');" onmouseout="out('3815138171377980553');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3224                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);      </span>
<span class="7669526743413608016" onmouseenter="enter('7669526743413608016');" onmouseout="out('7669526743413608016');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3225                         mBgAllAppsList.removePackage(packages[i]);                                       </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3226                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3227                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3228                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3229                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3230             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3231                                                                                                          </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3232             ArrayList&lt;AppInfo&gt; added = null;                                                             </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3233             ArrayList&lt;AppInfo&gt; modified = null;                                                          </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3234             final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3235                                                                                                          </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3236             if (mBgAllAppsList.added.size() &gt; 0) {                                                       </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3237                 added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                    </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3238                 mBgAllAppsList.added.clear();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3239             }                                                                                            </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3240             if (mBgAllAppsList.modified.size() &gt; 0) {                                                    </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3241                 modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                              </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3242                 mBgAllAppsList.modified.clear();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3243             }                                                                                            </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3244             if (mBgAllAppsList.removed.size() &gt; 0) {                                                     </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3245                 removedApps.addAll(mBgAllAppsList.removed);                                              </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3246                 mBgAllAppsList.removed.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3247             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3248                                                                                                          </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3249             final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                    </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3250             if (callbacks == null) {                                                                     </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3251                 Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3252                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3253             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3254                                                                                                          </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3255             if (added != null) {                                                                         </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3256                 // Ensure that we add all the workspace applications to the db                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3257                 Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                             </span>
<span class="-6277587630605553211" onmouseenter="enter('-6277587630605553211');" onmouseout="out('-6277587630605553211');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3258                 if (!LauncherAppState.isDisableAllApps()) {                                              </span>
<span class="4785144545835380546" onmouseenter="enter('4785144545835380546');" onmouseout="out('4785144545835380546');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3259                     addAndBindAddedApps(context, new ArrayList&lt;ItemInfo&gt;(), cb, added);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3260                 } else {                                                                                 </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3261                     final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);               </span>
<span class="620263930069644182" onmouseenter="enter('620263930069644182');" onmouseout="out('620263930069644182');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3262                     addAndBindAddedApps(context, addedInfos, cb, added);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3263                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3264             }                                                                                            </span>
<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3265             if (modified != null) {                                                                      </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3266                 final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3267                                                                                                          </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3268                 // Update the launcher db to reflect the changes                                         </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3269                 for (AppInfo a : modifiedFinal) {                                                        </span>
<span class="9185020132746469320" onmouseenter="enter('9185020132746469320');" onmouseout="out('9185020132746469320');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3270                     ArrayList&lt;ItemInfo&gt; infos =                                                          </span>
<span class="1259644807303209381" onmouseenter="enter('1259644807303209381');" onmouseout="out('1259644807303209381');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3271                             getItemInfoForComponentName(a.componentName);                                </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3272                     for (ItemInfo i : infos) {                                                           </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3273                         if (isShortcutInfoUpdateable(i)) {                                               </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3274                             ShortcutInfo info = (ShortcutInfo) i;                                        </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3275                             info.title = a.title.toString();                                             </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3276                             updateItemInDatabase(context, info);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3277                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3278                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3279                 }                                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3280                                                                                                          </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3281                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3282                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3283                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3284                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3285                             callbacks.bindAppsUpdated(modifiedFinal);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3286                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3287                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3288                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3289             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3290                                                                                                          </span>
<span class="-1170284362245625596" onmouseenter="enter('-1170284362245625596');" onmouseout="out('-1170284362245625596');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3291             final ArrayList&lt;String&gt; removedPackageNames =                                                </span>
<span class="-5690129641574664711" onmouseenter="enter('-5690129641574664711');" onmouseout="out('-5690129641574664711');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3292                     new ArrayList&lt;String&gt;();                                                             </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3293             if (mOp == OP_REMOVE) {                                                                      </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3294                 // Mark all packages in the broadcast to be removed                                      </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3295                 removedPackageNames.addAll(Arrays.asList(packages));                                     </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3296             } else if (mOp == OP_UPDATE) {                                                               </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3297                 // Mark disabled packages in the broadcast to be removed                                 </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3298                 final PackageManager pm = context.getPackageManager();                                   </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3299                 for (int i=0; i&lt;N; i++) {                                                                </span>
<span class="2935426733804348481" onmouseenter="enter('2935426733804348481');" onmouseout="out('2935426733804348481');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3300                     if (isPackageDisabled(pm, packages[i])) {                                            </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3301                         removedPackageNames.add(packages[i]);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3302                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3303                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3304             }                                                                                            </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3305             // Remove all the components associated with this package                                    </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3306             for (String pn : removedPackageNames) {                                                      </span>
<span class="-8111972255125637177" onmouseenter="enter('-8111972255125637177');" onmouseout="out('-8111972255125637177');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3307                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForPackageName(pn);                               </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3308                 for (ItemInfo i : infos) {                                                               </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3309                     deleteItemFromDatabase(context, i);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3310                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3311             }                                                                                            </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3312             // Remove all the specific components                                                        </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3313             for (AppInfo a : removedApps) {                                                              </span>
<span class="-8237639399264107586" onmouseenter="enter('-8237639399264107586');" onmouseout="out('-8237639399264107586');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3314                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName);                </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3315                 for (ItemInfo i : infos) {                                                               </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3316                     deleteItemFromDatabase(context, i);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3317                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3318             }                                                                                            </span>
<span class="5309180485107849948" onmouseenter="enter('5309180485107849948');" onmouseout="out('5309180485107849948');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3319             if (!removedPackageNames.isEmpty() || !removedApps.isEmpty()) {                              </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3320                 // Remove any queued items from the install queue                                        </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3321                 String spKey = LauncherAppState.getSharedPreferencesKey();                               </span>
<span class="-4155822077911930566" onmouseenter="enter('-4155822077911930566');" onmouseout="out('-4155822077911930566');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3322                 SharedPreferences sp =                                                                   </span>
<span class="-7232857049720959502" onmouseenter="enter('-7232857049720959502');" onmouseout="out('-7232857049720959502');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3323                         context.getSharedPreferences(spKey, Context.MODE_PRIVATE);                       </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3324                 InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                 </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3325                 // Call the components-removed callback                                                  </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3326                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3327                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3328                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3329                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="7123425932844918056" onmouseenter="enter('7123425932844918056');" onmouseout="out('7123425932844918056');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3330                             callbacks.bindComponentsRemoved(removedPackageNames, removedApps);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3331                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3332                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3333                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3334             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3335                                                                                                          </span>
<span class="4263868642545515204" onmouseenter="enter('4263868642545515204');" onmouseout="out('4263868642545515204');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3336             final ArrayList&lt;Object&gt; widgetsAndShortcuts =                                                </span>
<span class="-4925739004532916789" onmouseenter="enter('-4925739004532916789');" onmouseout="out('-4925739004532916789');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3337                 getSortedWidgetsAndShortcuts(context);                                                   </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3338             mHandler.post(new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3339                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3340                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3341                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3342                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3343                         callbacks.bindPackagesUpdated(widgetsAndShortcuts);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3344                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3345                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3346             });                                                                                          </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3347                                                                                                          </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3348             // Write all the logs to disk                                                                </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3349             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3350                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3351                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3352                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3353                         callbacks.dumpLogsToLocalData();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3354                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3355                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3356             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3357         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3358     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3359                                                                                                          </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3360     // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                     </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3361     public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                      </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3362         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3363         final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                           </span>
<span class="-3206018607877806445" onmouseenter="enter('-3206018607877806445');" onmouseout="out('-3206018607877806445');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3364         widgetsAndShortcuts.addAll(AppWidgetManager.getInstance(context).getInstalledProviders());       </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3365         Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                              </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3366         widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));            </span>
<span class="-1102952865112100125" onmouseenter="enter('-1102952865112100125');" onmouseout="out('-1102952865112100125');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3367         Collections.sort(widgetsAndShortcuts,                                                            </span>
<span class="-1681839338823179912" onmouseenter="enter('-1681839338823179912');" onmouseout="out('-1681839338823179912');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3368             new LauncherModel.WidgetAndShortcutNameComparator(packageManager));                          </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3369         return widgetsAndShortcuts;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3370     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3371                                                                                                          </span>
<span class="8250241672786329916" onmouseenter="enter('8250241672786329916');" onmouseout="out('8250241672786329916');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3372     private static boolean isPackageDisabled(PackageManager pm, String packageName) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3373         try {                                                                                            </span>
<span class="4500642088138919346" onmouseenter="enter('4500642088138919346');" onmouseout="out('4500642088138919346');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3374             PackageInfo pi = pm.getPackageInfo(packageName, 0);                                          </span>
<span class="-3710685366547959245" onmouseenter="enter('-3710685366547959245');" onmouseout="out('-3710685366547959245');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3375             return !pi.applicationInfo.enabled;                                                          </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3376         } catch (NameNotFoundException e) {                                                              </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3377             // Fall through                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3378         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3379         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3380     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3381                                                                                                          </span>
<span class="5484824579758440772" onmouseenter="enter('5484824579758440772');" onmouseout="out('5484824579758440772');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3382     public static boolean isValidPackageComponent(PackageManager pm, ComponentName cn) {                 </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3383         if (cn == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3384             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3385         }                                                                                                </span>
<span class="3920598161938602311" onmouseenter="enter('3920598161938602311');" onmouseout="out('3920598161938602311');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3386         if (isPackageDisabled(pm, cn.getPackageName())) {                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3387             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3388         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3389                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3390         try {                                                                                            </span>
<span class="5148337441661745301" onmouseenter="enter('5148337441661745301');" onmouseout="out('5148337441661745301');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3391             // Check the activity                                                                        </span>
<span class="-3548512208842411383" onmouseenter="enter('-3548512208842411383');" onmouseout="out('-3548512208842411383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3392             PackageInfo pi = pm.getPackageInfo(cn.getPackageName(), 0);                                  </span>
<span class="-7304348613249571904" onmouseenter="enter('-7304348613249571904');" onmouseout="out('-7304348613249571904');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3393             return (pm.getActivityInfo(cn, 0) != null);                                                  </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3394         } catch (NameNotFoundException e) {                                                              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3395             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3396         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3397     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3398                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3399     /**                                                                                                  </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3400      * Make an ShortcutInfo object for a restored application or shortcut item that points               </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3401      * to a package that is not yet installed on the system.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3402      */                                                                                                  </span>
<span class="1063415479211056267" onmouseenter="enter('1063415479211056267');" onmouseout="out('1063415479211056267');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3403     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex) {                             </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3404         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3405         if (cursor != null) {                                                                            </span>
<span class="-7858065958686887242" onmouseenter="enter('-7858065958686887242');" onmouseout="out('-7858065958686887242');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3406             info.title =  cursor.getString(titleIndex);                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3407         } else {                                                                                         </span>
<span class="-9179287796133695880" onmouseenter="enter('-9179287796133695880');" onmouseout="out('-9179287796133695880');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3408             info.title = &quot;&quot;;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3409         }                                                                                                </span>
<span class="-1591268116362889652" onmouseenter="enter('-1591268116362889652');" onmouseout="out('-1591268116362889652');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3410         info.setIcon(mIconCache.getIcon(intent, info.title.toString()));                                 </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3411         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3412         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3413     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3414                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3415     /**                                                                                                  </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3416      * Make an Intent object for a restored application or shortcut item that points                     </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3417      * to the market page for the item.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3418      */                                                                                                  </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3419     private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                     </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3420         ComponentName componentName = intent.getComponent();                                             </span>
<span class="5230577021520033618" onmouseenter="enter('5230577021520033618');" onmouseout="out('5230577021520033618');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3421         Intent marketIntent = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="-6224205935725503646" onmouseenter="enter('-6224205935725503646');" onmouseout="out('-6224205935725503646');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3422         Uri marketUri = new Uri.Builder()                                                                </span>
<span class="-9027153585574964790" onmouseenter="enter('-9027153585574964790');" onmouseout="out('-9027153585574964790');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3423                 .scheme(&quot;market&quot;)                                                                        </span>
<span class="-1106866791415129127" onmouseenter="enter('-1106866791415129127');" onmouseout="out('-1106866791415129127');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3424                 .authority(&quot;details&quot;)                                                                    </span>
<span class="-6156875340655442296" onmouseenter="enter('-6156875340655442296');" onmouseout="out('-6156875340655442296');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3425                 .appendQueryParameter(&quot;id&quot;, componentName.getPackageName())                              </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3426                 .build();                                                                                </span>
<span class="-8203346918939498134" onmouseenter="enter('-8203346918939498134');" onmouseout="out('-8203346918939498134');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3427         Log.d(TAG, &quot;manufactured intent uri: &quot; + marketUri.toString());                                  </span>
<span class="8200775736438266685" onmouseenter="enter('8200775736438266685');" onmouseout="out('8200775736438266685');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3428         marketIntent.setData(marketUri);                                                                 </span>
<span class="-840031405639981960" onmouseenter="enter('-840031405639981960');" onmouseout="out('-840031405639981960');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3429         return marketIntent;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3430     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3431                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3432     /**                                                                                                  </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3433      * This is called from the code that adds shortcuts from the intent receiver.  This                  </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3434      * doesn&#x27;t have a Cursor, but                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3435      */                                                                                                  </span>
<span class="5614106103309211810" onmouseenter="enter('5614106103309211810');" onmouseout="out('5614106103309211810');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3436     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context) {        </span>
<span class="-3335806789481426156" onmouseenter="enter('-3335806789481426156');" onmouseout="out('-3335806789481426156');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3437         return getShortcutInfo(manager, intent, context, null, -1, -1, null);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3438     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3439                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3440     /**                                                                                                  </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3441      * Make an ShortcutInfo object for a shortcut that is an application.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3442      *                                                                                                   </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3443      * If c is not null, then it will be used to fill in missing data like the title and icon.           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3444      */                                                                                                  </span>
<span class="1276500584496912228" onmouseenter="enter('1276500584496912228');" onmouseout="out('1276500584496912228');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3445     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context,          </span>
<span class="-7918747784600027039" onmouseenter="enter('-7918747784600027039');" onmouseout="out('-7918747784600027039');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3446             Cursor c, int iconIndex, int titleIndex, HashMap&lt;Object, CharSequence&gt; labelCache) {         </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3447         ComponentName componentName = intent.getComponent();                                             </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3448         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="444940595441544179" onmouseenter="enter('444940595441544179');" onmouseout="out('444940595441544179');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3449         if (componentName != null &amp;&amp; !isValidPackageComponent(manager, componentName)) {                 </span>
<span class="-409027952341615484" onmouseenter="enter('-409027952341615484');" onmouseout="out('-409027952341615484');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3450             Log.d(TAG, &quot;Invalid package found in getShortcutInfo: &quot; + componentName);                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3451             return null;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3452         } else {                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3453             try {                                                                                        </span>
<span class="4294749985361673643" onmouseenter="enter('4294749985361673643');" onmouseout="out('4294749985361673643');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3454                 PackageInfo pi = manager.getPackageInfo(componentName.getPackageName(), 0);              </span>
<span class="3308885914817688196" onmouseenter="enter('3308885914817688196');" onmouseout="out('3308885914817688196');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3455                 info.initFlagsAndFirstInstallTime(pi);                                                   </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3456             } catch (NameNotFoundException e) {                                                          </span>
<span class="-3402401844985211338" onmouseenter="enter('-3402401844985211338');" onmouseout="out('-3402401844985211338');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3457                 Log.d(TAG, &quot;getPackInfo failed for package &quot; +                                           </span>
<span class="-7617949507024469990" onmouseenter="enter('-7617949507024469990');" onmouseout="out('-7617949507024469990');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3458                         componentName.getPackageName());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3459             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3460         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3461                                                                                                          </span>
<span class="-5839804976451698217" onmouseenter="enter('-5839804976451698217');" onmouseout="out('-5839804976451698217');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3462         // TODO: See if the PackageManager knows about this case.  If it doesn&#x27;t                         </span>
<span class="-575420847374711684" onmouseenter="enter('-575420847374711684');" onmouseout="out('-575420847374711684');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3463         // then return null &amp; delete this.                                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3464                                                                                                          </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3465         // the resource -- This may implicitly give us back the fallback icon,                           </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3466         // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                        </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3467         // to avoid saving lots of copies of that in the database, and most apps                         </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3468         // have icons anyway.                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3469                                                                                                          </span>
<span class="1748721733354639816" onmouseenter="enter('1748721733354639816');" onmouseout="out('1748721733354639816');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3470         // Attempt to use queryIntentActivities to get the ResolveInfo (with IntentFilter info) and      </span>
<span class="-6676021501376744578" onmouseenter="enter('-6676021501376744578');" onmouseout="out('-6676021501376744578');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3471         // if that fails, or is ambiguious, fallback to the standard way of getting the resolve info     </span>
<span class="-6094266232633177049" onmouseenter="enter('-6094266232633177049');" onmouseout="out('-6094266232633177049');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3472         // via resolveActivity().                                                                        </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3473         Bitmap icon = null;                                                                              </span>
<span class="-12205607414596767" onmouseenter="enter('-12205607414596767');" onmouseout="out('-12205607414596767');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3474         ResolveInfo resolveInfo = null;                                                                  </span>
<span class="5248255614039346565" onmouseenter="enter('5248255614039346565');" onmouseout="out('5248255614039346565');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3475         ComponentName oldComponent = intent.getComponent();                                              </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3476         Intent newIntent = new Intent(intent.getAction(), null);                                         </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3477         newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                 </span>
<span class="-4528672120988578527" onmouseenter="enter('-4528672120988578527');" onmouseout="out('-4528672120988578527');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3478         newIntent.setPackage(oldComponent.getPackageName());                                             </span>
<span class="-4266560778617611378" onmouseenter="enter('-4266560778617611378');" onmouseout="out('-4266560778617611378');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3479         List&lt;ResolveInfo&gt; infos = manager.queryIntentActivities(newIntent, 0);                           </span>
<span class="-1258353831095463835" onmouseenter="enter('-1258353831095463835');" onmouseout="out('-1258353831095463835');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3480         for (ResolveInfo i : infos) {                                                                    </span>
<span class="5094763243037624802" onmouseenter="enter('5094763243037624802');" onmouseout="out('5094763243037624802');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3481             ComponentName cn = new ComponentName(i.activityInfo.packageName,                             </span>
<span class="1720373740013823268" onmouseenter="enter('1720373740013823268');" onmouseout="out('1720373740013823268');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3482                     i.activityInfo.name);                                                                </span>
<span class="-7290368567659218563" onmouseenter="enter('-7290368567659218563');" onmouseout="out('-7290368567659218563');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3483             if (cn.equals(oldComponent)) {                                                               </span>
<span class="-6794055892963959667" onmouseenter="enter('-6794055892963959667');" onmouseout="out('-6794055892963959667');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3484                 resolveInfo = i;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3485             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3486         }                                                                                                </span>
<span class="6326898777629576914" onmouseenter="enter('6326898777629576914');" onmouseout="out('6326898777629576914');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3487         if (resolveInfo == null) {                                                                       </span>
<span class="8776212146813846258" onmouseenter="enter('8776212146813846258');" onmouseout="out('8776212146813846258');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3488             resolveInfo = manager.resolveActivity(intent, 0);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3489         }                                                                                                </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3490         if (resolveInfo != null) {                                                                       </span>
<span class="-7448006110826377930" onmouseenter="enter('-7448006110826377930');" onmouseout="out('-7448006110826377930');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3491             icon = mIconCache.getIcon(componentName, resolveInfo, labelCache);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3492         }                                                                                                </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3493         // the db                                                                                        </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3494         if (icon == null) {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3495             if (c != null) {                                                                             </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3496                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3497             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3498         }                                                                                                </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3499         // the fallback icon                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3500         if (icon == null) {                                                                              </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3501             icon = getFallbackIcon();                                                                    </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3502             info.usingFallbackIcon = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3503         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3504         info.setIcon(icon);                                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3505                                                                                                          </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3506         // from the resource                                                                             </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3507         if (resolveInfo != null) {                                                                       </span>
<span class="4800110805856691594" onmouseenter="enter('4800110805856691594');" onmouseout="out('4800110805856691594');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3508             ComponentName key = LauncherModel.getComponentNameFromResolveInfo(resolveInfo);              </span>
<span class="8748582400169036217" onmouseenter="enter('8748582400169036217');" onmouseout="out('8748582400169036217');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3509             if (labelCache != null &amp;&amp; labelCache.containsKey(key)) {                                     </span>
<span class="3192670581922801839" onmouseenter="enter('3192670581922801839');" onmouseout="out('3192670581922801839');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3510                 info.title = labelCache.get(key);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3511             } else {                                                                                     </span>
<span class="-2714967885034418454" onmouseenter="enter('-2714967885034418454');" onmouseout="out('-2714967885034418454');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3512                 info.title = resolveInfo.activityInfo.loadLabel(manager);                                </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3513                 if (labelCache != null) {                                                                </span>
<span class="-7678945850387299322" onmouseenter="enter('-7678945850387299322');" onmouseout="out('-7678945850387299322');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3514                     labelCache.put(key, info.title);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3515                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3516             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3517         }                                                                                                </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3518         // from the db                                                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3519         if (info.title == null) {                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3520             if (c != null) {                                                                             </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3521                 info.title =  c.getString(titleIndex);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3522             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3523         }                                                                                                </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3524         // fall back to the class name of the activity                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3525         if (info.title == null) {                                                                        </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3526             info.title = componentName.getClassName();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3527         }                                                                                                </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3528         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3529         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3530     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3531                                                                                                          </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3532     static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                               </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3533             ItemInfoFilter f) {                                                                          </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3534         HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                            </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3535         for (ItemInfo i : infos) {                                                                       </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3536             if (i instanceof ShortcutInfo) {                                                             </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3537                 ShortcutInfo info = (ShortcutInfo) i;                                                    </span>
<span class="299648897077832064" onmouseenter="enter('299648897077832064');" onmouseout="out('299648897077832064');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3538                 ComponentName cn = info.intent.getComponent();                                           </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3539                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3540                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3541                 }                                                                                        </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3542             } else if (i instanceof FolderInfo) {                                                        </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3543                 FolderInfo info = (FolderInfo) i;                                                        </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3544                 for (ShortcutInfo s : info.contents) {                                                   </span>
<span class="2331162999822676145" onmouseenter="enter('2331162999822676145');" onmouseout="out('2331162999822676145');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3545                     ComponentName cn = s.intent.getComponent();                                          </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3546                     if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                       </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3547                         filtered.add(s);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3548                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3549                 }                                                                                        </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3550             } else if (i instanceof LauncherAppWidgetInfo) {                                             </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3551                 LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                  </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3552                 ComponentName cn = info.providerName;                                                    </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3553                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3554                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3555                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3556             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3557         }                                                                                                </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3558         return new ArrayList&lt;ItemInfo&gt;(filtered);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3559     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3560                                                                                                          </span>
<span class="-3045683366231863679" onmouseenter="enter('-3045683366231863679');" onmouseout="out('-3045683366231863679');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3561     private ArrayList&lt;ItemInfo&gt; getItemInfoForPackageName(final String pn) {                             </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3562         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3563             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3564             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="4366277958827250658" onmouseenter="enter('4366277958827250658');" onmouseout="out('4366277958827250658');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3565                 return cn.getPackageName().equals(pn);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3566             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3567         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3568         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3569     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3570                                                                                                          </span>
<span class="5278497386445713053" onmouseenter="enter('5278497386445713053');" onmouseout="out('5278497386445713053');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3571     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname) {                 </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3572         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3573             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3574             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3575                 return cn.equals(cname);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3576             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3577         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3578         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3579     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3580                                                                                                          </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3581     public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                         </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3582         if (i instanceof ShortcutInfo) {                                                                 </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3583             ShortcutInfo info = (ShortcutInfo) i;                                                        </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3584             // We need to check for ACTION_MAIN otherwise getComponent() might                           </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3585             // return null for some shortcuts (for instance, for shortcuts to                            </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3586             // web pages.)                                                                               </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3587             Intent intent = info.intent;                                                                 </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3588             ComponentName name = intent.getComponent();                                                  </span>
<span class="-7226540389871247766" onmouseenter="enter('-7226540389871247766');" onmouseout="out('-7226540389871247766');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3589             if (info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION &amp;&amp;                     </span>
<span class="-3498713534944595637" onmouseenter="enter('-3498713534944595637');" onmouseout="out('-3498713534944595637');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3590                     Intent.ACTION_MAIN.equals(intent.getAction()) &amp;&amp; name != null) {                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3591                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3592             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3593         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3594         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3595     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3596                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3597     /**                                                                                                  </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3598      * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3599      */                                                                                                  </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3600     private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                      </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">3601 =======                                                                                                  </span>
<span class="-2949849672001849759" onmouseenter="enter('-2949849672001849759');" onmouseout="out('-2949849672001849759');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">3602                         mBgAllAppsList.addPackage(context, packages[i]);                                 </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">3603 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3604                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3605                     break;                                                                               </span>
<span class="-4770369244410347850" onmouseenter="enter('-4770369244410347850');" onmouseout="out('-4770369244410347850');" style="">3606                 case OP_UPDATE:                                                                          </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3607                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="-3432436938232924374" onmouseenter="enter('-3432436938232924374');" onmouseout="out('-3432436938232924374');" style="">3608                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);      </span>
<span class="4552988343352109939" onmouseenter="enter('4552988343352109939');" onmouseout="out('4552988343352109939');" style="">3609                         mBgAllAppsList.updatePackage(context, packages[i], mUser);                       </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">3610                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">3611                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3612                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3613                     break;                                                                               </span>
<span class="-5474983820901132713" onmouseenter="enter('-5474983820901132713');" onmouseout="out('-5474983820901132713');" style="">3614                 case OP_REMOVE:                                                                          </span>
<span class="9130220194739024640" onmouseenter="enter('9130220194739024640');" onmouseout="out('9130220194739024640');" style="">3615                 case OP_UNAVAILABLE:                                                                     </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3616                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="3815138171377980553" onmouseenter="enter('3815138171377980553');" onmouseout="out('3815138171377980553');" style="">3617                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);      </span>
<span class="-4221302437709808804" onmouseenter="enter('-4221302437709808804');" onmouseout="out('-4221302437709808804');" style="">3618                         mBgAllAppsList.removePackage(packages[i], mUser);                                </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">3619                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">3620                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3621                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3622                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3623             }                                                                                            </span>
<span  style="">3624                                                                                                          </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="">3625             ArrayList&lt;AppInfo&gt; added = null;                                                             </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="">3626             ArrayList&lt;AppInfo&gt; modified = null;                                                          </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="">3627             final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                             </span>
<span  style="">3628                                                                                                          </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="">3629             if (mBgAllAppsList.added.size() &gt; 0) {                                                       </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="">3630                 added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                    </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="">3631                 mBgAllAppsList.added.clear();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3632             }                                                                                            </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="">3633             if (mBgAllAppsList.modified.size() &gt; 0) {                                                    </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="">3634                 modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                              </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="">3635                 mBgAllAppsList.modified.clear();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3636             }                                                                                            </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="">3637             if (mBgAllAppsList.removed.size() &gt; 0) {                                                     </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="">3638                 removedApps.addAll(mBgAllAppsList.removed);                                              </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="">3639                 mBgAllAppsList.removed.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3640             }                                                                                            </span>
<span  style="">3641                                                                                                          </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">3642             final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                    </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">3643             if (callbacks == null) {                                                                     </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="">3644                 Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3645                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3646             }                                                                                            </span>
<span  style="">3647                                                                                                          </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="">3648             if (added != null) {                                                                         </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="">3649                 // Ensure that we add all the workspace applications to the db                           </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">3650                 if (LauncherAppState.isDisableAllApps()) {                                               </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="">3651                     final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);               </span>
<span class="-3306619504252280502" onmouseenter="enter('-3306619504252280502');" onmouseout="out('-3306619504252280502');" style="">3652                     addAndBindAddedWorkspaceApps(context, addedInfos);                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3653                 } else {                                                                                 </span>
<span class="-4365713328493794841" onmouseenter="enter('-4365713328493794841');" onmouseout="out('-4365713328493794841');" style="">3654                     addAppsToAllApps(context, added);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3655                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3656             }                                                                                            </span>
<span  style="">3657                                                                                                          </span>
<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="">3658             if (modified != null) {                                                                      </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="">3659                 final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                       </span>
<span  style="">3660                                                                                                          </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="">3661                 // Update the launcher db to reflect the changes                                         </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="">3662                 for (AppInfo a : modifiedFinal) {                                                        </span>
<span class="9185020132746469320" onmouseenter="enter('9185020132746469320');" onmouseout="out('9185020132746469320');" style="">3663                     ArrayList&lt;ItemInfo&gt; infos =                                                          </span>
<span class="4076745085710284833" onmouseenter="enter('4076745085710284833');" onmouseout="out('4076745085710284833');" style="">3664                             getItemInfoForComponentName(a.componentName, mUser);                         </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3665                     for (ItemInfo i : infos) {                                                           </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="">3666                         if (isShortcutInfoUpdateable(i)) {                                               </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3667                             ShortcutInfo info = (ShortcutInfo) i;                                        </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="">3668                             info.title = a.title.toString();                                             </span>
<span class="911685269403024085" onmouseenter="enter('911685269403024085');" onmouseout="out('911685269403024085');" style="">3669                             info.contentDescription = a.contentDescription;                              </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3670                             updateItemInDatabase(context, info);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3671                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3672                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3673                 }                                                                                        </span>
<span  style="">3674                                                                                                          </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3675                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3676                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3677                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3678                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="">3679                             callbacks.bindAppsUpdated(modifiedFinal);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3680                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3681                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3682                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3683             }                                                                                            </span>
<span  style="">3684                                                                                                          </span>
<span class="-1170284362245625596" onmouseenter="enter('-1170284362245625596');" onmouseout="out('-1170284362245625596');" style="">3685             final ArrayList&lt;String&gt; removedPackageNames =                                                </span>
<span class="-5690129641574664711" onmouseenter="enter('-5690129641574664711');" onmouseout="out('-5690129641574664711');" style="">3686                     new ArrayList&lt;String&gt;();                                                             </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="">3687             if (mOp == OP_REMOVE) {                                                                      </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="">3688                 // Mark all packages in the broadcast to be removed                                      </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="">3689                 removedPackageNames.addAll(Arrays.asList(packages));                                     </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="">3690             } else if (mOp == OP_UPDATE) {                                                               </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="">3691                 // Mark disabled packages in the broadcast to be removed                                 </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="">3692                 final PackageManager pm = context.getPackageManager();                                   </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3693                 for (int i=0; i&lt;N; i++) {                                                                </span>
<span class="1189279971614907536" onmouseenter="enter('1189279971614907536');" onmouseout="out('1189279971614907536');" style="">3694                     if (isPackageDisabled(context, packages[i], mUser)) {                                </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="">3695                         removedPackageNames.add(packages[i]);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3696                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3697                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3698             }                                                                                            </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="">3699             // Remove all the components associated with this package                                    </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="">3700             for (String pn : removedPackageNames) {                                                      </span>
<span class="6482411304432401961" onmouseenter="enter('6482411304432401961');" onmouseout="out('6482411304432401961');" style="">3701                 deletePackageFromDatabase(context, pn, mUser);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3702             }                                                                                            </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="">3703             // Remove all the specific components                                                        </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="">3704             for (AppInfo a : removedApps) {                                                              </span>
<span class="-1726556904055536825" onmouseenter="enter('-1726556904055536825');" onmouseout="out('-1726556904055536825');" style="">3705                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName, mUser);         </span>
<span class="7293231507608058112" onmouseenter="enter('7293231507608058112');" onmouseout="out('7293231507608058112');" style="">3706                 deleteItemsFromDatabase(context, infos);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3707             }                                                                                            </span>
<span class="5309180485107849948" onmouseenter="enter('5309180485107849948');" onmouseout="out('5309180485107849948');" style="">3708             if (!removedPackageNames.isEmpty() || !removedApps.isEmpty()) {                              </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="">3709                 // Remove any queued items from the install queue                                        </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="">3710                 String spKey = LauncherAppState.getSharedPreferencesKey();                               </span>
<span class="-4155822077911930566" onmouseenter="enter('-4155822077911930566');" onmouseout="out('-4155822077911930566');" style="">3711                 SharedPreferences sp =                                                                   </span>
<span class="-7232857049720959502" onmouseenter="enter('-7232857049720959502');" onmouseout="out('-7232857049720959502');" style="">3712                         context.getSharedPreferences(spKey, Context.MODE_PRIVATE);                       </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="">3713                 InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                 </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="">3714                 // Call the components-removed callback                                                  </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3715                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3716                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3717                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3718                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="-4641714223338514236" onmouseenter="enter('-4641714223338514236');" onmouseout="out('-4641714223338514236');" style="">3719                             callbacks.bindComponentsRemoved(removedPackageNames, removedApps, mUser);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3720                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3721                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3722                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3723             }                                                                                            </span>
<span  style="">3724                                                                                                          </span>
<span class="4263868642545515204" onmouseenter="enter('4263868642545515204');" onmouseout="out('4263868642545515204');" style="">3725             final ArrayList&lt;Object&gt; widgetsAndShortcuts =                                                </span>
<span class="-4925739004532916789" onmouseenter="enter('-4925739004532916789');" onmouseout="out('-4925739004532916789');" style="">3726                     getSortedWidgetsAndShortcuts(context);                                               </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3727             mHandler.post(new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3728                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3729                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3730                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3731                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="">3732                         callbacks.bindPackagesUpdated(widgetsAndShortcuts);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3733                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3734                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3735             });                                                                                          </span>
<span  style="">3736                                                                                                          </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="">3737             // Write all the logs to disk                                                                </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3738             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3739                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3740                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3741                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="">3742                         callbacks.dumpLogsToLocalData();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3743                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3744                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3745             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3746         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3747     }                                                                                                    </span>
<span  style="">3748                                                                                                          </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="">3749     // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                     </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="">3750     public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                      </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3751         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="">3752         final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                           </span>
<span class="3637822346102420347" onmouseenter="enter('3637822346102420347');" onmouseout="out('3637822346102420347');" style="">3753         widgetsAndShortcuts.addAll(AppWidgetManagerCompat.getInstance(context).getAllProviders());       </span>
<span  style="">3754                                                                                                          </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="">3755         Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                              </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="">3756         widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));            </span>
<span class="3220762690300374865" onmouseenter="enter('3220762690300374865');" onmouseout="out('3220762690300374865');" style="">3757         Collections.sort(widgetsAndShortcuts, new WidgetAndShortcutNameComparator(context));             </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="">3758         return widgetsAndShortcuts;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3759     }                                                                                                    </span>
<span  style="">3760                                                                                                          </span>
<span class="-7287747070935657411" onmouseenter="enter('-7287747070935657411');" onmouseout="out('-7287747070935657411');" style="">3761     private static boolean isPackageDisabled(Context context, String packageName,                        </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="">3762             UserHandleCompat user) {                                                                     </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">3763         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="2722752944691677150" onmouseenter="enter('2722752944691677150');" onmouseout="out('2722752944691677150');" style="">3764         return !launcherApps.isPackageEnabledForProfile(packageName, user);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3765     }                                                                                                    </span>
<span  style="">3766                                                                                                          </span>
<span class="5738691957451055953" onmouseenter="enter('5738691957451055953');" onmouseout="out('5738691957451055953');" style="">3767     public static boolean isValidPackageActivity(Context context, ComponentName cn,                      </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="">3768             UserHandleCompat user) {                                                                     </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="">3769         if (cn == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3770             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3771         }                                                                                                </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">3772         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="-6788056339565196353" onmouseenter="enter('-6788056339565196353');" onmouseout="out('-6788056339565196353');" style="">3773         if (!launcherApps.isPackageEnabledForProfile(cn.getPackageName(), user)) {                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3774             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3775         }                                                                                                </span>
<span class="6138596583040601663" onmouseenter="enter('6138596583040601663');" onmouseout="out('6138596583040601663');" style="">3776         return launcherApps.isActivityEnabledForProfile(cn, user);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3777     }                                                                                                    </span>
<span  style="">3778                                                                                                          </span>
<span class="5839979877555451943" onmouseenter="enter('5839979877555451943');" onmouseout="out('5839979877555451943');" style="">3779     public static boolean isValidPackage(Context context, String packageName,                            </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="">3780             UserHandleCompat user) {                                                                     </span>
<span class="2797777100746091358" onmouseenter="enter('2797777100746091358');" onmouseout="out('2797777100746091358');" style="">3781         if (packageName == null) {                                                                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3782             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3783         }                                                                                                </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">3784         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="7814688882071205012" onmouseenter="enter('7814688882071205012');" onmouseout="out('7814688882071205012');" style="">3785         return launcherApps.isPackageEnabledForProfile(packageName, user);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3786     }                                                                                                    </span>
<span  style="">3787                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3788     /**                                                                                                  </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="">3789      * Make an ShortcutInfo object for a restored application or shortcut item that points               </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="">3790      * to a package that is not yet installed on the system.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3791      */                                                                                                  </span>
<span class="6864587742410665601" onmouseenter="enter('6864587742410665601');" onmouseout="out('6864587742410665601');" style="">3792     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex, Intent intent,                </span>
<span class="-9038086405553223291" onmouseenter="enter('-9038086405553223291');" onmouseout="out('-9038086405553223291');" style="">3793             int promiseType) {                                                                           </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3794         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">3795 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3796         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="4581768130100169027" onmouseenter="enter('4581768130100169027');" onmouseout="out('4581768130100169027');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3797         mIconCache.getTitleAndIcon(info, intent, info.user, true);                                       </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3798                                                                                                          </span>
<span class="-7011074266974647989" onmouseenter="enter('-7011074266974647989');" onmouseout="out('-7011074266974647989');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3799         if ((promiseType &amp; ShortcutInfo.FLAG_RESTORED_ICON) != 0) {                                      </span>
<span class="-8984449213491193878" onmouseenter="enter('-8984449213491193878');" onmouseout="out('-8984449213491193878');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3800             String title = (cursor != null) ? cursor.getString(titleIndex) : null;                       </span>
<span class="-5841612334834081385" onmouseenter="enter('-5841612334834081385');" onmouseout="out('-5841612334834081385');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3801             if (!TextUtils.isEmpty(title)) {                                                             </span>
<span class="-2613617994889375298" onmouseenter="enter('-2613617994889375298');" onmouseout="out('-2613617994889375298');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3802                 info.title = title;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3803             }                                                                                            </span>
<span class="-5174755841373748942" onmouseenter="enter('-5174755841373748942');" onmouseout="out('-5174755841373748942');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3804             info.status = ShortcutInfo.FLAG_RESTORED_ICON;                                               </span>
<span class="2528235782114549087" onmouseenter="enter('2528235782114549087');" onmouseout="out('2528235782114549087');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3805         } else if  ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {                            </span>
<span class="-7717414875603328452" onmouseenter="enter('-7717414875603328452');" onmouseout="out('-7717414875603328452');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3806             if (TextUtils.isEmpty(info.title)) {                                                         </span>
<span class="-5806908871812941257" onmouseenter="enter('-5806908871812941257');" onmouseout="out('-5806908871812941257');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3807                 info.title = (cursor != null) ? cursor.getString(titleIndex) : &quot;&quot;;                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3808             }                                                                                            </span>
<span class="-4388547064813731487" onmouseenter="enter('-4388547064813731487');" onmouseout="out('-4388547064813731487');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">3809             info.status = ShortcutInfo.FLAG_AUTOINTALL_ICON;                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">3810 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3811                                                                                                          </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3812     // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                     </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3813     public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                      </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3814         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3815         final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                           </span>
<span class="-3206018607877806445" onmouseenter="enter('-3206018607877806445');" onmouseout="out('-3206018607877806445');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3816         widgetsAndShortcuts.addAll(AppWidgetManager.getInstance(context).getInstalledProviders());       </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3817         Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                              </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3818         widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));            </span>
<span class="-1102952865112100125" onmouseenter="enter('-1102952865112100125');" onmouseout="out('-1102952865112100125');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3819         Collections.sort(widgetsAndShortcuts,                                                            </span>
<span class="-1681839338823179912" onmouseenter="enter('-1681839338823179912');" onmouseout="out('-1681839338823179912');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3820             new LauncherModel.WidgetAndShortcutNameComparator(packageManager));                          </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3821         return widgetsAndShortcuts;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3822     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3823                                                                                                          </span>
<span class="8250241672786329916" onmouseenter="enter('8250241672786329916');" onmouseout="out('8250241672786329916');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3824     private static boolean isPackageDisabled(PackageManager pm, String packageName) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3825         try {                                                                                            </span>
<span class="4500642088138919346" onmouseenter="enter('4500642088138919346');" onmouseout="out('4500642088138919346');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3826             PackageInfo pi = pm.getPackageInfo(packageName, 0);                                          </span>
<span class="-3710685366547959245" onmouseenter="enter('-3710685366547959245');" onmouseout="out('-3710685366547959245');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3827             return !pi.applicationInfo.enabled;                                                          </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3828         } catch (NameNotFoundException e) {                                                              </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3829             // Fall through                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3830         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3831         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3832     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3833                                                                                                          </span>
<span class="5484824579758440772" onmouseenter="enter('5484824579758440772');" onmouseout="out('5484824579758440772');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3834     public static boolean isValidPackageComponent(PackageManager pm, ComponentName cn) {                 </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3835         if (cn == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3836             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3837         }                                                                                                </span>
<span class="3920598161938602311" onmouseenter="enter('3920598161938602311');" onmouseout="out('3920598161938602311');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3838         if (isPackageDisabled(pm, cn.getPackageName())) {                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3839             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3840         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3841                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3842         try {                                                                                            </span>
<span class="5148337441661745301" onmouseenter="enter('5148337441661745301');" onmouseout="out('5148337441661745301');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3843             // Check the activity                                                                        </span>
<span class="-3548512208842411383" onmouseenter="enter('-3548512208842411383');" onmouseout="out('-3548512208842411383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3844             PackageInfo pi = pm.getPackageInfo(cn.getPackageName(), 0);                                  </span>
<span class="-7304348613249571904" onmouseenter="enter('-7304348613249571904');" onmouseout="out('-7304348613249571904');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3845             return (pm.getActivityInfo(cn, 0) != null);                                                  </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3846         } catch (NameNotFoundException e) {                                                              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3847             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3848         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3849     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3850                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3851     /**                                                                                                  </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3852      * Make an ShortcutInfo object for a restored application or shortcut item that points               </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3853      * to a package that is not yet installed on the system.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3854      */                                                                                                  </span>
<span class="1063415479211056267" onmouseenter="enter('1063415479211056267');" onmouseout="out('1063415479211056267');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3855     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex) {                             </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3856         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3857         if (cursor != null) {                                                                            </span>
<span class="-7858065958686887242" onmouseenter="enter('-7858065958686887242');" onmouseout="out('-7858065958686887242');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3858             info.title =  cursor.getString(titleIndex);                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3859         } else {                                                                                         </span>
<span class="-9179287796133695880" onmouseenter="enter('-9179287796133695880');" onmouseout="out('-9179287796133695880');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3860             info.title = &quot;&quot;;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3861         }                                                                                                </span>
<span class="-1591268116362889652" onmouseenter="enter('-1591268116362889652');" onmouseout="out('-1591268116362889652');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3862         info.setIcon(mIconCache.getIcon(intent, info.title.toString()));                                 </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3863         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3864         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3865     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3866                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3867     /**                                                                                                  </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3868      * Make an Intent object for a restored application or shortcut item that points                     </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3869      * to the market page for the item.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3870      */                                                                                                  </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3871     private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                     </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3872         ComponentName componentName = intent.getComponent();                                             </span>
<span class="5230577021520033618" onmouseenter="enter('5230577021520033618');" onmouseout="out('5230577021520033618');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3873         Intent marketIntent = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="-6224205935725503646" onmouseenter="enter('-6224205935725503646');" onmouseout="out('-6224205935725503646');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3874         Uri marketUri = new Uri.Builder()                                                                </span>
<span class="-9027153585574964790" onmouseenter="enter('-9027153585574964790');" onmouseout="out('-9027153585574964790');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3875                 .scheme(&quot;market&quot;)                                                                        </span>
<span class="-1106866791415129127" onmouseenter="enter('-1106866791415129127');" onmouseout="out('-1106866791415129127');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3876                 .authority(&quot;details&quot;)                                                                    </span>
<span class="-6156875340655442296" onmouseenter="enter('-6156875340655442296');" onmouseout="out('-6156875340655442296');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3877                 .appendQueryParameter(&quot;id&quot;, componentName.getPackageName())                              </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3878                 .build();                                                                                </span>
<span class="-8203346918939498134" onmouseenter="enter('-8203346918939498134');" onmouseout="out('-8203346918939498134');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3879         Log.d(TAG, &quot;manufactured intent uri: &quot; + marketUri.toString());                                  </span>
<span class="8200775736438266685" onmouseenter="enter('8200775736438266685');" onmouseout="out('8200775736438266685');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3880         marketIntent.setData(marketUri);                                                                 </span>
<span class="-840031405639981960" onmouseenter="enter('-840031405639981960');" onmouseout="out('-840031405639981960');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3881         return marketIntent;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3882     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3883                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3884     /**                                                                                                  </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3885      * This is called from the code that adds shortcuts from the intent receiver.  This                  </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3886      * doesn&#x27;t have a Cursor, but                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3887      */                                                                                                  </span>
<span class="5614106103309211810" onmouseenter="enter('5614106103309211810');" onmouseout="out('5614106103309211810');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3888     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context) {        </span>
<span class="-3335806789481426156" onmouseenter="enter('-3335806789481426156');" onmouseout="out('-3335806789481426156');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3889         return getShortcutInfo(manager, intent, context, null, -1, -1, null);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3890     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3891                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3892     /**                                                                                                  </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3893      * Make an ShortcutInfo object for a shortcut that is an application.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3894      *                                                                                                   </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3895      * If c is not null, then it will be used to fill in missing data like the title and icon.           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3896      */                                                                                                  </span>
<span class="1276500584496912228" onmouseenter="enter('1276500584496912228');" onmouseout="out('1276500584496912228');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3897     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context,          </span>
<span class="-7918747784600027039" onmouseenter="enter('-7918747784600027039');" onmouseout="out('-7918747784600027039');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3898             Cursor c, int iconIndex, int titleIndex, HashMap&lt;Object, CharSequence&gt; labelCache) {         </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3899         ComponentName componentName = intent.getComponent();                                             </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3900         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="444940595441544179" onmouseenter="enter('444940595441544179');" onmouseout="out('444940595441544179');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3901         if (componentName != null &amp;&amp; !isValidPackageComponent(manager, componentName)) {                 </span>
<span class="-409027952341615484" onmouseenter="enter('-409027952341615484');" onmouseout="out('-409027952341615484');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3902             Log.d(TAG, &quot;Invalid package found in getShortcutInfo: &quot; + componentName);                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3903             return null;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3904         } else {                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3905             try {                                                                                        </span>
<span class="4294749985361673643" onmouseenter="enter('4294749985361673643');" onmouseout="out('4294749985361673643');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3906                 PackageInfo pi = manager.getPackageInfo(componentName.getPackageName(), 0);              </span>
<span class="3308885914817688196" onmouseenter="enter('3308885914817688196');" onmouseout="out('3308885914817688196');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3907                 info.initFlagsAndFirstInstallTime(pi);                                                   </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3908             } catch (NameNotFoundException e) {                                                          </span>
<span class="-3402401844985211338" onmouseenter="enter('-3402401844985211338');" onmouseout="out('-3402401844985211338');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3909                 Log.d(TAG, &quot;getPackInfo failed for package &quot; +                                           </span>
<span class="-7617949507024469990" onmouseenter="enter('-7617949507024469990');" onmouseout="out('-7617949507024469990');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3910                         componentName.getPackageName());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3911             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3912         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3913                                                                                                          </span>
<span class="-5839804976451698217" onmouseenter="enter('-5839804976451698217');" onmouseout="out('-5839804976451698217');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3914         // TODO: See if the PackageManager knows about this case.  If it doesn&#x27;t                         </span>
<span class="-575420847374711684" onmouseenter="enter('-575420847374711684');" onmouseout="out('-575420847374711684');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3915         // then return null &amp; delete this.                                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3916                                                                                                          </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3917         // the resource -- This may implicitly give us back the fallback icon,                           </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3918         // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                        </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3919         // to avoid saving lots of copies of that in the database, and most apps                         </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3920         // have icons anyway.                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3921                                                                                                          </span>
<span class="1748721733354639816" onmouseenter="enter('1748721733354639816');" onmouseout="out('1748721733354639816');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3922         // Attempt to use queryIntentActivities to get the ResolveInfo (with IntentFilter info) and      </span>
<span class="-6676021501376744578" onmouseenter="enter('-6676021501376744578');" onmouseout="out('-6676021501376744578');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3923         // if that fails, or is ambiguious, fallback to the standard way of getting the resolve info     </span>
<span class="-6094266232633177049" onmouseenter="enter('-6094266232633177049');" onmouseout="out('-6094266232633177049');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3924         // via resolveActivity().                                                                        </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3925         Bitmap icon = null;                                                                              </span>
<span class="-12205607414596767" onmouseenter="enter('-12205607414596767');" onmouseout="out('-12205607414596767');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3926         ResolveInfo resolveInfo = null;                                                                  </span>
<span class="5248255614039346565" onmouseenter="enter('5248255614039346565');" onmouseout="out('5248255614039346565');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3927         ComponentName oldComponent = intent.getComponent();                                              </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3928         Intent newIntent = new Intent(intent.getAction(), null);                                         </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3929         newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                 </span>
<span class="-4528672120988578527" onmouseenter="enter('-4528672120988578527');" onmouseout="out('-4528672120988578527');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3930         newIntent.setPackage(oldComponent.getPackageName());                                             </span>
<span class="-4266560778617611378" onmouseenter="enter('-4266560778617611378');" onmouseout="out('-4266560778617611378');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3931         List&lt;ResolveInfo&gt; infos = manager.queryIntentActivities(newIntent, 0);                           </span>
<span class="-1258353831095463835" onmouseenter="enter('-1258353831095463835');" onmouseout="out('-1258353831095463835');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3932         for (ResolveInfo i : infos) {                                                                    </span>
<span class="5094763243037624802" onmouseenter="enter('5094763243037624802');" onmouseout="out('5094763243037624802');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3933             ComponentName cn = new ComponentName(i.activityInfo.packageName,                             </span>
<span class="1720373740013823268" onmouseenter="enter('1720373740013823268');" onmouseout="out('1720373740013823268');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3934                     i.activityInfo.name);                                                                </span>
<span class="-7290368567659218563" onmouseenter="enter('-7290368567659218563');" onmouseout="out('-7290368567659218563');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3935             if (cn.equals(oldComponent)) {                                                               </span>
<span class="-6794055892963959667" onmouseenter="enter('-6794055892963959667');" onmouseout="out('-6794055892963959667');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3936                 resolveInfo = i;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3937             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3938         }                                                                                                </span>
<span class="6326898777629576914" onmouseenter="enter('6326898777629576914');" onmouseout="out('6326898777629576914');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3939         if (resolveInfo == null) {                                                                       </span>
<span class="8776212146813846258" onmouseenter="enter('8776212146813846258');" onmouseout="out('8776212146813846258');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3940             resolveInfo = manager.resolveActivity(intent, 0);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3941         }                                                                                                </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3942         if (resolveInfo != null) {                                                                       </span>
<span class="-7448006110826377930" onmouseenter="enter('-7448006110826377930');" onmouseout="out('-7448006110826377930');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3943             icon = mIconCache.getIcon(componentName, resolveInfo, labelCache);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3944         }                                                                                                </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3945         // the db                                                                                        </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3946         if (icon == null) {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3947             if (c != null) {                                                                             </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3948                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3949             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3950         }                                                                                                </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3951         // the fallback icon                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3952         if (icon == null) {                                                                              </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3953             icon = getFallbackIcon();                                                                    </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3954             info.usingFallbackIcon = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3955         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3956         info.setIcon(icon);                                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3957                                                                                                          </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3958         // from the resource                                                                             </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3959         if (resolveInfo != null) {                                                                       </span>
<span class="4800110805856691594" onmouseenter="enter('4800110805856691594');" onmouseout="out('4800110805856691594');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3960             ComponentName key = LauncherModel.getComponentNameFromResolveInfo(resolveInfo);              </span>
<span class="8748582400169036217" onmouseenter="enter('8748582400169036217');" onmouseout="out('8748582400169036217');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3961             if (labelCache != null &amp;&amp; labelCache.containsKey(key)) {                                     </span>
<span class="3192670581922801839" onmouseenter="enter('3192670581922801839');" onmouseout="out('3192670581922801839');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3962                 info.title = labelCache.get(key);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3963             } else {                                                                                     </span>
<span class="-2714967885034418454" onmouseenter="enter('-2714967885034418454');" onmouseout="out('-2714967885034418454');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3964                 info.title = resolveInfo.activityInfo.loadLabel(manager);                                </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3965                 if (labelCache != null) {                                                                </span>
<span class="-7678945850387299322" onmouseenter="enter('-7678945850387299322');" onmouseout="out('-7678945850387299322');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3966                     labelCache.put(key, info.title);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3967                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3968             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3969         }                                                                                                </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3970         // from the db                                                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3971         if (info.title == null) {                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3972             if (c != null) {                                                                             </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3973                 info.title =  c.getString(titleIndex);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3974             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3975         }                                                                                                </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3976         // fall back to the class name of the activity                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3977         if (info.title == null) {                                                                        </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3978             info.title = componentName.getClassName();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3979         }                                                                                                </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3980         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3981         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3982     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3983                                                                                                          </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3984     static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                               </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3985             ItemInfoFilter f) {                                                                          </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3986         HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                            </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3987         for (ItemInfo i : infos) {                                                                       </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3988             if (i instanceof ShortcutInfo) {                                                             </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3989                 ShortcutInfo info = (ShortcutInfo) i;                                                    </span>
<span class="299648897077832064" onmouseenter="enter('299648897077832064');" onmouseout="out('299648897077832064');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3990                 ComponentName cn = info.intent.getComponent();                                           </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3991                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3992                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3993                 }                                                                                        </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3994             } else if (i instanceof FolderInfo) {                                                        </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3995                 FolderInfo info = (FolderInfo) i;                                                        </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3996                 for (ShortcutInfo s : info.contents) {                                                   </span>
<span class="2331162999822676145" onmouseenter="enter('2331162999822676145');" onmouseout="out('2331162999822676145');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3997                     ComponentName cn = s.intent.getComponent();                                          </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3998                     if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                       </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">3999                         filtered.add(s);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4000                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4001                 }                                                                                        </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4002             } else if (i instanceof LauncherAppWidgetInfo) {                                             </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4003                 LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                  </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4004                 ComponentName cn = info.providerName;                                                    </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4005                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4006                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4007                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4008             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4009         }                                                                                                </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4010         return new ArrayList&lt;ItemInfo&gt;(filtered);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4011     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4012                                                                                                          </span>
<span class="-3045683366231863679" onmouseenter="enter('-3045683366231863679');" onmouseout="out('-3045683366231863679');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4013     private ArrayList&lt;ItemInfo&gt; getItemInfoForPackageName(final String pn) {                             </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4014         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4015             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4016             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="4366277958827250658" onmouseenter="enter('4366277958827250658');" onmouseout="out('4366277958827250658');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4017                 return cn.getPackageName().equals(pn);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4018             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4019         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4020         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4021     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4022                                                                                                          </span>
<span class="5278497386445713053" onmouseenter="enter('5278497386445713053');" onmouseout="out('5278497386445713053');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4023     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname) {                 </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4024         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4025             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4026             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4027                 return cn.equals(cname);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4028             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4029         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4030         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4031     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4032                                                                                                          </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4033     public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                         </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4034         if (i instanceof ShortcutInfo) {                                                                 </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4035             ShortcutInfo info = (ShortcutInfo) i;                                                        </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4036             // We need to check for ACTION_MAIN otherwise getComponent() might                           </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4037             // return null for some shortcuts (for instance, for shortcuts to                            </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4038             // web pages.)                                                                               </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4039             Intent intent = info.intent;                                                                 </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4040             ComponentName name = intent.getComponent();                                                  </span>
<span class="-7226540389871247766" onmouseenter="enter('-7226540389871247766');" onmouseout="out('-7226540389871247766');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4041             if (info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION &amp;&amp;                     </span>
<span class="-3498713534944595637" onmouseenter="enter('-3498713534944595637');" onmouseout="out('-3498713534944595637');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4042                     Intent.ACTION_MAIN.equals(intent.getAction()) &amp;&amp; name != null) {                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4043                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4044             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4045         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4046         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4047     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4048                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4049     /**                                                                                                  </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4050      * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4051      */                                                                                                  </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4052     private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                      </span>
<span class="4905943326370352288" onmouseenter="enter('4905943326370352288');" onmouseout="out('4905943326370352288');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4053             int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex,               </span>
<span class="483103881605747557" onmouseenter="enter('483103881605747557');" onmouseout="out('483103881605747557');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4054             int titleIndex) {                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4055                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4056         Bitmap icon = null;                                                                              </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4057         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4058         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4059                                                                                                          </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4060         // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4061                                                                                                          </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4062         info.title = c.getString(titleIndex);                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4063                                                                                                          </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4064         int iconType = c.getInt(iconTypeIndex);                                                          </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4065         switch (iconType) {                                                                              </span>
<span class="-349524516714147238" onmouseenter="enter('-349524516714147238');" onmouseout="out('-349524516714147238');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4066         case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:                                              </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4067             String packageName = c.getString(iconPackageIndex);                                          </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4068             String resourceName = c.getString(iconResourceIndex);                                        </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4069             PackageManager packageManager = context.getPackageManager();                                 </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4070             info.customIcon = false;                                                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4071             // the resource                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4072             try {                                                                                        </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4073                 Resources resources = packageManager.getResourcesForApplication(packageName);            </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4074                 if (resources != null) {                                                                 </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4075                     final int id = resources.getIdentifier(resourceName, null, null);                    </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4076                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4077                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4078                 }                                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4079             } catch (Exception e) {                                                                      </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4080                 // drop this.  we have other places to look for icons                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4081             }                                                                                            </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4082             // the db                                                                                    </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4083             if (icon == null) {                                                                          </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4084                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4085             }                                                                                            </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4086             // the fallback icon                                                                         </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4087             if (icon == null) {                                                                          </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4088                 icon = getFallbackIcon();                                                                </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4089                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4090             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4091             break;                                                                                       </span>
<span class="8287056964614325383" onmouseenter="enter('8287056964614325383');" onmouseout="out('8287056964614325383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4092         case LauncherSettings.Favorites.ICON_TYPE_BITMAP:                                                </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4093             icon = getIconFromCursor(c, iconIndex, context);                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4094             if (icon == null) {                                                                          </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4095                 icon = getFallbackIcon();                                                                </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4096                 info.customIcon = false;                                                                 </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4097                 info.usingFallbackIcon = true;                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4098             } else {                                                                                     </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4099                 info.customIcon = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4100             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4101             break;                                                                                       </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4102         default:                                                                                         </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4103             icon = getFallbackIcon();                                                                    </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4104             info.usingFallbackIcon = true;                                                               </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4105             info.customIcon = false;                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4106             break;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4107         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4108         info.setIcon(icon);                                                                              </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4109         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4110     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4111                                                                                                          </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4112     Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                 </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4113         @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                           </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4114         final boolean debug = false;                                                                     </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4115         if (debug) {                                                                                     </span>
<span class="-6059745727821652987" onmouseenter="enter('-6059745727821652987');" onmouseout="out('-6059745727821652987');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4116             Log.d(TAG, &quot;getIconFromCursor app=&quot;                                                          </span>
<span class="3938717124241653137" onmouseenter="enter('3938717124241653137');" onmouseout="out('3938717124241653137');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4117                     + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4118         }                                                                                                </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4119         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4120         try {                                                                                            </span>
<span class="-8927216840433750458" onmouseenter="enter('-8927216840433750458');" onmouseout="out('-8927216840433750458');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4121             return Utilities.createIconBitmap(                                                           </span>
<span class="5146235978369237158" onmouseenter="enter('5146235978369237158');" onmouseout="out('5146235978369237158');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4122                     BitmapFactory.decodeByteArray(data, 0, data.length), context);                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4123         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4124             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4125         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4126     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4127                                                                                                          </span>
<span class="-7359014031490826383" onmouseenter="enter('-7359014031490826383');" onmouseout="out('-7359014031490826383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4128     ShortcutInfo addShortcut(Context context, Intent data, long container, int screen,                   </span>
<span class="6268414987721391526" onmouseenter="enter('6268414987721391526');" onmouseout="out('6268414987721391526');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4129             int cellX, int cellY, boolean notify) {                                                      </span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4130         final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                           </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4131         if (info == null) {                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4132             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4133         }                                                                                                </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4134         addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4135                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4136         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4137     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4138                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4139     /**                                                                                                  </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4140      * Attempts to find an AppWidgetProviderInfo that matches the given component.                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4141      */                                                                                                  </span>
<span class="-5080859468016274115" onmouseenter="enter('-5080859468016274115');" onmouseout="out('-5080859468016274115');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4142     AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                        </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4143             ComponentName component) {                                                                   </span>
<span class="-6575430528437366773" onmouseenter="enter('-6575430528437366773');" onmouseout="out('-6575430528437366773');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4144         List&lt;AppWidgetProviderInfo&gt; widgets =                                                            </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4145             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4146         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4147             if (info.provider.equals(component)) {                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4148                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4149             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4150         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4151         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4152     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4153                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4154     /**                                                                                                  </span>
<span class="7439199513195640847" onmouseenter="enter('7439199513195640847');" onmouseout="out('7439199513195640847');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4155      * Returns a list of all the widgets that can handle configuration with a particular mimeType.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4156      */                                                                                                  </span>
<span class="6325854662222182070" onmouseenter="enter('6325854662222182070');" onmouseout="out('6325854662222182070');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4157     List&lt;WidgetMimeTypeHandlerData&gt; resolveWidgetsForMimeType(Context context, String mimeType) {        </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4158         final PackageManager packageManager = context.getPackageManager();                               </span>
<span class="3847705782231652914" onmouseenter="enter('3847705782231652914');" onmouseout="out('3847705782231652914');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4159         final List&lt;WidgetMimeTypeHandlerData&gt; supportedConfigurationActivities =                         </span>
<span class="-5417931937414580646" onmouseenter="enter('-5417931937414580646');" onmouseout="out('-5417931937414580646');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4160             new ArrayList&lt;WidgetMimeTypeHandlerData&gt;();                                                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4161                                                                                                          </span>
<span class="3700104316520923099" onmouseenter="enter('3700104316520923099');" onmouseout="out('3700104316520923099');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4162         final Intent supportsIntent =                                                                    </span>
<span class="-5996974504874484707" onmouseenter="enter('-5996974504874484707');" onmouseout="out('-5996974504874484707');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4163             new Intent(InstallWidgetReceiver.ACTION_SUPPORTS_CLIPDATA_MIMETYPE);                         </span>
<span class="6679063100467623292" onmouseenter="enter('6679063100467623292');" onmouseout="out('6679063100467623292');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4164         supportsIntent.setType(mimeType);                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4165                                                                                                          </span>
<span class="6275845746944894373" onmouseenter="enter('6275845746944894373');" onmouseout="out('6275845746944894373');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4166         // Create a set of widget configuration components that we can test against                      </span>
<span class="361965435897470734" onmouseenter="enter('361965435897470734');" onmouseout="out('361965435897470734');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4167         final List&lt;AppWidgetProviderInfo&gt; widgets =                                                      </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4168             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="9185108259439406491" onmouseenter="enter('9185108259439406491');" onmouseout="out('9185108259439406491');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4169         final HashMap&lt;ComponentName, AppWidgetProviderInfo&gt; configurationComponentToWidget =             </span>
<span class="-4320342521313681795" onmouseenter="enter('-4320342521313681795');" onmouseout="out('-4320342521313681795');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4170             new HashMap&lt;ComponentName, AppWidgetProviderInfo&gt;();                                         </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4171         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="-5537825176935075872" onmouseenter="enter('-5537825176935075872');" onmouseout="out('-5537825176935075872');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4172             configurationComponentToWidget.put(info.configure, info);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4173         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4174                                                                                                          </span>
<span class="7227984661430491714" onmouseenter="enter('7227984661430491714');" onmouseout="out('7227984661430491714');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4175         // Run through each of the intents that can handle this type of clip data, and cross             </span>
<span class="-5312515598910931459" onmouseenter="enter('-5312515598910931459');" onmouseout="out('-5312515598910931459');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4176         // reference them with the components that are actual configuration components                   </span>
<span class="96188399651153294" onmouseenter="enter('96188399651153294');" onmouseout="out('96188399651153294');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4177         final List&lt;ResolveInfo&gt; activities = packageManager.queryIntentActivities(supportsIntent,        </span>
<span class="2456166036476176214" onmouseenter="enter('2456166036476176214');" onmouseout="out('2456166036476176214');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4178                 PackageManager.MATCH_DEFAULT_ONLY);                                                      </span>
<span class="-6210771211908512935" onmouseenter="enter('-6210771211908512935');" onmouseout="out('-6210771211908512935');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4179         for (ResolveInfo info : activities) {                                                            </span>
<span class="4178492805266676194" onmouseenter="enter('4178492805266676194');" onmouseout="out('4178492805266676194');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4180             final ActivityInfo activityInfo = info.activityInfo;                                         </span>
<span class="5911001791562559694" onmouseenter="enter('5911001791562559694');" onmouseout="out('5911001791562559694');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4181             final ComponentName infoComponent = new ComponentName(activityInfo.packageName,              </span>
<span class="2224927995621460603" onmouseenter="enter('2224927995621460603');" onmouseout="out('2224927995621460603');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4182                     activityInfo.name);                                                                  </span>
<span class="5227428239073058925" onmouseenter="enter('5227428239073058925');" onmouseout="out('5227428239073058925');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4183             if (configurationComponentToWidget.containsKey(infoComponent)) {                             </span>
<span class="1978663855217064477" onmouseenter="enter('1978663855217064477');" onmouseout="out('1978663855217064477');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4184                 supportedConfigurationActivities.add(                                                    </span>
<span class="-7165755523548006690" onmouseenter="enter('-7165755523548006690');" onmouseout="out('-7165755523548006690');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4185                         new InstallWidgetReceiver.WidgetMimeTypeHandlerData(info,                        </span>
<span class="-7657609803705245302" onmouseenter="enter('-7657609803705245302');" onmouseout="out('-7657609803705245302');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4186                                 configurationComponentToWidget.get(infoComponent)));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4187             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4188         }                                                                                                </span>
<span class="8087136273107515292" onmouseenter="enter('8087136273107515292');" onmouseout="out('8087136273107515292');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4189         return supportedConfigurationActivities;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4190     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4191                                                                                                          </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4192     ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {             </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4193         Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                           </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4194         String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                   </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4195         Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                         </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4196                                                                                                          </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4197         if (intent == null) {                                                                            </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4198             // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null         </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4199             Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4200             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4201         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4202                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4203         Bitmap icon = null;                                                                              </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4204         boolean customIcon = false;                                                                      </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4205         ShortcutIconResource iconResource = null;                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4206                                                                                                          </span>
<span class="4708321654003878831" onmouseenter="enter('4708321654003878831');" onmouseout="out('4708321654003878831');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4207         if (bitmap != null &amp;&amp; bitmap instanceof Bitmap) {                                                </span>
<span class="-4792971395534249505" onmouseenter="enter('-4792971395534249505');" onmouseout="out('-4792971395534249505');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4208             icon = Utilities.createIconBitmap(new FastBitmapDrawable((Bitmap)bitmap), context);          </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4209             customIcon = true;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4210         } else {                                                                                         </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4211             Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);             </span>
<span class="1150112908884585569" onmouseenter="enter('1150112908884585569');" onmouseout="out('1150112908884585569');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4212             if (extra != null &amp;&amp; extra instanceof ShortcutIconResource) {                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4213                 try {                                                                                    </span>
<span class="7381422411731402038" onmouseenter="enter('7381422411731402038');" onmouseout="out('7381422411731402038');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4214                     iconResource = (ShortcutIconResource) extra;                                         </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4215                     final PackageManager packageManager = context.getPackageManager();                   </span>
<span class="8040670109966211806" onmouseenter="enter('8040670109966211806');" onmouseout="out('8040670109966211806');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4216                     Resources resources = packageManager.getResourcesForApplication(                     </span>
<span class="6486160691197808360" onmouseenter="enter('6486160691197808360');" onmouseout="out('6486160691197808360');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4217                             iconResource.packageName);                                                   </span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4218                     final int id = resources.getIdentifier(iconResource.resourceName, null, null);       </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4219                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4220                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4221                 } catch (Exception e) {                                                                  </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4222                     Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4223                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4224             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4225         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4226                                                                                                          </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4227         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4228                                                                                                          </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4229         if (icon == null) {                                                                              </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4230             if (fallbackIcon != null) {                                                                  </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4231                 icon = fallbackIcon;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4232             } else {                                                                                     </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4233                 icon = getFallbackIcon();                                                                </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4234                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4235             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4236         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4237         info.setIcon(icon);                                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4238                                                                                                          </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4239         info.title = name;                                                                               </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4240         info.intent = intent;                                                                            </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4241         info.customIcon = customIcon;                                                                    </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4242         info.iconResource = iconResource;                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4243                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4244         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4245     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4246                                                                                                          </span>
<span class="869799550823252877" onmouseenter="enter('869799550823252877');" onmouseout="out('869799550823252877');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4247     boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c,             </span>
<span class="650460935465639981" onmouseenter="enter('650460935465639981');" onmouseout="out('650460935465639981');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4248             int iconIndex) {                                                                             </span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4249         // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                    </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4250         if (!mAppsCanBeOnRemoveableStorage) {                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4251             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4252         }                                                                                                </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4253         // If this icon doesn&#x27;t have a custom icon, check to see                                         </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4254         // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                         </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4255         // we&#x27;re going to show, store what we are going to show back                                     </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4256         // into the DB.  We do this so when we&#x27;re loading, if the                                        </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4257         // package manager can&#x27;t find an icon (for example because                                       </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">4258 =======                                                                                                  </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">4259         info.usingFallbackIcon = true;                                                                   </span>
<span class="4720658287044976809" onmouseenter="enter('4720658287044976809');" onmouseout="out('4720658287044976809');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">4260         info.setIcon(getFallbackIcon());                                                                 </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">4261         if (cursor != null) {                                                                            </span>
<span class="-7858065958686887242" onmouseenter="enter('-7858065958686887242');" onmouseout="out('-7858065958686887242');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">4262             info.title =  cursor.getString(titleIndex);                                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">4263 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4264         } else {                                                                                         </span>
<span class="5717376002108262372" onmouseenter="enter('5717376002108262372');" onmouseout="out('5717376002108262372');" style="">4265             throw new InvalidParameterException(&quot;Invalid restoreType &quot; + promiseType);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4266         }                                                                                                </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">4267 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">4268                                                                                                          </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">4269         info.contentDescription = mUserManager.getBadgedLabelForUser(                                    </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">4270                 info.title.toString(), info.user);                                                       </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">4271 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4272         widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));            </span>
<span class="-1102952865112100125" onmouseenter="enter('-1102952865112100125');" onmouseout="out('-1102952865112100125');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4273         Collections.sort(widgetsAndShortcuts,                                                            </span>
<span class="-1681839338823179912" onmouseenter="enter('-1681839338823179912');" onmouseout="out('-1681839338823179912');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4274             new LauncherModel.WidgetAndShortcutNameComparator(packageManager));                          </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4275         return widgetsAndShortcuts;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4276     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4277                                                                                                          </span>
<span class="8250241672786329916" onmouseenter="enter('8250241672786329916');" onmouseout="out('8250241672786329916');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4278     private static boolean isPackageDisabled(PackageManager pm, String packageName) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4279         try {                                                                                            </span>
<span class="4500642088138919346" onmouseenter="enter('4500642088138919346');" onmouseout="out('4500642088138919346');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4280             PackageInfo pi = pm.getPackageInfo(packageName, 0);                                          </span>
<span class="-3710685366547959245" onmouseenter="enter('-3710685366547959245');" onmouseout="out('-3710685366547959245');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4281             return !pi.applicationInfo.enabled;                                                          </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4282         } catch (NameNotFoundException e) {                                                              </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4283             // Fall through                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4284         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4285         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4286     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4287                                                                                                          </span>
<span class="5484824579758440772" onmouseenter="enter('5484824579758440772');" onmouseout="out('5484824579758440772');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4288     public static boolean isValidPackageComponent(PackageManager pm, ComponentName cn) {                 </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4289         if (cn == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4290             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4291         }                                                                                                </span>
<span class="3920598161938602311" onmouseenter="enter('3920598161938602311');" onmouseout="out('3920598161938602311');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4292         if (isPackageDisabled(pm, cn.getPackageName())) {                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4293             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4294         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4295                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4296         try {                                                                                            </span>
<span class="5148337441661745301" onmouseenter="enter('5148337441661745301');" onmouseout="out('5148337441661745301');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4297             // Check the activity                                                                        </span>
<span class="-3548512208842411383" onmouseenter="enter('-3548512208842411383');" onmouseout="out('-3548512208842411383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4298             PackageInfo pi = pm.getPackageInfo(cn.getPackageName(), 0);                                  </span>
<span class="-7304348613249571904" onmouseenter="enter('-7304348613249571904');" onmouseout="out('-7304348613249571904');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4299             return (pm.getActivityInfo(cn, 0) != null);                                                  </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4300         } catch (NameNotFoundException e) {                                                              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4301             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4302         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4303     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4304                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4305     /**                                                                                                  </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4306      * Make an ShortcutInfo object for a restored application or shortcut item that points               </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4307      * to a package that is not yet installed on the system.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4308      */                                                                                                  </span>
<span class="1063415479211056267" onmouseenter="enter('1063415479211056267');" onmouseout="out('1063415479211056267');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4309     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex) {                             </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4310         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4311         if (cursor != null) {                                                                            </span>
<span class="-7858065958686887242" onmouseenter="enter('-7858065958686887242');" onmouseout="out('-7858065958686887242');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4312             info.title =  cursor.getString(titleIndex);                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4313         } else {                                                                                         </span>
<span class="-9179287796133695880" onmouseenter="enter('-9179287796133695880');" onmouseout="out('-9179287796133695880');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4314             info.title = &quot;&quot;;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4315         }                                                                                                </span>
<span class="-1591268116362889652" onmouseenter="enter('-1591268116362889652');" onmouseout="out('-1591268116362889652');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4316         info.setIcon(mIconCache.getIcon(intent, info.title.toString()));                                 </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4317         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4318         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4319     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4320                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4321     /**                                                                                                  </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4322      * Make an Intent object for a restored application or shortcut item that points                     </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4323      * to the market page for the item.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4324      */                                                                                                  </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4325     private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                     </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4326         ComponentName componentName = intent.getComponent();                                             </span>
<span class="5230577021520033618" onmouseenter="enter('5230577021520033618');" onmouseout="out('5230577021520033618');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4327         Intent marketIntent = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="-6224205935725503646" onmouseenter="enter('-6224205935725503646');" onmouseout="out('-6224205935725503646');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4328         Uri marketUri = new Uri.Builder()                                                                </span>
<span class="-9027153585574964790" onmouseenter="enter('-9027153585574964790');" onmouseout="out('-9027153585574964790');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4329                 .scheme(&quot;market&quot;)                                                                        </span>
<span class="-1106866791415129127" onmouseenter="enter('-1106866791415129127');" onmouseout="out('-1106866791415129127');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4330                 .authority(&quot;details&quot;)                                                                    </span>
<span class="-6156875340655442296" onmouseenter="enter('-6156875340655442296');" onmouseout="out('-6156875340655442296');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4331                 .appendQueryParameter(&quot;id&quot;, componentName.getPackageName())                              </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4332                 .build();                                                                                </span>
<span class="-8203346918939498134" onmouseenter="enter('-8203346918939498134');" onmouseout="out('-8203346918939498134');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4333         Log.d(TAG, &quot;manufactured intent uri: &quot; + marketUri.toString());                                  </span>
<span class="8200775736438266685" onmouseenter="enter('8200775736438266685');" onmouseout="out('8200775736438266685');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4334         marketIntent.setData(marketUri);                                                                 </span>
<span class="-840031405639981960" onmouseenter="enter('-840031405639981960');" onmouseout="out('-840031405639981960');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4335         return marketIntent;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4336     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4337                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4338     /**                                                                                                  </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4339      * This is called from the code that adds shortcuts from the intent receiver.  This                  </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4340      * doesn&#x27;t have a Cursor, but                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4341      */                                                                                                  </span>
<span class="5614106103309211810" onmouseenter="enter('5614106103309211810');" onmouseout="out('5614106103309211810');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4342     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context) {        </span>
<span class="-3335806789481426156" onmouseenter="enter('-3335806789481426156');" onmouseout="out('-3335806789481426156');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4343         return getShortcutInfo(manager, intent, context, null, -1, -1, null);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4344     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4345                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4346     /**                                                                                                  </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4347      * Make an ShortcutInfo object for a shortcut that is an application.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4348      *                                                                                                   </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4349      * If c is not null, then it will be used to fill in missing data like the title and icon.           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4350      */                                                                                                  </span>
<span class="1276500584496912228" onmouseenter="enter('1276500584496912228');" onmouseout="out('1276500584496912228');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4351     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context,          </span>
<span class="-7918747784600027039" onmouseenter="enter('-7918747784600027039');" onmouseout="out('-7918747784600027039');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4352             Cursor c, int iconIndex, int titleIndex, HashMap&lt;Object, CharSequence&gt; labelCache) {         </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4353         ComponentName componentName = intent.getComponent();                                             </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4354         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="444940595441544179" onmouseenter="enter('444940595441544179');" onmouseout="out('444940595441544179');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4355         if (componentName != null &amp;&amp; !isValidPackageComponent(manager, componentName)) {                 </span>
<span class="-409027952341615484" onmouseenter="enter('-409027952341615484');" onmouseout="out('-409027952341615484');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4356             Log.d(TAG, &quot;Invalid package found in getShortcutInfo: &quot; + componentName);                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4357             return null;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4358         } else {                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4359             try {                                                                                        </span>
<span class="4294749985361673643" onmouseenter="enter('4294749985361673643');" onmouseout="out('4294749985361673643');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4360                 PackageInfo pi = manager.getPackageInfo(componentName.getPackageName(), 0);              </span>
<span class="3308885914817688196" onmouseenter="enter('3308885914817688196');" onmouseout="out('3308885914817688196');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4361                 info.initFlagsAndFirstInstallTime(pi);                                                   </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4362             } catch (NameNotFoundException e) {                                                          </span>
<span class="-3402401844985211338" onmouseenter="enter('-3402401844985211338');" onmouseout="out('-3402401844985211338');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4363                 Log.d(TAG, &quot;getPackInfo failed for package &quot; +                                           </span>
<span class="-7617949507024469990" onmouseenter="enter('-7617949507024469990');" onmouseout="out('-7617949507024469990');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4364                         componentName.getPackageName());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4365             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4366         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4367                                                                                                          </span>
<span class="-5839804976451698217" onmouseenter="enter('-5839804976451698217');" onmouseout="out('-5839804976451698217');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4368         // TODO: See if the PackageManager knows about this case.  If it doesn&#x27;t                         </span>
<span class="-575420847374711684" onmouseenter="enter('-575420847374711684');" onmouseout="out('-575420847374711684');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4369         // then return null &amp; delete this.                                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4370                                                                                                          </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4371         // the resource -- This may implicitly give us back the fallback icon,                           </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4372         // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                        </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4373         // to avoid saving lots of copies of that in the database, and most apps                         </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4374         // have icons anyway.                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4375                                                                                                          </span>
<span class="1748721733354639816" onmouseenter="enter('1748721733354639816');" onmouseout="out('1748721733354639816');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4376         // Attempt to use queryIntentActivities to get the ResolveInfo (with IntentFilter info) and      </span>
<span class="-6676021501376744578" onmouseenter="enter('-6676021501376744578');" onmouseout="out('-6676021501376744578');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4377         // if that fails, or is ambiguious, fallback to the standard way of getting the resolve info     </span>
<span class="-6094266232633177049" onmouseenter="enter('-6094266232633177049');" onmouseout="out('-6094266232633177049');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4378         // via resolveActivity().                                                                        </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4379         Bitmap icon = null;                                                                              </span>
<span class="-12205607414596767" onmouseenter="enter('-12205607414596767');" onmouseout="out('-12205607414596767');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4380         ResolveInfo resolveInfo = null;                                                                  </span>
<span class="5248255614039346565" onmouseenter="enter('5248255614039346565');" onmouseout="out('5248255614039346565');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4381         ComponentName oldComponent = intent.getComponent();                                              </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4382         Intent newIntent = new Intent(intent.getAction(), null);                                         </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4383         newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                 </span>
<span class="-4528672120988578527" onmouseenter="enter('-4528672120988578527');" onmouseout="out('-4528672120988578527');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4384         newIntent.setPackage(oldComponent.getPackageName());                                             </span>
<span class="-4266560778617611378" onmouseenter="enter('-4266560778617611378');" onmouseout="out('-4266560778617611378');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4385         List&lt;ResolveInfo&gt; infos = manager.queryIntentActivities(newIntent, 0);                           </span>
<span class="-1258353831095463835" onmouseenter="enter('-1258353831095463835');" onmouseout="out('-1258353831095463835');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4386         for (ResolveInfo i : infos) {                                                                    </span>
<span class="5094763243037624802" onmouseenter="enter('5094763243037624802');" onmouseout="out('5094763243037624802');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4387             ComponentName cn = new ComponentName(i.activityInfo.packageName,                             </span>
<span class="1720373740013823268" onmouseenter="enter('1720373740013823268');" onmouseout="out('1720373740013823268');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4388                     i.activityInfo.name);                                                                </span>
<span class="-7290368567659218563" onmouseenter="enter('-7290368567659218563');" onmouseout="out('-7290368567659218563');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4389             if (cn.equals(oldComponent)) {                                                               </span>
<span class="-6794055892963959667" onmouseenter="enter('-6794055892963959667');" onmouseout="out('-6794055892963959667');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4390                 resolveInfo = i;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4391             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4392         }                                                                                                </span>
<span class="6326898777629576914" onmouseenter="enter('6326898777629576914');" onmouseout="out('6326898777629576914');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4393         if (resolveInfo == null) {                                                                       </span>
<span class="8776212146813846258" onmouseenter="enter('8776212146813846258');" onmouseout="out('8776212146813846258');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4394             resolveInfo = manager.resolveActivity(intent, 0);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4395         }                                                                                                </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4396         if (resolveInfo != null) {                                                                       </span>
<span class="-7448006110826377930" onmouseenter="enter('-7448006110826377930');" onmouseout="out('-7448006110826377930');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4397             icon = mIconCache.getIcon(componentName, resolveInfo, labelCache);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4398         }                                                                                                </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4399         // the db                                                                                        </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4400         if (icon == null) {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4401             if (c != null) {                                                                             </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4402                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4403             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4404         }                                                                                                </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4405         // the fallback icon                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4406         if (icon == null) {                                                                              </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4407             icon = getFallbackIcon();                                                                    </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4408             info.usingFallbackIcon = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4409         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4410         info.setIcon(icon);                                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4411                                                                                                          </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4412         // from the resource                                                                             </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4413         if (resolveInfo != null) {                                                                       </span>
<span class="4800110805856691594" onmouseenter="enter('4800110805856691594');" onmouseout="out('4800110805856691594');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4414             ComponentName key = LauncherModel.getComponentNameFromResolveInfo(resolveInfo);              </span>
<span class="8748582400169036217" onmouseenter="enter('8748582400169036217');" onmouseout="out('8748582400169036217');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4415             if (labelCache != null &amp;&amp; labelCache.containsKey(key)) {                                     </span>
<span class="3192670581922801839" onmouseenter="enter('3192670581922801839');" onmouseout="out('3192670581922801839');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4416                 info.title = labelCache.get(key);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4417             } else {                                                                                     </span>
<span class="-2714967885034418454" onmouseenter="enter('-2714967885034418454');" onmouseout="out('-2714967885034418454');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4418                 info.title = resolveInfo.activityInfo.loadLabel(manager);                                </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4419                 if (labelCache != null) {                                                                </span>
<span class="-7678945850387299322" onmouseenter="enter('-7678945850387299322');" onmouseout="out('-7678945850387299322');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4420                     labelCache.put(key, info.title);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4421                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4422             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4423         }                                                                                                </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4424         // from the db                                                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4425         if (info.title == null) {                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4426             if (c != null) {                                                                             </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4427                 info.title =  c.getString(titleIndex);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4428             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4429         }                                                                                                </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4430         // fall back to the class name of the activity                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4431         if (info.title == null) {                                                                        </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4432             info.title = componentName.getClassName();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4433         }                                                                                                </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4434         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4435         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4436     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4437                                                                                                          </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4438     static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                               </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4439             ItemInfoFilter f) {                                                                          </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4440         HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                            </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4441         for (ItemInfo i : infos) {                                                                       </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4442             if (i instanceof ShortcutInfo) {                                                             </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4443                 ShortcutInfo info = (ShortcutInfo) i;                                                    </span>
<span class="299648897077832064" onmouseenter="enter('299648897077832064');" onmouseout="out('299648897077832064');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4444                 ComponentName cn = info.intent.getComponent();                                           </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4445                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4446                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4447                 }                                                                                        </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4448             } else if (i instanceof FolderInfo) {                                                        </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4449                 FolderInfo info = (FolderInfo) i;                                                        </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4450                 for (ShortcutInfo s : info.contents) {                                                   </span>
<span class="2331162999822676145" onmouseenter="enter('2331162999822676145');" onmouseout="out('2331162999822676145');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4451                     ComponentName cn = s.intent.getComponent();                                          </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4452                     if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                       </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4453                         filtered.add(s);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4454                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4455                 }                                                                                        </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4456             } else if (i instanceof LauncherAppWidgetInfo) {                                             </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4457                 LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                  </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4458                 ComponentName cn = info.providerName;                                                    </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4459                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4460                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4461                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4462             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4463         }                                                                                                </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4464         return new ArrayList&lt;ItemInfo&gt;(filtered);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4465     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4466                                                                                                          </span>
<span class="-3045683366231863679" onmouseenter="enter('-3045683366231863679');" onmouseout="out('-3045683366231863679');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4467     private ArrayList&lt;ItemInfo&gt; getItemInfoForPackageName(final String pn) {                             </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4468         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4469             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4470             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="4366277958827250658" onmouseenter="enter('4366277958827250658');" onmouseout="out('4366277958827250658');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4471                 return cn.getPackageName().equals(pn);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4472             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4473         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4474         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4475     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4476                                                                                                          </span>
<span class="5278497386445713053" onmouseenter="enter('5278497386445713053');" onmouseout="out('5278497386445713053');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4477     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname) {                 </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4478         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4479             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4480             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4481                 return cn.equals(cname);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4482             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4483         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4484         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4485     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4486                                                                                                          </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4487     public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                         </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4488         if (i instanceof ShortcutInfo) {                                                                 </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4489             ShortcutInfo info = (ShortcutInfo) i;                                                        </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4490             // We need to check for ACTION_MAIN otherwise getComponent() might                           </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4491             // return null for some shortcuts (for instance, for shortcuts to                            </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4492             // web pages.)                                                                               </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4493             Intent intent = info.intent;                                                                 </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4494             ComponentName name = intent.getComponent();                                                  </span>
<span class="-7226540389871247766" onmouseenter="enter('-7226540389871247766');" onmouseout="out('-7226540389871247766');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4495             if (info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION &amp;&amp;                     </span>
<span class="-3498713534944595637" onmouseenter="enter('-3498713534944595637');" onmouseout="out('-3498713534944595637');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4496                     Intent.ACTION_MAIN.equals(intent.getAction()) &amp;&amp; name != null) {                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4497                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4498             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4499         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4500         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4501     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4502                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4503     /**                                                                                                  </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4504      * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4505      */                                                                                                  </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4506     private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                      </span>
<span class="4905943326370352288" onmouseenter="enter('4905943326370352288');" onmouseout="out('4905943326370352288');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4507             int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex,               </span>
<span class="483103881605747557" onmouseenter="enter('483103881605747557');" onmouseout="out('483103881605747557');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4508             int titleIndex) {                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4509                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4510         Bitmap icon = null;                                                                              </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4511         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4512         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4513                                                                                                          </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4514         // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4515                                                                                                          </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4516         info.title = c.getString(titleIndex);                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4517                                                                                                          </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4518         int iconType = c.getInt(iconTypeIndex);                                                          </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4519         switch (iconType) {                                                                              </span>
<span class="-349524516714147238" onmouseenter="enter('-349524516714147238');" onmouseout="out('-349524516714147238');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4520         case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:                                              </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4521             String packageName = c.getString(iconPackageIndex);                                          </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4522             String resourceName = c.getString(iconResourceIndex);                                        </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4523             PackageManager packageManager = context.getPackageManager();                                 </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4524             info.customIcon = false;                                                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4525             // the resource                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4526             try {                                                                                        </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4527                 Resources resources = packageManager.getResourcesForApplication(packageName);            </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4528                 if (resources != null) {                                                                 </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4529                     final int id = resources.getIdentifier(resourceName, null, null);                    </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4530                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4531                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4532                 }                                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4533             } catch (Exception e) {                                                                      </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4534                 // drop this.  we have other places to look for icons                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4535             }                                                                                            </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4536             // the db                                                                                    </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4537             if (icon == null) {                                                                          </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4538                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4539             }                                                                                            </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4540             // the fallback icon                                                                         </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4541             if (icon == null) {                                                                          </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4542                 icon = getFallbackIcon();                                                                </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4543                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4544             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4545             break;                                                                                       </span>
<span class="8287056964614325383" onmouseenter="enter('8287056964614325383');" onmouseout="out('8287056964614325383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4546         case LauncherSettings.Favorites.ICON_TYPE_BITMAP:                                                </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4547             icon = getIconFromCursor(c, iconIndex, context);                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4548             if (icon == null) {                                                                          </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4549                 icon = getFallbackIcon();                                                                </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4550                 info.customIcon = false;                                                                 </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4551                 info.usingFallbackIcon = true;                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4552             } else {                                                                                     </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4553                 info.customIcon = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4554             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4555             break;                                                                                       </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4556         default:                                                                                         </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4557             icon = getFallbackIcon();                                                                    </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4558             info.usingFallbackIcon = true;                                                               </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4559             info.customIcon = false;                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4560             break;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4561         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4562         info.setIcon(icon);                                                                              </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4563         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4564     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4565                                                                                                          </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4566     Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                 </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4567         @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                           </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4568         final boolean debug = false;                                                                     </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4569         if (debug) {                                                                                     </span>
<span class="-6059745727821652987" onmouseenter="enter('-6059745727821652987');" onmouseout="out('-6059745727821652987');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4570             Log.d(TAG, &quot;getIconFromCursor app=&quot;                                                          </span>
<span class="3938717124241653137" onmouseenter="enter('3938717124241653137');" onmouseout="out('3938717124241653137');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4571                     + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4572         }                                                                                                </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4573         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4574         try {                                                                                            </span>
<span class="-8927216840433750458" onmouseenter="enter('-8927216840433750458');" onmouseout="out('-8927216840433750458');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4575             return Utilities.createIconBitmap(                                                           </span>
<span class="5146235978369237158" onmouseenter="enter('5146235978369237158');" onmouseout="out('5146235978369237158');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4576                     BitmapFactory.decodeByteArray(data, 0, data.length), context);                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4577         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4578             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4579         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4580     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4581                                                                                                          </span>
<span class="-7359014031490826383" onmouseenter="enter('-7359014031490826383');" onmouseout="out('-7359014031490826383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4582     ShortcutInfo addShortcut(Context context, Intent data, long container, int screen,                   </span>
<span class="6268414987721391526" onmouseenter="enter('6268414987721391526');" onmouseout="out('6268414987721391526');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4583             int cellX, int cellY, boolean notify) {                                                      </span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4584         final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                           </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4585         if (info == null) {                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4586             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4587         }                                                                                                </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4588         addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4589                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4590         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4591     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4592                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4593     /**                                                                                                  </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4594      * Attempts to find an AppWidgetProviderInfo that matches the given component.                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4595      */                                                                                                  </span>
<span class="-5080859468016274115" onmouseenter="enter('-5080859468016274115');" onmouseout="out('-5080859468016274115');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4596     AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                        </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4597             ComponentName component) {                                                                   </span>
<span class="-6575430528437366773" onmouseenter="enter('-6575430528437366773');" onmouseout="out('-6575430528437366773');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4598         List&lt;AppWidgetProviderInfo&gt; widgets =                                                            </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4599             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4600         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4601             if (info.provider.equals(component)) {                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4602                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4603             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4604         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4605         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4606     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4607                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4608     /**                                                                                                  </span>
<span class="7439199513195640847" onmouseenter="enter('7439199513195640847');" onmouseout="out('7439199513195640847');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4609      * Returns a list of all the widgets that can handle configuration with a particular mimeType.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4610      */                                                                                                  </span>
<span class="6325854662222182070" onmouseenter="enter('6325854662222182070');" onmouseout="out('6325854662222182070');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4611     List&lt;WidgetMimeTypeHandlerData&gt; resolveWidgetsForMimeType(Context context, String mimeType) {        </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4612         final PackageManager packageManager = context.getPackageManager();                               </span>
<span class="3847705782231652914" onmouseenter="enter('3847705782231652914');" onmouseout="out('3847705782231652914');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4613         final List&lt;WidgetMimeTypeHandlerData&gt; supportedConfigurationActivities =                         </span>
<span class="-5417931937414580646" onmouseenter="enter('-5417931937414580646');" onmouseout="out('-5417931937414580646');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4614             new ArrayList&lt;WidgetMimeTypeHandlerData&gt;();                                                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4615                                                                                                          </span>
<span class="3700104316520923099" onmouseenter="enter('3700104316520923099');" onmouseout="out('3700104316520923099');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4616         final Intent supportsIntent =                                                                    </span>
<span class="-5996974504874484707" onmouseenter="enter('-5996974504874484707');" onmouseout="out('-5996974504874484707');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4617             new Intent(InstallWidgetReceiver.ACTION_SUPPORTS_CLIPDATA_MIMETYPE);                         </span>
<span class="6679063100467623292" onmouseenter="enter('6679063100467623292');" onmouseout="out('6679063100467623292');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4618         supportsIntent.setType(mimeType);                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4619                                                                                                          </span>
<span class="6275845746944894373" onmouseenter="enter('6275845746944894373');" onmouseout="out('6275845746944894373');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4620         // Create a set of widget configuration components that we can test against                      </span>
<span class="361965435897470734" onmouseenter="enter('361965435897470734');" onmouseout="out('361965435897470734');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4621         final List&lt;AppWidgetProviderInfo&gt; widgets =                                                      </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4622             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="9185108259439406491" onmouseenter="enter('9185108259439406491');" onmouseout="out('9185108259439406491');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4623         final HashMap&lt;ComponentName, AppWidgetProviderInfo&gt; configurationComponentToWidget =             </span>
<span class="-4320342521313681795" onmouseenter="enter('-4320342521313681795');" onmouseout="out('-4320342521313681795');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4624             new HashMap&lt;ComponentName, AppWidgetProviderInfo&gt;();                                         </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4625         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="-5537825176935075872" onmouseenter="enter('-5537825176935075872');" onmouseout="out('-5537825176935075872');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4626             configurationComponentToWidget.put(info.configure, info);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4627         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4628                                                                                                          </span>
<span class="7227984661430491714" onmouseenter="enter('7227984661430491714');" onmouseout="out('7227984661430491714');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4629         // Run through each of the intents that can handle this type of clip data, and cross             </span>
<span class="-5312515598910931459" onmouseenter="enter('-5312515598910931459');" onmouseout="out('-5312515598910931459');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4630         // reference them with the components that are actual configuration components                   </span>
<span class="96188399651153294" onmouseenter="enter('96188399651153294');" onmouseout="out('96188399651153294');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4631         final List&lt;ResolveInfo&gt; activities = packageManager.queryIntentActivities(supportsIntent,        </span>
<span class="2456166036476176214" onmouseenter="enter('2456166036476176214');" onmouseout="out('2456166036476176214');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4632                 PackageManager.MATCH_DEFAULT_ONLY);                                                      </span>
<span class="-6210771211908512935" onmouseenter="enter('-6210771211908512935');" onmouseout="out('-6210771211908512935');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4633         for (ResolveInfo info : activities) {                                                            </span>
<span class="4178492805266676194" onmouseenter="enter('4178492805266676194');" onmouseout="out('4178492805266676194');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4634             final ActivityInfo activityInfo = info.activityInfo;                                         </span>
<span class="5911001791562559694" onmouseenter="enter('5911001791562559694');" onmouseout="out('5911001791562559694');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4635             final ComponentName infoComponent = new ComponentName(activityInfo.packageName,              </span>
<span class="2224927995621460603" onmouseenter="enter('2224927995621460603');" onmouseout="out('2224927995621460603');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4636                     activityInfo.name);                                                                  </span>
<span class="5227428239073058925" onmouseenter="enter('5227428239073058925');" onmouseout="out('5227428239073058925');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4637             if (configurationComponentToWidget.containsKey(infoComponent)) {                             </span>
<span class="1978663855217064477" onmouseenter="enter('1978663855217064477');" onmouseout="out('1978663855217064477');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4638                 supportedConfigurationActivities.add(                                                    </span>
<span class="-7165755523548006690" onmouseenter="enter('-7165755523548006690');" onmouseout="out('-7165755523548006690');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4639                         new InstallWidgetReceiver.WidgetMimeTypeHandlerData(info,                        </span>
<span class="-7657609803705245302" onmouseenter="enter('-7657609803705245302');" onmouseout="out('-7657609803705245302');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4640                                 configurationComponentToWidget.get(infoComponent)));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4641             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4642         }                                                                                                </span>
<span class="8087136273107515292" onmouseenter="enter('8087136273107515292');" onmouseout="out('8087136273107515292');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4643         return supportedConfigurationActivities;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4644     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4645                                                                                                          </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4646     ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {             </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4647         Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                           </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4648         String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                   </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4649         Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                         </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4650                                                                                                          </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4651         if (intent == null) {                                                                            </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4652             // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null         </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4653             Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4654             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4655         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4656                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4657         Bitmap icon = null;                                                                              </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4658         boolean customIcon = false;                                                                      </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4659         ShortcutIconResource iconResource = null;                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4660                                                                                                          </span>
<span class="4708321654003878831" onmouseenter="enter('4708321654003878831');" onmouseout="out('4708321654003878831');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4661         if (bitmap != null &amp;&amp; bitmap instanceof Bitmap) {                                                </span>
<span class="-4792971395534249505" onmouseenter="enter('-4792971395534249505');" onmouseout="out('-4792971395534249505');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4662             icon = Utilities.createIconBitmap(new FastBitmapDrawable((Bitmap)bitmap), context);          </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4663             customIcon = true;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4664         } else {                                                                                         </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4665             Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);             </span>
<span class="1150112908884585569" onmouseenter="enter('1150112908884585569');" onmouseout="out('1150112908884585569');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4666             if (extra != null &amp;&amp; extra instanceof ShortcutIconResource) {                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4667                 try {                                                                                    </span>
<span class="7381422411731402038" onmouseenter="enter('7381422411731402038');" onmouseout="out('7381422411731402038');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4668                     iconResource = (ShortcutIconResource) extra;                                         </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4669                     final PackageManager packageManager = context.getPackageManager();                   </span>
<span class="8040670109966211806" onmouseenter="enter('8040670109966211806');" onmouseout="out('8040670109966211806');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4670                     Resources resources = packageManager.getResourcesForApplication(                     </span>
<span class="6486160691197808360" onmouseenter="enter('6486160691197808360');" onmouseout="out('6486160691197808360');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4671                             iconResource.packageName);                                                   </span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4672                     final int id = resources.getIdentifier(iconResource.resourceName, null, null);       </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4673                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4674                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4675                 } catch (Exception e) {                                                                  </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4676                     Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4677                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4678             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4679         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4680                                                                                                          </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4681         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4682                                                                                                          </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4683         if (icon == null) {                                                                              </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4684             if (fallbackIcon != null) {                                                                  </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4685                 icon = fallbackIcon;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4686             } else {                                                                                     </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4687                 icon = getFallbackIcon();                                                                </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4688                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4689             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4690         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4691         info.setIcon(icon);                                                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4692                                                                                                          </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4693         info.title = name;                                                                               </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4694         info.intent = intent;                                                                            </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4695         info.customIcon = customIcon;                                                                    </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4696         info.iconResource = iconResource;                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4697                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4698         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4699     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4700                                                                                                          </span>
<span class="869799550823252877" onmouseenter="enter('869799550823252877');" onmouseout="out('869799550823252877');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4701     boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c,             </span>
<span class="650460935465639981" onmouseenter="enter('650460935465639981');" onmouseout="out('650460935465639981');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4702             int iconIndex) {                                                                             </span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4703         // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                    </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4704         if (!mAppsCanBeOnRemoveableStorage) {                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4705             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4706         }                                                                                                </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4707         // If this icon doesn&#x27;t have a custom icon, check to see                                         </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4708         // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                         </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4709         // we&#x27;re going to show, store what we are going to show back                                     </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4710         // into the DB.  We do this so when we&#x27;re loading, if the                                        </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4711         // package manager can&#x27;t find an icon (for example because                                       </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4712         // the app is on SD) then we can use that instead.                                               </span>
<span class="6478679774718804760" onmouseenter="enter('6478679774718804760');" onmouseout="out('6478679774718804760');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4713         if (!info.customIcon &amp;&amp; !info.usingFallbackIcon) {                                               </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4714             cache.put(info, c.getBlob(iconIndex));                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4715             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4716         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">4717         return false;                                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">4718 =======                                                                                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">4719 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">4720         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="-3783926904025262102" onmouseenter="enter('-3783926904025262102');" onmouseout="out('-3783926904025262102');" style="">4721         info.promisedIntent = intent;                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">4722         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4723     }                                                                                                    </span>
<span  style="">4724                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">4725     /**                                                                                                  </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="">4726      * Make an Intent object for a restored application or shortcut item that points                     </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="">4727      * to the market page for the item.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">4728      */                                                                                                  </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="">4729     private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                     </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">4730         ComponentName componentName = intent.getComponent();                                             </span>
<span class="-3881801991978262069" onmouseenter="enter('-3881801991978262069');" onmouseout="out('-3881801991978262069');" style="">4731         return getMarketIntent(componentName.getPackageName());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4732     }                                                                                                    </span>
<span  style="">4733                                                                                                          </span>
<span class="-3260913833937220020" onmouseenter="enter('-3260913833937220020');" onmouseout="out('-3260913833937220020');" style="">4734     static Intent getMarketIntent(String packageName) {                                                  </span>
<span class="-9094317775268459694" onmouseenter="enter('-9094317775268459694');" onmouseout="out('-9094317775268459694');" style="">4735         return new Intent(Intent.ACTION_VIEW)                                                            </span>
<span class="273234347361851615" onmouseenter="enter('273234347361851615');" onmouseout="out('273234347361851615');" style="">4736             .setData(new Uri.Builder()                                                                   </span>
<span class="-9027153585574964790" onmouseenter="enter('-9027153585574964790');" onmouseout="out('-9027153585574964790');" style="">4737                 .scheme(&quot;market&quot;)                                                                        </span>
<span class="-1106866791415129127" onmouseenter="enter('-1106866791415129127');" onmouseout="out('-1106866791415129127');" style="">4738                 .authority(&quot;details&quot;)                                                                    </span>
<span class="6782694763028009203" onmouseenter="enter('6782694763028009203');" onmouseout="out('6782694763028009203');" style="">4739                 .appendQueryParameter(&quot;id&quot;, packageName)                                                 </span>
<span class="-5732724158529108102" onmouseenter="enter('-5732724158529108102');" onmouseout="out('-5732724158529108102');" style="">4740                 .build());                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4741     }                                                                                                    </span>
<span  style="">4742                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">4743     /**                                                                                                  </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="">4744      * This is called from the code that adds shortcuts from the intent receiver.  This                  </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="">4745      * doesn&#x27;t have a Cursor, but                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">4746      */                                                                                                  </span>
<span class="-2548217455776999178" onmouseenter="enter('-2548217455776999178');" onmouseout="out('-2548217455776999178');" style="">4747     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent,                           </span>
<span class="6504255554925479471" onmouseenter="enter('6504255554925479471');" onmouseout="out('6504255554925479471');" style="">4748             UserHandleCompat user, Context context) {                                                    </span>
<span class="-7378868523772977866" onmouseenter="enter('-7378868523772977866');" onmouseout="out('-7378868523772977866');" style="">4749         return getShortcutInfo(manager, intent, user, context, null, -1, -1, null, false);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4750     }                                                                                                    </span>
<span  style="">4751                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">4752     /**                                                                                                  </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="">4753      * Make an ShortcutInfo object for a shortcut that is an application.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">4754      *                                                                                                   </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="">4755      * If c is not null, then it will be used to fill in missing data like the title and icon.           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">4756      */                                                                                                  </span>
<span class="-2548217455776999178" onmouseenter="enter('-2548217455776999178');" onmouseout="out('-2548217455776999178');" style="">4757     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent,                           </span>
<span class="-8761535452245299531" onmouseenter="enter('-8761535452245299531');" onmouseout="out('-8761535452245299531');" style="">4758             UserHandleCompat user, Context context, Cursor c, int iconIndex, int titleIndex,             </span>
<span class="3517019325264382616" onmouseenter="enter('3517019325264382616');" onmouseout="out('3517019325264382616');" style="">4759             HashMap&lt;Object, CharSequence&gt; labelCache, boolean allowMissingTarget) {                      </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="">4760         if (user == null) {                                                                              </span>
<span class="6545168092911351889" onmouseenter="enter('6545168092911351889');" onmouseout="out('6545168092911351889');" style="">4761             Log.d(TAG, &quot;Null user found in getShortcutInfo&quot;);                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">4762             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4763         }                                                                                                </span>
<span  style="">4764                                                                                                          </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">4765         ComponentName componentName = intent.getComponent();                                             </span>
<span class="-5224470428335408787" onmouseenter="enter('-5224470428335408787');" onmouseout="out('-5224470428335408787');" style="">4766         if (componentName == null) {                                                                     </span>
<span class="4371782537001302642" onmouseenter="enter('4371782537001302642');" onmouseout="out('4371782537001302642');" style="">4767             Log.d(TAG, &quot;Missing component found in getShortcutInfo: &quot; + componentName);                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">4768             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4769         }                                                                                                </span>
<span  style="">4770                                                                                                          </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="">4771         Intent newIntent = new Intent(intent.getAction(), null);                                         </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="">4772         newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                 </span>
<span class="6894377559056826774" onmouseenter="enter('6894377559056826774');" onmouseout="out('6894377559056826774');" style="">4773         newIntent.setComponent(componentName);                                                           </span>
<span class="-966571371435372555" onmouseenter="enter('-966571371435372555');" onmouseout="out('-966571371435372555');" style="">4774         LauncherActivityInfoCompat lai = mLauncherApps.resolveActivity(newIntent, user);                 </span>
<span class="6800790308293325816" onmouseenter="enter('6800790308293325816');" onmouseout="out('6800790308293325816');" style="">4775         if ((lai == null) &amp;&amp; !allowMissingTarget) {                                                      </span>
<span class="-2395110402435537171" onmouseenter="enter('-2395110402435537171');" onmouseout="out('-2395110402435537171');" style="">4776             Log.d(TAG, &quot;Missing activity found in getShortcutInfo: &quot; + componentName);                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">4777             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4778         }                                                                                                </span>
<span  style="">4779                                                                                                          </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">4780         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span  style="">4781                                                                                                          </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="">4782         // the resource -- This may implicitly give us back the fallback icon,                           </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="">4783         // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                        </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="">4784         // to avoid saving lots of copies of that in the database, and most apps                         </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="">4785         // have icons anyway.                                                                            </span>
<span class="-6777959075043703494" onmouseenter="enter('-6777959075043703494');" onmouseout="out('-6777959075043703494');" style="">4786         Bitmap icon = mIconCache.getIcon(componentName, lai, labelCache);                                </span>
<span  style="">4787                                                                                                          </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">4788         // the db                                                                                        </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">4789         if (icon == null) {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">4790             if (c != null) {                                                                             </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">4791                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4792             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4793         }                                                                                                </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">4794         // the fallback icon                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">4795         if (icon == null) {                                                                              </span>
<span class="-1443979577510132687" onmouseenter="enter('-1443979577510132687');" onmouseout="out('-1443979577510132687');" style="">4796             icon = mIconCache.getDefaultIcon(user);                                                      </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">4797             info.usingFallbackIcon = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4798         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">4799         info.setIcon(icon);                                                                              </span>
<span  style="">4800                                                                                                          </span>
<span class="-7595242445841823644" onmouseenter="enter('-7595242445841823644');" onmouseout="out('-7595242445841823644');" style="">4801         // From the cache.                                                                               </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">4802         if (labelCache != null) {                                                                        </span>
<span class="3073733017601521903" onmouseenter="enter('3073733017601521903');" onmouseout="out('3073733017601521903');" style="">4803             info.title = labelCache.get(componentName);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4804         }                                                                                                </span>
<span  style="">4805                                                                                                          </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="">4806         // from the resource                                                                             </span>
<span class="6778614741206473497" onmouseenter="enter('6778614741206473497');" onmouseout="out('6778614741206473497');" style="">4807         if (info.title == null &amp;&amp; lai != null) {                                                         </span>
<span class="-4488945615052684527" onmouseenter="enter('-4488945615052684527');" onmouseout="out('-4488945615052684527');" style="">4808             info.title = lai.getLabel();                                                                 </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">4809             if (labelCache != null) {                                                                    </span>
<span class="-3170508962365680295" onmouseenter="enter('-3170508962365680295');" onmouseout="out('-3170508962365680295');" style="">4810                 labelCache.put(componentName, info.title);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4811             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4812         }                                                                                                </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="">4813         // from the db                                                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">4814         if (info.title == null) {                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">4815             if (c != null) {                                                                             </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="">4816                 info.title =  c.getString(titleIndex);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4817             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4818         }                                                                                                </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="">4819         // fall back to the class name of the activity                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">4820         if (info.title == null) {                                                                        </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="">4821             info.title = componentName.getClassName();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4822         }                                                                                                </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="">4823         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                </span>
<span class="-7567614667172676383" onmouseenter="enter('-7567614667172676383');" onmouseout="out('-7567614667172676383');" style="">4824         info.user = user;                                                                                </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="">4825         info.contentDescription = mUserManager.getBadgedLabelForUser(                                    </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="">4826                 info.title.toString(), info.user);                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">4827         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4828     }                                                                                                    </span>
<span  style="">4829                                                                                                          </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="">4830     static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                               </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="">4831             ItemInfoFilter f) {                                                                          </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="">4832         HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                            </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">4833         for (ItemInfo i : infos) {                                                                       </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">4834             if (i instanceof ShortcutInfo) {                                                             </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">4835                 ShortcutInfo info = (ShortcutInfo) i;                                                    </span>
<span class="-8411217647144645125" onmouseenter="enter('-8411217647144645125');" onmouseout="out('-8411217647144645125');" style="">4836                 ComponentName cn = info.getTargetComponent();                                            </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">4837                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">4838                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4839                 }                                                                                        </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="">4840             } else if (i instanceof FolderInfo) {                                                        </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="">4841                 FolderInfo info = (FolderInfo) i;                                                        </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="">4842                 for (ShortcutInfo s : info.contents) {                                                   </span>
<span class="-5499244430299718871" onmouseenter="enter('-5499244430299718871');" onmouseout="out('-5499244430299718871');" style="">4843                     ComponentName cn = s.getTargetComponent();                                           </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="">4844                     if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                       </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="">4845                         filtered.add(s);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4846                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4847                 }                                                                                        </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="">4848             } else if (i instanceof LauncherAppWidgetInfo) {                                             </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="">4849                 LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                  </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="">4850                 ComponentName cn = info.providerName;                                                    </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">4851                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">4852                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4853                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4854             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4855         }                                                                                                </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="">4856         return new ArrayList&lt;ItemInfo&gt;(filtered);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4857     }                                                                                                    </span>
<span  style="">4858                                                                                                          </span>
<span class="-6017059906416334391" onmouseenter="enter('-6017059906416334391');" onmouseout="out('-6017059906416334391');" style="">4859     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname,                   </span>
<span class="-8990624712004338264" onmouseenter="enter('-8990624712004338264');" onmouseout="out('-8990624712004338264');" style="">4860             final UserHandleCompat user) {                                                               </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">4861         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">4862             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">4863             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="5970365724964589884" onmouseenter="enter('5970365724964589884');" onmouseout="out('5970365724964589884');" style="">4864                 if (info.user == null) {                                                                 </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="">4865                     return cn.equals(cname);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4866                 } else {                                                                                 </span>
<span class="9080235702604787251" onmouseenter="enter('9080235702604787251');" onmouseout="out('9080235702604787251');" style="">4867                     return cn.equals(cname) &amp;&amp; info.user.equals(user);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4868                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4869             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">4870         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">4871         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4872     }                                                                                                    </span>
<span  style="">4873                                                                                                          </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="">4874     public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                         </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">4875         if (i instanceof ShortcutInfo) {                                                                 </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">4876             ShortcutInfo info = (ShortcutInfo) i;                                                        </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="">4877             // We need to check for ACTION_MAIN otherwise getComponent() might                           </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="">4878             // return null for some shortcuts (for instance, for shortcuts to                            </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="">4879             // web pages.)                                                                               </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="">4880             Intent intent = info.intent;                                                                 </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="">4881             ComponentName name = intent.getComponent();                                                  </span>
<span class="-7226540389871247766" onmouseenter="enter('-7226540389871247766');" onmouseout="out('-7226540389871247766');" style="">4882             if (info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION &amp;&amp;                     </span>
<span class="-3498713534944595637" onmouseenter="enter('-3498713534944595637');" onmouseout="out('-3498713534944595637');" style="">4883                     Intent.ACTION_MAIN.equals(intent.getAction()) &amp;&amp; name != null) {                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">4884                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4885             }                                                                                            </span>
<span class="-5396282347241069474" onmouseenter="enter('-5396282347241069474');" onmouseout="out('-5396282347241069474');" style="">4886             // placeholder shortcuts get special treatment, let them through too.                        </span>
<span class="-8737155453802783041" onmouseenter="enter('-8737155453802783041');" onmouseout="out('-8737155453802783041');" style="">4887             if (info.isPromise()) {                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">4888                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4889             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4890         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">4891         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4892     }                                                                                                    </span>
<span  style="">4893                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">4894     /**                                                                                                  </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="">4895      * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">4896      */                                                                                                  </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="">4897     private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                      </span>
<span class="4905943326370352288" onmouseenter="enter('4905943326370352288');" onmouseout="out('4905943326370352288');" style="">4898             int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex,               </span>
<span class="483103881605747557" onmouseenter="enter('483103881605747557');" onmouseout="out('483103881605747557');" style="">4899             int titleIndex) {                                                                            </span>
<span  style="">4900                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">4901         Bitmap icon = null;                                                                              </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">4902         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="5882358276056228538" onmouseenter="enter('5882358276056228538');" onmouseout="out('5882358276056228538');" style="">4903         // Non-app shortcuts are only supported for current user.                                        </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">4904         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">4905         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span  style="">4906                                                                                                          </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="">4907         // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                  </span>
<span  style="">4908                                                                                                          </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">4909         info.title = c.getString(titleIndex);                                                            </span>
<span  style="">4910                                                                                                          </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="">4911         int iconType = c.getInt(iconTypeIndex);                                                          </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="">4912         switch (iconType) {                                                                              </span>
<span class="-349524516714147238" onmouseenter="enter('-349524516714147238');" onmouseout="out('-349524516714147238');" style="">4913         case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:                                              </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="">4914             String packageName = c.getString(iconPackageIndex);                                          </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="">4915             String resourceName = c.getString(iconResourceIndex);                                        </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">4916             PackageManager packageManager = context.getPackageManager();                                 </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">4917             info.customIcon = false;                                                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="">4918             // the resource                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">4919             try {                                                                                        </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="">4920                 Resources resources = packageManager.getResourcesForApplication(packageName);            </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="">4921                 if (resources != null) {                                                                 </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="">4922                     final int id = resources.getIdentifier(resourceName, null, null);                    </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">4923                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">4924                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4925                 }                                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">4926             } catch (Exception e) {                                                                      </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="">4927                 // drop this.  we have other places to look for icons                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4928             }                                                                                            </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">4929             // the db                                                                                    </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">4930             if (icon == null) {                                                                          </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">4931                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4932             }                                                                                            </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">4933             // the fallback icon                                                                         </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">4934             if (icon == null) {                                                                          </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">4935                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">4936                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4937             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">4938             break;                                                                                       </span>
<span class="8287056964614325383" onmouseenter="enter('8287056964614325383');" onmouseout="out('8287056964614325383');" style="">4939         case LauncherSettings.Favorites.ICON_TYPE_BITMAP:                                                </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">4940             icon = getIconFromCursor(c, iconIndex, context);                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">4941             if (icon == null) {                                                                          </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">4942                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">4943                 info.customIcon = false;                                                                 </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">4944                 info.usingFallbackIcon = true;                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4945             } else {                                                                                     </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="">4946                 info.customIcon = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4947             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">4948             break;                                                                                       </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">4949         default:                                                                                         </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">4950             icon = mIconCache.getDefaultIcon(info.user);                                                 </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">4951             info.usingFallbackIcon = true;                                                               </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">4952             info.customIcon = false;                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">4953             break;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4954         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">4955         info.setIcon(icon);                                                                              </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">4956         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4957     }                                                                                                    </span>
<span  style="">4958                                                                                                          </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="">4959     Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                 </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style="">4960         @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                           </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">4961         final boolean debug = false;                                                                     </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="">4962         if (debug) {                                                                                     </span>
<span class="-6059745727821652987" onmouseenter="enter('-6059745727821652987');" onmouseout="out('-6059745727821652987');" style="">4963             Log.d(TAG, &quot;getIconFromCursor app=&quot;                                                          </span>
<span class="3938717124241653137" onmouseenter="enter('3938717124241653137');" onmouseout="out('3938717124241653137');" style="">4964                     + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4965         }                                                                                                </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">4966         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">4967         try {                                                                                            </span>
<span class="-8927216840433750458" onmouseenter="enter('-8927216840433750458');" onmouseout="out('-8927216840433750458');" style="">4968             return Utilities.createIconBitmap(                                                           </span>
<span class="5146235978369237158" onmouseenter="enter('5146235978369237158');" onmouseout="out('5146235978369237158');" style="">4969                     BitmapFactory.decodeByteArray(data, 0, data.length), context);                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">4970         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">4971             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4972         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4973     }                                                                                                    </span>
<span  style="">4974                                                                                                          </span>
<span class="-7359014031490826383" onmouseenter="enter('-7359014031490826383');" onmouseout="out('-7359014031490826383');" style="">4975     ShortcutInfo addShortcut(Context context, Intent data, long container, int screen,                   </span>
<span class="6268414987721391526" onmouseenter="enter('6268414987721391526');" onmouseout="out('6268414987721391526');" style="">4976             int cellX, int cellY, boolean notify) {                                                      </span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="">4977         final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                           </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="">4978         if (info == null) {                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">4979             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4980         }                                                                                                </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="">4981         addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                       </span>
<span  style="">4982                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">4983         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4984     }                                                                                                    </span>
<span  style="">4985                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">4986     /**                                                                                                  </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="">4987      * Attempts to find an AppWidgetProviderInfo that matches the given component.                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">4988      */                                                                                                  </span>
<span class="-8933877649522571458" onmouseenter="enter('-8933877649522571458');" onmouseout="out('-8933877649522571458');" style="">4989     static AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                 </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="">4990             ComponentName component) {                                                                   </span>
<span class="-6575430528437366773" onmouseenter="enter('-6575430528437366773');" onmouseout="out('-6575430528437366773');" style="">4991         List&lt;AppWidgetProviderInfo&gt; widgets =                                                            </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">4992             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">4993         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="">4994             if (info.provider.equals(component)) {                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">4995                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4996             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4997         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">4998         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4999     }                                                                                                    </span>
<span  style="">5000                                                                                                          </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="">5001     ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {             </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="">5002         Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                           </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="">5003         String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                   </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="">5004         Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                         </span>
<span  style="">5005                                                                                                          </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">5006         if (intent == null) {                                                                            </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="">5007             // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null         </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="">5008             Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">5009             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5010         }                                                                                                </span>
<span  style="">5011                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">5012         Bitmap icon = null;                                                                              </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="">5013         boolean customIcon = false;                                                                      </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="">5014         ShortcutIconResource iconResource = null;                                                        </span>
<span  style="">5015                                                                                                          </span>
<span class="4708321654003878831" onmouseenter="enter('4708321654003878831');" onmouseout="out('4708321654003878831');" style="">5016         if (bitmap != null &amp;&amp; bitmap instanceof Bitmap) {                                                </span>
<span class="-4792971395534249505" onmouseenter="enter('-4792971395534249505');" onmouseout="out('-4792971395534249505');" style="">5017             icon = Utilities.createIconBitmap(new FastBitmapDrawable((Bitmap)bitmap), context);          </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="">5018             customIcon = true;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">5019         } else {                                                                                         </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="">5020             Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);             </span>
<span class="1150112908884585569" onmouseenter="enter('1150112908884585569');" onmouseout="out('1150112908884585569');" style="">5021             if (extra != null &amp;&amp; extra instanceof ShortcutIconResource) {                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">5022                 try {                                                                                    </span>
<span class="7381422411731402038" onmouseenter="enter('7381422411731402038');" onmouseout="out('7381422411731402038');" style="">5023                     iconResource = (ShortcutIconResource) extra;                                         </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">5024                     final PackageManager packageManager = context.getPackageManager();                   </span>
<span class="8040670109966211806" onmouseenter="enter('8040670109966211806');" onmouseout="out('8040670109966211806');" style="">5025                     Resources resources = packageManager.getResourcesForApplication(                     </span>
<span class="6486160691197808360" onmouseenter="enter('6486160691197808360');" onmouseout="out('6486160691197808360');" style="">5026                             iconResource.packageName);                                                   </span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="">5027                     final int id = resources.getIdentifier(iconResource.resourceName, null, null);       </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">5028                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="2974405441716858047" onmouseenter="enter('2974405441716858047');" onmouseout="out('2974405441716858047');" style="">5029                             mIconCache.getFullResIcon(resources, id),                                    </span>
<span class="-7033093369240644837" onmouseenter="enter('-7033093369240644837');" onmouseout="out('-7033093369240644837');" style="">5030                             context);                                                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">5031                 } catch (Exception e) {                                                                  </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="">5032                     Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5033                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5034             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5035         }                                                                                                </span>
<span  style="">5036                                                                                                          </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">5037         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span  style="">5038                                                                                                          </span>
<span class="2102380556199177801" onmouseenter="enter('2102380556199177801');" onmouseout="out('2102380556199177801');" style="">5039         // Only support intents for current user for now. Intents sent from other                        </span>
<span class="2194655253408912185" onmouseenter="enter('2194655253408912185');" onmouseout="out('2194655253408912185');" style="">5040         // users wouldn&#x27;t get here without intent forwarding anyway.                                     </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">5041         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">5042         if (icon == null) {                                                                              </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="">5043             if (fallbackIcon != null) {                                                                  </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="">5044                 icon = fallbackIcon;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">5045             } else {                                                                                     </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">5046                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">5047                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5048             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5049         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">5050         info.setIcon(icon);                                                                              </span>
<span  style="">5051                                                                                                          </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="">5052         info.title = name;                                                                               </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="">5053         info.contentDescription = mUserManager.getBadgedLabelForUser(                                    </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="">5054                 info.title.toString(), info.user);                                                       </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">5055         info.intent = intent;                                                                            </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="">5056         info.customIcon = customIcon;                                                                    </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="">5057         info.iconResource = iconResource;                                                                </span>
<span  style="">5058                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">5059         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5060     }                                                                                                    </span>
<span  style="">5061                                                                                                          </span>
<span class="869799550823252877" onmouseenter="enter('869799550823252877');" onmouseout="out('869799550823252877');" style="">5062     boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c,             </span>
<span class="650460935465639981" onmouseenter="enter('650460935465639981');" onmouseout="out('650460935465639981');" style="">5063             int iconIndex) {                                                                             </span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="">5064         // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                    </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">5065         if (!mAppsCanBeOnRemoveableStorage) {                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">5066             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5067         }                                                                                                </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="">5068         // If this icon doesn&#x27;t have a custom icon, check to see                                         </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="">5069         // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                         </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="">5070         // we&#x27;re going to show, store what we are going to show back                                     </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="">5071         // into the DB.  We do this so when we&#x27;re loading, if the                                        </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="">5072         // package manager can&#x27;t find an icon (for example because                                       </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="">5073         // the app is on SD) then we can use that instead.                                               </span>
<span class="6478679774718804760" onmouseenter="enter('6478679774718804760');" onmouseout="out('6478679774718804760');" style="">5074         if (!info.customIcon &amp;&amp; !info.usingFallbackIcon) {                                               </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="">5075             cache.put(info, c.getBlob(iconIndex));                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">5076             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5077         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">5078         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5079     }                                                                                                    </span>
<span class="1654527872685192879" onmouseenter="enter('1654527872685192879');" onmouseout="out('1654527872685192879');" style="">5080     void updateSavedIcon(Context context, ShortcutInfo info, byte[] data) {                              </span>
<span class="2739424845963553299" onmouseenter="enter('2739424845963553299');" onmouseout="out('2739424845963553299');" style="">5081         boolean needSave = false;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">5082         try {                                                                                            </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">5083             if (data != null) {                                                                          </span>
<span class="-7759318311620721467" onmouseenter="enter('-7759318311620721467');" onmouseout="out('-7759318311620721467');" style="">5084                 Bitmap saved = BitmapFactory.decodeByteArray(data, 0, data.length);                      </span>
<span class="5601916118931842920" onmouseenter="enter('5601916118931842920');" onmouseout="out('5601916118931842920');" style="">5085                 Bitmap loaded = info.getIcon(mIconCache);                                                </span>
<span class="3622333829210083937" onmouseenter="enter('3622333829210083937');" onmouseout="out('3622333829210083937');" style="">5086                 needSave = !saved.sameAs(loaded);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">5087             } else {                                                                                     </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">5088                 needSave = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5089             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">5090         } catch (Exception e) {                                                                          </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">5091             needSave = true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5092         }                                                                                                </span>
<span class="-1391846982631217245" onmouseenter="enter('-1391846982631217245');" onmouseout="out('-1391846982631217245');" style="">5093         if (needSave) {                                                                                  </span>
<span class="3557323548661765982" onmouseenter="enter('3557323548661765982');" onmouseout="out('3557323548661765982');" style="">5094             Log.d(TAG, &quot;going to save icon bitmap for info=&quot; + info);                                    </span>
<span class="2982884345620001266" onmouseenter="enter('2982884345620001266');" onmouseout="out('2982884345620001266');" style="">5095             // This is slower than is ideal, but this only happens once                                  </span>
<span class="6026812495787058898" onmouseenter="enter('6026812495787058898');" onmouseout="out('6026812495787058898');" style="">5096             // or when the app is updated with a new icon.                                               </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">5097             updateItemInDatabase(context, info);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5098         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5099     }                                                                                                    </span>
<span  style="">5100                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">5101     /**                                                                                                  </span>
<span class="4855649975001229153" onmouseenter="enter('4855649975001229153');" onmouseout="out('4855649975001229153');" style="">5102      * Return an existing FolderInfo object if we have encountered this ID previously,                   </span>
<span class="1965046356881977619" onmouseenter="enter('1965046356881977619');" onmouseout="out('1965046356881977619');" style="">5103      * or make a new one.                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">5104      */                                                                                                  </span>
<span class="-2475696420152943641" onmouseenter="enter('-2475696420152943641');" onmouseout="out('-2475696420152943641');" style="">5105     private static FolderInfo findOrMakeFolder(HashMap&lt;Long, FolderInfo&gt; folders, long id) {             </span>
<span class="4702055422209629108" onmouseenter="enter('4702055422209629108');" onmouseout="out('4702055422209629108');" style="">5106         // See if a placeholder was created for us already                                               </span>
<span class="5369947662598537472" onmouseenter="enter('5369947662598537472');" onmouseout="out('5369947662598537472');" style="">5107         FolderInfo folderInfo = folders.get(id);                                                         </span>
<span class="-1935655509058582330" onmouseenter="enter('-1935655509058582330');" onmouseout="out('-1935655509058582330');" style="">5108         if (folderInfo == null) {                                                                        </span>
<span class="-2837885610668527269" onmouseenter="enter('-2837885610668527269');" onmouseout="out('-2837885610668527269');" style="">5109             // No placeholder -- create a new instance                                                   </span>
<span class="-1173144769562528834" onmouseenter="enter('-1173144769562528834');" onmouseout="out('-1173144769562528834');" style="">5110             folderInfo = new FolderInfo();                                                               </span>
<span class="-6364759527041918506" onmouseenter="enter('-6364759527041918506');" onmouseout="out('-6364759527041918506');" style="">5111             folders.put(id, folderInfo);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5112         }                                                                                                </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">5113         return folderInfo;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5114     }                                                                                                    </span>
<span  style="">5115                                                                                                          </span>
<span class="-958488581416967596" onmouseenter="enter('-958488581416967596');" onmouseout="out('-958488581416967596');" style="">5116     public static final Comparator&lt;AppInfo&gt; getAppNameComparator() {                                     </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">5117         final Collator collator = Collator.getInstance();                                                </span>
<span class="-5613048777706091935" onmouseenter="enter('-5613048777706091935');" onmouseout="out('-5613048777706091935');" style="">5118         return new Comparator&lt;AppInfo&gt;() {                                                               </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">5119             public final int compare(AppInfo a, AppInfo b) {                                             </span>
<span class="3541515045662468306" onmouseenter="enter('3541515045662468306');" onmouseout="out('3541515045662468306');" style="">5120                 if (a.user.equals(b.user)) {                                                             </span>
<span class="-7549376093488495011" onmouseenter="enter('-7549376093488495011');" onmouseout="out('-7549376093488495011');" style="">5121                     int result = collator.compare(a.title.toString().trim(),                             </span>
<span class="1811873973139560730" onmouseenter="enter('1811873973139560730');" onmouseout="out('1811873973139560730');" style="">5122                             b.title.toString().trim());                                                  </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="">5123                     if (result == 0) {                                                                   </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="">5124                         result = a.componentName.compareTo(b.componentName);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5125                     }                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">5126                     return result;                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">5127                 } else {                                                                                 </span>
<span class="-4940624116090922199" onmouseenter="enter('-4940624116090922199');" onmouseout="out('-4940624116090922199');" style="">5128                     // TODO Need to figure out rules for sorting                                         </span>
<span class="-7580798058375972430" onmouseenter="enter('-7580798058375972430');" onmouseout="out('-7580798058375972430');" style="">5129                     // profiles, this puts work second.                                                  </span>
<span class="-437659129845370257" onmouseenter="enter('-437659129845370257');" onmouseout="out('-437659129845370257');" style="">5130                     return a.user.toString().compareTo(b.user.toString());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5131                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5132             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">5133         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5134     }                                                                                                    </span>
<span class="394292360646743486" onmouseenter="enter('394292360646743486');" onmouseout="out('394292360646743486');" style="">5135     public static final Comparator&lt;AppInfo&gt; APP_INSTALL_TIME_COMPARATOR                                  </span>
<span class="-2973469265380285464" onmouseenter="enter('-2973469265380285464');" onmouseout="out('-2973469265380285464');" style="">5136             = new Comparator&lt;AppInfo&gt;() {                                                                </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">5137         public final int compare(AppInfo a, AppInfo b) {                                                 </span>
<span class="4743139001154708795" onmouseenter="enter('4743139001154708795');" onmouseout="out('4743139001154708795');" style="">5138             if (a.firstInstallTime &lt; b.firstInstallTime) return 1;                                       </span>
<span class="2246013200960361834" onmouseenter="enter('2246013200960361834');" onmouseout="out('2246013200960361834');" style="">5139             if (a.firstInstallTime &gt; b.firstInstallTime) return -1;                                      </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style="">5140             return 0;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5141         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">5142     };                                                                                                   </span>
<span class="-2741084556110057526" onmouseenter="enter('-2741084556110057526');" onmouseout="out('-2741084556110057526');" style="">5143     static ComponentName getComponentNameFromResolveInfo(ResolveInfo info) {                             </span>
<span class="5044967282776033452" onmouseenter="enter('5044967282776033452');" onmouseout="out('5044967282776033452');" style="">5144         if (info.activityInfo != null) {                                                                 </span>
<span class="4524084479320544608" onmouseenter="enter('4524084479320544608');" onmouseout="out('4524084479320544608');" style="">5145             return new ComponentName(info.activityInfo.packageName, info.activityInfo.name);             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">5146         } else {                                                                                         </span>
<span class="-6175863207819175779" onmouseenter="enter('-6175863207819175779');" onmouseout="out('-6175863207819175779');" style="">5147             return new ComponentName(info.serviceInfo.packageName, info.serviceInfo.name);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5148         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5149     }                                                                                                    </span>
<span class="-5604165961236567660" onmouseenter="enter('-5604165961236567660');" onmouseout="out('-5604165961236567660');" style="">5150     public static class ShortcutNameComparator implements Comparator&lt;LauncherActivityInfoCompat&gt; {       </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">5151         private Collator mCollator;                                                                      </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">5152         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span class="-5960404209194449161" onmouseenter="enter('-5960404209194449161');" onmouseout="out('-5960404209194449161');" style="">5153         ShortcutNameComparator(PackageManager pm) {                                                      </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">5154             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">5155             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5156         }                                                                                                </span>
<span class="3595266679393364065" onmouseenter="enter('3595266679393364065');" onmouseout="out('3595266679393364065');" style="">5157         ShortcutNameComparator(HashMap&lt;Object, CharSequence&gt; labelCache) {                               </span>
<span class="-1230739904022851098" onmouseenter="enter('-1230739904022851098');" onmouseout="out('-1230739904022851098');" style="">5158             mLabelCache = labelCache;                                                                    </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">5159             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5160         }                                                                                                </span>
<span class="5300656659592950018" onmouseenter="enter('5300656659592950018');" onmouseout="out('5300656659592950018');" style="">5161         public final int compare(LauncherActivityInfoCompat a, LauncherActivityInfoCompat b) {           </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">5162             String labelA, labelB;                                                                       </span>
<span class="3539590309650150575" onmouseenter="enter('3539590309650150575');" onmouseout="out('3539590309650150575');" style="">5163             ComponentName keyA = a.getComponentName();                                                   </span>
<span class="-674250356247748253" onmouseenter="enter('-674250356247748253');" onmouseout="out('-674250356247748253');" style="">5164             ComponentName keyB = b.getComponentName();                                                   </span>
<span class="6987605502838603761" onmouseenter="enter('6987605502838603761');" onmouseout="out('6987605502838603761');" style="">5165             if (mLabelCache.containsKey(keyA)) {                                                         </span>
<span class="-1058154863590772027" onmouseenter="enter('-1058154863590772027');" onmouseout="out('-1058154863590772027');" style="">5166                 labelA = mLabelCache.get(keyA).toString();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">5167             } else {                                                                                     </span>
<span class="8953753374571564594" onmouseenter="enter('8953753374571564594');" onmouseout="out('8953753374571564594');" style="">5168                 labelA = a.getLabel().toString().trim();                                                 </span>
<span  style="">5169                                                                                                          </span>
<span class="-8431652685509449538" onmouseenter="enter('-8431652685509449538');" onmouseout="out('-8431652685509449538');" style="">5170                 mLabelCache.put(keyA, labelA);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5171             }                                                                                            </span>
<span class="-6450873724396873776" onmouseenter="enter('-6450873724396873776');" onmouseout="out('-6450873724396873776');" style="">5172             if (mLabelCache.containsKey(keyB)) {                                                         </span>
<span class="267036364262288198" onmouseenter="enter('267036364262288198');" onmouseout="out('267036364262288198');" style="">5173                 labelB = mLabelCache.get(keyB).toString();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">5174             } else {                                                                                     </span>
<span class="-6332222509536632454" onmouseenter="enter('-6332222509536632454');" onmouseout="out('-6332222509536632454');" style="">5175                 labelB = b.getLabel().toString().trim();                                                 </span>
<span  style="">5176                                                                                                          </span>
<span class="6304111994442836155" onmouseenter="enter('6304111994442836155');" onmouseout="out('6304111994442836155');" style="">5177                 mLabelCache.put(keyB, labelB);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5178             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">5179             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5180         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">5181     };                                                                                                   </span>
<span class="-9068712813001281029" onmouseenter="enter('-9068712813001281029');" onmouseout="out('-9068712813001281029');" style="">5182     public static class WidgetAndShortcutNameComparator implements Comparator&lt;Object&gt; {                  </span>
<span class="9150498506085829362" onmouseenter="enter('9150498506085829362');" onmouseout="out('9150498506085829362');" style="">5183         private final AppWidgetManagerCompat mManager;                                                   </span>
<span class="916814758228251192" onmouseenter="enter('916814758228251192');" onmouseout="out('916814758228251192');" style="">5184         private final PackageManager mPackageManager;                                                    </span>
<span class="3147273048289991484" onmouseenter="enter('3147273048289991484');" onmouseout="out('3147273048289991484');" style="">5185         private final HashMap&lt;Object, String&gt; mLabelCache;                                               </span>
<span class="7734513056437222570" onmouseenter="enter('7734513056437222570');" onmouseout="out('7734513056437222570');" style="">5186         private final Collator mCollator;                                                                </span>
<span  style="">5187                                                                                                          </span>
<span class="-4227954493245511846" onmouseenter="enter('-4227954493245511846');" onmouseout="out('-4227954493245511846');" style="">5188         WidgetAndShortcutNameComparator(Context context) {                                               </span>
<span class="3481132346717467494" onmouseenter="enter('3481132346717467494');" onmouseout="out('3481132346717467494');" style="">5189             mManager = AppWidgetManagerCompat.getInstance(context);                                      </span>
<span class="8554599676865199182" onmouseenter="enter('8554599676865199182');" onmouseout="out('8554599676865199182');" style="">5190             mPackageManager = context.getPackageManager();                                               </span>
<span class="240497455152177218" onmouseenter="enter('240497455152177218');" onmouseout="out('240497455152177218');" style="">5191             mLabelCache = new HashMap&lt;Object, String&gt;();                                                 </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">5192             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5193         }                                                                                                </span>
<span class="6735042653098150116" onmouseenter="enter('6735042653098150116');" onmouseout="out('6735042653098150116');" style="">5194         public final int compare(Object a, Object b) {                                                   </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">5195             String labelA, labelB;                                                                       </span>
<span class="-5754282386436968390" onmouseenter="enter('-5754282386436968390');" onmouseout="out('-5754282386436968390');" style="">5196             if (mLabelCache.containsKey(a)) {                                                            </span>
<span class="9174303291338212675" onmouseenter="enter('9174303291338212675');" onmouseout="out('9174303291338212675');" style="">5197                 labelA = mLabelCache.get(a);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">5198             } else {                                                                                     </span>
<span class="-9066745869396444524" onmouseenter="enter('-9066745869396444524');" onmouseout="out('-9066745869396444524');" style="">5199                 labelA = (a instanceof AppWidgetProviderInfo)                                            </span>
<span class="6558251807363396504" onmouseenter="enter('6558251807363396504');" onmouseout="out('6558251807363396504');" style="">5200                         ? mManager.loadLabel((AppWidgetProviderInfo) a)                                  </span>
<span class="-3214224842100508644" onmouseenter="enter('-3214224842100508644');" onmouseout="out('-3214224842100508644');" style="">5201                         : ((ResolveInfo) a).loadLabel(mPackageManager).toString().trim();                </span>
<span class="-6757493580793216382" onmouseenter="enter('-6757493580793216382');" onmouseout="out('-6757493580793216382');" style="">5202                 mLabelCache.put(a, labelA);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5203             }                                                                                            </span>
<span class="2173723640298609502" onmouseenter="enter('2173723640298609502');" onmouseout="out('2173723640298609502');" style="">5204             if (mLabelCache.containsKey(b)) {                                                            </span>
<span class="-253401768434607465" onmouseenter="enter('-253401768434607465');" onmouseout="out('-253401768434607465');" style="">5205                 labelB = mLabelCache.get(b);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">5206             } else {                                                                                     </span>
<span class="-1855040857913004459" onmouseenter="enter('-1855040857913004459');" onmouseout="out('-1855040857913004459');" style="">5207                 labelB = (b instanceof AppWidgetProviderInfo)                                            </span>
<span class="-6152525661787763086" onmouseenter="enter('-6152525661787763086');" onmouseout="out('-6152525661787763086');" style="">5208                         ? mManager.loadLabel((AppWidgetProviderInfo) b)                                  </span>
<span class="-7836999270960417422" onmouseenter="enter('-7836999270960417422');" onmouseout="out('-7836999270960417422');" style="">5209                         : ((ResolveInfo) b).loadLabel(mPackageManager).toString().trim();                </span>
<span class="1041849722861633477" onmouseenter="enter('1041849722861633477');" onmouseout="out('1041849722861633477');" style="">5210                 mLabelCache.put(b, labelB);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5211             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">5212             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5213         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">5214     };                                                                                                   </span>
<span  style="">5215                                                                                                          </span>
<span class="9138636756014527253" onmouseenter="enter('9138636756014527253');" onmouseout="out('9138636756014527253');" style="">5216     static boolean isValidProvider(AppWidgetProviderInfo provider) {                                     </span>
<span class="2022925387876031232" onmouseenter="enter('2022925387876031232');" onmouseout="out('2022925387876031232');" style="">5217         return (provider != null) &amp;&amp; (provider.provider != null)                                         </span>
<span class="-279029610180406352" onmouseenter="enter('-279029610180406352');" onmouseout="out('-279029610180406352');" style="">5218                 &amp;&amp; (provider.provider.getPackageName() != null);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5219     }                                                                                                    </span>
<span  style="">5220                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">5221     public void dumpState() {                                                                            </span>
<span class="-8509686920730582178" onmouseenter="enter('-8509686920730582178');" onmouseout="out('-8509686920730582178');" style="">5222         Log.d(TAG, &quot;mCallbacks=&quot; + mCallbacks);                                                          </span>
<span class="-6032216957883964740" onmouseenter="enter('-6032216957883964740');" onmouseout="out('-6032216957883964740');" style="">5223         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.data&quot;, mBgAllAppsList.data);                  </span>
<span class="8779182816240818818" onmouseenter="enter('8779182816240818818');" onmouseout="out('8779182816240818818');" style="">5224         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.added&quot;, mBgAllAppsList.added);                </span>
<span class="5513048904999210121" onmouseenter="enter('5513048904999210121');" onmouseout="out('5513048904999210121');" style="">5225         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.removed&quot;, mBgAllAppsList.removed);            </span>
<span class="-6417320778911436113" onmouseenter="enter('-6417320778911436113');" onmouseout="out('-6417320778911436113');" style="">5226         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.modified&quot;, mBgAllAppsList.modified);          </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">5227         if (mLoaderTask != null) {                                                                       </span>
<span class="-1961259503181318170" onmouseenter="enter('-1961259503181318170');" onmouseout="out('-1961259503181318170');" style="">5228             mLoaderTask.dumpState();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">5229         } else {                                                                                         </span>
<span class="-4934836822377624371" onmouseenter="enter('-4934836822377624371');" onmouseout="out('-4934836822377624371');" style="">5230             Log.d(TAG, &quot;mLoaderTask=null&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5231         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5232     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">5233 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  19 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  20 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-489389385851058391" onmouseenter="enter('-489389385851058391');" onmouseout="out('-489389385851058391');" style="">  22 import android.content.BroadcastReceiver;                                                                </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  23 import android.content.ComponentName;                                                                    </span>
<span class="5843991090186771909" onmouseenter="enter('5843991090186771909');" onmouseout="out('5843991090186771909');" style="">  24 import android.content.ContentProviderClient;                                                            </span>
<span class="3739800667450215943" onmouseenter="enter('3739800667450215943');" onmouseout="out('3739800667450215943');" style="">  25 import android.content.ContentProviderOperation;                                                         </span>
<span class="6126857652515451632" onmouseenter="enter('6126857652515451632');" onmouseout="out('6126857652515451632');" style="">  26 import android.content.ContentResolver;                                                                  </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="">  27 import android.content.ContentValues;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  28 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  29 import android.content.Intent;                                                                           </span>
<span class="-8524679231303418936" onmouseenter="enter('-8524679231303418936');" onmouseout="out('-8524679231303418936');" style="">  30 import android.content.Intent.ShortcutIconResource;                                                      </span>
<span class="8697221465021235869" onmouseenter="enter('8697221465021235869');" onmouseout="out('8697221465021235869');" style="">  31 import android.content.IntentFilter;                                                                     </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  32 import android.content.SharedPreferences;                                                                </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  33 import android.content.pm.PackageManager;                                                                </span>
<span class="-7427681121873781918" onmouseenter="enter('-7427681121873781918');" onmouseout="out('-7427681121873781918');" style="">  34 import android.content.pm.ProviderInfo;                                                                  </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  35 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  36 import android.content.res.Configuration;                                                                </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  37 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  38 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  39 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  40 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  41 import android.net.Uri;                                                                                  </span>
<span class="-5861542142927414420" onmouseenter="enter('-5861542142927414420');" onmouseout="out('-5861542142927414420');" style="">  42 import android.os.Environment;                                                                           </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  43 import android.os.Handler;                                                                               </span>
<span class="5075624728668821268" onmouseenter="enter('5075624728668821268');" onmouseout="out('5075624728668821268');" style="">  44 import android.os.HandlerThread;                                                                         </span>
<span class="-3467845820974384276" onmouseenter="enter('-3467845820974384276');" onmouseout="out('-3467845820974384276');" style="">  45 import android.os.Parcelable;                                                                            </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  46 import android.os.Process;                                                                               </span>
<span class="2671599330745315048" onmouseenter="enter('2671599330745315048');" onmouseout="out('2671599330745315048');" style="">  47 import android.os.RemoteException;                                                                       </span>
<span class="2720528326800018495" onmouseenter="enter('2720528326800018495');" onmouseout="out('2720528326800018495');" style="">  48 import android.os.SystemClock;                                                                           </span>
<span class="9209739606564279934" onmouseenter="enter('9209739606564279934');" onmouseout="out('9209739606564279934');" style="">  49 import android.provider.BaseColumns;                                                                     </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  50 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  51 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  52 import android.util.Pair;                                                                                </span>
<span  style="">  53                                                                                                          </span>
<span class="-2301578055393860706" onmouseenter="enter('-2301578055393860706');" onmouseout="out('-2301578055393860706');" style="">  54 import com.android.launcher3.compat.AppWidgetManagerCompat;                                              </span>
<span class="-394760018964595537" onmouseenter="enter('-394760018964595537');" onmouseout="out('-394760018964595537');" style="">  55 import com.android.launcher3.compat.LauncherActivityInfoCompat;                                          </span>
<span class="7348855441893227306" onmouseenter="enter('7348855441893227306');" onmouseout="out('7348855441893227306');" style="">  56 import com.android.launcher3.compat.LauncherAppsCompat;                                                  </span>
<span class="-6378403157506113444" onmouseenter="enter('-6378403157506113444');" onmouseout="out('-6378403157506113444');" style="">  57 import com.android.launcher3.compat.PackageInstallerCompat;                                              </span>
<span class="-9185808437279523438" onmouseenter="enter('-9185808437279523438');" onmouseout="out('-9185808437279523438');" style="">  58 import com.android.launcher3.compat.PackageInstallerCompat.PackageInstallInfo;                           </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="">  59 import com.android.launcher3.compat.UserHandleCompat;                                                    </span>
<span class="-8849211230761127863" onmouseenter="enter('-8849211230761127863');" onmouseout="out('-8849211230761127863');" style="">  60 import com.android.launcher3.compat.UserManagerCompat;                                                   </span>
<span  style="">  61                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  62 import java.lang.ref.WeakReference;                                                                      </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  63 import java.net.URISyntaxException;                                                                      </span>
<span class="4163694070296964880" onmouseenter="enter('4163694070296964880');" onmouseout="out('4163694070296964880');" style="">  64 import java.security.InvalidParameterException;                                                          </span>
<span class="-2082349054173013619" onmouseenter="enter('-2082349054173013619');" onmouseout="out('-2082349054173013619');" style="">  65 import java.text.Collator;                                                                               </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  66 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  67 import java.util.Arrays;                                                                                 </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  68 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  69 import java.util.Collections;                                                                            </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  70 import java.util.Comparator;                                                                             </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  71 import java.util.HashMap;                                                                                </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  72 import java.util.HashSet;                                                                                </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  73 import java.util.Iterator;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  74 import java.util.List;                                                                                   </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  75 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  76 import java.util.Set;                                                                                    </span>
<span class="7536840878424124946" onmouseenter="enter('7536840878424124946');" onmouseout="out('7536840878424124946');" style="">  77 import java.util.TreeMap;                                                                                </span>
<span class="-2705241621224930031" onmouseenter="enter('-2705241621224930031');" onmouseout="out('-2705241621224930031');" style="">  78 import java.util.concurrent.atomic.AtomicBoolean;                                                        </span>
<span  style="">  79                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  80 /**                                                                                                      </span>
<span class="-4436404655378914540" onmouseenter="enter('-4436404655378914540');" onmouseout="out('-4436404655378914540');" style="">  81  * Maintains in-memory state of the Launcher. It is expected that there should be only one               </span>
<span class="-4273357065044936134" onmouseenter="enter('-4273357065044936134');" onmouseout="out('-4273357065044936134');" style="">  82  * LauncherModel object held in a static. Also provide APIs for updating the database state              </span>
<span class="-4398933382026523538" onmouseenter="enter('-4398933382026523538');" onmouseout="out('-4398933382026523538');" style="">  83  * for the Launcher.                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  84  */                                                                                                      </span>
<span class="-2442101869408899034" onmouseenter="enter('-2442101869408899034');" onmouseout="out('-2442101869408899034');" style="">  85 public class LauncherModel extends BroadcastReceiver                                                     </span>
<span class="-6161550071310903350" onmouseenter="enter('-6161550071310903350');" onmouseout="out('-6161550071310903350');" style="">  86         implements LauncherAppsCompat.OnAppsChangedCallbackCompat {                                      </span>
<span class="4817350607901898392" onmouseenter="enter('4817350607901898392');" onmouseout="out('4817350607901898392');" style="">  87     static final boolean DEBUG_LOADERS = false;                                                          </span>
<span class="-5037112122408598239" onmouseenter="enter('-5037112122408598239');" onmouseout="out('-5037112122408598239');" style="">  88     private static final boolean DEBUG_RECEIVER = false;                                                 </span>
<span class="-4012347986936200510" onmouseenter="enter('-4012347986936200510');" onmouseout="out('-4012347986936200510');" style="">  89     private static final boolean REMOVE_UNRESTORED_ICONS = true;                                         </span>
<span  style="">  90                                                                                                          </span>
<span class="7166020908404799948" onmouseenter="enter('7166020908404799948');" onmouseout="out('7166020908404799948');" style="">  91     static final String TAG = &quot;Launcher.Model&quot;;                                                          </span>
<span  style="">  92                                                                                                          </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  93     // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                 </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  94     // false = strew non-workspace apps across the workspace on upgrade                                  </span>
<span class="-258177193926802879" onmouseenter="enter('-258177193926802879');" onmouseout="out('-258177193926802879');" style="">  95     public static final boolean UPGRADE_USE_MORE_APPS_FOLDER = false;                                    </span>
<span class="2412961508740342038" onmouseenter="enter('2412961508740342038');" onmouseout="out('2412961508740342038');" style="">  96     public static final int LOADER_FLAG_NONE = 0;                                                        </span>
<span class="-3582007365816200905" onmouseenter="enter('-3582007365816200905');" onmouseout="out('-3582007365816200905');" style="">  97     public static final int LOADER_FLAG_CLEAR_WORKSPACE = 1 &lt;&lt; 0;                                        </span>
<span class="2276565639346953559" onmouseenter="enter('2276565639346953559');" onmouseout="out('2276565639346953559');" style="">  98     public static final int LOADER_FLAG_MIGRATE_SHORTCUTS = 1 &lt;&lt; 1;                                      </span>
<span  style="">  99                                                                                                          </span>
<span class="-4154694662050657236" onmouseenter="enter('-4154694662050657236');" onmouseout="out('-4154694662050657236');" style=""> 100     private static final int ITEMS_CHUNK = 6; // batch size for the workspace icons                      </span>
<span class="-5674768092661618077" onmouseenter="enter('-5674768092661618077');" onmouseout="out('-5674768092661618077');" style=""> 101     private static final long INVALID_SCREEN_ID = -1L;                                                   </span>
<span  style=""> 102                                                                                                          </span>
<span class="-2106715535373822300" onmouseenter="enter('-2106715535373822300');" onmouseout="out('-2106715535373822300');" style=""> 103     private final boolean mAppsCanBeOnRemoveableStorage;                                                 </span>
<span class="4731979794377415890" onmouseenter="enter('4731979794377415890');" onmouseout="out('4731979794377415890');" style=""> 104     private final boolean mOldContentProviderExists;                                                     </span>
<span  style=""> 105                                                                                                          </span>
<span class="3718007027314914184" onmouseenter="enter('3718007027314914184');" onmouseout="out('3718007027314914184');" style=""> 106     private final LauncherAppState mApp;                                                                 </span>
<span class="-7373075918619999414" onmouseenter="enter('-7373075918619999414');" onmouseout="out('-7373075918619999414');" style=""> 107     private final Object mLock = new Object();                                                           </span>
<span class="6556510276342102272" onmouseenter="enter('6556510276342102272');" onmouseout="out('6556510276342102272');" style=""> 108     private DeferredHandler mHandler = new DeferredHandler();                                            </span>
<span class="-7862379002163915329" onmouseenter="enter('-7862379002163915329');" onmouseout="out('-7862379002163915329');" style=""> 109     private LoaderTask mLoaderTask;                                                                      </span>
<span class="-3485037850110155122" onmouseenter="enter('-3485037850110155122');" onmouseout="out('-3485037850110155122');" style=""> 110     private boolean mIsLoaderTaskRunning;                                                                </span>
<span class="7419034271767928159" onmouseenter="enter('7419034271767928159');" onmouseout="out('7419034271767928159');" style=""> 111     private volatile boolean mFlushingWorkerThread;                                                      </span>
<span  style=""> 112                                                                                                          </span>
<span class="7008336552769109798" onmouseenter="enter('7008336552769109798');" onmouseout="out('7008336552769109798');" style=""> 113     // Specific runnable types that are run on the main thread deferred handler, this allows us to       </span>
<span class="-2862621427901202146" onmouseenter="enter('-2862621427901202146');" onmouseout="out('-2862621427901202146');" style=""> 114     // clear all queued binding runnables when the Launcher activity is destroyed.                       </span>
<span class="2773124109533293313" onmouseenter="enter('2773124109533293313');" onmouseout="out('2773124109533293313');" style=""> 115     private static final int MAIN_THREAD_NORMAL_RUNNABLE = 0;                                            </span>
<span class="3742092121997602406" onmouseenter="enter('3742092121997602406');" onmouseout="out('3742092121997602406');" style=""> 116     private static final int MAIN_THREAD_BINDING_RUNNABLE = 1;                                           </span>
<span  style=""> 117                                                                                                          </span>
<span class="5026118005036723308" onmouseenter="enter('5026118005036723308');" onmouseout="out('5026118005036723308');" style=""> 118     private static final String MIGRATE_AUTHORITY = &quot;com.android.launcher2.settings&quot;;                    </span>
<span  style=""> 119                                                                                                          </span>
<span class="1887278082230738056" onmouseenter="enter('1887278082230738056');" onmouseout="out('1887278082230738056');" style=""> 120     private static final HandlerThread sWorkerThread = new HandlerThread(&quot;launcher-loader&quot;);             </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style=""> 121     static {                                                                                             </span>
<span class="3211376391739143126" onmouseenter="enter('3211376391739143126');" onmouseout="out('3211376391739143126');" style=""> 122         sWorkerThread.start();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123     }                                                                                                    </span>
<span class="2264102646027284513" onmouseenter="enter('2264102646027284513');" onmouseout="out('2264102646027284513');" style=""> 124     private static final Handler sWorker = new Handler(sWorkerThread.getLooper());                       </span>
<span  style=""> 125                                                                                                          </span>
<span class="3535035959074757881" onmouseenter="enter('3535035959074757881');" onmouseout="out('3535035959074757881');" style=""> 126     // We start off with everything not loaded.  After that, we assume that                              </span>
<span class="2643799052940090988" onmouseenter="enter('2643799052940090988');" onmouseout="out('2643799052940090988');" style=""> 127     // our monitoring of the package manager provides all updates and we never                           </span>
<span class="-1838192547825761021" onmouseenter="enter('-1838192547825761021');" onmouseout="out('-1838192547825761021');" style=""> 128     // need to do a requery.  These are only ever touched from the loader thread.                        </span>
<span class="-8758726942217087840" onmouseenter="enter('-8758726942217087840');" onmouseout="out('-8758726942217087840');" style=""> 129     private boolean mWorkspaceLoaded;                                                                    </span>
<span class="-1682003936594375249" onmouseenter="enter('-1682003936594375249');" onmouseout="out('-1682003936594375249');" style=""> 130     private boolean mAllAppsLoaded;                                                                      </span>
<span  style=""> 131                                                                                                          </span>
<span class="4437381645098142172" onmouseenter="enter('4437381645098142172');" onmouseout="out('4437381645098142172');" style=""> 132     // When we are loading pages synchronously, we can&#x27;t just post the binding of items on the side      </span>
<span class="3512738277131757196" onmouseenter="enter('3512738277131757196');" onmouseout="out('3512738277131757196');" style=""> 133     // pages as this delays the rotation process.  Instead, we wait for a callback from the first        </span>
<span class="1019766179129744653" onmouseenter="enter('1019766179129744653');" onmouseout="out('1019766179129744653');" style=""> 134     // draw (in Workspace) to initiate the binding of the remaining side pages.  Any time we start       </span>
<span class="7373070490167110663" onmouseenter="enter('7373070490167110663');" onmouseout="out('7373070490167110663');" style=""> 135     // a normal load, we also clear this set of Runnables.                                               </span>
<span class="4843369785562403466" onmouseenter="enter('4843369785562403466');" onmouseout="out('4843369785562403466');" style=""> 136     static final ArrayList&lt;Runnable&gt; mDeferredBindRunnables = new ArrayList&lt;Runnable&gt;();                 </span>
<span  style=""> 137                                                                                                          </span>
<span class="5593309185710650450" onmouseenter="enter('5593309185710650450');" onmouseout="out('5593309185710650450');" style=""> 138     private WeakReference&lt;Callbacks&gt; mCallbacks;                                                         </span>
<span  style=""> 139                                                                                                          </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 140     // &lt; only access in worker thread &gt;                                                                  </span>
<span class="-7893410053402242276" onmouseenter="enter('-7893410053402242276');" onmouseout="out('-7893410053402242276');" style=""> 141     AllAppsList mBgAllAppsList;                                                                          </span>
<span  style=""> 142                                                                                                          </span>
<span class="-4696524037009093502" onmouseenter="enter('-4696524037009093502');" onmouseout="out('-4696524037009093502');" style=""> 143     // The lock that must be acquired before referencing any static bg data structures.  Unlike          </span>
<span class="-2471307598696798987" onmouseenter="enter('-2471307598696798987');" onmouseout="out('-2471307598696798987');" style=""> 144     // other locks, this one can generally be held long-term because we never expect any of these        </span>
<span class="4310884307601416106" onmouseenter="enter('4310884307601416106');" onmouseout="out('4310884307601416106');" style=""> 145     // static data structures to be referenced outside of the worker thread except on the first          </span>
<span class="2260118264672300125" onmouseenter="enter('2260118264672300125');" onmouseout="out('2260118264672300125');" style=""> 146     // load after configuration change.                                                                  </span>
<span class="-8652324765300755578" onmouseenter="enter('-8652324765300755578');" onmouseout="out('-8652324765300755578');" style=""> 147     static final Object sBgLock = new Object();                                                          </span>
<span  style=""> 148                                                                                                          </span>
<span class="861828438456678075" onmouseenter="enter('861828438456678075');" onmouseout="out('861828438456678075');" style=""> 149     // sBgItemsIdMap maps *all* the ItemInfos (shortcuts, folders, and widgets) created by               </span>
<span class="3964854605559074701" onmouseenter="enter('3964854605559074701');" onmouseout="out('3964854605559074701');" style=""> 150     // LauncherModel to their ids                                                                        </span>
<span class="8713038185903703074" onmouseenter="enter('8713038185903703074');" onmouseout="out('8713038185903703074');" style=""> 151     static final HashMap&lt;Long, ItemInfo&gt; sBgItemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                  </span>
<span  style=""> 152                                                                                                          </span>
<span class="-4875305940507672487" onmouseenter="enter('-4875305940507672487');" onmouseout="out('-4875305940507672487');" style=""> 153     // sBgWorkspaceItems is passed to bindItems, which expects a list of all folders and shortcuts       </span>
<span class="5836863726682543660" onmouseenter="enter('5836863726682543660');" onmouseout="out('5836863726682543660');" style=""> 154     //       created by LauncherModel that are directly on the home screen (however, no widgets or       </span>
<span class="4941255916545901139" onmouseenter="enter('4941255916545901139');" onmouseout="out('4941255916545901139');" style=""> 155     //       shortcuts within folders).                                                                  </span>
<span class="4770535944422974992" onmouseenter="enter('4770535944422974992');" onmouseout="out('4770535944422974992');" style=""> 156     static final ArrayList&lt;ItemInfo&gt; sBgWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                      </span>
<span  style=""> 157                                                                                                          </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 158     // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()    </span>
<span class="2792930227258213532" onmouseenter="enter('2792930227258213532');" onmouseout="out('2792930227258213532');" style=""> 159     static final ArrayList&lt;LauncherAppWidgetInfo&gt; sBgAppWidgets =                                        </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style=""> 160         new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                          </span>
<span  style=""> 161                                                                                                          </span>
<span class="8356003681152445460" onmouseenter="enter('8356003681152445460');" onmouseout="out('8356003681152445460');" style=""> 162     // sBgFolders is all FolderInfos created by LauncherModel. Passed to bindFolders()                   </span>
<span class="8065187755370300271" onmouseenter="enter('8065187755370300271');" onmouseout="out('8065187755370300271');" style=""> 163     static final HashMap&lt;Long, FolderInfo&gt; sBgFolders = new HashMap&lt;Long, FolderInfo&gt;();                 </span>
<span  style=""> 164                                                                                                          </span>
<span class="-6906235458204319724" onmouseenter="enter('-6906235458204319724');" onmouseout="out('-6906235458204319724');" style=""> 165     // sBgDbIconCache is the set of ItemInfos that need to have their icons updated in the database      </span>
<span class="-2979801471293813396" onmouseenter="enter('-2979801471293813396');" onmouseout="out('-2979801471293813396');" style=""> 166     static final HashMap&lt;Object, byte[]&gt; sBgDbIconCache = new HashMap&lt;Object, byte[]&gt;();                 </span>
<span  style=""> 167                                                                                                          </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 168     // sBgWorkspaceScreens is the ordered set of workspace screens.                                      </span>
<span class="-1373680151983800221" onmouseenter="enter('-1373680151983800221');" onmouseout="out('-1373680151983800221');" style=""> 169     static final ArrayList&lt;Long&gt; sBgWorkspaceScreens = new ArrayList&lt;Long&gt;();                            </span>
<span  style=""> 170                                                                                                          </span>
<span class="8587182513202290942" onmouseenter="enter('8587182513202290942');" onmouseout="out('8587182513202290942');" style=""> 171     // sPendingPackages is a set of packages which could be on sdcard and are not available yet          </span>
<span class="7668483630172593446" onmouseenter="enter('7668483630172593446');" onmouseout="out('7668483630172593446');" style=""> 172     static final HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; sPendingPackages =                           </span>
<span class="3743105789756038321" onmouseenter="enter('3743105789756038321');" onmouseout="out('3743105789756038321');" style=""> 173             new HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt;();                                            </span>
<span  style=""> 174                                                                                                          </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 175     // &lt;/ only access in worker thread &gt;                                                                 </span>
<span  style=""> 176                                                                                                          </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style=""> 177     private IconCache mIconCache;                                                                        </span>
<span  style=""> 178                                                                                                          </span>
<span class="-1428370913368008087" onmouseenter="enter('-1428370913368008087');" onmouseout="out('-1428370913368008087');" style=""> 179     protected int mPreviousConfigMcc;                                                                    </span>
<span  style=""> 180                                                                                                          </span>
<span class="-1392466613073934971" onmouseenter="enter('-1392466613073934971');" onmouseout="out('-1392466613073934971');" style=""> 181     private final LauncherAppsCompat mLauncherApps;                                                      </span>
<span class="-6177668713869523688" onmouseenter="enter('-6177668713869523688');" onmouseout="out('-6177668713869523688');" style=""> 182     private final UserManagerCompat mUserManager;                                                        </span>
<span  style=""> 183                                                                                                          </span>
<span class="-3338718885622541528" onmouseenter="enter('-3338718885622541528');" onmouseout="out('-3338718885622541528');" style=""> 184     public interface Callbacks {                                                                         </span>
<span class="-4231961333511672310" onmouseenter="enter('-4231961333511672310');" onmouseout="out('-4231961333511672310');" style=""> 185         public boolean setLoadOnResume();                                                                </span>
<span class="803814078537529918" onmouseenter="enter('803814078537529918');" onmouseout="out('803814078537529918');" style=""> 186         public int getCurrentWorkspaceScreen();                                                          </span>
<span class="9018975241375557324" onmouseenter="enter('9018975241375557324');" onmouseout="out('9018975241375557324');" style=""> 187         public void startBinding();                                                                      </span>
<span class="3160017311795321748" onmouseenter="enter('3160017311795321748');" onmouseout="out('3160017311795321748');" style=""> 188         public void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end,                         </span>
<span class="2581406714293150955" onmouseenter="enter('2581406714293150955');" onmouseout="out('2581406714293150955');" style=""> 189                               boolean forceAnimateIcons);                                                </span>
<span class="5464078408309929972" onmouseenter="enter('5464078408309929972');" onmouseout="out('5464078408309929972');" style=""> 190         public void bindScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                       </span>
<span class="8828153861812868297" onmouseenter="enter('8828153861812868297');" onmouseout="out('8828153861812868297');" style=""> 191         public void bindAddScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                    </span>
<span class="6163649300164694862" onmouseenter="enter('6163649300164694862');" onmouseout="out('6163649300164694862');" style=""> 192         public void bindFolders(HashMap&lt;Long,FolderInfo&gt; folders);                                       </span>
<span class="-3241982460320043016" onmouseenter="enter('-3241982460320043016');" onmouseout="out('-3241982460320043016');" style=""> 193         public void finishBindingItems(boolean upgradePath);                                             </span>
<span class="-1509675786278068914" onmouseenter="enter('-1509675786278068914');" onmouseout="out('-1509675786278068914');" style=""> 194         public void bindAppWidget(LauncherAppWidgetInfo info);                                           </span>
<span class="-8847143600952784869" onmouseenter="enter('-8847143600952784869');" onmouseout="out('-8847143600952784869');" style=""> 195         public void bindAllApplications(ArrayList&lt;AppInfo&gt; apps);                                        </span>
<span class="1774766681438121710" onmouseenter="enter('1774766681438121710');" onmouseout="out('1774766681438121710');" style=""> 196         public void bindAppsAdded(ArrayList&lt;Long&gt; newScreens,                                            </span>
<span class="-4634129325608240116" onmouseenter="enter('-4634129325608240116');" onmouseout="out('-4634129325608240116');" style=""> 197                                   ArrayList&lt;ItemInfo&gt; addNotAnimated,                                    </span>
<span class="-7991947031099209517" onmouseenter="enter('-7991947031099209517');" onmouseout="out('-7991947031099209517');" style=""> 198                                   ArrayList&lt;ItemInfo&gt; addAnimated,                                       </span>
<span class="7647862954797634111" onmouseenter="enter('7647862954797634111');" onmouseout="out('7647862954797634111');" style=""> 199                                   ArrayList&lt;AppInfo&gt; addedApps);                                         </span>
<span class="4809991796097108143" onmouseenter="enter('4809991796097108143');" onmouseout="out('4809991796097108143');" style=""> 200         public void bindAppsUpdated(ArrayList&lt;AppInfo&gt; apps);                                            </span>
<span class="-6991207189725786229" onmouseenter="enter('-6991207189725786229');" onmouseout="out('-6991207189725786229');" style=""> 201         public void bindAppsRestored(ArrayList&lt;AppInfo&gt; apps);                                           </span>
<span class="1552205679904733456" onmouseenter="enter('1552205679904733456');" onmouseout="out('1552205679904733456');" style=""> 202         public void updatePackageState(ArrayList&lt;PackageInstallInfo&gt; installInfo);                       </span>
<span class="3764474087617128758" onmouseenter="enter('3764474087617128758');" onmouseout="out('3764474087617128758');" style=""> 203         public void updatePackageBadge(String packageName);                                              </span>
<span class="-3322135261875169793" onmouseenter="enter('-3322135261875169793');" onmouseout="out('-3322135261875169793');" style=""> 204         public void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames,                                </span>
<span class="-1539895317750647539" onmouseenter="enter('-1539895317750647539');" onmouseout="out('-1539895317750647539');" style=""> 205                         ArrayList&lt;AppInfo&gt; appInfos, UserHandleCompat user);                             </span>
<span class="-5054203298075540925" onmouseenter="enter('-5054203298075540925');" onmouseout="out('-5054203298075540925');" style=""> 206         public void bindPackagesUpdated(ArrayList&lt;Object&gt; widgetsAndShortcuts);                          </span>
<span class="7466294501708892199" onmouseenter="enter('7466294501708892199');" onmouseout="out('7466294501708892199');" style=""> 207         public void bindSearchablesChanged();                                                            </span>
<span class="-4863664490041232492" onmouseenter="enter('-4863664490041232492');" onmouseout="out('-4863664490041232492');" style=""> 208         public boolean isAllAppsButtonRank(int rank);                                                    </span>
<span class="-6469605959563265863" onmouseenter="enter('-6469605959563265863');" onmouseout="out('-6469605959563265863');" style=""> 209         public void onPageBoundSynchronously(int page);                                                  </span>
<span class="2927470839806734779" onmouseenter="enter('2927470839806734779');" onmouseout="out('2927470839806734779');" style=""> 210         public void dumpLogsToLocalData();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211     }                                                                                                    </span>
<span  style=""> 212                                                                                                          </span>
<span class="6660553528201779332" onmouseenter="enter('6660553528201779332');" onmouseout="out('6660553528201779332');" style=""> 213     public interface ItemInfoFilter {                                                                    </span>
<span class="-4205302945183309423" onmouseenter="enter('-4205302945183309423');" onmouseout="out('-4205302945183309423');" style=""> 214         public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215     }                                                                                                    </span>
<span  style=""> 216                                                                                                          </span>
<span class="-7540253694606934273" onmouseenter="enter('-7540253694606934273');" onmouseout="out('-7540253694606934273');" style=""> 217     LauncherModel(LauncherAppState app, IconCache iconCache, AppFilter appFilter) {                      </span>
<span class="-3815285143453777974" onmouseenter="enter('-3815285143453777974');" onmouseout="out('-3815285143453777974');" style=""> 218         Context context = app.getContext();                                                              </span>
<span  style=""> 219                                                                                                          </span>
<span class="1644001329477881511" onmouseenter="enter('1644001329477881511');" onmouseout="out('1644001329477881511');" style=""> 220         mAppsCanBeOnRemoveableStorage = Environment.isExternalStorageRemovable();                        </span>
<span class="6456618698786728431" onmouseenter="enter('6456618698786728431');" onmouseout="out('6456618698786728431');" style=""> 221         String oldProvider = context.getString(R.string.old_launcher_provider_uri);                      </span>
<span class="-4473607088242738177" onmouseenter="enter('-4473607088242738177');" onmouseout="out('-4473607088242738177');" style=""> 222         // This may be the same as MIGRATE_AUTHORITY, or it may be replaced by a different               </span>
<span class="-5811264300229071057" onmouseenter="enter('-5811264300229071057');" onmouseout="out('-5811264300229071057');" style=""> 223         // resource string.                                                                              </span>
<span class="7826951633422431656" onmouseenter="enter('7826951633422431656');" onmouseout="out('7826951633422431656');" style=""> 224         String redirectAuthority = Uri.parse(oldProvider).getAuthority();                                </span>
<span class="6066736278849717257" onmouseenter="enter('6066736278849717257');" onmouseout="out('6066736278849717257');" style=""> 225         ProviderInfo providerInfo =                                                                      </span>
<span class="-9141516768909079071" onmouseenter="enter('-9141516768909079071');" onmouseout="out('-9141516768909079071');" style=""> 226                 context.getPackageManager().resolveContentProvider(MIGRATE_AUTHORITY, 0);                </span>
<span class="765698750338601416" onmouseenter="enter('765698750338601416');" onmouseout="out('765698750338601416');" style=""> 227         ProviderInfo redirectProvider =                                                                  </span>
<span class="-45874905823641339" onmouseenter="enter('-45874905823641339');" onmouseout="out('-45874905823641339');" style=""> 228                 context.getPackageManager().resolveContentProvider(redirectAuthority, 0);                </span>
<span  style=""> 229                                                                                                          </span>
<span class="314259485526307626" onmouseenter="enter('314259485526307626');" onmouseout="out('314259485526307626');" style=""> 230         Log.d(TAG, &quot;Old launcher provider: &quot; + oldProvider);                                             </span>
<span class="-8592116164695986182" onmouseenter="enter('-8592116164695986182');" onmouseout="out('-8592116164695986182');" style=""> 231         mOldContentProviderExists = (providerInfo != null) &amp;&amp; (redirectProvider != null);                </span>
<span  style=""> 232                                                                                                          </span>
<span class="6861009572404401042" onmouseenter="enter('6861009572404401042');" onmouseout="out('6861009572404401042');" style=""> 233         if (mOldContentProviderExists) {                                                                 </span>
<span class="-1855952710226164095" onmouseenter="enter('-1855952710226164095');" onmouseout="out('-1855952710226164095');" style=""> 234             Log.d(TAG, &quot;Old launcher provider exists.&quot;);                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 235         } else {                                                                                         </span>
<span class="-884548298796331780" onmouseenter="enter('-884548298796331780');" onmouseout="out('-884548298796331780');" style=""> 236             Log.d(TAG, &quot;Old launcher provider does not exist.&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237         }                                                                                                </span>
<span  style=""> 238                                                                                                          </span>
<span class="8987557410347250467" onmouseenter="enter('8987557410347250467');" onmouseout="out('8987557410347250467');" style=""> 239         mApp = app;                                                                                      </span>
<span class="-1240051748269974178" onmouseenter="enter('-1240051748269974178');" onmouseout="out('-1240051748269974178');" style=""> 240         mBgAllAppsList = new AllAppsList(iconCache, appFilter);                                          </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style=""> 241         mIconCache = iconCache;                                                                          </span>
<span  style=""> 242                                                                                                          </span>
<span class="3654972388535142593" onmouseenter="enter('3654972388535142593');" onmouseout="out('3654972388535142593');" style=""> 243         final Resources res = context.getResources();                                                    </span>
<span class="-4708036118337437843" onmouseenter="enter('-4708036118337437843');" onmouseout="out('-4708036118337437843');" style=""> 244         Configuration config = res.getConfiguration();                                                   </span>
<span class="-32775646941108504" onmouseenter="enter('-32775646941108504');" onmouseout="out('-32775646941108504');" style=""> 245         mPreviousConfigMcc = config.mcc;                                                                 </span>
<span class="-1186313261969242146" onmouseenter="enter('-1186313261969242146');" onmouseout="out('-1186313261969242146');" style=""> 246         mLauncherApps = LauncherAppsCompat.getInstance(context);                                         </span>
<span class="5028106411018262806" onmouseenter="enter('5028106411018262806');" onmouseout="out('5028106411018262806');" style=""> 247         mUserManager = UserManagerCompat.getInstance(context);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248     }                                                                                                    </span>
<span  style=""> 249                                                                                                          </span>
<span class="7032781054018231449" onmouseenter="enter('7032781054018231449');" onmouseout="out('7032781054018231449');" style=""> 250     /** Runs the specified runnable immediately if called from the main thread, otherwise it is          </span>
<span class="7688515897456092220" onmouseenter="enter('7688515897456092220');" onmouseout="out('7688515897456092220');" style=""> 251      * posted on the main thread handler. */                                                             </span>
<span class="-3461925467760565643" onmouseenter="enter('-3461925467760565643');" onmouseout="out('-3461925467760565643');" style=""> 252     private void runOnMainThread(Runnable r) {                                                           </span>
<span class="-8277339055128647976" onmouseenter="enter('-8277339055128647976');" onmouseout="out('-8277339055128647976');" style=""> 253         runOnMainThread(r, 0);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254     }                                                                                                    </span>
<span class="2979979552252814736" onmouseenter="enter('2979979552252814736');" onmouseout="out('2979979552252814736');" style=""> 255     private void runOnMainThread(Runnable r, int type) {                                                 </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 256         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="-8713172384634047131" onmouseenter="enter('-8713172384634047131');" onmouseout="out('-8713172384634047131');" style=""> 257             // If we are on the worker thread, post onto the main handler                                </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 258             mHandler.post(r);                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 259         } else {                                                                                         </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 260             r.run();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262     }                                                                                                    </span>
<span  style=""> 263                                                                                                          </span>
<span class="3207003836565128" onmouseenter="enter('3207003836565128');" onmouseout="out('3207003836565128');" style=""> 264     /** Runs the specified runnable immediately if called from the worker thread, otherwise it is        </span>
<span class="-2756655390038865740" onmouseenter="enter('-2756655390038865740');" onmouseout="out('-2756655390038865740');" style=""> 265      * posted on the worker thread handler. */                                                           </span>
<span class="-6815764929820931194" onmouseenter="enter('-6815764929820931194');" onmouseout="out('-6815764929820931194');" style=""> 266     private static void runOnWorkerThread(Runnable r) {                                                  </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 267         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 268             r.run();                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 269         } else {                                                                                         </span>
<span class="4127612692606453253" onmouseenter="enter('4127612692606453253');" onmouseout="out('4127612692606453253');" style=""> 270             // If we are not on the worker thread, then post to the worker handler                       </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style=""> 271             sWorker.post(r);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273     }                                                                                                    </span>
<span  style=""> 274                                                                                                          </span>
<span class="-7044369129545244866" onmouseenter="enter('-7044369129545244866');" onmouseout="out('-7044369129545244866');" style=""> 275     boolean canMigrateFromOldLauncherDb(Launcher launcher) {                                             </span>
<span class="7588769537569950934" onmouseenter="enter('7588769537569950934');" onmouseout="out('7588769537569950934');" style=""> 276         return mOldContentProviderExists &amp;&amp; !launcher.isLauncherPreinstalled() ;                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277     }                                                                                                    </span>
<span  style=""> 278                                                                                                          </span>
<span class="7006856679254675514" onmouseenter="enter('7006856679254675514');" onmouseout="out('7006856679254675514');" style=""> 279     static boolean findNextAvailableIconSpaceInScreen(ArrayList&lt;ItemInfo&gt; items, int[] xy,               </span>
<span class="-6492711054324248109" onmouseenter="enter('-6492711054324248109');" onmouseout="out('-6492711054324248109');" style=""> 280                                  long screen) {                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 281         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 282         DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                    </span>
<span class="559481881935924132" onmouseenter="enter('559481881935924132');" onmouseout="out('559481881935924132');" style=""> 283         final int xCount = (int) grid.numColumns;                                                        </span>
<span class="-3430391683121642487" onmouseenter="enter('-3430391683121642487');" onmouseout="out('-3430391683121642487');" style=""> 284         final int yCount = (int) grid.numRows;                                                           </span>
<span class="9207855715228317472" onmouseenter="enter('9207855715228317472');" onmouseout="out('9207855715228317472');" style=""> 285         boolean[][] occupied = new boolean[xCount][yCount];                                              </span>
<span  style=""> 286                                                                                                          </span>
<span class="2963072137114824070" onmouseenter="enter('2963072137114824070');" onmouseout="out('2963072137114824070');" style=""> 287         int cellX, cellY, spanX, spanY;                                                                  </span>
<span class="5020765328610170980" onmouseenter="enter('5020765328610170980');" onmouseout="out('5020765328610170980');" style=""> 288         for (int i = 0; i &lt; items.size(); ++i) {                                                         </span>
<span class="3181415890192694055" onmouseenter="enter('3181415890192694055');" onmouseout="out('3181415890192694055');" style=""> 289             final ItemInfo item = items.get(i);                                                          </span>
<span class="-4074076028767186492" onmouseenter="enter('-4074076028767186492');" onmouseout="out('-4074076028767186492');" style=""> 290             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                        </span>
<span class="4879929299303230054" onmouseenter="enter('4879929299303230054');" onmouseout="out('4879929299303230054');" style=""> 291                 if (item.screenId == screen) {                                                           </span>
<span class="-5253640052908660766" onmouseenter="enter('-5253640052908660766');" onmouseout="out('-5253640052908660766');" style=""> 292                     cellX = item.cellX;                                                                  </span>
<span class="8289808867760126989" onmouseenter="enter('8289808867760126989');" onmouseout="out('8289808867760126989');" style=""> 293                     cellY = item.cellY;                                                                  </span>
<span class="-1153670204852401248" onmouseenter="enter('-1153670204852401248');" onmouseout="out('-1153670204852401248');" style=""> 294                     spanX = item.spanX;                                                                  </span>
<span class="-1841066671071348880" onmouseenter="enter('-1841066671071348880');" onmouseout="out('-1841066671071348880');" style=""> 295                     spanY = item.spanY;                                                                  </span>
<span class="3713894754787265371" onmouseenter="enter('3713894754787265371');" onmouseout="out('3713894754787265371');" style=""> 296                     for (int x = cellX; 0 &lt;= x &amp;&amp; x &lt; cellX + spanX &amp;&amp; x &lt; xCount; x++) {                </span>
<span class="1312990358377437379" onmouseenter="enter('1312990358377437379');" onmouseout="out('1312990358377437379');" style=""> 297                         for (int y = cellY; 0 &lt;= y &amp;&amp; y &lt; cellY + spanY &amp;&amp; y &lt; yCount; y++) {            </span>
<span class="-8702463444488690423" onmouseenter="enter('-8702463444488690423');" onmouseout="out('-8702463444488690423');" style=""> 298                             occupied[x][y] = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303         }                                                                                                </span>
<span  style=""> 304                                                                                                          </span>
<span class="-8431133162249858978" onmouseenter="enter('-8431133162249858978');" onmouseout="out('-8431133162249858978');" style=""> 305         return CellLayout.findVacantCell(xy, 1, 1, xCount, yCount, occupied);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306     }                                                                                                    </span>
<span class="-6259456544478400180" onmouseenter="enter('-6259456544478400180');" onmouseout="out('-6259456544478400180');" style=""> 307     static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name,                    </span>
<span class="-5771883199866145387" onmouseenter="enter('-5771883199866145387');" onmouseout="out('-5771883199866145387');" style=""> 308                                                         Intent launchIntent,                             </span>
<span class="245504953411362786" onmouseenter="enter('245504953411362786');" onmouseout="out('245504953411362786');" style=""> 309                                                         int firstScreenIndex,                            </span>
<span class="-3030748495081078938" onmouseenter="enter('-3030748495081078938');" onmouseout="out('-3030748495081078938');" style=""> 310                                                         ArrayList&lt;Long&gt; workspaceScreens) {              </span>
<span class="721182088367487597" onmouseenter="enter('721182088367487597');" onmouseout="out('721182088367487597');" style=""> 311         // Lock on the app so that we don&#x27;t try and get the items while apps are being added             </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 312         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-2530158852228207709" onmouseenter="enter('-2530158852228207709');" onmouseout="out('-2530158852228207709');" style=""> 313         LauncherModel model = app.getModel();                                                            </span>
<span class="-7742650363035610838" onmouseenter="enter('-7742650363035610838');" onmouseout="out('-7742650363035610838');" style=""> 314         boolean found = false;                                                                           </span>
<span class="8915607661092661586" onmouseenter="enter('8915607661092661586');" onmouseout="out('8915607661092661586');" style=""> 315         synchronized (app) {                                                                             </span>
<span class="7297018345010768725" onmouseenter="enter('7297018345010768725');" onmouseout="out('7297018345010768725');" style=""> 316             if (sWorkerThread.getThreadId() != Process.myTid()) {                                        </span>
<span class="-8468687854737954991" onmouseenter="enter('-8468687854737954991');" onmouseout="out('-8468687854737954991');" style=""> 317                 // Flush the LauncherModel worker thread, so that if we just did another                 </span>
<span class="-8915737001643417667" onmouseenter="enter('-8915737001643417667');" onmouseout="out('-8915737001643417667');" style=""> 318                 // processInstallShortcut, we give it time for its shortcut to get added to the          </span>
<span class="2341850028976611589" onmouseenter="enter('2341850028976611589');" onmouseout="out('2341850028976611589');" style=""> 319                 // database (getItemsInLocalCoordinates reads the database)                              </span>
<span class="-3308163450517263024" onmouseenter="enter('-3308163450517263024');" onmouseout="out('-3308163450517263024');" style=""> 320                 model.flushWorkerThread();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321             }                                                                                            </span>
<span class="8797318797001481965" onmouseenter="enter('8797318797001481965');" onmouseout="out('8797318797001481965');" style=""> 322             final ArrayList&lt;ItemInfo&gt; items = LauncherModel.getItemsInLocalCoordinates(context);         </span>
<span  style=""> 323                                                                                                          </span>
<span class="2319873497820841755" onmouseenter="enter('2319873497820841755');" onmouseout="out('2319873497820841755');" style=""> 324             // Try adding to the workspace screens incrementally, starting at the default or center      </span>
<span class="1139467458780899300" onmouseenter="enter('1139467458780899300');" onmouseout="out('1139467458780899300');" style=""> 325             // screen and alternating between +1, -1, +2, -2, etc. (using ~ ceil(i/2f)*(-1)^(i-1))       </span>
<span class="8331999200789555153" onmouseenter="enter('8331999200789555153');" onmouseout="out('8331999200789555153');" style=""> 326             firstScreenIndex = Math.min(firstScreenIndex, workspaceScreens.size());                      </span>
<span class="-5057452471390749214" onmouseenter="enter('-5057452471390749214');" onmouseout="out('-5057452471390749214');" style=""> 327             int count = workspaceScreens.size();                                                         </span>
<span class="6323561107141122979" onmouseenter="enter('6323561107141122979');" onmouseout="out('6323561107141122979');" style=""> 328             for (int screen = firstScreenIndex; screen &lt; count &amp;&amp; !found; screen++) {                    </span>
<span class="-2680594161355971081" onmouseenter="enter('-2680594161355971081');" onmouseout="out('-2680594161355971081');" style=""> 329                 int[] tmpCoordinates = new int[2];                                                       </span>
<span class="7117247924377105749" onmouseenter="enter('7117247924377105749');" onmouseout="out('7117247924377105749');" style=""> 330                 if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates,                            </span>
<span class="-6258224581011394116" onmouseenter="enter('-6258224581011394116');" onmouseout="out('-6258224581011394116');" style=""> 331                         workspaceScreens.get(screen))) {                                                 </span>
<span class="-4461607076234575183" onmouseenter="enter('-4461607076234575183');" onmouseout="out('-4461607076234575183');" style=""> 332                     // Update the Launcher db                                                            </span>
<span class="-6316225509374818886" onmouseenter="enter('-6316225509374818886');" onmouseout="out('-6316225509374818886');" style=""> 333                     return new Pair&lt;Long, int[]&gt;(workspaceScreens.get(screen), tmpCoordinates);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 337         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338     }                                                                                                    </span>
<span  style=""> 339                                                                                                          </span>
<span class="-7586986915858549354" onmouseenter="enter('-7586986915858549354');" onmouseout="out('-7586986915858549354');" style=""> 340     public void setPackageState(final ArrayList&lt;PackageInstallInfo&gt; installInfo) {                       </span>
<span class="-7600698850277173095" onmouseenter="enter('-7600698850277173095');" onmouseout="out('-7600698850277173095');" style=""> 341         // Process the updated package state                                                             </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 342         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 343             public void run() {                                                                          </span>
<span class="2781538483798405833" onmouseenter="enter('2781538483798405833');" onmouseout="out('2781538483798405833');" style=""> 344                 Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style=""> 345                 if (callbacks != null) {                                                                 </span>
<span class="-2122958624687225435" onmouseenter="enter('-2122958624687225435');" onmouseout="out('-2122958624687225435');" style=""> 346                     callbacks.updatePackageState(installInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 349         };                                                                                               </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 350         mHandler.post(r);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351     }                                                                                                    </span>
<span  style=""> 352                                                                                                          </span>
<span class="-4348975915921845586" onmouseenter="enter('-4348975915921845586');" onmouseout="out('-4348975915921845586');" style=""> 353     public void updatePackageBadge(final String packageName) {                                           </span>
<span class="7729714843616329773" onmouseenter="enter('7729714843616329773');" onmouseout="out('7729714843616329773');" style=""> 354         // Process the updated package badge                                                             </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 355         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 356             public void run() {                                                                          </span>
<span class="2781538483798405833" onmouseenter="enter('2781538483798405833');" onmouseout="out('2781538483798405833');" style=""> 357                 Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style=""> 358                 if (callbacks != null) {                                                                 </span>
<span class="-175082648182985609" onmouseenter="enter('-175082648182985609');" onmouseout="out('-175082648182985609');" style=""> 359                     callbacks.updatePackageBadge(packageName);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 361             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 362         };                                                                                               </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 363         mHandler.post(r);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364     }                                                                                                    </span>
<span  style=""> 365                                                                                                          </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style=""> 366     public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {              </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style=""> 367         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style=""> 368                                                                                                          </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style=""> 369         if (allAppsApps == null) {                                                                       </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style=""> 370             throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371         }                                                                                                </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style=""> 372         if (allAppsApps.isEmpty()) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 373             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374         }                                                                                                </span>
<span  style=""> 375                                                                                                          </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style=""> 376         final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                           </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style=""> 377         Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                 </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 378         while (iter.hasNext()) {                                                                         </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 379             ItemInfo a = iter.next();                                                                    </span>
<span class="788818030959001981" onmouseenter="enter('788818030959001981');" onmouseout="out('788818030959001981');" style=""> 380             if (LauncherModel.appWasPromise(ctx, a.getIntent(), a.user)) {                               </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style=""> 381                 restoredAppsFinal.add((AppInfo) a);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383         }                                                                                                </span>
<span  style=""> 384                                                                                                          </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 385         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 386         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 387             public void run() {                                                                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 388                 runOnMainThread(new Runnable() {                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 389                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 390                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style=""> 391                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style=""> 392                             if (!restoredAppsFinal.isEmpty()) {                                          </span>
<span class="74801564058707670" onmouseenter="enter('74801564058707670');" onmouseout="out('74801564058707670');" style=""> 393                                 for (AppInfo info : restoredAppsFinal) {                                 </span>
<span class="5803126433316087462" onmouseenter="enter('5803126433316087462');" onmouseout="out('5803126433316087462');" style=""> 394                                     final Intent intent = info.getIntent();                              </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style=""> 395                                     if (intent != null) {                                                </span>
<span class="7948974687398618411" onmouseenter="enter('7948974687398618411');" onmouseout="out('7948974687398618411');" style=""> 396                                         mIconCache.deletePreloadedIcon(intent.getComponent(),            </span>
<span class="1609339875512298297" onmouseenter="enter('1609339875512298297');" onmouseout="out('1609339875512298297');" style=""> 397                                                 info.user);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399                                 }                                                                        </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style=""> 400                                 callbacks.bindAppsUpdated(restoredAppsFinal);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401                             }                                                                            </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style=""> 402                             callbacks.bindAppsAdded(null, null, null, allAppsApps);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 405                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 407         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 408         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409     }                                                                                                    </span>
<span  style=""> 410                                                                                                          </span>
<span class="-1568395532324485066" onmouseenter="enter('-1568395532324485066');" onmouseout="out('-1568395532324485066');" style=""> 411     public void addAndBindAddedWorkspaceApps(final Context context,                                      </span>
<span class="-2077533935123746745" onmouseenter="enter('-2077533935123746745');" onmouseout="out('-2077533935123746745');" style=""> 412             final ArrayList&lt;ItemInfo&gt; workspaceApps) {                                                   </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style=""> 413         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style=""> 414                                                                                                          </span>
<span class="7068544170534510976" onmouseenter="enter('7068544170534510976');" onmouseout="out('7068544170534510976');" style=""> 415         if (workspaceApps == null) {                                                                     </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 416             throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417         }                                                                                                </span>
<span class="3300400308027950866" onmouseenter="enter('3300400308027950866');" onmouseout="out('3300400308027950866');" style=""> 418         if (workspaceApps.isEmpty()) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 419             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420         }                                                                                                </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 421         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 422         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 423             public void run() {                                                                          </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 424                 final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();               </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 425                 final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style=""> 426                 final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                   </span>
<span  style=""> 427                                                                                                          </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 428                 // Get the list of workspace screens.  We need to append to this list and                </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 429                 // can not use sBgWorkspaceScreens because loadWorkspace() may not have been             </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 430                 // called.                                                                               </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 431                 ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 432                 TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                 </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 433                 for (Integer i : orderedScreens.keySet()) {                                              </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 434                     long screenId = orderedScreens.get(i);                                               </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 435                     workspaceScreens.add(screenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436                 }                                                                                        </span>
<span  style=""> 437                                                                                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 438                 synchronized(sBgLock) {                                                                  </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 439                     Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                  </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 440                     while (iter.hasNext()) {                                                             </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 441                         ItemInfo a = iter.next();                                                        </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 442                         final String name = a.title.toString();                                          </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 443                         final Intent launchIntent = a.getIntent();                                       </span>
<span  style=""> 444                                                                                                          </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 445                         // Short-circuit this logic if the icon exists somewhere on the workspace        </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 446                         if (LauncherModel.shortcutExists(context, name, launchIntent)) {                 </span>
<span class="1114901652794496627" onmouseenter="enter('1114901652794496627');" onmouseout="out('1114901652794496627');" style=""> 447                             // Only InstallShortcutReceiver sends us shortcutInfos, ignore them          </span>
<span class="-8314395278706468200" onmouseenter="enter('-8314395278706468200');" onmouseout="out('-8314395278706468200');" style=""> 448                             if (a instanceof AppInfo &amp;&amp;                                                  </span>
<span class="-4816286524033800367" onmouseenter="enter('-4816286524033800367');" onmouseout="out('-4816286524033800367');" style=""> 449                                     LauncherModel.appWasPromise(context, launchIntent, a.user)) {        </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style=""> 450                                 restoredAppsFinal.add((AppInfo) a);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451                             }                                                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 452                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453                         }                                                                                </span>
<span  style=""> 454                                                                                                          </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 455                         // Add this icon to the db, creating a new page if necessary.  If there          </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 456                         // is only the empty page then we just add items to the first page.              </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 457                         // Otherwise, we add them to the next pages.                                     </span>
<span class="-506120048723665625" onmouseenter="enter('-506120048723665625');" onmouseout="out('-506120048723665625');" style=""> 458                         int startSearchPageIndex = workspaceScreens.isEmpty() ? 0 : 1;                   </span>
<span class="89807873419961601" onmouseenter="enter('89807873419961601');" onmouseout="out('89807873419961601');" style=""> 459                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context,     </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 460                                 name, launchIntent, startSearchPageIndex, workspaceScreens);             </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 461                         if (coords == null) {                                                            </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 462                             LauncherProvider lp = LauncherAppState.getLauncherProvider();                </span>
<span  style=""> 463                                                                                                          </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 464                             // If we can&#x27;t find a valid position, then just add a new screen.            </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 465                             // This takes time so we need to re-queue the add until the new              </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 466                             // page is added.  Create as many screens as necessary to satisfy            </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 467                             // the startSearchPageIndex.                                                 </span>
<span class="8487048175242917271" onmouseenter="enter('8487048175242917271');" onmouseout="out('8487048175242917271');" style=""> 468                             int numPagesToAdd = Math.max(1, startSearchPageIndex + 1 -                   </span>
<span class="-1324774811555943949" onmouseenter="enter('-1324774811555943949');" onmouseout="out('-1324774811555943949');" style=""> 469                                     workspaceScreens.size());                                            </span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 470                             while (numPagesToAdd &gt; 0) {                                                  </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 471                                 long screenId = lp.generateNewScreenId();                                </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 472                                 // Save the screen id for binding in the workspace                       </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 473                                 workspaceScreens.add(screenId);                                          </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 474                                 addedWorkspaceScreensFinal.add(screenId);                                </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 475                                 numPagesToAdd--;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476                             }                                                                            </span>
<span  style=""> 477                                                                                                          </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 478                             // Find the coordinate again                                                 </span>
<span class="-3135847744636951602" onmouseenter="enter('-3135847744636951602');" onmouseout="out('-3135847744636951602');" style=""> 479                             coords = LauncherModel.findNextAvailableIconSpace(context,                   </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 480                                     name, launchIntent, startSearchPageIndex, workspaceScreens);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481                         }                                                                                </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 482                         if (coords == null) {                                                            </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style=""> 483                             throw new RuntimeException(&quot;Coordinates should not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484                         }                                                                                </span>
<span  style=""> 485                                                                                                          </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style=""> 486                         ShortcutInfo shortcutInfo;                                                       </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style=""> 487                         if (a instanceof ShortcutInfo) {                                                 </span>
<span class="-5249556100657982245" onmouseenter="enter('-5249556100657982245');" onmouseout="out('-5249556100657982245');" style=""> 488                             shortcutInfo = (ShortcutInfo) a;                                             </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style=""> 489                         } else if (a instanceof AppInfo) {                                               </span>
<span class="1865505886056520689" onmouseenter="enter('1865505886056520689');" onmouseout="out('1865505886056520689');" style=""> 490                             shortcutInfo = ((AppInfo) a).makeShortcut();                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 491                         } else {                                                                         </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style=""> 492                             throw new RuntimeException(&quot;Unexpected info type&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 493                         }                                                                                </span>
<span  style=""> 494                                                                                                          </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style=""> 495                         // Add the shortcut to the db                                                    </span>
<span class="-7320352620243561318" onmouseenter="enter('-7320352620243561318');" onmouseout="out('-7320352620243561318');" style=""> 496                         addItemToDatabase(context, shortcutInfo,                                         </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style=""> 497                                 LauncherSettings.Favorites.CONTAINER_DESKTOP,                            </span>
<span class="-5434732926326446745" onmouseenter="enter('-5434732926326446745');" onmouseout="out('-5434732926326446745');" style=""> 498                                 coords.first, coords.second[0], coords.second[1], false);                </span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style=""> 499                         // Save the ShortcutInfo for binding in the workspace                            </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style=""> 500                         addedShortcutsFinal.add(shortcutInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502                 }                                                                                        </span>
<span  style=""> 503                                                                                                          </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style=""> 504                 // Update the workspace screens                                                          </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style=""> 505                 updateWorkspaceScreenOrder(context, workspaceScreens);                                   </span>
<span  style=""> 506                                                                                                          </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 507                 if (!addedShortcutsFinal.isEmpty()) {                                                    </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 508                     runOnMainThread(new Runnable() {                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 509                         public void run() {                                                              </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 510                             Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                 </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style=""> 511                             if (callbacks == cb &amp;&amp; cb != null) {                                         </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style=""> 512                                 final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();       </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style=""> 513                                 final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();    </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 514                                 if (!addedShortcutsFinal.isEmpty()) {                                    </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style=""><abbr title=" 515                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);"> 515                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - </abbr></span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style=""> 516                                     long lastScreenId = info.screenId;                                   </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style=""> 517                                     for (ItemInfo i : addedShortcutsFinal) {                             </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style=""> 518                                         if (i.screenId == lastScreenId) {                                </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style=""> 519                                             addAnimated.add(i);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 520                                         } else {                                                         </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style=""> 521                                             addNotAnimated.add(i);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524                                 }                                                                        </span>
<span class="6311741688571123959" onmouseenter="enter('6311741688571123959');" onmouseout="out('6311741688571123959');" style=""> 525                                 callbacks.bindAppsAdded(addedWorkspaceScreensFinal,                      </span>
<span class="6252030951506738248" onmouseenter="enter('6252030951506738248');" onmouseout="out('6252030951506738248');" style=""> 526                                         addNotAnimated, addAnimated, null);                              </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style=""> 527                                 if (!restoredAppsFinal.isEmpty()) {                                      </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style=""> 528                                     callbacks.bindAppsUpdated(restoredAppsFinal);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 532                     });                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 535         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 536         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537     }                                                                                                    </span>
<span  style=""> 538                                                                                                          </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style=""> 539     public void unbindItemInfosAndClearQueuedBindRunnables() {                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 540         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="3234081821162543737" onmouseenter="enter('3234081821162543737');" onmouseout="out('3234081821162543737');" style=""> 541             throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; +     </span>
<span class="-2105866874193436772" onmouseenter="enter('-2105866874193436772');" onmouseout="out('-2105866874193436772');" style=""> 542                     &quot;main thread&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543         }                                                                                                </span>
<span  style=""> 544                                                                                                          </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style=""> 545         // Clear any deferred bind runnables                                                             </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style=""> 546         synchronized (mDeferredBindRunnables) {                                                          </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style=""> 547             mDeferredBindRunnables.clear();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548         }                                                                                                </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style=""> 549         // Remove any queued bind runnables                                                              </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style=""> 550         mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                 </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style=""> 551         // Unbind all the workspace items                                                                </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style=""> 552         unbindWorkspaceItemsOnMainThread();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 553     }                                                                                                    </span>
<span  style=""> 554                                                                                                          </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style=""> 555     /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                        </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style=""> 556     void unbindWorkspaceItemsOnMainThread() {                                                            </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style=""> 557         // Ensure that we don&#x27;t use the same workspace items data structure on the main thread           </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style=""> 558         // by making a copy of workspace items first.                                                    </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style=""> 559         final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style=""> 560         final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                             </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 561         synchronized (sBgLock) {                                                                         </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style=""> 562             tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                 </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style=""> 563             tmpAppWidgets.addAll(sBgAppWidgets);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564         }                                                                                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 565         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 566                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 567                 public void run() {                                                                      </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style=""> 568                    for (ItemInfo item : tmpWorkspaceItems) {                                             </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 569                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570                    }                                                                                     </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style=""> 571                    for (ItemInfo item : tmpAppWidgets) {                                                 </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 572                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 573                    }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 575             };                                                                                           </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style=""> 576         runOnMainThread(r);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577     }                                                                                                    </span>
<span  style=""> 578                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 579     /**                                                                                                  </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style=""> 580      * Adds an item to the DB if it was not created previously, or move it to a new                      </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style=""> 581      * &lt;container, screen, cellX, cellY&gt;                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 582      */                                                                                                  </span>
<span class="-51543303805672089" onmouseenter="enter('-51543303805672089');" onmouseout="out('-51543303805672089');" style=""> 583     static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container,                  </span>
<span class="-5245876562794627197" onmouseenter="enter('-5245876562794627197');" onmouseout="out('-5245876562794627197');" style=""> 584             long screenId, int cellX, int cellY) {                                                       </span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style=""> 585         if (item.container == ItemInfo.NO_ID) {                                                          </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style=""> 586             // From all apps                                                                             </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style=""> 587             addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 588         } else {                                                                                         </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style=""> 589             // From somewhere else                                                                       </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style=""> 590             moveItemInDatabase(context, item, container, screenId, cellX, cellY);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592     }                                                                                                    </span>
<span  style=""> 593                                                                                                          </span>
<span class="4702100753708951937" onmouseenter="enter('4702100753708951937');" onmouseout="out('4702100753708951937');" style=""> 594     static void checkItemInfoLocked(                                                                     </span>
<span class="5364875648309494693" onmouseenter="enter('5364875648309494693');" onmouseout="out('5364875648309494693');" style=""> 595             final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {                    </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 596         ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                  </span>
<span class="2193901808277988725" onmouseenter="enter('2193901808277988725');" onmouseout="out('2193901808277988725');" style=""> 597         if (modelItem != null &amp;&amp; item != modelItem) {                                                    </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style=""> 598             // check all the data is consistent                                                          </span>
<span class="3167281191986023088" onmouseenter="enter('3167281191986023088');" onmouseout="out('3167281191986023088');" style=""> 599             if (modelItem instanceof ShortcutInfo &amp;&amp; item instanceof ShortcutInfo) {                     </span>
<span class="-1653864946297504770" onmouseenter="enter('-1653864946297504770');" onmouseout="out('-1653864946297504770');" style=""> 600                 ShortcutInfo modelShortcut = (ShortcutInfo) modelItem;                                   </span>
<span class="-8536587564734321572" onmouseenter="enter('-8536587564734321572');" onmouseout="out('-8536587564734321572');" style=""> 601                 ShortcutInfo shortcut = (ShortcutInfo) item;                                             </span>
<span class="-7217994585765985559" onmouseenter="enter('-7217994585765985559');" onmouseout="out('-7217994585765985559');" style=""> 602                 if (modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp;                  </span>
<span class="7021740932722535577" onmouseenter="enter('7021740932722535577');" onmouseout="out('7021740932722535577');" style=""> 603                         modelShortcut.intent.filterEquals(shortcut.intent) &amp;&amp;                            </span>
<span class="4925161259592804600" onmouseenter="enter('4925161259592804600');" onmouseout="out('4925161259592804600');" style=""> 604                         modelShortcut.id == shortcut.id &amp;&amp;                                               </span>
<span class="-1606801806764943644" onmouseenter="enter('-1606801806764943644');" onmouseout="out('-1606801806764943644');" style=""> 605                         modelShortcut.itemType == shortcut.itemType &amp;&amp;                                   </span>
<span class="-380653198024077357" onmouseenter="enter('-380653198024077357');" onmouseout="out('-380653198024077357');" style=""> 606                         modelShortcut.container == shortcut.container &amp;&amp;                                 </span>
<span class="2095015237441904975" onmouseenter="enter('2095015237441904975');" onmouseout="out('2095015237441904975');" style=""> 607                         modelShortcut.screenId == shortcut.screenId &amp;&amp;                                   </span>
<span class="8356312788511485655" onmouseenter="enter('8356312788511485655');" onmouseout="out('8356312788511485655');" style=""> 608                         modelShortcut.cellX == shortcut.cellX &amp;&amp;                                         </span>
<span class="-8074804825298555262" onmouseenter="enter('-8074804825298555262');" onmouseout="out('-8074804825298555262');" style=""> 609                         modelShortcut.cellY == shortcut.cellY &amp;&amp;                                         </span>
<span class="-7194734667210277438" onmouseenter="enter('-7194734667210277438');" onmouseout="out('-7194734667210277438');" style=""> 610                         modelShortcut.spanX == shortcut.spanX &amp;&amp;                                         </span>
<span class="-7990526823057792041" onmouseenter="enter('-7990526823057792041');" onmouseout="out('-7990526823057792041');" style=""> 611                         modelShortcut.spanY == shortcut.spanY &amp;&amp;                                         </span>
<span class="1791877648440959041" onmouseenter="enter('1791877648440959041');" onmouseout="out('1791877648440959041');" style=""> 612                         ((modelShortcut.dropPos == null &amp;&amp; shortcut.dropPos == null) ||                  </span>
<span class="-2385997644828375020" onmouseenter="enter('-2385997644828375020');" onmouseout="out('-2385997644828375020');" style=""> 613                         (modelShortcut.dropPos != null &amp;&amp;                                                </span>
<span class="8673154118418480877" onmouseenter="enter('8673154118418480877');" onmouseout="out('8673154118418480877');" style=""> 614                                 shortcut.dropPos != null &amp;&amp;                                              </span>
<span class="1110472284758384589" onmouseenter="enter('1110472284758384589');" onmouseout="out('1110472284758384589');" style=""> 615                                 modelShortcut.dropPos[0] == shortcut.dropPos[0] &amp;&amp;                       </span>
<span class="8614743944867507225" onmouseenter="enter('8614743944867507225');" onmouseout="out('8614743944867507225');" style=""> 616                         modelShortcut.dropPos[1] == shortcut.dropPos[1]))) {                             </span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style=""> 617                     // For all intents and purposes, this is the same object                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 618                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 619                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 620             }                                                                                            </span>
<span  style=""> 621                                                                                                          </span>
<span class="-2302662152798801960" onmouseenter="enter('-2302662152798801960');" onmouseout="out('-2302662152798801960');" style=""> 622             // the modelItem needs to match up perfectly with item if our model is                       </span>
<span class="2528116919227347475" onmouseenter="enter('2528116919227347475');" onmouseout="out('2528116919227347475');" style=""> 623             // to be consistent with the database-- for now, just require                                </span>
<span class="-7120210409264493846" onmouseenter="enter('-7120210409264493846');" onmouseout="out('-7120210409264493846');" style=""> 624             // modelItem == item or the equality check above                                             </span>
<span class="-3667577266304831846" onmouseenter="enter('-3667577266304831846');" onmouseout="out('-3667577266304831846');" style=""> 625             String msg = &quot;item: &quot; + ((item != null) ? item.toString() : &quot;null&quot;) +                        </span>
<span class="-2910805653187511799" onmouseenter="enter('-2910805653187511799');" onmouseout="out('-2910805653187511799');" style=""> 626                     &quot;modelItem: &quot; +                                                                      </span>
<span class="-7298566834322238485" onmouseenter="enter('-7298566834322238485');" onmouseout="out('-7298566834322238485');" style=""> 627                     ((modelItem != null) ? modelItem.toString() : &quot;null&quot;) +                              </span>
<span class="-1970027720063810255" onmouseenter="enter('-1970027720063810255');" onmouseout="out('-1970027720063810255');" style=""> 628                     &quot;Error: ItemInfo passed to checkItemInfo doesn&#x27;t match original&quot;;                    </span>
<span class="889449931745068267" onmouseenter="enter('889449931745068267');" onmouseout="out('889449931745068267');" style=""> 629             RuntimeException e = new RuntimeException(msg);                                              </span>
<span class="746494671138810715" onmouseenter="enter('746494671138810715');" onmouseout="out('746494671138810715');" style=""> 630             if (stackTrace != null) {                                                                    </span>
<span class="6991917147302354492" onmouseenter="enter('6991917147302354492');" onmouseout="out('6991917147302354492');" style=""> 631                 e.setStackTrace(stackTrace);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 632             }                                                                                            </span>
<span class="-2532054300390783036" onmouseenter="enter('-2532054300390783036');" onmouseout="out('-2532054300390783036');" style=""> 633             throw e;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635     }                                                                                                    </span>
<span  style=""> 636                                                                                                          </span>
<span class="8253262720993766341" onmouseenter="enter('8253262720993766341');" onmouseout="out('8253262720993766341');" style=""> 637     static void checkItemInfo(final ItemInfo item) {                                                     </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 638         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 639         final long itemId = item.id;                                                                     </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 640         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 641             public void run() {                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 642                 synchronized (sBgLock) {                                                                 </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 643                     checkItemInfoLocked(itemId, item, stackTrace);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 646         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 647         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648     }                                                                                                    </span>
<span  style=""> 649                                                                                                          </span>
<span class="-7795546628976526290" onmouseenter="enter('-7795546628976526290');" onmouseout="out('-7795546628976526290');" style=""> 650     static void updateItemInDatabaseHelper(Context context, final ContentValues values,                  </span>
<span class="-8227938209854841132" onmouseenter="enter('-8227938209854841132');" onmouseout="out('-8227938209854841132');" style=""> 651             final ItemInfo item, final String callingFunction) {                                         </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 652         final long itemId = item.id;                                                                     </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 653         final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 654         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 655                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 656         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 657         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 658             public void run() {                                                                          </span>
<span class="6508684228899883734" onmouseenter="enter('6508684228899883734');" onmouseout="out('6508684228899883734');" style=""> 659                 cr.update(uri, values, null, null);                                                      </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 660                 updateItemArrays(item, itemId, stackTrace);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 662         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 663         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664     }                                                                                                    </span>
<span  style=""> 665                                                                                                          </span>
<span class="-5268011833856431518" onmouseenter="enter('-5268011833856431518');" onmouseout="out('-5268011833856431518');" style=""> 666     static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList,  </span>
<span class="-6813896065968537303" onmouseenter="enter('-6813896065968537303');" onmouseout="out('-6813896065968537303');" style=""> 667             final ArrayList&lt;ItemInfo&gt; items, final String callingFunction) {                             </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 668         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 669                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 670         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 671         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 672             public void run() {                                                                          </span>
<span class="870344729843570934" onmouseenter="enter('870344729843570934');" onmouseout="out('870344729843570934');" style=""> 673                 ArrayList&lt;ContentProviderOperation&gt; ops =                                                </span>
<span class="9022468941674050374" onmouseenter="enter('9022468941674050374');" onmouseout="out('9022468941674050374');" style=""> 674                         new ArrayList&lt;ContentProviderOperation&gt;();                                       </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 675                 int count = items.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 676                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 677                     ItemInfo item = items.get(i);                                                        </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 678                     final long itemId = item.id;                                                         </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 679                     final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);             </span>
<span class="-8860263448497272048" onmouseenter="enter('-8860263448497272048');" onmouseout="out('-8860263448497272048');" style=""> 680                     ContentValues values = valuesList.get(i);                                            </span>
<span  style=""> 681                                                                                                          </span>
<span class="2997765192602662390" onmouseenter="enter('2997765192602662390');" onmouseout="out('2997765192602662390');" style=""> 682                     ops.add(ContentProviderOperation.newUpdate(uri).withValues(values).build());         </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 683                     updateItemArrays(item, itemId, stackTrace);                                          </span>
<span  style=""> 684                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 685                 }                                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 686                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style=""> 687                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 688                 } catch (Exception e) {                                                                  </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 689                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 692         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 693         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694     }                                                                                                    </span>
<span  style=""> 695                                                                                                          </span>
<span class="2082626234385770383" onmouseenter="enter('2082626234385770383');" onmouseout="out('2082626234385770383');" style=""> 696     static void updateItemArrays(ItemInfo item, long itemId, StackTraceElement[] stackTrace) {           </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 697         // Lock on mBgLock *after* the db operation                                                      </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 698         synchronized (sBgLock) {                                                                         </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 699             checkItemInfoLocked(itemId, item, stackTrace);                                               </span>
<span  style=""> 700                                                                                                          </span>
<span class="5861445851049755510" onmouseenter="enter('5861445851049755510');" onmouseout="out('5861445851049755510');" style=""> 701             if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-7006113140306734361" onmouseenter="enter('-7006113140306734361');" onmouseout="out('-7006113140306734361');" style=""> 702                     item.container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                    </span>
<span class="-6294566488312473300" onmouseenter="enter('-6294566488312473300');" onmouseout="out('-6294566488312473300');" style=""> 703                 // Item is in a folder, make sure this folder exists                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 704                 if (!sBgFolders.containsKey(item.container)) {                                           </span>
<span class="9065703941205621353" onmouseenter="enter('9065703941205621353');" onmouseout="out('9065703941205621353');" style=""> 705                     // An items container is being set to a that of an item which is not in              </span>
<span class="-3172747387014066058" onmouseenter="enter('-3172747387014066058');" onmouseout="out('-3172747387014066058');" style=""> 706                     // the list of Folders.                                                              </span>
<span class="151828163632620756" onmouseenter="enter('151828163632620756');" onmouseout="out('151828163632620756');" style=""> 707                     String msg = &quot;item: &quot; + item + &quot; container being set to: &quot; +                         </span>
<span class="9080161357490611974" onmouseenter="enter('9080161357490611974');" onmouseout="out('9080161357490611974');" style=""> 708                             item.container + &quot;, not in the list of folders&quot;;                             </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 709                     Log.e(TAG, msg);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 711             }                                                                                            </span>
<span  style=""> 712                                                                                                          </span>
<span class="8378072337545652807" onmouseenter="enter('8378072337545652807');" onmouseout="out('8378072337545652807');" style=""> 713             // Items are added/removed from the corresponding FolderInfo elsewhere, such                 </span>
<span class="7844728369218635164" onmouseenter="enter('7844728369218635164');" onmouseout="out('7844728369218635164');" style=""> 714             // as in Workspace.onDrop. Here, we just add/remove them from the list of items              </span>
<span class="4553148780571708557" onmouseenter="enter('4553148780571708557');" onmouseout="out('4553148780571708557');" style=""> 715             // that are on the desktop, as appropriate                                                   </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 716             ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                              </span>
<span class="-8392915416586226921" onmouseenter="enter('-8392915416586226921');" onmouseout="out('-8392915416586226921');" style=""> 717             if (modelItem != null &amp;&amp;                                                                     </span>
<span class="3168075572498915363" onmouseenter="enter('3168075572498915363');" onmouseout="out('3168075572498915363');" style=""> 718                     (modelItem.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||              </span>
<span class="-2354507674725904195" onmouseenter="enter('-2354507674725904195');" onmouseout="out('-2354507674725904195');" style=""> 719                      modelItem.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {             </span>
<span class="-8474980351342559163" onmouseenter="enter('-8474980351342559163');" onmouseout="out('-8474980351342559163');" style=""> 720                 switch (modelItem.itemType) {                                                            </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 721                     case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                               </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 722                     case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                  </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 723                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="-2945309969071223861" onmouseenter="enter('-2945309969071223861');" onmouseout="out('-2945309969071223861');" style=""> 724                         if (!sBgWorkspaceItems.contains(modelItem)) {                                    </span>
<span class="-5660475538824179031" onmouseenter="enter('-5660475538824179031');" onmouseout="out('-5660475538824179031');" style=""> 725                             sBgWorkspaceItems.add(modelItem);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726                         }                                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 727                         break;                                                                           </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 728                     default:                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 729                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 730                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 731             } else {                                                                                     </span>
<span class="-7939766627444392355" onmouseenter="enter('-7939766627444392355');" onmouseout="out('-7939766627444392355');" style=""> 732                 sBgWorkspaceItems.remove(modelItem);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 734         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 735     }                                                                                                    </span>
<span  style=""> 736                                                                                                          </span>
<span class="-4020360329970845372" onmouseenter="enter('-4020360329970845372');" onmouseout="out('-4020360329970845372');" style=""> 737     public void flushWorkerThread() {                                                                    </span>
<span class="2458440832416538563" onmouseenter="enter('2458440832416538563');" onmouseout="out('2458440832416538563');" style=""> 738         mFlushingWorkerThread = true;                                                                    </span>
<span class="2941590529192344100" onmouseenter="enter('2941590529192344100');" onmouseout="out('2941590529192344100');" style=""> 739         Runnable waiter = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 740                 public void run() {                                                                      </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 741                     synchronized (this) {                                                                </span>
<span class="-1428047894310886643" onmouseenter="enter('-1428047894310886643');" onmouseout="out('-1428047894310886643');" style=""> 742                         notifyAll();                                                                     </span>
<span class="3926508156885202999" onmouseenter="enter('3926508156885202999');" onmouseout="out('3926508156885202999');" style=""> 743                         mFlushingWorkerThread = false;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 746             };                                                                                           </span>
<span  style=""> 747                                                                                                          </span>
<span class="-7483564469787643608" onmouseenter="enter('-7483564469787643608');" onmouseout="out('-7483564469787643608');" style=""> 748         synchronized(waiter) {                                                                           </span>
<span class="-8072658497280753067" onmouseenter="enter('-8072658497280753067');" onmouseout="out('-8072658497280753067');" style=""> 749             runOnWorkerThread(waiter);                                                                   </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style=""> 750             if (mLoaderTask != null) {                                                                   </span>
<span class="-756902833484627430" onmouseenter="enter('-756902833484627430');" onmouseout="out('-756902833484627430');" style=""> 751                 synchronized(mLoaderTask) {                                                              </span>
<span class="58891182273081261" onmouseenter="enter('58891182273081261');" onmouseout="out('58891182273081261');" style=""> 752                     mLoaderTask.notify();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 754             }                                                                                            </span>
<span class="4859668596787406566" onmouseenter="enter('4859668596787406566');" onmouseout="out('4859668596787406566');" style=""> 755             boolean success = false;                                                                     </span>
<span class="7536073198725464588" onmouseenter="enter('7536073198725464588');" onmouseout="out('7536073198725464588');" style=""> 756             while (!success) {                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 757                 try {                                                                                    </span>
<span class="8661527805225995774" onmouseenter="enter('8661527805225995774');" onmouseout="out('8661527805225995774');" style=""> 758                     waiter.wait();                                                                       </span>
<span class="-5965625035307022309" onmouseenter="enter('-5965625035307022309');" onmouseout="out('-5965625035307022309');" style=""> 759                     success = true;                                                                      </span>
<span class="-7528533024404460182" onmouseenter="enter('-7528533024404460182');" onmouseout="out('-7528533024404460182');" style=""> 760                 } catch (InterruptedException e) {                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764     }                                                                                                    </span>
<span  style=""> 765                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 766     /**                                                                                                  </span>
<span class="6993284491606696239" onmouseenter="enter('6993284491606696239');" onmouseout="out('6993284491606696239');" style=""> 767      * Move an item in the DB to a new &lt;container, screen, cellX, cellY&gt;                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 768      */                                                                                                  </span>
<span class="4065343735615789149" onmouseenter="enter('4065343735615789149');" onmouseout="out('4065343735615789149');" style=""> 769     static void moveItemInDatabase(Context context, final ItemInfo item, final long container,           </span>
<span class="-6409391853534757752" onmouseenter="enter('-6409391853534757752');" onmouseout="out('-6409391853534757752');" style=""> 770             final long screenId, final int cellX, final int cellY) {                                     </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 771         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 772         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 773         item.cellY = cellY;                                                                              </span>
<span  style=""> 774                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 775         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 776         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 777         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 778                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 779             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 780         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 781             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782         }                                                                                                </span>
<span  style=""> 783                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 784         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 785         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 786         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 787         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 788         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style=""> 789                                                                                                          </span>
<span class="-198415815572970699" onmouseenter="enter('-198415815572970699');" onmouseout="out('-198415815572970699');" style=""> 790         updateItemInDatabaseHelper(context, values, item, &quot;moveItemInDatabase&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 791     }                                                                                                    </span>
<span  style=""> 792                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 793     /**                                                                                                  </span>
<span class="-2318253408843035081" onmouseenter="enter('-2318253408843035081');" onmouseout="out('-2318253408843035081');" style=""> 794      * Move items in the DB to a new &lt;container, screen, cellX, cellY&gt;. We assume that the               </span>
<span class="9095568381627098065" onmouseenter="enter('9095568381627098065');" onmouseout="out('9095568381627098065');" style=""> 795      * cellX, cellY have already been updated on the ItemInfos.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 796      */                                                                                                  </span>
<span class="2993462226149949147" onmouseenter="enter('2993462226149949147');" onmouseout="out('2993462226149949147');" style=""> 797     static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items,                    </span>
<span class="4351605778470855925" onmouseenter="enter('4351605778470855925');" onmouseout="out('4351605778470855925');" style=""> 798             final long container, final int screen) {                                                    </span>
<span  style=""> 799                                                                                                          </span>
<span class="3335073963685886452" onmouseenter="enter('3335073963685886452');" onmouseout="out('3335073963685886452');" style=""> 800         ArrayList&lt;ContentValues&gt; contentValues = new ArrayList&lt;ContentValues&gt;();                         </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 801         int count = items.size();                                                                        </span>
<span  style=""> 802                                                                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 803         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 804             ItemInfo item = items.get(i);                                                                </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 805             item.container = container;                                                                  </span>
<span  style=""> 806                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 807             // We store hotseat items in canonical form which is this orientation invariant position     </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 808             // in the hotseat                                                                            </span>
<span class="6331311558654873539" onmouseenter="enter('6331311558654873539');" onmouseout="out('6331311558654873539');" style=""> 809             if (context instanceof Launcher &amp;&amp; screen &lt; 0 &amp;&amp;                                             </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 810                     container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                         </span>
<span class="-3476894176903330001" onmouseenter="enter('-3476894176903330001');" onmouseout="out('-3476894176903330001');" style=""> 811                 item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(item.cellX,          </span>
<span class="8891673712343428946" onmouseenter="enter('8891673712343428946');" onmouseout="out('8891673712343428946');" style=""> 812                         item.cellY);                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 813             } else {                                                                                     </span>
<span class="-4307617232085975705" onmouseenter="enter('-4307617232085975705');" onmouseout="out('-4307617232085975705');" style=""> 814                 item.screenId = screen;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815             }                                                                                            </span>
<span  style=""> 816                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 817             final ContentValues values = new ContentValues();                                            </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 818             values.put(LauncherSettings.Favorites.CONTAINER, item.container);                            </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 819             values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                    </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 820             values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                    </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 821             values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                </span>
<span  style=""> 822                                                                                                          </span>
<span class="2833686190506555422" onmouseenter="enter('2833686190506555422');" onmouseout="out('2833686190506555422');" style=""> 823             contentValues.add(values);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824         }                                                                                                </span>
<span class="-3017110074752693492" onmouseenter="enter('-3017110074752693492');" onmouseout="out('-3017110074752693492');" style=""> 825         updateItemsInDatabaseHelper(context, contentValues, items, &quot;moveItemInDatabase&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 826     }                                                                                                    </span>
<span  style=""> 827                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 828     /**                                                                                                  </span>
<span class="5893714151144352360" onmouseenter="enter('5893714151144352360');" onmouseout="out('5893714151144352360');" style=""> 829      * Move and/or resize item in the DB to a new &lt;container, screen, cellX, cellY, spanX, spanY&gt;        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 830      */                                                                                                  </span>
<span class="2794810618835410616" onmouseenter="enter('2794810618835410616');" onmouseout="out('2794810618835410616');" style=""> 831     static void modifyItemInDatabase(Context context, final ItemInfo item, final long container,         </span>
<span class="5104971199972279845" onmouseenter="enter('5104971199972279845');" onmouseout="out('5104971199972279845');" style=""> 832             final long screenId, final int cellX, final int cellY, final int spanX, final int spanY) {   </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 833         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 834         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 835         item.cellY = cellY;                                                                              </span>
<span class="-7444681703441257019" onmouseenter="enter('-7444681703441257019');" onmouseout="out('-7444681703441257019');" style=""> 836         item.spanX = spanX;                                                                              </span>
<span class="1797194204222415457" onmouseenter="enter('1797194204222415457');" onmouseout="out('1797194204222415457');" style=""> 837         item.spanY = spanY;                                                                              </span>
<span  style=""> 838                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 839         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 840         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 841         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 842                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 843             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 844         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 845             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846         }                                                                                                </span>
<span  style=""> 847                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 848         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 849         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 850         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 851         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="-1263713769577317048" onmouseenter="enter('-1263713769577317048');" onmouseout="out('-1263713769577317048');" style=""> 852         values.put(LauncherSettings.Favorites.SPANX, item.spanX);                                        </span>
<span class="847673422027095164" onmouseenter="enter('847673422027095164');" onmouseout="out('847673422027095164');" style=""> 853         values.put(LauncherSettings.Favorites.SPANY, item.spanY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 854         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style=""> 855                                                                                                          </span>
<span class="5688211233374147409" onmouseenter="enter('5688211233374147409');" onmouseout="out('5688211233374147409');" style=""> 856         updateItemInDatabaseHelper(context, values, item, &quot;modifyItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857     }                                                                                                    </span>
<span  style=""> 858                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 859     /**                                                                                                  </span>
<span class="3263486289839218660" onmouseenter="enter('3263486289839218660');" onmouseout="out('3263486289839218660');" style=""> 860      * Update an item to the database in a specified container.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 861      */                                                                                                  </span>
<span class="459681340980680258" onmouseenter="enter('459681340980680258');" onmouseout="out('459681340980680258');" style=""> 862     static void updateItemInDatabase(Context context, final ItemInfo item) {                             </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 863         final ContentValues values = new ContentValues();                                                </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style=""> 864         item.onAddToDatabase(context, values);                                                           </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 865         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span class="-2640379359931023102" onmouseenter="enter('-2640379359931023102');" onmouseout="out('-2640379359931023102');" style=""> 866         updateItemInDatabaseHelper(context, values, item, &quot;updateItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 867     }                                                                                                    </span>
<span  style=""> 868                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 869     /**                                                                                                  </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style=""> 870      * Returns true if the shortcuts already exists in the database.                                     </span>
<span class="-3331700288971341517" onmouseenter="enter('-3331700288971341517');" onmouseout="out('-3331700288971341517');" style=""> 871      * we identify a shortcut by its title and intent.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 872      */                                                                                                  </span>
<span class="-6388905982866518653" onmouseenter="enter('-6388905982866518653');" onmouseout="out('-6388905982866518653');" style=""> 873     static boolean shortcutExists(Context context, String title, Intent intent) {                        </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 874         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-4175900686448469518" onmouseenter="enter('-4175900686448469518');" onmouseout="out('-4175900686448469518');" style=""> 875         final Intent intentWithPkg, intentWithoutPkg;                                                    </span>
<span  style=""> 876                                                                                                          </span>
<span class="-1192314096420314309" onmouseenter="enter('-1192314096420314309');" onmouseout="out('-1192314096420314309');" style=""> 877         if (intent.getComponent() != null) {                                                             </span>
<span class="5013412415263932655" onmouseenter="enter('5013412415263932655');" onmouseout="out('5013412415263932655');" style=""> 878             // If component is not null, an intent with null package will produce                        </span>
<span class="-2056261929714512728" onmouseenter="enter('-2056261929714512728');" onmouseout="out('-2056261929714512728');" style=""> 879             // the same result and should also be a match.                                               </span>
<span class="8293829844581049791" onmouseenter="enter('8293829844581049791');" onmouseout="out('8293829844581049791');" style=""> 880             if (intent.getPackage() != null) {                                                           </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style=""> 881                 intentWithPkg = intent;                                                                  </span>
<span class="302721143002808724" onmouseenter="enter('302721143002808724');" onmouseout="out('302721143002808724');" style=""> 882                 intentWithoutPkg = new Intent(intent).setPackage(null);                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 883             } else {                                                                                     </span>
<span class="411509146924686636" onmouseenter="enter('411509146924686636');" onmouseout="out('411509146924686636');" style=""> 884                 intentWithPkg = new Intent(intent).setPackage(                                           </span>
<span class="-8194702512537292868" onmouseenter="enter('-8194702512537292868');" onmouseout="out('-8194702512537292868');" style=""> 885                         intent.getComponent().getPackageName());                                         </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style=""> 886                 intentWithoutPkg = intent;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 888         } else {                                                                                         </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style=""> 889             intentWithPkg = intent;                                                                      </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style=""> 890             intentWithoutPkg = intent;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891         }                                                                                                </span>
<span class="2591581294492270218" onmouseenter="enter('2591581294492270218');" onmouseout="out('2591581294492270218');" style=""> 892         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI,                                      </span>
<span class="-6373969991306358457" onmouseenter="enter('-6373969991306358457');" onmouseout="out('-6373969991306358457');" style=""> 893             new String[] { &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and (intent=? or intent=?)&quot;,                    </span>
<span class="-338282616399686930" onmouseenter="enter('-338282616399686930');" onmouseout="out('-338282616399686930');" style=""> 894             new String[] { title, intentWithPkg.toUri(0), intentWithoutPkg.toUri(0) }, null);            </span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style=""> 895         boolean result = false;                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 896         try {                                                                                            </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style=""> 897             result = c.moveToFirst();                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 898         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 899             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900         }                                                                                                </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 901         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902     }                                                                                                    </span>
<span  style=""> 903                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 904     /**                                                                                                  </span>
<span class="2522962036775885267" onmouseenter="enter('2522962036775885267');" onmouseout="out('2522962036775885267');" style=""> 905      * Returns true if the promise shortcuts with the same package name exists on the workspace.         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 906      */                                                                                                  </span>
<span class="-6588164927851751704" onmouseenter="enter('-6588164927851751704');" onmouseout="out('-6588164927851751704');" style=""> 907     static boolean appWasPromise(Context context, Intent intent, UserHandleCompat user) {                </span>
<span class="-3491314044087926833" onmouseenter="enter('-3491314044087926833');" onmouseout="out('-3491314044087926833');" style=""> 908         final ComponentName component = intent.getComponent();                                           </span>
<span class="-8432366264448055826" onmouseenter="enter('-8432366264448055826');" onmouseout="out('-8432366264448055826');" style=""> 909         if (component == null) {                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 910             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 911         }                                                                                                </span>
<span class="-5254167698548486612" onmouseenter="enter('-5254167698548486612');" onmouseout="out('-5254167698548486612');" style=""> 912         return !getItemsByPackageName(component.getPackageName(), user).isEmpty();                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 913     }                                                                                                    </span>
<span  style=""> 914                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 915     /**                                                                                                  </span>
<span class="9160518604603288134" onmouseenter="enter('9160518604603288134');" onmouseout="out('9160518604603288134');" style=""> 916      * Returns an ItemInfo array containing all the items in the LauncherModel.                          </span>
<span class="-7541433293033039987" onmouseenter="enter('-7541433293033039987');" onmouseout="out('-7541433293033039987');" style=""> 917      * The ItemInfo.id is not set through this function.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 918      */                                                                                                  </span>
<span class="2306578838706816090" onmouseenter="enter('2306578838706816090');" onmouseout="out('2306578838706816090');" style=""> 919     static ArrayList&lt;ItemInfo&gt; getItemsInLocalCoordinates(Context context) {                             </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style=""> 920         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 921         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="7862348045873845742" onmouseenter="enter('7862348045873845742');" onmouseout="out('7862348045873845742');" style=""> 922         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[] {                       </span>
<span class="-9030044796723696333" onmouseenter="enter('-9030044796723696333');" onmouseout="out('-9030044796723696333');" style=""> 923                 LauncherSettings.Favorites.ITEM_TYPE, LauncherSettings.Favorites.CONTAINER,              </span>
<span class="-5597662442381403391" onmouseenter="enter('-5597662442381403391');" onmouseout="out('-5597662442381403391');" style=""> 924                 LauncherSettings.Favorites.SCREEN,                                                       </span>
<span class="-2919624041508816442" onmouseenter="enter('-2919624041508816442');" onmouseout="out('-2919624041508816442');" style=""> 925                 LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY,                      </span>
<span class="-6977762317278061139" onmouseenter="enter('-6977762317278061139');" onmouseout="out('-6977762317278061139');" style=""> 926                 LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY,                      </span>
<span class="-7245839497619612656" onmouseenter="enter('-7245839497619612656');" onmouseout="out('-7245839497619612656');" style=""> 927                 LauncherSettings.Favorites.PROFILE_ID }, null, null, null);                              </span>
<span  style=""> 928                                                                                                          </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 929         final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);         </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 930         final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);        </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 931         final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);              </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 932         final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 933         final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style=""> 934         final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);                </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style=""> 935         final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);                </span>
<span class="-7743472832601810579" onmouseenter="enter('-7743472832601810579');" onmouseout="out('-7743472832601810579');" style=""> 936         final int profileIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.PROFILE_ID);       </span>
<span class="4378196374401845990" onmouseenter="enter('4378196374401845990');" onmouseout="out('4378196374401845990');" style=""> 937         UserManagerCompat userManager = UserManagerCompat.getInstance(context);                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 938         try {                                                                                            </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 939             while (c.moveToNext()) {                                                                     </span>
<span class="-4116264954015845780" onmouseenter="enter('-4116264954015845780');" onmouseout="out('-4116264954015845780');" style=""> 940                 ItemInfo item = new ItemInfo();                                                          </span>
<span class="3361172632220058931" onmouseenter="enter('3361172632220058931');" onmouseout="out('3361172632220058931');" style=""> 941                 item.cellX = c.getInt(cellXIndex);                                                       </span>
<span class="-3320299110004327663" onmouseenter="enter('-3320299110004327663');" onmouseout="out('-3320299110004327663');" style=""> 942                 item.cellY = c.getInt(cellYIndex);                                                       </span>
<span class="-3998513073647472943" onmouseenter="enter('-3998513073647472943');" onmouseout="out('-3998513073647472943');" style=""> 943                 item.spanX = Math.max(1, c.getInt(spanXIndex));                                          </span>
<span class="584206030510259358" onmouseenter="enter('584206030510259358');" onmouseout="out('584206030510259358');" style=""> 944                 item.spanY = Math.max(1, c.getInt(spanYIndex));                                          </span>
<span class="7755197868117966754" onmouseenter="enter('7755197868117966754');" onmouseout="out('7755197868117966754');" style=""> 945                 item.container = c.getInt(containerIndex);                                               </span>
<span class="2520990540941204818" onmouseenter="enter('2520990540941204818');" onmouseout="out('2520990540941204818');" style=""> 946                 item.itemType = c.getInt(itemTypeIndex);                                                 </span>
<span class="-2693827439071435274" onmouseenter="enter('-2693827439071435274');" onmouseout="out('-2693827439071435274');" style=""> 947                 item.screenId = c.getInt(screenIndex);                                                   </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style=""> 948                 long serialNumber = c.getInt(profileIdIndex);                                            </span>
<span class="8590899978146640866" onmouseenter="enter('8590899978146640866');" onmouseout="out('8590899978146640866');" style=""> 949                 item.user = userManager.getUserForSerialNumber(serialNumber);                            </span>
<span class="-2267817568611630151" onmouseenter="enter('-2267817568611630151');" onmouseout="out('-2267817568611630151');" style=""> 950                 // Skip if user has been deleted.                                                        </span>
<span class="-8057177251913525905" onmouseenter="enter('-8057177251913525905');" onmouseout="out('-8057177251913525905');" style=""> 951                 if (item.user != null) {                                                                 </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style=""> 952                     items.add(item);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 954             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 955         } catch (Exception e) {                                                                          </span>
<span class="4333495016815960454" onmouseenter="enter('4333495016815960454');" onmouseout="out('4333495016815960454');" style=""> 956             items.clear();                                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 957         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 958             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 959         }                                                                                                </span>
<span  style=""> 960                                                                                                          </span>
<span class="4279419839789234429" onmouseenter="enter('4279419839789234429');" onmouseout="out('4279419839789234429');" style=""> 961         return items;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 962     }                                                                                                    </span>
<span  style=""> 963                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 964     /**                                                                                                  </span>
<span class="-8400747742808132543" onmouseenter="enter('-8400747742808132543');" onmouseout="out('-8400747742808132543');" style=""> 965      * Find a folder in the db, creating the FolderInfo if necessary, and adding it to folderList.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 966      */                                                                                                  </span>
<span class="5907754851540050864" onmouseenter="enter('5907754851540050864');" onmouseout="out('5907754851540050864');" style=""> 967     FolderInfo getFolderById(Context context, HashMap&lt;Long,FolderInfo&gt; folderList, long id) {            </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 968         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-4509017961772931337" onmouseenter="enter('-4509017961772931337');" onmouseout="out('-4509017961772931337');" style=""> 969         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null,                                </span>
<span class="-4259949945589236527" onmouseenter="enter('-4259949945589236527');" onmouseout="out('-4259949945589236527');" style=""> 970                 &quot;_id=? and (itemType=? or itemType=?)&quot;,                                                  </span>
<span class="6839251627547830421" onmouseenter="enter('6839251627547830421');" onmouseout="out('6839251627547830421');" style=""> 971                 new String[] { String.valueOf(id),                                                       </span>
<span class="-7910525153585982304" onmouseenter="enter('-7910525153585982304');" onmouseout="out('-7910525153585982304');" style=""> 972                         String.valueOf(LauncherSettings.Favorites.ITEM_TYPE_FOLDER)}, null);             </span>
<span  style=""> 973                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 974         try {                                                                                            </span>
<span class="-6302304746326789409" onmouseenter="enter('-6302304746326789409');" onmouseout="out('-6302304746326789409');" style=""> 975             if (c.moveToFirst()) {                                                                       </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 976                 final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE); </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style=""> 977                 final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);        </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 978                 final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);</span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 979                 final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);      </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 980                 final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);        </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 981                 final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);        </span>
<span  style=""> 982                                                                                                          </span>
<span class="7004752326616919357" onmouseenter="enter('7004752326616919357');" onmouseout="out('7004752326616919357');" style=""> 983                 FolderInfo folderInfo = null;                                                            </span>
<span class="2938602155061951308" onmouseenter="enter('2938602155061951308');" onmouseout="out('2938602155061951308');" style=""> 984                 switch (c.getInt(itemTypeIndex)) {                                                       </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 985                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="8497686210844969517" onmouseenter="enter('8497686210844969517');" onmouseout="out('8497686210844969517');" style=""> 986                         folderInfo = findOrMakeFolder(folderList, id);                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 987                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 988                 }                                                                                        </span>
<span  style=""> 989                                                                                                          </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style=""> 990                 folderInfo.title = c.getString(titleIndex);                                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style=""> 991                 folderInfo.id = id;                                                                      </span>
<span class="-3770649288661071555" onmouseenter="enter('-3770649288661071555');" onmouseout="out('-3770649288661071555');" style=""> 992                 folderInfo.container = c.getInt(containerIndex);                                         </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style=""> 993                 folderInfo.screenId = c.getInt(screenIndex);                                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style=""> 994                 folderInfo.cellX = c.getInt(cellXIndex);                                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style=""> 995                 folderInfo.cellY = c.getInt(cellYIndex);                                                 </span>
<span  style=""> 996                                                                                                          </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style=""> 997                 return folderInfo;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 998             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 999         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1000             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1001         }                                                                                                </span>
<span  style="">1002                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1003         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1004     }                                                                                                    </span>
<span  style="">1005                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1006     /**                                                                                                  </span>
<span class="-4485876183654335246" onmouseenter="enter('-4485876183654335246');" onmouseout="out('-4485876183654335246');" style="">1007      * Add an item to the database in a specified container. Sets the container, screen, cellX and       </span>
<span class="5014383815638293688" onmouseenter="enter('5014383815638293688');" onmouseout="out('5014383815638293688');" style="">1008      * cellY fields of the item. Also assigns an ID to the item.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1009      */                                                                                                  </span>
<span class="7688823130205554121" onmouseenter="enter('7688823130205554121');" onmouseout="out('7688823130205554121');" style="">1010     static void addItemToDatabase(Context context, final ItemInfo item, final long container,            </span>
<span class="-5047869274291255898" onmouseenter="enter('-5047869274291255898');" onmouseout="out('-5047869274291255898');" style="">1011             final long screenId, final int cellX, final int cellY, final boolean notify) {               </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style="">1012         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style="">1013         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style="">1014         item.cellY = cellY;                                                                              </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style="">1015         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style="">1016         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style="">1017         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style="">1018                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style="">1019             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1020         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style="">1021             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1022         }                                                                                                </span>
<span  style="">1023                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1024         final ContentValues values = new ContentValues();                                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1025         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style="">1026         item.onAddToDatabase(context, values);                                                           </span>
<span  style="">1027                                                                                                          </span>
<span class="-1899316649519192705" onmouseenter="enter('-1899316649519192705');" onmouseout="out('-1899316649519192705');" style="">1028         item.id = LauncherAppState.getLauncherProvider().generateNewItemId();                            </span>
<span class="-154850703316330893" onmouseenter="enter('-154850703316330893');" onmouseout="out('-154850703316330893');" style="">1029         values.put(LauncherSettings.Favorites._ID, item.id);                                             </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style="">1030         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span  style="">1031                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style="">1032         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1033         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1034             public void run() {                                                                          </span>
<span class="-9004016634042314269" onmouseenter="enter('-9004016634042314269');" onmouseout="out('-9004016634042314269');" style="">1035                 cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI :                              </span>
<span class="-612779074530505821" onmouseenter="enter('-612779074530505821');" onmouseout="out('-612779074530505821');" style="">1036                         LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values);                 </span>
<span  style="">1037                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1038                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1039                 synchronized (sBgLock) {                                                                 </span>
<span class="-4593486021211754382" onmouseenter="enter('-4593486021211754382');" onmouseout="out('-4593486021211754382');" style="">1040                     checkItemInfoLocked(item.id, item, stackTrace);                                      </span>
<span class="-1016681302040734126" onmouseenter="enter('-1016681302040734126');" onmouseout="out('-1016681302040734126');" style="">1041                     sBgItemsIdMap.put(item.id, item);                                                    </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1042                     switch (item.itemType) {                                                             </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1043                         case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                </span>
<span class="7914552456706159325" onmouseenter="enter('7914552456706159325');" onmouseout="out('7914552456706159325');" style="">1044                             sBgFolders.put(item.id, (FolderInfo) item);                                  </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="">1045                             // Fall through                                                              </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1046                         case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                           </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1047                         case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                              </span>
<span class="-1329080713393586591" onmouseenter="enter('-1329080713393586591');" onmouseout="out('-1329080713393586591');" style="">1048                             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||        </span>
<span class="-8703099407725800834" onmouseenter="enter('-8703099407725800834');" onmouseout="out('-8703099407725800834');" style="">1049                                     item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {    </span>
<span class="-8146326631995897363" onmouseenter="enter('-8146326631995897363');" onmouseout="out('-8146326631995897363');" style="">1050                                 sBgWorkspaceItems.add(item);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1051                             } else {                                                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style="">1052                                 if (!sBgFolders.containsKey(item.container)) {                           </span>
<span class="-54073947043614801" onmouseenter="enter('-54073947043614801');" onmouseout="out('-54073947043614801');" style="">1053                                     // Adding an item to a folder that doesn&#x27;t exist.                    </span>
<span class="-8178862485732913035" onmouseenter="enter('-8178862485732913035');" onmouseout="out('-8178862485732913035');" style="">1054                                     String msg = &quot;adding item: &quot; + item + &quot; to a folder that &quot; +         </span>
<span class="8069959129571777545" onmouseenter="enter('8069959129571777545');" onmouseout="out('8069959129571777545');" style="">1055                                             &quot; doesn&#x27;t exist&quot;;                                            </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1056                                     Log.e(TAG, msg);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1057                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1058                             }                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1059                             break;                                                                       </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1060                         case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                             </span>
<span class="-7161913213134623334" onmouseenter="enter('-7161913213134623334');" onmouseout="out('-7161913213134623334');" style="">1061                             sBgAppWidgets.add((LauncherAppWidgetInfo) item);                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1062                             break;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1065             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1066         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1067         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1068     }                                                                                                    </span>
<span  style="">1069                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1070     /**                                                                                                  </span>
<span class="7476806510728309142" onmouseenter="enter('7476806510728309142');" onmouseout="out('7476806510728309142');" style="">1071      * Creates a new unique child id, for a given cell span across all layouts.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1072      */                                                                                                  </span>
<span class="6041396781761029986" onmouseenter="enter('6041396781761029986');" onmouseout="out('6041396781761029986');" style="">1073     static int getCellLayoutChildId(                                                                     </span>
<span class="-7149445532835734900" onmouseenter="enter('-7149445532835734900');" onmouseout="out('-7149445532835734900');" style="">1074             long container, long screen, int localCellX, int localCellY, int spanX, int spanY) {         </span>
<span class="513362613558309253" onmouseenter="enter('513362613558309253');" onmouseout="out('513362613558309253');" style="">1075         return (((int) container &amp; 0xFF) &lt;&lt; 24)                                                          </span>
<span class="-7388843269158644047" onmouseenter="enter('-7388843269158644047');" onmouseout="out('-7388843269158644047');" style="">1076                 | ((int) screen &amp; 0xFF) &lt;&lt; 16 | (localCellX &amp; 0xFF) &lt;&lt; 8 | (localCellY &amp; 0xFF);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1077     }                                                                                                    </span>
<span  style="">1078                                                                                                          </span>
<span class="-2977858468662335030" onmouseenter="enter('-2977858468662335030');" onmouseout="out('-2977858468662335030');" style="">1079     private static ArrayList&lt;ItemInfo&gt; getItemsByPackageName(                                            </span>
<span class="-4648411385517347510" onmouseenter="enter('-4648411385517347510');" onmouseout="out('-4648411385517347510');" style="">1080             final String pn, final UserHandleCompat user) {                                              </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">1081         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1082             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">1083             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="-3698999064980760147" onmouseenter="enter('-3698999064980760147');" onmouseout="out('-3698999064980760147');" style="">1084                 return cn.getPackageName().equals(pn) &amp;&amp; info.user.equals(user);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1085             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1086         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">1087         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088     }                                                                                                    </span>
<span  style="">1089                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1090     /**                                                                                                  </span>
<span class="2342361889363691922" onmouseenter="enter('2342361889363691922');" onmouseout="out('2342361889363691922');" style="">1091      * Removes all the items from the database corresponding to the specified package.                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1092      */                                                                                                  </span>
<span class="-4223841609537991203" onmouseenter="enter('-4223841609537991203');" onmouseout="out('-4223841609537991203');" style="">1093     static void deletePackageFromDatabase(Context context, final String pn,                              </span>
<span class="-8990624712004338264" onmouseenter="enter('-8990624712004338264');" onmouseout="out('-8990624712004338264');" style="">1094             final UserHandleCompat user) {                                                               </span>
<span class="-3124051924336649718" onmouseenter="enter('-3124051924336649718');" onmouseout="out('-3124051924336649718');" style="">1095         deleteItemsFromDatabase(context, getItemsByPackageName(pn, user));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1096     }                                                                                                    </span>
<span  style="">1097                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1098     /**                                                                                                  </span>
<span class="-1037279788887787658" onmouseenter="enter('-1037279788887787658');" onmouseout="out('-1037279788887787658');" style="">1099      * Removes the specified item from the database                                                      </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1100      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1101      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1102      */                                                                                                  </span>
<span class="6689175154077652032" onmouseenter="enter('6689175154077652032');" onmouseout="out('6689175154077652032');" style="">1103     static void deleteItemFromDatabase(Context context, final ItemInfo item) {                           </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style="">1104         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="">1105         items.add(item);                                                                                 </span>
<span class="-1343420386438024026" onmouseenter="enter('-1343420386438024026');" onmouseout="out('-1343420386438024026');" style="">1106         deleteItemsFromDatabase(context, items);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107     }                                                                                                    </span>
<span  style="">1108                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1109     /**                                                                                                  </span>
<span class="6785840277050217586" onmouseenter="enter('6785840277050217586');" onmouseout="out('6785840277050217586');" style="">1110      * Removes the specified items from the database                                                     </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1111      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1112      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1113      */                                                                                                  </span>
<span class="8840034600723804424" onmouseenter="enter('8840034600723804424');" onmouseout="out('8840034600723804424');" style="">1114     static void deleteItemsFromDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items) {              </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1115         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style="">1116                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1117         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1118             public void run() {                                                                          </span>
<span class="6119320427209693879" onmouseenter="enter('6119320427209693879');" onmouseout="out('6119320427209693879');" style="">1119                 for (ItemInfo item : items) {                                                            </span>
<span class="-8969008621964178653" onmouseenter="enter('-8969008621964178653');" onmouseout="out('-8969008621964178653');" style="">1120                     final Uri uri = LauncherSettings.Favorites.getContentUri(item.id, false);            </span>
<span class="-3994993193884804986" onmouseenter="enter('-3994993193884804986');" onmouseout="out('-3994993193884804986');" style="">1121                     cr.delete(uri, null, null);                                                          </span>
<span  style="">1122                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1123                     // Lock on mBgLock *after* the db operation                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1124                     synchronized (sBgLock) {                                                             </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1125                         switch (item.itemType) {                                                         </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1126                             case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                            </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="">1127                                 sBgFolders.remove(item.id);                                              </span>
<span class="-7253547809349647013" onmouseenter="enter('-7253547809349647013');" onmouseout="out('-7253547809349647013');" style="">1128                                 for (ItemInfo info: sBgItemsIdMap.values()) {                            </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="">1129                                     if (info.container == item.id) {                                     </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="">1130                                         // We are deleting a folder which still contains items that      </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="">1131                                         // think they are contained by that folder.                      </span>
<span class="-2989844263372177086" onmouseenter="enter('-2989844263372177086');" onmouseout="out('-2989844263372177086');" style="">1132                                         String msg = &quot;deleting a folder (&quot; + item + &quot;) which still &quot; +   </span>
<span class="-6063695738801794388" onmouseenter="enter('-6063695738801794388');" onmouseout="out('-6063695738801794388');" style="">1133                                                 &quot;contains items (&quot; + info + &quot;)&quot;;                         </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1134                                         Log.e(TAG, msg);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1135                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136                                 }                                                                        </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1137                                 sBgWorkspaceItems.remove(item);                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1138                                 break;                                                                   </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1139                             case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                       </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1140                             case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                          </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1141                                 sBgWorkspaceItems.remove(item);                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1142                                 break;                                                                   </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1143                             case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                         </span>
<span class="5035692159539723007" onmouseenter="enter('5035692159539723007');" onmouseout="out('5035692159539723007');" style="">1144                                 sBgAppWidgets.remove((LauncherAppWidgetInfo) item);                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1145                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1146                         }                                                                                </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="">1147                         sBgItemsIdMap.remove(item.id);                                                   </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="">1148                         sBgDbIconCache.remove(item);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1150                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1151             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1152         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1153         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1154     }                                                                                                    </span>
<span  style="">1155                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1156     /**                                                                                                  </span>
<span class="-7001721478473539684" onmouseenter="enter('-7001721478473539684');" onmouseout="out('-7001721478473539684');" style="">1157      * Update the order of the workspace screens in the database. The array list contains                </span>
<span class="-8575814248656839337" onmouseenter="enter('-8575814248656839337');" onmouseout="out('-8575814248656839337');" style="">1158      * a list of screen ids in the order that they should appear.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1159      */                                                                                                  </span>
<span class="8428215756529453230" onmouseenter="enter('8428215756529453230');" onmouseout="out('8428215756529453230');" style="">1160     void updateWorkspaceScreenOrder(Context context, final ArrayList&lt;Long&gt; screens) {                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1161         // Log to disk                                                                                   </span>
<span class="2597844157040813179" onmouseenter="enter('2597844157040813179');" onmouseout="out('2597844157040813179');" style="">1162         Launcher.addDumpLog(TAG, &quot;11683562 - updateWorkspaceScreenOrder()&quot;, true);                       </span>
<span class="-6712172470308057727" onmouseenter="enter('-6712172470308057727');" onmouseout="out('-6712172470308057727');" style="">1163         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, screens), true);        </span>
<span  style="">1164                                                                                                          </span>
<span class="468782492563171594" onmouseenter="enter('468782492563171594');" onmouseout="out('468782492563171594');" style="">1165         final ArrayList&lt;Long&gt; screensCopy = new ArrayList&lt;Long&gt;(screens);                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1166         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="543518355232884435" onmouseenter="enter('543518355232884435');" onmouseout="out('543518355232884435');" style="">1167         final Uri uri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                   </span>
<span  style="">1168                                                                                                          </span>
<span class="4254834681163937802" onmouseenter="enter('4254834681163937802');" onmouseout="out('4254834681163937802');" style="">1169         // Remove any negative screen ids -- these aren&#x27;t persisted                                      </span>
<span class="2152325044441302341" onmouseenter="enter('2152325044441302341');" onmouseout="out('2152325044441302341');" style="">1170         Iterator&lt;Long&gt; iter = screensCopy.iterator();                                                    </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">1171         while (iter.hasNext()) {                                                                         </span>
<span class="-927390677227055343" onmouseenter="enter('-927390677227055343');" onmouseout="out('-927390677227055343');" style="">1172             long id = iter.next();                                                                       </span>
<span class="-1178150068928662840" onmouseenter="enter('-1178150068928662840');" onmouseout="out('-1178150068928662840');" style="">1173             if (id &lt; 0) {                                                                                </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">1174                 iter.remove();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1175             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1176         }                                                                                                </span>
<span  style="">1177                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1178         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1179             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1180             public void run() {                                                                          </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style="">1181                 ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();     </span>
<span class="-6225505341206658348" onmouseenter="enter('-6225505341206658348');" onmouseout="out('-6225505341206658348');" style="">1182                 // Clear the table                                                                       </span>
<span class="-429946239562688464" onmouseenter="enter('-429946239562688464');" onmouseout="out('-429946239562688464');" style="">1183                 ops.add(ContentProviderOperation.newDelete(uri).build());                                </span>
<span class="-2619892188160552062" onmouseenter="enter('-2619892188160552062');" onmouseout="out('-2619892188160552062');" style="">1184                 int count = screensCopy.size();                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1185                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1186                     ContentValues v = new ContentValues();                                               </span>
<span class="-1711185173807510695" onmouseenter="enter('-1711185173807510695');" onmouseout="out('-1711185173807510695');" style="">1187                     long screenId = screensCopy.get(i);                                                  </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1188                     v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                              </span>
<span class="4685968830084375092" onmouseenter="enter('4685968830084375092');" onmouseout="out('4685968830084375092');" style="">1189                     v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                             </span>
<span class="2820655584610684032" onmouseenter="enter('2820655584610684032');" onmouseout="out('2820655584610684032');" style="">1190                     ops.add(ContentProviderOperation.newInsert(uri).withValues(v).build());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191                 }                                                                                        </span>
<span  style="">1192                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1193                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style="">1194                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">1195                 } catch (Exception ex) {                                                                 </span>
<span class="-9047539165825913138" onmouseenter="enter('-9047539165825913138');" onmouseout="out('-9047539165825913138');" style="">1196                     throw new RuntimeException(ex);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197                 }                                                                                        </span>
<span  style="">1198                                                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1199                 synchronized (sBgLock) {                                                                 </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1200                     sBgWorkspaceScreens.clear();                                                         </span>
<span class="-2640283764679238318" onmouseenter="enter('-2640283764679238318');" onmouseout="out('-2640283764679238318');" style="">1201                     sBgWorkspaceScreens.addAll(screensCopy);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1203             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1204         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1205         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1206     }                                                                                                    </span>
<span  style="">1207                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1208     /**                                                                                                  </span>
<span class="-6789515923938750727" onmouseenter="enter('-6789515923938750727');" onmouseout="out('-6789515923938750727');" style="">1209      * Remove the contents of the specified folder from the database                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1210      */                                                                                                  </span>
<span class="686021856205334545" onmouseenter="enter('686021856205334545');" onmouseout="out('686021856205334545');" style="">1211     static void deleteFolderContentsFromDatabase(Context context, final FolderInfo info) {               </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1212         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style="">1213                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1214         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1215             public void run() {                                                                          </span>
<span class="-8793927488200240422" onmouseenter="enter('-8793927488200240422');" onmouseout="out('-8793927488200240422');" style="">1216                 cr.delete(LauncherSettings.Favorites.getContentUri(info.id, false), null, null);         </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1217                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1218                 synchronized (sBgLock) {                                                                 </span>
<span class="-4714602177116521128" onmouseenter="enter('-4714602177116521128');" onmouseout="out('-4714602177116521128');" style="">1219                     sBgItemsIdMap.remove(info.id);                                                       </span>
<span class="-3189879738488687685" onmouseenter="enter('-3189879738488687685');" onmouseout="out('-3189879738488687685');" style="">1220                     sBgFolders.remove(info.id);                                                          </span>
<span class="5895316081502731153" onmouseenter="enter('5895316081502731153');" onmouseout="out('5895316081502731153');" style="">1221                     sBgDbIconCache.remove(info);                                                         </span>
<span class="-6074846806723656328" onmouseenter="enter('-6074846806723656328');" onmouseout="out('-6074846806723656328');" style="">1222                     sBgWorkspaceItems.remove(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1223                 }                                                                                        </span>
<span  style="">1224                                                                                                          </span>
<span class="-1937171462652594970" onmouseenter="enter('-1937171462652594970');" onmouseout="out('-1937171462652594970');" style="">1225                 cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,                        </span>
<span class="9128354258649337519" onmouseenter="enter('9128354258649337519');" onmouseout="out('9128354258649337519');" style="">1226                         LauncherSettings.Favorites.CONTAINER + &quot;=&quot; + info.id, null);                     </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1227                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1228                 synchronized (sBgLock) {                                                                 </span>
<span class="7541292827914562010" onmouseenter="enter('7541292827914562010');" onmouseout="out('7541292827914562010');" style="">1229                     for (ItemInfo childInfo : info.contents) {                                           </span>
<span class="-2237983399964272530" onmouseenter="enter('-2237983399964272530');" onmouseout="out('-2237983399964272530');" style="">1230                         sBgItemsIdMap.remove(childInfo.id);                                              </span>
<span class="7662249246062224172" onmouseenter="enter('7662249246062224172');" onmouseout="out('7662249246062224172');" style="">1231                         sBgDbIconCache.remove(childInfo);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1232                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1235         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1236         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1237     }                                                                                                    </span>
<span  style="">1238                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1239     /**                                                                                                  </span>
<span class="8050600461131576642" onmouseenter="enter('8050600461131576642');" onmouseout="out('8050600461131576642');" style="">1240      * Set this as the current Launcher activity object for the loader.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1241      */                                                                                                  </span>
<span class="8980870975348708436" onmouseenter="enter('8980870975348708436');" onmouseout="out('8980870975348708436');" style="">1242     public void initialize(Callbacks callbacks) {                                                        </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1243         synchronized (mLock) {                                                                           </span>
<span class="-641895236165954122" onmouseenter="enter('-641895236165954122');" onmouseout="out('-641895236165954122');" style="">1244             mCallbacks = new WeakReference&lt;Callbacks&gt;(callbacks);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1245         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246     }                                                                                                    </span>
<span  style="">1247                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1248     @Override                                                                                            </span>
<span class="-2337875492294712218" onmouseenter="enter('-2337875492294712218');" onmouseout="out('-2337875492294712218');" style="">1249     public void onPackageChanged(String packageName, UserHandleCompat user) {                            </span>
<span class="4778571821882595512" onmouseenter="enter('4778571821882595512');" onmouseout="out('4778571821882595512');" style="">1250         int op = PackageUpdatedTask.OP_UPDATE;                                                           </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="">1251         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                   </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1252                 user));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253     }                                                                                                    </span>
<span  style="">1254                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1255     @Override                                                                                            </span>
<span class="-927554855118637848" onmouseenter="enter('-927554855118637848');" onmouseout="out('-927554855118637848');" style="">1256     public void onPackageRemoved(String packageName, UserHandleCompat user) {                            </span>
<span class="-8281859875413044704" onmouseenter="enter('-8281859875413044704');" onmouseout="out('-8281859875413044704');" style="">1257         int op = PackageUpdatedTask.OP_REMOVE;                                                           </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="">1258         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                   </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1259                 user));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1260     }                                                                                                    </span>
<span  style="">1261                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1262     @Override                                                                                            </span>
<span class="105632639707841197" onmouseenter="enter('105632639707841197');" onmouseout="out('105632639707841197');" style="">1263     public void onPackageAdded(String packageName, UserHandleCompat user) {                              </span>
<span class="4828685442078193889" onmouseenter="enter('4828685442078193889');" onmouseout="out('4828685442078193889');" style="">1264         int op = PackageUpdatedTask.OP_ADD;                                                              </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="">1265         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                   </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1266                 user));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1267     }                                                                                                    </span>
<span  style="">1268                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1269     @Override                                                                                            </span>
<span class="-5272203289606218807" onmouseenter="enter('-5272203289606218807');" onmouseout="out('-5272203289606218807');" style="">1270     public void onPackagesAvailable(String[] packageNames, UserHandleCompat user,                        </span>
<span class="-6741651152973358021" onmouseenter="enter('-6741651152973358021');" onmouseout="out('-6741651152973358021');" style="">1271             boolean replacing) {                                                                         </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1272         if (!replacing) {                                                                                </span>
<span class="5127769788151278220" onmouseenter="enter('5127769788151278220');" onmouseout="out('5127769788151278220');" style="">1273             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packageNames,        </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1274                     user));                                                                              </span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="">1275             if (mAppsCanBeOnRemoveableStorage) {                                                         </span>
<span class="-2089495423111974436" onmouseenter="enter('-2089495423111974436');" onmouseout="out('-2089495423111974436');" style="">1276                 // Only rebind if we support removable storage. It catches the                           </span>
<span class="3966636659656955596" onmouseenter="enter('3966636659656955596');" onmouseout="out('3966636659656955596');" style="">1277                 // case where                                                                            </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="">1278                 // apps on the external sd card need to be reloaded                                      </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1279                 startLoaderFromBackground();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1280             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1281         } else {                                                                                         </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="">1282             // If we are replacing then just update the packages in the list                             </span>
<span class="5890557645886373945" onmouseenter="enter('5890557645886373945');" onmouseout="out('5890557645886373945');" style="">1283             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,                   </span>
<span class="-8173810846920498048" onmouseenter="enter('-8173810846920498048');" onmouseout="out('-8173810846920498048');" style="">1284                     packageNames, user));                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1285         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1286     }                                                                                                    </span>
<span  style="">1287                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1288     @Override                                                                                            </span>
<span class="-3988876954819926239" onmouseenter="enter('-3988876954819926239');" onmouseout="out('-3988876954819926239');" style="">1289     public void onPackagesUnavailable(String[] packageNames, UserHandleCompat user,                      </span>
<span class="-6741651152973358021" onmouseenter="enter('-6741651152973358021');" onmouseout="out('-6741651152973358021');" style="">1290             boolean replacing) {                                                                         </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1291         if (!replacing) {                                                                                </span>
<span class="-7496430100396306440" onmouseenter="enter('-7496430100396306440');" onmouseout="out('-7496430100396306440');" style="">1292             enqueuePackageUpdated(new PackageUpdatedTask(                                                </span>
<span class="8606082806154374174" onmouseenter="enter('8606082806154374174');" onmouseout="out('8606082806154374174');" style="">1293                     PackageUpdatedTask.OP_UNAVAILABLE, packageNames,                                     </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="">1294                     user));                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295         }                                                                                                </span>
<span  style="">1296                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1297     }                                                                                                    </span>
<span  style="">1298                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1299     /**                                                                                                  </span>
<span class="2369304932228112448" onmouseenter="enter('2369304932228112448');" onmouseout="out('2369304932228112448');" style="">1300      * Call from the handler for ACTION_PACKAGE_ADDED, ACTION_PACKAGE_REMOVED and                        </span>
<span class="-8845819122914862467" onmouseenter="enter('-8845819122914862467');" onmouseout="out('-8845819122914862467');" style="">1301      * ACTION_PACKAGE_CHANGED.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1302      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1303     @Override                                                                                            </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">1304     public void onReceive(Context context, Intent intent) {                                              </span>
<span class="-5855592430187821970" onmouseenter="enter('-5855592430187821970');" onmouseout="out('-5855592430187821970');" style="">1305         if (DEBUG_RECEIVER) Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                    </span>
<span  style="">1306                                                                                                          </span>
<span class="-4990819661547905021" onmouseenter="enter('-4990819661547905021');" onmouseout="out('-4990819661547905021');" style="">1307         final String action = intent.getAction();                                                        </span>
<span class="2827193781436621695" onmouseenter="enter('2827193781436621695');" onmouseout="out('2827193781436621695');" style="">1308         if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                               </span>
<span class="-6283043286710203920" onmouseenter="enter('-6283043286710203920');" onmouseout="out('-6283043286710203920');" style="">1309             // If we have changed locale we need to clear out the labels in all apps/workspace.          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1310             forceReload();                                                                               </span>
<span class="4348516547288755383" onmouseenter="enter('4348516547288755383');" onmouseout="out('4348516547288755383');" style="">1311         } else if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {                                 </span>
<span class="6164116257081582847" onmouseenter="enter('6164116257081582847');" onmouseout="out('6164116257081582847');" style="">1312              // Check if configuration change was an mcc/mnc change which would affect app resources     </span>
<span class="-1334400353911346867" onmouseenter="enter('-1334400353911346867');" onmouseout="out('-1334400353911346867');" style="">1313              // and we would need to clear out the labels in all apps/workspace. Same handling as        </span>
<span class="-5650891854452971889" onmouseenter="enter('-5650891854452971889');" onmouseout="out('-5650891854452971889');" style="">1314              // above for ACTION_LOCALE_CHANGED                                                          </span>
<span class="5411318685984925146" onmouseenter="enter('5411318685984925146');" onmouseout="out('5411318685984925146');" style="">1315              Configuration currentConfig = context.getResources().getConfiguration();                    </span>
<span class="-5822569774152959183" onmouseenter="enter('-5822569774152959183');" onmouseout="out('-5822569774152959183');" style="">1316              if (mPreviousConfigMcc != currentConfig.mcc) {                                              </span>
<span class="84255665079130844" onmouseenter="enter('84255665079130844');" onmouseout="out('84255665079130844');" style="">1317                    Log.d(TAG, &quot;Reload apps on config change. curr_mcc:&quot;                                  </span>
<span class="-5209278319615985301" onmouseenter="enter('-5209278319615985301');" onmouseout="out('-5209278319615985301');" style="">1318                        + currentConfig.mcc + &quot; prevmcc:&quot; + mPreviousConfigMcc);                          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1319                    forceReload();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1320              }                                                                                           </span>
<span class="-3935663267934034322" onmouseenter="enter('-3935663267934034322');" onmouseout="out('-3935663267934034322');" style="">1321              // Update previousConfig                                                                    </span>
<span class="3962364908604221868" onmouseenter="enter('3962364908604221868');" onmouseout="out('3962364908604221868');" style="">1322              mPreviousConfigMcc = currentConfig.mcc;                                                     </span>
<span class="-625815149698974703" onmouseenter="enter('-625815149698974703');" onmouseout="out('-625815149698974703');" style="">1323         } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) ||                 </span>
<span class="-3901926890039161494" onmouseenter="enter('-3901926890039161494');" onmouseout="out('-3901926890039161494');" style="">1324                    SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {                     </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1325             if (mCallbacks != null) {                                                                    </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1326                 Callbacks callbacks = mCallbacks.get();                                                  </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1327                 if (callbacks != null) {                                                                 </span>
<span class="-1936765454200843013" onmouseenter="enter('-1936765454200843013');" onmouseout="out('-1936765454200843013');" style="">1328                     callbacks.bindSearchablesChanged();                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1330             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1331         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1332     }                                                                                                    </span>
<span  style="">1333                                                                                                          </span>
<span class="-17594942140375151" onmouseenter="enter('-17594942140375151');" onmouseout="out('-17594942140375151');" style="">1334     void forceReload() {                                                                                 </span>
<span class="778547048286075437" onmouseenter="enter('778547048286075437');" onmouseout="out('778547048286075437');" style="">1335         resetLoadedState(true, true);                                                                    </span>
<span  style="">1336                                                                                                          </span>
<span class="4237924176832789189" onmouseenter="enter('4237924176832789189');" onmouseout="out('4237924176832789189');" style="">1337         // Do this here because if the launcher activity is running it will be restarted.                </span>
<span class="-3504249388484505584" onmouseenter="enter('-3504249388484505584');" onmouseout="out('-3504249388484505584');" style="">1338         // If it&#x27;s not running startLoaderFromBackground will merely tell it that it needs               </span>
<span class="5637742608155670431" onmouseenter="enter('5637742608155670431');" onmouseout="out('5637742608155670431');" style="">1339         // to reload.                                                                                    </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1340         startLoaderFromBackground();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1341     }                                                                                                    </span>
<span  style="">1342                                                                                                          </span>
<span class="-4293128577464776735" onmouseenter="enter('-4293128577464776735');" onmouseout="out('-4293128577464776735');" style="">1343     public void resetLoadedState(boolean resetAllAppsLoaded, boolean resetWorkspaceLoaded) {             </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1344         synchronized (mLock) {                                                                           </span>
<span class="-2609781935860166694" onmouseenter="enter('-2609781935860166694');" onmouseout="out('-2609781935860166694');" style="">1345             // Stop any existing loaders first, so they don&#x27;t set mAllAppsLoaded or                      </span>
<span class="1916843454374538934" onmouseenter="enter('1916843454374538934');" onmouseout="out('1916843454374538934');" style="">1346             // mWorkspaceLoaded to true later                                                            </span>
<span class="-1528282254597569426" onmouseenter="enter('-1528282254597569426');" onmouseout="out('-1528282254597569426');" style="">1347             stopLoaderLocked();                                                                          </span>
<span class="-4094161784675318974" onmouseenter="enter('-4094161784675318974');" onmouseout="out('-4094161784675318974');" style="">1348             if (resetAllAppsLoaded) mAllAppsLoaded = false;                                              </span>
<span class="-3582216479388479825" onmouseenter="enter('-3582216479388479825');" onmouseout="out('-3582216479388479825');" style="">1349             if (resetWorkspaceLoaded) mWorkspaceLoaded = false;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1350         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1351     }                                                                                                    </span>
<span  style="">1352                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1353     /**                                                                                                  </span>
<span class="-2117548427273174966" onmouseenter="enter('-2117548427273174966');" onmouseout="out('-2117548427273174966');" style="">1354      * When the launcher is in the background, it&#x27;s possible for it to miss paired                       </span>
<span class="9045642034745197537" onmouseenter="enter('9045642034745197537');" onmouseout="out('9045642034745197537');" style="">1355      * configuration changes.  So whenever we trigger the loader from the background                     </span>
<span class="3717077838570548717" onmouseenter="enter('3717077838570548717');" onmouseout="out('3717077838570548717');" style="">1356      * tell the launcher that it needs to re-run the loader when it comes back instead                   </span>
<span class="8619803709595782118" onmouseenter="enter('8619803709595782118');" onmouseout="out('8619803709595782118');" style="">1357      * of doing it now.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1358      */                                                                                                  </span>
<span class="2053805597450117019" onmouseenter="enter('2053805597450117019');" onmouseout="out('2053805597450117019');" style="">1359     public void startLoaderFromBackground() {                                                            </span>
<span class="-3760886775206602162" onmouseenter="enter('-3760886775206602162');" onmouseout="out('-3760886775206602162');" style="">1360         boolean runLoader = false;                                                                       </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1361         if (mCallbacks != null) {                                                                        </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1362             Callbacks callbacks = mCallbacks.get();                                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1363             if (callbacks != null) {                                                                     </span>
<span class="-8461765931128288918" onmouseenter="enter('-8461765931128288918');" onmouseout="out('-8461765931128288918');" style="">1364                 // Only actually run the loader if they&#x27;re not paused.                                   </span>
<span class="-462943306960371545" onmouseenter="enter('-462943306960371545');" onmouseout="out('-462943306960371545');" style="">1365                 if (!callbacks.setLoadOnResume()) {                                                      </span>
<span class="-8889848208331327581" onmouseenter="enter('-8889848208331327581');" onmouseout="out('-8889848208331327581');" style="">1366                     runLoader = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1368             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1369         }                                                                                                </span>
<span class="-2622291522100283788" onmouseenter="enter('-2622291522100283788');" onmouseout="out('-2622291522100283788');" style="">1370         if (runLoader) {                                                                                 </span>
<span class="-8998147482804817647" onmouseenter="enter('-8998147482804817647');" onmouseout="out('-8998147482804817647');" style="">1371             startLoader(false, PagedView.INVALID_RESTORE_PAGE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1372         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1373     }                                                                                                    </span>
<span  style="">1374                                                                                                          </span>
<span class="5010903034251856801" onmouseenter="enter('5010903034251856801');" onmouseout="out('5010903034251856801');" style="">1375     // If there is already a loader task running, tell it to stop.                                       </span>
<span class="796557558969242789" onmouseenter="enter('796557558969242789');" onmouseout="out('796557558969242789');" style="">1376     // returns true if isLaunching() was true on the old task                                            </span>
<span class="-4581932122990216089" onmouseenter="enter('-4581932122990216089');" onmouseout="out('-4581932122990216089');" style="">1377     private boolean stopLoaderLocked() {                                                                 </span>
<span class="-998934784399408070" onmouseenter="enter('-998934784399408070');" onmouseout="out('-998934784399408070');" style="">1378         boolean isLaunching = false;                                                                     </span>
<span class="-7986438653599299764" onmouseenter="enter('-7986438653599299764');" onmouseout="out('-7986438653599299764');" style="">1379         LoaderTask oldTask = mLoaderTask;                                                                </span>
<span class="-2859449282457612659" onmouseenter="enter('-2859449282457612659');" onmouseout="out('-2859449282457612659');" style="">1380         if (oldTask != null) {                                                                           </span>
<span class="5507271139955657849" onmouseenter="enter('5507271139955657849');" onmouseout="out('5507271139955657849');" style="">1381             if (oldTask.isLaunching()) {                                                                 </span>
<span class="-2542349725897719409" onmouseenter="enter('-2542349725897719409');" onmouseout="out('-2542349725897719409');" style="">1382                 isLaunching = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383             }                                                                                            </span>
<span class="-1151918806087352732" onmouseenter="enter('-1151918806087352732');" onmouseout="out('-1151918806087352732');" style="">1384             oldTask.stopLocked();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1385         }                                                                                                </span>
<span class="353443281501806148" onmouseenter="enter('353443281501806148');" onmouseout="out('353443281501806148');" style="">1386         return isLaunching;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1387     }                                                                                                    </span>
<span  style="">1388                                                                                                          </span>
<span class="-650602055294598310" onmouseenter="enter('-650602055294598310');" onmouseout="out('-650602055294598310');" style="">1389     public boolean isCurrentCallbacks(Callbacks callbacks) {                                             </span>
<span class="-2678194210930296625" onmouseenter="enter('-2678194210930296625');" onmouseout="out('-2678194210930296625');" style="">1390         return (mCallbacks != null &amp;&amp; mCallbacks.get() == callbacks);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1391     }                                                                                                    </span>
<span  style="">1392                                                                                                          </span>
<span class="3837278165301095000" onmouseenter="enter('3837278165301095000');" onmouseout="out('3837278165301095000');" style="">1393     public void startLoader(boolean isLaunching, int synchronousBindPage) {                              </span>
<span class="-5265370469502082000" onmouseenter="enter('-5265370469502082000');" onmouseout="out('-5265370469502082000');" style="">1394         startLoader(isLaunching, synchronousBindPage, LOADER_FLAG_NONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1395     }                                                                                                    </span>
<span  style="">1396                                                                                                          </span>
<span class="4886983231320039031" onmouseenter="enter('4886983231320039031');" onmouseout="out('4886983231320039031');" style="">1397     public void startLoader(boolean isLaunching, int synchronousBindPage, int loadFlags) {               </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1398         synchronized (mLock) {                                                                           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1399             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-3508213546782417324" onmouseenter="enter('-3508213546782417324');" onmouseout="out('-3508213546782417324');" style="">1400                 Log.d(TAG, &quot;startLoader isLaunching=&quot; + isLaunching);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1401             }                                                                                            </span>
<span  style="">1402                                                                                                          </span>
<span class="6333826815871699731" onmouseenter="enter('6333826815871699731');" onmouseout="out('6333826815871699731');" style="">1403             // Clear any deferred bind-runnables from the synchronized load process                      </span>
<span class="-7033809362198181476" onmouseenter="enter('-7033809362198181476');" onmouseout="out('-7033809362198181476');" style="">1404             // We must do this before any loading/binding is scheduled below.                            </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">1405             synchronized (mDeferredBindRunnables) {                                                      </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1406                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1407             }                                                                                            </span>
<span  style="">1408                                                                                                          </span>
<span class="-2785438828901225561" onmouseenter="enter('-2785438828901225561');" onmouseout="out('-2785438828901225561');" style="">1409             // Don&#x27;t bother to start the thread if we know it&#x27;s not going to do anything                 </span>
<span class="-784058118581736702" onmouseenter="enter('-784058118581736702');" onmouseout="out('-784058118581736702');" style="">1410             if (mCallbacks != null &amp;&amp; mCallbacks.get() != null) {                                        </span>
<span class="-5820527225743363271" onmouseenter="enter('-5820527225743363271');" onmouseout="out('-5820527225743363271');" style="">1411                 // If there is already one running, tell it to stop.                                     </span>
<span class="3990358955275755027" onmouseenter="enter('3990358955275755027');" onmouseout="out('3990358955275755027');" style="">1412                 // also, don&#x27;t downgrade isLaunching if we&#x27;re already running                            </span>
<span class="-6024742637751579231" onmouseenter="enter('-6024742637751579231');" onmouseout="out('-6024742637751579231');" style="">1413                 isLaunching = isLaunching || stopLoaderLocked();                                         </span>
<span class="7022676154060365524" onmouseenter="enter('7022676154060365524');" onmouseout="out('7022676154060365524');" style="">1414                 mLoaderTask = new LoaderTask(mApp.getContext(), isLaunching, loadFlags);                 </span>
<span class="1771251463067889729" onmouseenter="enter('1771251463067889729');" onmouseout="out('1771251463067889729');" style="">1415                 if (synchronousBindPage != PagedView.INVALID_RESTORE_PAGE                                </span>
<span class="7049103546590409467" onmouseenter="enter('7049103546590409467');" onmouseout="out('7049103546590409467');" style="">1416                         &amp;&amp; mAllAppsLoaded &amp;&amp; mWorkspaceLoaded) {                                         </span>
<span class="-8342371766149337044" onmouseenter="enter('-8342371766149337044');" onmouseout="out('-8342371766149337044');" style="">1417                     mLoaderTask.runBindSynchronousPage(synchronousBindPage);                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1418                 } else {                                                                                 </span>
<span class="-600387258114093875" onmouseenter="enter('-600387258114093875');" onmouseout="out('-600387258114093875');" style="">1419                     sWorkerThread.setPriority(Thread.NORM_PRIORITY);                                     </span>
<span class="7243935410050079045" onmouseenter="enter('7243935410050079045');" onmouseout="out('7243935410050079045');" style="">1420                     sWorker.post(mLoaderTask);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1421                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1423         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1424     }                                                                                                    </span>
<span  style="">1425                                                                                                          </span>
<span class="8791491145548048370" onmouseenter="enter('8791491145548048370');" onmouseout="out('8791491145548048370');" style="">1426     void bindRemainingSynchronousPages() {                                                               </span>
<span class="5033608739884582118" onmouseenter="enter('5033608739884582118');" onmouseout="out('5033608739884582118');" style="">1427         // Post the remaining side pages to be loaded                                                    </span>
<span class="-5332743236356375648" onmouseenter="enter('-5332743236356375648');" onmouseout="out('-5332743236356375648');" style="">1428         if (!mDeferredBindRunnables.isEmpty()) {                                                         </span>
<span class="3864855355327062414" onmouseenter="enter('3864855355327062414');" onmouseout="out('3864855355327062414');" style="">1429             Runnable[] deferredBindRunnables = null;                                                     </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">1430             synchronized (mDeferredBindRunnables) {                                                      </span>
<span class="-7323371485266753329" onmouseenter="enter('-7323371485266753329');" onmouseout="out('-7323371485266753329');" style="">1431                 deferredBindRunnables = mDeferredBindRunnables.toArray(                                  </span>
<span class="-5228620787203084012" onmouseenter="enter('-5228620787203084012');" onmouseout="out('-5228620787203084012');" style="">1432                         new Runnable[mDeferredBindRunnables.size()]);                                    </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1433                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1434             }                                                                                            </span>
<span class="-4818994596267375040" onmouseenter="enter('-4818994596267375040');" onmouseout="out('-4818994596267375040');" style="">1435             for (final Runnable r : deferredBindRunnables) {                                             </span>
<span class="352794200584805787" onmouseenter="enter('352794200584805787');" onmouseout="out('352794200584805787');" style="">1436                 mHandler.post(r, MAIN_THREAD_BINDING_RUNNABLE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1438         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1439     }                                                                                                    </span>
<span  style="">1440                                                                                                          </span>
<span class="2340632222115195329" onmouseenter="enter('2340632222115195329');" onmouseout="out('2340632222115195329');" style="">1441     public void stopLoader() {                                                                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1442         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1443             if (mLoaderTask != null) {                                                                   </span>
<span class="-3264656657741930991" onmouseenter="enter('-3264656657741930991');" onmouseout="out('-3264656657741930991');" style="">1444                 mLoaderTask.stopLocked();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1445             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1446         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1447     }                                                                                                    </span>
<span  style="">1448                                                                                                          </span>
<span class="-7250027300190670202" onmouseenter="enter('-7250027300190670202');" onmouseout="out('-7250027300190670202');" style="">1449     /** Loads the workspace screens db into a map of Rank -&gt; ScreenId */                                 </span>
<span class="122992606215727554" onmouseenter="enter('122992606215727554');" onmouseout="out('122992606215727554');" style="">1450     private static TreeMap&lt;Integer, Long&gt; loadWorkspaceScreensDb(Context context) {                      </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1451         final ContentResolver contentResolver = context.getContentResolver();                            </span>
<span class="-2220596623746218138" onmouseenter="enter('-2220596623746218138');" onmouseout="out('-2220596623746218138');" style="">1452         final Uri screensUri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                            </span>
<span class="6273592658286011909" onmouseenter="enter('6273592658286011909');" onmouseout="out('6273592658286011909');" style="">1453         final Cursor sc = contentResolver.query(screensUri, null, null, null, null);                     </span>
<span class="-750342796873513708" onmouseenter="enter('-750342796873513708');" onmouseout="out('-750342796873513708');" style="">1454         TreeMap&lt;Integer, Long&gt; orderedScreens = new TreeMap&lt;Integer, Long&gt;();                            </span>
<span  style="">1455                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1456         try {                                                                                            </span>
<span class="-8175558610564469753" onmouseenter="enter('-8175558610564469753');" onmouseout="out('-8175558610564469753');" style="">1457             final int idIndex = sc.getColumnIndexOrThrow(                                                </span>
<span class="-8946142257769661598" onmouseenter="enter('-8946142257769661598');" onmouseout="out('-8946142257769661598');" style="">1458                     LauncherSettings.WorkspaceScreens._ID);                                              </span>
<span class="-8868089630781298600" onmouseenter="enter('-8868089630781298600');" onmouseout="out('-8868089630781298600');" style="">1459             final int rankIndex = sc.getColumnIndexOrThrow(                                              </span>
<span class="5916017515631826997" onmouseenter="enter('5916017515631826997');" onmouseout="out('5916017515631826997');" style="">1460                     LauncherSettings.WorkspaceScreens.SCREEN_RANK);                                      </span>
<span class="204728523712198078" onmouseenter="enter('204728523712198078');" onmouseout="out('204728523712198078');" style="">1461             while (sc.moveToNext()) {                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1462                 try {                                                                                    </span>
<span class="-3927530459574574291" onmouseenter="enter('-3927530459574574291');" onmouseout="out('-3927530459574574291');" style="">1463                     long screenId = sc.getLong(idIndex);                                                 </span>
<span class="4944528408544996755" onmouseenter="enter('4944528408544996755');" onmouseout="out('4944528408544996755');" style="">1464                     int rank = sc.getInt(rankIndex);                                                     </span>
<span class="3308047316092947062" onmouseenter="enter('3308047316092947062');" onmouseout="out('3308047316092947062');" style="">1465                     orderedScreens.put(rank, screenId);                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1466                 } catch (Exception e) {                                                                  </span>
<span class="-7912680121623740950" onmouseenter="enter('-7912680121623740950');" onmouseout="out('-7912680121623740950');" style=""><abbr title="1467                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e, true);">1467                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e,</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1468                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1469             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1470         } finally {                                                                                      </span>
<span class="8048076729460304726" onmouseenter="enter('8048076729460304726');" onmouseout="out('8048076729460304726');" style="">1471             sc.close();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472         }                                                                                                </span>
<span  style="">1473                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1474         // Log to disk                                                                                   </span>
<span class="395286336309272035" onmouseenter="enter('395286336309272035');" onmouseout="out('395286336309272035');" style="">1475         Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspaceScreensDb()&quot;, true);                           </span>
<span class="218635510720911915" onmouseenter="enter('218635510720911915');" onmouseout="out('218635510720911915');" style="">1476         ArrayList&lt;String&gt; orderedScreensPairs= new ArrayList&lt;String&gt;();                                  </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">1477         for (Integer i : orderedScreens.keySet()) {                                                      </span>
<span class="7491860136402808405" onmouseenter="enter('7491860136402808405');" onmouseout="out('7491860136402808405');" style="">1478             orderedScreensPairs.add(&quot;{ &quot; + i + &quot;: &quot; + orderedScreens.get(i) + &quot; }&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1479         }                                                                                                </span>
<span class="-1337084683171534745" onmouseenter="enter('-1337084683171534745');" onmouseout="out('-1337084683171534745');" style="">1480         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; +                                              </span>
<span class="-2164573057986762020" onmouseenter="enter('-2164573057986762020');" onmouseout="out('-2164573057986762020');" style="">1481                 TextUtils.join(&quot;, &quot;, orderedScreensPairs), true);                                        </span>
<span class="1470292219769535286" onmouseenter="enter('1470292219769535286');" onmouseout="out('1470292219769535286');" style="">1482         return orderedScreens;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1483     }                                                                                                    </span>
<span  style="">1484                                                                                                          </span>
<span class="3555732154070898598" onmouseenter="enter('3555732154070898598');" onmouseout="out('3555732154070898598');" style="">1485     public boolean isAllAppsLoaded() {                                                                   </span>
<span class="-4479372220598901856" onmouseenter="enter('-4479372220598901856');" onmouseout="out('-4479372220598901856');" style="">1486         return mAllAppsLoaded;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487     }                                                                                                    </span>
<span  style="">1488                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1489     boolean isLoadingWorkspace() {                                                                       </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1490         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1491             if (mLoaderTask != null) {                                                                   </span>
<span class="-8784543184221518678" onmouseenter="enter('-8784543184221518678');" onmouseout="out('-8784543184221518678');" style="">1492                 return mLoaderTask.isLoadingWorkspace();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1494         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1495         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1496     }                                                                                                    </span>
<span  style="">1497                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1498     /**                                                                                                  </span>
<span class="2155822975232422030" onmouseenter="enter('2155822975232422030');" onmouseout="out('2155822975232422030');" style="">1499      * Runnable for the thread that loads the contents of the launcher:                                  </span>
<span class="2245504796345070456" onmouseenter="enter('2245504796345070456');" onmouseout="out('2245504796345070456');" style="">1500      *   - workspace icons                                                                               </span>
<span class="3748531824399873232" onmouseenter="enter('3748531824399873232');" onmouseout="out('3748531824399873232');" style="">1501      *   - widgets                                                                                       </span>
<span class="-1174287823865228312" onmouseenter="enter('-1174287823865228312');" onmouseout="out('-1174287823865228312');" style="">1502      *   - all apps icons                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1503      */                                                                                                  </span>
<span class="5152324394883908677" onmouseenter="enter('5152324394883908677');" onmouseout="out('5152324394883908677');" style="">1504     private class LoaderTask implements Runnable {                                                       </span>
<span class="6683852815807951473" onmouseenter="enter('6683852815807951473');" onmouseout="out('6683852815807951473');" style="">1505         private Context mContext;                                                                        </span>
<span class="-8892613002903674576" onmouseenter="enter('-8892613002903674576');" onmouseout="out('-8892613002903674576');" style="">1506         private boolean mIsLaunching;                                                                    </span>
<span class="-8472062509666230595" onmouseenter="enter('-8472062509666230595');" onmouseout="out('-8472062509666230595');" style="">1507         private boolean mIsLoadingAndBindingWorkspace;                                                   </span>
<span class="840925515877441947" onmouseenter="enter('840925515877441947');" onmouseout="out('840925515877441947');" style="">1508         private boolean mStopped;                                                                        </span>
<span class="-1108993435799622018" onmouseenter="enter('-1108993435799622018');" onmouseout="out('-1108993435799622018');" style="">1509         private boolean mLoadAndBindStepFinished;                                                        </span>
<span class="2080823019438326837" onmouseenter="enter('2080823019438326837');" onmouseout="out('2080823019438326837');" style="">1510         private int mFlags;                                                                              </span>
<span  style="">1511                                                                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">1512         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span  style="">1513                                                                                                          </span>
<span class="-3637406926963361525" onmouseenter="enter('-3637406926963361525');" onmouseout="out('-3637406926963361525');" style="">1514         LoaderTask(Context context, boolean isLaunching, int flags) {                                    </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style="">1515             mContext = context;                                                                          </span>
<span class="7512260519858493354" onmouseenter="enter('7512260519858493354');" onmouseout="out('7512260519858493354');" style="">1516             mIsLaunching = isLaunching;                                                                  </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">1517             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="6183718553459964087" onmouseenter="enter('6183718553459964087');" onmouseout="out('6183718553459964087');" style="">1518             mFlags = flags;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1519         }                                                                                                </span>
<span  style="">1520                                                                                                          </span>
<span class="-3427713478562425776" onmouseenter="enter('-3427713478562425776');" onmouseout="out('-3427713478562425776');" style="">1521         boolean isLaunching() {                                                                          </span>
<span class="-4684239236966951132" onmouseenter="enter('-4684239236966951132');" onmouseout="out('-4684239236966951132');" style="">1522             return mIsLaunching;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1523         }                                                                                                </span>
<span  style="">1524                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1525         boolean isLoadingWorkspace() {                                                                   </span>
<span class="-1565626489511429864" onmouseenter="enter('-1565626489511429864');" onmouseout="out('-1565626489511429864');" style="">1526             return mIsLoadingAndBindingWorkspace;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1527         }                                                                                                </span>
<span  style="">1528                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1529         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-4912644643880785787" onmouseenter="enter('-4912644643880785787');" onmouseout="out('-4912644643880785787');" style="">1530         private boolean loadAndBindWorkspace() {                                                         </span>
<span class="3221067006114111971" onmouseenter="enter('3221067006114111971');" onmouseout="out('3221067006114111971');" style="">1531             mIsLoadingAndBindingWorkspace = true;                                                        </span>
<span  style="">1532                                                                                                          </span>
<span class="1537270917172214589" onmouseenter="enter('1537270917172214589');" onmouseout="out('1537270917172214589');" style="">1533             // Load the workspace                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1534             if (DEBUG_LOADERS) {                                                                         </span>
<span class="8901273111544619292" onmouseenter="enter('8901273111544619292');" onmouseout="out('8901273111544619292');" style="">1535                 Log.d(TAG, &quot;loadAndBindWorkspace mWorkspaceLoaded=&quot; + mWorkspaceLoaded);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1536             }                                                                                            </span>
<span  style="">1537                                                                                                          </span>
<span class="-7050118912026035967" onmouseenter="enter('-7050118912026035967');" onmouseout="out('-7050118912026035967');" style="">1538             boolean isUpgradePath = false;                                                               </span>
<span class="-6627511839388696673" onmouseenter="enter('-6627511839388696673');" onmouseout="out('-6627511839388696673');" style="">1539             if (!mWorkspaceLoaded) {                                                                     </span>
<span class="-5751837054227838000" onmouseenter="enter('-5751837054227838000');" onmouseout="out('-5751837054227838000');" style="">1540                 isUpgradePath = loadWorkspace();                                                         </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1541                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1542                     if (mStopped) {                                                                      </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1543                         return isUpgradePath;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1544                     }                                                                                    </span>
<span class="3247008524984054391" onmouseenter="enter('3247008524984054391');" onmouseout="out('3247008524984054391');" style="">1545                     mWorkspaceLoaded = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1547             }                                                                                            </span>
<span  style="">1548                                                                                                          </span>
<span class="8161409494754485761" onmouseenter="enter('8161409494754485761');" onmouseout="out('8161409494754485761');" style="">1549             // Bind the workspace                                                                        </span>
<span class="7984749853310309686" onmouseenter="enter('7984749853310309686');" onmouseout="out('7984749853310309686');" style="">1550             bindWorkspace(-1, isUpgradePath);                                                            </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1551             return isUpgradePath;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1552         }                                                                                                </span>
<span  style="">1553                                                                                                          </span>
<span class="-1989226029052835978" onmouseenter="enter('-1989226029052835978');" onmouseout="out('-1989226029052835978');" style="">1554         private void waitForIdle() {                                                                     </span>
<span class="755597645611528735" onmouseenter="enter('755597645611528735');" onmouseout="out('755597645611528735');" style="">1555             // Wait until the either we&#x27;re stopped or the other threads are done.                        </span>
<span class="-8727414813590658044" onmouseenter="enter('-8727414813590658044');" onmouseout="out('-8727414813590658044');" style="">1556             // This way we don&#x27;t start loading all apps until the workspace has settled                  </span>
<span class="519327046885180501" onmouseenter="enter('519327046885180501');" onmouseout="out('519327046885180501');" style="">1557             // down.                                                                                     </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1558             synchronized (LoaderTask.this) {                                                             </span>
<span class="-83798755248439808" onmouseenter="enter('-83798755248439808');" onmouseout="out('-83798755248439808');" style="">1559                 final long workspaceWaitTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;           </span>
<span  style="">1560                                                                                                          </span>
<span class="-8997106023930440912" onmouseenter="enter('-8997106023930440912');" onmouseout="out('-8997106023930440912');" style="">1561                 mHandler.postIdle(new Runnable() {                                                       </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1562                         public void run() {                                                              </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1563                             synchronized (LoaderTask.this) {                                             </span>
<span class="-4593766760064909367" onmouseenter="enter('-4593766760064909367');" onmouseout="out('-4593766760064909367');" style="">1564                                 mLoadAndBindStepFinished = true;                                         </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1565                                 if (DEBUG_LOADERS) {                                                     </span>
<span class="-7140275656523627984" onmouseenter="enter('-7140275656523627984');" onmouseout="out('-7140275656523627984');" style="">1566                                     Log.d(TAG, &quot;done with previous binding step&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1567                                 }                                                                        </span>
<span class="8111819661104992685" onmouseenter="enter('8111819661104992685');" onmouseout="out('8111819661104992685');" style="">1568                                 LoaderTask.this.notify();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1569                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1570                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1571                     });                                                                                  </span>
<span  style="">1572                                                                                                          </span>
<span class="7673579852599691461" onmouseenter="enter('7673579852599691461');" onmouseout="out('7673579852599691461');" style="">1573                 while (!mStopped &amp;&amp; !mLoadAndBindStepFinished &amp;&amp; !mFlushingWorkerThread) {               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1574                     try {                                                                                </span>
<span class="-1997675543177729859" onmouseenter="enter('-1997675543177729859');" onmouseout="out('-1997675543177729859');" style="">1575                         // Just in case mFlushingWorkerThread changes but we aren&#x27;t woken up,            </span>
<span class="4998753984474875942" onmouseenter="enter('4998753984474875942');" onmouseout="out('4998753984474875942');" style="">1576                         // wait no longer than 1sec at a time                                            </span>
<span class="1515790047903299628" onmouseenter="enter('1515790047903299628');" onmouseout="out('1515790047903299628');" style="">1577                         this.wait(1000);                                                                 </span>
<span class="3493957724480568133" onmouseenter="enter('3493957724480568133');" onmouseout="out('3493957724480568133');" style="">1578                     } catch (InterruptedException ex) {                                                  </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1579                         // Ignore                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1580                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1581                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1582                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-72139740866353106" onmouseenter="enter('-72139740866353106');" onmouseout="out('-72139740866353106');" style="">1583                     Log.d(TAG, &quot;waited &quot;                                                                 </span>
<span class="3094974955332165680" onmouseenter="enter('3094974955332165680');" onmouseout="out('3094974955332165680');" style="">1584                             + (SystemClock.uptimeMillis()-workspaceWaitTime)                             </span>
<span class="4719480645001782920" onmouseenter="enter('4719480645001782920');" onmouseout="out('4719480645001782920');" style="">1585                             + &quot;ms for previous step to finish binding&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588         }                                                                                                </span>
<span  style="">1589                                                                                                          </span>
<span class="6003497491863497289" onmouseenter="enter('6003497491863497289');" onmouseout="out('6003497491863497289');" style="">1590         void runBindSynchronousPage(int synchronousBindPage) {                                           </span>
<span class="26631348189854486" onmouseenter="enter('26631348189854486');" onmouseout="out('26631348189854486');" style="">1591             if (synchronousBindPage == PagedView.INVALID_RESTORE_PAGE) {                                 </span>
<span class="-8503902330989669437" onmouseenter="enter('-8503902330989669437');" onmouseout="out('-8503902330989669437');" style="">1592                 // Ensure that we have a valid page index to load synchronously                          </span>
<span class="4351877111278684588" onmouseenter="enter('4351877111278684588');" onmouseout="out('4351877111278684588');" style="">1593                 throw new RuntimeException(&quot;Should not call runBindSynchronousPage() without &quot; +         </span>
<span class="-7231071987017264740" onmouseenter="enter('-7231071987017264740');" onmouseout="out('-7231071987017264740');" style="">1594                         &quot;valid page index&quot;);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1595             }                                                                                            </span>
<span class="-1078848978706070277" onmouseenter="enter('-1078848978706070277');" onmouseout="out('-1078848978706070277');" style="">1596             if (!mAllAppsLoaded || !mWorkspaceLoaded) {                                                  </span>
<span class="2879437365312389694" onmouseenter="enter('2879437365312389694');" onmouseout="out('2879437365312389694');" style="">1597                 // Ensure that we don&#x27;t try and bind a specified page when the pages have not been       </span>
<span class="169159946226030638" onmouseenter="enter('169159946226030638');" onmouseout="out('169159946226030638');" style="">1598                 // loaded already (we should load everything asynchronously in that case)                </span>
<span class="2803547673173241327" onmouseenter="enter('2803547673173241327');" onmouseout="out('2803547673173241327');" style="">1599                 throw new RuntimeException(&quot;Expecting AllApps and Workspace to be loaded&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1600             }                                                                                            </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1601             synchronized (mLock) {                                                                       </span>
<span class="6834879657722268045" onmouseenter="enter('6834879657722268045');" onmouseout="out('6834879657722268045');" style="">1602                 if (mIsLoaderTaskRunning) {                                                              </span>
<span class="3479473486057258175" onmouseenter="enter('3479473486057258175');" onmouseout="out('3479473486057258175');" style="">1603                     // Ensure that we are never running the background loading at this point since       </span>
<span class="5690931735845958615" onmouseenter="enter('5690931735845958615');" onmouseout="out('5690931735845958615');" style="">1604                     // we also touch the background collections                                          </span>
<span class="-8789687649412956769" onmouseenter="enter('-8789687649412956769');" onmouseout="out('-8789687649412956769');" style="">1605                     throw new RuntimeException(&quot;Error! Background loading is already running&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1606                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1607             }                                                                                            </span>
<span  style="">1608                                                                                                          </span>
<span class="4081886748823582405" onmouseenter="enter('4081886748823582405');" onmouseout="out('4081886748823582405');" style="">1609             // XXX: Throw an exception if we are already loading (since we touch the worker thread       </span>
<span class="-98490365064007765" onmouseenter="enter('-98490365064007765');" onmouseout="out('-98490365064007765');" style="">1610             //      data structures, we can&#x27;t allow any other thread to touch that data, but because     </span>
<span class="4680477662519922026" onmouseenter="enter('4680477662519922026');" onmouseout="out('4680477662519922026');" style="">1611             //      this call is synchronous, we can get away with not locking).                         </span>
<span  style="">1612                                                                                                          </span>
<span class="-6012373927983533730" onmouseenter="enter('-6012373927983533730');" onmouseout="out('-6012373927983533730');" style="">1613             // The LauncherModel is static in the LauncherAppState and mHandler may have queued          </span>
<span class="7586418927072898518" onmouseenter="enter('7586418927072898518');" onmouseout="out('7586418927072898518');" style="">1614             // operations from the previous activity.  We need to ensure that all queued operations      </span>
<span class="-70743228311848279" onmouseenter="enter('-70743228311848279');" onmouseout="out('-70743228311848279');" style="">1615             // are executed before any synchronous binding work is done.                                 </span>
<span class="-4498008587479034521" onmouseenter="enter('-4498008587479034521');" onmouseout="out('-4498008587479034521');" style="">1616             mHandler.flush();                                                                            </span>
<span  style="">1617                                                                                                          </span>
<span class="-3771221013488357479" onmouseenter="enter('-3771221013488357479');" onmouseout="out('-3771221013488357479');" style="">1618             // Divide the set of loaded items into those that we are binding synchronously, and          </span>
<span class="5224432435633178726" onmouseenter="enter('5224432435633178726');" onmouseout="out('5224432435633178726');" style="">1619             // everything else that is to be bound normally (asynchronously).                            </span>
<span class="-6685180061336045314" onmouseenter="enter('-6685180061336045314');" onmouseout="out('-6685180061336045314');" style="">1620             bindWorkspace(synchronousBindPage, false);                                                   </span>
<span class="6689685850222943783" onmouseenter="enter('6689685850222943783');" onmouseout="out('6689685850222943783');" style="">1621             // XXX: For now, continue posting the binding of AllApps as there are other issues that      </span>
<span class="-1574502332056641514" onmouseenter="enter('-1574502332056641514');" onmouseout="out('-1574502332056641514');" style="">1622             //      arise from that.                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">1623             onlyBindAllApps();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624         }                                                                                                </span>
<span  style="">1625                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1626         public void run() {                                                                              </span>
<span class="5752535899438246447" onmouseenter="enter('5752535899438246447');" onmouseout="out('5752535899438246447');" style="">1627             boolean isUpgrade = false;                                                                   </span>
<span  style="">1628                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1629             synchronized (mLock) {                                                                       </span>
<span class="4738665752688002399" onmouseenter="enter('4738665752688002399');" onmouseout="out('4738665752688002399');" style="">1630                 mIsLoaderTaskRunning = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1631             }                                                                                            </span>
<span class="-1737494436521525410" onmouseenter="enter('-1737494436521525410');" onmouseout="out('-1737494436521525410');" style="">1632             // Optimize for end-user experience: if the Launcher is up and // running with the           </span>
<span class="892988660615454533" onmouseenter="enter('892988660615454533');" onmouseout="out('892988660615454533');" style="">1633             // All Apps interface in the foreground, load All Apps first. Otherwise, load the            </span>
<span class="-1944482210197593446" onmouseenter="enter('-1944482210197593446');" onmouseout="out('-1944482210197593446');" style="">1634             // workspace first (default).                                                                </span>
<span class="-8128861992085659189" onmouseenter="enter('-8128861992085659189');" onmouseout="out('-8128861992085659189');" style="">1635             keep_running: {                                                                              </span>
<span class="2293067736949718284" onmouseenter="enter('2293067736949718284');" onmouseout="out('2293067736949718284');" style="">1636                 // Elevate priority when Home launches for the first time to avoid                       </span>
<span class="-1381926741216219064" onmouseenter="enter('-1381926741216219064');" onmouseout="out('-1381926741216219064');" style="">1637                 // starving at boot time. Staring at a blank home is not cool.                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1638                 synchronized (mLock) {                                                                   </span>
<span class="8946499537685848583" onmouseenter="enter('8946499537685848583');" onmouseout="out('8946499537685848583');" style="">1639                     if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to &quot; +                        </span>
<span class="1787109731546912352" onmouseenter="enter('1787109731546912352');" onmouseout="out('1787109731546912352');" style="">1640                             (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUND&quot;));                                  </span>
<span class="-1912109441925598991" onmouseenter="enter('-1912109441925598991');" onmouseout="out('-1912109441925598991');" style="">1641                     android.os.Process.setThreadPriority(mIsLaunching                                    </span>
<span class="-5572949467661441178" onmouseenter="enter('-5572949467661441178');" onmouseout="out('-5572949467661441178');" style="">1642                             ? Process.THREAD_PRIORITY_DEFAULT : Process.THREAD_PRIORITY_BACKGROUND);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1643                 }                                                                                        </span>
<span class="9220749004793568337" onmouseenter="enter('9220749004793568337');" onmouseout="out('9220749004793568337');" style="">1644                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 1: loading workspace&quot;);                              </span>
<span class="8482653655407072483" onmouseenter="enter('8482653655407072483');" onmouseout="out('8482653655407072483');" style="">1645                 isUpgrade = loadAndBindWorkspace();                                                      </span>
<span  style="">1646                                                                                                          </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1647                 if (mStopped) {                                                                          </span>
<span class="-6818805659412975442" onmouseenter="enter('-6818805659412975442');" onmouseout="out('-6818805659412975442');" style="">1648                     break keep_running;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1649                 }                                                                                        </span>
<span  style="">1650                                                                                                          </span>
<span class="-5777092162251517407" onmouseenter="enter('-5777092162251517407');" onmouseout="out('-5777092162251517407');" style="">1651                 // Whew! Hard work done.  Slow us down, and wait until the UI thread has                 </span>
<span class="-4075896614387769686" onmouseenter="enter('-4075896614387769686');" onmouseout="out('-4075896614387769686');" style="">1652                 // settled down.                                                                         </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1653                 synchronized (mLock) {                                                                   </span>
<span class="1926990202484285414" onmouseenter="enter('1926990202484285414');" onmouseout="out('1926990202484285414');" style="">1654                     if (mIsLaunching) {                                                                  </span>
<span class="-8046035155088057723" onmouseenter="enter('-8046035155088057723');" onmouseout="out('-8046035155088057723');" style="">1655                         if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to BACKGROUND&quot;);          </span>
<span class="6194754511830950532" onmouseenter="enter('6194754511830950532');" onmouseout="out('6194754511830950532');" style="">1656                         android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1657                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1658                 }                                                                                        </span>
<span class="2443484392604792624" onmouseenter="enter('2443484392604792624');" onmouseout="out('2443484392604792624');" style="">1659                 waitForIdle();                                                                           </span>
<span  style="">1660                                                                                                          </span>
<span class="1529750222663563109" onmouseenter="enter('1529750222663563109');" onmouseout="out('1529750222663563109');" style="">1661                 // second step                                                                           </span>
<span class="4805812105190008803" onmouseenter="enter('4805812105190008803');" onmouseout="out('4805812105190008803');" style="">1662                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 2: loading all apps&quot;);                               </span>
<span class="3758302759319518479" onmouseenter="enter('3758302759319518479');" onmouseout="out('3758302759319518479');" style="">1663                 loadAndBindAllApps();                                                                    </span>
<span  style="">1664                                                                                                          </span>
<span class="4031538869478111" onmouseenter="enter('4031538869478111');" onmouseout="out('4031538869478111');" style="">1665                 // Restore the default thread priority after we are done loading items                   </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1666                 synchronized (mLock) {                                                                   </span>
<span class="6299511964324687923" onmouseenter="enter('6299511964324687923');" onmouseout="out('6299511964324687923');" style="">1667                     android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_DEFAULT);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1668                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1669             }                                                                                            </span>
<span  style="">1670                                                                                                          </span>
<span class="3508545587953199453" onmouseenter="enter('3508545587953199453');" onmouseout="out('3508545587953199453');" style="">1671             // Update the saved icons if necessary                                                       </span>
<span class="-4757805943857079956" onmouseenter="enter('-4757805943857079956');" onmouseout="out('-4757805943857079956');" style="">1672             if (DEBUG_LOADERS) Log.d(TAG, &quot;Comparing loaded icons to database icons&quot;);                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1673             synchronized (sBgLock) {                                                                     </span>
<span class="5900553346724410681" onmouseenter="enter('5900553346724410681');" onmouseout="out('5900553346724410681');" style="">1674                 for (Object key : sBgDbIconCache.keySet()) {                                             </span>
<span class="404633043401473554" onmouseenter="enter('404633043401473554');" onmouseout="out('404633043401473554');" style="">1675                     updateSavedIcon(mContext, (ShortcutInfo) key, sBgDbIconCache.get(key));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1676                 }                                                                                        </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1677                 sBgDbIconCache.clear();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1678             }                                                                                            </span>
<span  style="">1679                                                                                                          </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">1680             if (LauncherAppState.isDisableAllApps()) {                                                   </span>
<span class="6125270178763735331" onmouseenter="enter('6125270178763735331');" onmouseout="out('6125270178763735331');" style="">1681                 // Ensure that all the applications that are in the system are                           </span>
<span class="305725628855266005" onmouseenter="enter('305725628855266005');" onmouseout="out('305725628855266005');" style="">1682                 // represented on the home screen.                                                       </span>
<span class="3562864863119627268" onmouseenter="enter('3562864863119627268');" onmouseout="out('3562864863119627268');" style="">1683                 if (!UPGRADE_USE_MORE_APPS_FOLDER || !isUpgrade) {                                       </span>
<span class="5095093339904195112" onmouseenter="enter('5095093339904195112');" onmouseout="out('5095093339904195112');" style="">1684                     verifyApplications();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1685                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1686             }                                                                                            </span>
<span  style="">1687                                                                                                          </span>
<span class="-745190257815883733" onmouseenter="enter('-745190257815883733');" onmouseout="out('-745190257815883733');" style="">1688             // Clear out this reference, otherwise we end up holding it until all of the                 </span>
<span class="4646172956484107396" onmouseenter="enter('4646172956484107396');" onmouseout="out('4646172956484107396');" style="">1689             // callback runnables are done.                                                              </span>
<span class="-5116782011037529434" onmouseenter="enter('-5116782011037529434');" onmouseout="out('-5116782011037529434');" style="">1690             mContext = null;                                                                             </span>
<span  style="">1691                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1692             synchronized (mLock) {                                                                       </span>
<span class="-2953553521466488464" onmouseenter="enter('-2953553521466488464');" onmouseout="out('-2953553521466488464');" style="">1693                 // If we are still the last one to be scheduled, remove ourselves.                       </span>
<span class="-1560897046285527036" onmouseenter="enter('-1560897046285527036');" onmouseout="out('-1560897046285527036');" style="">1694                 if (mLoaderTask == this) {                                                               </span>
<span class="-8540970856372433004" onmouseenter="enter('-8540970856372433004');" onmouseout="out('-8540970856372433004');" style="">1695                     mLoaderTask = null;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1696                 }                                                                                        </span>
<span class="8472658350888958885" onmouseenter="enter('8472658350888958885');" onmouseout="out('8472658350888958885');" style="">1697                 mIsLoaderTaskRunning = false;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1698             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1699         }                                                                                                </span>
<span  style="">1700                                                                                                          </span>
<span class="200135487053889456" onmouseenter="enter('200135487053889456');" onmouseout="out('200135487053889456');" style="">1701         public void stopLocked() {                                                                       </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1702             synchronized (LoaderTask.this) {                                                             </span>
<span class="8214677179915027824" onmouseenter="enter('8214677179915027824');" onmouseout="out('8214677179915027824');" style="">1703                 mStopped = true;                                                                         </span>
<span class="3056713147428312392" onmouseenter="enter('3056713147428312392');" onmouseout="out('3056713147428312392');" style="">1704                 this.notify();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1705             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1706         }                                                                                                </span>
<span  style="">1707                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1708         /**                                                                                              </span>
<span class="8543020973836575883" onmouseenter="enter('8543020973836575883');" onmouseout="out('8543020973836575883');" style="">1709          * Gets the callbacks object.  If we&#x27;ve been stopped, or if the launcher object                  </span>
<span class="-5710779889390340322" onmouseenter="enter('-5710779889390340322');" onmouseout="out('-5710779889390340322');" style="">1710          * has somehow been garbage collected, return null instead.  Pass in the Callbacks               </span>
<span class="1695163395735776366" onmouseenter="enter('1695163395735776366');" onmouseout="out('1695163395735776366');" style="">1711          * object that was around when the deferred message was scheduled, and if there&#x27;s                </span>
<span class="7856411153887025232" onmouseenter="enter('7856411153887025232');" onmouseout="out('7856411153887025232');" style="">1712          * a new Callbacks object around then also return null.  This will save us from                  </span>
<span class="2242983124447893975" onmouseenter="enter('2242983124447893975');" onmouseout="out('2242983124447893975');" style="">1713          * calling onto it with data that will be ignored.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1714          */                                                                                              </span>
<span class="-2719659093140206912" onmouseenter="enter('-2719659093140206912');" onmouseout="out('-2719659093140206912');" style="">1715         Callbacks tryGetCallbacks(Callbacks oldCallbacks) {                                              </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1716             synchronized (mLock) {                                                                       </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1717                 if (mStopped) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1718                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1719                 }                                                                                        </span>
<span  style="">1720                                                                                                          </span>
<span class="-1148437149844317216" onmouseenter="enter('-1148437149844317216');" onmouseout="out('-1148437149844317216');" style="">1721                 if (mCallbacks == null) {                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1722                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1723                 }                                                                                        </span>
<span  style="">1724                                                                                                          </span>
<span class="4487336468213395696" onmouseenter="enter('4487336468213395696');" onmouseout="out('4487336468213395696');" style="">1725                 final Callbacks callbacks = mCallbacks.get();                                            </span>
<span class="-1088473782403214817" onmouseenter="enter('-1088473782403214817');" onmouseout="out('-1088473782403214817');" style="">1726                 if (callbacks != oldCallbacks) {                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1727                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1728                 }                                                                                        </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">1729                 if (callbacks == null) {                                                                 </span>
<span class="-94531209925935523" onmouseenter="enter('-94531209925935523');" onmouseout="out('-94531209925935523');" style="">1730                     Log.w(TAG, &quot;no mCallbacks&quot;);                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1731                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1732                 }                                                                                        </span>
<span  style="">1733                                                                                                          </span>
<span class="7316466478630645098" onmouseenter="enter('7316466478630645098');" onmouseout="out('7316466478630645098');" style="">1734                 return callbacks;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1735             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1736         }                                                                                                </span>
<span  style="">1737                                                                                                          </span>
<span class="-732845747997402687" onmouseenter="enter('-732845747997402687');" onmouseout="out('-732845747997402687');" style="">1738         private void verifyApplications() {                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">1739             final Context context = mApp.getContext();                                                   </span>
<span  style="">1740                                                                                                          </span>
<span class="-895975897487385508" onmouseenter="enter('-895975897487385508');" onmouseout="out('-895975897487385508');" style="">1741             // Cross reference all the applications in our apps list with items in the workspace         </span>
<span class="-10165714367555844" onmouseenter="enter('-10165714367555844');" onmouseout="out('-10165714367555844');" style="">1742             ArrayList&lt;ItemInfo&gt; tmpInfos;                                                                </span>
<span class="-1498611641211142735" onmouseenter="enter('-1498611641211142735');" onmouseout="out('-1498611641211142735');" style="">1743             ArrayList&lt;ItemInfo&gt; added = new ArrayList&lt;ItemInfo&gt;();                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1744             synchronized (sBgLock) {                                                                     </span>
<span class="-8503045385813305184" onmouseenter="enter('-8503045385813305184');" onmouseout="out('-8503045385813305184');" style="">1745                 for (AppInfo app : mBgAllAppsList.data) {                                                </span>
<span class="3468492706943039059" onmouseenter="enter('3468492706943039059');" onmouseout="out('3468492706943039059');" style="">1746                     tmpInfos = getItemInfoForComponentName(app.componentName, app.user);                 </span>
<span class="2520781471180992241" onmouseenter="enter('2520781471180992241');" onmouseout="out('2520781471180992241');" style="">1747                     if (tmpInfos.isEmpty()) {                                                            </span>
<span class="-8553694446545507920" onmouseenter="enter('-8553694446545507920');" onmouseout="out('-8553694446545507920');" style="">1748                         // We are missing an application icon, so add this to the workspace              </span>
<span class="-4039639638749761552" onmouseenter="enter('-4039639638749761552');" onmouseout="out('-4039639638749761552');" style="">1749                         added.add(app);                                                                  </span>
<span class="-6087209586339664607" onmouseenter="enter('-6087209586339664607');" onmouseout="out('-6087209586339664607');" style="">1750                         // This is a rare event, so lets log it                                          </span>
<span class="-8409193735080295855" onmouseenter="enter('-8409193735080295855');" onmouseout="out('-8409193735080295855');" style="">1751                         Log.e(TAG, &quot;Missing Application on load: &quot; + app);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1752                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1753                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1754             }                                                                                            </span>
<span class="-3228275885243238792" onmouseenter="enter('-3228275885243238792');" onmouseout="out('-3228275885243238792');" style="">1755             if (!added.isEmpty()) {                                                                      </span>
<span class="-2532202186705808951" onmouseenter="enter('-2532202186705808951');" onmouseout="out('-2532202186705808951');" style="">1756                 addAndBindAddedWorkspaceApps(context, added);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1757             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1758         }                                                                                                </span>
<span  style="">1759                                                                                                          </span>
<span class="1799876722918383990" onmouseenter="enter('1799876722918383990');" onmouseout="out('1799876722918383990');" style="">1760         // check &amp; update map of what&#x27;s occupied; used to discard overlapping/invalid items              </span>
<span class="1369641317894879083" onmouseenter="enter('1369641317894879083');" onmouseout="out('1369641317894879083');" style="">1761         private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item,          </span>
<span class="-1114457745240921120" onmouseenter="enter('-1114457745240921120');" onmouseout="out('-1114457745240921120');" style="">1762                                            AtomicBoolean deleteOnInvalidPlacement) {                     </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1763             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1764             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="2610967815704817337" onmouseenter="enter('2610967815704817337');" onmouseout="out('2610967815704817337');" style="">1765             final int countX = (int) grid.numColumns;                                                    </span>
<span class="-4666114634626787340" onmouseenter="enter('-4666114634626787340');" onmouseout="out('-4666114634626787340');" style="">1766             final int countY = (int) grid.numRows;                                                       </span>
<span  style="">1767                                                                                                          </span>
<span class="6034161250987228772" onmouseenter="enter('6034161250987228772');" onmouseout="out('6034161250987228772');" style="">1768             long containerIndex = item.screenId;                                                         </span>
<span class="-7373493273183889597" onmouseenter="enter('-7373493273183889597');" onmouseout="out('-7373493273183889597');" style="">1769             if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                        </span>
<span class="2673995963777381740" onmouseenter="enter('2673995963777381740');" onmouseout="out('2673995963777381740');" style="">1770                 // Return early if we detect that an item is under the hotseat button                    </span>
<span class="8439501161968406722" onmouseenter="enter('8439501161968406722');" onmouseout="out('8439501161968406722');" style="">1771                 if (mCallbacks == null ||                                                                </span>
<span class="2765367117287235525" onmouseenter="enter('2765367117287235525');" onmouseout="out('2765367117287235525');" style="">1772                         mCallbacks.get().isAllAppsButtonRank((int) item.screenId)) {                     </span>
<span class="-5585792196891628830" onmouseenter="enter('-5585792196891628830');" onmouseout="out('-5585792196891628830');" style="">1773                     deleteOnInvalidPlacement.set(true);                                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1774                     Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                             </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1775                             + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                </span>
<span class="-6945266911057923165" onmouseenter="enter('-6945266911057923165');" onmouseout="out('-6945266911057923165');" style="">1776                             + item.cellY + &quot;) occupied by all apps&quot;);                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1777                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1778                 }                                                                                        </span>
<span  style="">1779                                                                                                          </span>
<span class="1283283798458548935" onmouseenter="enter('1283283798458548935');" onmouseout="out('1283283798458548935');" style="">1780                 final ItemInfo[][] hotseatItems =                                                        </span>
<span class="1949963606333422560" onmouseenter="enter('1949963606333422560');" onmouseout="out('1949963606333422560');" style="">1781                         occupied.get((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT);               </span>
<span  style="">1782                                                                                                          </span>
<span class="4306415300339150674" onmouseenter="enter('4306415300339150674');" onmouseout="out('4306415300339150674');" style="">1783                 if (item.screenId &gt;= grid.numHotseatIcons) {                                             </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1784                     Log.e(TAG, &quot;Error loading shortcut &quot; + item                                          </span>
<span class="5751503886607422325" onmouseenter="enter('5751503886607422325');" onmouseout="out('5751503886607422325');" style="">1785                             + &quot; into hotseat position &quot; + item.screenId                                  </span>
<span class="8586084608145250937" onmouseenter="enter('8586084608145250937');" onmouseout="out('8586084608145250937');" style="">1786                             + &quot;, position out of bounds: (0 to &quot; + (grid.numHotseatIcons - 1)            </span>
<span class="4670108460576455524" onmouseenter="enter('4670108460576455524');" onmouseout="out('4670108460576455524');" style="">1787                             + &quot;)&quot;);                                                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1788                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1789                 }                                                                                        </span>
<span  style="">1790                                                                                                          </span>
<span class="-96711597696201103" onmouseenter="enter('-96711597696201103');" onmouseout="out('-96711597696201103');" style="">1791                 if (hotseatItems != null) {                                                              </span>
<span class="-5719492878362044891" onmouseenter="enter('-5719492878362044891');" onmouseout="out('-5719492878362044891');" style="">1792                     if (hotseatItems[(int) item.screenId][0] != null) {                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1793                         Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                         </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1794                                 + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;            </span>
<span class="-5608765342526697238" onmouseenter="enter('-5608765342526697238');" onmouseout="out('-5608765342526697238');" style="">1795                                 + item.cellY + &quot;) occupied by &quot;                                          </span>
<span class="-9216450188742256868" onmouseenter="enter('-9216450188742256868');" onmouseout="out('-9216450188742256868');" style="">1796                                 + occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)             </span>
<span class="8078550196904492215" onmouseenter="enter('8078550196904492215');" onmouseout="out('8078550196904492215');" style="">1797                                 [(int) item.screenId][0]);                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1798                             return false;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1799                     } else {                                                                             </span>
<span class="774944626646586019" onmouseenter="enter('774944626646586019');" onmouseout="out('774944626646586019');" style="">1800                         hotseatItems[(int) item.screenId][0] = item;                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1801                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1802                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1803                 } else {                                                                                 </span>
<span class="7358314474516221203" onmouseenter="enter('7358314474516221203');" onmouseout="out('7358314474516221203');" style="">1804                     final ItemInfo[][] items = new ItemInfo[(int) grid.numHotseatIcons][1];              </span>
<span class="-9070162012537345427" onmouseenter="enter('-9070162012537345427');" onmouseout="out('-9070162012537345427');" style="">1805                     items[(int) item.screenId][0] = item;                                                </span>
<span class="-8158366679753027651" onmouseenter="enter('-8158366679753027651');" onmouseout="out('-8158366679753027651');" style="">1806                     occupied.put((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT, items);            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1807                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1808                 }                                                                                        </span>
<span class="-303831338253138618" onmouseenter="enter('-303831338253138618');" onmouseout="out('-303831338253138618');" style="">1809             } else if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                 </span>
<span class="2023083187637338837" onmouseenter="enter('2023083187637338837');" onmouseout="out('2023083187637338837');" style="">1810                 // Skip further checking if it is not the hotseat or workspace container                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1811                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1812             }                                                                                            </span>
<span  style="">1813                                                                                                          </span>
<span class="4900594953050523912" onmouseenter="enter('4900594953050523912');" onmouseout="out('4900594953050523912');" style="">1814             if (!occupied.containsKey(item.screenId)) {                                                  </span>
<span class="4145930087010840378" onmouseenter="enter('4145930087010840378');" onmouseout="out('4145930087010840378');" style="">1815                 ItemInfo[][] items = new ItemInfo[countX + 1][countY + 1];                               </span>
<span class="1227421706021504577" onmouseenter="enter('1227421706021504577');" onmouseout="out('1227421706021504577');" style="">1816                 occupied.put(item.screenId, items);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1817             }                                                                                            </span>
<span  style="">1818                                                                                                          </span>
<span class="1896300602190974138" onmouseenter="enter('1896300602190974138');" onmouseout="out('1896300602190974138');" style="">1819             final ItemInfo[][] screens = occupied.get(item.screenId);                                    </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">1820             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-5368423457014206987" onmouseenter="enter('-5368423457014206987');" onmouseout="out('-5368423457014206987');" style="">1821                     item.cellX &lt; 0 || item.cellY &lt; 0 ||                                                  </span>
<span class="-4742334469567284144" onmouseenter="enter('-4742334469567284144');" onmouseout="out('-4742334469567284144');" style="">1822                     item.cellX + item.spanX &gt; countX || item.cellY + item.spanY &gt; countY) {              </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1823                 Log.e(TAG, &quot;Error loading shortcut &quot; + item                                              </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1824                         + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                    </span>
<span class="6594976635866090975" onmouseenter="enter('6594976635866090975');" onmouseout="out('6594976635866090975');" style="">1825                         + item.cellX + &quot;,&quot; + item.cellY                                                  </span>
<span class="7810872796641797088" onmouseenter="enter('7810872796641797088');" onmouseout="out('7810872796641797088');" style="">1826                         + &quot;) out of screen bounds ( &quot; + countX + &quot;x&quot; + countY + &quot;)&quot;);                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1827                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1828             }                                                                                            </span>
<span  style="">1829                                                                                                          </span>
<span class="-5156128896960485993" onmouseenter="enter('-5156128896960485993');" onmouseout="out('-5156128896960485993');" style="">1830             // Check if any workspace icons overlap with each other                                      </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1831             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1832                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="-6569355555223387047" onmouseenter="enter('-6569355555223387047');" onmouseout="out('-6569355555223387047');" style="">1833                     if (screens[x][y] != null) {                                                         </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1834                         Log.e(TAG, &quot;Error loading shortcut &quot; + item                                      </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1835                             + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                </span>
<span class="6817243246217428495" onmouseenter="enter('6817243246217428495');" onmouseout="out('6817243246217428495');" style="">1836                             + x + &quot;,&quot; + y                                                                </span>
<span class="5682441617128381013" onmouseenter="enter('5682441617128381013');" onmouseout="out('5682441617128381013');" style="">1837                             + &quot;) occupied by &quot;                                                           </span>
<span class="-1033476021967432581" onmouseenter="enter('-1033476021967432581');" onmouseout="out('-1033476021967432581');" style="">1838                             + screens[x][y]);                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1839                         return false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1840                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1841                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1842             }                                                                                            </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1843             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1844                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="4088526838574697064" onmouseenter="enter('4088526838574697064');" onmouseout="out('4088526838574697064');" style="">1845                     screens[x][y] = item;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1846                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1847             }                                                                                            </span>
<span  style="">1848                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1849             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1850         }                                                                                                </span>
<span  style="">1851                                                                                                          </span>
<span class="-7185136003210132674" onmouseenter="enter('-7185136003210132674');" onmouseout="out('-7185136003210132674');" style="">1852         /** Clears all the sBg data structures */                                                        </span>
<span class="1801132344752176061" onmouseenter="enter('1801132344752176061');" onmouseout="out('1801132344752176061');" style="">1853         private void clearSBgDataStructures() {                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1854             synchronized (sBgLock) {                                                                     </span>
<span class="-7129433888089157992" onmouseenter="enter('-7129433888089157992');" onmouseout="out('-7129433888089157992');" style="">1855                 sBgWorkspaceItems.clear();                                                               </span>
<span class="5052861278193385910" onmouseenter="enter('5052861278193385910');" onmouseout="out('5052861278193385910');" style="">1856                 sBgAppWidgets.clear();                                                                   </span>
<span class="3133219754838100126" onmouseenter="enter('3133219754838100126');" onmouseout="out('3133219754838100126');" style="">1857                 sBgFolders.clear();                                                                      </span>
<span class="-8505695193908377238" onmouseenter="enter('-8505695193908377238');" onmouseout="out('-8505695193908377238');" style="">1858                 sBgItemsIdMap.clear();                                                                   </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1859                 sBgDbIconCache.clear();                                                                  </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1860                 sBgWorkspaceScreens.clear();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1861             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1862         }                                                                                                </span>
<span  style="">1863                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1864         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-134197683999376379" onmouseenter="enter('-134197683999376379');" onmouseout="out('-134197683999376379');" style="">1865         private boolean loadWorkspace() {                                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1866             // Log to disk                                                                               </span>
<span class="-1716174542198683127" onmouseenter="enter('-1716174542198683127');" onmouseout="out('-1716174542198683127');" style="">1867             Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspace()&quot;, true);                                </span>
<span  style="">1868                                                                                                          </span>
<span class="-1293377954506719064" onmouseenter="enter('-1293377954506719064');" onmouseout="out('-1293377954506719064');" style="">1869             final long t = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                               </span>
<span  style="">1870                                                                                                          </span>
<span class="-7540672363138308565" onmouseenter="enter('-7540672363138308565');" onmouseout="out('-7540672363138308565');" style="">1871             final Context context = mContext;                                                            </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1872             final ContentResolver contentResolver = context.getContentResolver();                        </span>
<span class="-2531056455834918617" onmouseenter="enter('-2531056455834918617');" onmouseout="out('-2531056455834918617');" style="">1873             final PackageManager manager = context.getPackageManager();                                  </span>
<span class="9164904653123292763" onmouseenter="enter('9164904653123292763');" onmouseout="out('9164904653123292763');" style="">1874             final AppWidgetManager widgets = AppWidgetManager.getInstance(context);                      </span>
<span class="-100432956626051671" onmouseenter="enter('-100432956626051671');" onmouseout="out('-100432956626051671');" style="">1875             final boolean isSafeMode = manager.isSafeMode();                                             </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">1876             final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);             </span>
<span class="-1126483394746043247" onmouseenter="enter('-1126483394746043247');" onmouseout="out('-1126483394746043247');" style="">1877             final boolean isSdCardReady = context.registerReceiver(null,                                 </span>
<span class="235951794025782625" onmouseenter="enter('235951794025782625');" onmouseout="out('235951794025782625');" style="">1878                     new IntentFilter(StartupReceiver.SYSTEM_READY)) != null;                             </span>
<span  style="">1879                                                                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1880             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1881             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="-1268645472287944818" onmouseenter="enter('-1268645472287944818');" onmouseout="out('-1268645472287944818');" style="">1882             int countX = (int) grid.numColumns;                                                          </span>
<span class="5825733578535079508" onmouseenter="enter('5825733578535079508');" onmouseout="out('5825733578535079508');" style="">1883             int countY = (int) grid.numRows;                                                             </span>
<span  style="">1884                                                                                                          </span>
<span class="4685154999280536885" onmouseenter="enter('4685154999280536885');" onmouseout="out('4685154999280536885');" style="">1885             if ((mFlags &amp; LOADER_FLAG_CLEAR_WORKSPACE) != 0) {                                           </span>
<span class="1874866184467615023" onmouseenter="enter('1874866184467615023');" onmouseout="out('1874866184467615023');" style="">1886                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: resetting launcher database&quot;, true);            </span>
<span class="7130003991883838563" onmouseenter="enter('7130003991883838563');" onmouseout="out('7130003991883838563');" style="">1887                 LauncherAppState.getLauncherProvider().deleteDatabase();                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1888             }                                                                                            </span>
<span  style="">1889                                                                                                          </span>
<span class="1786245758308608184" onmouseenter="enter('1786245758308608184');" onmouseout="out('1786245758308608184');" style="">1890             if ((mFlags &amp; LOADER_FLAG_MIGRATE_SHORTCUTS) != 0) {                                         </span>
<span class="2622187273755861990" onmouseenter="enter('2622187273755861990');" onmouseout="out('2622187273755861990');" style="">1891                 // append the user&#x27;s Launcher2 shortcuts                                                 </span>
<span class="7991450201866933364" onmouseenter="enter('7991450201866933364');" onmouseout="out('7991450201866933364');" style="">1892                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: migrating from launcher2&quot;, true);               </span>
<span class="-4928149528895358870" onmouseenter="enter('-4928149528895358870');" onmouseout="out('-4928149528895358870');" style="">1893                 LauncherAppState.getLauncherProvider().migrateLauncher2Shortcuts();                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1894             } else {                                                                                     </span>
<span class="-6772917437561183819" onmouseenter="enter('-6772917437561183819');" onmouseout="out('-6772917437561183819');" style="">1895                 // Make sure the default workspace is loaded                                             </span>
<span class="3161347234478650527" onmouseenter="enter('3161347234478650527');" onmouseout="out('3161347234478650527');" style="">1896                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: loading default favorites&quot;, false);             </span>
<span class="4180233289947251537" onmouseenter="enter('4180233289947251537');" onmouseout="out('4180233289947251537');" style="">1897                 LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary();                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1898             }                                                                                            </span>
<span  style="">1899                                                                                                          </span>
<span class="6918238907049954147" onmouseenter="enter('6918238907049954147');" onmouseout="out('6918238907049954147');" style="">1900             // This code path is for our old migration code and should no longer be exercised            </span>
<span class="-6111060399811000023" onmouseenter="enter('-6111060399811000023');" onmouseout="out('-6111060399811000023');" style="">1901             boolean loadedOldDb = false;                                                                 </span>
<span  style="">1902                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1903             // Log to disk                                                                               </span>
<span class="4915608034810943289" onmouseenter="enter('4915608034810943289');" onmouseout="out('4915608034810943289');" style="">1904             Launcher.addDumpLog(TAG, &quot;11683562 -   loadedOldDb: &quot; + loadedOldDb, true);                  </span>
<span  style="">1905                                                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1906             synchronized (sBgLock) {                                                                     </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">1907                 clearSBgDataStructures();                                                                </span>
<span class="8252648371202855385" onmouseenter="enter('8252648371202855385');" onmouseout="out('8252648371202855385');" style="">1908                 final HashSet&lt;String&gt; installingPkgs = PackageInstallerCompat                            </span>
<span class="-5267108265550912858" onmouseenter="enter('-5267108265550912858');" onmouseout="out('-5267108265550912858');" style="">1909                         .getInstance(mContext).updateAndGetActiveSessionCache();                         </span>
<span  style="">1910                                                                                                          </span>
<span class="4830013596372552761" onmouseenter="enter('4830013596372552761');" onmouseout="out('4830013596372552761');" style="">1911                 final ArrayList&lt;Long&gt; itemsToRemove = new ArrayList&lt;Long&gt;();                             </span>
<span class="-771425693233218078" onmouseenter="enter('-771425693233218078');" onmouseout="out('-771425693233218078');" style="">1912                 final ArrayList&lt;Long&gt; restoredRows = new ArrayList&lt;Long&gt;();                              </span>
<span class="2252334430881119805" onmouseenter="enter('2252334430881119805');" onmouseout="out('2252334430881119805');" style="">1913                 final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION;           </span>
<span class="6883183902805060832" onmouseenter="enter('6883183902805060832');" onmouseout="out('6883183902805060832');" style="">1914                 if (DEBUG_LOADERS) Log.d(TAG, &quot;loading model from &quot; + contentUri);                       </span>
<span class="4124323585340312806" onmouseenter="enter('4124323585340312806');" onmouseout="out('4124323585340312806');" style="">1915                 final Cursor c = contentResolver.query(contentUri, null, null, null, null);              </span>
<span  style="">1916                                                                                                          </span>
<span class="-6846195559440228008" onmouseenter="enter('-6846195559440228008');" onmouseout="out('-6846195559440228008');" style="">1917                 // +1 for the hotseat (it can be larger than the workspace)                              </span>
<span class="-6570434370371395868" onmouseenter="enter('-6570434370371395868');" onmouseout="out('-6570434370371395868');" style="">1918                 // Load workspace in reverse order to ensure that latest items are loaded first (and     </span>
<span class="-2496742724026288329" onmouseenter="enter('-2496742724026288329');" onmouseout="out('-2496742724026288329');" style="">1919                 // before any earlier duplicates)                                                        </span>
<span class="-575539041300461201" onmouseenter="enter('-575539041300461201');" onmouseout="out('-575539041300461201');" style="">1920                 final HashMap&lt;Long, ItemInfo[][]&gt; occupied = new HashMap&lt;Long, ItemInfo[][]&gt;();          </span>
<span  style="">1921                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1922                 try {                                                                                    </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">1923                     final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);         </span>
<span class="498695732843703978" onmouseenter="enter('498695732843703978');" onmouseout="out('498695732843703978');" style="">1924                     final int intentIndex = c.getColumnIndexOrThrow                                      </span>
<span class="-2710863683168773760" onmouseenter="enter('-2710863683168773760');" onmouseout="out('-2710863683168773760');" style="">1925                             (LauncherSettings.Favorites.INTENT);                                         </span>
<span class="3135911520873448784" onmouseenter="enter('3135911520873448784');" onmouseout="out('3135911520873448784');" style="">1926                     final int titleIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-7080768452290664563" onmouseenter="enter('-7080768452290664563');" onmouseout="out('-7080768452290664563');" style="">1927                             (LauncherSettings.Favorites.TITLE);                                          </span>
<span class="-4350901823494792660" onmouseenter="enter('-4350901823494792660');" onmouseout="out('-4350901823494792660');" style="">1928                     final int iconTypeIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="3108347623629035166" onmouseenter="enter('3108347623629035166');" onmouseout="out('3108347623629035166');" style="">1929                             LauncherSettings.Favorites.ICON_TYPE);                                       </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">1930                     final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);      </span>
<span class="-3909234361304575452" onmouseenter="enter('-3909234361304575452');" onmouseout="out('-3909234361304575452');" style="">1931                     final int iconPackageIndex = c.getColumnIndexOrThrow(                                </span>
<span class="-6787190495105525864" onmouseenter="enter('-6787190495105525864');" onmouseout="out('-6787190495105525864');" style="">1932                             LauncherSettings.Favorites.ICON_PACKAGE);                                    </span>
<span class="7790246664646081463" onmouseenter="enter('7790246664646081463');" onmouseout="out('7790246664646081463');" style="">1933                     final int iconResourceIndex = c.getColumnIndexOrThrow(                               </span>
<span class="-1781116612765105159" onmouseenter="enter('-1781116612765105159');" onmouseout="out('-1781116612765105159');" style="">1934                             LauncherSettings.Favorites.ICON_RESOURCE);                                   </span>
<span class="3335971636920715852" onmouseenter="enter('3335971636920715852');" onmouseout="out('3335971636920715852');" style="">1935                     final int containerIndex = c.getColumnIndexOrThrow(                                  </span>
<span class="6570903028117113418" onmouseenter="enter('6570903028117113418');" onmouseout="out('6570903028117113418');" style="">1936                             LauncherSettings.Favorites.CONTAINER);                                       </span>
<span class="-8309152441179821869" onmouseenter="enter('-8309152441179821869');" onmouseout="out('-8309152441179821869');" style="">1937                     final int itemTypeIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="7255885825914282267" onmouseenter="enter('7255885825914282267');" onmouseout="out('7255885825914282267');" style="">1938                             LauncherSettings.Favorites.ITEM_TYPE);                                       </span>
<span class="-9034335384452522965" onmouseenter="enter('-9034335384452522965');" onmouseout="out('-9034335384452522965');" style="">1939                     final int appWidgetIdIndex = c.getColumnIndexOrThrow(                                </span>
<span class="6807201781176448908" onmouseenter="enter('6807201781176448908');" onmouseout="out('6807201781176448908');" style="">1940                             LauncherSettings.Favorites.APPWIDGET_ID);                                    </span>
<span class="-6125671603078297888" onmouseenter="enter('-6125671603078297888');" onmouseout="out('-6125671603078297888');" style="">1941                     final int appWidgetProviderIndex = c.getColumnIndexOrThrow(                          </span>
<span class="4426033877353236522" onmouseenter="enter('4426033877353236522');" onmouseout="out('4426033877353236522');" style="">1942                             LauncherSettings.Favorites.APPWIDGET_PROVIDER);                              </span>
<span class="-3079236723582024955" onmouseenter="enter('-3079236723582024955');" onmouseout="out('-3079236723582024955');" style="">1943                     final int screenIndex = c.getColumnIndexOrThrow(                                     </span>
<span class="-6667712815858132414" onmouseenter="enter('-6667712815858132414');" onmouseout="out('-6667712815858132414');" style="">1944                             LauncherSettings.Favorites.SCREEN);                                          </span>
<span class="-6867547874094352828" onmouseenter="enter('-6867547874094352828');" onmouseout="out('-6867547874094352828');" style="">1945                     final int cellXIndex = c.getColumnIndexOrThrow                                       </span>
<span class="5262774206366152748" onmouseenter="enter('5262774206366152748');" onmouseout="out('5262774206366152748');" style="">1946                             (LauncherSettings.Favorites.CELLX);                                          </span>
<span class="8831781951312982826" onmouseenter="enter('8831781951312982826');" onmouseout="out('8831781951312982826');" style="">1947                     final int cellYIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-5037082342925021952" onmouseenter="enter('-5037082342925021952');" onmouseout="out('-5037082342925021952');" style="">1948                             (LauncherSettings.Favorites.CELLY);                                          </span>
<span class="4727532435646923125" onmouseenter="enter('4727532435646923125');" onmouseout="out('4727532435646923125');" style="">1949                     final int spanXIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-4661771410814353054" onmouseenter="enter('-4661771410814353054');" onmouseout="out('-4661771410814353054');" style="">1950                             (LauncherSettings.Favorites.SPANX);                                          </span>
<span class="-2910068933310438864" onmouseenter="enter('-2910068933310438864');" onmouseout="out('-2910068933310438864');" style="">1951                     final int spanYIndex = c.getColumnIndexOrThrow(                                      </span>
<span class="99270330838913893" onmouseenter="enter('99270330838913893');" onmouseout="out('99270330838913893');" style="">1952                             LauncherSettings.Favorites.SPANY);                                           </span>
<span class="4436227568732015168" onmouseenter="enter('4436227568732015168');" onmouseout="out('4436227568732015168');" style="">1953                     final int restoredIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="6353272533239034373" onmouseenter="enter('6353272533239034373');" onmouseout="out('6353272533239034373');" style="">1954                             LauncherSettings.Favorites.RESTORED);                                        </span>
<span class="3162637821619353517" onmouseenter="enter('3162637821619353517');" onmouseout="out('3162637821619353517');" style="">1955                     final int profileIdIndex = c.getColumnIndexOrThrow(                                  </span>
<span class="-1125432391574533143" onmouseenter="enter('-1125432391574533143');" onmouseout="out('-1125432391574533143');" style="">1956                             LauncherSettings.Favorites.PROFILE_ID);                                      </span>
<span class="4456964937873623262" onmouseenter="enter('4456964937873623262');" onmouseout="out('4456964937873623262');" style="">1957                     //final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);      </span>
<span class="2905983584052764586" onmouseenter="enter('2905983584052764586');" onmouseout="out('2905983584052764586');" style="">1958                     //final int displayModeIndex = c.getColumnIndexOrThrow(                              </span>
<span class="-8556687182597342656" onmouseenter="enter('-8556687182597342656');" onmouseout="out('-8556687182597342656');" style="">1959                     //        LauncherSettings.Favorites.DISPLAY_MODE);                                  </span>
<span  style="">1960                                                                                                          </span>
<span class="-6687913296565100881" onmouseenter="enter('-6687913296565100881');" onmouseout="out('-6687913296565100881');" style="">1961                     ShortcutInfo info;                                                                   </span>
<span class="-4294155297126257121" onmouseenter="enter('-4294155297126257121');" onmouseout="out('-4294155297126257121');" style="">1962                     String intentDescription;                                                            </span>
<span class="1875374791140575019" onmouseenter="enter('1875374791140575019');" onmouseout="out('1875374791140575019');" style="">1963                     LauncherAppWidgetInfo appWidgetInfo;                                                 </span>
<span class="-7299509265635558160" onmouseenter="enter('-7299509265635558160');" onmouseout="out('-7299509265635558160');" style="">1964                     int container;                                                                       </span>
<span class="3268793718289878117" onmouseenter="enter('3268793718289878117');" onmouseout="out('3268793718289878117');" style="">1965                     long id;                                                                             </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">1966                     Intent intent;                                                                       </span>
<span class="8928715163618104503" onmouseenter="enter('8928715163618104503');" onmouseout="out('8928715163618104503');" style="">1967                     UserHandleCompat user;                                                               </span>
<span  style="">1968                                                                                                          </span>
<span class="1538645125823697533" onmouseenter="enter('1538645125823697533');" onmouseout="out('1538645125823697533');" style="">1969                     while (!mStopped &amp;&amp; c.moveToNext()) {                                                </span>
<span class="-3056870665611820276" onmouseenter="enter('-3056870665611820276');" onmouseout="out('-3056870665611820276');" style="">1970                         AtomicBoolean deleteOnInvalidPlacement = new AtomicBoolean(false);               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1971                         try {                                                                            </span>
<span class="-4443967809239824632" onmouseenter="enter('-4443967809239824632');" onmouseout="out('-4443967809239824632');" style="">1972                             int itemType = c.getInt(itemTypeIndex);                                      </span>
<span class="7426878920983746504" onmouseenter="enter('7426878920983746504');" onmouseout="out('7426878920983746504');" style="">1973                             boolean restored = 0 != c.getInt(restoredIndex);                             </span>
<span class="4933910026947534491" onmouseenter="enter('4933910026947534491');" onmouseout="out('4933910026947534491');" style="">1974                             boolean allowMissingTarget = false;                                          </span>
<span  style="">1975                                                                                                          </span>
<span class="-5665081285487591411" onmouseenter="enter('-5665081285487591411');" onmouseout="out('-5665081285487591411');" style="">1976                             switch (itemType) {                                                          </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1977                             case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                       </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1978                             case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                          </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1979                                 id = c.getLong(idIndex);                                                 </span>
<span class="8199742400390876563" onmouseenter="enter('8199742400390876563');" onmouseout="out('8199742400390876563');" style="">1980                                 intentDescription = c.getString(intentIndex);                            </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style="">1981                                 long serialNumber = c.getInt(profileIdIndex);                            </span>
<span class="-4273089527731895214" onmouseenter="enter('-4273089527731895214');" onmouseout="out('-4273089527731895214');" style="">1982                                 user = mUserManager.getUserForSerialNumber(serialNumber);                </span>
<span class="-3834292976309282984" onmouseenter="enter('-3834292976309282984');" onmouseout="out('-3834292976309282984');" style="">1983                                 int promiseType = c.getInt(restoredIndex);                               </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="">1984                                 if (user == null) {                                                      </span>
<span class="-496594084298695862" onmouseenter="enter('-496594084298695862');" onmouseout="out('-496594084298695862');" style="">1985                                     // User has been deleted remove the item.                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1986                                     itemsToRemove.add(id);                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1987                                     continue;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1988                                 }                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1989                                 try {                                                                    </span>
<span class="-1059471947143689601" onmouseenter="enter('-1059471947143689601');" onmouseout="out('-1059471947143689601');" style="">1990                                     intent = Intent.parseUri(intentDescription, 0);                      </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style="">1991                                     ComponentName cn = intent.getComponent();                            </span>
<span class="3739674956299895084" onmouseenter="enter('3739674956299895084');" onmouseout="out('3739674956299895084');" style="">1992                                     if (cn != null &amp;&amp; cn.getPackageName() != null) {                     </span>
<span class="-7017860263960771696" onmouseenter="enter('-7017860263960771696');" onmouseout="out('-7017860263960771696');" style="">1993                                         boolean validPkg = launcherApps.isPackageEnabledForProfile(      </span>
<span class="-8206530135326160205" onmouseenter="enter('-8206530135326160205');" onmouseout="out('-8206530135326160205');" style="">1994                                                 cn.getPackageName(), user);                              </span>
<span class="2397899750057092636" onmouseenter="enter('2397899750057092636');" onmouseout="out('2397899750057092636');" style="">1995                                         boolean validComponent = validPkg &amp;&amp;                             </span>
<span class="8762069982139369869" onmouseenter="enter('8762069982139369869');" onmouseout="out('8762069982139369869');" style="">1996                                                 launcherApps.isActivityEnabledForProfile(cn, user);      </span>
<span  style="">1997                                                                                                          </span>
<span class="-99499348404964068" onmouseenter="enter('-99499348404964068');" onmouseout="out('-99499348404964068');" style="">1998                                         if (validComponent) {                                            </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1999                                             if (restored) {                                              </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="">2000                                                 // no special handling necessary for this item           </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2001                                                 restoredRows.add(id);                                    </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2002                                                 restored = false;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2003                                             }                                                            </span>
<span class="6348728592662235672" onmouseenter="enter('6348728592662235672');" onmouseout="out('6348728592662235672');" style="">2004                                         } else if (validPkg) {                                           </span>
<span class="-6379280176207841217" onmouseenter="enter('-6379280176207841217');" onmouseout="out('-6379280176207841217');" style="">2005                                             intent = null;                                               </span>
<span class="-5338271721329837400" onmouseenter="enter('-5338271721329837400');" onmouseout="out('-5338271721329837400');" style="">2006                                             if ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {</span>
<span class="5709472974278481468" onmouseenter="enter('5709472974278481468');" onmouseout="out('5709472974278481468');" style="">2007                                                 // We allow auto install apps to have their intent       </span>
<span class="-2650685759805982432" onmouseenter="enter('-2650685759805982432');" onmouseout="out('-2650685759805982432');" style="">2008                                                 // updated after an install.                             </span>
<span class="-9107195642058231815" onmouseenter="enter('-9107195642058231815');" onmouseout="out('-9107195642058231815');" style="">2009                                                 intent = manager.getLaunchIntentForPackage(              </span>
<span class="2095835690487424293" onmouseenter="enter('2095835690487424293');" onmouseout="out('2095835690487424293');" style="">2010                                                         cn.getPackageName());                            </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="">2011                                                 if (intent != null) {                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2012                                                     ContentValues values = new ContentValues();          </span>
<span class="-1283328052029016277" onmouseenter="enter('-1283328052029016277');" onmouseout="out('-1283328052029016277');" style="">2013                                                     values.put(LauncherSettings.Favorites.INTENT,        </span>
<span class="-6799954997008316510" onmouseenter="enter('-6799954997008316510');" onmouseout="out('-6799954997008316510');" style="">2014                                                             intent.toUri(0));                            </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2015                                                     String where = BaseColumns._ID + &quot;= ?&quot;;              </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="">2016                                                     String[] args = {Long.toString(id)};                 </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style=""><abbr title="2017                                                     contentResolver.update(contentUri, values, where, args);">2017                                                     contentResolver.update(contentUri, values, where, arg</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2018                                                 }                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2019                                             }                                                            </span>
<span  style="">2020                                                                                                          </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">2021                                             if (intent == null) {                                        </span>
<span class="8006468267706457929" onmouseenter="enter('8006468267706457929');" onmouseout="out('8006468267706457929');" style="">2022                                                 // The app is installed but the component is no          </span>
<span class="7757985899517234268" onmouseenter="enter('7757985899517234268');" onmouseout="out('7757985899517234268');" style="">2023                                                 // longer available.                                     </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2024                                                 Launcher.addDumpLog(TAG,                                 </span>
<span class="-4265604912045441952" onmouseenter="enter('-4265604912045441952');" onmouseout="out('-4265604912045441952');" style="">2025                                                         &quot;Invalid component removed: &quot; + cn, true);       </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2026                                                 itemsToRemove.add(id);                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2027                                                 continue;                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2028                                             } else {                                                     </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="">2029                                                 // no special handling necessary for this item           </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2030                                                 restoredRows.add(id);                                    </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2031                                                 restored = false;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2032                                             }                                                            </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="">2033                                         } else if (restored) {                                           </span>
<span class="6723757088957997679" onmouseenter="enter('6723757088957997679');" onmouseout="out('6723757088957997679');" style="">2034                                             // Package is not yet available but might be                 </span>
<span class="9210943103787239320" onmouseenter="enter('9210943103787239320');" onmouseout="out('9210943103787239320');" style="">2035                                             // installed later.                                          </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2036                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="1853248294024116603" onmouseenter="enter('1853248294024116603');" onmouseout="out('1853248294024116603');" style="">2037                                                     &quot;package not yet restored: &quot; + cn, true);            </span>
<span  style="">2038                                                                                                          </span>
<span class="-3623786309000722140" onmouseenter="enter('-3623786309000722140');" onmouseout="out('-3623786309000722140');" style="">2039                                             if ((promiseType &amp; ShortcutInfo.FLAG_RESTORE_STARTED) != 0) {</span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="">2040                                                 // Restore has started once.                             </span>
<span class="-3201378748433506719" onmouseenter="enter('-3201378748433506719');" onmouseout="out('-3201378748433506719');" style="">2041                                             } else if (installingPkgs.contains(cn.getPackageName())) {   </span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="">2042                                                 // App restore has started. Update the flag              </span>
<span class="-8644667183049601729" onmouseenter="enter('-8644667183049601729');" onmouseout="out('-8644667183049601729');" style="">2043                                                 promiseType |= ShortcutInfo.FLAG_RESTORE_STARTED;        </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2044                                                 ContentValues values = new ContentValues();              </span>
<span class="-3056571748664136340" onmouseenter="enter('-3056571748664136340');" onmouseout="out('-3056571748664136340');" style="">2045                                                 values.put(LauncherSettings.Favorites.RESTORED,          </span>
<span class="-6746125005705027516" onmouseenter="enter('-6746125005705027516');" onmouseout="out('-6746125005705027516');" style="">2046                                                         promiseType);                                    </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2047                                                 String where = BaseColumns._ID + &quot;= ?&quot;;                  </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="">2048                                                 String[] args = {Long.toString(id)};                     </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2049                                                 contentResolver.update(contentUri, values, where, args); </span>
<span  style="">2050                                                                                                          </span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="">2051                                             } else if (REMOVE_UNRESTORED_ICONS) {                        </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2052                                                 Launcher.addDumpLog(TAG,                                 </span>
<span class="-4630254631341932691" onmouseenter="enter('-4630254631341932691');" onmouseout="out('-4630254631341932691');" style="">2053                                                         &quot;Unrestored package removed: &quot; + cn, true);      </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2054                                                 itemsToRemove.add(id);                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2055                                                 continue;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2056                                             }                                                            </span>
<span class="-1386874848571608329" onmouseenter="enter('-1386874848571608329');" onmouseout="out('-1386874848571608329');" style="">2057                                         } else if (isSdCardReady) {                                      </span>
<span class="3796946079469102110" onmouseenter="enter('3796946079469102110');" onmouseout="out('3796946079469102110');" style="">2058                                             // Do not wait for external media load anymore.              </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="">2059                                             // Log the invalid package, and remove it                    </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2060                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="556389557067898835" onmouseenter="enter('556389557067898835');" onmouseout="out('556389557067898835');" style="">2061                                                     &quot;Invalid package removed: &quot; + cn, true);             </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2062                                             itemsToRemove.add(id);                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2063                                             continue;                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2064                                         } else {                                                         </span>
<span class="1407932970386463384" onmouseenter="enter('1407932970386463384');" onmouseout="out('1407932970386463384');" style="">2065                                             // SdCard is not ready yet. Package might get available,     </span>
<span class="8490114520358161793" onmouseenter="enter('8490114520358161793');" onmouseout="out('8490114520358161793');" style="">2066                                             // once it is ready.                                         </span>
<span class="-6360577143290119906" onmouseenter="enter('-6360577143290119906');" onmouseout="out('-6360577143290119906');" style="">2067                                             Launcher.addDumpLog(TAG, &quot;Invalid package: &quot; + cn            </span>
<span class="-4780001113233310924" onmouseenter="enter('-4780001113233310924');" onmouseout="out('-4780001113233310924');" style="">2068                                                     + &quot; (check again later)&quot;, true);                     </span>
<span class="-8366417370187832083" onmouseenter="enter('-8366417370187832083');" onmouseout="out('-8366417370187832083');" style="">2069                                             HashSet&lt;String&gt; pkgs = sPendingPackages.get(user);           </span>
<span class="3542388323197199472" onmouseenter="enter('3542388323197199472');" onmouseout="out('3542388323197199472');" style="">2070                                             if (pkgs == null) {                                          </span>
<span class="2501092745877296895" onmouseenter="enter('2501092745877296895');" onmouseout="out('2501092745877296895');" style="">2071                                                 pkgs = new HashSet&lt;String&gt;();                            </span>
<span class="-7473793273553333759" onmouseenter="enter('-7473793273553333759');" onmouseout="out('-7473793273553333759');" style="">2072                                                 sPendingPackages.put(user, pkgs);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2073                                             }                                                            </span>
<span class="-4896386049384421066" onmouseenter="enter('-4896386049384421066');" onmouseout="out('-4896386049384421066');" style="">2074                                             pkgs.add(cn.getPackageName());                               </span>
<span class="-7690684901319719205" onmouseenter="enter('-7690684901319719205');" onmouseout="out('-7690684901319719205');" style="">2075                                             allowMissingTarget = true;                                   </span>
<span class="7315818939061071709" onmouseenter="enter('7315818939061071709');" onmouseout="out('7315818939061071709');" style="">2076                                             // Add the icon on the workspace anyway.                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2077                                         }                                                                </span>
<span class="-237996807879267337" onmouseenter="enter('-237996807879267337');" onmouseout="out('-237996807879267337');" style="">2078                                     } else if (cn == null) {                                             </span>
<span class="8972274794412921183" onmouseenter="enter('8972274794412921183');" onmouseout="out('8972274794412921183');" style="">2079                                         // For shortcuts with no component, keep them as they are        </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2080                                         restoredRows.add(id);                                            </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2081                                         restored = false;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2082                                     }                                                                    </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">2083                                 } catch (URISyntaxException e) {                                         </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2084                                     Launcher.addDumpLog(TAG,                                             </span>
<span class="-68540878136764174" onmouseenter="enter('-68540878136764174');" onmouseout="out('-68540878136764174');" style="">2085                                             &quot;Invalid uri: &quot; + intentDescription, true);                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2086                                     continue;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2087                                 }                                                                        </span>
<span  style="">2088                                                                                                          </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2089                                 if (restored) {                                                          </span>
<span class="-3932834939055806292" onmouseenter="enter('-3932834939055806292');" onmouseout="out('-3932834939055806292');" style="">2090                                     if (user.equals(UserHandleCompat.myUserHandle())) {                  </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2091                                         Launcher.addDumpLog(TAG,                                         </span>
<span class="-7520999071046454576" onmouseenter="enter('-7520999071046454576');" onmouseout="out('-7520999071046454576');" style="">2092                                                 &quot;constructing info for partially restored package&quot;,      </span>
<span class="-159362617709534437" onmouseenter="enter('-159362617709534437');" onmouseout="out('-159362617709534437');" style="">2093                                                 true);                                                   </span>
<span class="9114514411241404985" onmouseenter="enter('9114514411241404985');" onmouseout="out('9114514411241404985');" style="">2094                                         info = getRestoredItemInfo(c, titleIndex, intent, promiseType);  </span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="">2095                                         intent = getRestoredItemIntent(c, context, intent);              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2096                                     } else {                                                             </span>
<span class="5174235078557753913" onmouseenter="enter('5174235078557753913');" onmouseout="out('5174235078557753913');" style="">2097                                         // Don&#x27;t restore items for other profiles.                       </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2098                                         itemsToRemove.add(id);                                           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2099                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2100                                     }                                                                    </span>
<span class="2485815571182318046" onmouseenter="enter('2485815571182318046');" onmouseout="out('2485815571182318046');" style="">2101                                 } else if (itemType ==                                                   </span>
<span class="2369871960694556087" onmouseenter="enter('2369871960694556087');" onmouseout="out('2369871960694556087');" style="">2102                                         LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {              </span>
<span class="-7549941140075833136" onmouseenter="enter('-7549941140075833136');" onmouseout="out('-7549941140075833136');" style="">2103                                     info = getShortcutInfo(manager, intent, user, context, c,            </span>
<span class="-4574059466099335125" onmouseenter="enter('-4574059466099335125');" onmouseout="out('-4574059466099335125');" style="">2104                                             iconIndex, titleIndex, mLabelCache, allowMissingTarget);     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2105                                 } else {                                                                 </span>
<span class="-7258494880704199189" onmouseenter="enter('-7258494880704199189');" onmouseout="out('-7258494880704199189');" style="">2106                                     info = getShortcutInfo(c, context, iconTypeIndex,                    </span>
<span class="6962748064109777554" onmouseenter="enter('6962748064109777554');" onmouseout="out('6962748064109777554');" style="">2107                                             iconPackageIndex, iconResourceIndex, iconIndex,              </span>
<span class="-1562426884587851404" onmouseenter="enter('-1562426884587851404');" onmouseout="out('-1562426884587851404');" style="">2108                                             titleIndex);                                                 </span>
<span  style="">2109                                                                                                          </span>
<span class="8787316375412349400" onmouseenter="enter('8787316375412349400');" onmouseout="out('8787316375412349400');" style="">2110                                     // App shortcuts that used to be automatically added to Launcher     </span>
<span class="4423348586531939182" onmouseenter="enter('4423348586531939182');" onmouseout="out('4423348586531939182');" style="">2111                                     // didn&#x27;t always have the correct intent flags set, so do that       </span>
<span class="906874877447394391" onmouseenter="enter('906874877447394391');" onmouseout="out('906874877447394391');" style="">2112                                     // here                                                              </span>
<span class="-8302893811746412301" onmouseenter="enter('-8302893811746412301');" onmouseout="out('-8302893811746412301');" style="">2113                                     if (intent.getAction() != null &amp;&amp;                                    </span>
<span class="-6792431597223839871" onmouseenter="enter('-6792431597223839871');" onmouseout="out('-6792431597223839871');" style="">2114                                         intent.getCategories() != null &amp;&amp;                                </span>
<span class="-4482526573741019726" onmouseenter="enter('-4482526573741019726');" onmouseout="out('-4482526573741019726');" style="">2115                                         intent.getAction().equals(Intent.ACTION_MAIN) &amp;&amp;                 </span>
<span class="8802373298636081036" onmouseenter="enter('8802373298636081036');" onmouseout="out('8802373298636081036');" style="">2116                                         intent.getCategories().contains(Intent.CATEGORY_LAUNCHER)) {     </span>
<span class="-1437204964726011747" onmouseenter="enter('-1437204964726011747');" onmouseout="out('-1437204964726011747');" style="">2117                                         intent.addFlags(                                                 </span>
<span class="7533444403523837279" onmouseenter="enter('7533444403523837279');" onmouseout="out('7533444403523837279');" style="">2118                                             Intent.FLAG_ACTIVITY_NEW_TASK |                              </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">2119                                             Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2120                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2121                                 }                                                                        </span>
<span  style="">2122                                                                                                          </span>
<span class="-1845287058566655413" onmouseenter="enter('-1845287058566655413');" onmouseout="out('-1845287058566655413');" style="">2123                                 if (info != null) {                                                      </span>
<span class="-7372776081672801393" onmouseenter="enter('-7372776081672801393');" onmouseout="out('-7372776081672801393');" style="">2124                                     info.id = id;                                                        </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">2125                                     info.intent = intent;                                                </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2126                                     container = c.getInt(containerIndex);                                </span>
<span class="5031599210604047094" onmouseenter="enter('5031599210604047094');" onmouseout="out('5031599210604047094');" style="">2127                                     info.container = container;                                          </span>
<span class="8385513109144822406" onmouseenter="enter('8385513109144822406');" onmouseout="out('8385513109144822406');" style="">2128                                     info.screenId = c.getInt(screenIndex);                               </span>
<span class="8733666235794055799" onmouseenter="enter('8733666235794055799');" onmouseout="out('8733666235794055799');" style="">2129                                     info.cellX = c.getInt(cellXIndex);                                   </span>
<span class="4988345900238836581" onmouseenter="enter('4988345900238836581');" onmouseout="out('4988345900238836581');" style="">2130                                     info.cellY = c.getInt(cellYIndex);                                   </span>
<span class="6314319831626461685" onmouseenter="enter('6314319831626461685');" onmouseout="out('6314319831626461685');" style="">2131                                     info.spanX = 1;                                                      </span>
<span class="-7635592400178984643" onmouseenter="enter('-7635592400178984643');" onmouseout="out('-7635592400178984643');" style="">2132                                     info.spanY = 1;                                                      </span>
<span class="3045271753555441709" onmouseenter="enter('3045271753555441709');" onmouseout="out('3045271753555441709');" style="">2133                                     info.intent.putExtra(ItemInfo.EXTRA_PROFILE, serialNumber);          </span>
<span class="-4153270497324690681" onmouseenter="enter('-4153270497324690681');" onmouseout="out('-4153270497324690681');" style="">2134                                     info.isDisabled = isSafeMode                                         </span>
<span class="7337397009343704544" onmouseenter="enter('7337397009343704544');" onmouseout="out('7337397009343704544');" style="">2135                                             &amp;&amp; !Utilities.isSystemApp(context, intent);                  </span>
<span  style="">2136                                                                                                          </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2137                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2138                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="8488570468437690238" onmouseenter="enter('8488570468437690238');" onmouseout="out('8488570468437690238');" style="">2139                                     if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)) { </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2140                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2141                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2142                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2143                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2144                                     }                                                                    </span>
<span  style="">2145                                                                                                          </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2146                                     switch (container) {                                                 </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2147                                     case LauncherSettings.Favorites.CONTAINER_DESKTOP:                   </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2148                                     case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                   </span>
<span class="-3665356032627215639" onmouseenter="enter('-3665356032627215639');" onmouseout="out('-3665356032627215639');" style="">2149                                         sBgWorkspaceItems.add(info);                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2150                                         break;                                                           </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">2151                                     default:                                                             </span>
<span class="3928258456344537563" onmouseenter="enter('3928258456344537563');" onmouseout="out('3928258456344537563');" style="">2152                                         // Item is in a user folder                                      </span>
<span class="7253808449036323039" onmouseenter="enter('7253808449036323039');" onmouseout="out('7253808449036323039');" style="">2153                                         FolderInfo folderInfo =                                          </span>
<span class="5827700611550420594" onmouseenter="enter('5827700611550420594');" onmouseout="out('5827700611550420594');" style="">2154                                                 findOrMakeFolder(sBgFolders, container);                 </span>
<span class="4210631970925384436" onmouseenter="enter('4210631970925384436');" onmouseout="out('4210631970925384436');" style="">2155                                         folderInfo.add(info);                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2156                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2157                                     }                                                                    </span>
<span class="-3593974647070903374" onmouseenter="enter('-3593974647070903374');" onmouseout="out('-3593974647070903374');" style="">2158                                     sBgItemsIdMap.put(info.id, info);                                    </span>
<span  style="">2159                                                                                                          </span>
<span class="-8292894264257510493" onmouseenter="enter('-8292894264257510493');" onmouseout="out('-8292894264257510493');" style="">2160                                     // now that we&#x27;ve loaded everthing re-save it with the               </span>
<span class="-1917607236140731811" onmouseenter="enter('-1917607236140731811');" onmouseout="out('-1917607236140731811');" style="">2161                                     // icon in case it disappears somehow.                               </span>
<span class="-3056528193758781985" onmouseenter="enter('-3056528193758781985');" onmouseout="out('-3056528193758781985');" style="">2162                                     queueIconToBeChecked(sBgDbIconCache, info, c, iconIndex);            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2163                                 } else {                                                                 </span>
<span class="477637279977673890" onmouseenter="enter('477637279977673890');" onmouseout="out('477637279977673890');" style="">2164                                     throw new RuntimeException(&quot;Unexpected null ShortcutInfo&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2165                                 }                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2166                                 break;                                                                   </span>
<span  style="">2167                                                                                                          </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">2168                             case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                            </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2169                                 id = c.getLong(idIndex);                                                 </span>
<span class="-711784092642716417" onmouseenter="enter('-711784092642716417');" onmouseout="out('-711784092642716417');" style="">2170                                 FolderInfo folderInfo = findOrMakeFolder(sBgFolders, id);                </span>
<span  style="">2171                                                                                                          </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">2172                                 folderInfo.title = c.getString(titleIndex);                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">2173                                 folderInfo.id = id;                                                      </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2174                                 container = c.getInt(containerIndex);                                    </span>
<span class="-7029361904102133577" onmouseenter="enter('-7029361904102133577');" onmouseout="out('-7029361904102133577');" style="">2175                                 folderInfo.container = container;                                        </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">2176                                 folderInfo.screenId = c.getInt(screenIndex);                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">2177                                 folderInfo.cellX = c.getInt(cellXIndex);                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">2178                                 folderInfo.cellY = c.getInt(cellYIndex);                                 </span>
<span class="5610283855861400391" onmouseenter="enter('5610283855861400391');" onmouseout="out('5610283855861400391');" style="">2179                                 folderInfo.spanX = 1;                                                    </span>
<span class="-3495026741287589829" onmouseenter="enter('-3495026741287589829');" onmouseout="out('-3495026741287589829');" style="">2180                                 folderInfo.spanY = 1;                                                    </span>
<span  style="">2181                                                                                                          </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2182                                 // check &amp; update map of what&#x27;s occupied                                 </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2183                                 deleteOnInvalidPlacement.set(false);                                     </span>
<span class="-7285209150210174951" onmouseenter="enter('-7285209150210174951');" onmouseout="out('-7285209150210174951');" style="">2184                                 if (!checkItemPlacement(occupied, folderInfo,                            </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2185                                         deleteOnInvalidPlacement)) {                                     </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2186                                     if (deleteOnInvalidPlacement.get()) {                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2187                                         itemsToRemove.add(id);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2188                                     }                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2189                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2190                                 }                                                                        </span>
<span  style="">2191                                                                                                          </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2192                                 switch (container) {                                                     </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2193                                     case LauncherSettings.Favorites.CONTAINER_DESKTOP:                   </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2194                                     case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                   </span>
<span class="-8699935089398023363" onmouseenter="enter('-8699935089398023363');" onmouseout="out('-8699935089398023363');" style="">2195                                         sBgWorkspaceItems.add(folderInfo);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2196                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2197                                 }                                                                        </span>
<span  style="">2198                                                                                                          </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2199                                 if (restored) {                                                          </span>
<span class="-4442362781295313201" onmouseenter="enter('-4442362781295313201');" onmouseout="out('-4442362781295313201');" style="">2200                                     // no special handling required for restored folders                 </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2201                                     restoredRows.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2202                                 }                                                                        </span>
<span  style="">2203                                                                                                          </span>
<span class="-3375208674862622715" onmouseenter="enter('-3375208674862622715');" onmouseout="out('-3375208674862622715');" style="">2204                                 sBgItemsIdMap.put(folderInfo.id, folderInfo);                            </span>
<span class="642717865586237287" onmouseenter="enter('642717865586237287');" onmouseout="out('642717865586237287');" style="">2205                                 sBgFolders.put(folderInfo.id, folderInfo);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2206                                 break;                                                                   </span>
<span  style="">2207                                                                                                          </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">2208                             case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                         </span>
<span class="-7956270215965694003" onmouseenter="enter('-7956270215965694003');" onmouseout="out('-7956270215965694003');" style="">2209                                 // Read all Launcher-specific widget details                             </span>
<span class="-1812352292626846958" onmouseenter="enter('-1812352292626846958');" onmouseout="out('-1812352292626846958');" style="">2210                                 int appWidgetId = c.getInt(appWidgetIdIndex);                            </span>
<span class="7731617805561144619" onmouseenter="enter('7731617805561144619');" onmouseout="out('7731617805561144619');" style="">2211                                 String savedProvider = c.getString(appWidgetProviderIndex);              </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2212                                 id = c.getLong(idIndex);                                                 </span>
<span class="-6617867489767824559" onmouseenter="enter('-6617867489767824559');" onmouseout="out('-6617867489767824559');" style="">2213                                 final ComponentName component =                                          </span>
<span class="2036133433071881641" onmouseenter="enter('2036133433071881641');" onmouseout="out('2036133433071881641');" style="">2214                                         ComponentName.unflattenFromString(savedProvider);                </span>
<span  style="">2215                                                                                                          </span>
<span class="-1033311611191387821" onmouseenter="enter('-1033311611191387821');" onmouseout="out('-1033311611191387821');" style="">2216                                 final int restoreStatus = c.getInt(restoredIndex);                       </span>
<span class="-4190680795845516969" onmouseenter="enter('-4190680795845516969');" onmouseout="out('-4190680795845516969');" style="">2217                                 final boolean isIdValid = (restoreStatus &amp;                               </span>
<span class="-1481780029747642556" onmouseenter="enter('-1481780029747642556');" onmouseout="out('-1481780029747642556');" style="">2218                                         LauncherAppWidgetInfo.FLAG_ID_NOT_VALID) == 0;                   </span>
<span  style="">2219                                                                                                          </span>
<span class="5101880033416706570" onmouseenter="enter('5101880033416706570');" onmouseout="out('5101880033416706570');" style="">2220                                 final boolean wasProviderReady = (restoreStatus &amp;                        </span>
<span class="1207335416094145871" onmouseenter="enter('1207335416094145871');" onmouseout="out('1207335416094145871');" style="">2221                                         LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY) == 0;             </span>
<span  style="">2222                                                                                                          </span>
<span class="-565532021680206913" onmouseenter="enter('-565532021680206913');" onmouseout="out('-565532021680206913');" style="">2223                                 final AppWidgetProviderInfo provider = isIdValid                         </span>
<span class="-1314040982621159070" onmouseenter="enter('-1314040982621159070');" onmouseout="out('-1314040982621159070');" style="">2224                                         ? widgets.getAppWidgetInfo(appWidgetId)                          </span>
<span class="-5208038715710523064" onmouseenter="enter('-5208038715710523064');" onmouseout="out('-5208038715710523064');" style="">2225                                         : findAppWidgetProviderInfoWithComponent(context, component);    </span>
<span  style="">2226                                                                                                          </span>
<span class="-3732530231777271434" onmouseenter="enter('-3732530231777271434');" onmouseout="out('-3732530231777271434');" style="">2227                                 final boolean isProviderReady = isValidProvider(provider);               </span>
<span class="-4031276934674956730" onmouseenter="enter('-4031276934674956730');" onmouseout="out('-4031276934674956730');" style="">2228                                 if (!isSafeMode &amp;&amp; wasProviderReady &amp;&amp; !isProviderReady) {               </span>
<span class="-7439259826635164411" onmouseenter="enter('-7439259826635164411');" onmouseout="out('-7439259826635164411');" style="">2229                                     String log = &quot;Deleting widget that isn&#x27;t installed anymore: &quot;        </span>
<span class="7602710093107620029" onmouseenter="enter('7602710093107620029');" onmouseout="out('7602710093107620029');" style="">2230                                             + &quot;id=&quot; + id + &quot; appWidgetId=&quot; + appWidgetId;                </span>
<span class="-1161653447976501517" onmouseenter="enter('-1161653447976501517');" onmouseout="out('-1161653447976501517');" style="">2231                                     Log.e(TAG, log);                                                     </span>
<span class="-8769286334876902652" onmouseenter="enter('-8769286334876902652');" onmouseout="out('-8769286334876902652');" style="">2232                                     Launcher.addDumpLog(TAG, log, false);                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2233                                     itemsToRemove.add(id);                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2234                                 } else {                                                                 </span>
<span class="-6990378869891346567" onmouseenter="enter('-6990378869891346567');" onmouseout="out('-6990378869891346567');" style="">2235                                     if (isProviderReady) {                                               </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="">2236                                         appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,           </span>
<span class="-1699940082949791423" onmouseenter="enter('-1699940082949791423');" onmouseout="out('-1699940082949791423');" style="">2237                                                 provider.provider);                                      </span>
<span class="-8791440271290591158" onmouseenter="enter('-8791440271290591158');" onmouseout="out('-8791440271290591158');" style="">2238                                         int[] minSpan =                                                  </span>
<span class="-461068380011135868" onmouseenter="enter('-461068380011135868');" onmouseout="out('-461068380011135868');" style="">2239                                                 Launcher.getMinSpanForWidget(context, provider);         </span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="">2240                                         appWidgetInfo.minSpanX = minSpan[0];                             </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="">2241                                         appWidgetInfo.minSpanY = minSpan[1];                             </span>
<span  style="">2242                                                                                                          </span>
<span class="-4125236257298908421" onmouseenter="enter('-4125236257298908421');" onmouseout="out('-4125236257298908421');" style="">2243                                         int status = restoreStatus;                                      </span>
<span class="7579397535150427943" onmouseenter="enter('7579397535150427943');" onmouseout="out('7579397535150427943');" style="">2244                                         if (!wasProviderReady) {                                         </span>
<span class="1257696726614810242" onmouseenter="enter('1257696726614810242');" onmouseout="out('1257696726614810242');" style="">2245                                             // If provider was not previously ready, update the          </span>
<span class="2493747474831820434" onmouseenter="enter('2493747474831820434');" onmouseout="out('2493747474831820434');" style="">2246                                             // status and UI flag.                                       </span>
<span  style="">2247                                                                                                          </span>
<span class="-551194396664004778" onmouseenter="enter('-551194396664004778');" onmouseout="out('-551194396664004778');" style=""><abbr title="2248                                             // Id would be valid only if the widget restore broadcast was received.">2248                                             // Id would be valid only if the widget restore broadcast was</abbr></span>
<span class="877884548755909685" onmouseenter="enter('877884548755909685');" onmouseout="out('877884548755909685');" style="">2249                                             if (isIdValid) {                                             </span>
<span class="7708410681175562751" onmouseenter="enter('7708410681175562751');" onmouseout="out('7708410681175562751');" style="">2250                                                 status = LauncherAppWidgetInfo.RESTORE_COMPLETED;        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2251                                             } else {                                                     </span>
<span class="-2615385138309932511" onmouseenter="enter('-2615385138309932511');" onmouseout="out('-2615385138309932511');" style="">2252                                                 status &amp;= ~LauncherAppWidgetInfo                         </span>
<span class="-1081946781001842885" onmouseenter="enter('-1081946781001842885');" onmouseout="out('-1081946781001842885');" style="">2253                                                         .FLAG_PROVIDER_NOT_READY;                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2254                                             }                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2255                                         }                                                                </span>
<span class="-5649718664209503492" onmouseenter="enter('-5649718664209503492');" onmouseout="out('-5649718664209503492');" style="">2256                                         appWidgetInfo.restoreStatus = status;                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2257                                     } else {                                                             </span>
<span class="1960922256572910963" onmouseenter="enter('1960922256572910963');" onmouseout="out('1960922256572910963');" style="">2258                                         Log.v(TAG, &quot;Widget restore pending id=&quot; + id                     </span>
<span class="-310807007133679357" onmouseenter="enter('-310807007133679357');" onmouseout="out('-310807007133679357');" style="">2259                                                 + &quot; appWidgetId=&quot; + appWidgetId                          </span>
<span class="-3553458184285370274" onmouseenter="enter('-3553458184285370274');" onmouseout="out('-3553458184285370274');" style="">2260                                                 + &quot; status =&quot; + restoreStatus);                          </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="">2261                                         appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,           </span>
<span class="-876368090679524620" onmouseenter="enter('-876368090679524620');" onmouseout="out('-876368090679524620');" style="">2262                                                 component);                                              </span>
<span class="5437344546404607904" onmouseenter="enter('5437344546404607904');" onmouseout="out('5437344546404607904');" style="">2263                                         appWidgetInfo.restoreStatus = restoreStatus;                     </span>
<span  style="">2264                                                                                                          </span>
<span class="3064749011557231100" onmouseenter="enter('3064749011557231100');" onmouseout="out('3064749011557231100');" style=""><abbr title="2265                                         if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_STARTED) != 0) {">2265                                         if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_STARTED) </abbr></span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="">2266                                             // Restore has started once.                                 </span>
<span class="1863960885189711466" onmouseenter="enter('1863960885189711466');" onmouseout="out('1863960885189711466');" style="">2267                                         } else if (installingPkgs.contains(component.getPackageName())) {</span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="">2268                                             // App restore has started. Update the flag                  </span>
<span class="-2352323974911641075" onmouseenter="enter('-2352323974911641075');" onmouseout="out('-2352323974911641075');" style="">2269                                             appWidgetInfo.restoreStatus |=                               </span>
<span class="8590583015720742314" onmouseenter="enter('8590583015720742314');" onmouseout="out('8590583015720742314');" style="">2270                                                     LauncherAppWidgetInfo.FLAG_RESTORE_STARTED;          </span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="">2271                                         } else if (REMOVE_UNRESTORED_ICONS) {                            </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2272                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="-6243477493514584052" onmouseenter="enter('-6243477493514584052');" onmouseout="out('-6243477493514584052');" style="">2273                                                     &quot;Unrestored widget removed: &quot; + component, true);    </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2274                                             itemsToRemove.add(id);                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2275                                             continue;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2276                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2277                                     }                                                                    </span>
<span  style="">2278                                                                                                          </span>
<span class="-3490214853915757695" onmouseenter="enter('-3490214853915757695');" onmouseout="out('-3490214853915757695');" style="">2279                                     appWidgetInfo.id = id;                                               </span>
<span class="-299823112742514494" onmouseenter="enter('-299823112742514494');" onmouseout="out('-299823112742514494');" style="">2280                                     appWidgetInfo.screenId = c.getInt(screenIndex);                      </span>
<span class="-3031374252236192886" onmouseenter="enter('-3031374252236192886');" onmouseout="out('-3031374252236192886');" style="">2281                                     appWidgetInfo.cellX = c.getInt(cellXIndex);                          </span>
<span class="-6373958662014470902" onmouseenter="enter('-6373958662014470902');" onmouseout="out('-6373958662014470902');" style="">2282                                     appWidgetInfo.cellY = c.getInt(cellYIndex);                          </span>
<span class="-1172974300892817728" onmouseenter="enter('-1172974300892817728');" onmouseout="out('-1172974300892817728');" style="">2283                                     appWidgetInfo.spanX = c.getInt(spanXIndex);                          </span>
<span class="948367348399442562" onmouseenter="enter('948367348399442562');" onmouseout="out('948367348399442562');" style="">2284                                     appWidgetInfo.spanY = c.getInt(spanYIndex);                          </span>
<span  style="">2285                                                                                                          </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2286                                     container = c.getInt(containerIndex);                                </span>
<span class="8804482754730728288" onmouseenter="enter('8804482754730728288');" onmouseout="out('8804482754730728288');" style="">2287                                     if (container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;     </span>
<span class="-8875646165072629077" onmouseenter="enter('-8875646165072629077');" onmouseout="out('-8875646165072629077');" style="">2288                                         container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {     </span>
<span class="8088576139032825639" onmouseenter="enter('8088576139032825639');" onmouseout="out('8088576139032825639');" style="">2289                                         Log.e(TAG, &quot;Widget found where container != &quot; +                  </span>
<span class="8462700098092543731" onmouseenter="enter('8462700098092543731');" onmouseout="out('8462700098092543731');" style="">2290                                             &quot;CONTAINER_DESKTOP nor CONTAINER_HOTSEAT - ignoring!&quot;);      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2291                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2292                                     }                                                                    </span>
<span  style="">2293                                                                                                          </span>
<span class="3497044279011134930" onmouseenter="enter('3497044279011134930');" onmouseout="out('3497044279011134930');" style="">2294                                     appWidgetInfo.container = c.getInt(containerIndex);                  </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2295                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2296                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="8646654463595497950" onmouseenter="enter('8646654463595497950');" onmouseout="out('8646654463595497950');" style="">2297                                     if (!checkItemPlacement(occupied, appWidgetInfo,                     </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2298                                             deleteOnInvalidPlacement)) {                                 </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2299                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2300                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2301                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2302                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2303                                     }                                                                    </span>
<span  style="">2304                                                                                                          </span>
<span class="-8698298148744232980" onmouseenter="enter('-8698298148744232980');" onmouseout="out('-8698298148744232980');" style="">2305                                     String providerName = appWidgetInfo.providerName.flattenToString();  </span>
<span class="2853568002576356463" onmouseenter="enter('2853568002576356463');" onmouseout="out('2853568002576356463');" style="">2306                                     if (!providerName.equals(savedProvider) ||                           </span>
<span class="4338446659263892125" onmouseenter="enter('4338446659263892125');" onmouseout="out('4338446659263892125');" style="">2307                                             (appWidgetInfo.restoreStatus != restoreStatus)) {            </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2308                                         ContentValues values = new ContentValues();                      </span>
<span class="-1769279011780203877" onmouseenter="enter('-1769279011780203877');" onmouseout="out('-1769279011780203877');" style="">2309                                         values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER,        </span>
<span class="-4101567385035018098" onmouseenter="enter('-4101567385035018098');" onmouseout="out('-4101567385035018098');" style="">2310                                                 providerName);                                           </span>
<span class="-3056571748664136340" onmouseenter="enter('-3056571748664136340');" onmouseout="out('-3056571748664136340');" style="">2311                                         values.put(LauncherSettings.Favorites.RESTORED,                  </span>
<span class="6174833257706459781" onmouseenter="enter('6174833257706459781');" onmouseout="out('6174833257706459781');" style="">2312                                                 appWidgetInfo.restoreStatus);                            </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2313                                         String where = BaseColumns._ID + &quot;= ?&quot;;                          </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="">2314                                         String[] args = {Long.toString(id)};                             </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2315                                         contentResolver.update(contentUri, values, where, args);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2316                                     }                                                                    </span>
<span class="-5618854840311135348" onmouseenter="enter('-5618854840311135348');" onmouseout="out('-5618854840311135348');" style="">2317                                     sBgItemsIdMap.put(appWidgetInfo.id, appWidgetInfo);                  </span>
<span class="-6085617845739613540" onmouseenter="enter('-6085617845739613540');" onmouseout="out('-6085617845739613540');" style="">2318                                     sBgAppWidgets.add(appWidgetInfo);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2319                                 }                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2320                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2321                             }                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2322                         } catch (Exception e) {                                                          </span>
<span class="5473197829797399592" onmouseenter="enter('5473197829797399592');" onmouseout="out('5473197829797399592');" style="">2323                             Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted&quot;, e, true);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2324                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2325                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2326                 } finally {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2327                     if (c != null) {                                                                     </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2328                         c.close();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2329                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2330                 }                                                                                        </span>
<span  style="">2331                                                                                                          </span>
<span class="3320499870953658089" onmouseenter="enter('3320499870953658089');" onmouseout="out('3320499870953658089');" style="">2332                 // Break early if we&#x27;ve stopped loading                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2333                 if (mStopped) {                                                                          </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2334                     clearSBgDataStructures();                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2335                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2336                 }                                                                                        </span>
<span  style="">2337                                                                                                          </span>
<span class="-1044970196577970229" onmouseenter="enter('-1044970196577970229');" onmouseout="out('-1044970196577970229');" style="">2338                 if (itemsToRemove.size() &gt; 0) {                                                          </span>
<span class="5677517768170489521" onmouseenter="enter('5677517768170489521');" onmouseout="out('5677517768170489521');" style="">2339                     ContentProviderClient client = contentResolver.acquireContentProviderClient(         </span>
<span class="3143035230192904555" onmouseenter="enter('3143035230192904555');" onmouseout="out('3143035230192904555');" style="">2340                             contentUri);                                                                 </span>
<span class="-6328990658741073682" onmouseenter="enter('-6328990658741073682');" onmouseout="out('-6328990658741073682');" style="">2341                     // Remove dead items                                                                 </span>
<span class="-2206673557334024830" onmouseenter="enter('-2206673557334024830');" onmouseout="out('-2206673557334024830');" style="">2342                     for (long id : itemsToRemove) {                                                      </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2343                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1693656419727492070" onmouseenter="enter('1693656419727492070');" onmouseout="out('1693656419727492070');" style="">2344                             Log.d(TAG, &quot;Removed id = &quot; + id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2345                         }                                                                                </span>
<span class="-756547997470617115" onmouseenter="enter('-756547997470617115');" onmouseout="out('-756547997470617115');" style="">2346                         // Don&#x27;t notify content observers                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2347                         try {                                                                            </span>
<span class="-2525008622658612811" onmouseenter="enter('-2525008622658612811');" onmouseout="out('-2525008622658612811');" style="">2348                             client.delete(LauncherSettings.Favorites.getContentUri(id, false),           </span>
<span class="789653475627010164" onmouseenter="enter('789653475627010164');" onmouseout="out('789653475627010164');" style="">2349                                     null, null);                                                         </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2350                         } catch (RemoteException e) {                                                    </span>
<span class="1576133554677134200" onmouseenter="enter('1576133554677134200');" onmouseout="out('1576133554677134200');" style="">2351                             Log.w(TAG, &quot;Could not remove id = &quot; + id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2352                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2353                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2354                 }                                                                                        </span>
<span  style="">2355                                                                                                          </span>
<span class="5384601782943406631" onmouseenter="enter('5384601782943406631');" onmouseout="out('5384601782943406631');" style="">2356                 if (restoredRows.size() &gt; 0) {                                                           </span>
<span class="-7146881939578869751" onmouseenter="enter('-7146881939578869751');" onmouseout="out('-7146881939578869751');" style="">2357                     ContentProviderClient updater = contentResolver.acquireContentProviderClient(        </span>
<span class="3143035230192904555" onmouseenter="enter('3143035230192904555');" onmouseout="out('3143035230192904555');" style="">2358                             contentUri);                                                                 </span>
<span class="7218829760546841504" onmouseenter="enter('7218829760546841504');" onmouseout="out('7218829760546841504');" style="">2359                     // Update restored items that no longer require special handling                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2360                     try {                                                                                </span>
<span class="-9131750597640912652" onmouseenter="enter('-9131750597640912652');" onmouseout="out('-9131750597640912652');" style="">2361                         StringBuilder selectionBuilder = new StringBuilder();                            </span>
<span class="-2095273116509361612" onmouseenter="enter('-2095273116509361612');" onmouseout="out('-2095273116509361612');" style="">2362                         selectionBuilder.append(LauncherSettings.Favorites._ID);                         </span>
<span class="6461653116160679746" onmouseenter="enter('6461653116160679746');" onmouseout="out('6461653116160679746');" style="">2363                         selectionBuilder.append(&quot; IN (&quot;);                                                </span>
<span class="5779162458108712939" onmouseenter="enter('5779162458108712939');" onmouseout="out('5779162458108712939');" style="">2364                         selectionBuilder.append(TextUtils.join(&quot;, &quot;, restoredRows));                     </span>
<span class="-266914319355369866" onmouseenter="enter('-266914319355369866');" onmouseout="out('-266914319355369866');" style="">2365                         selectionBuilder.append(&quot;)&quot;);                                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2366                         ContentValues values = new ContentValues();                                      </span>
<span class="-8469115157851156621" onmouseenter="enter('-8469115157851156621');" onmouseout="out('-8469115157851156621');" style="">2367                         values.put(LauncherSettings.Favorites.RESTORED, 0);                              </span>
<span class="5986100348417061644" onmouseenter="enter('5986100348417061644');" onmouseout="out('5986100348417061644');" style="">2368                         updater.update(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,           </span>
<span class="-593768018781143118" onmouseenter="enter('-593768018781143118');" onmouseout="out('-593768018781143118');" style="">2369                                 values, selectionBuilder.toString(), null);                              </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2370                     } catch (RemoteException e) {                                                        </span>
<span class="-2048384695223094681" onmouseenter="enter('-2048384695223094681');" onmouseout="out('-2048384695223094681');" style="">2371                         Log.w(TAG, &quot;Could not update restored rows&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2372                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2373                 }                                                                                        </span>
<span  style="">2374                                                                                                          </span>
<span class="-5457196494236388113" onmouseenter="enter('-5457196494236388113');" onmouseout="out('-5457196494236388113');" style="">2375                 if (!isSdCardReady &amp;&amp; !sPendingPackages.isEmpty()) {                                     </span>
<span class="371670048052179208" onmouseenter="enter('371670048052179208');" onmouseout="out('371670048052179208');" style="">2376                     context.registerReceiver(new AppsAvailabilityCheck(),                                </span>
<span class="-2250957496563467306" onmouseenter="enter('-2250957496563467306');" onmouseout="out('-2250957496563467306');" style="">2377                             new IntentFilter(StartupReceiver.SYSTEM_READY),                              </span>
<span class="-5536809824571506033" onmouseenter="enter('-5536809824571506033');" onmouseout="out('-5536809824571506033');" style="">2378                             null, sWorker);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2379                 }                                                                                        </span>
<span  style="">2380                                                                                                          </span>
<span class="-4804263783578470698" onmouseenter="enter('-4804263783578470698');" onmouseout="out('-4804263783578470698');" style="">2381                 if (loadedOldDb) {                                                                       </span>
<span class="7600073100480404232" onmouseenter="enter('7600073100480404232');" onmouseout="out('7600073100480404232');" style="">2382                     long maxScreenId = 0;                                                                </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2383                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2384                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2385                         long screenId = item.screenId;                                                   </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2386                         if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;            </span>
<span class="2624616925341674614" onmouseenter="enter('2624616925341674614');" onmouseout="out('2624616925341674614');" style="">2387                                 !sBgWorkspaceScreens.contains(screenId)) {                               </span>
<span class="-7031445051311703943" onmouseenter="enter('-7031445051311703943');" onmouseout="out('-7031445051311703943');" style="">2388                             sBgWorkspaceScreens.add(screenId);                                           </span>
<span class="3854679960473080150" onmouseenter="enter('3854679960473080150');" onmouseout="out('3854679960473080150');" style="">2389                             if (screenId &gt; maxScreenId) {                                                </span>
<span class="1021049293401799489" onmouseenter="enter('1021049293401799489');" onmouseout="out('1021049293401799489');" style="">2390                                 maxScreenId = screenId;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2391                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2392                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2393                     }                                                                                    </span>
<span class="6350361387624057443" onmouseenter="enter('6350361387624057443');" onmouseout="out('6350361387624057443');" style="">2394                     Collections.sort(sBgWorkspaceScreens);                                               </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2395                     // Log to disk                                                                       </span>
<span class="866898408466051726" onmouseenter="enter('866898408466051726');" onmouseout="out('866898408466051726');" style="">2396                     Launcher.addDumpLog(TAG, &quot;11683562 -   maxScreenId: &quot; + maxScreenId, true);          </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2397                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                      </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2398                             TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                            </span>
<span  style="">2399                                                                                                          </span>
<span class="7230913638388732518" onmouseenter="enter('7230913638388732518');" onmouseout="out('7230913638388732518');" style="">2400                     LauncherAppState.getLauncherProvider().updateMaxScreenId(maxScreenId);               </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2401                     updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                            </span>
<span  style="">2402                                                                                                          </span>
<span class="7660079450024453672" onmouseenter="enter('7660079450024453672');" onmouseout="out('7660079450024453672');" style="">2403                     // Update the max item id after we load an old db                                    </span>
<span class="-1395936485676380465" onmouseenter="enter('-1395936485676380465');" onmouseout="out('-1395936485676380465');" style="">2404                     long maxItemId = 0;                                                                  </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2405                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2406                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="570221416877950678" onmouseenter="enter('570221416877950678');" onmouseout="out('570221416877950678');" style="">2407                         maxItemId = Math.max(maxItemId, item.id);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2408                     }                                                                                    </span>
<span class="-9163109107539651846" onmouseenter="enter('-9163109107539651846');" onmouseout="out('-9163109107539651846');" style="">2409                     LauncherAppState.getLauncherProvider().updateMaxItemId(maxItemId);                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2410                 } else {                                                                                 </span>
<span class="-2685559954044032059" onmouseenter="enter('-2685559954044032059');" onmouseout="out('-2685559954044032059');" style="">2411                     TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(mContext);            </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">2412                     for (Integer i : orderedScreens.keySet()) {                                          </span>
<span class="6018672691004586758" onmouseenter="enter('6018672691004586758');" onmouseout="out('6018672691004586758');" style="">2413                         sBgWorkspaceScreens.add(orderedScreens.get(i));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2414                     }                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2415                     // Log to disk                                                                       </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2416                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                      </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2417                             TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                            </span>
<span  style="">2418                                                                                                          </span>
<span class="4349099944219760178" onmouseenter="enter('4349099944219760178');" onmouseout="out('4349099944219760178');" style="">2419                     // Remove any empty screens                                                          </span>
<span class="4802911702169047278" onmouseenter="enter('4802911702169047278');" onmouseout="out('4802911702169047278');" style="">2420                     ArrayList&lt;Long&gt; unusedScreens = new ArrayList&lt;Long&gt;(sBgWorkspaceScreens);            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2421                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2422                         long screenId = item.screenId;                                                   </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2423                         if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;            </span>
<span class="2084246428391599841" onmouseenter="enter('2084246428391599841');" onmouseout="out('2084246428391599841');" style="">2424                                 unusedScreens.contains(screenId)) {                                      </span>
<span class="2563817896724806900" onmouseenter="enter('2563817896724806900');" onmouseout="out('2563817896724806900');" style="">2425                             unusedScreens.remove(screenId);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2426                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2427                     }                                                                                    </span>
<span  style="">2428                                                                                                          </span>
<span class="589140823506694046" onmouseenter="enter('589140823506694046');" onmouseout="out('589140823506694046');" style="">2429                     // If there are any empty screens remove them, and update.                           </span>
<span class="-6359391369875412389" onmouseenter="enter('-6359391369875412389');" onmouseout="out('-6359391369875412389');" style="">2430                     if (unusedScreens.size() != 0) {                                                     </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2431                         // Log to disk                                                                   </span>
<span class="7523849534574985307" onmouseenter="enter('7523849534574985307');" onmouseout="out('7523849534574985307');" style="">2432                         Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; +        </span>
<span class="-5777150032383965255" onmouseenter="enter('-5777150032383965255');" onmouseout="out('-5777150032383965255');" style="">2433                                 TextUtils.join(&quot;, &quot;, unusedScreens), true);                              </span>
<span  style="">2434                                                                                                          </span>
<span class="672027419163159367" onmouseenter="enter('672027419163159367');" onmouseout="out('672027419163159367');" style="">2435                         sBgWorkspaceScreens.removeAll(unusedScreens);                                    </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2436                         updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2437                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2438                 }                                                                                        </span>
<span  style="">2439                                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2440                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="7893701829803555503" onmouseenter="enter('7893701829803555503');" onmouseout="out('7893701829803555503');" style="">2441                     Log.d(TAG, &quot;loaded workspace in &quot; + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);          </span>
<span class="-4264600990510120523" onmouseenter="enter('-4264600990510120523');" onmouseout="out('-4264600990510120523');" style="">2442                     Log.d(TAG, &quot;workspace layout: &quot;);                                                    </span>
<span class="-7545020173780618827" onmouseenter="enter('-7545020173780618827');" onmouseout="out('-7545020173780618827');" style="">2443                     int nScreens = occupied.size();                                                      </span>
<span class="-1430677680506572849" onmouseenter="enter('-1430677680506572849');" onmouseout="out('-1430677680506572849');" style="">2444                     for (int y = 0; y &lt; countY; y++) {                                                   </span>
<span class="7912371425440139270" onmouseenter="enter('7912371425440139270');" onmouseout="out('7912371425440139270');" style="">2445                         String line = &quot;&quot;;                                                                </span>
<span  style="">2446                                                                                                          </span>
<span class="6696569755228044488" onmouseenter="enter('6696569755228044488');" onmouseout="out('6696569755228044488');" style="">2447                         Iterator&lt;Long&gt; iter = occupied.keySet().iterator();                              </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2448                         while (iter.hasNext()) {                                                         </span>
<span class="5362610809116292523" onmouseenter="enter('5362610809116292523');" onmouseout="out('5362610809116292523');" style="">2449                             long screenId = iter.next();                                                 </span>
<span class="-6362485911021715109" onmouseenter="enter('-6362485911021715109');" onmouseout="out('-6362485911021715109');" style="">2450                             if (screenId &gt; 0) {                                                          </span>
<span class="6140668759815587097" onmouseenter="enter('6140668759815587097');" onmouseout="out('6140668759815587097');" style="">2451                                 line += &quot; | &quot;;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2452                             }                                                                            </span>
<span class="5745233440242438196" onmouseenter="enter('5745233440242438196');" onmouseout="out('5745233440242438196');" style="">2453                             for (int x = 0; x &lt; countX; x++) {                                           </span>
<span class="-6212011147390486077" onmouseenter="enter('-6212011147390486077');" onmouseout="out('-6212011147390486077');" style="">2454                                 ItemInfo[][] screen = occupied.get(screenId);                            </span>
<span class="-8528390042415740475" onmouseenter="enter('-8528390042415740475');" onmouseout="out('-8528390042415740475');" style="">2455                                 if (x &lt; screen.length &amp;&amp; y &lt; screen[x].length) {                         </span>
<span class="2138628812736326092" onmouseenter="enter('2138628812736326092');" onmouseout="out('2138628812736326092');" style="">2456                                     line += (screen[x][y] != null) ? &quot;#&quot; : &quot;.&quot;;                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2457                                 } else {                                                                 </span>
<span class="3801202768225819208" onmouseenter="enter('3801202768225819208');" onmouseout="out('3801202768225819208');" style="">2458                                     line += &quot;!&quot;;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2459                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2460                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2461                         }                                                                                </span>
<span class="-6176135763032133271" onmouseenter="enter('-6176135763032133271');" onmouseout="out('-6176135763032133271');" style="">2462                         Log.d(TAG, &quot;[ &quot; + line + &quot; ]&quot;);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2463                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2464                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2465             }                                                                                            </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style="">2466             return loadedOldDb;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2467         }                                                                                                </span>
<span  style="">2468                                                                                                          </span>
<span class="2277304499071840713" onmouseenter="enter('2277304499071840713');" onmouseout="out('2277304499071840713');" style="">2469         /** Filters the set of items who are directly or indirectly (via another container) on the       </span>
<span class="1409652257454698285" onmouseenter="enter('1409652257454698285');" onmouseout="out('1409652257454698285');" style="">2470          * specified screen. */                                                                          </span>
<span class="8795548304182075511" onmouseenter="enter('8795548304182075511');" onmouseout="out('8795548304182075511');" style="">2471         private void filterCurrentWorkspaceItems(long currentScreenId,                                   </span>
<span class="6681054994536048179" onmouseenter="enter('6681054994536048179');" onmouseout="out('6681054994536048179');" style="">2472                 ArrayList&lt;ItemInfo&gt; allWorkspaceItems,                                                   </span>
<span class="-22694560885899086" onmouseenter="enter('-22694560885899086');" onmouseout="out('-22694560885899086');" style="">2473                 ArrayList&lt;ItemInfo&gt; currentScreenItems,                                                  </span>
<span class="-4268074281529251610" onmouseenter="enter('-4268074281529251610');" onmouseout="out('-4268074281529251610');" style="">2474                 ArrayList&lt;ItemInfo&gt; otherScreenItems) {                                                  </span>
<span class="-3054856766549342984" onmouseenter="enter('-3054856766549342984');" onmouseout="out('-3054856766549342984');" style="">2475             // Purge any null ItemInfos                                                                  </span>
<span class="4510640209834542816" onmouseenter="enter('4510640209834542816');" onmouseout="out('4510640209834542816');" style="">2476             Iterator&lt;ItemInfo&gt; iter = allWorkspaceItems.iterator();                                      </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2477             while (iter.hasNext()) {                                                                     </span>
<span class="1859715860533284250" onmouseenter="enter('1859715860533284250');" onmouseout="out('1859715860533284250');" style="">2478                 ItemInfo i = iter.next();                                                                </span>
<span class="-7805046366392198151" onmouseenter="enter('-7805046366392198151');" onmouseout="out('-7805046366392198151');" style="">2479                 if (i == null) {                                                                         </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">2480                     iter.remove();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2481                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2482             }                                                                                            </span>
<span  style="">2483                                                                                                          </span>
<span class="-717820765531723775" onmouseenter="enter('-717820765531723775');" onmouseout="out('-717820765531723775');" style="">2484             // Order the set of items by their containers first, this allows use to walk through the     </span>
<span class="603841325148737819" onmouseenter="enter('603841325148737819');" onmouseout="out('603841325148737819');" style="">2485             // list sequentially, build up a list of containers that are in the specified screen,        </span>
<span class="4141488165570775341" onmouseenter="enter('4141488165570775341');" onmouseout="out('4141488165570775341');" style="">2486             // as well as all items in those containers.                                                 </span>
<span class="-9034158841912487174" onmouseenter="enter('-9034158841912487174');" onmouseout="out('-9034158841912487174');" style="">2487             Set&lt;Long&gt; itemsOnScreen = new HashSet&lt;Long&gt;();                                               </span>
<span class="8519661802904254165" onmouseenter="enter('8519661802904254165');" onmouseout="out('8519661802904254165');" style="">2488             Collections.sort(allWorkspaceItems, new Comparator&lt;ItemInfo&gt;() {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2489                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2490                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="-1156155221818606914" onmouseenter="enter('-1156155221818606914');" onmouseout="out('-1156155221818606914');" style="">2491                     return (int) (lhs.container - rhs.container);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2492                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2493             });                                                                                          </span>
<span class="8857216393150717712" onmouseenter="enter('8857216393150717712');" onmouseout="out('8857216393150717712');" style="">2494             for (ItemInfo info : allWorkspaceItems) {                                                    </span>
<span class="6411036295955728093" onmouseenter="enter('6411036295955728093');" onmouseout="out('6411036295955728093');" style="">2495                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                    </span>
<span class="243509375570472667" onmouseenter="enter('243509375570472667');" onmouseout="out('243509375570472667');" style="">2496                     if (info.screenId == currentScreenId) {                                              </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2497                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2498                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2499                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2500                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2501                     }                                                                                    </span>
<span class="8644731164584182238" onmouseenter="enter('8644731164584182238');" onmouseout="out('8644731164584182238');" style="">2502                 } else if (info.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2503                     currentScreenItems.add(info);                                                        </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2504                     itemsOnScreen.add(info.id);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2505                 } else {                                                                                 </span>
<span class="580654991680085358" onmouseenter="enter('580654991680085358');" onmouseout="out('580654991680085358');" style="">2506                     if (itemsOnScreen.contains(info.container)) {                                        </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2507                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2508                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2509                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2510                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2511                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2512                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2513             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2514         }                                                                                                </span>
<span  style="">2515                                                                                                          </span>
<span class="-2345588268248786161" onmouseenter="enter('-2345588268248786161');" onmouseout="out('-2345588268248786161');" style="">2516         /** Filters the set of widgets which are on the specified screen. */                             </span>
<span class="7796530082634599981" onmouseenter="enter('7796530082634599981');" onmouseout="out('7796530082634599981');" style="">2517         private void filterCurrentAppWidgets(long currentScreenId,                                       </span>
<span class="-6457080946795761374" onmouseenter="enter('-6457080946795761374');" onmouseout="out('-6457080946795761374');" style="">2518                 ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                             </span>
<span class="-4085190208868862406" onmouseenter="enter('-4085190208868862406');" onmouseout="out('-4085190208868862406');" style="">2519                 ArrayList&lt;LauncherAppWidgetInfo&gt; currentScreenWidgets,                                   </span>
<span class="-9000722418092093369" onmouseenter="enter('-9000722418092093369');" onmouseout="out('-9000722418092093369');" style="">2520                 ArrayList&lt;LauncherAppWidgetInfo&gt; otherScreenWidgets) {                                   </span>
<span  style="">2521                                                                                                          </span>
<span class="298213435107913715" onmouseenter="enter('298213435107913715');" onmouseout="out('298213435107913715');" style="">2522             for (LauncherAppWidgetInfo widget : appWidgets) {                                            </span>
<span class="2476844624609784590" onmouseenter="enter('2476844624609784590');" onmouseout="out('2476844624609784590');" style="">2523                 if (widget == null) continue;                                                            </span>
<span class="8795712760973120755" onmouseenter="enter('8795712760973120755');" onmouseout="out('8795712760973120755');" style="">2524                 if (widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                  </span>
<span class="-573639449604607321" onmouseenter="enter('-573639449604607321');" onmouseout="out('-573639449604607321');" style="">2525                         widget.screenId == currentScreenId) {                                            </span>
<span class="-7467860973438659792" onmouseenter="enter('-7467860973438659792');" onmouseout="out('-7467860973438659792');" style="">2526                     currentScreenWidgets.add(widget);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2527                 } else {                                                                                 </span>
<span class="918127297832417083" onmouseenter="enter('918127297832417083');" onmouseout="out('918127297832417083');" style="">2528                     otherScreenWidgets.add(widget);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2529                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2530             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2531         }                                                                                                </span>
<span  style="">2532                                                                                                          </span>
<span class="2890739696266248059" onmouseenter="enter('2890739696266248059');" onmouseout="out('2890739696266248059');" style="">2533         /** Filters the set of folders which are on the specified screen. */                             </span>
<span class="1006156668309097499" onmouseenter="enter('1006156668309097499');" onmouseout="out('1006156668309097499');" style="">2534         private void filterCurrentFolders(long currentScreenId,                                          </span>
<span class="5542015090877593488" onmouseenter="enter('5542015090877593488');" onmouseout="out('5542015090877593488');" style="">2535                 HashMap&lt;Long, ItemInfo&gt; itemsIdMap,                                                      </span>
<span class="5439463415012784721" onmouseenter="enter('5439463415012784721');" onmouseout="out('5439463415012784721');" style="">2536                 HashMap&lt;Long, FolderInfo&gt; folders,                                                       </span>
<span class="-835326304871961386" onmouseenter="enter('-835326304871961386');" onmouseout="out('-835326304871961386');" style="">2537                 HashMap&lt;Long, FolderInfo&gt; currentScreenFolders,                                          </span>
<span class="-5337898381804311151" onmouseenter="enter('-5337898381804311151');" onmouseout="out('-5337898381804311151');" style="">2538                 HashMap&lt;Long, FolderInfo&gt; otherScreenFolders) {                                          </span>
<span  style="">2539                                                                                                          </span>
<span class="5476103458254751398" onmouseenter="enter('5476103458254751398');" onmouseout="out('5476103458254751398');" style="">2540             for (long id : folders.keySet()) {                                                           </span>
<span class="-1043527829048640643" onmouseenter="enter('-1043527829048640643');" onmouseout="out('-1043527829048640643');" style="">2541                 ItemInfo info = itemsIdMap.get(id);                                                      </span>
<span class="2660177146353218833" onmouseenter="enter('2660177146353218833');" onmouseout="out('2660177146353218833');" style="">2542                 FolderInfo folder = folders.get(id);                                                     </span>
<span class="1070396563257369459" onmouseenter="enter('1070396563257369459');" onmouseout="out('1070396563257369459');" style="">2543                 if (info == null || folder == null) continue;                                            </span>
<span class="-2700526009056688618" onmouseenter="enter('-2700526009056688618');" onmouseout="out('-2700526009056688618');" style="">2544                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                    </span>
<span class="-6694119585175412501" onmouseenter="enter('-6694119585175412501');" onmouseout="out('-6694119585175412501');" style="">2545                         info.screenId == currentScreenId) {                                              </span>
<span class="9103793645851851238" onmouseenter="enter('9103793645851851238');" onmouseout="out('9103793645851851238');" style="">2546                     currentScreenFolders.put(id, folder);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2547                 } else {                                                                                 </span>
<span class="2209694610169579401" onmouseenter="enter('2209694610169579401');" onmouseout="out('2209694610169579401');" style="">2548                     otherScreenFolders.put(id, folder);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2549                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2550             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2551         }                                                                                                </span>
<span  style="">2552                                                                                                          </span>
<span class="-1404838629334872973" onmouseenter="enter('-1404838629334872973');" onmouseout="out('-1404838629334872973');" style="">2553         /** Sorts the set of items by hotseat, workspace (spatially from top to bottom, left to          </span>
<span class="2331484748997422212" onmouseenter="enter('2331484748997422212');" onmouseout="out('2331484748997422212');" style="">2554          * right) */                                                                                     </span>
<span class="4197577433481844567" onmouseenter="enter('4197577433481844567');" onmouseout="out('4197577433481844567');" style="">2555         private void sortWorkspaceItemsSpatially(ArrayList&lt;ItemInfo&gt; workspaceItems) {                   </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2556             final LauncherAppState app = LauncherAppState.getInstance();                                 </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2557             final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                          </span>
<span class="7420301678455304067" onmouseenter="enter('7420301678455304067');" onmouseout="out('7420301678455304067');" style="">2558             // XXX: review this                                                                          </span>
<span class="5036789581710507500" onmouseenter="enter('5036789581710507500');" onmouseout="out('5036789581710507500');" style="">2559             Collections.sort(workspaceItems, new Comparator&lt;ItemInfo&gt;() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2560                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2561                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="7519014981914073063" onmouseenter="enter('7519014981914073063');" onmouseout="out('7519014981914073063');" style="">2562                     int cellCountX = (int) grid.numColumns;                                              </span>
<span class="5038685396458105053" onmouseenter="enter('5038685396458105053');" onmouseout="out('5038685396458105053');" style="">2563                     int cellCountY = (int) grid.numRows;                                                 </span>
<span class="2270724071285143981" onmouseenter="enter('2270724071285143981');" onmouseout="out('2270724071285143981');" style="">2564                     int screenOffset = cellCountX * cellCountY;                                          </span>
<span class="-1359829540566141263" onmouseenter="enter('-1359829540566141263');" onmouseout="out('-1359829540566141263');" style="">2565                     int containerOffset = screenOffset * (Launcher.SCREEN_COUNT + 1); // +1 hotseat      </span>
<span class="-5686828087182476360" onmouseenter="enter('-5686828087182476360');" onmouseout="out('-5686828087182476360');" style="">2566                     long lr = (lhs.container * containerOffset + lhs.screenId * screenOffset +           </span>
<span class="7712455780852264002" onmouseenter="enter('7712455780852264002');" onmouseout="out('7712455780852264002');" style="">2567                             lhs.cellY * cellCountX + lhs.cellX);                                         </span>
<span class="4979104026657461493" onmouseenter="enter('4979104026657461493');" onmouseout="out('4979104026657461493');" style="">2568                     long rr = (rhs.container * containerOffset + rhs.screenId * screenOffset +           </span>
<span class="-2381270400025166051" onmouseenter="enter('-2381270400025166051');" onmouseout="out('-2381270400025166051');" style="">2569                             rhs.cellY * cellCountX + rhs.cellX);                                         </span>
<span class="-4118467969899844825" onmouseenter="enter('-4118467969899844825');" onmouseout="out('-4118467969899844825');" style="">2570                     return (int) (lr - rr);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2571                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2572             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2573         }                                                                                                </span>
<span  style="">2574                                                                                                          </span>
<span class="-2914095713166652734" onmouseenter="enter('-2914095713166652734');" onmouseout="out('-2914095713166652734');" style="">2575         private void bindWorkspaceScreens(final Callbacks oldCallbacks,                                  </span>
<span class="-4834279311466229697" onmouseenter="enter('-4834279311466229697');" onmouseout="out('-4834279311466229697');" style="">2576                 final ArrayList&lt;Long&gt; orderedScreens) {                                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2577             final Runnable r = new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2578                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2579                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2580                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2581                     if (callbacks != null) {                                                             </span>
<span class="-657438592163932392" onmouseenter="enter('-657438592163932392');" onmouseout="out('-657438592163932392');" style="">2582                         callbacks.bindScreens(orderedScreens);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2583                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2584                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2585             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2586             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2587         }                                                                                                </span>
<span  style="">2588                                                                                                          </span>
<span class="2462723938814167389" onmouseenter="enter('2462723938814167389');" onmouseout="out('2462723938814167389');" style="">2589         private void bindWorkspaceItems(final Callbacks oldCallbacks,                                    </span>
<span class="3131608111144182051" onmouseenter="enter('3131608111144182051');" onmouseout="out('3131608111144182051');" style="">2590                 final ArrayList&lt;ItemInfo&gt; workspaceItems,                                                </span>
<span class="-9171435870290402492" onmouseenter="enter('-9171435870290402492');" onmouseout="out('-9171435870290402492');" style="">2591                 final ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                       </span>
<span class="-215271553361392889" onmouseenter="enter('-215271553361392889');" onmouseout="out('-215271553361392889');" style="">2592                 final HashMap&lt;Long, FolderInfo&gt; folders,                                                 </span>
<span class="8358584326194096705" onmouseenter="enter('8358584326194096705');" onmouseout="out('8358584326194096705');" style="">2593                 ArrayList&lt;Runnable&gt; deferredBindRunnables) {                                             </span>
<span  style="">2594                                                                                                          </span>
<span class="6705996702729308966" onmouseenter="enter('6705996702729308966');" onmouseout="out('6705996702729308966');" style="">2595             final boolean postOnMainThread = (deferredBindRunnables != null);                            </span>
<span  style="">2596                                                                                                          </span>
<span class="-8582136977498244048" onmouseenter="enter('-8582136977498244048');" onmouseout="out('-8582136977498244048');" style="">2597             // Bind the workspace items                                                                  </span>
<span class="-7354566132986496753" onmouseenter="enter('-7354566132986496753');" onmouseout="out('-7354566132986496753');" style="">2598             int N = workspaceItems.size();                                                               </span>
<span class="8316943469476905111" onmouseenter="enter('8316943469476905111');" onmouseout="out('8316943469476905111');" style="">2599             for (int i = 0; i &lt; N; i += ITEMS_CHUNK) {                                                   </span>
<span class="4892427267481855411" onmouseenter="enter('4892427267481855411');" onmouseout="out('4892427267481855411');" style="">2600                 final int start = i;                                                                     </span>
<span class="-1876539668545683746" onmouseenter="enter('-1876539668545683746');" onmouseout="out('-1876539668545683746');" style="">2601                 final int chunkSize = (i+ITEMS_CHUNK &lt;= N) ? ITEMS_CHUNK : (N-i);                        </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2602                 final Runnable r = new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2603                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2604                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2605                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2606                         if (callbacks != null) {                                                         </span>
<span class="5089922212197568209" onmouseenter="enter('5089922212197568209');" onmouseout="out('5089922212197568209');" style="">2607                             callbacks.bindItems(workspaceItems, start, start+chunkSize,                  </span>
<span class="9106099237950392606" onmouseenter="enter('9106099237950392606');" onmouseout="out('9106099237950392606');" style="">2608                                     false);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2609                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2610                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2611                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2612                 if (postOnMainThread) {                                                                  </span>
<span class="-1789583999881960301" onmouseenter="enter('-1789583999881960301');" onmouseout="out('-1789583999881960301');" style="">2613                     synchronized (deferredBindRunnables) {                                               </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2614                         deferredBindRunnables.add(r);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2615                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2616                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2617                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2618                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2619             }                                                                                            </span>
<span  style="">2620                                                                                                          </span>
<span class="-3289339942871725334" onmouseenter="enter('-3289339942871725334');" onmouseout="out('-3289339942871725334');" style="">2621             // Bind the folders                                                                          </span>
<span class="-7483796215228262161" onmouseenter="enter('-7483796215228262161');" onmouseout="out('-7483796215228262161');" style="">2622             if (!folders.isEmpty()) {                                                                    </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2623                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2624                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2625                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2626                         if (callbacks != null) {                                                         </span>
<span class="-5386182796873001970" onmouseenter="enter('-5386182796873001970');" onmouseout="out('-5386182796873001970');" style="">2627                             callbacks.bindFolders(folders);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2628                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2629                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2630                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2631                 if (postOnMainThread) {                                                                  </span>
<span class="-1789583999881960301" onmouseenter="enter('-1789583999881960301');" onmouseout="out('-1789583999881960301');" style="">2632                     synchronized (deferredBindRunnables) {                                               </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2633                         deferredBindRunnables.add(r);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2634                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2635                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2636                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2637                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2638             }                                                                                            </span>
<span  style="">2639                                                                                                          </span>
<span class="-3655716380766613611" onmouseenter="enter('-3655716380766613611');" onmouseout="out('-3655716380766613611');" style="">2640             // Bind the widgets, one at a time                                                           </span>
<span class="-8489280060790503293" onmouseenter="enter('-8489280060790503293');" onmouseout="out('-8489280060790503293');" style="">2641             N = appWidgets.size();                                                                       </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2642             for (int i = 0; i &lt; N; i++) {                                                                </span>
<span class="1244623159456991119" onmouseenter="enter('1244623159456991119');" onmouseout="out('1244623159456991119');" style="">2643                 final LauncherAppWidgetInfo widget = appWidgets.get(i);                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2644                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2645                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2646                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2647                         if (callbacks != null) {                                                         </span>
<span class="-6128295543460120155" onmouseenter="enter('-6128295543460120155');" onmouseout="out('-6128295543460120155');" style="">2648                             callbacks.bindAppWidget(widget);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2649                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2650                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2651                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2652                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2653                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2654                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2655                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2656                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2657             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2658         }                                                                                                </span>
<span  style="">2659                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2660         /**                                                                                              </span>
<span class="2657234197326019604" onmouseenter="enter('2657234197326019604');" onmouseout="out('2657234197326019604');" style="">2661          * Binds all loaded data to actual views on the main thread.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2662          */                                                                                              </span>
<span class="2515782410575020505" onmouseenter="enter('2515782410575020505');" onmouseout="out('2515782410575020505');" style="">2663         private void bindWorkspace(int synchronizeBindPage, final boolean isUpgradePath) {               </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2664             final long t = SystemClock.uptimeMillis();                                                   </span>
<span class="-6867724507948428803" onmouseenter="enter('-6867724507948428803');" onmouseout="out('-6867724507948428803');" style="">2665             Runnable r;                                                                                  </span>
<span  style="">2666                                                                                                          </span>
<span class="7433359470613785749" onmouseenter="enter('7433359470613785749');" onmouseout="out('7433359470613785749');" style="">2667             // Don&#x27;t use these two variables in any of the callback runnables.                           </span>
<span class="-3941343762342876699" onmouseenter="enter('-3941343762342876699');" onmouseout="out('-3941343762342876699');" style="">2668             // Otherwise we hold a reference to them.                                                    </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2669             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2670             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2671                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="3451244406562267616" onmouseenter="enter('3451244406562267616');" onmouseout="out('3451244406562267616');" style="">2672                 Log.w(TAG, &quot;LoaderTask running with no launcher&quot;);                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2673                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2674             }                                                                                            </span>
<span  style="">2675                                                                                                          </span>
<span class="1896400737527502430" onmouseenter="enter('1896400737527502430');" onmouseout="out('1896400737527502430');" style="">2676             // Save a copy of all the bg-thread collections                                              </span>
<span class="8376150118125167095" onmouseenter="enter('8376150118125167095');" onmouseout="out('8376150118125167095');" style="">2677             ArrayList&lt;ItemInfo&gt; workspaceItems = new ArrayList&lt;ItemInfo&gt;();                              </span>
<span class="-9044996375001817267" onmouseenter="enter('-9044996375001817267');" onmouseout="out('-9044996375001817267');" style="">2678             ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets =                                                </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2679                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1486993560554459234" onmouseenter="enter('1486993560554459234');" onmouseout="out('1486993560554459234');" style="">2680             HashMap&lt;Long, FolderInfo&gt; folders = new HashMap&lt;Long, FolderInfo&gt;();                         </span>
<span class="-2531396011753159513" onmouseenter="enter('-2531396011753159513');" onmouseout="out('-2531396011753159513');" style="">2681             HashMap&lt;Long, ItemInfo&gt; itemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                          </span>
<span class="2122428953856879736" onmouseenter="enter('2122428953856879736');" onmouseout="out('2122428953856879736');" style="">2682             ArrayList&lt;Long&gt; orderedScreenIds = new ArrayList&lt;Long&gt;();                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2683             synchronized (sBgLock) {                                                                     </span>
<span class="2318166879831487746" onmouseenter="enter('2318166879831487746');" onmouseout="out('2318166879831487746');" style="">2684                 workspaceItems.addAll(sBgWorkspaceItems);                                                </span>
<span class="5776161881735381038" onmouseenter="enter('5776161881735381038');" onmouseout="out('5776161881735381038');" style="">2685                 appWidgets.addAll(sBgAppWidgets);                                                        </span>
<span class="1929780610659636161" onmouseenter="enter('1929780610659636161');" onmouseout="out('1929780610659636161');" style="">2686                 folders.putAll(sBgFolders);                                                              </span>
<span class="3382494184063613290" onmouseenter="enter('3382494184063613290');" onmouseout="out('3382494184063613290');" style="">2687                 itemsIdMap.putAll(sBgItemsIdMap);                                                        </span>
<span class="-8476373911620507604" onmouseenter="enter('-8476373911620507604');" onmouseout="out('-8476373911620507604');" style="">2688                 orderedScreenIds.addAll(sBgWorkspaceScreens);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2689             }                                                                                            </span>
<span  style="">2690                                                                                                          </span>
<span class="-6727444800593242016" onmouseenter="enter('-6727444800593242016');" onmouseout="out('-6727444800593242016');" style="">2691             final boolean isLoadingSynchronously =                                                       </span>
<span class="-5819807820500279130" onmouseenter="enter('-5819807820500279130');" onmouseout="out('-5819807820500279130');" style="">2692                     synchronizeBindPage != PagedView.INVALID_RESTORE_PAGE;                               </span>
<span class="2949253642379813881" onmouseenter="enter('2949253642379813881');" onmouseout="out('2949253642379813881');" style="">2693             int currScreen = isLoadingSynchronously ? synchronizeBindPage :                              </span>
<span class="-3178994835189561329" onmouseenter="enter('-3178994835189561329');" onmouseout="out('-3178994835189561329');" style="">2694                 oldCallbacks.getCurrentWorkspaceScreen();                                                </span>
<span class="-8072033936298463796" onmouseenter="enter('-8072033936298463796');" onmouseout="out('-8072033936298463796');" style="">2695             if (currScreen &gt;= orderedScreenIds.size()) {                                                 </span>
<span class="6825640116866860115" onmouseenter="enter('6825640116866860115');" onmouseout="out('6825640116866860115');" style="">2696                 // There may be no workspace screens (just hotseat items and an empty page).             </span>
<span class="-1349681419310339536" onmouseenter="enter('-1349681419310339536');" onmouseout="out('-1349681419310339536');" style="">2697                 currScreen = PagedView.INVALID_RESTORE_PAGE;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2698             }                                                                                            </span>
<span class="-335994314648006585" onmouseenter="enter('-335994314648006585');" onmouseout="out('-335994314648006585');" style="">2699             final int currentScreen = currScreen;                                                        </span>
<span class="2351793782480240365" onmouseenter="enter('2351793782480240365');" onmouseout="out('2351793782480240365');" style="">2700             final long currentScreenId = currentScreen &lt; 0                                               </span>
<span class="-3569859106639415689" onmouseenter="enter('-3569859106639415689');" onmouseout="out('-3569859106639415689');" style="">2701                     ? INVALID_SCREEN_ID : orderedScreenIds.get(currentScreen);                           </span>
<span  style="">2702                                                                                                          </span>
<span class="6814554556760518768" onmouseenter="enter('6814554556760518768');" onmouseout="out('6814554556760518768');" style="">2703             // Load all the items that are on the current page first (and in the process, unbind         </span>
<span class="-8025412368184811901" onmouseenter="enter('-8025412368184811901');" onmouseout="out('-8025412368184811901');" style="">2704             // all the existing workspace items before we call startBinding() below.                     </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="">2705             unbindWorkspaceItemsOnMainThread();                                                          </span>
<span  style="">2706                                                                                                          </span>
<span class="-2890632990436762470" onmouseenter="enter('-2890632990436762470');" onmouseout="out('-2890632990436762470');" style="">2707             // Separate the items that are on the current screen, and all the other remaining items      </span>
<span class="-1725873569461296561" onmouseenter="enter('-1725873569461296561');" onmouseout="out('-1725873569461296561');" style="">2708             ArrayList&lt;ItemInfo&gt; currentWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                       </span>
<span class="-3652813720009519444" onmouseenter="enter('-3652813720009519444');" onmouseout="out('-3652813720009519444');" style="">2709             ArrayList&lt;ItemInfo&gt; otherWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="1957921863279922763" onmouseenter="enter('1957921863279922763');" onmouseout="out('1957921863279922763');" style="">2710             ArrayList&lt;LauncherAppWidgetInfo&gt; currentAppWidgets =                                         </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2711                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="-340469327534164281" onmouseenter="enter('-340469327534164281');" onmouseout="out('-340469327534164281');" style="">2712             ArrayList&lt;LauncherAppWidgetInfo&gt; otherAppWidgets =                                           </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2713                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1678682221916250445" onmouseenter="enter('1678682221916250445');" onmouseout="out('1678682221916250445');" style="">2714             HashMap&lt;Long, FolderInfo&gt; currentFolders = new HashMap&lt;Long, FolderInfo&gt;();                  </span>
<span class="6055163357301009248" onmouseenter="enter('6055163357301009248');" onmouseout="out('6055163357301009248');" style="">2715             HashMap&lt;Long, FolderInfo&gt; otherFolders = new HashMap&lt;Long, FolderInfo&gt;();                    </span>
<span  style="">2716                                                                                                          </span>
<span class="-6089822518842723893" onmouseenter="enter('-6089822518842723893');" onmouseout="out('-6089822518842723893');" style="">2717             filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems,          </span>
<span class="-8375758480995422912" onmouseenter="enter('-8375758480995422912');" onmouseout="out('-8375758480995422912');" style="">2718                     otherWorkspaceItems);                                                                </span>
<span class="-866463348054163616" onmouseenter="enter('-866463348054163616');" onmouseout="out('-866463348054163616');" style="">2719             filterCurrentAppWidgets(currentScreenId, appWidgets, currentAppWidgets,                      </span>
<span class="4579895579276341407" onmouseenter="enter('4579895579276341407');" onmouseout="out('4579895579276341407');" style="">2720                     otherAppWidgets);                                                                    </span>
<span class="-8098352111604685386" onmouseenter="enter('-8098352111604685386');" onmouseout="out('-8098352111604685386');" style="">2721             filterCurrentFolders(currentScreenId, itemsIdMap, folders, currentFolders,                   </span>
<span class="9146999591596374961" onmouseenter="enter('9146999591596374961');" onmouseout="out('9146999591596374961');" style="">2722                     otherFolders);                                                                       </span>
<span class="-3334490908115707670" onmouseenter="enter('-3334490908115707670');" onmouseout="out('-3334490908115707670');" style="">2723             sortWorkspaceItemsSpatially(currentWorkspaceItems);                                          </span>
<span class="7557616132302919391" onmouseenter="enter('7557616132302919391');" onmouseout="out('7557616132302919391');" style="">2724             sortWorkspaceItemsSpatially(otherWorkspaceItems);                                            </span>
<span  style="">2725                                                                                                          </span>
<span class="-5681027322920042460" onmouseenter="enter('-5681027322920042460');" onmouseout="out('-5681027322920042460');" style="">2726             // Tell the workspace that we&#x27;re about to start binding items                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2727             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2728                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2729                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2730                     if (callbacks != null) {                                                             </span>
<span class="-4858717627969339167" onmouseenter="enter('-4858717627969339167');" onmouseout="out('-4858717627969339167');" style="">2731                         callbacks.startBinding();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2732                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2733                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2734             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2735             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span  style="">2736                                                                                                          </span>
<span class="5270406270692369283" onmouseenter="enter('5270406270692369283');" onmouseout="out('5270406270692369283');" style="">2737             bindWorkspaceScreens(oldCallbacks, orderedScreenIds);                                        </span>
<span  style="">2738                                                                                                          </span>
<span class="-8614752954403058095" onmouseenter="enter('-8614752954403058095');" onmouseout="out('-8614752954403058095');" style="">2739             // Load items on the current page                                                            </span>
<span class="7514755776427017102" onmouseenter="enter('7514755776427017102');" onmouseout="out('7514755776427017102');" style="">2740             bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets,                   </span>
<span class="-6104188658851873503" onmouseenter="enter('-6104188658851873503');" onmouseout="out('-6104188658851873503');" style="">2741                     currentFolders, null);                                                               </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2742             if (isLoadingSynchronously) {                                                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2743                 r = new Runnable() {                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2744                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2745                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="1520569606497568986" onmouseenter="enter('1520569606497568986');" onmouseout="out('1520569606497568986');" style="">2746                         if (callbacks != null &amp;&amp; currentScreen != PagedView.INVALID_RESTORE_PAGE) {      </span>
<span class="-8453570054408401460" onmouseenter="enter('-8453570054408401460');" onmouseout="out('-8453570054408401460');" style="">2747                             callbacks.onPageBoundSynchronously(currentScreen);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2748                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2749                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2750                 };                                                                                       </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2751                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2752             }                                                                                            </span>
<span  style="">2753                                                                                                          </span>
<span class="-5413736965388393233" onmouseenter="enter('-5413736965388393233');" onmouseout="out('-5413736965388393233');" style="">2754             // Load all the remaining pages (if we are loading synchronously, we want to defer this      </span>
<span class="-2955787106587599134" onmouseenter="enter('-2955787106587599134');" onmouseout="out('-2955787106587599134');" style="">2755             // work until after the first render)                                                        </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">2756             synchronized (mDeferredBindRunnables) {                                                      </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">2757                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2758             }                                                                                            </span>
<span class="5032352887958756295" onmouseenter="enter('5032352887958756295');" onmouseout="out('5032352887958756295');" style="">2759             bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders,         </span>
<span class="-2167949041803207061" onmouseenter="enter('-2167949041803207061');" onmouseout="out('-2167949041803207061');" style="">2760                     (isLoadingSynchronously ? mDeferredBindRunnables : null));                           </span>
<span  style="">2761                                                                                                          </span>
<span class="4011061048965913553" onmouseenter="enter('4011061048965913553');" onmouseout="out('4011061048965913553');" style="">2762             // Tell the workspace that we&#x27;re done binding items                                          </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2763             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2764                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2765                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2766                     if (callbacks != null) {                                                             </span>
<span class="4571657590383009749" onmouseenter="enter('4571657590383009749');" onmouseout="out('4571657590383009749');" style="">2767                         callbacks.finishBindingItems(isUpgradePath);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2768                     }                                                                                    </span>
<span  style="">2769                                                                                                          </span>
<span class="3327220122133784387" onmouseenter="enter('3327220122133784387');" onmouseout="out('3327220122133784387');" style="">2770                     // If we&#x27;re profiling, ensure this is the last thing in the queue.                   </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2771                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="355954012869630075" onmouseenter="enter('355954012869630075');" onmouseout="out('355954012869630075');" style="">2772                         Log.d(TAG, &quot;bound workspace in &quot;                                                 </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2773                             + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2774                     }                                                                                    </span>
<span  style="">2775                                                                                                          </span>
<span class="-2372807547969983284" onmouseenter="enter('-2372807547969983284');" onmouseout="out('-2372807547969983284');" style="">2776                     mIsLoadingAndBindingWorkspace = false;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2777                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2778             };                                                                                           </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2779             if (isLoadingSynchronously) {                                                                </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="">2780                 synchronized (mDeferredBindRunnables) {                                                  </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="">2781                     mDeferredBindRunnables.add(r);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2782                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2783             } else {                                                                                     </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2784                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2785             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2786         }                                                                                                </span>
<span  style="">2787                                                                                                          </span>
<span class="-8837645024880398734" onmouseenter="enter('-8837645024880398734');" onmouseout="out('-8837645024880398734');" style="">2788         private void loadAndBindAllApps() {                                                              </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2789             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-2830976254331120227" onmouseenter="enter('-2830976254331120227');" onmouseout="out('-2830976254331120227');" style="">2790                 Log.d(TAG, &quot;loadAndBindAllApps mAllAppsLoaded=&quot; + mAllAppsLoaded);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2791             }                                                                                            </span>
<span class="-6125216986221494355" onmouseenter="enter('-6125216986221494355');" onmouseout="out('-6125216986221494355');" style="">2792             if (!mAllAppsLoaded) {                                                                       </span>
<span class="5842757820135196564" onmouseenter="enter('5842757820135196564');" onmouseout="out('5842757820135196564');" style="">2793                 loadAllApps();                                                                           </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">2794                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2795                     if (mStopped) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2796                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2797                     }                                                                                    </span>
<span class="4623635226903027710" onmouseenter="enter('4623635226903027710');" onmouseout="out('4623635226903027710');" style="">2798                     mAllAppsLoaded = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2799                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2800             } else {                                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">2801                 onlyBindAllApps();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2802             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2803         }                                                                                                </span>
<span  style="">2804                                                                                                          </span>
<span class="4707433981787810272" onmouseenter="enter('4707433981787810272');" onmouseout="out('4707433981787810272');" style="">2805         private void onlyBindAllApps() {                                                                 </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2806             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2807             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2808                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="1659909424723635951" onmouseenter="enter('1659909424723635951');" onmouseout="out('1659909424723635951');" style="">2809                 Log.w(TAG, &quot;LoaderTask running with no launcher (onlyBindAllApps)&quot;);                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2810                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2811             }                                                                                            </span>
<span  style="">2812                                                                                                          </span>
<span class="904073869424416989" onmouseenter="enter('904073869424416989');" onmouseout="out('904073869424416989');" style="">2813             // shallow copy                                                                              </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">2814             @SuppressWarnings(&quot;unchecked&quot;)                                                               </span>
<span class="6400779648201267598" onmouseenter="enter('6400779648201267598');" onmouseout="out('6400779648201267598');" style="">2815             final ArrayList&lt;AppInfo&gt; list                                                                </span>
<span class="-2385577679344520462" onmouseenter="enter('-2385577679344520462');" onmouseout="out('-2385577679344520462');" style="">2816                     = (ArrayList&lt;AppInfo&gt;) mBgAllAppsList.data.clone();                                  </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2817             Runnable r = new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2818                 public void run() {                                                                      </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2819                     final long t = SystemClock.uptimeMillis();                                           </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2820                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2821                     if (callbacks != null) {                                                             </span>
<span class="-4175293191087427555" onmouseenter="enter('-4175293191087427555');" onmouseout="out('-4175293191087427555');" style="">2822                         callbacks.bindAllApplications(list);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2823                     }                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2824                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="-8852680552322187165" onmouseenter="enter('-8852680552322187165');" onmouseout="out('-8852680552322187165');" style="">2825                         Log.d(TAG, &quot;bound all &quot; + list.size() + &quot; apps from cache in &quot;                   </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2826                                 + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2827                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2828                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2829             };                                                                                           </span>
<span class="1625697599418198126" onmouseenter="enter('1625697599418198126');" onmouseout="out('1625697599418198126');" style="">2830             boolean isRunningOnMainThread = !(sWorkerThread.getThreadId() == Process.myTid());           </span>
<span class="-5455987777066046644" onmouseenter="enter('-5455987777066046644');" onmouseout="out('-5455987777066046644');" style="">2831             if (isRunningOnMainThread) {                                                                 </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style="">2832                 r.run();                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2833             } else {                                                                                     </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="">2834                 mHandler.post(r);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2835             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2836         }                                                                                                </span>
<span  style="">2837                                                                                                          </span>
<span class="-6895852158956881814" onmouseenter="enter('-6895852158956881814');" onmouseout="out('-6895852158956881814');" style="">2838         private void loadAllApps() {                                                                     </span>
<span class="3240137791137450764" onmouseenter="enter('3240137791137450764');" onmouseout="out('3240137791137450764');" style="">2839             final long loadTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                        </span>
<span  style="">2840                                                                                                          </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2841             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2842             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2843                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="-6509823964207432628" onmouseenter="enter('-6509823964207432628');" onmouseout="out('-6509823964207432628');" style="">2844                 Log.w(TAG, &quot;LoaderTask running with no launcher (loadAllApps)&quot;);                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2845                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2846             }                                                                                            </span>
<span  style="">2847                                                                                                          </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="">2848             final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                              </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="">2849             mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                            </span>
<span  style="">2850                                                                                                          </span>
<span class="-3689765283860688946" onmouseenter="enter('-3689765283860688946');" onmouseout="out('-3689765283860688946');" style="">2851             final List&lt;UserHandleCompat&gt; profiles = mUserManager.getUserProfiles();                      </span>
<span  style="">2852                                                                                                          </span>
<span class="2323997493385795900" onmouseenter="enter('2323997493385795900');" onmouseout="out('2323997493385795900');" style="">2853             // Clear the list of apps                                                                    </span>
<span class="-3100741238331493656" onmouseenter="enter('-3100741238331493656');" onmouseout="out('-3100741238331493656');" style="">2854             mBgAllAppsList.clear();                                                                      </span>
<span class="-2262518428251923925" onmouseenter="enter('-2262518428251923925');" onmouseout="out('-2262518428251923925');" style="">2855             for (UserHandleCompat user : profiles) {                                                     </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="">2856                 // Query for the set of apps                                                             </span>
<span class="6799319218362813943" onmouseenter="enter('6799319218362813943');" onmouseout="out('6799319218362813943');" style="">2857                 final long qiaTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                     </span>
<span class="2012422809707549193" onmouseenter="enter('2012422809707549193');" onmouseout="out('2012422809707549193');" style="">2858                 List&lt;LauncherActivityInfoCompat&gt; apps = mLauncherApps.getActivityList(null, user);       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2859                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="2295985568720272905" onmouseenter="enter('2295985568720272905');" onmouseout="out('2295985568720272905');" style="">2860                     Log.d(TAG, &quot;getActivityList took &quot;                                                   </span>
<span class="-4615420342619003975" onmouseenter="enter('-4615420342619003975');" onmouseout="out('-4615420342619003975');" style="">2861                             + (SystemClock.uptimeMillis()-qiaTime) + &quot;ms for user &quot; + user);             </span>
<span class="-305887566992077245" onmouseenter="enter('-305887566992077245');" onmouseout="out('-305887566992077245');" style="">2862                     Log.d(TAG, &quot;getActivityList got &quot; + apps.size() + &quot; apps for user &quot; + user);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2863                 }                                                                                        </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="">2864                 // Fail if we don&#x27;t have any apps                                                        </span>
<span class="-1385682343056466434" onmouseenter="enter('-1385682343056466434');" onmouseout="out('-1385682343056466434');" style="">2865                 if (apps == null || apps.isEmpty()) {                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2866                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2867                 }                                                                                        </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="">2868                 // Sort the applications by name                                                         </span>
<span class="5879018485786384871" onmouseenter="enter('5879018485786384871');" onmouseout="out('5879018485786384871');" style="">2869                 final long sortTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                    </span>
<span class="3347614076781191804" onmouseenter="enter('3347614076781191804');" onmouseout="out('3347614076781191804');" style="">2870                 Collections.sort(apps,                                                                   </span>
<span class="-5419021632247745878" onmouseenter="enter('-5419021632247745878');" onmouseout="out('-5419021632247745878');" style="">2871                         new LauncherModel.ShortcutNameComparator(mLabelCache));                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2872                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="8116347759372038508" onmouseenter="enter('8116347759372038508');" onmouseout="out('8116347759372038508');" style="">2873                     Log.d(TAG, &quot;sort took &quot;                                                              </span>
<span class="992817212926202968" onmouseenter="enter('992817212926202968');" onmouseout="out('992817212926202968');" style="">2874                             + (SystemClock.uptimeMillis()-sortTime) + &quot;ms&quot;);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2875                 }                                                                                        </span>
<span  style="">2876                                                                                                          </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="">2877                 // Create the ApplicationInfos                                                           </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="">2878                 for (int i = 0; i &lt; apps.size(); i++) {                                                  </span>
<span class="236419152399396874" onmouseenter="enter('236419152399396874');" onmouseout="out('236419152399396874');" style="">2879                     LauncherActivityInfoCompat app = apps.get(i);                                        </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="">2880                     // This builds the icon bitmaps.                                                     </span>
<span class="-5742259461869454243" onmouseenter="enter('-5742259461869454243');" onmouseout="out('-5742259461869454243');" style="">2881                     mBgAllAppsList.add(new AppInfo(mContext, app, user, mIconCache, mLabelCache));       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2882                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2883             }                                                                                            </span>
<span class="-5221747652878631284" onmouseenter="enter('-5221747652878631284');" onmouseout="out('-5221747652878631284');" style="">2884             // Huh? Shouldn&#x27;t this be inside the Runnable below?                                         </span>
<span class="4457761250277868019" onmouseenter="enter('4457761250277868019');" onmouseout="out('4457761250277868019');" style="">2885             final ArrayList&lt;AppInfo&gt; added = mBgAllAppsList.added;                                       </span>
<span class="3218431008368817671" onmouseenter="enter('3218431008368817671');" onmouseout="out('3218431008368817671');" style="">2886             mBgAllAppsList.added = new ArrayList&lt;AppInfo&gt;();                                             </span>
<span  style="">2887                                                                                                          </span>
<span class="2526791049904400058" onmouseenter="enter('2526791049904400058');" onmouseout="out('2526791049904400058');" style="">2888             // Post callback on main thread                                                              </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2889             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2890                 public void run() {                                                                      </span>
<span class="-2007882421121122273" onmouseenter="enter('-2007882421121122273');" onmouseout="out('-2007882421121122273');" style="">2891                     final long bindTime = SystemClock.uptimeMillis();                                    </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2892                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2893                     if (callbacks != null) {                                                             </span>
<span class="8095088373687662981" onmouseenter="enter('8095088373687662981');" onmouseout="out('8095088373687662981');" style="">2894                         callbacks.bindAllApplications(added);                                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2895                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1059969227192257889" onmouseenter="enter('1059969227192257889');" onmouseout="out('1059969227192257889');" style="">2896                             Log.d(TAG, &quot;bound &quot; + added.size() + &quot; apps in &quot;                             </span>
<span class="-7437359873458345222" onmouseenter="enter('-7437359873458345222');" onmouseout="out('-7437359873458345222');" style="">2897                                 + (SystemClock.uptimeMillis() - bindTime) + &quot;ms&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2898                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2899                     } else {                                                                             </span>
<span class="7641212838781589328" onmouseenter="enter('7641212838781589328');" onmouseout="out('7641212838781589328');" style="">2900                         Log.i(TAG, &quot;not binding apps: no Launcher activity&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2901                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2902                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2903             });                                                                                          </span>
<span  style="">2904                                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2905             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-4702241865893587262" onmouseenter="enter('-4702241865893587262');" onmouseout="out('-4702241865893587262');" style="">2906                 Log.d(TAG, &quot;Icons processed in &quot;                                                         </span>
<span class="-1277503613614461490" onmouseenter="enter('-1277503613614461490');" onmouseout="out('-1277503613614461490');" style="">2907                         + (SystemClock.uptimeMillis() - loadTime) + &quot;ms&quot;);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2908             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2909         }                                                                                                </span>
<span  style="">2910                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">2911         public void dumpState() {                                                                        </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2912             synchronized (sBgLock) {                                                                     </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="">2913                 Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                          </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="">2914                 Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                  </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="">2915                 Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                          </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="">2916                 Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);          </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="">2917                 Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2918             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2919         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2920     }                                                                                                    </span>
<span  style="">2921                                                                                                          </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="">2922     void enqueuePackageUpdated(PackageUpdatedTask task) {                                                </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="">2923         sWorker.post(task);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2924     }                                                                                                    </span>
<span  style="">2925                                                                                                          </span>
<span class="-2155382700972431684" onmouseenter="enter('-2155382700972431684');" onmouseout="out('-2155382700972431684');" style="">2926     private class AppsAvailabilityCheck extends BroadcastReceiver {                                      </span>
<span  style="">2927                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2928         @Override                                                                                        </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">2929         public void onReceive(Context context, Intent intent) {                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2930             synchronized (sBgLock) {                                                                     </span>
<span class="4353137230087495395" onmouseenter="enter('4353137230087495395');" onmouseout="out('4353137230087495395');" style="">2931                 final LauncherAppsCompat launcherApps = LauncherAppsCompat                               </span>
<span class="7982344973763927300" onmouseenter="enter('7982344973763927300');" onmouseout="out('7982344973763927300');" style="">2932                         .getInstance(mApp.getContext());                                                 </span>
<span class="-4787354412045768116" onmouseenter="enter('-4787354412045768116');" onmouseout="out('-4787354412045768116');" style="">2933                 ArrayList&lt;String&gt; packagesRemoved;                                                       </span>
<span class="4244873154676657454" onmouseenter="enter('4244873154676657454');" onmouseout="out('4244873154676657454');" style="">2934                 for (Entry&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; entry : sPendingPackages.entrySet()) {     </span>
<span class="5975107845149456463" onmouseenter="enter('5975107845149456463');" onmouseout="out('5975107845149456463');" style="">2935                     UserHandleCompat user = entry.getKey();                                              </span>
<span class="-667022728008343360" onmouseenter="enter('-667022728008343360');" onmouseout="out('-667022728008343360');" style="">2936                     packagesRemoved = new ArrayList&lt;String&gt;();                                           </span>
<span class="1474457728386669675" onmouseenter="enter('1474457728386669675');" onmouseout="out('1474457728386669675');" style="">2937                     for (String pkg : entry.getValue()) {                                                </span>
<span class="-3589045475490406733" onmouseenter="enter('-3589045475490406733');" onmouseout="out('-3589045475490406733');" style="">2938                         if (!launcherApps.isPackageEnabledForProfile(pkg, user)) {                       </span>
<span class="-1955449888814909626" onmouseenter="enter('-1955449888814909626');" onmouseout="out('-1955449888814909626');" style="">2939                             Launcher.addDumpLog(TAG, &quot;Package not found: &quot; + pkg, true);                 </span>
<span class="-7762323097919758551" onmouseenter="enter('-7762323097919758551');" onmouseout="out('-7762323097919758551');" style="">2940                             packagesRemoved.add(pkg);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2941                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2942                     }                                                                                    </span>
<span class="-1545108570433514025" onmouseenter="enter('-1545108570433514025');" onmouseout="out('-1545108570433514025');" style="">2943                     if (!packagesRemoved.isEmpty()) {                                                    </span>
<span class="7608410434352572746" onmouseenter="enter('7608410434352572746');" onmouseout="out('7608410434352572746');" style="">2944                         enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_REMOVE,       </span>
<span class="-7140992629790434736" onmouseenter="enter('-7140992629790434736');" onmouseout="out('-7140992629790434736');" style="">2945                                 packagesRemoved.toArray(new String[packagesRemoved.size()]), user));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2946                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2947                 }                                                                                        </span>
<span class="483878637633217436" onmouseenter="enter('483878637633217436');" onmouseout="out('483878637633217436');" style="">2948                 sPendingPackages.clear();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2949             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2950         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2951     }                                                                                                    </span>
<span  style="">2952                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2953     /**                                                                                                  </span>
<span class="-4757889214551148663" onmouseenter="enter('-4757889214551148663');" onmouseout="out('-4757889214551148663');" style="">2954      * Workaround to re-check unrestored items, in-case they were installed but the Package-ADD          </span>
<span class="-7981308590935764825" onmouseenter="enter('-7981308590935764825');" onmouseout="out('-7981308590935764825');" style="">2955      * runnable was missed by the launcher.                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2956      */                                                                                                  </span>
<span class="-1837604298505960192" onmouseenter="enter('-1837604298505960192');" onmouseout="out('-1837604298505960192');" style="">2957     public void recheckRestoredItems(final Context context) {                                            </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2958         Runnable r = new Runnable() {                                                                    </span>
<span  style="">2959                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2960             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2961             public void run() {                                                                          </span>
<span class="4897732594040868406" onmouseenter="enter('4897732594040868406');" onmouseout="out('4897732594040868406');" style="">2962                 LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);               </span>
<span class="2615938583470046073" onmouseenter="enter('2615938583470046073');" onmouseout="out('2615938583470046073');" style="">2963                 HashSet&lt;String&gt; installedPackages = new HashSet&lt;String&gt;();                               </span>
<span class="-7713836903288582020" onmouseenter="enter('-7713836903288582020');" onmouseout="out('-7713836903288582020');" style="">2964                 UserHandleCompat user = UserHandleCompat.myUserHandle();                                 </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">2965                 synchronized(sBgLock) {                                                                  </span>
<span class="-4290363400846595778" onmouseenter="enter('-4290363400846595778');" onmouseout="out('-4290363400846595778');" style="">2966                     for (ItemInfo info : sBgItemsIdMap.values()) {                                       </span>
<span class="3613572740963864398" onmouseenter="enter('3613572740963864398');" onmouseout="out('3613572740963864398');" style="">2967                         if (info instanceof ShortcutInfo) {                                              </span>
<span class="-639177275705060315" onmouseenter="enter('-639177275705060315');" onmouseout="out('-639177275705060315');" style="">2968                             ShortcutInfo si = (ShortcutInfo) info;                                       </span>
<span class="7536634611316201502" onmouseenter="enter('7536634611316201502');" onmouseout="out('7536634611316201502');" style="">2969                             if (si.isPromise() &amp;&amp; si.getTargetComponent() != null                        </span>
<span class="5125464606683441448" onmouseenter="enter('5125464606683441448');" onmouseout="out('5125464606683441448');" style="">2970                                     &amp;&amp; launcherApps.isPackageEnabledForProfile(                          </span>
<span class="8387940407390797707" onmouseenter="enter('8387940407390797707');" onmouseout="out('8387940407390797707');" style="">2971                                             si.getTargetComponent().getPackageName(), user)) {           </span>
<span class="8027032983651882823" onmouseenter="enter('8027032983651882823');" onmouseout="out('8027032983651882823');" style="">2972                                 installedPackages.add(si.getTargetComponent().getPackageName());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2973                             }                                                                            </span>
<span class="-1966513537137476875" onmouseenter="enter('-1966513537137476875');" onmouseout="out('-1966513537137476875');" style="">2974                         } else if (info instanceof LauncherAppWidgetInfo) {                              </span>
<span class="-3531080121586908110" onmouseenter="enter('-3531080121586908110');" onmouseout="out('-3531080121586908110');" style="">2975                             LauncherAppWidgetInfo widget = (LauncherAppWidgetInfo) info;                 </span>
<span class="-6148029265216954679" onmouseenter="enter('-6148029265216954679');" onmouseout="out('-6148029265216954679');" style="">2976                             if (widget.hasRestoreFlag(LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY)     </span>
<span class="5125464606683441448" onmouseenter="enter('5125464606683441448');" onmouseout="out('5125464606683441448');" style="">2977                                     &amp;&amp; launcherApps.isPackageEnabledForProfile(                          </span>
<span class="4286562368203116307" onmouseenter="enter('4286562368203116307');" onmouseout="out('4286562368203116307');" style="">2978                                             widget.providerName.getPackageName(), user)) {               </span>
<span class="-5968826008275428630" onmouseenter="enter('-5968826008275428630');" onmouseout="out('-5968826008275428630');" style="">2979                                 installedPackages.add(widget.providerName.getPackageName());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2980                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2981                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2982                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2983                 }                                                                                        </span>
<span  style="">2984                                                                                                          </span>
<span class="-8755538775344321333" onmouseenter="enter('-8755538775344321333');" onmouseout="out('-8755538775344321333');" style="">2985                 if (!installedPackages.isEmpty()) {                                                      </span>
<span class="1551205659826155261" onmouseenter="enter('1551205659826155261');" onmouseout="out('1551205659826155261');" style="">2986                     final ArrayList&lt;AppInfo&gt; restoredApps = new ArrayList&lt;AppInfo&gt;();                    </span>
<span class="-3020018355032355950" onmouseenter="enter('-3020018355032355950');" onmouseout="out('-3020018355032355950');" style="">2987                     for (String pkg : installedPackages) {                                               </span>
<span class="-1472387192310078173" onmouseenter="enter('-1472387192310078173');" onmouseout="out('-1472387192310078173');" style="">2988                         for (LauncherActivityInfoCompat info : launcherApps.getActivityList(pkg, user)) {</span>
<span class="-4626697810297530275" onmouseenter="enter('-4626697810297530275');" onmouseout="out('-4626697810297530275');" style="">2989                             restoredApps.add(new AppInfo(context, info, user, mIconCache, null));        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2990                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2991                     }                                                                                    </span>
<span  style="">2992                                                                                                          </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">2993                     final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;            </span>
<span class="838327603557009686" onmouseenter="enter('838327603557009686');" onmouseout="out('838327603557009686');" style="">2994                     if (!restoredApps.isEmpty()) {                                                       </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2995                         mHandler.post(new Runnable() {                                                   </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2996                             public void run() {                                                          </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2997                                 Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;             </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2998                                 if (callbacks == cb &amp;&amp; cb != null) {                                     </span>
<span class="-7685400884791180573" onmouseenter="enter('-7685400884791180573');" onmouseout="out('-7685400884791180573');" style="">2999                                     callbacks.bindAppsRestored(restoredApps);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3000                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3001                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3002                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3003                     }                                                                                    </span>
<span  style="">3004                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3005                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3006             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3007         };                                                                                               </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style="">3008         sWorker.post(r);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3009     }                                                                                                    </span>
<span  style="">3010                                                                                                          </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="">3011     private class PackageUpdatedTask implements Runnable {                                               </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="">3012         int mOp;                                                                                         </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="">3013         String[] mPackages;                                                                              </span>
<span class="2923888301096709084" onmouseenter="enter('2923888301096709084');" onmouseout="out('2923888301096709084');" style="">3014         UserHandleCompat mUser;                                                                          </span>
<span  style="">3015                                                                                                          </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="">3016         public static final int OP_NONE = 0;                                                             </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="">3017         public static final int OP_ADD = 1;                                                              </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="">3018         public static final int OP_UPDATE = 2;                                                           </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="">3019         public static final int OP_REMOVE = 3; // uninstlled                                             </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="">3020         public static final int OP_UNAVAILABLE = 4; // external media unmounted                          </span>
<span  style="">3021                                                                                                          </span>
<span  style="">3022                                                                                                          </span>
<span class="3202497835561249087" onmouseenter="enter('3202497835561249087');" onmouseout="out('3202497835561249087');" style="">3023         public PackageUpdatedTask(int op, String[] packages, UserHandleCompat user) {                    </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="">3024             mOp = op;                                                                                    </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="">3025             mPackages = packages;                                                                        </span>
<span class="2953270128049103408" onmouseenter="enter('2953270128049103408');" onmouseout="out('2953270128049103408');" style="">3026             mUser = user;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3027         }                                                                                                </span>
<span  style="">3028                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3029         public void run() {                                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">3030             final Context context = mApp.getContext();                                                   </span>
<span  style="">3031                                                                                                          </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="">3032             final String[] packages = mPackages;                                                         </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="">3033             final int N = packages.length;                                                               </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="">3034             switch (mOp) {                                                                               </span>
<span class="449333994232188305" onmouseenter="enter('449333994232188305');" onmouseout="out('449333994232188305');" style="">3035                 case OP_ADD:                                                                             </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3036                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="8529503526854951097" onmouseenter="enter('8529503526854951097');" onmouseout="out('8529503526854951097');" style="">3037                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);         </span>
<span class="6575289823687229863" onmouseenter="enter('6575289823687229863');" onmouseout="out('6575289823687229863');" style="">3038                         mIconCache.remove(packages[i], mUser);                                           </span>
<span class="-4330949928576769866" onmouseenter="enter('-4330949928576769866');" onmouseout="out('-4330949928576769866');" style="">3039                         mBgAllAppsList.addPackage(context, packages[i], mUser);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3040                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3041                     break;                                                                               </span>
<span class="-4770369244410347850" onmouseenter="enter('-4770369244410347850');" onmouseout="out('-4770369244410347850');" style="">3042                 case OP_UPDATE:                                                                          </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3043                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="-3432436938232924374" onmouseenter="enter('-3432436938232924374');" onmouseout="out('-3432436938232924374');" style="">3044                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);      </span>
<span class="4552988343352109939" onmouseenter="enter('4552988343352109939');" onmouseout="out('4552988343352109939');" style="">3045                         mBgAllAppsList.updatePackage(context, packages[i], mUser);                       </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">3046                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">3047                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3048                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3049                     break;                                                                               </span>
<span class="-5474983820901132713" onmouseenter="enter('-5474983820901132713');" onmouseout="out('-5474983820901132713');" style="">3050                 case OP_REMOVE:                                                                          </span>
<span class="9130220194739024640" onmouseenter="enter('9130220194739024640');" onmouseout="out('9130220194739024640');" style="">3051                 case OP_UNAVAILABLE:                                                                     </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3052                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="3815138171377980553" onmouseenter="enter('3815138171377980553');" onmouseout="out('3815138171377980553');" style="">3053                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);      </span>
<span class="-4221302437709808804" onmouseenter="enter('-4221302437709808804');" onmouseout="out('-4221302437709808804');" style="">3054                         mBgAllAppsList.removePackage(packages[i], mUser);                                </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">3055                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">3056                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3057                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3058                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3059             }                                                                                            </span>
<span  style="">3060                                                                                                          </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="">3061             ArrayList&lt;AppInfo&gt; added = null;                                                             </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="">3062             ArrayList&lt;AppInfo&gt; modified = null;                                                          </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="">3063             final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                             </span>
<span  style="">3064                                                                                                          </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="">3065             if (mBgAllAppsList.added.size() &gt; 0) {                                                       </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="">3066                 added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                    </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="">3067                 mBgAllAppsList.added.clear();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3068             }                                                                                            </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="">3069             if (mBgAllAppsList.modified.size() &gt; 0) {                                                    </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="">3070                 modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                              </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="">3071                 mBgAllAppsList.modified.clear();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3072             }                                                                                            </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="">3073             if (mBgAllAppsList.removed.size() &gt; 0) {                                                     </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="">3074                 removedApps.addAll(mBgAllAppsList.removed);                                              </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="">3075                 mBgAllAppsList.removed.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3076             }                                                                                            </span>
<span  style="">3077                                                                                                          </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">3078             final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                    </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">3079             if (callbacks == null) {                                                                     </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="">3080                 Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3081                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3082             }                                                                                            </span>
<span  style="">3083                                                                                                          </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="">3084             if (added != null) {                                                                         </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="">3085                 // Ensure that we add all the workspace applications to the db                           </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">3086                 if (LauncherAppState.isDisableAllApps()) {                                               </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="">3087                     final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);               </span>
<span class="-3306619504252280502" onmouseenter="enter('-3306619504252280502');" onmouseout="out('-3306619504252280502');" style="">3088                     addAndBindAddedWorkspaceApps(context, addedInfos);                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3089                 } else {                                                                                 </span>
<span class="-4365713328493794841" onmouseenter="enter('-4365713328493794841');" onmouseout="out('-4365713328493794841');" style="">3090                     addAppsToAllApps(context, added);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3091                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3092             }                                                                                            </span>
<span  style="">3093                                                                                                          </span>
<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="">3094             if (modified != null) {                                                                      </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="">3095                 final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                       </span>
<span  style="">3096                                                                                                          </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="">3097                 // Update the launcher db to reflect the changes                                         </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="">3098                 for (AppInfo a : modifiedFinal) {                                                        </span>
<span class="9185020132746469320" onmouseenter="enter('9185020132746469320');" onmouseout="out('9185020132746469320');" style="">3099                     ArrayList&lt;ItemInfo&gt; infos =                                                          </span>
<span class="4076745085710284833" onmouseenter="enter('4076745085710284833');" onmouseout="out('4076745085710284833');" style="">3100                             getItemInfoForComponentName(a.componentName, mUser);                         </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3101                     for (ItemInfo i : infos) {                                                           </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="">3102                         if (isShortcutInfoUpdateable(i)) {                                               </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3103                             ShortcutInfo info = (ShortcutInfo) i;                                        </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="">3104                             info.title = a.title.toString();                                             </span>
<span class="911685269403024085" onmouseenter="enter('911685269403024085');" onmouseout="out('911685269403024085');" style="">3105                             info.contentDescription = a.contentDescription;                              </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3106                             updateItemInDatabase(context, info);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3107                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3108                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3109                 }                                                                                        </span>
<span  style="">3110                                                                                                          </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3111                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3112                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3113                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3114                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="">3115                             callbacks.bindAppsUpdated(modifiedFinal);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3116                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3117                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3118                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3119             }                                                                                            </span>
<span  style="">3120                                                                                                          </span>
<span class="-1170284362245625596" onmouseenter="enter('-1170284362245625596');" onmouseout="out('-1170284362245625596');" style="">3121             final ArrayList&lt;String&gt; removedPackageNames =                                                </span>
<span class="-5690129641574664711" onmouseenter="enter('-5690129641574664711');" onmouseout="out('-5690129641574664711');" style="">3122                     new ArrayList&lt;String&gt;();                                                             </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="">3123             if (mOp == OP_REMOVE) {                                                                      </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="">3124                 // Mark all packages in the broadcast to be removed                                      </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="">3125                 removedPackageNames.addAll(Arrays.asList(packages));                                     </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="">3126             } else if (mOp == OP_UPDATE) {                                                               </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="">3127                 // Mark disabled packages in the broadcast to be removed                                 </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="">3128                 final PackageManager pm = context.getPackageManager();                                   </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3129                 for (int i=0; i&lt;N; i++) {                                                                </span>
<span class="1189279971614907536" onmouseenter="enter('1189279971614907536');" onmouseout="out('1189279971614907536');" style="">3130                     if (isPackageDisabled(context, packages[i], mUser)) {                                </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="">3131                         removedPackageNames.add(packages[i]);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3132                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3133                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3134             }                                                                                            </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="">3135             // Remove all the components associated with this package                                    </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="">3136             for (String pn : removedPackageNames) {                                                      </span>
<span class="6482411304432401961" onmouseenter="enter('6482411304432401961');" onmouseout="out('6482411304432401961');" style="">3137                 deletePackageFromDatabase(context, pn, mUser);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3138             }                                                                                            </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="">3139             // Remove all the specific components                                                        </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="">3140             for (AppInfo a : removedApps) {                                                              </span>
<span class="-1726556904055536825" onmouseenter="enter('-1726556904055536825');" onmouseout="out('-1726556904055536825');" style="">3141                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName, mUser);         </span>
<span class="7293231507608058112" onmouseenter="enter('7293231507608058112');" onmouseout="out('7293231507608058112');" style="">3142                 deleteItemsFromDatabase(context, infos);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3143             }                                                                                            </span>
<span class="5309180485107849948" onmouseenter="enter('5309180485107849948');" onmouseout="out('5309180485107849948');" style="">3144             if (!removedPackageNames.isEmpty() || !removedApps.isEmpty()) {                              </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="">3145                 // Remove any queued items from the install queue                                        </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="">3146                 String spKey = LauncherAppState.getSharedPreferencesKey();                               </span>
<span class="-4155822077911930566" onmouseenter="enter('-4155822077911930566');" onmouseout="out('-4155822077911930566');" style="">3147                 SharedPreferences sp =                                                                   </span>
<span class="-7232857049720959502" onmouseenter="enter('-7232857049720959502');" onmouseout="out('-7232857049720959502');" style="">3148                         context.getSharedPreferences(spKey, Context.MODE_PRIVATE);                       </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="">3149                 InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                 </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="">3150                 // Call the components-removed callback                                                  </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3151                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3152                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3153                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3154                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="-4641714223338514236" onmouseenter="enter('-4641714223338514236');" onmouseout="out('-4641714223338514236');" style="">3155                             callbacks.bindComponentsRemoved(removedPackageNames, removedApps, mUser);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3156                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3157                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3158                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3159             }                                                                                            </span>
<span  style="">3160                                                                                                          </span>
<span class="4263868642545515204" onmouseenter="enter('4263868642545515204');" onmouseout="out('4263868642545515204');" style="">3161             final ArrayList&lt;Object&gt; widgetsAndShortcuts =                                                </span>
<span class="-4925739004532916789" onmouseenter="enter('-4925739004532916789');" onmouseout="out('-4925739004532916789');" style="">3162                     getSortedWidgetsAndShortcuts(context);                                               </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3163             mHandler.post(new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3164                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3165                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3166                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3167                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="">3168                         callbacks.bindPackagesUpdated(widgetsAndShortcuts);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3169                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3170                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3171             });                                                                                          </span>
<span  style="">3172                                                                                                          </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="">3173             // Write all the logs to disk                                                                </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3174             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3175                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3176                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3177                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="">3178                         callbacks.dumpLogsToLocalData();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3179                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3180                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3181             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3182         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3183     }                                                                                                    </span>
<span  style="">3184                                                                                                          </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="">3185     // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                     </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="">3186     public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                      </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3187         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="">3188         final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                           </span>
<span class="3637822346102420347" onmouseenter="enter('3637822346102420347');" onmouseout="out('3637822346102420347');" style="">3189         widgetsAndShortcuts.addAll(AppWidgetManagerCompat.getInstance(context).getAllProviders());       </span>
<span  style="">3190                                                                                                          </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="">3191         Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                              </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="">3192         widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));            </span>
<span class="3220762690300374865" onmouseenter="enter('3220762690300374865');" onmouseout="out('3220762690300374865');" style="">3193         Collections.sort(widgetsAndShortcuts, new WidgetAndShortcutNameComparator(context));             </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="">3194         return widgetsAndShortcuts;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3195     }                                                                                                    </span>
<span  style="">3196                                                                                                          </span>
<span class="-7287747070935657411" onmouseenter="enter('-7287747070935657411');" onmouseout="out('-7287747070935657411');" style="">3197     private static boolean isPackageDisabled(Context context, String packageName,                        </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="">3198             UserHandleCompat user) {                                                                     </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">3199         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="2722752944691677150" onmouseenter="enter('2722752944691677150');" onmouseout="out('2722752944691677150');" style="">3200         return !launcherApps.isPackageEnabledForProfile(packageName, user);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3201     }                                                                                                    </span>
<span  style="">3202                                                                                                          </span>
<span class="5738691957451055953" onmouseenter="enter('5738691957451055953');" onmouseout="out('5738691957451055953');" style="">3203     public static boolean isValidPackageActivity(Context context, ComponentName cn,                      </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="">3204             UserHandleCompat user) {                                                                     </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="">3205         if (cn == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3206             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3207         }                                                                                                </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">3208         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="-6788056339565196353" onmouseenter="enter('-6788056339565196353');" onmouseout="out('-6788056339565196353');" style="">3209         if (!launcherApps.isPackageEnabledForProfile(cn.getPackageName(), user)) {                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3210             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3211         }                                                                                                </span>
<span class="6138596583040601663" onmouseenter="enter('6138596583040601663');" onmouseout="out('6138596583040601663');" style="">3212         return launcherApps.isActivityEnabledForProfile(cn, user);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3213     }                                                                                                    </span>
<span  style="">3214                                                                                                          </span>
<span class="5839979877555451943" onmouseenter="enter('5839979877555451943');" onmouseout="out('5839979877555451943');" style="">3215     public static boolean isValidPackage(Context context, String packageName,                            </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="">3216             UserHandleCompat user) {                                                                     </span>
<span class="2797777100746091358" onmouseenter="enter('2797777100746091358');" onmouseout="out('2797777100746091358');" style="">3217         if (packageName == null) {                                                                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3218             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3219         }                                                                                                </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">3220         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="7814688882071205012" onmouseenter="enter('7814688882071205012');" onmouseout="out('7814688882071205012');" style="">3221         return launcherApps.isPackageEnabledForProfile(packageName, user);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3222     }                                                                                                    </span>
<span  style="">3223                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3224     /**                                                                                                  </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="">3225      * Make an ShortcutInfo object for a restored application or shortcut item that points               </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="">3226      * to a package that is not yet installed on the system.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3227      */                                                                                                  </span>
<span class="6864587742410665601" onmouseenter="enter('6864587742410665601');" onmouseout="out('6864587742410665601');" style="">3228     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex, Intent intent,                </span>
<span class="-9038086405553223291" onmouseenter="enter('-9038086405553223291');" onmouseout="out('-9038086405553223291');" style="">3229             int promiseType) {                                                                           </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3230         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">3231         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="4581768130100169027" onmouseenter="enter('4581768130100169027');" onmouseout="out('4581768130100169027');" style="">3232         mIconCache.getTitleAndIcon(info, intent, info.user, true);                                       </span>
<span  style="">3233                                                                                                          </span>
<span class="-7011074266974647989" onmouseenter="enter('-7011074266974647989');" onmouseout="out('-7011074266974647989');" style="">3234         if ((promiseType &amp; ShortcutInfo.FLAG_RESTORED_ICON) != 0) {                                      </span>
<span class="-8984449213491193878" onmouseenter="enter('-8984449213491193878');" onmouseout="out('-8984449213491193878');" style="">3235             String title = (cursor != null) ? cursor.getString(titleIndex) : null;                       </span>
<span class="-5841612334834081385" onmouseenter="enter('-5841612334834081385');" onmouseout="out('-5841612334834081385');" style="">3236             if (!TextUtils.isEmpty(title)) {                                                             </span>
<span class="-2613617994889375298" onmouseenter="enter('-2613617994889375298');" onmouseout="out('-2613617994889375298');" style="">3237                 info.title = title;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3238             }                                                                                            </span>
<span class="-5174755841373748942" onmouseenter="enter('-5174755841373748942');" onmouseout="out('-5174755841373748942');" style="">3239             info.status = ShortcutInfo.FLAG_RESTORED_ICON;                                               </span>
<span class="2528235782114549087" onmouseenter="enter('2528235782114549087');" onmouseout="out('2528235782114549087');" style="">3240         } else if  ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {                            </span>
<span class="-7717414875603328452" onmouseenter="enter('-7717414875603328452');" onmouseout="out('-7717414875603328452');" style="">3241             if (TextUtils.isEmpty(info.title)) {                                                         </span>
<span class="-5806908871812941257" onmouseenter="enter('-5806908871812941257');" onmouseout="out('-5806908871812941257');" style="">3242                 info.title = (cursor != null) ? cursor.getString(titleIndex) : &quot;&quot;;                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3243             }                                                                                            </span>
<span class="-4388547064813731487" onmouseenter="enter('-4388547064813731487');" onmouseout="out('-4388547064813731487');" style="">3244             info.status = ShortcutInfo.FLAG_AUTOINTALL_ICON;                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3245         } else {                                                                                         </span>
<span class="5717376002108262372" onmouseenter="enter('5717376002108262372');" onmouseout="out('5717376002108262372');" style="">3246             throw new InvalidParameterException(&quot;Invalid restoreType &quot; + promiseType);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3247         }                                                                                                </span>
<span  style="">3248                                                                                                          </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="">3249         info.contentDescription = mUserManager.getBadgedLabelForUser(                                    </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="">3250                 info.title.toString(), info.user);                                                       </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3251         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="-3783926904025262102" onmouseenter="enter('-3783926904025262102');" onmouseout="out('-3783926904025262102');" style="">3252         info.promisedIntent = intent;                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3253         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3254     }                                                                                                    </span>
<span  style="">3255                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3256     /**                                                                                                  </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="">3257      * Make an Intent object for a restored application or shortcut item that points                     </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="">3258      * to the market page for the item.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3259      */                                                                                                  </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="">3260     private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                     </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">3261         ComponentName componentName = intent.getComponent();                                             </span>
<span class="-3881801991978262069" onmouseenter="enter('-3881801991978262069');" onmouseout="out('-3881801991978262069');" style="">3262         return getMarketIntent(componentName.getPackageName());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3263     }                                                                                                    </span>
<span  style="">3264                                                                                                          </span>
<span class="-3260913833937220020" onmouseenter="enter('-3260913833937220020');" onmouseout="out('-3260913833937220020');" style="">3265     static Intent getMarketIntent(String packageName) {                                                  </span>
<span class="-9094317775268459694" onmouseenter="enter('-9094317775268459694');" onmouseout="out('-9094317775268459694');" style="">3266         return new Intent(Intent.ACTION_VIEW)                                                            </span>
<span class="273234347361851615" onmouseenter="enter('273234347361851615');" onmouseout="out('273234347361851615');" style="">3267             .setData(new Uri.Builder()                                                                   </span>
<span class="-9027153585574964790" onmouseenter="enter('-9027153585574964790');" onmouseout="out('-9027153585574964790');" style="">3268                 .scheme(&quot;market&quot;)                                                                        </span>
<span class="-1106866791415129127" onmouseenter="enter('-1106866791415129127');" onmouseout="out('-1106866791415129127');" style="">3269                 .authority(&quot;details&quot;)                                                                    </span>
<span class="6782694763028009203" onmouseenter="enter('6782694763028009203');" onmouseout="out('6782694763028009203');" style="">3270                 .appendQueryParameter(&quot;id&quot;, packageName)                                                 </span>
<span class="-5732724158529108102" onmouseenter="enter('-5732724158529108102');" onmouseout="out('-5732724158529108102');" style="">3271                 .build());                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3272     }                                                                                                    </span>
<span  style="">3273                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3274     /**                                                                                                  </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="">3275      * This is called from the code that adds shortcuts from the intent receiver.  This                  </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="">3276      * doesn&#x27;t have a Cursor, but                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3277      */                                                                                                  </span>
<span class="-2548217455776999178" onmouseenter="enter('-2548217455776999178');" onmouseout="out('-2548217455776999178');" style="">3278     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent,                           </span>
<span class="6504255554925479471" onmouseenter="enter('6504255554925479471');" onmouseout="out('6504255554925479471');" style="">3279             UserHandleCompat user, Context context) {                                                    </span>
<span class="-7378868523772977866" onmouseenter="enter('-7378868523772977866');" onmouseout="out('-7378868523772977866');" style="">3280         return getShortcutInfo(manager, intent, user, context, null, -1, -1, null, false);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3281     }                                                                                                    </span>
<span  style="">3282                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3283     /**                                                                                                  </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="">3284      * Make an ShortcutInfo object for a shortcut that is an application.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">3285      *                                                                                                   </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="">3286      * If c is not null, then it will be used to fill in missing data like the title and icon.           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3287      */                                                                                                  </span>
<span class="-2548217455776999178" onmouseenter="enter('-2548217455776999178');" onmouseout="out('-2548217455776999178');" style="">3288     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent,                           </span>
<span class="-8761535452245299531" onmouseenter="enter('-8761535452245299531');" onmouseout="out('-8761535452245299531');" style="">3289             UserHandleCompat user, Context context, Cursor c, int iconIndex, int titleIndex,             </span>
<span class="3517019325264382616" onmouseenter="enter('3517019325264382616');" onmouseout="out('3517019325264382616');" style="">3290             HashMap&lt;Object, CharSequence&gt; labelCache, boolean allowMissingTarget) {                      </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="">3291         if (user == null) {                                                                              </span>
<span class="6545168092911351889" onmouseenter="enter('6545168092911351889');" onmouseout="out('6545168092911351889');" style="">3292             Log.d(TAG, &quot;Null user found in getShortcutInfo&quot;);                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3293             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3294         }                                                                                                </span>
<span  style="">3295                                                                                                          </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">3296         ComponentName componentName = intent.getComponent();                                             </span>
<span class="-5224470428335408787" onmouseenter="enter('-5224470428335408787');" onmouseout="out('-5224470428335408787');" style="">3297         if (componentName == null) {                                                                     </span>
<span class="4371782537001302642" onmouseenter="enter('4371782537001302642');" onmouseout="out('4371782537001302642');" style="">3298             Log.d(TAG, &quot;Missing component found in getShortcutInfo: &quot; + componentName);                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3299             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3300         }                                                                                                </span>
<span  style="">3301                                                                                                          </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="">3302         Intent newIntent = new Intent(intent.getAction(), null);                                         </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="">3303         newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                 </span>
<span class="6894377559056826774" onmouseenter="enter('6894377559056826774');" onmouseout="out('6894377559056826774');" style="">3304         newIntent.setComponent(componentName);                                                           </span>
<span class="-966571371435372555" onmouseenter="enter('-966571371435372555');" onmouseout="out('-966571371435372555');" style="">3305         LauncherActivityInfoCompat lai = mLauncherApps.resolveActivity(newIntent, user);                 </span>
<span class="6800790308293325816" onmouseenter="enter('6800790308293325816');" onmouseout="out('6800790308293325816');" style="">3306         if ((lai == null) &amp;&amp; !allowMissingTarget) {                                                      </span>
<span class="-2395110402435537171" onmouseenter="enter('-2395110402435537171');" onmouseout="out('-2395110402435537171');" style="">3307             Log.d(TAG, &quot;Missing activity found in getShortcutInfo: &quot; + componentName);                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3308             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3309         }                                                                                                </span>
<span  style="">3310                                                                                                          </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3311         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span  style="">3312                                                                                                          </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="">3313         // the resource -- This may implicitly give us back the fallback icon,                           </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="">3314         // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                        </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="">3315         // to avoid saving lots of copies of that in the database, and most apps                         </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="">3316         // have icons anyway.                                                                            </span>
<span class="-6777959075043703494" onmouseenter="enter('-6777959075043703494');" onmouseout="out('-6777959075043703494');" style="">3317         Bitmap icon = mIconCache.getIcon(componentName, lai, labelCache);                                </span>
<span  style="">3318                                                                                                          </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3319         // the db                                                                                        </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3320         if (icon == null) {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">3321             if (c != null) {                                                                             </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3322                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3323             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3324         }                                                                                                </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3325         // the fallback icon                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3326         if (icon == null) {                                                                              </span>
<span class="-1443979577510132687" onmouseenter="enter('-1443979577510132687');" onmouseout="out('-1443979577510132687');" style="">3327             icon = mIconCache.getDefaultIcon(user);                                                      </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3328             info.usingFallbackIcon = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3329         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3330         info.setIcon(icon);                                                                              </span>
<span  style="">3331                                                                                                          </span>
<span class="-7595242445841823644" onmouseenter="enter('-7595242445841823644');" onmouseout="out('-7595242445841823644');" style="">3332         // From the cache.                                                                               </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">3333         if (labelCache != null) {                                                                        </span>
<span class="3073733017601521903" onmouseenter="enter('3073733017601521903');" onmouseout="out('3073733017601521903');" style="">3334             info.title = labelCache.get(componentName);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3335         }                                                                                                </span>
<span  style="">3336                                                                                                          </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="">3337         // from the resource                                                                             </span>
<span class="6778614741206473497" onmouseenter="enter('6778614741206473497');" onmouseout="out('6778614741206473497');" style="">3338         if (info.title == null &amp;&amp; lai != null) {                                                         </span>
<span class="-4488945615052684527" onmouseenter="enter('-4488945615052684527');" onmouseout="out('-4488945615052684527');" style="">3339             info.title = lai.getLabel();                                                                 </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">3340             if (labelCache != null) {                                                                    </span>
<span class="-3170508962365680295" onmouseenter="enter('-3170508962365680295');" onmouseout="out('-3170508962365680295');" style="">3341                 labelCache.put(componentName, info.title);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3342             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3343         }                                                                                                </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="">3344         // from the db                                                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3345         if (info.title == null) {                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">3346             if (c != null) {                                                                             </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="">3347                 info.title =  c.getString(titleIndex);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3348             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3349         }                                                                                                </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="">3350         // fall back to the class name of the activity                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3351         if (info.title == null) {                                                                        </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="">3352             info.title = componentName.getClassName();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3353         }                                                                                                </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="">3354         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                </span>
<span class="-7567614667172676383" onmouseenter="enter('-7567614667172676383');" onmouseout="out('-7567614667172676383');" style="">3355         info.user = user;                                                                                </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="">3356         info.contentDescription = mUserManager.getBadgedLabelForUser(                                    </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="">3357                 info.title.toString(), info.user);                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3358         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3359     }                                                                                                    </span>
<span  style="">3360                                                                                                          </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="">3361     static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                               </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="">3362             ItemInfoFilter f) {                                                                          </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="">3363         HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                            </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3364         for (ItemInfo i : infos) {                                                                       </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3365             if (i instanceof ShortcutInfo) {                                                             </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3366                 ShortcutInfo info = (ShortcutInfo) i;                                                    </span>
<span class="-8411217647144645125" onmouseenter="enter('-8411217647144645125');" onmouseout="out('-8411217647144645125');" style="">3367                 ComponentName cn = info.getTargetComponent();                                            </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3368                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3369                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3370                 }                                                                                        </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="">3371             } else if (i instanceof FolderInfo) {                                                        </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="">3372                 FolderInfo info = (FolderInfo) i;                                                        </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="">3373                 for (ShortcutInfo s : info.contents) {                                                   </span>
<span class="-5499244430299718871" onmouseenter="enter('-5499244430299718871');" onmouseout="out('-5499244430299718871');" style="">3374                     ComponentName cn = s.getTargetComponent();                                           </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="">3375                     if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                       </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="">3376                         filtered.add(s);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3377                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3378                 }                                                                                        </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="">3379             } else if (i instanceof LauncherAppWidgetInfo) {                                             </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="">3380                 LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                  </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="">3381                 ComponentName cn = info.providerName;                                                    </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3382                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3383                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3384                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3385             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3386         }                                                                                                </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="">3387         return new ArrayList&lt;ItemInfo&gt;(filtered);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3388     }                                                                                                    </span>
<span  style="">3389                                                                                                          </span>
<span class="-6017059906416334391" onmouseenter="enter('-6017059906416334391');" onmouseout="out('-6017059906416334391');" style="">3390     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname,                   </span>
<span class="-8990624712004338264" onmouseenter="enter('-8990624712004338264');" onmouseout="out('-8990624712004338264');" style="">3391             final UserHandleCompat user) {                                                               </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">3392         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3393             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3394             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="5970365724964589884" onmouseenter="enter('5970365724964589884');" onmouseout="out('5970365724964589884');" style="">3395                 if (info.user == null) {                                                                 </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="">3396                     return cn.equals(cname);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3397                 } else {                                                                                 </span>
<span class="9080235702604787251" onmouseenter="enter('9080235702604787251');" onmouseout="out('9080235702604787251');" style="">3398                     return cn.equals(cname) &amp;&amp; info.user.equals(user);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3399                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3400             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3401         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3402         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3403     }                                                                                                    </span>
<span  style="">3404                                                                                                          </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="">3405     public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                         </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3406         if (i instanceof ShortcutInfo) {                                                                 </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3407             ShortcutInfo info = (ShortcutInfo) i;                                                        </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="">3408             // We need to check for ACTION_MAIN otherwise getComponent() might                           </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="">3409             // return null for some shortcuts (for instance, for shortcuts to                            </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="">3410             // web pages.)                                                                               </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="">3411             Intent intent = info.intent;                                                                 </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="">3412             ComponentName name = intent.getComponent();                                                  </span>
<span class="-7226540389871247766" onmouseenter="enter('-7226540389871247766');" onmouseout="out('-7226540389871247766');" style="">3413             if (info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION &amp;&amp;                     </span>
<span class="-3498713534944595637" onmouseenter="enter('-3498713534944595637');" onmouseout="out('-3498713534944595637');" style="">3414                     Intent.ACTION_MAIN.equals(intent.getAction()) &amp;&amp; name != null) {                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3415                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3416             }                                                                                            </span>
<span class="-5396282347241069474" onmouseenter="enter('-5396282347241069474');" onmouseout="out('-5396282347241069474');" style="">3417             // placeholder shortcuts get special treatment, let them through too.                        </span>
<span class="-8737155453802783041" onmouseenter="enter('-8737155453802783041');" onmouseout="out('-8737155453802783041');" style="">3418             if (info.isPromise()) {                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3419                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3420             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3421         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3422         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3423     }                                                                                                    </span>
<span  style="">3424                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3425     /**                                                                                                  </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="">3426      * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3427      */                                                                                                  </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="">3428     private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                      </span>
<span class="4905943326370352288" onmouseenter="enter('4905943326370352288');" onmouseout="out('4905943326370352288');" style="">3429             int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex,               </span>
<span class="483103881605747557" onmouseenter="enter('483103881605747557');" onmouseout="out('483103881605747557');" style="">3430             int titleIndex) {                                                                            </span>
<span  style="">3431                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3432         Bitmap icon = null;                                                                              </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3433         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="5882358276056228538" onmouseenter="enter('5882358276056228538');" onmouseout="out('5882358276056228538');" style="">3434         // Non-app shortcuts are only supported for current user.                                        </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">3435         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3436         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span  style="">3437                                                                                                          </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="">3438         // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                  </span>
<span  style="">3439                                                                                                          </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">3440         info.title = c.getString(titleIndex);                                                            </span>
<span  style="">3441                                                                                                          </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="">3442         int iconType = c.getInt(iconTypeIndex);                                                          </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="">3443         switch (iconType) {                                                                              </span>
<span class="-349524516714147238" onmouseenter="enter('-349524516714147238');" onmouseout="out('-349524516714147238');" style="">3444         case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:                                              </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="">3445             String packageName = c.getString(iconPackageIndex);                                          </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="">3446             String resourceName = c.getString(iconResourceIndex);                                        </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3447             PackageManager packageManager = context.getPackageManager();                                 </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3448             info.customIcon = false;                                                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="">3449             // the resource                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3450             try {                                                                                        </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="">3451                 Resources resources = packageManager.getResourcesForApplication(packageName);            </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="">3452                 if (resources != null) {                                                                 </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="">3453                     final int id = resources.getIdentifier(resourceName, null, null);                    </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3454                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3455                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3456                 }                                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3457             } catch (Exception e) {                                                                      </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="">3458                 // drop this.  we have other places to look for icons                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3459             }                                                                                            </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3460             // the db                                                                                    </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3461             if (icon == null) {                                                                          </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3462                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3463             }                                                                                            </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3464             // the fallback icon                                                                         </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3465             if (icon == null) {                                                                          </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3466                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3467                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3468             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3469             break;                                                                                       </span>
<span class="8287056964614325383" onmouseenter="enter('8287056964614325383');" onmouseout="out('8287056964614325383');" style="">3470         case LauncherSettings.Favorites.ICON_TYPE_BITMAP:                                                </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3471             icon = getIconFromCursor(c, iconIndex, context);                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3472             if (icon == null) {                                                                          </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3473                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3474                 info.customIcon = false;                                                                 </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3475                 info.usingFallbackIcon = true;                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3476             } else {                                                                                     </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="">3477                 info.customIcon = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3478             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3479             break;                                                                                       </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">3480         default:                                                                                         </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3481             icon = mIconCache.getDefaultIcon(info.user);                                                 </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3482             info.usingFallbackIcon = true;                                                               </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3483             info.customIcon = false;                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3484             break;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3485         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3486         info.setIcon(icon);                                                                              </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3487         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3488     }                                                                                                    </span>
<span  style="">3489                                                                                                          </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="">3490     Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                 </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style="">3491         @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                           </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">3492         final boolean debug = false;                                                                     </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="">3493         if (debug) {                                                                                     </span>
<span class="-6059745727821652987" onmouseenter="enter('-6059745727821652987');" onmouseout="out('-6059745727821652987');" style="">3494             Log.d(TAG, &quot;getIconFromCursor app=&quot;                                                          </span>
<span class="3938717124241653137" onmouseenter="enter('3938717124241653137');" onmouseout="out('3938717124241653137');" style="">3495                     + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3496         }                                                                                                </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">3497         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3498         try {                                                                                            </span>
<span class="-8927216840433750458" onmouseenter="enter('-8927216840433750458');" onmouseout="out('-8927216840433750458');" style="">3499             return Utilities.createIconBitmap(                                                           </span>
<span class="5146235978369237158" onmouseenter="enter('5146235978369237158');" onmouseout="out('5146235978369237158');" style="">3500                     BitmapFactory.decodeByteArray(data, 0, data.length), context);                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3501         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3502             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3503         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3504     }                                                                                                    </span>
<span  style="">3505                                                                                                          </span>
<span class="-7359014031490826383" onmouseenter="enter('-7359014031490826383');" onmouseout="out('-7359014031490826383');" style="">3506     ShortcutInfo addShortcut(Context context, Intent data, long container, int screen,                   </span>
<span class="6268414987721391526" onmouseenter="enter('6268414987721391526');" onmouseout="out('6268414987721391526');" style="">3507             int cellX, int cellY, boolean notify) {                                                      </span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="">3508         final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                           </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="">3509         if (info == null) {                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3510             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3511         }                                                                                                </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="">3512         addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                       </span>
<span  style="">3513                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3514         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3515     }                                                                                                    </span>
<span  style="">3516                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3517     /**                                                                                                  </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="">3518      * Attempts to find an AppWidgetProviderInfo that matches the given component.                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3519      */                                                                                                  </span>
<span class="-8933877649522571458" onmouseenter="enter('-8933877649522571458');" onmouseout="out('-8933877649522571458');" style="">3520     static AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                 </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="">3521             ComponentName component) {                                                                   </span>
<span class="-6575430528437366773" onmouseenter="enter('-6575430528437366773');" onmouseout="out('-6575430528437366773');" style="">3522         List&lt;AppWidgetProviderInfo&gt; widgets =                                                            </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3523             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3524         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="">3525             if (info.provider.equals(component)) {                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3526                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3527             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3528         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3529         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3530     }                                                                                                    </span>
<span  style="">3531                                                                                                          </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="">3532     ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {             </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="">3533         Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                           </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="">3534         String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                   </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="">3535         Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                         </span>
<span  style="">3536                                                                                                          </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">3537         if (intent == null) {                                                                            </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="">3538             // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null         </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="">3539             Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3540             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3541         }                                                                                                </span>
<span  style="">3542                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3543         Bitmap icon = null;                                                                              </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="">3544         boolean customIcon = false;                                                                      </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="">3545         ShortcutIconResource iconResource = null;                                                        </span>
<span  style="">3546                                                                                                          </span>
<span class="4708321654003878831" onmouseenter="enter('4708321654003878831');" onmouseout="out('4708321654003878831');" style="">3547         if (bitmap != null &amp;&amp; bitmap instanceof Bitmap) {                                                </span>
<span class="-4792971395534249505" onmouseenter="enter('-4792971395534249505');" onmouseout="out('-4792971395534249505');" style="">3548             icon = Utilities.createIconBitmap(new FastBitmapDrawable((Bitmap)bitmap), context);          </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="">3549             customIcon = true;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3550         } else {                                                                                         </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="">3551             Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);             </span>
<span class="1150112908884585569" onmouseenter="enter('1150112908884585569');" onmouseout="out('1150112908884585569');" style="">3552             if (extra != null &amp;&amp; extra instanceof ShortcutIconResource) {                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3553                 try {                                                                                    </span>
<span class="7381422411731402038" onmouseenter="enter('7381422411731402038');" onmouseout="out('7381422411731402038');" style="">3554                     iconResource = (ShortcutIconResource) extra;                                         </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3555                     final PackageManager packageManager = context.getPackageManager();                   </span>
<span class="8040670109966211806" onmouseenter="enter('8040670109966211806');" onmouseout="out('8040670109966211806');" style="">3556                     Resources resources = packageManager.getResourcesForApplication(                     </span>
<span class="6486160691197808360" onmouseenter="enter('6486160691197808360');" onmouseout="out('6486160691197808360');" style="">3557                             iconResource.packageName);                                                   </span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="">3558                     final int id = resources.getIdentifier(iconResource.resourceName, null, null);       </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3559                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="2974405441716858047" onmouseenter="enter('2974405441716858047');" onmouseout="out('2974405441716858047');" style="">3560                             mIconCache.getFullResIcon(resources, id),                                    </span>
<span class="-7033093369240644837" onmouseenter="enter('-7033093369240644837');" onmouseout="out('-7033093369240644837');" style="">3561                             context);                                                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3562                 } catch (Exception e) {                                                                  </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="">3563                     Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3564                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3565             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3566         }                                                                                                </span>
<span  style="">3567                                                                                                          </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3568         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span  style="">3569                                                                                                          </span>
<span class="2102380556199177801" onmouseenter="enter('2102380556199177801');" onmouseout="out('2102380556199177801');" style="">3570         // Only support intents for current user for now. Intents sent from other                        </span>
<span class="2194655253408912185" onmouseenter="enter('2194655253408912185');" onmouseout="out('2194655253408912185');" style="">3571         // users wouldn&#x27;t get here without intent forwarding anyway.                                     </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">3572         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3573         if (icon == null) {                                                                              </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="">3574             if (fallbackIcon != null) {                                                                  </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="">3575                 icon = fallbackIcon;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3576             } else {                                                                                     </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3577                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3578                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3579             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3580         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3581         info.setIcon(icon);                                                                              </span>
<span  style="">3582                                                                                                          </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="">3583         info.title = name;                                                                               </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="">3584         info.contentDescription = mUserManager.getBadgedLabelForUser(                                    </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="">3585                 info.title.toString(), info.user);                                                       </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">3586         info.intent = intent;                                                                            </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="">3587         info.customIcon = customIcon;                                                                    </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="">3588         info.iconResource = iconResource;                                                                </span>
<span  style="">3589                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3590         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3591     }                                                                                                    </span>
<span  style="">3592                                                                                                          </span>
<span class="869799550823252877" onmouseenter="enter('869799550823252877');" onmouseout="out('869799550823252877');" style="">3593     boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c,             </span>
<span class="650460935465639981" onmouseenter="enter('650460935465639981');" onmouseout="out('650460935465639981');" style="">3594             int iconIndex) {                                                                             </span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="">3595         // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                    </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">3596         if (!mAppsCanBeOnRemoveableStorage) {                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3597             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3598         }                                                                                                </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="">3599         // If this icon doesn&#x27;t have a custom icon, check to see                                         </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="">3600         // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                         </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="">3601         // we&#x27;re going to show, store what we are going to show back                                     </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="">3602         // into the DB.  We do this so when we&#x27;re loading, if the                                        </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="">3603         // package manager can&#x27;t find an icon (for example because                                       </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="">3604         // the app is on SD) then we can use that instead.                                               </span>
<span class="6478679774718804760" onmouseenter="enter('6478679774718804760');" onmouseout="out('6478679774718804760');" style="">3605         if (!info.customIcon &amp;&amp; !info.usingFallbackIcon) {                                               </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="">3606             cache.put(info, c.getBlob(iconIndex));                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3607             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3608         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3609         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3610     }                                                                                                    </span>
<span class="1654527872685192879" onmouseenter="enter('1654527872685192879');" onmouseout="out('1654527872685192879');" style="">3611     void updateSavedIcon(Context context, ShortcutInfo info, byte[] data) {                              </span>
<span class="2739424845963553299" onmouseenter="enter('2739424845963553299');" onmouseout="out('2739424845963553299');" style="">3612         boolean needSave = false;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3613         try {                                                                                            </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">3614             if (data != null) {                                                                          </span>
<span class="-7759318311620721467" onmouseenter="enter('-7759318311620721467');" onmouseout="out('-7759318311620721467');" style="">3615                 Bitmap saved = BitmapFactory.decodeByteArray(data, 0, data.length);                      </span>
<span class="5601916118931842920" onmouseenter="enter('5601916118931842920');" onmouseout="out('5601916118931842920');" style="">3616                 Bitmap loaded = info.getIcon(mIconCache);                                                </span>
<span class="3622333829210083937" onmouseenter="enter('3622333829210083937');" onmouseout="out('3622333829210083937');" style="">3617                 needSave = !saved.sameAs(loaded);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3618             } else {                                                                                     </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3619                 needSave = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3620             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3621         } catch (Exception e) {                                                                          </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3622             needSave = true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3623         }                                                                                                </span>
<span class="-1391846982631217245" onmouseenter="enter('-1391846982631217245');" onmouseout="out('-1391846982631217245');" style="">3624         if (needSave) {                                                                                  </span>
<span class="3557323548661765982" onmouseenter="enter('3557323548661765982');" onmouseout="out('3557323548661765982');" style="">3625             Log.d(TAG, &quot;going to save icon bitmap for info=&quot; + info);                                    </span>
<span class="2982884345620001266" onmouseenter="enter('2982884345620001266');" onmouseout="out('2982884345620001266');" style="">3626             // This is slower than is ideal, but this only happens once                                  </span>
<span class="6026812495787058898" onmouseenter="enter('6026812495787058898');" onmouseout="out('6026812495787058898');" style="">3627             // or when the app is updated with a new icon.                                               </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3628             updateItemInDatabase(context, info);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3629         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3630     }                                                                                                    </span>
<span  style="">3631                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3632     /**                                                                                                  </span>
<span class="4855649975001229153" onmouseenter="enter('4855649975001229153');" onmouseout="out('4855649975001229153');" style="">3633      * Return an existing FolderInfo object if we have encountered this ID previously,                   </span>
<span class="1965046356881977619" onmouseenter="enter('1965046356881977619');" onmouseout="out('1965046356881977619');" style="">3634      * or make a new one.                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3635      */                                                                                                  </span>
<span class="-2475696420152943641" onmouseenter="enter('-2475696420152943641');" onmouseout="out('-2475696420152943641');" style="">3636     private static FolderInfo findOrMakeFolder(HashMap&lt;Long, FolderInfo&gt; folders, long id) {             </span>
<span class="4702055422209629108" onmouseenter="enter('4702055422209629108');" onmouseout="out('4702055422209629108');" style="">3637         // See if a placeholder was created for us already                                               </span>
<span class="5369947662598537472" onmouseenter="enter('5369947662598537472');" onmouseout="out('5369947662598537472');" style="">3638         FolderInfo folderInfo = folders.get(id);                                                         </span>
<span class="-1935655509058582330" onmouseenter="enter('-1935655509058582330');" onmouseout="out('-1935655509058582330');" style="">3639         if (folderInfo == null) {                                                                        </span>
<span class="-2837885610668527269" onmouseenter="enter('-2837885610668527269');" onmouseout="out('-2837885610668527269');" style="">3640             // No placeholder -- create a new instance                                                   </span>
<span class="-1173144769562528834" onmouseenter="enter('-1173144769562528834');" onmouseout="out('-1173144769562528834');" style="">3641             folderInfo = new FolderInfo();                                                               </span>
<span class="-6364759527041918506" onmouseenter="enter('-6364759527041918506');" onmouseout="out('-6364759527041918506');" style="">3642             folders.put(id, folderInfo);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3643         }                                                                                                </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">3644         return folderInfo;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3645     }                                                                                                    </span>
<span  style="">3646                                                                                                          </span>
<span class="-958488581416967596" onmouseenter="enter('-958488581416967596');" onmouseout="out('-958488581416967596');" style="">3647     public static final Comparator&lt;AppInfo&gt; getAppNameComparator() {                                     </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3648         final Collator collator = Collator.getInstance();                                                </span>
<span class="-5613048777706091935" onmouseenter="enter('-5613048777706091935');" onmouseout="out('-5613048777706091935');" style="">3649         return new Comparator&lt;AppInfo&gt;() {                                                               </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3650             public final int compare(AppInfo a, AppInfo b) {                                             </span>
<span class="3541515045662468306" onmouseenter="enter('3541515045662468306');" onmouseout="out('3541515045662468306');" style="">3651                 if (a.user.equals(b.user)) {                                                             </span>
<span class="-7549376093488495011" onmouseenter="enter('-7549376093488495011');" onmouseout="out('-7549376093488495011');" style="">3652                     int result = collator.compare(a.title.toString().trim(),                             </span>
<span class="1811873973139560730" onmouseenter="enter('1811873973139560730');" onmouseout="out('1811873973139560730');" style="">3653                             b.title.toString().trim());                                                  </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="">3654                     if (result == 0) {                                                                   </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="">3655                         result = a.componentName.compareTo(b.componentName);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3656                     }                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">3657                     return result;                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3658                 } else {                                                                                 </span>
<span class="-4940624116090922199" onmouseenter="enter('-4940624116090922199');" onmouseout="out('-4940624116090922199');" style="">3659                     // TODO Need to figure out rules for sorting                                         </span>
<span class="-7580798058375972430" onmouseenter="enter('-7580798058375972430');" onmouseout="out('-7580798058375972430');" style="">3660                     // profiles, this puts work second.                                                  </span>
<span class="-437659129845370257" onmouseenter="enter('-437659129845370257');" onmouseout="out('-437659129845370257');" style="">3661                     return a.user.toString().compareTo(b.user.toString());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3662                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3663             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3664         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3665     }                                                                                                    </span>
<span class="394292360646743486" onmouseenter="enter('394292360646743486');" onmouseout="out('394292360646743486');" style="">3666     public static final Comparator&lt;AppInfo&gt; APP_INSTALL_TIME_COMPARATOR                                  </span>
<span class="-2973469265380285464" onmouseenter="enter('-2973469265380285464');" onmouseout="out('-2973469265380285464');" style="">3667             = new Comparator&lt;AppInfo&gt;() {                                                                </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3668         public final int compare(AppInfo a, AppInfo b) {                                                 </span>
<span class="4743139001154708795" onmouseenter="enter('4743139001154708795');" onmouseout="out('4743139001154708795');" style="">3669             if (a.firstInstallTime &lt; b.firstInstallTime) return 1;                                       </span>
<span class="2246013200960361834" onmouseenter="enter('2246013200960361834');" onmouseout="out('2246013200960361834');" style="">3670             if (a.firstInstallTime &gt; b.firstInstallTime) return -1;                                      </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style="">3671             return 0;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3672         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3673     };                                                                                                   </span>
<span class="-2741084556110057526" onmouseenter="enter('-2741084556110057526');" onmouseout="out('-2741084556110057526');" style="">3674     static ComponentName getComponentNameFromResolveInfo(ResolveInfo info) {                             </span>
<span class="5044967282776033452" onmouseenter="enter('5044967282776033452');" onmouseout="out('5044967282776033452');" style="">3675         if (info.activityInfo != null) {                                                                 </span>
<span class="4524084479320544608" onmouseenter="enter('4524084479320544608');" onmouseout="out('4524084479320544608');" style="">3676             return new ComponentName(info.activityInfo.packageName, info.activityInfo.name);             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3677         } else {                                                                                         </span>
<span class="-6175863207819175779" onmouseenter="enter('-6175863207819175779');" onmouseout="out('-6175863207819175779');" style="">3678             return new ComponentName(info.serviceInfo.packageName, info.serviceInfo.name);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3679         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3680     }                                                                                                    </span>
<span class="-5604165961236567660" onmouseenter="enter('-5604165961236567660');" onmouseout="out('-5604165961236567660');" style="">3681     public static class ShortcutNameComparator implements Comparator&lt;LauncherActivityInfoCompat&gt; {       </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3682         private Collator mCollator;                                                                      </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">3683         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span class="-5960404209194449161" onmouseenter="enter('-5960404209194449161');" onmouseout="out('-5960404209194449161');" style="">3684         ShortcutNameComparator(PackageManager pm) {                                                      </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">3685             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3686             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3687         }                                                                                                </span>
<span class="3595266679393364065" onmouseenter="enter('3595266679393364065');" onmouseout="out('3595266679393364065');" style="">3688         ShortcutNameComparator(HashMap&lt;Object, CharSequence&gt; labelCache) {                               </span>
<span class="-1230739904022851098" onmouseenter="enter('-1230739904022851098');" onmouseout="out('-1230739904022851098');" style="">3689             mLabelCache = labelCache;                                                                    </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3690             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3691         }                                                                                                </span>
<span class="5300656659592950018" onmouseenter="enter('5300656659592950018');" onmouseout="out('5300656659592950018');" style="">3692         public final int compare(LauncherActivityInfoCompat a, LauncherActivityInfoCompat b) {           </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">3693             String labelA, labelB;                                                                       </span>
<span class="3539590309650150575" onmouseenter="enter('3539590309650150575');" onmouseout="out('3539590309650150575');" style="">3694             ComponentName keyA = a.getComponentName();                                                   </span>
<span class="-674250356247748253" onmouseenter="enter('-674250356247748253');" onmouseout="out('-674250356247748253');" style="">3695             ComponentName keyB = b.getComponentName();                                                   </span>
<span class="6987605502838603761" onmouseenter="enter('6987605502838603761');" onmouseout="out('6987605502838603761');" style="">3696             if (mLabelCache.containsKey(keyA)) {                                                         </span>
<span class="-1058154863590772027" onmouseenter="enter('-1058154863590772027');" onmouseout="out('-1058154863590772027');" style="">3697                 labelA = mLabelCache.get(keyA).toString();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3698             } else {                                                                                     </span>
<span class="8953753374571564594" onmouseenter="enter('8953753374571564594');" onmouseout="out('8953753374571564594');" style="">3699                 labelA = a.getLabel().toString().trim();                                                 </span>
<span  style="">3700                                                                                                          </span>
<span class="-8431652685509449538" onmouseenter="enter('-8431652685509449538');" onmouseout="out('-8431652685509449538');" style="">3701                 mLabelCache.put(keyA, labelA);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3702             }                                                                                            </span>
<span class="-6450873724396873776" onmouseenter="enter('-6450873724396873776');" onmouseout="out('-6450873724396873776');" style="">3703             if (mLabelCache.containsKey(keyB)) {                                                         </span>
<span class="267036364262288198" onmouseenter="enter('267036364262288198');" onmouseout="out('267036364262288198');" style="">3704                 labelB = mLabelCache.get(keyB).toString();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3705             } else {                                                                                     </span>
<span class="-6332222509536632454" onmouseenter="enter('-6332222509536632454');" onmouseout="out('-6332222509536632454');" style="">3706                 labelB = b.getLabel().toString().trim();                                                 </span>
<span  style="">3707                                                                                                          </span>
<span class="6304111994442836155" onmouseenter="enter('6304111994442836155');" onmouseout="out('6304111994442836155');" style="">3708                 mLabelCache.put(keyB, labelB);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3709             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3710             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3711         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3712     };                                                                                                   </span>
<span class="-9068712813001281029" onmouseenter="enter('-9068712813001281029');" onmouseout="out('-9068712813001281029');" style="">3713     public static class WidgetAndShortcutNameComparator implements Comparator&lt;Object&gt; {                  </span>
<span class="9150498506085829362" onmouseenter="enter('9150498506085829362');" onmouseout="out('9150498506085829362');" style="">3714         private final AppWidgetManagerCompat mManager;                                                   </span>
<span class="916814758228251192" onmouseenter="enter('916814758228251192');" onmouseout="out('916814758228251192');" style="">3715         private final PackageManager mPackageManager;                                                    </span>
<span class="3147273048289991484" onmouseenter="enter('3147273048289991484');" onmouseout="out('3147273048289991484');" style="">3716         private final HashMap&lt;Object, String&gt; mLabelCache;                                               </span>
<span class="7734513056437222570" onmouseenter="enter('7734513056437222570');" onmouseout="out('7734513056437222570');" style="">3717         private final Collator mCollator;                                                                </span>
<span  style="">3718                                                                                                          </span>
<span class="-4227954493245511846" onmouseenter="enter('-4227954493245511846');" onmouseout="out('-4227954493245511846');" style="">3719         WidgetAndShortcutNameComparator(Context context) {                                               </span>
<span class="3481132346717467494" onmouseenter="enter('3481132346717467494');" onmouseout="out('3481132346717467494');" style="">3720             mManager = AppWidgetManagerCompat.getInstance(context);                                      </span>
<span class="8554599676865199182" onmouseenter="enter('8554599676865199182');" onmouseout="out('8554599676865199182');" style="">3721             mPackageManager = context.getPackageManager();                                               </span>
<span class="240497455152177218" onmouseenter="enter('240497455152177218');" onmouseout="out('240497455152177218');" style="">3722             mLabelCache = new HashMap&lt;Object, String&gt;();                                                 </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3723             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3724         }                                                                                                </span>
<span class="6735042653098150116" onmouseenter="enter('6735042653098150116');" onmouseout="out('6735042653098150116');" style="">3725         public final int compare(Object a, Object b) {                                                   </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">3726             String labelA, labelB;                                                                       </span>
<span class="-5754282386436968390" onmouseenter="enter('-5754282386436968390');" onmouseout="out('-5754282386436968390');" style="">3727             if (mLabelCache.containsKey(a)) {                                                            </span>
<span class="9174303291338212675" onmouseenter="enter('9174303291338212675');" onmouseout="out('9174303291338212675');" style="">3728                 labelA = mLabelCache.get(a);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3729             } else {                                                                                     </span>
<span class="-9066745869396444524" onmouseenter="enter('-9066745869396444524');" onmouseout="out('-9066745869396444524');" style="">3730                 labelA = (a instanceof AppWidgetProviderInfo)                                            </span>
<span class="6558251807363396504" onmouseenter="enter('6558251807363396504');" onmouseout="out('6558251807363396504');" style="">3731                         ? mManager.loadLabel((AppWidgetProviderInfo) a)                                  </span>
<span class="-3214224842100508644" onmouseenter="enter('-3214224842100508644');" onmouseout="out('-3214224842100508644');" style="">3732                         : ((ResolveInfo) a).loadLabel(mPackageManager).toString().trim();                </span>
<span class="-6757493580793216382" onmouseenter="enter('-6757493580793216382');" onmouseout="out('-6757493580793216382');" style="">3733                 mLabelCache.put(a, labelA);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3734             }                                                                                            </span>
<span class="2173723640298609502" onmouseenter="enter('2173723640298609502');" onmouseout="out('2173723640298609502');" style="">3735             if (mLabelCache.containsKey(b)) {                                                            </span>
<span class="-253401768434607465" onmouseenter="enter('-253401768434607465');" onmouseout="out('-253401768434607465');" style="">3736                 labelB = mLabelCache.get(b);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3737             } else {                                                                                     </span>
<span class="-1855040857913004459" onmouseenter="enter('-1855040857913004459');" onmouseout="out('-1855040857913004459');" style="">3738                 labelB = (b instanceof AppWidgetProviderInfo)                                            </span>
<span class="-6152525661787763086" onmouseenter="enter('-6152525661787763086');" onmouseout="out('-6152525661787763086');" style="">3739                         ? mManager.loadLabel((AppWidgetProviderInfo) b)                                  </span>
<span class="-7836999270960417422" onmouseenter="enter('-7836999270960417422');" onmouseout="out('-7836999270960417422');" style="">3740                         : ((ResolveInfo) b).loadLabel(mPackageManager).toString().trim();                </span>
<span class="1041849722861633477" onmouseenter="enter('1041849722861633477');" onmouseout="out('1041849722861633477');" style="">3741                 mLabelCache.put(b, labelB);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3742             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3743             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3744         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3745     };                                                                                                   </span>
<span  style="">3746                                                                                                          </span>
<span class="9138636756014527253" onmouseenter="enter('9138636756014527253');" onmouseout="out('9138636756014527253');" style="">3747     static boolean isValidProvider(AppWidgetProviderInfo provider) {                                     </span>
<span class="2022925387876031232" onmouseenter="enter('2022925387876031232');" onmouseout="out('2022925387876031232');" style="">3748         return (provider != null) &amp;&amp; (provider.provider != null)                                         </span>
<span class="-279029610180406352" onmouseenter="enter('-279029610180406352');" onmouseout="out('-279029610180406352');" style="">3749                 &amp;&amp; (provider.provider.getPackageName() != null);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3750     }                                                                                                    </span>
<span  style="">3751                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">3752     public void dumpState() {                                                                            </span>
<span class="-8509686920730582178" onmouseenter="enter('-8509686920730582178');" onmouseout="out('-8509686920730582178');" style="">3753         Log.d(TAG, &quot;mCallbacks=&quot; + mCallbacks);                                                          </span>
<span class="-6032216957883964740" onmouseenter="enter('-6032216957883964740');" onmouseout="out('-6032216957883964740');" style="">3754         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.data&quot;, mBgAllAppsList.data);                  </span>
<span class="8779182816240818818" onmouseenter="enter('8779182816240818818');" onmouseout="out('8779182816240818818');" style="">3755         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.added&quot;, mBgAllAppsList.added);                </span>
<span class="5513048904999210121" onmouseenter="enter('5513048904999210121');" onmouseout="out('5513048904999210121');" style="">3756         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.removed&quot;, mBgAllAppsList.removed);            </span>
<span class="-6417320778911436113" onmouseenter="enter('-6417320778911436113');" onmouseout="out('-6417320778911436113');" style="">3757         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.modified&quot;, mBgAllAppsList.modified);          </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">3758         if (mLoaderTask != null) {                                                                       </span>
<span class="-1961259503181318170" onmouseenter="enter('-1961259503181318170');" onmouseout="out('-1961259503181318170');" style="">3759             mLoaderTask.dumpState();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3760         } else {                                                                                         </span>
<span class="-4934836822377624371" onmouseenter="enter('-4934836822377624371');" onmouseout="out('-4934836822377624371');" style="">3761             Log.d(TAG, &quot;mLoaderTask=null&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3762         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3763     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3764 }                                                                                                        </span>



























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  16 package com.android.launcher3;                                                                           </span>
<span  style="">  17                                                                                                          </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  18 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  19 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  20 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-489389385851058391" onmouseenter="enter('-489389385851058391');" onmouseout="out('-489389385851058391');" style="">  21 import android.content.BroadcastReceiver;                                                                </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  22 import android.content.ComponentName;                                                                    </span>
<span class="5843991090186771909" onmouseenter="enter('5843991090186771909');" onmouseout="out('5843991090186771909');" style="">  23 import android.content.ContentProviderClient;                                                            </span>
<span class="3739800667450215943" onmouseenter="enter('3739800667450215943');" onmouseout="out('3739800667450215943');" style="">  24 import android.content.ContentProviderOperation;                                                         </span>
<span class="6126857652515451632" onmouseenter="enter('6126857652515451632');" onmouseout="out('6126857652515451632');" style="">  25 import android.content.ContentResolver;                                                                  </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="">  26 import android.content.ContentValues;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  27 import android.content.Context;                                                                          </span>
<span class="-8524679231303418936" onmouseenter="enter('-8524679231303418936');" onmouseout="out('-8524679231303418936');" style="">  28 import android.content.Intent.ShortcutIconResource;                                                      </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  29 import android.content.Intent;                                                                           </span>
<span class="8697221465021235869" onmouseenter="enter('8697221465021235869');" onmouseout="out('8697221465021235869');" style="">  30 import android.content.IntentFilter;                                                                     </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  31 import android.content.SharedPreferences;                                                                </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  32 import android.content.pm.PackageManager;                                                                </span>
<span class="-7427681121873781918" onmouseenter="enter('-7427681121873781918');" onmouseout="out('-7427681121873781918');" style="">  33 import android.content.pm.ProviderInfo;                                                                  </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  34 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  35 import android.content.res.Configuration;                                                                </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  36 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  37 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  38 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  39 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  40 import android.net.Uri;                                                                                  </span>
<span class="-5861542142927414420" onmouseenter="enter('-5861542142927414420');" onmouseout="out('-5861542142927414420');" style="">  41 import android.os.Environment;                                                                           </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  42 import android.os.Handler;                                                                               </span>
<span class="5075624728668821268" onmouseenter="enter('5075624728668821268');" onmouseout="out('5075624728668821268');" style="">  43 import android.os.HandlerThread;                                                                         </span>
<span class="-3467845820974384276" onmouseenter="enter('-3467845820974384276');" onmouseout="out('-3467845820974384276');" style="">  44 import android.os.Parcelable;                                                                            </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  45 import android.os.Process;                                                                               </span>
<span class="2671599330745315048" onmouseenter="enter('2671599330745315048');" onmouseout="out('2671599330745315048');" style="">  46 import android.os.RemoteException;                                                                       </span>
<span class="2720528326800018495" onmouseenter="enter('2720528326800018495');" onmouseout="out('2720528326800018495');" style="">  47 import android.os.SystemClock;                                                                           </span>
<span class="9209739606564279934" onmouseenter="enter('9209739606564279934');" onmouseout="out('9209739606564279934');" style="">  48 import android.provider.BaseColumns;                                                                     </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  49 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  50 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  51 import android.util.Pair;                                                                                </span>
<span class="-2301578055393860706" onmouseenter="enter('-2301578055393860706');" onmouseout="out('-2301578055393860706');" style="">  52 import com.android.launcher3.compat.AppWidgetManagerCompat;                                              </span>
<span class="-394760018964595537" onmouseenter="enter('-394760018964595537');" onmouseout="out('-394760018964595537');" style="">  53 import com.android.launcher3.compat.LauncherActivityInfoCompat;                                          </span>
<span class="7348855441893227306" onmouseenter="enter('7348855441893227306');" onmouseout="out('7348855441893227306');" style="">  54 import com.android.launcher3.compat.LauncherAppsCompat;                                                  </span>
<span class="-9185808437279523438" onmouseenter="enter('-9185808437279523438');" onmouseout="out('-9185808437279523438');" style="">  55 import com.android.launcher3.compat.PackageInstallerCompat.PackageInstallInfo;                           </span>
<span class="-6378403157506113444" onmouseenter="enter('-6378403157506113444');" onmouseout="out('-6378403157506113444');" style="">  56 import com.android.launcher3.compat.PackageInstallerCompat;                                              </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="">  57 import com.android.launcher3.compat.UserHandleCompat;                                                    </span>
<span class="-8849211230761127863" onmouseenter="enter('-8849211230761127863');" onmouseout="out('-8849211230761127863');" style="">  58 import com.android.launcher3.compat.UserManagerCompat;                                                   </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  59 import java.lang.ref.WeakReference;                                                                      </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  60 import java.net.URISyntaxException;                                                                      </span>
<span class="4163694070296964880" onmouseenter="enter('4163694070296964880');" onmouseout="out('4163694070296964880');" style="">  61 import java.security.InvalidParameterException;                                                          </span>
<span class="-2082349054173013619" onmouseenter="enter('-2082349054173013619');" onmouseout="out('-2082349054173013619');" style="">  62 import java.text.Collator;                                                                               </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  63 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  64 import java.util.Arrays;                                                                                 </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  65 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  66 import java.util.Collections;                                                                            </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  67 import java.util.Comparator;                                                                             </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  68 import java.util.HashMap;                                                                                </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  69 import java.util.HashSet;                                                                                </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  70 import java.util.Iterator;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  71 import java.util.List;                                                                                   </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  72 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  73 import java.util.Set;                                                                                    </span>
<span class="7536840878424124946" onmouseenter="enter('7536840878424124946');" onmouseout="out('7536840878424124946');" style="">  74 import java.util.TreeMap;                                                                                </span>
<span class="-2705241621224930031" onmouseenter="enter('-2705241621224930031');" onmouseout="out('-2705241621224930031');" style="">  75 import java.util.concurrent.atomic.AtomicBoolean;                                                        </span>
<span  style="">  76                                                                                                          </span>
<span  style="">  77                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  78 /**                                                                                                      </span>
<span class="-4436404655378914540" onmouseenter="enter('-4436404655378914540');" onmouseout="out('-4436404655378914540');" style="">  79  * Maintains in-memory state of the Launcher. It is expected that there should be only one               </span>
<span class="-4273357065044936134" onmouseenter="enter('-4273357065044936134');" onmouseout="out('-4273357065044936134');" style="">  80  * LauncherModel object held in a static. Also provide APIs for updating the database state              </span>
<span class="-4398933382026523538" onmouseenter="enter('-4398933382026523538');" onmouseout="out('-4398933382026523538');" style="">  81  * for the Launcher.                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  82  */                                                                                                      </span>
<span class="-5246366312920497703" onmouseenter="enter('-5246366312920497703');" onmouseout="out('-5246366312920497703');" style=""><abbr title="  83 public class LauncherModel extends BroadcastReceiver implements LauncherAppsCompat.OnAppsChangedCallbackCompat {">  83 public class LauncherModel extends BroadcastReceiver implements LauncherAppsCompat.OnAppsChangedCallbackC</abbr></span>
<span class="4817350607901898392" onmouseenter="enter('4817350607901898392');" onmouseout="out('4817350607901898392');" style="">  84     static final boolean DEBUG_LOADERS = false;                                                          </span>
<span  style="">  85                                                                                                          </span>
<span class="-5037112122408598239" onmouseenter="enter('-5037112122408598239');" onmouseout="out('-5037112122408598239');" style="">  86     private static final boolean DEBUG_RECEIVER = false;                                                 </span>
<span  style="">  87                                                                                                          </span>
<span class="-4012347986936200510" onmouseenter="enter('-4012347986936200510');" onmouseout="out('-4012347986936200510');" style="">  88     private static final boolean REMOVE_UNRESTORED_ICONS = true;                                         </span>
<span  style="">  89                                                                                                          </span>
<span class="7166020908404799948" onmouseenter="enter('7166020908404799948');" onmouseout="out('7166020908404799948');" style="">  90     static final String TAG = &quot;Launcher.Model&quot;;                                                          </span>
<span  style="">  91                                                                                                          </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  92     // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                 </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  93     // false = strew non-workspace apps across the workspace on upgrade                                  </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  94     // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                 </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  95     // false = strew non-workspace apps across the workspace on upgrade                                  </span>
<span class="-258177193926802879" onmouseenter="enter('-258177193926802879');" onmouseout="out('-258177193926802879');" style="">  96     public static final boolean UPGRADE_USE_MORE_APPS_FOLDER = false;                                    </span>
<span  style="">  97                                                                                                          </span>
<span class="2412961508740342038" onmouseenter="enter('2412961508740342038');" onmouseout="out('2412961508740342038');" style="">  98     public static final int LOADER_FLAG_NONE = 0;                                                        </span>
<span  style="">  99                                                                                                          </span>
<span class="-3582007365816200905" onmouseenter="enter('-3582007365816200905');" onmouseout="out('-3582007365816200905');" style=""> 100     public static final int LOADER_FLAG_CLEAR_WORKSPACE = 1 &lt;&lt; 0;                                        </span>
<span  style=""> 101                                                                                                          </span>
<span class="2276565639346953559" onmouseenter="enter('2276565639346953559');" onmouseout="out('2276565639346953559');" style=""> 102     public static final int LOADER_FLAG_MIGRATE_SHORTCUTS = 1 &lt;&lt; 1;                                      </span>
<span  style=""> 103                                                                                                          </span>
<span class="6995464355391954242" onmouseenter="enter('6995464355391954242');" onmouseout="out('6995464355391954242');" style=""> 104     // batch size for the workspace icons                                                                </span>
<span class="-4154694662050657236" onmouseenter="enter('-4154694662050657236');" onmouseout="out('-4154694662050657236');" style=""> 105     private static final int ITEMS_CHUNK = 6; // batch size for the workspace icons                      </span>
<span  style=""> 106                                                                                                          </span>
<span class="-5674768092661618077" onmouseenter="enter('-5674768092661618077');" onmouseout="out('-5674768092661618077');" style=""> 107     private static final long INVALID_SCREEN_ID = -1L;                                                   </span>
<span  style=""> 108                                                                                                          </span>
<span class="-2106715535373822300" onmouseenter="enter('-2106715535373822300');" onmouseout="out('-2106715535373822300');" style=""> 109     private final boolean mAppsCanBeOnRemoveableStorage;                                                 </span>
<span  style=""> 110                                                                                                          </span>
<span class="4731979794377415890" onmouseenter="enter('4731979794377415890');" onmouseout="out('4731979794377415890');" style=""> 111     private final boolean mOldContentProviderExists;                                                     </span>
<span  style=""> 112                                                                                                          </span>
<span class="3718007027314914184" onmouseenter="enter('3718007027314914184');" onmouseout="out('3718007027314914184');" style=""> 113     private final LauncherAppState mApp;                                                                 </span>
<span  style=""> 114                                                                                                          </span>
<span class="-7373075918619999414" onmouseenter="enter('-7373075918619999414');" onmouseout="out('-7373075918619999414');" style=""> 115     private final Object mLock = new Object();                                                           </span>
<span  style=""> 116                                                                                                          </span>
<span class="6556510276342102272" onmouseenter="enter('6556510276342102272');" onmouseout="out('6556510276342102272');" style=""> 117     private DeferredHandler mHandler = new DeferredHandler();                                            </span>
<span  style=""> 118                                                                                                          </span>
<span class="-7862379002163915329" onmouseenter="enter('-7862379002163915329');" onmouseout="out('-7862379002163915329');" style=""> 119     private LoaderTask mLoaderTask;                                                                      </span>
<span  style=""> 120                                                                                                          </span>
<span class="-3485037850110155122" onmouseenter="enter('-3485037850110155122');" onmouseout="out('-3485037850110155122');" style=""> 121     private boolean mIsLoaderTaskRunning;                                                                </span>
<span  style=""> 122                                                                                                          </span>
<span class="7419034271767928159" onmouseenter="enter('7419034271767928159');" onmouseout="out('7419034271767928159');" style=""> 123     private volatile boolean mFlushingWorkerThread;                                                      </span>
<span  style=""> 124                                                                                                          </span>
<span class="7008336552769109798" onmouseenter="enter('7008336552769109798');" onmouseout="out('7008336552769109798');" style=""> 125     // Specific runnable types that are run on the main thread deferred handler, this allows us to       </span>
<span class="-2862621427901202146" onmouseenter="enter('-2862621427901202146');" onmouseout="out('-2862621427901202146');" style=""> 126     // clear all queued binding runnables when the Launcher activity is destroyed.                       </span>
<span class="2773124109533293313" onmouseenter="enter('2773124109533293313');" onmouseout="out('2773124109533293313');" style=""> 127     private static final int MAIN_THREAD_NORMAL_RUNNABLE = 0;                                            </span>
<span  style=""> 128                                                                                                          </span>
<span class="3742092121997602406" onmouseenter="enter('3742092121997602406');" onmouseout="out('3742092121997602406');" style=""> 129     private static final int MAIN_THREAD_BINDING_RUNNABLE = 1;                                           </span>
<span  style=""> 130                                                                                                          </span>
<span class="5026118005036723308" onmouseenter="enter('5026118005036723308');" onmouseout="out('5026118005036723308');" style=""> 131     private static final String MIGRATE_AUTHORITY = &quot;com.android.launcher2.settings&quot;;                    </span>
<span  style=""> 132                                                                                                          </span>
<span class="1887278082230738056" onmouseenter="enter('1887278082230738056');" onmouseout="out('1887278082230738056');" style=""> 133     private static final HandlerThread sWorkerThread = new HandlerThread(&quot;launcher-loader&quot;);             </span>
<span  style=""> 134                                                                                                          </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style=""> 135     static {                                                                                             </span>
<span class="3211376391739143126" onmouseenter="enter('3211376391739143126');" onmouseout="out('3211376391739143126');" style=""> 136         sWorkerThread.start();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137     }                                                                                                    </span>
<span  style=""> 138                                                                                                          </span>
<span class="2264102646027284513" onmouseenter="enter('2264102646027284513');" onmouseout="out('2264102646027284513');" style=""> 139     private static final Handler sWorker = new Handler(sWorkerThread.getLooper());                       </span>
<span  style=""> 140                                                                                                          </span>
<span class="3535035959074757881" onmouseenter="enter('3535035959074757881');" onmouseout="out('3535035959074757881');" style=""> 141     // We start off with everything not loaded.  After that, we assume that                              </span>
<span class="2643799052940090988" onmouseenter="enter('2643799052940090988');" onmouseout="out('2643799052940090988');" style=""> 142     // our monitoring of the package manager provides all updates and we never                           </span>
<span class="-1838192547825761021" onmouseenter="enter('-1838192547825761021');" onmouseout="out('-1838192547825761021');" style=""> 143     // need to do a requery.  These are only ever touched from the loader thread.                        </span>
<span class="-8758726942217087840" onmouseenter="enter('-8758726942217087840');" onmouseout="out('-8758726942217087840');" style=""> 144     private boolean mWorkspaceLoaded;                                                                    </span>
<span  style=""> 145                                                                                                          </span>
<span class="-1682003936594375249" onmouseenter="enter('-1682003936594375249');" onmouseout="out('-1682003936594375249');" style=""> 146     private boolean mAllAppsLoaded;                                                                      </span>
<span  style=""> 147                                                                                                          </span>
<span class="4437381645098142172" onmouseenter="enter('4437381645098142172');" onmouseout="out('4437381645098142172');" style=""> 148     // When we are loading pages synchronously, we can&#x27;t just post the binding of items on the side      </span>
<span class="3512738277131757196" onmouseenter="enter('3512738277131757196');" onmouseout="out('3512738277131757196');" style=""> 149     // pages as this delays the rotation process.  Instead, we wait for a callback from the first        </span>
<span class="1019766179129744653" onmouseenter="enter('1019766179129744653');" onmouseout="out('1019766179129744653');" style=""> 150     // draw (in Workspace) to initiate the binding of the remaining side pages.  Any time we start       </span>
<span class="7373070490167110663" onmouseenter="enter('7373070490167110663');" onmouseout="out('7373070490167110663');" style=""> 151     // a normal load, we also clear this set of Runnables.                                               </span>
<span class="4843369785562403466" onmouseenter="enter('4843369785562403466');" onmouseout="out('4843369785562403466');" style=""> 152     static final ArrayList&lt;Runnable&gt; mDeferredBindRunnables = new ArrayList&lt;Runnable&gt;();                 </span>
<span  style=""> 153                                                                                                          </span>
<span class="5593309185710650450" onmouseenter="enter('5593309185710650450');" onmouseout="out('5593309185710650450');" style=""> 154     private WeakReference&lt;Callbacks&gt; mCallbacks;                                                         </span>
<span  style=""> 155                                                                                                          </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 156     // &lt; only access in worker thread &gt;                                                                  </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 157     // &lt; only access in worker thread &gt;                                                                  </span>
<span class="-7893410053402242276" onmouseenter="enter('-7893410053402242276');" onmouseout="out('-7893410053402242276');" style=""> 158     AllAppsList mBgAllAppsList;                                                                          </span>
<span  style=""> 159                                                                                                          </span>
<span class="-4696524037009093502" onmouseenter="enter('-4696524037009093502');" onmouseout="out('-4696524037009093502');" style=""> 160     // The lock that must be acquired before referencing any static bg data structures.  Unlike          </span>
<span class="-2471307598696798987" onmouseenter="enter('-2471307598696798987');" onmouseout="out('-2471307598696798987');" style=""> 161     // other locks, this one can generally be held long-term because we never expect any of these        </span>
<span class="4310884307601416106" onmouseenter="enter('4310884307601416106');" onmouseout="out('4310884307601416106');" style=""> 162     // static data structures to be referenced outside of the worker thread except on the first          </span>
<span class="2260118264672300125" onmouseenter="enter('2260118264672300125');" onmouseout="out('2260118264672300125');" style=""> 163     // load after configuration change.                                                                  </span>
<span class="-8652324765300755578" onmouseenter="enter('-8652324765300755578');" onmouseout="out('-8652324765300755578');" style=""> 164     static final Object sBgLock = new Object();                                                          </span>
<span  style=""> 165                                                                                                          </span>
<span class="861828438456678075" onmouseenter="enter('861828438456678075');" onmouseout="out('861828438456678075');" style=""> 166     // sBgItemsIdMap maps *all* the ItemInfos (shortcuts, folders, and widgets) created by               </span>
<span class="3964854605559074701" onmouseenter="enter('3964854605559074701');" onmouseout="out('3964854605559074701');" style=""> 167     // LauncherModel to their ids                                                                        </span>
<span class="8713038185903703074" onmouseenter="enter('8713038185903703074');" onmouseout="out('8713038185903703074');" style=""> 168     static final HashMap&lt;Long, ItemInfo&gt; sBgItemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                  </span>
<span  style=""> 169                                                                                                          </span>
<span class="-4875305940507672487" onmouseenter="enter('-4875305940507672487');" onmouseout="out('-4875305940507672487');" style=""> 170     // sBgWorkspaceItems is passed to bindItems, which expects a list of all folders and shortcuts       </span>
<span class="5836863726682543660" onmouseenter="enter('5836863726682543660');" onmouseout="out('5836863726682543660');" style=""> 171     //       created by LauncherModel that are directly on the home screen (however, no widgets or       </span>
<span class="4941255916545901139" onmouseenter="enter('4941255916545901139');" onmouseout="out('4941255916545901139');" style=""> 172     //       shortcuts within folders).                                                                  </span>
<span class="4770535944422974992" onmouseenter="enter('4770535944422974992');" onmouseout="out('4770535944422974992');" style=""> 173     static final ArrayList&lt;ItemInfo&gt; sBgWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                      </span>
<span  style=""> 174                                                                                                          </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 175     // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()    </span>
<span class="4461543750539964634" onmouseenter="enter('4461543750539964634');" onmouseout="out('4461543750539964634');" style=""> 176     static final ArrayList&lt;LauncherAppWidgetInfo&gt; sBgAppWidgets = new ArrayList&lt;LauncherAppWidgetInfo&gt;();</span>
<span  style=""> 177                                                                                                          </span>
<span class="8356003681152445460" onmouseenter="enter('8356003681152445460');" onmouseout="out('8356003681152445460');" style=""> 178     // sBgFolders is all FolderInfos created by LauncherModel. Passed to bindFolders()                   </span>
<span class="8065187755370300271" onmouseenter="enter('8065187755370300271');" onmouseout="out('8065187755370300271');" style=""> 179     static final HashMap&lt;Long, FolderInfo&gt; sBgFolders = new HashMap&lt;Long, FolderInfo&gt;();                 </span>
<span  style=""> 180                                                                                                          </span>
<span class="-6906235458204319724" onmouseenter="enter('-6906235458204319724');" onmouseout="out('-6906235458204319724');" style=""> 181     // sBgDbIconCache is the set of ItemInfos that need to have their icons updated in the database      </span>
<span class="-2979801471293813396" onmouseenter="enter('-2979801471293813396');" onmouseout="out('-2979801471293813396');" style=""> 182     static final HashMap&lt;Object, byte[]&gt; sBgDbIconCache = new HashMap&lt;Object, byte[]&gt;();                 </span>
<span  style=""> 183                                                                                                          </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 184     // sBgWorkspaceScreens is the ordered set of workspace screens.                                      </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 185     // sBgWorkspaceScreens is the ordered set of workspace screens.                                      </span>
<span class="-1373680151983800221" onmouseenter="enter('-1373680151983800221');" onmouseout="out('-1373680151983800221');" style=""> 186     static final ArrayList&lt;Long&gt; sBgWorkspaceScreens = new ArrayList&lt;Long&gt;();                            </span>
<span  style=""> 187                                                                                                          </span>
<span class="8587182513202290942" onmouseenter="enter('8587182513202290942');" onmouseout="out('8587182513202290942');" style=""> 188     // sPendingPackages is a set of packages which could be on sdcard and are not available yet          </span>
<span class="2728800337702245303" onmouseenter="enter('2728800337702245303');" onmouseout="out('2728800337702245303');" style=""><abbr title=" 189     static final HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; sPendingPackages = new HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt;();"> 189     static final HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; sPendingPackages = new HashMap&lt;UserHandleComp</abbr></span>
<span  style=""> 190                                                                                                          </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 191     // &lt;/ only access in worker thread &gt;                                                                 </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 192     // &lt;/ only access in worker thread &gt;                                                                 </span>
<span  style=""> 193                                                                                                          </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style=""> 194     private IconCache mIconCache;                                                                        </span>
<span  style=""> 195                                                                                                          </span>
<span class="-1428370913368008087" onmouseenter="enter('-1428370913368008087');" onmouseout="out('-1428370913368008087');" style=""> 196     protected int mPreviousConfigMcc;                                                                    </span>
<span  style=""> 197                                                                                                          </span>
<span class="-1392466613073934971" onmouseenter="enter('-1392466613073934971');" onmouseout="out('-1392466613073934971');" style=""> 198     private final LauncherAppsCompat mLauncherApps;                                                      </span>
<span  style=""> 199                                                                                                          </span>
<span class="-6177668713869523688" onmouseenter="enter('-6177668713869523688');" onmouseout="out('-6177668713869523688');" style=""> 200     private final UserManagerCompat mUserManager;                                                        </span>
<span  style=""> 201                                                                                                          </span>
<span class="-3338718885622541528" onmouseenter="enter('-3338718885622541528');" onmouseout="out('-3338718885622541528');" style=""> 202     public interface Callbacks {                                                                         </span>
<span class="-4231961333511672310" onmouseenter="enter('-4231961333511672310');" onmouseout="out('-4231961333511672310');" style=""> 203         public boolean setLoadOnResume();                                                                </span>
<span  style=""> 204                                                                                                          </span>
<span class="803814078537529918" onmouseenter="enter('803814078537529918');" onmouseout="out('803814078537529918');" style=""> 205         public int getCurrentWorkspaceScreen();                                                          </span>
<span  style=""> 206                                                                                                          </span>
<span class="9018975241375557324" onmouseenter="enter('9018975241375557324');" onmouseout="out('9018975241375557324');" style=""> 207         public void startBinding();                                                                      </span>
<span  style=""> 208                                                                                                          </span>
<span class="5769462036588798432" onmouseenter="enter('5769462036588798432');" onmouseout="out('5769462036588798432');" style=""><abbr title=" 209         public abstract void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end, boolean forceAnimateIcons);"> 209         public abstract void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end, boolean forceAn</abbr></span>
<span  style=""> 210                                                                                                          </span>
<span class="5464078408309929972" onmouseenter="enter('5464078408309929972');" onmouseout="out('5464078408309929972');" style=""> 211         public void bindScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                       </span>
<span  style=""> 212                                                                                                          </span>
<span class="8828153861812868297" onmouseenter="enter('8828153861812868297');" onmouseout="out('8828153861812868297');" style=""> 213         public void bindAddScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                    </span>
<span  style=""> 214                                                                                                          </span>
<span class="-7787879534890891966" onmouseenter="enter('-7787879534890891966');" onmouseout="out('-7787879534890891966');" style=""> 215         public abstract void bindFolders(HashMap&lt;Long, FolderInfo&gt; folders);                             </span>
<span  style=""> 216                                                                                                          </span>
<span class="-3241982460320043016" onmouseenter="enter('-3241982460320043016');" onmouseout="out('-3241982460320043016');" style=""> 217         public void finishBindingItems(boolean upgradePath);                                             </span>
<span  style=""> 218                                                                                                          </span>
<span class="-4066088446296132158" onmouseenter="enter('-4066088446296132158');" onmouseout="out('-4066088446296132158');" style=""> 219         public abstract void bindAppWidget(LauncherAppWidgetInfo info);                                  </span>
<span  style=""> 220                                                                                                          </span>
<span class="-644636094983226183" onmouseenter="enter('-644636094983226183');" onmouseout="out('-644636094983226183');" style=""> 221         public abstract void bindAllApplications(ArrayList&lt;AppInfo&gt; apps);                               </span>
<span  style=""> 222                                                                                                          </span>
<span class="-6644914292556538669" onmouseenter="enter('-6644914292556538669');" onmouseout="out('-6644914292556538669');" style=""><abbr title=" 223         public abstract void bindAppsAdded(ArrayList&lt;Long&gt; newScreens, ArrayList&lt;ItemInfo&gt; addNotAnimated, ArrayList&lt;ItemInfo&gt; addAnimated, ArrayList&lt;AppInfo&gt; addedApps);"> 223         public abstract void bindAppsAdded(ArrayList&lt;Long&gt; newScreens, ArrayList&lt;ItemInfo&gt; addNotAnimated</abbr></span>
<span  style=""> 224                                                                                                          </span>
<span class="-5633473103749570937" onmouseenter="enter('-5633473103749570937');" onmouseout="out('-5633473103749570937');" style=""> 225         public abstract void bindAppsUpdated(ArrayList&lt;AppInfo&gt; apps);                                   </span>
<span  style=""> 226                                                                                                          </span>
<span class="-6991207189725786229" onmouseenter="enter('-6991207189725786229');" onmouseout="out('-6991207189725786229');" style=""> 227         public void bindAppsRestored(ArrayList&lt;AppInfo&gt; apps);                                           </span>
<span  style=""> 228                                                                                                          </span>
<span class="1552205679904733456" onmouseenter="enter('1552205679904733456');" onmouseout="out('1552205679904733456');" style=""> 229         public void updatePackageState(ArrayList&lt;PackageInstallInfo&gt; installInfo);                       </span>
<span  style=""> 230                                                                                                          </span>
<span class="3764474087617128758" onmouseenter="enter('3764474087617128758');" onmouseout="out('3764474087617128758');" style=""> 231         public void updatePackageBadge(String packageName);                                              </span>
<span  style=""> 232                                                                                                          </span>
<span class="-615943521541767266" onmouseenter="enter('-615943521541767266');" onmouseout="out('-615943521541767266');" style=""><abbr title=" 233         public abstract void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames, ArrayList&lt;AppInfo&gt; appInfos, UserHandleCompat user);"> 233         public abstract void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames, ArrayList&lt;AppInfo&gt; app</abbr></span>
<span  style=""> 234                                                                                                          </span>
<span class="-5054203298075540925" onmouseenter="enter('-5054203298075540925');" onmouseout="out('-5054203298075540925');" style=""> 235         public void bindPackagesUpdated(ArrayList&lt;Object&gt; widgetsAndShortcuts);                          </span>
<span  style=""> 236                                                                                                          </span>
<span class="7466294501708892199" onmouseenter="enter('7466294501708892199');" onmouseout="out('7466294501708892199');" style=""> 237         public void bindSearchablesChanged();                                                            </span>
<span  style=""> 238                                                                                                          </span>
<span class="-4863664490041232492" onmouseenter="enter('-4863664490041232492');" onmouseout="out('-4863664490041232492');" style=""> 239         public boolean isAllAppsButtonRank(int rank);                                                    </span>
<span  style=""> 240                                                                                                          </span>
<span class="-6469605959563265863" onmouseenter="enter('-6469605959563265863');" onmouseout="out('-6469605959563265863');" style=""> 241         public void onPageBoundSynchronously(int page);                                                  </span>
<span  style=""> 242                                                                                                          </span>
<span class="2927470839806734779" onmouseenter="enter('2927470839806734779');" onmouseout="out('2927470839806734779');" style=""> 243         public void dumpLogsToLocalData();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244     }                                                                                                    </span>
<span  style=""> 245                                                                                                          </span>
<span class="6660553528201779332" onmouseenter="enter('6660553528201779332');" onmouseout="out('6660553528201779332');" style=""> 246     public interface ItemInfoFilter {                                                                    </span>
<span class="3983161794363928901" onmouseenter="enter('3983161794363928901');" onmouseout="out('3983161794363928901');" style=""> 247         public abstract boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248     }                                                                                                    </span>
<span  style=""> 249                                                                                                          </span>
<span class="-7540253694606934273" onmouseenter="enter('-7540253694606934273');" onmouseout="out('-7540253694606934273');" style=""> 250     LauncherModel(LauncherAppState app, IconCache iconCache, AppFilter appFilter) {                      </span>
<span class="-3815285143453777974" onmouseenter="enter('-3815285143453777974');" onmouseout="out('-3815285143453777974');" style=""> 251         Context context = app.getContext();                                                              </span>
<span class="1644001329477881511" onmouseenter="enter('1644001329477881511');" onmouseout="out('1644001329477881511');" style=""> 252         mAppsCanBeOnRemoveableStorage = Environment.isExternalStorageRemovable();                        </span>
<span class="6456618698786728431" onmouseenter="enter('6456618698786728431');" onmouseout="out('6456618698786728431');" style=""> 253         String oldProvider = context.getString(R.string.old_launcher_provider_uri);                      </span>
<span class="-4473607088242738177" onmouseenter="enter('-4473607088242738177');" onmouseout="out('-4473607088242738177');" style=""> 254         // This may be the same as MIGRATE_AUTHORITY, or it may be replaced by a different               </span>
<span class="-5811264300229071057" onmouseenter="enter('-5811264300229071057');" onmouseout="out('-5811264300229071057');" style=""> 255         // resource string.                                                                              </span>
<span class="7826951633422431656" onmouseenter="enter('7826951633422431656');" onmouseout="out('7826951633422431656');" style=""> 256         String redirectAuthority = Uri.parse(oldProvider).getAuthority();                                </span>
<span class="8660972027578244362" onmouseenter="enter('8660972027578244362');" onmouseout="out('8660972027578244362');" style=""><abbr title=" 257         ProviderInfo providerInfo = context.getPackageManager().resolveContentProvider(MIGRATE_AUTHORITY, 0);"> 257         ProviderInfo providerInfo = context.getPackageManager().resolveContentProvider(MIGRATE_AUTHORITY,</abbr></span>
<span class="1193553408131176285" onmouseenter="enter('1193553408131176285');" onmouseout="out('1193553408131176285');" style=""><abbr title=" 258         ProviderInfo redirectProvider = context.getPackageManager().resolveContentProvider(redirectAuthority, 0);"> 258         ProviderInfo redirectProvider = context.getPackageManager().resolveContentProvider(redirectAuthor</abbr></span>
<span class="314259485526307626" onmouseenter="enter('314259485526307626');" onmouseout="out('314259485526307626');" style=""> 259         Log.d(TAG, &quot;Old launcher provider: &quot; + oldProvider);                                             </span>
<span class="-8592116164695986182" onmouseenter="enter('-8592116164695986182');" onmouseout="out('-8592116164695986182');" style=""> 260         mOldContentProviderExists = (providerInfo != null) &amp;&amp; (redirectProvider != null);                </span>
<span class="6861009572404401042" onmouseenter="enter('6861009572404401042');" onmouseout="out('6861009572404401042');" style=""> 261         if (mOldContentProviderExists) {                                                                 </span>
<span class="-1855952710226164095" onmouseenter="enter('-1855952710226164095');" onmouseout="out('-1855952710226164095');" style=""> 262             Log.d(TAG, &quot;Old launcher provider exists.&quot;);                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 263         } else {                                                                                         </span>
<span class="-884548298796331780" onmouseenter="enter('-884548298796331780');" onmouseout="out('-884548298796331780');" style=""> 264             Log.d(TAG, &quot;Old launcher provider does not exist.&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265         }                                                                                                </span>
<span class="8987557410347250467" onmouseenter="enter('8987557410347250467');" onmouseout="out('8987557410347250467');" style=""> 266         mApp = app;                                                                                      </span>
<span class="-1240051748269974178" onmouseenter="enter('-1240051748269974178');" onmouseout="out('-1240051748269974178');" style=""> 267         mBgAllAppsList = new AllAppsList(iconCache, appFilter);                                          </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style=""> 268         mIconCache = iconCache;                                                                          </span>
<span class="3654972388535142593" onmouseenter="enter('3654972388535142593');" onmouseout="out('3654972388535142593');" style=""> 269         final Resources res = context.getResources();                                                    </span>
<span class="-4708036118337437843" onmouseenter="enter('-4708036118337437843');" onmouseout="out('-4708036118337437843');" style=""> 270         Configuration config = res.getConfiguration();                                                   </span>
<span class="-32775646941108504" onmouseenter="enter('-32775646941108504');" onmouseout="out('-32775646941108504');" style=""> 271         mPreviousConfigMcc = config.mcc;                                                                 </span>
<span class="-1186313261969242146" onmouseenter="enter('-1186313261969242146');" onmouseout="out('-1186313261969242146');" style=""> 272         mLauncherApps = LauncherAppsCompat.getInstance(context);                                         </span>
<span class="5028106411018262806" onmouseenter="enter('5028106411018262806');" onmouseout="out('5028106411018262806');" style=""> 273         mUserManager = UserManagerCompat.getInstance(context);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274     }                                                                                                    </span>
<span  style=""> 275                                                                                                          </span>
<span class="7032781054018231449" onmouseenter="enter('7032781054018231449');" onmouseout="out('7032781054018231449');" style=""> 276     /** Runs the specified runnable immediately if called from the main thread, otherwise it is          </span>
<span class="7688515897456092220" onmouseenter="enter('7688515897456092220');" onmouseout="out('7688515897456092220');" style=""> 277      * posted on the main thread handler. */                                                             </span>
<span class="-3461925467760565643" onmouseenter="enter('-3461925467760565643');" onmouseout="out('-3461925467760565643');" style=""> 278     private void runOnMainThread(Runnable r) {                                                           </span>
<span class="-8277339055128647976" onmouseenter="enter('-8277339055128647976');" onmouseout="out('-8277339055128647976');" style=""> 279         runOnMainThread(r, 0);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280     }                                                                                                    </span>
<span  style=""> 281                                                                                                          </span>
<span class="2979979552252814736" onmouseenter="enter('2979979552252814736');" onmouseout="out('2979979552252814736');" style=""> 282     private void runOnMainThread(Runnable r, int type) {                                                 </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 283         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="-8713172384634047131" onmouseenter="enter('-8713172384634047131');" onmouseout="out('-8713172384634047131');" style=""> 284             // If we are on the worker thread, post onto the main handler                                </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 285             mHandler.post(r);                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 286         } else {                                                                                         </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 287             r.run();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289     }                                                                                                    </span>
<span  style=""> 290                                                                                                          </span>
<span class="3207003836565128" onmouseenter="enter('3207003836565128');" onmouseout="out('3207003836565128');" style=""> 291     /** Runs the specified runnable immediately if called from the worker thread, otherwise it is        </span>
<span class="-2756655390038865740" onmouseenter="enter('-2756655390038865740');" onmouseout="out('-2756655390038865740');" style=""> 292      * posted on the worker thread handler. */                                                           </span>
<span class="-6815764929820931194" onmouseenter="enter('-6815764929820931194');" onmouseout="out('-6815764929820931194');" style=""> 293     private static void runOnWorkerThread(Runnable r) {                                                  </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 294         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 295             r.run();                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 296         } else {                                                                                         </span>
<span class="4127612692606453253" onmouseenter="enter('4127612692606453253');" onmouseout="out('4127612692606453253');" style=""> 297             // If we are not on the worker thread, then post to the worker handler                       </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style=""> 298             sWorker.post(r);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300     }                                                                                                    </span>
<span  style=""> 301                                                                                                          </span>
<span class="-7044369129545244866" onmouseenter="enter('-7044369129545244866');" onmouseout="out('-7044369129545244866');" style=""> 302     boolean canMigrateFromOldLauncherDb(Launcher launcher) {                                             </span>
<span class="1377474616331947329" onmouseenter="enter('1377474616331947329');" onmouseout="out('1377474616331947329');" style=""> 303         return mOldContentProviderExists &amp;&amp; (!launcher.isLauncherPreinstalled());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304     }                                                                                                    </span>
<span  style=""> 305                                                                                                          </span>
<span class="3078656228962170157" onmouseenter="enter('3078656228962170157');" onmouseout="out('3078656228962170157');" style=""> 306     static boolean findNextAvailableIconSpaceInScreen(ArrayList&lt;ItemInfo&gt; items, int[] xy, long screen) {</span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 307         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 308         DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                    </span>
<span class="6676481294069932535" onmouseenter="enter('6676481294069932535');" onmouseout="out('6676481294069932535');" style=""> 309         final int xCount = ((int) (grid.numColumns));                                                    </span>
<span class="9152107411148713841" onmouseenter="enter('9152107411148713841');" onmouseout="out('9152107411148713841');" style=""> 310         final int yCount = ((int) (grid.numRows));                                                       </span>
<span class="9207855715228317472" onmouseenter="enter('9207855715228317472');" onmouseout="out('9207855715228317472');" style=""> 311         boolean[][] occupied = new boolean[xCount][yCount];                                              </span>
<span class="3723092247323611416" onmouseenter="enter('3723092247323611416');" onmouseout="out('3723092247323611416');" style=""> 312         int cellX;                                                                                       </span>
<span class="-3664060732320228171" onmouseenter="enter('-3664060732320228171');" onmouseout="out('-3664060732320228171');" style=""> 313         int cellY;                                                                                       </span>
<span class="-663830733677842115" onmouseenter="enter('-663830733677842115');" onmouseout="out('-663830733677842115');" style=""> 314         int spanX;                                                                                       </span>
<span class="-2768222588949154828" onmouseenter="enter('-2768222588949154828');" onmouseout="out('-2768222588949154828');" style=""> 315         int spanY;                                                                                       </span>
<span class="5020765328610170980" onmouseenter="enter('5020765328610170980');" onmouseout="out('5020765328610170980');" style=""> 316         for (int i = 0; i &lt; items.size(); ++i) {                                                         </span>
<span class="3181415890192694055" onmouseenter="enter('3181415890192694055');" onmouseout="out('3181415890192694055');" style=""> 317             final ItemInfo item = items.get(i);                                                          </span>
<span class="-4074076028767186492" onmouseenter="enter('-4074076028767186492');" onmouseout="out('-4074076028767186492');" style=""> 318             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                        </span>
<span class="4879929299303230054" onmouseenter="enter('4879929299303230054');" onmouseout="out('4879929299303230054');" style=""> 319                 if (item.screenId == screen) {                                                           </span>
<span class="-5253640052908660766" onmouseenter="enter('-5253640052908660766');" onmouseout="out('-5253640052908660766');" style=""> 320                     cellX = item.cellX;                                                                  </span>
<span class="8289808867760126989" onmouseenter="enter('8289808867760126989');" onmouseout="out('8289808867760126989');" style=""> 321                     cellY = item.cellY;                                                                  </span>
<span class="-1153670204852401248" onmouseenter="enter('-1153670204852401248');" onmouseout="out('-1153670204852401248');" style=""> 322                     spanX = item.spanX;                                                                  </span>
<span class="-1841066671071348880" onmouseenter="enter('-1841066671071348880');" onmouseout="out('-1841066671071348880');" style=""> 323                     spanY = item.spanY;                                                                  </span>
<span class="2556401663850988804" onmouseenter="enter('2556401663850988804');" onmouseout="out('2556401663850988804');" style=""> 324                     for (int x = cellX; ((0 &lt;= x) &amp;&amp; (x &lt; (cellX + spanX))) &amp;&amp; (x &lt; xCount); x++) {      </span>
<span class="-4844556115643501361" onmouseenter="enter('-4844556115643501361');" onmouseout="out('-4844556115643501361');" style=""> 325                         for (int y = cellY; ((0 &lt;= y) &amp;&amp; (y &lt; (cellY + spanY))) &amp;&amp; (y &lt; yCount); y++) {  </span>
<span class="-8702463444488690423" onmouseenter="enter('-8702463444488690423');" onmouseout="out('-8702463444488690423');" style=""> 326                             occupied[x][y] = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 327                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 330             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331         }                                                                                                </span>
<span class="-8431133162249858978" onmouseenter="enter('-8431133162249858978');" onmouseout="out('-8431133162249858978');" style=""> 332         return CellLayout.findVacantCell(xy, 1, 1, xCount, yCount, occupied);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333     }                                                                                                    </span>
<span  style=""> 334                                                                                                          </span>
<span class="-3028160567326440165" onmouseenter="enter('-3028160567326440165');" onmouseout="out('-3028160567326440165');" style=""><abbr title=" 335     static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name, Intent launchIntent, int firstScreenIndex, ArrayList&lt;Long&gt; workspaceScreens) {"> 335     static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name, Intent launchIntent</abbr></span>
<span class="721182088367487597" onmouseenter="enter('721182088367487597');" onmouseout="out('721182088367487597');" style=""> 336         // Lock on the app so that we don&#x27;t try and get the items while apps are being added             </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 337         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-2530158852228207709" onmouseenter="enter('-2530158852228207709');" onmouseout="out('-2530158852228207709');" style=""> 338         LauncherModel model = app.getModel();                                                            </span>
<span class="-7742650363035610838" onmouseenter="enter('-7742650363035610838');" onmouseout="out('-7742650363035610838');" style=""> 339         boolean found = false;                                                                           </span>
<span class="4291341501295041683" onmouseenter="enter('4291341501295041683');" onmouseout="out('4291341501295041683');" style=""> 340         synchronized(app) {                                                                              </span>
<span class="7297018345010768725" onmouseenter="enter('7297018345010768725');" onmouseout="out('7297018345010768725');" style=""> 341             if (sWorkerThread.getThreadId() != Process.myTid()) {                                        </span>
<span class="-8468687854737954991" onmouseenter="enter('-8468687854737954991');" onmouseout="out('-8468687854737954991');" style=""> 342                 // Flush the LauncherModel worker thread, so that if we just did another                 </span>
<span class="-8915737001643417667" onmouseenter="enter('-8915737001643417667');" onmouseout="out('-8915737001643417667');" style=""> 343                 // processInstallShortcut, we give it time for its shortcut to get added to the          </span>
<span class="2341850028976611589" onmouseenter="enter('2341850028976611589');" onmouseout="out('2341850028976611589');" style=""> 344                 // database (getItemsInLocalCoordinates reads the database)                              </span>
<span class="-3308163450517263024" onmouseenter="enter('-3308163450517263024');" onmouseout="out('-3308163450517263024');" style=""> 345                 model.flushWorkerThread();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346             }                                                                                            </span>
<span class="8797318797001481965" onmouseenter="enter('8797318797001481965');" onmouseout="out('8797318797001481965');" style=""> 347             final ArrayList&lt;ItemInfo&gt; items = LauncherModel.getItemsInLocalCoordinates(context);         </span>
<span class="2319873497820841755" onmouseenter="enter('2319873497820841755');" onmouseout="out('2319873497820841755');" style=""> 348             // Try adding to the workspace screens incrementally, starting at the default or center      </span>
<span class="1139467458780899300" onmouseenter="enter('1139467458780899300');" onmouseout="out('1139467458780899300');" style=""> 349             // screen and alternating between +1, -1, +2, -2, etc. (using ~ ceil(i/2f)*(-1)^(i-1))       </span>
<span class="8331999200789555153" onmouseenter="enter('8331999200789555153');" onmouseout="out('8331999200789555153');" style=""> 350             firstScreenIndex = Math.min(firstScreenIndex, workspaceScreens.size());                      </span>
<span class="-5057452471390749214" onmouseenter="enter('-5057452471390749214');" onmouseout="out('-5057452471390749214');" style=""> 351             int count = workspaceScreens.size();                                                         </span>
<span class="888066978954461138" onmouseenter="enter('888066978954461138');" onmouseout="out('888066978954461138');" style=""> 352             for (int screen = firstScreenIndex; (screen &lt; count) &amp;&amp; (!found); screen++) {                </span>
<span class="-2680594161355971081" onmouseenter="enter('-2680594161355971081');" onmouseout="out('-2680594161355971081');" style=""> 353                 int[] tmpCoordinates = new int[2];                                                       </span>
<span class="-6728698613126273066" onmouseenter="enter('-6728698613126273066');" onmouseout="out('-6728698613126273066');" style=""><abbr title=" 354                 if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates, workspaceScreens.get(screen))) {"> 354                 if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates, workspaceScreens.get(screen</abbr></span>
<span class="-4461607076234575183" onmouseenter="enter('-4461607076234575183');" onmouseout="out('-4461607076234575183');" style=""> 355                     // Update the Launcher db                                                            </span>
<span class="-6316225509374818886" onmouseenter="enter('-6316225509374818886');" onmouseout="out('-6316225509374818886');" style=""> 356                     return new Pair&lt;Long, int[]&gt;(workspaceScreens.get(screen), tmpCoordinates);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 360         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 361     }                                                                                                    </span>
<span  style=""> 362                                                                                                          </span>
<span class="-7586986915858549354" onmouseenter="enter('-7586986915858549354');" onmouseout="out('-7586986915858549354');" style=""> 363     public void setPackageState(final ArrayList&lt;PackageInstallInfo&gt; installInfo) {                       </span>
<span class="-7600698850277173095" onmouseenter="enter('-7600698850277173095');" onmouseout="out('-7600698850277173095');" style=""> 364         // Process the updated package state                                                             </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 365         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 366             public void run() {                                                                          </span>
<span class="-7845096170882753595" onmouseenter="enter('-7845096170882753595');" onmouseout="out('-7845096170882753595');" style=""> 367                 Callbacks callbacks = (mCallbacks != null) ? mCallbacks.get() : null;                    </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style=""> 368                 if (callbacks != null) {                                                                 </span>
<span class="-2122958624687225435" onmouseenter="enter('-2122958624687225435');" onmouseout="out('-2122958624687225435');" style=""> 369                     callbacks.updatePackageState(installInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 372         };                                                                                               </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 373         mHandler.post(r);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374     }                                                                                                    </span>
<span  style=""> 375                                                                                                          </span>
<span class="-4348975915921845586" onmouseenter="enter('-4348975915921845586');" onmouseout="out('-4348975915921845586');" style=""> 376     public void updatePackageBadge(final String packageName) {                                           </span>
<span class="7729714843616329773" onmouseenter="enter('7729714843616329773');" onmouseout="out('7729714843616329773');" style=""> 377         // Process the updated package badge                                                             </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 378         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 379             public void run() {                                                                          </span>
<span class="-7845096170882753595" onmouseenter="enter('-7845096170882753595');" onmouseout="out('-7845096170882753595');" style=""> 380                 Callbacks callbacks = (mCallbacks != null) ? mCallbacks.get() : null;                    </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style=""> 381                 if (callbacks != null) {                                                                 </span>
<span class="-175082648182985609" onmouseenter="enter('-175082648182985609');" onmouseout="out('-175082648182985609');" style=""> 382                     callbacks.updatePackageBadge(packageName);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 385         };                                                                                               </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 386         mHandler.post(r);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387     }                                                                                                    </span>
<span  style=""> 388                                                                                                          </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style=""> 389     public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {              </span>
<span class="-2944114548254090265" onmouseenter="enter('-2944114548254090265');" onmouseout="out('-2944114548254090265');" style=""> 390         final Callbacks callbacks = (mCallbacks != null) ? mCallbacks.get() : null;                      </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style=""> 391         if (allAppsApps == null) {                                                                       </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style=""> 392             throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393         }                                                                                                </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style=""> 394         if (allAppsApps.isEmpty()) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 395             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396         }                                                                                                </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style=""> 397         final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                           </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style=""> 398         Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                 </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 399         while (iter.hasNext()) {                                                                         </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 400             ItemInfo a = iter.next();                                                                    </span>
<span class="788818030959001981" onmouseenter="enter('788818030959001981');" onmouseout="out('788818030959001981');" style=""> 401             if (LauncherModel.appWasPromise(ctx, a.getIntent(), a.user)) {                               </span>
<span class="3043652812901566303" onmouseenter="enter('3043652812901566303');" onmouseout="out('3043652812901566303');" style=""> 402                 restoredAppsFinal.add(((AppInfo) (a)));                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404         }                                                                                                </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 405         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 406         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 407             public void run() {                                                                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 408                 runOnMainThread(new Runnable() {                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 409                     public void run() {                                                                  </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style=""> 410                         Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                   </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style=""> 411                         if ((callbacks == cb) &amp;&amp; (cb != null)) {                                         </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style=""> 412                             if (!restoredAppsFinal.isEmpty()) {                                          </span>
<span class="74801564058707670" onmouseenter="enter('74801564058707670');" onmouseout="out('74801564058707670');" style=""> 413                                 for (AppInfo info : restoredAppsFinal) {                                 </span>
<span class="5803126433316087462" onmouseenter="enter('5803126433316087462');" onmouseout="out('5803126433316087462');" style=""> 414                                     final Intent intent = info.getIntent();                              </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style=""> 415                                     if (intent != null) {                                                </span>
<span class="-7439034917816334822" onmouseenter="enter('-7439034917816334822');" onmouseout="out('-7439034917816334822');" style=""> 416                                         mIconCache.deletePreloadedIcon(intent.getComponent(), info.user);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418                                 }                                                                        </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style=""> 419                                 callbacks.bindAppsUpdated(restoredAppsFinal);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420                             }                                                                            </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style=""> 421                             callbacks.bindAppsAdded(null, null, null, allAppsApps);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 424                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 426         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 427         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428     }                                                                                                    </span>
<span  style=""> 429                                                                                                          </span>
<span class="8398847809050125375" onmouseenter="enter('8398847809050125375');" onmouseout="out('8398847809050125375');" style=""><abbr title=" 430     public void addAndBindAddedWorkspaceApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps) {"> 430     public void addAndBindAddedWorkspaceApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceAp</abbr></span>
<span class="-2944114548254090265" onmouseenter="enter('-2944114548254090265');" onmouseout="out('-2944114548254090265');" style=""> 431         final Callbacks callbacks = (mCallbacks != null) ? mCallbacks.get() : null;                      </span>
<span class="7068544170534510976" onmouseenter="enter('7068544170534510976');" onmouseout="out('7068544170534510976');" style=""> 432         if (workspaceApps == null) {                                                                     </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 433             throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 434         }                                                                                                </span>
<span class="3300400308027950866" onmouseenter="enter('3300400308027950866');" onmouseout="out('3300400308027950866');" style=""> 435         if (workspaceApps.isEmpty()) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 436             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437         }                                                                                                </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 438         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 439         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 440             public void run() {                                                                          </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 441                 final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();               </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 442                 final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style=""> 443                 final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                   </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 444                 // Get the list of workspace screens.  We need to append to this list and                </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 445                 // can not use sBgWorkspaceScreens because loadWorkspace() may not have been             </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 446                 // called.                                                                               </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 447                 ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 448                 TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                 </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 449                 for (Integer i : orderedScreens.keySet()) {                                              </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 450                     long screenId = orderedScreens.get(i);                                               </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 451                     workspaceScreens.add(screenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452                 }                                                                                        </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 453                 synchronized(sBgLock) {                                                                  </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 454                     Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                  </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 455                     while (iter.hasNext()) {                                                             </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 456                         ItemInfo a = iter.next();                                                        </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 457                         final String name = a.title.toString();                                          </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 458                         final Intent launchIntent = a.getIntent();                                       </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 459                         // Short-circuit this logic if the icon exists somewhere on the workspace        </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 460                         if (LauncherModel.shortcutExists(context, name, launchIntent)) {                 </span>
<span class="1114901652794496627" onmouseenter="enter('1114901652794496627');" onmouseout="out('1114901652794496627');" style=""> 461                             // Only InstallShortcutReceiver sends us shortcutInfos, ignore them          </span>
<span class="-4921867613971796302" onmouseenter="enter('-4921867613971796302');" onmouseout="out('-4921867613971796302');" style=""><abbr title=" 462                             if ((a instanceof AppInfo) &amp;&amp; LauncherModel.appWasPromise(context, launchIntent, a.user)) {"> 462                             if ((a instanceof AppInfo) &amp;&amp; LauncherModel.appWasPromise(context, launchInte</abbr></span>
<span class="3043652812901566303" onmouseenter="enter('3043652812901566303');" onmouseout="out('3043652812901566303');" style=""> 463                                 restoredAppsFinal.add(((AppInfo) (a)));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 464                             }                                                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 465                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466                         }                                                                                </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 467                         // Add this icon to the db, creating a new page if necessary.  If there          </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 468                         // is only the empty page then we just add items to the first page.              </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 469                         // Otherwise, we add them to the next pages.                                     </span>
<span class="6942681515297262086" onmouseenter="enter('6942681515297262086');" onmouseout="out('6942681515297262086');" style=""> 470                         int startSearchPageIndex = (workspaceScreens.isEmpty()) ? 0 : 1;                 </span>
<span class="5475318676933485874" onmouseenter="enter('5475318676933485874');" onmouseout="out('5475318676933485874');" style=""><abbr title=" 471                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context, name, launchIntent, startSearchPageIndex, workspaceScreens);"> 471                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context, name</abbr></span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 472                         if (coords == null) {                                                            </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 473                             LauncherProvider lp = LauncherAppState.getLauncherProvider();                </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 474                             // If we can&#x27;t find a valid position, then just add a new screen.            </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 475                             // This takes time so we need to re-queue the add until the new              </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 476                             // page is added.  Create as many screens as necessary to satisfy            </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 477                             // the startSearchPageIndex.                                                 </span>
<span class="-4633937574945330988" onmouseenter="enter('-4633937574945330988');" onmouseout="out('-4633937574945330988');" style=""><abbr title=" 478                             int numPagesToAdd = Math.max(1, (startSearchPageIndex + 1) - workspaceScreens.size());"> 478                             int numPagesToAdd = Math.max(1, (startSearchPageIndex + 1) - workspaceScreens</abbr></span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 479                             while (numPagesToAdd &gt; 0) {                                                  </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 480                                 long screenId = lp.generateNewScreenId();                                </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 481                                 // Save the screen id for binding in the workspace                       </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 482                                 workspaceScreens.add(screenId);                                          </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 483                                 addedWorkspaceScreensFinal.add(screenId);                                </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 484                                 numPagesToAdd--;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485                             }                                                                            </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 486                             // Find the coordinate again                                                 </span>
<span class="-8995545726255917793" onmouseenter="enter('-8995545726255917793');" onmouseout="out('-8995545726255917793');" style=""><abbr title=" 487                             coords = LauncherModel.findNextAvailableIconSpace(context, name, launchIntent, startSearchPageIndex, workspaceScreens);"> 487                             coords = LauncherModel.findNextAvailableIconSpace(context, name, launchIntent</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 488                         }                                                                                </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 489                         if (coords == null) {                                                            </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style=""> 490                             throw new RuntimeException(&quot;Coordinates should not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491                         }                                                                                </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style=""> 492                         ShortcutInfo shortcutInfo;                                                       </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style=""> 493                         if (a instanceof ShortcutInfo) {                                                 </span>
<span class="-2077713348370366293" onmouseenter="enter('-2077713348370366293');" onmouseout="out('-2077713348370366293');" style=""> 494                             shortcutInfo = ((ShortcutInfo) (a));                                         </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style=""> 495                         } else if (a instanceof AppInfo) {                                               </span>
<span class="3620448109683680843" onmouseenter="enter('3620448109683680843');" onmouseout="out('3620448109683680843');" style=""> 496                             shortcutInfo = ((AppInfo) (a)).makeShortcut();                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 497                         } else {                                                                         </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style=""> 498                             throw new RuntimeException(&quot;Unexpected info type&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499                         }                                                                                </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style=""> 500                         // Add the shortcut to the db                                                    </span>
<span class="-1183187661294806550" onmouseenter="enter('-1183187661294806550');" onmouseout="out('-1183187661294806550');" style=""><abbr title=" 501                         addItemToDatabase(context, shortcutInfo, LauncherSettings.Favorites.CONTAINER_DESKTOP, coords.first, coords.second[0], coords.second[1], false);"> 501                         addItemToDatabase(context, shortcutInfo, LauncherSettings.Favorites.CONTAINER_DES</abbr></span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style=""> 502                         // Save the ShortcutInfo for binding in the workspace                            </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style=""> 503                         addedShortcutsFinal.add(shortcutInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505                 }                                                                                        </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style=""> 506                 // Update the workspace screens                                                          </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style=""> 507                 updateWorkspaceScreenOrder(context, workspaceScreens);                                   </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 508                 if (!addedShortcutsFinal.isEmpty()) {                                                    </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 509                     runOnMainThread(new Runnable() {                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 510                         public void run() {                                                              </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style=""> 511                             Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;               </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style=""> 512                             if ((callbacks == cb) &amp;&amp; (cb != null)) {                                     </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style=""> 513                                 final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();       </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style=""> 514                                 final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();    </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 515                                 if (!addedShortcutsFinal.isEmpty()) {                                    </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style=""><abbr title=" 516                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);"> 516                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - </abbr></span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style=""> 517                                     long lastScreenId = info.screenId;                                   </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style=""> 518                                     for (ItemInfo i : addedShortcutsFinal) {                             </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style=""> 519                                         if (i.screenId == lastScreenId) {                                </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style=""> 520                                             addAnimated.add(i);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 521                                         } else {                                                         </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style=""> 522                                             addNotAnimated.add(i);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 525                                 }                                                                        </span>
<span class="8586585899680597195" onmouseenter="enter('8586585899680597195');" onmouseout="out('8586585899680597195');" style=""><abbr title=" 526                                 callbacks.bindAppsAdded(addedWorkspaceScreensFinal, addNotAnimated, addAnimated, null);"> 526                                 callbacks.bindAppsAdded(addedWorkspaceScreensFinal, addNotAnimated, addAn</abbr></span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style=""> 527                                 if (!restoredAppsFinal.isEmpty()) {                                      </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style=""> 528                                     callbacks.bindAppsUpdated(restoredAppsFinal);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 532                     });                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 535         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 536         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537     }                                                                                                    </span>
<span  style=""> 538                                                                                                          </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style=""> 539     public void unbindItemInfosAndClearQueuedBindRunnables() {                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 540         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="-715860477509754399" onmouseenter="enter('-715860477509754399');" onmouseout="out('-715860477509754399');" style=""><abbr title=" 541             throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; + &quot;main thread&quot;);"> 541             throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; + &quot;mai</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542         }                                                                                                </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style=""> 543         // Clear any deferred bind runnables                                                             </span>
<span class="140100708416316466" onmouseenter="enter('140100708416316466');" onmouseout="out('140100708416316466');" style=""> 544         synchronized(mDeferredBindRunnables) {                                                           </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style=""> 545             mDeferredBindRunnables.clear();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546         }                                                                                                </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style=""> 547         // Remove any queued bind runnables                                                              </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style=""> 548         mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                 </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style=""> 549         // Unbind all the workspace items                                                                </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style=""> 550         unbindWorkspaceItemsOnMainThread();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 551     }                                                                                                    </span>
<span  style=""> 552                                                                                                          </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style=""> 553     /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                        </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style=""> 554     void unbindWorkspaceItemsOnMainThread() {                                                            </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style=""> 555         // Ensure that we don&#x27;t use the same workspace items data structure on the main thread           </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style=""> 556         // by making a copy of workspace items first.                                                    </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style=""> 557         final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style=""> 558         final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                             </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 559         synchronized(sBgLock) {                                                                          </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style=""> 560             tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                 </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style=""> 561             tmpAppWidgets.addAll(sBgAppWidgets);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562         }                                                                                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 563         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 564             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 565             public void run() {                                                                          </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style=""> 566                 for (ItemInfo item : tmpWorkspaceItems) {                                                </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 567                     item.unbind();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 568                 }                                                                                        </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style=""> 569                 for (ItemInfo item : tmpAppWidgets) {                                                    </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 570                     item.unbind();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 573         };                                                                                               </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style=""> 574         runOnMainThread(r);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575     }                                                                                                    </span>
<span  style=""> 576                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 577     /**                                                                                                  </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style=""> 578      * Adds an item to the DB if it was not created previously, or move it to a new                      </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style=""> 579      * &lt;container, screen, cellX, cellY&gt;                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 580      */                                                                                                  </span>
<span class="-4913274496252174191" onmouseenter="enter('-4913274496252174191');" onmouseout="out('-4913274496252174191');" style=""><abbr title=" 581     static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container, long screenId, int cellX, int cellY) {"> 581     static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container, long screenId, in</abbr></span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style=""> 582         if (item.container == ItemInfo.NO_ID) {                                                          </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style=""> 583             // From all apps                                                                             </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style=""> 584             addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 585         } else {                                                                                         </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style=""> 586             // From somewhere else                                                                       </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style=""> 587             moveItemInDatabase(context, item, container, screenId, cellX, cellY);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589     }                                                                                                    </span>
<span  style=""> 590                                                                                                          </span>
<span class="-3477298304624879477" onmouseenter="enter('-3477298304624879477');" onmouseout="out('-3477298304624879477');" style=""><abbr title=" 591     static void checkItemInfoLocked(final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {"> 591     static void checkItemInfoLocked(final long itemId, final ItemInfo item, StackTraceElement[] stackTrac</abbr></span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 592         ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                  </span>
<span class="-4193299319739453899" onmouseenter="enter('-4193299319739453899');" onmouseout="out('-4193299319739453899');" style=""> 593         if ((modelItem != null) &amp;&amp; (item != modelItem)) {                                                </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style=""> 594             // check all the data is consistent                                                          </span>
<span class="-6196645600345538831" onmouseenter="enter('-6196645600345538831');" onmouseout="out('-6196645600345538831');" style=""> 595             if ((modelItem instanceof ShortcutInfo) &amp;&amp; (item instanceof ShortcutInfo)) {                 </span>
<span class="7634783497213968312" onmouseenter="enter('7634783497213968312');" onmouseout="out('7634783497213968312');" style=""> 596                 ShortcutInfo modelShortcut = ((ShortcutInfo) (modelItem));                               </span>
<span class="9110910577641752235" onmouseenter="enter('9110910577641752235');" onmouseout="out('9110910577641752235');" style=""> 597                 ShortcutInfo shortcut = ((ShortcutInfo) (item));                                         </span>
<span class="-1328943871575335248" onmouseenter="enter('-1328943871575335248');" onmouseout="out('-1328943871575335248');" style=""><abbr title=" 598                 if ((((((((((modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp; modelShortcut.intent.filterEquals(shortcut.intent)) &amp;&amp; (modelShortcut.id == shortcut.id)) &amp;&amp; (modelShortcut.itemType == shortcut.itemType)) &amp;&amp; (modelShortcut.container == shortcut.container)) &amp;&amp; (modelShortcut.screenId == shortcut.screenId)) &amp;&amp; (modelShortcut.cellX == shortcut.cellX)) &amp;&amp; (modelShortcut.cellY == shortcut.cellY)) &amp;&amp; (modelShortcut.spanX == shortcut.spanX)) &amp;&amp; (modelShortcut.spanY == shortcut.spanY)) &amp;&amp; (((modelShortcut.dropPos == null) &amp;&amp; (shortcut.dropPos == null)) || ((((modelShortcut.dropPos != null) &amp;&amp; (shortcut.dropPos != null)) &amp;&amp; (modelShortcut.dropPos[0] == shortcut.dropPos[0])) &amp;&amp; (modelShortcut.dropPos[1] == shortcut.dropPos[1])))) {"> 598                 if ((((((((((modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp; modelSho</abbr></span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style=""> 599                     // For all intents and purposes, this is the same object                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 600                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602             }                                                                                            </span>
<span class="-2302662152798801960" onmouseenter="enter('-2302662152798801960');" onmouseout="out('-2302662152798801960');" style=""> 603             // the modelItem needs to match up perfectly with item if our model is                       </span>
<span class="2528116919227347475" onmouseenter="enter('2528116919227347475');" onmouseout="out('2528116919227347475');" style=""> 604             // to be consistent with the database-- for now, just require                                </span>
<span class="-7120210409264493846" onmouseenter="enter('-7120210409264493846');" onmouseout="out('-7120210409264493846');" style=""> 605             // modelItem == item or the equality check above                                             </span>
<span class="-599352405312960225" onmouseenter="enter('-599352405312960225');" onmouseout="out('-599352405312960225');" style=""><abbr title=" 606             String msg = (((&quot;item: &quot; + (item != null ? item.toString() : &quot;null&quot;)) + &quot;modelItem: &quot;) + (modelItem != null ? modelItem.toString() : &quot;null&quot;)) + &quot;Error: ItemInfo passed to checkItemInfo doesn&#x27;t match original&quot;;"> 606             String msg = (((&quot;item: &quot; + (item != null ? item.toString() : &quot;null&quot;)) + &quot;modelItem: &quot;) + (mod</abbr></span>
<span class="889449931745068267" onmouseenter="enter('889449931745068267');" onmouseout="out('889449931745068267');" style=""> 607             RuntimeException e = new RuntimeException(msg);                                              </span>
<span class="746494671138810715" onmouseenter="enter('746494671138810715');" onmouseout="out('746494671138810715');" style=""> 608             if (stackTrace != null) {                                                                    </span>
<span class="6991917147302354492" onmouseenter="enter('6991917147302354492');" onmouseout="out('6991917147302354492');" style=""> 609                 e.setStackTrace(stackTrace);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610             }                                                                                            </span>
<span class="-2532054300390783036" onmouseenter="enter('-2532054300390783036');" onmouseout="out('-2532054300390783036');" style=""> 611             throw e;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 612         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613     }                                                                                                    </span>
<span  style=""> 614                                                                                                          </span>
<span class="8253262720993766341" onmouseenter="enter('8253262720993766341');" onmouseout="out('8253262720993766341');" style=""> 615     static void checkItemInfo(final ItemInfo item) {                                                     </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 616         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 617         final long itemId = item.id;                                                                     </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 618         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 619             public void run() {                                                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 620                 synchronized(sBgLock) {                                                                  </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 621                     checkItemInfoLocked(itemId, item, stackTrace);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 624         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 625         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626     }                                                                                                    </span>
<span  style=""> 627                                                                                                          </span>
<span class="5843580590807195149" onmouseenter="enter('5843580590807195149');" onmouseout="out('5843580590807195149');" style=""><abbr title=" 628     static void updateItemInDatabaseHelper(Context context, final ContentValues values, final ItemInfo item, final String callingFunction) {"> 628     static void updateItemInDatabaseHelper(Context context, final ContentValues values, final ItemInfo it</abbr></span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 629         final long itemId = item.id;                                                                     </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 630         final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 631         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 632         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 633         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 634             public void run() {                                                                          </span>
<span class="6508684228899883734" onmouseenter="enter('6508684228899883734');" onmouseout="out('6508684228899883734');" style=""> 635                 cr.update(uri, values, null, null);                                                      </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 636                 updateItemArrays(item, itemId, stackTrace);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 637             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 638         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 639         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640     }                                                                                                    </span>
<span  style=""> 641                                                                                                          </span>
<span class="1323461269664119324" onmouseenter="enter('1323461269664119324');" onmouseout="out('1323461269664119324');" style=""><abbr title=" 642     static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList, final ArrayList&lt;ItemInfo&gt; items, final String callingFunction) {"> 642     static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList, f</abbr></span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 643         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 644         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 645         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 646             public void run() {                                                                          </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style=""> 647                 ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();     </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 648                 int count = items.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 649                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 650                     ItemInfo item = items.get(i);                                                        </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 651                     final long itemId = item.id;                                                         </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 652                     final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);             </span>
<span class="-8860263448497272048" onmouseenter="enter('-8860263448497272048');" onmouseout="out('-8860263448497272048');" style=""> 653                     ContentValues values = valuesList.get(i);                                            </span>
<span class="2997765192602662390" onmouseenter="enter('2997765192602662390');" onmouseout="out('2997765192602662390');" style=""> 654                     ops.add(ContentProviderOperation.newUpdate(uri).withValues(values).build());         </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 655                     updateItemArrays(item, itemId, stackTrace);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 656                 }                                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 657                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style=""> 658                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 659                 } catch (java.lang.Exception e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 660                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 663         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 664         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 665     }                                                                                                    </span>
<span  style=""> 666                                                                                                          </span>
<span class="2082626234385770383" onmouseenter="enter('2082626234385770383');" onmouseout="out('2082626234385770383');" style=""> 667     static void updateItemArrays(ItemInfo item, long itemId, StackTraceElement[] stackTrace) {           </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 668         // Lock on mBgLock *after* the db operation                                                      </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 669         synchronized(sBgLock) {                                                                          </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 670             checkItemInfoLocked(itemId, item, stackTrace);                                               </span>
<span class="-4732894293004003705" onmouseenter="enter('-4732894293004003705');" onmouseout="out('-4732894293004003705');" style=""><abbr title=" 671             if ((item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (item.container != LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {"> 671             if ((item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (item.container != La</abbr></span>
<span class="-6294566488312473300" onmouseenter="enter('-6294566488312473300');" onmouseout="out('-6294566488312473300');" style=""> 672                 // Item is in a folder, make sure this folder exists                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 673                 if (!sBgFolders.containsKey(item.container)) {                                           </span>
<span class="9065703941205621353" onmouseenter="enter('9065703941205621353');" onmouseout="out('9065703941205621353');" style=""> 674                     // An items container is being set to a that of an item which is not in              </span>
<span class="-3172747387014066058" onmouseenter="enter('-3172747387014066058');" onmouseout="out('-3172747387014066058');" style=""> 675                     // the list of Folders.                                                              </span>
<span class="866170479557672718" onmouseenter="enter('866170479557672718');" onmouseout="out('866170479557672718');" style=""><abbr title=" 676                     String msg = (((&quot;item: &quot; + item) + &quot; container being set to: &quot;) + item.container) + &quot;, not in the list of folders&quot;;"> 676                     String msg = (((&quot;item: &quot; + item) + &quot; container being set to: &quot;) + item.container) + &quot;</abbr></span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 677                     Log.e(TAG, msg);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 678                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679             }                                                                                            </span>
<span class="8378072337545652807" onmouseenter="enter('8378072337545652807');" onmouseout="out('8378072337545652807');" style=""> 680             // Items are added/removed from the corresponding FolderInfo elsewhere, such                 </span>
<span class="7844728369218635164" onmouseenter="enter('7844728369218635164');" onmouseout="out('7844728369218635164');" style=""> 681             // as in Workspace.onDrop. Here, we just add/remove them from the list of items              </span>
<span class="4553148780571708557" onmouseenter="enter('4553148780571708557');" onmouseout="out('4553148780571708557');" style=""> 682             // that are on the desktop, as appropriate                                                   </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 683             ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                              </span>
<span class="-8214278069475616615" onmouseenter="enter('-8214278069475616615');" onmouseout="out('-8214278069475616615');" style=""><abbr title=" 684             if ((modelItem != null) &amp;&amp; ((modelItem.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) || (modelItem.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT))) {"> 684             if ((modelItem != null) &amp;&amp; ((modelItem.container == LauncherSettings.Favorites.CONTAINER_DESK</abbr></span>
<span class="-8474980351342559163" onmouseenter="enter('-8474980351342559163');" onmouseout="out('-8474980351342559163');" style=""> 685                 switch (modelItem.itemType) {                                                            </span>
<span class="2051083265990103278" onmouseenter="enter('2051083265990103278');" onmouseout="out('2051083265990103278');" style=""> 686                     case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION :                              </span>
<span class="7475610212167087433" onmouseenter="enter('7475610212167087433');" onmouseout="out('7475610212167087433');" style=""> 687                     case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT :                                 </span>
<span class="-8875317450551009164" onmouseenter="enter('-8875317450551009164');" onmouseout="out('-8875317450551009164');" style=""> 688                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER :                                   </span>
<span class="-2945309969071223861" onmouseenter="enter('-2945309969071223861');" onmouseout="out('-2945309969071223861');" style=""> 689                         if (!sBgWorkspaceItems.contains(modelItem)) {                                    </span>
<span class="-5660475538824179031" onmouseenter="enter('-5660475538824179031');" onmouseout="out('-5660475538824179031');" style=""> 690                             sBgWorkspaceItems.add(modelItem);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691                         }                                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 692                         break;                                                                           </span>
<span class="3050734735710613783" onmouseenter="enter('3050734735710613783');" onmouseout="out('3050734735710613783');" style=""> 693                     default :                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 694                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 696             } else {                                                                                     </span>
<span class="-7939766627444392355" onmouseenter="enter('-7939766627444392355');" onmouseout="out('-7939766627444392355');" style=""> 697                 sBgWorkspaceItems.remove(modelItem);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 698             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700     }                                                                                                    </span>
<span  style=""> 701                                                                                                          </span>
<span class="-4020360329970845372" onmouseenter="enter('-4020360329970845372');" onmouseout="out('-4020360329970845372');" style=""> 702     public void flushWorkerThread() {                                                                    </span>
<span class="2458440832416538563" onmouseenter="enter('2458440832416538563');" onmouseout="out('2458440832416538563');" style=""> 703         mFlushingWorkerThread = true;                                                                    </span>
<span class="2941590529192344100" onmouseenter="enter('2941590529192344100');" onmouseout="out('2941590529192344100');" style=""> 704         Runnable waiter = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 705                 public void run() {                                                                      </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 706                     synchronized (this) {                                                                </span>
<span class="-1428047894310886643" onmouseenter="enter('-1428047894310886643');" onmouseout="out('-1428047894310886643');" style=""> 707                         notifyAll();                                                                     </span>
<span class="3926508156885202999" onmouseenter="enter('3926508156885202999');" onmouseout="out('3926508156885202999');" style=""> 708                         mFlushingWorkerThread = false;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 709                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 711             };                                                                                           </span>
<span  style=""> 712                                                                                                          </span>
<span class="-7483564469787643608" onmouseenter="enter('-7483564469787643608');" onmouseout="out('-7483564469787643608');" style=""> 713         synchronized(waiter) {                                                                           </span>
<span class="-8072658497280753067" onmouseenter="enter('-8072658497280753067');" onmouseout="out('-8072658497280753067');" style=""> 714             runOnWorkerThread(waiter);                                                                   </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style=""> 715             if (mLoaderTask != null) {                                                                   </span>
<span class="-756902833484627430" onmouseenter="enter('-756902833484627430');" onmouseout="out('-756902833484627430');" style=""> 716                 synchronized(mLoaderTask) {                                                              </span>
<span class="58891182273081261" onmouseenter="enter('58891182273081261');" onmouseout="out('58891182273081261');" style=""> 717                     mLoaderTask.notify();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 719             }                                                                                            </span>
<span class="4859668596787406566" onmouseenter="enter('4859668596787406566');" onmouseout="out('4859668596787406566');" style=""> 720             boolean success = false;                                                                     </span>
<span class="7536073198725464588" onmouseenter="enter('7536073198725464588');" onmouseout="out('7536073198725464588');" style=""> 721             while (!success) {                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 722                 try {                                                                                    </span>
<span class="8661527805225995774" onmouseenter="enter('8661527805225995774');" onmouseout="out('8661527805225995774');" style=""> 723                     waiter.wait();                                                                       </span>
<span class="-5965625035307022309" onmouseenter="enter('-5965625035307022309');" onmouseout="out('-5965625035307022309');" style=""> 724                     success = true;                                                                      </span>
<span class="-7528533024404460182" onmouseenter="enter('-7528533024404460182');" onmouseout="out('-7528533024404460182');" style=""> 725                 } catch (InterruptedException e) {                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 729     }                                                                                                    </span>
<span  style=""> 730                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 731     /**                                                                                                  </span>
<span class="6993284491606696239" onmouseenter="enter('6993284491606696239');" onmouseout="out('6993284491606696239');" style=""> 732      * Move an item in the DB to a new &lt;container, screen, cellX, cellY&gt;                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 733      */                                                                                                  </span>
<span class="-5600424137319741995" onmouseenter="enter('-5600424137319741995');" onmouseout="out('-5600424137319741995');" style=""><abbr title=" 734     static void moveItemInDatabase(Context context, final ItemInfo item, final long container, final long screenId, final int cellX, final int cellY) {"> 734     static void moveItemInDatabase(Context context, final ItemInfo item, final long container, final long</abbr></span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 735         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 736         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 737         item.cellY = cellY;                                                                              </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 738         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 739         // in the hotseat                                                                                </span>
<span class="4606570855627801176" onmouseenter="enter('4606570855627801176');" onmouseout="out('4606570855627801176');" style=""><abbr title=" 740         if (((context instanceof Launcher) &amp;&amp; (screenId &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {"> 740         if (((context instanceof Launcher) &amp;&amp; (screenId &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites</abbr></span>
<span class="2559774459784632549" onmouseenter="enter('2559774459784632549');" onmouseout="out('2559774459784632549');" style=""> 741             item.screenId = ((Launcher) (context)).getHotseat().getOrderInHotseat(cellX, cellY);         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 742         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 743             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744         }                                                                                                </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 745         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 746         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 747         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 748         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 749         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span class="-198415815572970699" onmouseenter="enter('-198415815572970699');" onmouseout="out('-198415815572970699');" style=""> 750         updateItemInDatabaseHelper(context, values, item, &quot;moveItemInDatabase&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 751     }                                                                                                    </span>
<span  style=""> 752                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 753     /**                                                                                                  </span>
<span class="-2318253408843035081" onmouseenter="enter('-2318253408843035081');" onmouseout="out('-2318253408843035081');" style=""> 754      * Move items in the DB to a new &lt;container, screen, cellX, cellY&gt;. We assume that the               </span>
<span class="9095568381627098065" onmouseenter="enter('9095568381627098065');" onmouseout="out('9095568381627098065');" style=""> 755      * cellX, cellY have already been updated on the ItemInfos.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 756      */                                                                                                  </span>
<span class="3098301382350823622" onmouseenter="enter('3098301382350823622');" onmouseout="out('3098301382350823622');" style=""><abbr title=" 757     static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items, final long container, final int screen) {"> 757     static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items, final long containe</abbr></span>
<span class="3335073963685886452" onmouseenter="enter('3335073963685886452');" onmouseout="out('3335073963685886452');" style=""> 758         ArrayList&lt;ContentValues&gt; contentValues = new ArrayList&lt;ContentValues&gt;();                         </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 759         int count = items.size();                                                                        </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 760         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 761             ItemInfo item = items.get(i);                                                                </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 762             item.container = container;                                                                  </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 763             // We store hotseat items in canonical form which is this orientation invariant position     </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 764             // in the hotseat                                                                            </span>
<span class="-6267116755196683474" onmouseenter="enter('-6267116755196683474');" onmouseout="out('-6267116755196683474');" style=""><abbr title=" 765             if (((context instanceof Launcher) &amp;&amp; (screen &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {"> 765             if (((context instanceof Launcher) &amp;&amp; (screen &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorit</abbr></span>
<span class="-1256626981468344422" onmouseenter="enter('-1256626981468344422');" onmouseout="out('-1256626981468344422');" style=""><abbr title=" 766                 item.screenId = ((Launcher) (context)).getHotseat().getOrderInHotseat(item.cellX, item.cellY);"> 766                 item.screenId = ((Launcher) (context)).getHotseat().getOrderInHotseat(item.cellX, item.ce</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 767             } else {                                                                                     </span>
<span class="-4307617232085975705" onmouseenter="enter('-4307617232085975705');" onmouseout="out('-4307617232085975705');" style=""> 768                 item.screenId = screen;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769             }                                                                                            </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 770             final ContentValues values = new ContentValues();                                            </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 771             values.put(LauncherSettings.Favorites.CONTAINER, item.container);                            </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 772             values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                    </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 773             values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                    </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 774             values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                </span>
<span class="2833686190506555422" onmouseenter="enter('2833686190506555422');" onmouseout="out('2833686190506555422');" style=""> 775             contentValues.add(values);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776         }                                                                                                </span>
<span class="-3017110074752693492" onmouseenter="enter('-3017110074752693492');" onmouseout="out('-3017110074752693492');" style=""> 777         updateItemsInDatabaseHelper(context, contentValues, items, &quot;moveItemInDatabase&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778     }                                                                                                    </span>
<span  style=""> 779                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 780     /**                                                                                                  </span>
<span class="5893714151144352360" onmouseenter="enter('5893714151144352360');" onmouseout="out('5893714151144352360');" style=""> 781      * Move and/or resize item in the DB to a new &lt;container, screen, cellX, cellY, spanX, spanY&gt;        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 782      */                                                                                                  </span>
<span class="2934638672122753077" onmouseenter="enter('2934638672122753077');" onmouseout="out('2934638672122753077');" style=""><abbr title=" 783     static void modifyItemInDatabase(Context context, final ItemInfo item, final long container, final long screenId, final int cellX, final int cellY, final int spanX, final int spanY) {"> 783     static void modifyItemInDatabase(Context context, final ItemInfo item, final long container, final lo</abbr></span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 784         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 785         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 786         item.cellY = cellY;                                                                              </span>
<span class="-7444681703441257019" onmouseenter="enter('-7444681703441257019');" onmouseout="out('-7444681703441257019');" style=""> 787         item.spanX = spanX;                                                                              </span>
<span class="1797194204222415457" onmouseenter="enter('1797194204222415457');" onmouseout="out('1797194204222415457');" style=""> 788         item.spanY = spanY;                                                                              </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 789         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 790         // in the hotseat                                                                                </span>
<span class="4606570855627801176" onmouseenter="enter('4606570855627801176');" onmouseout="out('4606570855627801176');" style=""><abbr title=" 791         if (((context instanceof Launcher) &amp;&amp; (screenId &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {"> 791         if (((context instanceof Launcher) &amp;&amp; (screenId &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites</abbr></span>
<span class="2559774459784632549" onmouseenter="enter('2559774459784632549');" onmouseout="out('2559774459784632549');" style=""> 792             item.screenId = ((Launcher) (context)).getHotseat().getOrderInHotseat(cellX, cellY);         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 793         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 794             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 795         }                                                                                                </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 796         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 797         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 798         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 799         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="-1263713769577317048" onmouseenter="enter('-1263713769577317048');" onmouseout="out('-1263713769577317048');" style=""> 800         values.put(LauncherSettings.Favorites.SPANX, item.spanX);                                        </span>
<span class="847673422027095164" onmouseenter="enter('847673422027095164');" onmouseout="out('847673422027095164');" style=""> 801         values.put(LauncherSettings.Favorites.SPANY, item.spanY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 802         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span class="5688211233374147409" onmouseenter="enter('5688211233374147409');" onmouseout="out('5688211233374147409');" style=""> 803         updateItemInDatabaseHelper(context, values, item, &quot;modifyItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 804     }                                                                                                    </span>
<span  style=""> 805                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 806     /**                                                                                                  </span>
<span class="3263486289839218660" onmouseenter="enter('3263486289839218660');" onmouseout="out('3263486289839218660');" style=""> 807      * Update an item to the database in a specified container.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 808      */                                                                                                  </span>
<span class="459681340980680258" onmouseenter="enter('459681340980680258');" onmouseout="out('459681340980680258');" style=""> 809     static void updateItemInDatabase(Context context, final ItemInfo item) {                             </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 810         final ContentValues values = new ContentValues();                                                </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style=""> 811         item.onAddToDatabase(context, values);                                                           </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 812         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span class="-2640379359931023102" onmouseenter="enter('-2640379359931023102');" onmouseout="out('-2640379359931023102');" style=""> 813         updateItemInDatabaseHelper(context, values, item, &quot;updateItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814     }                                                                                                    </span>
<span  style=""> 815                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 816     /**                                                                                                  </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style=""> 817      * Returns true if the shortcuts already exists in the database.                                     </span>
<span class="-3331700288971341517" onmouseenter="enter('-3331700288971341517');" onmouseout="out('-3331700288971341517');" style=""> 818      * we identify a shortcut by its title and intent.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 819      */                                                                                                  </span>
<span class="-6388905982866518653" onmouseenter="enter('-6388905982866518653');" onmouseout="out('-6388905982866518653');" style=""> 820     static boolean shortcutExists(Context context, String title, Intent intent) {                        </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 821         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="4264825260415276278" onmouseenter="enter('4264825260415276278');" onmouseout="out('4264825260415276278');" style=""> 822         final Intent intentWithPkg;                                                                      </span>
<span class="-6472063332783259814" onmouseenter="enter('-6472063332783259814');" onmouseout="out('-6472063332783259814');" style=""> 823         final Intent intentWithoutPkg;                                                                   </span>
<span class="-1192314096420314309" onmouseenter="enter('-1192314096420314309');" onmouseout="out('-1192314096420314309');" style=""> 824         if (intent.getComponent() != null) {                                                             </span>
<span class="5013412415263932655" onmouseenter="enter('5013412415263932655');" onmouseout="out('5013412415263932655');" style=""> 825             // If component is not null, an intent with null package will produce                        </span>
<span class="-2056261929714512728" onmouseenter="enter('-2056261929714512728');" onmouseout="out('-2056261929714512728');" style=""> 826             // the same result and should also be a match.                                               </span>
<span class="8293829844581049791" onmouseenter="enter('8293829844581049791');" onmouseout="out('8293829844581049791');" style=""> 827             if (intent.getPackage() != null) {                                                           </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style=""> 828                 intentWithPkg = intent;                                                                  </span>
<span class="302721143002808724" onmouseenter="enter('302721143002808724');" onmouseout="out('302721143002808724');" style=""> 829                 intentWithoutPkg = new Intent(intent).setPackage(null);                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 830             } else {                                                                                     </span>
<span class="9156121259041236614" onmouseenter="enter('9156121259041236614');" onmouseout="out('9156121259041236614');" style=""> 831                 intentWithPkg = new Intent(intent).setPackage(intent.getComponent().getPackageName());   </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style=""> 832                 intentWithoutPkg = intent;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 834         } else {                                                                                         </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style=""> 835             intentWithPkg = intent;                                                                      </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style=""> 836             intentWithoutPkg = intent;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 837         }                                                                                                </span>
<span class="-9139396081872919721" onmouseenter="enter('-9139396081872919721');" onmouseout="out('-9139396081872919721');" style=""><abbr title=" 838         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[]{ &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and (intent=? or intent=?)&quot;, new String[]{ title, intentWithPkg.toUri(0), intentWithoutPkg.toUri(0) }, null);"> 838         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[]{ &quot;title&quot;, &quot;intent&quot; }, &quot;t</abbr></span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style=""> 839         boolean result = false;                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 840         try {                                                                                            </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style=""> 841             result = c.moveToFirst();                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 842         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 843             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 844         }                                                                                                </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 845         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846     }                                                                                                    </span>
<span  style=""> 847                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 848     /**                                                                                                  </span>
<span class="2522962036775885267" onmouseenter="enter('2522962036775885267');" onmouseout="out('2522962036775885267');" style=""> 849      * Returns true if the promise shortcuts with the same package name exists on the workspace.         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 850      */                                                                                                  </span>
<span class="-6588164927851751704" onmouseenter="enter('-6588164927851751704');" onmouseout="out('-6588164927851751704');" style=""> 851     static boolean appWasPromise(Context context, Intent intent, UserHandleCompat user) {                </span>
<span class="-3491314044087926833" onmouseenter="enter('-3491314044087926833');" onmouseout="out('-3491314044087926833');" style=""> 852         final ComponentName component = intent.getComponent();                                           </span>
<span class="-8432366264448055826" onmouseenter="enter('-8432366264448055826');" onmouseout="out('-8432366264448055826');" style=""> 853         if (component == null) {                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 854             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855         }                                                                                                </span>
<span class="-5254167698548486612" onmouseenter="enter('-5254167698548486612');" onmouseout="out('-5254167698548486612');" style=""> 856         return !getItemsByPackageName(component.getPackageName(), user).isEmpty();                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857     }                                                                                                    </span>
<span  style=""> 858                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 859     /**                                                                                                  </span>
<span class="9160518604603288134" onmouseenter="enter('9160518604603288134');" onmouseout="out('9160518604603288134');" style=""> 860      * Returns an ItemInfo array containing all the items in the LauncherModel.                          </span>
<span class="-7541433293033039987" onmouseenter="enter('-7541433293033039987');" onmouseout="out('-7541433293033039987');" style=""> 861      * The ItemInfo.id is not set through this function.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 862      */                                                                                                  </span>
<span class="2306578838706816090" onmouseenter="enter('2306578838706816090');" onmouseout="out('2306578838706816090');" style=""> 863     static ArrayList&lt;ItemInfo&gt; getItemsInLocalCoordinates(Context context) {                             </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style=""> 864         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 865         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="4116267603931841991" onmouseenter="enter('4116267603931841991');" onmouseout="out('4116267603931841991');" style=""><abbr title=" 866         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[]{ LauncherSettings.Favorites.ITEM_TYPE, LauncherSettings.Favorites.CONTAINER, LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY, LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY, LauncherSettings.Favorites.PROFILE_ID }, null, null, null);"> 866         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[]{ LauncherSettings.Favori</abbr></span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 867         final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);         </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 868         final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);        </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 869         final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);              </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 870         final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 871         final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style=""> 872         final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);                </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style=""> 873         final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);                </span>
<span class="-7743472832601810579" onmouseenter="enter('-7743472832601810579');" onmouseout="out('-7743472832601810579');" style=""> 874         final int profileIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.PROFILE_ID);       </span>
<span class="4378196374401845990" onmouseenter="enter('4378196374401845990');" onmouseout="out('4378196374401845990');" style=""> 875         UserManagerCompat userManager = UserManagerCompat.getInstance(context);                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 876         try {                                                                                            </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 877             while (c.moveToNext()) {                                                                     </span>
<span class="-4116264954015845780" onmouseenter="enter('-4116264954015845780');" onmouseout="out('-4116264954015845780');" style=""> 878                 ItemInfo item = new ItemInfo();                                                          </span>
<span class="3361172632220058931" onmouseenter="enter('3361172632220058931');" onmouseout="out('3361172632220058931');" style=""> 879                 item.cellX = c.getInt(cellXIndex);                                                       </span>
<span class="-3320299110004327663" onmouseenter="enter('-3320299110004327663');" onmouseout="out('-3320299110004327663');" style=""> 880                 item.cellY = c.getInt(cellYIndex);                                                       </span>
<span class="-3998513073647472943" onmouseenter="enter('-3998513073647472943');" onmouseout="out('-3998513073647472943');" style=""> 881                 item.spanX = Math.max(1, c.getInt(spanXIndex));                                          </span>
<span class="584206030510259358" onmouseenter="enter('584206030510259358');" onmouseout="out('584206030510259358');" style=""> 882                 item.spanY = Math.max(1, c.getInt(spanYIndex));                                          </span>
<span class="7755197868117966754" onmouseenter="enter('7755197868117966754');" onmouseout="out('7755197868117966754');" style=""> 883                 item.container = c.getInt(containerIndex);                                               </span>
<span class="2520990540941204818" onmouseenter="enter('2520990540941204818');" onmouseout="out('2520990540941204818');" style=""> 884                 item.itemType = c.getInt(itemTypeIndex);                                                 </span>
<span class="-2693827439071435274" onmouseenter="enter('-2693827439071435274');" onmouseout="out('-2693827439071435274');" style=""> 885                 item.screenId = c.getInt(screenIndex);                                                   </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style=""> 886                 long serialNumber = c.getInt(profileIdIndex);                                            </span>
<span class="8590899978146640866" onmouseenter="enter('8590899978146640866');" onmouseout="out('8590899978146640866');" style=""> 887                 item.user = userManager.getUserForSerialNumber(serialNumber);                            </span>
<span class="-2267817568611630151" onmouseenter="enter('-2267817568611630151');" onmouseout="out('-2267817568611630151');" style=""> 888                 // Skip if user has been deleted.                                                        </span>
<span class="-8057177251913525905" onmouseenter="enter('-8057177251913525905');" onmouseout="out('-8057177251913525905');" style=""> 889                 if (item.user != null) {                                                                 </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style=""> 890                     items.add(item);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 893         } catch (java.lang.Exception e) {                                                                </span>
<span class="4333495016815960454" onmouseenter="enter('4333495016815960454');" onmouseout="out('4333495016815960454');" style=""> 894             items.clear();                                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 895         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 896             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897         }                                                                                                </span>
<span class="4279419839789234429" onmouseenter="enter('4279419839789234429');" onmouseout="out('4279419839789234429');" style=""> 898         return items;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 899     }                                                                                                    </span>
<span  style=""> 900                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 901     /**                                                                                                  </span>
<span class="-8400747742808132543" onmouseenter="enter('-8400747742808132543');" onmouseout="out('-8400747742808132543');" style=""> 902      * Find a folder in the db, creating the FolderInfo if necessary, and adding it to folderList.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 903      */                                                                                                  </span>
<span class="-6151116876875651790" onmouseenter="enter('-6151116876875651790');" onmouseout="out('-6151116876875651790');" style=""> 904     FolderInfo getFolderById(Context context, HashMap&lt;Long, FolderInfo&gt; folderList, long id) {           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 905         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="5921918128416539773" onmouseenter="enter('5921918128416539773');" onmouseout="out('5921918128416539773');" style=""><abbr title=" 906         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null, &quot;_id=? and (itemType=? or itemType=?)&quot;, new String[]{ String.valueOf(id), String.valueOf(LauncherSettings.Favorites.ITEM_TYPE_FOLDER) }, null);"> 906         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null, &quot;_id=? and (itemType=? or itemT</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 907         try {                                                                                            </span>
<span class="-6302304746326789409" onmouseenter="enter('-6302304746326789409');" onmouseout="out('-6302304746326789409');" style=""> 908             if (c.moveToFirst()) {                                                                       </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 909                 final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE); </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style=""> 910                 final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);        </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 911                 final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);</span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 912                 final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);      </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 913                 final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);        </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 914                 final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);        </span>
<span class="7004752326616919357" onmouseenter="enter('7004752326616919357');" onmouseout="out('7004752326616919357');" style=""> 915                 FolderInfo folderInfo = null;                                                            </span>
<span class="2938602155061951308" onmouseenter="enter('2938602155061951308');" onmouseout="out('2938602155061951308');" style=""> 916                 switch (c.getInt(itemTypeIndex)) {                                                       </span>
<span class="-8875317450551009164" onmouseenter="enter('-8875317450551009164');" onmouseout="out('-8875317450551009164');" style=""> 917                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER :                                   </span>
<span class="8497686210844969517" onmouseenter="enter('8497686210844969517');" onmouseout="out('8497686210844969517');" style=""> 918                         folderInfo = findOrMakeFolder(folderList, id);                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 919                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 920                 }                                                                                        </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style=""> 921                 folderInfo.title = c.getString(titleIndex);                                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style=""> 922                 folderInfo.id = id;                                                                      </span>
<span class="-3770649288661071555" onmouseenter="enter('-3770649288661071555');" onmouseout="out('-3770649288661071555');" style=""> 923                 folderInfo.container = c.getInt(containerIndex);                                         </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style=""> 924                 folderInfo.screenId = c.getInt(screenIndex);                                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style=""> 925                 folderInfo.cellX = c.getInt(cellXIndex);                                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style=""> 926                 folderInfo.cellY = c.getInt(cellYIndex);                                                 </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style=""> 927                 return folderInfo;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 928             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 929         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 930             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 931         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 932         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933     }                                                                                                    </span>
<span  style=""> 934                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 935     /**                                                                                                  </span>
<span class="-4485876183654335246" onmouseenter="enter('-4485876183654335246');" onmouseout="out('-4485876183654335246');" style=""> 936      * Add an item to the database in a specified container. Sets the container, screen, cellX and       </span>
<span class="5014383815638293688" onmouseenter="enter('5014383815638293688');" onmouseout="out('5014383815638293688');" style=""> 937      * cellY fields of the item. Also assigns an ID to the item.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 938      */                                                                                                  </span>
<span class="-3509553491915540136" onmouseenter="enter('-3509553491915540136');" onmouseout="out('-3509553491915540136');" style=""><abbr title=" 939     static void addItemToDatabase(Context context, final ItemInfo item, final long container, final long screenId, final int cellX, final int cellY, final boolean notify) {"> 939     static void addItemToDatabase(Context context, final ItemInfo item, final long container, final long </abbr></span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 940         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 941         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 942         item.cellY = cellY;                                                                              </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 943         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 944         // in the hotseat                                                                                </span>
<span class="4606570855627801176" onmouseenter="enter('4606570855627801176');" onmouseout="out('4606570855627801176');" style=""><abbr title=" 945         if (((context instanceof Launcher) &amp;&amp; (screenId &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {"> 945         if (((context instanceof Launcher) &amp;&amp; (screenId &lt; 0)) &amp;&amp; (container == LauncherSettings.Favorites</abbr></span>
<span class="2559774459784632549" onmouseenter="enter('2559774459784632549');" onmouseout="out('2559774459784632549');" style=""> 946             item.screenId = ((Launcher) (context)).getHotseat().getOrderInHotseat(cellX, cellY);         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 947         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 948             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949         }                                                                                                </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 950         final ContentValues values = new ContentValues();                                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 951         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style=""> 952         item.onAddToDatabase(context, values);                                                           </span>
<span class="-1899316649519192705" onmouseenter="enter('-1899316649519192705');" onmouseout="out('-1899316649519192705');" style=""> 953         item.id = LauncherAppState.getLauncherProvider().generateNewItemId();                            </span>
<span class="-154850703316330893" onmouseenter="enter('-154850703316330893');" onmouseout="out('-154850703316330893');" style=""> 954         values.put(LauncherSettings.Favorites._ID, item.id);                                             </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 955         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 956         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 957         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 958             public void run() {                                                                          </span>
<span class="-1627636974343001552" onmouseenter="enter('-1627636974343001552');" onmouseout="out('-1627636974343001552');" style=""><abbr title=" 959                 cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI : LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values);"> 959                 cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI : LauncherSettings.Favorites.CO</abbr></span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 960                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 961                 synchronized(sBgLock) {                                                                  </span>
<span class="-4593486021211754382" onmouseenter="enter('-4593486021211754382');" onmouseout="out('-4593486021211754382');" style=""> 962                     checkItemInfoLocked(item.id, item, stackTrace);                                      </span>
<span class="-1016681302040734126" onmouseenter="enter('-1016681302040734126');" onmouseout="out('-1016681302040734126');" style=""> 963                     sBgItemsIdMap.put(item.id, item);                                                    </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style=""> 964                     switch (item.itemType) {                                                             </span>
<span class="-8875317450551009164" onmouseenter="enter('-8875317450551009164');" onmouseout="out('-8875317450551009164');" style=""> 965                         case LauncherSettings.Favorites.ITEM_TYPE_FOLDER :                               </span>
<span class="8205841234449084625" onmouseenter="enter('8205841234449084625');" onmouseout="out('8205841234449084625');" style=""> 966                             sBgFolders.put(item.id, ((FolderInfo) (item)));                              </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style=""> 967                             // Fall through                                                              </span>
<span class="2051083265990103278" onmouseenter="enter('2051083265990103278');" onmouseout="out('2051083265990103278');" style=""> 968                         case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION :                          </span>
<span class="7475610212167087433" onmouseenter="enter('7475610212167087433');" onmouseout="out('7475610212167087433');" style=""> 969                         case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT :                             </span>
<span class="1575891278585417897" onmouseenter="enter('1575891278585417897');" onmouseout="out('1575891278585417897');" style=""><abbr title=" 970                             if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) || (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {"> 970                             if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) || (item</abbr></span>
<span class="-8146326631995897363" onmouseenter="enter('-8146326631995897363');" onmouseout="out('-8146326631995897363');" style=""> 971                                 sBgWorkspaceItems.add(item);                                             </span>
<span class="1386085614158877352" onmouseenter="enter('1386085614158877352');" onmouseout="out('1386085614158877352');" style=""> 972                             } else if (!sBgFolders.containsKey(item.container)) {                        </span>
<span class="-54073947043614801" onmouseenter="enter('-54073947043614801');" onmouseout="out('-54073947043614801');" style=""> 973                                 // Adding an item to a folder that doesn&#x27;t exist.                        </span>
<span class="8612747470846713679" onmouseenter="enter('8612747470846713679');" onmouseout="out('8612747470846713679');" style=""><abbr title=" 974                                 String msg = ((&quot;adding item: &quot; + item) + &quot; to a folder that &quot;) + &quot; doesn&#x27;t exist&quot;;"> 974                                 String msg = ((&quot;adding item: &quot; + item) + &quot; to a folder that &quot;) + &quot; doesn&#x27;</abbr></span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 975                                 Log.e(TAG, msg);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 976                             }                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 977                             break;                                                                       </span>
<span class="-572090049804539709" onmouseenter="enter('-572090049804539709');" onmouseout="out('-572090049804539709');" style=""> 978                         case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET :                            </span>
<span class="2548288440156953289" onmouseenter="enter('2548288440156953289');" onmouseout="out('2548288440156953289');" style=""> 979                             sBgAppWidgets.add(((LauncherAppWidgetInfo) (item)));                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 980                             break;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 982                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 983             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 984         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 985         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 986     }                                                                                                    </span>
<span  style=""> 987                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 988     /**                                                                                                  </span>
<span class="7476806510728309142" onmouseenter="enter('7476806510728309142');" onmouseout="out('7476806510728309142');" style=""> 989      * Creates a new unique child id, for a given cell span across all layouts.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 990      */                                                                                                  </span>
<span class="6041396781761029986" onmouseenter="enter('6041396781761029986');" onmouseout="out('6041396781761029986');" style=""> 991     static int getCellLayoutChildId(                                                                     </span>
<span class="-7149445532835734900" onmouseenter="enter('-7149445532835734900');" onmouseout="out('-7149445532835734900');" style=""> 992             long container, long screen, int localCellX, int localCellY, int spanX, int spanY) {         </span>
<span class="513362613558309253" onmouseenter="enter('513362613558309253');" onmouseout="out('513362613558309253');" style=""> 993         return (((int) container &amp; 0xFF) &lt;&lt; 24)                                                          </span>
<span class="-7388843269158644047" onmouseenter="enter('-7388843269158644047');" onmouseout="out('-7388843269158644047');" style=""> 994                 | ((int) screen &amp; 0xFF) &lt;&lt; 16 | (localCellX &amp; 0xFF) &lt;&lt; 8 | (localCellY &amp; 0xFF);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995     }                                                                                                    </span>
<span  style=""> 996                                                                                                          </span>
<span class="1496485219044453497" onmouseenter="enter('1496485219044453497');" onmouseout="out('1496485219044453497');" style=""><abbr title=" 997     private static ArrayList&lt;ItemInfo&gt; getItemsByPackageName(final String pn, final UserHandleCompat user) {"> 997     private static ArrayList&lt;ItemInfo&gt; getItemsByPackageName(final String pn, final UserHandleCompat user</abbr></span>
<span class="-3373937432913193160" onmouseenter="enter('-3373937432913193160');" onmouseout="out('-3373937432913193160');" style=""> 998         ItemInfoFilter filter = new ItemInfoFilter() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 999             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">1000             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="-3698999064980760147" onmouseenter="enter('-3698999064980760147');" onmouseout="out('-3698999064980760147');" style="">1001                 return cn.getPackageName().equals(pn) &amp;&amp; info.user.equals(user);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1002             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1003         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">1004         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005     }                                                                                                    </span>
<span  style="">1006                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1007     /**                                                                                                  </span>
<span class="2342361889363691922" onmouseenter="enter('2342361889363691922');" onmouseout="out('2342361889363691922');" style="">1008      * Removes all the items from the database corresponding to the specified package.                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1009      */                                                                                                  </span>
<span class="-1365852322569755242" onmouseenter="enter('-1365852322569755242');" onmouseout="out('-1365852322569755242');" style=""><abbr title="1010     static void deletePackageFromDatabase(Context context, final String pn, final UserHandleCompat user) {">1010     static void deletePackageFromDatabase(Context context, final String pn, final UserHandleCompat user) </abbr></span>
<span class="-3124051924336649718" onmouseenter="enter('-3124051924336649718');" onmouseout="out('-3124051924336649718');" style="">1011         deleteItemsFromDatabase(context, getItemsByPackageName(pn, user));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1012     }                                                                                                    </span>
<span  style="">1013                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1014     /**                                                                                                  </span>
<span class="-1037279788887787658" onmouseenter="enter('-1037279788887787658');" onmouseout="out('-1037279788887787658');" style="">1015      * Removes the specified item from the database                                                      </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1016      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1017      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1018      */                                                                                                  </span>
<span class="6689175154077652032" onmouseenter="enter('6689175154077652032');" onmouseout="out('6689175154077652032');" style="">1019     static void deleteItemFromDatabase(Context context, final ItemInfo item) {                           </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style="">1020         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="">1021         items.add(item);                                                                                 </span>
<span class="-1343420386438024026" onmouseenter="enter('-1343420386438024026');" onmouseout="out('-1343420386438024026');" style="">1022         deleteItemsFromDatabase(context, items);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1023     }                                                                                                    </span>
<span  style="">1024                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1025     /**                                                                                                  </span>
<span class="6785840277050217586" onmouseenter="enter('6785840277050217586');" onmouseout="out('6785840277050217586');" style="">1026      * Removes the specified items from the database                                                     </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1027      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1028      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1029      */                                                                                                  </span>
<span class="8840034600723804424" onmouseenter="enter('8840034600723804424');" onmouseout="out('8840034600723804424');" style="">1030     static void deleteItemsFromDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items) {              </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1031         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1032         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1033             public void run() {                                                                          </span>
<span class="6119320427209693879" onmouseenter="enter('6119320427209693879');" onmouseout="out('6119320427209693879');" style="">1034                 for (ItemInfo item : items) {                                                            </span>
<span class="-8969008621964178653" onmouseenter="enter('-8969008621964178653');" onmouseout="out('-8969008621964178653');" style="">1035                     final Uri uri = LauncherSettings.Favorites.getContentUri(item.id, false);            </span>
<span class="-3994993193884804986" onmouseenter="enter('-3994993193884804986');" onmouseout="out('-3994993193884804986');" style="">1036                     cr.delete(uri, null, null);                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1037                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1038                     synchronized(sBgLock) {                                                              </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1039                         switch (item.itemType) {                                                         </span>
<span class="-8875317450551009164" onmouseenter="enter('-8875317450551009164');" onmouseout="out('-8875317450551009164');" style="">1040                             case LauncherSettings.Favorites.ITEM_TYPE_FOLDER :                           </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="">1041                                 sBgFolders.remove(item.id);                                              </span>
<span class="-4290363400846595778" onmouseenter="enter('-4290363400846595778');" onmouseout="out('-4290363400846595778');" style="">1042                                 for (ItemInfo info : sBgItemsIdMap.values()) {                           </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="">1043                                     if (info.container == item.id) {                                     </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="">1044                                     // We are deleting a folder which still contains items that          </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="">1045                                     // think they are contained by that folder.                          </span>
<span class="9120409891375253770" onmouseenter="enter('9120409891375253770');" onmouseout="out('9120409891375253770');" style=""><abbr title="1046                                         String msg = ((((&quot;deleting a folder (&quot; + item) + &quot;) which still &quot;) + &quot;contains items (&quot;) + info) + &quot;)&quot;;">1046                                         String msg = ((((&quot;deleting a folder (&quot; + item) + &quot;) which still &quot;</abbr></span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1047                                         Log.e(TAG, msg);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1048                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1049                                 }                                                                        </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1050                                 sBgWorkspaceItems.remove(item);                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1051                                 break;                                                                   </span>
<span class="2051083265990103278" onmouseenter="enter('2051083265990103278');" onmouseout="out('2051083265990103278');" style="">1052                             case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION :                      </span>
<span class="7475610212167087433" onmouseenter="enter('7475610212167087433');" onmouseout="out('7475610212167087433');" style="">1053                             case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT :                         </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1054                                 sBgWorkspaceItems.remove(item);                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1055                                 break;                                                                   </span>
<span class="-572090049804539709" onmouseenter="enter('-572090049804539709');" onmouseout="out('-572090049804539709');" style="">1056                             case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET :                        </span>
<span class="3100137958952392900" onmouseenter="enter('3100137958952392900');" onmouseout="out('3100137958952392900');" style="">1057                                 sBgAppWidgets.remove(((LauncherAppWidgetInfo) (item)));                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1058                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1059                         }                                                                                </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="">1060                         sBgItemsIdMap.remove(item.id);                                                   </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="">1061                         sBgDbIconCache.remove(item);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1065         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1066         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1067     }                                                                                                    </span>
<span  style="">1068                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1069     /**                                                                                                  </span>
<span class="-7001721478473539684" onmouseenter="enter('-7001721478473539684');" onmouseout="out('-7001721478473539684');" style="">1070      * Update the order of the workspace screens in the database. The array list contains                </span>
<span class="-8575814248656839337" onmouseenter="enter('-8575814248656839337');" onmouseout="out('-8575814248656839337');" style="">1071      * a list of screen ids in the order that they should appear.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1072      */                                                                                                  </span>
<span class="8428215756529453230" onmouseenter="enter('8428215756529453230');" onmouseout="out('8428215756529453230');" style="">1073     void updateWorkspaceScreenOrder(Context context, final ArrayList&lt;Long&gt; screens) {                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1074         // Log to disk                                                                                   </span>
<span class="2597844157040813179" onmouseenter="enter('2597844157040813179');" onmouseout="out('2597844157040813179');" style="">1075         Launcher.addDumpLog(TAG, &quot;11683562 - updateWorkspaceScreenOrder()&quot;, true);                       </span>
<span class="-6712172470308057727" onmouseenter="enter('-6712172470308057727');" onmouseout="out('-6712172470308057727');" style="">1076         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, screens), true);        </span>
<span class="468782492563171594" onmouseenter="enter('468782492563171594');" onmouseout="out('468782492563171594');" style="">1077         final ArrayList&lt;Long&gt; screensCopy = new ArrayList&lt;Long&gt;(screens);                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1078         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="543518355232884435" onmouseenter="enter('543518355232884435');" onmouseout="out('543518355232884435');" style="">1079         final Uri uri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                   </span>
<span class="4254834681163937802" onmouseenter="enter('4254834681163937802');" onmouseout="out('4254834681163937802');" style="">1080         // Remove any negative screen ids -- these aren&#x27;t persisted                                      </span>
<span class="2152325044441302341" onmouseenter="enter('2152325044441302341');" onmouseout="out('2152325044441302341');" style="">1081         Iterator&lt;Long&gt; iter = screensCopy.iterator();                                                    </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">1082         while (iter.hasNext()) {                                                                         </span>
<span class="-927390677227055343" onmouseenter="enter('-927390677227055343');" onmouseout="out('-927390677227055343');" style="">1083             long id = iter.next();                                                                       </span>
<span class="-1178150068928662840" onmouseenter="enter('-1178150068928662840');" onmouseout="out('-1178150068928662840');" style="">1084             if (id &lt; 0) {                                                                                </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">1085                 iter.remove();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1086             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087         }                                                                                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1088         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1089             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1090             public void run() {                                                                          </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style="">1091                 ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();     </span>
<span class="-6225505341206658348" onmouseenter="enter('-6225505341206658348');" onmouseout="out('-6225505341206658348');" style="">1092                 // Clear the table                                                                       </span>
<span class="-429946239562688464" onmouseenter="enter('-429946239562688464');" onmouseout="out('-429946239562688464');" style="">1093                 ops.add(ContentProviderOperation.newDelete(uri).build());                                </span>
<span class="-2619892188160552062" onmouseenter="enter('-2619892188160552062');" onmouseout="out('-2619892188160552062');" style="">1094                 int count = screensCopy.size();                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1095                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1096                     ContentValues v = new ContentValues();                                               </span>
<span class="-1711185173807510695" onmouseenter="enter('-1711185173807510695');" onmouseout="out('-1711185173807510695');" style="">1097                     long screenId = screensCopy.get(i);                                                  </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1098                     v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                              </span>
<span class="4685968830084375092" onmouseenter="enter('4685968830084375092');" onmouseout="out('4685968830084375092');" style="">1099                     v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                             </span>
<span class="2820655584610684032" onmouseenter="enter('2820655584610684032');" onmouseout="out('2820655584610684032');" style="">1100                     ops.add(ContentProviderOperation.newInsert(uri).withValues(v).build());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1101                 }                                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1102                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style="">1103                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="-2749309157466987679" onmouseenter="enter('-2749309157466987679');" onmouseout="out('-2749309157466987679');" style="">1104                 } catch (java.lang.Exception ex) {                                                       </span>
<span class="-9047539165825913138" onmouseenter="enter('-9047539165825913138');" onmouseout="out('-9047539165825913138');" style="">1105                     throw new RuntimeException(ex);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1106                 }                                                                                        </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1107                 synchronized(sBgLock) {                                                                  </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1108                     sBgWorkspaceScreens.clear();                                                         </span>
<span class="-2640283764679238318" onmouseenter="enter('-2640283764679238318');" onmouseout="out('-2640283764679238318');" style="">1109                     sBgWorkspaceScreens.addAll(screensCopy);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1110                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1111             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1112         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1113         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114     }                                                                                                    </span>
<span  style="">1115                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1116     /**                                                                                                  </span>
<span class="-6789515923938750727" onmouseenter="enter('-6789515923938750727');" onmouseout="out('-6789515923938750727');" style="">1117      * Remove the contents of the specified folder from the database                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1118      */                                                                                                  </span>
<span class="686021856205334545" onmouseenter="enter('686021856205334545');" onmouseout="out('686021856205334545');" style="">1119     static void deleteFolderContentsFromDatabase(Context context, final FolderInfo info) {               </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1120         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1121         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1122             public void run() {                                                                          </span>
<span class="-8793927488200240422" onmouseenter="enter('-8793927488200240422');" onmouseout="out('-8793927488200240422');" style="">1123                 cr.delete(LauncherSettings.Favorites.getContentUri(info.id, false), null, null);         </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1124                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1125                 synchronized(sBgLock) {                                                                  </span>
<span class="-4714602177116521128" onmouseenter="enter('-4714602177116521128');" onmouseout="out('-4714602177116521128');" style="">1126                     sBgItemsIdMap.remove(info.id);                                                       </span>
<span class="-3189879738488687685" onmouseenter="enter('-3189879738488687685');" onmouseout="out('-3189879738488687685');" style="">1127                     sBgFolders.remove(info.id);                                                          </span>
<span class="5895316081502731153" onmouseenter="enter('5895316081502731153');" onmouseout="out('5895316081502731153');" style="">1128                     sBgDbIconCache.remove(info);                                                         </span>
<span class="-6074846806723656328" onmouseenter="enter('-6074846806723656328');" onmouseout="out('-6074846806723656328');" style="">1129                     sBgWorkspaceItems.remove(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130                 }                                                                                        </span>
<span class="8523949193675639350" onmouseenter="enter('8523949193675639350');" onmouseout="out('8523949193675639350');" style=""><abbr title="1131                 cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, (LauncherSettings.Favorites.CONTAINER + &quot;=&quot;) + info.id, null);">1131                 cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, (LauncherSettings.Favor</abbr></span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1132                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1133                 synchronized(sBgLock) {                                                                  </span>
<span class="7541292827914562010" onmouseenter="enter('7541292827914562010');" onmouseout="out('7541292827914562010');" style="">1134                     for (ItemInfo childInfo : info.contents) {                                           </span>
<span class="-2237983399964272530" onmouseenter="enter('-2237983399964272530');" onmouseout="out('-2237983399964272530');" style="">1135                         sBgItemsIdMap.remove(childInfo.id);                                              </span>
<span class="7662249246062224172" onmouseenter="enter('7662249246062224172');" onmouseout="out('7662249246062224172');" style="">1136                         sBgDbIconCache.remove(childInfo);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1137                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1139             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1140         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1141         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1142     }                                                                                                    </span>
<span  style="">1143                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1144     /**                                                                                                  </span>
<span class="8050600461131576642" onmouseenter="enter('8050600461131576642');" onmouseout="out('8050600461131576642');" style="">1145      * Set this as the current Launcher activity object for the loader.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1146      */                                                                                                  </span>
<span class="8980870975348708436" onmouseenter="enter('8980870975348708436');" onmouseout="out('8980870975348708436');" style="">1147     public void initialize(Callbacks callbacks) {                                                        </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1148         synchronized (mLock) {                                                                           </span>
<span class="-641895236165954122" onmouseenter="enter('-641895236165954122');" onmouseout="out('-641895236165954122');" style="">1149             mCallbacks = new WeakReference&lt;Callbacks&gt;(callbacks);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1150         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1151     }                                                                                                    </span>
<span  style="">1152                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1153     @Override                                                                                            </span>
<span class="-2337875492294712218" onmouseenter="enter('-2337875492294712218');" onmouseout="out('-2337875492294712218');" style="">1154     public void onPackageChanged(String packageName, UserHandleCompat user) {                            </span>
<span class="4778571821882595512" onmouseenter="enter('4778571821882595512');" onmouseout="out('4778571821882595512');" style="">1155         int op = PackageUpdatedTask.OP_UPDATE;                                                           </span>
<span class="-2089135724624537865" onmouseenter="enter('-2089135724624537865');" onmouseout="out('-2089135724624537865');" style="">1156         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[]{ packageName }, user));            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1157     }                                                                                                    </span>
<span  style="">1158                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1159     @Override                                                                                            </span>
<span class="-927554855118637848" onmouseenter="enter('-927554855118637848');" onmouseout="out('-927554855118637848');" style="">1160     public void onPackageRemoved(String packageName, UserHandleCompat user) {                            </span>
<span class="-8281859875413044704" onmouseenter="enter('-8281859875413044704');" onmouseout="out('-8281859875413044704');" style="">1161         int op = PackageUpdatedTask.OP_REMOVE;                                                           </span>
<span class="-2089135724624537865" onmouseenter="enter('-2089135724624537865');" onmouseout="out('-2089135724624537865');" style="">1162         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[]{ packageName }, user));            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1163     }                                                                                                    </span>
<span  style="">1164                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1165     @Override                                                                                            </span>
<span class="105632639707841197" onmouseenter="enter('105632639707841197');" onmouseout="out('105632639707841197');" style="">1166     public void onPackageAdded(String packageName, UserHandleCompat user) {                              </span>
<span class="4828685442078193889" onmouseenter="enter('4828685442078193889');" onmouseout="out('4828685442078193889');" style="">1167         int op = PackageUpdatedTask.OP_ADD;                                                              </span>
<span class="-2089135724624537865" onmouseenter="enter('-2089135724624537865');" onmouseout="out('-2089135724624537865');" style="">1168         enqueuePackageUpdated(new PackageUpdatedTask(op, new String[]{ packageName }, user));            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1169     }                                                                                                    </span>
<span  style="">1170                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1171     @Override                                                                                            </span>
<span class="6641549544143459181" onmouseenter="enter('6641549544143459181');" onmouseout="out('6641549544143459181');" style="">1172     public void onPackagesAvailable(String[] packageNames, UserHandleCompat user, boolean replacing) {   </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1173         if (!replacing) {                                                                                </span>
<span class="-3414324808928708436" onmouseenter="enter('-3414324808928708436');" onmouseout="out('-3414324808928708436');" style="">1174             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packageNames, user));</span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="">1175             if (mAppsCanBeOnRemoveableStorage) {                                                         </span>
<span class="-2089495423111974436" onmouseenter="enter('-2089495423111974436');" onmouseout="out('-2089495423111974436');" style="">1176                 // Only rebind if we support removable storage. It catches the                           </span>
<span class="3966636659656955596" onmouseenter="enter('3966636659656955596');" onmouseout="out('3966636659656955596');" style="">1177                 // case where                                                                            </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="">1178                 // apps on the external sd card need to be reloaded                                      </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1179                 startLoaderFromBackground();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1181         } else {                                                                                         </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="">1182             // If we are replacing then just update the packages in the list                             </span>
<span class="3865058334503513498" onmouseenter="enter('3865058334503513498');" onmouseout="out('3865058334503513498');" style=""><abbr title="1183             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE, packageNames, user));">1183             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE, packageNames, user</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1184         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185     }                                                                                                    </span>
<span  style="">1186                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1187     @Override                                                                                            </span>
<span class="-1680422231125387704" onmouseenter="enter('-1680422231125387704');" onmouseout="out('-1680422231125387704');" style="">1188     public void onPackagesUnavailable(String[] packageNames, UserHandleCompat user, boolean replacing) { </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1189         if (!replacing) {                                                                                </span>
<span class="871416370003658" onmouseenter="enter('871416370003658');" onmouseout="out('871416370003658');" style=""><abbr title="1190             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UNAVAILABLE, packageNames, user));">1190             enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UNAVAILABLE, packageNames,</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1192     }                                                                                                    </span>
<span  style="">1193                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1194     /**                                                                                                  </span>
<span class="2369304932228112448" onmouseenter="enter('2369304932228112448');" onmouseout="out('2369304932228112448');" style="">1195      * Call from the handler for ACTION_PACKAGE_ADDED, ACTION_PACKAGE_REMOVED and                        </span>
<span class="-8845819122914862467" onmouseenter="enter('-8845819122914862467');" onmouseout="out('-8845819122914862467');" style="">1196      * ACTION_PACKAGE_CHANGED.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1197      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1198     @Override                                                                                            </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">1199     public void onReceive(Context context, Intent intent) {                                              </span>
<span class="-6006203575876886250" onmouseenter="enter('-6006203575876886250');" onmouseout="out('-6006203575876886250');" style="">1200         if (DEBUG_RECEIVER) {                                                                            </span>
<span class="-112054979152437749" onmouseenter="enter('-112054979152437749');" onmouseout="out('-112054979152437749');" style="">1201             Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202         }                                                                                                </span>
<span class="-4990819661547905021" onmouseenter="enter('-4990819661547905021');" onmouseout="out('-4990819661547905021');" style="">1203         final String action = intent.getAction();                                                        </span>
<span class="2827193781436621695" onmouseenter="enter('2827193781436621695');" onmouseout="out('2827193781436621695');" style="">1204         if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                               </span>
<span class="-6283043286710203920" onmouseenter="enter('-6283043286710203920');" onmouseout="out('-6283043286710203920');" style="">1205             // If we have changed locale we need to clear out the labels in all apps/workspace.          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1206             forceReload();                                                                               </span>
<span class="4348516547288755383" onmouseenter="enter('4348516547288755383');" onmouseout="out('4348516547288755383');" style="">1207         } else if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {                                 </span>
<span class="6164116257081582847" onmouseenter="enter('6164116257081582847');" onmouseout="out('6164116257081582847');" style="">1208             // Check if configuration change was an mcc/mnc change which would affect app resources      </span>
<span class="-1334400353911346867" onmouseenter="enter('-1334400353911346867');" onmouseout="out('-1334400353911346867');" style="">1209             // and we would need to clear out the labels in all apps/workspace. Same handling as         </span>
<span class="-5650891854452971889" onmouseenter="enter('-5650891854452971889');" onmouseout="out('-5650891854452971889');" style="">1210             // above for ACTION_LOCALE_CHANGED                                                           </span>
<span class="5411318685984925146" onmouseenter="enter('5411318685984925146');" onmouseout="out('5411318685984925146');" style="">1211             Configuration currentConfig = context.getResources().getConfiguration();                     </span>
<span class="-5822569774152959183" onmouseenter="enter('-5822569774152959183');" onmouseout="out('-5822569774152959183');" style="">1212             if (mPreviousConfigMcc != currentConfig.mcc) {                                               </span>
<span class="417401235100173780" onmouseenter="enter('417401235100173780');" onmouseout="out('417401235100173780');" style=""><abbr title="1213                 Log.d(TAG, ((&quot;Reload apps on config change. curr_mcc:&quot; + currentConfig.mcc) + &quot; prevmcc:&quot;) + mPreviousConfigMcc);">1213                 Log.d(TAG, ((&quot;Reload apps on config change. curr_mcc:&quot; + currentConfig.mcc) + &quot; prevmcc:&quot;</abbr></span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1214                 forceReload();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1215             }                                                                                            </span>
<span class="-3935663267934034322" onmouseenter="enter('-3935663267934034322');" onmouseout="out('-3935663267934034322');" style="">1216             // Update previousConfig                                                                     </span>
<span class="3962364908604221868" onmouseenter="enter('3962364908604221868');" onmouseout="out('3962364908604221868');" style="">1217             mPreviousConfigMcc = currentConfig.mcc;                                                      </span>
<span class="3668111890142926228" onmouseenter="enter('3668111890142926228');" onmouseout="out('3668111890142926228');" style=""><abbr title="1218         } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) || SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {">1218         } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) || SearchManager.IN</abbr></span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1219             if (mCallbacks != null) {                                                                    </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1220                 Callbacks callbacks = mCallbacks.get();                                                  </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1221                 if (callbacks != null) {                                                                 </span>
<span class="-1936765454200843013" onmouseenter="enter('-1936765454200843013');" onmouseout="out('-1936765454200843013');" style="">1222                     callbacks.bindSearchablesChanged();                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1223                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1224             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1225         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1226     }                                                                                                    </span>
<span  style="">1227                                                                                                          </span>
<span class="-17594942140375151" onmouseenter="enter('-17594942140375151');" onmouseout="out('-17594942140375151');" style="">1228     void forceReload() {                                                                                 </span>
<span class="778547048286075437" onmouseenter="enter('778547048286075437');" onmouseout="out('778547048286075437');" style="">1229         resetLoadedState(true, true);                                                                    </span>
<span class="4237924176832789189" onmouseenter="enter('4237924176832789189');" onmouseout="out('4237924176832789189');" style="">1230         // Do this here because if the launcher activity is running it will be restarted.                </span>
<span class="-3504249388484505584" onmouseenter="enter('-3504249388484505584');" onmouseout="out('-3504249388484505584');" style="">1231         // If it&#x27;s not running startLoaderFromBackground will merely tell it that it needs               </span>
<span class="5637742608155670431" onmouseenter="enter('5637742608155670431');" onmouseout="out('5637742608155670431');" style="">1232         // to reload.                                                                                    </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1233         startLoaderFromBackground();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234     }                                                                                                    </span>
<span  style="">1235                                                                                                          </span>
<span class="-4293128577464776735" onmouseenter="enter('-4293128577464776735');" onmouseout="out('-4293128577464776735');" style="">1236     public void resetLoadedState(boolean resetAllAppsLoaded, boolean resetWorkspaceLoaded) {             </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1237         synchronized (mLock) {                                                                           </span>
<span class="-2609781935860166694" onmouseenter="enter('-2609781935860166694');" onmouseout="out('-2609781935860166694');" style="">1238             // Stop any existing loaders first, so they don&#x27;t set mAllAppsLoaded or                      </span>
<span class="1916843454374538934" onmouseenter="enter('1916843454374538934');" onmouseout="out('1916843454374538934');" style="">1239             // mWorkspaceLoaded to true later                                                            </span>
<span class="-1528282254597569426" onmouseenter="enter('-1528282254597569426');" onmouseout="out('-1528282254597569426');" style="">1240             stopLoaderLocked();                                                                          </span>
<span class="-4094161784675318974" onmouseenter="enter('-4094161784675318974');" onmouseout="out('-4094161784675318974');" style="">1241             if (resetAllAppsLoaded) mAllAppsLoaded = false;                                              </span>
<span class="-3582216479388479825" onmouseenter="enter('-3582216479388479825');" onmouseout="out('-3582216479388479825');" style="">1242             if (resetWorkspaceLoaded) mWorkspaceLoaded = false;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1243         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1244     }                                                                                                    </span>
<span  style="">1245                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1246     /**                                                                                                  </span>
<span class="-2117548427273174966" onmouseenter="enter('-2117548427273174966');" onmouseout="out('-2117548427273174966');" style="">1247      * When the launcher is in the background, it&#x27;s possible for it to miss paired                       </span>
<span class="9045642034745197537" onmouseenter="enter('9045642034745197537');" onmouseout="out('9045642034745197537');" style="">1248      * configuration changes.  So whenever we trigger the loader from the background                     </span>
<span class="3717077838570548717" onmouseenter="enter('3717077838570548717');" onmouseout="out('3717077838570548717');" style="">1249      * tell the launcher that it needs to re-run the loader when it comes back instead                   </span>
<span class="8619803709595782118" onmouseenter="enter('8619803709595782118');" onmouseout="out('8619803709595782118');" style="">1250      * of doing it now.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1251      */                                                                                                  </span>
<span class="2053805597450117019" onmouseenter="enter('2053805597450117019');" onmouseout="out('2053805597450117019');" style="">1252     public void startLoaderFromBackground() {                                                            </span>
<span class="-3760886775206602162" onmouseenter="enter('-3760886775206602162');" onmouseout="out('-3760886775206602162');" style="">1253         boolean runLoader = false;                                                                       </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1254         if (mCallbacks != null) {                                                                        </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1255             Callbacks callbacks = mCallbacks.get();                                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1256             if (callbacks != null) {                                                                     </span>
<span class="-8461765931128288918" onmouseenter="enter('-8461765931128288918');" onmouseout="out('-8461765931128288918');" style="">1257                 // Only actually run the loader if they&#x27;re not paused.                                   </span>
<span class="-462943306960371545" onmouseenter="enter('-462943306960371545');" onmouseout="out('-462943306960371545');" style="">1258                 if (!callbacks.setLoadOnResume()) {                                                      </span>
<span class="-8889848208331327581" onmouseenter="enter('-8889848208331327581');" onmouseout="out('-8889848208331327581');" style="">1259                     runLoader = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1260                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1261             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262         }                                                                                                </span>
<span class="-2622291522100283788" onmouseenter="enter('-2622291522100283788');" onmouseout="out('-2622291522100283788');" style="">1263         if (runLoader) {                                                                                 </span>
<span class="-8998147482804817647" onmouseenter="enter('-8998147482804817647');" onmouseout="out('-8998147482804817647');" style="">1264             startLoader(false, PagedView.INVALID_RESTORE_PAGE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1266     }                                                                                                    </span>
<span  style="">1267                                                                                                          </span>
<span class="5010903034251856801" onmouseenter="enter('5010903034251856801');" onmouseout="out('5010903034251856801');" style="">1268     // If there is already a loader task running, tell it to stop.                                       </span>
<span class="796557558969242789" onmouseenter="enter('796557558969242789');" onmouseout="out('796557558969242789');" style="">1269     // returns true if isLaunching() was true on the old task                                            </span>
<span class="-4581932122990216089" onmouseenter="enter('-4581932122990216089');" onmouseout="out('-4581932122990216089');" style="">1270     private boolean stopLoaderLocked() {                                                                 </span>
<span class="-998934784399408070" onmouseenter="enter('-998934784399408070');" onmouseout="out('-998934784399408070');" style="">1271         boolean isLaunching = false;                                                                     </span>
<span class="-7986438653599299764" onmouseenter="enter('-7986438653599299764');" onmouseout="out('-7986438653599299764');" style="">1272         LoaderTask oldTask = mLoaderTask;                                                                </span>
<span class="-2859449282457612659" onmouseenter="enter('-2859449282457612659');" onmouseout="out('-2859449282457612659');" style="">1273         if (oldTask != null) {                                                                           </span>
<span class="5507271139955657849" onmouseenter="enter('5507271139955657849');" onmouseout="out('5507271139955657849');" style="">1274             if (oldTask.isLaunching()) {                                                                 </span>
<span class="-2542349725897719409" onmouseenter="enter('-2542349725897719409');" onmouseout="out('-2542349725897719409');" style="">1275                 isLaunching = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1276             }                                                                                            </span>
<span class="-1151918806087352732" onmouseenter="enter('-1151918806087352732');" onmouseout="out('-1151918806087352732');" style="">1277             oldTask.stopLocked();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278         }                                                                                                </span>
<span class="353443281501806148" onmouseenter="enter('353443281501806148');" onmouseout="out('353443281501806148');" style="">1279         return isLaunching;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1280     }                                                                                                    </span>
<span  style="">1281                                                                                                          </span>
<span class="-650602055294598310" onmouseenter="enter('-650602055294598310');" onmouseout="out('-650602055294598310');" style="">1282     public boolean isCurrentCallbacks(Callbacks callbacks) {                                             </span>
<span class="-2678194210930296625" onmouseenter="enter('-2678194210930296625');" onmouseout="out('-2678194210930296625');" style="">1283         return (mCallbacks != null &amp;&amp; mCallbacks.get() == callbacks);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1284     }                                                                                                    </span>
<span  style="">1285                                                                                                          </span>
<span class="3837278165301095000" onmouseenter="enter('3837278165301095000');" onmouseout="out('3837278165301095000');" style="">1286     public void startLoader(boolean isLaunching, int synchronousBindPage) {                              </span>
<span class="-5265370469502082000" onmouseenter="enter('-5265370469502082000');" onmouseout="out('-5265370469502082000');" style="">1287         startLoader(isLaunching, synchronousBindPage, LOADER_FLAG_NONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1288     }                                                                                                    </span>
<span  style="">1289                                                                                                          </span>
<span class="4886983231320039031" onmouseenter="enter('4886983231320039031');" onmouseout="out('4886983231320039031');" style="">1290     public void startLoader(boolean isLaunching, int synchronousBindPage, int loadFlags) {               </span>
<span class="2105997185412004649" onmouseenter="enter('2105997185412004649');" onmouseout="out('2105997185412004649');" style="">1291         synchronized(mLock) {                                                                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1292             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-3508213546782417324" onmouseenter="enter('-3508213546782417324');" onmouseout="out('-3508213546782417324');" style="">1293                 Log.d(TAG, &quot;startLoader isLaunching=&quot; + isLaunching);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294             }                                                                                            </span>
<span class="6333826815871699731" onmouseenter="enter('6333826815871699731');" onmouseout="out('6333826815871699731');" style="">1295             // Clear any deferred bind-runnables from the synchronized load process                      </span>
<span class="-7033809362198181476" onmouseenter="enter('-7033809362198181476');" onmouseout="out('-7033809362198181476');" style="">1296             // We must do this before any loading/binding is scheduled below.                            </span>
<span class="140100708416316466" onmouseenter="enter('140100708416316466');" onmouseout="out('140100708416316466');" style="">1297             synchronized(mDeferredBindRunnables) {                                                       </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1298                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1299             }                                                                                            </span>
<span class="-2785438828901225561" onmouseenter="enter('-2785438828901225561');" onmouseout="out('-2785438828901225561');" style="">1300             // Don&#x27;t bother to start the thread if we know it&#x27;s not going to do anything                 </span>
<span class="-4122236186931415542" onmouseenter="enter('-4122236186931415542');" onmouseout="out('-4122236186931415542');" style="">1301             if ((mCallbacks != null) &amp;&amp; (mCallbacks.get() != null)) {                                    </span>
<span class="-5820527225743363271" onmouseenter="enter('-5820527225743363271');" onmouseout="out('-5820527225743363271');" style="">1302                 // If there is already one running, tell it to stop.                                     </span>
<span class="3990358955275755027" onmouseenter="enter('3990358955275755027');" onmouseout="out('3990358955275755027');" style="">1303                 // also, don&#x27;t downgrade isLaunching if we&#x27;re already running                            </span>
<span class="-6024742637751579231" onmouseenter="enter('-6024742637751579231');" onmouseout="out('-6024742637751579231');" style="">1304                 isLaunching = isLaunching || stopLoaderLocked();                                         </span>
<span class="7022676154060365524" onmouseenter="enter('7022676154060365524');" onmouseout="out('7022676154060365524');" style="">1305                 mLoaderTask = new LoaderTask(mApp.getContext(), isLaunching, loadFlags);                 </span>
<span class="5817874576538355838" onmouseenter="enter('5817874576538355838');" onmouseout="out('5817874576538355838');" style=""><abbr title="1306                 if (((synchronousBindPage != PagedView.INVALID_RESTORE_PAGE) &amp;&amp; mAllAppsLoaded) &amp;&amp; mWorkspaceLoaded) {">1306                 if (((synchronousBindPage != PagedView.INVALID_RESTORE_PAGE) &amp;&amp; mAllAppsLoaded) &amp;&amp; mWorks</abbr></span>
<span class="-8342371766149337044" onmouseenter="enter('-8342371766149337044');" onmouseout="out('-8342371766149337044');" style="">1307                     mLoaderTask.runBindSynchronousPage(synchronousBindPage);                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1308                 } else {                                                                                 </span>
<span class="-600387258114093875" onmouseenter="enter('-600387258114093875');" onmouseout="out('-600387258114093875');" style="">1309                     sWorkerThread.setPriority(Thread.NORM_PRIORITY);                                     </span>
<span class="7243935410050079045" onmouseenter="enter('7243935410050079045');" onmouseout="out('7243935410050079045');" style="">1310                     sWorker.post(mLoaderTask);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1311                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1312             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1313         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1314     }                                                                                                    </span>
<span  style="">1315                                                                                                          </span>
<span class="8791491145548048370" onmouseenter="enter('8791491145548048370');" onmouseout="out('8791491145548048370');" style="">1316     void bindRemainingSynchronousPages() {                                                               </span>
<span class="5033608739884582118" onmouseenter="enter('5033608739884582118');" onmouseout="out('5033608739884582118');" style="">1317         // Post the remaining side pages to be loaded                                                    </span>
<span class="-5332743236356375648" onmouseenter="enter('-5332743236356375648');" onmouseout="out('-5332743236356375648');" style="">1318         if (!mDeferredBindRunnables.isEmpty()) {                                                         </span>
<span class="3864855355327062414" onmouseenter="enter('3864855355327062414');" onmouseout="out('3864855355327062414');" style="">1319             Runnable[] deferredBindRunnables = null;                                                     </span>
<span class="140100708416316466" onmouseenter="enter('140100708416316466');" onmouseout="out('140100708416316466');" style="">1320             synchronized(mDeferredBindRunnables) {                                                       </span>
<span class="4169085160158510297" onmouseenter="enter('4169085160158510297');" onmouseout="out('4169085160158510297');" style=""><abbr title="1321                 deferredBindRunnables = mDeferredBindRunnables.toArray(new Runnable[mDeferredBindRunnables.size()]);">1321                 deferredBindRunnables = mDeferredBindRunnables.toArray(new Runnable[mDeferredBindRunnable</abbr></span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1322                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1323             }                                                                                            </span>
<span class="-4818994596267375040" onmouseenter="enter('-4818994596267375040');" onmouseout="out('-4818994596267375040');" style="">1324             for (final Runnable r : deferredBindRunnables) {                                             </span>
<span class="352794200584805787" onmouseenter="enter('352794200584805787');" onmouseout="out('352794200584805787');" style="">1325                 mHandler.post(r, MAIN_THREAD_BINDING_RUNNABLE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1326             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328     }                                                                                                    </span>
<span  style="">1329                                                                                                          </span>
<span class="2340632222115195329" onmouseenter="enter('2340632222115195329');" onmouseout="out('2340632222115195329');" style="">1330     public void stopLoader() {                                                                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1331         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1332             if (mLoaderTask != null) {                                                                   </span>
<span class="-3264656657741930991" onmouseenter="enter('-3264656657741930991');" onmouseout="out('-3264656657741930991');" style="">1333                 mLoaderTask.stopLocked();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1334             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1336     }                                                                                                    </span>
<span  style="">1337                                                                                                          </span>
<span class="-7250027300190670202" onmouseenter="enter('-7250027300190670202');" onmouseout="out('-7250027300190670202');" style="">1338     /** Loads the workspace screens db into a map of Rank -&gt; ScreenId */                                 </span>
<span class="122992606215727554" onmouseenter="enter('122992606215727554');" onmouseout="out('122992606215727554');" style="">1339     private static TreeMap&lt;Integer, Long&gt; loadWorkspaceScreensDb(Context context) {                      </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1340         final ContentResolver contentResolver = context.getContentResolver();                            </span>
<span class="-2220596623746218138" onmouseenter="enter('-2220596623746218138');" onmouseout="out('-2220596623746218138');" style="">1341         final Uri screensUri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                            </span>
<span class="6273592658286011909" onmouseenter="enter('6273592658286011909');" onmouseout="out('6273592658286011909');" style="">1342         final Cursor sc = contentResolver.query(screensUri, null, null, null, null);                     </span>
<span class="-750342796873513708" onmouseenter="enter('-750342796873513708');" onmouseout="out('-750342796873513708');" style="">1343         TreeMap&lt;Integer, Long&gt; orderedScreens = new TreeMap&lt;Integer, Long&gt;();                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1344         try {                                                                                            </span>
<span class="-1944149188601314132" onmouseenter="enter('-1944149188601314132');" onmouseout="out('-1944149188601314132');" style="">1345             final int idIndex = sc.getColumnIndexOrThrow(LauncherSettings.WorkspaceScreens._ID);         </span>
<span class="-3740375170696534436" onmouseenter="enter('-3740375170696534436');" onmouseout="out('-3740375170696534436');" style=""><abbr title="1346             final int rankIndex = sc.getColumnIndexOrThrow(LauncherSettings.WorkspaceScreens.SCREEN_RANK);">1346             final int rankIndex = sc.getColumnIndexOrThrow(LauncherSettings.WorkspaceScreens.SCREEN_RANK)</abbr></span>
<span class="204728523712198078" onmouseenter="enter('204728523712198078');" onmouseout="out('204728523712198078');" style="">1347             while (sc.moveToNext()) {                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1348                 try {                                                                                    </span>
<span class="-3927530459574574291" onmouseenter="enter('-3927530459574574291');" onmouseout="out('-3927530459574574291');" style="">1349                     long screenId = sc.getLong(idIndex);                                                 </span>
<span class="4944528408544996755" onmouseenter="enter('4944528408544996755');" onmouseout="out('4944528408544996755');" style="">1350                     int rank = sc.getInt(rankIndex);                                                     </span>
<span class="3308047316092947062" onmouseenter="enter('3308047316092947062');" onmouseout="out('3308047316092947062');" style="">1351                     orderedScreens.put(rank, screenId);                                                  </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">1352                 } catch (java.lang.Exception e) {                                                        </span>
<span class="-7912680121623740950" onmouseenter="enter('-7912680121623740950');" onmouseout="out('-7912680121623740950');" style=""><abbr title="1353                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e, true);">1353                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e,</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1354                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1355             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1356         } finally {                                                                                      </span>
<span class="8048076729460304726" onmouseenter="enter('8048076729460304726');" onmouseout="out('8048076729460304726');" style="">1357             sc.close();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1358         }                                                                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1359         // Log to disk                                                                                   </span>
<span class="395286336309272035" onmouseenter="enter('395286336309272035');" onmouseout="out('395286336309272035');" style="">1360         Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspaceScreensDb()&quot;, true);                           </span>
<span class="-2407231300641847603" onmouseenter="enter('-2407231300641847603');" onmouseout="out('-2407231300641847603');" style="">1361         ArrayList&lt;String&gt; orderedScreensPairs = new ArrayList&lt;String&gt;();                                 </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">1362         for (Integer i : orderedScreens.keySet()) {                                                      </span>
<span class="5683764182482910678" onmouseenter="enter('5683764182482910678');" onmouseout="out('5683764182482910678');" style="">1363             orderedScreensPairs.add((((&quot;{ &quot; + i) + &quot;: &quot;) + orderedScreens.get(i)) + &quot; }&quot;);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1364         }                                                                                                </span>
<span class="-4103578831555941807" onmouseenter="enter('-4103578831555941807');" onmouseout="out('-4103578831555941807');" style=""><abbr title="1365         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, orderedScreensPairs), true);">1365         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, orderedScreensPairs), tr</abbr></span>
<span class="1470292219769535286" onmouseenter="enter('1470292219769535286');" onmouseout="out('1470292219769535286');" style="">1366         return orderedScreens;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367     }                                                                                                    </span>
<span  style="">1368                                                                                                          </span>
<span class="3555732154070898598" onmouseenter="enter('3555732154070898598');" onmouseout="out('3555732154070898598');" style="">1369     public boolean isAllAppsLoaded() {                                                                   </span>
<span class="-4479372220598901856" onmouseenter="enter('-4479372220598901856');" onmouseout="out('-4479372220598901856');" style="">1370         return mAllAppsLoaded;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371     }                                                                                                    </span>
<span  style="">1372                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1373     boolean isLoadingWorkspace() {                                                                       </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1374         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1375             if (mLoaderTask != null) {                                                                   </span>
<span class="-8784543184221518678" onmouseenter="enter('-8784543184221518678');" onmouseout="out('-8784543184221518678');" style="">1376                 return mLoaderTask.isLoadingWorkspace();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1377             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1378         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1379         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1380     }                                                                                                    </span>
<span  style="">1381                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1382     /**                                                                                                  </span>
<span class="2155822975232422030" onmouseenter="enter('2155822975232422030');" onmouseout="out('2155822975232422030');" style="">1383      * Runnable for the thread that loads the contents of the launcher:                                  </span>
<span class="2245504796345070456" onmouseenter="enter('2245504796345070456');" onmouseout="out('2245504796345070456');" style="">1384      *   - workspace icons                                                                               </span>
<span class="3748531824399873232" onmouseenter="enter('3748531824399873232');" onmouseout="out('3748531824399873232');" style="">1385      *   - widgets                                                                                       </span>
<span class="-1174287823865228312" onmouseenter="enter('-1174287823865228312');" onmouseout="out('-1174287823865228312');" style="">1386      *   - all apps icons                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1387      */                                                                                                  </span>
<span class="5152324394883908677" onmouseenter="enter('5152324394883908677');" onmouseout="out('5152324394883908677');" style="">1388     private class LoaderTask implements Runnable {                                                       </span>
<span class="6683852815807951473" onmouseenter="enter('6683852815807951473');" onmouseout="out('6683852815807951473');" style="">1389         private Context mContext;                                                                        </span>
<span  style="">1390                                                                                                          </span>
<span class="-8892613002903674576" onmouseenter="enter('-8892613002903674576');" onmouseout="out('-8892613002903674576');" style="">1391         private boolean mIsLaunching;                                                                    </span>
<span  style="">1392                                                                                                          </span>
<span class="-8472062509666230595" onmouseenter="enter('-8472062509666230595');" onmouseout="out('-8472062509666230595');" style="">1393         private boolean mIsLoadingAndBindingWorkspace;                                                   </span>
<span  style="">1394                                                                                                          </span>
<span class="840925515877441947" onmouseenter="enter('840925515877441947');" onmouseout="out('840925515877441947');" style="">1395         private boolean mStopped;                                                                        </span>
<span  style="">1396                                                                                                          </span>
<span class="-1108993435799622018" onmouseenter="enter('-1108993435799622018');" onmouseout="out('-1108993435799622018');" style="">1397         private boolean mLoadAndBindStepFinished;                                                        </span>
<span  style="">1398                                                                                                          </span>
<span class="2080823019438326837" onmouseenter="enter('2080823019438326837');" onmouseout="out('2080823019438326837');" style="">1399         private int mFlags;                                                                              </span>
<span  style="">1400                                                                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">1401         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span  style="">1402                                                                                                          </span>
<span class="-3637406926963361525" onmouseenter="enter('-3637406926963361525');" onmouseout="out('-3637406926963361525');" style="">1403         LoaderTask(Context context, boolean isLaunching, int flags) {                                    </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style="">1404             mContext = context;                                                                          </span>
<span class="7512260519858493354" onmouseenter="enter('7512260519858493354');" onmouseout="out('7512260519858493354');" style="">1405             mIsLaunching = isLaunching;                                                                  </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">1406             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="6183718553459964087" onmouseenter="enter('6183718553459964087');" onmouseout="out('6183718553459964087');" style="">1407             mFlags = flags;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408         }                                                                                                </span>
<span  style="">1409                                                                                                          </span>
<span class="-3427713478562425776" onmouseenter="enter('-3427713478562425776');" onmouseout="out('-3427713478562425776');" style="">1410         boolean isLaunching() {                                                                          </span>
<span class="-4684239236966951132" onmouseenter="enter('-4684239236966951132');" onmouseout="out('-4684239236966951132');" style="">1411             return mIsLaunching;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412         }                                                                                                </span>
<span  style="">1413                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1414         boolean isLoadingWorkspace() {                                                                   </span>
<span class="-1565626489511429864" onmouseenter="enter('-1565626489511429864');" onmouseout="out('-1565626489511429864');" style="">1415             return mIsLoadingAndBindingWorkspace;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1416         }                                                                                                </span>
<span  style="">1417                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1418         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-4912644643880785787" onmouseenter="enter('-4912644643880785787');" onmouseout="out('-4912644643880785787');" style="">1419         private boolean loadAndBindWorkspace() {                                                         </span>
<span class="3221067006114111971" onmouseenter="enter('3221067006114111971');" onmouseout="out('3221067006114111971');" style="">1420             mIsLoadingAndBindingWorkspace = true;                                                        </span>
<span  style="">1421                                                                                                          </span>
<span class="1537270917172214589" onmouseenter="enter('1537270917172214589');" onmouseout="out('1537270917172214589');" style="">1422             // Load the workspace                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1423             if (DEBUG_LOADERS) {                                                                         </span>
<span class="8901273111544619292" onmouseenter="enter('8901273111544619292');" onmouseout="out('8901273111544619292');" style="">1424                 Log.d(TAG, &quot;loadAndBindWorkspace mWorkspaceLoaded=&quot; + mWorkspaceLoaded);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1425             }                                                                                            </span>
<span  style="">1426                                                                                                          </span>
<span class="-7050118912026035967" onmouseenter="enter('-7050118912026035967');" onmouseout="out('-7050118912026035967');" style="">1427             boolean isUpgradePath = false;                                                               </span>
<span class="-6627511839388696673" onmouseenter="enter('-6627511839388696673');" onmouseout="out('-6627511839388696673');" style="">1428             if (!mWorkspaceLoaded) {                                                                     </span>
<span class="-5751837054227838000" onmouseenter="enter('-5751837054227838000');" onmouseout="out('-5751837054227838000');" style="">1429                 isUpgradePath = loadWorkspace();                                                         </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1430                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1431                     if (mStopped) {                                                                      </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1432                         return isUpgradePath;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1433                     }                                                                                    </span>
<span class="3247008524984054391" onmouseenter="enter('3247008524984054391');" onmouseout="out('3247008524984054391');" style="">1434                     mWorkspaceLoaded = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1435                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1436             }                                                                                            </span>
<span  style="">1437                                                                                                          </span>
<span class="8161409494754485761" onmouseenter="enter('8161409494754485761');" onmouseout="out('8161409494754485761');" style="">1438             // Bind the workspace                                                                        </span>
<span class="7984749853310309686" onmouseenter="enter('7984749853310309686');" onmouseout="out('7984749853310309686');" style="">1439             bindWorkspace(-1, isUpgradePath);                                                            </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1440             return isUpgradePath;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1441         }                                                                                                </span>
<span  style="">1442                                                                                                          </span>
<span class="-1989226029052835978" onmouseenter="enter('-1989226029052835978');" onmouseout="out('-1989226029052835978');" style="">1443         private void waitForIdle() {                                                                     </span>
<span class="755597645611528735" onmouseenter="enter('755597645611528735');" onmouseout="out('755597645611528735');" style="">1444             // Wait until the either we&#x27;re stopped or the other threads are done.                        </span>
<span class="-8727414813590658044" onmouseenter="enter('-8727414813590658044');" onmouseout="out('-8727414813590658044');" style="">1445             // This way we don&#x27;t start loading all apps until the workspace has settled                  </span>
<span class="519327046885180501" onmouseenter="enter('519327046885180501');" onmouseout="out('519327046885180501');" style="">1446             // down.                                                                                     </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1447             synchronized (LoaderTask.this) {                                                             </span>
<span class="-83798755248439808" onmouseenter="enter('-83798755248439808');" onmouseout="out('-83798755248439808');" style="">1448                 final long workspaceWaitTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;           </span>
<span  style="">1449                                                                                                          </span>
<span class="-8997106023930440912" onmouseenter="enter('-8997106023930440912');" onmouseout="out('-8997106023930440912');" style="">1450                 mHandler.postIdle(new Runnable() {                                                       </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1451                         public void run() {                                                              </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1452                             synchronized (LoaderTask.this) {                                             </span>
<span class="-4593766760064909367" onmouseenter="enter('-4593766760064909367');" onmouseout="out('-4593766760064909367');" style="">1453                                 mLoadAndBindStepFinished = true;                                         </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1454                                 if (DEBUG_LOADERS) {                                                     </span>
<span class="-7140275656523627984" onmouseenter="enter('-7140275656523627984');" onmouseout="out('-7140275656523627984');" style="">1455                                     Log.d(TAG, &quot;done with previous binding step&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1456                                 }                                                                        </span>
<span class="8111819661104992685" onmouseenter="enter('8111819661104992685');" onmouseout="out('8111819661104992685');" style="">1457                                 LoaderTask.this.notify();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1458                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1459                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1460                     });                                                                                  </span>
<span  style="">1461                                                                                                          </span>
<span class="7673579852599691461" onmouseenter="enter('7673579852599691461');" onmouseout="out('7673579852599691461');" style="">1462                 while (!mStopped &amp;&amp; !mLoadAndBindStepFinished &amp;&amp; !mFlushingWorkerThread) {               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1463                     try {                                                                                </span>
<span class="-1997675543177729859" onmouseenter="enter('-1997675543177729859');" onmouseout="out('-1997675543177729859');" style="">1464                         // Just in case mFlushingWorkerThread changes but we aren&#x27;t woken up,            </span>
<span class="4998753984474875942" onmouseenter="enter('4998753984474875942');" onmouseout="out('4998753984474875942');" style="">1465                         // wait no longer than 1sec at a time                                            </span>
<span class="1515790047903299628" onmouseenter="enter('1515790047903299628');" onmouseout="out('1515790047903299628');" style="">1466                         this.wait(1000);                                                                 </span>
<span class="3493957724480568133" onmouseenter="enter('3493957724480568133');" onmouseout="out('3493957724480568133');" style="">1467                     } catch (InterruptedException ex) {                                                  </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1468                         // Ignore                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1469                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1471                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-72139740866353106" onmouseenter="enter('-72139740866353106');" onmouseout="out('-72139740866353106');" style="">1472                     Log.d(TAG, &quot;waited &quot;                                                                 </span>
<span class="3094974955332165680" onmouseenter="enter('3094974955332165680');" onmouseout="out('3094974955332165680');" style="">1473                             + (SystemClock.uptimeMillis()-workspaceWaitTime)                             </span>
<span class="4719480645001782920" onmouseenter="enter('4719480645001782920');" onmouseout="out('4719480645001782920');" style="">1474                             + &quot;ms for previous step to finish binding&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1475                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1476             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1477         }                                                                                                </span>
<span  style="">1478                                                                                                          </span>
<span class="6003497491863497289" onmouseenter="enter('6003497491863497289');" onmouseout="out('6003497491863497289');" style="">1479         void runBindSynchronousPage(int synchronousBindPage) {                                           </span>
<span class="26631348189854486" onmouseenter="enter('26631348189854486');" onmouseout="out('26631348189854486');" style="">1480             if (synchronousBindPage == PagedView.INVALID_RESTORE_PAGE) {                                 </span>
<span class="-8503902330989669437" onmouseenter="enter('-8503902330989669437');" onmouseout="out('-8503902330989669437');" style="">1481                 // Ensure that we have a valid page index to load synchronously                          </span>
<span class="4351877111278684588" onmouseenter="enter('4351877111278684588');" onmouseout="out('4351877111278684588');" style="">1482                 throw new RuntimeException(&quot;Should not call runBindSynchronousPage() without &quot; +         </span>
<span class="-7231071987017264740" onmouseenter="enter('-7231071987017264740');" onmouseout="out('-7231071987017264740');" style="">1483                         &quot;valid page index&quot;);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1484             }                                                                                            </span>
<span class="-1078848978706070277" onmouseenter="enter('-1078848978706070277');" onmouseout="out('-1078848978706070277');" style="">1485             if (!mAllAppsLoaded || !mWorkspaceLoaded) {                                                  </span>
<span class="2879437365312389694" onmouseenter="enter('2879437365312389694');" onmouseout="out('2879437365312389694');" style="">1486                 // Ensure that we don&#x27;t try and bind a specified page when the pages have not been       </span>
<span class="169159946226030638" onmouseenter="enter('169159946226030638');" onmouseout="out('169159946226030638');" style="">1487                 // loaded already (we should load everything asynchronously in that case)                </span>
<span class="2803547673173241327" onmouseenter="enter('2803547673173241327');" onmouseout="out('2803547673173241327');" style="">1488                 throw new RuntimeException(&quot;Expecting AllApps and Workspace to be loaded&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1489             }                                                                                            </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1490             synchronized (mLock) {                                                                       </span>
<span class="6834879657722268045" onmouseenter="enter('6834879657722268045');" onmouseout="out('6834879657722268045');" style="">1491                 if (mIsLoaderTaskRunning) {                                                              </span>
<span class="3479473486057258175" onmouseenter="enter('3479473486057258175');" onmouseout="out('3479473486057258175');" style="">1492                     // Ensure that we are never running the background loading at this point since       </span>
<span class="5690931735845958615" onmouseenter="enter('5690931735845958615');" onmouseout="out('5690931735845958615');" style="">1493                     // we also touch the background collections                                          </span>
<span class="-8789687649412956769" onmouseenter="enter('-8789687649412956769');" onmouseout="out('-8789687649412956769');" style="">1494                     throw new RuntimeException(&quot;Error! Background loading is already running&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1495                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1496             }                                                                                            </span>
<span  style="">1497                                                                                                          </span>
<span class="4081886748823582405" onmouseenter="enter('4081886748823582405');" onmouseout="out('4081886748823582405');" style="">1498             // XXX: Throw an exception if we are already loading (since we touch the worker thread       </span>
<span class="-98490365064007765" onmouseenter="enter('-98490365064007765');" onmouseout="out('-98490365064007765');" style="">1499             //      data structures, we can&#x27;t allow any other thread to touch that data, but because     </span>
<span class="4680477662519922026" onmouseenter="enter('4680477662519922026');" onmouseout="out('4680477662519922026');" style="">1500             //      this call is synchronous, we can get away with not locking).                         </span>
<span  style="">1501                                                                                                          </span>
<span class="-6012373927983533730" onmouseenter="enter('-6012373927983533730');" onmouseout="out('-6012373927983533730');" style="">1502             // The LauncherModel is static in the LauncherAppState and mHandler may have queued          </span>
<span class="7586418927072898518" onmouseenter="enter('7586418927072898518');" onmouseout="out('7586418927072898518');" style="">1503             // operations from the previous activity.  We need to ensure that all queued operations      </span>
<span class="-70743228311848279" onmouseenter="enter('-70743228311848279');" onmouseout="out('-70743228311848279');" style="">1504             // are executed before any synchronous binding work is done.                                 </span>
<span class="-4498008587479034521" onmouseenter="enter('-4498008587479034521');" onmouseout="out('-4498008587479034521');" style="">1505             mHandler.flush();                                                                            </span>
<span  style="">1506                                                                                                          </span>
<span class="-3771221013488357479" onmouseenter="enter('-3771221013488357479');" onmouseout="out('-3771221013488357479');" style="">1507             // Divide the set of loaded items into those that we are binding synchronously, and          </span>
<span class="5224432435633178726" onmouseenter="enter('5224432435633178726');" onmouseout="out('5224432435633178726');" style="">1508             // everything else that is to be bound normally (asynchronously).                            </span>
<span class="-6685180061336045314" onmouseenter="enter('-6685180061336045314');" onmouseout="out('-6685180061336045314');" style="">1509             bindWorkspace(synchronousBindPage, false);                                                   </span>
<span class="6689685850222943783" onmouseenter="enter('6689685850222943783');" onmouseout="out('6689685850222943783');" style="">1510             // XXX: For now, continue posting the binding of AllApps as there are other issues that      </span>
<span class="-1574502332056641514" onmouseenter="enter('-1574502332056641514');" onmouseout="out('-1574502332056641514');" style="">1511             //      arise from that.                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">1512             onlyBindAllApps();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1513         }                                                                                                </span>
<span  style="">1514                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1515         public void run() {                                                                              </span>
<span class="5752535899438246447" onmouseenter="enter('5752535899438246447');" onmouseout="out('5752535899438246447');" style="">1516             boolean isUpgrade = false;                                                                   </span>
<span class="2105997185412004649" onmouseenter="enter('2105997185412004649');" onmouseout="out('2105997185412004649');" style="">1517             synchronized(mLock) {                                                                        </span>
<span class="4738665752688002399" onmouseenter="enter('4738665752688002399');" onmouseout="out('4738665752688002399');" style="">1518                 mIsLoaderTaskRunning = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1519             }                                                                                            </span>
<span class="-1737494436521525410" onmouseenter="enter('-1737494436521525410');" onmouseout="out('-1737494436521525410');" style="">1520             // Optimize for end-user experience: if the Launcher is up and // running with the           </span>
<span class="892988660615454533" onmouseenter="enter('892988660615454533');" onmouseout="out('892988660615454533');" style="">1521             // All Apps interface in the foreground, load All Apps first. Otherwise, load the            </span>
<span class="-1944482210197593446" onmouseenter="enter('-1944482210197593446');" onmouseout="out('-1944482210197593446');" style="">1522             // workspace first (default).                                                                </span>
<span class="2986163708134954175" onmouseenter="enter('2986163708134954175');" onmouseout="out('2986163708134954175');" style="">1523             keep_running : {                                                                             </span>
<span class="2293067736949718284" onmouseenter="enter('2293067736949718284');" onmouseout="out('2293067736949718284');" style="">1524                 // Elevate priority when Home launches for the first time to avoid                       </span>
<span class="-1381926741216219064" onmouseenter="enter('-1381926741216219064');" onmouseout="out('-1381926741216219064');" style="">1525                 // starving at boot time. Staring at a blank home is not cool.                           </span>
<span class="2105997185412004649" onmouseenter="enter('2105997185412004649');" onmouseout="out('2105997185412004649');" style="">1526                 synchronized(mLock) {                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1527                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="3920349656056887161" onmouseenter="enter('3920349656056887161');" onmouseout="out('3920349656056887161');" style=""><abbr title="1528                         Log.d(TAG, &quot;Setting thread priority to &quot; + (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUND&quot;));">1528                         Log.d(TAG, &quot;Setting thread priority to &quot; + (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUN</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1529                     }                                                                                    </span>
<span class="-159571163629719621" onmouseenter="enter('-159571163629719621');" onmouseout="out('-159571163629719621');" style=""><abbr title="1530                     Process.setThreadPriority(mIsLaunching ? java.lang.Process.THREAD_PRIORITY_DEFAULT : java.lang.Process.THREAD_PRIORITY_BACKGROUND);">1530                     Process.setThreadPriority(mIsLaunching ? java.lang.Process.THREAD_PRIORITY_DEFAULT : </abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1531                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1532                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-3999751686770495872" onmouseenter="enter('-3999751686770495872');" onmouseout="out('-3999751686770495872');" style="">1533                     Log.d(TAG, &quot;step 1: loading workspace&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1534                 }                                                                                        </span>
<span class="8482653655407072483" onmouseenter="enter('8482653655407072483');" onmouseout="out('8482653655407072483');" style="">1535                 isUpgrade = loadAndBindWorkspace();                                                      </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1536                 if (mStopped) {                                                                          </span>
<span class="-6818805659412975442" onmouseenter="enter('-6818805659412975442');" onmouseout="out('-6818805659412975442');" style="">1537                     break keep_running;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1538                 }                                                                                        </span>
<span class="-5777092162251517407" onmouseenter="enter('-5777092162251517407');" onmouseout="out('-5777092162251517407');" style="">1539                 // Whew! Hard work done.  Slow us down, and wait until the UI thread has                 </span>
<span class="-4075896614387769686" onmouseenter="enter('-4075896614387769686');" onmouseout="out('-4075896614387769686');" style="">1540                 // settled down.                                                                         </span>
<span class="2105997185412004649" onmouseenter="enter('2105997185412004649');" onmouseout="out('2105997185412004649');" style="">1541                 synchronized(mLock) {                                                                    </span>
<span class="1926990202484285414" onmouseenter="enter('1926990202484285414');" onmouseout="out('1926990202484285414');" style="">1542                     if (mIsLaunching) {                                                                  </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1543                         if (DEBUG_LOADERS) {                                                             </span>
<span class="8036260568502286466" onmouseenter="enter('8036260568502286466');" onmouseout="out('8036260568502286466');" style="">1544                             Log.d(TAG, &quot;Setting thread priority to BACKGROUND&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1545                         }                                                                                </span>
<span class="8543735010636454853" onmouseenter="enter('8543735010636454853');" onmouseout="out('8543735010636454853');" style="">1546                         Process.setThreadPriority(java.lang.Process.THREAD_PRIORITY_BACKGROUND);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1547                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1548                 }                                                                                        </span>
<span class="2443484392604792624" onmouseenter="enter('2443484392604792624');" onmouseout="out('2443484392604792624');" style="">1549                 waitForIdle();                                                                           </span>
<span class="1529750222663563109" onmouseenter="enter('1529750222663563109');" onmouseout="out('1529750222663563109');" style="">1550                 // second step                                                                           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1551                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="2015058458764911659" onmouseenter="enter('2015058458764911659');" onmouseout="out('2015058458764911659');" style="">1552                     Log.d(TAG, &quot;step 2: loading all apps&quot;);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1553                 }                                                                                        </span>
<span class="3758302759319518479" onmouseenter="enter('3758302759319518479');" onmouseout="out('3758302759319518479');" style="">1554                 loadAndBindAllApps();                                                                    </span>
<span class="4031538869478111" onmouseenter="enter('4031538869478111');" onmouseout="out('4031538869478111');" style="">1555                 // Restore the default thread priority after we are done loading items                   </span>
<span class="2105997185412004649" onmouseenter="enter('2105997185412004649');" onmouseout="out('2105997185412004649');" style="">1556                 synchronized(mLock) {                                                                    </span>
<span class="5551724105057848529" onmouseenter="enter('5551724105057848529');" onmouseout="out('5551724105057848529');" style="">1557                     Process.setThreadPriority(java.lang.Process.THREAD_PRIORITY_DEFAULT);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1558                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1559             }                                                                                            </span>
<span class="3508545587953199453" onmouseenter="enter('3508545587953199453');" onmouseout="out('3508545587953199453');" style="">1560             // Update the saved icons if necessary                                                       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1561             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-8698870540183511922" onmouseenter="enter('-8698870540183511922');" onmouseout="out('-8698870540183511922');" style="">1562                 Log.d(TAG, &quot;Comparing loaded icons to database icons&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1563             }                                                                                            </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1564             synchronized(sBgLock) {                                                                      </span>
<span class="5900553346724410681" onmouseenter="enter('5900553346724410681');" onmouseout="out('5900553346724410681');" style="">1565                 for (Object key : sBgDbIconCache.keySet()) {                                             </span>
<span class="-211158668012161823" onmouseenter="enter('-211158668012161823');" onmouseout="out('-211158668012161823');" style="">1566                     updateSavedIcon(mContext, ((ShortcutInfo) (key)), sBgDbIconCache.get(key));          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1567                 }                                                                                        </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1568                 sBgDbIconCache.clear();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1569             }                                                                                            </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">1570             if (LauncherAppState.isDisableAllApps()) {                                                   </span>
<span class="6125270178763735331" onmouseenter="enter('6125270178763735331');" onmouseout="out('6125270178763735331');" style="">1571                 // Ensure that all the applications that are in the system are                           </span>
<span class="305725628855266005" onmouseenter="enter('305725628855266005');" onmouseout="out('305725628855266005');" style="">1572                 // represented on the home screen.                                                       </span>
<span class="-616515436224837247" onmouseenter="enter('-616515436224837247');" onmouseout="out('-616515436224837247');" style="">1573                 if ((!UPGRADE_USE_MORE_APPS_FOLDER) || (!isUpgrade)) {                                   </span>
<span class="5095093339904195112" onmouseenter="enter('5095093339904195112');" onmouseout="out('5095093339904195112');" style="">1574                     verifyApplications();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1575                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1576             }                                                                                            </span>
<span class="-745190257815883733" onmouseenter="enter('-745190257815883733');" onmouseout="out('-745190257815883733');" style="">1577             // Clear out this reference, otherwise we end up holding it until all of the                 </span>
<span class="4646172956484107396" onmouseenter="enter('4646172956484107396');" onmouseout="out('4646172956484107396');" style="">1578             // callback runnables are done.                                                              </span>
<span class="-5116782011037529434" onmouseenter="enter('-5116782011037529434');" onmouseout="out('-5116782011037529434');" style="">1579             mContext = null;                                                                             </span>
<span class="2105997185412004649" onmouseenter="enter('2105997185412004649');" onmouseout="out('2105997185412004649');" style="">1580             synchronized(mLock) {                                                                        </span>
<span class="-2953553521466488464" onmouseenter="enter('-2953553521466488464');" onmouseout="out('-2953553521466488464');" style="">1581                 // If we are still the last one to be scheduled, remove ourselves.                       </span>
<span class="-1560897046285527036" onmouseenter="enter('-1560897046285527036');" onmouseout="out('-1560897046285527036');" style="">1582                 if (mLoaderTask == this) {                                                               </span>
<span class="-8540970856372433004" onmouseenter="enter('-8540970856372433004');" onmouseout="out('-8540970856372433004');" style="">1583                     mLoaderTask = null;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1584                 }                                                                                        </span>
<span class="8472658350888958885" onmouseenter="enter('8472658350888958885');" onmouseout="out('8472658350888958885');" style="">1585                 mIsLoaderTaskRunning = false;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587         }                                                                                                </span>
<span  style="">1588                                                                                                          </span>
<span class="200135487053889456" onmouseenter="enter('200135487053889456');" onmouseout="out('200135487053889456');" style="">1589         public void stopLocked() {                                                                       </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1590             synchronized (LoaderTask.this) {                                                             </span>
<span class="8214677179915027824" onmouseenter="enter('8214677179915027824');" onmouseout="out('8214677179915027824');" style="">1591                 mStopped = true;                                                                         </span>
<span class="3056713147428312392" onmouseenter="enter('3056713147428312392');" onmouseout="out('3056713147428312392');" style="">1592                 this.notify();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1593             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1594         }                                                                                                </span>
<span  style="">1595                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1596         /**                                                                                              </span>
<span class="8543020973836575883" onmouseenter="enter('8543020973836575883');" onmouseout="out('8543020973836575883');" style="">1597          * Gets the callbacks object.  If we&#x27;ve been stopped, or if the launcher object                  </span>
<span class="-5710779889390340322" onmouseenter="enter('-5710779889390340322');" onmouseout="out('-5710779889390340322');" style="">1598          * has somehow been garbage collected, return null instead.  Pass in the Callbacks               </span>
<span class="1695163395735776366" onmouseenter="enter('1695163395735776366');" onmouseout="out('1695163395735776366');" style="">1599          * object that was around when the deferred message was scheduled, and if there&#x27;s                </span>
<span class="7856411153887025232" onmouseenter="enter('7856411153887025232');" onmouseout="out('7856411153887025232');" style="">1600          * a new Callbacks object around then also return null.  This will save us from                  </span>
<span class="2242983124447893975" onmouseenter="enter('2242983124447893975');" onmouseout="out('2242983124447893975');" style="">1601          * calling onto it with data that will be ignored.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1602          */                                                                                              </span>
<span class="-2719659093140206912" onmouseenter="enter('-2719659093140206912');" onmouseout="out('-2719659093140206912');" style="">1603         Callbacks tryGetCallbacks(Callbacks oldCallbacks) {                                              </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1604             synchronized (mLock) {                                                                       </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1605                 if (mStopped) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1606                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1607                 }                                                                                        </span>
<span  style="">1608                                                                                                          </span>
<span class="-1148437149844317216" onmouseenter="enter('-1148437149844317216');" onmouseout="out('-1148437149844317216');" style="">1609                 if (mCallbacks == null) {                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1610                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1611                 }                                                                                        </span>
<span  style="">1612                                                                                                          </span>
<span class="4487336468213395696" onmouseenter="enter('4487336468213395696');" onmouseout="out('4487336468213395696');" style="">1613                 final Callbacks callbacks = mCallbacks.get();                                            </span>
<span class="-1088473782403214817" onmouseenter="enter('-1088473782403214817');" onmouseout="out('-1088473782403214817');" style="">1614                 if (callbacks != oldCallbacks) {                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1615                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1616                 }                                                                                        </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">1617                 if (callbacks == null) {                                                                 </span>
<span class="-94531209925935523" onmouseenter="enter('-94531209925935523');" onmouseout="out('-94531209925935523');" style="">1618                     Log.w(TAG, &quot;no mCallbacks&quot;);                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1619                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620                 }                                                                                        </span>
<span  style="">1621                                                                                                          </span>
<span class="7316466478630645098" onmouseenter="enter('7316466478630645098');" onmouseout="out('7316466478630645098');" style="">1622                 return callbacks;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1623             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624         }                                                                                                </span>
<span  style="">1625                                                                                                          </span>
<span class="-732845747997402687" onmouseenter="enter('-732845747997402687');" onmouseout="out('-732845747997402687');" style="">1626         private void verifyApplications() {                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">1627             final Context context = mApp.getContext();                                                   </span>
<span class="-895975897487385508" onmouseenter="enter('-895975897487385508');" onmouseout="out('-895975897487385508');" style="">1628             // Cross reference all the applications in our apps list with items in the workspace         </span>
<span class="-10165714367555844" onmouseenter="enter('-10165714367555844');" onmouseout="out('-10165714367555844');" style="">1629             ArrayList&lt;ItemInfo&gt; tmpInfos;                                                                </span>
<span class="-1498611641211142735" onmouseenter="enter('-1498611641211142735');" onmouseout="out('-1498611641211142735');" style="">1630             ArrayList&lt;ItemInfo&gt; added = new ArrayList&lt;ItemInfo&gt;();                                       </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1631             synchronized(sBgLock) {                                                                      </span>
<span class="-8503045385813305184" onmouseenter="enter('-8503045385813305184');" onmouseout="out('-8503045385813305184');" style="">1632                 for (AppInfo app : mBgAllAppsList.data) {                                                </span>
<span class="3468492706943039059" onmouseenter="enter('3468492706943039059');" onmouseout="out('3468492706943039059');" style="">1633                     tmpInfos = getItemInfoForComponentName(app.componentName, app.user);                 </span>
<span class="2520781471180992241" onmouseenter="enter('2520781471180992241');" onmouseout="out('2520781471180992241');" style="">1634                     if (tmpInfos.isEmpty()) {                                                            </span>
<span class="-8553694446545507920" onmouseenter="enter('-8553694446545507920');" onmouseout="out('-8553694446545507920');" style="">1635                         // We are missing an application icon, so add this to the workspace              </span>
<span class="-4039639638749761552" onmouseenter="enter('-4039639638749761552');" onmouseout="out('-4039639638749761552');" style="">1636                         added.add(app);                                                                  </span>
<span class="-6087209586339664607" onmouseenter="enter('-6087209586339664607');" onmouseout="out('-6087209586339664607');" style="">1637                         // This is a rare event, so lets log it                                          </span>
<span class="-8409193735080295855" onmouseenter="enter('-8409193735080295855');" onmouseout="out('-8409193735080295855');" style="">1638                         Log.e(TAG, &quot;Missing Application on load: &quot; + app);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1639                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1640                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1641             }                                                                                            </span>
<span class="-3228275885243238792" onmouseenter="enter('-3228275885243238792');" onmouseout="out('-3228275885243238792');" style="">1642             if (!added.isEmpty()) {                                                                      </span>
<span class="-2532202186705808951" onmouseenter="enter('-2532202186705808951');" onmouseout="out('-2532202186705808951');" style="">1643                 addAndBindAddedWorkspaceApps(context, added);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1644             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1645         }                                                                                                </span>
<span  style="">1646                                                                                                          </span>
<span class="1799876722918383990" onmouseenter="enter('1799876722918383990');" onmouseout="out('1799876722918383990');" style="">1647         // check &amp; update map of what&#x27;s occupied; used to discard overlapping/invalid items              </span>
<span class="-4724952550298502794" onmouseenter="enter('-4724952550298502794');" onmouseout="out('-4724952550298502794');" style=""><abbr title="1648         private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item, AtomicBoolean deleteOnInvalidPlacement) {">1648         private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item, AtomicBoo</abbr></span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1649             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1650             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="8354002620160470698" onmouseenter="enter('8354002620160470698');" onmouseout="out('8354002620160470698');" style="">1651             final int countX = ((int) (grid.numColumns));                                                </span>
<span class="5527431218828769444" onmouseenter="enter('5527431218828769444');" onmouseout="out('5527431218828769444');" style="">1652             final int countY = ((int) (grid.numRows));                                                   </span>
<span class="6034161250987228772" onmouseenter="enter('6034161250987228772');" onmouseout="out('6034161250987228772');" style="">1653             long containerIndex = item.screenId;                                                         </span>
<span class="-7373493273183889597" onmouseenter="enter('-7373493273183889597');" onmouseout="out('-7373493273183889597');" style="">1654             if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                        </span>
<span class="2673995963777381740" onmouseenter="enter('2673995963777381740');" onmouseout="out('2673995963777381740');" style="">1655                 // Return early if we detect that an item is under the hotseat button                    </span>
<span class="5712521683704202564" onmouseenter="enter('5712521683704202564');" onmouseout="out('5712521683704202564');" style=""><abbr title="1656                 if ((mCallbacks == null) || mCallbacks.get().isAllAppsButtonRank(((int) (item.screenId)))) {">1656                 if ((mCallbacks == null) || mCallbacks.get().isAllAppsButtonRank(((int) (item.screenId)))</abbr></span>
<span class="-5585792196891628830" onmouseenter="enter('-5585792196891628830');" onmouseout="out('-5585792196891628830');" style="">1657                     deleteOnInvalidPlacement.set(true);                                                  </span>
<span class="-4762255259418263051" onmouseenter="enter('-4762255259418263051');" onmouseout="out('-4762255259418263051');" style=""><abbr title="1658                     Log.e(TAG, (((((((&quot;Error loading shortcut into hotseat &quot; + item) + &quot; into position (&quot;) + item.screenId) + &quot;:&quot;) + item.cellX) + &quot;,&quot;) + item.cellY) + &quot;) occupied by all apps&quot;);">1658                     Log.e(TAG, (((((((&quot;Error loading shortcut into hotseat &quot; + item) + &quot; into position (&quot;</abbr></span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1659                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1660                 }                                                                                        </span>
<span class="-6973387888906317224" onmouseenter="enter('-6973387888906317224');" onmouseout="out('-6973387888906317224');" style=""><abbr title="1661                 final ItemInfo[][] hotseatItems = occupied.get(((long) (LauncherSettings.Favorites.CONTAINER_HOTSEAT)));">1661                 final ItemInfo[][] hotseatItems = occupied.get(((long) (LauncherSettings.Favorites.CONTAI</abbr></span>
<span class="4306415300339150674" onmouseenter="enter('4306415300339150674');" onmouseout="out('4306415300339150674');" style="">1662                 if (item.screenId &gt;= grid.numHotseatIcons) {                                             </span>
<span class="4412410944526624917" onmouseenter="enter('4412410944526624917');" onmouseout="out('4412410944526624917');" style=""><abbr title="1663                     Log.e(TAG, (((((&quot;Error loading shortcut &quot; + item) + &quot; into hotseat position &quot;) + item.screenId) + &quot;, position out of bounds: (0 to &quot;) + (grid.numHotseatIcons - 1)) + &quot;)&quot;);">1663                     Log.e(TAG, (((((&quot;Error loading shortcut &quot; + item) + &quot; into hotseat position &quot;) + item</abbr></span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1664                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1665                 }                                                                                        </span>
<span class="-96711597696201103" onmouseenter="enter('-96711597696201103');" onmouseout="out('-96711597696201103');" style="">1666                 if (hotseatItems != null) {                                                              </span>
<span class="898179064365029699" onmouseenter="enter('898179064365029699');" onmouseout="out('898179064365029699');" style="">1667                     if (hotseatItems[((int) (item.screenId))][0] != null) {                              </span>
<span class="3267111978335869081" onmouseenter="enter('3267111978335869081');" onmouseout="out('3267111978335869081');" style=""><abbr title="1668                         Log.e(TAG, ((((((((&quot;Error loading shortcut into hotseat &quot; + item) + &quot; into position (&quot;) + item.screenId) + &quot;:&quot;) + item.cellX) + &quot;,&quot;) + item.cellY) + &quot;) occupied by &quot;) + occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)[((int) (item.screenId))][0]);">1668                         Log.e(TAG, ((((((((&quot;Error loading shortcut into hotseat &quot; + item) + &quot; into positi</abbr></span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1669                         return false;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1670                     } else {                                                                             </span>
<span class="2671835386786547631" onmouseenter="enter('2671835386786547631');" onmouseout="out('2671835386786547631');" style="">1671                         hotseatItems[((int) (item.screenId))][0] = item;                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1672                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1673                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1674                 } else {                                                                                 </span>
<span class="1426830949285360899" onmouseenter="enter('1426830949285360899');" onmouseout="out('1426830949285360899');" style="">1675                     final ItemInfo[][] items = new ItemInfo[((int) (grid.numHotseatIcons))][1];          </span>
<span class="-2211586004792807785" onmouseenter="enter('-2211586004792807785');" onmouseout="out('-2211586004792807785');" style="">1676                     items[((int) (item.screenId))][0] = item;                                            </span>
<span class="6348190422508174044" onmouseenter="enter('6348190422508174044');" onmouseout="out('6348190422508174044');" style="">1677                     occupied.put(((long) (LauncherSettings.Favorites.CONTAINER_HOTSEAT)), items);        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1678                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1679                 }                                                                                        </span>
<span class="-303831338253138618" onmouseenter="enter('-303831338253138618');" onmouseout="out('-303831338253138618');" style="">1680             } else if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                 </span>
<span class="2023083187637338837" onmouseenter="enter('2023083187637338837');" onmouseout="out('2023083187637338837');" style="">1681                 // Skip further checking if it is not the hotseat or workspace container                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1682                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1683             }                                                                                            </span>
<span class="4900594953050523912" onmouseenter="enter('4900594953050523912');" onmouseout="out('4900594953050523912');" style="">1684             if (!occupied.containsKey(item.screenId)) {                                                  </span>
<span class="4145930087010840378" onmouseenter="enter('4145930087010840378');" onmouseout="out('4145930087010840378');" style="">1685                 ItemInfo[][] items = new ItemInfo[countX + 1][countY + 1];                               </span>
<span class="1227421706021504577" onmouseenter="enter('1227421706021504577');" onmouseout="out('1227421706021504577');" style="">1686                 occupied.put(item.screenId, items);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1687             }                                                                                            </span>
<span class="1896300602190974138" onmouseenter="enter('1896300602190974138');" onmouseout="out('1896300602190974138');" style="">1688             final ItemInfo[][] screens = occupied.get(item.screenId);                                    </span>
<span class="8116241059370746654" onmouseenter="enter('8116241059370746654');" onmouseout="out('8116241059370746654');" style=""><abbr title="1689             if (((((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (item.cellX &lt; 0)) || (item.cellY &lt; 0)) || ((item.cellX + item.spanX) &gt; countX)) || ((item.cellY + item.spanY) &gt; countY)) {">1689             if (((((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (item.cellX &lt; 0)) </abbr></span>
<span class="-38142440906569623" onmouseenter="enter('-38142440906569623');" onmouseout="out('-38142440906569623');" style=""><abbr title="1690                 Log.e(TAG, (((((((((((((&quot;Error loading shortcut &quot; + item) + &quot; into cell (&quot;) + containerIndex) + &quot;-&quot;) + item.screenId) + &quot;:&quot;) + item.cellX) + &quot;,&quot;) + item.cellY) + &quot;) out of screen bounds ( &quot;) + countX) + &quot;x&quot;) + countY) + &quot;)&quot;);">1690                 Log.e(TAG, (((((((((((((&quot;Error loading shortcut &quot; + item) + &quot; into cell (&quot;) + containerIn</abbr></span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1691                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1692             }                                                                                            </span>
<span class="-5156128896960485993" onmouseenter="enter('-5156128896960485993');" onmouseout="out('-5156128896960485993');" style="">1693             // Check if any workspace icons overlap with each other                                      </span>
<span class="-2092258279968456857" onmouseenter="enter('-2092258279968456857');" onmouseout="out('-2092258279968456857');" style="">1694             for (int x = item.cellX; x &lt; (item.cellX + item.spanX); x++) {                               </span>
<span class="8100170090626610310" onmouseenter="enter('8100170090626610310');" onmouseout="out('8100170090626610310');" style="">1695                 for (int y = item.cellY; y &lt; (item.cellY + item.spanY); y++) {                           </span>
<span class="-6569355555223387047" onmouseenter="enter('-6569355555223387047');" onmouseout="out('-6569355555223387047');" style="">1696                     if (screens[x][y] != null) {                                                         </span>
<span class="3811303228209948297" onmouseenter="enter('3811303228209948297');" onmouseout="out('3811303228209948297');" style=""><abbr title="1697                         Log.e(TAG, ((((((((((&quot;Error loading shortcut &quot; + item) + &quot; into cell (&quot;) + containerIndex) + &quot;-&quot;) + item.screenId) + &quot;:&quot;) + x) + &quot;,&quot;) + y) + &quot;) occupied by &quot;) + screens[x][y]);">1697                         Log.e(TAG, ((((((((((&quot;Error loading shortcut &quot; + item) + &quot; into cell (&quot;) + contai</abbr></span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1698                         return false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1699                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1700                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1701             }                                                                                            </span>
<span class="-2092258279968456857" onmouseenter="enter('-2092258279968456857');" onmouseout="out('-2092258279968456857');" style="">1702             for (int x = item.cellX; x &lt; (item.cellX + item.spanX); x++) {                               </span>
<span class="8100170090626610310" onmouseenter="enter('8100170090626610310');" onmouseout="out('8100170090626610310');" style="">1703                 for (int y = item.cellY; y &lt; (item.cellY + item.spanY); y++) {                           </span>
<span class="4088526838574697064" onmouseenter="enter('4088526838574697064');" onmouseout="out('4088526838574697064');" style="">1704                     screens[x][y] = item;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1705                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1706             }                                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1707             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1708         }                                                                                                </span>
<span  style="">1709                                                                                                          </span>
<span class="-7185136003210132674" onmouseenter="enter('-7185136003210132674');" onmouseout="out('-7185136003210132674');" style="">1710         /** Clears all the sBg data structures */                                                        </span>
<span class="1801132344752176061" onmouseenter="enter('1801132344752176061');" onmouseout="out('1801132344752176061');" style="">1711         private void clearSBgDataStructures() {                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1712             synchronized (sBgLock) {                                                                     </span>
<span class="-7129433888089157992" onmouseenter="enter('-7129433888089157992');" onmouseout="out('-7129433888089157992');" style="">1713                 sBgWorkspaceItems.clear();                                                               </span>
<span class="5052861278193385910" onmouseenter="enter('5052861278193385910');" onmouseout="out('5052861278193385910');" style="">1714                 sBgAppWidgets.clear();                                                                   </span>
<span class="3133219754838100126" onmouseenter="enter('3133219754838100126');" onmouseout="out('3133219754838100126');" style="">1715                 sBgFolders.clear();                                                                      </span>
<span class="-8505695193908377238" onmouseenter="enter('-8505695193908377238');" onmouseout="out('-8505695193908377238');" style="">1716                 sBgItemsIdMap.clear();                                                                   </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1717                 sBgDbIconCache.clear();                                                                  </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1718                 sBgWorkspaceScreens.clear();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1719             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1720         }                                                                                                </span>
<span  style="">1721                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1722         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-134197683999376379" onmouseenter="enter('-134197683999376379');" onmouseout="out('-134197683999376379');" style="">1723         private boolean loadWorkspace() {                                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1724             // Log to disk                                                                               </span>
<span class="-1716174542198683127" onmouseenter="enter('-1716174542198683127');" onmouseout="out('-1716174542198683127');" style="">1725             Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspace()&quot;, true);                                </span>
<span class="7045952659913516150" onmouseenter="enter('7045952659913516150');" onmouseout="out('7045952659913516150');" style="">1726             final long t = (DEBUG_LOADERS) ? SystemClock.uptimeMillis() : 0;                             </span>
<span class="-7540672363138308565" onmouseenter="enter('-7540672363138308565');" onmouseout="out('-7540672363138308565');" style="">1727             final Context context = mContext;                                                            </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1728             final ContentResolver contentResolver = context.getContentResolver();                        </span>
<span class="-2531056455834918617" onmouseenter="enter('-2531056455834918617');" onmouseout="out('-2531056455834918617');" style="">1729             final PackageManager manager = context.getPackageManager();                                  </span>
<span class="9164904653123292763" onmouseenter="enter('9164904653123292763');" onmouseout="out('9164904653123292763');" style="">1730             final AppWidgetManager widgets = AppWidgetManager.getInstance(context);                      </span>
<span class="-100432956626051671" onmouseenter="enter('-100432956626051671');" onmouseout="out('-100432956626051671');" style="">1731             final boolean isSafeMode = manager.isSafeMode();                                             </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">1732             final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);             </span>
<span class="6797489784584636002" onmouseenter="enter('6797489784584636002');" onmouseout="out('6797489784584636002');" style=""><abbr title="1733             final boolean isSdCardReady = context.registerReceiver(null, new IntentFilter(StartupReceiver.SYSTEM_READY)) != null;">1733             final boolean isSdCardReady = context.registerReceiver(null, new IntentFilter(StartupReceiver</abbr></span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1734             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1735             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="-289744965915874427" onmouseenter="enter('-289744965915874427');" onmouseout="out('-289744965915874427');" style="">1736             int countX = ((int) (grid.numColumns));                                                      </span>
<span class="-3566146670768165206" onmouseenter="enter('-3566146670768165206');" onmouseout="out('-3566146670768165206');" style="">1737             int countY = ((int) (grid.numRows));                                                         </span>
<span class="4685154999280536885" onmouseenter="enter('4685154999280536885');" onmouseout="out('4685154999280536885');" style="">1738             if ((mFlags &amp; LOADER_FLAG_CLEAR_WORKSPACE) != 0) {                                           </span>
<span class="1874866184467615023" onmouseenter="enter('1874866184467615023');" onmouseout="out('1874866184467615023');" style="">1739                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: resetting launcher database&quot;, true);            </span>
<span class="7130003991883838563" onmouseenter="enter('7130003991883838563');" onmouseout="out('7130003991883838563');" style="">1740                 LauncherAppState.getLauncherProvider().deleteDatabase();                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1741             }                                                                                            </span>
<span class="1786245758308608184" onmouseenter="enter('1786245758308608184');" onmouseout="out('1786245758308608184');" style="">1742             if ((mFlags &amp; LOADER_FLAG_MIGRATE_SHORTCUTS) != 0) {                                         </span>
<span class="2622187273755861990" onmouseenter="enter('2622187273755861990');" onmouseout="out('2622187273755861990');" style="">1743                 // append the user&#x27;s Launcher2 shortcuts                                                 </span>
<span class="7991450201866933364" onmouseenter="enter('7991450201866933364');" onmouseout="out('7991450201866933364');" style="">1744                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: migrating from launcher2&quot;, true);               </span>
<span class="-4928149528895358870" onmouseenter="enter('-4928149528895358870');" onmouseout="out('-4928149528895358870');" style="">1745                 LauncherAppState.getLauncherProvider().migrateLauncher2Shortcuts();                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1746             } else {                                                                                     </span>
<span class="-6772917437561183819" onmouseenter="enter('-6772917437561183819');" onmouseout="out('-6772917437561183819');" style="">1747                 // Make sure the default workspace is loaded                                             </span>
<span class="3161347234478650527" onmouseenter="enter('3161347234478650527');" onmouseout="out('3161347234478650527');" style="">1748                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: loading default favorites&quot;, false);             </span>
<span class="4180233289947251537" onmouseenter="enter('4180233289947251537');" onmouseout="out('4180233289947251537');" style="">1749                 LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary();                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1750             }                                                                                            </span>
<span class="6918238907049954147" onmouseenter="enter('6918238907049954147');" onmouseout="out('6918238907049954147');" style="">1751             // This code path is for our old migration code and should no longer be exercised            </span>
<span class="-6111060399811000023" onmouseenter="enter('-6111060399811000023');" onmouseout="out('-6111060399811000023');" style="">1752             boolean loadedOldDb = false;                                                                 </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1753             // Log to disk                                                                               </span>
<span class="4915608034810943289" onmouseenter="enter('4915608034810943289');" onmouseout="out('4915608034810943289');" style="">1754             Launcher.addDumpLog(TAG, &quot;11683562 -   loadedOldDb: &quot; + loadedOldDb, true);                  </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1755             synchronized(sBgLock) {                                                                      </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">1756                 clearSBgDataStructures();                                                                </span>
<span class="-5263705036609595279" onmouseenter="enter('-5263705036609595279');" onmouseout="out('-5263705036609595279');" style=""><abbr title="1757                 final HashSet&lt;String&gt; installingPkgs = PackageInstallerCompat.getInstance(mContext).updateAndGetActiveSessionCache();">1757                 final HashSet&lt;String&gt; installingPkgs = PackageInstallerCompat.getInstance(mContext).updat</abbr></span>
<span class="4830013596372552761" onmouseenter="enter('4830013596372552761');" onmouseout="out('4830013596372552761');" style="">1758                 final ArrayList&lt;Long&gt; itemsToRemove = new ArrayList&lt;Long&gt;();                             </span>
<span class="-771425693233218078" onmouseenter="enter('-771425693233218078');" onmouseout="out('-771425693233218078');" style="">1759                 final ArrayList&lt;Long&gt; restoredRows = new ArrayList&lt;Long&gt;();                              </span>
<span class="2252334430881119805" onmouseenter="enter('2252334430881119805');" onmouseout="out('2252334430881119805');" style="">1760                 final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION;           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1761                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-2958802293590769992" onmouseenter="enter('-2958802293590769992');" onmouseout="out('-2958802293590769992');" style="">1762                     Log.d(TAG, &quot;loading model from &quot; + contentUri);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1763                 }                                                                                        </span>
<span class="4124323585340312806" onmouseenter="enter('4124323585340312806');" onmouseout="out('4124323585340312806');" style="">1764                 final Cursor c = contentResolver.query(contentUri, null, null, null, null);              </span>
<span class="-6846195559440228008" onmouseenter="enter('-6846195559440228008');" onmouseout="out('-6846195559440228008');" style="">1765                 // +1 for the hotseat (it can be larger than the workspace)                              </span>
<span class="-6570434370371395868" onmouseenter="enter('-6570434370371395868');" onmouseout="out('-6570434370371395868');" style="">1766                 // Load workspace in reverse order to ensure that latest items are loaded first (and     </span>
<span class="-2496742724026288329" onmouseenter="enter('-2496742724026288329');" onmouseout="out('-2496742724026288329');" style="">1767                 // before any earlier duplicates)                                                        </span>
<span class="-575539041300461201" onmouseenter="enter('-575539041300461201');" onmouseout="out('-575539041300461201');" style="">1768                 final HashMap&lt;Long, ItemInfo[][]&gt; occupied = new HashMap&lt;Long, ItemInfo[][]&gt;();          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1769                 try {                                                                                    </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">1770                     final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);         </span>
<span class="-4033402896828551783" onmouseenter="enter('-4033402896828551783');" onmouseout="out('-4033402896828551783');" style="">1771                     final int intentIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.INTENT);  </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style="">1772                     final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);    </span>
<span class="2476259323357554799" onmouseenter="enter('2476259323357554799');" onmouseout="out('2476259323357554799');" style=""><abbr title="1773                     final int iconTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYPE);">1773                     final int iconTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYP</abbr></span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">1774                     final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);      </span>
<span class="-8681284292868403609" onmouseenter="enter('-8681284292868403609');" onmouseout="out('-8681284292868403609');" style=""><abbr title="1775                     final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE);">1775                     final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_</abbr></span>
<span class="6748803854718242440" onmouseenter="enter('6748803854718242440');" onmouseout="out('6748803854718242440');" style=""><abbr title="1776                     final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURCE);">1776                     final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON</abbr></span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""><abbr title="1777                     final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);">1777                     final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAIN</abbr></span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""><abbr title="1778                     final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);">1778                     final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYP</abbr></span>
<span class="-7910612339850750582" onmouseenter="enter('-7910612339850750582');" onmouseout="out('-7910612339850750582');" style=""><abbr title="1779                     final int appWidgetIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.APPWIDGET_ID);">1779                     final int appWidgetIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.APPWI</abbr></span>
<span class="5684730079208643460" onmouseenter="enter('5684730079208643460');" onmouseout="out('5684730079208643460');" style=""><abbr title="1780                     final int appWidgetProviderIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.APPWIDGET_PROVIDER);">1780                     final int appWidgetProviderIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites</abbr></span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style="">1781                     final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);  </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style="">1782                     final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);    </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style="">1783                     final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);    </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style="">1784                     final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);    </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style="">1785                     final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);    </span>
<span class="-4872462981477900111" onmouseenter="enter('-4872462981477900111');" onmouseout="out('-4872462981477900111');" style=""><abbr title="1786                     final int restoredIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.RESTORED);">1786                     final int restoredIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.RESTORED</abbr></span>
<span class="-7743472832601810579" onmouseenter="enter('-7743472832601810579');" onmouseout="out('-7743472832601810579');" style=""><abbr title="1787                     final int profileIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.PROFILE_ID);">1787                     final int profileIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.PROFILE</abbr></span>
<span class="4456964937873623262" onmouseenter="enter('4456964937873623262');" onmouseout="out('4456964937873623262');" style="">1788                     //final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);      </span>
<span class="2905983584052764586" onmouseenter="enter('2905983584052764586');" onmouseout="out('2905983584052764586');" style="">1789                     //final int displayModeIndex = c.getColumnIndexOrThrow(                              </span>
<span class="-8556687182597342656" onmouseenter="enter('-8556687182597342656');" onmouseout="out('-8556687182597342656');" style="">1790                     //        LauncherSettings.Favorites.DISPLAY_MODE);                                  </span>
<span class="-6687913296565100881" onmouseenter="enter('-6687913296565100881');" onmouseout="out('-6687913296565100881');" style="">1791                     ShortcutInfo info;                                                                   </span>
<span class="-4294155297126257121" onmouseenter="enter('-4294155297126257121');" onmouseout="out('-4294155297126257121');" style="">1792                     String intentDescription;                                                            </span>
<span class="1875374791140575019" onmouseenter="enter('1875374791140575019');" onmouseout="out('1875374791140575019');" style="">1793                     LauncherAppWidgetInfo appWidgetInfo;                                                 </span>
<span class="-7299509265635558160" onmouseenter="enter('-7299509265635558160');" onmouseout="out('-7299509265635558160');" style="">1794                     int container;                                                                       </span>
<span class="3268793718289878117" onmouseenter="enter('3268793718289878117');" onmouseout="out('3268793718289878117');" style="">1795                     long id;                                                                             </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">1796                     Intent intent;                                                                       </span>
<span class="8928715163618104503" onmouseenter="enter('8928715163618104503');" onmouseout="out('8928715163618104503');" style="">1797                     UserHandleCompat user;                                                               </span>
<span class="1530988389269762839" onmouseenter="enter('1530988389269762839');" onmouseout="out('1530988389269762839');" style="">1798                     while ((!mStopped) &amp;&amp; c.moveToNext()) {                                              </span>
<span class="-3056870665611820276" onmouseenter="enter('-3056870665611820276');" onmouseout="out('-3056870665611820276');" style="">1799                         AtomicBoolean deleteOnInvalidPlacement = new AtomicBoolean(false);               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1800                         try {                                                                            </span>
<span class="-4443967809239824632" onmouseenter="enter('-4443967809239824632');" onmouseout="out('-4443967809239824632');" style="">1801                             int itemType = c.getInt(itemTypeIndex);                                      </span>
<span class="7426878920983746504" onmouseenter="enter('7426878920983746504');" onmouseout="out('7426878920983746504');" style="">1802                             boolean restored = 0 != c.getInt(restoredIndex);                             </span>
<span class="4933910026947534491" onmouseenter="enter('4933910026947534491');" onmouseout="out('4933910026947534491');" style="">1803                             boolean allowMissingTarget = false;                                          </span>
<span class="-5665081285487591411" onmouseenter="enter('-5665081285487591411');" onmouseout="out('-5665081285487591411');" style="">1804                             switch (itemType) {                                                          </span>
<span class="2051083265990103278" onmouseenter="enter('2051083265990103278');" onmouseout="out('2051083265990103278');" style="">1805                                 case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION :                  </span>
<span class="7475610212167087433" onmouseenter="enter('7475610212167087433');" onmouseout="out('7475610212167087433');" style="">1806                                 case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT :                     </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1807                                     id = c.getLong(idIndex);                                             </span>
<span class="8199742400390876563" onmouseenter="enter('8199742400390876563');" onmouseout="out('8199742400390876563');" style="">1808                                     intentDescription = c.getString(intentIndex);                        </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style="">1809                                     long serialNumber = c.getInt(profileIdIndex);                        </span>
<span class="-4273089527731895214" onmouseenter="enter('-4273089527731895214');" onmouseout="out('-4273089527731895214');" style="">1810                                     user = mUserManager.getUserForSerialNumber(serialNumber);            </span>
<span class="-3834292976309282984" onmouseenter="enter('-3834292976309282984');" onmouseout="out('-3834292976309282984');" style="">1811                                     int promiseType = c.getInt(restoredIndex);                           </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="">1812                                     if (user == null) {                                                  </span>
<span class="-496594084298695862" onmouseenter="enter('-496594084298695862');" onmouseout="out('-496594084298695862');" style="">1813                                         // User has been deleted remove the item.                        </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1814                                         itemsToRemove.add(id);                                           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1815                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1816                                     }                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1817                                     try {                                                                </span>
<span class="-1059471947143689601" onmouseenter="enter('-1059471947143689601');" onmouseout="out('-1059471947143689601');" style="">1818                                         intent = Intent.parseUri(intentDescription, 0);                  </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style="">1819                                         ComponentName cn = intent.getComponent();                        </span>
<span class="208716353935357302" onmouseenter="enter('208716353935357302');" onmouseout="out('208716353935357302');" style="">1820                                         if ((cn != null) &amp;&amp; (cn.getPackageName() != null)) {             </span>
<span class="3892321831818203854" onmouseenter="enter('3892321831818203854');" onmouseout="out('3892321831818203854');" style=""><abbr title="1821                                             boolean validPkg = launcherApps.isPackageEnabledForProfile(cn.getPackageName(), user);">1821                                             boolean validPkg = launcherApps.isPackageEnabledForProfile(cn</abbr></span>
<span class="-3898957463331514459" onmouseenter="enter('-3898957463331514459');" onmouseout="out('-3898957463331514459');" style=""><abbr title="1822                                             boolean validComponent = validPkg &amp;&amp; launcherApps.isActivityEnabledForProfile(cn, user);">1822                                             boolean validComponent = validPkg &amp;&amp; launcherApps.isActivityE</abbr></span>
<span class="-99499348404964068" onmouseenter="enter('-99499348404964068');" onmouseout="out('-99499348404964068');" style="">1823                                             if (validComponent) {                                        </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1824                                                 if (restored) {                                          </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="">1825                                                     // no special handling necessary for this item       </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1826                                                     restoredRows.add(id);                                </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">1827                                                     restored = false;                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1828                                                 }                                                        </span>
<span class="6348728592662235672" onmouseenter="enter('6348728592662235672');" onmouseout="out('6348728592662235672');" style="">1829                                             } else if (validPkg) {                                       </span>
<span class="-6379280176207841217" onmouseenter="enter('-6379280176207841217');" onmouseout="out('-6379280176207841217');" style="">1830                                                 intent = null;                                           </span>
<span class="-5338271721329837400" onmouseenter="enter('-5338271721329837400');" onmouseout="out('-5338271721329837400');" style=""><abbr title="1831                                                 if ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {">1831                                                 if ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != </abbr></span>
<span class="5709472974278481468" onmouseenter="enter('5709472974278481468');" onmouseout="out('5709472974278481468');" style="">1832                                                     // We allow auto install apps to have their intent   </span>
<span class="-2650685759805982432" onmouseenter="enter('-2650685759805982432');" onmouseout="out('-2650685759805982432');" style="">1833                                                     // updated after an install.                         </span>
<span class="-3857786471459911903" onmouseenter="enter('-3857786471459911903');" onmouseout="out('-3857786471459911903');" style=""><abbr title="1834                                                     intent = manager.getLaunchIntentForPackage(cn.getPackageName());">1834                                                     intent = manager.getLaunchIntentForPackage(cn.getPack</abbr></span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="">1835                                                     if (intent != null) {                                </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">1836                                                         ContentValues values = new ContentValues();      </span>
<span class="-8320415720427654785" onmouseenter="enter('-8320415720427654785');" onmouseout="out('-8320415720427654785');" style=""><abbr title="1837                                                         values.put(LauncherSettings.Favorites.INTENT, intent.toUri(0));">1837                                                         values.put(LauncherSettings.Favorites.INTENT, int</abbr></span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">1838                                                         String where = BaseColumns._ID + &quot;= ?&quot;;          </span>
<span class="-877565314819219638" onmouseenter="enter('-877565314819219638');" onmouseout="out('-877565314819219638');" style=""><abbr title="1839                                                         String[] args = new java.lang.String[]{ Long.toString(id) };">1839                                                         String[] args = new java.lang.String[]{ Long.toSt</abbr></span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style=""><abbr title="1840                                                         contentResolver.update(contentUri, values, where, args);">1840                                                         contentResolver.update(contentUri, values, where,</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1841                                                     }                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1842                                                 }                                                        </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">1843                                                 if (intent == null) {                                    </span>
<span class="8006468267706457929" onmouseenter="enter('8006468267706457929');" onmouseout="out('8006468267706457929');" style="">1844                                                     // The app is installed but the component is no      </span>
<span class="7757985899517234268" onmouseenter="enter('7757985899517234268');" onmouseout="out('7757985899517234268');" style="">1845                                                 // longer available.                                     </span>
<span class="-1191782257252614792" onmouseenter="enter('-1191782257252614792');" onmouseout="out('-1191782257252614792');" style=""><abbr title="1846                                                     Launcher.addDumpLog(TAG, &quot;Invalid component removed: &quot; + cn, true);">1846                                                     Launcher.addDumpLog(TAG, &quot;Invalid component removed: </abbr></span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1847                                                     itemsToRemove.add(id);                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1848                                                     continue;                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1849                                                 } else {                                                 </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="">1850                                                     // no special handling necessary for this item       </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1851                                                     restoredRows.add(id);                                </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">1852                                                     restored = false;                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1853                                                 }                                                        </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="">1854                                             } else if (restored) {                                       </span>
<span class="6723757088957997679" onmouseenter="enter('6723757088957997679');" onmouseout="out('6723757088957997679');" style="">1855                                             // Package is not yet available but might be                 </span>
<span class="9210943103787239320" onmouseenter="enter('9210943103787239320');" onmouseout="out('9210943103787239320');" style="">1856                                             // installed later.                                          </span>
<span class="-6838802539582446987" onmouseenter="enter('-6838802539582446987');" onmouseout="out('-6838802539582446987');" style=""><abbr title="1857                                                 Launcher.addDumpLog(TAG, &quot;package not yet restored: &quot; + cn, true);">1857                                                 Launcher.addDumpLog(TAG, &quot;package not yet restored: &quot; + c</abbr></span>
<span class="-3623786309000722140" onmouseenter="enter('-3623786309000722140');" onmouseout="out('-3623786309000722140');" style=""><abbr title="1858                                                 if ((promiseType &amp; ShortcutInfo.FLAG_RESTORE_STARTED) != 0) {">1858                                                 if ((promiseType &amp; ShortcutInfo.FLAG_RESTORE_STARTED) != </abbr></span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="">1859                                                     // Restore has started once.                         </span>
<span class="-3201378748433506719" onmouseenter="enter('-3201378748433506719');" onmouseout="out('-3201378748433506719');" style=""><abbr title="1860                                                 } else if (installingPkgs.contains(cn.getPackageName())) {">1860                                                 } else if (installingPkgs.contains(cn.getPackageName())) </abbr></span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="">1861                                                     // App restore has started. Update the flag          </span>
<span class="-8644667183049601729" onmouseenter="enter('-8644667183049601729');" onmouseout="out('-8644667183049601729');" style="">1862                                                     promiseType |= ShortcutInfo.FLAG_RESTORE_STARTED;    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">1863                                                     ContentValues values = new ContentValues();          </span>
<span class="2342985097816451440" onmouseenter="enter('2342985097816451440');" onmouseout="out('2342985097816451440');" style=""><abbr title="1864                                                     values.put(LauncherSettings.Favorites.RESTORED, promiseType);">1864                                                     values.put(LauncherSettings.Favorites.RESTORED, promi</abbr></span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">1865                                                     String where = BaseColumns._ID + &quot;= ?&quot;;              </span>
<span class="-877565314819219638" onmouseenter="enter('-877565314819219638');" onmouseout="out('-877565314819219638');" style=""><abbr title="1866                                                     String[] args = new java.lang.String[]{ Long.toString(id) };">1866                                                     String[] args = new java.lang.String[]{ Long.toString</abbr></span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style=""><abbr title="1867                                                     contentResolver.update(contentUri, values, where, args);">1867                                                     contentResolver.update(contentUri, values, where, arg</abbr></span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="">1868                                                 } else if (REMOVE_UNRESTORED_ICONS) {                    </span>
<span class="-2584532676333992238" onmouseenter="enter('-2584532676333992238');" onmouseout="out('-2584532676333992238');" style=""><abbr title="1869                                                     Launcher.addDumpLog(TAG, &quot;Unrestored package removed: &quot; + cn, true);">1869                                                     Launcher.addDumpLog(TAG, &quot;Unrestored package removed:</abbr></span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1870                                                     itemsToRemove.add(id);                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1871                                                     continue;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1872                                                 }                                                        </span>
<span class="-1386874848571608329" onmouseenter="enter('-1386874848571608329');" onmouseout="out('-1386874848571608329');" style="">1873                                             } else if (isSdCardReady) {                                  </span>
<span class="3796946079469102110" onmouseenter="enter('3796946079469102110');" onmouseout="out('3796946079469102110');" style="">1874                                             // Do not wait for external media load anymore.              </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="">1875                                                 // Log the invalid package, and remove it                </span>
<span class="-8862555937828848407" onmouseenter="enter('-8862555937828848407');" onmouseout="out('-8862555937828848407');" style=""><abbr title="1876                                                 Launcher.addDumpLog(TAG, &quot;Invalid package removed: &quot; + cn, true);">1876                                                 Launcher.addDumpLog(TAG, &quot;Invalid package removed: &quot; + cn</abbr></span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1877                                                 itemsToRemove.add(id);                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1878                                                 continue;                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1879                                             } else {                                                     </span>
<span class="1407932970386463384" onmouseenter="enter('1407932970386463384');" onmouseout="out('1407932970386463384');" style="">1880                                                 // SdCard is not ready yet. Package might get available, </span>
<span class="8490114520358161793" onmouseenter="enter('8490114520358161793');" onmouseout="out('8490114520358161793');" style="">1881                                                 // once it is ready.                                     </span>
<span class="3864451290968093136" onmouseenter="enter('3864451290968093136');" onmouseout="out('3864451290968093136');" style=""><abbr title="1882                                                 Launcher.addDumpLog(TAG, (&quot;Invalid package: &quot; + cn) + &quot; (check again later)&quot;, true);">1882                                                 Launcher.addDumpLog(TAG, (&quot;Invalid package: &quot; + cn) + &quot; (</abbr></span>
<span class="-8366417370187832083" onmouseenter="enter('-8366417370187832083');" onmouseout="out('-8366417370187832083');" style="">1883                                                 HashSet&lt;String&gt; pkgs = sPendingPackages.get(user);       </span>
<span class="3542388323197199472" onmouseenter="enter('3542388323197199472');" onmouseout="out('3542388323197199472');" style="">1884                                                 if (pkgs == null) {                                      </span>
<span class="2501092745877296895" onmouseenter="enter('2501092745877296895');" onmouseout="out('2501092745877296895');" style="">1885                                                     pkgs = new HashSet&lt;String&gt;();                        </span>
<span class="-7473793273553333759" onmouseenter="enter('-7473793273553333759');" onmouseout="out('-7473793273553333759');" style="">1886                                                     sPendingPackages.put(user, pkgs);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1887                                                 }                                                        </span>
<span class="-4896386049384421066" onmouseenter="enter('-4896386049384421066');" onmouseout="out('-4896386049384421066');" style="">1888                                                 pkgs.add(cn.getPackageName());                           </span>
<span class="-7690684901319719205" onmouseenter="enter('-7690684901319719205');" onmouseout="out('-7690684901319719205');" style="">1889                                                 allowMissingTarget = true;                               </span>
<span class="7315818939061071709" onmouseenter="enter('7315818939061071709');" onmouseout="out('7315818939061071709');" style="">1890                                             // Add the icon on the workspace anyway.                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1891                                             }                                                            </span>
<span class="-237996807879267337" onmouseenter="enter('-237996807879267337');" onmouseout="out('-237996807879267337');" style="">1892                                         } else if (cn == null) {                                         </span>
<span class="8972274794412921183" onmouseenter="enter('8972274794412921183');" onmouseout="out('8972274794412921183');" style="">1893                                             // For shortcuts with no component, keep them as they are    </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1894                                             restoredRows.add(id);                                        </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">1895                                             restored = false;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1896                                         }                                                                </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1897                                     } catch (URISyntaxException e) {                                     </span>
<span class="-4515130284142080718" onmouseenter="enter('-4515130284142080718');" onmouseout="out('-4515130284142080718');" style=""><abbr title="1898                                         Launcher.addDumpLog(TAG, &quot;Invalid uri: &quot; + intentDescription, true);">1898                                         Launcher.addDumpLog(TAG, &quot;Invalid uri: &quot; + intentDescription, tru</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1899                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1900                                     }                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1901                                     if (restored) {                                                      </span>
<span class="-3932834939055806292" onmouseenter="enter('-3932834939055806292');" onmouseout="out('-3932834939055806292');" style="">1902                                         if (user.equals(UserHandleCompat.myUserHandle())) {              </span>
<span class="1357336281275541127" onmouseenter="enter('1357336281275541127');" onmouseout="out('1357336281275541127');" style=""><abbr title="1903                                             Launcher.addDumpLog(TAG, &quot;constructing info for partially restored package&quot;, true);">1903                                             Launcher.addDumpLog(TAG, &quot;constructing info for partially res</abbr></span>
<span class="9114514411241404985" onmouseenter="enter('9114514411241404985');" onmouseout="out('9114514411241404985');" style=""><abbr title="1904                                             info = getRestoredItemInfo(c, titleIndex, intent, promiseType);">1904                                             info = getRestoredItemInfo(c, titleIndex, intent, promiseType</abbr></span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="">1905                                             intent = getRestoredItemIntent(c, context, intent);          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1906                                         } else {                                                         </span>
<span class="5174235078557753913" onmouseenter="enter('5174235078557753913');" onmouseout="out('5174235078557753913');" style="">1907                                             // Don&#x27;t restore items for other profiles.                   </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1908                                             itemsToRemove.add(id);                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1909                                             continue;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1910                                         }                                                                </span>
<span class="2236923880514106756" onmouseenter="enter('2236923880514106756');" onmouseout="out('2236923880514106756');" style=""><abbr title="1911                                     } else if (itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {">1911                                     } else if (itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATI</abbr></span>
<span class="-7752513448790764873" onmouseenter="enter('-7752513448790764873');" onmouseout="out('-7752513448790764873');" style=""><abbr title="1912                                         info = getShortcutInfo(manager, intent, user, context, c, iconIndex, titleIndex, mLabelCache, allowMissingTarget);">1912                                         info = getShortcutInfo(manager, intent, user, context, c, iconInd</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1913                                     } else {                                                             </span>
<span class="-5390602608011791340" onmouseenter="enter('-5390602608011791340');" onmouseout="out('-5390602608011791340');" style=""><abbr title="1914                                         info = getShortcutInfo(c, context, iconTypeIndex, iconPackageIndex, iconResourceIndex, iconIndex, titleIndex);">1914                                         info = getShortcutInfo(c, context, iconTypeIndex, iconPackageInde</abbr></span>
<span class="8787316375412349400" onmouseenter="enter('8787316375412349400');" onmouseout="out('8787316375412349400');" style="">1915                                     // App shortcuts that used to be automatically added to Launcher     </span>
<span class="4423348586531939182" onmouseenter="enter('4423348586531939182');" onmouseout="out('4423348586531939182');" style="">1916                                     // didn&#x27;t always have the correct intent flags set, so do that       </span>
<span class="906874877447394391" onmouseenter="enter('906874877447394391');" onmouseout="out('906874877447394391');" style="">1917                                     // here                                                              </span>
<span class="-3656991395984310113" onmouseenter="enter('-3656991395984310113');" onmouseout="out('-3656991395984310113');" style=""><abbr title="1918                                         if ((((intent.getAction() != null) &amp;&amp; (intent.getCategories() != null)) &amp;&amp; intent.getAction().equals(Intent.ACTION_MAIN)) &amp;&amp; intent.getCategories().contains(Intent.CATEGORY_LAUNCHER)) {">1918                                         if ((((intent.getAction() != null) &amp;&amp; (intent.getCategories() != </abbr></span>
<span class="-2343040772585959990" onmouseenter="enter('-2343040772585959990');" onmouseout="out('-2343040772585959990');" style=""><abbr title="1919                                             intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);">1919                                             intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_A</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1920                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1921                                     }                                                                    </span>
<span class="-1845287058566655413" onmouseenter="enter('-1845287058566655413');" onmouseout="out('-1845287058566655413');" style="">1922                                     if (info != null) {                                                  </span>
<span class="-7372776081672801393" onmouseenter="enter('-7372776081672801393');" onmouseout="out('-7372776081672801393');" style="">1923                                         info.id = id;                                                    </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">1924                                         info.intent = intent;                                            </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1925                                         container = c.getInt(containerIndex);                            </span>
<span class="5031599210604047094" onmouseenter="enter('5031599210604047094');" onmouseout="out('5031599210604047094');" style="">1926                                         info.container = container;                                      </span>
<span class="8385513109144822406" onmouseenter="enter('8385513109144822406');" onmouseout="out('8385513109144822406');" style="">1927                                         info.screenId = c.getInt(screenIndex);                           </span>
<span class="8733666235794055799" onmouseenter="enter('8733666235794055799');" onmouseout="out('8733666235794055799');" style="">1928                                         info.cellX = c.getInt(cellXIndex);                               </span>
<span class="4988345900238836581" onmouseenter="enter('4988345900238836581');" onmouseout="out('4988345900238836581');" style="">1929                                         info.cellY = c.getInt(cellYIndex);                               </span>
<span class="6314319831626461685" onmouseenter="enter('6314319831626461685');" onmouseout="out('6314319831626461685');" style="">1930                                         info.spanX = 1;                                                  </span>
<span class="-7635592400178984643" onmouseenter="enter('-7635592400178984643');" onmouseout="out('-7635592400178984643');" style="">1931                                         info.spanY = 1;                                                  </span>
<span class="3045271753555441709" onmouseenter="enter('3045271753555441709');" onmouseout="out('3045271753555441709');" style="">1932                                         info.intent.putExtra(ItemInfo.EXTRA_PROFILE, serialNumber);      </span>
<span class="7150962943077039018" onmouseenter="enter('7150962943077039018');" onmouseout="out('7150962943077039018');" style=""><abbr title="1933                                         info.isDisabled = isSafeMode &amp;&amp; (!Utilities.isSystemApp(context, intent));">1933                                         info.isDisabled = isSafeMode &amp;&amp; (!Utilities.isSystemApp(context, </abbr></span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1934                                         // check &amp; update map of what&#x27;s occupied                         </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1935                                         deleteOnInvalidPlacement.set(false);                             </span>
<span class="8488570468437690238" onmouseenter="enter('8488570468437690238');" onmouseout="out('8488570468437690238');" style=""><abbr title="1936                                         if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)) {">1936                                         if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)</abbr></span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1937                                             if (deleteOnInvalidPlacement.get()) {                        </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1938                                                 itemsToRemove.add(id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1939                                             }                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1940                                             break;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1941                                         }                                                                </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">1942                                         switch (container) {                                             </span>
<span class="-243737165652948931" onmouseenter="enter('-243737165652948931');" onmouseout="out('-243737165652948931');" style="">1943                                             case LauncherSettings.Favorites.CONTAINER_DESKTOP :          </span>
<span class="8878956388033266606" onmouseenter="enter('8878956388033266606');" onmouseout="out('8878956388033266606');" style="">1944                                             case LauncherSettings.Favorites.CONTAINER_HOTSEAT :          </span>
<span class="-3665356032627215639" onmouseenter="enter('-3665356032627215639');" onmouseout="out('-3665356032627215639');" style="">1945                                                 sBgWorkspaceItems.add(info);                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1946                                                 break;                                                   </span>
<span class="3050734735710613783" onmouseenter="enter('3050734735710613783');" onmouseout="out('3050734735710613783');" style="">1947                                             default :                                                    </span>
<span class="3928258456344537563" onmouseenter="enter('3928258456344537563');" onmouseout="out('3928258456344537563');" style="">1948                                         // Item is in a user folder                                      </span>
<span class="2628004221817599267" onmouseenter="enter('2628004221817599267');" onmouseout="out('2628004221817599267');" style=""><abbr title="1949                                                 FolderInfo folderInfo = findOrMakeFolder(sBgFolders, container);">1949                                                 FolderInfo folderInfo = findOrMakeFolder(sBgFolders, cont</abbr></span>
<span class="4210631970925384436" onmouseenter="enter('4210631970925384436');" onmouseout="out('4210631970925384436');" style="">1950                                                 folderInfo.add(info);                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1951                                                 break;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1952                                         }                                                                </span>
<span class="-3593974647070903374" onmouseenter="enter('-3593974647070903374');" onmouseout="out('-3593974647070903374');" style="">1953                                         sBgItemsIdMap.put(info.id, info);                                </span>
<span class="-8292894264257510493" onmouseenter="enter('-8292894264257510493');" onmouseout="out('-8292894264257510493');" style="">1954                                         // now that we&#x27;ve loaded everthing re-save it with the           </span>
<span class="-1917607236140731811" onmouseenter="enter('-1917607236140731811');" onmouseout="out('-1917607236140731811');" style="">1955                                         // icon in case it disappears somehow.                           </span>
<span class="-3056528193758781985" onmouseenter="enter('-3056528193758781985');" onmouseout="out('-3056528193758781985');" style="">1956                                         queueIconToBeChecked(sBgDbIconCache, info, c, iconIndex);        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1957                                     } else {                                                             </span>
<span class="477637279977673890" onmouseenter="enter('477637279977673890');" onmouseout="out('477637279977673890');" style="">1958                                         throw new RuntimeException(&quot;Unexpected null ShortcutInfo&quot;);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1959                                     }                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1960                                     break;                                                               </span>
<span class="-8875317450551009164" onmouseenter="enter('-8875317450551009164');" onmouseout="out('-8875317450551009164');" style="">1961                                 case LauncherSettings.Favorites.ITEM_TYPE_FOLDER :                       </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1962                                     id = c.getLong(idIndex);                                             </span>
<span class="-711784092642716417" onmouseenter="enter('-711784092642716417');" onmouseout="out('-711784092642716417');" style="">1963                                     FolderInfo folderInfo = findOrMakeFolder(sBgFolders, id);            </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">1964                                     folderInfo.title = c.getString(titleIndex);                          </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">1965                                     folderInfo.id = id;                                                  </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1966                                     container = c.getInt(containerIndex);                                </span>
<span class="-7029361904102133577" onmouseenter="enter('-7029361904102133577');" onmouseout="out('-7029361904102133577');" style="">1967                                     folderInfo.container = container;                                    </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">1968                                     folderInfo.screenId = c.getInt(screenIndex);                         </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">1969                                     folderInfo.cellX = c.getInt(cellXIndex);                             </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">1970                                     folderInfo.cellY = c.getInt(cellYIndex);                             </span>
<span class="5610283855861400391" onmouseenter="enter('5610283855861400391');" onmouseout="out('5610283855861400391');" style="">1971                                     folderInfo.spanX = 1;                                                </span>
<span class="-3495026741287589829" onmouseenter="enter('-3495026741287589829');" onmouseout="out('-3495026741287589829');" style="">1972                                     folderInfo.spanY = 1;                                                </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1973                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1974                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="-1509179358414071002" onmouseenter="enter('-1509179358414071002');" onmouseout="out('-1509179358414071002');" style=""><abbr title="1975                                     if (!checkItemPlacement(occupied, folderInfo, deleteOnInvalidPlacement)) {">1975                                     if (!checkItemPlacement(occupied, folderInfo, deleteOnInvalidPlacemen</abbr></span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1976                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1977                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1978                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1979                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1980                                     }                                                                    </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">1981                                     switch (container) {                                                 </span>
<span class="-243737165652948931" onmouseenter="enter('-243737165652948931');" onmouseout="out('-243737165652948931');" style="">1982                                         case LauncherSettings.Favorites.CONTAINER_DESKTOP :              </span>
<span class="8878956388033266606" onmouseenter="enter('8878956388033266606');" onmouseout="out('8878956388033266606');" style="">1983                                         case LauncherSettings.Favorites.CONTAINER_HOTSEAT :              </span>
<span class="-8699935089398023363" onmouseenter="enter('-8699935089398023363');" onmouseout="out('-8699935089398023363');" style="">1984                                             sBgWorkspaceItems.add(folderInfo);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1985                                             break;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1986                                     }                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1987                                     if (restored) {                                                      </span>
<span class="-4442362781295313201" onmouseenter="enter('-4442362781295313201');" onmouseout="out('-4442362781295313201');" style="">1988                                         // no special handling required for restored folders             </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1989                                         restoredRows.add(id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1990                                     }                                                                    </span>
<span class="-3375208674862622715" onmouseenter="enter('-3375208674862622715');" onmouseout="out('-3375208674862622715');" style="">1991                                     sBgItemsIdMap.put(folderInfo.id, folderInfo);                        </span>
<span class="642717865586237287" onmouseenter="enter('642717865586237287');" onmouseout="out('642717865586237287');" style="">1992                                     sBgFolders.put(folderInfo.id, folderInfo);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1993                                     break;                                                               </span>
<span class="-572090049804539709" onmouseenter="enter('-572090049804539709');" onmouseout="out('-572090049804539709');" style="">1994                                 case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET :                    </span>
<span class="-7956270215965694003" onmouseenter="enter('-7956270215965694003');" onmouseout="out('-7956270215965694003');" style="">1995                                     // Read all Launcher-specific widget details                         </span>
<span class="-1812352292626846958" onmouseenter="enter('-1812352292626846958');" onmouseout="out('-1812352292626846958');" style="">1996                                     int appWidgetId = c.getInt(appWidgetIdIndex);                        </span>
<span class="7731617805561144619" onmouseenter="enter('7731617805561144619');" onmouseout="out('7731617805561144619');" style="">1997                                     String savedProvider = c.getString(appWidgetProviderIndex);          </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1998                                     id = c.getLong(idIndex);                                             </span>
<span class="8078083586659843378" onmouseenter="enter('8078083586659843378');" onmouseout="out('8078083586659843378');" style=""><abbr title="1999                                     final ComponentName component = ComponentName.unflattenFromString(savedProvider);">1999                                     final ComponentName component = ComponentName.unflattenFromString(sav</abbr></span>
<span class="-1033311611191387821" onmouseenter="enter('-1033311611191387821');" onmouseout="out('-1033311611191387821');" style="">2000                                     final int restoreStatus = c.getInt(restoredIndex);                   </span>
<span class="6018676020162178" onmouseenter="enter('6018676020162178');" onmouseout="out('6018676020162178');" style=""><abbr title="2001                                     final boolean isIdValid = (restoreStatus &amp; LauncherAppWidgetInfo.FLAG_ID_NOT_VALID) == 0;">2001                                     final boolean isIdValid = (restoreStatus &amp; LauncherAppWidgetInfo.FLAG</abbr></span>
<span class="4606105832212378930" onmouseenter="enter('4606105832212378930');" onmouseout="out('4606105832212378930');" style=""><abbr title="2002                                     final boolean wasProviderReady = (restoreStatus &amp; LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY) == 0;">2002                                     final boolean wasProviderReady = (restoreStatus &amp; LauncherAppWidgetIn</abbr></span>
<span class="-8926252082554534344" onmouseenter="enter('-8926252082554534344');" onmouseout="out('-8926252082554534344');" style=""><abbr title="2003                                     final AppWidgetProviderInfo provider = (isIdValid) ? widgets.getAppWidgetInfo(appWidgetId) : findAppWidgetProviderInfoWithComponent(context, component);">2003                                     final AppWidgetProviderInfo provider = (isIdValid) ? widgets.getAppWi</abbr></span>
<span class="-3732530231777271434" onmouseenter="enter('-3732530231777271434');" onmouseout="out('-3732530231777271434');" style="">2004                                     final boolean isProviderReady = isValidProvider(provider);           </span>
<span class="-1680607524275900953" onmouseenter="enter('-1680607524275900953');" onmouseout="out('-1680607524275900953');" style="">2005                                     if (((!isSafeMode) &amp;&amp; wasProviderReady) &amp;&amp; (!isProviderReady)) {     </span>
<span class="-616275105154599843" onmouseenter="enter('-616275105154599843');" onmouseout="out('-616275105154599843');" style=""><abbr title="2006                                         String log = (((&quot;Deleting widget that isn\&#x27;t installed anymore: &quot; + &quot;id=&quot;) + id) + &quot; appWidgetId=&quot;) + appWidgetId;">2006                                         String log = (((&quot;Deleting widget that isn\&#x27;t installed anymore: &quot;</abbr></span>
<span class="-1161653447976501517" onmouseenter="enter('-1161653447976501517');" onmouseout="out('-1161653447976501517');" style="">2007                                         Log.e(TAG, log);                                                 </span>
<span class="-8769286334876902652" onmouseenter="enter('-8769286334876902652');" onmouseout="out('-8769286334876902652');" style="">2008                                         Launcher.addDumpLog(TAG, log, false);                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2009                                         itemsToRemove.add(id);                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2010                                     } else {                                                             </span>
<span class="-6990378869891346567" onmouseenter="enter('-6990378869891346567');" onmouseout="out('-6990378869891346567');" style="">2011                                         if (isProviderReady) {                                           </span>
<span class="8729577948298719872" onmouseenter="enter('8729577948298719872');" onmouseout="out('8729577948298719872');" style=""><abbr title="2012                                             appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId, provider.provider);">2012                                             appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId, provid</abbr></span>
<span class="-5791068135067534357" onmouseenter="enter('-5791068135067534357');" onmouseout="out('-5791068135067534357');" style=""><abbr title="2013                                             int[] minSpan = Launcher.getMinSpanForWidget(context, provider);">2013                                             int[] minSpan = Launcher.getMinSpanForWidget(context, provide</abbr></span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="">2014                                             appWidgetInfo.minSpanX = minSpan[0];                         </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="">2015                                             appWidgetInfo.minSpanY = minSpan[1];                         </span>
<span class="-4125236257298908421" onmouseenter="enter('-4125236257298908421');" onmouseout="out('-4125236257298908421');" style="">2016                                             int status = restoreStatus;                                  </span>
<span class="7579397535150427943" onmouseenter="enter('7579397535150427943');" onmouseout="out('7579397535150427943');" style="">2017                                             if (!wasProviderReady) {                                     </span>
<span class="1257696726614810242" onmouseenter="enter('1257696726614810242');" onmouseout="out('1257696726614810242');" style="">2018                                                 // If provider was not previously ready, update the      </span>
<span class="2493747474831820434" onmouseenter="enter('2493747474831820434');" onmouseout="out('2493747474831820434');" style="">2019                                                 // status and UI flag.                                   </span>
<span class="-551194396664004778" onmouseenter="enter('-551194396664004778');" onmouseout="out('-551194396664004778');" style=""><abbr title="2020                                                 // Id would be valid only if the widget restore broadcast was received.">2020                                                 // Id would be valid only if the widget restore broadcast</abbr></span>
<span class="877884548755909685" onmouseenter="enter('877884548755909685');" onmouseout="out('877884548755909685');" style="">2021                                                 if (isIdValid) {                                         </span>
<span class="7708410681175562751" onmouseenter="enter('7708410681175562751');" onmouseout="out('7708410681175562751');" style="">2022                                                     status = LauncherAppWidgetInfo.RESTORE_COMPLETED;    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2023                                                 } else {                                                 </span>
<span class="5542564558278520017" onmouseenter="enter('5542564558278520017');" onmouseout="out('5542564558278520017');" style=""><abbr title="2024                                                     status &amp;= ~LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY;">2024                                                     status &amp;= ~LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_RE</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2025                                                 }                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2026                                             }                                                            </span>
<span class="-5649718664209503492" onmouseenter="enter('-5649718664209503492');" onmouseout="out('-5649718664209503492');" style="">2027                                             appWidgetInfo.restoreStatus = status;                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2028                                         } else {                                                         </span>
<span class="-2966831558437823751" onmouseenter="enter('-2966831558437823751');" onmouseout="out('-2966831558437823751');" style=""><abbr title="2029                                             Log.v(TAG, ((((&quot;Widget restore pending id=&quot; + id) + &quot; appWidgetId=&quot;) + appWidgetId) + &quot; status =&quot;) + restoreStatus);">2029                                             Log.v(TAG, ((((&quot;Widget restore pending id=&quot; + id) + &quot; appWidg</abbr></span>
<span class="-5139724698281222051" onmouseenter="enter('-5139724698281222051');" onmouseout="out('-5139724698281222051');" style=""><abbr title="2030                                             appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId, component);">2030                                             appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId, compon</abbr></span>
<span class="5437344546404607904" onmouseenter="enter('5437344546404607904');" onmouseout="out('5437344546404607904');" style="">2031                                             appWidgetInfo.restoreStatus = restoreStatus;                 </span>
<span class="3064749011557231100" onmouseenter="enter('3064749011557231100');" onmouseout="out('3064749011557231100');" style=""><abbr title="2032                                             if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_STARTED) != 0) {">2032                                             if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_START</abbr></span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="">2033                                                 // Restore has started once.                             </span>
<span class="1863960885189711466" onmouseenter="enter('1863960885189711466');" onmouseout="out('1863960885189711466');" style=""><abbr title="2034                                             } else if (installingPkgs.contains(component.getPackageName())) {">2034                                             } else if (installingPkgs.contains(component.getPackageName()</abbr></span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="">2035                                                 // App restore has started. Update the flag              </span>
<span class="4536365230915659225" onmouseenter="enter('4536365230915659225');" onmouseout="out('4536365230915659225');" style=""><abbr title="2036                                                 appWidgetInfo.restoreStatus |= LauncherAppWidgetInfo.FLAG_RESTORE_STARTED;">2036                                                 appWidgetInfo.restoreStatus |= LauncherAppWidgetInfo.FLAG</abbr></span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="">2037                                             } else if (REMOVE_UNRESTORED_ICONS) {                        </span>
<span class="-3060823902277116949" onmouseenter="enter('-3060823902277116949');" onmouseout="out('-3060823902277116949');" style=""><abbr title="2038                                                 Launcher.addDumpLog(TAG, &quot;Unrestored widget removed: &quot; + component, true);">2038                                                 Launcher.addDumpLog(TAG, &quot;Unrestored widget removed: &quot; + </abbr></span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2039                                                 itemsToRemove.add(id);                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2040                                                 continue;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2041                                             }                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2042                                         }                                                                </span>
<span class="-3490214853915757695" onmouseenter="enter('-3490214853915757695');" onmouseout="out('-3490214853915757695');" style="">2043                                         appWidgetInfo.id = id;                                           </span>
<span class="-299823112742514494" onmouseenter="enter('-299823112742514494');" onmouseout="out('-299823112742514494');" style="">2044                                         appWidgetInfo.screenId = c.getInt(screenIndex);                  </span>
<span class="-3031374252236192886" onmouseenter="enter('-3031374252236192886');" onmouseout="out('-3031374252236192886');" style="">2045                                         appWidgetInfo.cellX = c.getInt(cellXIndex);                      </span>
<span class="-6373958662014470902" onmouseenter="enter('-6373958662014470902');" onmouseout="out('-6373958662014470902');" style="">2046                                         appWidgetInfo.cellY = c.getInt(cellYIndex);                      </span>
<span class="-1172974300892817728" onmouseenter="enter('-1172974300892817728');" onmouseout="out('-1172974300892817728');" style="">2047                                         appWidgetInfo.spanX = c.getInt(spanXIndex);                      </span>
<span class="948367348399442562" onmouseenter="enter('948367348399442562');" onmouseout="out('948367348399442562');" style="">2048                                         appWidgetInfo.spanY = c.getInt(spanYIndex);                      </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2049                                         container = c.getInt(containerIndex);                            </span>
<span class="-4050334248407940033" onmouseenter="enter('-4050334248407940033');" onmouseout="out('-4050334248407940033');" style=""><abbr title="2050                                         if ((container != LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (container != LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {">2050                                         if ((container != LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;</abbr></span>
<span class="7404652805162444756" onmouseenter="enter('7404652805162444756');" onmouseout="out('7404652805162444756');" style=""><abbr title="2051                                             Log.e(TAG, &quot;Widget found where container != &quot; + &quot;CONTAINER_DESKTOP nor CONTAINER_HOTSEAT - ignoring!&quot;);">2051                                             Log.e(TAG, &quot;Widget found where container != &quot; + &quot;CONTAINER_DE</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2052                                             continue;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2053                                         }                                                                </span>
<span class="3497044279011134930" onmouseenter="enter('3497044279011134930');" onmouseout="out('3497044279011134930');" style="">2054                                         appWidgetInfo.container = c.getInt(containerIndex);              </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2055                                         // check &amp; update map of what&#x27;s occupied                         </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2056                                         deleteOnInvalidPlacement.set(false);                             </span>
<span class="624158001295943608" onmouseenter="enter('624158001295943608');" onmouseout="out('624158001295943608');" style=""><abbr title="2057                                         if (!checkItemPlacement(occupied, appWidgetInfo, deleteOnInvalidPlacement)) {">2057                                         if (!checkItemPlacement(occupied, appWidgetInfo, deleteOnInvalidP</abbr></span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2058                                             if (deleteOnInvalidPlacement.get()) {                        </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2059                                                 itemsToRemove.add(id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2060                                             }                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2061                                             break;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2062                                         }                                                                </span>
<span class="-8698298148744232980" onmouseenter="enter('-8698298148744232980');" onmouseout="out('-8698298148744232980');" style=""><abbr title="2063                                         String providerName = appWidgetInfo.providerName.flattenToString();">2063                                         String providerName = appWidgetInfo.providerName.flattenToString(</abbr></span>
<span class="-946247368616463127" onmouseenter="enter('-946247368616463127');" onmouseout="out('-946247368616463127');" style=""><abbr title="2064                                         if ((!providerName.equals(savedProvider)) || (appWidgetInfo.restoreStatus != restoreStatus)) {">2064                                         if ((!providerName.equals(savedProvider)) || (appWidgetInfo.resto</abbr></span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2065                                             ContentValues values = new ContentValues();                  </span>
<span class="4458189258819483671" onmouseenter="enter('4458189258819483671');" onmouseout="out('4458189258819483671');" style=""><abbr title="2066                                             values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER, providerName);">2066                                             values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER, pro</abbr></span>
<span class="-1553795309378945639" onmouseenter="enter('-1553795309378945639');" onmouseout="out('-1553795309378945639');" style=""><abbr title="2067                                             values.put(LauncherSettings.Favorites.RESTORED, appWidgetInfo.restoreStatus);">2067                                             values.put(LauncherSettings.Favorites.RESTORED, appWidgetInfo</abbr></span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2068                                             String where = BaseColumns._ID + &quot;= ?&quot;;                      </span>
<span class="-877565314819219638" onmouseenter="enter('-877565314819219638');" onmouseout="out('-877565314819219638');" style="">2069                                             String[] args = new java.lang.String[]{ Long.toString(id) }; </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2070                                             contentResolver.update(contentUri, values, where, args);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2071                                         }                                                                </span>
<span class="-5618854840311135348" onmouseenter="enter('-5618854840311135348');" onmouseout="out('-5618854840311135348');" style="">2072                                         sBgItemsIdMap.put(appWidgetInfo.id, appWidgetInfo);              </span>
<span class="-6085617845739613540" onmouseenter="enter('-6085617845739613540');" onmouseout="out('-6085617845739613540');" style="">2073                                         sBgAppWidgets.add(appWidgetInfo);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2074                                     }                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2075                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2076                             }                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">2077                         } catch (java.lang.Exception e) {                                                </span>
<span class="5473197829797399592" onmouseenter="enter('5473197829797399592');" onmouseout="out('5473197829797399592');" style="">2078                             Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted&quot;, e, true);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2079                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2080                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2081                 } finally {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2082                     if (c != null) {                                                                     </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2083                         c.close();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2084                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2085                 }                                                                                        </span>
<span class="3320499870953658089" onmouseenter="enter('3320499870953658089');" onmouseout="out('3320499870953658089');" style="">2086                 // Break early if we&#x27;ve stopped loading                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2087                 if (mStopped) {                                                                          </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2088                     clearSBgDataStructures();                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2089                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2090                 }                                                                                        </span>
<span class="-1044970196577970229" onmouseenter="enter('-1044970196577970229');" onmouseout="out('-1044970196577970229');" style="">2091                 if (itemsToRemove.size() &gt; 0) {                                                          </span>
<span class="-2731141380071723207" onmouseenter="enter('-2731141380071723207');" onmouseout="out('-2731141380071723207');" style=""><abbr title="2092                     ContentProviderClient client = contentResolver.acquireContentProviderClient(contentUri);">2092                     ContentProviderClient client = contentResolver.acquireContentProviderClient(contentUr</abbr></span>
<span class="-6328990658741073682" onmouseenter="enter('-6328990658741073682');" onmouseout="out('-6328990658741073682');" style="">2093                     // Remove dead items                                                                 </span>
<span class="-2206673557334024830" onmouseenter="enter('-2206673557334024830');" onmouseout="out('-2206673557334024830');" style="">2094                     for (long id : itemsToRemove) {                                                      </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2095                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1693656419727492070" onmouseenter="enter('1693656419727492070');" onmouseout="out('1693656419727492070');" style="">2096                             Log.d(TAG, &quot;Removed id = &quot; + id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2097                         }                                                                                </span>
<span class="-756547997470617115" onmouseenter="enter('-756547997470617115');" onmouseout="out('-756547997470617115');" style="">2098                         // Don&#x27;t notify content observers                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2099                         try {                                                                            </span>
<span class="-8377090628300712682" onmouseenter="enter('-8377090628300712682');" onmouseout="out('-8377090628300712682');" style=""><abbr title="2100                             client.delete(LauncherSettings.Favorites.getContentUri(id, false), null, null);">2100                             client.delete(LauncherSettings.Favorites.getContentUri(id, false), null, null</abbr></span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2101                         } catch (RemoteException e) {                                                    </span>
<span class="1576133554677134200" onmouseenter="enter('1576133554677134200');" onmouseout="out('1576133554677134200');" style="">2102                             Log.w(TAG, &quot;Could not remove id = &quot; + id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2103                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2104                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2105                 }                                                                                        </span>
<span class="5384601782943406631" onmouseenter="enter('5384601782943406631');" onmouseout="out('5384601782943406631');" style="">2106                 if (restoredRows.size() &gt; 0) {                                                           </span>
<span class="5371064053707697179" onmouseenter="enter('5371064053707697179');" onmouseout="out('5371064053707697179');" style=""><abbr title="2107                     ContentProviderClient updater = contentResolver.acquireContentProviderClient(contentUri);">2107                     ContentProviderClient updater = contentResolver.acquireContentProviderClient(contentU</abbr></span>
<span class="7218829760546841504" onmouseenter="enter('7218829760546841504');" onmouseout="out('7218829760546841504');" style="">2108                     // Update restored items that no longer require special handling                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2109                     try {                                                                                </span>
<span class="-9131750597640912652" onmouseenter="enter('-9131750597640912652');" onmouseout="out('-9131750597640912652');" style="">2110                         StringBuilder selectionBuilder = new StringBuilder();                            </span>
<span class="-2095273116509361612" onmouseenter="enter('-2095273116509361612');" onmouseout="out('-2095273116509361612');" style="">2111                         selectionBuilder.append(LauncherSettings.Favorites._ID);                         </span>
<span class="6461653116160679746" onmouseenter="enter('6461653116160679746');" onmouseout="out('6461653116160679746');" style="">2112                         selectionBuilder.append(&quot; IN (&quot;);                                                </span>
<span class="5779162458108712939" onmouseenter="enter('5779162458108712939');" onmouseout="out('5779162458108712939');" style="">2113                         selectionBuilder.append(TextUtils.join(&quot;, &quot;, restoredRows));                     </span>
<span class="-266914319355369866" onmouseenter="enter('-266914319355369866');" onmouseout="out('-266914319355369866');" style="">2114                         selectionBuilder.append(&quot;)&quot;);                                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2115                         ContentValues values = new ContentValues();                                      </span>
<span class="-8469115157851156621" onmouseenter="enter('-8469115157851156621');" onmouseout="out('-8469115157851156621');" style="">2116                         values.put(LauncherSettings.Favorites.RESTORED, 0);                              </span>
<span class="345657349201776292" onmouseenter="enter('345657349201776292');" onmouseout="out('345657349201776292');" style=""><abbr title="2117                         updater.update(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values, selectionBuilder.toString(), null);">2117                         updater.update(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values, se</abbr></span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2118                     } catch (RemoteException e) {                                                        </span>
<span class="-2048384695223094681" onmouseenter="enter('-2048384695223094681');" onmouseout="out('-2048384695223094681');" style="">2119                         Log.w(TAG, &quot;Could not update restored rows&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2120                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2121                 }                                                                                        </span>
<span class="-3219977305654091630" onmouseenter="enter('-3219977305654091630');" onmouseout="out('-3219977305654091630');" style="">2122                 if ((!isSdCardReady) &amp;&amp; (!sPendingPackages.isEmpty())) {                                 </span>
<span class="-2960758839551836627" onmouseenter="enter('-2960758839551836627');" onmouseout="out('-2960758839551836627');" style=""><abbr title="2123                     context.registerReceiver(new AppsAvailabilityCheck(), new IntentFilter(StartupReceiver.SYSTEM_READY), null, sWorker);">2123                     context.registerReceiver(new AppsAvailabilityCheck(), new IntentFilter(StartupReceive</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2124                 }                                                                                        </span>
<span class="-4804263783578470698" onmouseenter="enter('-4804263783578470698');" onmouseout="out('-4804263783578470698');" style="">2125                 if (loadedOldDb) {                                                                       </span>
<span class="7600073100480404232" onmouseenter="enter('7600073100480404232');" onmouseout="out('7600073100480404232');" style="">2126                     long maxScreenId = 0;                                                                </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2127                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-5986846111837546518" onmouseenter="enter('-5986846111837546518');" onmouseout="out('-5986846111837546518');" style="">2128                     for (ItemInfo item : sBgItemsIdMap.values()) {                                       </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2129                         long screenId = item.screenId;                                                   </span>
<span class="-5790181917475254894" onmouseenter="enter('-5790181917475254894');" onmouseout="out('-5790181917475254894');" style=""><abbr title="2130                         if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (!sBgWorkspaceScreens.contains(screenId))) {">2130                         if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (!sBgWork</abbr></span>
<span class="-7031445051311703943" onmouseenter="enter('-7031445051311703943');" onmouseout="out('-7031445051311703943');" style="">2131                             sBgWorkspaceScreens.add(screenId);                                           </span>
<span class="3854679960473080150" onmouseenter="enter('3854679960473080150');" onmouseout="out('3854679960473080150');" style="">2132                             if (screenId &gt; maxScreenId) {                                                </span>
<span class="1021049293401799489" onmouseenter="enter('1021049293401799489');" onmouseout="out('1021049293401799489');" style="">2133                                 maxScreenId = screenId;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2134                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2135                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2136                     }                                                                                    </span>
<span class="6350361387624057443" onmouseenter="enter('6350361387624057443');" onmouseout="out('6350361387624057443');" style="">2137                     Collections.sort(sBgWorkspaceScreens);                                               </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2138                     // Log to disk                                                                       </span>
<span class="866898408466051726" onmouseenter="enter('866898408466051726');" onmouseout="out('866898408466051726');" style="">2139                     Launcher.addDumpLog(TAG, &quot;11683562 -   maxScreenId: &quot; + maxScreenId, true);          </span>
<span class="471675311745375832" onmouseenter="enter('471675311745375832');" onmouseout="out('471675311745375832');" style=""><abbr title="2140                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; + TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);">2140                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; + TextUtils.join(&quot;, &quot;, </abbr></span>
<span class="7230913638388732518" onmouseenter="enter('7230913638388732518');" onmouseout="out('7230913638388732518');" style="">2141                     LauncherAppState.getLauncherProvider().updateMaxScreenId(maxScreenId);               </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2142                     updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                            </span>
<span class="7660079450024453672" onmouseenter="enter('7660079450024453672');" onmouseout="out('7660079450024453672');" style="">2143                     // Update the max item id after we load an old db                                    </span>
<span class="-1395936485676380465" onmouseenter="enter('-1395936485676380465');" onmouseout="out('-1395936485676380465');" style="">2144                     long maxItemId = 0;                                                                  </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2145                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-5986846111837546518" onmouseenter="enter('-5986846111837546518');" onmouseout="out('-5986846111837546518');" style="">2146                     for (ItemInfo item : sBgItemsIdMap.values()) {                                       </span>
<span class="570221416877950678" onmouseenter="enter('570221416877950678');" onmouseout="out('570221416877950678');" style="">2147                         maxItemId = Math.max(maxItemId, item.id);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2148                     }                                                                                    </span>
<span class="-9163109107539651846" onmouseenter="enter('-9163109107539651846');" onmouseout="out('-9163109107539651846');" style="">2149                     LauncherAppState.getLauncherProvider().updateMaxItemId(maxItemId);                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2150                 } else {                                                                                 </span>
<span class="-2685559954044032059" onmouseenter="enter('-2685559954044032059');" onmouseout="out('-2685559954044032059');" style="">2151                     TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(mContext);            </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">2152                     for (Integer i : orderedScreens.keySet()) {                                          </span>
<span class="6018672691004586758" onmouseenter="enter('6018672691004586758');" onmouseout="out('6018672691004586758');" style="">2153                         sBgWorkspaceScreens.add(orderedScreens.get(i));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2154                     }                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2155                     // Log to disk                                                                       </span>
<span class="471675311745375832" onmouseenter="enter('471675311745375832');" onmouseout="out('471675311745375832');" style=""><abbr title="2156                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; + TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);">2156                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; + TextUtils.join(&quot;, &quot;, </abbr></span>
<span class="4349099944219760178" onmouseenter="enter('4349099944219760178');" onmouseout="out('4349099944219760178');" style="">2157                     // Remove any empty screens                                                          </span>
<span class="4802911702169047278" onmouseenter="enter('4802911702169047278');" onmouseout="out('4802911702169047278');" style="">2158                     ArrayList&lt;Long&gt; unusedScreens = new ArrayList&lt;Long&gt;(sBgWorkspaceScreens);            </span>
<span class="-5986846111837546518" onmouseenter="enter('-5986846111837546518');" onmouseout="out('-5986846111837546518');" style="">2159                     for (ItemInfo item : sBgItemsIdMap.values()) {                                       </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2160                         long screenId = item.screenId;                                                   </span>
<span class="-2619061293676710063" onmouseenter="enter('-2619061293676710063');" onmouseout="out('-2619061293676710063');" style=""><abbr title="2161                         if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; unusedScreens.contains(screenId)) {">2161                         if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; unusedScr</abbr></span>
<span class="2563817896724806900" onmouseenter="enter('2563817896724806900');" onmouseout="out('2563817896724806900');" style="">2162                             unusedScreens.remove(screenId);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2163                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2164                     }                                                                                    </span>
<span class="589140823506694046" onmouseenter="enter('589140823506694046');" onmouseout="out('589140823506694046');" style="">2165                     // If there are any empty screens remove them, and update.                           </span>
<span class="-6359391369875412389" onmouseenter="enter('-6359391369875412389');" onmouseout="out('-6359391369875412389');" style="">2166                     if (unusedScreens.size() != 0) {                                                     </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2167                         // Log to disk                                                                   </span>
<span class="3224213598090422289" onmouseenter="enter('3224213598090422289');" onmouseout="out('3224213598090422289');" style=""><abbr title="2168                         Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; + TextUtils.join(&quot;, &quot;, unusedScreens), true);">2168                         Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; + TextUti</abbr></span>
<span class="672027419163159367" onmouseenter="enter('672027419163159367');" onmouseout="out('672027419163159367');" style="">2169                         sBgWorkspaceScreens.removeAll(unusedScreens);                                    </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2170                         updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2171                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2172                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2173                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="7903276559551393896" onmouseenter="enter('7903276559551393896');" onmouseout="out('7903276559551393896');" style="">2174                     Log.d(TAG, (&quot;loaded workspace in &quot; + (SystemClock.uptimeMillis() - t)) + &quot;ms&quot;);      </span>
<span class="-4264600990510120523" onmouseenter="enter('-4264600990510120523');" onmouseout="out('-4264600990510120523');" style="">2175                     Log.d(TAG, &quot;workspace layout: &quot;);                                                    </span>
<span class="-7545020173780618827" onmouseenter="enter('-7545020173780618827');" onmouseout="out('-7545020173780618827');" style="">2176                     int nScreens = occupied.size();                                                      </span>
<span class="-1430677680506572849" onmouseenter="enter('-1430677680506572849');" onmouseout="out('-1430677680506572849');" style="">2177                     for (int y = 0; y &lt; countY; y++) {                                                   </span>
<span class="7912371425440139270" onmouseenter="enter('7912371425440139270');" onmouseout="out('7912371425440139270');" style="">2178                         String line = &quot;&quot;;                                                                </span>
<span class="6696569755228044488" onmouseenter="enter('6696569755228044488');" onmouseout="out('6696569755228044488');" style="">2179                         Iterator&lt;Long&gt; iter = occupied.keySet().iterator();                              </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2180                         while (iter.hasNext()) {                                                         </span>
<span class="5362610809116292523" onmouseenter="enter('5362610809116292523');" onmouseout="out('5362610809116292523');" style="">2181                             long screenId = iter.next();                                                 </span>
<span class="-6362485911021715109" onmouseenter="enter('-6362485911021715109');" onmouseout="out('-6362485911021715109');" style="">2182                             if (screenId &gt; 0) {                                                          </span>
<span class="6140668759815587097" onmouseenter="enter('6140668759815587097');" onmouseout="out('6140668759815587097');" style="">2183                                 line += &quot; | &quot;;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2184                             }                                                                            </span>
<span class="5745233440242438196" onmouseenter="enter('5745233440242438196');" onmouseout="out('5745233440242438196');" style="">2185                             for (int x = 0; x &lt; countX; x++) {                                           </span>
<span class="-6212011147390486077" onmouseenter="enter('-6212011147390486077');" onmouseout="out('-6212011147390486077');" style="">2186                                 ItemInfo[][] screen = occupied.get(screenId);                            </span>
<span class="-3401241299463807582" onmouseenter="enter('-3401241299463807582');" onmouseout="out('-3401241299463807582');" style="">2187                                 if ((x &lt; screen.length) &amp;&amp; (y &lt; screen[x].length)) {                     </span>
<span class="2138628812736326092" onmouseenter="enter('2138628812736326092');" onmouseout="out('2138628812736326092');" style="">2188                                     line += (screen[x][y] != null) ? &quot;#&quot; : &quot;.&quot;;                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2189                                 } else {                                                                 </span>
<span class="3801202768225819208" onmouseenter="enter('3801202768225819208');" onmouseout="out('3801202768225819208');" style="">2190                                     line += &quot;!&quot;;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2191                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2192                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2193                         }                                                                                </span>
<span class="897171976692622190" onmouseenter="enter('897171976692622190');" onmouseout="out('897171976692622190');" style="">2194                         Log.d(TAG, (&quot;[ &quot; + line) + &quot; ]&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2195                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2196                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2197             }                                                                                            </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style="">2198             return loadedOldDb;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2199         }                                                                                                </span>
<span  style="">2200                                                                                                          </span>
<span class="2277304499071840713" onmouseenter="enter('2277304499071840713');" onmouseout="out('2277304499071840713');" style="">2201         /** Filters the set of items who are directly or indirectly (via another container) on the       </span>
<span class="1409652257454698285" onmouseenter="enter('1409652257454698285');" onmouseout="out('1409652257454698285');" style="">2202          * specified screen. */                                                                          </span>
<span class="-8325061695461763729" onmouseenter="enter('-8325061695461763729');" onmouseout="out('-8325061695461763729');" style=""><abbr title="2203         private void filterCurrentWorkspaceItems(long currentScreenId, ArrayList&lt;ItemInfo&gt; allWorkspaceItems, ArrayList&lt;ItemInfo&gt; currentScreenItems, ArrayList&lt;ItemInfo&gt; otherScreenItems) {">2203         private void filterCurrentWorkspaceItems(long currentScreenId, ArrayList&lt;ItemInfo&gt; allWorkspaceIt</abbr></span>
<span class="-3054856766549342984" onmouseenter="enter('-3054856766549342984');" onmouseout="out('-3054856766549342984');" style="">2204             // Purge any null ItemInfos                                                                  </span>
<span class="4510640209834542816" onmouseenter="enter('4510640209834542816');" onmouseout="out('4510640209834542816');" style="">2205             Iterator&lt;ItemInfo&gt; iter = allWorkspaceItems.iterator();                                      </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2206             while (iter.hasNext()) {                                                                     </span>
<span class="1859715860533284250" onmouseenter="enter('1859715860533284250');" onmouseout="out('1859715860533284250');" style="">2207                 ItemInfo i = iter.next();                                                                </span>
<span class="-7805046366392198151" onmouseenter="enter('-7805046366392198151');" onmouseout="out('-7805046366392198151');" style="">2208                 if (i == null) {                                                                         </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">2209                     iter.remove();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2210                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2211             }                                                                                            </span>
<span class="-717820765531723775" onmouseenter="enter('-717820765531723775');" onmouseout="out('-717820765531723775');" style="">2212             // Order the set of items by their containers first, this allows use to walk through the     </span>
<span class="603841325148737819" onmouseenter="enter('603841325148737819');" onmouseout="out('603841325148737819');" style="">2213             // list sequentially, build up a list of containers that are in the specified screen,        </span>
<span class="4141488165570775341" onmouseenter="enter('4141488165570775341');" onmouseout="out('4141488165570775341');" style="">2214             // as well as all items in those containers.                                                 </span>
<span class="-9034158841912487174" onmouseenter="enter('-9034158841912487174');" onmouseout="out('-9034158841912487174');" style="">2215             Set&lt;Long&gt; itemsOnScreen = new HashSet&lt;Long&gt;();                                               </span>
<span class="8519661802904254165" onmouseenter="enter('8519661802904254165');" onmouseout="out('8519661802904254165');" style="">2216             Collections.sort(allWorkspaceItems, new Comparator&lt;ItemInfo&gt;() {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2217                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2218                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="-1106143337117455757" onmouseenter="enter('-1106143337117455757');" onmouseout="out('-1106143337117455757');" style="">2219                     return ((int) (lhs.container - rhs.container));                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2220                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2221             });                                                                                          </span>
<span class="8857216393150717712" onmouseenter="enter('8857216393150717712');" onmouseout="out('8857216393150717712');" style="">2222             for (ItemInfo info : allWorkspaceItems) {                                                    </span>
<span class="6411036295955728093" onmouseenter="enter('6411036295955728093');" onmouseout="out('6411036295955728093');" style="">2223                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                    </span>
<span class="243509375570472667" onmouseenter="enter('243509375570472667');" onmouseout="out('243509375570472667');" style="">2224                     if (info.screenId == currentScreenId) {                                              </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2225                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2226                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2227                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2228                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2229                     }                                                                                    </span>
<span class="8644731164584182238" onmouseenter="enter('8644731164584182238');" onmouseout="out('8644731164584182238');" style="">2230                 } else if (info.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2231                     currentScreenItems.add(info);                                                        </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2232                     itemsOnScreen.add(info.id);                                                          </span>
<span class="2199417788618410097" onmouseenter="enter('2199417788618410097');" onmouseout="out('2199417788618410097');" style="">2233                 } else if (itemsOnScreen.contains(info.container)) {                                     </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2234                     currentScreenItems.add(info);                                                        </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2235                     itemsOnScreen.add(info.id);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2236                 } else {                                                                                 </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2237                     otherScreenItems.add(info);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2238                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2239             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2240         }                                                                                                </span>
<span  style="">2241                                                                                                          </span>
<span class="-2345588268248786161" onmouseenter="enter('-2345588268248786161');" onmouseout="out('-2345588268248786161');" style="">2242         /** Filters the set of widgets which are on the specified screen. */                             </span>
<span class="-1344846415293232488" onmouseenter="enter('-1344846415293232488');" onmouseout="out('-1344846415293232488');" style=""><abbr title="2243         private void filterCurrentAppWidgets(long currentScreenId, ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets, ArrayList&lt;LauncherAppWidgetInfo&gt; currentScreenWidgets, ArrayList&lt;LauncherAppWidgetInfo&gt; otherScreenWidgets) {">2243         private void filterCurrentAppWidgets(long currentScreenId, ArrayList&lt;LauncherAppWidgetInfo&gt; appWi</abbr></span>
<span class="298213435107913715" onmouseenter="enter('298213435107913715');" onmouseout="out('298213435107913715');" style="">2244             for (LauncherAppWidgetInfo widget : appWidgets) {                                            </span>
<span class="3820080085881789794" onmouseenter="enter('3820080085881789794');" onmouseout="out('3820080085881789794');" style="">2245                 if (widget == null) {                                                                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2246                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2247                 }                                                                                        </span>
<span class="8379462461845992860" onmouseenter="enter('8379462461845992860');" onmouseout="out('8379462461845992860');" style=""><abbr title="2248                 if ((widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (widget.screenId == currentScreenId)) {">2248                 if ((widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (widget.screenI</abbr></span>
<span class="-7467860973438659792" onmouseenter="enter('-7467860973438659792');" onmouseout="out('-7467860973438659792');" style="">2249                     currentScreenWidgets.add(widget);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2250                 } else {                                                                                 </span>
<span class="918127297832417083" onmouseenter="enter('918127297832417083');" onmouseout="out('918127297832417083');" style="">2251                     otherScreenWidgets.add(widget);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2252                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2253             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2254         }                                                                                                </span>
<span  style="">2255                                                                                                          </span>
<span class="2890739696266248059" onmouseenter="enter('2890739696266248059');" onmouseout="out('2890739696266248059');" style="">2256         /** Filters the set of folders which are on the specified screen. */                             </span>
<span class="-932467149735048615" onmouseenter="enter('-932467149735048615');" onmouseout="out('-932467149735048615');" style=""><abbr title="2257         private void filterCurrentFolders(long currentScreenId, HashMap&lt;Long, ItemInfo&gt; itemsIdMap, HashMap&lt;Long, FolderInfo&gt; folders, HashMap&lt;Long, FolderInfo&gt; currentScreenFolders, HashMap&lt;Long, FolderInfo&gt; otherScreenFolders) {">2257         private void filterCurrentFolders(long currentScreenId, HashMap&lt;Long, ItemInfo&gt; itemsIdMap, HashM</abbr></span>
<span class="5476103458254751398" onmouseenter="enter('5476103458254751398');" onmouseout="out('5476103458254751398');" style="">2258             for (long id : folders.keySet()) {                                                           </span>
<span class="-1043527829048640643" onmouseenter="enter('-1043527829048640643');" onmouseout="out('-1043527829048640643');" style="">2259                 ItemInfo info = itemsIdMap.get(id);                                                      </span>
<span class="2660177146353218833" onmouseenter="enter('2660177146353218833');" onmouseout="out('2660177146353218833');" style="">2260                 FolderInfo folder = folders.get(id);                                                     </span>
<span class="-580987735855991773" onmouseenter="enter('-580987735855991773');" onmouseout="out('-580987735855991773');" style="">2261                 if ((info == null) || (folder == null)) {                                                </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2262                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2263                 }                                                                                        </span>
<span class="-8679678645303648611" onmouseenter="enter('-8679678645303648611');" onmouseout="out('-8679678645303648611');" style=""><abbr title="2264                 if ((info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (info.screenId == currentScreenId)) {">2264                 if ((info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (info.screenId ==</abbr></span>
<span class="9103793645851851238" onmouseenter="enter('9103793645851851238');" onmouseout="out('9103793645851851238');" style="">2265                     currentScreenFolders.put(id, folder);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2266                 } else {                                                                                 </span>
<span class="2209694610169579401" onmouseenter="enter('2209694610169579401');" onmouseout="out('2209694610169579401');" style="">2267                     otherScreenFolders.put(id, folder);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2268                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2269             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2270         }                                                                                                </span>
<span  style="">2271                                                                                                          </span>
<span class="-1404838629334872973" onmouseenter="enter('-1404838629334872973');" onmouseout="out('-1404838629334872973');" style="">2272         /** Sorts the set of items by hotseat, workspace (spatially from top to bottom, left to          </span>
<span class="2331484748997422212" onmouseenter="enter('2331484748997422212');" onmouseout="out('2331484748997422212');" style="">2273          * right) */                                                                                     </span>
<span class="4197577433481844567" onmouseenter="enter('4197577433481844567');" onmouseout="out('4197577433481844567');" style="">2274         private void sortWorkspaceItemsSpatially(ArrayList&lt;ItemInfo&gt; workspaceItems) {                   </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2275             final LauncherAppState app = LauncherAppState.getInstance();                                 </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2276             final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                          </span>
<span class="7420301678455304067" onmouseenter="enter('7420301678455304067');" onmouseout="out('7420301678455304067');" style="">2277             // XXX: review this                                                                          </span>
<span class="5036789581710507500" onmouseenter="enter('5036789581710507500');" onmouseout="out('5036789581710507500');" style="">2278             Collections.sort(workspaceItems, new Comparator&lt;ItemInfo&gt;() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2279                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2280                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="-1438938711154054801" onmouseenter="enter('-1438938711154054801');" onmouseout="out('-1438938711154054801');" style="">2281                     int cellCountX = ((int) (grid.numColumns));                                          </span>
<span class="8922910107101700428" onmouseenter="enter('8922910107101700428');" onmouseout="out('8922910107101700428');" style="">2282                     int cellCountY = ((int) (grid.numRows));                                             </span>
<span class="2270724071285143981" onmouseenter="enter('2270724071285143981');" onmouseout="out('2270724071285143981');" style="">2283                     int screenOffset = cellCountX * cellCountY;                                          </span>
<span class="-2237698005714932158" onmouseenter="enter('-2237698005714932158');" onmouseout="out('-2237698005714932158');" style="">2284                     int containerOffset = screenOffset * (Launcher.SCREEN_COUNT + 1);// +1 hotseat       </span>
<span  style="">2285                                                                                                          </span>
<span class="-8213315077924848318" onmouseenter="enter('-8213315077924848318');" onmouseout="out('-8213315077924848318');" style=""><abbr title="2286                     long lr = (((lhs.container * containerOffset) + (lhs.screenId * screenOffset)) + (lhs.cellY * cellCountX)) + lhs.cellX;">2286                     long lr = (((lhs.container * containerOffset) + (lhs.screenId * screenOffset)) + (lhs</abbr></span>
<span class="4271864280920633428" onmouseenter="enter('4271864280920633428');" onmouseout="out('4271864280920633428');" style=""><abbr title="2287                     long rr = (((rhs.container * containerOffset) + (rhs.screenId * screenOffset)) + (rhs.cellY * cellCountX)) + rhs.cellX;">2287                     long rr = (((rhs.container * containerOffset) + (rhs.screenId * screenOffset)) + (rhs</abbr></span>
<span class="-4221888252583873829" onmouseenter="enter('-4221888252583873829');" onmouseout="out('-4221888252583873829');" style="">2288                     return ((int) (lr - rr));                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2289                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2290             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2291         }                                                                                                </span>
<span  style="">2292                                                                                                          </span>
<span class="-2914095713166652734" onmouseenter="enter('-2914095713166652734');" onmouseout="out('-2914095713166652734');" style="">2293         private void bindWorkspaceScreens(final Callbacks oldCallbacks,                                  </span>
<span class="-4834279311466229697" onmouseenter="enter('-4834279311466229697');" onmouseout="out('-4834279311466229697');" style="">2294                 final ArrayList&lt;Long&gt; orderedScreens) {                                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2295             final Runnable r = new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2296                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2297                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2298                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2299                     if (callbacks != null) {                                                             </span>
<span class="-657438592163932392" onmouseenter="enter('-657438592163932392');" onmouseout="out('-657438592163932392');" style="">2300                         callbacks.bindScreens(orderedScreens);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2301                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2302                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2303             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2304             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2305         }                                                                                                </span>
<span  style="">2306                                                                                                          </span>
<span class="1891675589127429654" onmouseenter="enter('1891675589127429654');" onmouseout="out('1891675589127429654');" style=""><abbr title="2307         private void bindWorkspaceItems(final Callbacks oldCallbacks, final ArrayList&lt;ItemInfo&gt; workspaceItems, final ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets, final HashMap&lt;Long, FolderInfo&gt; folders, ArrayList&lt;Runnable&gt; deferredBindRunnables) {">2307         private void bindWorkspaceItems(final Callbacks oldCallbacks, final ArrayList&lt;ItemInfo&gt; workspace</abbr></span>
<span class="-38585977637652342" onmouseenter="enter('-38585977637652342');" onmouseout="out('-38585977637652342');" style="">2308             final boolean postOnMainThread = deferredBindRunnables != null;                              </span>
<span class="-8582136977498244048" onmouseenter="enter('-8582136977498244048');" onmouseout="out('-8582136977498244048');" style="">2309             // Bind the workspace items                                                                  </span>
<span class="-7354566132986496753" onmouseenter="enter('-7354566132986496753');" onmouseout="out('-7354566132986496753');" style="">2310             int N = workspaceItems.size();                                                               </span>
<span class="8316943469476905111" onmouseenter="enter('8316943469476905111');" onmouseout="out('8316943469476905111');" style="">2311             for (int i = 0; i &lt; N; i += ITEMS_CHUNK) {                                                   </span>
<span class="4892427267481855411" onmouseenter="enter('4892427267481855411');" onmouseout="out('4892427267481855411');" style="">2312                 final int start = i;                                                                     </span>
<span class="-6277507301767892589" onmouseenter="enter('-6277507301767892589');" onmouseout="out('-6277507301767892589');" style="">2313                 final int chunkSize = ((i + ITEMS_CHUNK) &lt;= N) ? ITEMS_CHUNK : N - i;                    </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2314                 final Runnable r = new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2315                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2316                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2317                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2318                         if (callbacks != null) {                                                         </span>
<span class="5307922778193224820" onmouseenter="enter('5307922778193224820');" onmouseout="out('5307922778193224820');" style="">2319                             callbacks.bindItems(workspaceItems, start, start + chunkSize, false);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2320                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2321                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2322                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2323                 if (postOnMainThread) {                                                                  </span>
<span class="-2103554278280266432" onmouseenter="enter('-2103554278280266432');" onmouseout="out('-2103554278280266432');" style="">2324                     synchronized(deferredBindRunnables) {                                                </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2325                         deferredBindRunnables.add(r);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2326                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2327                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2328                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2329                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2330             }                                                                                            </span>
<span class="-3289339942871725334" onmouseenter="enter('-3289339942871725334');" onmouseout="out('-3289339942871725334');" style="">2331             // Bind the folders                                                                          </span>
<span class="-7483796215228262161" onmouseenter="enter('-7483796215228262161');" onmouseout="out('-7483796215228262161');" style="">2332             if (!folders.isEmpty()) {                                                                    </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2333                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2334                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2335                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2336                         if (callbacks != null) {                                                         </span>
<span class="-5386182796873001970" onmouseenter="enter('-5386182796873001970');" onmouseout="out('-5386182796873001970');" style="">2337                             callbacks.bindFolders(folders);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2338                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2339                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2340                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2341                 if (postOnMainThread) {                                                                  </span>
<span class="-2103554278280266432" onmouseenter="enter('-2103554278280266432');" onmouseout="out('-2103554278280266432');" style="">2342                     synchronized(deferredBindRunnables) {                                                </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2343                         deferredBindRunnables.add(r);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2344                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2345                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2346                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2347                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2348             }                                                                                            </span>
<span class="-3655716380766613611" onmouseenter="enter('-3655716380766613611');" onmouseout="out('-3655716380766613611');" style="">2349             // Bind the widgets, one at a time                                                           </span>
<span class="-8489280060790503293" onmouseenter="enter('-8489280060790503293');" onmouseout="out('-8489280060790503293');" style="">2350             N = appWidgets.size();                                                                       </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2351             for (int i = 0; i &lt; N; i++) {                                                                </span>
<span class="1244623159456991119" onmouseenter="enter('1244623159456991119');" onmouseout="out('1244623159456991119');" style="">2352                 final LauncherAppWidgetInfo widget = appWidgets.get(i);                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2353                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2354                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2355                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2356                         if (callbacks != null) {                                                         </span>
<span class="-6128295543460120155" onmouseenter="enter('-6128295543460120155');" onmouseout="out('-6128295543460120155');" style="">2357                             callbacks.bindAppWidget(widget);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2358                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2359                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2360                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2361                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2362                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2363                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2364                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2365                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2366             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2367         }                                                                                                </span>
<span  style="">2368                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2369         /**                                                                                              </span>
<span class="2657234197326019604" onmouseenter="enter('2657234197326019604');" onmouseout="out('2657234197326019604');" style="">2370          * Binds all loaded data to actual views on the main thread.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2371          */                                                                                              </span>
<span class="2515782410575020505" onmouseenter="enter('2515782410575020505');" onmouseout="out('2515782410575020505');" style="">2372         private void bindWorkspace(int synchronizeBindPage, final boolean isUpgradePath) {               </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2373             final long t = SystemClock.uptimeMillis();                                                   </span>
<span class="-6867724507948428803" onmouseenter="enter('-6867724507948428803');" onmouseout="out('-6867724507948428803');" style="">2374             Runnable r;                                                                                  </span>
<span class="7433359470613785749" onmouseenter="enter('7433359470613785749');" onmouseout="out('7433359470613785749');" style="">2375             // Don&#x27;t use these two variables in any of the callback runnables.                           </span>
<span class="-3941343762342876699" onmouseenter="enter('-3941343762342876699');" onmouseout="out('-3941343762342876699');" style="">2376             // Otherwise we hold a reference to them.                                                    </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2377             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2378             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2379                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="3451244406562267616" onmouseenter="enter('3451244406562267616');" onmouseout="out('3451244406562267616');" style="">2380                 Log.w(TAG, &quot;LoaderTask running with no launcher&quot;);                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2381                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2382             }                                                                                            </span>
<span class="1896400737527502430" onmouseenter="enter('1896400737527502430');" onmouseout="out('1896400737527502430');" style="">2383             // Save a copy of all the bg-thread collections                                              </span>
<span class="8376150118125167095" onmouseenter="enter('8376150118125167095');" onmouseout="out('8376150118125167095');" style="">2384             ArrayList&lt;ItemInfo&gt; workspaceItems = new ArrayList&lt;ItemInfo&gt;();                              </span>
<span class="3844231270549126824" onmouseenter="enter('3844231270549126824');" onmouseout="out('3844231270549126824');" style="">2385             ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets = new ArrayList&lt;LauncherAppWidgetInfo&gt;();        </span>
<span class="1486993560554459234" onmouseenter="enter('1486993560554459234');" onmouseout="out('1486993560554459234');" style="">2386             HashMap&lt;Long, FolderInfo&gt; folders = new HashMap&lt;Long, FolderInfo&gt;();                         </span>
<span class="-2531396011753159513" onmouseenter="enter('-2531396011753159513');" onmouseout="out('-2531396011753159513');" style="">2387             HashMap&lt;Long, ItemInfo&gt; itemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                          </span>
<span class="2122428953856879736" onmouseenter="enter('2122428953856879736');" onmouseout="out('2122428953856879736');" style="">2388             ArrayList&lt;Long&gt; orderedScreenIds = new ArrayList&lt;Long&gt;();                                    </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">2389             synchronized(sBgLock) {                                                                      </span>
<span class="2318166879831487746" onmouseenter="enter('2318166879831487746');" onmouseout="out('2318166879831487746');" style="">2390                 workspaceItems.addAll(sBgWorkspaceItems);                                                </span>
<span class="5776161881735381038" onmouseenter="enter('5776161881735381038');" onmouseout="out('5776161881735381038');" style="">2391                 appWidgets.addAll(sBgAppWidgets);                                                        </span>
<span class="1929780610659636161" onmouseenter="enter('1929780610659636161');" onmouseout="out('1929780610659636161');" style="">2392                 folders.putAll(sBgFolders);                                                              </span>
<span class="3382494184063613290" onmouseenter="enter('3382494184063613290');" onmouseout="out('3382494184063613290');" style="">2393                 itemsIdMap.putAll(sBgItemsIdMap);                                                        </span>
<span class="-8476373911620507604" onmouseenter="enter('-8476373911620507604');" onmouseout="out('-8476373911620507604');" style="">2394                 orderedScreenIds.addAll(sBgWorkspaceScreens);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2395             }                                                                                            </span>
<span class="5564253246348200199" onmouseenter="enter('5564253246348200199');" onmouseout="out('5564253246348200199');" style="">2396             final boolean isLoadingSynchronously = synchronizeBindPage != PagedView.INVALID_RESTORE_PAGE;</span>
<span class="-1595337420518614132" onmouseenter="enter('-1595337420518614132');" onmouseout="out('-1595337420518614132');" style=""><abbr title="2397             int currScreen = (isLoadingSynchronously) ? synchronizeBindPage : oldCallbacks.getCurrentWorkspaceScreen();">2397             int currScreen = (isLoadingSynchronously) ? synchronizeBindPage : oldCallbacks.getCurrentWork</abbr></span>
<span class="-8072033936298463796" onmouseenter="enter('-8072033936298463796');" onmouseout="out('-8072033936298463796');" style="">2398             if (currScreen &gt;= orderedScreenIds.size()) {                                                 </span>
<span class="6825640116866860115" onmouseenter="enter('6825640116866860115');" onmouseout="out('6825640116866860115');" style="">2399                 // There may be no workspace screens (just hotseat items and an empty page).             </span>
<span class="-1349681419310339536" onmouseenter="enter('-1349681419310339536');" onmouseout="out('-1349681419310339536');" style="">2400                 currScreen = PagedView.INVALID_RESTORE_PAGE;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2401             }                                                                                            </span>
<span class="-335994314648006585" onmouseenter="enter('-335994314648006585');" onmouseout="out('-335994314648006585');" style="">2402             final int currentScreen = currScreen;                                                        </span>
<span class="-179611005751201019" onmouseenter="enter('-179611005751201019');" onmouseout="out('-179611005751201019');" style=""><abbr title="2403             final long currentScreenId = (currentScreen &lt; 0) ? INVALID_SCREEN_ID : orderedScreenIds.get(currentScreen);">2403             final long currentScreenId = (currentScreen &lt; 0) ? INVALID_SCREEN_ID : orderedScreenIds.get(c</abbr></span>
<span class="6814554556760518768" onmouseenter="enter('6814554556760518768');" onmouseout="out('6814554556760518768');" style="">2404             // Load all the items that are on the current page first (and in the process, unbind         </span>
<span class="-8025412368184811901" onmouseenter="enter('-8025412368184811901');" onmouseout="out('-8025412368184811901');" style="">2405             // all the existing workspace items before we call startBinding() below.                     </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="">2406             unbindWorkspaceItemsOnMainThread();                                                          </span>
<span class="-2890632990436762470" onmouseenter="enter('-2890632990436762470');" onmouseout="out('-2890632990436762470');" style="">2407             // Separate the items that are on the current screen, and all the other remaining items      </span>
<span class="-1725873569461296561" onmouseenter="enter('-1725873569461296561');" onmouseout="out('-1725873569461296561');" style="">2408             ArrayList&lt;ItemInfo&gt; currentWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                       </span>
<span class="-3652813720009519444" onmouseenter="enter('-3652813720009519444');" onmouseout="out('-3652813720009519444');" style="">2409             ArrayList&lt;ItemInfo&gt; otherWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="-609054317006706012" onmouseenter="enter('-609054317006706012');" onmouseout="out('-609054317006706012');" style="">2410             ArrayList&lt;LauncherAppWidgetInfo&gt; currentAppWidgets = new ArrayList&lt;LauncherAppWidgetInfo&gt;(); </span>
<span class="-9062958238602908575" onmouseenter="enter('-9062958238602908575');" onmouseout="out('-9062958238602908575');" style="">2411             ArrayList&lt;LauncherAppWidgetInfo&gt; otherAppWidgets = new ArrayList&lt;LauncherAppWidgetInfo&gt;();   </span>
<span class="1678682221916250445" onmouseenter="enter('1678682221916250445');" onmouseout="out('1678682221916250445');" style="">2412             HashMap&lt;Long, FolderInfo&gt; currentFolders = new HashMap&lt;Long, FolderInfo&gt;();                  </span>
<span class="6055163357301009248" onmouseenter="enter('6055163357301009248');" onmouseout="out('6055163357301009248');" style="">2413             HashMap&lt;Long, FolderInfo&gt; otherFolders = new HashMap&lt;Long, FolderInfo&gt;();                    </span>
<span class="-1123654581916099840" onmouseenter="enter('-1123654581916099840');" onmouseout="out('-1123654581916099840');" style=""><abbr title="2414             filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems, otherWorkspaceItems);">2414             filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems, otherWork</abbr></span>
<span class="7679218772788462797" onmouseenter="enter('7679218772788462797');" onmouseout="out('7679218772788462797');" style="">2415             filterCurrentAppWidgets(currentScreenId, appWidgets, currentAppWidgets, otherAppWidgets);    </span>
<span class="-6197537108570878255" onmouseenter="enter('-6197537108570878255');" onmouseout="out('-6197537108570878255');" style="">2416             filterCurrentFolders(currentScreenId, itemsIdMap, folders, currentFolders, otherFolders);    </span>
<span class="-3334490908115707670" onmouseenter="enter('-3334490908115707670');" onmouseout="out('-3334490908115707670');" style="">2417             sortWorkspaceItemsSpatially(currentWorkspaceItems);                                          </span>
<span class="7557616132302919391" onmouseenter="enter('7557616132302919391');" onmouseout="out('7557616132302919391');" style="">2418             sortWorkspaceItemsSpatially(otherWorkspaceItems);                                            </span>
<span class="-5681027322920042460" onmouseenter="enter('-5681027322920042460');" onmouseout="out('-5681027322920042460');" style="">2419             // Tell the workspace that we&#x27;re about to start binding items                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2420             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2421                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2422                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2423                     if (callbacks != null) {                                                             </span>
<span class="-4858717627969339167" onmouseenter="enter('-4858717627969339167');" onmouseout="out('-4858717627969339167');" style="">2424                         callbacks.startBinding();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2425                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2426                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2427             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2428             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span class="5270406270692369283" onmouseenter="enter('5270406270692369283');" onmouseout="out('5270406270692369283');" style="">2429             bindWorkspaceScreens(oldCallbacks, orderedScreenIds);                                        </span>
<span class="-8614752954403058095" onmouseenter="enter('-8614752954403058095');" onmouseout="out('-8614752954403058095');" style="">2430             // Load items on the current page                                                            </span>
<span class="-8932821665796536122" onmouseenter="enter('-8932821665796536122');" onmouseout="out('-8932821665796536122');" style=""><abbr title="2431             bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets, currentFolders, null);">2431             bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets, currentFolders, nu</abbr></span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2432             if (isLoadingSynchronously) {                                                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2433                 r = new Runnable() {                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2434                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2435                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="-1716707924570444407" onmouseenter="enter('-1716707924570444407');" onmouseout="out('-1716707924570444407');" style="">2436                         if ((callbacks != null) &amp;&amp; (currentScreen != PagedView.INVALID_RESTORE_PAGE)) {  </span>
<span class="-8453570054408401460" onmouseenter="enter('-8453570054408401460');" onmouseout="out('-8453570054408401460');" style="">2437                             callbacks.onPageBoundSynchronously(currentScreen);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2438                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2439                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2440                 };                                                                                       </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2441                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2442             }                                                                                            </span>
<span class="-5413736965388393233" onmouseenter="enter('-5413736965388393233');" onmouseout="out('-5413736965388393233');" style="">2443             // Load all the remaining pages (if we are loading synchronously, we want to defer this      </span>
<span class="-2955787106587599134" onmouseenter="enter('-2955787106587599134');" onmouseout="out('-2955787106587599134');" style="">2444             // work until after the first render)                                                        </span>
<span class="140100708416316466" onmouseenter="enter('140100708416316466');" onmouseout="out('140100708416316466');" style="">2445             synchronized(mDeferredBindRunnables) {                                                       </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">2446                 mDeferredBindRunnables.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2447             }                                                                                            </span>
<span class="4004072035682368150" onmouseenter="enter('4004072035682368150');" onmouseout="out('4004072035682368150');" style=""><abbr title="2448             bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders, isLoadingSynchronously ? mDeferredBindRunnables : null);">2448             bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders, isLoadin</abbr></span>
<span class="4011061048965913553" onmouseenter="enter('4011061048965913553');" onmouseout="out('4011061048965913553');" style="">2449             // Tell the workspace that we&#x27;re done binding items                                          </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2450             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2451                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2452                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2453                     if (callbacks != null) {                                                             </span>
<span class="4571657590383009749" onmouseenter="enter('4571657590383009749');" onmouseout="out('4571657590383009749');" style="">2454                         callbacks.finishBindingItems(isUpgradePath);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2455                     }                                                                                    </span>
<span class="3327220122133784387" onmouseenter="enter('3327220122133784387');" onmouseout="out('3327220122133784387');" style="">2456                     // If we&#x27;re profiling, ensure this is the last thing in the queue.                   </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2457                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="7126424552746320219" onmouseenter="enter('7126424552746320219');" onmouseout="out('7126424552746320219');" style="">2458                         Log.d(TAG, (&quot;bound workspace in &quot; + (SystemClock.uptimeMillis() - t)) + &quot;ms&quot;);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2459                     }                                                                                    </span>
<span class="-2372807547969983284" onmouseenter="enter('-2372807547969983284');" onmouseout="out('-2372807547969983284');" style="">2460                     mIsLoadingAndBindingWorkspace = false;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2461                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2462             };                                                                                           </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2463             if (isLoadingSynchronously) {                                                                </span>
<span class="140100708416316466" onmouseenter="enter('140100708416316466');" onmouseout="out('140100708416316466');" style="">2464                 synchronized(mDeferredBindRunnables) {                                                   </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="">2465                     mDeferredBindRunnables.add(r);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2466                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2467             } else {                                                                                     </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2468                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2469             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2470         }                                                                                                </span>
<span  style="">2471                                                                                                          </span>
<span class="-8837645024880398734" onmouseenter="enter('-8837645024880398734');" onmouseout="out('-8837645024880398734');" style="">2472         private void loadAndBindAllApps() {                                                              </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2473             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-2830976254331120227" onmouseenter="enter('-2830976254331120227');" onmouseout="out('-2830976254331120227');" style="">2474                 Log.d(TAG, &quot;loadAndBindAllApps mAllAppsLoaded=&quot; + mAllAppsLoaded);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2475             }                                                                                            </span>
<span class="-6125216986221494355" onmouseenter="enter('-6125216986221494355');" onmouseout="out('-6125216986221494355');" style="">2476             if (!mAllAppsLoaded) {                                                                       </span>
<span class="5842757820135196564" onmouseenter="enter('5842757820135196564');" onmouseout="out('5842757820135196564');" style="">2477                 loadAllApps();                                                                           </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">2478                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2479                     if (mStopped) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2480                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2481                     }                                                                                    </span>
<span class="4623635226903027710" onmouseenter="enter('4623635226903027710');" onmouseout="out('4623635226903027710');" style="">2482                     mAllAppsLoaded = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2483                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2484             } else {                                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">2485                 onlyBindAllApps();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2486             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2487         }                                                                                                </span>
<span  style="">2488                                                                                                          </span>
<span class="4707433981787810272" onmouseenter="enter('4707433981787810272');" onmouseout="out('4707433981787810272');" style="">2489         private void onlyBindAllApps() {                                                                 </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2490             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2491             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2492                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="1659909424723635951" onmouseenter="enter('1659909424723635951');" onmouseout="out('1659909424723635951');" style="">2493                 Log.w(TAG, &quot;LoaderTask running with no launcher (onlyBindAllApps)&quot;);                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2494                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2495             }                                                                                            </span>
<span class="904073869424416989" onmouseenter="enter('904073869424416989');" onmouseout="out('904073869424416989');" style="">2496             // shallow copy                                                                              </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">2497             @SuppressWarnings(&quot;unchecked&quot;)                                                               </span>
<span class="3610032033107145682" onmouseenter="enter('3610032033107145682');" onmouseout="out('3610032033107145682');" style="">2498             final ArrayList&lt;AppInfo&gt; list = ((ArrayList&lt;AppInfo&gt;) (mBgAllAppsList.data.clone()));        </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2499             Runnable r = new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2500                 public void run() {                                                                      </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2501                     final long t = SystemClock.uptimeMillis();                                           </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2502                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2503                     if (callbacks != null) {                                                             </span>
<span class="-4175293191087427555" onmouseenter="enter('-4175293191087427555');" onmouseout="out('-4175293191087427555');" style="">2504                         callbacks.bindAllApplications(list);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2505                     }                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2506                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="-3062472775145235730" onmouseenter="enter('-3062472775145235730');" onmouseout="out('-3062472775145235730');" style=""><abbr title="2507                         Log.d(TAG, (((&quot;bound all &quot; + list.size()) + &quot; apps from cache in &quot;) + (SystemClock.uptimeMillis() - t)) + &quot;ms&quot;);">2507                         Log.d(TAG, (((&quot;bound all &quot; + list.size()) + &quot; apps from cache in &quot;) + (SystemCloc</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2508                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2509                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2510             };                                                                                           </span>
<span class="1625697599418198126" onmouseenter="enter('1625697599418198126');" onmouseout="out('1625697599418198126');" style="">2511             boolean isRunningOnMainThread = !(sWorkerThread.getThreadId() == Process.myTid());           </span>
<span class="-5455987777066046644" onmouseenter="enter('-5455987777066046644');" onmouseout="out('-5455987777066046644');" style="">2512             if (isRunningOnMainThread) {                                                                 </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style="">2513                 r.run();                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2514             } else {                                                                                     </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="">2515                 mHandler.post(r);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2516             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2517         }                                                                                                </span>
<span  style="">2518                                                                                                          </span>
<span class="-6895852158956881814" onmouseenter="enter('-6895852158956881814');" onmouseout="out('-6895852158956881814');" style="">2519         private void loadAllApps() {                                                                     </span>
<span class="8149184152398766673" onmouseenter="enter('8149184152398766673');" onmouseout="out('8149184152398766673');" style="">2520             final long loadTime = (DEBUG_LOADERS) ? SystemClock.uptimeMillis() : 0;                      </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2521             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2522             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2523                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="-6509823964207432628" onmouseenter="enter('-6509823964207432628');" onmouseout="out('-6509823964207432628');" style="">2524                 Log.w(TAG, &quot;LoaderTask running with no launcher (loadAllApps)&quot;);                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2525                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2526             }                                                                                            </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="">2527             final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                              </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="">2528             mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                            </span>
<span class="-3689765283860688946" onmouseenter="enter('-3689765283860688946');" onmouseout="out('-3689765283860688946');" style="">2529             final List&lt;UserHandleCompat&gt; profiles = mUserManager.getUserProfiles();                      </span>
<span class="2323997493385795900" onmouseenter="enter('2323997493385795900');" onmouseout="out('2323997493385795900');" style="">2530             // Clear the list of apps                                                                    </span>
<span class="-3100741238331493656" onmouseenter="enter('-3100741238331493656');" onmouseout="out('-3100741238331493656');" style="">2531             mBgAllAppsList.clear();                                                                      </span>
<span class="-2262518428251923925" onmouseenter="enter('-2262518428251923925');" onmouseout="out('-2262518428251923925');" style="">2532             for (UserHandleCompat user : profiles) {                                                     </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="">2533                 // Query for the set of apps                                                             </span>
<span class="-4037045398690514139" onmouseenter="enter('-4037045398690514139');" onmouseout="out('-4037045398690514139');" style="">2534                 final long qiaTime = (DEBUG_LOADERS) ? SystemClock.uptimeMillis() : 0;                   </span>
<span class="2012422809707549193" onmouseenter="enter('2012422809707549193');" onmouseout="out('2012422809707549193');" style="">2535                 List&lt;LauncherActivityInfoCompat&gt; apps = mLauncherApps.getActivityList(null, user);       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2536                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="7955021808459073180" onmouseenter="enter('7955021808459073180');" onmouseout="out('7955021808459073180');" style=""><abbr title="2537                     Log.d(TAG, ((&quot;getActivityList took &quot; + (SystemClock.uptimeMillis() - qiaTime)) + &quot;ms for user &quot;) + user);">2537                     Log.d(TAG, ((&quot;getActivityList took &quot; + (SystemClock.uptimeMillis() - qiaTime)) + &quot;ms </abbr></span>
<span class="2799285437292362192" onmouseenter="enter('2799285437292362192');" onmouseout="out('2799285437292362192');" style="">2538                     Log.d(TAG, ((&quot;getActivityList got &quot; + apps.size()) + &quot; apps for user &quot;) + user);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2539                 }                                                                                        </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="">2540             // Fail if we don&#x27;t have any apps                                                            </span>
<span class="8225970391092799876" onmouseenter="enter('8225970391092799876');" onmouseout="out('8225970391092799876');" style="">2541                 if ((apps == null) || apps.isEmpty()) {                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2542                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2543                 }                                                                                        </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="">2544                 // Sort the applications by name                                                         </span>
<span class="-5408684915075564359" onmouseenter="enter('-5408684915075564359');" onmouseout="out('-5408684915075564359');" style="">2545                 final long sortTime = (DEBUG_LOADERS) ? SystemClock.uptimeMillis() : 0;                  </span>
<span class="-6909455281354601369" onmouseenter="enter('-6909455281354601369');" onmouseout="out('-6909455281354601369');" style="">2546                 Collections.sort(apps, new LauncherModel.ShortcutNameComparator(mLabelCache));           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2547                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="6384883837844400091" onmouseenter="enter('6384883837844400091');" onmouseout="out('6384883837844400091');" style="">2548                     Log.d(TAG, (&quot;sort took &quot; + (SystemClock.uptimeMillis() - sortTime)) + &quot;ms&quot;);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2549                 }                                                                                        </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="">2550             // Create the ApplicationInfos                                                               </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="">2551                 for (int i = 0; i &lt; apps.size(); i++) {                                                  </span>
<span class="236419152399396874" onmouseenter="enter('236419152399396874');" onmouseout="out('236419152399396874');" style="">2552                     LauncherActivityInfoCompat app = apps.get(i);                                        </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="">2553                 // This builds the icon bitmaps.                                                         </span>
<span class="-5742259461869454243" onmouseenter="enter('-5742259461869454243');" onmouseout="out('-5742259461869454243');" style="">2554                     mBgAllAppsList.add(new AppInfo(mContext, app, user, mIconCache, mLabelCache));       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2555                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2556             }                                                                                            </span>
<span class="-5221747652878631284" onmouseenter="enter('-5221747652878631284');" onmouseout="out('-5221747652878631284');" style="">2557             // Huh? Shouldn&#x27;t this be inside the Runnable below?                                         </span>
<span class="4457761250277868019" onmouseenter="enter('4457761250277868019');" onmouseout="out('4457761250277868019');" style="">2558             final ArrayList&lt;AppInfo&gt; added = mBgAllAppsList.added;                                       </span>
<span class="3218431008368817671" onmouseenter="enter('3218431008368817671');" onmouseout="out('3218431008368817671');" style="">2559             mBgAllAppsList.added = new ArrayList&lt;AppInfo&gt;();                                             </span>
<span class="2526791049904400058" onmouseenter="enter('2526791049904400058');" onmouseout="out('2526791049904400058');" style="">2560             // Post callback on main thread                                                              </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2561             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2562                 public void run() {                                                                      </span>
<span class="-2007882421121122273" onmouseenter="enter('-2007882421121122273');" onmouseout="out('-2007882421121122273');" style="">2563                     final long bindTime = SystemClock.uptimeMillis();                                    </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2564                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2565                     if (callbacks != null) {                                                             </span>
<span class="8095088373687662981" onmouseenter="enter('8095088373687662981');" onmouseout="out('8095088373687662981');" style="">2566                         callbacks.bindAllApplications(added);                                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2567                         if (DEBUG_LOADERS) {                                                             </span>
<span class="-3541645763576542658" onmouseenter="enter('-3541645763576542658');" onmouseout="out('-3541645763576542658');" style=""><abbr title="2568                             Log.d(TAG, (((&quot;bound &quot; + added.size()) + &quot; apps in &quot;) + (SystemClock.uptimeMillis() - bindTime)) + &quot;ms&quot;);">2568                             Log.d(TAG, (((&quot;bound &quot; + added.size()) + &quot; apps in &quot;) + (SystemClock.uptimeMi</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2569                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2570                     } else {                                                                             </span>
<span class="7641212838781589328" onmouseenter="enter('7641212838781589328');" onmouseout="out('7641212838781589328');" style="">2571                         Log.i(TAG, &quot;not binding apps: no Launcher activity&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2572                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2573                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2574             });                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2575             if (DEBUG_LOADERS) {                                                                         </span>
<span class="1678852613983904602" onmouseenter="enter('1678852613983904602');" onmouseout="out('1678852613983904602');" style="">2576                 Log.d(TAG, (&quot;Icons processed in &quot; + (SystemClock.uptimeMillis() - loadTime)) + &quot;ms&quot;);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2577             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2578         }                                                                                                </span>
<span  style="">2579                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">2580         public void dumpState() {                                                                        </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">2581             synchronized(sBgLock) {                                                                      </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="">2582                 Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                          </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="">2583                 Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                  </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="">2584                 Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                          </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="">2585                 Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);          </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="">2586                 Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2587             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2588         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2589     }                                                                                                    </span>
<span  style="">2590                                                                                                          </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="">2591     void enqueuePackageUpdated(PackageUpdatedTask task) {                                                </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="">2592         sWorker.post(task);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2593     }                                                                                                    </span>
<span  style="">2594                                                                                                          </span>
<span class="-2155382700972431684" onmouseenter="enter('-2155382700972431684');" onmouseout="out('-2155382700972431684');" style="">2595     private class AppsAvailabilityCheck extends BroadcastReceiver {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2596         @Override                                                                                        </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">2597         public void onReceive(Context context, Intent intent) {                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">2598             synchronized(sBgLock) {                                                                      </span>
<span class="7852796152174299893" onmouseenter="enter('7852796152174299893');" onmouseout="out('7852796152174299893');" style=""><abbr title="2599                 final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(mApp.getContext());">2599                 final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(mApp.getContext())</abbr></span>
<span class="-4787354412045768116" onmouseenter="enter('-4787354412045768116');" onmouseout="out('-4787354412045768116');" style="">2600                 ArrayList&lt;String&gt; packagesRemoved;                                                       </span>
<span class="4244873154676657454" onmouseenter="enter('4244873154676657454');" onmouseout="out('4244873154676657454');" style="">2601                 for (Entry&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; entry : sPendingPackages.entrySet()) {     </span>
<span class="5975107845149456463" onmouseenter="enter('5975107845149456463');" onmouseout="out('5975107845149456463');" style="">2602                     UserHandleCompat user = entry.getKey();                                              </span>
<span class="-667022728008343360" onmouseenter="enter('-667022728008343360');" onmouseout="out('-667022728008343360');" style="">2603                     packagesRemoved = new ArrayList&lt;String&gt;();                                           </span>
<span class="1474457728386669675" onmouseenter="enter('1474457728386669675');" onmouseout="out('1474457728386669675');" style="">2604                     for (String pkg : entry.getValue()) {                                                </span>
<span class="-3589045475490406733" onmouseenter="enter('-3589045475490406733');" onmouseout="out('-3589045475490406733');" style="">2605                         if (!launcherApps.isPackageEnabledForProfile(pkg, user)) {                       </span>
<span class="-1955449888814909626" onmouseenter="enter('-1955449888814909626');" onmouseout="out('-1955449888814909626');" style="">2606                             Launcher.addDumpLog(TAG, &quot;Package not found: &quot; + pkg, true);                 </span>
<span class="-7762323097919758551" onmouseenter="enter('-7762323097919758551');" onmouseout="out('-7762323097919758551');" style="">2607                             packagesRemoved.add(pkg);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2608                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2609                     }                                                                                    </span>
<span class="-1545108570433514025" onmouseenter="enter('-1545108570433514025');" onmouseout="out('-1545108570433514025');" style="">2610                     if (!packagesRemoved.isEmpty()) {                                                    </span>
<span class="-1046218902024959239" onmouseenter="enter('-1046218902024959239');" onmouseout="out('-1046218902024959239');" style=""><abbr title="2611                         enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_REMOVE, packagesRemoved.toArray(new String[packagesRemoved.size()]), user));">2611                         enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_REMOVE, packag</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2612                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2613                 }                                                                                        </span>
<span class="483878637633217436" onmouseenter="enter('483878637633217436');" onmouseout="out('483878637633217436');" style="">2614                 sPendingPackages.clear();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2615             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2616         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2617     }                                                                                                    </span>
<span  style="">2618                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2619     /**                                                                                                  </span>
<span class="-4757889214551148663" onmouseenter="enter('-4757889214551148663');" onmouseout="out('-4757889214551148663');" style="">2620      * Workaround to re-check unrestored items, in-case they were installed but the Package-ADD          </span>
<span class="-7981308590935764825" onmouseenter="enter('-7981308590935764825');" onmouseout="out('-7981308590935764825');" style="">2621      * runnable was missed by the launcher.                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2622      */                                                                                                  </span>
<span class="-1837604298505960192" onmouseenter="enter('-1837604298505960192');" onmouseout="out('-1837604298505960192');" style="">2623     public void recheckRestoredItems(final Context context) {                                            </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2624         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2625             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2626             public void run() {                                                                          </span>
<span class="4897732594040868406" onmouseenter="enter('4897732594040868406');" onmouseout="out('4897732594040868406');" style="">2627                 LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);               </span>
<span class="2615938583470046073" onmouseenter="enter('2615938583470046073');" onmouseout="out('2615938583470046073');" style="">2628                 HashSet&lt;String&gt; installedPackages = new HashSet&lt;String&gt;();                               </span>
<span class="-7713836903288582020" onmouseenter="enter('-7713836903288582020');" onmouseout="out('-7713836903288582020');" style="">2629                 UserHandleCompat user = UserHandleCompat.myUserHandle();                                 </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">2630                 synchronized(sBgLock) {                                                                  </span>
<span class="-4290363400846595778" onmouseenter="enter('-4290363400846595778');" onmouseout="out('-4290363400846595778');" style="">2631                     for (ItemInfo info : sBgItemsIdMap.values()) {                                       </span>
<span class="3613572740963864398" onmouseenter="enter('3613572740963864398');" onmouseout="out('3613572740963864398');" style="">2632                         if (info instanceof ShortcutInfo) {                                              </span>
<span class="-3724368528192874383" onmouseenter="enter('-3724368528192874383');" onmouseout="out('-3724368528192874383');" style="">2633                             ShortcutInfo si = ((ShortcutInfo) (info));                                   </span>
<span class="-6301991179873686599" onmouseenter="enter('-6301991179873686599');" onmouseout="out('-6301991179873686599');" style=""><abbr title="2634                             if ((si.isPromise() &amp;&amp; (si.getTargetComponent() != null)) &amp;&amp; launcherApps.isPackageEnabledForProfile(si.getTargetComponent().getPackageName(), user)) {">2634                             if ((si.isPromise() &amp;&amp; (si.getTargetComponent() != null)) &amp;&amp; launcherApps.isP</abbr></span>
<span class="8027032983651882823" onmouseenter="enter('8027032983651882823');" onmouseout="out('8027032983651882823');" style="">2635                                 installedPackages.add(si.getTargetComponent().getPackageName());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2636                             }                                                                            </span>
<span class="-1966513537137476875" onmouseenter="enter('-1966513537137476875');" onmouseout="out('-1966513537137476875');" style="">2637                         } else if (info instanceof LauncherAppWidgetInfo) {                              </span>
<span class="4011740942684641080" onmouseenter="enter('4011740942684641080');" onmouseout="out('4011740942684641080');" style="">2638                             LauncherAppWidgetInfo widget = ((LauncherAppWidgetInfo) (info));             </span>
<span class="9115885693151219755" onmouseenter="enter('9115885693151219755');" onmouseout="out('9115885693151219755');" style=""><abbr title="2639                             if (widget.hasRestoreFlag(LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY) &amp;&amp; launcherApps.isPackageEnabledForProfile(widget.providerName.getPackageName(), user)) {">2639                             if (widget.hasRestoreFlag(LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY) &amp;&amp; l</abbr></span>
<span class="-5968826008275428630" onmouseenter="enter('-5968826008275428630');" onmouseout="out('-5968826008275428630');" style="">2640                                 installedPackages.add(widget.providerName.getPackageName());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2641                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2642                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2643                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2644                 }                                                                                        </span>
<span class="-8755538775344321333" onmouseenter="enter('-8755538775344321333');" onmouseout="out('-8755538775344321333');" style="">2645                 if (!installedPackages.isEmpty()) {                                                      </span>
<span class="1551205659826155261" onmouseenter="enter('1551205659826155261');" onmouseout="out('1551205659826155261');" style="">2646                     final ArrayList&lt;AppInfo&gt; restoredApps = new ArrayList&lt;AppInfo&gt;();                    </span>
<span class="-3020018355032355950" onmouseenter="enter('-3020018355032355950');" onmouseout="out('-3020018355032355950');" style="">2647                     for (String pkg : installedPackages) {                                               </span>
<span class="-1472387192310078173" onmouseenter="enter('-1472387192310078173');" onmouseout="out('-1472387192310078173');" style="">2648                         for (LauncherActivityInfoCompat info : launcherApps.getActivityList(pkg, user)) {</span>
<span class="-4626697810297530275" onmouseenter="enter('-4626697810297530275');" onmouseout="out('-4626697810297530275');" style="">2649                             restoredApps.add(new AppInfo(context, info, user, mIconCache, null));        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2650                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2651                     }                                                                                    </span>
<span class="-2944114548254090265" onmouseenter="enter('-2944114548254090265');" onmouseout="out('-2944114548254090265');" style="">2652                     final Callbacks callbacks = (mCallbacks != null) ? mCallbacks.get() : null;          </span>
<span class="838327603557009686" onmouseenter="enter('838327603557009686');" onmouseout="out('838327603557009686');" style="">2653                     if (!restoredApps.isEmpty()) {                                                       </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2654                         mHandler.post(new Runnable() {                                                   </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2655                             public void run() {                                                          </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2656                                 Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;           </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2657                                 if ((callbacks == cb) &amp;&amp; (cb != null)) {                                 </span>
<span class="-7685400884791180573" onmouseenter="enter('-7685400884791180573');" onmouseout="out('-7685400884791180573');" style="">2658                                     callbacks.bindAppsRestored(restoredApps);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2659                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2660                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2661                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2662                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2663                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2664             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2665         };                                                                                               </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style="">2666         sWorker.post(r);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2667     }                                                                                                    </span>
<span  style="">2668                                                                                                          </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="">2669     private class PackageUpdatedTask implements Runnable {                                               </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="">2670         int mOp;                                                                                         </span>
<span  style="">2671                                                                                                          </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="">2672         String[] mPackages;                                                                              </span>
<span  style="">2673                                                                                                          </span>
<span class="2923888301096709084" onmouseenter="enter('2923888301096709084');" onmouseout="out('2923888301096709084');" style="">2674         UserHandleCompat mUser;                                                                          </span>
<span  style="">2675                                                                                                          </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="">2676         public static final int OP_NONE = 0;                                                             </span>
<span  style="">2677                                                                                                          </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="">2678         public static final int OP_ADD = 1;                                                              </span>
<span  style="">2679                                                                                                          </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="">2680         public static final int OP_UPDATE = 2;                                                           </span>
<span  style="">2681                                                                                                          </span>
<span class="7552840216364086352" onmouseenter="enter('7552840216364086352');" onmouseout="out('7552840216364086352');" style="">2682         // uninstlled                                                                                    </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="">2683         public static final int OP_REMOVE = 3; // uninstlled                                             </span>
<span  style="">2684                                                                                                          </span>
<span class="75376153538485775" onmouseenter="enter('75376153538485775');" onmouseout="out('75376153538485775');" style="">2685         // external media unmounted                                                                      </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="">2686         public static final int OP_UNAVAILABLE = 4; // external media unmounted                          </span>
<span  style="">2687                                                                                                          </span>
<span class="3202497835561249087" onmouseenter="enter('3202497835561249087');" onmouseout="out('3202497835561249087');" style="">2688         public PackageUpdatedTask(int op, String[] packages, UserHandleCompat user) {                    </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="">2689             mOp = op;                                                                                    </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="">2690             mPackages = packages;                                                                        </span>
<span class="2953270128049103408" onmouseenter="enter('2953270128049103408');" onmouseout="out('2953270128049103408');" style="">2691             mUser = user;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2692         }                                                                                                </span>
<span  style="">2693                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2694         public void run() {                                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">2695             final Context context = mApp.getContext();                                                   </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="">2696             final String[] packages = mPackages;                                                         </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="">2697             final int N = packages.length;                                                               </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="">2698             switch (mOp) {                                                                               </span>
<span class="-4399643213085174409" onmouseenter="enter('-4399643213085174409');" onmouseout="out('-4399643213085174409');" style="">2699                 case OP_ADD :                                                                            </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2700                     for (int i = 0; i &lt; N; i++) {                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2701                         if (DEBUG_LOADERS) {                                                             </span>
<span class="-127576380874548097" onmouseenter="enter('-127576380874548097');" onmouseout="out('-127576380874548097');" style="">2702                             Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2703                         }                                                                                </span>
<span class="6575289823687229863" onmouseenter="enter('6575289823687229863');" onmouseout="out('6575289823687229863');" style="">2704                         mIconCache.remove(packages[i], mUser);                                           </span>
<span class="-4330949928576769866" onmouseenter="enter('-4330949928576769866');" onmouseout="out('-4330949928576769866');" style="">2705                         mBgAllAppsList.addPackage(context, packages[i], mUser);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2706                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2707                     break;                                                                               </span>
<span class="-292270606337492127" onmouseenter="enter('-292270606337492127');" onmouseout="out('-292270606337492127');" style="">2708                 case OP_UPDATE :                                                                         </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2709                     for (int i = 0; i &lt; N; i++) {                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2710                         if (DEBUG_LOADERS) {                                                             </span>
<span class="-4422863114349853532" onmouseenter="enter('-4422863114349853532');" onmouseout="out('-4422863114349853532');" style="">2711                             Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2712                         }                                                                                </span>
<span class="4552988343352109939" onmouseenter="enter('4552988343352109939');" onmouseout="out('4552988343352109939');" style="">2713                         mBgAllAppsList.updatePackage(context, packages[i], mUser);                       </span>
<span class="6401867013694049249" onmouseenter="enter('6401867013694049249');" onmouseout="out('6401867013694049249');" style=""><abbr title="2714                         WidgetPreviewLoader.removePackageFromDb(mApp.getWidgetPreviewCacheDb(), packages[i]);">2714                         WidgetPreviewLoader.removePackageFromDb(mApp.getWidgetPreviewCacheDb(), packages[</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2715                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2716                     break;                                                                               </span>
<span class="4174522110729030147" onmouseenter="enter('4174522110729030147');" onmouseout="out('4174522110729030147');" style="">2717                 case OP_REMOVE :                                                                         </span>
<span class="-5034577413987496211" onmouseenter="enter('-5034577413987496211');" onmouseout="out('-5034577413987496211');" style="">2718                 case OP_UNAVAILABLE :                                                                    </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2719                     for (int i = 0; i &lt; N; i++) {                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2720                         if (DEBUG_LOADERS) {                                                             </span>
<span class="6512000517820647607" onmouseenter="enter('6512000517820647607');" onmouseout="out('6512000517820647607');" style="">2721                             Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2722                         }                                                                                </span>
<span class="-4221302437709808804" onmouseenter="enter('-4221302437709808804');" onmouseout="out('-4221302437709808804');" style="">2723                         mBgAllAppsList.removePackage(packages[i], mUser);                                </span>
<span class="6401867013694049249" onmouseenter="enter('6401867013694049249');" onmouseout="out('6401867013694049249');" style=""><abbr title="2724                         WidgetPreviewLoader.removePackageFromDb(mApp.getWidgetPreviewCacheDb(), packages[i]);">2724                         WidgetPreviewLoader.removePackageFromDb(mApp.getWidgetPreviewCacheDb(), packages[</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2725                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2726                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2727             }                                                                                            </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="">2728             ArrayList&lt;AppInfo&gt; added = null;                                                             </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="">2729             ArrayList&lt;AppInfo&gt; modified = null;                                                          </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="">2730             final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                             </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="">2731             if (mBgAllAppsList.added.size() &gt; 0) {                                                       </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="">2732                 added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                    </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="">2733                 mBgAllAppsList.added.clear();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2734             }                                                                                            </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="">2735             if (mBgAllAppsList.modified.size() &gt; 0) {                                                    </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="">2736                 modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                              </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="">2737                 mBgAllAppsList.modified.clear();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2738             }                                                                                            </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="">2739             if (mBgAllAppsList.removed.size() &gt; 0) {                                                     </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="">2740                 removedApps.addAll(mBgAllAppsList.removed);                                              </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="">2741                 mBgAllAppsList.removed.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2742             }                                                                                            </span>
<span class="-2944114548254090265" onmouseenter="enter('-2944114548254090265');" onmouseout="out('-2944114548254090265');" style="">2743             final Callbacks callbacks = (mCallbacks != null) ? mCallbacks.get() : null;                  </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">2744             if (callbacks == null) {                                                                     </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="">2745                 Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2746                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2747             }                                                                                            </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="">2748             if (added != null) {                                                                         </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="">2749                 // Ensure that we add all the workspace applications to the db                           </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">2750                 if (LauncherAppState.isDisableAllApps()) {                                               </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="">2751                     final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);               </span>
<span class="-3306619504252280502" onmouseenter="enter('-3306619504252280502');" onmouseout="out('-3306619504252280502');" style="">2752                     addAndBindAddedWorkspaceApps(context, addedInfos);                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2753                 } else {                                                                                 </span>
<span class="-4365713328493794841" onmouseenter="enter('-4365713328493794841');" onmouseout="out('-4365713328493794841');" style="">2754                     addAppsToAllApps(context, added);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2755                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2756             }                                                                                            </span>
<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="">2757             if (modified != null) {                                                                      </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="">2758                 final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                       </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="">2759                 // Update the launcher db to reflect the changes                                         </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="">2760                 for (AppInfo a : modifiedFinal) {                                                        </span>
<span class="-1726556904055536825" onmouseenter="enter('-1726556904055536825');" onmouseout="out('-1726556904055536825');" style="">2761                     ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName, mUser);     </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2762                     for (ItemInfo i : infos) {                                                           </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="">2763                         if (isShortcutInfoUpdateable(i)) {                                               </span>
<span class="7602451342572088838" onmouseenter="enter('7602451342572088838');" onmouseout="out('7602451342572088838');" style="">2764                             ShortcutInfo info = ((ShortcutInfo) (i));                                    </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="">2765                             info.title = a.title.toString();                                             </span>
<span class="911685269403024085" onmouseenter="enter('911685269403024085');" onmouseout="out('911685269403024085');" style="">2766                             info.contentDescription = a.contentDescription;                              </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">2767                             updateItemInDatabase(context, info);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2768                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2769                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2770                 }                                                                                        </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2771                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2772                     public void run() {                                                                  </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2773                         Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                   </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2774                         if ((callbacks == cb) &amp;&amp; (cb != null)) {                                         </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="">2775                             callbacks.bindAppsUpdated(modifiedFinal);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2776                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2777                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2778                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2779             }                                                                                            </span>
<span class="8617927331448094408" onmouseenter="enter('8617927331448094408');" onmouseout="out('8617927331448094408');" style="">2780             final ArrayList&lt;String&gt; removedPackageNames = new ArrayList&lt;String&gt;();                       </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="">2781             if (mOp == OP_REMOVE) {                                                                      </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="">2782                 // Mark all packages in the broadcast to be removed                                      </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="">2783                 removedPackageNames.addAll(Arrays.asList(packages));                                     </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="">2784             } else if (mOp == OP_UPDATE) {                                                               </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="">2785                 // Mark disabled packages in the broadcast to be removed                                 </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="">2786                 final PackageManager pm = context.getPackageManager();                                   </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2787                 for (int i = 0; i &lt; N; i++) {                                                            </span>
<span class="1189279971614907536" onmouseenter="enter('1189279971614907536');" onmouseout="out('1189279971614907536');" style="">2788                     if (isPackageDisabled(context, packages[i], mUser)) {                                </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="">2789                         removedPackageNames.add(packages[i]);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2790                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2791                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2792             }                                                                                            </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="">2793             // Remove all the components associated with this package                                    </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="">2794             for (String pn : removedPackageNames) {                                                      </span>
<span class="6482411304432401961" onmouseenter="enter('6482411304432401961');" onmouseout="out('6482411304432401961');" style="">2795                 deletePackageFromDatabase(context, pn, mUser);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2796             }                                                                                            </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="">2797             // Remove all the specific components                                                        </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="">2798             for (AppInfo a : removedApps) {                                                              </span>
<span class="-1726556904055536825" onmouseenter="enter('-1726556904055536825');" onmouseout="out('-1726556904055536825');" style="">2799                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName, mUser);         </span>
<span class="7293231507608058112" onmouseenter="enter('7293231507608058112');" onmouseout="out('7293231507608058112');" style="">2800                 deleteItemsFromDatabase(context, infos);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2801             }                                                                                            </span>
<span class="4476200888748494282" onmouseenter="enter('4476200888748494282');" onmouseout="out('4476200888748494282');" style="">2802             if ((!removedPackageNames.isEmpty()) || (!removedApps.isEmpty())) {                          </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="">2803                 // Remove any queued items from the install queue                                        </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="">2804                 String spKey = LauncherAppState.getSharedPreferencesKey();                               </span>
<span class="6255842996478861527" onmouseenter="enter('6255842996478861527');" onmouseout="out('6255842996478861527');" style="">2805                 SharedPreferences sp = context.getSharedPreferences(spKey, Context.MODE_PRIVATE);        </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="">2806                 InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                 </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="">2807                 // Call the components-removed callback                                                  </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2808                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2809                     public void run() {                                                                  </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2810                         Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                   </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2811                         if ((callbacks == cb) &amp;&amp; (cb != null)) {                                         </span>
<span class="-4641714223338514236" onmouseenter="enter('-4641714223338514236');" onmouseout="out('-4641714223338514236');" style="">2812                             callbacks.bindComponentsRemoved(removedPackageNames, removedApps, mUser);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2813                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2814                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2815                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2816             }                                                                                            </span>
<span class="7426150459827124612" onmouseenter="enter('7426150459827124612');" onmouseout="out('7426150459827124612');" style="">2817             final ArrayList&lt;Object&gt; widgetsAndShortcuts = getSortedWidgetsAndShortcuts(context);         </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2818             mHandler.post(new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2819                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2820                 public void run() {                                                                      </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2821                     Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                       </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2822                     if ((callbacks == cb) &amp;&amp; (cb != null)) {                                             </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="">2823                         callbacks.bindPackagesUpdated(widgetsAndShortcuts);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2824                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2825                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2826             });                                                                                          </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="">2827             // Write all the logs to disk                                                                </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2828             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2829                 public void run() {                                                                      </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2830                     Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                       </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2831                     if ((callbacks == cb) &amp;&amp; (cb != null)) {                                             </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="">2832                         callbacks.dumpLogsToLocalData();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2833                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2834                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2835             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2836         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2837     }                                                                                                    </span>
<span  style="">2838                                                                                                          </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="">2839     // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                     </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="">2840     public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                      </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">2841         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="">2842         final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                           </span>
<span class="3637822346102420347" onmouseenter="enter('3637822346102420347');" onmouseout="out('3637822346102420347');" style="">2843         widgetsAndShortcuts.addAll(AppWidgetManagerCompat.getInstance(context).getAllProviders());       </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="">2844         Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                              </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="">2845         widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));            </span>
<span class="3220762690300374865" onmouseenter="enter('3220762690300374865');" onmouseout="out('3220762690300374865');" style="">2846         Collections.sort(widgetsAndShortcuts, new WidgetAndShortcutNameComparator(context));             </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="">2847         return widgetsAndShortcuts;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2848     }                                                                                                    </span>
<span  style="">2849                                                                                                          </span>
<span class="-8167988819429958505" onmouseenter="enter('-8167988819429958505');" onmouseout="out('-8167988819429958505');" style=""><abbr title="2850     private static boolean isPackageDisabled(Context context, String packageName, UserHandleCompat user) {">2850     private static boolean isPackageDisabled(Context context, String packageName, UserHandleCompat user) </abbr></span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">2851         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="2722752944691677150" onmouseenter="enter('2722752944691677150');" onmouseout="out('2722752944691677150');" style="">2852         return !launcherApps.isPackageEnabledForProfile(packageName, user);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2853     }                                                                                                    </span>
<span  style="">2854                                                                                                          </span>
<span class="2249090448540517434" onmouseenter="enter('2249090448540517434');" onmouseout="out('2249090448540517434');" style=""><abbr title="2855     public static boolean isValidPackageActivity(Context context, ComponentName cn, UserHandleCompat user) {">2855     public static boolean isValidPackageActivity(Context context, ComponentName cn, UserHandleCompat user</abbr></span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="">2856         if (cn == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2857             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2858         }                                                                                                </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">2859         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="-6788056339565196353" onmouseenter="enter('-6788056339565196353');" onmouseout="out('-6788056339565196353');" style="">2860         if (!launcherApps.isPackageEnabledForProfile(cn.getPackageName(), user)) {                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2861             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2862         }                                                                                                </span>
<span class="6138596583040601663" onmouseenter="enter('6138596583040601663');" onmouseout="out('6138596583040601663');" style="">2863         return launcherApps.isActivityEnabledForProfile(cn, user);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2864     }                                                                                                    </span>
<span  style="">2865                                                                                                          </span>
<span class="2875319480499362956" onmouseenter="enter('2875319480499362956');" onmouseout="out('2875319480499362956');" style="">2866     public static boolean isValidPackage(Context context, String packageName, UserHandleCompat user) {   </span>
<span class="2797777100746091358" onmouseenter="enter('2797777100746091358');" onmouseout="out('2797777100746091358');" style="">2867         if (packageName == null) {                                                                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2868             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2869         }                                                                                                </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="">2870         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="7814688882071205012" onmouseenter="enter('7814688882071205012');" onmouseout="out('7814688882071205012');" style="">2871         return launcherApps.isPackageEnabledForProfile(packageName, user);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2872     }                                                                                                    </span>
<span  style="">2873                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2874     /**                                                                                                  </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="">2875      * Make an ShortcutInfo object for a restored application or shortcut item that points               </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="">2876      * to a package that is not yet installed on the system.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2877      */                                                                                                  </span>
<span class="-8175192206090066619" onmouseenter="enter('-8175192206090066619');" onmouseout="out('-8175192206090066619');" style=""><abbr title="2878     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex, Intent intent, int promiseType) {">2878     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex, Intent intent, int promiseType</abbr></span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2879         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">2880         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="4581768130100169027" onmouseenter="enter('4581768130100169027');" onmouseout="out('4581768130100169027');" style="">2881         mIconCache.getTitleAndIcon(info, intent, info.user, true);                                       </span>
<span class="-7011074266974647989" onmouseenter="enter('-7011074266974647989');" onmouseout="out('-7011074266974647989');" style="">2882         if ((promiseType &amp; ShortcutInfo.FLAG_RESTORED_ICON) != 0) {                                      </span>
<span class="-8984449213491193878" onmouseenter="enter('-8984449213491193878');" onmouseout="out('-8984449213491193878');" style="">2883             String title = (cursor != null) ? cursor.getString(titleIndex) : null;                       </span>
<span class="-5841612334834081385" onmouseenter="enter('-5841612334834081385');" onmouseout="out('-5841612334834081385');" style="">2884             if (!TextUtils.isEmpty(title)) {                                                             </span>
<span class="-2613617994889375298" onmouseenter="enter('-2613617994889375298');" onmouseout="out('-2613617994889375298');" style="">2885                 info.title = title;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2886             }                                                                                            </span>
<span class="-5174755841373748942" onmouseenter="enter('-5174755841373748942');" onmouseout="out('-5174755841373748942');" style="">2887             info.status = ShortcutInfo.FLAG_RESTORED_ICON;                                               </span>
<span class="-4038501336907671377" onmouseenter="enter('-4038501336907671377');" onmouseout="out('-4038501336907671377');" style="">2888         } else if ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {                             </span>
<span class="-7717414875603328452" onmouseenter="enter('-7717414875603328452');" onmouseout="out('-7717414875603328452');" style="">2889             if (TextUtils.isEmpty(info.title)) {                                                         </span>
<span class="-5806908871812941257" onmouseenter="enter('-5806908871812941257');" onmouseout="out('-5806908871812941257');" style="">2890                 info.title = (cursor != null) ? cursor.getString(titleIndex) : &quot;&quot;;                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2891             }                                                                                            </span>
<span class="-4388547064813731487" onmouseenter="enter('-4388547064813731487');" onmouseout="out('-4388547064813731487');" style="">2892             info.status = ShortcutInfo.FLAG_AUTOINTALL_ICON;                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2893         } else {                                                                                         </span>
<span class="5717376002108262372" onmouseenter="enter('5717376002108262372');" onmouseout="out('5717376002108262372');" style="">2894             throw new InvalidParameterException(&quot;Invalid restoreType &quot; + promiseType);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2895         }                                                                                                </span>
<span class="-1867930841645421482" onmouseenter="enter('-1867930841645421482');" onmouseout="out('-1867930841645421482');" style="">2896         info.contentDescription = mUserManager.getBadgedLabelForUser(info.title.toString(), info.user);  </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">2897         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="-3783926904025262102" onmouseenter="enter('-3783926904025262102');" onmouseout="out('-3783926904025262102');" style="">2898         info.promisedIntent = intent;                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">2899         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2900     }                                                                                                    </span>
<span  style="">2901                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2902     /**                                                                                                  </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="">2903      * Make an Intent object for a restored application or shortcut item that points                     </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="">2904      * to the market page for the item.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2905      */                                                                                                  </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="">2906     private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                     </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2907         ComponentName componentName = intent.getComponent();                                             </span>
<span class="-3881801991978262069" onmouseenter="enter('-3881801991978262069');" onmouseout="out('-3881801991978262069');" style="">2908         return getMarketIntent(componentName.getPackageName());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2909     }                                                                                                    </span>
<span  style="">2910                                                                                                          </span>
<span class="-3260913833937220020" onmouseenter="enter('-3260913833937220020');" onmouseout="out('-3260913833937220020');" style="">2911     static Intent getMarketIntent(String packageName) {                                                  </span>
<span class="-3442204550324448227" onmouseenter="enter('-3442204550324448227');" onmouseout="out('-3442204550324448227');" style=""><abbr title="2912         return new Intent(Intent.ACTION_VIEW).setData(new Uri.Builder().scheme(&quot;market&quot;).authority(&quot;details&quot;).appendQueryParameter(&quot;id&quot;, packageName).build());">2912         return new Intent(Intent.ACTION_VIEW).setData(new Uri.Builder().scheme(&quot;market&quot;).authority(&quot;detai</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2913     }                                                                                                    </span>
<span  style="">2914                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2915     /**                                                                                                  </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="">2916      * This is called from the code that adds shortcuts from the intent receiver.  This                  </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="">2917      * doesn&#x27;t have a Cursor, but                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2918      */                                                                                                  </span>
<span class="-6775236472694544699" onmouseenter="enter('-6775236472694544699');" onmouseout="out('-6775236472694544699');" style=""><abbr title="2919     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, UserHandleCompat user, Context context) {">2919     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, UserHandleCompat user, Con</abbr></span>
<span class="-7378868523772977866" onmouseenter="enter('-7378868523772977866');" onmouseout="out('-7378868523772977866');" style="">2920         return getShortcutInfo(manager, intent, user, context, null, -1, -1, null, false);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2921     }                                                                                                    </span>
<span  style="">2922                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2923     /**                                                                                                  </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="">2924      * Make an ShortcutInfo object for a shortcut that is an application.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2925      *                                                                                                   </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="">2926      * If c is not null, then it will be used to fill in missing data like the title and icon.           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2927      */                                                                                                  </span>
<span class="1800234406183738213" onmouseenter="enter('1800234406183738213');" onmouseout="out('1800234406183738213');" style=""><abbr title="2928     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, UserHandleCompat user, Context context, Cursor c, int iconIndex, int titleIndex, HashMap&lt;Object, CharSequence&gt; labelCache, boolean allowMissingTarget) {">2928     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, UserHandleCompat user, Con</abbr></span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="">2929         if (user == null) {                                                                              </span>
<span class="6545168092911351889" onmouseenter="enter('6545168092911351889');" onmouseout="out('6545168092911351889');" style="">2930             Log.d(TAG, &quot;Null user found in getShortcutInfo&quot;);                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">2931             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2932         }                                                                                                </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2933         ComponentName componentName = intent.getComponent();                                             </span>
<span class="-5224470428335408787" onmouseenter="enter('-5224470428335408787');" onmouseout="out('-5224470428335408787');" style="">2934         if (componentName == null) {                                                                     </span>
<span class="4371782537001302642" onmouseenter="enter('4371782537001302642');" onmouseout="out('4371782537001302642');" style="">2935             Log.d(TAG, &quot;Missing component found in getShortcutInfo: &quot; + componentName);                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">2936             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2937         }                                                                                                </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="">2938         Intent newIntent = new Intent(intent.getAction(), null);                                         </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="">2939         newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                 </span>
<span class="6894377559056826774" onmouseenter="enter('6894377559056826774');" onmouseout="out('6894377559056826774');" style="">2940         newIntent.setComponent(componentName);                                                           </span>
<span class="-966571371435372555" onmouseenter="enter('-966571371435372555');" onmouseout="out('-966571371435372555');" style="">2941         LauncherActivityInfoCompat lai = mLauncherApps.resolveActivity(newIntent, user);                 </span>
<span class="-3636071150680138349" onmouseenter="enter('-3636071150680138349');" onmouseout="out('-3636071150680138349');" style="">2942         if ((lai == null) &amp;&amp; (!allowMissingTarget)) {                                                    </span>
<span class="-2395110402435537171" onmouseenter="enter('-2395110402435537171');" onmouseout="out('-2395110402435537171');" style="">2943             Log.d(TAG, &quot;Missing activity found in getShortcutInfo: &quot; + componentName);                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">2944             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2945         }                                                                                                </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2946         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="">2947         // the resource -- This may implicitly give us back the fallback icon,                           </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="">2948         // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                        </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="">2949         // to avoid saving lots of copies of that in the database, and most apps                         </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="">2950         // have icons anyway.                                                                            </span>
<span class="-6777959075043703494" onmouseenter="enter('-6777959075043703494');" onmouseout="out('-6777959075043703494');" style="">2951         Bitmap icon = mIconCache.getIcon(componentName, lai, labelCache);                                </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">2952         // the db                                                                                        </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2953         if (icon == null) {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2954             if (c != null) {                                                                             </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">2955                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2956             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2957         }                                                                                                </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">2958         // the fallback icon                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2959         if (icon == null) {                                                                              </span>
<span class="-1443979577510132687" onmouseenter="enter('-1443979577510132687');" onmouseout="out('-1443979577510132687');" style="">2960             icon = mIconCache.getDefaultIcon(user);                                                      </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">2961             info.usingFallbackIcon = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2962         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">2963         info.setIcon(icon);                                                                              </span>
<span class="-7595242445841823644" onmouseenter="enter('-7595242445841823644');" onmouseout="out('-7595242445841823644');" style="">2964         // From the cache.                                                                               </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">2965         if (labelCache != null) {                                                                        </span>
<span class="3073733017601521903" onmouseenter="enter('3073733017601521903');" onmouseout="out('3073733017601521903');" style="">2966             info.title = labelCache.get(componentName);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2967         }                                                                                                </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="">2968         // from the resource                                                                             </span>
<span class="4755391288823593225" onmouseenter="enter('4755391288823593225');" onmouseout="out('4755391288823593225');" style="">2969         if ((info.title == null) &amp;&amp; (lai != null)) {                                                     </span>
<span class="-4488945615052684527" onmouseenter="enter('-4488945615052684527');" onmouseout="out('-4488945615052684527');" style="">2970             info.title = lai.getLabel();                                                                 </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">2971             if (labelCache != null) {                                                                    </span>
<span class="-3170508962365680295" onmouseenter="enter('-3170508962365680295');" onmouseout="out('-3170508962365680295');" style="">2972                 labelCache.put(componentName, info.title);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2973             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2974         }                                                                                                </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="">2975         // from the db                                                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">2976         if (info.title == null) {                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2977             if (c != null) {                                                                             </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">2978                 info.title = c.getString(titleIndex);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2979             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2980         }                                                                                                </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="">2981         // fall back to the class name of the activity                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">2982         if (info.title == null) {                                                                        </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="">2983             info.title = componentName.getClassName();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2984         }                                                                                                </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="">2985         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                </span>
<span class="-7567614667172676383" onmouseenter="enter('-7567614667172676383');" onmouseout="out('-7567614667172676383');" style="">2986         info.user = user;                                                                                </span>
<span class="-1867930841645421482" onmouseenter="enter('-1867930841645421482');" onmouseout="out('-1867930841645421482');" style="">2987         info.contentDescription = mUserManager.getBadgedLabelForUser(info.title.toString(), info.user);  </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">2988         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2989     }                                                                                                    </span>
<span  style="">2990                                                                                                          </span>
<span class="7726226344846472977" onmouseenter="enter('7726226344846472977');" onmouseout="out('7726226344846472977');" style="">2991     static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos, ItemInfoFilter f) {           </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="">2992         HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                            </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2993         for (ItemInfo i : infos) {                                                                       </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">2994             if (i instanceof ShortcutInfo) {                                                             </span>
<span class="7602451342572088838" onmouseenter="enter('7602451342572088838');" onmouseout="out('7602451342572088838');" style="">2995                 ShortcutInfo info = ((ShortcutInfo) (i));                                                </span>
<span class="-8411217647144645125" onmouseenter="enter('-8411217647144645125');" onmouseout="out('-8411217647144645125');" style="">2996                 ComponentName cn = info.getTargetComponent();                                            </span>
<span class="716065875882273504" onmouseenter="enter('716065875882273504');" onmouseout="out('716065875882273504');" style="">2997                 if ((cn != null) &amp;&amp; f.filterItem(null, info, cn)) {                                      </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">2998                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2999                 }                                                                                        </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="">3000             } else if (i instanceof FolderInfo) {                                                        </span>
<span class="1485373007744595252" onmouseenter="enter('1485373007744595252');" onmouseout="out('1485373007744595252');" style="">3001                 FolderInfo info = ((FolderInfo) (i));                                                    </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="">3002                 for (ShortcutInfo s : info.contents) {                                                   </span>
<span class="-5499244430299718871" onmouseenter="enter('-5499244430299718871');" onmouseout="out('-5499244430299718871');" style="">3003                     ComponentName cn = s.getTargetComponent();                                           </span>
<span class="-2117620301865494938" onmouseenter="enter('-2117620301865494938');" onmouseout="out('-2117620301865494938');" style="">3004                     if ((cn != null) &amp;&amp; f.filterItem(info, s, cn)) {                                     </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="">3005                         filtered.add(s);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3006                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3007                 }                                                                                        </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="">3008             } else if (i instanceof LauncherAppWidgetInfo) {                                             </span>
<span class="6027076904423340896" onmouseenter="enter('6027076904423340896');" onmouseout="out('6027076904423340896');" style="">3009                 LauncherAppWidgetInfo info = ((LauncherAppWidgetInfo) (i));                              </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="">3010                 ComponentName cn = info.providerName;                                                    </span>
<span class="716065875882273504" onmouseenter="enter('716065875882273504');" onmouseout="out('716065875882273504');" style="">3011                 if ((cn != null) &amp;&amp; f.filterItem(null, info, cn)) {                                      </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3012                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3013                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3014             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3015         }                                                                                                </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="">3016         return new ArrayList&lt;ItemInfo&gt;(filtered);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3017     }                                                                                                    </span>
<span  style="">3018                                                                                                          </span>
<span class="5180427201621325041" onmouseenter="enter('5180427201621325041');" onmouseout="out('5180427201621325041');" style=""><abbr title="3019     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname, final UserHandleCompat user) {">3019     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname, final UserHandleCo</abbr></span>
<span class="-3373937432913193160" onmouseenter="enter('-3373937432913193160');" onmouseout="out('-3373937432913193160');" style="">3020         ItemInfoFilter filter = new ItemInfoFilter() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3021             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3022             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="5970365724964589884" onmouseenter="enter('5970365724964589884');" onmouseout="out('5970365724964589884');" style="">3023                 if (info.user == null) {                                                                 </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="">3024                     return cn.equals(cname);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3025                 } else {                                                                                 </span>
<span class="9080235702604787251" onmouseenter="enter('9080235702604787251');" onmouseout="out('9080235702604787251');" style="">3026                     return cn.equals(cname) &amp;&amp; info.user.equals(user);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3027                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3028             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3029         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3030         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3031     }                                                                                                    </span>
<span  style="">3032                                                                                                          </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="">3033     public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                         </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3034         if (i instanceof ShortcutInfo) {                                                                 </span>
<span class="7602451342572088838" onmouseenter="enter('7602451342572088838');" onmouseout="out('7602451342572088838');" style="">3035             ShortcutInfo info = ((ShortcutInfo) (i));                                                    </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="">3036             // We need to check for ACTION_MAIN otherwise getComponent() might                           </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="">3037             // return null for some shortcuts (for instance, for shortcuts to                            </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="">3038             // web pages.)                                                                               </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="">3039             Intent intent = info.intent;                                                                 </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="">3040             ComponentName name = intent.getComponent();                                                  </span>
<span class="6342345119459728583" onmouseenter="enter('6342345119459728583');" onmouseout="out('6342345119459728583');" style=""><abbr title="3041             if (((info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) &amp;&amp; Intent.ACTION_MAIN.equals(intent.getAction())) &amp;&amp; (name != null)) {">3041             if (((info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) &amp;&amp; Intent.ACTION_MAI</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3042                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3043             }                                                                                            </span>
<span class="-5396282347241069474" onmouseenter="enter('-5396282347241069474');" onmouseout="out('-5396282347241069474');" style="">3044             // placeholder shortcuts get special treatment, let them through too.                        </span>
<span class="-8737155453802783041" onmouseenter="enter('-8737155453802783041');" onmouseout="out('-8737155453802783041');" style="">3045             if (info.isPromise()) {                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3046                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3047             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3048         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3049         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3050     }                                                                                                    </span>
<span  style="">3051                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3052     /**                                                                                                  </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="">3053      * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3054      */                                                                                                  </span>
<span class="5032513475497319317" onmouseenter="enter('5032513475497319317');" onmouseout="out('5032513475497319317');" style=""><abbr title="3055     private ShortcutInfo getShortcutInfo(Cursor c, Context context, int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex, int titleIndex) {">3055     private ShortcutInfo getShortcutInfo(Cursor c, Context context, int iconTypeIndex, int iconPackageInd</abbr></span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3056         Bitmap icon = null;                                                                              </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3057         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="5882358276056228538" onmouseenter="enter('5882358276056228538');" onmouseout="out('5882358276056228538');" style="">3058         // Non-app shortcuts are only supported for current user.                                        </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">3059         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3060         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="">3061         // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                  </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">3062         info.title = c.getString(titleIndex);                                                            </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="">3063         int iconType = c.getInt(iconTypeIndex);                                                          </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="">3064         switch (iconType) {                                                                              </span>
<span class="7850088382151211959" onmouseenter="enter('7850088382151211959');" onmouseout="out('7850088382151211959');" style="">3065             case LauncherSettings.Favorites.ICON_TYPE_RESOURCE :                                         </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="">3066                 String packageName = c.getString(iconPackageIndex);                                      </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="">3067                 String resourceName = c.getString(iconResourceIndex);                                    </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3068                 PackageManager packageManager = context.getPackageManager();                             </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3069                 info.customIcon = false;                                                                 </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="">3070             // the resource                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3071                 try {                                                                                    </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="">3072                     Resources resources = packageManager.getResourcesForApplication(packageName);        </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="">3073                     if (resources != null) {                                                             </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="">3074                         final int id = resources.getIdentifier(resourceName, null, null);                </span>
<span class="-8111506311245393667" onmouseenter="enter('-8111506311245393667');" onmouseout="out('-8111506311245393667');" style=""><abbr title="3075                         icon = Utilities.createIconBitmap(mIconCache.getFullResIcon(resources, id), context);">3075                         icon = Utilities.createIconBitmap(mIconCache.getFullResIcon(resources, id), conte</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3076                     }                                                                                    </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">3077                 } catch (java.lang.Exception e) {                                                        </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="">3078                     // drop this.  we have other places to look for icons                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3079                 }                                                                                        </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3080             // the db                                                                                    </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3081                 if (icon == null) {                                                                      </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3082                     icon = getIconFromCursor(c, iconIndex, context);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3083                 }                                                                                        </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3084             // the fallback icon                                                                         </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3085                 if (icon == null) {                                                                      </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3086                     icon = mIconCache.getDefaultIcon(info.user);                                         </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3087                     info.usingFallbackIcon = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3088                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3089                 break;                                                                                   </span>
<span class="-7159883417284246525" onmouseenter="enter('-7159883417284246525');" onmouseout="out('-7159883417284246525');" style="">3090             case LauncherSettings.Favorites.ICON_TYPE_BITMAP :                                           </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3091                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3092                 if (icon == null) {                                                                      </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3093                     icon = mIconCache.getDefaultIcon(info.user);                                         </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3094                     info.customIcon = false;                                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3095                     info.usingFallbackIcon = true;                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3096                 } else {                                                                                 </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="">3097                     info.customIcon = true;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3098                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3099                 break;                                                                                   </span>
<span class="3050734735710613783" onmouseenter="enter('3050734735710613783');" onmouseout="out('3050734735710613783');" style="">3100             default :                                                                                    </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3101                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3102                 info.usingFallbackIcon = true;                                                           </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3103                 info.customIcon = false;                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3104                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3105         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3106         info.setIcon(icon);                                                                              </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3107         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3108     }                                                                                                    </span>
<span  style="">3109                                                                                                          </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="">3110     Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                 </span>
<span class="-7344880688543478232" onmouseenter="enter('-7344880688543478232');" onmouseout="out('-7344880688543478232');" style="">3111         // suppress dead code warning                                                                    </span>
<span class="254779087173488622" onmouseenter="enter('254779087173488622');" onmouseout="out('254779087173488622');" style="">3112         @SuppressWarnings(&quot;all&quot;)                                                                         </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">3113         final boolean debug = false;                                                                     </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="">3114         if (debug) {                                                                                     </span>
<span class="391504186289021952" onmouseenter="enter('391504186289021952');" onmouseout="out('391504186289021952');" style=""><abbr title="3115             Log.d(TAG, &quot;getIconFromCursor app=&quot; + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));">3115             Log.d(TAG, &quot;getIconFromCursor app=&quot; + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Fa</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3116         }                                                                                                </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">3117         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3118         try {                                                                                            </span>
<span class="-5397256551797560021" onmouseenter="enter('-5397256551797560021');" onmouseout="out('-5397256551797560021');" style=""><abbr title="3119             return Utilities.createIconBitmap(BitmapFactory.decodeByteArray(data, 0, data.length), context);">3119             return Utilities.createIconBitmap(BitmapFactory.decodeByteArray(data, 0, data.length), contex</abbr></span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">3120         } catch (java.lang.Exception e) {                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3121             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3122         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3123     }                                                                                                    </span>
<span  style="">3124                                                                                                          </span>
<span class="-2326079223618471308" onmouseenter="enter('-2326079223618471308');" onmouseout="out('-2326079223618471308');" style=""><abbr title="3125     ShortcutInfo addShortcut(Context context, Intent data, long container, int screen, int cellX, int cellY, boolean notify) {">3125     ShortcutInfo addShortcut(Context context, Intent data, long container, int screen, int cellX, int cel</abbr></span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="">3126         final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                           </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="">3127         if (info == null) {                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3128             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3129         }                                                                                                </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="">3130         addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3131         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3132     }                                                                                                    </span>
<span  style="">3133                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3134     /**                                                                                                  </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="">3135      * Attempts to find an AppWidgetProviderInfo that matches the given component.                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3136      */                                                                                                  </span>
<span class="2179041858850413708" onmouseenter="enter('2179041858850413708');" onmouseout="out('2179041858850413708');" style=""><abbr title="3137     static AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context, ComponentName component) {">3137     static AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context, ComponentName co</abbr></span>
<span class="-1232115849622021899" onmouseenter="enter('-1232115849622021899');" onmouseout="out('-1232115849622021899');" style=""><abbr title="3138         List&lt;AppWidgetProviderInfo&gt; widgets = AppWidgetManager.getInstance(context).getInstalledProviders();">3138         List&lt;AppWidgetProviderInfo&gt; widgets = AppWidgetManager.getInstance(context).getInstalledProviders</abbr></span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3139         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="">3140             if (info.provider.equals(component)) {                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3141                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3142             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3143         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3144         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3145     }                                                                                                    </span>
<span  style="">3146                                                                                                          </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="">3147     ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {             </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="">3148         Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                           </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="">3149         String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                   </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="">3150         Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                         </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">3151         if (intent == null) {                                                                            </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="">3152             // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null         </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="">3153             Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3154             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3155         }                                                                                                </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3156         Bitmap icon = null;                                                                              </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="">3157         boolean customIcon = false;                                                                      </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="">3158         ShortcutIconResource iconResource = null;                                                        </span>
<span class="-7590275881537128655" onmouseenter="enter('-7590275881537128655');" onmouseout="out('-7590275881537128655');" style="">3159         if ((bitmap != null) &amp;&amp; (bitmap instanceof Bitmap)) {                                            </span>
<span class="4948648185146307241" onmouseenter="enter('4948648185146307241');" onmouseout="out('4948648185146307241');" style="">3160             icon = Utilities.createIconBitmap(new FastBitmapDrawable(((Bitmap) (bitmap))), context);     </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="">3161             customIcon = true;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3162         } else {                                                                                         </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="">3163             Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);             </span>
<span class="873539202926474103" onmouseenter="enter('873539202926474103');" onmouseout="out('873539202926474103');" style="">3164             if ((extra != null) &amp;&amp; (extra instanceof ShortcutIconResource)) {                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3165                 try {                                                                                    </span>
<span class="7560781599219001869" onmouseenter="enter('7560781599219001869');" onmouseout="out('7560781599219001869');" style="">3166                     iconResource = ((ShortcutIconResource) (extra));                                     </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3167                     final PackageManager packageManager = context.getPackageManager();                   </span>
<span class="-3428036711148620835" onmouseenter="enter('-3428036711148620835');" onmouseout="out('-3428036711148620835');" style=""><abbr title="3168                     Resources resources = packageManager.getResourcesForApplication(iconResource.packageName);">3168                     Resources resources = packageManager.getResourcesForApplication(iconResource.packageN</abbr></span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="">3169                     final int id = resources.getIdentifier(iconResource.resourceName, null, null);       </span>
<span class="-8111506311245393667" onmouseenter="enter('-8111506311245393667');" onmouseout="out('-8111506311245393667');" style="">3170                     icon = Utilities.createIconBitmap(mIconCache.getFullResIcon(resources, id), context);</span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">3171                 } catch (java.lang.Exception e) {                                                        </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="">3172                     Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3173                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3174             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3175         }                                                                                                </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3176         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="2102380556199177801" onmouseenter="enter('2102380556199177801');" onmouseout="out('2102380556199177801');" style="">3177         // Only support intents for current user for now. Intents sent from other                        </span>
<span class="2194655253408912185" onmouseenter="enter('2194655253408912185');" onmouseout="out('2194655253408912185');" style="">3178         // users wouldn&#x27;t get here without intent forwarding anyway.                                     </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="">3179         info.user = UserHandleCompat.myUserHandle();                                                     </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3180         if (icon == null) {                                                                              </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="">3181             if (fallbackIcon != null) {                                                                  </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="">3182                 icon = fallbackIcon;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3183             } else {                                                                                     </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="">3184                 icon = mIconCache.getDefaultIcon(info.user);                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3185                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3186             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3187         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3188         info.setIcon(icon);                                                                              </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="">3189         info.title = name;                                                                               </span>
<span class="-1867930841645421482" onmouseenter="enter('-1867930841645421482');" onmouseout="out('-1867930841645421482');" style="">3190         info.contentDescription = mUserManager.getBadgedLabelForUser(info.title.toString(), info.user);  </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">3191         info.intent = intent;                                                                            </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="">3192         info.customIcon = customIcon;                                                                    </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="">3193         info.iconResource = iconResource;                                                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3194         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3195     }                                                                                                    </span>
<span  style="">3196                                                                                                          </span>
<span class="3439913297053211120" onmouseenter="enter('3439913297053211120');" onmouseout="out('3439913297053211120');" style=""><abbr title="3197     boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c, int iconIndex) {">3197     boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c, int iconInde</abbr></span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="">3198         // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                    </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">3199         if (!mAppsCanBeOnRemoveableStorage) {                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3200             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3201         }                                                                                                </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="">3202         // If this icon doesn&#x27;t have a custom icon, check to see                                         </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="">3203         // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                         </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="">3204         // we&#x27;re going to show, store what we are going to show back                                     </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="">3205         // into the DB.  We do this so when we&#x27;re loading, if the                                        </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="">3206         // package manager can&#x27;t find an icon (for example because                                       </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="">3207         // the app is on SD) then we can use that instead.                                               </span>
<span class="-4583761309752989647" onmouseenter="enter('-4583761309752989647');" onmouseout="out('-4583761309752989647');" style="">3208         if ((!info.customIcon) &amp;&amp; (!info.usingFallbackIcon)) {                                           </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="">3209             cache.put(info, c.getBlob(iconIndex));                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3210             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3211         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3212         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3213     }                                                                                                    </span>
<span  style="">3214                                                                                                          </span>
<span class="1654527872685192879" onmouseenter="enter('1654527872685192879');" onmouseout="out('1654527872685192879');" style="">3215     void updateSavedIcon(Context context, ShortcutInfo info, byte[] data) {                              </span>
<span class="2739424845963553299" onmouseenter="enter('2739424845963553299');" onmouseout="out('2739424845963553299');" style="">3216         boolean needSave = false;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3217         try {                                                                                            </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">3218             if (data != null) {                                                                          </span>
<span class="-7759318311620721467" onmouseenter="enter('-7759318311620721467');" onmouseout="out('-7759318311620721467');" style="">3219                 Bitmap saved = BitmapFactory.decodeByteArray(data, 0, data.length);                      </span>
<span class="5601916118931842920" onmouseenter="enter('5601916118931842920');" onmouseout="out('5601916118931842920');" style="">3220                 Bitmap loaded = info.getIcon(mIconCache);                                                </span>
<span class="3622333829210083937" onmouseenter="enter('3622333829210083937');" onmouseout="out('3622333829210083937');" style="">3221                 needSave = !saved.sameAs(loaded);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3222             } else {                                                                                     </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3223                 needSave = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3224             }                                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">3225         } catch (java.lang.Exception e) {                                                                </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3226             needSave = true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3227         }                                                                                                </span>
<span class="-1391846982631217245" onmouseenter="enter('-1391846982631217245');" onmouseout="out('-1391846982631217245');" style="">3228         if (needSave) {                                                                                  </span>
<span class="3557323548661765982" onmouseenter="enter('3557323548661765982');" onmouseout="out('3557323548661765982');" style="">3229             Log.d(TAG, &quot;going to save icon bitmap for info=&quot; + info);                                    </span>
<span class="2982884345620001266" onmouseenter="enter('2982884345620001266');" onmouseout="out('2982884345620001266');" style="">3230             // This is slower than is ideal, but this only happens once                                  </span>
<span class="6026812495787058898" onmouseenter="enter('6026812495787058898');" onmouseout="out('6026812495787058898');" style="">3231             // or when the app is updated with a new icon.                                               </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3232             updateItemInDatabase(context, info);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3233         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3234     }                                                                                                    </span>
<span  style="">3235                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3236     /**                                                                                                  </span>
<span class="4855649975001229153" onmouseenter="enter('4855649975001229153');" onmouseout="out('4855649975001229153');" style="">3237      * Return an existing FolderInfo object if we have encountered this ID previously,                   </span>
<span class="1965046356881977619" onmouseenter="enter('1965046356881977619');" onmouseout="out('1965046356881977619');" style="">3238      * or make a new one.                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3239      */                                                                                                  </span>
<span class="-2475696420152943641" onmouseenter="enter('-2475696420152943641');" onmouseout="out('-2475696420152943641');" style="">3240     private static FolderInfo findOrMakeFolder(HashMap&lt;Long, FolderInfo&gt; folders, long id) {             </span>
<span class="4702055422209629108" onmouseenter="enter('4702055422209629108');" onmouseout="out('4702055422209629108');" style="">3241         // See if a placeholder was created for us already                                               </span>
<span class="5369947662598537472" onmouseenter="enter('5369947662598537472');" onmouseout="out('5369947662598537472');" style="">3242         FolderInfo folderInfo = folders.get(id);                                                         </span>
<span class="-1935655509058582330" onmouseenter="enter('-1935655509058582330');" onmouseout="out('-1935655509058582330');" style="">3243         if (folderInfo == null) {                                                                        </span>
<span class="-2837885610668527269" onmouseenter="enter('-2837885610668527269');" onmouseout="out('-2837885610668527269');" style="">3244             // No placeholder -- create a new instance                                                   </span>
<span class="-1173144769562528834" onmouseenter="enter('-1173144769562528834');" onmouseout="out('-1173144769562528834');" style="">3245             folderInfo = new FolderInfo();                                                               </span>
<span class="-6364759527041918506" onmouseenter="enter('-6364759527041918506');" onmouseout="out('-6364759527041918506');" style="">3246             folders.put(id, folderInfo);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3247         }                                                                                                </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">3248         return folderInfo;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3249     }                                                                                                    </span>
<span  style="">3250                                                                                                          </span>
<span class="-958488581416967596" onmouseenter="enter('-958488581416967596');" onmouseout="out('-958488581416967596');" style="">3251     public static final Comparator&lt;AppInfo&gt; getAppNameComparator() {                                     </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3252         final Collator collator = Collator.getInstance();                                                </span>
<span class="-5613048777706091935" onmouseenter="enter('-5613048777706091935');" onmouseout="out('-5613048777706091935');" style="">3253         return new Comparator&lt;AppInfo&gt;() {                                                               </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3254             public final int compare(AppInfo a, AppInfo b) {                                             </span>
<span class="3541515045662468306" onmouseenter="enter('3541515045662468306');" onmouseout="out('3541515045662468306');" style="">3255                 if (a.user.equals(b.user)) {                                                             </span>
<span class="-3239368458294074157" onmouseenter="enter('-3239368458294074157');" onmouseout="out('-3239368458294074157');" style="">3256                     int result = collator.compare(a.title.toString().trim(), b.title.toString().trim()); </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="">3257                     if (result == 0) {                                                                   </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="">3258                         result = a.componentName.compareTo(b.componentName);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3259                     }                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">3260                     return result;                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3261                 } else {                                                                                 </span>
<span class="-4940624116090922199" onmouseenter="enter('-4940624116090922199');" onmouseout="out('-4940624116090922199');" style="">3262                     // TODO Need to figure out rules for sorting                                         </span>
<span class="-7580798058375972430" onmouseenter="enter('-7580798058375972430');" onmouseout="out('-7580798058375972430');" style="">3263                     // profiles, this puts work second.                                                  </span>
<span class="-437659129845370257" onmouseenter="enter('-437659129845370257');" onmouseout="out('-437659129845370257');" style="">3264                     return a.user.toString().compareTo(b.user.toString());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3265                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3266             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3267         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3268     }                                                                                                    </span>
<span  style="">3269                                                                                                          </span>
<span class="5955404976394705038" onmouseenter="enter('5955404976394705038');" onmouseout="out('5955404976394705038');" style="">3270     public static final Comparator&lt;AppInfo&gt; APP_INSTALL_TIME_COMPARATOR = new Comparator&lt;AppInfo&gt;() {    </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3271         public final int compare(AppInfo a, AppInfo b) {                                                 </span>
<span class="-8187472599640048379" onmouseenter="enter('-8187472599640048379');" onmouseout="out('-8187472599640048379');" style="">3272             if (a.firstInstallTime &lt; b.firstInstallTime) {                                               </span>
<span class="6787741487180588680" onmouseenter="enter('6787741487180588680');" onmouseout="out('6787741487180588680');" style="">3273                 return 1;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3274             }                                                                                            </span>
<span class="2743042164876951282" onmouseenter="enter('2743042164876951282');" onmouseout="out('2743042164876951282');" style="">3275             if (a.firstInstallTime &gt; b.firstInstallTime) {                                               </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">3276                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3277             }                                                                                            </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style="">3278             return 0;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3279         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3280     };                                                                                                   </span>
<span  style="">3281                                                                                                          </span>
<span class="-2741084556110057526" onmouseenter="enter('-2741084556110057526');" onmouseout="out('-2741084556110057526');" style="">3282     static ComponentName getComponentNameFromResolveInfo(ResolveInfo info) {                             </span>
<span class="5044967282776033452" onmouseenter="enter('5044967282776033452');" onmouseout="out('5044967282776033452');" style="">3283         if (info.activityInfo != null) {                                                                 </span>
<span class="4524084479320544608" onmouseenter="enter('4524084479320544608');" onmouseout="out('4524084479320544608');" style="">3284             return new ComponentName(info.activityInfo.packageName, info.activityInfo.name);             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3285         } else {                                                                                         </span>
<span class="-6175863207819175779" onmouseenter="enter('-6175863207819175779');" onmouseout="out('-6175863207819175779');" style="">3286             return new ComponentName(info.serviceInfo.packageName, info.serviceInfo.name);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3287         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3288     }                                                                                                    </span>
<span  style="">3289                                                                                                          </span>
<span class="-5604165961236567660" onmouseenter="enter('-5604165961236567660');" onmouseout="out('-5604165961236567660');" style="">3290     public static class ShortcutNameComparator implements Comparator&lt;LauncherActivityInfoCompat&gt; {       </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3291         private Collator mCollator;                                                                      </span>
<span  style="">3292                                                                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">3293         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span  style="">3294                                                                                                          </span>
<span class="-5960404209194449161" onmouseenter="enter('-5960404209194449161');" onmouseout="out('-5960404209194449161');" style="">3295         ShortcutNameComparator(PackageManager pm) {                                                      </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">3296             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3297             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3298         }                                                                                                </span>
<span  style="">3299                                                                                                          </span>
<span class="3595266679393364065" onmouseenter="enter('3595266679393364065');" onmouseout="out('3595266679393364065');" style="">3300         ShortcutNameComparator(HashMap&lt;Object, CharSequence&gt; labelCache) {                               </span>
<span class="-1230739904022851098" onmouseenter="enter('-1230739904022851098');" onmouseout="out('-1230739904022851098');" style="">3301             mLabelCache = labelCache;                                                                    </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3302             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3303         }                                                                                                </span>
<span  style="">3304                                                                                                          </span>
<span class="5300656659592950018" onmouseenter="enter('5300656659592950018');" onmouseout="out('5300656659592950018');" style="">3305         public final int compare(LauncherActivityInfoCompat a, LauncherActivityInfoCompat b) {           </span>
<span class="2630491260437090066" onmouseenter="enter('2630491260437090066');" onmouseout="out('2630491260437090066');" style="">3306             String labelA;                                                                               </span>
<span class="-1930028114823183236" onmouseenter="enter('-1930028114823183236');" onmouseout="out('-1930028114823183236');" style="">3307             String labelB;                                                                               </span>
<span class="3539590309650150575" onmouseenter="enter('3539590309650150575');" onmouseout="out('3539590309650150575');" style="">3308             ComponentName keyA = a.getComponentName();                                                   </span>
<span class="-674250356247748253" onmouseenter="enter('-674250356247748253');" onmouseout="out('-674250356247748253');" style="">3309             ComponentName keyB = b.getComponentName();                                                   </span>
<span class="6987605502838603761" onmouseenter="enter('6987605502838603761');" onmouseout="out('6987605502838603761');" style="">3310             if (mLabelCache.containsKey(keyA)) {                                                         </span>
<span class="-1058154863590772027" onmouseenter="enter('-1058154863590772027');" onmouseout="out('-1058154863590772027');" style="">3311                 labelA = mLabelCache.get(keyA).toString();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3312             } else {                                                                                     </span>
<span class="8953753374571564594" onmouseenter="enter('8953753374571564594');" onmouseout="out('8953753374571564594');" style="">3313                 labelA = a.getLabel().toString().trim();                                                 </span>
<span class="-8431652685509449538" onmouseenter="enter('-8431652685509449538');" onmouseout="out('-8431652685509449538');" style="">3314                 mLabelCache.put(keyA, labelA);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3315             }                                                                                            </span>
<span class="-6450873724396873776" onmouseenter="enter('-6450873724396873776');" onmouseout="out('-6450873724396873776');" style="">3316             if (mLabelCache.containsKey(keyB)) {                                                         </span>
<span class="267036364262288198" onmouseenter="enter('267036364262288198');" onmouseout="out('267036364262288198');" style="">3317                 labelB = mLabelCache.get(keyB).toString();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3318             } else {                                                                                     </span>
<span class="-6332222509536632454" onmouseenter="enter('-6332222509536632454');" onmouseout="out('-6332222509536632454');" style="">3319                 labelB = b.getLabel().toString().trim();                                                 </span>
<span class="6304111994442836155" onmouseenter="enter('6304111994442836155');" onmouseout="out('6304111994442836155');" style="">3320                 mLabelCache.put(keyB, labelB);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3321             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3322             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3323         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3324     }                                                                                                    </span>
<span  style="">3325                                                                                                          </span>
<span class="-9068712813001281029" onmouseenter="enter('-9068712813001281029');" onmouseout="out('-9068712813001281029');" style="">3326     public static class WidgetAndShortcutNameComparator implements Comparator&lt;Object&gt; {                  </span>
<span class="9150498506085829362" onmouseenter="enter('9150498506085829362');" onmouseout="out('9150498506085829362');" style="">3327         private final AppWidgetManagerCompat mManager;                                                   </span>
<span  style="">3328                                                                                                          </span>
<span class="916814758228251192" onmouseenter="enter('916814758228251192');" onmouseout="out('916814758228251192');" style="">3329         private final PackageManager mPackageManager;                                                    </span>
<span  style="">3330                                                                                                          </span>
<span class="3147273048289991484" onmouseenter="enter('3147273048289991484');" onmouseout="out('3147273048289991484');" style="">3331         private final HashMap&lt;Object, String&gt; mLabelCache;                                               </span>
<span  style="">3332                                                                                                          </span>
<span class="7734513056437222570" onmouseenter="enter('7734513056437222570');" onmouseout="out('7734513056437222570');" style="">3333         private final Collator mCollator;                                                                </span>
<span  style="">3334                                                                                                          </span>
<span class="-4227954493245511846" onmouseenter="enter('-4227954493245511846');" onmouseout="out('-4227954493245511846');" style="">3335         WidgetAndShortcutNameComparator(Context context) {                                               </span>
<span class="3481132346717467494" onmouseenter="enter('3481132346717467494');" onmouseout="out('3481132346717467494');" style="">3336             mManager = AppWidgetManagerCompat.getInstance(context);                                      </span>
<span class="8554599676865199182" onmouseenter="enter('8554599676865199182');" onmouseout="out('8554599676865199182');" style="">3337             mPackageManager = context.getPackageManager();                                               </span>
<span class="240497455152177218" onmouseenter="enter('240497455152177218');" onmouseout="out('240497455152177218');" style="">3338             mLabelCache = new HashMap&lt;Object, String&gt;();                                                 </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3339             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3340         }                                                                                                </span>
<span  style="">3341                                                                                                          </span>
<span class="6735042653098150116" onmouseenter="enter('6735042653098150116');" onmouseout="out('6735042653098150116');" style="">3342         public final int compare(Object a, Object b) {                                                   </span>
<span class="2630491260437090066" onmouseenter="enter('2630491260437090066');" onmouseout="out('2630491260437090066');" style="">3343             String labelA;                                                                               </span>
<span class="-1930028114823183236" onmouseenter="enter('-1930028114823183236');" onmouseout="out('-1930028114823183236');" style="">3344             String labelB;                                                                               </span>
<span class="-5754282386436968390" onmouseenter="enter('-5754282386436968390');" onmouseout="out('-5754282386436968390');" style="">3345             if (mLabelCache.containsKey(a)) {                                                            </span>
<span class="9174303291338212675" onmouseenter="enter('9174303291338212675');" onmouseout="out('9174303291338212675');" style="">3346                 labelA = mLabelCache.get(a);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3347             } else {                                                                                     </span>
<span class="2721712340914234553" onmouseenter="enter('2721712340914234553');" onmouseout="out('2721712340914234553');" style=""><abbr title="3348                 labelA = (a instanceof AppWidgetProviderInfo) ? mManager.loadLabel(((AppWidgetProviderInfo) (a))) : ((ResolveInfo) (a)).loadLabel(mPackageManager).toString().trim();">3348                 labelA = (a instanceof AppWidgetProviderInfo) ? mManager.loadLabel(((AppWidgetProviderInf</abbr></span>
<span class="-6757493580793216382" onmouseenter="enter('-6757493580793216382');" onmouseout="out('-6757493580793216382');" style="">3349                 mLabelCache.put(a, labelA);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3350             }                                                                                            </span>
<span class="2173723640298609502" onmouseenter="enter('2173723640298609502');" onmouseout="out('2173723640298609502');" style="">3351             if (mLabelCache.containsKey(b)) {                                                            </span>
<span class="-253401768434607465" onmouseenter="enter('-253401768434607465');" onmouseout="out('-253401768434607465');" style="">3352                 labelB = mLabelCache.get(b);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3353             } else {                                                                                     </span>
<span class="-6328918786059185007" onmouseenter="enter('-6328918786059185007');" onmouseout="out('-6328918786059185007');" style=""><abbr title="3354                 labelB = (b instanceof AppWidgetProviderInfo) ? mManager.loadLabel(((AppWidgetProviderInfo) (b))) : ((ResolveInfo) (b)).loadLabel(mPackageManager).toString().trim();">3354                 labelB = (b instanceof AppWidgetProviderInfo) ? mManager.loadLabel(((AppWidgetProviderInf</abbr></span>
<span class="1041849722861633477" onmouseenter="enter('1041849722861633477');" onmouseout="out('1041849722861633477');" style="">3355                 mLabelCache.put(b, labelB);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3356             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3357             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3358         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3359     }                                                                                                    </span>
<span  style="">3360                                                                                                          </span>
<span class="9138636756014527253" onmouseenter="enter('9138636756014527253');" onmouseout="out('9138636756014527253');" style="">3361     static boolean isValidProvider(AppWidgetProviderInfo provider) {                                     </span>
<span class="1569900261247391307" onmouseenter="enter('1569900261247391307');" onmouseout="out('1569900261247391307');" style=""><abbr title="3362         return ((provider != null) &amp;&amp; (provider.provider != null)) &amp;&amp; (provider.provider.getPackageName() != null);">3362         return ((provider != null) &amp;&amp; (provider.provider != null)) &amp;&amp; (provider.provider.getPackageName()</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3363     }                                                                                                    </span>
<span  style="">3364                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">3365     public void dumpState() {                                                                            </span>
<span class="-8509686920730582178" onmouseenter="enter('-8509686920730582178');" onmouseout="out('-8509686920730582178');" style="">3366         Log.d(TAG, &quot;mCallbacks=&quot; + mCallbacks);                                                          </span>
<span class="-6032216957883964740" onmouseenter="enter('-6032216957883964740');" onmouseout="out('-6032216957883964740');" style="">3367         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.data&quot;, mBgAllAppsList.data);                  </span>
<span class="8779182816240818818" onmouseenter="enter('8779182816240818818');" onmouseout="out('8779182816240818818');" style="">3368         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.added&quot;, mBgAllAppsList.added);                </span>
<span class="5513048904999210121" onmouseenter="enter('5513048904999210121');" onmouseout="out('5513048904999210121');" style="">3369         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.removed&quot;, mBgAllAppsList.removed);            </span>
<span class="-6417320778911436113" onmouseenter="enter('-6417320778911436113');" onmouseout="out('-6417320778911436113');" style="">3370         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.modified&quot;, mBgAllAppsList.modified);          </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">3371         if (mLoaderTask != null) {                                                                       </span>
<span class="-1961259503181318170" onmouseenter="enter('-1961259503181318170');" onmouseout="out('-1961259503181318170');" style="">3372             mLoaderTask.dumpState();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3373         } else {                                                                                         </span>
<span class="-4934836822377624371" onmouseenter="enter('-4934836822377624371');" onmouseout="out('-4934836822377624371');" style="">3374             Log.d(TAG, &quot;mLoaderTask=null&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3375         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3376     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3377 }                                                                                                        </span>






























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2   * Copyright (C) 2008 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17  package com.android.launcher3;                                                                                    </span>
<span  style="">  18                                                                                                                    </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  19  import android.app.SearchManager;                                                                                 </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  20  import android.appwidget.AppWidgetManager;                                                                        </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21  import android.appwidget.AppWidgetProviderInfo;                                                                   </span>
<span class="-984325520036959693" onmouseenter="enter('-984325520036959693');" onmouseout="out('-984325520036959693');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  22 -import android.content.*;                                                                                         </span>
<span class="-489389385851058391" onmouseenter="enter('-489389385851058391');" onmouseout="out('-489389385851058391');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  23 +import android.content.BroadcastReceiver;                                                                         </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  24 +import android.content.ComponentName;                                                                             </span>
<span class="5843991090186771909" onmouseenter="enter('5843991090186771909');" onmouseout="out('5843991090186771909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  25 +import android.content.ContentProviderClient;                                                                     </span>
<span class="3739800667450215943" onmouseenter="enter('3739800667450215943');" onmouseout="out('3739800667450215943');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  26 +import android.content.ContentProviderOperation;                                                                  </span>
<span class="6126857652515451632" onmouseenter="enter('6126857652515451632');" onmouseout="out('6126857652515451632');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  27 +import android.content.ContentResolver;                                                                           </span>
<span class="3127723864207259776" onmouseenter="enter('3127723864207259776');" onmouseout="out('3127723864207259776');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  28 +import android.content.ContentValues;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  29 +import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  30 +import android.content.Intent;                                                                                    </span>
<span class="-8524679231303418936" onmouseenter="enter('-8524679231303418936');" onmouseout="out('-8524679231303418936');" style="">  31  import android.content.Intent.ShortcutIconResource;                                                               </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  32 -import android.content.pm.ActivityInfo;                                                                           </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  33 -import android.content.pm.PackageInfo;                                                                            </span>
<span class="8697221465021235869" onmouseenter="enter('8697221465021235869');" onmouseout="out('8697221465021235869');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  34 +import android.content.IntentFilter;                                                                              </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  35 +import android.content.SharedPreferences;                                                                         </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  36  import android.content.pm.PackageManager;                                                                         </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  37 -import android.content.pm.PackageManager.NameNotFoundException;                                                   </span>
<span class="-7427681121873781918" onmouseenter="enter('-7427681121873781918');" onmouseout="out('-7427681121873781918');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  38 +import android.content.pm.ProviderInfo;                                                                           </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  39  import android.content.pm.ResolveInfo;                                                                            </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  40  import android.content.res.Configuration;                                                                         </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  41  import android.content.res.Resources;                                                                             </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  42  import android.database.Cursor;                                                                                   </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  43  import android.graphics.Bitmap;                                                                                   </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  44  import android.graphics.BitmapFactory;                                                                            </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  45  import android.net.Uri;                                                                                           </span>
<span class="-5861542142927414420" onmouseenter="enter('-5861542142927414420');" onmouseout="out('-5861542142927414420');" style="">  46  import android.os.Environment;                                                                                    </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  47  import android.os.Handler;                                                                                        </span>
<span class="5075624728668821268" onmouseenter="enter('5075624728668821268');" onmouseout="out('5075624728668821268');" style="">  48  import android.os.HandlerThread;                                                                                  </span>
<span class="-3467845820974384276" onmouseenter="enter('-3467845820974384276');" onmouseout="out('-3467845820974384276');" style="">  49  import android.os.Parcelable;                                                                                     </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  50  import android.os.Process;                                                                                        </span>
<span class="2671599330745315048" onmouseenter="enter('2671599330745315048');" onmouseout="out('2671599330745315048');" style="">  51  import android.os.RemoteException;                                                                                </span>
<span class="2720528326800018495" onmouseenter="enter('2720528326800018495');" onmouseout="out('2720528326800018495');" style="">  52  import android.os.SystemClock;                                                                                    </span>
<span class="9209739606564279934" onmouseenter="enter('9209739606564279934');" onmouseout="out('9209739606564279934');" style="">  53  import android.provider.BaseColumns;                                                                              </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  54  import android.text.TextUtils;                                                                                    </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  55  import android.util.Log;                                                                                          </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  56  import android.util.Pair;                                                                                         </span>
<span  style="">  57                                                                                                                    </span>
<span class="2480987830742885141" onmouseenter="enter('2480987830742885141');" onmouseout="out('2480987830742885141');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  58 -import com.android.launcher3.InstallWidgetReceiver.WidgetMimeTypeHandlerData;                                     </span>
<span class="-2301578055393860706" onmouseenter="enter('-2301578055393860706');" onmouseout="out('-2301578055393860706');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  59 +import com.android.launcher3.compat.AppWidgetManagerCompat;                                                       </span>
<span class="-394760018964595537" onmouseenter="enter('-394760018964595537');" onmouseout="out('-394760018964595537');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  60 +import com.android.launcher3.compat.LauncherActivityInfoCompat;                                                   </span>
<span class="7348855441893227306" onmouseenter="enter('7348855441893227306');" onmouseout="out('7348855441893227306');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  61 +import com.android.launcher3.compat.LauncherAppsCompat;                                                           </span>
<span class="-6378403157506113444" onmouseenter="enter('-6378403157506113444');" onmouseout="out('-6378403157506113444');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  62 +import com.android.launcher3.compat.PackageInstallerCompat;                                                       </span>
<span class="-9185808437279523438" onmouseenter="enter('-9185808437279523438');" onmouseout="out('-9185808437279523438');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  63 +import com.android.launcher3.compat.PackageInstallerCompat.PackageInstallInfo;                                    </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  64 +import com.android.launcher3.compat.UserHandleCompat;                                                             </span>
<span class="-8849211230761127863" onmouseenter="enter('-8849211230761127863');" onmouseout="out('-8849211230761127863');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  65 +import com.android.launcher3.compat.UserManagerCompat;                                                            </span>
<span  style="">  66                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  67  import java.lang.ref.WeakReference;                                                                               </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  68  import java.net.URISyntaxException;                                                                               </span>
<span class="4163694070296964880" onmouseenter="enter('4163694070296964880');" onmouseout="out('4163694070296964880');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  69 +import java.security.InvalidParameterException;                                                                   </span>
<span class="-2082349054173013619" onmouseenter="enter('-2082349054173013619');" onmouseout="out('-2082349054173013619');" style="">  70  import java.text.Collator;                                                                                        </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  71  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  72  import java.util.Arrays;                                                                                          </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  73  import java.util.Collection;                                                                                      </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  74  import java.util.Collections;                                                                                     </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  75  import java.util.Comparator;                                                                                      </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  76  import java.util.HashMap;                                                                                         </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  77  import java.util.HashSet;                                                                                         </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  78  import java.util.Iterator;                                                                                        </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  79  import java.util.List;                                                                                            </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  80 +import java.util.Map.Entry;                                                                                       </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  81  import java.util.Set;                                                                                             </span>
<span class="7536840878424124946" onmouseenter="enter('7536840878424124946');" onmouseout="out('7536840878424124946');" style="">  82  import java.util.TreeMap;                                                                                         </span>
<span class="-2705241621224930031" onmouseenter="enter('-2705241621224930031');" onmouseout="out('-2705241621224930031');" style="">  83  import java.util.concurrent.atomic.AtomicBoolean;                                                                 </span>
<span  style="">  84                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  85  /**                                                                                                               </span>
<span class="-4436404655378914540" onmouseenter="enter('-4436404655378914540');" onmouseout="out('-4436404655378914540');" style="">  86   * Maintains in-memory state of the Launcher. It is expected that there should be only one                        </span>
<span class="-4273357065044936134" onmouseenter="enter('-4273357065044936134');" onmouseout="out('-4273357065044936134');" style="">  87   * LauncherModel object held in a static. Also provide APIs for updating the database state                       </span>
<span class="-4398933382026523538" onmouseenter="enter('-4398933382026523538');" onmouseout="out('-4398933382026523538');" style="">  88   * for the Launcher.                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  89   */                                                                                                               </span>
<span class="-1237709953007126496" onmouseenter="enter('-1237709953007126496');" onmouseout="out('-1237709953007126496');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  90 -public class LauncherModel extends BroadcastReceiver {                                                            </span>
<span class="-2442101869408899034" onmouseenter="enter('-2442101869408899034');" onmouseout="out('-2442101869408899034');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  91 +public class LauncherModel extends BroadcastReceiver                                                              </span>
<span class="-6161550071310903350" onmouseenter="enter('-6161550071310903350');" onmouseout="out('-6161550071310903350');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  92 +        implements LauncherAppsCompat.OnAppsChangedCallbackCompat {                                               </span>
<span class="4817350607901898392" onmouseenter="enter('4817350607901898392');" onmouseout="out('4817350607901898392');" style="">  93      static final boolean DEBUG_LOADERS = false;                                                                   </span>
<span class="-5037112122408598239" onmouseenter="enter('-5037112122408598239');" onmouseout="out('-5037112122408598239');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  94 +    private static final boolean DEBUG_RECEIVER = false;                                                          </span>
<span class="-4012347986936200510" onmouseenter="enter('-4012347986936200510');" onmouseout="out('-4012347986936200510');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  95 +    private static final boolean REMOVE_UNRESTORED_ICONS = true;                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  96 +                                                                                                                  </span>
<span class="7166020908404799948" onmouseenter="enter('7166020908404799948');" onmouseout="out('7166020908404799948');" style="">  97      static final String TAG = &quot;Launcher.Model&quot;;                                                                   </span>
<span  style="">  98                                                                                                                    </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  99      // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                          </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style=""> 100      // false = strew non-workspace apps across the workspace on upgrade                                           </span>
<span class="-258177193926802879" onmouseenter="enter('-258177193926802879');" onmouseout="out('-258177193926802879');" style=""> 101      public static final boolean UPGRADE_USE_MORE_APPS_FOLDER = false;                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 102 -                                                                                                                  </span>
<span class="2412961508740342038" onmouseenter="enter('2412961508740342038');" onmouseout="out('2412961508740342038');" style=""> 103      public static final int LOADER_FLAG_NONE = 0;                                                                 </span>
<span class="-3582007365816200905" onmouseenter="enter('-3582007365816200905');" onmouseout="out('-3582007365816200905');" style=""> 104      public static final int LOADER_FLAG_CLEAR_WORKSPACE = 1 &lt;&lt; 0;                                                 </span>
<span class="2276565639346953559" onmouseenter="enter('2276565639346953559');" onmouseout="out('2276565639346953559');" style=""> 105      public static final int LOADER_FLAG_MIGRATE_SHORTCUTS = 1 &lt;&lt; 1;                                               </span>
<span  style=""> 106                                                                                                                    </span>
<span class="-4154694662050657236" onmouseenter="enter('-4154694662050657236');" onmouseout="out('-4154694662050657236');" style=""> 107      private static final int ITEMS_CHUNK = 6; // batch size for the workspace icons                               </span>
<span class="-5674768092661618077" onmouseenter="enter('-5674768092661618077');" onmouseout="out('-5674768092661618077');" style=""> 108      private static final long INVALID_SCREEN_ID = -1L;                                                            </span>
<span  style=""> 109                                                                                                                    </span>
<span class="-2106715535373822300" onmouseenter="enter('-2106715535373822300');" onmouseout="out('-2106715535373822300');" style=""> 110      private final boolean mAppsCanBeOnRemoveableStorage;                                                          </span>
<span class="4731979794377415890" onmouseenter="enter('4731979794377415890');" onmouseout="out('4731979794377415890');" style=""> 111      private final boolean mOldContentProviderExists;                                                              </span>
<span  style=""> 112                                                                                                                    </span>
<span class="3718007027314914184" onmouseenter="enter('3718007027314914184');" onmouseout="out('3718007027314914184');" style=""> 113      private final LauncherAppState mApp;                                                                          </span>
<span class="-7373075918619999414" onmouseenter="enter('-7373075918619999414');" onmouseout="out('-7373075918619999414');" style=""> 114      private final Object mLock = new Object();                                                                    </span>
<span class="6556510276342102272" onmouseenter="enter('6556510276342102272');" onmouseout="out('6556510276342102272');" style=""> 115      private DeferredHandler mHandler = new DeferredHandler();                                                     </span>
<span class="-7862379002163915329" onmouseenter="enter('-7862379002163915329');" onmouseout="out('-7862379002163915329');" style=""> 116      private LoaderTask mLoaderTask;                                                                               </span>
<span class="-3485037850110155122" onmouseenter="enter('-3485037850110155122');" onmouseout="out('-3485037850110155122');" style=""> 117      private boolean mIsLoaderTaskRunning;                                                                         </span>
<span class="7419034271767928159" onmouseenter="enter('7419034271767928159');" onmouseout="out('7419034271767928159');" style=""> 118      private volatile boolean mFlushingWorkerThread;                                                               </span>
<span  style=""> 119                                                                                                                    </span>
<span class="7008336552769109798" onmouseenter="enter('7008336552769109798');" onmouseout="out('7008336552769109798');" style=""> 120      // Specific runnable types that are run on the main thread deferred handler, this allows us to                </span>
<span class="-2862621427901202146" onmouseenter="enter('-2862621427901202146');" onmouseout="out('-2862621427901202146');" style=""> 121      // clear all queued binding runnables when the Launcher activity is destroyed.                                </span>
<span class="2773124109533293313" onmouseenter="enter('2773124109533293313');" onmouseout="out('2773124109533293313');" style=""> 122      private static final int MAIN_THREAD_NORMAL_RUNNABLE = 0;                                                     </span>
<span class="3742092121997602406" onmouseenter="enter('3742092121997602406');" onmouseout="out('3742092121997602406');" style=""> 123      private static final int MAIN_THREAD_BINDING_RUNNABLE = 1;                                                    </span>
<span  style=""> 124                                                                                                                    </span>
<span class="5026118005036723308" onmouseenter="enter('5026118005036723308');" onmouseout="out('5026118005036723308');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 125 +    private static final String MIGRATE_AUTHORITY = &quot;com.android.launcher2.settings&quot;;                             </span>
<span  style=""> 126                                                                                                                    </span>
<span class="1887278082230738056" onmouseenter="enter('1887278082230738056');" onmouseout="out('1887278082230738056');" style=""> 127      private static final HandlerThread sWorkerThread = new HandlerThread(&quot;launcher-loader&quot;);                      </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style=""> 128      static {                                                                                                      </span>
<span class="3211376391739143126" onmouseenter="enter('3211376391739143126');" onmouseout="out('3211376391739143126');" style=""> 129          sWorkerThread.start();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130      }                                                                                                             </span>
<span class="2264102646027284513" onmouseenter="enter('2264102646027284513');" onmouseout="out('2264102646027284513');" style=""> 131      private static final Handler sWorker = new Handler(sWorkerThread.getLooper());                                </span>
<span  style=""> 132                                                                                                                    </span>
<span class="3535035959074757881" onmouseenter="enter('3535035959074757881');" onmouseout="out('3535035959074757881');" style=""> 133      // We start off with everything not loaded.  After that, we assume that                                       </span>
<span class="2643799052940090988" onmouseenter="enter('2643799052940090988');" onmouseout="out('2643799052940090988');" style=""> 134      // our monitoring of the package manager provides all updates and we never                                    </span>
<span class="-1838192547825761021" onmouseenter="enter('-1838192547825761021');" onmouseout="out('-1838192547825761021');" style=""> 135      // need to do a requery.  These are only ever touched from the loader thread.                                 </span>
<span class="-8758726942217087840" onmouseenter="enter('-8758726942217087840');" onmouseout="out('-8758726942217087840');" style=""> 136      private boolean mWorkspaceLoaded;                                                                             </span>
<span class="-1682003936594375249" onmouseenter="enter('-1682003936594375249');" onmouseout="out('-1682003936594375249');" style=""> 137      private boolean mAllAppsLoaded;                                                                               </span>
<span  style=""> 138                                                                                                                    </span>
<span class="4437381645098142172" onmouseenter="enter('4437381645098142172');" onmouseout="out('4437381645098142172');" style=""> 139      // When we are loading pages synchronously, we can&#x27;t just post the binding of items on the side               </span>
<span class="3512738277131757196" onmouseenter="enter('3512738277131757196');" onmouseout="out('3512738277131757196');" style=""> 140      // pages as this delays the rotation process.  Instead, we wait for a callback from the first                 </span>
<span class="1019766179129744653" onmouseenter="enter('1019766179129744653');" onmouseout="out('1019766179129744653');" style=""> 141      // draw (in Workspace) to initiate the binding of the remaining side pages.  Any time we start                </span>
<span class="7373070490167110663" onmouseenter="enter('7373070490167110663');" onmouseout="out('7373070490167110663');" style=""> 142      // a normal load, we also clear this set of Runnables.                                                        </span>
<span class="4843369785562403466" onmouseenter="enter('4843369785562403466');" onmouseout="out('4843369785562403466');" style=""> 143      static final ArrayList&lt;Runnable&gt; mDeferredBindRunnables = new ArrayList&lt;Runnable&gt;();                          </span>
<span  style=""> 144                                                                                                                    </span>
<span class="5593309185710650450" onmouseenter="enter('5593309185710650450');" onmouseout="out('5593309185710650450');" style=""> 145      private WeakReference&lt;Callbacks&gt; mCallbacks;                                                                  </span>
<span  style=""> 146                                                                                                                    </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 147      // &lt; only access in worker thread &gt;                                                                           </span>
<span class="-7893410053402242276" onmouseenter="enter('-7893410053402242276');" onmouseout="out('-7893410053402242276');" style=""> 148      AllAppsList mBgAllAppsList;                                                                                   </span>
<span  style=""> 149                                                                                                                    </span>
<span class="-4696524037009093502" onmouseenter="enter('-4696524037009093502');" onmouseout="out('-4696524037009093502');" style=""> 150      // The lock that must be acquired before referencing any static bg data structures.  Unlike                   </span>
<span class="-2471307598696798987" onmouseenter="enter('-2471307598696798987');" onmouseout="out('-2471307598696798987');" style=""> 151      // other locks, this one can generally be held long-term because we never expect any of these                 </span>
<span class="4310884307601416106" onmouseenter="enter('4310884307601416106');" onmouseout="out('4310884307601416106');" style=""> 152      // static data structures to be referenced outside of the worker thread except on the first                   </span>
<span class="2260118264672300125" onmouseenter="enter('2260118264672300125');" onmouseout="out('2260118264672300125');" style=""> 153      // load after configuration change.                                                                           </span>
<span class="-8652324765300755578" onmouseenter="enter('-8652324765300755578');" onmouseout="out('-8652324765300755578');" style=""> 154      static final Object sBgLock = new Object();                                                                   </span>
<span  style=""> 155                                                                                                                    </span>
<span class="861828438456678075" onmouseenter="enter('861828438456678075');" onmouseout="out('861828438456678075');" style=""> 156      // sBgItemsIdMap maps *all* the ItemInfos (shortcuts, folders, and widgets) created by                        </span>
<span class="3964854605559074701" onmouseenter="enter('3964854605559074701');" onmouseout="out('3964854605559074701');" style=""> 157      // LauncherModel to their ids                                                                                 </span>
<span class="8713038185903703074" onmouseenter="enter('8713038185903703074');" onmouseout="out('8713038185903703074');" style=""> 158      static final HashMap&lt;Long, ItemInfo&gt; sBgItemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                           </span>
<span  style=""> 159                                                                                                                    </span>
<span class="-4875305940507672487" onmouseenter="enter('-4875305940507672487');" onmouseout="out('-4875305940507672487');" style=""> 160      // sBgWorkspaceItems is passed to bindItems, which expects a list of all folders and shortcuts                </span>
<span class="5836863726682543660" onmouseenter="enter('5836863726682543660');" onmouseout="out('5836863726682543660');" style=""> 161      //       created by LauncherModel that are directly on the home screen (however, no widgets or                </span>
<span class="4941255916545901139" onmouseenter="enter('4941255916545901139');" onmouseout="out('4941255916545901139');" style=""> 162      //       shortcuts within folders).                                                                           </span>
<span class="4770535944422974992" onmouseenter="enter('4770535944422974992');" onmouseout="out('4770535944422974992');" style=""> 163      static final ArrayList&lt;ItemInfo&gt; sBgWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                               </span>
<span  style=""> 164                                                                                                                    </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 165      // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()             </span>
<span class="2792930227258213532" onmouseenter="enter('2792930227258213532');" onmouseout="out('2792930227258213532');" style=""> 166      static final ArrayList&lt;LauncherAppWidgetInfo&gt; sBgAppWidgets =                                                 </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style=""> 167          new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                                   </span>
<span  style=""> 168                                                                                                                    </span>
<span class="8356003681152445460" onmouseenter="enter('8356003681152445460');" onmouseout="out('8356003681152445460');" style=""> 169      // sBgFolders is all FolderInfos created by LauncherModel. Passed to bindFolders()                            </span>
<span class="8065187755370300271" onmouseenter="enter('8065187755370300271');" onmouseout="out('8065187755370300271');" style=""> 170      static final HashMap&lt;Long, FolderInfo&gt; sBgFolders = new HashMap&lt;Long, FolderInfo&gt;();                          </span>
<span  style=""> 171                                                                                                                    </span>
<span class="-6906235458204319724" onmouseenter="enter('-6906235458204319724');" onmouseout="out('-6906235458204319724');" style=""> 172      // sBgDbIconCache is the set of ItemInfos that need to have their icons updated in the database               </span>
<span class="-2979801471293813396" onmouseenter="enter('-2979801471293813396');" onmouseout="out('-2979801471293813396');" style=""> 173      static final HashMap&lt;Object, byte[]&gt; sBgDbIconCache = new HashMap&lt;Object, byte[]&gt;();                          </span>
<span  style=""> 174                                                                                                                    </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 175      // sBgWorkspaceScreens is the ordered set of workspace screens.                                               </span>
<span class="-1373680151983800221" onmouseenter="enter('-1373680151983800221');" onmouseout="out('-1373680151983800221');" style=""> 176      static final ArrayList&lt;Long&gt; sBgWorkspaceScreens = new ArrayList&lt;Long&gt;();                                     </span>
<span  style=""> 177                                                                                                                    </span>
<span class="8587182513202290942" onmouseenter="enter('8587182513202290942');" onmouseout="out('8587182513202290942');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 178 +    // sPendingPackages is a set of packages which could be on sdcard and are not available yet                   </span>
<span class="7668483630172593446" onmouseenter="enter('7668483630172593446');" onmouseout="out('7668483630172593446');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 179 +    static final HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; sPendingPackages =                                    </span>
<span class="3743105789756038321" onmouseenter="enter('3743105789756038321');" onmouseout="out('3743105789756038321');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 180 +            new HashMap&lt;UserHandleCompat, HashSet&lt;String&gt;&gt;();                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 181 +                                                                                                                  </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 182      // &lt;/ only access in worker thread &gt;                                                                          </span>
<span  style=""> 183                                                                                                                    </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style=""> 184      private IconCache mIconCache;                                                                                 </span>
<span class="7327140815403295852" onmouseenter="enter('7327140815403295852');" onmouseout="out('7327140815403295852');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 185 -    private Bitmap mDefaultIcon;                                                                                  </span>
<span  style=""> 186                                                                                                                    </span>
<span class="-1428370913368008087" onmouseenter="enter('-1428370913368008087');" onmouseout="out('-1428370913368008087');" style=""> 187      protected int mPreviousConfigMcc;                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 188 +                                                                                                                  </span>
<span class="-1392466613073934971" onmouseenter="enter('-1392466613073934971');" onmouseout="out('-1392466613073934971');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 189 +    private final LauncherAppsCompat mLauncherApps;                                                               </span>
<span class="-6177668713869523688" onmouseenter="enter('-6177668713869523688');" onmouseout="out('-6177668713869523688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 190 +    private final UserManagerCompat mUserManager;                                                                 </span>
<span  style=""> 191                                                                                                                    </span>
<span class="-3338718885622541528" onmouseenter="enter('-3338718885622541528');" onmouseout="out('-3338718885622541528');" style=""> 192      public interface Callbacks {                                                                                  </span>
<span class="-4231961333511672310" onmouseenter="enter('-4231961333511672310');" onmouseout="out('-4231961333511672310');" style=""> 193          public boolean setLoadOnResume();                                                                         </span>
<span class="803814078537529918" onmouseenter="enter('803814078537529918');" onmouseout="out('803814078537529918');" style=""> 194          public int getCurrentWorkspaceScreen();                                                                   </span>
<span class="9018975241375557324" onmouseenter="enter('9018975241375557324');" onmouseout="out('9018975241375557324');" style=""> 195          public void startBinding();                                                                               </span>
<span class="3160017311795321748" onmouseenter="enter('3160017311795321748');" onmouseout="out('3160017311795321748');" style=""> 196          public void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end,                                  </span>
<span class="2581406714293150955" onmouseenter="enter('2581406714293150955');" onmouseout="out('2581406714293150955');" style=""> 197                                boolean forceAnimateIcons);                                                         </span>
<span class="5464078408309929972" onmouseenter="enter('5464078408309929972');" onmouseout="out('5464078408309929972');" style=""> 198          public void bindScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                                </span>
<span class="8828153861812868297" onmouseenter="enter('8828153861812868297');" onmouseout="out('8828153861812868297');" style=""> 199          public void bindAddScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                             </span>
<span class="6163649300164694862" onmouseenter="enter('6163649300164694862');" onmouseout="out('6163649300164694862');" style=""> 200          public void bindFolders(HashMap&lt;Long,FolderInfo&gt; folders);                                                </span>
<span class="-3241982460320043016" onmouseenter="enter('-3241982460320043016');" onmouseout="out('-3241982460320043016');" style=""> 201          public void finishBindingItems(boolean upgradePath);                                                      </span>
<span class="-1509675786278068914" onmouseenter="enter('-1509675786278068914');" onmouseout="out('-1509675786278068914');" style=""> 202          public void bindAppWidget(LauncherAppWidgetInfo info);                                                    </span>
<span class="-8847143600952784869" onmouseenter="enter('-8847143600952784869');" onmouseout="out('-8847143600952784869');" style=""> 203          public void bindAllApplications(ArrayList&lt;AppInfo&gt; apps);                                                 </span>
<span class="1774766681438121710" onmouseenter="enter('1774766681438121710');" onmouseout="out('1774766681438121710');" style=""> 204          public void bindAppsAdded(ArrayList&lt;Long&gt; newScreens,                                                     </span>
<span class="-4634129325608240116" onmouseenter="enter('-4634129325608240116');" onmouseout="out('-4634129325608240116');" style=""> 205                                    ArrayList&lt;ItemInfo&gt; addNotAnimated,                                             </span>
<span class="-7991947031099209517" onmouseenter="enter('-7991947031099209517');" onmouseout="out('-7991947031099209517');" style=""> 206                                    ArrayList&lt;ItemInfo&gt; addAnimated,                                                </span>
<span class="7647862954797634111" onmouseenter="enter('7647862954797634111');" onmouseout="out('7647862954797634111');" style=""> 207                                    ArrayList&lt;AppInfo&gt; addedApps);                                                  </span>
<span class="4809991796097108143" onmouseenter="enter('4809991796097108143');" onmouseout="out('4809991796097108143');" style=""> 208          public void bindAppsUpdated(ArrayList&lt;AppInfo&gt; apps);                                                     </span>
<span class="-6991207189725786229" onmouseenter="enter('-6991207189725786229');" onmouseout="out('-6991207189725786229');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 209 +        public void bindAppsRestored(ArrayList&lt;AppInfo&gt; apps);                                                    </span>
<span class="1552205679904733456" onmouseenter="enter('1552205679904733456');" onmouseout="out('1552205679904733456');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 210 +        public void updatePackageState(ArrayList&lt;PackageInstallInfo&gt; installInfo);                                </span>
<span class="3764474087617128758" onmouseenter="enter('3764474087617128758');" onmouseout="out('3764474087617128758');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 211 +        public void updatePackageBadge(String packageName);                                                       </span>
<span class="-3322135261875169793" onmouseenter="enter('-3322135261875169793');" onmouseout="out('-3322135261875169793');" style=""> 212          public void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames,                                         </span>
<span class="-4070092502400219459" onmouseenter="enter('-4070092502400219459');" onmouseout="out('-4070092502400219459');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 213 -                        ArrayList&lt;AppInfo&gt; appInfos);                                                             </span>
<span class="-1539895317750647539" onmouseenter="enter('-1539895317750647539');" onmouseout="out('-1539895317750647539');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 214 +                        ArrayList&lt;AppInfo&gt; appInfos, UserHandleCompat user);                                      </span>
<span class="-5054203298075540925" onmouseenter="enter('-5054203298075540925');" onmouseout="out('-5054203298075540925');" style=""> 215          public void bindPackagesUpdated(ArrayList&lt;Object&gt; widgetsAndShortcuts);                                   </span>
<span class="7466294501708892199" onmouseenter="enter('7466294501708892199');" onmouseout="out('7466294501708892199');" style=""> 216          public void bindSearchablesChanged();                                                                     </span>
<span class="-4863664490041232492" onmouseenter="enter('-4863664490041232492');" onmouseout="out('-4863664490041232492');" style=""> 217          public boolean isAllAppsButtonRank(int rank);                                                             </span>
<span class="-6469605959563265863" onmouseenter="enter('-6469605959563265863');" onmouseout="out('-6469605959563265863');" style=""> 218          public void onPageBoundSynchronously(int page);                                                           </span>
<span class="2927470839806734779" onmouseenter="enter('2927470839806734779');" onmouseout="out('2927470839806734779');" style=""> 219          public void dumpLogsToLocalData();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220      }                                                                                                             </span>
<span  style=""> 221                                                                                                                    </span>
<span class="6660553528201779332" onmouseenter="enter('6660553528201779332');" onmouseout="out('6660553528201779332');" style=""> 222      public interface ItemInfoFilter {                                                                             </span>
<span class="-4205302945183309423" onmouseenter="enter('-4205302945183309423');" onmouseout="out('-4205302945183309423');" style=""> 223          public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224      }                                                                                                             </span>
<span  style=""> 225                                                                                                                    </span>
<span class="-7540253694606934273" onmouseenter="enter('-7540253694606934273');" onmouseout="out('-7540253694606934273');" style=""> 226      LauncherModel(LauncherAppState app, IconCache iconCache, AppFilter appFilter) {                               </span>
<span class="-3815285143453777974" onmouseenter="enter('-3815285143453777974');" onmouseout="out('-3815285143453777974');" style=""> 227          Context context = app.getContext();                                                                       </span>
<span class="5049533599805126653" onmouseenter="enter('5049533599805126653');" onmouseout="out('5049533599805126653');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 228 -        ContentResolver contentResolver = context.getContentResolver();                                           </span>
<span  style=""> 229                                                                                                                    </span>
<span class="1644001329477881511" onmouseenter="enter('1644001329477881511');" onmouseout="out('1644001329477881511');" style=""> 230          mAppsCanBeOnRemoveableStorage = Environment.isExternalStorageRemovable();                                 </span>
<span class="953599912945541719" onmouseenter="enter('953599912945541719');" onmouseout="out('953599912945541719');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 231 -        mOldContentProviderExists = (contentResolver.acquireContentProviderClient(                                </span>
<span class="6680469959813031014" onmouseenter="enter('6680469959813031014');" onmouseout="out('6680469959813031014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 232 -                LauncherSettings.Favorites.OLD_CONTENT_URI) != null);                                             </span>
<span class="6456618698786728431" onmouseenter="enter('6456618698786728431');" onmouseout="out('6456618698786728431');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 233 +        String oldProvider = context.getString(R.string.old_launcher_provider_uri);                               </span>
<span class="-4473607088242738177" onmouseenter="enter('-4473607088242738177');" onmouseout="out('-4473607088242738177');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 234 +        // This may be the same as MIGRATE_AUTHORITY, or it may be replaced by a different                        </span>
<span class="-5811264300229071057" onmouseenter="enter('-5811264300229071057');" onmouseout="out('-5811264300229071057');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 235 +        // resource string.                                                                                       </span>
<span class="7826951633422431656" onmouseenter="enter('7826951633422431656');" onmouseout="out('7826951633422431656');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 236 +        String redirectAuthority = Uri.parse(oldProvider).getAuthority();                                         </span>
<span class="6066736278849717257" onmouseenter="enter('6066736278849717257');" onmouseout="out('6066736278849717257');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 237 +        ProviderInfo providerInfo =                                                                               </span>
<span class="-9141516768909079071" onmouseenter="enter('-9141516768909079071');" onmouseout="out('-9141516768909079071');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 238 +                context.getPackageManager().resolveContentProvider(MIGRATE_AUTHORITY, 0);                         </span>
<span class="765698750338601416" onmouseenter="enter('765698750338601416');" onmouseout="out('765698750338601416');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 239 +        ProviderInfo redirectProvider =                                                                           </span>
<span class="-45874905823641339" onmouseenter="enter('-45874905823641339');" onmouseout="out('-45874905823641339');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 240 +                context.getPackageManager().resolveContentProvider(redirectAuthority, 0);                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 241 +                                                                                                                  </span>
<span class="314259485526307626" onmouseenter="enter('314259485526307626');" onmouseout="out('314259485526307626');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 242 +        Log.d(TAG, &quot;Old launcher provider: &quot; + oldProvider);                                                      </span>
<span class="-8592116164695986182" onmouseenter="enter('-8592116164695986182');" onmouseout="out('-8592116164695986182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 243 +        mOldContentProviderExists = (providerInfo != null) &amp;&amp; (redirectProvider != null);                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 244 +                                                                                                                  </span>
<span class="6861009572404401042" onmouseenter="enter('6861009572404401042');" onmouseout="out('6861009572404401042');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 245 +        if (mOldContentProviderExists) {                                                                          </span>
<span class="-1855952710226164095" onmouseenter="enter('-1855952710226164095');" onmouseout="out('-1855952710226164095');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 246 +            Log.d(TAG, &quot;Old launcher provider exists.&quot;);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 247 +        } else {                                                                                                  </span>
<span class="-884548298796331780" onmouseenter="enter('-884548298796331780');" onmouseout="out('-884548298796331780');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 248 +            Log.d(TAG, &quot;Old launcher provider does not exist.&quot;);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 249 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 250 +                                                                                                                  </span>
<span class="8987557410347250467" onmouseenter="enter('8987557410347250467');" onmouseout="out('8987557410347250467');" style=""> 251          mApp = app;                                                                                               </span>
<span class="-1240051748269974178" onmouseenter="enter('-1240051748269974178');" onmouseout="out('-1240051748269974178');" style=""> 252          mBgAllAppsList = new AllAppsList(iconCache, appFilter);                                                   </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style=""> 253          mIconCache = iconCache;                                                                                   </span>
<span  style=""> 254                                                                                                                    </span>
<span class="3654972388535142593" onmouseenter="enter('3654972388535142593');" onmouseout="out('3654972388535142593');" style=""> 255          final Resources res = context.getResources();                                                             </span>
<span class="-4708036118337437843" onmouseenter="enter('-4708036118337437843');" onmouseout="out('-4708036118337437843');" style=""> 256          Configuration config = res.getConfiguration();                                                            </span>
<span class="-32775646941108504" onmouseenter="enter('-32775646941108504');" onmouseout="out('-32775646941108504');" style=""> 257          mPreviousConfigMcc = config.mcc;                                                                          </span>
<span class="-1186313261969242146" onmouseenter="enter('-1186313261969242146');" onmouseout="out('-1186313261969242146');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 258 +        mLauncherApps = LauncherAppsCompat.getInstance(context);                                                  </span>
<span class="5028106411018262806" onmouseenter="enter('5028106411018262806');" onmouseout="out('5028106411018262806');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 259 +        mUserManager = UserManagerCompat.getInstance(context);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260      }                                                                                                             </span>
<span  style=""> 261                                                                                                                    </span>
<span class="7032781054018231449" onmouseenter="enter('7032781054018231449');" onmouseout="out('7032781054018231449');" style=""> 262      /** Runs the specified runnable immediately if called from the main thread, otherwise it is                   </span>
<span class="7688515897456092220" onmouseenter="enter('7688515897456092220');" onmouseout="out('7688515897456092220');" style=""> 263       * posted on the main thread handler. */                                                                      </span>
<span class="-3461925467760565643" onmouseenter="enter('-3461925467760565643');" onmouseout="out('-3461925467760565643');" style=""> 264      private void runOnMainThread(Runnable r) {                                                                    </span>
<span class="-8277339055128647976" onmouseenter="enter('-8277339055128647976');" onmouseout="out('-8277339055128647976');" style=""> 265          runOnMainThread(r, 0);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266      }                                                                                                             </span>
<span class="2979979552252814736" onmouseenter="enter('2979979552252814736');" onmouseout="out('2979979552252814736');" style=""> 267      private void runOnMainThread(Runnable r, int type) {                                                          </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 268          if (sWorkerThread.getThreadId() == Process.myTid()) {                                                     </span>
<span class="-8713172384634047131" onmouseenter="enter('-8713172384634047131');" onmouseout="out('-8713172384634047131');" style=""> 269              // If we are on the worker thread, post onto the main handler                                         </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 270              mHandler.post(r);                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 271          } else {                                                                                                  </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 272              r.run();                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274      }                                                                                                             </span>
<span  style=""> 275                                                                                                                    </span>
<span class="3207003836565128" onmouseenter="enter('3207003836565128');" onmouseout="out('3207003836565128');" style=""> 276      /** Runs the specified runnable immediately if called from the worker thread, otherwise it is                 </span>
<span class="-2756655390038865740" onmouseenter="enter('-2756655390038865740');" onmouseout="out('-2756655390038865740');" style=""> 277       * posted on the worker thread handler. */                                                                    </span>
<span class="-6815764929820931194" onmouseenter="enter('-6815764929820931194');" onmouseout="out('-6815764929820931194');" style=""> 278      private static void runOnWorkerThread(Runnable r) {                                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 279          if (sWorkerThread.getThreadId() == Process.myTid()) {                                                     </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 280              r.run();                                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 281          } else {                                                                                                  </span>
<span class="4127612692606453253" onmouseenter="enter('4127612692606453253');" onmouseout="out('4127612692606453253');" style=""> 282              // If we are not on the worker thread, then post to the worker handler                                </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style=""> 283              sWorker.post(r);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285      }                                                                                                             </span>
<span  style=""> 286                                                                                                                    </span>
<span class="-7044369129545244866" onmouseenter="enter('-7044369129545244866');" onmouseout="out('-7044369129545244866');" style=""> 287      boolean canMigrateFromOldLauncherDb(Launcher launcher) {                                                      </span>
<span class="7588769537569950934" onmouseenter="enter('7588769537569950934');" onmouseout="out('7588769537569950934');" style=""> 288          return mOldContentProviderExists &amp;&amp; !launcher.isLauncherPreinstalled() ;                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289      }                                                                                                             </span>
<span  style=""> 290                                                                                                                    </span>
<span class="7006856679254675514" onmouseenter="enter('7006856679254675514');" onmouseout="out('7006856679254675514');" style=""> 291      static boolean findNextAvailableIconSpaceInScreen(ArrayList&lt;ItemInfo&gt; items, int[] xy,                        </span>
<span class="-6492711054324248109" onmouseenter="enter('-6492711054324248109');" onmouseout="out('-6492711054324248109');" style=""> 292                                   long screen) {                                                                   </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 293          LauncherAppState app = LauncherAppState.getInstance();                                                    </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 294          DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                             </span>
<span class="559481881935924132" onmouseenter="enter('559481881935924132');" onmouseout="out('559481881935924132');" style=""> 295          final int xCount = (int) grid.numColumns;                                                                 </span>
<span class="-3430391683121642487" onmouseenter="enter('-3430391683121642487');" onmouseout="out('-3430391683121642487');" style=""> 296          final int yCount = (int) grid.numRows;                                                                    </span>
<span class="9207855715228317472" onmouseenter="enter('9207855715228317472');" onmouseout="out('9207855715228317472');" style=""> 297          boolean[][] occupied = new boolean[xCount][yCount];                                                       </span>
<span  style=""> 298                                                                                                                    </span>
<span class="2963072137114824070" onmouseenter="enter('2963072137114824070');" onmouseout="out('2963072137114824070');" style=""> 299          int cellX, cellY, spanX, spanY;                                                                           </span>
<span class="5020765328610170980" onmouseenter="enter('5020765328610170980');" onmouseout="out('5020765328610170980');" style=""> 300          for (int i = 0; i &lt; items.size(); ++i) {                                                                  </span>
<span class="3181415890192694055" onmouseenter="enter('3181415890192694055');" onmouseout="out('3181415890192694055');" style=""> 301              final ItemInfo item = items.get(i);                                                                   </span>
<span class="-4074076028767186492" onmouseenter="enter('-4074076028767186492');" onmouseout="out('-4074076028767186492');" style=""> 302              if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                                 </span>
<span class="4879929299303230054" onmouseenter="enter('4879929299303230054');" onmouseout="out('4879929299303230054');" style=""> 303                  if (item.screenId == screen) {                                                                    </span>
<span class="-5253640052908660766" onmouseenter="enter('-5253640052908660766');" onmouseout="out('-5253640052908660766');" style=""> 304                      cellX = item.cellX;                                                                           </span>
<span class="8289808867760126989" onmouseenter="enter('8289808867760126989');" onmouseout="out('8289808867760126989');" style=""> 305                      cellY = item.cellY;                                                                           </span>
<span class="-1153670204852401248" onmouseenter="enter('-1153670204852401248');" onmouseout="out('-1153670204852401248');" style=""> 306                      spanX = item.spanX;                                                                           </span>
<span class="-1841066671071348880" onmouseenter="enter('-1841066671071348880');" onmouseout="out('-1841066671071348880');" style=""> 307                      spanY = item.spanY;                                                                           </span>
<span class="3713894754787265371" onmouseenter="enter('3713894754787265371');" onmouseout="out('3713894754787265371');" style=""> 308                      for (int x = cellX; 0 &lt;= x &amp;&amp; x &lt; cellX + spanX &amp;&amp; x &lt; xCount; x++) {                         </span>
<span class="1312990358377437379" onmouseenter="enter('1312990358377437379');" onmouseout="out('1312990358377437379');" style=""> 309                          for (int y = cellY; 0 &lt;= y &amp;&amp; y &lt; cellY + spanY &amp;&amp; y &lt; yCount; y++) {                     </span>
<span class="-8702463444488690423" onmouseenter="enter('-8702463444488690423');" onmouseout="out('-8702463444488690423');" style=""> 310                              occupied[x][y] = true;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 314              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315          }                                                                                                         </span>
<span  style=""> 316                                                                                                                    </span>
<span class="-8431133162249858978" onmouseenter="enter('-8431133162249858978');" onmouseout="out('-8431133162249858978');" style=""> 317          return CellLayout.findVacantCell(xy, 1, 1, xCount, yCount, occupied);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318      }                                                                                                             </span>
<span class="-6259456544478400180" onmouseenter="enter('-6259456544478400180');" onmouseout="out('-6259456544478400180');" style=""> 319      static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name,                             </span>
<span class="-5771883199866145387" onmouseenter="enter('-5771883199866145387');" onmouseout="out('-5771883199866145387');" style=""> 320                                                          Intent launchIntent,                                      </span>
<span class="245504953411362786" onmouseenter="enter('245504953411362786');" onmouseout="out('245504953411362786');" style=""> 321                                                          int firstScreenIndex,                                     </span>
<span class="-3030748495081078938" onmouseenter="enter('-3030748495081078938');" onmouseout="out('-3030748495081078938');" style=""> 322                                                          ArrayList&lt;Long&gt; workspaceScreens) {                       </span>
<span class="721182088367487597" onmouseenter="enter('721182088367487597');" onmouseout="out('721182088367487597');" style=""> 323          // Lock on the app so that we don&#x27;t try and get the items while apps are being added                      </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 324          LauncherAppState app = LauncherAppState.getInstance();                                                    </span>
<span class="-2530158852228207709" onmouseenter="enter('-2530158852228207709');" onmouseout="out('-2530158852228207709');" style=""> 325          LauncherModel model = app.getModel();                                                                     </span>
<span class="-7742650363035610838" onmouseenter="enter('-7742650363035610838');" onmouseout="out('-7742650363035610838');" style=""> 326          boolean found = false;                                                                                    </span>
<span class="8915607661092661586" onmouseenter="enter('8915607661092661586');" onmouseout="out('8915607661092661586');" style=""> 327          synchronized (app) {                                                                                      </span>
<span class="7297018345010768725" onmouseenter="enter('7297018345010768725');" onmouseout="out('7297018345010768725');" style=""> 328              if (sWorkerThread.getThreadId() != Process.myTid()) {                                                 </span>
<span class="-8468687854737954991" onmouseenter="enter('-8468687854737954991');" onmouseout="out('-8468687854737954991');" style=""> 329                  // Flush the LauncherModel worker thread, so that if we just did another                          </span>
<span class="-8915737001643417667" onmouseenter="enter('-8915737001643417667');" onmouseout="out('-8915737001643417667');" style=""> 330                  // processInstallShortcut, we give it time for its shortcut to get added to the                   </span>
<span class="2341850028976611589" onmouseenter="enter('2341850028976611589');" onmouseout="out('2341850028976611589');" style=""> 331                  // database (getItemsInLocalCoordinates reads the database)                                       </span>
<span class="-3308163450517263024" onmouseenter="enter('-3308163450517263024');" onmouseout="out('-3308163450517263024');" style=""> 332                  model.flushWorkerThread();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333              }                                                                                                     </span>
<span class="8797318797001481965" onmouseenter="enter('8797318797001481965');" onmouseout="out('8797318797001481965');" style=""> 334              final ArrayList&lt;ItemInfo&gt; items = LauncherModel.getItemsInLocalCoordinates(context);                  </span>
<span  style=""> 335                                                                                                                    </span>
<span class="2319873497820841755" onmouseenter="enter('2319873497820841755');" onmouseout="out('2319873497820841755');" style=""> 336              // Try adding to the workspace screens incrementally, starting at the default or center               </span>
<span class="1139467458780899300" onmouseenter="enter('1139467458780899300');" onmouseout="out('1139467458780899300');" style=""> 337              // screen and alternating between +1, -1, +2, -2, etc. (using ~ ceil(i/2f)*(-1)^(i-1))                </span>
<span class="8331999200789555153" onmouseenter="enter('8331999200789555153');" onmouseout="out('8331999200789555153');" style=""> 338              firstScreenIndex = Math.min(firstScreenIndex, workspaceScreens.size());                               </span>
<span class="-5057452471390749214" onmouseenter="enter('-5057452471390749214');" onmouseout="out('-5057452471390749214');" style=""> 339              int count = workspaceScreens.size();                                                                  </span>
<span class="6323561107141122979" onmouseenter="enter('6323561107141122979');" onmouseout="out('6323561107141122979');" style=""> 340              for (int screen = firstScreenIndex; screen &lt; count &amp;&amp; !found; screen++) {                             </span>
<span class="-2680594161355971081" onmouseenter="enter('-2680594161355971081');" onmouseout="out('-2680594161355971081');" style=""> 341                  int[] tmpCoordinates = new int[2];                                                                </span>
<span class="7117247924377105749" onmouseenter="enter('7117247924377105749');" onmouseout="out('7117247924377105749');" style=""> 342                  if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates,                                     </span>
<span class="-6258224581011394116" onmouseenter="enter('-6258224581011394116');" onmouseout="out('-6258224581011394116');" style=""> 343                          workspaceScreens.get(screen))) {                                                          </span>
<span class="-4461607076234575183" onmouseenter="enter('-4461607076234575183');" onmouseout="out('-4461607076234575183');" style=""> 344                      // Update the Launcher db                                                                     </span>
<span class="-6316225509374818886" onmouseenter="enter('-6316225509374818886');" onmouseout="out('-6316225509374818886');" style=""> 345                      return new Pair&lt;Long, int[]&gt;(workspaceScreens.get(screen), tmpCoordinates);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 349          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350      }                                                                                                             </span>
<span  style=""> 351                                                                                                                    </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 352 -    public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,               </span>
<span class="9200705866279837671" onmouseenter="enter('9200705866279837671');" onmouseout="out('9200705866279837671');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 353 -                                    final ArrayList&lt;AppInfo&gt; allAppsApps) {                                       </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 354 -        Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                              </span>
<span class="-5825036277829220629" onmouseenter="enter('-5825036277829220629');" onmouseout="out('-5825036277829220629');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 355 -        addAndBindAddedApps(context, workspaceApps, cb, allAppsApps);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 356 -    }                                                                                                             </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 357 -    public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,               </span>
<span class="-6487660545798143403" onmouseenter="enter('-6487660545798143403');" onmouseout="out('-6487660545798143403');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 358 -                                final Callbacks callbacks, final ArrayList&lt;AppInfo&gt; allAppsApps) {                </span>
<span class="-1944739770126231100" onmouseenter="enter('-1944739770126231100');" onmouseout="out('-1944739770126231100');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 359 -        if (workspaceApps == null || allAppsApps == null) {                                                       </span>
<span class="-7586986915858549354" onmouseenter="enter('-7586986915858549354');" onmouseout="out('-7586986915858549354');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 360 +    public void setPackageState(final ArrayList&lt;PackageInstallInfo&gt; installInfo) {                                </span>
<span class="-7600698850277173095" onmouseenter="enter('-7600698850277173095');" onmouseout="out('-7600698850277173095');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 361 +        // Process the updated package state                                                                      </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 362 +        Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 363 +            public void run() {                                                                                   </span>
<span class="2781538483798405833" onmouseenter="enter('2781538483798405833');" onmouseout="out('2781538483798405833');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 364 +                Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                               </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 365 +                if (callbacks != null) {                                                                          </span>
<span class="-2122958624687225435" onmouseenter="enter('-2122958624687225435');" onmouseout="out('-2122958624687225435');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 366 +                    callbacks.updatePackageState(installInfo);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 367 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 368 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 369 +        };                                                                                                        </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 370 +        mHandler.post(r);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 371 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 372 +                                                                                                                  </span>
<span class="-4348975915921845586" onmouseenter="enter('-4348975915921845586');" onmouseout="out('-4348975915921845586');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 373 +    public void updatePackageBadge(final String packageName) {                                                    </span>
<span class="7729714843616329773" onmouseenter="enter('7729714843616329773');" onmouseout="out('7729714843616329773');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 374 +        // Process the updated package badge                                                                      </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 375 +        Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 376 +            public void run() {                                                                                   </span>
<span class="2781538483798405833" onmouseenter="enter('2781538483798405833');" onmouseout="out('2781538483798405833');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 377 +                Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                               </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 378 +                if (callbacks != null) {                                                                          </span>
<span class="-175082648182985609" onmouseenter="enter('-175082648182985609');" onmouseout="out('-175082648182985609');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 379 +                    callbacks.updatePackageBadge(packageName);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 380 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 381 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 382 +        };                                                                                                        </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 383 +        mHandler.post(r);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 384 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 385 +                                                                                                                  </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 386 +    public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {                       </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 387 +        final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 388 +                                                                                                                  </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 389 +        if (allAppsApps == null) {                                                                                </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 390 +            throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 391 +        }                                                                                                         </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 392 +        if (allAppsApps.isEmpty()) {                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 393 +            return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 394 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 395 +                                                                                                                  </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 396 +        final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                                    </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 397 +        Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                          </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 398 +        while (iter.hasNext()) {                                                                                  </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 399 +            ItemInfo a = iter.next();                                                                             </span>
<span class="788818030959001981" onmouseenter="enter('788818030959001981');" onmouseout="out('788818030959001981');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 400 +            if (LauncherModel.appWasPromise(ctx, a.getIntent(), a.user)) {                                        </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 401 +                restoredAppsFinal.add((AppInfo) a);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 402 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 403 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 404 +                                                                                                                  </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 405 +        // Process the newly added applications and add them to the database first                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 406 +        Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 407 +            public void run() {                                                                                   </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 408 +                runOnMainThread(new Runnable() {                                                                  </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 409 +                    public void run() {                                                                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 410 +                        Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                              </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 411 +                        if (callbacks == cb &amp;&amp; cb != null) {                                                      </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 412 +                            if (!restoredAppsFinal.isEmpty()) {                                                   </span>
<span class="74801564058707670" onmouseenter="enter('74801564058707670');" onmouseout="out('74801564058707670');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 413 +                                for (AppInfo info : restoredAppsFinal) {                                          </span>
<span class="5803126433316087462" onmouseenter="enter('5803126433316087462');" onmouseout="out('5803126433316087462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 414 +                                    final Intent intent = info.getIntent();                                       </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 415 +                                    if (intent != null) {                                                         </span>
<span class="7948974687398618411" onmouseenter="enter('7948974687398618411');" onmouseout="out('7948974687398618411');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 416 +                                        mIconCache.deletePreloadedIcon(intent.getComponent(),                     </span>
<span class="1609339875512298297" onmouseenter="enter('1609339875512298297');" onmouseout="out('1609339875512298297');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 417 +                                                info.user);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 418 +                                    }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 419 +                                }                                                                                 </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 420 +                                callbacks.bindAppsUpdated(restoredAppsFinal);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 421 +                            }                                                                                     </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 422 +                            callbacks.bindAppsAdded(null, null, null, allAppsApps);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 423 +                        }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 424 +                    }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 425 +                });                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 426 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 427 +        };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 428 +        runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 429 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 430 +                                                                                                                  </span>
<span class="-1568395532324485066" onmouseenter="enter('-1568395532324485066');" onmouseout="out('-1568395532324485066');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 431 +    public void addAndBindAddedWorkspaceApps(final Context context,                                               </span>
<span class="-2077533935123746745" onmouseenter="enter('-2077533935123746745');" onmouseout="out('-2077533935123746745');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 432 +            final ArrayList&lt;ItemInfo&gt; workspaceApps) {                                                            </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 433 +        final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 434 +                                                                                                                  </span>
<span class="7068544170534510976" onmouseenter="enter('7068544170534510976');" onmouseout="out('7068544170534510976');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 435 +        if (workspaceApps == null) {                                                                              </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 436              throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437          }                                                                                                         </span>
<span class="6140956863670038829" onmouseenter="enter('6140956863670038829');" onmouseout="out('6140956863670038829');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 438 -        if (workspaceApps.isEmpty() &amp;&amp; allAppsApps.isEmpty()) {                                                   </span>
<span class="3300400308027950866" onmouseenter="enter('3300400308027950866');" onmouseout="out('3300400308027950866');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 439 +        if (workspaceApps.isEmpty()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 440              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441          }                                                                                                         </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 442          // Process the newly added applications and add them to the database first                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 443          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 444              public void run() {                                                                                   </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 445                  final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();                        </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 446                  final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                         </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 447 +                final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                            </span>
<span  style=""> 448                                                                                                                    </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 449                  // Get the list of workspace screens.  We need to append to this list and                         </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 450                  // can not use sBgWorkspaceScreens because loadWorkspace() may not have been                      </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 451                  // called.                                                                                        </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 452                  ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                         </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 453                  TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                          </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 454                  for (Integer i : orderedScreens.keySet()) {                                                       </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 455                      long screenId = orderedScreens.get(i);                                                        </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 456                      workspaceScreens.add(screenId);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457                  }                                                                                                 </span>
<span  style=""> 458                                                                                                                    </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 459                  synchronized(sBgLock) {                                                                           </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 460                      Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                           </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 461                      while (iter.hasNext()) {                                                                      </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 462                          ItemInfo a = iter.next();                                                                 </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 463                          final String name = a.title.toString();                                                   </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 464                          final Intent launchIntent = a.getIntent();                                                </span>
<span  style=""> 465                                                                                                                    </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 466                          // Short-circuit this logic if the icon exists somewhere on the workspace                 </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 467                          if (LauncherModel.shortcutExists(context, name, launchIntent)) {                          </span>
<span class="1114901652794496627" onmouseenter="enter('1114901652794496627');" onmouseout="out('1114901652794496627');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 468 +                            // Only InstallShortcutReceiver sends us shortcutInfos, ignore them                   </span>
<span class="-8314395278706468200" onmouseenter="enter('-8314395278706468200');" onmouseout="out('-8314395278706468200');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 469 +                            if (a instanceof AppInfo &amp;&amp;                                                           </span>
<span class="-4816286524033800367" onmouseenter="enter('-4816286524033800367');" onmouseout="out('-4816286524033800367');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 470 +                                    LauncherModel.appWasPromise(context, launchIntent, a.user)) {                 </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 471 +                                restoredAppsFinal.add((AppInfo) a);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 472 +                            }                                                                                     </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 473                              continue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474                          }                                                                                         </span>
<span  style=""> 475                                                                                                                    </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 476                          // Add this icon to the db, creating a new page if necessary.  If there                   </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 477                          // is only the empty page then we just add items to the first page.                       </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 478                          // Otherwise, we add them to the next pages.                                              </span>
<span class="-506120048723665625" onmouseenter="enter('-506120048723665625');" onmouseout="out('-506120048723665625');" style=""> 479                          int startSearchPageIndex = workspaceScreens.isEmpty() ? 0 : 1;                            </span>
<span class="89807873419961601" onmouseenter="enter('89807873419961601');" onmouseout="out('89807873419961601');" style=""> 480                          Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context,              </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 481                                  name, launchIntent, startSearchPageIndex, workspaceScreens);                      </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 482                          if (coords == null) {                                                                     </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 483                              LauncherProvider lp = LauncherAppState.getLauncherProvider();                         </span>
<span  style=""> 484                                                                                                                    </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 485                              // If we can&#x27;t find a valid position, then just add a new screen.                     </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 486                              // This takes time so we need to re-queue the add until the new                       </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 487                              // page is added.  Create as many screens as necessary to satisfy                     </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 488                              // the startSearchPageIndex.                                                          </span>
<span class="8487048175242917271" onmouseenter="enter('8487048175242917271');" onmouseout="out('8487048175242917271');" style=""> 489                              int numPagesToAdd = Math.max(1, startSearchPageIndex + 1 -                            </span>
<span class="-1324774811555943949" onmouseenter="enter('-1324774811555943949');" onmouseout="out('-1324774811555943949');" style=""> 490                                      workspaceScreens.size());                                                     </span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 491                              while (numPagesToAdd &gt; 0) {                                                           </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 492                                  long screenId = lp.generateNewScreenId();                                         </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 493                                  // Save the screen id for binding in the workspace                                </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 494                                  workspaceScreens.add(screenId);                                                   </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 495                                  addedWorkspaceScreensFinal.add(screenId);                                         </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 496                                  numPagesToAdd--;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497                              }                                                                                     </span>
<span  style=""> 498                                                                                                                    </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 499                              // Find the coordinate again                                                          </span>
<span class="-3135847744636951602" onmouseenter="enter('-3135847744636951602');" onmouseout="out('-3135847744636951602');" style=""> 500                              coords = LauncherModel.findNextAvailableIconSpace(context,                            </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 501                                      name, launchIntent, startSearchPageIndex, workspaceScreens);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502                          }                                                                                         </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 503                          if (coords == null) {                                                                     </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style=""> 504                              throw new RuntimeException(&quot;Coordinates should not be null&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505                          }                                                                                         </span>
<span  style=""> 506                                                                                                                    </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style=""> 507                          ShortcutInfo shortcutInfo;                                                                </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style=""> 508                          if (a instanceof ShortcutInfo) {                                                          </span>
<span class="-5249556100657982245" onmouseenter="enter('-5249556100657982245');" onmouseout="out('-5249556100657982245');" style=""> 509                              shortcutInfo = (ShortcutInfo) a;                                                      </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style=""> 510                          } else if (a instanceof AppInfo) {                                                        </span>
<span class="1865505886056520689" onmouseenter="enter('1865505886056520689');" onmouseout="out('1865505886056520689');" style=""> 511                              shortcutInfo = ((AppInfo) a).makeShortcut();                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 512                          } else {                                                                                  </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style=""> 513                              throw new RuntimeException(&quot;Unexpected info type&quot;);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514                          }                                                                                         </span>
<span  style=""> 515                                                                                                                    </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style=""> 516                          // Add the shortcut to the db                                                             </span>
<span class="-7320352620243561318" onmouseenter="enter('-7320352620243561318');" onmouseout="out('-7320352620243561318');" style=""> 517                          addItemToDatabase(context, shortcutInfo,                                                  </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style=""> 518                                  LauncherSettings.Favorites.CONTAINER_DESKTOP,                                     </span>
<span class="-5434732926326446745" onmouseenter="enter('-5434732926326446745');" onmouseout="out('-5434732926326446745');" style=""> 519                                  coords.first, coords.second[0], coords.second[1], false);                         </span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style=""> 520                          // Save the ShortcutInfo for binding in the workspace                                     </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style=""> 521                          addedShortcutsFinal.add(shortcutInfo);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523                  }                                                                                                 </span>
<span  style=""> 524                                                                                                                    </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style=""> 525                  // Update the workspace screens                                                                   </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style=""> 526                  updateWorkspaceScreenOrder(context, workspaceScreens);                                            </span>
<span  style=""> 527                                                                                                                    </span>
<span class="6328421283494006334" onmouseenter="enter('6328421283494006334');" onmouseout="out('6328421283494006334');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 528 -                if (!addedShortcutsFinal.isEmpty() || !allAppsApps.isEmpty()) {                                   </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 529 +                if (!addedShortcutsFinal.isEmpty()) {                                                             </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 530                      runOnMainThread(new Runnable() {                                                              </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 531                          public void run() {                                                                       </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 532                              Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                          </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style=""> 533                              if (callbacks == cb &amp;&amp; cb != null) {                                                  </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style=""> 534                                  final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();                </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style=""> 535                                  final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();             </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 536                                  if (!addedShortcutsFinal.isEmpty()) {                                             </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style=""> 537                                      ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);      </span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style=""> 538                                      long lastScreenId = info.screenId;                                            </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style=""> 539                                      for (ItemInfo i : addedShortcutsFinal) {                                      </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style=""> 540                                          if (i.screenId == lastScreenId) {                                         </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style=""> 541                                              addAnimated.add(i);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 542                                          } else {                                                                  </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style=""> 543                                              addNotAnimated.add(i);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 544                                          }                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546                                  }                                                                                 </span>
<span class="6311741688571123959" onmouseenter="enter('6311741688571123959');" onmouseout="out('6311741688571123959');" style=""> 547                                  callbacks.bindAppsAdded(addedWorkspaceScreensFinal,                               </span>
<span class="-748486497380548647" onmouseenter="enter('-748486497380548647');" onmouseout="out('-748486497380548647');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 548 -                                        addNotAnimated, addAnimated, allAppsApps);                                </span>
<span class="6252030951506738248" onmouseenter="enter('6252030951506738248');" onmouseout="out('6252030951506738248');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 549 +                                        addNotAnimated, addAnimated, null);                                       </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 550 +                                if (!restoredAppsFinal.isEmpty()) {                                               </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 551 +                                    callbacks.bindAppsUpdated(restoredAppsFinal);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 552 +                                }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 553                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554                          }                                                                                         </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 555                      });                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 557              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 558          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 559          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 560 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 561 -                                                                                                                  </span>
<span class="6011793905538310529" onmouseenter="enter('6011793905538310529');" onmouseout="out('6011793905538310529');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 562 -    public Bitmap getFallbackIcon() {                                                                             </span>
<span class="-671044890656554786" onmouseenter="enter('-671044890656554786');" onmouseout="out('-671044890656554786');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 563 -        if (mDefaultIcon == null) {                                                                               </span>
<span class="6379788101570603758" onmouseenter="enter('6379788101570603758');" onmouseout="out('6379788101570603758');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 564 -            final Context context = LauncherAppState.getInstance().getContext();                                  </span>
<span class="-6730081374242205673" onmouseenter="enter('-6730081374242205673');" onmouseout="out('-6730081374242205673');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 565 -            mDefaultIcon = Utilities.createIconBitmap(                                                            </span>
<span class="-5707305257020956234" onmouseenter="enter('-5707305257020956234');" onmouseout="out('-5707305257020956234');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 566 -                    mIconCache.getFullResDefaultActivityIcon(), context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 567 -        }                                                                                                         </span>
<span class="1334413422936499318" onmouseenter="enter('1334413422936499318');" onmouseout="out('1334413422936499318');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 568 -        return Bitmap.createBitmap(mDefaultIcon);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569      }                                                                                                             </span>
<span  style=""> 570                                                                                                                    </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style=""> 571      public void unbindItemInfosAndClearQueuedBindRunnables() {                                                    </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 572          if (sWorkerThread.getThreadId() == Process.myTid()) {                                                     </span>
<span class="3234081821162543737" onmouseenter="enter('3234081821162543737');" onmouseout="out('3234081821162543737');" style=""> 573              throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; +              </span>
<span class="-2105866874193436772" onmouseenter="enter('-2105866874193436772');" onmouseout="out('-2105866874193436772');" style=""> 574                      &quot;main thread&quot;);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575          }                                                                                                         </span>
<span  style=""> 576                                                                                                                    </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style=""> 577          // Clear any deferred bind runnables                                                                      </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 578 -        mDeferredBindRunnables.clear();                                                                           </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 579 +        synchronized (mDeferredBindRunnables) {                                                                   </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 580 +            mDeferredBindRunnables.clear();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 581 +        }                                                                                                         </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style=""> 582          // Remove any queued bind runnables                                                                       </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style=""> 583          mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                          </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style=""> 584          // Unbind all the workspace items                                                                         </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style=""> 585          unbindWorkspaceItemsOnMainThread();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 586      }                                                                                                             </span>
<span  style=""> 587                                                                                                                    </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style=""> 588      /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                                 </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style=""> 589      void unbindWorkspaceItemsOnMainThread() {                                                                     </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style=""> 590          // Ensure that we don&#x27;t use the same workspace items data structure on the main thread                    </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style=""> 591          // by making a copy of workspace items first.                                                             </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style=""> 592          final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                                  </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style=""> 593          final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                                      </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 594          synchronized (sBgLock) {                                                                                  </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style=""> 595              tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                          </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style=""> 596              tmpAppWidgets.addAll(sBgAppWidgets);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597          }                                                                                                         </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 598          Runnable r = new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 599                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 600                  public void run() {                                                                               </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style=""> 601                     for (ItemInfo item : tmpWorkspaceItems) {                                                      </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 602                         item.unbind();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 603                     }                                                                                              </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style=""> 604                     for (ItemInfo item : tmpAppWidgets) {                                                          </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 605                         item.unbind();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606                     }                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 608              };                                                                                                    </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style=""> 609          runOnMainThread(r);                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610      }                                                                                                             </span>
<span  style=""> 611                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 612      /**                                                                                                           </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style=""> 613       * Adds an item to the DB if it was not created previously, or move it to a new                               </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style=""> 614       * &lt;container, screen, cellX, cellY&gt;                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 615       */                                                                                                           </span>
<span class="-51543303805672089" onmouseenter="enter('-51543303805672089');" onmouseout="out('-51543303805672089');" style=""> 616      static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container,                           </span>
<span class="-5245876562794627197" onmouseenter="enter('-5245876562794627197');" onmouseout="out('-5245876562794627197');" style=""> 617              long screenId, int cellX, int cellY) {                                                                </span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style=""> 618          if (item.container == ItemInfo.NO_ID) {                                                                   </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style=""> 619              // From all apps                                                                                      </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style=""> 620              addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 621          } else {                                                                                                  </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style=""> 622              // From somewhere else                                                                                </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style=""> 623              moveItemInDatabase(context, item, container, screenId, cellX, cellY);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625      }                                                                                                             </span>
<span  style=""> 626                                                                                                                    </span>
<span class="4702100753708951937" onmouseenter="enter('4702100753708951937');" onmouseout="out('4702100753708951937');" style=""> 627      static void checkItemInfoLocked(                                                                              </span>
<span class="5364875648309494693" onmouseenter="enter('5364875648309494693');" onmouseout="out('5364875648309494693');" style=""> 628              final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {                             </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 629          ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                           </span>
<span class="2193901808277988725" onmouseenter="enter('2193901808277988725');" onmouseout="out('2193901808277988725');" style=""> 630          if (modelItem != null &amp;&amp; item != modelItem) {                                                             </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style=""> 631              // check all the data is consistent                                                                   </span>
<span class="3167281191986023088" onmouseenter="enter('3167281191986023088');" onmouseout="out('3167281191986023088');" style=""> 632              if (modelItem instanceof ShortcutInfo &amp;&amp; item instanceof ShortcutInfo) {                              </span>
<span class="-1653864946297504770" onmouseenter="enter('-1653864946297504770');" onmouseout="out('-1653864946297504770');" style=""> 633                  ShortcutInfo modelShortcut = (ShortcutInfo) modelItem;                                            </span>
<span class="-8536587564734321572" onmouseenter="enter('-8536587564734321572');" onmouseout="out('-8536587564734321572');" style=""> 634                  ShortcutInfo shortcut = (ShortcutInfo) item;                                                      </span>
<span class="-7217994585765985559" onmouseenter="enter('-7217994585765985559');" onmouseout="out('-7217994585765985559');" style=""> 635                  if (modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp;                           </span>
<span class="7021740932722535577" onmouseenter="enter('7021740932722535577');" onmouseout="out('7021740932722535577');" style=""> 636                          modelShortcut.intent.filterEquals(shortcut.intent) &amp;&amp;                                     </span>
<span class="4925161259592804600" onmouseenter="enter('4925161259592804600');" onmouseout="out('4925161259592804600');" style=""> 637                          modelShortcut.id == shortcut.id &amp;&amp;                                                        </span>
<span class="-1606801806764943644" onmouseenter="enter('-1606801806764943644');" onmouseout="out('-1606801806764943644');" style=""> 638                          modelShortcut.itemType == shortcut.itemType &amp;&amp;                                            </span>
<span class="-380653198024077357" onmouseenter="enter('-380653198024077357');" onmouseout="out('-380653198024077357');" style=""> 639                          modelShortcut.container == shortcut.container &amp;&amp;                                          </span>
<span class="2095015237441904975" onmouseenter="enter('2095015237441904975');" onmouseout="out('2095015237441904975');" style=""> 640                          modelShortcut.screenId == shortcut.screenId &amp;&amp;                                            </span>
<span class="8356312788511485655" onmouseenter="enter('8356312788511485655');" onmouseout="out('8356312788511485655');" style=""> 641                          modelShortcut.cellX == shortcut.cellX &amp;&amp;                                                  </span>
<span class="-8074804825298555262" onmouseenter="enter('-8074804825298555262');" onmouseout="out('-8074804825298555262');" style=""> 642                          modelShortcut.cellY == shortcut.cellY &amp;&amp;                                                  </span>
<span class="-7194734667210277438" onmouseenter="enter('-7194734667210277438');" onmouseout="out('-7194734667210277438');" style=""> 643                          modelShortcut.spanX == shortcut.spanX &amp;&amp;                                                  </span>
<span class="-7990526823057792041" onmouseenter="enter('-7990526823057792041');" onmouseout="out('-7990526823057792041');" style=""> 644                          modelShortcut.spanY == shortcut.spanY &amp;&amp;                                                  </span>
<span class="1791877648440959041" onmouseenter="enter('1791877648440959041');" onmouseout="out('1791877648440959041');" style=""> 645                          ((modelShortcut.dropPos == null &amp;&amp; shortcut.dropPos == null) ||                           </span>
<span class="-2385997644828375020" onmouseenter="enter('-2385997644828375020');" onmouseout="out('-2385997644828375020');" style=""> 646                          (modelShortcut.dropPos != null &amp;&amp;                                                         </span>
<span class="8673154118418480877" onmouseenter="enter('8673154118418480877');" onmouseout="out('8673154118418480877');" style=""> 647                                  shortcut.dropPos != null &amp;&amp;                                                       </span>
<span class="1110472284758384589" onmouseenter="enter('1110472284758384589');" onmouseout="out('1110472284758384589');" style=""> 648                                  modelShortcut.dropPos[0] == shortcut.dropPos[0] &amp;&amp;                                </span>
<span class="8614743944867507225" onmouseenter="enter('8614743944867507225');" onmouseout="out('8614743944867507225');" style=""> 649                          modelShortcut.dropPos[1] == shortcut.dropPos[1]))) {                                      </span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style=""> 650                      // For all intents and purposes, this is the same object                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 651                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653              }                                                                                                     </span>
<span  style=""> 654                                                                                                                    </span>
<span class="-2302662152798801960" onmouseenter="enter('-2302662152798801960');" onmouseout="out('-2302662152798801960');" style=""> 655              // the modelItem needs to match up perfectly with item if our model is                                </span>
<span class="2528116919227347475" onmouseenter="enter('2528116919227347475');" onmouseout="out('2528116919227347475');" style=""> 656              // to be consistent with the database-- for now, just require                                         </span>
<span class="-7120210409264493846" onmouseenter="enter('-7120210409264493846');" onmouseout="out('-7120210409264493846');" style=""> 657              // modelItem == item or the equality check above                                                      </span>
<span class="-3667577266304831846" onmouseenter="enter('-3667577266304831846');" onmouseout="out('-3667577266304831846');" style=""> 658              String msg = &quot;item: &quot; + ((item != null) ? item.toString() : &quot;null&quot;) +                                 </span>
<span class="-2910805653187511799" onmouseenter="enter('-2910805653187511799');" onmouseout="out('-2910805653187511799');" style=""> 659                      &quot;modelItem: &quot; +                                                                               </span>
<span class="-7298566834322238485" onmouseenter="enter('-7298566834322238485');" onmouseout="out('-7298566834322238485');" style=""> 660                      ((modelItem != null) ? modelItem.toString() : &quot;null&quot;) +                                       </span>
<span class="-1970027720063810255" onmouseenter="enter('-1970027720063810255');" onmouseout="out('-1970027720063810255');" style=""> 661                      &quot;Error: ItemInfo passed to checkItemInfo doesn&#x27;t match original&quot;;                             </span>
<span class="889449931745068267" onmouseenter="enter('889449931745068267');" onmouseout="out('889449931745068267');" style=""> 662              RuntimeException e = new RuntimeException(msg);                                                       </span>
<span class="746494671138810715" onmouseenter="enter('746494671138810715');" onmouseout="out('746494671138810715');" style=""> 663              if (stackTrace != null) {                                                                             </span>
<span class="6991917147302354492" onmouseenter="enter('6991917147302354492');" onmouseout="out('6991917147302354492');" style=""> 664                  e.setStackTrace(stackTrace);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 665              }                                                                                                     </span>
<span class="-2532054300390783036" onmouseenter="enter('-2532054300390783036');" onmouseout="out('-2532054300390783036');" style=""> 666              throw e;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 668      }                                                                                                             </span>
<span  style=""> 669                                                                                                                    </span>
<span class="8253262720993766341" onmouseenter="enter('8253262720993766341');" onmouseout="out('8253262720993766341');" style=""> 670      static void checkItemInfo(final ItemInfo item) {                                                              </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 671          final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 672          final long itemId = item.id;                                                                              </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 673          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 674              public void run() {                                                                                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 675                  synchronized (sBgLock) {                                                                          </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 676                      checkItemInfoLocked(itemId, item, stackTrace);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 678              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 679          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 680          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681      }                                                                                                             </span>
<span  style=""> 682                                                                                                                    </span>
<span class="-7795546628976526290" onmouseenter="enter('-7795546628976526290');" onmouseout="out('-7795546628976526290');" style=""> 683      static void updateItemInDatabaseHelper(Context context, final ContentValues values,                           </span>
<span class="-8227938209854841132" onmouseenter="enter('-8227938209854841132');" onmouseout="out('-8227938209854841132');" style=""> 684              final ItemInfo item, final String callingFunction) {                                                  </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 685          final long itemId = item.id;                                                                              </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 686          final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                                  </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 687          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span  style=""> 688                                                                                                                    </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 689          final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 690          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 691              public void run() {                                                                                   </span>
<span class="6508684228899883734" onmouseenter="enter('6508684228899883734');" onmouseout="out('6508684228899883734');" style=""> 692                  cr.update(uri, values, null, null);                                                               </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 693                  updateItemArrays(item, itemId, stackTrace);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 695          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 696          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 697      }                                                                                                             </span>
<span  style=""> 698                                                                                                                    </span>
<span class="-5268011833856431518" onmouseenter="enter('-5268011833856431518');" onmouseout="out('-5268011833856431518');" style=""> 699      static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList,           </span>
<span class="-6813896065968537303" onmouseenter="enter('-6813896065968537303');" onmouseout="out('-6813896065968537303');" style=""> 700              final ArrayList&lt;ItemInfo&gt; items, final String callingFunction) {                                      </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 701          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span  style=""> 702                                                                                                                    </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 703          final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 704          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 705              public void run() {                                                                                   </span>
<span class="870344729843570934" onmouseenter="enter('870344729843570934');" onmouseout="out('870344729843570934');" style=""> 706                  ArrayList&lt;ContentProviderOperation&gt; ops =                                                         </span>
<span class="9022468941674050374" onmouseenter="enter('9022468941674050374');" onmouseout="out('9022468941674050374');" style=""> 707                          new ArrayList&lt;ContentProviderOperation&gt;();                                                </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 708                  int count = items.size();                                                                         </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 709                  for (int i = 0; i &lt; count; i++) {                                                                 </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 710                      ItemInfo item = items.get(i);                                                                 </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 711                      final long itemId = item.id;                                                                  </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 712                      final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                      </span>
<span class="-8860263448497272048" onmouseenter="enter('-8860263448497272048');" onmouseout="out('-8860263448497272048');" style=""> 713                      ContentValues values = valuesList.get(i);                                                     </span>
<span  style=""> 714                                                                                                                    </span>
<span class="2997765192602662390" onmouseenter="enter('2997765192602662390');" onmouseout="out('2997765192602662390');" style=""> 715                      ops.add(ContentProviderOperation.newUpdate(uri).withValues(values).build());                  </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 716                      updateItemArrays(item, itemId, stackTrace);                                                   </span>
<span  style=""> 717                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718                  }                                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 719                  try {                                                                                             </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style=""> 720                      cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                               </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 721                  } catch (Exception e) {                                                                           </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 722                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 725          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 726          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727      }                                                                                                             </span>
<span  style=""> 728                                                                                                                    </span>
<span class="2082626234385770383" onmouseenter="enter('2082626234385770383');" onmouseout="out('2082626234385770383');" style=""> 729      static void updateItemArrays(ItemInfo item, long itemId, StackTraceElement[] stackTrace) {                    </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 730          // Lock on mBgLock *after* the db operation                                                               </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 731          synchronized (sBgLock) {                                                                                  </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 732              checkItemInfoLocked(itemId, item, stackTrace);                                                        </span>
<span  style=""> 733                                                                                                                    </span>
<span class="5861445851049755510" onmouseenter="enter('5861445851049755510');" onmouseout="out('5861445851049755510');" style=""> 734              if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                                 </span>
<span class="-7006113140306734361" onmouseenter="enter('-7006113140306734361');" onmouseout="out('-7006113140306734361');" style=""> 735                      item.container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="-6294566488312473300" onmouseenter="enter('-6294566488312473300');" onmouseout="out('-6294566488312473300');" style=""> 736                  // Item is in a folder, make sure this folder exists                                              </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 737                  if (!sBgFolders.containsKey(item.container)) {                                                    </span>
<span class="9065703941205621353" onmouseenter="enter('9065703941205621353');" onmouseout="out('9065703941205621353');" style=""> 738                      // An items container is being set to a that of an item which is not in                       </span>
<span class="-3172747387014066058" onmouseenter="enter('-3172747387014066058');" onmouseout="out('-3172747387014066058');" style=""> 739                      // the list of Folders.                                                                       </span>
<span class="151828163632620756" onmouseenter="enter('151828163632620756');" onmouseout="out('151828163632620756');" style=""> 740                      String msg = &quot;item: &quot; + item + &quot; container being set to: &quot; +                                  </span>
<span class="9080161357490611974" onmouseenter="enter('9080161357490611974');" onmouseout="out('9080161357490611974');" style=""> 741                              item.container + &quot;, not in the list of folders&quot;;                                      </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 742                      Log.e(TAG, msg);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 743                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744              }                                                                                                     </span>
<span  style=""> 745                                                                                                                    </span>
<span class="8378072337545652807" onmouseenter="enter('8378072337545652807');" onmouseout="out('8378072337545652807');" style=""> 746              // Items are added/removed from the corresponding FolderInfo elsewhere, such                          </span>
<span class="7844728369218635164" onmouseenter="enter('7844728369218635164');" onmouseout="out('7844728369218635164');" style=""> 747              // as in Workspace.onDrop. Here, we just add/remove them from the list of items                       </span>
<span class="4553148780571708557" onmouseenter="enter('4553148780571708557');" onmouseout="out('4553148780571708557');" style=""> 748              // that are on the desktop, as appropriate                                                            </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 749              ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                       </span>
<span class="-8392915416586226921" onmouseenter="enter('-8392915416586226921');" onmouseout="out('-8392915416586226921');" style=""> 750              if (modelItem != null &amp;&amp;                                                                              </span>
<span class="3168075572498915363" onmouseenter="enter('3168075572498915363');" onmouseout="out('3168075572498915363');" style=""> 751                      (modelItem.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||                       </span>
<span class="-2354507674725904195" onmouseenter="enter('-2354507674725904195');" onmouseout="out('-2354507674725904195');" style=""> 752                       modelItem.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {                      </span>
<span class="-8474980351342559163" onmouseenter="enter('-8474980351342559163');" onmouseout="out('-8474980351342559163');" style=""> 753                  switch (modelItem.itemType) {                                                                     </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 754                      case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                        </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 755                      case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                           </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 756                      case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                             </span>
<span class="-2945309969071223861" onmouseenter="enter('-2945309969071223861');" onmouseout="out('-2945309969071223861');" style=""> 757                          if (!sBgWorkspaceItems.contains(modelItem)) {                                             </span>
<span class="-5660475538824179031" onmouseenter="enter('-5660475538824179031');" onmouseout="out('-5660475538824179031');" style=""> 758                              sBgWorkspaceItems.add(modelItem);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 759                          }                                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 760                          break;                                                                                    </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 761                      default:                                                                                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 762                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 764              } else {                                                                                              </span>
<span class="-7939766627444392355" onmouseenter="enter('-7939766627444392355');" onmouseout="out('-7939766627444392355');" style=""> 765                  sBgWorkspaceItems.remove(modelItem);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768      }                                                                                                             </span>
<span  style=""> 769                                                                                                                    </span>
<span class="-4020360329970845372" onmouseenter="enter('-4020360329970845372');" onmouseout="out('-4020360329970845372');" style=""> 770      public void flushWorkerThread() {                                                                             </span>
<span class="2458440832416538563" onmouseenter="enter('2458440832416538563');" onmouseout="out('2458440832416538563');" style=""> 771          mFlushingWorkerThread = true;                                                                             </span>
<span class="2941590529192344100" onmouseenter="enter('2941590529192344100');" onmouseout="out('2941590529192344100');" style=""> 772          Runnable waiter = new Runnable() {                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 773                  public void run() {                                                                               </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 774                      synchronized (this) {                                                                         </span>
<span class="-1428047894310886643" onmouseenter="enter('-1428047894310886643');" onmouseout="out('-1428047894310886643');" style=""> 775                          notifyAll();                                                                              </span>
<span class="3926508156885202999" onmouseenter="enter('3926508156885202999');" onmouseout="out('3926508156885202999');" style=""> 776                          mFlushingWorkerThread = false;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 779              };                                                                                                    </span>
<span  style=""> 780                                                                                                                    </span>
<span class="-7483564469787643608" onmouseenter="enter('-7483564469787643608');" onmouseout="out('-7483564469787643608');" style=""> 781          synchronized(waiter) {                                                                                    </span>
<span class="-8072658497280753067" onmouseenter="enter('-8072658497280753067');" onmouseout="out('-8072658497280753067');" style=""> 782              runOnWorkerThread(waiter);                                                                            </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style=""> 783              if (mLoaderTask != null) {                                                                            </span>
<span class="-756902833484627430" onmouseenter="enter('-756902833484627430');" onmouseout="out('-756902833484627430');" style=""> 784                  synchronized(mLoaderTask) {                                                                       </span>
<span class="58891182273081261" onmouseenter="enter('58891182273081261');" onmouseout="out('58891182273081261');" style=""> 785                      mLoaderTask.notify();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 786                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 787              }                                                                                                     </span>
<span class="4859668596787406566" onmouseenter="enter('4859668596787406566');" onmouseout="out('4859668596787406566');" style=""> 788              boolean success = false;                                                                              </span>
<span class="7536073198725464588" onmouseenter="enter('7536073198725464588');" onmouseout="out('7536073198725464588');" style=""> 789              while (!success) {                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 790                  try {                                                                                             </span>
<span class="8661527805225995774" onmouseenter="enter('8661527805225995774');" onmouseout="out('8661527805225995774');" style=""> 791                      waiter.wait();                                                                                </span>
<span class="-5965625035307022309" onmouseenter="enter('-5965625035307022309');" onmouseout="out('-5965625035307022309');" style=""> 792                      success = true;                                                                               </span>
<span class="-7528533024404460182" onmouseenter="enter('-7528533024404460182');" onmouseout="out('-7528533024404460182');" style=""> 793                  } catch (InterruptedException e) {                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 795              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 797      }                                                                                                             </span>
<span  style=""> 798                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 799      /**                                                                                                           </span>
<span class="6993284491606696239" onmouseenter="enter('6993284491606696239');" onmouseout="out('6993284491606696239');" style=""> 800       * Move an item in the DB to a new &lt;container, screen, cellX, cellY&gt;                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 801       */                                                                                                           </span>
<span class="4065343735615789149" onmouseenter="enter('4065343735615789149');" onmouseout="out('4065343735615789149');" style=""> 802      static void moveItemInDatabase(Context context, final ItemInfo item, final long container,                    </span>
<span class="-6409391853534757752" onmouseenter="enter('-6409391853534757752');" onmouseout="out('-6409391853534757752');" style=""> 803              final long screenId, final int cellX, final int cellY) {                                              </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 804          item.container = container;                                                                               </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 805          item.cellX = cellX;                                                                                       </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 806          item.cellY = cellY;                                                                                       </span>
<span  style=""> 807                                                                                                                    </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 808          // We store hotseat items in canonical form which is this orientation invariant position                  </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 809          // in the hotseat                                                                                         </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 810          if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                                        </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 811                  container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                      </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 812              item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 813          } else {                                                                                                  </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 814              item.screenId = screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815          }                                                                                                         </span>
<span  style=""> 816                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 817          final ContentValues values = new ContentValues();                                                         </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 818          values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                         </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 819          values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                                 </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 820          values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                                 </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 821          values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                             </span>
<span  style=""> 822                                                                                                                    </span>
<span class="-198415815572970699" onmouseenter="enter('-198415815572970699');" onmouseout="out('-198415815572970699');" style=""> 823          updateItemInDatabaseHelper(context, values, item, &quot;moveItemInDatabase&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824      }                                                                                                             </span>
<span  style=""> 825                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 826      /**                                                                                                           </span>
<span class="-2318253408843035081" onmouseenter="enter('-2318253408843035081');" onmouseout="out('-2318253408843035081');" style=""> 827       * Move items in the DB to a new &lt;container, screen, cellX, cellY&gt;. We assume that the                        </span>
<span class="9095568381627098065" onmouseenter="enter('9095568381627098065');" onmouseout="out('9095568381627098065');" style=""> 828       * cellX, cellY have already been updated on the ItemInfos.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 829       */                                                                                                           </span>
<span class="2993462226149949147" onmouseenter="enter('2993462226149949147');" onmouseout="out('2993462226149949147');" style=""> 830      static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items,                             </span>
<span class="4351605778470855925" onmouseenter="enter('4351605778470855925');" onmouseout="out('4351605778470855925');" style=""> 831              final long container, final int screen) {                                                             </span>
<span  style=""> 832                                                                                                                    </span>
<span class="3335073963685886452" onmouseenter="enter('3335073963685886452');" onmouseout="out('3335073963685886452');" style=""> 833          ArrayList&lt;ContentValues&gt; contentValues = new ArrayList&lt;ContentValues&gt;();                                  </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 834          int count = items.size();                                                                                 </span>
<span  style=""> 835                                                                                                                    </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 836          for (int i = 0; i &lt; count; i++) {                                                                         </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 837              ItemInfo item = items.get(i);                                                                         </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 838              item.container = container;                                                                           </span>
<span  style=""> 839                                                                                                                    </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 840              // We store hotseat items in canonical form which is this orientation invariant position              </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 841              // in the hotseat                                                                                     </span>
<span class="6331311558654873539" onmouseenter="enter('6331311558654873539');" onmouseout="out('6331311558654873539');" style=""> 842              if (context instanceof Launcher &amp;&amp; screen &lt; 0 &amp;&amp;                                                      </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 843                      container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                  </span>
<span class="-3476894176903330001" onmouseenter="enter('-3476894176903330001');" onmouseout="out('-3476894176903330001');" style=""> 844                  item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(item.cellX,                   </span>
<span class="8891673712343428946" onmouseenter="enter('8891673712343428946');" onmouseout="out('8891673712343428946');" style=""> 845                          item.cellY);                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 846              } else {                                                                                              </span>
<span class="-4307617232085975705" onmouseenter="enter('-4307617232085975705');" onmouseout="out('-4307617232085975705');" style=""> 847                  item.screenId = screen;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 848              }                                                                                                     </span>
<span  style=""> 849                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 850              final ContentValues values = new ContentValues();                                                     </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 851              values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                     </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 852              values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                             </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 853              values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                             </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 854              values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                         </span>
<span  style=""> 855                                                                                                                    </span>
<span class="2833686190506555422" onmouseenter="enter('2833686190506555422');" onmouseout="out('2833686190506555422');" style=""> 856              contentValues.add(values);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857          }                                                                                                         </span>
<span class="-3017110074752693492" onmouseenter="enter('-3017110074752693492');" onmouseout="out('-3017110074752693492');" style=""> 858          updateItemsInDatabaseHelper(context, contentValues, items, &quot;moveItemInDatabase&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 859      }                                                                                                             </span>
<span  style=""> 860                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 861      /**                                                                                                           </span>
<span class="5893714151144352360" onmouseenter="enter('5893714151144352360');" onmouseout="out('5893714151144352360');" style=""> 862       * Move and/or resize item in the DB to a new &lt;container, screen, cellX, cellY, spanX, spanY&gt;                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 863       */                                                                                                           </span>
<span class="2794810618835410616" onmouseenter="enter('2794810618835410616');" onmouseout="out('2794810618835410616');" style=""> 864      static void modifyItemInDatabase(Context context, final ItemInfo item, final long container,                  </span>
<span class="5104971199972279845" onmouseenter="enter('5104971199972279845');" onmouseout="out('5104971199972279845');" style=""> 865              final long screenId, final int cellX, final int cellY, final int spanX, final int spanY) {            </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 866          item.container = container;                                                                               </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 867          item.cellX = cellX;                                                                                       </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 868          item.cellY = cellY;                                                                                       </span>
<span class="-7444681703441257019" onmouseenter="enter('-7444681703441257019');" onmouseout="out('-7444681703441257019');" style=""> 869          item.spanX = spanX;                                                                                       </span>
<span class="1797194204222415457" onmouseenter="enter('1797194204222415457');" onmouseout="out('1797194204222415457');" style=""> 870          item.spanY = spanY;                                                                                       </span>
<span  style=""> 871                                                                                                                    </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 872          // We store hotseat items in canonical form which is this orientation invariant position                  </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 873          // in the hotseat                                                                                         </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 874          if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                                        </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 875                  container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                      </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 876              item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 877          } else {                                                                                                  </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 878              item.screenId = screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879          }                                                                                                         </span>
<span  style=""> 880                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 881          final ContentValues values = new ContentValues();                                                         </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 882          values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                         </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 883          values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                                 </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 884          values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                                 </span>
<span class="-1263713769577317048" onmouseenter="enter('-1263713769577317048');" onmouseout="out('-1263713769577317048');" style=""> 885          values.put(LauncherSettings.Favorites.SPANX, item.spanX);                                                 </span>
<span class="847673422027095164" onmouseenter="enter('847673422027095164');" onmouseout="out('847673422027095164');" style=""> 886          values.put(LauncherSettings.Favorites.SPANY, item.spanY);                                                 </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 887          values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                             </span>
<span  style=""> 888                                                                                                                    </span>
<span class="5688211233374147409" onmouseenter="enter('5688211233374147409');" onmouseout="out('5688211233374147409');" style=""> 889          updateItemInDatabaseHelper(context, values, item, &quot;modifyItemInDatabase&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 890      }                                                                                                             </span>
<span  style=""> 891                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 892      /**                                                                                                           </span>
<span class="3263486289839218660" onmouseenter="enter('3263486289839218660');" onmouseout="out('3263486289839218660');" style=""> 893       * Update an item to the database in a specified container.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 894       */                                                                                                           </span>
<span class="459681340980680258" onmouseenter="enter('459681340980680258');" onmouseout="out('459681340980680258');" style=""> 895      static void updateItemInDatabase(Context context, final ItemInfo item) {                                      </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 896          final ContentValues values = new ContentValues();                                                         </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 897 -        item.onAddToDatabase(values);                                                                             </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 898 +        item.onAddToDatabase(context, values);                                                                    </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 899          item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                         </span>
<span class="-2640379359931023102" onmouseenter="enter('-2640379359931023102');" onmouseout="out('-2640379359931023102');" style=""> 900          updateItemInDatabaseHelper(context, values, item, &quot;updateItemInDatabase&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901      }                                                                                                             </span>
<span  style=""> 902                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 903      /**                                                                                                           </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style=""> 904       * Returns true if the shortcuts already exists in the database.                                              </span>
<span class="-3331700288971341517" onmouseenter="enter('-3331700288971341517');" onmouseout="out('-3331700288971341517');" style=""> 905       * we identify a shortcut by its title and intent.                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 906       */                                                                                                           </span>
<span class="-6388905982866518653" onmouseenter="enter('-6388905982866518653');" onmouseout="out('-6388905982866518653');" style=""> 907      static boolean shortcutExists(Context context, String title, Intent intent) {                                 </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 908          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="-4175900686448469518" onmouseenter="enter('-4175900686448469518');" onmouseout="out('-4175900686448469518');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 909 +        final Intent intentWithPkg, intentWithoutPkg;                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 910 +                                                                                                                  </span>
<span class="-1192314096420314309" onmouseenter="enter('-1192314096420314309');" onmouseout="out('-1192314096420314309');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 911 +        if (intent.getComponent() != null) {                                                                      </span>
<span class="5013412415263932655" onmouseenter="enter('5013412415263932655');" onmouseout="out('5013412415263932655');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 912 +            // If component is not null, an intent with null package will produce                                 </span>
<span class="-2056261929714512728" onmouseenter="enter('-2056261929714512728');" onmouseout="out('-2056261929714512728');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 913 +            // the same result and should also be a match.                                                        </span>
<span class="8293829844581049791" onmouseenter="enter('8293829844581049791');" onmouseout="out('8293829844581049791');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 914 +            if (intent.getPackage() != null) {                                                                    </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 915 +                intentWithPkg = intent;                                                                           </span>
<span class="302721143002808724" onmouseenter="enter('302721143002808724');" onmouseout="out('302721143002808724');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 916 +                intentWithoutPkg = new Intent(intent).setPackage(null);                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 917 +            } else {                                                                                              </span>
<span class="411509146924686636" onmouseenter="enter('411509146924686636');" onmouseout="out('411509146924686636');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 918 +                intentWithPkg = new Intent(intent).setPackage(                                                    </span>
<span class="-8194702512537292868" onmouseenter="enter('-8194702512537292868');" onmouseout="out('-8194702512537292868');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 919 +                        intent.getComponent().getPackageName());                                                  </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 920 +                intentWithoutPkg = intent;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 921 +            }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 922 +        } else {                                                                                                  </span>
<span class="3270057931836878198" onmouseenter="enter('3270057931836878198');" onmouseout="out('3270057931836878198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 923 +            intentWithPkg = intent;                                                                               </span>
<span class="-6182642710180151156" onmouseenter="enter('-6182642710180151156');" onmouseout="out('-6182642710180151156');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 924 +            intentWithoutPkg = intent;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 925 +        }                                                                                                         </span>
<span class="2591581294492270218" onmouseenter="enter('2591581294492270218');" onmouseout="out('2591581294492270218');" style=""> 926          Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI,                                               </span>
<span class="-3970764614423238561" onmouseenter="enter('-3970764614423238561');" onmouseout="out('-3970764614423238561');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 927 -            new String[] { &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and intent=?&quot;,                                           </span>
<span class="-8386684562645849198" onmouseenter="enter('-8386684562645849198');" onmouseout="out('-8386684562645849198');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 928 -            new String[] { title, intent.toUri(0) }, null);                                                       </span>
<span class="-6373969991306358457" onmouseenter="enter('-6373969991306358457');" onmouseout="out('-6373969991306358457');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 929 +            new String[] { &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and (intent=? or intent=?)&quot;,                             </span>
<span class="-338282616399686930" onmouseenter="enter('-338282616399686930');" onmouseout="out('-338282616399686930');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 930 +            new String[] { title, intentWithPkg.toUri(0), intentWithoutPkg.toUri(0) }, null);                     </span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style=""> 931          boolean result = false;                                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 932          try {                                                                                                     </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style=""> 933              result = c.moveToFirst();                                                                             </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 934          } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 935              c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 936          }                                                                                                         </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 937          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 938 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 939 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 940 +    /**                                                                                                           </span>
<span class="2522962036775885267" onmouseenter="enter('2522962036775885267');" onmouseout="out('2522962036775885267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 941 +     * Returns true if the promise shortcuts with the same package name exists on the workspace.                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 942 +     */                                                                                                           </span>
<span class="-6588164927851751704" onmouseenter="enter('-6588164927851751704');" onmouseout="out('-6588164927851751704');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 943 +    static boolean appWasPromise(Context context, Intent intent, UserHandleCompat user) {                         </span>
<span class="-3491314044087926833" onmouseenter="enter('-3491314044087926833');" onmouseout="out('-3491314044087926833');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 944 +        final ComponentName component = intent.getComponent();                                                    </span>
<span class="-8432366264448055826" onmouseenter="enter('-8432366264448055826');" onmouseout="out('-8432366264448055826');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 945 +        if (component == null) {                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 946 +            return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 947 +        }                                                                                                         </span>
<span class="-5254167698548486612" onmouseenter="enter('-5254167698548486612');" onmouseout="out('-5254167698548486612');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 948 +        return !getItemsByPackageName(component.getPackageName(), user).isEmpty();                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949      }                                                                                                             </span>
<span  style=""> 950                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 951      /**                                                                                                           </span>
<span class="9160518604603288134" onmouseenter="enter('9160518604603288134');" onmouseout="out('9160518604603288134');" style=""> 952       * Returns an ItemInfo array containing all the items in the LauncherModel.                                   </span>
<span class="-7541433293033039987" onmouseenter="enter('-7541433293033039987');" onmouseout="out('-7541433293033039987');" style=""> 953       * The ItemInfo.id is not set through this function.                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 954       */                                                                                                           </span>
<span class="2306578838706816090" onmouseenter="enter('2306578838706816090');" onmouseout="out('2306578838706816090');" style=""> 955      static ArrayList&lt;ItemInfo&gt; getItemsInLocalCoordinates(Context context) {                                      </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style=""> 956          ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                                    </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 957          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="7862348045873845742" onmouseenter="enter('7862348045873845742');" onmouseout="out('7862348045873845742');" style=""> 958          Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[] {                                </span>
<span class="-9030044796723696333" onmouseenter="enter('-9030044796723696333');" onmouseout="out('-9030044796723696333');" style=""> 959                  LauncherSettings.Favorites.ITEM_TYPE, LauncherSettings.Favorites.CONTAINER,                       </span>
<span class="-6654705994324280685" onmouseenter="enter('-6654705994324280685');" onmouseout="out('-6654705994324280685');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 960 -                LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY,"> 960 -                LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CE</abbr></span>
<span class="-8466015049460674478" onmouseenter="enter('-8466015049460674478');" onmouseout="out('-8466015049460674478');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 961 -                LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY }, null, null, null);          </span>
<span class="-5597662442381403391" onmouseenter="enter('-5597662442381403391');" onmouseout="out('-5597662442381403391');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 962 +                LauncherSettings.Favorites.SCREEN,                                                                </span>
<span class="-2919624041508816442" onmouseenter="enter('-2919624041508816442');" onmouseout="out('-2919624041508816442');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 963 +                LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY,                               </span>
<span class="-6977762317278061139" onmouseenter="enter('-6977762317278061139');" onmouseout="out('-6977762317278061139');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 964 +                LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY,                               </span>
<span class="-7245839497619612656" onmouseenter="enter('-7245839497619612656');" onmouseout="out('-7245839497619612656');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 965 +                LauncherSettings.Favorites.PROFILE_ID }, null, null, null);                                       </span>
<span  style=""> 966                                                                                                                    </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 967          final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);                  </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 968          final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);                 </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 969          final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);                       </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 970          final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                         </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 971          final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                         </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style=""> 972          final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);                         </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style=""> 973          final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 974 -                                                                                                                  </span>
<span class="-7743472832601810579" onmouseenter="enter('-7743472832601810579');" onmouseout="out('-7743472832601810579');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 975 +        final int profileIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.PROFILE_ID);                </span>
<span class="4378196374401845990" onmouseenter="enter('4378196374401845990');" onmouseout="out('4378196374401845990');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 976 +        UserManagerCompat userManager = UserManagerCompat.getInstance(context);                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 977          try {                                                                                                     </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 978              while (c.moveToNext()) {                                                                              </span>
<span class="-4116264954015845780" onmouseenter="enter('-4116264954015845780');" onmouseout="out('-4116264954015845780');" style=""> 979                  ItemInfo item = new ItemInfo();                                                                   </span>
<span class="3361172632220058931" onmouseenter="enter('3361172632220058931');" onmouseout="out('3361172632220058931');" style=""> 980                  item.cellX = c.getInt(cellXIndex);                                                                </span>
<span class="-3320299110004327663" onmouseenter="enter('-3320299110004327663');" onmouseout="out('-3320299110004327663');" style=""> 981                  item.cellY = c.getInt(cellYIndex);                                                                </span>
<span class="-3998513073647472943" onmouseenter="enter('-3998513073647472943');" onmouseout="out('-3998513073647472943');" style=""> 982                  item.spanX = Math.max(1, c.getInt(spanXIndex));                                                   </span>
<span class="584206030510259358" onmouseenter="enter('584206030510259358');" onmouseout="out('584206030510259358');" style=""> 983                  item.spanY = Math.max(1, c.getInt(spanYIndex));                                                   </span>
<span class="7755197868117966754" onmouseenter="enter('7755197868117966754');" onmouseout="out('7755197868117966754');" style=""> 984                  item.container = c.getInt(containerIndex);                                                        </span>
<span class="2520990540941204818" onmouseenter="enter('2520990540941204818');" onmouseout="out('2520990540941204818');" style=""> 985                  item.itemType = c.getInt(itemTypeIndex);                                                          </span>
<span class="-2693827439071435274" onmouseenter="enter('-2693827439071435274');" onmouseout="out('-2693827439071435274');" style=""> 986                  item.screenId = c.getInt(screenIndex);                                                            </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 987 -                                                                                                                  </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 988 -                items.add(item);                                                                                  </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 989 +                long serialNumber = c.getInt(profileIdIndex);                                                     </span>
<span class="8590899978146640866" onmouseenter="enter('8590899978146640866');" onmouseout="out('8590899978146640866');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 990 +                item.user = userManager.getUserForSerialNumber(serialNumber);                                     </span>
<span class="-2267817568611630151" onmouseenter="enter('-2267817568611630151');" onmouseout="out('-2267817568611630151');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 991 +                // Skip if user has been deleted.                                                                 </span>
<span class="-8057177251913525905" onmouseenter="enter('-8057177251913525905');" onmouseout="out('-8057177251913525905');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 992 +                if (item.user != null) {                                                                          </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 993 +                    items.add(item);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 994 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 996          } catch (Exception e) {                                                                                   </span>
<span class="4333495016815960454" onmouseenter="enter('4333495016815960454');" onmouseout="out('4333495016815960454');" style=""> 997              items.clear();                                                                                        </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 998          } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 999              c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1000          }                                                                                                         </span>
<span  style="">1001                                                                                                                    </span>
<span class="4279419839789234429" onmouseenter="enter('4279419839789234429');" onmouseout="out('4279419839789234429');" style="">1002          return items;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1003      }                                                                                                             </span>
<span  style="">1004                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1005      /**                                                                                                           </span>
<span class="-8400747742808132543" onmouseenter="enter('-8400747742808132543');" onmouseout="out('-8400747742808132543');" style="">1006       * Find a folder in the db, creating the FolderInfo if necessary, and adding it to folderList.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1007       */                                                                                                           </span>
<span class="5907754851540050864" onmouseenter="enter('5907754851540050864');" onmouseout="out('5907754851540050864');" style="">1008      FolderInfo getFolderById(Context context, HashMap&lt;Long,FolderInfo&gt; folderList, long id) {                     </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1009          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="-4509017961772931337" onmouseenter="enter('-4509017961772931337');" onmouseout="out('-4509017961772931337');" style="">1010          Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null,                                         </span>
<span class="-4259949945589236527" onmouseenter="enter('-4259949945589236527');" onmouseout="out('-4259949945589236527');" style="">1011                  &quot;_id=? and (itemType=? or itemType=?)&quot;,                                                           </span>
<span class="6839251627547830421" onmouseenter="enter('6839251627547830421');" onmouseout="out('6839251627547830421');" style="">1012                  new String[] { String.valueOf(id),                                                                </span>
<span class="-7910525153585982304" onmouseenter="enter('-7910525153585982304');" onmouseout="out('-7910525153585982304');" style="">1013                          String.valueOf(LauncherSettings.Favorites.ITEM_TYPE_FOLDER)}, null);                      </span>
<span  style="">1014                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1015          try {                                                                                                     </span>
<span class="-6302304746326789409" onmouseenter="enter('-6302304746326789409');" onmouseout="out('-6302304746326789409');" style="">1016              if (c.moveToFirst()) {                                                                                </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style="">1017                  final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);          </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style="">1018                  final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);                 </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style="">1019                  final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);         </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style="">1020                  final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);               </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style="">1021                  final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                 </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style="">1022                  final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                 </span>
<span  style="">1023                                                                                                                    </span>
<span class="7004752326616919357" onmouseenter="enter('7004752326616919357');" onmouseout="out('7004752326616919357');" style="">1024                  FolderInfo folderInfo = null;                                                                     </span>
<span class="2938602155061951308" onmouseenter="enter('2938602155061951308');" onmouseout="out('2938602155061951308');" style="">1025                  switch (c.getInt(itemTypeIndex)) {                                                                </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1026                      case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                             </span>
<span class="8497686210844969517" onmouseenter="enter('8497686210844969517');" onmouseout="out('8497686210844969517');" style="">1027                          folderInfo = findOrMakeFolder(folderList, id);                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1028                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1029                  }                                                                                                 </span>
<span  style="">1030                                                                                                                    </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">1031                  folderInfo.title = c.getString(titleIndex);                                                       </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">1032                  folderInfo.id = id;                                                                               </span>
<span class="-3770649288661071555" onmouseenter="enter('-3770649288661071555');" onmouseout="out('-3770649288661071555');" style="">1033                  folderInfo.container = c.getInt(containerIndex);                                                  </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">1034                  folderInfo.screenId = c.getInt(screenIndex);                                                      </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">1035                  folderInfo.cellX = c.getInt(cellXIndex);                                                          </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">1036                  folderInfo.cellY = c.getInt(cellYIndex);                                                          </span>
<span  style="">1037                                                                                                                    </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">1038                  return folderInfo;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039              }                                                                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1040          } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1041              c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1042          }                                                                                                         </span>
<span  style="">1043                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1044          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1045      }                                                                                                             </span>
<span  style="">1046                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1047      /**                                                                                                           </span>
<span class="-4485876183654335246" onmouseenter="enter('-4485876183654335246');" onmouseout="out('-4485876183654335246');" style="">1048       * Add an item to the database in a specified container. Sets the container, screen, cellX and                </span>
<span class="5014383815638293688" onmouseenter="enter('5014383815638293688');" onmouseout="out('5014383815638293688');" style="">1049       * cellY fields of the item. Also assigns an ID to the item.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1050       */                                                                                                           </span>
<span class="7688823130205554121" onmouseenter="enter('7688823130205554121');" onmouseout="out('7688823130205554121');" style="">1051      static void addItemToDatabase(Context context, final ItemInfo item, final long container,                     </span>
<span class="-5047869274291255898" onmouseenter="enter('-5047869274291255898');" onmouseout="out('-5047869274291255898');" style="">1052              final long screenId, final int cellX, final int cellY, final boolean notify) {                        </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style="">1053          item.container = container;                                                                               </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style="">1054          item.cellX = cellX;                                                                                       </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style="">1055          item.cellY = cellY;                                                                                       </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style="">1056          // We store hotseat items in canonical form which is this orientation invariant position                  </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style="">1057          // in the hotseat                                                                                         </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style="">1058          if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                                        </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style="">1059                  container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                      </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style="">1060              item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1061          } else {                                                                                                  </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style="">1062              item.screenId = screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063          }                                                                                                         </span>
<span  style="">1064                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style="">1065          final ContentValues values = new ContentValues();                                                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1066          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1067 -        item.onAddToDatabase(values);                                                                             </span>
<span class="-589455497879960590" onmouseenter="enter('-589455497879960590');" onmouseout="out('-589455497879960590');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1068 +        item.onAddToDatabase(context, values);                                                                    </span>
<span  style="">1069                                                                                                                    </span>
<span class="-1899316649519192705" onmouseenter="enter('-1899316649519192705');" onmouseout="out('-1899316649519192705');" style="">1070          item.id = LauncherAppState.getLauncherProvider().generateNewItemId();                                     </span>
<span class="-154850703316330893" onmouseenter="enter('-154850703316330893');" onmouseout="out('-154850703316330893');" style="">1071          values.put(LauncherSettings.Favorites._ID, item.id);                                                      </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style="">1072          item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                         </span>
<span  style="">1073                                                                                                                    </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1074 +        final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1075          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1076              public void run() {                                                                                   </span>
<span class="-9004016634042314269" onmouseenter="enter('-9004016634042314269');" onmouseout="out('-9004016634042314269');" style="">1077                  cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI :                                       </span>
<span class="-612779074530505821" onmouseenter="enter('-612779074530505821');" onmouseout="out('-612779074530505821');" style="">1078                          LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values);                          </span>
<span  style="">1079                                                                                                                    </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1080                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1081                  synchronized (sBgLock) {                                                                          </span>
<span class="7042391537046657417" onmouseenter="enter('7042391537046657417');" onmouseout="out('7042391537046657417');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1082 -                    checkItemInfoLocked(item.id, item, null);                                                     </span>
<span class="-4593486021211754382" onmouseenter="enter('-4593486021211754382');" onmouseout="out('-4593486021211754382');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1083 +                    checkItemInfoLocked(item.id, item, stackTrace);                                               </span>
<span class="-1016681302040734126" onmouseenter="enter('-1016681302040734126');" onmouseout="out('-1016681302040734126');" style="">1084                      sBgItemsIdMap.put(item.id, item);                                                             </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1085                      switch (item.itemType) {                                                                      </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1086                          case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                         </span>
<span class="7914552456706159325" onmouseenter="enter('7914552456706159325');" onmouseout="out('7914552456706159325');" style="">1087                              sBgFolders.put(item.id, (FolderInfo) item);                                           </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="">1088                              // Fall through                                                                       </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1089                          case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                    </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1090                          case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                       </span>
<span class="-1329080713393586591" onmouseenter="enter('-1329080713393586591');" onmouseout="out('-1329080713393586591');" style="">1091                              if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||                 </span>
<span class="-8703099407725800834" onmouseenter="enter('-8703099407725800834');" onmouseout="out('-8703099407725800834');" style="">1092                                      item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="-8146326631995897363" onmouseenter="enter('-8146326631995897363');" onmouseout="out('-8146326631995897363');" style="">1093                                  sBgWorkspaceItems.add(item);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1094                              } else {                                                                              </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style="">1095                                  if (!sBgFolders.containsKey(item.container)) {                                    </span>
<span class="-54073947043614801" onmouseenter="enter('-54073947043614801');" onmouseout="out('-54073947043614801');" style="">1096                                      // Adding an item to a folder that doesn&#x27;t exist.                             </span>
<span class="-8178862485732913035" onmouseenter="enter('-8178862485732913035');" onmouseout="out('-8178862485732913035');" style="">1097                                      String msg = &quot;adding item: &quot; + item + &quot; to a folder that &quot; +                  </span>
<span class="8069959129571777545" onmouseenter="enter('8069959129571777545');" onmouseout="out('8069959129571777545');" style="">1098                                              &quot; doesn&#x27;t exist&quot;;                                                     </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1099                                      Log.e(TAG, msg);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1100                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1101                              }                                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1102                              break;                                                                                </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1103                          case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                      </span>
<span class="-7161913213134623334" onmouseenter="enter('-7161913213134623334');" onmouseout="out('-7161913213134623334');" style="">1104                              sBgAppWidgets.add((LauncherAppWidgetInfo) item);                                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1105                              break;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1106                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1108              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1109          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1110          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1111      }                                                                                                             </span>
<span  style="">1112                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1113      /**                                                                                                           </span>
<span class="7476806510728309142" onmouseenter="enter('7476806510728309142');" onmouseout="out('7476806510728309142');" style="">1114       * Creates a new unique child id, for a given cell span across all layouts.                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1115       */                                                                                                           </span>
<span class="6041396781761029986" onmouseenter="enter('6041396781761029986');" onmouseout="out('6041396781761029986');" style="">1116      static int getCellLayoutChildId(                                                                              </span>
<span class="-7149445532835734900" onmouseenter="enter('-7149445532835734900');" onmouseout="out('-7149445532835734900');" style="">1117              long container, long screen, int localCellX, int localCellY, int spanX, int spanY) {                  </span>
<span class="513362613558309253" onmouseenter="enter('513362613558309253');" onmouseout="out('513362613558309253');" style="">1118          return (((int) container &amp; 0xFF) &lt;&lt; 24)                                                                   </span>
<span class="-7388843269158644047" onmouseenter="enter('-7388843269158644047');" onmouseout="out('-7388843269158644047');" style="">1119                  | ((int) screen &amp; 0xFF) &lt;&lt; 16 | (localCellX &amp; 0xFF) &lt;&lt; 8 | (localCellY &amp; 0xFF);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1120      }                                                                                                             </span>
<span  style="">1121                                                                                                                    </span>
<span class="-2977858468662335030" onmouseenter="enter('-2977858468662335030');" onmouseout="out('-2977858468662335030');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1122 +    private static ArrayList&lt;ItemInfo&gt; getItemsByPackageName(                                                     </span>
<span class="-4648411385517347510" onmouseenter="enter('-4648411385517347510');" onmouseout="out('-4648411385517347510');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1123 +            final String pn, final UserHandleCompat user) {                                                       </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1124 +        ItemInfoFilter filter  = new ItemInfoFilter() {                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1125 +            @Override                                                                                             </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1126 +            public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                         </span>
<span class="-3698999064980760147" onmouseenter="enter('-3698999064980760147');" onmouseout="out('-3698999064980760147');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1127 +                return cn.getPackageName().equals(pn) &amp;&amp; info.user.equals(user);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1128 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1129 +        };                                                                                                        </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1130 +        return filterItemInfos(sBgItemsIdMap.values(), filter);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1131 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1132 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1133 +    /**                                                                                                           </span>
<span class="2342361889363691922" onmouseenter="enter('2342361889363691922');" onmouseout="out('2342361889363691922');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1134 +     * Removes all the items from the database corresponding to the specified package.                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1135 +     */                                                                                                           </span>
<span class="-4223841609537991203" onmouseenter="enter('-4223841609537991203');" onmouseout="out('-4223841609537991203');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1136 +    static void deletePackageFromDatabase(Context context, final String pn,                                       </span>
<span class="-8990624712004338264" onmouseenter="enter('-8990624712004338264');" onmouseout="out('-8990624712004338264');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1137 +            final UserHandleCompat user) {                                                                        </span>
<span class="-3124051924336649718" onmouseenter="enter('-3124051924336649718');" onmouseout="out('-3124051924336649718');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1138 +        deleteItemsFromDatabase(context, getItemsByPackageName(pn, user));                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1139 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1140 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1141      /**                                                                                                           </span>
<span class="-1037279788887787658" onmouseenter="enter('-1037279788887787658');" onmouseout="out('-1037279788887787658');" style="">1142       * Removes the specified item from the database                                                               </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1143       * @param context                                                                                             </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1144       * @param item                                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1145       */                                                                                                           </span>
<span class="6689175154077652032" onmouseenter="enter('6689175154077652032');" onmouseout="out('6689175154077652032');" style="">1146      static void deleteItemFromDatabase(Context context, final ItemInfo item) {                                    </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1147 +        ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                                    </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1148 +        items.add(item);                                                                                          </span>
<span class="-1343420386438024026" onmouseenter="enter('-1343420386438024026');" onmouseout="out('-1343420386438024026');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1149 +        deleteItemsFromDatabase(context, items);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1150 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1151 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1152 +    /**                                                                                                           </span>
<span class="6785840277050217586" onmouseenter="enter('6785840277050217586');" onmouseout="out('6785840277050217586');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1153 +     * Removes the specified items from the database                                                              </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1154 +     * @param context                                                                                             </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1155 +     * @param item                                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1156 +     */                                                                                                           </span>
<span class="8840034600723804424" onmouseenter="enter('8840034600723804424');" onmouseout="out('8840034600723804424');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1157 +    static void deleteItemsFromDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items) {                       </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1158          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="-8662622705024005942" onmouseenter="enter('-8662622705024005942');" onmouseout="out('-8662622705024005942');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1159 -        final Uri uriToDelete = LauncherSettings.Favorites.getContentUri(item.id, false);                         </span>
<span  style="">1160                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1161          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1162              public void run() {                                                                                   </span>
<span class="5853003155754312383" onmouseenter="enter('5853003155754312383');" onmouseout="out('5853003155754312383');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1163 -                cr.delete(uriToDelete, null, null);                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1164 -                                                                                                                  </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1165 -                // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1166 -                synchronized (sBgLock) {                                                                          </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1167 -                    switch (item.itemType) {                                                                      </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1168 -                        case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                         </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1169 -                            sBgFolders.remove(item.id);                                                           </span>
<span class="-7253547809349647013" onmouseenter="enter('-7253547809349647013');" onmouseout="out('-7253547809349647013');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1170 -                            for (ItemInfo info: sBgItemsIdMap.values()) {                                         </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1171 -                                if (info.container == item.id) {                                                  </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1172 -                                    // We are deleting a folder which still contains items that                   </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1173 -                                    // think they are contained by that folder.                                   </span>
<span class="-2989844263372177086" onmouseenter="enter('-2989844263372177086');" onmouseout="out('-2989844263372177086');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1174 -                                    String msg = &quot;deleting a folder (&quot; + item + &quot;) which still &quot; +                </span>
<span class="-6063695738801794388" onmouseenter="enter('-6063695738801794388');" onmouseout="out('-6063695738801794388');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1175 -                                            &quot;contains items (&quot; + info + &quot;)&quot;;                                      </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1176 -                                    Log.e(TAG, msg);                                                              </span>
<span class="6119320427209693879" onmouseenter="enter('6119320427209693879');" onmouseout="out('6119320427209693879');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1177 +                for (ItemInfo item : items) {                                                                     </span>
<span class="-8969008621964178653" onmouseenter="enter('-8969008621964178653');" onmouseout="out('-8969008621964178653');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1178 +                    final Uri uri = LauncherSettings.Favorites.getContentUri(item.id, false);                     </span>
<span class="-3994993193884804986" onmouseenter="enter('-3994993193884804986');" onmouseout="out('-3994993193884804986');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1179 +                    cr.delete(uri, null, null);                                                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1180 +                                                                                                                  </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1181 +                    // Lock on mBgLock *after* the db operation                                                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1182 +                    synchronized (sBgLock) {                                                                      </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1183 +                        switch (item.itemType) {                                                                  </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1184 +                            case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                     </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1185 +                                sBgFolders.remove(item.id);                                                       </span>
<span class="-7253547809349647013" onmouseenter="enter('-7253547809349647013');" onmouseout="out('-7253547809349647013');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1186 +                                for (ItemInfo info: sBgItemsIdMap.values()) {                                     </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1187 +                                    if (info.container == item.id) {                                              </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1188 +                                        // We are deleting a folder which still contains items that               </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1189 +                                        // think they are contained by that folder.                               </span>
<span class="-2989844263372177086" onmouseenter="enter('-2989844263372177086');" onmouseout="out('-2989844263372177086');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1190 +                                        String msg = &quot;deleting a folder (&quot; + item + &quot;) which still &quot; +            </span>
<span class="-6063695738801794388" onmouseenter="enter('-6063695738801794388');" onmouseout="out('-6063695738801794388');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1191 +                                                &quot;contains items (&quot; + info + &quot;)&quot;;                                  </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1192 +                                        Log.e(TAG, msg);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1193 +                                    }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1195 -                            }                                                                                     </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1196 -                            sBgWorkspaceItems.remove(item);                                                       </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1197 -                            break;                                                                                </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1198 -                        case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                    </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1199 -                        case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                       </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1200 -                            sBgWorkspaceItems.remove(item);                                                       </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1201 -                            break;                                                                                </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1202 -                        case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                      </span>
<span class="5035692159539723007" onmouseenter="enter('5035692159539723007');" onmouseout="out('5035692159539723007');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1203 -                            sBgAppWidgets.remove((LauncherAppWidgetInfo) item);                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1204 -                            break;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1205 -                    }                                                                                             </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1206 -                    sBgItemsIdMap.remove(item.id);                                                                </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1207 -                    sBgDbIconCache.remove(item);                                                                  </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1208 +                                sBgWorkspaceItems.remove(item);                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1209 +                                break;                                                                            </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1210 +                            case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1211 +                            case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                   </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1212 +                                sBgWorkspaceItems.remove(item);                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1213 +                                break;                                                                            </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1214 +                            case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                  </span>
<span class="5035692159539723007" onmouseenter="enter('5035692159539723007');" onmouseout="out('5035692159539723007');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1215 +                                sBgAppWidgets.remove((LauncherAppWidgetInfo) item);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1216 +                                break;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1217 +                        }                                                                                         </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1218 +                        sBgItemsIdMap.remove(item.id);                                                            </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1219 +                        sBgDbIconCache.remove(item);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1220 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1222              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1223          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1224          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1225      }                                                                                                             </span>
<span  style="">1226                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1227      /**                                                                                                           </span>
<span class="-7001721478473539684" onmouseenter="enter('-7001721478473539684');" onmouseout="out('-7001721478473539684');" style="">1228       * Update the order of the workspace screens in the database. The array list contains                         </span>
<span class="-8575814248656839337" onmouseenter="enter('-8575814248656839337');" onmouseout="out('-8575814248656839337');" style="">1229       * a list of screen ids in the order that they should appear.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1230       */                                                                                                           </span>
<span class="8428215756529453230" onmouseenter="enter('8428215756529453230');" onmouseout="out('8428215756529453230');" style="">1231      void updateWorkspaceScreenOrder(Context context, final ArrayList&lt;Long&gt; screens) {                             </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1232          // Log to disk                                                                                            </span>
<span class="2597844157040813179" onmouseenter="enter('2597844157040813179');" onmouseout="out('2597844157040813179');" style="">1233          Launcher.addDumpLog(TAG, &quot;11683562 - updateWorkspaceScreenOrder()&quot;, true);                                </span>
<span class="-6712172470308057727" onmouseenter="enter('-6712172470308057727');" onmouseout="out('-6712172470308057727');" style="">1234          Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, screens), true);                 </span>
<span  style="">1235                                                                                                                    </span>
<span class="468782492563171594" onmouseenter="enter('468782492563171594');" onmouseout="out('468782492563171594');" style="">1236          final ArrayList&lt;Long&gt; screensCopy = new ArrayList&lt;Long&gt;(screens);                                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1237          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="543518355232884435" onmouseenter="enter('543518355232884435');" onmouseout="out('543518355232884435');" style="">1238          final Uri uri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                            </span>
<span  style="">1239                                                                                                                    </span>
<span class="4254834681163937802" onmouseenter="enter('4254834681163937802');" onmouseout="out('4254834681163937802');" style="">1240          // Remove any negative screen ids -- these aren&#x27;t persisted                                               </span>
<span class="2152325044441302341" onmouseenter="enter('2152325044441302341');" onmouseout="out('2152325044441302341');" style="">1241          Iterator&lt;Long&gt; iter = screensCopy.iterator();                                                             </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">1242          while (iter.hasNext()) {                                                                                  </span>
<span class="-927390677227055343" onmouseenter="enter('-927390677227055343');" onmouseout="out('-927390677227055343');" style="">1243              long id = iter.next();                                                                                </span>
<span class="-1178150068928662840" onmouseenter="enter('-1178150068928662840');" onmouseout="out('-1178150068928662840');" style="">1244              if (id &lt; 0) {                                                                                         </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">1245                  iter.remove();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1247          }                                                                                                         </span>
<span  style="">1248                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1249          Runnable r = new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1250              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1251              public void run() {                                                                                   </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style="">1252                  ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();              </span>
<span class="-6225505341206658348" onmouseenter="enter('-6225505341206658348');" onmouseout="out('-6225505341206658348');" style="">1253                  // Clear the table                                                                                </span>
<span class="-429946239562688464" onmouseenter="enter('-429946239562688464');" onmouseout="out('-429946239562688464');" style="">1254                  ops.add(ContentProviderOperation.newDelete(uri).build());                                         </span>
<span class="-2619892188160552062" onmouseenter="enter('-2619892188160552062');" onmouseout="out('-2619892188160552062');" style="">1255                  int count = screensCopy.size();                                                                   </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1256                  for (int i = 0; i &lt; count; i++) {                                                                 </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1257                      ContentValues v = new ContentValues();                                                        </span>
<span class="-1711185173807510695" onmouseenter="enter('-1711185173807510695');" onmouseout="out('-1711185173807510695');" style="">1258                      long screenId = screensCopy.get(i);                                                           </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1259                      v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                                       </span>
<span class="4685968830084375092" onmouseenter="enter('4685968830084375092');" onmouseout="out('4685968830084375092');" style="">1260                      v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                                      </span>
<span class="2820655584610684032" onmouseenter="enter('2820655584610684032');" onmouseout="out('2820655584610684032');" style="">1261                      ops.add(ContentProviderOperation.newInsert(uri).withValues(v).build());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262                  }                                                                                                 </span>
<span  style="">1263                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1264                  try {                                                                                             </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style="">1265                      cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                               </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">1266                  } catch (Exception ex) {                                                                          </span>
<span class="-9047539165825913138" onmouseenter="enter('-9047539165825913138');" onmouseout="out('-9047539165825913138');" style="">1267                      throw new RuntimeException(ex);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1268                  }                                                                                                 </span>
<span  style="">1269                                                                                                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1270                  synchronized (sBgLock) {                                                                          </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1271                      sBgWorkspaceScreens.clear();                                                                  </span>
<span class="-2640283764679238318" onmouseenter="enter('-2640283764679238318');" onmouseout="out('-2640283764679238318');" style="">1272                      sBgWorkspaceScreens.addAll(screensCopy);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1274              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1275          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1276          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1277      }                                                                                                             </span>
<span  style="">1278                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1279      /**                                                                                                           </span>
<span class="-6789515923938750727" onmouseenter="enter('-6789515923938750727');" onmouseout="out('-6789515923938750727');" style="">1280       * Remove the contents of the specified folder from the database                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1281       */                                                                                                           </span>
<span class="686021856205334545" onmouseenter="enter('686021856205334545');" onmouseout="out('686021856205334545');" style="">1282      static void deleteFolderContentsFromDatabase(Context context, final FolderInfo info) {                        </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1283          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span  style="">1284                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1285          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1286              public void run() {                                                                                   </span>
<span class="-8793927488200240422" onmouseenter="enter('-8793927488200240422');" onmouseout="out('-8793927488200240422');" style="">1287                  cr.delete(LauncherSettings.Favorites.getContentUri(info.id, false), null, null);                  </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1288                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1289                  synchronized (sBgLock) {                                                                          </span>
<span class="-4714602177116521128" onmouseenter="enter('-4714602177116521128');" onmouseout="out('-4714602177116521128');" style="">1290                      sBgItemsIdMap.remove(info.id);                                                                </span>
<span class="-3189879738488687685" onmouseenter="enter('-3189879738488687685');" onmouseout="out('-3189879738488687685');" style="">1291                      sBgFolders.remove(info.id);                                                                   </span>
<span class="5895316081502731153" onmouseenter="enter('5895316081502731153');" onmouseout="out('5895316081502731153');" style="">1292                      sBgDbIconCache.remove(info);                                                                  </span>
<span class="-6074846806723656328" onmouseenter="enter('-6074846806723656328');" onmouseout="out('-6074846806723656328');" style="">1293                      sBgWorkspaceItems.remove(info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294                  }                                                                                                 </span>
<span  style="">1295                                                                                                                    </span>
<span class="-1937171462652594970" onmouseenter="enter('-1937171462652594970');" onmouseout="out('-1937171462652594970');" style="">1296                  cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,                                 </span>
<span class="9128354258649337519" onmouseenter="enter('9128354258649337519');" onmouseout="out('9128354258649337519');" style="">1297                          LauncherSettings.Favorites.CONTAINER + &quot;=&quot; + info.id, null);                              </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1298                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1299                  synchronized (sBgLock) {                                                                          </span>
<span class="7541292827914562010" onmouseenter="enter('7541292827914562010');" onmouseout="out('7541292827914562010');" style="">1300                      for (ItemInfo childInfo : info.contents) {                                                    </span>
<span class="-2237983399964272530" onmouseenter="enter('-2237983399964272530');" onmouseout="out('-2237983399964272530');" style="">1301                          sBgItemsIdMap.remove(childInfo.id);                                                       </span>
<span class="7662249246062224172" onmouseenter="enter('7662249246062224172');" onmouseout="out('7662249246062224172');" style="">1302                          sBgDbIconCache.remove(childInfo);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1303                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1306          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1307          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1308      }                                                                                                             </span>
<span  style="">1309                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1310      /**                                                                                                           </span>
<span class="8050600461131576642" onmouseenter="enter('8050600461131576642');" onmouseout="out('8050600461131576642');" style="">1311       * Set this as the current Launcher activity object for the loader.                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1312       */                                                                                                           </span>
<span class="8980870975348708436" onmouseenter="enter('8980870975348708436');" onmouseout="out('8980870975348708436');" style="">1313      public void initialize(Callbacks callbacks) {                                                                 </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1314          synchronized (mLock) {                                                                                    </span>
<span class="-641895236165954122" onmouseenter="enter('-641895236165954122');" onmouseout="out('-641895236165954122');" style="">1315              mCallbacks = new WeakReference&lt;Callbacks&gt;(callbacks);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1316          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1317      }                                                                                                             </span>
<span  style="">1318                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1319 +    @Override                                                                                                     </span>
<span class="-2337875492294712218" onmouseenter="enter('-2337875492294712218');" onmouseout="out('-2337875492294712218');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1320 +    public void onPackageChanged(String packageName, UserHandleCompat user) {                                     </span>
<span class="4778571821882595512" onmouseenter="enter('4778571821882595512');" onmouseout="out('4778571821882595512');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1321 +        int op = PackageUpdatedTask.OP_UPDATE;                                                                    </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1322 +        enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                            </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1323 +                user));                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1324 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1325 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1326 +    @Override                                                                                                     </span>
<span class="-927554855118637848" onmouseenter="enter('-927554855118637848');" onmouseout="out('-927554855118637848');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1327 +    public void onPackageRemoved(String packageName, UserHandleCompat user) {                                     </span>
<span class="-8281859875413044704" onmouseenter="enter('-8281859875413044704');" onmouseout="out('-8281859875413044704');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1328 +        int op = PackageUpdatedTask.OP_REMOVE;                                                                    </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1329 +        enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                            </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1330 +                user));                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1331 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1332 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1333 +    @Override                                                                                                     </span>
<span class="105632639707841197" onmouseenter="enter('105632639707841197');" onmouseout="out('105632639707841197');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1334 +    public void onPackageAdded(String packageName, UserHandleCompat user) {                                       </span>
<span class="4828685442078193889" onmouseenter="enter('4828685442078193889');" onmouseout="out('4828685442078193889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1335 +        int op = PackageUpdatedTask.OP_ADD;                                                                       </span>
<span class="-7367922286951000858" onmouseenter="enter('-7367922286951000858');" onmouseout="out('-7367922286951000858');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1336 +        enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName },                            </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1337 +                user));                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1338 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1339 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1340 +    @Override                                                                                                     </span>
<span class="-5272203289606218807" onmouseenter="enter('-5272203289606218807');" onmouseout="out('-5272203289606218807');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1341 +    public void onPackagesAvailable(String[] packageNames, UserHandleCompat user,                                 </span>
<span class="-6741651152973358021" onmouseenter="enter('-6741651152973358021');" onmouseout="out('-6741651152973358021');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1342 +            boolean replacing) {                                                                                  </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1343 +        if (!replacing) {                                                                                         </span>
<span class="5127769788151278220" onmouseenter="enter('5127769788151278220');" onmouseout="out('5127769788151278220');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1344 +            enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packageNames,                 </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1345 +                    user));                                                                                       </span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1346 +            if (mAppsCanBeOnRemoveableStorage) {                                                                  </span>
<span class="-2089495423111974436" onmouseenter="enter('-2089495423111974436');" onmouseout="out('-2089495423111974436');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1347 +                // Only rebind if we support removable storage. It catches the                                    </span>
<span class="3966636659656955596" onmouseenter="enter('3966636659656955596');" onmouseout="out('3966636659656955596');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1348 +                // case where                                                                                     </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1349 +                // apps on the external sd card need to be reloaded                                               </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1350 +                startLoaderFromBackground();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1351 +            }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1352 +        } else {                                                                                                  </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1353 +            // If we are replacing then just update the packages in the list                                      </span>
<span class="5890557645886373945" onmouseenter="enter('5890557645886373945');" onmouseout="out('5890557645886373945');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1354 +            enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,                            </span>
<span class="-8173810846920498048" onmouseenter="enter('-8173810846920498048');" onmouseout="out('-8173810846920498048');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1355 +                    packageNames, user));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1356 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1357 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1358 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1359 +    @Override                                                                                                     </span>
<span class="-3988876954819926239" onmouseenter="enter('-3988876954819926239');" onmouseout="out('-3988876954819926239');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1360 +    public void onPackagesUnavailable(String[] packageNames, UserHandleCompat user,                               </span>
<span class="-6741651152973358021" onmouseenter="enter('-6741651152973358021');" onmouseout="out('-6741651152973358021');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1361 +            boolean replacing) {                                                                                  </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1362 +        if (!replacing) {                                                                                         </span>
<span class="-7496430100396306440" onmouseenter="enter('-7496430100396306440');" onmouseout="out('-7496430100396306440');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1363 +            enqueuePackageUpdated(new PackageUpdatedTask(                                                         </span>
<span class="8606082806154374174" onmouseenter="enter('8606082806154374174');" onmouseout="out('8606082806154374174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1364 +                    PackageUpdatedTask.OP_UNAVAILABLE, packageNames,                                              </span>
<span class="-151567951959235993" onmouseenter="enter('-151567951959235993');" onmouseout="out('-151567951959235993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1365 +                    user));                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1366 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1367 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1368 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1369 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1370      /**                                                                                                           </span>
<span class="2369304932228112448" onmouseenter="enter('2369304932228112448');" onmouseout="out('2369304932228112448');" style="">1371       * Call from the handler for ACTION_PACKAGE_ADDED, ACTION_PACKAGE_REMOVED and                                 </span>
<span class="-8845819122914862467" onmouseenter="enter('-8845819122914862467');" onmouseout="out('-8845819122914862467');" style="">1372       * ACTION_PACKAGE_CHANGED.                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1373       */                                                                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1374      @Override                                                                                                     </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">1375      public void onReceive(Context context, Intent intent) {                                                       </span>
<span class="-4567737324281428641" onmouseenter="enter('-4567737324281428641');" onmouseout="out('-4567737324281428641');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1376 -        if (DEBUG_LOADERS) Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                              </span>
<span class="-5855592430187821970" onmouseenter="enter('-5855592430187821970');" onmouseout="out('-5855592430187821970');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1377 +        if (DEBUG_RECEIVER) Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                             </span>
<span  style="">1378                                                                                                                    </span>
<span class="-4990819661547905021" onmouseenter="enter('-4990819661547905021');" onmouseout="out('-4990819661547905021');" style="">1379          final String action = intent.getAction();                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1380 -                                                                                                                  </span>
<span class="3248856724191643889" onmouseenter="enter('3248856724191643889');" onmouseout="out('3248856724191643889');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1381 -        if (Intent.ACTION_PACKAGE_CHANGED.equals(action)                                                          </span>
<span class="540624655569635000" onmouseenter="enter('540624655569635000');" onmouseout="out('540624655569635000');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1382 -                || Intent.ACTION_PACKAGE_REMOVED.equals(action)                                                   </span>
<span class="-2497532605624583235" onmouseenter="enter('-2497532605624583235');" onmouseout="out('-2497532605624583235');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1383 -                || Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                                  </span>
<span class="3043595781762965417" onmouseenter="enter('3043595781762965417');" onmouseout="out('3043595781762965417');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1384 -            final String packageName = intent.getData().getSchemeSpecificPart();                                  </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1385 -            final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);                      </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1386 -                                                                                                                  </span>
<span class="8732681156431716097" onmouseenter="enter('8732681156431716097');" onmouseout="out('8732681156431716097');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1387 -            int op = PackageUpdatedTask.OP_NONE;                                                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1388 -                                                                                                                  </span>
<span class="226916516395269330" onmouseenter="enter('226916516395269330');" onmouseout="out('226916516395269330');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1389 -            if (packageName == null || packageName.length() == 0) {                                               </span>
<span class="6497011882963257234" onmouseenter="enter('6497011882963257234');" onmouseout="out('6497011882963257234');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1390 -                // they sent us a bad intent                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1391 -                return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1392 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1393 -                                                                                                                  </span>
<span class="-8410954317975616940" onmouseenter="enter('-8410954317975616940');" onmouseout="out('-8410954317975616940');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1394 -            if (Intent.ACTION_PACKAGE_CHANGED.equals(action)) {                                                   </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1395 -                op = PackageUpdatedTask.OP_UPDATE;                                                                </span>
<span class="-6129441538111285553" onmouseenter="enter('-6129441538111285553');" onmouseout="out('-6129441538111285553');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1396 -            } else if (Intent.ACTION_PACKAGE_REMOVED.equals(action)) {                                            </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1397 -                if (!replacing) {                                                                                 </span>
<span class="-6586396537735596399" onmouseenter="enter('-6586396537735596399');" onmouseout="out('-6586396537735596399');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1398 -                    op = PackageUpdatedTask.OP_REMOVE;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1399 -                }                                                                                                 </span>
<span class="596194884408948956" onmouseenter="enter('596194884408948956');" onmouseout="out('596194884408948956');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1400 -                // else, we are replacing the package, so a PACKAGE_ADDED will be sent                            </span>
<span class="8848734407792838356" onmouseenter="enter('8848734407792838356');" onmouseout="out('8848734407792838356');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1401 -                // later, we will update the package at this time                                                 </span>
<span class="1584650074780198559" onmouseenter="enter('1584650074780198559');" onmouseout="out('1584650074780198559');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1402 -            } else if (Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                              </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1403 -                if (!replacing) {                                                                                 </span>
<span class="-8510632568607563672" onmouseenter="enter('-8510632568607563672');" onmouseout="out('-8510632568607563672');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1404 -                    op = PackageUpdatedTask.OP_ADD;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1405 -                } else {                                                                                          </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1406 -                    op = PackageUpdatedTask.OP_UPDATE;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1407 -                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1408 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1409 -                                                                                                                  </span>
<span class="4401752612772195970" onmouseenter="enter('4401752612772195970');" onmouseout="out('4401752612772195970');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1410 -            if (op != PackageUpdatedTask.OP_NONE) {                                                               </span>
<span class="-3763042555791809504" onmouseenter="enter('-3763042555791809504');" onmouseout="out('-3763042555791809504');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1411 -                enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName }));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1412 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1413 -                                                                                                                  </span>
<span class="1438616399789326195" onmouseenter="enter('1438616399789326195');" onmouseout="out('1438616399789326195');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1414 -        } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE.equals(action)) {                                </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1415 -            final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);                      </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1416 -            String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);                    </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1417 -            if (!replacing) {                                                                                     </span>
<span class="8106264297457531305" onmouseenter="enter('8106264297457531305');" onmouseout="out('8106264297457531305');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1418 -                enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packages));               </span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1419 -                if (mAppsCanBeOnRemoveableStorage) {                                                              </span>
<span class="-460878835460866964" onmouseenter="enter('-460878835460866964');" onmouseout="out('-460878835460866964');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1420 -                    // Only rebind if we support removable storage.  It catches the case where                    </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1421 -                    // apps on the external sd card need to be reloaded                                           </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1422 -                    startLoaderFromBackground();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1423 -                }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1424 -            } else {                                                                                              </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1425 -                // If we are replacing then just update the packages in the list                                  </span>
<span class="5890557645886373945" onmouseenter="enter('5890557645886373945');" onmouseout="out('5890557645886373945');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1426 -                enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,                        </span>
<span class="-5628778258633473048" onmouseenter="enter('-5628778258633473048');" onmouseout="out('-5628778258633473048');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1427 -                        packages));                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1428 -            }                                                                                                     </span>
<span class="7043932659231673518" onmouseenter="enter('7043932659231673518');" onmouseout="out('7043932659231673518');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1429 -        } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE.equals(action)) {                              </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1430 -            final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);                      </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1431 -            if (!replacing) {                                                                                     </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1432 -                String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);                </span>
<span class="-7496430100396306440" onmouseenter="enter('-7496430100396306440');" onmouseout="out('-7496430100396306440');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1433 -                enqueuePackageUpdated(new PackageUpdatedTask(                                                     </span>
<span class="296372570783844091" onmouseenter="enter('296372570783844091');" onmouseout="out('296372570783844091');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1434 -                            PackageUpdatedTask.OP_UNAVAILABLE, packages));                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1435 -            }                                                                                                     </span>
<span class="1575594556961394504" onmouseenter="enter('1575594556961394504');" onmouseout="out('1575594556961394504');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1436 -            // else, we are replacing the packages, so ignore this event and wait for                             </span>
<span class="-3059095335031402395" onmouseenter="enter('-3059095335031402395');" onmouseout="out('-3059095335031402395');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1437 -            // EXTERNAL_APPLICATIONS_AVAILABLE to update the packages at that time                                </span>
<span class="-2062230633944308548" onmouseenter="enter('-2062230633944308548');" onmouseout="out('-2062230633944308548');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1438 -        } else if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                                 </span>
<span class="2827193781436621695" onmouseenter="enter('2827193781436621695');" onmouseout="out('2827193781436621695');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1439 +        if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                                        </span>
<span class="-6283043286710203920" onmouseenter="enter('-6283043286710203920');" onmouseout="out('-6283043286710203920');" style="">1440              // If we have changed locale we need to clear out the labels in all apps/workspace.                   </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1441              forceReload();                                                                                        </span>
<span class="4348516547288755383" onmouseenter="enter('4348516547288755383');" onmouseout="out('4348516547288755383');" style="">1442          } else if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {                                          </span>
<span class="6164116257081582847" onmouseenter="enter('6164116257081582847');" onmouseout="out('6164116257081582847');" style="">1443               // Check if configuration change was an mcc/mnc change which would affect app resources              </span>
<span class="-1334400353911346867" onmouseenter="enter('-1334400353911346867');" onmouseout="out('-1334400353911346867');" style="">1444               // and we would need to clear out the labels in all apps/workspace. Same handling as                 </span>
<span class="-5650891854452971889" onmouseenter="enter('-5650891854452971889');" onmouseout="out('-5650891854452971889');" style="">1445               // above for ACTION_LOCALE_CHANGED                                                                   </span>
<span class="5411318685984925146" onmouseenter="enter('5411318685984925146');" onmouseout="out('5411318685984925146');" style="">1446               Configuration currentConfig = context.getResources().getConfiguration();                             </span>
<span class="-5822569774152959183" onmouseenter="enter('-5822569774152959183');" onmouseout="out('-5822569774152959183');" style="">1447               if (mPreviousConfigMcc != currentConfig.mcc) {                                                       </span>
<span class="84255665079130844" onmouseenter="enter('84255665079130844');" onmouseout="out('84255665079130844');" style="">1448                     Log.d(TAG, &quot;Reload apps on config change. curr_mcc:&quot;                                           </span>
<span class="-5209278319615985301" onmouseenter="enter('-5209278319615985301');" onmouseout="out('-5209278319615985301');" style="">1449                         + currentConfig.mcc + &quot; prevmcc:&quot; + mPreviousConfigMcc);                                   </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1450                     forceReload();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1451               }                                                                                                    </span>
<span class="-3935663267934034322" onmouseenter="enter('-3935663267934034322');" onmouseout="out('-3935663267934034322');" style="">1452               // Update previousConfig                                                                             </span>
<span class="3962364908604221868" onmouseenter="enter('3962364908604221868');" onmouseout="out('3962364908604221868');" style="">1453               mPreviousConfigMcc = currentConfig.mcc;                                                              </span>
<span class="-625815149698974703" onmouseenter="enter('-625815149698974703');" onmouseout="out('-625815149698974703');" style="">1454          } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) ||                          </span>
<span class="-3901926890039161494" onmouseenter="enter('-3901926890039161494');" onmouseout="out('-3901926890039161494');" style="">1455                     SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {                              </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1456              if (mCallbacks != null) {                                                                             </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1457                  Callbacks callbacks = mCallbacks.get();                                                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1458                  if (callbacks != null) {                                                                          </span>
<span class="-1936765454200843013" onmouseenter="enter('-1936765454200843013');" onmouseout="out('-1936765454200843013');" style="">1459                      callbacks.bindSearchablesChanged();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1460                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1461              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1462          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1463      }                                                                                                             </span>
<span  style="">1464                                                                                                                    </span>
<span class="-3490103774513517076" onmouseenter="enter('-3490103774513517076');" onmouseout="out('-3490103774513517076');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1465 -    private void forceReload() {                                                                                  </span>
<span class="-17594942140375151" onmouseenter="enter('-17594942140375151');" onmouseout="out('-17594942140375151');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1466 +    void forceReload() {                                                                                          </span>
<span class="778547048286075437" onmouseenter="enter('778547048286075437');" onmouseout="out('778547048286075437');" style="">1467          resetLoadedState(true, true);                                                                             </span>
<span  style="">1468                                                                                                                    </span>
<span class="4237924176832789189" onmouseenter="enter('4237924176832789189');" onmouseout="out('4237924176832789189');" style="">1469          // Do this here because if the launcher activity is running it will be restarted.                         </span>
<span class="-3504249388484505584" onmouseenter="enter('-3504249388484505584');" onmouseout="out('-3504249388484505584');" style="">1470          // If it&#x27;s not running startLoaderFromBackground will merely tell it that it needs                        </span>
<span class="5637742608155670431" onmouseenter="enter('5637742608155670431');" onmouseout="out('5637742608155670431');" style="">1471          // to reload.                                                                                             </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1472          startLoaderFromBackground();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1473      }                                                                                                             </span>
<span  style="">1474                                                                                                                    </span>
<span class="-4293128577464776735" onmouseenter="enter('-4293128577464776735');" onmouseout="out('-4293128577464776735');" style="">1475      public void resetLoadedState(boolean resetAllAppsLoaded, boolean resetWorkspaceLoaded) {                      </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1476          synchronized (mLock) {                                                                                    </span>
<span class="-2609781935860166694" onmouseenter="enter('-2609781935860166694');" onmouseout="out('-2609781935860166694');" style="">1477              // Stop any existing loaders first, so they don&#x27;t set mAllAppsLoaded or                               </span>
<span class="1916843454374538934" onmouseenter="enter('1916843454374538934');" onmouseout="out('1916843454374538934');" style="">1478              // mWorkspaceLoaded to true later                                                                     </span>
<span class="-1528282254597569426" onmouseenter="enter('-1528282254597569426');" onmouseout="out('-1528282254597569426');" style="">1479              stopLoaderLocked();                                                                                   </span>
<span class="-4094161784675318974" onmouseenter="enter('-4094161784675318974');" onmouseout="out('-4094161784675318974');" style="">1480              if (resetAllAppsLoaded) mAllAppsLoaded = false;                                                       </span>
<span class="-3582216479388479825" onmouseenter="enter('-3582216479388479825');" onmouseout="out('-3582216479388479825');" style="">1481              if (resetWorkspaceLoaded) mWorkspaceLoaded = false;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1482          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1483      }                                                                                                             </span>
<span  style="">1484                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1485      /**                                                                                                           </span>
<span class="-2117548427273174966" onmouseenter="enter('-2117548427273174966');" onmouseout="out('-2117548427273174966');" style="">1486       * When the launcher is in the background, it&#x27;s possible for it to miss paired                                </span>
<span class="9045642034745197537" onmouseenter="enter('9045642034745197537');" onmouseout="out('9045642034745197537');" style="">1487       * configuration changes.  So whenever we trigger the loader from the background                              </span>
<span class="3717077838570548717" onmouseenter="enter('3717077838570548717');" onmouseout="out('3717077838570548717');" style="">1488       * tell the launcher that it needs to re-run the loader when it comes back instead                            </span>
<span class="8619803709595782118" onmouseenter="enter('8619803709595782118');" onmouseout="out('8619803709595782118');" style="">1489       * of doing it now.                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1490       */                                                                                                           </span>
<span class="2053805597450117019" onmouseenter="enter('2053805597450117019');" onmouseout="out('2053805597450117019');" style="">1491      public void startLoaderFromBackground() {                                                                     </span>
<span class="-3760886775206602162" onmouseenter="enter('-3760886775206602162');" onmouseout="out('-3760886775206602162');" style="">1492          boolean runLoader = false;                                                                                </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1493          if (mCallbacks != null) {                                                                                 </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1494              Callbacks callbacks = mCallbacks.get();                                                               </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1495              if (callbacks != null) {                                                                              </span>
<span class="-8461765931128288918" onmouseenter="enter('-8461765931128288918');" onmouseout="out('-8461765931128288918');" style="">1496                  // Only actually run the loader if they&#x27;re not paused.                                            </span>
<span class="-462943306960371545" onmouseenter="enter('-462943306960371545');" onmouseout="out('-462943306960371545');" style="">1497                  if (!callbacks.setLoadOnResume()) {                                                               </span>
<span class="-8889848208331327581" onmouseenter="enter('-8889848208331327581');" onmouseout="out('-8889848208331327581');" style="">1498                      runLoader = true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1499                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1500              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1501          }                                                                                                         </span>
<span class="-2622291522100283788" onmouseenter="enter('-2622291522100283788');" onmouseout="out('-2622291522100283788');" style="">1502          if (runLoader) {                                                                                          </span>
<span class="-8998147482804817647" onmouseenter="enter('-8998147482804817647');" onmouseout="out('-8998147482804817647');" style="">1503              startLoader(false, PagedView.INVALID_RESTORE_PAGE);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1504          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505      }                                                                                                             </span>
<span  style="">1506                                                                                                                    </span>
<span class="5010903034251856801" onmouseenter="enter('5010903034251856801');" onmouseout="out('5010903034251856801');" style="">1507      // If there is already a loader task running, tell it to stop.                                                </span>
<span class="796557558969242789" onmouseenter="enter('796557558969242789');" onmouseout="out('796557558969242789');" style="">1508      // returns true if isLaunching() was true on the old task                                                     </span>
<span class="-4581932122990216089" onmouseenter="enter('-4581932122990216089');" onmouseout="out('-4581932122990216089');" style="">1509      private boolean stopLoaderLocked() {                                                                          </span>
<span class="-998934784399408070" onmouseenter="enter('-998934784399408070');" onmouseout="out('-998934784399408070');" style="">1510          boolean isLaunching = false;                                                                              </span>
<span class="-7986438653599299764" onmouseenter="enter('-7986438653599299764');" onmouseout="out('-7986438653599299764');" style="">1511          LoaderTask oldTask = mLoaderTask;                                                                         </span>
<span class="-2859449282457612659" onmouseenter="enter('-2859449282457612659');" onmouseout="out('-2859449282457612659');" style="">1512          if (oldTask != null) {                                                                                    </span>
<span class="5507271139955657849" onmouseenter="enter('5507271139955657849');" onmouseout="out('5507271139955657849');" style="">1513              if (oldTask.isLaunching()) {                                                                          </span>
<span class="-2542349725897719409" onmouseenter="enter('-2542349725897719409');" onmouseout="out('-2542349725897719409');" style="">1514                  isLaunching = true;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1515              }                                                                                                     </span>
<span class="-1151918806087352732" onmouseenter="enter('-1151918806087352732');" onmouseout="out('-1151918806087352732');" style="">1516              oldTask.stopLocked();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1517          }                                                                                                         </span>
<span class="353443281501806148" onmouseenter="enter('353443281501806148');" onmouseout="out('353443281501806148');" style="">1518          return isLaunching;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1519      }                                                                                                             </span>
<span  style="">1520                                                                                                                    </span>
<span class="-650602055294598310" onmouseenter="enter('-650602055294598310');" onmouseout="out('-650602055294598310');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1521 +    public boolean isCurrentCallbacks(Callbacks callbacks) {                                                      </span>
<span class="-2678194210930296625" onmouseenter="enter('-2678194210930296625');" onmouseout="out('-2678194210930296625');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1522 +        return (mCallbacks != null &amp;&amp; mCallbacks.get() == callbacks);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1523 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1524 +                                                                                                                  </span>
<span class="3837278165301095000" onmouseenter="enter('3837278165301095000');" onmouseout="out('3837278165301095000');" style="">1525      public void startLoader(boolean isLaunching, int synchronousBindPage) {                                       </span>
<span class="-5265370469502082000" onmouseenter="enter('-5265370469502082000');" onmouseout="out('-5265370469502082000');" style="">1526          startLoader(isLaunching, synchronousBindPage, LOADER_FLAG_NONE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1527      }                                                                                                             </span>
<span  style="">1528                                                                                                                    </span>
<span class="4886983231320039031" onmouseenter="enter('4886983231320039031');" onmouseout="out('4886983231320039031');" style="">1529      public void startLoader(boolean isLaunching, int synchronousBindPage, int loadFlags) {                        </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1530          synchronized (mLock) {                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1531              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-3508213546782417324" onmouseenter="enter('-3508213546782417324');" onmouseout="out('-3508213546782417324');" style="">1532                  Log.d(TAG, &quot;startLoader isLaunching=&quot; + isLaunching);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1533              }                                                                                                     </span>
<span  style="">1534                                                                                                                    </span>
<span class="6333826815871699731" onmouseenter="enter('6333826815871699731');" onmouseout="out('6333826815871699731');" style="">1535              // Clear any deferred bind-runnables from the synchronized load process                               </span>
<span class="-7033809362198181476" onmouseenter="enter('-7033809362198181476');" onmouseout="out('-7033809362198181476');" style="">1536              // We must do this before any loading/binding is scheduled below.                                     </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1537 -            mDeferredBindRunnables.clear();                                                                       </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1538 +            synchronized (mDeferredBindRunnables) {                                                               </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1539 +                mDeferredBindRunnables.clear();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1540 +            }                                                                                                     </span>
<span  style="">1541                                                                                                                    </span>
<span class="-2785438828901225561" onmouseenter="enter('-2785438828901225561');" onmouseout="out('-2785438828901225561');" style="">1542              // Don&#x27;t bother to start the thread if we know it&#x27;s not going to do anything                          </span>
<span class="-784058118581736702" onmouseenter="enter('-784058118581736702');" onmouseout="out('-784058118581736702');" style="">1543              if (mCallbacks != null &amp;&amp; mCallbacks.get() != null) {                                                 </span>
<span class="-5820527225743363271" onmouseenter="enter('-5820527225743363271');" onmouseout="out('-5820527225743363271');" style="">1544                  // If there is already one running, tell it to stop.                                              </span>
<span class="3990358955275755027" onmouseenter="enter('3990358955275755027');" onmouseout="out('3990358955275755027');" style="">1545                  // also, don&#x27;t downgrade isLaunching if we&#x27;re already running                                     </span>
<span class="-6024742637751579231" onmouseenter="enter('-6024742637751579231');" onmouseout="out('-6024742637751579231');" style="">1546                  isLaunching = isLaunching || stopLoaderLocked();                                                  </span>
<span class="7022676154060365524" onmouseenter="enter('7022676154060365524');" onmouseout="out('7022676154060365524');" style="">1547                  mLoaderTask = new LoaderTask(mApp.getContext(), isLaunching, loadFlags);                          </span>
<span class="1771251463067889729" onmouseenter="enter('1771251463067889729');" onmouseout="out('1771251463067889729');" style="">1548                  if (synchronousBindPage != PagedView.INVALID_RESTORE_PAGE                                         </span>
<span class="7049103546590409467" onmouseenter="enter('7049103546590409467');" onmouseout="out('7049103546590409467');" style="">1549                          &amp;&amp; mAllAppsLoaded &amp;&amp; mWorkspaceLoaded) {                                                  </span>
<span class="-8342371766149337044" onmouseenter="enter('-8342371766149337044');" onmouseout="out('-8342371766149337044');" style="">1550                      mLoaderTask.runBindSynchronousPage(synchronousBindPage);                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1551                  } else {                                                                                          </span>
<span class="-600387258114093875" onmouseenter="enter('-600387258114093875');" onmouseout="out('-600387258114093875');" style="">1552                      sWorkerThread.setPriority(Thread.NORM_PRIORITY);                                              </span>
<span class="7243935410050079045" onmouseenter="enter('7243935410050079045');" onmouseout="out('7243935410050079045');" style="">1553                      sWorker.post(mLoaderTask);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1554                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1555              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1556          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1557      }                                                                                                             </span>
<span  style="">1558                                                                                                                    </span>
<span class="8791491145548048370" onmouseenter="enter('8791491145548048370');" onmouseout="out('8791491145548048370');" style="">1559      void bindRemainingSynchronousPages() {                                                                        </span>
<span class="5033608739884582118" onmouseenter="enter('5033608739884582118');" onmouseout="out('5033608739884582118');" style="">1560          // Post the remaining side pages to be loaded                                                             </span>
<span class="-5332743236356375648" onmouseenter="enter('-5332743236356375648');" onmouseout="out('-5332743236356375648');" style="">1561          if (!mDeferredBindRunnables.isEmpty()) {                                                                  </span>
<span class="5296695443187413802" onmouseenter="enter('5296695443187413802');" onmouseout="out('5296695443187413802');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1562 -            for (final Runnable r : mDeferredBindRunnables) {                                                     </span>
<span class="3864855355327062414" onmouseenter="enter('3864855355327062414');" onmouseout="out('3864855355327062414');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1563 +            Runnable[] deferredBindRunnables = null;                                                              </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1564 +            synchronized (mDeferredBindRunnables) {                                                               </span>
<span class="-7323371485266753329" onmouseenter="enter('-7323371485266753329');" onmouseout="out('-7323371485266753329');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1565 +                deferredBindRunnables = mDeferredBindRunnables.toArray(                                           </span>
<span class="-5228620787203084012" onmouseenter="enter('-5228620787203084012');" onmouseout="out('-5228620787203084012');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1566 +                        new Runnable[mDeferredBindRunnables.size()]);                                             </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1567 +                mDeferredBindRunnables.clear();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1568 +            }                                                                                                     </span>
<span class="-4818994596267375040" onmouseenter="enter('-4818994596267375040');" onmouseout="out('-4818994596267375040');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1569 +            for (final Runnable r : deferredBindRunnables) {                                                      </span>
<span class="352794200584805787" onmouseenter="enter('352794200584805787');" onmouseout="out('352794200584805787');" style="">1570                  mHandler.post(r, MAIN_THREAD_BINDING_RUNNABLE);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1571              }                                                                                                     </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1572 -            mDeferredBindRunnables.clear();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1573          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1574      }                                                                                                             </span>
<span  style="">1575                                                                                                                    </span>
<span class="2340632222115195329" onmouseenter="enter('2340632222115195329');" onmouseout="out('2340632222115195329');" style="">1576      public void stopLoader() {                                                                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1577          synchronized (mLock) {                                                                                    </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1578              if (mLoaderTask != null) {                                                                            </span>
<span class="-3264656657741930991" onmouseenter="enter('-3264656657741930991');" onmouseout="out('-3264656657741930991');" style="">1579                  mLoaderTask.stopLocked();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1580              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1581          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1582      }                                                                                                             </span>
<span  style="">1583                                                                                                                    </span>
<span class="-7250027300190670202" onmouseenter="enter('-7250027300190670202');" onmouseout="out('-7250027300190670202');" style="">1584      /** Loads the workspace screens db into a map of Rank -&gt; ScreenId */                                          </span>
<span class="122992606215727554" onmouseenter="enter('122992606215727554');" onmouseout="out('122992606215727554');" style="">1585      private static TreeMap&lt;Integer, Long&gt; loadWorkspaceScreensDb(Context context) {                               </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1586          final ContentResolver contentResolver = context.getContentResolver();                                     </span>
<span class="-2220596623746218138" onmouseenter="enter('-2220596623746218138');" onmouseout="out('-2220596623746218138');" style="">1587          final Uri screensUri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                     </span>
<span class="6273592658286011909" onmouseenter="enter('6273592658286011909');" onmouseout="out('6273592658286011909');" style="">1588          final Cursor sc = contentResolver.query(screensUri, null, null, null, null);                              </span>
<span class="-750342796873513708" onmouseenter="enter('-750342796873513708');" onmouseout="out('-750342796873513708');" style="">1589          TreeMap&lt;Integer, Long&gt; orderedScreens = new TreeMap&lt;Integer, Long&gt;();                                     </span>
<span  style="">1590                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1591          try {                                                                                                     </span>
<span class="-8175558610564469753" onmouseenter="enter('-8175558610564469753');" onmouseout="out('-8175558610564469753');" style="">1592              final int idIndex = sc.getColumnIndexOrThrow(                                                         </span>
<span class="-8946142257769661598" onmouseenter="enter('-8946142257769661598');" onmouseout="out('-8946142257769661598');" style="">1593                      LauncherSettings.WorkspaceScreens._ID);                                                       </span>
<span class="-8868089630781298600" onmouseenter="enter('-8868089630781298600');" onmouseout="out('-8868089630781298600');" style="">1594              final int rankIndex = sc.getColumnIndexOrThrow(                                                       </span>
<span class="5916017515631826997" onmouseenter="enter('5916017515631826997');" onmouseout="out('5916017515631826997');" style="">1595                      LauncherSettings.WorkspaceScreens.SCREEN_RANK);                                               </span>
<span class="204728523712198078" onmouseenter="enter('204728523712198078');" onmouseout="out('204728523712198078');" style="">1596              while (sc.moveToNext()) {                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1597                  try {                                                                                             </span>
<span class="-3927530459574574291" onmouseenter="enter('-3927530459574574291');" onmouseout="out('-3927530459574574291');" style="">1598                      long screenId = sc.getLong(idIndex);                                                          </span>
<span class="4944528408544996755" onmouseenter="enter('4944528408544996755');" onmouseout="out('4944528408544996755');" style="">1599                      int rank = sc.getInt(rankIndex);                                                              </span>
<span class="3308047316092947062" onmouseenter="enter('3308047316092947062');" onmouseout="out('3308047316092947062');" style="">1600                      orderedScreens.put(rank, screenId);                                                           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1601                  } catch (Exception e) {                                                                           </span>
<span class="-7912680121623740950" onmouseenter="enter('-7912680121623740950');" onmouseout="out('-7912680121623740950');" style="">1602                      Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e, true);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1603                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1604              }                                                                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1605          } finally {                                                                                               </span>
<span class="8048076729460304726" onmouseenter="enter('8048076729460304726');" onmouseout="out('8048076729460304726');" style="">1606              sc.close();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1607          }                                                                                                         </span>
<span  style="">1608                                                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1609          // Log to disk                                                                                            </span>
<span class="395286336309272035" onmouseenter="enter('395286336309272035');" onmouseout="out('395286336309272035');" style="">1610          Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspaceScreensDb()&quot;, true);                                    </span>
<span class="218635510720911915" onmouseenter="enter('218635510720911915');" onmouseout="out('218635510720911915');" style="">1611          ArrayList&lt;String&gt; orderedScreensPairs= new ArrayList&lt;String&gt;();                                           </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">1612          for (Integer i : orderedScreens.keySet()) {                                                               </span>
<span class="7491860136402808405" onmouseenter="enter('7491860136402808405');" onmouseout="out('7491860136402808405');" style="">1613              orderedScreensPairs.add(&quot;{ &quot; + i + &quot;: &quot; + orderedScreens.get(i) + &quot; }&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1614          }                                                                                                         </span>
<span class="-1337084683171534745" onmouseenter="enter('-1337084683171534745');" onmouseout="out('-1337084683171534745');" style="">1615          Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; +                                                       </span>
<span class="-2164573057986762020" onmouseenter="enter('-2164573057986762020');" onmouseout="out('-2164573057986762020');" style="">1616                  TextUtils.join(&quot;, &quot;, orderedScreensPairs), true);                                                 </span>
<span class="1470292219769535286" onmouseenter="enter('1470292219769535286');" onmouseout="out('1470292219769535286');" style="">1617          return orderedScreens;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1618      }                                                                                                             </span>
<span  style="">1619                                                                                                                    </span>
<span class="3555732154070898598" onmouseenter="enter('3555732154070898598');" onmouseout="out('3555732154070898598');" style="">1620      public boolean isAllAppsLoaded() {                                                                            </span>
<span class="-4479372220598901856" onmouseenter="enter('-4479372220598901856');" onmouseout="out('-4479372220598901856');" style="">1621          return mAllAppsLoaded;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1622      }                                                                                                             </span>
<span  style="">1623                                                                                                                    </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1624      boolean isLoadingWorkspace() {                                                                                </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1625          synchronized (mLock) {                                                                                    </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1626              if (mLoaderTask != null) {                                                                            </span>
<span class="-8784543184221518678" onmouseenter="enter('-8784543184221518678');" onmouseout="out('-8784543184221518678');" style="">1627                  return mLoaderTask.isLoadingWorkspace();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1628              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1629          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1630          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1631      }                                                                                                             </span>
<span  style="">1632                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1633      /**                                                                                                           </span>
<span class="2155822975232422030" onmouseenter="enter('2155822975232422030');" onmouseout="out('2155822975232422030');" style="">1634       * Runnable for the thread that loads the contents of the launcher:                                           </span>
<span class="2245504796345070456" onmouseenter="enter('2245504796345070456');" onmouseout="out('2245504796345070456');" style="">1635       *   - workspace icons                                                                                        </span>
<span class="3748531824399873232" onmouseenter="enter('3748531824399873232');" onmouseout="out('3748531824399873232');" style="">1636       *   - widgets                                                                                                </span>
<span class="-1174287823865228312" onmouseenter="enter('-1174287823865228312');" onmouseout="out('-1174287823865228312');" style="">1637       *   - all apps icons                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1638       */                                                                                                           </span>
<span class="5152324394883908677" onmouseenter="enter('5152324394883908677');" onmouseout="out('5152324394883908677');" style="">1639      private class LoaderTask implements Runnable {                                                                </span>
<span class="6683852815807951473" onmouseenter="enter('6683852815807951473');" onmouseout="out('6683852815807951473');" style="">1640          private Context mContext;                                                                                 </span>
<span class="-8892613002903674576" onmouseenter="enter('-8892613002903674576');" onmouseout="out('-8892613002903674576');" style="">1641          private boolean mIsLaunching;                                                                             </span>
<span class="-8472062509666230595" onmouseenter="enter('-8472062509666230595');" onmouseout="out('-8472062509666230595');" style="">1642          private boolean mIsLoadingAndBindingWorkspace;                                                            </span>
<span class="840925515877441947" onmouseenter="enter('840925515877441947');" onmouseout="out('840925515877441947');" style="">1643          private boolean mStopped;                                                                                 </span>
<span class="-1108993435799622018" onmouseenter="enter('-1108993435799622018');" onmouseout="out('-1108993435799622018');" style="">1644          private boolean mLoadAndBindStepFinished;                                                                 </span>
<span class="2080823019438326837" onmouseenter="enter('2080823019438326837');" onmouseout="out('2080823019438326837');" style="">1645          private int mFlags;                                                                                       </span>
<span  style="">1646                                                                                                                    </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">1647          private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                                        </span>
<span  style="">1648                                                                                                                    </span>
<span class="-3637406926963361525" onmouseenter="enter('-3637406926963361525');" onmouseout="out('-3637406926963361525');" style="">1649          LoaderTask(Context context, boolean isLaunching, int flags) {                                             </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style="">1650              mContext = context;                                                                                   </span>
<span class="7512260519858493354" onmouseenter="enter('7512260519858493354');" onmouseout="out('7512260519858493354');" style="">1651              mIsLaunching = isLaunching;                                                                           </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">1652              mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                                    </span>
<span class="6183718553459964087" onmouseenter="enter('6183718553459964087');" onmouseout="out('6183718553459964087');" style="">1653              mFlags = flags;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1654          }                                                                                                         </span>
<span  style="">1655                                                                                                                    </span>
<span class="-3427713478562425776" onmouseenter="enter('-3427713478562425776');" onmouseout="out('-3427713478562425776');" style="">1656          boolean isLaunching() {                                                                                   </span>
<span class="-4684239236966951132" onmouseenter="enter('-4684239236966951132');" onmouseout="out('-4684239236966951132');" style="">1657              return mIsLaunching;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1658          }                                                                                                         </span>
<span  style="">1659                                                                                                                    </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1660          boolean isLoadingWorkspace() {                                                                            </span>
<span class="-1565626489511429864" onmouseenter="enter('-1565626489511429864');" onmouseout="out('-1565626489511429864');" style="">1661              return mIsLoadingAndBindingWorkspace;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1662          }                                                                                                         </span>
<span  style="">1663                                                                                                                    </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1664          /** Returns whether this is an upgrade path */                                                            </span>
<span class="-4912644643880785787" onmouseenter="enter('-4912644643880785787');" onmouseout="out('-4912644643880785787');" style="">1665          private boolean loadAndBindWorkspace() {                                                                  </span>
<span class="3221067006114111971" onmouseenter="enter('3221067006114111971');" onmouseout="out('3221067006114111971');" style="">1666              mIsLoadingAndBindingWorkspace = true;                                                                 </span>
<span  style="">1667                                                                                                                    </span>
<span class="1537270917172214589" onmouseenter="enter('1537270917172214589');" onmouseout="out('1537270917172214589');" style="">1668              // Load the workspace                                                                                 </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1669              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="8901273111544619292" onmouseenter="enter('8901273111544619292');" onmouseout="out('8901273111544619292');" style="">1670                  Log.d(TAG, &quot;loadAndBindWorkspace mWorkspaceLoaded=&quot; + mWorkspaceLoaded);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1671              }                                                                                                     </span>
<span  style="">1672                                                                                                                    </span>
<span class="-7050118912026035967" onmouseenter="enter('-7050118912026035967');" onmouseout="out('-7050118912026035967');" style="">1673              boolean isUpgradePath = false;                                                                        </span>
<span class="-6627511839388696673" onmouseenter="enter('-6627511839388696673');" onmouseout="out('-6627511839388696673');" style="">1674              if (!mWorkspaceLoaded) {                                                                              </span>
<span class="-5751837054227838000" onmouseenter="enter('-5751837054227838000');" onmouseout="out('-5751837054227838000');" style="">1675                  isUpgradePath = loadWorkspace();                                                                  </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1676                  synchronized (LoaderTask.this) {                                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1677                      if (mStopped) {                                                                               </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1678                          return isUpgradePath;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1679                      }                                                                                             </span>
<span class="3247008524984054391" onmouseenter="enter('3247008524984054391');" onmouseout="out('3247008524984054391');" style="">1680                      mWorkspaceLoaded = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1681                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1682              }                                                                                                     </span>
<span  style="">1683                                                                                                                    </span>
<span class="8161409494754485761" onmouseenter="enter('8161409494754485761');" onmouseout="out('8161409494754485761');" style="">1684              // Bind the workspace                                                                                 </span>
<span class="7984749853310309686" onmouseenter="enter('7984749853310309686');" onmouseout="out('7984749853310309686');" style="">1685              bindWorkspace(-1, isUpgradePath);                                                                     </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1686              return isUpgradePath;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1687          }                                                                                                         </span>
<span  style="">1688                                                                                                                    </span>
<span class="-1989226029052835978" onmouseenter="enter('-1989226029052835978');" onmouseout="out('-1989226029052835978');" style="">1689          private void waitForIdle() {                                                                              </span>
<span class="755597645611528735" onmouseenter="enter('755597645611528735');" onmouseout="out('755597645611528735');" style="">1690              // Wait until the either we&#x27;re stopped or the other threads are done.                                 </span>
<span class="-8727414813590658044" onmouseenter="enter('-8727414813590658044');" onmouseout="out('-8727414813590658044');" style="">1691              // This way we don&#x27;t start loading all apps until the workspace has settled                           </span>
<span class="519327046885180501" onmouseenter="enter('519327046885180501');" onmouseout="out('519327046885180501');" style="">1692              // down.                                                                                              </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1693              synchronized (LoaderTask.this) {                                                                      </span>
<span class="-83798755248439808" onmouseenter="enter('-83798755248439808');" onmouseout="out('-83798755248439808');" style="">1694                  final long workspaceWaitTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                    </span>
<span  style="">1695                                                                                                                    </span>
<span class="-8997106023930440912" onmouseenter="enter('-8997106023930440912');" onmouseout="out('-8997106023930440912');" style="">1696                  mHandler.postIdle(new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1697                          public void run() {                                                                       </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1698                              synchronized (LoaderTask.this) {                                                      </span>
<span class="-4593766760064909367" onmouseenter="enter('-4593766760064909367');" onmouseout="out('-4593766760064909367');" style="">1699                                  mLoadAndBindStepFinished = true;                                                  </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1700                                  if (DEBUG_LOADERS) {                                                              </span>
<span class="-7140275656523627984" onmouseenter="enter('-7140275656523627984');" onmouseout="out('-7140275656523627984');" style="">1701                                      Log.d(TAG, &quot;done with previous binding step&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1702                                  }                                                                                 </span>
<span class="8111819661104992685" onmouseenter="enter('8111819661104992685');" onmouseout="out('8111819661104992685');" style="">1703                                  LoaderTask.this.notify();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1704                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1705                          }                                                                                         </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1706                      });                                                                                           </span>
<span  style="">1707                                                                                                                    </span>
<span class="7673579852599691461" onmouseenter="enter('7673579852599691461');" onmouseout="out('7673579852599691461');" style="">1708                  while (!mStopped &amp;&amp; !mLoadAndBindStepFinished &amp;&amp; !mFlushingWorkerThread) {                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1709                      try {                                                                                         </span>
<span class="-1997675543177729859" onmouseenter="enter('-1997675543177729859');" onmouseout="out('-1997675543177729859');" style="">1710                          // Just in case mFlushingWorkerThread changes but we aren&#x27;t woken up,                     </span>
<span class="4998753984474875942" onmouseenter="enter('4998753984474875942');" onmouseout="out('4998753984474875942');" style="">1711                          // wait no longer than 1sec at a time                                                     </span>
<span class="1515790047903299628" onmouseenter="enter('1515790047903299628');" onmouseout="out('1515790047903299628');" style="">1712                          this.wait(1000);                                                                          </span>
<span class="3493957724480568133" onmouseenter="enter('3493957724480568133');" onmouseout="out('3493957724480568133');" style="">1713                      } catch (InterruptedException ex) {                                                           </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1714                          // Ignore                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1715                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1716                  }                                                                                                 </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1717                  if (DEBUG_LOADERS) {                                                                              </span>
<span class="-72139740866353106" onmouseenter="enter('-72139740866353106');" onmouseout="out('-72139740866353106');" style="">1718                      Log.d(TAG, &quot;waited &quot;                                                                          </span>
<span class="3094974955332165680" onmouseenter="enter('3094974955332165680');" onmouseout="out('3094974955332165680');" style="">1719                              + (SystemClock.uptimeMillis()-workspaceWaitTime)                                      </span>
<span class="4719480645001782920" onmouseenter="enter('4719480645001782920');" onmouseout="out('4719480645001782920');" style="">1720                              + &quot;ms for previous step to finish binding&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1721                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1722              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1723          }                                                                                                         </span>
<span  style="">1724                                                                                                                    </span>
<span class="6003497491863497289" onmouseenter="enter('6003497491863497289');" onmouseout="out('6003497491863497289');" style="">1725          void runBindSynchronousPage(int synchronousBindPage) {                                                    </span>
<span class="26631348189854486" onmouseenter="enter('26631348189854486');" onmouseout="out('26631348189854486');" style="">1726              if (synchronousBindPage == PagedView.INVALID_RESTORE_PAGE) {                                          </span>
<span class="-8503902330989669437" onmouseenter="enter('-8503902330989669437');" onmouseout="out('-8503902330989669437');" style="">1727                  // Ensure that we have a valid page index to load synchronously                                   </span>
<span class="4351877111278684588" onmouseenter="enter('4351877111278684588');" onmouseout="out('4351877111278684588');" style="">1728                  throw new RuntimeException(&quot;Should not call runBindSynchronousPage() without &quot; +                  </span>
<span class="-7231071987017264740" onmouseenter="enter('-7231071987017264740');" onmouseout="out('-7231071987017264740');" style="">1729                          &quot;valid page index&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1730              }                                                                                                     </span>
<span class="-1078848978706070277" onmouseenter="enter('-1078848978706070277');" onmouseout="out('-1078848978706070277');" style="">1731              if (!mAllAppsLoaded || !mWorkspaceLoaded) {                                                           </span>
<span class="2879437365312389694" onmouseenter="enter('2879437365312389694');" onmouseout="out('2879437365312389694');" style="">1732                  // Ensure that we don&#x27;t try and bind a specified page when the pages have not been                </span>
<span class="169159946226030638" onmouseenter="enter('169159946226030638');" onmouseout="out('169159946226030638');" style="">1733                  // loaded already (we should load everything asynchronously in that case)                         </span>
<span class="2803547673173241327" onmouseenter="enter('2803547673173241327');" onmouseout="out('2803547673173241327');" style="">1734                  throw new RuntimeException(&quot;Expecting AllApps and Workspace to be loaded&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1735              }                                                                                                     </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1736              synchronized (mLock) {                                                                                </span>
<span class="6834879657722268045" onmouseenter="enter('6834879657722268045');" onmouseout="out('6834879657722268045');" style="">1737                  if (mIsLoaderTaskRunning) {                                                                       </span>
<span class="3479473486057258175" onmouseenter="enter('3479473486057258175');" onmouseout="out('3479473486057258175');" style="">1738                      // Ensure that we are never running the background loading at this point since                </span>
<span class="5690931735845958615" onmouseenter="enter('5690931735845958615');" onmouseout="out('5690931735845958615');" style="">1739                      // we also touch the background collections                                                   </span>
<span class="-8789687649412956769" onmouseenter="enter('-8789687649412956769');" onmouseout="out('-8789687649412956769');" style="">1740                      throw new RuntimeException(&quot;Error! Background loading is already running&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1741                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1742              }                                                                                                     </span>
<span  style="">1743                                                                                                                    </span>
<span class="4081886748823582405" onmouseenter="enter('4081886748823582405');" onmouseout="out('4081886748823582405');" style="">1744              // XXX: Throw an exception if we are already loading (since we touch the worker thread                </span>
<span class="-98490365064007765" onmouseenter="enter('-98490365064007765');" onmouseout="out('-98490365064007765');" style="">1745              //      data structures, we can&#x27;t allow any other thread to touch that data, but because              </span>
<span class="4680477662519922026" onmouseenter="enter('4680477662519922026');" onmouseout="out('4680477662519922026');" style="">1746              //      this call is synchronous, we can get away with not locking).                                  </span>
<span  style="">1747                                                                                                                    </span>
<span class="-6012373927983533730" onmouseenter="enter('-6012373927983533730');" onmouseout="out('-6012373927983533730');" style="">1748              // The LauncherModel is static in the LauncherAppState and mHandler may have queued                   </span>
<span class="7586418927072898518" onmouseenter="enter('7586418927072898518');" onmouseout="out('7586418927072898518');" style="">1749              // operations from the previous activity.  We need to ensure that all queued operations               </span>
<span class="-70743228311848279" onmouseenter="enter('-70743228311848279');" onmouseout="out('-70743228311848279');" style="">1750              // are executed before any synchronous binding work is done.                                          </span>
<span class="-4498008587479034521" onmouseenter="enter('-4498008587479034521');" onmouseout="out('-4498008587479034521');" style="">1751              mHandler.flush();                                                                                     </span>
<span  style="">1752                                                                                                                    </span>
<span class="-3771221013488357479" onmouseenter="enter('-3771221013488357479');" onmouseout="out('-3771221013488357479');" style="">1753              // Divide the set of loaded items into those that we are binding synchronously, and                   </span>
<span class="5224432435633178726" onmouseenter="enter('5224432435633178726');" onmouseout="out('5224432435633178726');" style="">1754              // everything else that is to be bound normally (asynchronously).                                     </span>
<span class="-6685180061336045314" onmouseenter="enter('-6685180061336045314');" onmouseout="out('-6685180061336045314');" style="">1755              bindWorkspace(synchronousBindPage, false);                                                            </span>
<span class="6689685850222943783" onmouseenter="enter('6689685850222943783');" onmouseout="out('6689685850222943783');" style="">1756              // XXX: For now, continue posting the binding of AllApps as there are other issues that               </span>
<span class="-1574502332056641514" onmouseenter="enter('-1574502332056641514');" onmouseout="out('-1574502332056641514');" style="">1757              //      arise from that.                                                                              </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">1758              onlyBindAllApps();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1759          }                                                                                                         </span>
<span  style="">1760                                                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1761          public void run() {                                                                                       </span>
<span class="5752535899438246447" onmouseenter="enter('5752535899438246447');" onmouseout="out('5752535899438246447');" style="">1762              boolean isUpgrade = false;                                                                            </span>
<span  style="">1763                                                                                                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1764              synchronized (mLock) {                                                                                </span>
<span class="4738665752688002399" onmouseenter="enter('4738665752688002399');" onmouseout="out('4738665752688002399');" style="">1765                  mIsLoaderTaskRunning = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1766              }                                                                                                     </span>
<span class="-1737494436521525410" onmouseenter="enter('-1737494436521525410');" onmouseout="out('-1737494436521525410');" style="">1767              // Optimize for end-user experience: if the Launcher is up and // running with the                    </span>
<span class="892988660615454533" onmouseenter="enter('892988660615454533');" onmouseout="out('892988660615454533');" style="">1768              // All Apps interface in the foreground, load All Apps first. Otherwise, load the                     </span>
<span class="-1944482210197593446" onmouseenter="enter('-1944482210197593446');" onmouseout="out('-1944482210197593446');" style="">1769              // workspace first (default).                                                                         </span>
<span class="-8128861992085659189" onmouseenter="enter('-8128861992085659189');" onmouseout="out('-8128861992085659189');" style="">1770              keep_running: {                                                                                       </span>
<span class="2293067736949718284" onmouseenter="enter('2293067736949718284');" onmouseout="out('2293067736949718284');" style="">1771                  // Elevate priority when Home launches for the first time to avoid                                </span>
<span class="-1381926741216219064" onmouseenter="enter('-1381926741216219064');" onmouseout="out('-1381926741216219064');" style="">1772                  // starving at boot time. Staring at a blank home is not cool.                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1773                  synchronized (mLock) {                                                                            </span>
<span class="8946499537685848583" onmouseenter="enter('8946499537685848583');" onmouseout="out('8946499537685848583');" style="">1774                      if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to &quot; +                                 </span>
<span class="1787109731546912352" onmouseenter="enter('1787109731546912352');" onmouseout="out('1787109731546912352');" style="">1775                              (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUND&quot;));                                           </span>
<span class="-1912109441925598991" onmouseenter="enter('-1912109441925598991');" onmouseout="out('-1912109441925598991');" style="">1776                      android.os.Process.setThreadPriority(mIsLaunching                                             </span>
<span class="-5572949467661441178" onmouseenter="enter('-5572949467661441178');" onmouseout="out('-5572949467661441178');" style="">1777                              ? Process.THREAD_PRIORITY_DEFAULT : Process.THREAD_PRIORITY_BACKGROUND);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1778                  }                                                                                                 </span>
<span class="9220749004793568337" onmouseenter="enter('9220749004793568337');" onmouseout="out('9220749004793568337');" style="">1779                  if (DEBUG_LOADERS) Log.d(TAG, &quot;step 1: loading workspace&quot;);                                       </span>
<span class="8482653655407072483" onmouseenter="enter('8482653655407072483');" onmouseout="out('8482653655407072483');" style="">1780                  isUpgrade = loadAndBindWorkspace();                                                               </span>
<span  style="">1781                                                                                                                    </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1782                  if (mStopped) {                                                                                   </span>
<span class="-6818805659412975442" onmouseenter="enter('-6818805659412975442');" onmouseout="out('-6818805659412975442');" style="">1783                      break keep_running;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1784                  }                                                                                                 </span>
<span  style="">1785                                                                                                                    </span>
<span class="-5777092162251517407" onmouseenter="enter('-5777092162251517407');" onmouseout="out('-5777092162251517407');" style="">1786                  // Whew! Hard work done.  Slow us down, and wait until the UI thread has                          </span>
<span class="-4075896614387769686" onmouseenter="enter('-4075896614387769686');" onmouseout="out('-4075896614387769686');" style="">1787                  // settled down.                                                                                  </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1788                  synchronized (mLock) {                                                                            </span>
<span class="1926990202484285414" onmouseenter="enter('1926990202484285414');" onmouseout="out('1926990202484285414');" style="">1789                      if (mIsLaunching) {                                                                           </span>
<span class="-8046035155088057723" onmouseenter="enter('-8046035155088057723');" onmouseout="out('-8046035155088057723');" style="">1790                          if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to BACKGROUND&quot;);                   </span>
<span class="6194754511830950532" onmouseenter="enter('6194754511830950532');" onmouseout="out('6194754511830950532');" style="">1791                          android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1792                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1793                  }                                                                                                 </span>
<span class="2443484392604792624" onmouseenter="enter('2443484392604792624');" onmouseout="out('2443484392604792624');" style="">1794                  waitForIdle();                                                                                    </span>
<span  style="">1795                                                                                                                    </span>
<span class="1529750222663563109" onmouseenter="enter('1529750222663563109');" onmouseout="out('1529750222663563109');" style="">1796                  // second step                                                                                    </span>
<span class="4805812105190008803" onmouseenter="enter('4805812105190008803');" onmouseout="out('4805812105190008803');" style="">1797                  if (DEBUG_LOADERS) Log.d(TAG, &quot;step 2: loading all apps&quot;);                                        </span>
<span class="3758302759319518479" onmouseenter="enter('3758302759319518479');" onmouseout="out('3758302759319518479');" style="">1798                  loadAndBindAllApps();                                                                             </span>
<span  style="">1799                                                                                                                    </span>
<span class="4031538869478111" onmouseenter="enter('4031538869478111');" onmouseout="out('4031538869478111');" style="">1800                  // Restore the default thread priority after we are done loading items                            </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1801                  synchronized (mLock) {                                                                            </span>
<span class="6299511964324687923" onmouseenter="enter('6299511964324687923');" onmouseout="out('6299511964324687923');" style="">1802                      android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_DEFAULT);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1803                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1804              }                                                                                                     </span>
<span  style="">1805                                                                                                                    </span>
<span class="3508545587953199453" onmouseenter="enter('3508545587953199453');" onmouseout="out('3508545587953199453');" style="">1806              // Update the saved icons if necessary                                                                </span>
<span class="-4757805943857079956" onmouseenter="enter('-4757805943857079956');" onmouseout="out('-4757805943857079956');" style="">1807              if (DEBUG_LOADERS) Log.d(TAG, &quot;Comparing loaded icons to database icons&quot;);                            </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1808              synchronized (sBgLock) {                                                                              </span>
<span class="5900553346724410681" onmouseenter="enter('5900553346724410681');" onmouseout="out('5900553346724410681');" style="">1809                  for (Object key : sBgDbIconCache.keySet()) {                                                      </span>
<span class="404633043401473554" onmouseenter="enter('404633043401473554');" onmouseout="out('404633043401473554');" style="">1810                      updateSavedIcon(mContext, (ShortcutInfo) key, sBgDbIconCache.get(key));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1811                  }                                                                                                 </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1812                  sBgDbIconCache.clear();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1813              }                                                                                                     </span>
<span  style="">1814                                                                                                                    </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">1815              if (LauncherAppState.isDisableAllApps()) {                                                            </span>
<span class="6125270178763735331" onmouseenter="enter('6125270178763735331');" onmouseout="out('6125270178763735331');" style="">1816                  // Ensure that all the applications that are in the system are                                    </span>
<span class="305725628855266005" onmouseenter="enter('305725628855266005');" onmouseout="out('305725628855266005');" style="">1817                  // represented on the home screen.                                                                </span>
<span class="3562864863119627268" onmouseenter="enter('3562864863119627268');" onmouseout="out('3562864863119627268');" style="">1818                  if (!UPGRADE_USE_MORE_APPS_FOLDER || !isUpgrade) {                                                </span>
<span class="5095093339904195112" onmouseenter="enter('5095093339904195112');" onmouseout="out('5095093339904195112');" style="">1819                      verifyApplications();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1820                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1821              }                                                                                                     </span>
<span  style="">1822                                                                                                                    </span>
<span class="-745190257815883733" onmouseenter="enter('-745190257815883733');" onmouseout="out('-745190257815883733');" style="">1823              // Clear out this reference, otherwise we end up holding it until all of the                          </span>
<span class="4646172956484107396" onmouseenter="enter('4646172956484107396');" onmouseout="out('4646172956484107396');" style="">1824              // callback runnables are done.                                                                       </span>
<span class="-5116782011037529434" onmouseenter="enter('-5116782011037529434');" onmouseout="out('-5116782011037529434');" style="">1825              mContext = null;                                                                                      </span>
<span  style="">1826                                                                                                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1827              synchronized (mLock) {                                                                                </span>
<span class="-2953553521466488464" onmouseenter="enter('-2953553521466488464');" onmouseout="out('-2953553521466488464');" style="">1828                  // If we are still the last one to be scheduled, remove ourselves.                                </span>
<span class="-1560897046285527036" onmouseenter="enter('-1560897046285527036');" onmouseout="out('-1560897046285527036');" style="">1829                  if (mLoaderTask == this) {                                                                        </span>
<span class="-8540970856372433004" onmouseenter="enter('-8540970856372433004');" onmouseout="out('-8540970856372433004');" style="">1830                      mLoaderTask = null;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1831                  }                                                                                                 </span>
<span class="8472658350888958885" onmouseenter="enter('8472658350888958885');" onmouseout="out('8472658350888958885');" style="">1832                  mIsLoaderTaskRunning = false;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1833              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1834          }                                                                                                         </span>
<span  style="">1835                                                                                                                    </span>
<span class="200135487053889456" onmouseenter="enter('200135487053889456');" onmouseout="out('200135487053889456');" style="">1836          public void stopLocked() {                                                                                </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1837              synchronized (LoaderTask.this) {                                                                      </span>
<span class="8214677179915027824" onmouseenter="enter('8214677179915027824');" onmouseout="out('8214677179915027824');" style="">1838                  mStopped = true;                                                                                  </span>
<span class="3056713147428312392" onmouseenter="enter('3056713147428312392');" onmouseout="out('3056713147428312392');" style="">1839                  this.notify();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1840              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1841          }                                                                                                         </span>
<span  style="">1842                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1843          /**                                                                                                       </span>
<span class="8543020973836575883" onmouseenter="enter('8543020973836575883');" onmouseout="out('8543020973836575883');" style="">1844           * Gets the callbacks object.  If we&#x27;ve been stopped, or if the launcher object                           </span>
<span class="-5710779889390340322" onmouseenter="enter('-5710779889390340322');" onmouseout="out('-5710779889390340322');" style="">1845           * has somehow been garbage collected, return null instead.  Pass in the Callbacks                        </span>
<span class="1695163395735776366" onmouseenter="enter('1695163395735776366');" onmouseout="out('1695163395735776366');" style="">1846           * object that was around when the deferred message was scheduled, and if there&#x27;s                         </span>
<span class="7856411153887025232" onmouseenter="enter('7856411153887025232');" onmouseout="out('7856411153887025232');" style="">1847           * a new Callbacks object around then also return null.  This will save us from                           </span>
<span class="2242983124447893975" onmouseenter="enter('2242983124447893975');" onmouseout="out('2242983124447893975');" style="">1848           * calling onto it with data that will be ignored.                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1849           */                                                                                                       </span>
<span class="-2719659093140206912" onmouseenter="enter('-2719659093140206912');" onmouseout="out('-2719659093140206912');" style="">1850          Callbacks tryGetCallbacks(Callbacks oldCallbacks) {                                                       </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1851              synchronized (mLock) {                                                                                </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1852                  if (mStopped) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1853                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1854                  }                                                                                                 </span>
<span  style="">1855                                                                                                                    </span>
<span class="-1148437149844317216" onmouseenter="enter('-1148437149844317216');" onmouseout="out('-1148437149844317216');" style="">1856                  if (mCallbacks == null) {                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1857                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1858                  }                                                                                                 </span>
<span  style="">1859                                                                                                                    </span>
<span class="4487336468213395696" onmouseenter="enter('4487336468213395696');" onmouseout="out('4487336468213395696');" style="">1860                  final Callbacks callbacks = mCallbacks.get();                                                     </span>
<span class="-1088473782403214817" onmouseenter="enter('-1088473782403214817');" onmouseout="out('-1088473782403214817');" style="">1861                  if (callbacks != oldCallbacks) {                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1862                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1863                  }                                                                                                 </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">1864                  if (callbacks == null) {                                                                          </span>
<span class="-94531209925935523" onmouseenter="enter('-94531209925935523');" onmouseout="out('-94531209925935523');" style="">1865                      Log.w(TAG, &quot;no mCallbacks&quot;);                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1866                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1867                  }                                                                                                 </span>
<span  style="">1868                                                                                                                    </span>
<span class="7316466478630645098" onmouseenter="enter('7316466478630645098');" onmouseout="out('7316466478630645098');" style="">1869                  return callbacks;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1870              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1871          }                                                                                                         </span>
<span  style="">1872                                                                                                                    </span>
<span class="-732845747997402687" onmouseenter="enter('-732845747997402687');" onmouseout="out('-732845747997402687');" style="">1873          private void verifyApplications() {                                                                       </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">1874              final Context context = mApp.getContext();                                                            </span>
<span  style="">1875                                                                                                                    </span>
<span class="-895975897487385508" onmouseenter="enter('-895975897487385508');" onmouseout="out('-895975897487385508');" style="">1876              // Cross reference all the applications in our apps list with items in the workspace                  </span>
<span class="-10165714367555844" onmouseenter="enter('-10165714367555844');" onmouseout="out('-10165714367555844');" style="">1877              ArrayList&lt;ItemInfo&gt; tmpInfos;                                                                         </span>
<span class="-1498611641211142735" onmouseenter="enter('-1498611641211142735');" onmouseout="out('-1498611641211142735');" style="">1878              ArrayList&lt;ItemInfo&gt; added = new ArrayList&lt;ItemInfo&gt;();                                                </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1879              synchronized (sBgLock) {                                                                              </span>
<span class="-8503045385813305184" onmouseenter="enter('-8503045385813305184');" onmouseout="out('-8503045385813305184');" style="">1880                  for (AppInfo app : mBgAllAppsList.data) {                                                         </span>
<span class="8719756079786944918" onmouseenter="enter('8719756079786944918');" onmouseout="out('8719756079786944918');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1881 -                    tmpInfos = getItemInfoForComponentName(app.componentName);                                    </span>
<span class="3468492706943039059" onmouseenter="enter('3468492706943039059');" onmouseout="out('3468492706943039059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1882 +                    tmpInfos = getItemInfoForComponentName(app.componentName, app.user);                          </span>
<span class="2520781471180992241" onmouseenter="enter('2520781471180992241');" onmouseout="out('2520781471180992241');" style="">1883                      if (tmpInfos.isEmpty()) {                                                                     </span>
<span class="-8553694446545507920" onmouseenter="enter('-8553694446545507920');" onmouseout="out('-8553694446545507920');" style="">1884                          // We are missing an application icon, so add this to the workspace                       </span>
<span class="-4039639638749761552" onmouseenter="enter('-4039639638749761552');" onmouseout="out('-4039639638749761552');" style="">1885                          added.add(app);                                                                           </span>
<span class="-6087209586339664607" onmouseenter="enter('-6087209586339664607');" onmouseout="out('-6087209586339664607');" style="">1886                          // This is a rare event, so lets log it                                                   </span>
<span class="-8409193735080295855" onmouseenter="enter('-8409193735080295855');" onmouseout="out('-8409193735080295855');" style="">1887                          Log.e(TAG, &quot;Missing Application on load: &quot; + app);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1888                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1889                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1890              }                                                                                                     </span>
<span class="-3228275885243238792" onmouseenter="enter('-3228275885243238792');" onmouseout="out('-3228275885243238792');" style="">1891              if (!added.isEmpty()) {                                                                               </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1892 -                Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                      </span>
<span class="-7750968314744672785" onmouseenter="enter('-7750968314744672785');" onmouseout="out('-7750968314744672785');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1893 -                addAndBindAddedApps(context, added, cb, new ArrayList&lt;AppInfo&gt;());                                </span>
<span class="-2532202186705808951" onmouseenter="enter('-2532202186705808951');" onmouseout="out('-2532202186705808951');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1894 +                addAndBindAddedWorkspaceApps(context, added);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1895              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1896          }                                                                                                         </span>
<span  style="">1897                                                                                                                    </span>
<span class="1799876722918383990" onmouseenter="enter('1799876722918383990');" onmouseout="out('1799876722918383990');" style="">1898          // check &amp; update map of what&#x27;s occupied; used to discard overlapping/invalid items                       </span>
<span class="1369641317894879083" onmouseenter="enter('1369641317894879083');" onmouseout="out('1369641317894879083');" style="">1899          private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item,                   </span>
<span class="-1114457745240921120" onmouseenter="enter('-1114457745240921120');" onmouseout="out('-1114457745240921120');" style="">1900                                             AtomicBoolean deleteOnInvalidPlacement) {                              </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1901              LauncherAppState app = LauncherAppState.getInstance();                                                </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1902              DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                         </span>
<span class="2610967815704817337" onmouseenter="enter('2610967815704817337');" onmouseout="out('2610967815704817337');" style="">1903              final int countX = (int) grid.numColumns;                                                             </span>
<span class="-4666114634626787340" onmouseenter="enter('-4666114634626787340');" onmouseout="out('-4666114634626787340');" style="">1904              final int countY = (int) grid.numRows;                                                                </span>
<span  style="">1905                                                                                                                    </span>
<span class="6034161250987228772" onmouseenter="enter('6034161250987228772');" onmouseout="out('6034161250987228772');" style="">1906              long containerIndex = item.screenId;                                                                  </span>
<span class="-7373493273183889597" onmouseenter="enter('-7373493273183889597');" onmouseout="out('-7373493273183889597');" style="">1907              if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                 </span>
<span class="2673995963777381740" onmouseenter="enter('2673995963777381740');" onmouseout="out('2673995963777381740');" style="">1908                  // Return early if we detect that an item is under the hotseat button                             </span>
<span class="8439501161968406722" onmouseenter="enter('8439501161968406722');" onmouseout="out('8439501161968406722');" style="">1909                  if (mCallbacks == null ||                                                                         </span>
<span class="2765367117287235525" onmouseenter="enter('2765367117287235525');" onmouseout="out('2765367117287235525');" style="">1910                          mCallbacks.get().isAllAppsButtonRank((int) item.screenId)) {                              </span>
<span class="-5585792196891628830" onmouseenter="enter('-5585792196891628830');" onmouseout="out('-5585792196891628830');" style="">1911                      deleteOnInvalidPlacement.set(true);                                                           </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1912                      Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                                      </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1913                              + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                         </span>
<span class="-6945266911057923165" onmouseenter="enter('-6945266911057923165');" onmouseout="out('-6945266911057923165');" style="">1914                              + item.cellY + &quot;) occupied by all apps&quot;);                                             </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1915                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1916                  }                                                                                                 </span>
<span  style="">1917                                                                                                                    </span>
<span class="1283283798458548935" onmouseenter="enter('1283283798458548935');" onmouseout="out('1283283798458548935');" style="">1918                  final ItemInfo[][] hotseatItems =                                                                 </span>
<span class="1949963606333422560" onmouseenter="enter('1949963606333422560');" onmouseout="out('1949963606333422560');" style="">1919                          occupied.get((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT);                        </span>
<span  style="">1920                                                                                                                    </span>
<span class="4306415300339150674" onmouseenter="enter('4306415300339150674');" onmouseout="out('4306415300339150674');" style="">1921                  if (item.screenId &gt;= grid.numHotseatIcons) {                                                      </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1922                      Log.e(TAG, &quot;Error loading shortcut &quot; + item                                                   </span>
<span class="5751503886607422325" onmouseenter="enter('5751503886607422325');" onmouseout="out('5751503886607422325');" style="">1923                              + &quot; into hotseat position &quot; + item.screenId                                           </span>
<span class="8586084608145250937" onmouseenter="enter('8586084608145250937');" onmouseout="out('8586084608145250937');" style="">1924                              + &quot;, position out of bounds: (0 to &quot; + (grid.numHotseatIcons - 1)                     </span>
<span class="4670108460576455524" onmouseenter="enter('4670108460576455524');" onmouseout="out('4670108460576455524');" style="">1925                              + &quot;)&quot;);                                                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1926                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1927                  }                                                                                                 </span>
<span  style="">1928                                                                                                                    </span>
<span class="-96711597696201103" onmouseenter="enter('-96711597696201103');" onmouseout="out('-96711597696201103');" style="">1929                  if (hotseatItems != null) {                                                                       </span>
<span class="-5719492878362044891" onmouseenter="enter('-5719492878362044891');" onmouseout="out('-5719492878362044891');" style="">1930                      if (hotseatItems[(int) item.screenId][0] != null) {                                           </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1931                          Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                                  </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1932                                  + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                     </span>
<span class="-5608765342526697238" onmouseenter="enter('-5608765342526697238');" onmouseout="out('-5608765342526697238');" style="">1933                                  + item.cellY + &quot;) occupied by &quot;                                                   </span>
<span class="-9216450188742256868" onmouseenter="enter('-9216450188742256868');" onmouseout="out('-9216450188742256868');" style="">1934                                  + occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)                      </span>
<span class="8078550196904492215" onmouseenter="enter('8078550196904492215');" onmouseout="out('8078550196904492215');" style="">1935                                  [(int) item.screenId][0]);                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1936                              return false;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1937                      } else {                                                                                      </span>
<span class="774944626646586019" onmouseenter="enter('774944626646586019');" onmouseout="out('774944626646586019');" style="">1938                          hotseatItems[(int) item.screenId][0] = item;                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1939                          return true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1940                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1941                  } else {                                                                                          </span>
<span class="7358314474516221203" onmouseenter="enter('7358314474516221203');" onmouseout="out('7358314474516221203');" style="">1942                      final ItemInfo[][] items = new ItemInfo[(int) grid.numHotseatIcons][1];                       </span>
<span class="-9070162012537345427" onmouseenter="enter('-9070162012537345427');" onmouseout="out('-9070162012537345427');" style="">1943                      items[(int) item.screenId][0] = item;                                                         </span>
<span class="-8158366679753027651" onmouseenter="enter('-8158366679753027651');" onmouseout="out('-8158366679753027651');" style="">1944                      occupied.put((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT, items);                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1945                      return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1946                  }                                                                                                 </span>
<span class="-303831338253138618" onmouseenter="enter('-303831338253138618');" onmouseout="out('-303831338253138618');" style="">1947              } else if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                          </span>
<span class="2023083187637338837" onmouseenter="enter('2023083187637338837');" onmouseout="out('2023083187637338837');" style="">1948                  // Skip further checking if it is not the hotseat or workspace container                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1949                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1950              }                                                                                                     </span>
<span  style="">1951                                                                                                                    </span>
<span class="4900594953050523912" onmouseenter="enter('4900594953050523912');" onmouseout="out('4900594953050523912');" style="">1952              if (!occupied.containsKey(item.screenId)) {                                                           </span>
<span class="4145930087010840378" onmouseenter="enter('4145930087010840378');" onmouseout="out('4145930087010840378');" style="">1953                  ItemInfo[][] items = new ItemInfo[countX + 1][countY + 1];                                        </span>
<span class="1227421706021504577" onmouseenter="enter('1227421706021504577');" onmouseout="out('1227421706021504577');" style="">1954                  occupied.put(item.screenId, items);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1955              }                                                                                                     </span>
<span  style="">1956                                                                                                                    </span>
<span class="1896300602190974138" onmouseenter="enter('1896300602190974138');" onmouseout="out('1896300602190974138');" style="">1957              final ItemInfo[][] screens = occupied.get(item.screenId);                                             </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">1958              if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                                 </span>
<span class="-5368423457014206987" onmouseenter="enter('-5368423457014206987');" onmouseout="out('-5368423457014206987');" style="">1959                      item.cellX &lt; 0 || item.cellY &lt; 0 ||                                                           </span>
<span class="-4742334469567284144" onmouseenter="enter('-4742334469567284144');" onmouseout="out('-4742334469567284144');" style="">1960                      item.cellX + item.spanX &gt; countX || item.cellY + item.spanY &gt; countY) {                       </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1961                  Log.e(TAG, &quot;Error loading shortcut &quot; + item                                                       </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1962                          + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                             </span>
<span class="6594976635866090975" onmouseenter="enter('6594976635866090975');" onmouseout="out('6594976635866090975');" style="">1963                          + item.cellX + &quot;,&quot; + item.cellY                                                           </span>
<span class="7810872796641797088" onmouseenter="enter('7810872796641797088');" onmouseout="out('7810872796641797088');" style="">1964                          + &quot;) out of screen bounds ( &quot; + countX + &quot;x&quot; + countY + &quot;)&quot;);                             </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1965                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1966              }                                                                                                     </span>
<span  style="">1967                                                                                                                    </span>
<span class="-5156128896960485993" onmouseenter="enter('-5156128896960485993');" onmouseout="out('-5156128896960485993');" style="">1968              // Check if any workspace icons overlap with each other                                               </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1969              for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                          </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1970                  for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                                      </span>
<span class="-6569355555223387047" onmouseenter="enter('-6569355555223387047');" onmouseout="out('-6569355555223387047');" style="">1971                      if (screens[x][y] != null) {                                                                  </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1972                          Log.e(TAG, &quot;Error loading shortcut &quot; + item                                               </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1973                              + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                         </span>
<span class="6817243246217428495" onmouseenter="enter('6817243246217428495');" onmouseout="out('6817243246217428495');" style="">1974                              + x + &quot;,&quot; + y                                                                         </span>
<span class="5682441617128381013" onmouseenter="enter('5682441617128381013');" onmouseout="out('5682441617128381013');" style="">1975                              + &quot;) occupied by &quot;                                                                    </span>
<span class="-1033476021967432581" onmouseenter="enter('-1033476021967432581');" onmouseout="out('-1033476021967432581');" style="">1976                              + screens[x][y]);                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1977                          return false;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1978                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1979                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1980              }                                                                                                     </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1981              for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                          </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1982                  for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                                      </span>
<span class="4088526838574697064" onmouseenter="enter('4088526838574697064');" onmouseout="out('4088526838574697064');" style="">1983                      screens[x][y] = item;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1984                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1985              }                                                                                                     </span>
<span  style="">1986                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1987              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1988          }                                                                                                         </span>
<span  style="">1989                                                                                                                    </span>
<span class="-7185136003210132674" onmouseenter="enter('-7185136003210132674');" onmouseout="out('-7185136003210132674');" style="">1990          /** Clears all the sBg data structures */                                                                 </span>
<span class="1801132344752176061" onmouseenter="enter('1801132344752176061');" onmouseout="out('1801132344752176061');" style="">1991          private void clearSBgDataStructures() {                                                                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1992              synchronized (sBgLock) {                                                                              </span>
<span class="-7129433888089157992" onmouseenter="enter('-7129433888089157992');" onmouseout="out('-7129433888089157992');" style="">1993                  sBgWorkspaceItems.clear();                                                                        </span>
<span class="5052861278193385910" onmouseenter="enter('5052861278193385910');" onmouseout="out('5052861278193385910');" style="">1994                  sBgAppWidgets.clear();                                                                            </span>
<span class="3133219754838100126" onmouseenter="enter('3133219754838100126');" onmouseout="out('3133219754838100126');" style="">1995                  sBgFolders.clear();                                                                               </span>
<span class="-8505695193908377238" onmouseenter="enter('-8505695193908377238');" onmouseout="out('-8505695193908377238');" style="">1996                  sBgItemsIdMap.clear();                                                                            </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1997                  sBgDbIconCache.clear();                                                                           </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1998                  sBgWorkspaceScreens.clear();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1999              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2000          }                                                                                                         </span>
<span  style="">2001                                                                                                                    </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">2002          /** Returns whether this is an upgrade path */                                                            </span>
<span class="-134197683999376379" onmouseenter="enter('-134197683999376379');" onmouseout="out('-134197683999376379');" style="">2003          private boolean loadWorkspace() {                                                                         </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2004              // Log to disk                                                                                        </span>
<span class="-1716174542198683127" onmouseenter="enter('-1716174542198683127');" onmouseout="out('-1716174542198683127');" style="">2005              Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspace()&quot;, true);                                         </span>
<span  style="">2006                                                                                                                    </span>
<span class="-1293377954506719064" onmouseenter="enter('-1293377954506719064');" onmouseout="out('-1293377954506719064');" style="">2007              final long t = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                        </span>
<span  style="">2008                                                                                                                    </span>
<span class="-7540672363138308565" onmouseenter="enter('-7540672363138308565');" onmouseout="out('-7540672363138308565');" style="">2009              final Context context = mContext;                                                                     </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">2010              final ContentResolver contentResolver = context.getContentResolver();                                 </span>
<span class="-2531056455834918617" onmouseenter="enter('-2531056455834918617');" onmouseout="out('-2531056455834918617');" style="">2011              final PackageManager manager = context.getPackageManager();                                           </span>
<span class="9164904653123292763" onmouseenter="enter('9164904653123292763');" onmouseout="out('9164904653123292763');" style="">2012              final AppWidgetManager widgets = AppWidgetManager.getInstance(context);                               </span>
<span class="-100432956626051671" onmouseenter="enter('-100432956626051671');" onmouseout="out('-100432956626051671');" style="">2013              final boolean isSafeMode = manager.isSafeMode();                                                      </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2014 +            final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                      </span>
<span class="-1126483394746043247" onmouseenter="enter('-1126483394746043247');" onmouseout="out('-1126483394746043247');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2015 +            final boolean isSdCardReady = context.registerReceiver(null,                                          </span>
<span class="235951794025782625" onmouseenter="enter('235951794025782625');" onmouseout="out('235951794025782625');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2016 +                    new IntentFilter(StartupReceiver.SYSTEM_READY)) != null;                                      </span>
<span  style="">2017                                                                                                                    </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">2018              LauncherAppState app = LauncherAppState.getInstance();                                                </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">2019              DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                         </span>
<span class="-1268645472287944818" onmouseenter="enter('-1268645472287944818');" onmouseout="out('-1268645472287944818');" style="">2020              int countX = (int) grid.numColumns;                                                                   </span>
<span class="5825733578535079508" onmouseenter="enter('5825733578535079508');" onmouseout="out('5825733578535079508');" style="">2021              int countY = (int) grid.numRows;                                                                      </span>
<span  style="">2022                                                                                                                    </span>
<span class="4685154999280536885" onmouseenter="enter('4685154999280536885');" onmouseout="out('4685154999280536885');" style="">2023              if ((mFlags &amp; LOADER_FLAG_CLEAR_WORKSPACE) != 0) {                                                    </span>
<span class="1874866184467615023" onmouseenter="enter('1874866184467615023');" onmouseout="out('1874866184467615023');" style="">2024                  Launcher.addDumpLog(TAG, &quot;loadWorkspace: resetting launcher database&quot;, true);                     </span>
<span class="7130003991883838563" onmouseenter="enter('7130003991883838563');" onmouseout="out('7130003991883838563');" style="">2025                  LauncherAppState.getLauncherProvider().deleteDatabase();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2026              }                                                                                                     </span>
<span  style="">2027                                                                                                                    </span>
<span class="1786245758308608184" onmouseenter="enter('1786245758308608184');" onmouseout="out('1786245758308608184');" style="">2028              if ((mFlags &amp; LOADER_FLAG_MIGRATE_SHORTCUTS) != 0) {                                                  </span>
<span class="2622187273755861990" onmouseenter="enter('2622187273755861990');" onmouseout="out('2622187273755861990');" style="">2029                  // append the user&#x27;s Launcher2 shortcuts                                                          </span>
<span class="7991450201866933364" onmouseenter="enter('7991450201866933364');" onmouseout="out('7991450201866933364');" style="">2030                  Launcher.addDumpLog(TAG, &quot;loadWorkspace: migrating from launcher2&quot;, true);                        </span>
<span class="-4928149528895358870" onmouseenter="enter('-4928149528895358870');" onmouseout="out('-4928149528895358870');" style="">2031                  LauncherAppState.getLauncherProvider().migrateLauncher2Shortcuts();                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2032              } else {                                                                                              </span>
<span class="-6772917437561183819" onmouseenter="enter('-6772917437561183819');" onmouseout="out('-6772917437561183819');" style="">2033                  // Make sure the default workspace is loaded                                                      </span>
<span class="3161347234478650527" onmouseenter="enter('3161347234478650527');" onmouseout="out('3161347234478650527');" style="">2034                  Launcher.addDumpLog(TAG, &quot;loadWorkspace: loading default favorites&quot;, false);                      </span>
<span class="8096870978202898311" onmouseenter="enter('8096870978202898311');" onmouseout="out('8096870978202898311');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2035 -                LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary(0);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2036 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2037 -                                                                                                                  </span>
<span class="-8222313360488017709" onmouseenter="enter('-8222313360488017709');" onmouseout="out('-8222313360488017709');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2038 -            // Check if we need to do any upgrade-path logic                                                      </span>
<span class="-995379543715394793" onmouseenter="enter('-995379543715394793');" onmouseout="out('-995379543715394793');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2039 -            // (Includes having just imported default favorites)                                                  </span>
<span class="-2313666044770114963" onmouseenter="enter('-2313666044770114963');" onmouseout="out('-2313666044770114963');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2040 -            boolean loadedOldDb = LauncherAppState.getLauncherProvider().justLoadedOldDb();                       </span>
<span class="4180233289947251537" onmouseenter="enter('4180233289947251537');" onmouseout="out('4180233289947251537');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2041 +                LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary();                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2042 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2043 +                                                                                                                  </span>
<span class="6918238907049954147" onmouseenter="enter('6918238907049954147');" onmouseout="out('6918238907049954147');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2044 +            // This code path is for our old migration code and should no longer be exercised                     </span>
<span class="-6111060399811000023" onmouseenter="enter('-6111060399811000023');" onmouseout="out('-6111060399811000023');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2045 +            boolean loadedOldDb = false;                                                                          </span>
<span  style="">2046                                                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2047              // Log to disk                                                                                        </span>
<span class="4915608034810943289" onmouseenter="enter('4915608034810943289');" onmouseout="out('4915608034810943289');" style="">2048              Launcher.addDumpLog(TAG, &quot;11683562 -   loadedOldDb: &quot; + loadedOldDb, true);                           </span>
<span  style="">2049                                                                                                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2050              synchronized (sBgLock) {                                                                              </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2051                  clearSBgDataStructures();                                                                         </span>
<span class="8252648371202855385" onmouseenter="enter('8252648371202855385');" onmouseout="out('8252648371202855385');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2052 +                final HashSet&lt;String&gt; installingPkgs = PackageInstallerCompat                                     </span>
<span class="-5267108265550912858" onmouseenter="enter('-5267108265550912858');" onmouseout="out('-5267108265550912858');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2053 +                        .getInstance(mContext).updateAndGetActiveSessionCache();                                  </span>
<span  style="">2054                                                                                                                    </span>
<span class="4830013596372552761" onmouseenter="enter('4830013596372552761');" onmouseout="out('4830013596372552761');" style="">2055                  final ArrayList&lt;Long&gt; itemsToRemove = new ArrayList&lt;Long&gt;();                                      </span>
<span class="-771425693233218078" onmouseenter="enter('-771425693233218078');" onmouseout="out('-771425693233218078');" style="">2056                  final ArrayList&lt;Long&gt; restoredRows = new ArrayList&lt;Long&gt;();                                       </span>
<span class="1337367669825309510" onmouseenter="enter('1337367669825309510');" onmouseout="out('1337367669825309510');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2057 -                final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI;                                    </span>
<span class="2252334430881119805" onmouseenter="enter('2252334430881119805');" onmouseout="out('2252334430881119805');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2058 +                final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION;                    </span>
<span class="6883183902805060832" onmouseenter="enter('6883183902805060832');" onmouseout="out('6883183902805060832');" style="">2059                  if (DEBUG_LOADERS) Log.d(TAG, &quot;loading model from &quot; + contentUri);                                </span>
<span class="4124323585340312806" onmouseenter="enter('4124323585340312806');" onmouseout="out('4124323585340312806');" style="">2060                  final Cursor c = contentResolver.query(contentUri, null, null, null, null);                       </span>
<span  style="">2061                                                                                                                    </span>
<span class="-6846195559440228008" onmouseenter="enter('-6846195559440228008');" onmouseout="out('-6846195559440228008');" style="">2062                  // +1 for the hotseat (it can be larger than the workspace)                                       </span>
<span class="-6570434370371395868" onmouseenter="enter('-6570434370371395868');" onmouseout="out('-6570434370371395868');" style="">2063                  // Load workspace in reverse order to ensure that latest items are loaded first (and              </span>
<span class="-2496742724026288329" onmouseenter="enter('-2496742724026288329');" onmouseout="out('-2496742724026288329');" style="">2064                  // before any earlier duplicates)                                                                 </span>
<span class="-575539041300461201" onmouseenter="enter('-575539041300461201');" onmouseout="out('-575539041300461201');" style="">2065                  final HashMap&lt;Long, ItemInfo[][]&gt; occupied = new HashMap&lt;Long, ItemInfo[][]&gt;();                   </span>
<span  style="">2066                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2067                  try {                                                                                             </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">2068                      final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);                  </span>
<span class="498695732843703978" onmouseenter="enter('498695732843703978');" onmouseout="out('498695732843703978');" style="">2069                      final int intentIndex = c.getColumnIndexOrThrow                                               </span>
<span class="-2710863683168773760" onmouseenter="enter('-2710863683168773760');" onmouseout="out('-2710863683168773760');" style="">2070                              (LauncherSettings.Favorites.INTENT);                                                  </span>
<span class="3135911520873448784" onmouseenter="enter('3135911520873448784');" onmouseout="out('3135911520873448784');" style="">2071                      final int titleIndex = c.getColumnIndexOrThrow                                                </span>
<span class="-7080768452290664563" onmouseenter="enter('-7080768452290664563');" onmouseout="out('-7080768452290664563');" style="">2072                              (LauncherSettings.Favorites.TITLE);                                                   </span>
<span class="-4350901823494792660" onmouseenter="enter('-4350901823494792660');" onmouseout="out('-4350901823494792660');" style="">2073                      final int iconTypeIndex = c.getColumnIndexOrThrow(                                            </span>
<span class="3108347623629035166" onmouseenter="enter('3108347623629035166');" onmouseout="out('3108347623629035166');" style="">2074                              LauncherSettings.Favorites.ICON_TYPE);                                                </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">2075                      final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);               </span>
<span class="-3909234361304575452" onmouseenter="enter('-3909234361304575452');" onmouseout="out('-3909234361304575452');" style="">2076                      final int iconPackageIndex = c.getColumnIndexOrThrow(                                         </span>
<span class="-6787190495105525864" onmouseenter="enter('-6787190495105525864');" onmouseout="out('-6787190495105525864');" style="">2077                              LauncherSettings.Favorites.ICON_PACKAGE);                                             </span>
<span class="7790246664646081463" onmouseenter="enter('7790246664646081463');" onmouseout="out('7790246664646081463');" style="">2078                      final int iconResourceIndex = c.getColumnIndexOrThrow(                                        </span>
<span class="-1781116612765105159" onmouseenter="enter('-1781116612765105159');" onmouseout="out('-1781116612765105159');" style="">2079                              LauncherSettings.Favorites.ICON_RESOURCE);                                            </span>
<span class="3335971636920715852" onmouseenter="enter('3335971636920715852');" onmouseout="out('3335971636920715852');" style="">2080                      final int containerIndex = c.getColumnIndexOrThrow(                                           </span>
<span class="6570903028117113418" onmouseenter="enter('6570903028117113418');" onmouseout="out('6570903028117113418');" style="">2081                              LauncherSettings.Favorites.CONTAINER);                                                </span>
<span class="-8309152441179821869" onmouseenter="enter('-8309152441179821869');" onmouseout="out('-8309152441179821869');" style="">2082                      final int itemTypeIndex = c.getColumnIndexOrThrow(                                            </span>
<span class="7255885825914282267" onmouseenter="enter('7255885825914282267');" onmouseout="out('7255885825914282267');" style="">2083                              LauncherSettings.Favorites.ITEM_TYPE);                                                </span>
<span class="-9034335384452522965" onmouseenter="enter('-9034335384452522965');" onmouseout="out('-9034335384452522965');" style="">2084                      final int appWidgetIdIndex = c.getColumnIndexOrThrow(                                         </span>
<span class="6807201781176448908" onmouseenter="enter('6807201781176448908');" onmouseout="out('6807201781176448908');" style="">2085                              LauncherSettings.Favorites.APPWIDGET_ID);                                             </span>
<span class="-6125671603078297888" onmouseenter="enter('-6125671603078297888');" onmouseout="out('-6125671603078297888');" style="">2086                      final int appWidgetProviderIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="4426033877353236522" onmouseenter="enter('4426033877353236522');" onmouseout="out('4426033877353236522');" style="">2087                              LauncherSettings.Favorites.APPWIDGET_PROVIDER);                                       </span>
<span class="-3079236723582024955" onmouseenter="enter('-3079236723582024955');" onmouseout="out('-3079236723582024955');" style="">2088                      final int screenIndex = c.getColumnIndexOrThrow(                                              </span>
<span class="-6667712815858132414" onmouseenter="enter('-6667712815858132414');" onmouseout="out('-6667712815858132414');" style="">2089                              LauncherSettings.Favorites.SCREEN);                                                   </span>
<span class="-6867547874094352828" onmouseenter="enter('-6867547874094352828');" onmouseout="out('-6867547874094352828');" style="">2090                      final int cellXIndex = c.getColumnIndexOrThrow                                                </span>
<span class="5262774206366152748" onmouseenter="enter('5262774206366152748');" onmouseout="out('5262774206366152748');" style="">2091                              (LauncherSettings.Favorites.CELLX);                                                   </span>
<span class="8831781951312982826" onmouseenter="enter('8831781951312982826');" onmouseout="out('8831781951312982826');" style="">2092                      final int cellYIndex = c.getColumnIndexOrThrow                                                </span>
<span class="-5037082342925021952" onmouseenter="enter('-5037082342925021952');" onmouseout="out('-5037082342925021952');" style="">2093                              (LauncherSettings.Favorites.CELLY);                                                   </span>
<span class="4727532435646923125" onmouseenter="enter('4727532435646923125');" onmouseout="out('4727532435646923125');" style="">2094                      final int spanXIndex = c.getColumnIndexOrThrow                                                </span>
<span class="-4661771410814353054" onmouseenter="enter('-4661771410814353054');" onmouseout="out('-4661771410814353054');" style="">2095                              (LauncherSettings.Favorites.SPANX);                                                   </span>
<span class="-2910068933310438864" onmouseenter="enter('-2910068933310438864');" onmouseout="out('-2910068933310438864');" style="">2096                      final int spanYIndex = c.getColumnIndexOrThrow(                                               </span>
<span class="99270330838913893" onmouseenter="enter('99270330838913893');" onmouseout="out('99270330838913893');" style="">2097                              LauncherSettings.Favorites.SPANY);                                                    </span>
<span class="4436227568732015168" onmouseenter="enter('4436227568732015168');" onmouseout="out('4436227568732015168');" style="">2098                      final int restoredIndex = c.getColumnIndexOrThrow(                                            </span>
<span class="6353272533239034373" onmouseenter="enter('6353272533239034373');" onmouseout="out('6353272533239034373');" style="">2099                              LauncherSettings.Favorites.RESTORED);                                                 </span>
<span class="3162637821619353517" onmouseenter="enter('3162637821619353517');" onmouseout="out('3162637821619353517');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2100 +                    final int profileIdIndex = c.getColumnIndexOrThrow(                                           </span>
<span class="-1125432391574533143" onmouseenter="enter('-1125432391574533143');" onmouseout="out('-1125432391574533143');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2101 +                            LauncherSettings.Favorites.PROFILE_ID);                                               </span>
<span class="4456964937873623262" onmouseenter="enter('4456964937873623262');" onmouseout="out('4456964937873623262');" style="">2102                      //final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);               </span>
<span class="2905983584052764586" onmouseenter="enter('2905983584052764586');" onmouseout="out('2905983584052764586');" style="">2103                      //final int displayModeIndex = c.getColumnIndexOrThrow(                                       </span>
<span class="-8556687182597342656" onmouseenter="enter('-8556687182597342656');" onmouseout="out('-8556687182597342656');" style="">2104                      //        LauncherSettings.Favorites.DISPLAY_MODE);                                           </span>
<span  style="">2105                                                                                                                    </span>
<span class="-6687913296565100881" onmouseenter="enter('-6687913296565100881');" onmouseout="out('-6687913296565100881');" style="">2106                      ShortcutInfo info;                                                                            </span>
<span class="-4294155297126257121" onmouseenter="enter('-4294155297126257121');" onmouseout="out('-4294155297126257121');" style="">2107                      String intentDescription;                                                                     </span>
<span class="1875374791140575019" onmouseenter="enter('1875374791140575019');" onmouseout="out('1875374791140575019');" style="">2108                      LauncherAppWidgetInfo appWidgetInfo;                                                          </span>
<span class="-7299509265635558160" onmouseenter="enter('-7299509265635558160');" onmouseout="out('-7299509265635558160');" style="">2109                      int container;                                                                                </span>
<span class="3268793718289878117" onmouseenter="enter('3268793718289878117');" onmouseout="out('3268793718289878117');" style="">2110                      long id;                                                                                      </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">2111                      Intent intent;                                                                                </span>
<span class="8928715163618104503" onmouseenter="enter('8928715163618104503');" onmouseout="out('8928715163618104503');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2112 +                    UserHandleCompat user;                                                                        </span>
<span  style="">2113                                                                                                                    </span>
<span class="1538645125823697533" onmouseenter="enter('1538645125823697533');" onmouseout="out('1538645125823697533');" style="">2114                      while (!mStopped &amp;&amp; c.moveToNext()) {                                                         </span>
<span class="-3056870665611820276" onmouseenter="enter('-3056870665611820276');" onmouseout="out('-3056870665611820276');" style="">2115                          AtomicBoolean deleteOnInvalidPlacement = new AtomicBoolean(false);                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2116                          try {                                                                                     </span>
<span class="-4443967809239824632" onmouseenter="enter('-4443967809239824632');" onmouseout="out('-4443967809239824632');" style="">2117                              int itemType = c.getInt(itemTypeIndex);                                               </span>
<span class="7426878920983746504" onmouseenter="enter('7426878920983746504');" onmouseout="out('7426878920983746504');" style="">2118                              boolean restored = 0 != c.getInt(restoredIndex);                                      </span>
<span class="4933910026947534491" onmouseenter="enter('4933910026947534491');" onmouseout="out('4933910026947534491');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2119 +                            boolean allowMissingTarget = false;                                                   </span>
<span  style="">2120                                                                                                                    </span>
<span class="-5665081285487591411" onmouseenter="enter('-5665081285487591411');" onmouseout="out('-5665081285487591411');" style="">2121                              switch (itemType) {                                                                   </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">2122                              case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">2123                              case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                   </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2124                                  id = c.getLong(idIndex);                                                          </span>
<span class="8199742400390876563" onmouseenter="enter('8199742400390876563');" onmouseout="out('8199742400390876563');" style="">2125                                  intentDescription = c.getString(intentIndex);                                     </span>
<span class="3986182809570531937" onmouseenter="enter('3986182809570531937');" onmouseout="out('3986182809570531937');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2126 +                                long serialNumber = c.getInt(profileIdIndex);                                     </span>
<span class="-4273089527731895214" onmouseenter="enter('-4273089527731895214');" onmouseout="out('-4273089527731895214');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2127 +                                user = mUserManager.getUserForSerialNumber(serialNumber);                         </span>
<span class="-3834292976309282984" onmouseenter="enter('-3834292976309282984');" onmouseout="out('-3834292976309282984');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2128 +                                int promiseType = c.getInt(restoredIndex);                                        </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2129 +                                if (user == null) {                                                               </span>
<span class="-496594084298695862" onmouseenter="enter('-496594084298695862');" onmouseout="out('-496594084298695862');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2130 +                                    // User has been deleted remove the item.                                     </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2131 +                                    itemsToRemove.add(id);                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2132 +                                    continue;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2133 +                                }                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2134                                  try {                                                                             </span>
<span class="-1059471947143689601" onmouseenter="enter('-1059471947143689601');" onmouseout="out('-1059471947143689601');" style="">2135                                      intent = Intent.parseUri(intentDescription, 0);                               </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style="">2136                                      ComponentName cn = intent.getComponent();                                     </span>
<span class="6294222122453554998" onmouseenter="enter('6294222122453554998');" onmouseout="out('6294222122453554998');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2137 -                                    if (cn != null &amp;&amp; !isValidPackageComponent(manager, cn)) {                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2138 -                                        if (restored) {                                                           </span>
<span class="-4075692845887634995" onmouseenter="enter('-4075692845887634995');" onmouseout="out('-4075692845887634995');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2139 -                                            // might be installed later                                           </span>
<span class="3739674956299895084" onmouseenter="enter('3739674956299895084');" onmouseout="out('3739674956299895084');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2140 +                                    if (cn != null &amp;&amp; cn.getPackageName() != null) {                              </span>
<span class="-7017860263960771696" onmouseenter="enter('-7017860263960771696');" onmouseout="out('-7017860263960771696');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2141 +                                        boolean validPkg = launcherApps.isPackageEnabledForProfile(               </span>
<span class="-8206530135326160205" onmouseenter="enter('-8206530135326160205');" onmouseout="out('-8206530135326160205');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2142 +                                                cn.getPackageName(), user);                                       </span>
<span class="2397899750057092636" onmouseenter="enter('2397899750057092636');" onmouseout="out('2397899750057092636');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2143 +                                        boolean validComponent = validPkg &amp;&amp;                                      </span>
<span class="8762069982139369869" onmouseenter="enter('8762069982139369869');" onmouseout="out('8762069982139369869');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2144 +                                                launcherApps.isActivityEnabledForProfile(cn, user);               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2145 +                                                                                                                  </span>
<span class="-99499348404964068" onmouseenter="enter('-99499348404964068');" onmouseout="out('-99499348404964068');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2146 +                                        if (validComponent) {                                                     </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2147 +                                            if (restored) {                                                       </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2148 +                                                // no special handling necessary for this item                    </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2149 +                                                restoredRows.add(id);                                             </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2150 +                                                restored = false;                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2151 +                                            }                                                                     </span>
<span class="6348728592662235672" onmouseenter="enter('6348728592662235672');" onmouseout="out('6348728592662235672');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2152 +                                        } else if (validPkg) {                                                    </span>
<span class="-6379280176207841217" onmouseenter="enter('-6379280176207841217');" onmouseout="out('-6379280176207841217');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2153 +                                            intent = null;                                                        </span>
<span class="-5338271721329837400" onmouseenter="enter('-5338271721329837400');" onmouseout="out('-5338271721329837400');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2154 +                                            if ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {         </span>
<span class="5709472974278481468" onmouseenter="enter('5709472974278481468');" onmouseout="out('5709472974278481468');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2155 +                                                // We allow auto install apps to have their intent                </span>
<span class="-2650685759805982432" onmouseenter="enter('-2650685759805982432');" onmouseout="out('-2650685759805982432');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2156 +                                                // updated after an install.                                      </span>
<span class="-9107195642058231815" onmouseenter="enter('-9107195642058231815');" onmouseout="out('-9107195642058231815');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2157 +                                                intent = manager.getLaunchIntentForPackage(                       </span>
<span class="2095835690487424293" onmouseenter="enter('2095835690487424293');" onmouseout="out('2095835690487424293');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2158 +                                                        cn.getPackageName());                                     </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2159 +                                                if (intent != null) {                                             </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2160 +                                                    ContentValues values = new ContentValues();                   </span>
<span class="-1283328052029016277" onmouseenter="enter('-1283328052029016277');" onmouseout="out('-1283328052029016277');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2161 +                                                    values.put(LauncherSettings.Favorites.INTENT,                 </span>
<span class="-6799954997008316510" onmouseenter="enter('-6799954997008316510');" onmouseout="out('-6799954997008316510');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2162 +                                                            intent.toUri(0));                                     </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2163 +                                                    String where = BaseColumns._ID + &quot;= ?&quot;;                       </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2164 +                                                    String[] args = {Long.toString(id)};                          </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2165 +                                                    contentResolver.update(contentUri, values, where, args);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2166 +                                                }                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2167 +                                            }                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2168 +                                                                                                                  </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2169 +                                            if (intent == null) {                                                 </span>
<span class="8006468267706457929" onmouseenter="enter('8006468267706457929');" onmouseout="out('8006468267706457929');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2170 +                                                // The app is installed but the component is no                   </span>
<span class="7757985899517234268" onmouseenter="enter('7757985899517234268');" onmouseout="out('7757985899517234268');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2171 +                                                // longer available.                                              </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2172 +                                                Launcher.addDumpLog(TAG,                                          </span>
<span class="-4265604912045441952" onmouseenter="enter('-4265604912045441952');" onmouseout="out('-4265604912045441952');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2173 +                                                        &quot;Invalid component removed: &quot; + cn, true);                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2174 +                                                itemsToRemove.add(id);                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2175 +                                                continue;                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2176 +                                            } else {                                                              </span>
<span class="-3457143265480654278" onmouseenter="enter('-3457143265480654278');" onmouseout="out('-3457143265480654278');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2177 +                                                // no special handling necessary for this item                    </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2178 +                                                restoredRows.add(id);                                             </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2179 +                                                restored = false;                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2180 +                                            }                                                                     </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2181 +                                        } else if (restored) {                                                    </span>
<span class="6723757088957997679" onmouseenter="enter('6723757088957997679');" onmouseout="out('6723757088957997679');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2182 +                                            // Package is not yet available but might be                          </span>
<span class="9210943103787239320" onmouseenter="enter('9210943103787239320');" onmouseout="out('9210943103787239320');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2183 +                                            // installed later.                                                   </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2184                                              Launcher.addDumpLog(TAG,                                              </span>
<span class="1853248294024116603" onmouseenter="enter('1853248294024116603');" onmouseout="out('1853248294024116603');" style="">2185                                                      &quot;package not yet restored: &quot; + cn, true);                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2186 +                                                                                                                  </span>
<span class="-3623786309000722140" onmouseenter="enter('-3623786309000722140');" onmouseout="out('-3623786309000722140');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2187 +                                            if ((promiseType &amp; ShortcutInfo.FLAG_RESTORE_STARTED) != 0) {         </span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2188 +                                                // Restore has started once.                                      </span>
<span class="-3201378748433506719" onmouseenter="enter('-3201378748433506719');" onmouseout="out('-3201378748433506719');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2189 +                                            } else if (installingPkgs.contains(cn.getPackageName())) {            </span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2190 +                                                // App restore has started. Update the flag                       </span>
<span class="-8644667183049601729" onmouseenter="enter('-8644667183049601729');" onmouseout="out('-8644667183049601729');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2191 +                                                promiseType |= ShortcutInfo.FLAG_RESTORE_STARTED;                 </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2192 +                                                ContentValues values = new ContentValues();                       </span>
<span class="-3056571748664136340" onmouseenter="enter('-3056571748664136340');" onmouseout="out('-3056571748664136340');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2193 +                                                values.put(LauncherSettings.Favorites.RESTORED,                   </span>
<span class="-6746125005705027516" onmouseenter="enter('-6746125005705027516');" onmouseout="out('-6746125005705027516');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2194 +                                                        promiseType);                                             </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2195 +                                                String where = BaseColumns._ID + &quot;= ?&quot;;                           </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2196 +                                                String[] args = {Long.toString(id)};                              </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2197 +                                                contentResolver.update(contentUri, values, where, args);          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2198 +                                                                                                                  </span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2199 +                                            } else if (REMOVE_UNRESTORED_ICONS) {                                 </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2200 +                                                Launcher.addDumpLog(TAG,                                          </span>
<span class="-4630254631341932691" onmouseenter="enter('-4630254631341932691');" onmouseout="out('-4630254631341932691');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2201 +                                                        &quot;Unrestored package removed: &quot; + cn, true);               </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2202 +                                                itemsToRemove.add(id);                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2203 +                                                continue;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2204 +                                            }                                                                     </span>
<span class="-1386874848571608329" onmouseenter="enter('-1386874848571608329');" onmouseout="out('-1386874848571608329');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2205 +                                        } else if (isSdCardReady) {                                               </span>
<span class="3796946079469102110" onmouseenter="enter('3796946079469102110');" onmouseout="out('3796946079469102110');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2206 +                                            // Do not wait for external media load anymore.                       </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2207 +                                            // Log the invalid package, and remove it                             </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2208 +                                            Launcher.addDumpLog(TAG,                                              </span>
<span class="556389557067898835" onmouseenter="enter('556389557067898835');" onmouseout="out('556389557067898835');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2209 +                                                    &quot;Invalid package removed: &quot; + cn, true);                      </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2210 +                                            itemsToRemove.add(id);                                                </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2211 +                                            continue;                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2212                                          } else {                                                                  </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2213 -                                            if (!mAppsCanBeOnRemoveableStorage) {                                 </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2214 -                                                // Log the invalid package, and remove it                         </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2215 -                                                Launcher.addDumpLog(TAG,                                          </span>
<span class="556389557067898835" onmouseenter="enter('556389557067898835');" onmouseout="out('556389557067898835');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2216 -                                                        &quot;Invalid package removed: &quot; + cn, true);                  </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2217 -                                                itemsToRemove.add(id);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2218 -                                            } else {                                                              </span>
<span class="1135766729630553535" onmouseenter="enter('1135766729630553535');" onmouseout="out('1135766729630553535');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2219 -                                                // If apps can be on external storage, then we just               </span>
<span class="5840340868837727294" onmouseenter="enter('5840340868837727294');" onmouseout="out('5840340868837727294');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2220 -                                                // leave them for the user to remove (maybe add                   </span>
<span class="1838795663890338817" onmouseenter="enter('1838795663890338817');" onmouseout="out('1838795663890338817');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2221 -                                                // visual treatment to it)                                        </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2222 -                                                Launcher.addDumpLog(TAG,                                          </span>
<span class="2228900775203516519" onmouseenter="enter('2228900775203516519');" onmouseout="out('2228900775203516519');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2223 -                                                        &quot;Invalid package found: &quot; + cn, true);                    </span>
<span class="1407932970386463384" onmouseenter="enter('1407932970386463384');" onmouseout="out('1407932970386463384');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2224 +                                            // SdCard is not ready yet. Package might get available,              </span>
<span class="8490114520358161793" onmouseenter="enter('8490114520358161793');" onmouseout="out('8490114520358161793');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2225 +                                            // once it is ready.                                                  </span>
<span class="-6360577143290119906" onmouseenter="enter('-6360577143290119906');" onmouseout="out('-6360577143290119906');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2226 +                                            Launcher.addDumpLog(TAG, &quot;Invalid package: &quot; + cn                     </span>
<span class="-4780001113233310924" onmouseenter="enter('-4780001113233310924');" onmouseout="out('-4780001113233310924');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2227 +                                                    + &quot; (check again later)&quot;, true);                              </span>
<span class="-8366417370187832083" onmouseenter="enter('-8366417370187832083');" onmouseout="out('-8366417370187832083');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2228 +                                            HashSet&lt;String&gt; pkgs = sPendingPackages.get(user);                    </span>
<span class="3542388323197199472" onmouseenter="enter('3542388323197199472');" onmouseout="out('3542388323197199472');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2229 +                                            if (pkgs == null) {                                                   </span>
<span class="2501092745877296895" onmouseenter="enter('2501092745877296895');" onmouseout="out('2501092745877296895');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2230 +                                                pkgs = new HashSet&lt;String&gt;();                                     </span>
<span class="-7473793273553333759" onmouseenter="enter('-7473793273553333759');" onmouseout="out('-7473793273553333759');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2231 +                                                sPendingPackages.put(user, pkgs);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2232                                              }                                                                     </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2233 -                                            continue;                                                             </span>
<span class="-4896386049384421066" onmouseenter="enter('-4896386049384421066');" onmouseout="out('-4896386049384421066');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2234 +                                            pkgs.add(cn.getPackageName());                                        </span>
<span class="-7690684901319719205" onmouseenter="enter('-7690684901319719205');" onmouseout="out('-7690684901319719205');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2235 +                                            allowMissingTarget = true;                                            </span>
<span class="7315818939061071709" onmouseenter="enter('7315818939061071709');" onmouseout="out('7315818939061071709');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2236 +                                            // Add the icon on the workspace anyway.                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2237                                          }                                                                         </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2238 -                                    } else if (restored) {                                                        </span>
<span class="-9024381775763282363" onmouseenter="enter('-9024381775763282363');" onmouseout="out('-9024381775763282363');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2239 -                                        // no special handling necessary for this restored item                   </span>
<span class="-237996807879267337" onmouseenter="enter('-237996807879267337');" onmouseout="out('-237996807879267337');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2240 +                                    } else if (cn == null) {                                                      </span>
<span class="8972274794412921183" onmouseenter="enter('8972274794412921183');" onmouseout="out('8972274794412921183');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2241 +                                        // For shortcuts with no component, keep them as they are                 </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2242                                          restoredRows.add(id);                                                     </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">2243                                          restored = false;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2244                                      }                                                                             </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">2245                                  } catch (URISyntaxException e) {                                                  </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">2246                                      Launcher.addDumpLog(TAG,                                                      </span>
<span class="-68540878136764174" onmouseenter="enter('-68540878136764174');" onmouseout="out('-68540878136764174');" style="">2247                                              &quot;Invalid uri: &quot; + intentDescription, true);                           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2248                                      continue;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2249                                  }                                                                                 </span>
<span  style="">2250                                                                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2251                                  if (restored) {                                                                   </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2252 -                                    Launcher.addDumpLog(TAG,                                                      </span>
<span class="-7520999071046454576" onmouseenter="enter('-7520999071046454576');" onmouseout="out('-7520999071046454576');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2253 -                                            &quot;constructing info for partially restored package&quot;,                   </span>
<span class="-159362617709534437" onmouseenter="enter('-159362617709534437');" onmouseout="out('-159362617709534437');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2254 -                                            true);                                                                </span>
<span class="2209760928415101992" onmouseenter="enter('2209760928415101992');" onmouseout="out('2209760928415101992');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2255 -                                    info = getRestoredItemInfo(c, titleIndex);                                    </span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2256 -                                    intent = getRestoredItemIntent(c, context, intent);                           </span>
<span class="-3932834939055806292" onmouseenter="enter('-3932834939055806292');" onmouseout="out('-3932834939055806292');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2257 +                                    if (user.equals(UserHandleCompat.myUserHandle())) {                           </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2258 +                                        Launcher.addDumpLog(TAG,                                                  </span>
<span class="-7520999071046454576" onmouseenter="enter('-7520999071046454576');" onmouseout="out('-7520999071046454576');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2259 +                                                &quot;constructing info for partially restored package&quot;,               </span>
<span class="-159362617709534437" onmouseenter="enter('-159362617709534437');" onmouseout="out('-159362617709534437');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2260 +                                                true);                                                            </span>
<span class="9114514411241404985" onmouseenter="enter('9114514411241404985');" onmouseout="out('9114514411241404985');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2261 +                                        info = getRestoredItemInfo(c, titleIndex, intent, promiseType);           </span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2262 +                                        intent = getRestoredItemIntent(c, context, intent);                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2263 +                                    } else {                                                                      </span>
<span class="5174235078557753913" onmouseenter="enter('5174235078557753913');" onmouseout="out('5174235078557753913');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2264 +                                        // Don&#x27;t restore items for other profiles.                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2265 +                                        itemsToRemove.add(id);                                                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2266 +                                        continue;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2267 +                                    }                                                                             </span>
<span class="2485815571182318046" onmouseenter="enter('2485815571182318046');" onmouseout="out('2485815571182318046');" style="">2268                                  } else if (itemType ==                                                            </span>
<span class="2369871960694556087" onmouseenter="enter('2369871960694556087');" onmouseout="out('2369871960694556087');" style="">2269                                          LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {                       </span>
<span class="8194872455546731015" onmouseenter="enter('8194872455546731015');" onmouseout="out('8194872455546731015');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2270 -                                    info = getShortcutInfo(manager, intent, context, c, iconIndex,                </span>
<span class="-2187398528357571993" onmouseenter="enter('-2187398528357571993');" onmouseout="out('-2187398528357571993');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2271 -                                            titleIndex, mLabelCache);                                             </span>
<span class="-7549941140075833136" onmouseenter="enter('-7549941140075833136');" onmouseout="out('-7549941140075833136');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2272 +                                    info = getShortcutInfo(manager, intent, user, context, c,                     </span>
<span class="-4574059466099335125" onmouseenter="enter('-4574059466099335125');" onmouseout="out('-4574059466099335125');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2273 +                                            iconIndex, titleIndex, mLabelCache, allowMissingTarget);              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2274                                  } else {                                                                          </span>
<span class="-7258494880704199189" onmouseenter="enter('-7258494880704199189');" onmouseout="out('-7258494880704199189');" style="">2275                                      info = getShortcutInfo(c, context, iconTypeIndex,                             </span>
<span class="6962748064109777554" onmouseenter="enter('6962748064109777554');" onmouseout="out('6962748064109777554');" style="">2276                                              iconPackageIndex, iconResourceIndex, iconIndex,                       </span>
<span class="-1562426884587851404" onmouseenter="enter('-1562426884587851404');" onmouseout="out('-1562426884587851404');" style="">2277                                              titleIndex);                                                          </span>
<span  style="">2278                                                                                                                    </span>
<span class="8787316375412349400" onmouseenter="enter('8787316375412349400');" onmouseout="out('8787316375412349400');" style="">2279                                      // App shortcuts that used to be automatically added to Launcher              </span>
<span class="4423348586531939182" onmouseenter="enter('4423348586531939182');" onmouseout="out('4423348586531939182');" style="">2280                                      // didn&#x27;t always have the correct intent flags set, so do that                </span>
<span class="906874877447394391" onmouseenter="enter('906874877447394391');" onmouseout="out('906874877447394391');" style="">2281                                      // here                                                                       </span>
<span class="-8302893811746412301" onmouseenter="enter('-8302893811746412301');" onmouseout="out('-8302893811746412301');" style="">2282                                      if (intent.getAction() != null &amp;&amp;                                             </span>
<span class="-6792431597223839871" onmouseenter="enter('-6792431597223839871');" onmouseout="out('-6792431597223839871');" style="">2283                                          intent.getCategories() != null &amp;&amp;                                         </span>
<span class="-4482526573741019726" onmouseenter="enter('-4482526573741019726');" onmouseout="out('-4482526573741019726');" style="">2284                                          intent.getAction().equals(Intent.ACTION_MAIN) &amp;&amp;                          </span>
<span class="8802373298636081036" onmouseenter="enter('8802373298636081036');" onmouseout="out('8802373298636081036');" style="">2285                                          intent.getCategories().contains(Intent.CATEGORY_LAUNCHER)) {              </span>
<span class="-1437204964726011747" onmouseenter="enter('-1437204964726011747');" onmouseout="out('-1437204964726011747');" style="">2286                                          intent.addFlags(                                                          </span>
<span class="7533444403523837279" onmouseenter="enter('7533444403523837279');" onmouseout="out('7533444403523837279');" style="">2287                                              Intent.FLAG_ACTIVITY_NEW_TASK |                                       </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">2288                                              Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2289                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2290                                  }                                                                                 </span>
<span  style="">2291                                                                                                                    </span>
<span class="-1845287058566655413" onmouseenter="enter('-1845287058566655413');" onmouseout="out('-1845287058566655413');" style="">2292                                  if (info != null) {                                                               </span>
<span class="-7372776081672801393" onmouseenter="enter('-7372776081672801393');" onmouseout="out('-7372776081672801393');" style="">2293                                      info.id = id;                                                                 </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">2294                                      info.intent = intent;                                                         </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2295                                      container = c.getInt(containerIndex);                                         </span>
<span class="5031599210604047094" onmouseenter="enter('5031599210604047094');" onmouseout="out('5031599210604047094');" style="">2296                                      info.container = container;                                                   </span>
<span class="8385513109144822406" onmouseenter="enter('8385513109144822406');" onmouseout="out('8385513109144822406');" style="">2297                                      info.screenId = c.getInt(screenIndex);                                        </span>
<span class="8733666235794055799" onmouseenter="enter('8733666235794055799');" onmouseout="out('8733666235794055799');" style="">2298                                      info.cellX = c.getInt(cellXIndex);                                            </span>
<span class="4988345900238836581" onmouseenter="enter('4988345900238836581');" onmouseout="out('4988345900238836581');" style="">2299                                      info.cellY = c.getInt(cellYIndex);                                            </span>
<span class="6314319831626461685" onmouseenter="enter('6314319831626461685');" onmouseout="out('6314319831626461685');" style="">2300                                      info.spanX = 1;                                                               </span>
<span class="-7635592400178984643" onmouseenter="enter('-7635592400178984643');" onmouseout="out('-7635592400178984643');" style="">2301                                      info.spanY = 1;                                                               </span>
<span class="3045271753555441709" onmouseenter="enter('3045271753555441709');" onmouseout="out('3045271753555441709');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2302 +                                    info.intent.putExtra(ItemInfo.EXTRA_PROFILE, serialNumber);                   </span>
<span class="-4153270497324690681" onmouseenter="enter('-4153270497324690681');" onmouseout="out('-4153270497324690681');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2303 +                                    info.isDisabled = isSafeMode                                                  </span>
<span class="7337397009343704544" onmouseenter="enter('7337397009343704544');" onmouseout="out('7337397009343704544');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2304 +                                            &amp;&amp; !Utilities.isSystemApp(context, intent);                           </span>
<span  style="">2305                                                                                                                    </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2306                                      // check &amp; update map of what&#x27;s occupied                                      </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2307                                      deleteOnInvalidPlacement.set(false);                                          </span>
<span class="8488570468437690238" onmouseenter="enter('8488570468437690238');" onmouseout="out('8488570468437690238');" style="">2308                                      if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)) {          </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2309                                          if (deleteOnInvalidPlacement.get()) {                                     </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2310                                              itemsToRemove.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2311                                          }                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2312                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2313                                      }                                                                             </span>
<span  style="">2314                                                                                                                    </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2315                                      switch (container) {                                                          </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2316                                      case LauncherSettings.Favorites.CONTAINER_DESKTOP:                            </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2317                                      case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                            </span>
<span class="-3665356032627215639" onmouseenter="enter('-3665356032627215639');" onmouseout="out('-3665356032627215639');" style="">2318                                          sBgWorkspaceItems.add(info);                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2319                                          break;                                                                    </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">2320                                      default:                                                                      </span>
<span class="3928258456344537563" onmouseenter="enter('3928258456344537563');" onmouseout="out('3928258456344537563');" style="">2321                                          // Item is in a user folder                                               </span>
<span class="7253808449036323039" onmouseenter="enter('7253808449036323039');" onmouseout="out('7253808449036323039');" style="">2322                                          FolderInfo folderInfo =                                                   </span>
<span class="5827700611550420594" onmouseenter="enter('5827700611550420594');" onmouseout="out('5827700611550420594');" style="">2323                                                  findOrMakeFolder(sBgFolders, container);                          </span>
<span class="4210631970925384436" onmouseenter="enter('4210631970925384436');" onmouseout="out('4210631970925384436');" style="">2324                                          folderInfo.add(info);                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2325                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2326                                      }                                                                             </span>
<span class="-3593974647070903374" onmouseenter="enter('-3593974647070903374');" onmouseout="out('-3593974647070903374');" style="">2327                                      sBgItemsIdMap.put(info.id, info);                                             </span>
<span  style="">2328                                                                                                                    </span>
<span class="-8292894264257510493" onmouseenter="enter('-8292894264257510493');" onmouseout="out('-8292894264257510493');" style="">2329                                      // now that we&#x27;ve loaded everthing re-save it with the                        </span>
<span class="-1917607236140731811" onmouseenter="enter('-1917607236140731811');" onmouseout="out('-1917607236140731811');" style="">2330                                      // icon in case it disappears somehow.                                        </span>
<span class="-3056528193758781985" onmouseenter="enter('-3056528193758781985');" onmouseout="out('-3056528193758781985');" style="">2331                                      queueIconToBeChecked(sBgDbIconCache, info, c, iconIndex);                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2332                                  } else {                                                                          </span>
<span class="477637279977673890" onmouseenter="enter('477637279977673890');" onmouseout="out('477637279977673890');" style="">2333                                      throw new RuntimeException(&quot;Unexpected null ShortcutInfo&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2334                                  }                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2335                                  break;                                                                            </span>
<span  style="">2336                                                                                                                    </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">2337                              case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                     </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2338                                  id = c.getLong(idIndex);                                                          </span>
<span class="-711784092642716417" onmouseenter="enter('-711784092642716417');" onmouseout="out('-711784092642716417');" style="">2339                                  FolderInfo folderInfo = findOrMakeFolder(sBgFolders, id);                         </span>
<span  style="">2340                                                                                                                    </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">2341                                  folderInfo.title = c.getString(titleIndex);                                       </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">2342                                  folderInfo.id = id;                                                               </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2343                                  container = c.getInt(containerIndex);                                             </span>
<span class="-7029361904102133577" onmouseenter="enter('-7029361904102133577');" onmouseout="out('-7029361904102133577');" style="">2344                                  folderInfo.container = container;                                                 </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">2345                                  folderInfo.screenId = c.getInt(screenIndex);                                      </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">2346                                  folderInfo.cellX = c.getInt(cellXIndex);                                          </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">2347                                  folderInfo.cellY = c.getInt(cellYIndex);                                          </span>
<span class="5610283855861400391" onmouseenter="enter('5610283855861400391');" onmouseout="out('5610283855861400391');" style="">2348                                  folderInfo.spanX = 1;                                                             </span>
<span class="-3495026741287589829" onmouseenter="enter('-3495026741287589829');" onmouseout="out('-3495026741287589829');" style="">2349                                  folderInfo.spanY = 1;                                                             </span>
<span  style="">2350                                                                                                                    </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2351                                  // check &amp; update map of what&#x27;s occupied                                          </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2352                                  deleteOnInvalidPlacement.set(false);                                              </span>
<span class="-7285209150210174951" onmouseenter="enter('-7285209150210174951');" onmouseout="out('-7285209150210174951');" style="">2353                                  if (!checkItemPlacement(occupied, folderInfo,                                     </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2354                                          deleteOnInvalidPlacement)) {                                              </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2355                                      if (deleteOnInvalidPlacement.get()) {                                         </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2356                                          itemsToRemove.add(id);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2357                                      }                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2358                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2359                                  }                                                                                 </span>
<span  style="">2360                                                                                                                    </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2361                                  switch (container) {                                                              </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2362                                      case LauncherSettings.Favorites.CONTAINER_DESKTOP:                            </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2363                                      case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                            </span>
<span class="-8699935089398023363" onmouseenter="enter('-8699935089398023363');" onmouseout="out('-8699935089398023363');" style="">2364                                          sBgWorkspaceItems.add(folderInfo);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2365                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2366                                  }                                                                                 </span>
<span  style="">2367                                                                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2368                                  if (restored) {                                                                   </span>
<span class="-4442362781295313201" onmouseenter="enter('-4442362781295313201');" onmouseout="out('-4442362781295313201');" style="">2369                                      // no special handling required for restored folders                          </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2370                                      restoredRows.add(id);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2371                                  }                                                                                 </span>
<span  style="">2372                                                                                                                    </span>
<span class="-3375208674862622715" onmouseenter="enter('-3375208674862622715');" onmouseout="out('-3375208674862622715');" style="">2373                                  sBgItemsIdMap.put(folderInfo.id, folderInfo);                                     </span>
<span class="642717865586237287" onmouseenter="enter('642717865586237287');" onmouseout="out('642717865586237287');" style="">2374                                  sBgFolders.put(folderInfo.id, folderInfo);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2375                                  break;                                                                            </span>
<span  style="">2376                                                                                                                    </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">2377                              case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                  </span>
<span class="-7956270215965694003" onmouseenter="enter('-7956270215965694003');" onmouseout="out('-7956270215965694003');" style="">2378                                  // Read all Launcher-specific widget details                                      </span>
<span class="-1812352292626846958" onmouseenter="enter('-1812352292626846958');" onmouseout="out('-1812352292626846958');" style="">2379                                  int appWidgetId = c.getInt(appWidgetIdIndex);                                     </span>
<span class="7731617805561144619" onmouseenter="enter('7731617805561144619');" onmouseout="out('7731617805561144619');" style="">2380                                  String savedProvider = c.getString(appWidgetProviderIndex);                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2381 -                                                                                                                  </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2382                                  id = c.getLong(idIndex);                                                          </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2383 -                                                                                                                  </span>
<span class="-94114412789236238" onmouseenter="enter('-94114412789236238');" onmouseout="out('-94114412789236238');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2384 -                                final AppWidgetProviderInfo provider =                                            </span>
<span class="1226551708060925883" onmouseenter="enter('1226551708060925883');" onmouseout="out('1226551708060925883');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2385 -                                        widgets.getAppWidgetInfo(appWidgetId);                                    </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2386 -                                                                                                                  </span>
<span class="-3663768974834964011" onmouseenter="enter('-3663768974834964011');" onmouseout="out('-3663768974834964011');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2387 -                                if (!isSafeMode &amp;&amp; (provider == null || provider.provider == null ||              </span>
<span class="5896854251752877894" onmouseenter="enter('5896854251752877894');" onmouseout="out('5896854251752877894');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2388 -                                        provider.provider.getPackageName() == null)) {                            </span>
<span class="6295139059851294613" onmouseenter="enter('6295139059851294613');" onmouseout="out('6295139059851294613');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2389 -                                    String log = &quot;Deleting widget that isn&#x27;t installed anymore: id=&quot;              </span>
<span class="-582482747679217469" onmouseenter="enter('-582482747679217469');" onmouseout="out('-582482747679217469');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2390 -                                        + id + &quot; appWidgetId=&quot; + appWidgetId;                                     </span>
<span class="-6617867489767824559" onmouseenter="enter('-6617867489767824559');" onmouseout="out('-6617867489767824559');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2391 +                                final ComponentName component =                                                   </span>
<span class="2036133433071881641" onmouseenter="enter('2036133433071881641');" onmouseout="out('2036133433071881641');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2392 +                                        ComponentName.unflattenFromString(savedProvider);                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2393 +                                                                                                                  </span>
<span class="-1033311611191387821" onmouseenter="enter('-1033311611191387821');" onmouseout="out('-1033311611191387821');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2394 +                                final int restoreStatus = c.getInt(restoredIndex);                                </span>
<span class="-4190680795845516969" onmouseenter="enter('-4190680795845516969');" onmouseout="out('-4190680795845516969');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2395 +                                final boolean isIdValid = (restoreStatus &amp;                                        </span>
<span class="-1481780029747642556" onmouseenter="enter('-1481780029747642556');" onmouseout="out('-1481780029747642556');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2396 +                                        LauncherAppWidgetInfo.FLAG_ID_NOT_VALID) == 0;                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2397 +                                                                                                                  </span>
<span class="5101880033416706570" onmouseenter="enter('5101880033416706570');" onmouseout="out('5101880033416706570');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2398 +                                final boolean wasProviderReady = (restoreStatus &amp;                                 </span>
<span class="1207335416094145871" onmouseenter="enter('1207335416094145871');" onmouseout="out('1207335416094145871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2399 +                                        LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY) == 0;                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2400 +                                                                                                                  </span>
<span class="-565532021680206913" onmouseenter="enter('-565532021680206913');" onmouseout="out('-565532021680206913');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2401 +                                final AppWidgetProviderInfo provider = isIdValid                                  </span>
<span class="-1314040982621159070" onmouseenter="enter('-1314040982621159070');" onmouseout="out('-1314040982621159070');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2402 +                                        ? widgets.getAppWidgetInfo(appWidgetId)                                   </span>
<span class="-5208038715710523064" onmouseenter="enter('-5208038715710523064');" onmouseout="out('-5208038715710523064');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2403 +                                        : findAppWidgetProviderInfoWithComponent(context, component);             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2404 +                                                                                                                  </span>
<span class="-3732530231777271434" onmouseenter="enter('-3732530231777271434');" onmouseout="out('-3732530231777271434');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2405 +                                final boolean isProviderReady = isValidProvider(provider);                        </span>
<span class="-4031276934674956730" onmouseenter="enter('-4031276934674956730');" onmouseout="out('-4031276934674956730');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2406 +                                if (!isSafeMode &amp;&amp; wasProviderReady &amp;&amp; !isProviderReady) {                        </span>
<span class="-7439259826635164411" onmouseenter="enter('-7439259826635164411');" onmouseout="out('-7439259826635164411');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2407 +                                    String log = &quot;Deleting widget that isn&#x27;t installed anymore: &quot;                 </span>
<span class="7602710093107620029" onmouseenter="enter('7602710093107620029');" onmouseout="out('7602710093107620029');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2408 +                                            + &quot;id=&quot; + id + &quot; appWidgetId=&quot; + appWidgetId;                         </span>
<span class="-1161653447976501517" onmouseenter="enter('-1161653447976501517');" onmouseout="out('-1161653447976501517');" style="">2409                                      Log.e(TAG, log);                                                              </span>
<span class="-8769286334876902652" onmouseenter="enter('-8769286334876902652');" onmouseout="out('-8769286334876902652');" style="">2410                                      Launcher.addDumpLog(TAG, log, false);                                         </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2411                                      itemsToRemove.add(id);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2412                                  } else {                                                                          </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2413 -                                    appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,                        </span>
<span class="-1699940082949791423" onmouseenter="enter('-1699940082949791423');" onmouseout="out('-1699940082949791423');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2414 -                                            provider.provider);                                                   </span>
<span class="-6990378869891346567" onmouseenter="enter('-6990378869891346567');" onmouseout="out('-6990378869891346567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2415 +                                    if (isProviderReady) {                                                        </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2416 +                                        appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,                    </span>
<span class="-1699940082949791423" onmouseenter="enter('-1699940082949791423');" onmouseout="out('-1699940082949791423');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2417 +                                                provider.provider);                                               </span>
<span class="-8791440271290591158" onmouseenter="enter('-8791440271290591158');" onmouseout="out('-8791440271290591158');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2418 +                                        int[] minSpan =                                                           </span>
<span class="-461068380011135868" onmouseenter="enter('-461068380011135868');" onmouseout="out('-461068380011135868');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2419 +                                                Launcher.getMinSpanForWidget(context, provider);                  </span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2420 +                                        appWidgetInfo.minSpanX = minSpan[0];                                      </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2421 +                                        appWidgetInfo.minSpanY = minSpan[1];                                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2422 +                                                                                                                  </span>
<span class="-4125236257298908421" onmouseenter="enter('-4125236257298908421');" onmouseout="out('-4125236257298908421');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2423 +                                        int status = restoreStatus;                                               </span>
<span class="7579397535150427943" onmouseenter="enter('7579397535150427943');" onmouseout="out('7579397535150427943');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2424 +                                        if (!wasProviderReady) {                                                  </span>
<span class="1257696726614810242" onmouseenter="enter('1257696726614810242');" onmouseout="out('1257696726614810242');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2425 +                                            // If provider was not previously ready, update the                   </span>
<span class="2493747474831820434" onmouseenter="enter('2493747474831820434');" onmouseout="out('2493747474831820434');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2426 +                                            // status and UI flag.                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2427 +                                                                                                                  </span>
<span class="-551194396664004778" onmouseenter="enter('-551194396664004778');" onmouseout="out('-551194396664004778');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="2428 +                                            // Id would be valid only if the widget restore broadcast was received.">2428 +                                            // Id would be valid only if the widget restore broadcast was received</abbr></span>
<span class="877884548755909685" onmouseenter="enter('877884548755909685');" onmouseout="out('877884548755909685');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2429 +                                            if (isIdValid) {                                                      </span>
<span class="7708410681175562751" onmouseenter="enter('7708410681175562751');" onmouseout="out('7708410681175562751');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2430 +                                                status = LauncherAppWidgetInfo.RESTORE_COMPLETED;                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2431 +                                            } else {                                                              </span>
<span class="-2615385138309932511" onmouseenter="enter('-2615385138309932511');" onmouseout="out('-2615385138309932511');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2432 +                                                status &amp;= ~LauncherAppWidgetInfo                                  </span>
<span class="-1081946781001842885" onmouseenter="enter('-1081946781001842885');" onmouseout="out('-1081946781001842885');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2433 +                                                        .FLAG_PROVIDER_NOT_READY;                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2434 +                                            }                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2435 +                                        }                                                                         </span>
<span class="-5649718664209503492" onmouseenter="enter('-5649718664209503492');" onmouseout="out('-5649718664209503492');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2436 +                                        appWidgetInfo.restoreStatus = status;                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2437 +                                    } else {                                                                      </span>
<span class="1960922256572910963" onmouseenter="enter('1960922256572910963');" onmouseout="out('1960922256572910963');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2438 +                                        Log.v(TAG, &quot;Widget restore pending id=&quot; + id                              </span>
<span class="-310807007133679357" onmouseenter="enter('-310807007133679357');" onmouseout="out('-310807007133679357');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2439 +                                                + &quot; appWidgetId=&quot; + appWidgetId                                   </span>
<span class="-3553458184285370274" onmouseenter="enter('-3553458184285370274');" onmouseout="out('-3553458184285370274');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2440 +                                                + &quot; status =&quot; + restoreStatus);                                   </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2441 +                                        appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,                    </span>
<span class="-876368090679524620" onmouseenter="enter('-876368090679524620');" onmouseout="out('-876368090679524620');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2442 +                                                component);                                                       </span>
<span class="5437344546404607904" onmouseenter="enter('5437344546404607904');" onmouseout="out('5437344546404607904');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2443 +                                        appWidgetInfo.restoreStatus = restoreStatus;                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2444 +                                                                                                                  </span>
<span class="3064749011557231100" onmouseenter="enter('3064749011557231100');" onmouseout="out('3064749011557231100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2445 +                                        if ((restoreStatus &amp; LauncherAppWidgetInfo.FLAG_RESTORE_STARTED) != 0) {  </span>
<span class="-9042315990226527376" onmouseenter="enter('-9042315990226527376');" onmouseout="out('-9042315990226527376');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2446 +                                            // Restore has started once.                                          </span>
<span class="1863960885189711466" onmouseenter="enter('1863960885189711466');" onmouseout="out('1863960885189711466');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2447 +                                        } else if (installingPkgs.contains(component.getPackageName())) {         </span>
<span class="187953568678583284" onmouseenter="enter('187953568678583284');" onmouseout="out('187953568678583284');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2448 +                                            // App restore has started. Update the flag                           </span>
<span class="-2352323974911641075" onmouseenter="enter('-2352323974911641075');" onmouseout="out('-2352323974911641075');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2449 +                                            appWidgetInfo.restoreStatus |=                                        </span>
<span class="8590583015720742314" onmouseenter="enter('8590583015720742314');" onmouseout="out('8590583015720742314');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2450 +                                                    LauncherAppWidgetInfo.FLAG_RESTORE_STARTED;                   </span>
<span class="-3963917923738259030" onmouseenter="enter('-3963917923738259030');" onmouseout="out('-3963917923738259030');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2451 +                                        } else if (REMOVE_UNRESTORED_ICONS) {                                     </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2452 +                                            Launcher.addDumpLog(TAG,                                              </span>
<span class="-6243477493514584052" onmouseenter="enter('-6243477493514584052');" onmouseout="out('-6243477493514584052');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2453 +                                                    &quot;Unrestored widget removed: &quot; + component, true);             </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2454 +                                            itemsToRemove.add(id);                                                </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2455 +                                            continue;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2456 +                                        }                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2457 +                                    }                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2458 +                                                                                                                  </span>
<span class="-3490214853915757695" onmouseenter="enter('-3490214853915757695');" onmouseout="out('-3490214853915757695');" style="">2459                                      appWidgetInfo.id = id;                                                        </span>
<span class="-299823112742514494" onmouseenter="enter('-299823112742514494');" onmouseout="out('-299823112742514494');" style="">2460                                      appWidgetInfo.screenId = c.getInt(screenIndex);                               </span>
<span class="-3031374252236192886" onmouseenter="enter('-3031374252236192886');" onmouseout="out('-3031374252236192886');" style="">2461                                      appWidgetInfo.cellX = c.getInt(cellXIndex);                                   </span>
<span class="-6373958662014470902" onmouseenter="enter('-6373958662014470902');" onmouseout="out('-6373958662014470902');" style="">2462                                      appWidgetInfo.cellY = c.getInt(cellYIndex);                                   </span>
<span class="-1172974300892817728" onmouseenter="enter('-1172974300892817728');" onmouseout="out('-1172974300892817728');" style="">2463                                      appWidgetInfo.spanX = c.getInt(spanXIndex);                                   </span>
<span class="948367348399442562" onmouseenter="enter('948367348399442562');" onmouseout="out('948367348399442562');" style="">2464                                      appWidgetInfo.spanY = c.getInt(spanYIndex);                                   </span>
<span class="-5791068135067534357" onmouseenter="enter('-5791068135067534357');" onmouseout="out('-5791068135067534357');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2465 -                                    int[] minSpan = Launcher.getMinSpanForWidget(context, provider);              </span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2466 -                                    appWidgetInfo.minSpanX = minSpan[0];                                          </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2467 -                                    appWidgetInfo.minSpanY = minSpan[1];                                          </span>
<span  style="">2468                                                                                                                    </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2469                                      container = c.getInt(containerIndex);                                         </span>
<span class="8804482754730728288" onmouseenter="enter('8804482754730728288');" onmouseout="out('8804482754730728288');" style="">2470                                      if (container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;              </span>
<span class="-8875646165072629077" onmouseenter="enter('-8875646165072629077');" onmouseout="out('-8875646165072629077');" style="">2471                                          container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {              </span>
<span class="8088576139032825639" onmouseenter="enter('8088576139032825639');" onmouseout="out('8088576139032825639');" style="">2472                                          Log.e(TAG, &quot;Widget found where container != &quot; +                           </span>
<span class="8462700098092543731" onmouseenter="enter('8462700098092543731');" onmouseout="out('8462700098092543731');" style="">2473                                              &quot;CONTAINER_DESKTOP nor CONTAINER_HOTSEAT - ignoring!&quot;);               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2474                                          continue;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2475                                      }                                                                             </span>
<span  style="">2476                                                                                                                    </span>
<span class="3497044279011134930" onmouseenter="enter('3497044279011134930');" onmouseout="out('3497044279011134930');" style="">2477                                      appWidgetInfo.container = c.getInt(containerIndex);                           </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2478                                      // check &amp; update map of what&#x27;s occupied                                      </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2479                                      deleteOnInvalidPlacement.set(false);                                          </span>
<span class="8646654463595497950" onmouseenter="enter('8646654463595497950');" onmouseout="out('8646654463595497950');" style="">2480                                      if (!checkItemPlacement(occupied, appWidgetInfo,                              </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2481                                              deleteOnInvalidPlacement)) {                                          </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2482                                          if (deleteOnInvalidPlacement.get()) {                                     </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2483                                              itemsToRemove.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2484                                          }                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2485                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2486                                      }                                                                             </span>
<span class="1434382407220101710" onmouseenter="enter('1434382407220101710');" onmouseout="out('1434382407220101710');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2487 -                                    String providerName = provider.provider.flattenToString();                    </span>
<span class="-497618701172789575" onmouseenter="enter('-497618701172789575');" onmouseout="out('-497618701172789575');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2488 -                                    if (!providerName.equals(savedProvider)) {                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2489 +                                                                                                                  </span>
<span class="-8698298148744232980" onmouseenter="enter('-8698298148744232980');" onmouseout="out('-8698298148744232980');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2490 +                                    String providerName = appWidgetInfo.providerName.flattenToString();           </span>
<span class="2853568002576356463" onmouseenter="enter('2853568002576356463');" onmouseout="out('2853568002576356463');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2491 +                                    if (!providerName.equals(savedProvider) ||                                    </span>
<span class="4338446659263892125" onmouseenter="enter('4338446659263892125');" onmouseout="out('4338446659263892125');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2492 +                                            (appWidgetInfo.restoreStatus != restoreStatus)) {                     </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2493                                          ContentValues values = new ContentValues();                               </span>
<span class="-1769279011780203877" onmouseenter="enter('-1769279011780203877');" onmouseout="out('-1769279011780203877');" style="">2494                                          values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER,                 </span>
<span class="-4101567385035018098" onmouseenter="enter('-4101567385035018098');" onmouseout="out('-4101567385035018098');" style="">2495                                                  providerName);                                                    </span>
<span class="-3056571748664136340" onmouseenter="enter('-3056571748664136340');" onmouseout="out('-3056571748664136340');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2496 +                                        values.put(LauncherSettings.Favorites.RESTORED,                           </span>
<span class="6174833257706459781" onmouseenter="enter('6174833257706459781');" onmouseout="out('6174833257706459781');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2497 +                                                appWidgetInfo.restoreStatus);                                     </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2498                                          String where = BaseColumns._ID + &quot;= ?&quot;;                                   </span>
<span class="7642359228989935564" onmouseenter="enter('7642359228989935564');" onmouseout="out('7642359228989935564');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2499 -                                        String[] args = {Integer.toString(c.getInt(idIndex))};                    </span>
<span class="47388710282669445" onmouseenter="enter('47388710282669445');" onmouseout="out('47388710282669445');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2500 +                                        String[] args = {Long.toString(id)};                                      </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2501                                          contentResolver.update(contentUri, values, where, args);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2502                                      }                                                                             </span>
<span class="-5618854840311135348" onmouseenter="enter('-5618854840311135348');" onmouseout="out('-5618854840311135348');" style="">2503                                      sBgItemsIdMap.put(appWidgetInfo.id, appWidgetInfo);                           </span>
<span class="-6085617845739613540" onmouseenter="enter('-6085617845739613540');" onmouseout="out('-6085617845739613540');" style="">2504                                      sBgAppWidgets.add(appWidgetInfo);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2505                                  }                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2506                                  break;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2507                              }                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2508                          } catch (Exception e) {                                                                   </span>
<span class="5473197829797399592" onmouseenter="enter('5473197829797399592');" onmouseout="out('5473197829797399592');" style="">2509                              Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted&quot;, e, true);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2510                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2511                      }                                                                                             </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2512                  } finally {                                                                                       </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2513                      if (c != null) {                                                                              </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2514                          c.close();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2515                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2516                  }                                                                                                 </span>
<span  style="">2517                                                                                                                    </span>
<span class="3320499870953658089" onmouseenter="enter('3320499870953658089');" onmouseout="out('3320499870953658089');" style="">2518                  // Break early if we&#x27;ve stopped loading                                                           </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2519                  if (mStopped) {                                                                                   </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2520                      clearSBgDataStructures();                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2521                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2522                  }                                                                                                 </span>
<span  style="">2523                                                                                                                    </span>
<span class="-1044970196577970229" onmouseenter="enter('-1044970196577970229');" onmouseout="out('-1044970196577970229');" style="">2524                  if (itemsToRemove.size() &gt; 0) {                                                                   </span>
<span class="5677517768170489521" onmouseenter="enter('5677517768170489521');" onmouseout="out('5677517768170489521');" style="">2525                      ContentProviderClient client = contentResolver.acquireContentProviderClient(                  </span>
<span class="-41995321024364961" onmouseenter="enter('-41995321024364961');" onmouseout="out('-41995321024364961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2526 -                            LauncherSettings.Favorites.CONTENT_URI);                                              </span>
<span class="3143035230192904555" onmouseenter="enter('3143035230192904555');" onmouseout="out('3143035230192904555');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2527 +                            contentUri);                                                                          </span>
<span class="-6328990658741073682" onmouseenter="enter('-6328990658741073682');" onmouseout="out('-6328990658741073682');" style="">2528                      // Remove dead items                                                                          </span>
<span class="-2206673557334024830" onmouseenter="enter('-2206673557334024830');" onmouseout="out('-2206673557334024830');" style="">2529                      for (long id : itemsToRemove) {                                                               </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2530                          if (DEBUG_LOADERS) {                                                                      </span>
<span class="1693656419727492070" onmouseenter="enter('1693656419727492070');" onmouseout="out('1693656419727492070');" style="">2531                              Log.d(TAG, &quot;Removed id = &quot; + id);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2532                          }                                                                                         </span>
<span class="-756547997470617115" onmouseenter="enter('-756547997470617115');" onmouseout="out('-756547997470617115');" style="">2533                          // Don&#x27;t notify content observers                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2534                          try {                                                                                     </span>
<span class="-2525008622658612811" onmouseenter="enter('-2525008622658612811');" onmouseout="out('-2525008622658612811');" style="">2535                              client.delete(LauncherSettings.Favorites.getContentUri(id, false),                    </span>
<span class="789653475627010164" onmouseenter="enter('789653475627010164');" onmouseout="out('789653475627010164');" style="">2536                                      null, null);                                                                  </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2537                          } catch (RemoteException e) {                                                             </span>
<span class="1576133554677134200" onmouseenter="enter('1576133554677134200');" onmouseout="out('1576133554677134200');" style="">2538                              Log.w(TAG, &quot;Could not remove id = &quot; + id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2539                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2540                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2541                  }                                                                                                 </span>
<span  style="">2542                                                                                                                    </span>
<span class="5384601782943406631" onmouseenter="enter('5384601782943406631');" onmouseout="out('5384601782943406631');" style="">2543                  if (restoredRows.size() &gt; 0) {                                                                    </span>
<span class="-7146881939578869751" onmouseenter="enter('-7146881939578869751');" onmouseout="out('-7146881939578869751');" style="">2544                      ContentProviderClient updater = contentResolver.acquireContentProviderClient(                 </span>
<span class="-41995321024364961" onmouseenter="enter('-41995321024364961');" onmouseout="out('-41995321024364961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2545 -                            LauncherSettings.Favorites.CONTENT_URI);                                              </span>
<span class="3143035230192904555" onmouseenter="enter('3143035230192904555');" onmouseout="out('3143035230192904555');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2546 +                            contentUri);                                                                          </span>
<span class="7218829760546841504" onmouseenter="enter('7218829760546841504');" onmouseout="out('7218829760546841504');" style="">2547                      // Update restored items that no longer require special handling                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2548                      try {                                                                                         </span>
<span class="-9131750597640912652" onmouseenter="enter('-9131750597640912652');" onmouseout="out('-9131750597640912652');" style="">2549                          StringBuilder selectionBuilder = new StringBuilder();                                     </span>
<span class="-2095273116509361612" onmouseenter="enter('-2095273116509361612');" onmouseout="out('-2095273116509361612');" style="">2550                          selectionBuilder.append(LauncherSettings.Favorites._ID);                                  </span>
<span class="6461653116160679746" onmouseenter="enter('6461653116160679746');" onmouseout="out('6461653116160679746');" style="">2551                          selectionBuilder.append(&quot; IN (&quot;);                                                         </span>
<span class="5779162458108712939" onmouseenter="enter('5779162458108712939');" onmouseout="out('5779162458108712939');" style="">2552                          selectionBuilder.append(TextUtils.join(&quot;, &quot;, restoredRows));                              </span>
<span class="-266914319355369866" onmouseenter="enter('-266914319355369866');" onmouseout="out('-266914319355369866');" style="">2553                          selectionBuilder.append(&quot;)&quot;);                                                             </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2554                          ContentValues values = new ContentValues();                                               </span>
<span class="-8469115157851156621" onmouseenter="enter('-8469115157851156621');" onmouseout="out('-8469115157851156621');" style="">2555                          values.put(LauncherSettings.Favorites.RESTORED, 0);                                       </span>
<span class="8477028357087705336" onmouseenter="enter('8477028357087705336');" onmouseout="out('8477028357087705336');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2556 -                        updater.update(LauncherSettings.Favorites.CONTENT_URI,                                    </span>
<span class="5986100348417061644" onmouseenter="enter('5986100348417061644');" onmouseout="out('5986100348417061644');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2557 +                        updater.update(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,                    </span>
<span class="-593768018781143118" onmouseenter="enter('-593768018781143118');" onmouseout="out('-593768018781143118');" style="">2558                                  values, selectionBuilder.toString(), null);                                       </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2559                      } catch (RemoteException e) {                                                                 </span>
<span class="-2048384695223094681" onmouseenter="enter('-2048384695223094681');" onmouseout="out('-2048384695223094681');" style="">2560                          Log.w(TAG, &quot;Could not update restored rows&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2561                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2562 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2563 +                                                                                                                  </span>
<span class="-5457196494236388113" onmouseenter="enter('-5457196494236388113');" onmouseout="out('-5457196494236388113');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2564 +                if (!isSdCardReady &amp;&amp; !sPendingPackages.isEmpty()) {                                              </span>
<span class="371670048052179208" onmouseenter="enter('371670048052179208');" onmouseout="out('371670048052179208');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2565 +                    context.registerReceiver(new AppsAvailabilityCheck(),                                         </span>
<span class="-2250957496563467306" onmouseenter="enter('-2250957496563467306');" onmouseout="out('-2250957496563467306');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2566 +                            new IntentFilter(StartupReceiver.SYSTEM_READY),                                       </span>
<span class="-5536809824571506033" onmouseenter="enter('-5536809824571506033');" onmouseout="out('-5536809824571506033');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2567 +                            null, sWorker);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2568                  }                                                                                                 </span>
<span  style="">2569                                                                                                                    </span>
<span class="-4804263783578470698" onmouseenter="enter('-4804263783578470698');" onmouseout="out('-4804263783578470698');" style="">2570                  if (loadedOldDb) {                                                                                </span>
<span class="7600073100480404232" onmouseenter="enter('7600073100480404232');" onmouseout="out('7600073100480404232');" style="">2571                      long maxScreenId = 0;                                                                         </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2572                      // If we&#x27;re importing we use the old screen order.                                            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2573                      for (ItemInfo item: sBgItemsIdMap.values()) {                                                 </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2574                          long screenId = item.screenId;                                                            </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2575                          if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                     </span>
<span class="2624616925341674614" onmouseenter="enter('2624616925341674614');" onmouseout="out('2624616925341674614');" style="">2576                                  !sBgWorkspaceScreens.contains(screenId)) {                                        </span>
<span class="-7031445051311703943" onmouseenter="enter('-7031445051311703943');" onmouseout="out('-7031445051311703943');" style="">2577                              sBgWorkspaceScreens.add(screenId);                                                    </span>
<span class="3854679960473080150" onmouseenter="enter('3854679960473080150');" onmouseout="out('3854679960473080150');" style="">2578                              if (screenId &gt; maxScreenId) {                                                         </span>
<span class="1021049293401799489" onmouseenter="enter('1021049293401799489');" onmouseout="out('1021049293401799489');" style="">2579                                  maxScreenId = screenId;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2580                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2581                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2582                      }                                                                                             </span>
<span class="6350361387624057443" onmouseenter="enter('6350361387624057443');" onmouseout="out('6350361387624057443');" style="">2583                      Collections.sort(sBgWorkspaceScreens);                                                        </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2584                      // Log to disk                                                                                </span>
<span class="866898408466051726" onmouseenter="enter('866898408466051726');" onmouseout="out('866898408466051726');" style="">2585                      Launcher.addDumpLog(TAG, &quot;11683562 -   maxScreenId: &quot; + maxScreenId, true);                   </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2586                      Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                               </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2587                              TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                                     </span>
<span  style="">2588                                                                                                                    </span>
<span class="7230913638388732518" onmouseenter="enter('7230913638388732518');" onmouseout="out('7230913638388732518');" style="">2589                      LauncherAppState.getLauncherProvider().updateMaxScreenId(maxScreenId);                        </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2590                      updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                                     </span>
<span  style="">2591                                                                                                                    </span>
<span class="7660079450024453672" onmouseenter="enter('7660079450024453672');" onmouseout="out('7660079450024453672');" style="">2592                      // Update the max item id after we load an old db                                             </span>
<span class="-1395936485676380465" onmouseenter="enter('-1395936485676380465');" onmouseout="out('-1395936485676380465');" style="">2593                      long maxItemId = 0;                                                                           </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2594                      // If we&#x27;re importing we use the old screen order.                                            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2595                      for (ItemInfo item: sBgItemsIdMap.values()) {                                                 </span>
<span class="570221416877950678" onmouseenter="enter('570221416877950678');" onmouseout="out('570221416877950678');" style="">2596                          maxItemId = Math.max(maxItemId, item.id);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2597                      }                                                                                             </span>
<span class="-9163109107539651846" onmouseenter="enter('-9163109107539651846');" onmouseout="out('-9163109107539651846');" style="">2598                      LauncherAppState.getLauncherProvider().updateMaxItemId(maxItemId);                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2599                  } else {                                                                                          </span>
<span class="-2685559954044032059" onmouseenter="enter('-2685559954044032059');" onmouseout="out('-2685559954044032059');" style="">2600                      TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(mContext);                     </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">2601                      for (Integer i : orderedScreens.keySet()) {                                                   </span>
<span class="6018672691004586758" onmouseenter="enter('6018672691004586758');" onmouseout="out('6018672691004586758');" style="">2602                          sBgWorkspaceScreens.add(orderedScreens.get(i));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2603                      }                                                                                             </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2604                      // Log to disk                                                                                </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2605                      Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                               </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2606                              TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                                     </span>
<span  style="">2607                                                                                                                    </span>
<span class="4349099944219760178" onmouseenter="enter('4349099944219760178');" onmouseout="out('4349099944219760178');" style="">2608                      // Remove any empty screens                                                                   </span>
<span class="4802911702169047278" onmouseenter="enter('4802911702169047278');" onmouseout="out('4802911702169047278');" style="">2609                      ArrayList&lt;Long&gt; unusedScreens = new ArrayList&lt;Long&gt;(sBgWorkspaceScreens);                     </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2610                      for (ItemInfo item: sBgItemsIdMap.values()) {                                                 </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2611                          long screenId = item.screenId;                                                            </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2612                          if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                     </span>
<span class="2084246428391599841" onmouseenter="enter('2084246428391599841');" onmouseout="out('2084246428391599841');" style="">2613                                  unusedScreens.contains(screenId)) {                                               </span>
<span class="2563817896724806900" onmouseenter="enter('2563817896724806900');" onmouseout="out('2563817896724806900');" style="">2614                              unusedScreens.remove(screenId);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2615                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2616                      }                                                                                             </span>
<span  style="">2617                                                                                                                    </span>
<span class="589140823506694046" onmouseenter="enter('589140823506694046');" onmouseout="out('589140823506694046');" style="">2618                      // If there are any empty screens remove them, and update.                                    </span>
<span class="-6359391369875412389" onmouseenter="enter('-6359391369875412389');" onmouseout="out('-6359391369875412389');" style="">2619                      if (unusedScreens.size() != 0) {                                                              </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2620                          // Log to disk                                                                            </span>
<span class="7523849534574985307" onmouseenter="enter('7523849534574985307');" onmouseout="out('7523849534574985307');" style="">2621                          Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; +                 </span>
<span class="-5777150032383965255" onmouseenter="enter('-5777150032383965255');" onmouseout="out('-5777150032383965255');" style="">2622                                  TextUtils.join(&quot;, &quot;, unusedScreens), true);                                       </span>
<span  style="">2623                                                                                                                    </span>
<span class="672027419163159367" onmouseenter="enter('672027419163159367');" onmouseout="out('672027419163159367');" style="">2624                          sBgWorkspaceScreens.removeAll(unusedScreens);                                             </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2625                          updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2626                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2627                  }                                                                                                 </span>
<span  style="">2628                                                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2629                  if (DEBUG_LOADERS) {                                                                              </span>
<span class="7893701829803555503" onmouseenter="enter('7893701829803555503');" onmouseout="out('7893701829803555503');" style="">2630                      Log.d(TAG, &quot;loaded workspace in &quot; + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                   </span>
<span class="-4264600990510120523" onmouseenter="enter('-4264600990510120523');" onmouseout="out('-4264600990510120523');" style="">2631                      Log.d(TAG, &quot;workspace layout: &quot;);                                                             </span>
<span class="-7545020173780618827" onmouseenter="enter('-7545020173780618827');" onmouseout="out('-7545020173780618827');" style="">2632                      int nScreens = occupied.size();                                                               </span>
<span class="-1430677680506572849" onmouseenter="enter('-1430677680506572849');" onmouseout="out('-1430677680506572849');" style="">2633                      for (int y = 0; y &lt; countY; y++) {                                                            </span>
<span class="7912371425440139270" onmouseenter="enter('7912371425440139270');" onmouseout="out('7912371425440139270');" style="">2634                          String line = &quot;&quot;;                                                                         </span>
<span  style="">2635                                                                                                                    </span>
<span class="6696569755228044488" onmouseenter="enter('6696569755228044488');" onmouseout="out('6696569755228044488');" style="">2636                          Iterator&lt;Long&gt; iter = occupied.keySet().iterator();                                       </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2637                          while (iter.hasNext()) {                                                                  </span>
<span class="5362610809116292523" onmouseenter="enter('5362610809116292523');" onmouseout="out('5362610809116292523');" style="">2638                              long screenId = iter.next();                                                          </span>
<span class="-6362485911021715109" onmouseenter="enter('-6362485911021715109');" onmouseout="out('-6362485911021715109');" style="">2639                              if (screenId &gt; 0) {                                                                   </span>
<span class="6140668759815587097" onmouseenter="enter('6140668759815587097');" onmouseout="out('6140668759815587097');" style="">2640                                  line += &quot; | &quot;;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2641                              }                                                                                     </span>
<span class="5745233440242438196" onmouseenter="enter('5745233440242438196');" onmouseout="out('5745233440242438196');" style="">2642                              for (int x = 0; x &lt; countX; x++) {                                                    </span>
<span class="5427490612738327413" onmouseenter="enter('5427490612738327413');" onmouseout="out('5427490612738327413');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2643 -                                line += ((occupied.get(screenId)[x][y] != null) ? &quot;#&quot; : &quot;.&quot;);                     </span>
<span class="-6212011147390486077" onmouseenter="enter('-6212011147390486077');" onmouseout="out('-6212011147390486077');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2644 +                                ItemInfo[][] screen = occupied.get(screenId);                                     </span>
<span class="-8528390042415740475" onmouseenter="enter('-8528390042415740475');" onmouseout="out('-8528390042415740475');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2645 +                                if (x &lt; screen.length &amp;&amp; y &lt; screen[x].length) {                                  </span>
<span class="2138628812736326092" onmouseenter="enter('2138628812736326092');" onmouseout="out('2138628812736326092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2646 +                                    line += (screen[x][y] != null) ? &quot;#&quot; : &quot;.&quot;;                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2647 +                                } else {                                                                          </span>
<span class="3801202768225819208" onmouseenter="enter('3801202768225819208');" onmouseout="out('3801202768225819208');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2648 +                                    line += &quot;!&quot;;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2649 +                                }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2650                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2651                          }                                                                                         </span>
<span class="-6176135763032133271" onmouseenter="enter('-6176135763032133271');" onmouseout="out('-6176135763032133271');" style="">2652                          Log.d(TAG, &quot;[ &quot; + line + &quot; ]&quot;);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2653                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2654                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2655              }                                                                                                     </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style="">2656              return loadedOldDb;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2657          }                                                                                                         </span>
<span  style="">2658                                                                                                                    </span>
<span class="2277304499071840713" onmouseenter="enter('2277304499071840713');" onmouseout="out('2277304499071840713');" style="">2659          /** Filters the set of items who are directly or indirectly (via another container) on the                </span>
<span class="1409652257454698285" onmouseenter="enter('1409652257454698285');" onmouseout="out('1409652257454698285');" style="">2660           * specified screen. */                                                                                   </span>
<span class="8795548304182075511" onmouseenter="enter('8795548304182075511');" onmouseout="out('8795548304182075511');" style="">2661          private void filterCurrentWorkspaceItems(long currentScreenId,                                            </span>
<span class="6681054994536048179" onmouseenter="enter('6681054994536048179');" onmouseout="out('6681054994536048179');" style="">2662                  ArrayList&lt;ItemInfo&gt; allWorkspaceItems,                                                            </span>
<span class="-22694560885899086" onmouseenter="enter('-22694560885899086');" onmouseout="out('-22694560885899086');" style="">2663                  ArrayList&lt;ItemInfo&gt; currentScreenItems,                                                           </span>
<span class="-4268074281529251610" onmouseenter="enter('-4268074281529251610');" onmouseout="out('-4268074281529251610');" style="">2664                  ArrayList&lt;ItemInfo&gt; otherScreenItems) {                                                           </span>
<span class="-3054856766549342984" onmouseenter="enter('-3054856766549342984');" onmouseout="out('-3054856766549342984');" style="">2665              // Purge any null ItemInfos                                                                           </span>
<span class="4510640209834542816" onmouseenter="enter('4510640209834542816');" onmouseout="out('4510640209834542816');" style="">2666              Iterator&lt;ItemInfo&gt; iter = allWorkspaceItems.iterator();                                               </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2667              while (iter.hasNext()) {                                                                              </span>
<span class="1859715860533284250" onmouseenter="enter('1859715860533284250');" onmouseout="out('1859715860533284250');" style="">2668                  ItemInfo i = iter.next();                                                                         </span>
<span class="-7805046366392198151" onmouseenter="enter('-7805046366392198151');" onmouseout="out('-7805046366392198151');" style="">2669                  if (i == null) {                                                                                  </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">2670                      iter.remove();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2671                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2672              }                                                                                                     </span>
<span  style="">2673                                                                                                                    </span>
<span class="-717820765531723775" onmouseenter="enter('-717820765531723775');" onmouseout="out('-717820765531723775');" style="">2674              // Order the set of items by their containers first, this allows use to walk through the              </span>
<span class="603841325148737819" onmouseenter="enter('603841325148737819');" onmouseout="out('603841325148737819');" style="">2675              // list sequentially, build up a list of containers that are in the specified screen,                 </span>
<span class="4141488165570775341" onmouseenter="enter('4141488165570775341');" onmouseout="out('4141488165570775341');" style="">2676              // as well as all items in those containers.                                                          </span>
<span class="-9034158841912487174" onmouseenter="enter('-9034158841912487174');" onmouseout="out('-9034158841912487174');" style="">2677              Set&lt;Long&gt; itemsOnScreen = new HashSet&lt;Long&gt;();                                                        </span>
<span class="8519661802904254165" onmouseenter="enter('8519661802904254165');" onmouseout="out('8519661802904254165');" style="">2678              Collections.sort(allWorkspaceItems, new Comparator&lt;ItemInfo&gt;() {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2679                  @Override                                                                                         </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2680                  public int compare(ItemInfo lhs, ItemInfo rhs) {                                                  </span>
<span class="-1156155221818606914" onmouseenter="enter('-1156155221818606914');" onmouseout="out('-1156155221818606914');" style="">2681                      return (int) (lhs.container - rhs.container);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2682                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2683              });                                                                                                   </span>
<span class="8857216393150717712" onmouseenter="enter('8857216393150717712');" onmouseout="out('8857216393150717712');" style="">2684              for (ItemInfo info : allWorkspaceItems) {                                                             </span>
<span class="6411036295955728093" onmouseenter="enter('6411036295955728093');" onmouseout="out('6411036295955728093');" style="">2685                  if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                             </span>
<span class="243509375570472667" onmouseenter="enter('243509375570472667');" onmouseout="out('243509375570472667');" style="">2686                      if (info.screenId == currentScreenId) {                                                       </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2687                          currentScreenItems.add(info);                                                             </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2688                          itemsOnScreen.add(info.id);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2689                      } else {                                                                                      </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2690                          otherScreenItems.add(info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2691                      }                                                                                             </span>
<span class="8644731164584182238" onmouseenter="enter('8644731164584182238');" onmouseout="out('8644731164584182238');" style="">2692                  } else if (info.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                      </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2693                      currentScreenItems.add(info);                                                                 </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2694                      itemsOnScreen.add(info.id);                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2695                  } else {                                                                                          </span>
<span class="580654991680085358" onmouseenter="enter('580654991680085358');" onmouseout="out('580654991680085358');" style="">2696                      if (itemsOnScreen.contains(info.container)) {                                                 </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2697                          currentScreenItems.add(info);                                                             </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2698                          itemsOnScreen.add(info.id);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2699                      } else {                                                                                      </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2700                          otherScreenItems.add(info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2701                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2702                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2703              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2704          }                                                                                                         </span>
<span  style="">2705                                                                                                                    </span>
<span class="-2345588268248786161" onmouseenter="enter('-2345588268248786161');" onmouseout="out('-2345588268248786161');" style="">2706          /** Filters the set of widgets which are on the specified screen. */                                      </span>
<span class="7796530082634599981" onmouseenter="enter('7796530082634599981');" onmouseout="out('7796530082634599981');" style="">2707          private void filterCurrentAppWidgets(long currentScreenId,                                                </span>
<span class="-6457080946795761374" onmouseenter="enter('-6457080946795761374');" onmouseout="out('-6457080946795761374');" style="">2708                  ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                                      </span>
<span class="-4085190208868862406" onmouseenter="enter('-4085190208868862406');" onmouseout="out('-4085190208868862406');" style="">2709                  ArrayList&lt;LauncherAppWidgetInfo&gt; currentScreenWidgets,                                            </span>
<span class="-9000722418092093369" onmouseenter="enter('-9000722418092093369');" onmouseout="out('-9000722418092093369');" style="">2710                  ArrayList&lt;LauncherAppWidgetInfo&gt; otherScreenWidgets) {                                            </span>
<span  style="">2711                                                                                                                    </span>
<span class="298213435107913715" onmouseenter="enter('298213435107913715');" onmouseout="out('298213435107913715');" style="">2712              for (LauncherAppWidgetInfo widget : appWidgets) {                                                     </span>
<span class="2476844624609784590" onmouseenter="enter('2476844624609784590');" onmouseout="out('2476844624609784590');" style="">2713                  if (widget == null) continue;                                                                     </span>
<span class="8795712760973120755" onmouseenter="enter('8795712760973120755');" onmouseout="out('8795712760973120755');" style="">2714                  if (widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                           </span>
<span class="-573639449604607321" onmouseenter="enter('-573639449604607321');" onmouseout="out('-573639449604607321');" style="">2715                          widget.screenId == currentScreenId) {                                                     </span>
<span class="-7467860973438659792" onmouseenter="enter('-7467860973438659792');" onmouseout="out('-7467860973438659792');" style="">2716                      currentScreenWidgets.add(widget);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2717                  } else {                                                                                          </span>
<span class="918127297832417083" onmouseenter="enter('918127297832417083');" onmouseout="out('918127297832417083');" style="">2718                      otherScreenWidgets.add(widget);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2719                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2720              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2721          }                                                                                                         </span>
<span  style="">2722                                                                                                                    </span>
<span class="2890739696266248059" onmouseenter="enter('2890739696266248059');" onmouseout="out('2890739696266248059');" style="">2723          /** Filters the set of folders which are on the specified screen. */                                      </span>
<span class="1006156668309097499" onmouseenter="enter('1006156668309097499');" onmouseout="out('1006156668309097499');" style="">2724          private void filterCurrentFolders(long currentScreenId,                                                   </span>
<span class="5542015090877593488" onmouseenter="enter('5542015090877593488');" onmouseout="out('5542015090877593488');" style="">2725                  HashMap&lt;Long, ItemInfo&gt; itemsIdMap,                                                               </span>
<span class="5439463415012784721" onmouseenter="enter('5439463415012784721');" onmouseout="out('5439463415012784721');" style="">2726                  HashMap&lt;Long, FolderInfo&gt; folders,                                                                </span>
<span class="-835326304871961386" onmouseenter="enter('-835326304871961386');" onmouseout="out('-835326304871961386');" style="">2727                  HashMap&lt;Long, FolderInfo&gt; currentScreenFolders,                                                   </span>
<span class="-5337898381804311151" onmouseenter="enter('-5337898381804311151');" onmouseout="out('-5337898381804311151');" style="">2728                  HashMap&lt;Long, FolderInfo&gt; otherScreenFolders) {                                                   </span>
<span  style="">2729                                                                                                                    </span>
<span class="5476103458254751398" onmouseenter="enter('5476103458254751398');" onmouseout="out('5476103458254751398');" style="">2730              for (long id : folders.keySet()) {                                                                    </span>
<span class="-1043527829048640643" onmouseenter="enter('-1043527829048640643');" onmouseout="out('-1043527829048640643');" style="">2731                  ItemInfo info = itemsIdMap.get(id);                                                               </span>
<span class="2660177146353218833" onmouseenter="enter('2660177146353218833');" onmouseout="out('2660177146353218833');" style="">2732                  FolderInfo folder = folders.get(id);                                                              </span>
<span class="1070396563257369459" onmouseenter="enter('1070396563257369459');" onmouseout="out('1070396563257369459');" style="">2733                  if (info == null || folder == null) continue;                                                     </span>
<span class="-2700526009056688618" onmouseenter="enter('-2700526009056688618');" onmouseout="out('-2700526009056688618');" style="">2734                  if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                             </span>
<span class="-6694119585175412501" onmouseenter="enter('-6694119585175412501');" onmouseout="out('-6694119585175412501');" style="">2735                          info.screenId == currentScreenId) {                                                       </span>
<span class="9103793645851851238" onmouseenter="enter('9103793645851851238');" onmouseout="out('9103793645851851238');" style="">2736                      currentScreenFolders.put(id, folder);                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2737                  } else {                                                                                          </span>
<span class="2209694610169579401" onmouseenter="enter('2209694610169579401');" onmouseout="out('2209694610169579401');" style="">2738                      otherScreenFolders.put(id, folder);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2739                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2740              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2741          }                                                                                                         </span>
<span  style="">2742                                                                                                                    </span>
<span class="-1404838629334872973" onmouseenter="enter('-1404838629334872973');" onmouseout="out('-1404838629334872973');" style="">2743          /** Sorts the set of items by hotseat, workspace (spatially from top to bottom, left to                   </span>
<span class="2331484748997422212" onmouseenter="enter('2331484748997422212');" onmouseout="out('2331484748997422212');" style="">2744           * right) */                                                                                              </span>
<span class="4197577433481844567" onmouseenter="enter('4197577433481844567');" onmouseout="out('4197577433481844567');" style="">2745          private void sortWorkspaceItemsSpatially(ArrayList&lt;ItemInfo&gt; workspaceItems) {                            </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2746              final LauncherAppState app = LauncherAppState.getInstance();                                          </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2747              final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                   </span>
<span class="7420301678455304067" onmouseenter="enter('7420301678455304067');" onmouseout="out('7420301678455304067');" style="">2748              // XXX: review this                                                                                   </span>
<span class="5036789581710507500" onmouseenter="enter('5036789581710507500');" onmouseout="out('5036789581710507500');" style="">2749              Collections.sort(workspaceItems, new Comparator&lt;ItemInfo&gt;() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2750                  @Override                                                                                         </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2751                  public int compare(ItemInfo lhs, ItemInfo rhs) {                                                  </span>
<span class="7519014981914073063" onmouseenter="enter('7519014981914073063');" onmouseout="out('7519014981914073063');" style="">2752                      int cellCountX = (int) grid.numColumns;                                                       </span>
<span class="5038685396458105053" onmouseenter="enter('5038685396458105053');" onmouseout="out('5038685396458105053');" style="">2753                      int cellCountY = (int) grid.numRows;                                                          </span>
<span class="2270724071285143981" onmouseenter="enter('2270724071285143981');" onmouseout="out('2270724071285143981');" style="">2754                      int screenOffset = cellCountX * cellCountY;                                                   </span>
<span class="-1359829540566141263" onmouseenter="enter('-1359829540566141263');" onmouseout="out('-1359829540566141263');" style="">2755                      int containerOffset = screenOffset * (Launcher.SCREEN_COUNT + 1); // +1 hotseat               </span>
<span class="-5686828087182476360" onmouseenter="enter('-5686828087182476360');" onmouseout="out('-5686828087182476360');" style="">2756                      long lr = (lhs.container * containerOffset + lhs.screenId * screenOffset +                    </span>
<span class="7712455780852264002" onmouseenter="enter('7712455780852264002');" onmouseout="out('7712455780852264002');" style="">2757                              lhs.cellY * cellCountX + lhs.cellX);                                                  </span>
<span class="4979104026657461493" onmouseenter="enter('4979104026657461493');" onmouseout="out('4979104026657461493');" style="">2758                      long rr = (rhs.container * containerOffset + rhs.screenId * screenOffset +                    </span>
<span class="-2381270400025166051" onmouseenter="enter('-2381270400025166051');" onmouseout="out('-2381270400025166051');" style="">2759                              rhs.cellY * cellCountX + rhs.cellX);                                                  </span>
<span class="-4118467969899844825" onmouseenter="enter('-4118467969899844825');" onmouseout="out('-4118467969899844825');" style="">2760                      return (int) (lr - rr);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2761                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2762              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2763          }                                                                                                         </span>
<span  style="">2764                                                                                                                    </span>
<span class="-2914095713166652734" onmouseenter="enter('-2914095713166652734');" onmouseout="out('-2914095713166652734');" style="">2765          private void bindWorkspaceScreens(final Callbacks oldCallbacks,                                           </span>
<span class="-4834279311466229697" onmouseenter="enter('-4834279311466229697');" onmouseout="out('-4834279311466229697');" style="">2766                  final ArrayList&lt;Long&gt; orderedScreens) {                                                           </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2767              final Runnable r = new Runnable() {                                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2768                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2769                  public void run() {                                                                               </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2770                      Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                          </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2771                      if (callbacks != null) {                                                                      </span>
<span class="-657438592163932392" onmouseenter="enter('-657438592163932392');" onmouseout="out('-657438592163932392');" style="">2772                          callbacks.bindScreens(orderedScreens);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2773                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2774                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2775              };                                                                                                    </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2776              runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2777          }                                                                                                         </span>
<span  style="">2778                                                                                                                    </span>
<span class="2462723938814167389" onmouseenter="enter('2462723938814167389');" onmouseout="out('2462723938814167389');" style="">2779          private void bindWorkspaceItems(final Callbacks oldCallbacks,                                             </span>
<span class="3131608111144182051" onmouseenter="enter('3131608111144182051');" onmouseout="out('3131608111144182051');" style="">2780                  final ArrayList&lt;ItemInfo&gt; workspaceItems,                                                         </span>
<span class="-9171435870290402492" onmouseenter="enter('-9171435870290402492');" onmouseout="out('-9171435870290402492');" style="">2781                  final ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                                </span>
<span class="-215271553361392889" onmouseenter="enter('-215271553361392889');" onmouseout="out('-215271553361392889');" style="">2782                  final HashMap&lt;Long, FolderInfo&gt; folders,                                                          </span>
<span class="8358584326194096705" onmouseenter="enter('8358584326194096705');" onmouseout="out('8358584326194096705');" style="">2783                  ArrayList&lt;Runnable&gt; deferredBindRunnables) {                                                      </span>
<span  style="">2784                                                                                                                    </span>
<span class="6705996702729308966" onmouseenter="enter('6705996702729308966');" onmouseout="out('6705996702729308966');" style="">2785              final boolean postOnMainThread = (deferredBindRunnables != null);                                     </span>
<span  style="">2786                                                                                                                    </span>
<span class="-8582136977498244048" onmouseenter="enter('-8582136977498244048');" onmouseout="out('-8582136977498244048');" style="">2787              // Bind the workspace items                                                                           </span>
<span class="-7354566132986496753" onmouseenter="enter('-7354566132986496753');" onmouseout="out('-7354566132986496753');" style="">2788              int N = workspaceItems.size();                                                                        </span>
<span class="8316943469476905111" onmouseenter="enter('8316943469476905111');" onmouseout="out('8316943469476905111');" style="">2789              for (int i = 0; i &lt; N; i += ITEMS_CHUNK) {                                                            </span>
<span class="4892427267481855411" onmouseenter="enter('4892427267481855411');" onmouseout="out('4892427267481855411');" style="">2790                  final int start = i;                                                                              </span>
<span class="-1876539668545683746" onmouseenter="enter('-1876539668545683746');" onmouseout="out('-1876539668545683746');" style="">2791                  final int chunkSize = (i+ITEMS_CHUNK &lt;= N) ? ITEMS_CHUNK : (N-i);                                 </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2792                  final Runnable r = new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2793                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2794                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2795                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2796                          if (callbacks != null) {                                                                  </span>
<span class="5089922212197568209" onmouseenter="enter('5089922212197568209');" onmouseout="out('5089922212197568209');" style="">2797                              callbacks.bindItems(workspaceItems, start, start+chunkSize,                           </span>
<span class="9106099237950392606" onmouseenter="enter('9106099237950392606');" onmouseout="out('9106099237950392606');" style="">2798                                      false);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2799                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2800                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2801                  };                                                                                                </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2802                  if (postOnMainThread) {                                                                           </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2803 -                    deferredBindRunnables.add(r);                                                                 </span>
<span class="-1789583999881960301" onmouseenter="enter('-1789583999881960301');" onmouseout="out('-1789583999881960301');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2804 +                    synchronized (deferredBindRunnables) {                                                        </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2805 +                        deferredBindRunnables.add(r);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2806 +                    }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2807                  } else {                                                                                          </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2808                      runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2809                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2810              }                                                                                                     </span>
<span  style="">2811                                                                                                                    </span>
<span class="-3289339942871725334" onmouseenter="enter('-3289339942871725334');" onmouseout="out('-3289339942871725334');" style="">2812              // Bind the folders                                                                                   </span>
<span class="-7483796215228262161" onmouseenter="enter('-7483796215228262161');" onmouseout="out('-7483796215228262161');" style="">2813              if (!folders.isEmpty()) {                                                                             </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2814                  final Runnable r = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2815                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2816                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2817                          if (callbacks != null) {                                                                  </span>
<span class="-5386182796873001970" onmouseenter="enter('-5386182796873001970');" onmouseout="out('-5386182796873001970');" style="">2818                              callbacks.bindFolders(folders);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2819                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2820                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2821                  };                                                                                                </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2822                  if (postOnMainThread) {                                                                           </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2823 -                    deferredBindRunnables.add(r);                                                                 </span>
<span class="-1789583999881960301" onmouseenter="enter('-1789583999881960301');" onmouseout="out('-1789583999881960301');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2824 +                    synchronized (deferredBindRunnables) {                                                        </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2825 +                        deferredBindRunnables.add(r);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2826 +                    }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2827                  } else {                                                                                          </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2828                      runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2829                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2830              }                                                                                                     </span>
<span  style="">2831                                                                                                                    </span>
<span class="-3655716380766613611" onmouseenter="enter('-3655716380766613611');" onmouseout="out('-3655716380766613611');" style="">2832              // Bind the widgets, one at a time                                                                    </span>
<span class="-8489280060790503293" onmouseenter="enter('-8489280060790503293');" onmouseout="out('-8489280060790503293');" style="">2833              N = appWidgets.size();                                                                                </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2834              for (int i = 0; i &lt; N; i++) {                                                                         </span>
<span class="1244623159456991119" onmouseenter="enter('1244623159456991119');" onmouseout="out('1244623159456991119');" style="">2835                  final LauncherAppWidgetInfo widget = appWidgets.get(i);                                           </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2836                  final Runnable r = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2837                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2838                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2839                          if (callbacks != null) {                                                                  </span>
<span class="-6128295543460120155" onmouseenter="enter('-6128295543460120155');" onmouseout="out('-6128295543460120155');" style="">2840                              callbacks.bindAppWidget(widget);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2841                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2842                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2843                  };                                                                                                </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2844                  if (postOnMainThread) {                                                                           </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2845                      deferredBindRunnables.add(r);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2846                  } else {                                                                                          </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2847                      runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2848                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2849              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2850          }                                                                                                         </span>
<span  style="">2851                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2852          /**                                                                                                       </span>
<span class="2657234197326019604" onmouseenter="enter('2657234197326019604');" onmouseout="out('2657234197326019604');" style="">2853           * Binds all loaded data to actual views on the main thread.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2854           */                                                                                                       </span>
<span class="2515782410575020505" onmouseenter="enter('2515782410575020505');" onmouseout="out('2515782410575020505');" style="">2855          private void bindWorkspace(int synchronizeBindPage, final boolean isUpgradePath) {                        </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2856              final long t = SystemClock.uptimeMillis();                                                            </span>
<span class="-6867724507948428803" onmouseenter="enter('-6867724507948428803');" onmouseout="out('-6867724507948428803');" style="">2857              Runnable r;                                                                                           </span>
<span  style="">2858                                                                                                                    </span>
<span class="7433359470613785749" onmouseenter="enter('7433359470613785749');" onmouseout="out('7433359470613785749');" style="">2859              // Don&#x27;t use these two variables in any of the callback runnables.                                    </span>
<span class="-3941343762342876699" onmouseenter="enter('-3941343762342876699');" onmouseout="out('-3941343762342876699');" style="">2860              // Otherwise we hold a reference to them.                                                             </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2861              final Callbacks oldCallbacks = mCallbacks.get();                                                      </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2862              if (oldCallbacks == null) {                                                                           </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2863                  // This launcher has exited and nobody bothered to tell us.  Just bail.                           </span>
<span class="3451244406562267616" onmouseenter="enter('3451244406562267616');" onmouseout="out('3451244406562267616');" style="">2864                  Log.w(TAG, &quot;LoaderTask running with no launcher&quot;);                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2865                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2866              }                                                                                                     </span>
<span  style="">2867                                                                                                                    </span>
<span class="1896400737527502430" onmouseenter="enter('1896400737527502430');" onmouseout="out('1896400737527502430');" style="">2868              // Save a copy of all the bg-thread collections                                                       </span>
<span class="8376150118125167095" onmouseenter="enter('8376150118125167095');" onmouseout="out('8376150118125167095');" style="">2869              ArrayList&lt;ItemInfo&gt; workspaceItems = new ArrayList&lt;ItemInfo&gt;();                                       </span>
<span class="-9044996375001817267" onmouseenter="enter('-9044996375001817267');" onmouseout="out('-9044996375001817267');" style="">2870              ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets =                                                         </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2871                      new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                       </span>
<span class="1486993560554459234" onmouseenter="enter('1486993560554459234');" onmouseout="out('1486993560554459234');" style="">2872              HashMap&lt;Long, FolderInfo&gt; folders = new HashMap&lt;Long, FolderInfo&gt;();                                  </span>
<span class="-2531396011753159513" onmouseenter="enter('-2531396011753159513');" onmouseout="out('-2531396011753159513');" style="">2873              HashMap&lt;Long, ItemInfo&gt; itemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                                   </span>
<span class="2122428953856879736" onmouseenter="enter('2122428953856879736');" onmouseout="out('2122428953856879736');" style="">2874              ArrayList&lt;Long&gt; orderedScreenIds = new ArrayList&lt;Long&gt;();                                             </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2875              synchronized (sBgLock) {                                                                              </span>
<span class="2318166879831487746" onmouseenter="enter('2318166879831487746');" onmouseout="out('2318166879831487746');" style="">2876                  workspaceItems.addAll(sBgWorkspaceItems);                                                         </span>
<span class="5776161881735381038" onmouseenter="enter('5776161881735381038');" onmouseout="out('5776161881735381038');" style="">2877                  appWidgets.addAll(sBgAppWidgets);                                                                 </span>
<span class="1929780610659636161" onmouseenter="enter('1929780610659636161');" onmouseout="out('1929780610659636161');" style="">2878                  folders.putAll(sBgFolders);                                                                       </span>
<span class="3382494184063613290" onmouseenter="enter('3382494184063613290');" onmouseout="out('3382494184063613290');" style="">2879                  itemsIdMap.putAll(sBgItemsIdMap);                                                                 </span>
<span class="-8476373911620507604" onmouseenter="enter('-8476373911620507604');" onmouseout="out('-8476373911620507604');" style="">2880                  orderedScreenIds.addAll(sBgWorkspaceScreens);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2881              }                                                                                                     </span>
<span  style="">2882                                                                                                                    </span>
<span class="-6727444800593242016" onmouseenter="enter('-6727444800593242016');" onmouseout="out('-6727444800593242016');" style="">2883              final boolean isLoadingSynchronously =                                                                </span>
<span class="-5819807820500279130" onmouseenter="enter('-5819807820500279130');" onmouseout="out('-5819807820500279130');" style="">2884                      synchronizeBindPage != PagedView.INVALID_RESTORE_PAGE;                                        </span>
<span class="2949253642379813881" onmouseenter="enter('2949253642379813881');" onmouseout="out('2949253642379813881');" style="">2885              int currScreen = isLoadingSynchronously ? synchronizeBindPage :                                       </span>
<span class="-3178994835189561329" onmouseenter="enter('-3178994835189561329');" onmouseout="out('-3178994835189561329');" style="">2886                  oldCallbacks.getCurrentWorkspaceScreen();                                                         </span>
<span class="-8072033936298463796" onmouseenter="enter('-8072033936298463796');" onmouseout="out('-8072033936298463796');" style="">2887              if (currScreen &gt;= orderedScreenIds.size()) {                                                          </span>
<span class="6825640116866860115" onmouseenter="enter('6825640116866860115');" onmouseout="out('6825640116866860115');" style="">2888                  // There may be no workspace screens (just hotseat items and an empty page).                      </span>
<span class="-1349681419310339536" onmouseenter="enter('-1349681419310339536');" onmouseout="out('-1349681419310339536');" style="">2889                  currScreen = PagedView.INVALID_RESTORE_PAGE;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2890              }                                                                                                     </span>
<span class="-335994314648006585" onmouseenter="enter('-335994314648006585');" onmouseout="out('-335994314648006585');" style="">2891              final int currentScreen = currScreen;                                                                 </span>
<span class="2351793782480240365" onmouseenter="enter('2351793782480240365');" onmouseout="out('2351793782480240365');" style="">2892              final long currentScreenId = currentScreen &lt; 0                                                        </span>
<span class="-3569859106639415689" onmouseenter="enter('-3569859106639415689');" onmouseout="out('-3569859106639415689');" style="">2893                      ? INVALID_SCREEN_ID : orderedScreenIds.get(currentScreen);                                    </span>
<span  style="">2894                                                                                                                    </span>
<span class="6814554556760518768" onmouseenter="enter('6814554556760518768');" onmouseout="out('6814554556760518768');" style="">2895              // Load all the items that are on the current page first (and in the process, unbind                  </span>
<span class="-8025412368184811901" onmouseenter="enter('-8025412368184811901');" onmouseout="out('-8025412368184811901');" style="">2896              // all the existing workspace items before we call startBinding() below.                              </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="">2897              unbindWorkspaceItemsOnMainThread();                                                                   </span>
<span  style="">2898                                                                                                                    </span>
<span class="-2890632990436762470" onmouseenter="enter('-2890632990436762470');" onmouseout="out('-2890632990436762470');" style="">2899              // Separate the items that are on the current screen, and all the other remaining items               </span>
<span class="-1725873569461296561" onmouseenter="enter('-1725873569461296561');" onmouseout="out('-1725873569461296561');" style="">2900              ArrayList&lt;ItemInfo&gt; currentWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                                </span>
<span class="-3652813720009519444" onmouseenter="enter('-3652813720009519444');" onmouseout="out('-3652813720009519444');" style="">2901              ArrayList&lt;ItemInfo&gt; otherWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                                  </span>
<span class="1957921863279922763" onmouseenter="enter('1957921863279922763');" onmouseout="out('1957921863279922763');" style="">2902              ArrayList&lt;LauncherAppWidgetInfo&gt; currentAppWidgets =                                                  </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2903                      new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                       </span>
<span class="-340469327534164281" onmouseenter="enter('-340469327534164281');" onmouseout="out('-340469327534164281');" style="">2904              ArrayList&lt;LauncherAppWidgetInfo&gt; otherAppWidgets =                                                    </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2905                      new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                       </span>
<span class="1678682221916250445" onmouseenter="enter('1678682221916250445');" onmouseout="out('1678682221916250445');" style="">2906              HashMap&lt;Long, FolderInfo&gt; currentFolders = new HashMap&lt;Long, FolderInfo&gt;();                           </span>
<span class="6055163357301009248" onmouseenter="enter('6055163357301009248');" onmouseout="out('6055163357301009248');" style="">2907              HashMap&lt;Long, FolderInfo&gt; otherFolders = new HashMap&lt;Long, FolderInfo&gt;();                             </span>
<span  style="">2908                                                                                                                    </span>
<span class="-6089822518842723893" onmouseenter="enter('-6089822518842723893');" onmouseout="out('-6089822518842723893');" style="">2909              filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems,                   </span>
<span class="-8375758480995422912" onmouseenter="enter('-8375758480995422912');" onmouseout="out('-8375758480995422912');" style="">2910                      otherWorkspaceItems);                                                                         </span>
<span class="-866463348054163616" onmouseenter="enter('-866463348054163616');" onmouseout="out('-866463348054163616');" style="">2911              filterCurrentAppWidgets(currentScreenId, appWidgets, currentAppWidgets,                               </span>
<span class="4579895579276341407" onmouseenter="enter('4579895579276341407');" onmouseout="out('4579895579276341407');" style="">2912                      otherAppWidgets);                                                                             </span>
<span class="-8098352111604685386" onmouseenter="enter('-8098352111604685386');" onmouseout="out('-8098352111604685386');" style="">2913              filterCurrentFolders(currentScreenId, itemsIdMap, folders, currentFolders,                            </span>
<span class="9146999591596374961" onmouseenter="enter('9146999591596374961');" onmouseout="out('9146999591596374961');" style="">2914                      otherFolders);                                                                                </span>
<span class="-3334490908115707670" onmouseenter="enter('-3334490908115707670');" onmouseout="out('-3334490908115707670');" style="">2915              sortWorkspaceItemsSpatially(currentWorkspaceItems);                                                   </span>
<span class="7557616132302919391" onmouseenter="enter('7557616132302919391');" onmouseout="out('7557616132302919391');" style="">2916              sortWorkspaceItemsSpatially(otherWorkspaceItems);                                                     </span>
<span  style="">2917                                                                                                                    </span>
<span class="-5681027322920042460" onmouseenter="enter('-5681027322920042460');" onmouseout="out('-5681027322920042460');" style="">2918              // Tell the workspace that we&#x27;re about to start binding items                                         </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2919              r = new Runnable() {                                                                                  </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2920                  public void run() {                                                                               </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2921                      Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                          </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2922                      if (callbacks != null) {                                                                      </span>
<span class="-4858717627969339167" onmouseenter="enter('-4858717627969339167');" onmouseout="out('-4858717627969339167');" style="">2923                          callbacks.startBinding();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2924                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2925                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2926              };                                                                                                    </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2927              runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                     </span>
<span  style="">2928                                                                                                                    </span>
<span class="5270406270692369283" onmouseenter="enter('5270406270692369283');" onmouseout="out('5270406270692369283');" style="">2929              bindWorkspaceScreens(oldCallbacks, orderedScreenIds);                                                 </span>
<span  style="">2930                                                                                                                    </span>
<span class="-8614752954403058095" onmouseenter="enter('-8614752954403058095');" onmouseout="out('-8614752954403058095');" style="">2931              // Load items on the current page                                                                     </span>
<span class="7514755776427017102" onmouseenter="enter('7514755776427017102');" onmouseout="out('7514755776427017102');" style="">2932              bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets,                            </span>
<span class="-6104188658851873503" onmouseenter="enter('-6104188658851873503');" onmouseout="out('-6104188658851873503');" style="">2933                      currentFolders, null);                                                                        </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2934              if (isLoadingSynchronously) {                                                                         </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2935                  r = new Runnable() {                                                                              </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2936                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2937                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="1520569606497568986" onmouseenter="enter('1520569606497568986');" onmouseout="out('1520569606497568986');" style="">2938                          if (callbacks != null &amp;&amp; currentScreen != PagedView.INVALID_RESTORE_PAGE) {               </span>
<span class="-8453570054408401460" onmouseenter="enter('-8453570054408401460');" onmouseout="out('-8453570054408401460');" style="">2939                              callbacks.onPageBoundSynchronously(currentScreen);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2940                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2941                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2942                  };                                                                                                </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2943                  runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2944              }                                                                                                     </span>
<span  style="">2945                                                                                                                    </span>
<span class="-5413736965388393233" onmouseenter="enter('-5413736965388393233');" onmouseout="out('-5413736965388393233');" style="">2946              // Load all the remaining pages (if we are loading synchronously, we want to defer this               </span>
<span class="-2955787106587599134" onmouseenter="enter('-2955787106587599134');" onmouseout="out('-2955787106587599134');" style="">2947              // work until after the first render)                                                                 </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2948 -            mDeferredBindRunnables.clear();                                                                       </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2949 +            synchronized (mDeferredBindRunnables) {                                                               </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2950 +                mDeferredBindRunnables.clear();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2951 +            }                                                                                                     </span>
<span class="5032352887958756295" onmouseenter="enter('5032352887958756295');" onmouseout="out('5032352887958756295');" style="">2952              bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders,                  </span>
<span class="-2167949041803207061" onmouseenter="enter('-2167949041803207061');" onmouseout="out('-2167949041803207061');" style="">2953                      (isLoadingSynchronously ? mDeferredBindRunnables : null));                                    </span>
<span  style="">2954                                                                                                                    </span>
<span class="4011061048965913553" onmouseenter="enter('4011061048965913553');" onmouseout="out('4011061048965913553');" style="">2955              // Tell the workspace that we&#x27;re done binding items                                                   </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2956              r = new Runnable() {                                                                                  </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2957                  public void run() {                                                                               </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2958                      Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                          </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2959                      if (callbacks != null) {                                                                      </span>
<span class="4571657590383009749" onmouseenter="enter('4571657590383009749');" onmouseout="out('4571657590383009749');" style="">2960                          callbacks.finishBindingItems(isUpgradePath);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2961                      }                                                                                             </span>
<span  style="">2962                                                                                                                    </span>
<span class="3327220122133784387" onmouseenter="enter('3327220122133784387');" onmouseout="out('3327220122133784387');" style="">2963                      // If we&#x27;re profiling, ensure this is the last thing in the queue.                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2964                      if (DEBUG_LOADERS) {                                                                          </span>
<span class="355954012869630075" onmouseenter="enter('355954012869630075');" onmouseout="out('355954012869630075');" style="">2965                          Log.d(TAG, &quot;bound workspace in &quot;                                                          </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2966                              + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2967                      }                                                                                             </span>
<span  style="">2968                                                                                                                    </span>
<span class="-2372807547969983284" onmouseenter="enter('-2372807547969983284');" onmouseout="out('-2372807547969983284');" style="">2969                      mIsLoadingAndBindingWorkspace = false;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2970                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2971              };                                                                                                    </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2972              if (isLoadingSynchronously) {                                                                         </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2973 -                mDeferredBindRunnables.add(r);                                                                    </span>
<span class="-5332579163198944902" onmouseenter="enter('-5332579163198944902');" onmouseout="out('-5332579163198944902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2974 +                synchronized (mDeferredBindRunnables) {                                                           </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2975 +                    mDeferredBindRunnables.add(r);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2976 +                }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2977              } else {                                                                                              </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2978                  runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2979              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2980          }                                                                                                         </span>
<span  style="">2981                                                                                                                    </span>
<span class="-8837645024880398734" onmouseenter="enter('-8837645024880398734');" onmouseout="out('-8837645024880398734');" style="">2982          private void loadAndBindAllApps() {                                                                       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2983              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-2830976254331120227" onmouseenter="enter('-2830976254331120227');" onmouseout="out('-2830976254331120227');" style="">2984                  Log.d(TAG, &quot;loadAndBindAllApps mAllAppsLoaded=&quot; + mAllAppsLoaded);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2985              }                                                                                                     </span>
<span class="-6125216986221494355" onmouseenter="enter('-6125216986221494355');" onmouseout="out('-6125216986221494355');" style="">2986              if (!mAllAppsLoaded) {                                                                                </span>
<span class="5842757820135196564" onmouseenter="enter('5842757820135196564');" onmouseout="out('5842757820135196564');" style="">2987                  loadAllApps();                                                                                    </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">2988                  synchronized (LoaderTask.this) {                                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2989                      if (mStopped) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2990                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2991                      }                                                                                             </span>
<span class="4623635226903027710" onmouseenter="enter('4623635226903027710');" onmouseout="out('4623635226903027710');" style="">2992                      mAllAppsLoaded = true;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2993                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2994              } else {                                                                                              </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">2995                  onlyBindAllApps();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2996              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2997          }                                                                                                         </span>
<span  style="">2998                                                                                                                    </span>
<span class="4707433981787810272" onmouseenter="enter('4707433981787810272');" onmouseout="out('4707433981787810272');" style="">2999          private void onlyBindAllApps() {                                                                          </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">3000              final Callbacks oldCallbacks = mCallbacks.get();                                                      </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">3001              if (oldCallbacks == null) {                                                                           </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">3002                  // This launcher has exited and nobody bothered to tell us.  Just bail.                           </span>
<span class="1659909424723635951" onmouseenter="enter('1659909424723635951');" onmouseout="out('1659909424723635951');" style="">3003                  Log.w(TAG, &quot;LoaderTask running with no launcher (onlyBindAllApps)&quot;);                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3004                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3005              }                                                                                                     </span>
<span  style="">3006                                                                                                                    </span>
<span class="904073869424416989" onmouseenter="enter('904073869424416989');" onmouseout="out('904073869424416989');" style="">3007              // shallow copy                                                                                       </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">3008              @SuppressWarnings(&quot;unchecked&quot;)                                                                        </span>
<span class="6400779648201267598" onmouseenter="enter('6400779648201267598');" onmouseout="out('6400779648201267598');" style="">3009              final ArrayList&lt;AppInfo&gt; list                                                                         </span>
<span class="-2385577679344520462" onmouseenter="enter('-2385577679344520462');" onmouseout="out('-2385577679344520462');" style="">3010                      = (ArrayList&lt;AppInfo&gt;) mBgAllAppsList.data.clone();                                           </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">3011              Runnable r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3012                  public void run() {                                                                               </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">3013                      final long t = SystemClock.uptimeMillis();                                                    </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">3014                      final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                    </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">3015                      if (callbacks != null) {                                                                      </span>
<span class="-4175293191087427555" onmouseenter="enter('-4175293191087427555');" onmouseout="out('-4175293191087427555');" style="">3016                          callbacks.bindAllApplications(list);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3017                      }                                                                                             </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3018                      if (DEBUG_LOADERS) {                                                                          </span>
<span class="-8852680552322187165" onmouseenter="enter('-8852680552322187165');" onmouseout="out('-8852680552322187165');" style="">3019                          Log.d(TAG, &quot;bound all &quot; + list.size() + &quot; apps from cache in &quot;                            </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">3020                                  + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3021                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3022                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3023              };                                                                                                    </span>
<span class="1625697599418198126" onmouseenter="enter('1625697599418198126');" onmouseout="out('1625697599418198126');" style="">3024              boolean isRunningOnMainThread = !(sWorkerThread.getThreadId() == Process.myTid());                    </span>
<span class="-5455987777066046644" onmouseenter="enter('-5455987777066046644');" onmouseout="out('-5455987777066046644');" style="">3025              if (isRunningOnMainThread) {                                                                          </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style="">3026                  r.run();                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3027              } else {                                                                                              </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="">3028                  mHandler.post(r);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3029              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3030          }                                                                                                         </span>
<span  style="">3031                                                                                                                    </span>
<span class="-6895852158956881814" onmouseenter="enter('-6895852158956881814');" onmouseout="out('-6895852158956881814');" style="">3032          private void loadAllApps() {                                                                              </span>
<span class="3240137791137450764" onmouseenter="enter('3240137791137450764');" onmouseout="out('3240137791137450764');" style="">3033              final long loadTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                 </span>
<span  style="">3034                                                                                                                    </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">3035              final Callbacks oldCallbacks = mCallbacks.get();                                                      </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">3036              if (oldCallbacks == null) {                                                                           </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">3037                  // This launcher has exited and nobody bothered to tell us.  Just bail.                           </span>
<span class="-6509823964207432628" onmouseenter="enter('-6509823964207432628');" onmouseout="out('-6509823964207432628');" style="">3038                  Log.w(TAG, &quot;LoaderTask running with no launcher (loadAllApps)&quot;);                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3039                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3040              }                                                                                                     </span>
<span  style="">3041                                                                                                                    </span>
<span class="1501892088590866369" onmouseenter="enter('1501892088590866369');" onmouseout="out('1501892088590866369');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3042 -            final PackageManager packageManager = mContext.getPackageManager();                                   </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="">3043              final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                                       </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="">3044              mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                     </span>
<span  style="">3045                                                                                                                    </span>
<span class="-3689765283860688946" onmouseenter="enter('-3689765283860688946');" onmouseout="out('-3689765283860688946');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3046 +            final List&lt;UserHandleCompat&gt; profiles = mUserManager.getUserProfiles();                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3047 +                                                                                                                  </span>
<span class="2323997493385795900" onmouseenter="enter('2323997493385795900');" onmouseout="out('2323997493385795900');" style="">3048              // Clear the list of apps                                                                             </span>
<span class="-3100741238331493656" onmouseenter="enter('-3100741238331493656');" onmouseout="out('-3100741238331493656');" style="">3049              mBgAllAppsList.clear();                                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3050 -                                                                                                                  </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3051 -            // Query for the set of apps                                                                          </span>
<span class="6799319218362813943" onmouseenter="enter('6799319218362813943');" onmouseout="out('6799319218362813943');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3052 -            final long qiaTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                  </span>
<span class="-7993784721640929386" onmouseenter="enter('-7993784721640929386');" onmouseout="out('-7993784721640929386');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3053 -            List&lt;ResolveInfo&gt; apps = packageManager.queryIntentActivities(mainIntent, 0);                         </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3054 -            if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-8953089628779584367" onmouseenter="enter('-8953089628779584367');" onmouseout="out('-8953089628779584367');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3055 -                Log.d(TAG, &quot;queryIntentActivities took &quot;                                                          </span>
<span class="8237341079980485738" onmouseenter="enter('8237341079980485738');" onmouseout="out('8237341079980485738');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3056 -                        + (SystemClock.uptimeMillis()-qiaTime) + &quot;ms&quot;);                                           </span>
<span class="-9015079490762020933" onmouseenter="enter('-9015079490762020933');" onmouseout="out('-9015079490762020933');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3057 -                Log.d(TAG, &quot;queryIntentActivities got &quot; + apps.size() + &quot; apps&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3058 -            }                                                                                                     </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3059 -            // Fail if we don&#x27;t have any apps                                                                     </span>
<span class="-1385682343056466434" onmouseenter="enter('-1385682343056466434');" onmouseout="out('-1385682343056466434');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3060 -            if (apps == null || apps.isEmpty()) {                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3061 -                return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3062 -            }                                                                                                     </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3063 -            // Sort the applications by name                                                                      </span>
<span class="5879018485786384871" onmouseenter="enter('5879018485786384871');" onmouseout="out('5879018485786384871');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3064 -            final long sortTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                 </span>
<span class="3347614076781191804" onmouseenter="enter('3347614076781191804');" onmouseout="out('3347614076781191804');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3065 -            Collections.sort(apps,                                                                                </span>
<span class="-8211974845882715204" onmouseenter="enter('-8211974845882715204');" onmouseout="out('-8211974845882715204');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3066 -                    new LauncherModel.ShortcutNameComparator(packageManager, mLabelCache));                       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3067 -            if (DEBUG_LOADERS) {                                                                                  </span>
<span class="8116347759372038508" onmouseenter="enter('8116347759372038508');" onmouseout="out('8116347759372038508');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3068 -                Log.d(TAG, &quot;sort took &quot;                                                                           </span>
<span class="992817212926202968" onmouseenter="enter('992817212926202968');" onmouseout="out('992817212926202968');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3069 -                        + (SystemClock.uptimeMillis()-sortTime) + &quot;ms&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3070 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3071 -                                                                                                                  </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3072 -            // Create the ApplicationInfos                                                                        </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3073 -            for (int i = 0; i &lt; apps.size(); i++) {                                                               </span>
<span class="2626157602240887809" onmouseenter="enter('2626157602240887809');" onmouseout="out('2626157602240887809');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3074 -                ResolveInfo app = apps.get(i);                                                                    </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3075 -                // This builds the icon bitmaps.                                                                  </span>
<span class="-6607005785467864621" onmouseenter="enter('-6607005785467864621');" onmouseout="out('-6607005785467864621');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3076 -                mBgAllAppsList.add(new AppInfo(packageManager, app,                                               </span>
<span class="-2018038209439913805" onmouseenter="enter('-2018038209439913805');" onmouseout="out('-2018038209439913805');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3077 -                        mIconCache, mLabelCache));                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3078 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3079 -                                                                                                                  </span>
<span class="-2262518428251923925" onmouseenter="enter('-2262518428251923925');" onmouseout="out('-2262518428251923925');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3080 +            for (UserHandleCompat user : profiles) {                                                              </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3081 +                // Query for the set of apps                                                                      </span>
<span class="6799319218362813943" onmouseenter="enter('6799319218362813943');" onmouseout="out('6799319218362813943');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3082 +                final long qiaTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                              </span>
<span class="2012422809707549193" onmouseenter="enter('2012422809707549193');" onmouseout="out('2012422809707549193');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3083 +                List&lt;LauncherActivityInfoCompat&gt; apps = mLauncherApps.getActivityList(null, user);                </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3084 +                if (DEBUG_LOADERS) {                                                                              </span>
<span class="2295985568720272905" onmouseenter="enter('2295985568720272905');" onmouseout="out('2295985568720272905');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3085 +                    Log.d(TAG, &quot;getActivityList took &quot;                                                            </span>
<span class="-4615420342619003975" onmouseenter="enter('-4615420342619003975');" onmouseout="out('-4615420342619003975');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3086 +                            + (SystemClock.uptimeMillis()-qiaTime) + &quot;ms for user &quot; + user);                      </span>
<span class="-305887566992077245" onmouseenter="enter('-305887566992077245');" onmouseout="out('-305887566992077245');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3087 +                    Log.d(TAG, &quot;getActivityList got &quot; + apps.size() + &quot; apps for user &quot; + user);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3088 +                }                                                                                                 </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3089 +                // Fail if we don&#x27;t have any apps                                                                 </span>
<span class="-1385682343056466434" onmouseenter="enter('-1385682343056466434');" onmouseout="out('-1385682343056466434');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3090 +                if (apps == null || apps.isEmpty()) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3091 +                    return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3092 +                }                                                                                                 </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3093 +                // Sort the applications by name                                                                  </span>
<span class="5879018485786384871" onmouseenter="enter('5879018485786384871');" onmouseout="out('5879018485786384871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3094 +                final long sortTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                             </span>
<span class="3347614076781191804" onmouseenter="enter('3347614076781191804');" onmouseout="out('3347614076781191804');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3095 +                Collections.sort(apps,                                                                            </span>
<span class="-5419021632247745878" onmouseenter="enter('-5419021632247745878');" onmouseout="out('-5419021632247745878');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3096 +                        new LauncherModel.ShortcutNameComparator(mLabelCache));                                   </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3097 +                if (DEBUG_LOADERS) {                                                                              </span>
<span class="8116347759372038508" onmouseenter="enter('8116347759372038508');" onmouseout="out('8116347759372038508');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3098 +                    Log.d(TAG, &quot;sort took &quot;                                                                       </span>
<span class="992817212926202968" onmouseenter="enter('992817212926202968');" onmouseout="out('992817212926202968');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3099 +                            + (SystemClock.uptimeMillis()-sortTime) + &quot;ms&quot;);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3100 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3101 +                                                                                                                  </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3102 +                // Create the ApplicationInfos                                                                    </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3103 +                for (int i = 0; i &lt; apps.size(); i++) {                                                           </span>
<span class="236419152399396874" onmouseenter="enter('236419152399396874');" onmouseout="out('236419152399396874');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3104 +                    LauncherActivityInfoCompat app = apps.get(i);                                                 </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3105 +                    // This builds the icon bitmaps.                                                              </span>
<span class="-5742259461869454243" onmouseenter="enter('-5742259461869454243');" onmouseout="out('-5742259461869454243');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3106 +                    mBgAllAppsList.add(new AppInfo(mContext, app, user, mIconCache, mLabelCache));                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3107 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3108 +            }                                                                                                     </span>
<span class="-5221747652878631284" onmouseenter="enter('-5221747652878631284');" onmouseout="out('-5221747652878631284');" style="">3109              // Huh? Shouldn&#x27;t this be inside the Runnable below?                                                  </span>
<span class="4457761250277868019" onmouseenter="enter('4457761250277868019');" onmouseout="out('4457761250277868019');" style="">3110              final ArrayList&lt;AppInfo&gt; added = mBgAllAppsList.added;                                                </span>
<span class="3218431008368817671" onmouseenter="enter('3218431008368817671');" onmouseout="out('3218431008368817671');" style="">3111              mBgAllAppsList.added = new ArrayList&lt;AppInfo&gt;();                                                      </span>
<span  style="">3112                                                                                                                    </span>
<span class="2526791049904400058" onmouseenter="enter('2526791049904400058');" onmouseout="out('2526791049904400058');" style="">3113              // Post callback on main thread                                                                       </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3114              mHandler.post(new Runnable() {                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3115                  public void run() {                                                                               </span>
<span class="-2007882421121122273" onmouseenter="enter('-2007882421121122273');" onmouseout="out('-2007882421121122273');" style="">3116                      final long bindTime = SystemClock.uptimeMillis();                                             </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">3117                      final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                    </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">3118                      if (callbacks != null) {                                                                      </span>
<span class="8095088373687662981" onmouseenter="enter('8095088373687662981');" onmouseout="out('8095088373687662981');" style="">3119                          callbacks.bindAllApplications(added);                                                     </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3120                          if (DEBUG_LOADERS) {                                                                      </span>
<span class="1059969227192257889" onmouseenter="enter('1059969227192257889');" onmouseout="out('1059969227192257889');" style="">3121                              Log.d(TAG, &quot;bound &quot; + added.size() + &quot; apps in &quot;                                      </span>
<span class="-7437359873458345222" onmouseenter="enter('-7437359873458345222');" onmouseout="out('-7437359873458345222');" style="">3122                                  + (SystemClock.uptimeMillis() - bindTime) + &quot;ms&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3123                          }                                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3124                      } else {                                                                                      </span>
<span class="7641212838781589328" onmouseenter="enter('7641212838781589328');" onmouseout="out('7641212838781589328');" style="">3125                          Log.i(TAG, &quot;not binding apps: no Launcher activity&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3126                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3127                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3128              });                                                                                                   </span>
<span  style="">3129                                                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">3130              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-4702241865893587262" onmouseenter="enter('-4702241865893587262');" onmouseout="out('-4702241865893587262');" style="">3131                  Log.d(TAG, &quot;Icons processed in &quot;                                                                  </span>
<span class="-1277503613614461490" onmouseenter="enter('-1277503613614461490');" onmouseout="out('-1277503613614461490');" style="">3132                          + (SystemClock.uptimeMillis() - loadTime) + &quot;ms&quot;);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3133              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3134          }                                                                                                         </span>
<span  style="">3135                                                                                                                    </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">3136          public void dumpState() {                                                                                 </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">3137              synchronized (sBgLock) {                                                                              </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="">3138                  Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                                   </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="">3139                  Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                           </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="">3140                  Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                                   </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="">3141                  Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);                   </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="">3142                  Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3143              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3144          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3145      }                                                                                                             </span>
<span  style="">3146                                                                                                                    </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="">3147      void enqueuePackageUpdated(PackageUpdatedTask task) {                                                         </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="">3148          sWorker.post(task);                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3149      }                                                                                                             </span>
<span  style="">3150                                                                                                                    </span>
<span class="-2155382700972431684" onmouseenter="enter('-2155382700972431684');" onmouseout="out('-2155382700972431684');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3151 +    private class AppsAvailabilityCheck extends BroadcastReceiver {                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3152 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3153 +        @Override                                                                                                 </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3154 +        public void onReceive(Context context, Intent intent) {                                                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3155 +            synchronized (sBgLock) {                                                                              </span>
<span class="4353137230087495395" onmouseenter="enter('4353137230087495395');" onmouseout="out('4353137230087495395');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3156 +                final LauncherAppsCompat launcherApps = LauncherAppsCompat                                        </span>
<span class="7982344973763927300" onmouseenter="enter('7982344973763927300');" onmouseout="out('7982344973763927300');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3157 +                        .getInstance(mApp.getContext());                                                          </span>
<span class="-4787354412045768116" onmouseenter="enter('-4787354412045768116');" onmouseout="out('-4787354412045768116');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3158 +                ArrayList&lt;String&gt; packagesRemoved;                                                                </span>
<span class="4244873154676657454" onmouseenter="enter('4244873154676657454');" onmouseout="out('4244873154676657454');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3159 +                for (Entry&lt;UserHandleCompat, HashSet&lt;String&gt;&gt; entry : sPendingPackages.entrySet()) {              </span>
<span class="5975107845149456463" onmouseenter="enter('5975107845149456463');" onmouseout="out('5975107845149456463');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3160 +                    UserHandleCompat user = entry.getKey();                                                       </span>
<span class="-667022728008343360" onmouseenter="enter('-667022728008343360');" onmouseout="out('-667022728008343360');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3161 +                    packagesRemoved = new ArrayList&lt;String&gt;();                                                    </span>
<span class="1474457728386669675" onmouseenter="enter('1474457728386669675');" onmouseout="out('1474457728386669675');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3162 +                    for (String pkg : entry.getValue()) {                                                         </span>
<span class="-3589045475490406733" onmouseenter="enter('-3589045475490406733');" onmouseout="out('-3589045475490406733');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3163 +                        if (!launcherApps.isPackageEnabledForProfile(pkg, user)) {                                </span>
<span class="-1955449888814909626" onmouseenter="enter('-1955449888814909626');" onmouseout="out('-1955449888814909626');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3164 +                            Launcher.addDumpLog(TAG, &quot;Package not found: &quot; + pkg, true);                          </span>
<span class="-7762323097919758551" onmouseenter="enter('-7762323097919758551');" onmouseout="out('-7762323097919758551');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3165 +                            packagesRemoved.add(pkg);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3166 +                        }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3167 +                    }                                                                                             </span>
<span class="-1545108570433514025" onmouseenter="enter('-1545108570433514025');" onmouseout="out('-1545108570433514025');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3168 +                    if (!packagesRemoved.isEmpty()) {                                                             </span>
<span class="7608410434352572746" onmouseenter="enter('7608410434352572746');" onmouseout="out('7608410434352572746');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3169 +                        enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_REMOVE,                </span>
<span class="-7140992629790434736" onmouseenter="enter('-7140992629790434736');" onmouseout="out('-7140992629790434736');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3170 +                                packagesRemoved.toArray(new String[packagesRemoved.size()]), user));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3171 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3172 +                }                                                                                                 </span>
<span class="483878637633217436" onmouseenter="enter('483878637633217436');" onmouseout="out('483878637633217436');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3173 +                sPendingPackages.clear();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3174 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3175 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3176 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3177 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3178 +    /**                                                                                                           </span>
<span class="-4757889214551148663" onmouseenter="enter('-4757889214551148663');" onmouseout="out('-4757889214551148663');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3179 +     * Workaround to re-check unrestored items, in-case they were installed but the Package-ADD                   </span>
<span class="-7981308590935764825" onmouseenter="enter('-7981308590935764825');" onmouseout="out('-7981308590935764825');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3180 +     * runnable was missed by the launcher.                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3181 +     */                                                                                                           </span>
<span class="-1837604298505960192" onmouseenter="enter('-1837604298505960192');" onmouseout="out('-1837604298505960192');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3182 +    public void recheckRestoredItems(final Context context) {                                                     </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3183 +        Runnable r = new Runnable() {                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3184 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3185 +            @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3186 +            public void run() {                                                                                   </span>
<span class="4897732594040868406" onmouseenter="enter('4897732594040868406');" onmouseout="out('4897732594040868406');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3187 +                LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                        </span>
<span class="2615938583470046073" onmouseenter="enter('2615938583470046073');" onmouseout="out('2615938583470046073');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3188 +                HashSet&lt;String&gt; installedPackages = new HashSet&lt;String&gt;();                                        </span>
<span class="-7713836903288582020" onmouseenter="enter('-7713836903288582020');" onmouseout="out('-7713836903288582020');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3189 +                UserHandleCompat user = UserHandleCompat.myUserHandle();                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3190 +                synchronized(sBgLock) {                                                                           </span>
<span class="-4290363400846595778" onmouseenter="enter('-4290363400846595778');" onmouseout="out('-4290363400846595778');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3191 +                    for (ItemInfo info : sBgItemsIdMap.values()) {                                                </span>
<span class="3613572740963864398" onmouseenter="enter('3613572740963864398');" onmouseout="out('3613572740963864398');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3192 +                        if (info instanceof ShortcutInfo) {                                                       </span>
<span class="-639177275705060315" onmouseenter="enter('-639177275705060315');" onmouseout="out('-639177275705060315');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3193 +                            ShortcutInfo si = (ShortcutInfo) info;                                                </span>
<span class="7536634611316201502" onmouseenter="enter('7536634611316201502');" onmouseout="out('7536634611316201502');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3194 +                            if (si.isPromise() &amp;&amp; si.getTargetComponent() != null                                 </span>
<span class="5125464606683441448" onmouseenter="enter('5125464606683441448');" onmouseout="out('5125464606683441448');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3195 +                                    &amp;&amp; launcherApps.isPackageEnabledForProfile(                                   </span>
<span class="8387940407390797707" onmouseenter="enter('8387940407390797707');" onmouseout="out('8387940407390797707');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3196 +                                            si.getTargetComponent().getPackageName(), user)) {                    </span>
<span class="8027032983651882823" onmouseenter="enter('8027032983651882823');" onmouseout="out('8027032983651882823');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3197 +                                installedPackages.add(si.getTargetComponent().getPackageName());                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3198 +                            }                                                                                     </span>
<span class="-1966513537137476875" onmouseenter="enter('-1966513537137476875');" onmouseout="out('-1966513537137476875');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3199 +                        } else if (info instanceof LauncherAppWidgetInfo) {                                       </span>
<span class="-3531080121586908110" onmouseenter="enter('-3531080121586908110');" onmouseout="out('-3531080121586908110');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3200 +                            LauncherAppWidgetInfo widget = (LauncherAppWidgetInfo) info;                          </span>
<span class="-6148029265216954679" onmouseenter="enter('-6148029265216954679');" onmouseout="out('-6148029265216954679');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3201 +                            if (widget.hasRestoreFlag(LauncherAppWidgetInfo.FLAG_PROVIDER_NOT_READY)              </span>
<span class="5125464606683441448" onmouseenter="enter('5125464606683441448');" onmouseout="out('5125464606683441448');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3202 +                                    &amp;&amp; launcherApps.isPackageEnabledForProfile(                                   </span>
<span class="4286562368203116307" onmouseenter="enter('4286562368203116307');" onmouseout="out('4286562368203116307');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3203 +                                            widget.providerName.getPackageName(), user)) {                        </span>
<span class="-5968826008275428630" onmouseenter="enter('-5968826008275428630');" onmouseout="out('-5968826008275428630');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3204 +                                installedPackages.add(widget.providerName.getPackageName());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3205 +                            }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3206 +                        }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3207 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3208 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3209 +                                                                                                                  </span>
<span class="-8755538775344321333" onmouseenter="enter('-8755538775344321333');" onmouseout="out('-8755538775344321333');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3210 +                if (!installedPackages.isEmpty()) {                                                               </span>
<span class="1551205659826155261" onmouseenter="enter('1551205659826155261');" onmouseout="out('1551205659826155261');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3211 +                    final ArrayList&lt;AppInfo&gt; restoredApps = new ArrayList&lt;AppInfo&gt;();                             </span>
<span class="-3020018355032355950" onmouseenter="enter('-3020018355032355950');" onmouseout="out('-3020018355032355950');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3212 +                    for (String pkg : installedPackages) {                                                        </span>
<span class="-1472387192310078173" onmouseenter="enter('-1472387192310078173');" onmouseout="out('-1472387192310078173');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3213 +                        for (LauncherActivityInfoCompat info : launcherApps.getActivityList(pkg, user)) {         </span>
<span class="-4626697810297530275" onmouseenter="enter('-4626697810297530275');" onmouseout="out('-4626697810297530275');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3214 +                            restoredApps.add(new AppInfo(context, info, user, mIconCache, null));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3215 +                        }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3216 +                    }                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3217 +                                                                                                                  </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3218 +                    final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="838327603557009686" onmouseenter="enter('838327603557009686');" onmouseout="out('838327603557009686');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3219 +                    if (!restoredApps.isEmpty()) {                                                                </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3220 +                        mHandler.post(new Runnable() {                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3221 +                            public void run() {                                                                   </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3222 +                                Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                      </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3223 +                                if (callbacks == cb &amp;&amp; cb != null) {                                              </span>
<span class="-7685400884791180573" onmouseenter="enter('-7685400884791180573');" onmouseout="out('-7685400884791180573');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3224 +                                    callbacks.bindAppsRestored(restoredApps);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3225 +                                }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3226 +                            }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3227 +                        });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3228 +                    }                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3229 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3230 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3231 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3232 +        };                                                                                                        </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3233 +        sWorker.post(r);                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3234 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3235 +                                                                                                                  </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="">3236      private class PackageUpdatedTask implements Runnable {                                                        </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="">3237          int mOp;                                                                                                  </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="">3238          String[] mPackages;                                                                                       </span>
<span class="2923888301096709084" onmouseenter="enter('2923888301096709084');" onmouseout="out('2923888301096709084');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3239 +        UserHandleCompat mUser;                                                                                   </span>
<span  style="">3240                                                                                                                    </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="">3241          public static final int OP_NONE = 0;                                                                      </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="">3242          public static final int OP_ADD = 1;                                                                       </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="">3243          public static final int OP_UPDATE = 2;                                                                    </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="">3244          public static final int OP_REMOVE = 3; // uninstlled                                                      </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="">3245          public static final int OP_UNAVAILABLE = 4; // external media unmounted                                   </span>
<span  style="">3246                                                                                                                    </span>
<span  style="">3247                                                                                                                    </span>
<span class="-2899951589874278155" onmouseenter="enter('-2899951589874278155');" onmouseout="out('-2899951589874278155');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3248 -        public PackageUpdatedTask(int op, String[] packages) {                                                    </span>
<span class="3202497835561249087" onmouseenter="enter('3202497835561249087');" onmouseout="out('3202497835561249087');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3249 +        public PackageUpdatedTask(int op, String[] packages, UserHandleCompat user) {                             </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="">3250              mOp = op;                                                                                             </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="">3251              mPackages = packages;                                                                                 </span>
<span class="2953270128049103408" onmouseenter="enter('2953270128049103408');" onmouseout="out('2953270128049103408');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3252 +            mUser = user;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3253          }                                                                                                         </span>
<span  style="">3254                                                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3255          public void run() {                                                                                       </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">3256              final Context context = mApp.getContext();                                                            </span>
<span  style="">3257                                                                                                                    </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="">3258              final String[] packages = mPackages;                                                                  </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="">3259              final int N = packages.length;                                                                        </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="">3260              switch (mOp) {                                                                                        </span>
<span class="449333994232188305" onmouseenter="enter('449333994232188305');" onmouseout="out('449333994232188305');" style="">3261                  case OP_ADD:                                                                                      </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3262                      for (int i=0; i&lt;N; i++) {                                                                     </span>
<span class="8529503526854951097" onmouseenter="enter('8529503526854951097');" onmouseout="out('8529503526854951097');" style="">3263                          if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);                  </span>
<span class="-2949849672001849759" onmouseenter="enter('-2949849672001849759');" onmouseout="out('-2949849672001849759');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3264 -                        mBgAllAppsList.addPackage(context, packages[i]);                                          </span>
<span class="6575289823687229863" onmouseenter="enter('6575289823687229863');" onmouseout="out('6575289823687229863');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3265 +                        mIconCache.remove(packages[i], mUser);                                                    </span>
<span class="-4330949928576769866" onmouseenter="enter('-4330949928576769866');" onmouseout="out('-4330949928576769866');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3266 +                        mBgAllAppsList.addPackage(context, packages[i], mUser);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3267                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3268                      break;                                                                                        </span>
<span class="-4770369244410347850" onmouseenter="enter('-4770369244410347850');" onmouseout="out('-4770369244410347850');" style="">3269                  case OP_UPDATE:                                                                                   </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3270                      for (int i=0; i&lt;N; i++) {                                                                     </span>
<span class="-3432436938232924374" onmouseenter="enter('-3432436938232924374');" onmouseout="out('-3432436938232924374');" style="">3271                          if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);               </span>
<span class="-272128531266392722" onmouseenter="enter('-272128531266392722');" onmouseout="out('-272128531266392722');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3272 -                        mBgAllAppsList.updatePackage(context, packages[i]);                                       </span>
<span class="4552988343352109939" onmouseenter="enter('4552988343352109939');" onmouseout="out('4552988343352109939');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3273 +                        mBgAllAppsList.updatePackage(context, packages[i], mUser);                                </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">3274                          WidgetPreviewLoader.removePackageFromDb(                                                  </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">3275                                  mApp.getWidgetPreviewCacheDb(), packages[i]);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3276                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3277                      break;                                                                                        </span>
<span class="-5474983820901132713" onmouseenter="enter('-5474983820901132713');" onmouseout="out('-5474983820901132713');" style="">3278                  case OP_REMOVE:                                                                                   </span>
<span class="9130220194739024640" onmouseenter="enter('9130220194739024640');" onmouseout="out('9130220194739024640');" style="">3279                  case OP_UNAVAILABLE:                                                                              </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3280                      for (int i=0; i&lt;N; i++) {                                                                     </span>
<span class="3815138171377980553" onmouseenter="enter('3815138171377980553');" onmouseout="out('3815138171377980553');" style="">3281                          if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);               </span>
<span class="7669526743413608016" onmouseenter="enter('7669526743413608016');" onmouseout="out('7669526743413608016');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3282 -                        mBgAllAppsList.removePackage(packages[i]);                                                </span>
<span class="-4221302437709808804" onmouseenter="enter('-4221302437709808804');" onmouseout="out('-4221302437709808804');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3283 +                        mBgAllAppsList.removePackage(packages[i], mUser);                                         </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">3284                          WidgetPreviewLoader.removePackageFromDb(                                                  </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">3285                                  mApp.getWidgetPreviewCacheDb(), packages[i]);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3286                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3287                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3288              }                                                                                                     </span>
<span  style="">3289                                                                                                                    </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="">3290              ArrayList&lt;AppInfo&gt; added = null;                                                                      </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="">3291              ArrayList&lt;AppInfo&gt; modified = null;                                                                   </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="">3292              final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                                      </span>
<span  style="">3293                                                                                                                    </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="">3294              if (mBgAllAppsList.added.size() &gt; 0) {                                                                </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="">3295                  added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                             </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="">3296                  mBgAllAppsList.added.clear();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3297              }                                                                                                     </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="">3298              if (mBgAllAppsList.modified.size() &gt; 0) {                                                             </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="">3299                  modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                                       </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="">3300                  mBgAllAppsList.modified.clear();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3301              }                                                                                                     </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="">3302              if (mBgAllAppsList.removed.size() &gt; 0) {                                                              </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="">3303                  removedApps.addAll(mBgAllAppsList.removed);                                                       </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="">3304                  mBgAllAppsList.removed.clear();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3305              }                                                                                                     </span>
<span  style="">3306                                                                                                                    </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">3307              final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                             </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">3308              if (callbacks == null) {                                                                              </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="">3309                  Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">3310                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3311              }                                                                                                     </span>
<span  style="">3312                                                                                                                    </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="">3313              if (added != null) {                                                                                  </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="">3314                  // Ensure that we add all the workspace applications to the db                                    </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3315 -                Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                      </span>
<span class="-6277587630605553211" onmouseenter="enter('-6277587630605553211');" onmouseout="out('-6277587630605553211');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3316 -                if (!LauncherAppState.isDisableAllApps()) {                                                       </span>
<span class="4785144545835380546" onmouseenter="enter('4785144545835380546');" onmouseout="out('4785144545835380546');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3317 -                    addAndBindAddedApps(context, new ArrayList&lt;ItemInfo&gt;(), cb, added);                           </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3318 +                if (LauncherAppState.isDisableAllApps()) {                                                        </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3319 +                    final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);                        </span>
<span class="-3306619504252280502" onmouseenter="enter('-3306619504252280502');" onmouseout="out('-3306619504252280502');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3320 +                    addAndBindAddedWorkspaceApps(context, addedInfos);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3321                  } else {                                                                                          </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3322 -                    final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);                        </span>
<span class="620263930069644182" onmouseenter="enter('620263930069644182');" onmouseout="out('620263930069644182');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3323 -                    addAndBindAddedApps(context, addedInfos, cb, added);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3324 -                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3325 -            }                                                                                                     </span>
<span class="-4365713328493794841" onmouseenter="enter('-4365713328493794841');" onmouseout="out('-4365713328493794841');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3326 +                    addAppsToAllApps(context, added);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3327 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3328 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3329 +                                                                                                                  </span>
<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="">3330              if (modified != null) {                                                                               </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="">3331                  final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                                </span>
<span  style="">3332                                                                                                                    </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="">3333                  // Update the launcher db to reflect the changes                                                  </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="">3334                  for (AppInfo a : modifiedFinal) {                                                                 </span>
<span class="9185020132746469320" onmouseenter="enter('9185020132746469320');" onmouseout="out('9185020132746469320');" style="">3335                      ArrayList&lt;ItemInfo&gt; infos =                                                                   </span>
<span class="1259644807303209381" onmouseenter="enter('1259644807303209381');" onmouseout="out('1259644807303209381');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3336 -                            getItemInfoForComponentName(a.componentName);                                         </span>
<span class="4076745085710284833" onmouseenter="enter('4076745085710284833');" onmouseout="out('4076745085710284833');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3337 +                            getItemInfoForComponentName(a.componentName, mUser);                                  </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3338                      for (ItemInfo i : infos) {                                                                    </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="">3339                          if (isShortcutInfoUpdateable(i)) {                                                        </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3340                              ShortcutInfo info = (ShortcutInfo) i;                                                 </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="">3341                              info.title = a.title.toString();                                                      </span>
<span class="911685269403024085" onmouseenter="enter('911685269403024085');" onmouseout="out('911685269403024085');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3342 +                            info.contentDescription = a.contentDescription;                                       </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3343                              updateItemInDatabase(context, info);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3344                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3345                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3346                  }                                                                                                 </span>
<span  style="">3347                                                                                                                    </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3348                  mHandler.post(new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3349                      public void run() {                                                                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3350                          Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                              </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3351                          if (callbacks == cb &amp;&amp; cb != null) {                                                      </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="">3352                              callbacks.bindAppsUpdated(modifiedFinal);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3353                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3354                      }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3355                  });                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3356              }                                                                                                     </span>
<span  style="">3357                                                                                                                    </span>
<span class="-1170284362245625596" onmouseenter="enter('-1170284362245625596');" onmouseout="out('-1170284362245625596');" style="">3358              final ArrayList&lt;String&gt; removedPackageNames =                                                         </span>
<span class="-5690129641574664711" onmouseenter="enter('-5690129641574664711');" onmouseout="out('-5690129641574664711');" style="">3359                      new ArrayList&lt;String&gt;();                                                                      </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="">3360              if (mOp == OP_REMOVE) {                                                                               </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="">3361                  // Mark all packages in the broadcast to be removed                                               </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="">3362                  removedPackageNames.addAll(Arrays.asList(packages));                                              </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="">3363              } else if (mOp == OP_UPDATE) {                                                                        </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="">3364                  // Mark disabled packages in the broadcast to be removed                                          </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="">3365                  final PackageManager pm = context.getPackageManager();                                            </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">3366                  for (int i=0; i&lt;N; i++) {                                                                         </span>
<span class="2935426733804348481" onmouseenter="enter('2935426733804348481');" onmouseout="out('2935426733804348481');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3367 -                    if (isPackageDisabled(pm, packages[i])) {                                                     </span>
<span class="1189279971614907536" onmouseenter="enter('1189279971614907536');" onmouseout="out('1189279971614907536');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3368 +                    if (isPackageDisabled(context, packages[i], mUser)) {                                         </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="">3369                          removedPackageNames.add(packages[i]);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3370                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3371                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3372              }                                                                                                     </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="">3373              // Remove all the components associated with this package                                             </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="">3374              for (String pn : removedPackageNames) {                                                               </span>
<span class="-8111972255125637177" onmouseenter="enter('-8111972255125637177');" onmouseout="out('-8111972255125637177');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3375 -                ArrayList&lt;ItemInfo&gt; infos = getItemInfoForPackageName(pn);                                        </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3376 -                for (ItemInfo i : infos) {                                                                        </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3377 -                    deleteItemFromDatabase(context, i);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3378 -                }                                                                                                 </span>
<span class="6482411304432401961" onmouseenter="enter('6482411304432401961');" onmouseout="out('6482411304432401961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3379 +                deletePackageFromDatabase(context, pn, mUser);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3380              }                                                                                                     </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="">3381              // Remove all the specific components                                                                 </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="">3382              for (AppInfo a : removedApps) {                                                                       </span>
<span class="-8237639399264107586" onmouseenter="enter('-8237639399264107586');" onmouseout="out('-8237639399264107586');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3383 -                ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName);                         </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3384 -                for (ItemInfo i : infos) {                                                                        </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3385 -                    deleteItemFromDatabase(context, i);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3386 -                }                                                                                                 </span>
<span class="-1726556904055536825" onmouseenter="enter('-1726556904055536825');" onmouseout="out('-1726556904055536825');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3387 +                ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName, mUser);                  </span>
<span class="7293231507608058112" onmouseenter="enter('7293231507608058112');" onmouseout="out('7293231507608058112');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3388 +                deleteItemsFromDatabase(context, infos);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3389              }                                                                                                     </span>
<span class="5309180485107849948" onmouseenter="enter('5309180485107849948');" onmouseout="out('5309180485107849948');" style="">3390              if (!removedPackageNames.isEmpty() || !removedApps.isEmpty()) {                                       </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="">3391                  // Remove any queued items from the install queue                                                 </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="">3392                  String spKey = LauncherAppState.getSharedPreferencesKey();                                        </span>
<span class="-4155822077911930566" onmouseenter="enter('-4155822077911930566');" onmouseout="out('-4155822077911930566');" style="">3393                  SharedPreferences sp =                                                                            </span>
<span class="-7232857049720959502" onmouseenter="enter('-7232857049720959502');" onmouseout="out('-7232857049720959502');" style="">3394                          context.getSharedPreferences(spKey, Context.MODE_PRIVATE);                                </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="">3395                  InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                          </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="">3396                  // Call the components-removed callback                                                           </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3397                  mHandler.post(new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3398                      public void run() {                                                                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3399                          Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                              </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3400                          if (callbacks == cb &amp;&amp; cb != null) {                                                      </span>
<span class="7123425932844918056" onmouseenter="enter('7123425932844918056');" onmouseout="out('7123425932844918056');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3401 -                            callbacks.bindComponentsRemoved(removedPackageNames, removedApps);                    </span>
<span class="-4641714223338514236" onmouseenter="enter('-4641714223338514236');" onmouseout="out('-4641714223338514236');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3402 +                            callbacks.bindComponentsRemoved(removedPackageNames, removedApps, mUser);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3403                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3404                      }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3405                  });                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3406              }                                                                                                     </span>
<span  style="">3407                                                                                                                    </span>
<span class="4263868642545515204" onmouseenter="enter('4263868642545515204');" onmouseout="out('4263868642545515204');" style="">3408              final ArrayList&lt;Object&gt; widgetsAndShortcuts =                                                         </span>
<span class="-4925739004532916789" onmouseenter="enter('-4925739004532916789');" onmouseout="out('-4925739004532916789');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3409 -                getSortedWidgetsAndShortcuts(context);                                                            </span>
<span class="-4925739004532916789" onmouseenter="enter('-4925739004532916789');" onmouseout="out('-4925739004532916789');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3410 +                    getSortedWidgetsAndShortcuts(context);                                                        </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3411              mHandler.post(new Runnable() {                                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3412                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3413                  public void run() {                                                                               </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3414                      Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                  </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3415                      if (callbacks == cb &amp;&amp; cb != null) {                                                          </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="">3416                          callbacks.bindPackagesUpdated(widgetsAndShortcuts);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3417                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3418                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3419              });                                                                                                   </span>
<span  style="">3420                                                                                                                    </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="">3421              // Write all the logs to disk                                                                         </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">3422              mHandler.post(new Runnable() {                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">3423                  public void run() {                                                                               </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">3424                      Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                  </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">3425                      if (callbacks == cb &amp;&amp; cb != null) {                                                          </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="">3426                          callbacks.dumpLogsToLocalData();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3427                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3428                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">3429              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3430          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3431      }                                                                                                             </span>
<span  style="">3432                                                                                                                    </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="">3433      // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                              </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="">3434      public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                               </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3435          PackageManager packageManager = context.getPackageManager();                                              </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="">3436          final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                                    </span>
<span class="-3206018607877806445" onmouseenter="enter('-3206018607877806445');" onmouseout="out('-3206018607877806445');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3437 -        widgetsAndShortcuts.addAll(AppWidgetManager.getInstance(context).getInstalledProviders());                </span>
<span class="3637822346102420347" onmouseenter="enter('3637822346102420347');" onmouseout="out('3637822346102420347');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3438 +        widgetsAndShortcuts.addAll(AppWidgetManagerCompat.getInstance(context).getAllProviders());                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3439 +                                                                                                                  </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="">3440          Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                                       </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="">3441          widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));                     </span>
<span class="-1102952865112100125" onmouseenter="enter('-1102952865112100125');" onmouseout="out('-1102952865112100125');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3442 -        Collections.sort(widgetsAndShortcuts,                                                                     </span>
<span class="-1681839338823179912" onmouseenter="enter('-1681839338823179912');" onmouseout="out('-1681839338823179912');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3443 -            new LauncherModel.WidgetAndShortcutNameComparator(packageManager));                                   </span>
<span class="3220762690300374865" onmouseenter="enter('3220762690300374865');" onmouseout="out('3220762690300374865');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3444 +        Collections.sort(widgetsAndShortcuts, new WidgetAndShortcutNameComparator(context));                      </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="">3445          return widgetsAndShortcuts;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3446      }                                                                                                             </span>
<span  style="">3447                                                                                                                    </span>
<span class="8250241672786329916" onmouseenter="enter('8250241672786329916');" onmouseout="out('8250241672786329916');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3448 -    private static boolean isPackageDisabled(PackageManager pm, String packageName) {                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3449 -        try {                                                                                                     </span>
<span class="4500642088138919346" onmouseenter="enter('4500642088138919346');" onmouseout="out('4500642088138919346');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3450 -            PackageInfo pi = pm.getPackageInfo(packageName, 0);                                                   </span>
<span class="-3710685366547959245" onmouseenter="enter('-3710685366547959245');" onmouseout="out('-3710685366547959245');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3451 -            return !pi.applicationInfo.enabled;                                                                   </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3452 -        } catch (NameNotFoundException e) {                                                                       </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3453 -            // Fall through                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3454 -        }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3455 -        return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3456 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3457 -                                                                                                                  </span>
<span class="5484824579758440772" onmouseenter="enter('5484824579758440772');" onmouseout="out('5484824579758440772');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3458 -    public static boolean isValidPackageComponent(PackageManager pm, ComponentName cn) {                          </span>
<span class="-7287747070935657411" onmouseenter="enter('-7287747070935657411');" onmouseout="out('-7287747070935657411');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3459 +    private static boolean isPackageDisabled(Context context, String packageName,                                 </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3460 +            UserHandleCompat user) {                                                                              </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3461 +        final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                          </span>
<span class="2722752944691677150" onmouseenter="enter('2722752944691677150');" onmouseout="out('2722752944691677150');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3462 +        return !launcherApps.isPackageEnabledForProfile(packageName, user);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3463 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3464 +                                                                                                                  </span>
<span class="5738691957451055953" onmouseenter="enter('5738691957451055953');" onmouseout="out('5738691957451055953');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3465 +    public static boolean isValidPackageActivity(Context context, ComponentName cn,                               </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3466 +            UserHandleCompat user) {                                                                              </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="">3467          if (cn == null) {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3468              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3469          }                                                                                                         </span>
<span class="3920598161938602311" onmouseenter="enter('3920598161938602311');" onmouseout="out('3920598161938602311');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3470 -        if (isPackageDisabled(pm, cn.getPackageName())) {                                                         </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3471 +        final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                          </span>
<span class="-6788056339565196353" onmouseenter="enter('-6788056339565196353');" onmouseout="out('-6788056339565196353');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3472 +        if (!launcherApps.isPackageEnabledForProfile(cn.getPackageName(), user)) {                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3473              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3474          }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3475 -                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3476 -        try {                                                                                                     </span>
<span class="5148337441661745301" onmouseenter="enter('5148337441661745301');" onmouseout="out('5148337441661745301');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3477 -            // Check the activity                                                                                 </span>
<span class="-3548512208842411383" onmouseenter="enter('-3548512208842411383');" onmouseout="out('-3548512208842411383');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3478 -            PackageInfo pi = pm.getPackageInfo(cn.getPackageName(), 0);                                           </span>
<span class="-7304348613249571904" onmouseenter="enter('-7304348613249571904');" onmouseout="out('-7304348613249571904');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3479 -            return (pm.getActivityInfo(cn, 0) != null);                                                           </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3480 -        } catch (NameNotFoundException e) {                                                                       </span>
<span class="6138596583040601663" onmouseenter="enter('6138596583040601663');" onmouseout="out('6138596583040601663');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3481 +        return launcherApps.isActivityEnabledForProfile(cn, user);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3482 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3483 +                                                                                                                  </span>
<span class="5839979877555451943" onmouseenter="enter('5839979877555451943');" onmouseout="out('5839979877555451943');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3484 +    public static boolean isValidPackage(Context context, String packageName,                                     </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3485 +            UserHandleCompat user) {                                                                              </span>
<span class="2797777100746091358" onmouseenter="enter('2797777100746091358');" onmouseout="out('2797777100746091358');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3486 +        if (packageName == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3487              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3488          }                                                                                                         </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3489 +        final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                          </span>
<span class="7814688882071205012" onmouseenter="enter('7814688882071205012');" onmouseout="out('7814688882071205012');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3490 +        return launcherApps.isPackageEnabledForProfile(packageName, user);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3491      }                                                                                                             </span>
<span  style="">3492                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3493      /**                                                                                                           </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="">3494       * Make an ShortcutInfo object for a restored application or shortcut item that points                        </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="">3495       * to a package that is not yet installed on the system.                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3496       */                                                                                                           </span>
<span class="1063415479211056267" onmouseenter="enter('1063415479211056267');" onmouseout="out('1063415479211056267');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3497 -    public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex) {                                      </span>
<span class="6864587742410665601" onmouseenter="enter('6864587742410665601');" onmouseout="out('6864587742410665601');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3498 +    public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex, Intent intent,                         </span>
<span class="-9038086405553223291" onmouseenter="enter('-9038086405553223291');" onmouseout="out('-9038086405553223291');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3499 +            int promiseType) {                                                                                    </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3500          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3501 -        info.usingFallbackIcon = true;                                                                            </span>
<span class="4720658287044976809" onmouseenter="enter('4720658287044976809');" onmouseout="out('4720658287044976809');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3502 -        info.setIcon(getFallbackIcon());                                                                          </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3503 -        if (cursor != null) {                                                                                     </span>
<span class="-7858065958686887242" onmouseenter="enter('-7858065958686887242');" onmouseout="out('-7858065958686887242');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3504 -            info.title =  cursor.getString(titleIndex);                                                           </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3505 +        info.user = UserHandleCompat.myUserHandle();                                                              </span>
<span class="4581768130100169027" onmouseenter="enter('4581768130100169027');" onmouseout="out('4581768130100169027');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3506 +        mIconCache.getTitleAndIcon(info, intent, info.user, true);                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3507 +                                                                                                                  </span>
<span class="-7011074266974647989" onmouseenter="enter('-7011074266974647989');" onmouseout="out('-7011074266974647989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3508 +        if ((promiseType &amp; ShortcutInfo.FLAG_RESTORED_ICON) != 0) {                                               </span>
<span class="-8984449213491193878" onmouseenter="enter('-8984449213491193878');" onmouseout="out('-8984449213491193878');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3509 +            String title = (cursor != null) ? cursor.getString(titleIndex) : null;                                </span>
<span class="-5841612334834081385" onmouseenter="enter('-5841612334834081385');" onmouseout="out('-5841612334834081385');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3510 +            if (!TextUtils.isEmpty(title)) {                                                                      </span>
<span class="-2613617994889375298" onmouseenter="enter('-2613617994889375298');" onmouseout="out('-2613617994889375298');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3511 +                info.title = title;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3512 +            }                                                                                                     </span>
<span class="-5174755841373748942" onmouseenter="enter('-5174755841373748942');" onmouseout="out('-5174755841373748942');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3513 +            info.status = ShortcutInfo.FLAG_RESTORED_ICON;                                                        </span>
<span class="2528235782114549087" onmouseenter="enter('2528235782114549087');" onmouseout="out('2528235782114549087');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3514 +        } else if  ((promiseType &amp; ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {                                     </span>
<span class="-7717414875603328452" onmouseenter="enter('-7717414875603328452');" onmouseout="out('-7717414875603328452');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3515 +            if (TextUtils.isEmpty(info.title)) {                                                                  </span>
<span class="-5806908871812941257" onmouseenter="enter('-5806908871812941257');" onmouseout="out('-5806908871812941257');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3516 +                info.title = (cursor != null) ? cursor.getString(titleIndex) : &quot;&quot;;                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3517 +            }                                                                                                     </span>
<span class="-4388547064813731487" onmouseenter="enter('-4388547064813731487');" onmouseout="out('-4388547064813731487');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3518 +            info.status = ShortcutInfo.FLAG_AUTOINTALL_ICON;                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3519          } else {                                                                                                  </span>
<span class="-9179287796133695880" onmouseenter="enter('-9179287796133695880');" onmouseout="out('-9179287796133695880');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3520 -            info.title = &quot;&quot;;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3521 -        }                                                                                                         </span>
<span class="5717376002108262372" onmouseenter="enter('5717376002108262372');" onmouseout="out('5717376002108262372');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3522 +            throw new InvalidParameterException(&quot;Invalid restoreType &quot; + promiseType);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3523 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3524 +                                                                                                                  </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3525 +        info.contentDescription = mUserManager.getBadgedLabelForUser(                                             </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3526 +                info.title.toString(), info.user);                                                                </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3527          info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                            </span>
<span class="-3783926904025262102" onmouseenter="enter('-3783926904025262102');" onmouseout="out('-3783926904025262102');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3528 +        info.promisedIntent = intent;                                                                             </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3529          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3530      }                                                                                                             </span>
<span  style="">3531                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3532      /**                                                                                                           </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="">3533       * Make an Intent object for a restored application or shortcut item that points                              </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="">3534       * to the market page for the item.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3535       */                                                                                                           </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="">3536      private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                              </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">3537          ComponentName componentName = intent.getComponent();                                                      </span>
<span class="5230577021520033618" onmouseenter="enter('5230577021520033618');" onmouseout="out('5230577021520033618');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3538 -        Intent marketIntent = new Intent(Intent.ACTION_VIEW);                                                     </span>
<span class="-6224205935725503646" onmouseenter="enter('-6224205935725503646');" onmouseout="out('-6224205935725503646');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3539 -        Uri marketUri = new Uri.Builder()                                                                         </span>
<span class="-3881801991978262069" onmouseenter="enter('-3881801991978262069');" onmouseout="out('-3881801991978262069');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3540 +        return getMarketIntent(componentName.getPackageName());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3541 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3542 +                                                                                                                  </span>
<span class="-3260913833937220020" onmouseenter="enter('-3260913833937220020');" onmouseout="out('-3260913833937220020');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3543 +    static Intent getMarketIntent(String packageName) {                                                           </span>
<span class="-9094317775268459694" onmouseenter="enter('-9094317775268459694');" onmouseout="out('-9094317775268459694');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3544 +        return new Intent(Intent.ACTION_VIEW)                                                                     </span>
<span class="273234347361851615" onmouseenter="enter('273234347361851615');" onmouseout="out('273234347361851615');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3545 +            .setData(new Uri.Builder()                                                                            </span>
<span class="-9027153585574964790" onmouseenter="enter('-9027153585574964790');" onmouseout="out('-9027153585574964790');" style="">3546                  .scheme(&quot;market&quot;)                                                                                 </span>
<span class="-1106866791415129127" onmouseenter="enter('-1106866791415129127');" onmouseout="out('-1106866791415129127');" style="">3547                  .authority(&quot;details&quot;)                                                                             </span>
<span class="-6156875340655442296" onmouseenter="enter('-6156875340655442296');" onmouseout="out('-6156875340655442296');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3548 -                .appendQueryParameter(&quot;id&quot;, componentName.getPackageName())                                       </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3549 -                .build();                                                                                         </span>
<span class="-8203346918939498134" onmouseenter="enter('-8203346918939498134');" onmouseout="out('-8203346918939498134');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3550 -        Log.d(TAG, &quot;manufactured intent uri: &quot; + marketUri.toString());                                           </span>
<span class="8200775736438266685" onmouseenter="enter('8200775736438266685');" onmouseout="out('8200775736438266685');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3551 -        marketIntent.setData(marketUri);                                                                          </span>
<span class="-840031405639981960" onmouseenter="enter('-840031405639981960');" onmouseout="out('-840031405639981960');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3552 -        return marketIntent;                                                                                      </span>
<span class="6782694763028009203" onmouseenter="enter('6782694763028009203');" onmouseout="out('6782694763028009203');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3553 +                .appendQueryParameter(&quot;id&quot;, packageName)                                                          </span>
<span class="-5732724158529108102" onmouseenter="enter('-5732724158529108102');" onmouseout="out('-5732724158529108102');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3554 +                .build());                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3555      }                                                                                                             </span>
<span  style="">3556                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3557      /**                                                                                                           </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="">3558       * This is called from the code that adds shortcuts from the intent receiver.  This                           </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="">3559       * doesn&#x27;t have a Cursor, but                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3560       */                                                                                                           </span>
<span class="5614106103309211810" onmouseenter="enter('5614106103309211810');" onmouseout="out('5614106103309211810');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3561 -    public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context) {                 </span>
<span class="-3335806789481426156" onmouseenter="enter('-3335806789481426156');" onmouseout="out('-3335806789481426156');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3562 -        return getShortcutInfo(manager, intent, context, null, -1, -1, null);                                     </span>
<span class="-2548217455776999178" onmouseenter="enter('-2548217455776999178');" onmouseout="out('-2548217455776999178');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3563 +    public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent,                                    </span>
<span class="6504255554925479471" onmouseenter="enter('6504255554925479471');" onmouseout="out('6504255554925479471');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3564 +            UserHandleCompat user, Context context) {                                                             </span>
<span class="-7378868523772977866" onmouseenter="enter('-7378868523772977866');" onmouseout="out('-7378868523772977866');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3565 +        return getShortcutInfo(manager, intent, user, context, null, -1, -1, null, false);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3566      }                                                                                                             </span>
<span  style="">3567                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3568      /**                                                                                                           </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="">3569       * Make an ShortcutInfo object for a shortcut that is an application.                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">3570       *                                                                                                            </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="">3571       * If c is not null, then it will be used to fill in missing data like the title and icon.                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3572       */                                                                                                           </span>
<span class="1276500584496912228" onmouseenter="enter('1276500584496912228');" onmouseout="out('1276500584496912228');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3573 -    public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context,                   </span>
<span class="-7918747784600027039" onmouseenter="enter('-7918747784600027039');" onmouseout="out('-7918747784600027039');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3574 -            Cursor c, int iconIndex, int titleIndex, HashMap&lt;Object, CharSequence&gt; labelCache) {                  </span>
<span class="-2548217455776999178" onmouseenter="enter('-2548217455776999178');" onmouseout="out('-2548217455776999178');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3575 +    public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent,                                    </span>
<span class="-8761535452245299531" onmouseenter="enter('-8761535452245299531');" onmouseout="out('-8761535452245299531');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3576 +            UserHandleCompat user, Context context, Cursor c, int iconIndex, int titleIndex,                      </span>
<span class="3517019325264382616" onmouseenter="enter('3517019325264382616');" onmouseout="out('3517019325264382616');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3577 +            HashMap&lt;Object, CharSequence&gt; labelCache, boolean allowMissingTarget) {                               </span>
<span class="-8165495754761689871" onmouseenter="enter('-8165495754761689871');" onmouseout="out('-8165495754761689871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3578 +        if (user == null) {                                                                                       </span>
<span class="6545168092911351889" onmouseenter="enter('6545168092911351889');" onmouseout="out('6545168092911351889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3579 +            Log.d(TAG, &quot;Null user found in getShortcutInfo&quot;);                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3580 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3581 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3582 +                                                                                                                  </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">3583          ComponentName componentName = intent.getComponent();                                                      </span>
<span class="-5224470428335408787" onmouseenter="enter('-5224470428335408787');" onmouseout="out('-5224470428335408787');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3584 +        if (componentName == null) {                                                                              </span>
<span class="4371782537001302642" onmouseenter="enter('4371782537001302642');" onmouseout="out('4371782537001302642');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3585 +            Log.d(TAG, &quot;Missing component found in getShortcutInfo: &quot; + componentName);                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3586 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3587 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3588 +                                                                                                                  </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3589 +        Intent newIntent = new Intent(intent.getAction(), null);                                                  </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3590 +        newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                          </span>
<span class="6894377559056826774" onmouseenter="enter('6894377559056826774');" onmouseout="out('6894377559056826774');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3591 +        newIntent.setComponent(componentName);                                                                    </span>
<span class="-966571371435372555" onmouseenter="enter('-966571371435372555');" onmouseout="out('-966571371435372555');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3592 +        LauncherActivityInfoCompat lai = mLauncherApps.resolveActivity(newIntent, user);                          </span>
<span class="6800790308293325816" onmouseenter="enter('6800790308293325816');" onmouseout="out('6800790308293325816');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3593 +        if ((lai == null) &amp;&amp; !allowMissingTarget) {                                                               </span>
<span class="-2395110402435537171" onmouseenter="enter('-2395110402435537171');" onmouseout="out('-2395110402435537171');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3594 +            Log.d(TAG, &quot;Missing activity found in getShortcutInfo: &quot; + componentName);                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3595 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3596 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3597 +                                                                                                                  </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3598          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span class="444940595441544179" onmouseenter="enter('444940595441544179');" onmouseout="out('444940595441544179');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3599 -        if (componentName != null &amp;&amp; !isValidPackageComponent(manager, componentName)) {                          </span>
<span class="-409027952341615484" onmouseenter="enter('-409027952341615484');" onmouseout="out('-409027952341615484');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3600 -            Log.d(TAG, &quot;Invalid package found in getShortcutInfo: &quot; + componentName);                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3601 -            return null;                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3602 -        } else {                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3603 -            try {                                                                                                 </span>
<span class="4294749985361673643" onmouseenter="enter('4294749985361673643');" onmouseout="out('4294749985361673643');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3604 -                PackageInfo pi = manager.getPackageInfo(componentName.getPackageName(), 0);                       </span>
<span class="3308885914817688196" onmouseenter="enter('3308885914817688196');" onmouseout="out('3308885914817688196');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3605 -                info.initFlagsAndFirstInstallTime(pi);                                                            </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3606 -            } catch (NameNotFoundException e) {                                                                   </span>
<span class="-3402401844985211338" onmouseenter="enter('-3402401844985211338');" onmouseout="out('-3402401844985211338');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3607 -                Log.d(TAG, &quot;getPackInfo failed for package &quot; +                                                    </span>
<span class="-7617949507024469990" onmouseenter="enter('-7617949507024469990');" onmouseout="out('-7617949507024469990');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3608 -                        componentName.getPackageName());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3609 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3610 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3611 -                                                                                                                  </span>
<span class="-5839804976451698217" onmouseenter="enter('-5839804976451698217');" onmouseout="out('-5839804976451698217');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3612 -        // TODO: See if the PackageManager knows about this case.  If it doesn&#x27;t                                  </span>
<span class="-575420847374711684" onmouseenter="enter('-575420847374711684');" onmouseout="out('-575420847374711684');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3613 -        // then return null &amp; delete this.                                                                        </span>
<span  style="">3614                                                                                                                    </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="">3615          // the resource -- This may implicitly give us back the fallback icon,                                    </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="">3616          // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                                 </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="">3617          // to avoid saving lots of copies of that in the database, and most apps                                  </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="">3618          // have icons anyway.                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3619 -                                                                                                                  </span>
<span class="1748721733354639816" onmouseenter="enter('1748721733354639816');" onmouseout="out('1748721733354639816');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3620 -        // Attempt to use queryIntentActivities to get the ResolveInfo (with IntentFilter info) and               </span>
<span class="-6676021501376744578" onmouseenter="enter('-6676021501376744578');" onmouseout="out('-6676021501376744578');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3621 -        // if that fails, or is ambiguious, fallback to the standard way of getting the resolve info              </span>
<span class="-6094266232633177049" onmouseenter="enter('-6094266232633177049');" onmouseout="out('-6094266232633177049');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3622 -        // via resolveActivity().                                                                                 </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3623 -        Bitmap icon = null;                                                                                       </span>
<span class="-12205607414596767" onmouseenter="enter('-12205607414596767');" onmouseout="out('-12205607414596767');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3624 -        ResolveInfo resolveInfo = null;                                                                           </span>
<span class="5248255614039346565" onmouseenter="enter('5248255614039346565');" onmouseout="out('5248255614039346565');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3625 -        ComponentName oldComponent = intent.getComponent();                                                       </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3626 -        Intent newIntent = new Intent(intent.getAction(), null);                                                  </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3627 -        newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                          </span>
<span class="-4528672120988578527" onmouseenter="enter('-4528672120988578527');" onmouseout="out('-4528672120988578527');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3628 -        newIntent.setPackage(oldComponent.getPackageName());                                                      </span>
<span class="-4266560778617611378" onmouseenter="enter('-4266560778617611378');" onmouseout="out('-4266560778617611378');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3629 -        List&lt;ResolveInfo&gt; infos = manager.queryIntentActivities(newIntent, 0);                                    </span>
<span class="-1258353831095463835" onmouseenter="enter('-1258353831095463835');" onmouseout="out('-1258353831095463835');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3630 -        for (ResolveInfo i : infos) {                                                                             </span>
<span class="5094763243037624802" onmouseenter="enter('5094763243037624802');" onmouseout="out('5094763243037624802');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3631 -            ComponentName cn = new ComponentName(i.activityInfo.packageName,                                      </span>
<span class="1720373740013823268" onmouseenter="enter('1720373740013823268');" onmouseout="out('1720373740013823268');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3632 -                    i.activityInfo.name);                                                                         </span>
<span class="-7290368567659218563" onmouseenter="enter('-7290368567659218563');" onmouseout="out('-7290368567659218563');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3633 -            if (cn.equals(oldComponent)) {                                                                        </span>
<span class="-6794055892963959667" onmouseenter="enter('-6794055892963959667');" onmouseout="out('-6794055892963959667');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3634 -                resolveInfo = i;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3635 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3636 -        }                                                                                                         </span>
<span class="6326898777629576914" onmouseenter="enter('6326898777629576914');" onmouseout="out('6326898777629576914');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3637 -        if (resolveInfo == null) {                                                                                </span>
<span class="8776212146813846258" onmouseenter="enter('8776212146813846258');" onmouseout="out('8776212146813846258');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3638 -            resolveInfo = manager.resolveActivity(intent, 0);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3639 -        }                                                                                                         </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3640 -        if (resolveInfo != null) {                                                                                </span>
<span class="-7448006110826377930" onmouseenter="enter('-7448006110826377930');" onmouseout="out('-7448006110826377930');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3641 -            icon = mIconCache.getIcon(componentName, resolveInfo, labelCache);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3642 -        }                                                                                                         </span>
<span class="-6777959075043703494" onmouseenter="enter('-6777959075043703494');" onmouseout="out('-6777959075043703494');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3643 +        Bitmap icon = mIconCache.getIcon(componentName, lai, labelCache);                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3644 +                                                                                                                  </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3645          // the db                                                                                                 </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3646          if (icon == null) {                                                                                       </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">3647              if (c != null) {                                                                                      </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3648                  icon = getIconFromCursor(c, iconIndex, context);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3649              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3650          }                                                                                                         </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3651          // the fallback icon                                                                                      </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3652          if (icon == null) {                                                                                       </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3653 -            icon = getFallbackIcon();                                                                             </span>
<span class="-1443979577510132687" onmouseenter="enter('-1443979577510132687');" onmouseout="out('-1443979577510132687');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3654 +            icon = mIconCache.getDefaultIcon(user);                                                               </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3655              info.usingFallbackIcon = true;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3656          }                                                                                                         </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3657          info.setIcon(icon);                                                                                       </span>
<span  style="">3658                                                                                                                    </span>
<span class="-7595242445841823644" onmouseenter="enter('-7595242445841823644');" onmouseout="out('-7595242445841823644');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3659 +        // From the cache.                                                                                        </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3660 +        if (labelCache != null) {                                                                                 </span>
<span class="3073733017601521903" onmouseenter="enter('3073733017601521903');" onmouseout="out('3073733017601521903');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3661 +            info.title = labelCache.get(componentName);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3662 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3663 +                                                                                                                  </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="">3664          // from the resource                                                                                      </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3665 -        if (resolveInfo != null) {                                                                                </span>
<span class="4800110805856691594" onmouseenter="enter('4800110805856691594');" onmouseout="out('4800110805856691594');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3666 -            ComponentName key = LauncherModel.getComponentNameFromResolveInfo(resolveInfo);                       </span>
<span class="8748582400169036217" onmouseenter="enter('8748582400169036217');" onmouseout="out('8748582400169036217');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3667 -            if (labelCache != null &amp;&amp; labelCache.containsKey(key)) {                                              </span>
<span class="3192670581922801839" onmouseenter="enter('3192670581922801839');" onmouseout="out('3192670581922801839');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3668 -                info.title = labelCache.get(key);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3669 -            } else {                                                                                              </span>
<span class="-2714967885034418454" onmouseenter="enter('-2714967885034418454');" onmouseout="out('-2714967885034418454');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3670 -                info.title = resolveInfo.activityInfo.loadLabel(manager);                                         </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3671 -                if (labelCache != null) {                                                                         </span>
<span class="-7678945850387299322" onmouseenter="enter('-7678945850387299322');" onmouseout="out('-7678945850387299322');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3672 -                    labelCache.put(key, info.title);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3673 -                }                                                                                                 </span>
<span class="6778614741206473497" onmouseenter="enter('6778614741206473497');" onmouseout="out('6778614741206473497');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3674 +        if (info.title == null &amp;&amp; lai != null) {                                                                  </span>
<span class="-4488945615052684527" onmouseenter="enter('-4488945615052684527');" onmouseout="out('-4488945615052684527');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3675 +            info.title = lai.getLabel();                                                                          </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3676 +            if (labelCache != null) {                                                                             </span>
<span class="-3170508962365680295" onmouseenter="enter('-3170508962365680295');" onmouseout="out('-3170508962365680295');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3677 +                labelCache.put(componentName, info.title);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3678              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3679          }                                                                                                         </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="">3680          // from the db                                                                                            </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3681          if (info.title == null) {                                                                                 </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">3682              if (c != null) {                                                                                      </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="">3683                  info.title =  c.getString(titleIndex);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3684              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3685          }                                                                                                         </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="">3686          // fall back to the class name of the activity                                                            </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3687          if (info.title == null) {                                                                                 </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="">3688              info.title = componentName.getClassName();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3689          }                                                                                                         </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="">3690          info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                         </span>
<span class="-7567614667172676383" onmouseenter="enter('-7567614667172676383');" onmouseout="out('-7567614667172676383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3691 +        info.user = user;                                                                                         </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3692 +        info.contentDescription = mUserManager.getBadgedLabelForUser(                                             </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3693 +                info.title.toString(), info.user);                                                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3694          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3695      }                                                                                                             </span>
<span  style="">3696                                                                                                                    </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="">3697      static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                                        </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="">3698              ItemInfoFilter f) {                                                                                   </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="">3699          HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                                     </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3700          for (ItemInfo i : infos) {                                                                                </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3701              if (i instanceof ShortcutInfo) {                                                                      </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3702                  ShortcutInfo info = (ShortcutInfo) i;                                                             </span>
<span class="299648897077832064" onmouseenter="enter('299648897077832064');" onmouseout="out('299648897077832064');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3703 -                ComponentName cn = info.intent.getComponent();                                                    </span>
<span class="-8411217647144645125" onmouseenter="enter('-8411217647144645125');" onmouseout="out('-8411217647144645125');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3704 +                ComponentName cn = info.getTargetComponent();                                                     </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3705                  if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                                 </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3706                      filtered.add(info);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3707                  }                                                                                                 </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="">3708              } else if (i instanceof FolderInfo) {                                                                 </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="">3709                  FolderInfo info = (FolderInfo) i;                                                                 </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="">3710                  for (ShortcutInfo s : info.contents) {                                                            </span>
<span class="2331162999822676145" onmouseenter="enter('2331162999822676145');" onmouseout="out('2331162999822676145');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3711 -                    ComponentName cn = s.intent.getComponent();                                                   </span>
<span class="-5499244430299718871" onmouseenter="enter('-5499244430299718871');" onmouseout="out('-5499244430299718871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3712 +                    ComponentName cn = s.getTargetComponent();                                                    </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="">3713                      if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                                </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="">3714                          filtered.add(s);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3715                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3716                  }                                                                                                 </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="">3717              } else if (i instanceof LauncherAppWidgetInfo) {                                                      </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="">3718                  LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                           </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="">3719                  ComponentName cn = info.providerName;                                                             </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3720                  if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                                 </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3721                      filtered.add(info);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3722                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3723              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3724          }                                                                                                         </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="">3725          return new ArrayList&lt;ItemInfo&gt;(filtered);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3726      }                                                                                                             </span>
<span  style="">3727                                                                                                                    </span>
<span class="-3045683366231863679" onmouseenter="enter('-3045683366231863679');" onmouseout="out('-3045683366231863679');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3728 -    private ArrayList&lt;ItemInfo&gt; getItemInfoForPackageName(final String pn) {                                      </span>
<span class="-6017059906416334391" onmouseenter="enter('-6017059906416334391');" onmouseout="out('-6017059906416334391');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3729 +    private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname,                            </span>
<span class="-8990624712004338264" onmouseenter="enter('-8990624712004338264');" onmouseout="out('-8990624712004338264');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3730 +            final UserHandleCompat user) {                                                                        </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">3731          ItemInfoFilter filter  = new ItemInfoFilter() {                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3732              @Override                                                                                             </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3733              public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                         </span>
<span class="4366277958827250658" onmouseenter="enter('4366277958827250658');" onmouseout="out('4366277958827250658');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3734 -                return cn.getPackageName().equals(pn);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3735 -            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3736 -        };                                                                                                        </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3737 -        return filterItemInfos(sBgItemsIdMap.values(), filter);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3738 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3739 -                                                                                                                  </span>
<span class="5278497386445713053" onmouseenter="enter('5278497386445713053');" onmouseout="out('5278497386445713053');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3740 -    private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname) {                          </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3741 -        ItemInfoFilter filter  = new ItemInfoFilter() {                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3742 -            @Override                                                                                             </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3743 -            public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                         </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3744 -                return cn.equals(cname);                                                                          </span>
<span class="5970365724964589884" onmouseenter="enter('5970365724964589884');" onmouseout="out('5970365724964589884');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3745 +                if (info.user == null) {                                                                          </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3746 +                    return cn.equals(cname);                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3747 +                } else {                                                                                          </span>
<span class="9080235702604787251" onmouseenter="enter('9080235702604787251');" onmouseout="out('9080235702604787251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3748 +                    return cn.equals(cname) &amp;&amp; info.user.equals(user);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3749 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3750              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3751          };                                                                                                        </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3752          return filterItemInfos(sBgItemsIdMap.values(), filter);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3753      }                                                                                                             </span>
<span  style="">3754                                                                                                                    </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="">3755      public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                                  </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3756          if (i instanceof ShortcutInfo) {                                                                          </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3757              ShortcutInfo info = (ShortcutInfo) i;                                                                 </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="">3758              // We need to check for ACTION_MAIN otherwise getComponent() might                                    </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="">3759              // return null for some shortcuts (for instance, for shortcuts to                                     </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="">3760              // web pages.)                                                                                        </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="">3761              Intent intent = info.intent;                                                                          </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="">3762              ComponentName name = intent.getComponent();                                                           </span>
<span class="-7226540389871247766" onmouseenter="enter('-7226540389871247766');" onmouseout="out('-7226540389871247766');" style="">3763              if (info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION &amp;&amp;                              </span>
<span class="-3498713534944595637" onmouseenter="enter('-3498713534944595637');" onmouseout="out('-3498713534944595637');" style="">3764                      Intent.ACTION_MAIN.equals(intent.getAction()) &amp;&amp; name != null) {                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3765                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3766              }                                                                                                     </span>
<span class="-5396282347241069474" onmouseenter="enter('-5396282347241069474');" onmouseout="out('-5396282347241069474');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3767 +            // placeholder shortcuts get special treatment, let them through too.                                 </span>
<span class="-8737155453802783041" onmouseenter="enter('-8737155453802783041');" onmouseout="out('-8737155453802783041');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3768 +            if (info.isPromise()) {                                                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3769 +                return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3770 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3771          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3772          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3773      }                                                                                                             </span>
<span  style="">3774                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3775      /**                                                                                                           </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="">3776       * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3777       */                                                                                                           </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="">3778      private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                               </span>
<span class="4905943326370352288" onmouseenter="enter('4905943326370352288');" onmouseout="out('4905943326370352288');" style="">3779              int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex,                        </span>
<span class="483103881605747557" onmouseenter="enter('483103881605747557');" onmouseout="out('483103881605747557');" style="">3780              int titleIndex) {                                                                                     </span>
<span  style="">3781                                                                                                                    </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3782          Bitmap icon = null;                                                                                       </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3783          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span class="5882358276056228538" onmouseenter="enter('5882358276056228538');" onmouseout="out('5882358276056228538');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3784 +        // Non-app shortcuts are only supported for current user.                                                 </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3785 +        info.user = UserHandleCompat.myUserHandle();                                                              </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3786          info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                            </span>
<span  style="">3787                                                                                                                    </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="">3788          // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                           </span>
<span  style="">3789                                                                                                                    </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">3790          info.title = c.getString(titleIndex);                                                                     </span>
<span  style="">3791                                                                                                                    </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="">3792          int iconType = c.getInt(iconTypeIndex);                                                                   </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="">3793          switch (iconType) {                                                                                       </span>
<span class="-349524516714147238" onmouseenter="enter('-349524516714147238');" onmouseout="out('-349524516714147238');" style="">3794          case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:                                                       </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="">3795              String packageName = c.getString(iconPackageIndex);                                                   </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="">3796              String resourceName = c.getString(iconResourceIndex);                                                 </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3797              PackageManager packageManager = context.getPackageManager();                                          </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3798              info.customIcon = false;                                                                              </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="">3799              // the resource                                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3800              try {                                                                                                 </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="">3801                  Resources resources = packageManager.getResourcesForApplication(packageName);                     </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="">3802                  if (resources != null) {                                                                          </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="">3803                      final int id = resources.getIdentifier(resourceName, null, null);                             </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3804                      icon = Utilities.createIconBitmap(                                                            </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3805                              mIconCache.getFullResIcon(resources, id), context);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3806                  }                                                                                                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3807              } catch (Exception e) {                                                                               </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="">3808                  // drop this.  we have other places to look for icons                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3809              }                                                                                                     </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3810              // the db                                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3811              if (icon == null) {                                                                                   </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3812                  icon = getIconFromCursor(c, iconIndex, context);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3813              }                                                                                                     </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3814              // the fallback icon                                                                                  </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3815              if (icon == null) {                                                                                   </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3816 -                icon = getFallbackIcon();                                                                         </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3817 +                icon = mIconCache.getDefaultIcon(info.user);                                                      </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3818                  info.usingFallbackIcon = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3819              }                                                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3820              break;                                                                                                </span>
<span class="8287056964614325383" onmouseenter="enter('8287056964614325383');" onmouseout="out('8287056964614325383');" style="">3821          case LauncherSettings.Favorites.ICON_TYPE_BITMAP:                                                         </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3822              icon = getIconFromCursor(c, iconIndex, context);                                                      </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3823              if (icon == null) {                                                                                   </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3824 -                icon = getFallbackIcon();                                                                         </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3825 +                icon = mIconCache.getDefaultIcon(info.user);                                                      </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3826                  info.customIcon = false;                                                                          </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3827                  info.usingFallbackIcon = true;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3828              } else {                                                                                              </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="">3829                  info.customIcon = true;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3830              }                                                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3831              break;                                                                                                </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">3832          default:                                                                                                  </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3833 -            icon = getFallbackIcon();                                                                             </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3834 +            icon = mIconCache.getDefaultIcon(info.user);                                                          </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3835              info.usingFallbackIcon = true;                                                                        </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3836              info.customIcon = false;                                                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3837              break;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3838          }                                                                                                         </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3839          info.setIcon(icon);                                                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3840          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3841      }                                                                                                             </span>
<span  style="">3842                                                                                                                    </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="">3843      Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                          </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style="">3844          @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                                    </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">3845          final boolean debug = false;                                                                              </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="">3846          if (debug) {                                                                                              </span>
<span class="-6059745727821652987" onmouseenter="enter('-6059745727821652987');" onmouseout="out('-6059745727821652987');" style="">3847              Log.d(TAG, &quot;getIconFromCursor app=&quot;                                                                   </span>
<span class="3938717124241653137" onmouseenter="enter('3938717124241653137');" onmouseout="out('3938717124241653137');" style="">3848                      + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3849          }                                                                                                         </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">3850          byte[] data = c.getBlob(iconIndex);                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3851          try {                                                                                                     </span>
<span class="-8927216840433750458" onmouseenter="enter('-8927216840433750458');" onmouseout="out('-8927216840433750458');" style="">3852              return Utilities.createIconBitmap(                                                                    </span>
<span class="5146235978369237158" onmouseenter="enter('5146235978369237158');" onmouseout="out('5146235978369237158');" style="">3853                      BitmapFactory.decodeByteArray(data, 0, data.length), context);                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3854          } catch (Exception e) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3855              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3856          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3857      }                                                                                                             </span>
<span  style="">3858                                                                                                                    </span>
<span class="-7359014031490826383" onmouseenter="enter('-7359014031490826383');" onmouseout="out('-7359014031490826383');" style="">3859      ShortcutInfo addShortcut(Context context, Intent data, long container, int screen,                            </span>
<span class="6268414987721391526" onmouseenter="enter('6268414987721391526');" onmouseout="out('6268414987721391526');" style="">3860              int cellX, int cellY, boolean notify) {                                                               </span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="">3861          final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                                    </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="">3862          if (info == null) {                                                                                       </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3863              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3864          }                                                                                                         </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="">3865          addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                                </span>
<span  style="">3866                                                                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3867          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3868      }                                                                                                             </span>
<span  style="">3869                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3870      /**                                                                                                           </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="">3871       * Attempts to find an AppWidgetProviderInfo that matches the given component.                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3872       */                                                                                                           </span>
<span class="-5080859468016274115" onmouseenter="enter('-5080859468016274115');" onmouseout="out('-5080859468016274115');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3873 -    AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                                 </span>
<span class="-8933877649522571458" onmouseenter="enter('-8933877649522571458');" onmouseout="out('-8933877649522571458');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3874 +    static AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                          </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="">3875              ComponentName component) {                                                                            </span>
<span class="-6575430528437366773" onmouseenter="enter('-6575430528437366773');" onmouseout="out('-6575430528437366773');" style="">3876          List&lt;AppWidgetProviderInfo&gt; widgets =                                                                     </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3877              AppWidgetManager.getInstance(context).getInstalledProviders();                                        </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3878          for (AppWidgetProviderInfo info : widgets) {                                                              </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="">3879              if (info.provider.equals(component)) {                                                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3880                  return info;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3881              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3882          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3883          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3884 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3885 -                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3886 -    /**                                                                                                           </span>
<span class="7439199513195640847" onmouseenter="enter('7439199513195640847');" onmouseout="out('7439199513195640847');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3887 -     * Returns a list of all the widgets that can handle configuration with a particular mimeType.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3888 -     */                                                                                                           </span>
<span class="6325854662222182070" onmouseenter="enter('6325854662222182070');" onmouseout="out('6325854662222182070');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3889 -    List&lt;WidgetMimeTypeHandlerData&gt; resolveWidgetsForMimeType(Context context, String mimeType) {                 </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3890 -        final PackageManager packageManager = context.getPackageManager();                                        </span>
<span class="3847705782231652914" onmouseenter="enter('3847705782231652914');" onmouseout="out('3847705782231652914');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3891 -        final List&lt;WidgetMimeTypeHandlerData&gt; supportedConfigurationActivities =                                  </span>
<span class="-5417931937414580646" onmouseenter="enter('-5417931937414580646');" onmouseout="out('-5417931937414580646');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3892 -            new ArrayList&lt;WidgetMimeTypeHandlerData&gt;();                                                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3893 -                                                                                                                  </span>
<span class="3700104316520923099" onmouseenter="enter('3700104316520923099');" onmouseout="out('3700104316520923099');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3894 -        final Intent supportsIntent =                                                                             </span>
<span class="-5996974504874484707" onmouseenter="enter('-5996974504874484707');" onmouseout="out('-5996974504874484707');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3895 -            new Intent(InstallWidgetReceiver.ACTION_SUPPORTS_CLIPDATA_MIMETYPE);                                  </span>
<span class="6679063100467623292" onmouseenter="enter('6679063100467623292');" onmouseout="out('6679063100467623292');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3896 -        supportsIntent.setType(mimeType);                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3897 -                                                                                                                  </span>
<span class="6275845746944894373" onmouseenter="enter('6275845746944894373');" onmouseout="out('6275845746944894373');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3898 -        // Create a set of widget configuration components that we can test against                               </span>
<span class="361965435897470734" onmouseenter="enter('361965435897470734');" onmouseout="out('361965435897470734');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3899 -        final List&lt;AppWidgetProviderInfo&gt; widgets =                                                               </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3900 -            AppWidgetManager.getInstance(context).getInstalledProviders();                                        </span>
<span class="9185108259439406491" onmouseenter="enter('9185108259439406491');" onmouseout="out('9185108259439406491');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3901 -        final HashMap&lt;ComponentName, AppWidgetProviderInfo&gt; configurationComponentToWidget =                      </span>
<span class="-4320342521313681795" onmouseenter="enter('-4320342521313681795');" onmouseout="out('-4320342521313681795');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3902 -            new HashMap&lt;ComponentName, AppWidgetProviderInfo&gt;();                                                  </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3903 -        for (AppWidgetProviderInfo info : widgets) {                                                              </span>
<span class="-5537825176935075872" onmouseenter="enter('-5537825176935075872');" onmouseout="out('-5537825176935075872');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3904 -            configurationComponentToWidget.put(info.configure, info);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3905 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3906 -                                                                                                                  </span>
<span class="7227984661430491714" onmouseenter="enter('7227984661430491714');" onmouseout="out('7227984661430491714');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3907 -        // Run through each of the intents that can handle this type of clip data, and cross                      </span>
<span class="-5312515598910931459" onmouseenter="enter('-5312515598910931459');" onmouseout="out('-5312515598910931459');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3908 -        // reference them with the components that are actual configuration components                            </span>
<span class="96188399651153294" onmouseenter="enter('96188399651153294');" onmouseout="out('96188399651153294');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3909 -        final List&lt;ResolveInfo&gt; activities = packageManager.queryIntentActivities(supportsIntent,                 </span>
<span class="2456166036476176214" onmouseenter="enter('2456166036476176214');" onmouseout="out('2456166036476176214');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3910 -                PackageManager.MATCH_DEFAULT_ONLY);                                                               </span>
<span class="-6210771211908512935" onmouseenter="enter('-6210771211908512935');" onmouseout="out('-6210771211908512935');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3911 -        for (ResolveInfo info : activities) {                                                                     </span>
<span class="4178492805266676194" onmouseenter="enter('4178492805266676194');" onmouseout="out('4178492805266676194');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3912 -            final ActivityInfo activityInfo = info.activityInfo;                                                  </span>
<span class="5911001791562559694" onmouseenter="enter('5911001791562559694');" onmouseout="out('5911001791562559694');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3913 -            final ComponentName infoComponent = new ComponentName(activityInfo.packageName,                       </span>
<span class="2224927995621460603" onmouseenter="enter('2224927995621460603');" onmouseout="out('2224927995621460603');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3914 -                    activityInfo.name);                                                                           </span>
<span class="5227428239073058925" onmouseenter="enter('5227428239073058925');" onmouseout="out('5227428239073058925');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3915 -            if (configurationComponentToWidget.containsKey(infoComponent)) {                                      </span>
<span class="1978663855217064477" onmouseenter="enter('1978663855217064477');" onmouseout="out('1978663855217064477');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3916 -                supportedConfigurationActivities.add(                                                             </span>
<span class="-7165755523548006690" onmouseenter="enter('-7165755523548006690');" onmouseout="out('-7165755523548006690');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3917 -                        new InstallWidgetReceiver.WidgetMimeTypeHandlerData(info,                                 </span>
<span class="-7657609803705245302" onmouseenter="enter('-7657609803705245302');" onmouseout="out('-7657609803705245302');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3918 -                                configurationComponentToWidget.get(infoComponent)));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3919 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3920 -        }                                                                                                         </span>
<span class="8087136273107515292" onmouseenter="enter('8087136273107515292');" onmouseout="out('8087136273107515292');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3921 -        return supportedConfigurationActivities;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3922      }                                                                                                             </span>
<span  style="">3923                                                                                                                    </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="">3924      ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {                      </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="">3925          Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                                    </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="">3926          String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                            </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="">3927          Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                                  </span>
<span  style="">3928                                                                                                                    </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">3929          if (intent == null) {                                                                                     </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="">3930              // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null                  </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="">3931              Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3932              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3933          }                                                                                                         </span>
<span  style="">3934                                                                                                                    </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3935          Bitmap icon = null;                                                                                       </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="">3936          boolean customIcon = false;                                                                               </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="">3937          ShortcutIconResource iconResource = null;                                                                 </span>
<span  style="">3938                                                                                                                    </span>
<span class="4708321654003878831" onmouseenter="enter('4708321654003878831');" onmouseout="out('4708321654003878831');" style="">3939          if (bitmap != null &amp;&amp; bitmap instanceof Bitmap) {                                                         </span>
<span class="-4792971395534249505" onmouseenter="enter('-4792971395534249505');" onmouseout="out('-4792971395534249505');" style="">3940              icon = Utilities.createIconBitmap(new FastBitmapDrawable((Bitmap)bitmap), context);                   </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="">3941              customIcon = true;                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3942          } else {                                                                                                  </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="">3943              Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);                      </span>
<span class="1150112908884585569" onmouseenter="enter('1150112908884585569');" onmouseout="out('1150112908884585569');" style="">3944              if (extra != null &amp;&amp; extra instanceof ShortcutIconResource) {                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3945                  try {                                                                                             </span>
<span class="7381422411731402038" onmouseenter="enter('7381422411731402038');" onmouseout="out('7381422411731402038');" style="">3946                      iconResource = (ShortcutIconResource) extra;                                                  </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3947                      final PackageManager packageManager = context.getPackageManager();                            </span>
<span class="8040670109966211806" onmouseenter="enter('8040670109966211806');" onmouseout="out('8040670109966211806');" style="">3948                      Resources resources = packageManager.getResourcesForApplication(                              </span>
<span class="6486160691197808360" onmouseenter="enter('6486160691197808360');" onmouseout="out('6486160691197808360');" style="">3949                              iconResource.packageName);                                                            </span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="">3950                      final int id = resources.getIdentifier(iconResource.resourceName, null, null);                </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3951                      icon = Utilities.createIconBitmap(                                                            </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3952 -                            mIconCache.getFullResIcon(resources, id), context);                                   </span>
<span class="2974405441716858047" onmouseenter="enter('2974405441716858047');" onmouseout="out('2974405441716858047');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3953 +                            mIconCache.getFullResIcon(resources, id),                                             </span>
<span class="-7033093369240644837" onmouseenter="enter('-7033093369240644837');" onmouseout="out('-7033093369240644837');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3954 +                            context);                                                                             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3955                  } catch (Exception e) {                                                                           </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="">3956                      Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3957                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3958              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3959          }                                                                                                         </span>
<span  style="">3960                                                                                                                    </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3961          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span  style="">3962                                                                                                                    </span>
<span class="2102380556199177801" onmouseenter="enter('2102380556199177801');" onmouseout="out('2102380556199177801');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3963 +        // Only support intents for current user for now. Intents sent from other                                 </span>
<span class="2194655253408912185" onmouseenter="enter('2194655253408912185');" onmouseout="out('2194655253408912185');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3964 +        // users wouldn&#x27;t get here without intent forwarding anyway.                                              </span>
<span class="3234341335361440357" onmouseenter="enter('3234341335361440357');" onmouseout="out('3234341335361440357');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3965 +        info.user = UserHandleCompat.myUserHandle();                                                              </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3966          if (icon == null) {                                                                                       </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="">3967              if (fallbackIcon != null) {                                                                           </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="">3968                  icon = fallbackIcon;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3969              } else {                                                                                              </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3970 -                icon = getFallbackIcon();                                                                         </span>
<span class="-6454010769433117003" onmouseenter="enter('-6454010769433117003');" onmouseout="out('-6454010769433117003');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3971 +                icon = mIconCache.getDefaultIcon(info.user);                                                      </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3972                  info.usingFallbackIcon = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3973              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3974          }                                                                                                         </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3975          info.setIcon(icon);                                                                                       </span>
<span  style="">3976                                                                                                                    </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="">3977          info.title = name;                                                                                        </span>
<span class="-4699559548865287095" onmouseenter="enter('-4699559548865287095');" onmouseout="out('-4699559548865287095');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3978 +        info.contentDescription = mUserManager.getBadgedLabelForUser(                                             </span>
<span class="305979891341097909" onmouseenter="enter('305979891341097909');" onmouseout="out('305979891341097909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">3979 +                info.title.toString(), info.user);                                                                </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">3980          info.intent = intent;                                                                                     </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="">3981          info.customIcon = customIcon;                                                                             </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="">3982          info.iconResource = iconResource;                                                                         </span>
<span  style="">3983                                                                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3984          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3985      }                                                                                                             </span>
<span  style="">3986                                                                                                                    </span>
<span class="869799550823252877" onmouseenter="enter('869799550823252877');" onmouseout="out('869799550823252877');" style="">3987      boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c,                      </span>
<span class="650460935465639981" onmouseenter="enter('650460935465639981');" onmouseout="out('650460935465639981');" style="">3988              int iconIndex) {                                                                                      </span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="">3989          // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                             </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">3990          if (!mAppsCanBeOnRemoveableStorage) {                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3991              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3992          }                                                                                                         </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="">3993          // If this icon doesn&#x27;t have a custom icon, check to see                                                  </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="">3994          // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                                  </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="">3995          // we&#x27;re going to show, store what we are going to show back                                              </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="">3996          // into the DB.  We do this so when we&#x27;re loading, if the                                                 </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="">3997          // package manager can&#x27;t find an icon (for example because                                                </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="">3998          // the app is on SD) then we can use that instead.                                                        </span>
<span class="6478679774718804760" onmouseenter="enter('6478679774718804760');" onmouseout="out('6478679774718804760');" style="">3999          if (!info.customIcon &amp;&amp; !info.usingFallbackIcon) {                                                        </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="">4000              cache.put(info, c.getBlob(iconIndex));                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">4001              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4002          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">4003          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4004      }                                                                                                             </span>
<span class="1654527872685192879" onmouseenter="enter('1654527872685192879');" onmouseout="out('1654527872685192879');" style="">4005      void updateSavedIcon(Context context, ShortcutInfo info, byte[] data) {                                       </span>
<span class="2739424845963553299" onmouseenter="enter('2739424845963553299');" onmouseout="out('2739424845963553299');" style="">4006          boolean needSave = false;                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">4007          try {                                                                                                     </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">4008              if (data != null) {                                                                                   </span>
<span class="-7759318311620721467" onmouseenter="enter('-7759318311620721467');" onmouseout="out('-7759318311620721467');" style="">4009                  Bitmap saved = BitmapFactory.decodeByteArray(data, 0, data.length);                               </span>
<span class="5601916118931842920" onmouseenter="enter('5601916118931842920');" onmouseout="out('5601916118931842920');" style="">4010                  Bitmap loaded = info.getIcon(mIconCache);                                                         </span>
<span class="3622333829210083937" onmouseenter="enter('3622333829210083937');" onmouseout="out('3622333829210083937');" style="">4011                  needSave = !saved.sameAs(loaded);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4012              } else {                                                                                              </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">4013                  needSave = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4014              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">4015          } catch (Exception e) {                                                                                   </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">4016              needSave = true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4017          }                                                                                                         </span>
<span class="-1391846982631217245" onmouseenter="enter('-1391846982631217245');" onmouseout="out('-1391846982631217245');" style="">4018          if (needSave) {                                                                                           </span>
<span class="3557323548661765982" onmouseenter="enter('3557323548661765982');" onmouseout="out('3557323548661765982');" style="">4019              Log.d(TAG, &quot;going to save icon bitmap for info=&quot; + info);                                             </span>
<span class="2982884345620001266" onmouseenter="enter('2982884345620001266');" onmouseout="out('2982884345620001266');" style="">4020              // This is slower than is ideal, but this only happens once                                           </span>
<span class="6026812495787058898" onmouseenter="enter('6026812495787058898');" onmouseout="out('6026812495787058898');" style="">4021              // or when the app is updated with a new icon.                                                        </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">4022              updateItemInDatabase(context, info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4023          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4024      }                                                                                                             </span>
<span  style="">4025                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">4026      /**                                                                                                           </span>
<span class="4855649975001229153" onmouseenter="enter('4855649975001229153');" onmouseout="out('4855649975001229153');" style="">4027       * Return an existing FolderInfo object if we have encountered this ID previously,                            </span>
<span class="1965046356881977619" onmouseenter="enter('1965046356881977619');" onmouseout="out('1965046356881977619');" style="">4028       * or make a new one.                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">4029       */                                                                                                           </span>
<span class="-2475696420152943641" onmouseenter="enter('-2475696420152943641');" onmouseout="out('-2475696420152943641');" style="">4030      private static FolderInfo findOrMakeFolder(HashMap&lt;Long, FolderInfo&gt; folders, long id) {                      </span>
<span class="4702055422209629108" onmouseenter="enter('4702055422209629108');" onmouseout="out('4702055422209629108');" style="">4031          // See if a placeholder was created for us already                                                        </span>
<span class="5369947662598537472" onmouseenter="enter('5369947662598537472');" onmouseout="out('5369947662598537472');" style="">4032          FolderInfo folderInfo = folders.get(id);                                                                  </span>
<span class="-1935655509058582330" onmouseenter="enter('-1935655509058582330');" onmouseout="out('-1935655509058582330');" style="">4033          if (folderInfo == null) {                                                                                 </span>
<span class="-2837885610668527269" onmouseenter="enter('-2837885610668527269');" onmouseout="out('-2837885610668527269');" style="">4034              // No placeholder -- create a new instance                                                            </span>
<span class="-1173144769562528834" onmouseenter="enter('-1173144769562528834');" onmouseout="out('-1173144769562528834');" style="">4035              folderInfo = new FolderInfo();                                                                        </span>
<span class="-6364759527041918506" onmouseenter="enter('-6364759527041918506');" onmouseout="out('-6364759527041918506');" style="">4036              folders.put(id, folderInfo);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4037          }                                                                                                         </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">4038          return folderInfo;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4039      }                                                                                                             </span>
<span  style="">4040                                                                                                                    </span>
<span class="-958488581416967596" onmouseenter="enter('-958488581416967596');" onmouseout="out('-958488581416967596');" style="">4041      public static final Comparator&lt;AppInfo&gt; getAppNameComparator() {                                              </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">4042          final Collator collator = Collator.getInstance();                                                         </span>
<span class="-5613048777706091935" onmouseenter="enter('-5613048777706091935');" onmouseout="out('-5613048777706091935');" style="">4043          return new Comparator&lt;AppInfo&gt;() {                                                                        </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">4044              public final int compare(AppInfo a, AppInfo b) {                                                      </span>
<span class="-7549376093488495011" onmouseenter="enter('-7549376093488495011');" onmouseout="out('-7549376093488495011');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4045 -                int result = collator.compare(a.title.toString().trim(),                                          </span>
<span class="1811873973139560730" onmouseenter="enter('1811873973139560730');" onmouseout="out('1811873973139560730');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4046 -                        b.title.toString().trim());                                                               </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4047 -                if (result == 0) {                                                                                </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4048 -                    result = a.componentName.compareTo(b.componentName);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4049 -                }                                                                                                 </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4050 -                return result;                                                                                    </span>
<span class="3541515045662468306" onmouseenter="enter('3541515045662468306');" onmouseout="out('3541515045662468306');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4051 +                if (a.user.equals(b.user)) {                                                                      </span>
<span class="-7549376093488495011" onmouseenter="enter('-7549376093488495011');" onmouseout="out('-7549376093488495011');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4052 +                    int result = collator.compare(a.title.toString().trim(),                                      </span>
<span class="1811873973139560730" onmouseenter="enter('1811873973139560730');" onmouseout="out('1811873973139560730');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4053 +                            b.title.toString().trim());                                                           </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4054 +                    if (result == 0) {                                                                            </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4055 +                        result = a.componentName.compareTo(b.componentName);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4056 +                    }                                                                                             </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4057 +                    return result;                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4058 +                } else {                                                                                          </span>
<span class="-4940624116090922199" onmouseenter="enter('-4940624116090922199');" onmouseout="out('-4940624116090922199');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4059 +                    // TODO Need to figure out rules for sorting                                                  </span>
<span class="-7580798058375972430" onmouseenter="enter('-7580798058375972430');" onmouseout="out('-7580798058375972430');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4060 +                    // profiles, this puts work second.                                                           </span>
<span class="-437659129845370257" onmouseenter="enter('-437659129845370257');" onmouseout="out('-437659129845370257');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4061 +                    return a.user.toString().compareTo(b.user.toString());                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4062 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4063              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">4064          };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4065      }                                                                                                             </span>
<span class="394292360646743486" onmouseenter="enter('394292360646743486');" onmouseout="out('394292360646743486');" style="">4066      public static final Comparator&lt;AppInfo&gt; APP_INSTALL_TIME_COMPARATOR                                           </span>
<span class="-2973469265380285464" onmouseenter="enter('-2973469265380285464');" onmouseout="out('-2973469265380285464');" style="">4067              = new Comparator&lt;AppInfo&gt;() {                                                                         </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">4068          public final int compare(AppInfo a, AppInfo b) {                                                          </span>
<span class="4743139001154708795" onmouseenter="enter('4743139001154708795');" onmouseout="out('4743139001154708795');" style="">4069              if (a.firstInstallTime &lt; b.firstInstallTime) return 1;                                                </span>
<span class="2246013200960361834" onmouseenter="enter('2246013200960361834');" onmouseout="out('2246013200960361834');" style="">4070              if (a.firstInstallTime &gt; b.firstInstallTime) return -1;                                               </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style="">4071              return 0;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4072          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">4073      };                                                                                                            </span>
<span class="-8609474311948503984" onmouseenter="enter('-8609474311948503984');" onmouseout="out('-8609474311948503984');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4074 -    public static final Comparator&lt;AppWidgetProviderInfo&gt; getWidgetNameComparator() {                             </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4075 -        final Collator collator = Collator.getInstance();                                                         </span>
<span class="-2259377864696368534" onmouseenter="enter('-2259377864696368534');" onmouseout="out('-2259377864696368534');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4076 -        return new Comparator&lt;AppWidgetProviderInfo&gt;() {                                                          </span>
<span class="-678507615594739242" onmouseenter="enter('-678507615594739242');" onmouseout="out('-678507615594739242');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4077 -            public final int compare(AppWidgetProviderInfo a, AppWidgetProviderInfo b) {                          </span>
<span class="2077578932126968211" onmouseenter="enter('2077578932126968211');" onmouseout="out('2077578932126968211');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4078 -                return collator.compare(a.label.toString().trim(), b.label.toString().trim());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4079 -            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4080 -        };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4081 -    }                                                                                                             </span>
<span class="-2741084556110057526" onmouseenter="enter('-2741084556110057526');" onmouseout="out('-2741084556110057526');" style="">4082      static ComponentName getComponentNameFromResolveInfo(ResolveInfo info) {                                      </span>
<span class="5044967282776033452" onmouseenter="enter('5044967282776033452');" onmouseout="out('5044967282776033452');" style="">4083          if (info.activityInfo != null) {                                                                          </span>
<span class="4524084479320544608" onmouseenter="enter('4524084479320544608');" onmouseout="out('4524084479320544608');" style="">4084              return new ComponentName(info.activityInfo.packageName, info.activityInfo.name);                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4085          } else {                                                                                                  </span>
<span class="-6175863207819175779" onmouseenter="enter('-6175863207819175779');" onmouseout="out('-6175863207819175779');" style="">4086              return new ComponentName(info.serviceInfo.packageName, info.serviceInfo.name);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4087          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4088      }                                                                                                             </span>
<span class="-1238156797468239183" onmouseenter="enter('-1238156797468239183');" onmouseout="out('-1238156797468239183');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4089 -    public static class ShortcutNameComparator implements Comparator&lt;ResolveInfo&gt; {                               </span>
<span class="-5604165961236567660" onmouseenter="enter('-5604165961236567660');" onmouseout="out('-5604165961236567660');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4090 +    public static class ShortcutNameComparator implements Comparator&lt;LauncherActivityInfoCompat&gt; {                </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">4091          private Collator mCollator;                                                                               </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4092 -        private PackageManager mPackageManager;                                                                   </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">4093          private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                                        </span>
<span class="-5960404209194449161" onmouseenter="enter('-5960404209194449161');" onmouseout="out('-5960404209194449161');" style="">4094          ShortcutNameComparator(PackageManager pm) {                                                               </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4095 -            mPackageManager = pm;                                                                                 </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">4096              mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                                    </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">4097              mCollator = Collator.getInstance();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4098          }                                                                                                         </span>
<span class="-5325604689380562785" onmouseenter="enter('-5325604689380562785');" onmouseout="out('-5325604689380562785');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4099 -        ShortcutNameComparator(PackageManager pm, HashMap&lt;Object, CharSequence&gt; labelCache) {                     </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4100 -            mPackageManager = pm;                                                                                 </span>
<span class="3595266679393364065" onmouseenter="enter('3595266679393364065');" onmouseout="out('3595266679393364065');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4101 +        ShortcutNameComparator(HashMap&lt;Object, CharSequence&gt; labelCache) {                                        </span>
<span class="-1230739904022851098" onmouseenter="enter('-1230739904022851098');" onmouseout="out('-1230739904022851098');" style="">4102              mLabelCache = labelCache;                                                                             </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">4103              mCollator = Collator.getInstance();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4104          }                                                                                                         </span>
<span class="2504403784205444317" onmouseenter="enter('2504403784205444317');" onmouseout="out('2504403784205444317');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4105 -        public final int compare(ResolveInfo a, ResolveInfo b) {                                                  </span>
<span class="177946296771916785" onmouseenter="enter('177946296771916785');" onmouseout="out('177946296771916785');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4106 -            CharSequence labelA, labelB;                                                                          </span>
<span class="2313389288092914550" onmouseenter="enter('2313389288092914550');" onmouseout="out('2313389288092914550');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4107 -            ComponentName keyA = LauncherModel.getComponentNameFromResolveInfo(a);                                </span>
<span class="1313017237584786738" onmouseenter="enter('1313017237584786738');" onmouseout="out('1313017237584786738');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4108 -            ComponentName keyB = LauncherModel.getComponentNameFromResolveInfo(b);                                </span>
<span class="5300656659592950018" onmouseenter="enter('5300656659592950018');" onmouseout="out('5300656659592950018');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4109 +        public final int compare(LauncherActivityInfoCompat a, LauncherActivityInfoCompat b) {                    </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4110 +            String labelA, labelB;                                                                                </span>
<span class="3539590309650150575" onmouseenter="enter('3539590309650150575');" onmouseout="out('3539590309650150575');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4111 +            ComponentName keyA = a.getComponentName();                                                            </span>
<span class="-674250356247748253" onmouseenter="enter('-674250356247748253');" onmouseout="out('-674250356247748253');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4112 +            ComponentName keyB = b.getComponentName();                                                            </span>
<span class="6987605502838603761" onmouseenter="enter('6987605502838603761');" onmouseout="out('6987605502838603761');" style="">4113              if (mLabelCache.containsKey(keyA)) {                                                                  </span>
<span class="-8432555163859180221" onmouseenter="enter('-8432555163859180221');" onmouseout="out('-8432555163859180221');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4114 -                labelA = mLabelCache.get(keyA);                                                                   </span>
<span class="-1058154863590772027" onmouseenter="enter('-1058154863590772027');" onmouseout="out('-1058154863590772027');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4115 +                labelA = mLabelCache.get(keyA).toString();                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4116              } else {                                                                                              </span>
<span class="-2584626643586656789" onmouseenter="enter('-2584626643586656789');" onmouseout="out('-2584626643586656789');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4117 -                labelA = a.loadLabel(mPackageManager).toString().trim();                                          </span>
<span class="8953753374571564594" onmouseenter="enter('8953753374571564594');" onmouseout="out('8953753374571564594');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4118 +                labelA = a.getLabel().toString().trim();                                                          </span>
<span  style="">4119                                                                                                                    </span>
<span class="-8431652685509449538" onmouseenter="enter('-8431652685509449538');" onmouseout="out('-8431652685509449538');" style="">4120                  mLabelCache.put(keyA, labelA);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4121              }                                                                                                     </span>
<span class="-6450873724396873776" onmouseenter="enter('-6450873724396873776');" onmouseout="out('-6450873724396873776');" style="">4122              if (mLabelCache.containsKey(keyB)) {                                                                  </span>
<span class="-3184391819650288160" onmouseenter="enter('-3184391819650288160');" onmouseout="out('-3184391819650288160');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4123 -                labelB = mLabelCache.get(keyB);                                                                   </span>
<span class="267036364262288198" onmouseenter="enter('267036364262288198');" onmouseout="out('267036364262288198');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4124 +                labelB = mLabelCache.get(keyB).toString();                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4125              } else {                                                                                              </span>
<span class="-6035042839601081566" onmouseenter="enter('-6035042839601081566');" onmouseout="out('-6035042839601081566');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4126 -                labelB = b.loadLabel(mPackageManager).toString().trim();                                          </span>
<span class="-6332222509536632454" onmouseenter="enter('-6332222509536632454');" onmouseout="out('-6332222509536632454');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4127 +                labelB = b.getLabel().toString().trim();                                                          </span>
<span  style="">4128                                                                                                                    </span>
<span class="6304111994442836155" onmouseenter="enter('6304111994442836155');" onmouseout="out('6304111994442836155');" style="">4129                  mLabelCache.put(keyB, labelB);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4130              }                                                                                                     </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">4131              return mCollator.compare(labelA, labelB);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4132          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">4133      };                                                                                                            </span>
<span class="-9068712813001281029" onmouseenter="enter('-9068712813001281029');" onmouseout="out('-9068712813001281029');" style="">4134      public static class WidgetAndShortcutNameComparator implements Comparator&lt;Object&gt; {                           </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4135 -        private Collator mCollator;                                                                               </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4136 -        private PackageManager mPackageManager;                                                                   </span>
<span class="-3647203189121938913" onmouseenter="enter('-3647203189121938913');" onmouseout="out('-3647203189121938913');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4137 -        private HashMap&lt;Object, String&gt; mLabelCache;                                                              </span>
<span class="-7973787508768304552" onmouseenter="enter('-7973787508768304552');" onmouseout="out('-7973787508768304552');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4138 -        WidgetAndShortcutNameComparator(PackageManager pm) {                                                      </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4139 -            mPackageManager = pm;                                                                                 </span>
<span class="9150498506085829362" onmouseenter="enter('9150498506085829362');" onmouseout="out('9150498506085829362');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4140 +        private final AppWidgetManagerCompat mManager;                                                            </span>
<span class="916814758228251192" onmouseenter="enter('916814758228251192');" onmouseout="out('916814758228251192');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4141 +        private final PackageManager mPackageManager;                                                             </span>
<span class="3147273048289991484" onmouseenter="enter('3147273048289991484');" onmouseout="out('3147273048289991484');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4142 +        private final HashMap&lt;Object, String&gt; mLabelCache;                                                        </span>
<span class="7734513056437222570" onmouseenter="enter('7734513056437222570');" onmouseout="out('7734513056437222570');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4143 +        private final Collator mCollator;                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4144 +                                                                                                                  </span>
<span class="-4227954493245511846" onmouseenter="enter('-4227954493245511846');" onmouseout="out('-4227954493245511846');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4145 +        WidgetAndShortcutNameComparator(Context context) {                                                        </span>
<span class="3481132346717467494" onmouseenter="enter('3481132346717467494');" onmouseout="out('3481132346717467494');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4146 +            mManager = AppWidgetManagerCompat.getInstance(context);                                               </span>
<span class="8554599676865199182" onmouseenter="enter('8554599676865199182');" onmouseout="out('8554599676865199182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4147 +            mPackageManager = context.getPackageManager();                                                        </span>
<span class="240497455152177218" onmouseenter="enter('240497455152177218');" onmouseout="out('240497455152177218');" style="">4148              mLabelCache = new HashMap&lt;Object, String&gt;();                                                          </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">4149              mCollator = Collator.getInstance();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4150          }                                                                                                         </span>
<span class="6735042653098150116" onmouseenter="enter('6735042653098150116');" onmouseout="out('6735042653098150116');" style="">4151          public final int compare(Object a, Object b) {                                                            </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">4152              String labelA, labelB;                                                                                </span>
<span class="-5754282386436968390" onmouseenter="enter('-5754282386436968390');" onmouseout="out('-5754282386436968390');" style="">4153              if (mLabelCache.containsKey(a)) {                                                                     </span>
<span class="9174303291338212675" onmouseenter="enter('9174303291338212675');" onmouseout="out('9174303291338212675');" style="">4154                  labelA = mLabelCache.get(a);                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4155              } else {                                                                                              </span>
<span class="-5230674800178108876" onmouseenter="enter('-5230674800178108876');" onmouseout="out('-5230674800178108876');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4156 -                labelA = (a instanceof AppWidgetProviderInfo) ?                                                   </span>
<span class="8106329842535817312" onmouseenter="enter('8106329842535817312');" onmouseout="out('8106329842535817312');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4157 -                    ((AppWidgetProviderInfo) a).label :                                                           </span>
<span class="2303647925533744119" onmouseenter="enter('2303647925533744119');" onmouseout="out('2303647925533744119');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4158 -                    ((ResolveInfo) a).loadLabel(mPackageManager).toString().trim();                               </span>
<span class="-9066745869396444524" onmouseenter="enter('-9066745869396444524');" onmouseout="out('-9066745869396444524');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4159 +                labelA = (a instanceof AppWidgetProviderInfo)                                                     </span>
<span class="6558251807363396504" onmouseenter="enter('6558251807363396504');" onmouseout="out('6558251807363396504');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4160 +                        ? mManager.loadLabel((AppWidgetProviderInfo) a)                                           </span>
<span class="-3214224842100508644" onmouseenter="enter('-3214224842100508644');" onmouseout="out('-3214224842100508644');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4161 +                        : ((ResolveInfo) a).loadLabel(mPackageManager).toString().trim();                         </span>
<span class="-6757493580793216382" onmouseenter="enter('-6757493580793216382');" onmouseout="out('-6757493580793216382');" style="">4162                  mLabelCache.put(a, labelA);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4163              }                                                                                                     </span>
<span class="2173723640298609502" onmouseenter="enter('2173723640298609502');" onmouseout="out('2173723640298609502');" style="">4164              if (mLabelCache.containsKey(b)) {                                                                     </span>
<span class="-253401768434607465" onmouseenter="enter('-253401768434607465');" onmouseout="out('-253401768434607465');" style="">4165                  labelB = mLabelCache.get(b);                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4166              } else {                                                                                              </span>
<span class="2760475927841141319" onmouseenter="enter('2760475927841141319');" onmouseout="out('2760475927841141319');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4167 -                labelB = (b instanceof AppWidgetProviderInfo) ?                                                   </span>
<span class="-8579211562497370011" onmouseenter="enter('-8579211562497370011');" onmouseout="out('-8579211562497370011');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4168 -                    ((AppWidgetProviderInfo) b).label :                                                           </span>
<span class="-7445104582750098413" onmouseenter="enter('-7445104582750098413');" onmouseout="out('-7445104582750098413');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">4169 -                    ((ResolveInfo) b).loadLabel(mPackageManager).toString().trim();                               </span>
<span class="-1855040857913004459" onmouseenter="enter('-1855040857913004459');" onmouseout="out('-1855040857913004459');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4170 +                labelB = (b instanceof AppWidgetProviderInfo)                                                     </span>
<span class="-6152525661787763086" onmouseenter="enter('-6152525661787763086');" onmouseout="out('-6152525661787763086');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4171 +                        ? mManager.loadLabel((AppWidgetProviderInfo) b)                                           </span>
<span class="-7836999270960417422" onmouseenter="enter('-7836999270960417422');" onmouseout="out('-7836999270960417422');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4172 +                        : ((ResolveInfo) b).loadLabel(mPackageManager).toString().trim();                         </span>
<span class="1041849722861633477" onmouseenter="enter('1041849722861633477');" onmouseout="out('1041849722861633477');" style="">4173                  mLabelCache.put(b, labelB);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4174              }                                                                                                     </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">4175              return mCollator.compare(labelA, labelB);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4176          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">4177      };                                                                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4178 +                                                                                                                  </span>
<span class="9138636756014527253" onmouseenter="enter('9138636756014527253');" onmouseout="out('9138636756014527253');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4179 +    static boolean isValidProvider(AppWidgetProviderInfo provider) {                                              </span>
<span class="2022925387876031232" onmouseenter="enter('2022925387876031232');" onmouseout="out('2022925387876031232');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4180 +        return (provider != null) &amp;&amp; (provider.provider != null)                                                  </span>
<span class="-279029610180406352" onmouseenter="enter('-279029610180406352');" onmouseout="out('-279029610180406352');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4181 +                &amp;&amp; (provider.provider.getPackageName() != null);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">4182 +    }                                                                                                             </span>
<span  style="">4183                                                                                                                    </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">4184      public void dumpState() {                                                                                     </span>
<span class="-8509686920730582178" onmouseenter="enter('-8509686920730582178');" onmouseout="out('-8509686920730582178');" style="">4185          Log.d(TAG, &quot;mCallbacks=&quot; + mCallbacks);                                                                   </span>
<span class="-6032216957883964740" onmouseenter="enter('-6032216957883964740');" onmouseout="out('-6032216957883964740');" style="">4186          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.data&quot;, mBgAllAppsList.data);                           </span>
<span class="8779182816240818818" onmouseenter="enter('8779182816240818818');" onmouseout="out('8779182816240818818');" style="">4187          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.added&quot;, mBgAllAppsList.added);                         </span>
<span class="5513048904999210121" onmouseenter="enter('5513048904999210121');" onmouseout="out('5513048904999210121');" style="">4188          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.removed&quot;, mBgAllAppsList.removed);                     </span>
<span class="-6417320778911436113" onmouseenter="enter('-6417320778911436113');" onmouseout="out('-6417320778911436113');" style="">4189          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.modified&quot;, mBgAllAppsList.modified);                   </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">4190          if (mLoaderTask != null) {                                                                                </span>
<span class="-1961259503181318170" onmouseenter="enter('-1961259503181318170');" onmouseout="out('-1961259503181318170');" style="">4191              mLoaderTask.dumpState();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">4192          } else {                                                                                                  </span>
<span class="-4934836822377624371" onmouseenter="enter('-4934836822377624371');" onmouseout="out('-4934836822377624371');" style="">4193              Log.d(TAG, &quot;mLoaderTask=null&quot;);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4194          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4195      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">4196  }                                                                                                                 </span></pre></td>
                            <td><pre></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            