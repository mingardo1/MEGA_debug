<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>89</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    89
                    <a href="88.html">prev</a>
                    <a href="90.html">next</a>
                    <a href="89_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_8885e871fe243487c84bc9a2eddf4493b4351628_Simplenote/src/main/java/com/automattic/simplenote/PreferencesFragment.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;8885e871fe243487c84bc9a2eddf4493b4351628:Simplenote/src/main/java/com/automattic/simplenote/PreferencesFragment.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;8885e871fe243487c84bc9a2eddf4493b4351628^1:Simplenote/src/main/java/com/automattic/simplenote/PreferencesFragment.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;8885e871fe243487c84bc9a2eddf4493b4351628^2:Simplenote/src/main/java/com/automattic/simplenote/PreferencesFragment.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;962dd8af4b1d748b18498266bf9ffc5acbfbcb8d:Simplenote/src/main/java/com/automattic/simplenote/PreferencesFragment.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   4 import android.app.Fragment;                                                                             </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   5 import android.content.ClipData;                                                                         </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   6 import android.content.ClipboardManager;                                                                 </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   7 import android.content.Context;                                                                          </span>
<span class="-5438333149234786386" onmouseenter="enter('-5438333149234786386');" onmouseout="out('-5438333149234786386');" style="">   8 import android.content.DialogInterface;                                                                  </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   9 import android.content.Intent;                                                                           </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  10 import android.content.SharedPreferences;                                                                </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  11 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  12 import android.os.Bundle;                                                                                </span>
<span class="-5436718358296125427" onmouseenter="enter('-5436718358296125427');" onmouseout="out('-5436718358296125427');" style="">  13 import android.os.ParcelFileDescriptor;                                                                  </span>
<span class="7440210109790075870" onmouseenter="enter('7440210109790075870');" onmouseout="out('7440210109790075870');" style="">  14 import android.provider.DocumentsContract;                                                               </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  15 import android.widget.Toast;                                                                             </span>
<span  style="">  16                                                                                                          </span>
<span class="-8930837843172754904" onmouseenter="enter('-8930837843172754904');" onmouseout="out('-8930837843172754904');" style="">  17 import androidx.appcompat.app.AlertDialog;                                                               </span>
<span class="-8763141247638307783" onmouseenter="enter('-8763141247638307783');" onmouseout="out('-8763141247638307783');" style="">  18 import androidx.appcompat.view.ContextThemeWrapper;                                                      </span>
<span class="-7553031234002075668" onmouseenter="enter('-7553031234002075668');" onmouseout="out('-7553031234002075668');" style="">  19 import androidx.preference.ListPreference;                                                               </span>
<span class="-3312641230509782710" onmouseenter="enter('-3312641230509782710');" onmouseout="out('-3312641230509782710');" style="">  20 import androidx.preference.Preference;                                                                   </span>
<span class="-6464340996904493039" onmouseenter="enter('-6464340996904493039');" onmouseout="out('-6464340996904493039');" style="">  21 import androidx.preference.PreferenceFragmentCompat;                                                     </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  22 import androidx.preference.PreferenceManager;                                                            </span>
<span class="-8714897093372589764" onmouseenter="enter('-8714897093372589764');" onmouseout="out('-8714897093372589764');" style="">  23 import androidx.preference.SwitchPreferenceCompat;                                                       </span>
<span  style="">  24                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  25 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  26 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  27 import com.automattic.simplenote.models.Preferences;                                                     </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  28 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  29 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  30 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  31 import com.automattic.simplenote.models.Preferences;                                                     </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  32 import com.automattic.simplenote.utils.CrashUtils;                                                       </span>
<span class="5145471914103640094" onmouseenter="enter('5145471914103640094');" onmouseout="out('5145471914103640094');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  33 import com.automattic.simplenote.utils.HtmlCompat;                                                       </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  34 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  35 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  36 import com.simperium.Simperium;                                                                          </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  37 import com.simperium.client.Bucket;                                                                      </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  38 =======                                                                                                  </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  39 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  40 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  41 import com.automattic.simplenote.utils.CrashUtils;                                                       </span>
<span class="5145471914103640094" onmouseenter="enter('5145471914103640094');" onmouseout="out('5145471914103640094');" style="">  42 import com.automattic.simplenote.utils.HtmlCompat;                                                       </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  43 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  44 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  45 import com.simperium.Simperium;                                                                          </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  46 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  47 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-3142233007863984129" onmouseenter="enter('-3142233007863984129');" onmouseout="out('-3142233007863984129');" style="">  48 import com.simperium.client.BucketObjectNameInvalid;                                                     </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  49 import com.simperium.client.User;                                                                        </span>
<span  style="">  50                                                                                                          </span>
<span class="-9193129351684262878" onmouseenter="enter('-9193129351684262878');" onmouseout="out('-9193129351684262878');" style="">  51 import org.json.JSONArray;                                                                               </span>
<span class="7232075261178918144" onmouseenter="enter('7232075261178918144');" onmouseout="out('7232075261178918144');" style="">  52 import org.json.JSONObject;                                                                              </span>
<span class="7324884800271719890" onmouseenter="enter('7324884800271719890');" onmouseout="out('7324884800271719890');" style="">  53 import org.wordpress.passcodelock.AppLockManager;                                                        </span>
<span  style="">  54                                                                                                          </span>
<span class="4915709264156936957" onmouseenter="enter('4915709264156936957');" onmouseout="out('4915709264156936957');" style="">  55 import java.io.FileOutputStream;                                                                         </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  56 import java.lang.ref.WeakReference;                                                                      </span>
<span  style="">  57                                                                                                          </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="">  58 import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                       </span>
<span  style="">  59                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  60 /**                                                                                                      </span>
<span class="5114139633798332353" onmouseenter="enter('5114139633798332353');" onmouseout="out('5114139633798332353');" style="">  61  * A simple {@link Fragment} subclass.                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  62  */                                                                                                      </span>
<span class="8213712831003870267" onmouseenter="enter('8213712831003870267');" onmouseout="out('8213712831003870267');" style="">  63 public class PreferencesFragment extends PreferenceFragmentCompat implements User.StatusChangeListener,  </span>
<span class="-6650933180145052624" onmouseenter="enter('-6650933180145052624');" onmouseout="out('-6650933180145052624');" style="">  64         Simperium.OnUserCreatedListener {                                                                </span>
<span  style="">  65                                                                                                          </span>
<span class="6526302226782351091" onmouseenter="enter('6526302226782351091');" onmouseout="out('6526302226782351091');" style="">  66     private static final String WEB_APP_URL = &quot;https://app.simplenote.com&quot;;                              </span>
<span  style="">  67                                                                                                          </span>
<span class="-3814969503072913312" onmouseenter="enter('-3814969503072913312');" onmouseout="out('-3814969503072913312');" style="">  68     private Bucket&lt;Preferences&gt; mPreferencesBucket;                                                      </span>
<span class="-908783299724709915" onmouseenter="enter('-908783299724709915');" onmouseout="out('-908783299724709915');" style="">  69     private SwitchPreferenceCompat mAnalyticsSwitch;                                                     </span>
<span  style="">  70                                                                                                          </span>
<span class="-1679820400310610015" onmouseenter="enter('-1679820400310610015');" onmouseout="out('-1679820400310610015');" style="">  71     public PreferencesFragment() {                                                                       </span>
<span class="5025324504900911379" onmouseenter="enter('5025324504900911379');" onmouseout="out('5025324504900911379');" style="">  72         // Required empty public constructor                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  73     }                                                                                                    </span>
<span  style="">  74                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  75     @Override                                                                                            </span>
<span class="4595408869200273860" onmouseenter="enter('4595408869200273860');" onmouseout="out('4595408869200273860');" style="">  76     public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {                         </span>
<span class="5290641457290853720" onmouseenter="enter('5290641457290853720');" onmouseout="out('5290641457290853720');" style="">  77         addPreferencesFromResource(R.xml.preferences);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78     }                                                                                                    </span>
<span  style="">  79                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  80     @Override                                                                                            </span>
<span class="4360549941650676478" onmouseenter="enter('4360549941650676478');" onmouseout="out('4360549941650676478');" style="">  81     public void onActivityCreated(Bundle savedInstanceState) {                                           </span>
<span class="1612263533902931469" onmouseenter="enter('1612263533902931469');" onmouseout="out('1612263533902931469');" style="">  82         super.onActivityCreated(savedInstanceState);                                                     </span>
<span  style="">  83                                                                                                          </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style="">  84         Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                     </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  85         Simplenote currentApp = (Simplenote) getActivity().getApplication();                             </span>
<span class="-4589466368752372978" onmouseenter="enter('-4589466368752372978');" onmouseout="out('-4589466368752372978');" style="">  86         Simperium simperium = currentApp.getSimperium();                                                 </span>
<span class="2748958065852789861" onmouseenter="enter('2748958065852789861');" onmouseout="out('2748958065852789861');" style="">  87         simperium.setUserStatusChangeListener(this);                                                     </span>
<span class="-2272979595474747044" onmouseenter="enter('-2272979595474747044');" onmouseout="out('-2272979595474747044');" style="">  88         simperium.setOnUserCreatedListener(this);                                                        </span>
<span class="-8025066121623883978" onmouseenter="enter('-8025066121623883978');" onmouseout="out('-8025066121623883978');" style="">  89         mPreferencesBucket = currentApp.getPreferencesBucket();                                          </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style="">  90         mPreferencesBucket.start();                                                                      </span>
<span  style="">  91                                                                                                          </span>
<span class="5417399975767426553" onmouseenter="enter('5417399975767426553');" onmouseout="out('5417399975767426553');" style="">  92         authenticatePreference.setSummary(currentApp.getSimperium().getUser().getEmail());               </span>
<span class="-3342250548665049241" onmouseenter="enter('-3342250548665049241');" onmouseout="out('-3342250548665049241');" style="">  93         if (simperium.needsAuthorization()) {                                                            </span>
<span class="8210597588054659575" onmouseenter="enter('8210597588054659575');" onmouseout="out('8210597588054659575');" style="">  94             authenticatePreference.setTitle(R.string.log_in);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  95         } else {                                                                                         </span>
<span class="8885574470684679352" onmouseenter="enter('8885574470684679352');" onmouseout="out('8885574470684679352');" style="">  96             authenticatePreference.setTitle(R.string.log_out);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  97         }                                                                                                </span>
<span  style="">  98                                                                                                          </span>
<span class="-1521554305857532068" onmouseenter="enter('-1521554305857532068');" onmouseout="out('-1521554305857532068');" style="">  99         authenticatePreference.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() { </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 100             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 101             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 102                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 103                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104                 }                                                                                        </span>
<span  style=""> 105                                                                                                          </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style=""> 106                 Simplenote currentApp = (Simplenote) getActivity().getApplication();                     </span>
<span class="-1805411858302537149" onmouseenter="enter('-1805411858302537149');" onmouseout="out('-1805411858302537149');" style=""> 107                 if (currentApp.getSimperium().needsAuthorization()) {                                    </span>
<span class="-1894877037162085011" onmouseenter="enter('-1894877037162085011');" onmouseout="out('-1894877037162085011');" style=""><abbr title=" 108                     Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.class);"> 108                     Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.class🔵</abbr></span>
<span class="-1745782676004839840" onmouseenter="enter('-1745782676004839840');" onmouseout="out('-1745782676004839840');" style=""> 109                     startActivityForResult(loginIntent, Simperium.SIGNUP_SIGNIN_REQUEST);                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 110                 } else {                                                                                 </span>
<span class="-1878844134905051149" onmouseenter="enter('-1878844134905051149');" onmouseout="out('-1878844134905051149');" style=""> 111                     new LogOutTask(PreferencesFragment.this).execute();                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 113                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 115         });                                                                                              </span>
<span  style=""> 116                                                                                                          </span>
<span class="-3317947868564721602" onmouseenter="enter('-3317947868564721602');" onmouseout="out('-3317947868564721602');" style=""><abbr title=" 117         findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 117         findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickL🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 118             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 119             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 120                 try {                                                                                    </span>
<span class="5515326037292150005" onmouseenter="enter('5515326037292150005');" onmouseout="out('5515326037292150005');" style=""> 121                     BrowserUtils.launchBrowserOrShowError(requireContext(), &quot;http://simplenote.com&quot;);    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 122                 } catch (Exception e) {                                                                  </span>
<span class="3734798154944032055" onmouseenter="enter('3734798154944032055');" onmouseout="out('3734798154944032055');" style=""><abbr title=" 123                     Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show();"> 123                     Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show(🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 125                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 127         });                                                                                              </span>
<span  style=""> 128                                                                                                          </span>
<span class="7546915923491771618" onmouseenter="enter('7546915923491771618');" onmouseout="out('7546915923491771618');" style=""><abbr title=" 129         findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 129         findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickLis🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 130             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 131             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="8659998783220899939" onmouseenter="enter('8659998783220899939');" onmouseout="out('8659998783220899939');" style=""> 132                 startActivity(new Intent(getActivity(), AboutActivity.class));                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 133                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 135         });                                                                                              </span>
<span  style=""> 136                                                                                                          </span>
<span class="1103776393699537905" onmouseenter="enter('1103776393699537905');" onmouseout="out('1103776393699537905');" style=""><abbr title=" 137         findPreference(&quot;pref_key_export&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 137         findPreference(&quot;pref_key_export&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickLi🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 138             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 139             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="4984554577824553223" onmouseenter="enter('4984554577824553223');" onmouseout="out('4984554577824553223');" style=""> 140                 Intent intent = new Intent(Intent.ACTION_CREATE_DOCUMENT);                               </span>
<span class="8912465054547747469" onmouseenter="enter('8912465054547747469');" onmouseout="out('8912465054547747469');" style=""> 141                 intent.addCategory(Intent.CATEGORY_OPENABLE);                                            </span>
<span class="-6707067096973178010" onmouseenter="enter('-6707067096973178010');" onmouseout="out('-6707067096973178010');" style=""> 142                 intent.setType(&quot;application/json&quot;);                                                      </span>
<span class="-6509278610434426342" onmouseenter="enter('-6509278610434426342');" onmouseout="out('-6509278610434426342');" style=""> 143                 intent.putExtra(Intent.EXTRA_TITLE, &quot;account.json&quot;);                                     </span>
<span  style=""> 144                                                                                                          </span>
<span class="2104595516747401662" onmouseenter="enter('2104595516747401662');" onmouseout="out('2104595516747401662');" style=""> 145                 startActivityForResult(intent, 1);                                                       </span>
<span  style=""> 146                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 147                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 149         });                                                                                              </span>
<span  style=""> 150                                                                                                          </span>
<span class="-2051654600796868045" onmouseenter="enter('-2051654600796868045');" onmouseout="out('-2051654600796868045');" style=""> 151         final ListPreference themePreference = (ListPreference) findPreference(PrefUtils.PREF_THEME);    </span>
<span class="-3135129752727836774" onmouseenter="enter('-3135129752727836774');" onmouseout="out('-3135129752727836774');" style=""> 152         themePreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 153             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 154             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="8972235106908076260" onmouseenter="enter('8972235106908076260');" onmouseout="out('8972235106908076260');" style=""> 155                 updateTheme(requireActivity(), Integer.parseInt(newValue.toString()));                   </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 156                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157             }                                                                                            </span>
<span  style=""> 158                                                                                                          </span>
<span class="7597115961384302616" onmouseenter="enter('7597115961384302616');" onmouseout="out('7597115961384302616');" style=""> 159             private void updateTheme(Activity activity, int index) {                                     </span>
<span class="1607563076949848778" onmouseenter="enter('1607563076949848778');" onmouseout="out('1607563076949848778');" style=""> 160                 CharSequence[] entries = themePreference.getEntries();                                   </span>
<span class="1955249186347848341" onmouseenter="enter('1955249186347848341');" onmouseout="out('1955249186347848341');" style=""> 161                 themePreference.setSummary(entries[index]);                                              </span>
<span  style=""> 162                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 163                 AnalyticsTracker.track(                                                                  </span>
<span class="-3633564244751131710" onmouseenter="enter('-3633564244751131710');" onmouseout="out('-3633564244751131710');" style=""> 164                         AnalyticsTracker.Stat.SETTINGS_THEME_UPDATED,                                    </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 165                         AnalyticsTracker.CATEGORY_USER,                                                  </span>
<span class="8810282947066680931" onmouseenter="enter('8810282947066680931');" onmouseout="out('8810282947066680931');" style=""> 166                         &quot;theme_preference&quot;                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 167                 );                                                                                       </span>
<span  style=""> 168                                                                                                          </span>
<span class="-6345048933952298843" onmouseenter="enter('-6345048933952298843');" onmouseout="out('-6345048933952298843');" style=""> 169                 // recreate the activity so new theme is applied                                         </span>
<span class="6106586807651914503" onmouseenter="enter('6106586807651914503');" onmouseout="out('6106586807651914503');" style=""> 170                 activity.recreate();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 172         });                                                                                              </span>
<span  style=""> 173                                                                                                          </span>
<span class="-3563544225355858599" onmouseenter="enter('-3563544225355858599');" onmouseout="out('-3563544225355858599');" style=""> 174         final ListPreference sortPreference = (ListPreference) findPreference(PrefUtils.PREF_SORT_ORDER);</span>
<span class="-5125317966081854635" onmouseenter="enter('-5125317966081854635');" onmouseout="out('-5125317966081854635');" style=""> 175         sortPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 176             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 177             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="-8870833255101890428" onmouseenter="enter('-8870833255101890428');" onmouseout="out('-8870833255101890428');" style=""> 178                 int index = Integer.parseInt(newValue.toString());                                       </span>
<span class="4511877948668264185" onmouseenter="enter('4511877948668264185');" onmouseout="out('4511877948668264185');" style=""> 179                 CharSequence[] entries = sortPreference.getEntries();                                    </span>
<span class="-9141657533116186952" onmouseenter="enter('-9141657533116186952');" onmouseout="out('-9141657533116186952');" style=""> 180                 sortPreference.setSummary(entries[index]);                                               </span>
<span  style=""> 181                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 182                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 184         });                                                                                              </span>
<span  style=""> 185                                                                                                          </span>
<span class="-2516209658609361373" onmouseenter="enter('-2516209658609361373');" onmouseout="out('-2516209658609361373');" style=""> 186         Preference versionPref = findPreference(&quot;pref_key_build&quot;);                                       </span>
<span class="2941715853984851229" onmouseenter="enter('2941715853984851229');" onmouseout="out('2941715853984851229');" style=""> 187         versionPref.setSummary(PrefUtils.versionInfo());                                                 </span>
<span  style=""> 188                                                                                                          </span>
<span class="269389859234146346" onmouseenter="enter('269389859234146346');" onmouseout="out('269389859234146346');" style=""><abbr title=" 189         SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condensed_note_list&quot;);"> 189         SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_conde🔵</abbr></span>
<span class="731943818112030665" onmouseenter="enter('731943818112030665');" onmouseout="out('731943818112030665');" style=""> 190         switchPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 191             @Override                                                                                    </span>
<span class="8137396142185538827" onmouseenter="enter('8137396142185538827');" onmouseout="out('8137396142185538827');" style=""> 192             public boolean onPreferenceChange(Preference preference, Object o) {                         </span>
<span class="2703036426639498311" onmouseenter="enter('2703036426639498311');" onmouseout="out('2703036426639498311');" style=""> 193                 if (((SwitchPreferenceCompat) preference).isChecked()) {                                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 194                     AnalyticsTracker.track(                                                              </span>
<span class="8127526149566412653" onmouseenter="enter('8127526149566412653');" onmouseout="out('8127526149566412653');" style=""> 195                             AnalyticsTracker.Stat.SETTINGS_LIST_CONDENSED_ENABLED,                       </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 196                             AnalyticsTracker.CATEGORY_USER,                                              </span>
<span class="-7341164689664996576" onmouseenter="enter('-7341164689664996576');" onmouseout="out('-7341164689664996576');" style=""> 197                             &quot;condensed_list_preference&quot;                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 198                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199                 }                                                                                        </span>
<span  style=""> 200                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 201                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 203         });                                                                                              </span>
<span  style=""> 204                                                                                                          </span>
<span class="-6021379672389812030" onmouseenter="enter('-6021379672389812030');" onmouseout="out('-6021379672389812030');" style=""> 205         // Add the hyperlink to the analytics summary                                                    </span>
<span class="-3803040130638154017" onmouseenter="enter('-3803040130638154017');" onmouseout="out('-3803040130638154017');" style=""> 206         Preference analyticsSummaryPreference = findPreference(&quot;pref_key_analytics_enabled_summary&quot;);    </span>
<span class="-5954923786447915621" onmouseenter="enter('-5954923786447915621');" onmouseout="out('-5954923786447915621');" style=""> 207         String formattedSummary = String.format(                                                         </span>
<span class="4703350175896481792" onmouseenter="enter('4703350175896481792');" onmouseout="out('4703350175896481792');" style=""> 208                 getString(R.string.share_analytics_summary),                                             </span>
<span class="4561110205824883354" onmouseenter="enter('4561110205824883354');" onmouseout="out('4561110205824883354');" style=""> 209                 &quot;&lt;a href=\&quot;https://automattic.com/cookies\&quot;&gt;&quot;,                                           </span>
<span class="-5125567965545776439" onmouseenter="enter('-5125567965545776439');" onmouseout="out('-5125567965545776439');" style=""> 210                 &quot;&lt;/a&gt;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 211         );                                                                                               </span>
<span class="3076824088033544263" onmouseenter="enter('3076824088033544263');" onmouseout="out('3076824088033544263');" style=""> 212         analyticsSummaryPreference.setSummary(HtmlCompat.fromHtml(formattedSummary));                    </span>
<span  style=""> 213                                                                                                          </span>
<span class="2122402547097653030" onmouseenter="enter('2122402547097653030');" onmouseout="out('2122402547097653030');" style=""> 214         mAnalyticsSwitch = (SwitchPreferenceCompat)findPreference(&quot;pref_key_analytics_switch&quot;);          </span>
<span class="5250772881921022799" onmouseenter="enter('5250772881921022799');" onmouseout="out('5250772881921022799');" style=""> 215         mAnalyticsSwitch.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 216             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 217             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 218                 try {                                                                                    </span>
<span class="7999271203428147057" onmouseenter="enter('7999271203428147057');" onmouseout="out('7999271203428147057');" style=""> 219                     boolean isChecked = (boolean)newValue;                                               </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 220                     Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                  </span>
<span class="-3416644870449875468" onmouseenter="enter('-3416644870449875468');" onmouseout="out('-3416644870449875468');" style=""> 221                     prefs.setAnalyticsEnabled(isChecked);                                                </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 222                     prefs.save();                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 223                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 224                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225                 }                                                                                        </span>
<span  style=""> 226                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 227                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 229         });                                                                                              </span>
<span  style=""> 230                                                                                                          </span>
<span class="5339258651008713874" onmouseenter="enter('5339258651008713874');" onmouseout="out('5339258651008713874');" style=""> 231         updateAnalyticsSwitchState();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232     }                                                                                                    </span>
<span  style=""> 233                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 234     @Override                                                                                            </span>
<span class="3267640102220640214" onmouseenter="enter('3267640102220640214');" onmouseout="out('3267640102220640214');" style=""> 235     public void onActivityResult(int requestCode, int resultCode, Intent resultData) {                   </span>
<span class="3621747730259457062" onmouseenter="enter('3621747730259457062');" onmouseout="out('3621747730259457062');" style=""> 236         if (requestCode != 1 || resultCode != Activity.RESULT_OK || resultData == null) {                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 237             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238         }                                                                                                </span>
<span  style=""> 239                                                                                                          </span>
<span class="-5813903460581087014" onmouseenter="enter('-5813903460581087014');" onmouseout="out('-5813903460581087014');" style=""> 240         Uri uri = resultData.getData();                                                                  </span>
<span  style=""> 241                                                                                                          </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style=""> 242         Simplenote currentApp = (Simplenote) getActivity().getApplication();                             </span>
<span class="5741585060608048581" onmouseenter="enter('5741585060608048581');" onmouseout="out('5741585060608048581');" style=""> 243         Bucket&lt;Note&gt; noteBucket = currentApp.getNotesBucket();                                           </span>
<span class="-1289751974263118167" onmouseenter="enter('-1289751974263118167');" onmouseout="out('-1289751974263118167');" style=""> 244         Bucket&lt;Tag&gt; tagBucket = currentApp.getTagsBucket();                                              </span>
<span  style=""> 245                                                                                                          </span>
<span class="-2573210000671885020" onmouseenter="enter('-2573210000671885020');" onmouseout="out('-2573210000671885020');" style=""> 246         JSONObject account = new JSONObject();                                                           </span>
<span  style=""> 247                                                                                                          </span>
<span class="8693188982604872634" onmouseenter="enter('8693188982604872634');" onmouseout="out('8693188982604872634');" style=""> 248         Bucket.ObjectCursor&lt;Note&gt; cursor = noteBucket.allObjects();                                      </span>
<span  style=""> 249                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 250         try {                                                                                            </span>
<span class="-6836816169516685361" onmouseenter="enter('-6836816169516685361');" onmouseout="out('-6836816169516685361');" style=""> 251             account.put(&quot;user&quot;, currentApp.getSimperium().getUser().getEmail());                         </span>
<span  style=""> 252                                                                                                          </span>
<span class="-364427120790392208" onmouseenter="enter('-364427120790392208');" onmouseout="out('-364427120790392208');" style=""> 253             JSONArray notes = new JSONArray();                                                           </span>
<span class="-679463407698125917" onmouseenter="enter('-679463407698125917');" onmouseout="out('-679463407698125917');" style=""> 254             while (cursor.moveToNext()) {                                                                </span>
<span class="-2832188742216530514" onmouseenter="enter('-2832188742216530514');" onmouseout="out('-2832188742216530514');" style=""> 255                 Note appNote = cursor.getObject();                                                       </span>
<span class="-281892266362858858" onmouseenter="enter('-281892266362858858');" onmouseout="out('-281892266362858858');" style=""> 256                 JSONObject note = new JSONObject();                                                      </span>
<span  style=""> 257                                                                                                          </span>
<span class="4784441280085587484" onmouseenter="enter('4784441280085587484');" onmouseout="out('4784441280085587484');" style=""> 258                 note.put(&quot;id&quot;, appNote.getSimperiumKey());                                               </span>
<span class="4302596085175232103" onmouseenter="enter('4302596085175232103');" onmouseout="out('4302596085175232103');" style=""> 259                 note.put(&quot;deleted&quot;, appNote.isDeleted());                                                </span>
<span class="-1375543318608043631" onmouseenter="enter('-1375543318608043631');" onmouseout="out('-1375543318608043631');" style=""> 260                 note.put(&quot;content&quot;, appNote.getContent());                                               </span>
<span class="6754322225078731476" onmouseenter="enter('6754322225078731476');" onmouseout="out('6754322225078731476');" style=""> 261                 note.put(&quot;publishURL&quot;, appNote.getPublishedUrl());                                       </span>
<span class="2831236258407328761" onmouseenter="enter('2831236258407328761');" onmouseout="out('2831236258407328761');" style=""> 262                 note.put(&quot;tags&quot;, new JSONArray(appNote.getTags()));                                      </span>
<span class="-5634056099564214119" onmouseenter="enter('-5634056099564214119');" onmouseout="out('-5634056099564214119');" style=""> 263                 note.put(&quot;systemTags&quot;, appNote.getSystemTags());                                         </span>
<span  style=""> 264                                                                                                          </span>
<span class="5037155776270337248" onmouseenter="enter('5037155776270337248');" onmouseout="out('5037155776270337248');" style=""> 265                 note.put(&quot;version&quot;, appNote.getVersion());                                               </span>
<span  style=""> 266                                                                                                          </span>
<span class="-6448452813514862631" onmouseenter="enter('-6448452813514862631');" onmouseout="out('-6448452813514862631');" style=""> 267                 notes.put(note);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268             }                                                                                            </span>
<span class="-900806749799034471" onmouseenter="enter('-900806749799034471');" onmouseout="out('-900806749799034471');" style=""> 269             account.put(&quot;notes&quot;, notes);                                                                 </span>
<span  style=""> 270                                                                                                          </span>
<span class="-484124656827523157" onmouseenter="enter('-484124656827523157');" onmouseout="out('-484124656827523157');" style=""> 271             JSONArray tags = new JSONArray();                                                            </span>
<span class="7573437584692849817" onmouseenter="enter('7573437584692849817');" onmouseout="out('7573437584692849817');" style=""> 272             Bucket.ObjectCursor&lt;Tag&gt; tagCursor = tagBucket.allObjects();                                 </span>
<span class="7257439043024175527" onmouseenter="enter('7257439043024175527');" onmouseout="out('7257439043024175527');" style=""> 273             while (tagCursor.moveToNext()) {                                                             </span>
<span class="7294797734220556166" onmouseenter="enter('7294797734220556166');" onmouseout="out('7294797734220556166');" style=""> 274                 Tag appTag = tagCursor.getObject();                                                      </span>
<span class="-738866739334787476" onmouseenter="enter('-738866739334787476');" onmouseout="out('-738866739334787476');" style=""> 275                 JSONObject tag = new JSONObject();                                                       </span>
<span  style=""> 276                                                                                                          </span>
<span class="-6932251409781771830" onmouseenter="enter('-6932251409781771830');" onmouseout="out('-6932251409781771830');" style=""> 277                 tag.put(&quot;id&quot;, appTag.getSimperiumKey());                                                 </span>
<span class="-1441446876201711797" onmouseenter="enter('-1441446876201711797');" onmouseout="out('-1441446876201711797');" style=""> 278                 tag.put(&quot;name&quot;, appTag.getName());                                                       </span>
<span  style=""> 279                                                                                                          </span>
<span class="1767952690529220579" onmouseenter="enter('1767952690529220579');" onmouseout="out('1767952690529220579');" style=""> 280                 if (null != appTag.getIndex()) {                                                         </span>
<span class="-6526561763226610133" onmouseenter="enter('-6526561763226610133');" onmouseout="out('-6526561763226610133');" style=""> 281                     tag.put(&quot;index&quot;, appTag.getIndex());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282                 }                                                                                        </span>
<span  style=""> 283                                                                                                          </span>
<span class="-2146716553142207437" onmouseenter="enter('-2146716553142207437');" onmouseout="out('-2146716553142207437');" style=""> 284                 tag.put(&quot;version&quot;, appTag.getVersion());                                                 </span>
<span  style=""> 285                                                                                                          </span>
<span class="-4835038884243430189" onmouseenter="enter('-4835038884243430189');" onmouseout="out('-4835038884243430189');" style=""> 286                 tags.put(tag);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287             }                                                                                            </span>
<span  style=""> 288                                                                                                          </span>
<span class="8247220099271615115" onmouseenter="enter('8247220099271615115');" onmouseout="out('8247220099271615115');" style=""> 289             account.put(&quot;tags&quot;, tags);                                                                   </span>
<span  style=""> 290                                                                                                          </span>
<span class="-2729345193604737994" onmouseenter="enter('-2729345193604737994');" onmouseout="out('-2729345193604737994');" style=""> 291             ParcelFileDescriptor pfd = getActivity().getContentResolver().openFileDescriptor(uri, &quot;w&quot;);  </span>
<span class="-370571335155435742" onmouseenter="enter('-370571335155435742');" onmouseout="out('-370571335155435742');" style=""> 292             FileOutputStream fileOutputStream = new FileOutputStream(pfd.getFileDescriptor());           </span>
<span class="551787877958277432" onmouseenter="enter('551787877958277432');" onmouseout="out('551787877958277432');" style=""> 293             fileOutputStream.write(account.toString(2).getBytes());                                      </span>
<span class="-2121397186699676455" onmouseenter="enter('-2121397186699676455');" onmouseout="out('-2121397186699676455');" style=""> 294             pfd.close();                                                                                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 295         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 296             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 297         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298     }                                                                                                    </span>
<span  style=""> 299                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 300     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 301     public void onPause() {                                                                              </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 302         super.onPause();                                                                                 </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 303         mPreferencesBucket.stop();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304     }                                                                                                    </span>
<span  style=""> 305                                                                                                          </span>
<span class="-8704268889922853518" onmouseenter="enter('-8704268889922853518');" onmouseout="out('-8704268889922853518');" style=""> 306     private DialogInterface.OnClickListener logOutClickListener = new DialogInterface.OnClickListener() {</span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 307         @Override                                                                                        </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 308         public void onClick(DialogInterface dialogInterface, int i) {                                    </span>
<span class="-2307534810381711346" onmouseenter="enter('-2307534810381711346');" onmouseout="out('-2307534810381711346');" style=""> 309             logOut();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 311     };                                                                                                   </span>
<span  style=""> 312                                                                                                          </span>
<span class="-698083585503025487" onmouseenter="enter('-698083585503025487');" onmouseout="out('-698083585503025487');" style=""><abbr title=" 313     private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListener() {"> 313     private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListener🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 314         @Override                                                                                        </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 315         public void onClick(DialogInterface dialogInterface, int i) {                                    </span>
<span class="-1376352079449399710" onmouseenter="enter('-1376352079449399710');" onmouseout="out('-1376352079449399710');" style=""> 316             BrowserUtils.launchBrowserOrShowError(requireContext(), WEB_APP_URL);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 317         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 318     };                                                                                                   </span>
<span  style=""> 319                                                                                                          </span>
<span class="-2746710762323274178" onmouseenter="enter('-2746710762323274178');" onmouseout="out('-2746710762323274178');" style=""> 320     private boolean hasUnsyncedNotes() {                                                                 </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 321         Simplenote application = (Simplenote) getActivity().getApplication();                            </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 322         Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style=""> 323         Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style=""> 324         while (notesCursor.moveToNext()) {                                                               </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style=""> 325             Note note = notesCursor.getObject();                                                         </span>
<span class="-8724002811605814194" onmouseenter="enter('-8724002811605814194');" onmouseout="out('-8724002811605814194');" style=""> 326             if (note.isNew() || note.isModified()) {                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 327                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329         }                                                                                                </span>
<span  style=""> 330                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 331         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332     }                                                                                                    </span>
<span  style=""> 333                                                                                                          </span>
<span class="6766759746618176914" onmouseenter="enter('6766759746618176914');" onmouseout="out('6766759746618176914');" style=""> 334     private void logOut() {                                                                              </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 335         Simplenote application = (Simplenote) getActivity().getApplication();                            </span>
<span class="1492891761222902367" onmouseenter="enter('1492891761222902367');" onmouseout="out('1492891761222902367');" style=""> 336         application.getSimperium().deauthorizeUser();                                                    </span>
<span  style=""> 337                                                                                                          </span>
<span class="7043558399093065986" onmouseenter="enter('7043558399093065986');" onmouseout="out('7043558399093065986');" style=""> 338         application.getNotesBucket().reset();                                                            </span>
<span class="6239456552485319541" onmouseenter="enter('6239456552485319541');" onmouseout="out('6239456552485319541');" style=""> 339         application.getTagsBucket().reset();                                                             </span>
<span class="8813783904792492357" onmouseenter="enter('8813783904792492357');" onmouseout="out('8813783904792492357');" style=""> 340         application.getPreferencesBucket().reset();                                                      </span>
<span  style=""> 341                                                                                                          </span>
<span class="-2290183695292509841" onmouseenter="enter('-2290183695292509841');" onmouseout="out('-2290183695292509841');" style=""> 342         application.getNotesBucket().stop();                                                             </span>
<span class="1881204346293915273" onmouseenter="enter('1881204346293915273');" onmouseout="out('1881204346293915273');" style=""> 343         application.getTagsBucket().stop();                                                              </span>
<span class="4389321878217818521" onmouseenter="enter('4389321878217818521');" onmouseout="out('4389321878217818521');" style=""> 344         application.getPreferencesBucket().stop();                                                       </span>
<span  style=""> 345                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 346         AnalyticsTracker.track(                                                                          </span>
<span class="1682841947070741936" onmouseenter="enter('1682841947070741936');" onmouseout="out('1682841947070741936');" style=""> 347                 AnalyticsTracker.Stat.USER_SIGNED_OUT,                                                   </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 348                 AnalyticsTracker.CATEGORY_USER,                                                          </span>
<span class="4079591682198083249" onmouseenter="enter('4079591682198083249');" onmouseout="out('4079591682198083249');" style=""> 349                 &quot;preferences_sign_out_button&quot;                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 350         );                                                                                               </span>
<span  style=""> 351                                                                                                          </span>
<span class="-7624151188866077780" onmouseenter="enter('-7624151188866077780');" onmouseout="out('-7624151188866077780');" style=""> 352         // Resets analytics user back to &#x27;anon&#x27; type                                                     </span>
<span class="-8646882850309232593" onmouseenter="enter('-8646882850309232593');" onmouseout="out('-8646882850309232593');" style=""> 353         AnalyticsTracker.refreshMetadata(null);                                                          </span>
<span class="7088142554023647232" onmouseenter="enter('7088142554023647232');" onmouseout="out('7088142554023647232');" style=""> 354         CrashUtils.clearCurrentUser();                                                                   </span>
<span  style=""> 355                                                                                                          </span>
<span class="2045801939261456210" onmouseenter="enter('2045801939261456210');" onmouseout="out('2045801939261456210');" style=""> 356         // Remove wp.com token                                                                           </span>
<span class="6759455075429047207" onmouseenter="enter('6759455075429047207');" onmouseout="out('6759455075429047207');" style=""><abbr title=" 357         SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).edit();"> 357         SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).ed🔵</abbr></span>
<span class="3747765183142081866" onmouseenter="enter('3747765183142081866');" onmouseout="out('3747765183142081866');" style=""> 358         editor.remove(PrefUtils.PREF_WP_TOKEN);                                                          </span>
<span  style=""> 359                                                                                                          </span>
<span class="-3120932776057048446" onmouseenter="enter('-3120932776057048446');" onmouseout="out('-3120932776057048446');" style=""> 360         // Remove WordPress sites                                                                        </span>
<span class="-7780340906700244594" onmouseenter="enter('-7780340906700244594');" onmouseout="out('-7780340906700244594');" style=""> 361         editor.remove(PrefUtils.PREF_WORDPRESS_SITES);                                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 362         editor.apply();                                                                                  </span>
<span  style=""> 363                                                                                                          </span>
<span class="4563224411068398132" onmouseenter="enter('4563224411068398132');" onmouseout="out('4563224411068398132');" style=""> 364         // Remove Passcode Lock password                                                                 </span>
<span class="400057636120928336" onmouseenter="enter('400057636120928336');" onmouseout="out('400057636120928336');" style=""> 365         AppLockManager.getInstance().getAppLock().setPassword(&quot;&quot;);                                       </span>
<span  style=""> 366                                                                                                          </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 367         WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                        </span>
<span  style=""> 368                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 369         getActivity().finish();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370     }                                                                                                    </span>
<span  style=""> 371                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 372     @Override                                                                                            </span>
<span class="-5342682213111723277" onmouseenter="enter('-5342682213111723277');" onmouseout="out('-5342682213111723277');" style=""> 373     public void onUserStatusChange(User.Status status) {                                                 </span>
<span class="3969702543635342042" onmouseenter="enter('3969702543635342042');" onmouseout="out('3969702543635342042');" style=""> 374         if (isAdded() &amp;&amp; status == User.Status.AUTHORIZED) {                                             </span>
<span class="4458767919757787183" onmouseenter="enter('4458767919757787183');" onmouseout="out('4458767919757787183');" style=""> 375             // User signed in                                                                            </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 376             getActivity().runOnUiThread(new Runnable() {                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 377                 public void run() {                                                                      </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style=""> 378                     Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);         </span>
<span class="8885574470684679352" onmouseenter="enter('8885574470684679352');" onmouseout="out('8885574470684679352');" style=""> 379                     authenticatePreference.setTitle(R.string.log_out);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 381             });                                                                                          </span>
<span  style=""> 382                                                                                                          </span>
<span class="1736644716831373310" onmouseenter="enter('1736644716831373310');" onmouseout="out('1736644716831373310');" style=""> 383             Simplenote app = (Simplenote) getActivity().getApplication();                                </span>
<span class="6176818654817156375" onmouseenter="enter('6176818654817156375');" onmouseout="out('6176818654817156375');" style=""> 384             AnalyticsTracker.refreshMetadata(app.getSimperium().getUser().getEmail());                   </span>
<span class="-5091612656435705492" onmouseenter="enter('-5091612656435705492');" onmouseout="out('-5091612656435705492');" style=""> 385             CrashUtils.setCurrentUser(app.getSimperium().getUser());                                     </span>
<span  style=""> 386                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 387             AnalyticsTracker.track(                                                                      </span>
<span class="-2120239274310567773" onmouseenter="enter('-2120239274310567773');" onmouseout="out('-2120239274310567773');" style=""> 388                     AnalyticsTracker.Stat.USER_SIGNED_IN,                                                </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 389                     AnalyticsTracker.CATEGORY_USER,                                                      </span>
<span class="-1887876783048589275" onmouseenter="enter('-1887876783048589275');" onmouseout="out('-1887876783048589275');" style=""> 390                     &quot;signed_in_from_preferences_activity&quot;                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 391             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393     }                                                                                                    </span>
<span  style=""> 394                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 395     @Override                                                                                            </span>
<span class="5984220864459059356" onmouseenter="enter('5984220864459059356');" onmouseout="out('5984220864459059356');" style=""> 396     public void onUserCreated(User user) {                                                               </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 397         AnalyticsTracker.track(                                                                          </span>
<span class="173757116163891806" onmouseenter="enter('173757116163891806');" onmouseout="out('173757116163891806');" style=""> 398                 AnalyticsTracker.Stat.USER_ACCOUNT_CREATED,                                              </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 399                 AnalyticsTracker.CATEGORY_USER,                                                          </span>
<span class="3712512237873507570" onmouseenter="enter('3712512237873507570');" onmouseout="out('3712512237873507570');" style=""> 400                 &quot;account_created_from_preferences_activity&quot;                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 401         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402     }                                                                                                    </span>
<span  style=""> 403                                                                                                          </span>
<span class="5598091284936706499" onmouseenter="enter('5598091284936706499');" onmouseout="out('5598091284936706499');" style=""> 404     private void updateAnalyticsSwitchState() {                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 405         try {                                                                                            </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 406             Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                          </span>
<span class="2776107362356981254" onmouseenter="enter('2776107362356981254');" onmouseout="out('2776107362356981254');" style=""> 407             mAnalyticsSwitch.setChecked(prefs.getAnalyticsEnabled());                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 408         } catch (BucketObjectMissingException e) {                                                       </span>
<span class="2124131716277693204" onmouseenter="enter('2124131716277693204');" onmouseout="out('2124131716277693204');" style=""> 409             // The preferences object doesn&#x27;t exist for this user yet, create it                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 410             try {                                                                                        </span>
<span class="8863892184482182459" onmouseenter="enter('8863892184482182459');" onmouseout="out('8863892184482182459');" style=""> 411                 Preferences prefs = mPreferencesBucket.newObject(PREFERENCES_OBJECT_KEY);                </span>
<span class="-3725197847428303949" onmouseenter="enter('-3725197847428303949');" onmouseout="out('-3725197847428303949');" style=""> 412                 prefs.setAnalyticsEnabled(true);                                                         </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 413                 prefs.save();                                                                            </span>
<span class="-1061155454955510578" onmouseenter="enter('-1061155454955510578');" onmouseout="out('-1061155454955510578');" style=""> 414             } catch (BucketObjectNameInvalid bucketObjectNameInvalid) {                                  </span>
<span class="1883933860530627988" onmouseenter="enter('1883933860530627988');" onmouseout="out('1883933860530627988');" style=""> 415                 bucketObjectNameInvalid.printStackTrace();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418     }                                                                                                    </span>
<span  style=""> 419                                                                                                          </span>
<span class="6003914412447352798" onmouseenter="enter('6003914412447352798');" onmouseout="out('6003914412447352798');" style=""> 420     private static class LogOutTask extends AsyncTask&lt;Void, Void, Boolean&gt; {                             </span>
<span class="-8626644697686121306" onmouseenter="enter('-8626644697686121306');" onmouseout="out('-8626644697686121306');" style=""> 421         private WeakReference&lt;PreferencesFragment&gt; mPreferencesFragmentReference;                        </span>
<span  style=""> 422                                                                                                          </span>
<span class="556201937984791944" onmouseenter="enter('556201937984791944');" onmouseout="out('556201937984791944');" style=""> 423         LogOutTask(PreferencesFragment fragment) {                                                       </span>
<span class="-8947237769278526855" onmouseenter="enter('-8947237769278526855');" onmouseout="out('-8947237769278526855');" style=""> 424             mPreferencesFragmentReference = new WeakReference&lt;&gt;(fragment);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425         }                                                                                                </span>
<span  style=""> 426                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 427         @Override                                                                                        </span>
<span class="6715077551046087572" onmouseenter="enter('6715077551046087572');" onmouseout="out('6715077551046087572');" style=""> 428         protected Boolean doInBackground(Void... voids) {                                                </span>
<span class="1614077137004075676" onmouseenter="enter('1614077137004075676');" onmouseout="out('1614077137004075676');" style=""> 429             PreferencesFragment fragment = mPreferencesFragmentReference.get();                          </span>
<span class="6685718295711545449" onmouseenter="enter('6685718295711545449');" onmouseout="out('6685718295711545449');" style=""> 430             return fragment == null || fragment.hasUnsyncedNotes();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431         }                                                                                                </span>
<span  style=""> 432                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 433         @Override                                                                                        </span>
<span class="-6776128592848448095" onmouseenter="enter('-6776128592848448095');" onmouseout="out('-6776128592848448095');" style=""> 434         protected void onPostExecute(Boolean hasUnsyncedNotes) {                                         </span>
<span class="1614077137004075676" onmouseenter="enter('1614077137004075676');" onmouseout="out('1614077137004075676');" style=""> 435             PreferencesFragment fragment = mPreferencesFragmentReference.get();                          </span>
<span  style=""> 436                                                                                                          </span>
<span class="871842557913824847" onmouseenter="enter('871842557913824847');" onmouseout="out('871842557913824847');" style=""> 437             if (fragment == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 438                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439             }                                                                                            </span>
<span  style=""> 440                                                                                                          </span>
<span class="-4113446021503535506" onmouseenter="enter('-4113446021503535506');" onmouseout="out('-4113446021503535506');" style=""> 441             // Safety first! Check if any notes are unsynced and warn the user if so.                    </span>
<span class="-5077436549454521569" onmouseenter="enter('-5077436549454521569');" onmouseout="out('-5077436549454521569');" style=""> 442             if (hasUnsyncedNotes) {                                                                      </span>
<span class="3542977983821060447" onmouseenter="enter('3542977983821060447');" onmouseout="out('3542977983821060447');" style=""><abbr title=" 443                 new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.Dialog))"> 443                 new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.Dialog🔵</abbr></span>
<span class="-3694903935099593007" onmouseenter="enter('-3694903935099593007');" onmouseout="out('-3694903935099593007');" style=""> 444                         .setTitle(R.string.unsynced_notes)                                               </span>
<span class="8004583072247328964" onmouseenter="enter('8004583072247328964');" onmouseout="out('8004583072247328964');" style=""> 445                         .setMessage(R.string.unsynced_notes_message)                                     </span>
<span class="2427359236939967623" onmouseenter="enter('2427359236939967623');" onmouseout="out('2427359236939967623');" style=""> 446                         .setPositiveButton(R.string.delete_notes, fragment.logOutClickListener)          </span>
<span class="7005110418642332587" onmouseenter="enter('7005110418642332587');" onmouseout="out('7005110418642332587');" style=""> 447                         .setNeutralButton(R.string.visit_web_app, fragment.loadWebAppClickListener)      </span>
<span class="-1520918194926717469" onmouseenter="enter('-1520918194926717469');" onmouseout="out('-1520918194926717469');" style=""> 448                         .setNegativeButton(R.string.cancel, null)                                        </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style=""> 449                         .show();                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 450             } else {                                                                                     </span>
<span class="-2448080142593331977" onmouseenter="enter('-2448080142593331977');" onmouseout="out('-2448080142593331977');" style=""> 451                 fragment.logOut();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455 }                                                                                                        </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   4 import android.app.Fragment;                                                                             </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   5 import android.content.ClipData;                                                                         </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   6 import android.content.ClipboardManager;                                                                 </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   7 import android.content.Context;                                                                          </span>
<span class="-5438333149234786386" onmouseenter="enter('-5438333149234786386');" onmouseout="out('-5438333149234786386');" style="">   8 import android.content.DialogInterface;                                                                  </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   9 import android.content.Intent;                                                                           </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  10 import android.content.SharedPreferences;                                                                </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  11 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  12 import android.os.Bundle;                                                                                </span>
<span class="-5436718358296125427" onmouseenter="enter('-5436718358296125427');" onmouseout="out('-5436718358296125427');" style="">  13 import android.os.ParcelFileDescriptor;                                                                  </span>
<span class="7440210109790075870" onmouseenter="enter('7440210109790075870');" onmouseout="out('7440210109790075870');" style="">  14 import android.provider.DocumentsContract;                                                               </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  15 import android.widget.Toast;                                                                             </span>
<span  style="">  16                                                                                                          </span>
<span class="-8930837843172754904" onmouseenter="enter('-8930837843172754904');" onmouseout="out('-8930837843172754904');" style="">  17 import androidx.appcompat.app.AlertDialog;                                                               </span>
<span class="-8763141247638307783" onmouseenter="enter('-8763141247638307783');" onmouseout="out('-8763141247638307783');" style="">  18 import androidx.appcompat.view.ContextThemeWrapper;                                                      </span>
<span class="-7553031234002075668" onmouseenter="enter('-7553031234002075668');" onmouseout="out('-7553031234002075668');" style="">  19 import androidx.preference.ListPreference;                                                               </span>
<span class="-3312641230509782710" onmouseenter="enter('-3312641230509782710');" onmouseout="out('-3312641230509782710');" style="">  20 import androidx.preference.Preference;                                                                   </span>
<span class="-6464340996904493039" onmouseenter="enter('-6464340996904493039');" onmouseout="out('-6464340996904493039');" style="">  21 import androidx.preference.PreferenceFragmentCompat;                                                     </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  22 import androidx.preference.PreferenceManager;                                                            </span>
<span class="-8714897093372589764" onmouseenter="enter('-8714897093372589764');" onmouseout="out('-8714897093372589764');" style="">  23 import androidx.preference.SwitchPreferenceCompat;                                                       </span>
<span  style="">  24                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  25 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  26 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  27 import com.automattic.simplenote.models.Preferences;                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  28 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  29 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  30 import com.automattic.simplenote.utils.CrashUtils;                                                       </span>
<span class="5145471914103640094" onmouseenter="enter('5145471914103640094');" onmouseout="out('5145471914103640094');" style="">  31 import com.automattic.simplenote.utils.HtmlCompat;                                                       </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  32 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  33 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  34 import com.simperium.Simperium;                                                                          </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  35 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  36 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-3142233007863984129" onmouseenter="enter('-3142233007863984129');" onmouseout="out('-3142233007863984129');" style="">  37 import com.simperium.client.BucketObjectNameInvalid;                                                     </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  38 import com.simperium.client.User;                                                                        </span>
<span  style="">  39                                                                                                          </span>
<span class="-9193129351684262878" onmouseenter="enter('-9193129351684262878');" onmouseout="out('-9193129351684262878');" style="">  40 import org.json.JSONArray;                                                                               </span>
<span class="7232075261178918144" onmouseenter="enter('7232075261178918144');" onmouseout="out('7232075261178918144');" style="">  41 import org.json.JSONObject;                                                                              </span>
<span class="7324884800271719890" onmouseenter="enter('7324884800271719890');" onmouseout="out('7324884800271719890');" style="">  42 import org.wordpress.passcodelock.AppLockManager;                                                        </span>
<span  style="">  43                                                                                                          </span>
<span class="4915709264156936957" onmouseenter="enter('4915709264156936957');" onmouseout="out('4915709264156936957');" style="">  44 import java.io.FileOutputStream;                                                                         </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  45 import java.lang.ref.WeakReference;                                                                      </span>
<span  style="">  46                                                                                                          </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="">  47 import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                       </span>
<span  style="">  48                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  49 /**                                                                                                      </span>
<span class="5114139633798332353" onmouseenter="enter('5114139633798332353');" onmouseout="out('5114139633798332353');" style="">  50  * A simple {@link Fragment} subclass.                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  51  */                                                                                                      </span>
<span class="8213712831003870267" onmouseenter="enter('8213712831003870267');" onmouseout="out('8213712831003870267');" style="">  52 public class PreferencesFragment extends PreferenceFragmentCompat implements User.StatusChangeListener,  </span>
<span class="-6650933180145052624" onmouseenter="enter('-6650933180145052624');" onmouseout="out('-6650933180145052624');" style="">  53         Simperium.OnUserCreatedListener {                                                                </span>
<span  style="">  54                                                                                                          </span>
<span class="6526302226782351091" onmouseenter="enter('6526302226782351091');" onmouseout="out('6526302226782351091');" style="">  55     private static final String WEB_APP_URL = &quot;https://app.simplenote.com&quot;;                              </span>
<span  style="">  56                                                                                                          </span>
<span class="-3814969503072913312" onmouseenter="enter('-3814969503072913312');" onmouseout="out('-3814969503072913312');" style="">  57     private Bucket&lt;Preferences&gt; mPreferencesBucket;                                                      </span>
<span class="-908783299724709915" onmouseenter="enter('-908783299724709915');" onmouseout="out('-908783299724709915');" style="">  58     private SwitchPreferenceCompat mAnalyticsSwitch;                                                     </span>
<span  style="">  59                                                                                                          </span>
<span class="-1679820400310610015" onmouseenter="enter('-1679820400310610015');" onmouseout="out('-1679820400310610015');" style="">  60     public PreferencesFragment() {                                                                       </span>
<span class="5025324504900911379" onmouseenter="enter('5025324504900911379');" onmouseout="out('5025324504900911379');" style="">  61         // Required empty public constructor                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62     }                                                                                                    </span>
<span  style="">  63                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  64     @Override                                                                                            </span>
<span class="4595408869200273860" onmouseenter="enter('4595408869200273860');" onmouseout="out('4595408869200273860');" style="">  65     public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {                         </span>
<span class="5290641457290853720" onmouseenter="enter('5290641457290853720');" onmouseout="out('5290641457290853720');" style="">  66         addPreferencesFromResource(R.xml.preferences);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  67     }                                                                                                    </span>
<span  style="">  68                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  69     @Override                                                                                            </span>
<span class="4360549941650676478" onmouseenter="enter('4360549941650676478');" onmouseout="out('4360549941650676478');" style="">  70     public void onActivityCreated(Bundle savedInstanceState) {                                           </span>
<span class="1612263533902931469" onmouseenter="enter('1612263533902931469');" onmouseout="out('1612263533902931469');" style="">  71         super.onActivityCreated(savedInstanceState);                                                     </span>
<span  style="">  72                                                                                                          </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style="">  73         Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                     </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  74         Simplenote currentApp = (Simplenote) getActivity().getApplication();                             </span>
<span class="-4589466368752372978" onmouseenter="enter('-4589466368752372978');" onmouseout="out('-4589466368752372978');" style="">  75         Simperium simperium = currentApp.getSimperium();                                                 </span>
<span class="2748958065852789861" onmouseenter="enter('2748958065852789861');" onmouseout="out('2748958065852789861');" style="">  76         simperium.setUserStatusChangeListener(this);                                                     </span>
<span class="-2272979595474747044" onmouseenter="enter('-2272979595474747044');" onmouseout="out('-2272979595474747044');" style="">  77         simperium.setOnUserCreatedListener(this);                                                        </span>
<span class="-8025066121623883978" onmouseenter="enter('-8025066121623883978');" onmouseout="out('-8025066121623883978');" style="">  78         mPreferencesBucket = currentApp.getPreferencesBucket();                                          </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style="">  79         mPreferencesBucket.start();                                                                      </span>
<span  style="">  80                                                                                                          </span>
<span class="5417399975767426553" onmouseenter="enter('5417399975767426553');" onmouseout="out('5417399975767426553');" style="">  81         authenticatePreference.setSummary(currentApp.getSimperium().getUser().getEmail());               </span>
<span class="-3342250548665049241" onmouseenter="enter('-3342250548665049241');" onmouseout="out('-3342250548665049241');" style="">  82         if (simperium.needsAuthorization()) {                                                            </span>
<span class="8210597588054659575" onmouseenter="enter('8210597588054659575');" onmouseout="out('8210597588054659575');" style="">  83             authenticatePreference.setTitle(R.string.log_in);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  84         } else {                                                                                         </span>
<span class="8885574470684679352" onmouseenter="enter('8885574470684679352');" onmouseout="out('8885574470684679352');" style="">  85             authenticatePreference.setTitle(R.string.log_out);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86         }                                                                                                </span>
<span  style="">  87                                                                                                          </span>
<span class="-1521554305857532068" onmouseenter="enter('-1521554305857532068');" onmouseout="out('-1521554305857532068');" style="">  88         authenticatePreference.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() { </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  89             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  90             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style="">  91                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  92                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93                 }                                                                                        </span>
<span  style="">  94                                                                                                          </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  95                 Simplenote currentApp = (Simplenote) getActivity().getApplication();                     </span>
<span class="-1805411858302537149" onmouseenter="enter('-1805411858302537149');" onmouseout="out('-1805411858302537149');" style="">  96                 if (currentApp.getSimperium().needsAuthorization()) {                                    </span>
<span class="-1894877037162085011" onmouseenter="enter('-1894877037162085011');" onmouseout="out('-1894877037162085011');" style=""><abbr title="  97                     Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.class);">  97                     Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.class🔵</abbr></span>
<span class="-1745782676004839840" onmouseenter="enter('-1745782676004839840');" onmouseout="out('-1745782676004839840');" style="">  98                     startActivityForResult(loginIntent, Simperium.SIGNUP_SIGNIN_REQUEST);                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  99                 } else {                                                                                 </span>
<span class="-1878844134905051149" onmouseenter="enter('-1878844134905051149');" onmouseout="out('-1878844134905051149');" style=""> 100                     new LogOutTask(PreferencesFragment.this).execute();                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 101                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 102                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 104         });                                                                                              </span>
<span  style=""> 105                                                                                                          </span>
<span class="-3317947868564721602" onmouseenter="enter('-3317947868564721602');" onmouseout="out('-3317947868564721602');" style=""><abbr title=" 106         findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 106         findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickL🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 107             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 108             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 109                 try {                                                                                    </span>
<span class="5515326037292150005" onmouseenter="enter('5515326037292150005');" onmouseout="out('5515326037292150005');" style=""> 110                     BrowserUtils.launchBrowserOrShowError(requireContext(), &quot;http://simplenote.com&quot;);    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 111                 } catch (Exception e) {                                                                  </span>
<span class="3734798154944032055" onmouseenter="enter('3734798154944032055');" onmouseout="out('3734798154944032055');" style=""><abbr title=" 112                     Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show();"> 112                     Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show(🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 114                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 115             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 116         });                                                                                              </span>
<span  style=""> 117                                                                                                          </span>
<span class="7546915923491771618" onmouseenter="enter('7546915923491771618');" onmouseout="out('7546915923491771618');" style=""><abbr title=" 118         findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 118         findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickLis🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 119             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 120             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="8659998783220899939" onmouseenter="enter('8659998783220899939');" onmouseout="out('8659998783220899939');" style=""> 121                 startActivity(new Intent(getActivity(), AboutActivity.class));                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 122                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 124         });                                                                                              </span>
<span  style=""> 125                                                                                                          </span>
<span class="1103776393699537905" onmouseenter="enter('1103776393699537905');" onmouseout="out('1103776393699537905');" style=""><abbr title=" 126         findPreference(&quot;pref_key_export&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 126         findPreference(&quot;pref_key_export&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickLi🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 127             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 128             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="4984554577824553223" onmouseenter="enter('4984554577824553223');" onmouseout="out('4984554577824553223');" style=""> 129                 Intent intent = new Intent(Intent.ACTION_CREATE_DOCUMENT);                               </span>
<span class="8912465054547747469" onmouseenter="enter('8912465054547747469');" onmouseout="out('8912465054547747469');" style=""> 130                 intent.addCategory(Intent.CATEGORY_OPENABLE);                                            </span>
<span class="-6707067096973178010" onmouseenter="enter('-6707067096973178010');" onmouseout="out('-6707067096973178010');" style=""> 131                 intent.setType(&quot;application/json&quot;);                                                      </span>
<span class="-6509278610434426342" onmouseenter="enter('-6509278610434426342');" onmouseout="out('-6509278610434426342');" style=""> 132                 intent.putExtra(Intent.EXTRA_TITLE, &quot;account.json&quot;);                                     </span>
<span  style=""> 133                                                                                                          </span>
<span class="2104595516747401662" onmouseenter="enter('2104595516747401662');" onmouseout="out('2104595516747401662');" style=""> 134                 startActivityForResult(intent, 1);                                                       </span>
<span  style=""> 135                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 136                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 138         });                                                                                              </span>
<span  style=""> 139                                                                                                          </span>
<span class="-2051654600796868045" onmouseenter="enter('-2051654600796868045');" onmouseout="out('-2051654600796868045');" style=""> 140         final ListPreference themePreference = (ListPreference) findPreference(PrefUtils.PREF_THEME);    </span>
<span class="-3135129752727836774" onmouseenter="enter('-3135129752727836774');" onmouseout="out('-3135129752727836774');" style=""> 141         themePreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 142             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 143             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="8972235106908076260" onmouseenter="enter('8972235106908076260');" onmouseout="out('8972235106908076260');" style=""> 144                 updateTheme(requireActivity(), Integer.parseInt(newValue.toString()));                   </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 145                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146             }                                                                                            </span>
<span  style=""> 147                                                                                                          </span>
<span class="7597115961384302616" onmouseenter="enter('7597115961384302616');" onmouseout="out('7597115961384302616');" style=""> 148             private void updateTheme(Activity activity, int index) {                                     </span>
<span class="1607563076949848778" onmouseenter="enter('1607563076949848778');" onmouseout="out('1607563076949848778');" style=""> 149                 CharSequence[] entries = themePreference.getEntries();                                   </span>
<span class="1955249186347848341" onmouseenter="enter('1955249186347848341');" onmouseout="out('1955249186347848341');" style=""> 150                 themePreference.setSummary(entries[index]);                                              </span>
<span  style=""> 151                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 152                 AnalyticsTracker.track(                                                                  </span>
<span class="-3633564244751131710" onmouseenter="enter('-3633564244751131710');" onmouseout="out('-3633564244751131710');" style=""> 153                         AnalyticsTracker.Stat.SETTINGS_THEME_UPDATED,                                    </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 154                         AnalyticsTracker.CATEGORY_USER,                                                  </span>
<span class="8810282947066680931" onmouseenter="enter('8810282947066680931');" onmouseout="out('8810282947066680931');" style=""> 155                         &quot;theme_preference&quot;                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 156                 );                                                                                       </span>
<span  style=""> 157                                                                                                          </span>
<span class="-6345048933952298843" onmouseenter="enter('-6345048933952298843');" onmouseout="out('-6345048933952298843');" style=""> 158                 // recreate the activity so new theme is applied                                         </span>
<span class="6106586807651914503" onmouseenter="enter('6106586807651914503');" onmouseout="out('6106586807651914503');" style=""> 159                 activity.recreate();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 161         });                                                                                              </span>
<span  style=""> 162                                                                                                          </span>
<span class="-3563544225355858599" onmouseenter="enter('-3563544225355858599');" onmouseout="out('-3563544225355858599');" style=""> 163         final ListPreference sortPreference = (ListPreference) findPreference(PrefUtils.PREF_SORT_ORDER);</span>
<span class="-5125317966081854635" onmouseenter="enter('-5125317966081854635');" onmouseout="out('-5125317966081854635');" style=""> 164         sortPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 165             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 166             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="-8870833255101890428" onmouseenter="enter('-8870833255101890428');" onmouseout="out('-8870833255101890428');" style=""> 167                 int index = Integer.parseInt(newValue.toString());                                       </span>
<span class="4511877948668264185" onmouseenter="enter('4511877948668264185');" onmouseout="out('4511877948668264185');" style=""> 168                 CharSequence[] entries = sortPreference.getEntries();                                    </span>
<span class="-9141657533116186952" onmouseenter="enter('-9141657533116186952');" onmouseout="out('-9141657533116186952');" style=""> 169                 sortPreference.setSummary(entries[index]);                                               </span>
<span  style=""> 170                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 171                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 173         });                                                                                              </span>
<span  style=""> 174                                                                                                          </span>
<span class="-2516209658609361373" onmouseenter="enter('-2516209658609361373');" onmouseout="out('-2516209658609361373');" style=""> 175         Preference versionPref = findPreference(&quot;pref_key_build&quot;);                                       </span>
<span class="2941715853984851229" onmouseenter="enter('2941715853984851229');" onmouseout="out('2941715853984851229');" style=""> 176         versionPref.setSummary(PrefUtils.versionInfo());                                                 </span>
<span  style=""> 177                                                                                                          </span>
<span class="269389859234146346" onmouseenter="enter('269389859234146346');" onmouseout="out('269389859234146346');" style=""><abbr title=" 178         SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condensed_note_list&quot;);"> 178         SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_conde🔵</abbr></span>
<span class="731943818112030665" onmouseenter="enter('731943818112030665');" onmouseout="out('731943818112030665');" style=""> 179         switchPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 180             @Override                                                                                    </span>
<span class="8137396142185538827" onmouseenter="enter('8137396142185538827');" onmouseout="out('8137396142185538827');" style=""> 181             public boolean onPreferenceChange(Preference preference, Object o) {                         </span>
<span class="2703036426639498311" onmouseenter="enter('2703036426639498311');" onmouseout="out('2703036426639498311');" style=""> 182                 if (((SwitchPreferenceCompat) preference).isChecked()) {                                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 183                     AnalyticsTracker.track(                                                              </span>
<span class="8127526149566412653" onmouseenter="enter('8127526149566412653');" onmouseout="out('8127526149566412653');" style=""> 184                             AnalyticsTracker.Stat.SETTINGS_LIST_CONDENSED_ENABLED,                       </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 185                             AnalyticsTracker.CATEGORY_USER,                                              </span>
<span class="-7341164689664996576" onmouseenter="enter('-7341164689664996576');" onmouseout="out('-7341164689664996576');" style=""> 186                             &quot;condensed_list_preference&quot;                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 187                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188                 }                                                                                        </span>
<span  style=""> 189                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 190                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 192         });                                                                                              </span>
<span  style=""> 193                                                                                                          </span>
<span class="-6021379672389812030" onmouseenter="enter('-6021379672389812030');" onmouseout="out('-6021379672389812030');" style=""> 194         // Add the hyperlink to the analytics summary                                                    </span>
<span class="-3803040130638154017" onmouseenter="enter('-3803040130638154017');" onmouseout="out('-3803040130638154017');" style=""> 195         Preference analyticsSummaryPreference = findPreference(&quot;pref_key_analytics_enabled_summary&quot;);    </span>
<span class="-5954923786447915621" onmouseenter="enter('-5954923786447915621');" onmouseout="out('-5954923786447915621');" style=""> 196         String formattedSummary = String.format(                                                         </span>
<span class="4703350175896481792" onmouseenter="enter('4703350175896481792');" onmouseout="out('4703350175896481792');" style=""> 197                 getString(R.string.share_analytics_summary),                                             </span>
<span class="4561110205824883354" onmouseenter="enter('4561110205824883354');" onmouseout="out('4561110205824883354');" style=""> 198                 &quot;&lt;a href=\&quot;https://automattic.com/cookies\&quot;&gt;&quot;,                                           </span>
<span class="-5125567965545776439" onmouseenter="enter('-5125567965545776439');" onmouseout="out('-5125567965545776439');" style=""> 199                 &quot;&lt;/a&gt;&quot;                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 200         );                                                                                               </span>
<span class="3076824088033544263" onmouseenter="enter('3076824088033544263');" onmouseout="out('3076824088033544263');" style=""> 201         analyticsSummaryPreference.setSummary(HtmlCompat.fromHtml(formattedSummary));                    </span>
<span  style=""> 202                                                                                                          </span>
<span class="2122402547097653030" onmouseenter="enter('2122402547097653030');" onmouseout="out('2122402547097653030');" style=""> 203         mAnalyticsSwitch = (SwitchPreferenceCompat)findPreference(&quot;pref_key_analytics_switch&quot;);          </span>
<span class="5250772881921022799" onmouseenter="enter('5250772881921022799');" onmouseout="out('5250772881921022799');" style=""> 204         mAnalyticsSwitch.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 205             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 206             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 207                 try {                                                                                    </span>
<span class="7999271203428147057" onmouseenter="enter('7999271203428147057');" onmouseout="out('7999271203428147057');" style=""> 208                     boolean isChecked = (boolean)newValue;                                               </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 209                     Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                  </span>
<span class="-3416644870449875468" onmouseenter="enter('-3416644870449875468');" onmouseout="out('-3416644870449875468');" style=""> 210                     prefs.setAnalyticsEnabled(isChecked);                                                </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 211                     prefs.save();                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 212                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 213                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214                 }                                                                                        </span>
<span  style=""> 215                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 216                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 218         });                                                                                              </span>
<span  style=""> 219                                                                                                          </span>
<span class="5339258651008713874" onmouseenter="enter('5339258651008713874');" onmouseout="out('5339258651008713874');" style=""> 220         updateAnalyticsSwitchState();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221     }                                                                                                    </span>
<span  style=""> 222                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 223     @Override                                                                                            </span>
<span class="3267640102220640214" onmouseenter="enter('3267640102220640214');" onmouseout="out('3267640102220640214');" style=""> 224     public void onActivityResult(int requestCode, int resultCode, Intent resultData) {                   </span>
<span class="3621747730259457062" onmouseenter="enter('3621747730259457062');" onmouseout="out('3621747730259457062');" style=""> 225         if (requestCode != 1 || resultCode != Activity.RESULT_OK || resultData == null) {                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 226             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227         }                                                                                                </span>
<span  style=""> 228                                                                                                          </span>
<span class="-5813903460581087014" onmouseenter="enter('-5813903460581087014');" onmouseout="out('-5813903460581087014');" style=""> 229         Uri uri = resultData.getData();                                                                  </span>
<span  style=""> 230                                                                                                          </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style=""> 231         Simplenote currentApp = (Simplenote) getActivity().getApplication();                             </span>
<span class="5741585060608048581" onmouseenter="enter('5741585060608048581');" onmouseout="out('5741585060608048581');" style=""> 232         Bucket&lt;Note&gt; noteBucket = currentApp.getNotesBucket();                                           </span>
<span class="-1289751974263118167" onmouseenter="enter('-1289751974263118167');" onmouseout="out('-1289751974263118167');" style=""> 233         Bucket&lt;Tag&gt; tagBucket = currentApp.getTagsBucket();                                              </span>
<span  style=""> 234                                                                                                          </span>
<span class="-2573210000671885020" onmouseenter="enter('-2573210000671885020');" onmouseout="out('-2573210000671885020');" style=""> 235         JSONObject account = new JSONObject();                                                           </span>
<span  style=""> 236                                                                                                          </span>
<span class="8693188982604872634" onmouseenter="enter('8693188982604872634');" onmouseout="out('8693188982604872634');" style=""> 237         Bucket.ObjectCursor&lt;Note&gt; cursor = noteBucket.allObjects();                                      </span>
<span  style=""> 238                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 239         try {                                                                                            </span>
<span class="-6836816169516685361" onmouseenter="enter('-6836816169516685361');" onmouseout="out('-6836816169516685361');" style=""> 240             account.put(&quot;user&quot;, currentApp.getSimperium().getUser().getEmail());                         </span>
<span  style=""> 241                                                                                                          </span>
<span class="-364427120790392208" onmouseenter="enter('-364427120790392208');" onmouseout="out('-364427120790392208');" style=""> 242             JSONArray notes = new JSONArray();                                                           </span>
<span class="-679463407698125917" onmouseenter="enter('-679463407698125917');" onmouseout="out('-679463407698125917');" style=""> 243             while (cursor.moveToNext()) {                                                                </span>
<span class="-2832188742216530514" onmouseenter="enter('-2832188742216530514');" onmouseout="out('-2832188742216530514');" style=""> 244                 Note appNote = cursor.getObject();                                                       </span>
<span class="-281892266362858858" onmouseenter="enter('-281892266362858858');" onmouseout="out('-281892266362858858');" style=""> 245                 JSONObject note = new JSONObject();                                                      </span>
<span  style=""> 246                                                                                                          </span>
<span class="4784441280085587484" onmouseenter="enter('4784441280085587484');" onmouseout="out('4784441280085587484');" style=""> 247                 note.put(&quot;id&quot;, appNote.getSimperiumKey());                                               </span>
<span class="4302596085175232103" onmouseenter="enter('4302596085175232103');" onmouseout="out('4302596085175232103');" style=""> 248                 note.put(&quot;deleted&quot;, appNote.isDeleted());                                                </span>
<span class="-1375543318608043631" onmouseenter="enter('-1375543318608043631');" onmouseout="out('-1375543318608043631');" style=""> 249                 note.put(&quot;content&quot;, appNote.getContent());                                               </span>
<span class="6754322225078731476" onmouseenter="enter('6754322225078731476');" onmouseout="out('6754322225078731476');" style=""> 250                 note.put(&quot;publishURL&quot;, appNote.getPublishedUrl());                                       </span>
<span class="2831236258407328761" onmouseenter="enter('2831236258407328761');" onmouseout="out('2831236258407328761');" style=""> 251                 note.put(&quot;tags&quot;, new JSONArray(appNote.getTags()));                                      </span>
<span class="-5634056099564214119" onmouseenter="enter('-5634056099564214119');" onmouseout="out('-5634056099564214119');" style=""> 252                 note.put(&quot;systemTags&quot;, appNote.getSystemTags());                                         </span>
<span  style=""> 253                                                                                                          </span>
<span class="5037155776270337248" onmouseenter="enter('5037155776270337248');" onmouseout="out('5037155776270337248');" style=""> 254                 note.put(&quot;version&quot;, appNote.getVersion());                                               </span>
<span  style=""> 255                                                                                                          </span>
<span class="-6448452813514862631" onmouseenter="enter('-6448452813514862631');" onmouseout="out('-6448452813514862631');" style=""> 256                 notes.put(note);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257             }                                                                                            </span>
<span class="-900806749799034471" onmouseenter="enter('-900806749799034471');" onmouseout="out('-900806749799034471');" style=""> 258             account.put(&quot;notes&quot;, notes);                                                                 </span>
<span  style=""> 259                                                                                                          </span>
<span class="-484124656827523157" onmouseenter="enter('-484124656827523157');" onmouseout="out('-484124656827523157');" style=""> 260             JSONArray tags = new JSONArray();                                                            </span>
<span class="7573437584692849817" onmouseenter="enter('7573437584692849817');" onmouseout="out('7573437584692849817');" style=""> 261             Bucket.ObjectCursor&lt;Tag&gt; tagCursor = tagBucket.allObjects();                                 </span>
<span class="7257439043024175527" onmouseenter="enter('7257439043024175527');" onmouseout="out('7257439043024175527');" style=""> 262             while (tagCursor.moveToNext()) {                                                             </span>
<span class="7294797734220556166" onmouseenter="enter('7294797734220556166');" onmouseout="out('7294797734220556166');" style=""> 263                 Tag appTag = tagCursor.getObject();                                                      </span>
<span class="-738866739334787476" onmouseenter="enter('-738866739334787476');" onmouseout="out('-738866739334787476');" style=""> 264                 JSONObject tag = new JSONObject();                                                       </span>
<span  style=""> 265                                                                                                          </span>
<span class="-6932251409781771830" onmouseenter="enter('-6932251409781771830');" onmouseout="out('-6932251409781771830');" style=""> 266                 tag.put(&quot;id&quot;, appTag.getSimperiumKey());                                                 </span>
<span class="-1441446876201711797" onmouseenter="enter('-1441446876201711797');" onmouseout="out('-1441446876201711797');" style=""> 267                 tag.put(&quot;name&quot;, appTag.getName());                                                       </span>
<span  style=""> 268                                                                                                          </span>
<span class="1767952690529220579" onmouseenter="enter('1767952690529220579');" onmouseout="out('1767952690529220579');" style=""> 269                 if (null != appTag.getIndex()) {                                                         </span>
<span class="-6526561763226610133" onmouseenter="enter('-6526561763226610133');" onmouseout="out('-6526561763226610133');" style=""> 270                     tag.put(&quot;index&quot;, appTag.getIndex());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271                 }                                                                                        </span>
<span  style=""> 272                                                                                                          </span>
<span class="-2146716553142207437" onmouseenter="enter('-2146716553142207437');" onmouseout="out('-2146716553142207437');" style=""> 273                 tag.put(&quot;version&quot;, appTag.getVersion());                                                 </span>
<span  style=""> 274                                                                                                          </span>
<span class="-4835038884243430189" onmouseenter="enter('-4835038884243430189');" onmouseout="out('-4835038884243430189');" style=""> 275                 tags.put(tag);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276             }                                                                                            </span>
<span  style=""> 277                                                                                                          </span>
<span class="8247220099271615115" onmouseenter="enter('8247220099271615115');" onmouseout="out('8247220099271615115');" style=""> 278             account.put(&quot;tags&quot;, tags);                                                                   </span>
<span  style=""> 279                                                                                                          </span>
<span class="-2729345193604737994" onmouseenter="enter('-2729345193604737994');" onmouseout="out('-2729345193604737994');" style=""> 280             ParcelFileDescriptor pfd = getActivity().getContentResolver().openFileDescriptor(uri, &quot;w&quot;);  </span>
<span class="-370571335155435742" onmouseenter="enter('-370571335155435742');" onmouseout="out('-370571335155435742');" style=""> 281             FileOutputStream fileOutputStream = new FileOutputStream(pfd.getFileDescriptor());           </span>
<span class="551787877958277432" onmouseenter="enter('551787877958277432');" onmouseout="out('551787877958277432');" style=""> 282             fileOutputStream.write(account.toString(2).getBytes());                                      </span>
<span class="-2121397186699676455" onmouseenter="enter('-2121397186699676455');" onmouseout="out('-2121397186699676455');" style=""> 283             pfd.close();                                                                                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 284         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 285             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287     }                                                                                                    </span>
<span  style=""> 288                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 289     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 290     public void onPause() {                                                                              </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 291         super.onPause();                                                                                 </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 292         mPreferencesBucket.stop();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293     }                                                                                                    </span>
<span  style=""> 294                                                                                                          </span>
<span class="-8704268889922853518" onmouseenter="enter('-8704268889922853518');" onmouseout="out('-8704268889922853518');" style=""> 295     private DialogInterface.OnClickListener logOutClickListener = new DialogInterface.OnClickListener() {</span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 296         @Override                                                                                        </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 297         public void onClick(DialogInterface dialogInterface, int i) {                                    </span>
<span class="-2307534810381711346" onmouseenter="enter('-2307534810381711346');" onmouseout="out('-2307534810381711346');" style=""> 298             logOut();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 300     };                                                                                                   </span>
<span  style=""> 301                                                                                                          </span>
<span class="-698083585503025487" onmouseenter="enter('-698083585503025487');" onmouseout="out('-698083585503025487');" style=""><abbr title=" 302     private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListener() {"> 302     private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListener🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 303         @Override                                                                                        </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 304         public void onClick(DialogInterface dialogInterface, int i) {                                    </span>
<span class="-1376352079449399710" onmouseenter="enter('-1376352079449399710');" onmouseout="out('-1376352079449399710');" style=""> 305             BrowserUtils.launchBrowserOrShowError(requireContext(), WEB_APP_URL);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 307     };                                                                                                   </span>
<span  style=""> 308                                                                                                          </span>
<span class="-2746710762323274178" onmouseenter="enter('-2746710762323274178');" onmouseout="out('-2746710762323274178');" style=""> 309     private boolean hasUnsyncedNotes() {                                                                 </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 310         Simplenote application = (Simplenote) getActivity().getApplication();                            </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 311         Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style=""> 312         Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style=""> 313         while (notesCursor.moveToNext()) {                                                               </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style=""> 314             Note note = notesCursor.getObject();                                                         </span>
<span class="-8724002811605814194" onmouseenter="enter('-8724002811605814194');" onmouseout="out('-8724002811605814194');" style=""> 315             if (note.isNew() || note.isModified()) {                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 316                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 317             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318         }                                                                                                </span>
<span  style=""> 319                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 320         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321     }                                                                                                    </span>
<span  style=""> 322                                                                                                          </span>
<span class="6766759746618176914" onmouseenter="enter('6766759746618176914');" onmouseout="out('6766759746618176914');" style=""> 323     private void logOut() {                                                                              </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 324         Simplenote application = (Simplenote) getActivity().getApplication();                            </span>
<span class="1492891761222902367" onmouseenter="enter('1492891761222902367');" onmouseout="out('1492891761222902367');" style=""> 325         application.getSimperium().deauthorizeUser();                                                    </span>
<span  style=""> 326                                                                                                          </span>
<span class="7043558399093065986" onmouseenter="enter('7043558399093065986');" onmouseout="out('7043558399093065986');" style=""> 327         application.getNotesBucket().reset();                                                            </span>
<span class="6239456552485319541" onmouseenter="enter('6239456552485319541');" onmouseout="out('6239456552485319541');" style=""> 328         application.getTagsBucket().reset();                                                             </span>
<span class="8813783904792492357" onmouseenter="enter('8813783904792492357');" onmouseout="out('8813783904792492357');" style=""> 329         application.getPreferencesBucket().reset();                                                      </span>
<span  style=""> 330                                                                                                          </span>
<span class="-2290183695292509841" onmouseenter="enter('-2290183695292509841');" onmouseout="out('-2290183695292509841');" style=""> 331         application.getNotesBucket().stop();                                                             </span>
<span class="1881204346293915273" onmouseenter="enter('1881204346293915273');" onmouseout="out('1881204346293915273');" style=""> 332         application.getTagsBucket().stop();                                                              </span>
<span class="4389321878217818521" onmouseenter="enter('4389321878217818521');" onmouseout="out('4389321878217818521');" style=""> 333         application.getPreferencesBucket().stop();                                                       </span>
<span  style=""> 334                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 335         AnalyticsTracker.track(                                                                          </span>
<span class="1682841947070741936" onmouseenter="enter('1682841947070741936');" onmouseout="out('1682841947070741936');" style=""> 336                 AnalyticsTracker.Stat.USER_SIGNED_OUT,                                                   </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 337                 AnalyticsTracker.CATEGORY_USER,                                                          </span>
<span class="4079591682198083249" onmouseenter="enter('4079591682198083249');" onmouseout="out('4079591682198083249');" style=""> 338                 &quot;preferences_sign_out_button&quot;                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 339         );                                                                                               </span>
<span  style=""> 340                                                                                                          </span>
<span class="-7624151188866077780" onmouseenter="enter('-7624151188866077780');" onmouseout="out('-7624151188866077780');" style=""> 341         // Resets analytics user back to &#x27;anon&#x27; type                                                     </span>
<span class="-8646882850309232593" onmouseenter="enter('-8646882850309232593');" onmouseout="out('-8646882850309232593');" style=""> 342         AnalyticsTracker.refreshMetadata(null);                                                          </span>
<span class="7088142554023647232" onmouseenter="enter('7088142554023647232');" onmouseout="out('7088142554023647232');" style=""> 343         CrashUtils.clearCurrentUser();                                                                   </span>
<span  style=""> 344                                                                                                          </span>
<span class="2045801939261456210" onmouseenter="enter('2045801939261456210');" onmouseout="out('2045801939261456210');" style=""> 345         // Remove wp.com token                                                                           </span>
<span class="6759455075429047207" onmouseenter="enter('6759455075429047207');" onmouseout="out('6759455075429047207');" style=""><abbr title=" 346         SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).edit();"> 346         SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).ed🔵</abbr></span>
<span class="3747765183142081866" onmouseenter="enter('3747765183142081866');" onmouseout="out('3747765183142081866');" style=""> 347         editor.remove(PrefUtils.PREF_WP_TOKEN);                                                          </span>
<span  style=""> 348                                                                                                          </span>
<span class="-3120932776057048446" onmouseenter="enter('-3120932776057048446');" onmouseout="out('-3120932776057048446');" style=""> 349         // Remove WordPress sites                                                                        </span>
<span class="-7780340906700244594" onmouseenter="enter('-7780340906700244594');" onmouseout="out('-7780340906700244594');" style=""> 350         editor.remove(PrefUtils.PREF_WORDPRESS_SITES);                                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 351         editor.apply();                                                                                  </span>
<span  style=""> 352                                                                                                          </span>
<span class="4563224411068398132" onmouseenter="enter('4563224411068398132');" onmouseout="out('4563224411068398132');" style=""> 353         // Remove Passcode Lock password                                                                 </span>
<span class="400057636120928336" onmouseenter="enter('400057636120928336');" onmouseout="out('400057636120928336');" style=""> 354         AppLockManager.getInstance().getAppLock().setPassword(&quot;&quot;);                                       </span>
<span  style=""> 355                                                                                                          </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 356         WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                        </span>
<span  style=""> 357                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 358         getActivity().finish();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359     }                                                                                                    </span>
<span  style=""> 360                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 361     @Override                                                                                            </span>
<span class="-5342682213111723277" onmouseenter="enter('-5342682213111723277');" onmouseout="out('-5342682213111723277');" style=""> 362     public void onUserStatusChange(User.Status status) {                                                 </span>
<span class="3969702543635342042" onmouseenter="enter('3969702543635342042');" onmouseout="out('3969702543635342042');" style=""> 363         if (isAdded() &amp;&amp; status == User.Status.AUTHORIZED) {                                             </span>
<span class="4458767919757787183" onmouseenter="enter('4458767919757787183');" onmouseout="out('4458767919757787183');" style=""> 364             // User signed in                                                                            </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 365             getActivity().runOnUiThread(new Runnable() {                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 366                 public void run() {                                                                      </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style=""> 367                     Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);         </span>
<span class="8885574470684679352" onmouseenter="enter('8885574470684679352');" onmouseout="out('8885574470684679352');" style=""> 368                     authenticatePreference.setTitle(R.string.log_out);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 370             });                                                                                          </span>
<span  style=""> 371                                                                                                          </span>
<span class="1736644716831373310" onmouseenter="enter('1736644716831373310');" onmouseout="out('1736644716831373310');" style=""> 372             Simplenote app = (Simplenote) getActivity().getApplication();                                </span>
<span class="6176818654817156375" onmouseenter="enter('6176818654817156375');" onmouseout="out('6176818654817156375');" style=""> 373             AnalyticsTracker.refreshMetadata(app.getSimperium().getUser().getEmail());                   </span>
<span class="-5091612656435705492" onmouseenter="enter('-5091612656435705492');" onmouseout="out('-5091612656435705492');" style=""> 374             CrashUtils.setCurrentUser(app.getSimperium().getUser());                                     </span>
<span  style=""> 375                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 376             AnalyticsTracker.track(                                                                      </span>
<span class="-2120239274310567773" onmouseenter="enter('-2120239274310567773');" onmouseout="out('-2120239274310567773');" style=""> 377                     AnalyticsTracker.Stat.USER_SIGNED_IN,                                                </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 378                     AnalyticsTracker.CATEGORY_USER,                                                      </span>
<span class="-1887876783048589275" onmouseenter="enter('-1887876783048589275');" onmouseout="out('-1887876783048589275');" style=""> 379                     &quot;signed_in_from_preferences_activity&quot;                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 380             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382     }                                                                                                    </span>
<span  style=""> 383                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 384     @Override                                                                                            </span>
<span class="5984220864459059356" onmouseenter="enter('5984220864459059356');" onmouseout="out('5984220864459059356');" style=""> 385     public void onUserCreated(User user) {                                                               </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 386         AnalyticsTracker.track(                                                                          </span>
<span class="173757116163891806" onmouseenter="enter('173757116163891806');" onmouseout="out('173757116163891806');" style=""> 387                 AnalyticsTracker.Stat.USER_ACCOUNT_CREATED,                                              </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 388                 AnalyticsTracker.CATEGORY_USER,                                                          </span>
<span class="3712512237873507570" onmouseenter="enter('3712512237873507570');" onmouseout="out('3712512237873507570');" style=""> 389                 &quot;account_created_from_preferences_activity&quot;                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 390         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391     }                                                                                                    </span>
<span  style=""> 392                                                                                                          </span>
<span class="5598091284936706499" onmouseenter="enter('5598091284936706499');" onmouseout="out('5598091284936706499');" style=""> 393     private void updateAnalyticsSwitchState() {                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 394         try {                                                                                            </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 395             Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                          </span>
<span class="2776107362356981254" onmouseenter="enter('2776107362356981254');" onmouseout="out('2776107362356981254');" style=""> 396             mAnalyticsSwitch.setChecked(prefs.getAnalyticsEnabled());                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 397         } catch (BucketObjectMissingException e) {                                                       </span>
<span class="2124131716277693204" onmouseenter="enter('2124131716277693204');" onmouseout="out('2124131716277693204');" style=""> 398             // The preferences object doesn&#x27;t exist for this user yet, create it                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 399             try {                                                                                        </span>
<span class="8863892184482182459" onmouseenter="enter('8863892184482182459');" onmouseout="out('8863892184482182459');" style=""> 400                 Preferences prefs = mPreferencesBucket.newObject(PREFERENCES_OBJECT_KEY);                </span>
<span class="-3725197847428303949" onmouseenter="enter('-3725197847428303949');" onmouseout="out('-3725197847428303949');" style=""> 401                 prefs.setAnalyticsEnabled(true);                                                         </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 402                 prefs.save();                                                                            </span>
<span class="-1061155454955510578" onmouseenter="enter('-1061155454955510578');" onmouseout="out('-1061155454955510578');" style=""> 403             } catch (BucketObjectNameInvalid bucketObjectNameInvalid) {                                  </span>
<span class="1883933860530627988" onmouseenter="enter('1883933860530627988');" onmouseout="out('1883933860530627988');" style=""> 404                 bucketObjectNameInvalid.printStackTrace();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407     }                                                                                                    </span>
<span  style=""> 408                                                                                                          </span>
<span class="6003914412447352798" onmouseenter="enter('6003914412447352798');" onmouseout="out('6003914412447352798');" style=""> 409     private static class LogOutTask extends AsyncTask&lt;Void, Void, Boolean&gt; {                             </span>
<span class="-8626644697686121306" onmouseenter="enter('-8626644697686121306');" onmouseout="out('-8626644697686121306');" style=""> 410         private WeakReference&lt;PreferencesFragment&gt; mPreferencesFragmentReference;                        </span>
<span  style=""> 411                                                                                                          </span>
<span class="556201937984791944" onmouseenter="enter('556201937984791944');" onmouseout="out('556201937984791944');" style=""> 412         LogOutTask(PreferencesFragment fragment) {                                                       </span>
<span class="-8947237769278526855" onmouseenter="enter('-8947237769278526855');" onmouseout="out('-8947237769278526855');" style=""> 413             mPreferencesFragmentReference = new WeakReference&lt;&gt;(fragment);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414         }                                                                                                </span>
<span  style=""> 415                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 416         @Override                                                                                        </span>
<span class="6715077551046087572" onmouseenter="enter('6715077551046087572');" onmouseout="out('6715077551046087572');" style=""> 417         protected Boolean doInBackground(Void... voids) {                                                </span>
<span class="1614077137004075676" onmouseenter="enter('1614077137004075676');" onmouseout="out('1614077137004075676');" style=""> 418             PreferencesFragment fragment = mPreferencesFragmentReference.get();                          </span>
<span class="6685718295711545449" onmouseenter="enter('6685718295711545449');" onmouseout="out('6685718295711545449');" style=""> 419             return fragment == null || fragment.hasUnsyncedNotes();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420         }                                                                                                </span>
<span  style=""> 421                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 422         @Override                                                                                        </span>
<span class="-6776128592848448095" onmouseenter="enter('-6776128592848448095');" onmouseout="out('-6776128592848448095');" style=""> 423         protected void onPostExecute(Boolean hasUnsyncedNotes) {                                         </span>
<span class="1614077137004075676" onmouseenter="enter('1614077137004075676');" onmouseout="out('1614077137004075676');" style=""> 424             PreferencesFragment fragment = mPreferencesFragmentReference.get();                          </span>
<span  style=""> 425                                                                                                          </span>
<span class="871842557913824847" onmouseenter="enter('871842557913824847');" onmouseout="out('871842557913824847');" style=""> 426             if (fragment == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 427                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428             }                                                                                            </span>
<span  style=""> 429                                                                                                          </span>
<span class="-4113446021503535506" onmouseenter="enter('-4113446021503535506');" onmouseout="out('-4113446021503535506');" style=""> 430             // Safety first! Check if any notes are unsynced and warn the user if so.                    </span>
<span class="-5077436549454521569" onmouseenter="enter('-5077436549454521569');" onmouseout="out('-5077436549454521569');" style=""> 431             if (hasUnsyncedNotes) {                                                                      </span>
<span class="3542977983821060447" onmouseenter="enter('3542977983821060447');" onmouseout="out('3542977983821060447');" style=""><abbr title=" 432                 new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.Dialog))"> 432                 new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.Dialog🔵</abbr></span>
<span class="-3694903935099593007" onmouseenter="enter('-3694903935099593007');" onmouseout="out('-3694903935099593007');" style=""> 433                         .setTitle(R.string.unsynced_notes)                                               </span>
<span class="8004583072247328964" onmouseenter="enter('8004583072247328964');" onmouseout="out('8004583072247328964');" style=""> 434                         .setMessage(R.string.unsynced_notes_message)                                     </span>
<span class="2427359236939967623" onmouseenter="enter('2427359236939967623');" onmouseout="out('2427359236939967623');" style=""> 435                         .setPositiveButton(R.string.delete_notes, fragment.logOutClickListener)          </span>
<span class="7005110418642332587" onmouseenter="enter('7005110418642332587');" onmouseout="out('7005110418642332587');" style=""> 436                         .setNeutralButton(R.string.visit_web_app, fragment.loadWebAppClickListener)      </span>
<span class="-1520918194926717469" onmouseenter="enter('-1520918194926717469');" onmouseout="out('-1520918194926717469');" style=""> 437                         .setNegativeButton(R.string.cancel, null)                                        </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style=""> 438                         .show();                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 439             } else {                                                                                     </span>
<span class="-2448080142593331977" onmouseenter="enter('-2448080142593331977');" onmouseout="out('-2448080142593331977');" style=""> 440                 fragment.logOut();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 443     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444 }                                                                                                        </span>









</pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   4 import android.app.Fragment;                                                                             </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   5 import android.content.ClipData;                                                                         </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   6 import android.content.ClipboardManager;                                                                 </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   7 import android.content.Context;                                                                          </span>
<span class="-5438333149234786386" onmouseenter="enter('-5438333149234786386');" onmouseout="out('-5438333149234786386');" style="">   8 import android.content.DialogInterface;                                                                  </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   9 import android.content.Intent;                                                                           </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  10 import android.content.SharedPreferences;                                                                </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  11 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  12 import android.os.Bundle;                                                                                </span>
<span class="-5436718358296125427" onmouseenter="enter('-5436718358296125427');" onmouseout="out('-5436718358296125427');" style="">  13 import android.os.ParcelFileDescriptor;                                                                  </span>
<span class="7440210109790075870" onmouseenter="enter('7440210109790075870');" onmouseout="out('7440210109790075870');" style="">  14 import android.provider.DocumentsContract;                                                               </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  15 import android.widget.Toast;                                                                             </span>
<span class="-8930837843172754904" onmouseenter="enter('-8930837843172754904');" onmouseout="out('-8930837843172754904');" style="">  16 import androidx.appcompat.app.AlertDialog;                                                               </span>
<span class="-8763141247638307783" onmouseenter="enter('-8763141247638307783');" onmouseout="out('-8763141247638307783');" style="">  17 import androidx.appcompat.view.ContextThemeWrapper;                                                      </span>
<span class="-7553031234002075668" onmouseenter="enter('-7553031234002075668');" onmouseout="out('-7553031234002075668');" style="">  18 import androidx.preference.ListPreference;                                                               </span>
<span class="-3312641230509782710" onmouseenter="enter('-3312641230509782710');" onmouseout="out('-3312641230509782710');" style="">  19 import androidx.preference.Preference;                                                                   </span>
<span class="-6464340996904493039" onmouseenter="enter('-6464340996904493039');" onmouseout="out('-6464340996904493039');" style="">  20 import androidx.preference.PreferenceFragmentCompat;                                                     </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  21 import androidx.preference.PreferenceManager;                                                            </span>
<span class="-8714897093372589764" onmouseenter="enter('-8714897093372589764');" onmouseout="out('-8714897093372589764');" style="">  22 import androidx.preference.SwitchPreferenceCompat;                                                       </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  23 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  24 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  25 import com.automattic.simplenote.models.Preferences;                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  26 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  27 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  28 import com.automattic.simplenote.utils.CrashUtils;                                                       </span>
<span class="5145471914103640094" onmouseenter="enter('5145471914103640094');" onmouseout="out('5145471914103640094');" style="">  29 import com.automattic.simplenote.utils.HtmlCompat;                                                       </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  30 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  31 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  32 import com.simperium.Simperium;                                                                          </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  33 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  34 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-3142233007863984129" onmouseenter="enter('-3142233007863984129');" onmouseout="out('-3142233007863984129');" style="">  35 import com.simperium.client.BucketObjectNameInvalid;                                                     </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  36 import com.simperium.client.User;                                                                        </span>
<span class="4915709264156936957" onmouseenter="enter('4915709264156936957');" onmouseout="out('4915709264156936957');" style="">  37 import java.io.FileOutputStream;                                                                         </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  38 import java.lang.ref.WeakReference;                                                                      </span>
<span class="-9193129351684262878" onmouseenter="enter('-9193129351684262878');" onmouseout="out('-9193129351684262878');" style="">  39 import org.json.JSONArray;                                                                               </span>
<span class="7232075261178918144" onmouseenter="enter('7232075261178918144');" onmouseout="out('7232075261178918144');" style="">  40 import org.json.JSONObject;                                                                              </span>
<span class="7324884800271719890" onmouseenter="enter('7324884800271719890');" onmouseout="out('7324884800271719890');" style="">  41 import org.wordpress.passcodelock.AppLockManager;                                                        </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="">  42 import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                       </span>
<span  style="">  43                                                                                                          </span>
<span  style="">  44                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  45 /**                                                                                                      </span>
<span class="5114139633798332353" onmouseenter="enter('5114139633798332353');" onmouseout="out('5114139633798332353');" style="">  46  * A simple {@link Fragment} subclass.                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  47  */                                                                                                      </span>
<span class="-7540062518027686993" onmouseenter="enter('-7540062518027686993');" onmouseout="out('-7540062518027686993');" style=""><abbr title="  48 public class PreferencesFragment extends PreferenceFragmentCompat implements User.StatusChangeListener , Simperium.OnUserCreatedListener {">  48 public class PreferencesFragment extends PreferenceFragmentCompat implements User.StatusChangeListener , 🔵</abbr></span>
<span class="6526302226782351091" onmouseenter="enter('6526302226782351091');" onmouseout="out('6526302226782351091');" style="">  49     private static final String WEB_APP_URL = &quot;https://app.simplenote.com&quot;;                              </span>
<span  style="">  50                                                                                                          </span>
<span class="-3814969503072913312" onmouseenter="enter('-3814969503072913312');" onmouseout="out('-3814969503072913312');" style="">  51     private Bucket&lt;Preferences&gt; mPreferencesBucket;                                                      </span>
<span  style="">  52                                                                                                          </span>
<span class="-908783299724709915" onmouseenter="enter('-908783299724709915');" onmouseout="out('-908783299724709915');" style="">  53     private SwitchPreferenceCompat mAnalyticsSwitch;                                                     </span>
<span  style="">  54                                                                                                          </span>
<span class="-1679820400310610015" onmouseenter="enter('-1679820400310610015');" onmouseout="out('-1679820400310610015');" style="">  55     public PreferencesFragment() {                                                                       </span>
<span class="5025324504900911379" onmouseenter="enter('5025324504900911379');" onmouseout="out('5025324504900911379');" style="">  56         // Required empty public constructor                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  57     }                                                                                                    </span>
<span  style="">  58                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  59     @Override                                                                                            </span>
<span class="4595408869200273860" onmouseenter="enter('4595408869200273860');" onmouseout="out('4595408869200273860');" style="">  60     public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {                         </span>
<span class="5290641457290853720" onmouseenter="enter('5290641457290853720');" onmouseout="out('5290641457290853720');" style="">  61         addPreferencesFromResource(R.xml.preferences);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62     }                                                                                                    </span>
<span  style="">  63                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  64     @Override                                                                                            </span>
<span class="4360549941650676478" onmouseenter="enter('4360549941650676478');" onmouseout="out('4360549941650676478');" style="">  65     public void onActivityCreated(Bundle savedInstanceState) {                                           </span>
<span class="1612263533902931469" onmouseenter="enter('1612263533902931469');" onmouseout="out('1612263533902931469');" style="">  66         super.onActivityCreated(savedInstanceState);                                                     </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style="">  67         Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                     </span>
<span class="4803144681849619263" onmouseenter="enter('4803144681849619263');" onmouseout="out('4803144681849619263');" style="">  68         Simplenote currentApp = ((Simplenote) (getActivity().getApplication()));                         </span>
<span class="-4589466368752372978" onmouseenter="enter('-4589466368752372978');" onmouseout="out('-4589466368752372978');" style="">  69         Simperium simperium = currentApp.getSimperium();                                                 </span>
<span class="2748958065852789861" onmouseenter="enter('2748958065852789861');" onmouseout="out('2748958065852789861');" style="">  70         simperium.setUserStatusChangeListener(this);                                                     </span>
<span class="-2272979595474747044" onmouseenter="enter('-2272979595474747044');" onmouseout="out('-2272979595474747044');" style="">  71         simperium.setOnUserCreatedListener(this);                                                        </span>
<span class="-8025066121623883978" onmouseenter="enter('-8025066121623883978');" onmouseout="out('-8025066121623883978');" style="">  72         mPreferencesBucket = currentApp.getPreferencesBucket();                                          </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style="">  73         mPreferencesBucket.start();                                                                      </span>
<span class="5417399975767426553" onmouseenter="enter('5417399975767426553');" onmouseout="out('5417399975767426553');" style="">  74         authenticatePreference.setSummary(currentApp.getSimperium().getUser().getEmail());               </span>
<span class="-3342250548665049241" onmouseenter="enter('-3342250548665049241');" onmouseout="out('-3342250548665049241');" style="">  75         if (simperium.needsAuthorization()) {                                                            </span>
<span class="8210597588054659575" onmouseenter="enter('8210597588054659575');" onmouseout="out('8210597588054659575');" style="">  76             authenticatePreference.setTitle(R.string.log_in);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  77         } else {                                                                                         </span>
<span class="8885574470684679352" onmouseenter="enter('8885574470684679352');" onmouseout="out('8885574470684679352');" style="">  78             authenticatePreference.setTitle(R.string.log_out);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79         }                                                                                                </span>
<span class="-1521554305857532068" onmouseenter="enter('-1521554305857532068');" onmouseout="out('-1521554305857532068');" style="">  80         authenticatePreference.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() { </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  81             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  82             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style="">  83                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  84                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85                 }                                                                                        </span>
<span class="4803144681849619263" onmouseenter="enter('4803144681849619263');" onmouseout="out('4803144681849619263');" style="">  86                 Simplenote currentApp = ((Simplenote) (getActivity().getApplication()));                 </span>
<span class="-1805411858302537149" onmouseenter="enter('-1805411858302537149');" onmouseout="out('-1805411858302537149');" style="">  87                 if (currentApp.getSimperium().needsAuthorization()) {                                    </span>
<span class="-1894877037162085011" onmouseenter="enter('-1894877037162085011');" onmouseout="out('-1894877037162085011');" style=""><abbr title="  88                     Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.class);">  88                     Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.class🔵</abbr></span>
<span class="-1745782676004839840" onmouseenter="enter('-1745782676004839840');" onmouseout="out('-1745782676004839840');" style="">  89                     startActivityForResult(loginIntent, Simperium.SIGNUP_SIGNIN_REQUEST);                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  90                 } else {                                                                                 </span>
<span class="-1878844134905051149" onmouseenter="enter('-1878844134905051149');" onmouseout="out('-1878844134905051149');" style="">  91                     new LogOutTask(PreferencesFragment.this).execute();                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  93                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  94             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  95         });                                                                                              </span>
<span class="-3317947868564721602" onmouseenter="enter('-3317947868564721602');" onmouseout="out('-3317947868564721602');" style=""><abbr title="  96         findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {">  96         findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickL🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  97             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  98             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  99                 try {                                                                                    </span>
<span class="5515326037292150005" onmouseenter="enter('5515326037292150005');" onmouseout="out('5515326037292150005');" style=""> 100                     BrowserUtils.launchBrowserOrShowError(requireContext(), &quot;http://simplenote.com&quot;);    </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 101                 } catch (java.lang.Exception e) {                                                        </span>
<span class="3734798154944032055" onmouseenter="enter('3734798154944032055');" onmouseout="out('3734798154944032055');" style=""><abbr title=" 102                     Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show();"> 102                     Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show(🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 104                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 106         });                                                                                              </span>
<span class="7546915923491771618" onmouseenter="enter('7546915923491771618');" onmouseout="out('7546915923491771618');" style=""><abbr title=" 107         findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 107         findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickLis🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 108             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 109             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="8659998783220899939" onmouseenter="enter('8659998783220899939');" onmouseout="out('8659998783220899939');" style=""> 110                 startActivity(new Intent(getActivity(), AboutActivity.class));                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 111                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 113         });                                                                                              </span>
<span class="1103776393699537905" onmouseenter="enter('1103776393699537905');" onmouseout="out('1103776393699537905');" style=""><abbr title=" 114         findPreference(&quot;pref_key_export&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 114         findPreference(&quot;pref_key_export&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickLi🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 115             @Override                                                                                    </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 116             public boolean onPreferenceClick(Preference preference) {                                    </span>
<span class="4984554577824553223" onmouseenter="enter('4984554577824553223');" onmouseout="out('4984554577824553223');" style=""> 117                 Intent intent = new Intent(Intent.ACTION_CREATE_DOCUMENT);                               </span>
<span class="8912465054547747469" onmouseenter="enter('8912465054547747469');" onmouseout="out('8912465054547747469');" style=""> 118                 intent.addCategory(Intent.CATEGORY_OPENABLE);                                            </span>
<span class="-6707067096973178010" onmouseenter="enter('-6707067096973178010');" onmouseout="out('-6707067096973178010');" style=""> 119                 intent.setType(&quot;application/json&quot;);                                                      </span>
<span class="-6509278610434426342" onmouseenter="enter('-6509278610434426342');" onmouseout="out('-6509278610434426342');" style=""> 120                 intent.putExtra(Intent.EXTRA_TITLE, &quot;account.json&quot;);                                     </span>
<span class="2104595516747401662" onmouseenter="enter('2104595516747401662');" onmouseout="out('2104595516747401662');" style=""> 121                 startActivityForResult(intent, 1);                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 122                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 124         });                                                                                              </span>
<span class="783938452196467655" onmouseenter="enter('783938452196467655');" onmouseout="out('783938452196467655');" style=""> 125         final ListPreference themePreference = ((ListPreference) (findPreference(PrefUtils.PREF_THEME)));</span>
<span class="-3135129752727836774" onmouseenter="enter('-3135129752727836774');" onmouseout="out('-3135129752727836774');" style=""> 126         themePreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 127             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 128             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="8972235106908076260" onmouseenter="enter('8972235106908076260');" onmouseout="out('8972235106908076260');" style=""> 129                 updateTheme(requireActivity(), Integer.parseInt(newValue.toString()));                   </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 130                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 131             }                                                                                            </span>
<span  style=""> 132                                                                                                          </span>
<span class="7597115961384302616" onmouseenter="enter('7597115961384302616');" onmouseout="out('7597115961384302616');" style=""> 133             private void updateTheme(Activity activity, int index) {                                     </span>
<span class="1607563076949848778" onmouseenter="enter('1607563076949848778');" onmouseout="out('1607563076949848778');" style=""> 134                 CharSequence[] entries = themePreference.getEntries();                                   </span>
<span class="1955249186347848341" onmouseenter="enter('1955249186347848341');" onmouseout="out('1955249186347848341');" style=""> 135                 themePreference.setSummary(entries[index]);                                              </span>
<span class="-7480915350226764443" onmouseenter="enter('-7480915350226764443');" onmouseout="out('-7480915350226764443');" style=""><abbr title=" 136                 AnalyticsTracker.track(AnalyticsTracker.Stat.SETTINGS_THEME_UPDATED, AnalyticsTracker.CATEGORY_USER, &quot;theme_preference&quot;);"> 136                 AnalyticsTracker.track(AnalyticsTracker.Stat.SETTINGS_THEME_UPDATED, AnalyticsTracker.CAT🔵</abbr></span>
<span class="-6345048933952298843" onmouseenter="enter('-6345048933952298843');" onmouseout="out('-6345048933952298843');" style=""> 137                 // recreate the activity so new theme is applied                                         </span>
<span class="6106586807651914503" onmouseenter="enter('6106586807651914503');" onmouseout="out('6106586807651914503');" style=""> 138                 activity.recreate();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 140         });                                                                                              </span>
<span class="991214459467495297" onmouseenter="enter('991214459467495297');" onmouseout="out('991214459467495297');" style=""><abbr title=" 141         final ListPreference sortPreference = ((ListPreference) (findPreference(PrefUtils.PREF_SORT_ORDER)));"> 141         final ListPreference sortPreference = ((ListPreference) (findPreference(PrefUtils.PREF_SORT_ORDER🔵</abbr></span>
<span class="-5125317966081854635" onmouseenter="enter('-5125317966081854635');" onmouseout="out('-5125317966081854635');" style=""> 142         sortPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 143             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 144             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="-8870833255101890428" onmouseenter="enter('-8870833255101890428');" onmouseout="out('-8870833255101890428');" style=""> 145                 int index = Integer.parseInt(newValue.toString());                                       </span>
<span class="4511877948668264185" onmouseenter="enter('4511877948668264185');" onmouseout="out('4511877948668264185');" style=""> 146                 CharSequence[] entries = sortPreference.getEntries();                                    </span>
<span class="-9141657533116186952" onmouseenter="enter('-9141657533116186952');" onmouseout="out('-9141657533116186952');" style=""> 147                 sortPreference.setSummary(entries[index]);                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 148                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 150         });                                                                                              </span>
<span class="-2516209658609361373" onmouseenter="enter('-2516209658609361373');" onmouseout="out('-2516209658609361373');" style=""> 151         Preference versionPref = findPreference(&quot;pref_key_build&quot;);                                       </span>
<span class="2941715853984851229" onmouseenter="enter('2941715853984851229');" onmouseout="out('2941715853984851229');" style=""> 152         versionPref.setSummary(PrefUtils.versionInfo());                                                 </span>
<span class="5110844832592168650" onmouseenter="enter('5110844832592168650');" onmouseout="out('5110844832592168650');" style=""><abbr title=" 153         SwitchPreferenceCompat switchPreference = ((SwitchPreferenceCompat) (findPreference(&quot;pref_key_condensed_note_list&quot;)));"> 153         SwitchPreferenceCompat switchPreference = ((SwitchPreferenceCompat) (findPreference(&quot;pref_key_con🔵</abbr></span>
<span class="731943818112030665" onmouseenter="enter('731943818112030665');" onmouseout="out('731943818112030665');" style=""> 154         switchPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 155             @Override                                                                                    </span>
<span class="8137396142185538827" onmouseenter="enter('8137396142185538827');" onmouseout="out('8137396142185538827');" style=""> 156             public boolean onPreferenceChange(Preference preference, Object o) {                         </span>
<span class="-454987626601386721" onmouseenter="enter('-454987626601386721');" onmouseout="out('-454987626601386721');" style=""> 157                 if (((SwitchPreferenceCompat) (preference)).isChecked()) {                               </span>
<span class="-5939352487095839969" onmouseenter="enter('-5939352487095839969');" onmouseout="out('-5939352487095839969');" style=""><abbr title=" 158                     AnalyticsTracker.track(AnalyticsTracker.Stat.SETTINGS_LIST_CONDENSED_ENABLED, AnalyticsTracker.CATEGORY_USER, &quot;condensed_list_preference&quot;);"> 158                     AnalyticsTracker.track(AnalyticsTracker.Stat.SETTINGS_LIST_CONDENSED_ENABLED, Analyti🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 160                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 162         });                                                                                              </span>
<span class="-6021379672389812030" onmouseenter="enter('-6021379672389812030');" onmouseout="out('-6021379672389812030');" style=""> 163         // Add the hyperlink to the analytics summary                                                    </span>
<span class="-3803040130638154017" onmouseenter="enter('-3803040130638154017');" onmouseout="out('-3803040130638154017');" style=""> 164         Preference analyticsSummaryPreference = findPreference(&quot;pref_key_analytics_enabled_summary&quot;);    </span>
<span class="6934693986878238280" onmouseenter="enter('6934693986878238280');" onmouseout="out('6934693986878238280');" style=""><abbr title=" 165         String formattedSummary = String.format(getString(R.string.share_analytics_summary), &quot;&lt;a href=\&quot;https://automattic.com/cookies\&quot;&gt;&quot;, &quot;&lt;/a&gt;&quot;);"> 165         String formattedSummary = String.format(getString(R.string.share_analytics_summary), &quot;&lt;a href=\&quot;h🔵</abbr></span>
<span class="3076824088033544263" onmouseenter="enter('3076824088033544263');" onmouseout="out('3076824088033544263');" style=""> 166         analyticsSummaryPreference.setSummary(HtmlCompat.fromHtml(formattedSummary));                    </span>
<span class="-4523157399428350126" onmouseenter="enter('-4523157399428350126');" onmouseout="out('-4523157399428350126');" style=""> 167         mAnalyticsSwitch = ((SwitchPreferenceCompat) (findPreference(&quot;pref_key_analytics_switch&quot;)));     </span>
<span class="5250772881921022799" onmouseenter="enter('5250772881921022799');" onmouseout="out('5250772881921022799');" style=""> 168         mAnalyticsSwitch.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 169             @Override                                                                                    </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 170             public boolean onPreferenceChange(Preference preference, Object newValue) {                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 171                 try {                                                                                    </span>
<span class="-218707031809364308" onmouseenter="enter('-218707031809364308');" onmouseout="out('-218707031809364308');" style=""> 172                     boolean isChecked = ((boolean) (newValue));                                          </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 173                     Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                  </span>
<span class="-3416644870449875468" onmouseenter="enter('-3416644870449875468');" onmouseout="out('-3416644870449875468');" style=""> 174                     prefs.setAnalyticsEnabled(isChecked);                                                </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 175                     prefs.save();                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 176                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 177                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 179                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 181         });                                                                                              </span>
<span class="5339258651008713874" onmouseenter="enter('5339258651008713874');" onmouseout="out('5339258651008713874');" style=""> 182         updateAnalyticsSwitchState();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183     }                                                                                                    </span>
<span  style=""> 184                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 185     @Override                                                                                            </span>
<span class="3267640102220640214" onmouseenter="enter('3267640102220640214');" onmouseout="out('3267640102220640214');" style=""> 186     public void onActivityResult(int requestCode, int resultCode, Intent resultData) {                   </span>
<span class="3621747730259457062" onmouseenter="enter('3621747730259457062');" onmouseout="out('3621747730259457062');" style=""> 187         if (requestCode != 1 || resultCode != Activity.RESULT_OK || resultData == null) {                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 188             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189         }                                                                                                </span>
<span  style=""> 190                                                                                                          </span>
<span class="-5813903460581087014" onmouseenter="enter('-5813903460581087014');" onmouseout="out('-5813903460581087014');" style=""> 191         Uri uri = resultData.getData();                                                                  </span>
<span  style=""> 192                                                                                                          </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style=""> 193         Simplenote currentApp = (Simplenote) getActivity().getApplication();                             </span>
<span class="5741585060608048581" onmouseenter="enter('5741585060608048581');" onmouseout="out('5741585060608048581');" style=""> 194         Bucket&lt;Note&gt; noteBucket = currentApp.getNotesBucket();                                           </span>
<span class="-1289751974263118167" onmouseenter="enter('-1289751974263118167');" onmouseout="out('-1289751974263118167');" style=""> 195         Bucket&lt;Tag&gt; tagBucket = currentApp.getTagsBucket();                                              </span>
<span  style=""> 196                                                                                                          </span>
<span class="-2573210000671885020" onmouseenter="enter('-2573210000671885020');" onmouseout="out('-2573210000671885020');" style=""> 197         JSONObject account = new JSONObject();                                                           </span>
<span  style=""> 198                                                                                                          </span>
<span class="8693188982604872634" onmouseenter="enter('8693188982604872634');" onmouseout="out('8693188982604872634');" style=""> 199         Bucket.ObjectCursor&lt;Note&gt; cursor = noteBucket.allObjects();                                      </span>
<span  style=""> 200                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 201         try {                                                                                            </span>
<span class="-6836816169516685361" onmouseenter="enter('-6836816169516685361');" onmouseout="out('-6836816169516685361');" style=""> 202             account.put(&quot;user&quot;, currentApp.getSimperium().getUser().getEmail());                         </span>
<span  style=""> 203                                                                                                          </span>
<span class="-364427120790392208" onmouseenter="enter('-364427120790392208');" onmouseout="out('-364427120790392208');" style=""> 204             JSONArray notes = new JSONArray();                                                           </span>
<span class="-679463407698125917" onmouseenter="enter('-679463407698125917');" onmouseout="out('-679463407698125917');" style=""> 205             while (cursor.moveToNext()) {                                                                </span>
<span class="-2832188742216530514" onmouseenter="enter('-2832188742216530514');" onmouseout="out('-2832188742216530514');" style=""> 206                 Note appNote = cursor.getObject();                                                       </span>
<span class="-281892266362858858" onmouseenter="enter('-281892266362858858');" onmouseout="out('-281892266362858858');" style=""> 207                 JSONObject note = new JSONObject();                                                      </span>
<span  style=""> 208                                                                                                          </span>
<span class="4784441280085587484" onmouseenter="enter('4784441280085587484');" onmouseout="out('4784441280085587484');" style=""> 209                 note.put(&quot;id&quot;, appNote.getSimperiumKey());                                               </span>
<span class="4302596085175232103" onmouseenter="enter('4302596085175232103');" onmouseout="out('4302596085175232103');" style=""> 210                 note.put(&quot;deleted&quot;, appNote.isDeleted());                                                </span>
<span class="-1375543318608043631" onmouseenter="enter('-1375543318608043631');" onmouseout="out('-1375543318608043631');" style=""> 211                 note.put(&quot;content&quot;, appNote.getContent());                                               </span>
<span class="6754322225078731476" onmouseenter="enter('6754322225078731476');" onmouseout="out('6754322225078731476');" style=""> 212                 note.put(&quot;publishURL&quot;, appNote.getPublishedUrl());                                       </span>
<span class="2831236258407328761" onmouseenter="enter('2831236258407328761');" onmouseout="out('2831236258407328761');" style=""> 213                 note.put(&quot;tags&quot;, new JSONArray(appNote.getTags()));                                      </span>
<span class="-5634056099564214119" onmouseenter="enter('-5634056099564214119');" onmouseout="out('-5634056099564214119');" style=""> 214                 note.put(&quot;systemTags&quot;, appNote.getSystemTags());                                         </span>
<span  style=""> 215                                                                                                          </span>
<span class="5037155776270337248" onmouseenter="enter('5037155776270337248');" onmouseout="out('5037155776270337248');" style=""> 216                 note.put(&quot;version&quot;, appNote.getVersion());                                               </span>
<span  style=""> 217                                                                                                          </span>
<span class="-6448452813514862631" onmouseenter="enter('-6448452813514862631');" onmouseout="out('-6448452813514862631');" style=""> 218                 notes.put(note);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219             }                                                                                            </span>
<span class="-900806749799034471" onmouseenter="enter('-900806749799034471');" onmouseout="out('-900806749799034471');" style=""> 220             account.put(&quot;notes&quot;, notes);                                                                 </span>
<span  style=""> 221                                                                                                          </span>
<span class="-484124656827523157" onmouseenter="enter('-484124656827523157');" onmouseout="out('-484124656827523157');" style=""> 222             JSONArray tags = new JSONArray();                                                            </span>
<span class="7573437584692849817" onmouseenter="enter('7573437584692849817');" onmouseout="out('7573437584692849817');" style=""> 223             Bucket.ObjectCursor&lt;Tag&gt; tagCursor = tagBucket.allObjects();                                 </span>
<span class="7257439043024175527" onmouseenter="enter('7257439043024175527');" onmouseout="out('7257439043024175527');" style=""> 224             while (tagCursor.moveToNext()) {                                                             </span>
<span class="7294797734220556166" onmouseenter="enter('7294797734220556166');" onmouseout="out('7294797734220556166');" style=""> 225                 Tag appTag = tagCursor.getObject();                                                      </span>
<span class="-738866739334787476" onmouseenter="enter('-738866739334787476');" onmouseout="out('-738866739334787476');" style=""> 226                 JSONObject tag = new JSONObject();                                                       </span>
<span  style=""> 227                                                                                                          </span>
<span class="-6932251409781771830" onmouseenter="enter('-6932251409781771830');" onmouseout="out('-6932251409781771830');" style=""> 228                 tag.put(&quot;id&quot;, appTag.getSimperiumKey());                                                 </span>
<span class="-1441446876201711797" onmouseenter="enter('-1441446876201711797');" onmouseout="out('-1441446876201711797');" style=""> 229                 tag.put(&quot;name&quot;, appTag.getName());                                                       </span>
<span  style=""> 230                                                                                                          </span>
<span class="1767952690529220579" onmouseenter="enter('1767952690529220579');" onmouseout="out('1767952690529220579');" style=""> 231                 if (null != appTag.getIndex()) {                                                         </span>
<span class="-6526561763226610133" onmouseenter="enter('-6526561763226610133');" onmouseout="out('-6526561763226610133');" style=""> 232                     tag.put(&quot;index&quot;, appTag.getIndex());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233                 }                                                                                        </span>
<span  style=""> 234                                                                                                          </span>
<span class="-2146716553142207437" onmouseenter="enter('-2146716553142207437');" onmouseout="out('-2146716553142207437');" style=""> 235                 tag.put(&quot;version&quot;, appTag.getVersion());                                                 </span>
<span  style=""> 236                                                                                                          </span>
<span class="-4835038884243430189" onmouseenter="enter('-4835038884243430189');" onmouseout="out('-4835038884243430189');" style=""> 237                 tags.put(tag);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238             }                                                                                            </span>
<span  style=""> 239                                                                                                          </span>
<span class="8247220099271615115" onmouseenter="enter('8247220099271615115');" onmouseout="out('8247220099271615115');" style=""> 240             account.put(&quot;tags&quot;, tags);                                                                   </span>
<span  style=""> 241                                                                                                          </span>
<span class="-2729345193604737994" onmouseenter="enter('-2729345193604737994');" onmouseout="out('-2729345193604737994');" style=""> 242             ParcelFileDescriptor pfd = getActivity().getContentResolver().openFileDescriptor(uri, &quot;w&quot;);  </span>
<span class="-370571335155435742" onmouseenter="enter('-370571335155435742');" onmouseout="out('-370571335155435742');" style=""> 243             FileOutputStream fileOutputStream = new FileOutputStream(pfd.getFileDescriptor());           </span>
<span class="551787877958277432" onmouseenter="enter('551787877958277432');" onmouseout="out('551787877958277432');" style=""> 244             fileOutputStream.write(account.toString(2).getBytes());                                      </span>
<span class="-2121397186699676455" onmouseenter="enter('-2121397186699676455');" onmouseout="out('-2121397186699676455');" style=""> 245             pfd.close();                                                                                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 246         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 247             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249     }                                                                                                    </span>
<span  style=""> 250                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 251     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 252     public void onPause() {                                                                              </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 253         super.onPause();                                                                                 </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 254         mPreferencesBucket.stop();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255     }                                                                                                    </span>
<span  style=""> 256                                                                                                          </span>
<span class="-8704268889922853518" onmouseenter="enter('-8704268889922853518');" onmouseout="out('-8704268889922853518');" style=""> 257     private DialogInterface.OnClickListener logOutClickListener = new DialogInterface.OnClickListener() {</span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 258         @Override                                                                                        </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 259         public void onClick(DialogInterface dialogInterface, int i) {                                    </span>
<span class="-2307534810381711346" onmouseenter="enter('-2307534810381711346');" onmouseout="out('-2307534810381711346');" style=""> 260             logOut();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 262     };                                                                                                   </span>
<span  style=""> 263                                                                                                          </span>
<span class="-698083585503025487" onmouseenter="enter('-698083585503025487');" onmouseout="out('-698083585503025487');" style=""><abbr title=" 264     private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListener() {"> 264     private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListener🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 265         @Override                                                                                        </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 266         public void onClick(DialogInterface dialogInterface, int i) {                                    </span>
<span class="-1376352079449399710" onmouseenter="enter('-1376352079449399710');" onmouseout="out('-1376352079449399710');" style=""> 267             BrowserUtils.launchBrowserOrShowError(requireContext(), WEB_APP_URL);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 269     };                                                                                                   </span>
<span  style=""> 270                                                                                                          </span>
<span class="-2746710762323274178" onmouseenter="enter('-2746710762323274178');" onmouseout="out('-2746710762323274178');" style=""> 271     private boolean hasUnsyncedNotes() {                                                                 </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 272         Simplenote application = (Simplenote) getActivity().getApplication();                            </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 273         Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style=""> 274         Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style=""> 275         while (notesCursor.moveToNext()) {                                                               </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style=""> 276             Note note = notesCursor.getObject();                                                         </span>
<span class="-8724002811605814194" onmouseenter="enter('-8724002811605814194');" onmouseout="out('-8724002811605814194');" style=""> 277             if (note.isNew() || note.isModified()) {                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 278                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280         }                                                                                                </span>
<span  style=""> 281                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 282         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283     }                                                                                                    </span>
<span  style=""> 284                                                                                                          </span>
<span class="6766759746618176914" onmouseenter="enter('6766759746618176914');" onmouseout="out('6766759746618176914');" style=""> 285     private void logOut() {                                                                              </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 286         Simplenote application = (Simplenote) getActivity().getApplication();                            </span>
<span class="1492891761222902367" onmouseenter="enter('1492891761222902367');" onmouseout="out('1492891761222902367');" style=""> 287         application.getSimperium().deauthorizeUser();                                                    </span>
<span  style=""> 288                                                                                                          </span>
<span class="7043558399093065986" onmouseenter="enter('7043558399093065986');" onmouseout="out('7043558399093065986');" style=""> 289         application.getNotesBucket().reset();                                                            </span>
<span class="6239456552485319541" onmouseenter="enter('6239456552485319541');" onmouseout="out('6239456552485319541');" style=""> 290         application.getTagsBucket().reset();                                                             </span>
<span class="8813783904792492357" onmouseenter="enter('8813783904792492357');" onmouseout="out('8813783904792492357');" style=""> 291         application.getPreferencesBucket().reset();                                                      </span>
<span  style=""> 292                                                                                                          </span>
<span class="-2290183695292509841" onmouseenter="enter('-2290183695292509841');" onmouseout="out('-2290183695292509841');" style=""> 293         application.getNotesBucket().stop();                                                             </span>
<span class="1881204346293915273" onmouseenter="enter('1881204346293915273');" onmouseout="out('1881204346293915273');" style=""> 294         application.getTagsBucket().stop();                                                              </span>
<span class="4389321878217818521" onmouseenter="enter('4389321878217818521');" onmouseout="out('4389321878217818521');" style=""> 295         application.getPreferencesBucket().stop();                                                       </span>
<span  style=""> 296                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 297         AnalyticsTracker.track(                                                                          </span>
<span class="1682841947070741936" onmouseenter="enter('1682841947070741936');" onmouseout="out('1682841947070741936');" style=""> 298                 AnalyticsTracker.Stat.USER_SIGNED_OUT,                                                   </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 299                 AnalyticsTracker.CATEGORY_USER,                                                          </span>
<span class="4079591682198083249" onmouseenter="enter('4079591682198083249');" onmouseout="out('4079591682198083249');" style=""> 300                 &quot;preferences_sign_out_button&quot;                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 301         );                                                                                               </span>
<span  style=""> 302                                                                                                          </span>
<span class="-7624151188866077780" onmouseenter="enter('-7624151188866077780');" onmouseout="out('-7624151188866077780');" style=""> 303         // Resets analytics user back to &#x27;anon&#x27; type                                                     </span>
<span class="-8646882850309232593" onmouseenter="enter('-8646882850309232593');" onmouseout="out('-8646882850309232593');" style=""> 304         AnalyticsTracker.refreshMetadata(null);                                                          </span>
<span class="7088142554023647232" onmouseenter="enter('7088142554023647232');" onmouseout="out('7088142554023647232');" style=""> 305         CrashUtils.clearCurrentUser();                                                                   </span>
<span  style=""> 306                                                                                                          </span>
<span class="2045801939261456210" onmouseenter="enter('2045801939261456210');" onmouseout="out('2045801939261456210');" style=""> 307         // Remove wp.com token                                                                           </span>
<span class="6759455075429047207" onmouseenter="enter('6759455075429047207');" onmouseout="out('6759455075429047207');" style=""><abbr title=" 308         SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).edit();"> 308         SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).ed🔵</abbr></span>
<span class="3747765183142081866" onmouseenter="enter('3747765183142081866');" onmouseout="out('3747765183142081866');" style=""> 309         editor.remove(PrefUtils.PREF_WP_TOKEN);                                                          </span>
<span  style=""> 310                                                                                                          </span>
<span class="-3120932776057048446" onmouseenter="enter('-3120932776057048446');" onmouseout="out('-3120932776057048446');" style=""> 311         // Remove WordPress sites                                                                        </span>
<span class="-7780340906700244594" onmouseenter="enter('-7780340906700244594');" onmouseout="out('-7780340906700244594');" style=""> 312         editor.remove(PrefUtils.PREF_WORDPRESS_SITES);                                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 313         editor.apply();                                                                                  </span>
<span  style=""> 314                                                                                                          </span>
<span class="4563224411068398132" onmouseenter="enter('4563224411068398132');" onmouseout="out('4563224411068398132');" style=""> 315         // Remove Passcode Lock password                                                                 </span>
<span class="400057636120928336" onmouseenter="enter('400057636120928336');" onmouseout="out('400057636120928336');" style=""> 316         AppLockManager.getInstance().getAppLock().setPassword(&quot;&quot;);                                       </span>
<span  style=""> 317                                                                                                          </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 318         WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                        </span>
<span  style=""> 319                                                                                                          </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 320         getActivity().finish();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321     }                                                                                                    </span>
<span  style=""> 322                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 323     @Override                                                                                            </span>
<span class="-5342682213111723277" onmouseenter="enter('-5342682213111723277');" onmouseout="out('-5342682213111723277');" style=""> 324     public void onUserStatusChange(User.Status status) {                                                 </span>
<span class="3969702543635342042" onmouseenter="enter('3969702543635342042');" onmouseout="out('3969702543635342042');" style=""> 325         if (isAdded() &amp;&amp; status == User.Status.AUTHORIZED) {                                             </span>
<span class="4458767919757787183" onmouseenter="enter('4458767919757787183');" onmouseout="out('4458767919757787183');" style=""> 326             // User signed in                                                                            </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 327             getActivity().runOnUiThread(new Runnable() {                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 328                 public void run() {                                                                      </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style=""> 329                     Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);         </span>
<span class="8885574470684679352" onmouseenter="enter('8885574470684679352');" onmouseout="out('8885574470684679352');" style=""> 330                     authenticatePreference.setTitle(R.string.log_out);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 332             });                                                                                          </span>
<span  style=""> 333                                                                                                          </span>
<span class="1736644716831373310" onmouseenter="enter('1736644716831373310');" onmouseout="out('1736644716831373310');" style=""> 334             Simplenote app = (Simplenote) getActivity().getApplication();                                </span>
<span class="6176818654817156375" onmouseenter="enter('6176818654817156375');" onmouseout="out('6176818654817156375');" style=""> 335             AnalyticsTracker.refreshMetadata(app.getSimperium().getUser().getEmail());                   </span>
<span class="-5091612656435705492" onmouseenter="enter('-5091612656435705492');" onmouseout="out('-5091612656435705492');" style=""> 336             CrashUtils.setCurrentUser(app.getSimperium().getUser());                                     </span>
<span  style=""> 337                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 338             AnalyticsTracker.track(                                                                      </span>
<span class="-2120239274310567773" onmouseenter="enter('-2120239274310567773');" onmouseout="out('-2120239274310567773');" style=""> 339                     AnalyticsTracker.Stat.USER_SIGNED_IN,                                                </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 340                     AnalyticsTracker.CATEGORY_USER,                                                      </span>
<span class="-1887876783048589275" onmouseenter="enter('-1887876783048589275');" onmouseout="out('-1887876783048589275');" style=""> 341                     &quot;signed_in_from_preferences_activity&quot;                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 342             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344     }                                                                                                    </span>
<span  style=""> 345                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 346     @Override                                                                                            </span>
<span class="5984220864459059356" onmouseenter="enter('5984220864459059356');" onmouseout="out('5984220864459059356');" style=""> 347     public void onUserCreated(User user) {                                                               </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 348         AnalyticsTracker.track(                                                                          </span>
<span class="173757116163891806" onmouseenter="enter('173757116163891806');" onmouseout="out('173757116163891806');" style=""> 349                 AnalyticsTracker.Stat.USER_ACCOUNT_CREATED,                                              </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 350                 AnalyticsTracker.CATEGORY_USER,                                                          </span>
<span class="3712512237873507570" onmouseenter="enter('3712512237873507570');" onmouseout="out('3712512237873507570');" style=""> 351                 &quot;account_created_from_preferences_activity&quot;                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 352         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353     }                                                                                                    </span>
<span  style=""> 354                                                                                                          </span>
<span class="5598091284936706499" onmouseenter="enter('5598091284936706499');" onmouseout="out('5598091284936706499');" style=""> 355     private void updateAnalyticsSwitchState() {                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 356         try {                                                                                            </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 357             Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                          </span>
<span class="2776107362356981254" onmouseenter="enter('2776107362356981254');" onmouseout="out('2776107362356981254');" style=""> 358             mAnalyticsSwitch.setChecked(prefs.getAnalyticsEnabled());                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 359         } catch (BucketObjectMissingException e) {                                                       </span>
<span class="2124131716277693204" onmouseenter="enter('2124131716277693204');" onmouseout="out('2124131716277693204');" style=""> 360             // The preferences object doesn&#x27;t exist for this user yet, create it                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 361             try {                                                                                        </span>
<span class="8863892184482182459" onmouseenter="enter('8863892184482182459');" onmouseout="out('8863892184482182459');" style=""> 362                 Preferences prefs = mPreferencesBucket.newObject(PREFERENCES_OBJECT_KEY);                </span>
<span class="-3725197847428303949" onmouseenter="enter('-3725197847428303949');" onmouseout="out('-3725197847428303949');" style=""> 363                 prefs.setAnalyticsEnabled(true);                                                         </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 364                 prefs.save();                                                                            </span>
<span class="-1061155454955510578" onmouseenter="enter('-1061155454955510578');" onmouseout="out('-1061155454955510578');" style=""> 365             } catch (BucketObjectNameInvalid bucketObjectNameInvalid) {                                  </span>
<span class="1883933860530627988" onmouseenter="enter('1883933860530627988');" onmouseout="out('1883933860530627988');" style=""> 366                 bucketObjectNameInvalid.printStackTrace();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369     }                                                                                                    </span>
<span  style=""> 370                                                                                                          </span>
<span class="6003914412447352798" onmouseenter="enter('6003914412447352798');" onmouseout="out('6003914412447352798');" style=""> 371     private static class LogOutTask extends AsyncTask&lt;Void, Void, Boolean&gt; {                             </span>
<span class="-8626644697686121306" onmouseenter="enter('-8626644697686121306');" onmouseout="out('-8626644697686121306');" style=""> 372         private WeakReference&lt;PreferencesFragment&gt; mPreferencesFragmentReference;                        </span>
<span  style=""> 373                                                                                                          </span>
<span class="556201937984791944" onmouseenter="enter('556201937984791944');" onmouseout="out('556201937984791944');" style=""> 374         LogOutTask(PreferencesFragment fragment) {                                                       </span>
<span class="-8947237769278526855" onmouseenter="enter('-8947237769278526855');" onmouseout="out('-8947237769278526855');" style=""> 375             mPreferencesFragmentReference = new WeakReference&lt;&gt;(fragment);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376         }                                                                                                </span>
<span  style=""> 377                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 378         @Override                                                                                        </span>
<span class="6715077551046087572" onmouseenter="enter('6715077551046087572');" onmouseout="out('6715077551046087572');" style=""> 379         protected Boolean doInBackground(Void... voids) {                                                </span>
<span class="1614077137004075676" onmouseenter="enter('1614077137004075676');" onmouseout="out('1614077137004075676');" style=""> 380             PreferencesFragment fragment = mPreferencesFragmentReference.get();                          </span>
<span class="3469476575903725482" onmouseenter="enter('3469476575903725482');" onmouseout="out('3469476575903725482');" style=""> 381             return (fragment == null) || fragment.hasUnsyncedNotes();                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382         }                                                                                                </span>
<span  style=""> 383                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 384         @Override                                                                                        </span>
<span class="-6776128592848448095" onmouseenter="enter('-6776128592848448095');" onmouseout="out('-6776128592848448095');" style=""> 385         protected void onPostExecute(Boolean hasUnsyncedNotes) {                                         </span>
<span class="1614077137004075676" onmouseenter="enter('1614077137004075676');" onmouseout="out('1614077137004075676');" style=""> 386             PreferencesFragment fragment = mPreferencesFragmentReference.get();                          </span>
<span class="871842557913824847" onmouseenter="enter('871842557913824847');" onmouseout="out('871842557913824847');" style=""> 387             if (fragment == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 388                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389             }                                                                                            </span>
<span class="-4113446021503535506" onmouseenter="enter('-4113446021503535506');" onmouseout="out('-4113446021503535506');" style=""> 390             // Safety first! Check if any notes are unsynced and warn the user if so.                    </span>
<span class="-5077436549454521569" onmouseenter="enter('-5077436549454521569');" onmouseout="out('-5077436549454521569');" style=""> 391             if (hasUnsyncedNotes) {                                                                      </span>
<span class="-8563297197389225568" onmouseenter="enter('-8563297197389225568');" onmouseout="out('-8563297197389225568');" style=""><abbr title=" 392                 new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.Dialog)).setTitle(R.string.unsynced_notes).setMessage(R.string.unsynced_notes_message).setPositiveButton(R.string.delete_notes, fragment.logOutClickListener).setNeutralButton(R.string.visit_web_app, fragment.loadWebAppClickListener).setNegativeButton(R.string.cancel, null).show();"> 392                 new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.Dialog🔵</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 393             } else {                                                                                     </span>
<span class="-2448080142593331977" onmouseenter="enter('-2448080142593331977');" onmouseout="out('-2448080142593331977');" style=""> 394                 fragment.logOut();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398 }                                                                                                        </span>























































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   4  import android.app.Fragment;                                                                                      </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   5 +import android.content.ClipData;                                                                                  </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   6 +import android.content.ClipboardManager;                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   7 +import android.content.Context;                                                                                   </span>
<span class="-5438333149234786386" onmouseenter="enter('-5438333149234786386');" onmouseout="out('-5438333149234786386');" style="">   8  import android.content.DialogInterface;                                                                           </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   9  import android.content.Intent;                                                                                    </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  10  import android.content.SharedPreferences;                                                                         </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  11  import android.net.Uri;                                                                                           </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  12  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  13  import android.os.Bundle;                                                                                         </span>
<span class="-5436718358296125427" onmouseenter="enter('-5436718358296125427');" onmouseout="out('-5436718358296125427');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  14 +import android.os.ParcelFileDescriptor;                                                                           </span>
<span class="7440210109790075870" onmouseenter="enter('7440210109790075870');" onmouseout="out('7440210109790075870');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  15 +import android.provider.DocumentsContract;                                                                        </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  16  import android.widget.Toast;                                                                                      </span>
<span  style="">  17                                                                                                                    </span>
<span class="-8930837843172754904" onmouseenter="enter('-8930837843172754904');" onmouseout="out('-8930837843172754904');" style="">  18  import androidx.appcompat.app.AlertDialog;                                                                        </span>
<span class="-8763141247638307783" onmouseenter="enter('-8763141247638307783');" onmouseout="out('-8763141247638307783');" style="">  19  import androidx.appcompat.view.ContextThemeWrapper;                                                               </span>
<span class="-7553031234002075668" onmouseenter="enter('-7553031234002075668');" onmouseout="out('-7553031234002075668');" style="">  20  import androidx.preference.ListPreference;                                                                        </span>
<span class="-3312641230509782710" onmouseenter="enter('-3312641230509782710');" onmouseout="out('-3312641230509782710');" style="">  21  import androidx.preference.Preference;                                                                            </span>
<span class="-6464340996904493039" onmouseenter="enter('-6464340996904493039');" onmouseout="out('-6464340996904493039');" style="">  22  import androidx.preference.PreferenceFragmentCompat;                                                              </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  23  import androidx.preference.PreferenceManager;                                                                     </span>
<span class="-8714897093372589764" onmouseenter="enter('-8714897093372589764');" onmouseout="out('-8714897093372589764');" style="">  24  import androidx.preference.SwitchPreferenceCompat;                                                                </span>
<span  style="">  25                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  26  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  27  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  28  import com.automattic.simplenote.models.Preferences;                                                              </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  29 +import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  30  import com.automattic.simplenote.utils.CrashUtils;                                                                </span>
<span class="5145471914103640094" onmouseenter="enter('5145471914103640094');" onmouseout="out('5145471914103640094');" style="">  31  import com.automattic.simplenote.utils.HtmlCompat;                                                                </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  32  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  33  import com.automattic.simplenote.utils.WidgetUtils;                                                               </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  34  import com.simperium.Simperium;                                                                                   </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  35  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  36  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-3142233007863984129" onmouseenter="enter('-3142233007863984129');" onmouseout="out('-3142233007863984129');" style="">  37  import com.simperium.client.BucketObjectNameInvalid;                                                              </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  38  import com.simperium.client.User;                                                                                 </span>
<span  style="">  39                                                                                                                    </span>
<span class="-9193129351684262878" onmouseenter="enter('-9193129351684262878');" onmouseout="out('-9193129351684262878');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  40 +import org.json.JSONArray;                                                                                        </span>
<span class="7232075261178918144" onmouseenter="enter('7232075261178918144');" onmouseout="out('7232075261178918144');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  41 +import org.json.JSONObject;                                                                                       </span>
<span class="7324884800271719890" onmouseenter="enter('7324884800271719890');" onmouseout="out('7324884800271719890');" style="">  42  import org.wordpress.passcodelock.AppLockManager;                                                                 </span>
<span  style="">  43                                                                                                                    </span>
<span class="4915709264156936957" onmouseenter="enter('4915709264156936957');" onmouseout="out('4915709264156936957');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  44 +import java.io.FileOutputStream;                                                                                  </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  45  import java.lang.ref.WeakReference;                                                                               </span>
<span  style="">  46                                                                                                                    </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="">  47  import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                                </span>
<span  style="">  48                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  49  /**                                                                                                               </span>
<span class="5114139633798332353" onmouseenter="enter('5114139633798332353');" onmouseout="out('5114139633798332353');" style="">  50   * A simple {@link Fragment} subclass.                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  51   */                                                                                                               </span>
<span class="8213712831003870267" onmouseenter="enter('8213712831003870267');" onmouseout="out('8213712831003870267');" style="">  52  public class PreferencesFragment extends PreferenceFragmentCompat implements User.StatusChangeListener,           </span>
<span class="-6650933180145052624" onmouseenter="enter('-6650933180145052624');" onmouseout="out('-6650933180145052624');" style="">  53          Simperium.OnUserCreatedListener {                                                                         </span>
<span  style="">  54                                                                                                                    </span>
<span class="6526302226782351091" onmouseenter="enter('6526302226782351091');" onmouseout="out('6526302226782351091');" style="">  55      private static final String WEB_APP_URL = &quot;https://app.simplenote.com&quot;;                                       </span>
<span  style="">  56                                                                                                                    </span>
<span class="-3814969503072913312" onmouseenter="enter('-3814969503072913312');" onmouseout="out('-3814969503072913312');" style="">  57      private Bucket&lt;Preferences&gt; mPreferencesBucket;                                                               </span>
<span class="-908783299724709915" onmouseenter="enter('-908783299724709915');" onmouseout="out('-908783299724709915');" style="">  58      private SwitchPreferenceCompat mAnalyticsSwitch;                                                              </span>
<span  style="">  59                                                                                                                    </span>
<span class="-1679820400310610015" onmouseenter="enter('-1679820400310610015');" onmouseout="out('-1679820400310610015');" style="">  60      public PreferencesFragment() {                                                                                </span>
<span class="5025324504900911379" onmouseenter="enter('5025324504900911379');" onmouseout="out('5025324504900911379');" style="">  61          // Required empty public constructor                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62      }                                                                                                             </span>
<span  style="">  63                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  64      @Override                                                                                                     </span>
<span class="4595408869200273860" onmouseenter="enter('4595408869200273860');" onmouseout="out('4595408869200273860');" style="">  65      public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {                                  </span>
<span class="5290641457290853720" onmouseenter="enter('5290641457290853720');" onmouseout="out('5290641457290853720');" style="">  66          addPreferencesFromResource(R.xml.preferences);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  67      }                                                                                                             </span>
<span  style="">  68                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  69      @Override                                                                                                     </span>
<span class="4360549941650676478" onmouseenter="enter('4360549941650676478');" onmouseout="out('4360549941650676478');" style="">  70      public void onActivityCreated(Bundle savedInstanceState) {                                                    </span>
<span class="1612263533902931469" onmouseenter="enter('1612263533902931469');" onmouseout="out('1612263533902931469');" style="">  71          super.onActivityCreated(savedInstanceState);                                                              </span>
<span  style="">  72                                                                                                                    </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style="">  73          Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                              </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  74          Simplenote currentApp = (Simplenote) getActivity().getApplication();                                      </span>
<span class="-4589466368752372978" onmouseenter="enter('-4589466368752372978');" onmouseout="out('-4589466368752372978');" style="">  75          Simperium simperium = currentApp.getSimperium();                                                          </span>
<span class="2748958065852789861" onmouseenter="enter('2748958065852789861');" onmouseout="out('2748958065852789861');" style="">  76          simperium.setUserStatusChangeListener(this);                                                              </span>
<span class="-2272979595474747044" onmouseenter="enter('-2272979595474747044');" onmouseout="out('-2272979595474747044');" style="">  77          simperium.setOnUserCreatedListener(this);                                                                 </span>
<span class="-8025066121623883978" onmouseenter="enter('-8025066121623883978');" onmouseout="out('-8025066121623883978');" style="">  78          mPreferencesBucket = currentApp.getPreferencesBucket();                                                   </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style="">  79          mPreferencesBucket.start();                                                                               </span>
<span  style="">  80                                                                                                                    </span>
<span class="5417399975767426553" onmouseenter="enter('5417399975767426553');" onmouseout="out('5417399975767426553');" style="">  81          authenticatePreference.setSummary(currentApp.getSimperium().getUser().getEmail());                        </span>
<span class="-3342250548665049241" onmouseenter="enter('-3342250548665049241');" onmouseout="out('-3342250548665049241');" style="">  82          if (simperium.needsAuthorization()) {                                                                     </span>
<span class="8210597588054659575" onmouseenter="enter('8210597588054659575');" onmouseout="out('8210597588054659575');" style="">  83              authenticatePreference.setTitle(R.string.log_in);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  84          } else {                                                                                                  </span>
<span class="8885574470684679352" onmouseenter="enter('8885574470684679352');" onmouseout="out('8885574470684679352');" style="">  85              authenticatePreference.setTitle(R.string.log_out);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86          }                                                                                                         </span>
<span  style="">  87                                                                                                                    </span>
<span class="-1521554305857532068" onmouseenter="enter('-1521554305857532068');" onmouseout="out('-1521554305857532068');" style="">  88          authenticatePreference.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  89              @Override                                                                                             </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  90              public boolean onPreferenceClick(Preference preference) {                                             </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style="">  91                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  92                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93                  }                                                                                                 </span>
<span  style="">  94                                                                                                                    </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  95                  Simplenote currentApp = (Simplenote) getActivity().getApplication();                              </span>
<span class="-1805411858302537149" onmouseenter="enter('-1805411858302537149');" onmouseout="out('-1805411858302537149');" style="">  96                  if (currentApp.getSimperium().needsAuthorization()) {                                             </span>
<span class="-1894877037162085011" onmouseenter="enter('-1894877037162085011');" onmouseout="out('-1894877037162085011');" style="">  97                      Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.class);       </span>
<span class="-1745782676004839840" onmouseenter="enter('-1745782676004839840');" onmouseout="out('-1745782676004839840');" style="">  98                      startActivityForResult(loginIntent, Simperium.SIGNUP_SIGNIN_REQUEST);                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  99                  } else {                                                                                          </span>
<span class="-1878844134905051149" onmouseenter="enter('-1878844134905051149');" onmouseout="out('-1878844134905051149');" style=""> 100                      new LogOutTask(PreferencesFragment.this).execute();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 101                  }                                                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 102                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 104          });                                                                                                       </span>
<span  style=""> 105                                                                                                                    </span>
<span class="-3317947868564721602" onmouseenter="enter('-3317947868564721602');" onmouseout="out('-3317947868564721602');" style=""><abbr title=" 106          findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 106          findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener()🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 107              @Override                                                                                             </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 108              public boolean onPreferenceClick(Preference preference) {                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 109                  try {                                                                                             </span>
<span class="-1694196419231190477" onmouseenter="enter('-1694196419231190477');" onmouseout="out('-1694196419231190477');" style=""> 110                      startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;http://simplenote.com&quot;)));            </span>

<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 111                  } catch (Exception e) {                                                                           </span>
<span class="3734798154944032055" onmouseenter="enter('3734798154944032055');" onmouseout="out('3734798154944032055');" style=""> 112                      Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show();       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113                  }                                                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 114                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 115              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 116          });                                                                                                       </span>
<span  style=""> 117                                                                                                                    </span>
<span class="7546915923491771618" onmouseenter="enter('7546915923491771618');" onmouseout="out('7546915923491771618');" style=""> 118          findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {</span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 119              @Override                                                                                             </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 120              public boolean onPreferenceClick(Preference preference) {                                             </span>
<span class="8659998783220899939" onmouseenter="enter('8659998783220899939');" onmouseout="out('8659998783220899939');" style=""> 121                  startActivity(new Intent(getActivity(), AboutActivity.class));                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 122 +                return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 123 +            }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 124 +        });                                                                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 125 +                                                                                                                  </span>
<span class="1103776393699537905" onmouseenter="enter('1103776393699537905');" onmouseout="out('1103776393699537905');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 126 +        findPreference(&quot;pref_key_export&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {"> 126 +        findPreference(&quot;pref_key_export&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() 🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 127 +            @Override                                                                                             </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 128 +            public boolean onPreferenceClick(Preference preference) {                                             </span>
<span class="4984554577824553223" onmouseenter="enter('4984554577824553223');" onmouseout="out('4984554577824553223');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 129 +                Intent intent = new Intent(Intent.ACTION_CREATE_DOCUMENT);                                        </span>
<span class="8912465054547747469" onmouseenter="enter('8912465054547747469');" onmouseout="out('8912465054547747469');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 130 +                intent.addCategory(Intent.CATEGORY_OPENABLE);                                                     </span>
<span class="-6707067096973178010" onmouseenter="enter('-6707067096973178010');" onmouseout="out('-6707067096973178010');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 131 +                intent.setType(&quot;application/json&quot;);                                                               </span>
<span class="-6509278610434426342" onmouseenter="enter('-6509278610434426342');" onmouseout="out('-6509278610434426342');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 132 +                intent.putExtra(Intent.EXTRA_TITLE, &quot;account.json&quot;);                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 133 +                                                                                                                  </span>
<span class="2104595516747401662" onmouseenter="enter('2104595516747401662');" onmouseout="out('2104595516747401662');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 134 +                startActivityForResult(intent, 1);                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 135 +                                                                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 136                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 138          });                                                                                                       </span>
<span  style=""> 139                                                                                                                    </span>
<span class="-2051654600796868045" onmouseenter="enter('-2051654600796868045');" onmouseout="out('-2051654600796868045');" style=""> 140          final ListPreference themePreference = (ListPreference) findPreference(PrefUtils.PREF_THEME);             </span>
<span class="-3135129752727836774" onmouseenter="enter('-3135129752727836774');" onmouseout="out('-3135129752727836774');" style=""> 141          themePreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 142              @Override                                                                                             </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 143              public boolean onPreferenceChange(Preference preference, Object newValue) {                           </span>
<span class="8972235106908076260" onmouseenter="enter('8972235106908076260');" onmouseout="out('8972235106908076260');" style=""> 144                  updateTheme(requireActivity(), Integer.parseInt(newValue.toString()));                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 145                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146              }                                                                                                     </span>
<span  style=""> 147                                                                                                                    </span>
<span class="7597115961384302616" onmouseenter="enter('7597115961384302616');" onmouseout="out('7597115961384302616');" style=""> 148              private void updateTheme(Activity activity, int index) {                                              </span>
<span class="1607563076949848778" onmouseenter="enter('1607563076949848778');" onmouseout="out('1607563076949848778');" style=""> 149                  CharSequence[] entries = themePreference.getEntries();                                            </span>
<span class="1955249186347848341" onmouseenter="enter('1955249186347848341');" onmouseout="out('1955249186347848341');" style=""> 150                  themePreference.setSummary(entries[index]);                                                       </span>
<span  style=""> 151                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 152                  AnalyticsTracker.track(                                                                           </span>
<span class="-3633564244751131710" onmouseenter="enter('-3633564244751131710');" onmouseout="out('-3633564244751131710');" style=""> 153                          AnalyticsTracker.Stat.SETTINGS_THEME_UPDATED,                                             </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 154                          AnalyticsTracker.CATEGORY_USER,                                                           </span>
<span class="8810282947066680931" onmouseenter="enter('8810282947066680931');" onmouseout="out('8810282947066680931');" style=""> 155                          &quot;theme_preference&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 156                  );                                                                                                </span>
<span  style=""> 157                                                                                                                    </span>
<span class="-6345048933952298843" onmouseenter="enter('-6345048933952298843');" onmouseout="out('-6345048933952298843');" style=""> 158                  // recreate the activity so new theme is applied                                                  </span>
<span class="6106586807651914503" onmouseenter="enter('6106586807651914503');" onmouseout="out('6106586807651914503');" style=""> 159                  activity.recreate();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 161          });                                                                                                       </span>
<span  style=""> 162                                                                                                                    </span>
<span class="-3563544225355858599" onmouseenter="enter('-3563544225355858599');" onmouseout="out('-3563544225355858599');" style=""> 163          final ListPreference sortPreference = (ListPreference) findPreference(PrefUtils.PREF_SORT_ORDER);         </span>
<span class="-5125317966081854635" onmouseenter="enter('-5125317966081854635');" onmouseout="out('-5125317966081854635');" style=""> 164          sortPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 165              @Override                                                                                             </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 166              public boolean onPreferenceChange(Preference preference, Object newValue) {                           </span>
<span class="-8870833255101890428" onmouseenter="enter('-8870833255101890428');" onmouseout="out('-8870833255101890428');" style=""> 167                  int index = Integer.parseInt(newValue.toString());                                                </span>
<span class="4511877948668264185" onmouseenter="enter('4511877948668264185');" onmouseout="out('4511877948668264185');" style=""> 168                  CharSequence[] entries = sortPreference.getEntries();                                             </span>
<span class="-9141657533116186952" onmouseenter="enter('-9141657533116186952');" onmouseout="out('-9141657533116186952');" style=""> 169                  sortPreference.setSummary(entries[index]);                                                        </span>
<span  style=""> 170                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 171                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 173          });                                                                                                       </span>
<span  style=""> 174                                                                                                                    </span>
<span class="-2516209658609361373" onmouseenter="enter('-2516209658609361373');" onmouseout="out('-2516209658609361373');" style=""> 175          Preference versionPref = findPreference(&quot;pref_key_build&quot;);                                                </span>
<span class="2941715853984851229" onmouseenter="enter('2941715853984851229');" onmouseout="out('2941715853984851229');" style=""> 176          versionPref.setSummary(PrefUtils.versionInfo());                                                          </span>
<span  style=""> 177                                                                                                                    </span>
<span class="269389859234146346" onmouseenter="enter('269389859234146346');" onmouseout="out('269389859234146346');" style=""><abbr title=" 178          SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condensed_note_list&quot;);"> 178          SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condensed_note🔵</abbr></span>
<span class="731943818112030665" onmouseenter="enter('731943818112030665');" onmouseout="out('731943818112030665');" style=""> 179          switchPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 180              @Override                                                                                             </span>
<span class="8137396142185538827" onmouseenter="enter('8137396142185538827');" onmouseout="out('8137396142185538827');" style=""> 181              public boolean onPreferenceChange(Preference preference, Object o) {                                  </span>
<span class="2703036426639498311" onmouseenter="enter('2703036426639498311');" onmouseout="out('2703036426639498311');" style=""> 182                  if (((SwitchPreferenceCompat) preference).isChecked()) {                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 183                      AnalyticsTracker.track(                                                                       </span>
<span class="8127526149566412653" onmouseenter="enter('8127526149566412653');" onmouseout="out('8127526149566412653');" style=""> 184                              AnalyticsTracker.Stat.SETTINGS_LIST_CONDENSED_ENABLED,                                </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 185                              AnalyticsTracker.CATEGORY_USER,                                                       </span>
<span class="-7341164689664996576" onmouseenter="enter('-7341164689664996576');" onmouseout="out('-7341164689664996576');" style=""> 186                              &quot;condensed_list_preference&quot;                                                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 187                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188                  }                                                                                                 </span>
<span  style=""> 189                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 190                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 192          });                                                                                                       </span>
<span  style=""> 193                                                                                                                    </span>
<span class="-6021379672389812030" onmouseenter="enter('-6021379672389812030');" onmouseout="out('-6021379672389812030');" style=""> 194          // Add the hyperlink to the analytics summary                                                             </span>
<span class="-3803040130638154017" onmouseenter="enter('-3803040130638154017');" onmouseout="out('-3803040130638154017');" style=""> 195          Preference analyticsSummaryPreference = findPreference(&quot;pref_key_analytics_enabled_summary&quot;);             </span>
<span class="-5954923786447915621" onmouseenter="enter('-5954923786447915621');" onmouseout="out('-5954923786447915621');" style=""> 196          String formattedSummary = String.format(                                                                  </span>
<span class="4703350175896481792" onmouseenter="enter('4703350175896481792');" onmouseout="out('4703350175896481792');" style=""> 197                  getString(R.string.share_analytics_summary),                                                      </span>
<span class="4561110205824883354" onmouseenter="enter('4561110205824883354');" onmouseout="out('4561110205824883354');" style=""> 198                  &quot;&lt;a href=\&quot;https://automattic.com/cookies\&quot;&gt;&quot;,                                                    </span>
<span class="-5125567965545776439" onmouseenter="enter('-5125567965545776439');" onmouseout="out('-5125567965545776439');" style=""> 199                  &quot;&lt;/a&gt;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 200          );                                                                                                        </span>
<span class="3076824088033544263" onmouseenter="enter('3076824088033544263');" onmouseout="out('3076824088033544263');" style=""> 201          analyticsSummaryPreference.setSummary(HtmlCompat.fromHtml(formattedSummary));                             </span>
<span  style=""> 202                                                                                                                    </span>
<span class="2122402547097653030" onmouseenter="enter('2122402547097653030');" onmouseout="out('2122402547097653030');" style=""> 203          mAnalyticsSwitch = (SwitchPreferenceCompat)findPreference(&quot;pref_key_analytics_switch&quot;);                   </span>
<span class="5250772881921022799" onmouseenter="enter('5250772881921022799');" onmouseout="out('5250772881921022799');" style=""> 204          mAnalyticsSwitch.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 205              @Override                                                                                             </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 206              public boolean onPreferenceChange(Preference preference, Object newValue) {                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 207                  try {                                                                                             </span>
<span class="7999271203428147057" onmouseenter="enter('7999271203428147057');" onmouseout="out('7999271203428147057');" style=""> 208                      boolean isChecked = (boolean)newValue;                                                        </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 209                      Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                           </span>
<span class="-3416644870449875468" onmouseenter="enter('-3416644870449875468');" onmouseout="out('-3416644870449875468');" style=""> 210                      prefs.setAnalyticsEnabled(isChecked);                                                         </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 211                      prefs.save();                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 212                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 213                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214                  }                                                                                                 </span>
<span  style=""> 215                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 216                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 218          });                                                                                                       </span>
<span  style=""> 219                                                                                                                    </span>
<span class="5339258651008713874" onmouseenter="enter('5339258651008713874');" onmouseout="out('5339258651008713874');" style=""> 220          updateAnalyticsSwitchState();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 221 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 222 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 223 +    @Override                                                                                                     </span>
<span class="3267640102220640214" onmouseenter="enter('3267640102220640214');" onmouseout="out('3267640102220640214');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 224 +    public void onActivityResult(int requestCode, int resultCode, Intent resultData) {                            </span>
<span class="3621747730259457062" onmouseenter="enter('3621747730259457062');" onmouseout="out('3621747730259457062');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 225 +        if (requestCode != 1 || resultCode != Activity.RESULT_OK || resultData == null) {                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 226 +            return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 227 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 228 +                                                                                                                  </span>
<span class="-5813903460581087014" onmouseenter="enter('-5813903460581087014');" onmouseout="out('-5813903460581087014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 229 +        Uri uri = resultData.getData();                                                                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 230 +                                                                                                                  </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 231 +        Simplenote currentApp = (Simplenote) getActivity().getApplication();                                      </span>
<span class="5741585060608048581" onmouseenter="enter('5741585060608048581');" onmouseout="out('5741585060608048581');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 232 +        Bucket&lt;Note&gt; noteBucket = currentApp.getNotesBucket();                                                    </span>
<span class="-1289751974263118167" onmouseenter="enter('-1289751974263118167');" onmouseout="out('-1289751974263118167');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 233 +        Bucket&lt;Tag&gt; tagBucket = currentApp.getTagsBucket();                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 234 +                                                                                                                  </span>
<span class="-2573210000671885020" onmouseenter="enter('-2573210000671885020');" onmouseout="out('-2573210000671885020');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 235 +        JSONObject account = new JSONObject();                                                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 236 +                                                                                                                  </span>
<span class="8693188982604872634" onmouseenter="enter('8693188982604872634');" onmouseout="out('8693188982604872634');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 237 +        Bucket.ObjectCursor&lt;Note&gt; cursor = noteBucket.allObjects();                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 238 +                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 239 +        try {                                                                                                     </span>
<span class="-6836816169516685361" onmouseenter="enter('-6836816169516685361');" onmouseout="out('-6836816169516685361');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 240 +            account.put(&quot;user&quot;, currentApp.getSimperium().getUser().getEmail());                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 241 +                                                                                                                  </span>
<span class="-364427120790392208" onmouseenter="enter('-364427120790392208');" onmouseout="out('-364427120790392208');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 242 +            JSONArray notes = new JSONArray();                                                                    </span>
<span class="-679463407698125917" onmouseenter="enter('-679463407698125917');" onmouseout="out('-679463407698125917');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 243 +            while (cursor.moveToNext()) {                                                                         </span>
<span class="-2832188742216530514" onmouseenter="enter('-2832188742216530514');" onmouseout="out('-2832188742216530514');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 244 +                Note appNote = cursor.getObject();                                                                </span>
<span class="-281892266362858858" onmouseenter="enter('-281892266362858858');" onmouseout="out('-281892266362858858');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 245 +                JSONObject note = new JSONObject();                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 246 +                                                                                                                  </span>
<span class="4784441280085587484" onmouseenter="enter('4784441280085587484');" onmouseout="out('4784441280085587484');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 247 +                note.put(&quot;id&quot;, appNote.getSimperiumKey());                                                        </span>
<span class="4302596085175232103" onmouseenter="enter('4302596085175232103');" onmouseout="out('4302596085175232103');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 248 +                note.put(&quot;deleted&quot;, appNote.isDeleted());                                                         </span>
<span class="-1375543318608043631" onmouseenter="enter('-1375543318608043631');" onmouseout="out('-1375543318608043631');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 249 +                note.put(&quot;content&quot;, appNote.getContent());                                                        </span>
<span class="6754322225078731476" onmouseenter="enter('6754322225078731476');" onmouseout="out('6754322225078731476');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 250 +                note.put(&quot;publishURL&quot;, appNote.getPublishedUrl());                                                </span>
<span class="2831236258407328761" onmouseenter="enter('2831236258407328761');" onmouseout="out('2831236258407328761');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 251 +                note.put(&quot;tags&quot;, new JSONArray(appNote.getTags()));                                               </span>
<span class="-5634056099564214119" onmouseenter="enter('-5634056099564214119');" onmouseout="out('-5634056099564214119');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 252 +                note.put(&quot;systemTags&quot;, appNote.getSystemTags());                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 253 +                                                                                                                  </span>
<span class="5037155776270337248" onmouseenter="enter('5037155776270337248');" onmouseout="out('5037155776270337248');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 254 +                note.put(&quot;version&quot;, appNote.getVersion());                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 255 +                                                                                                                  </span>
<span class="-6448452813514862631" onmouseenter="enter('-6448452813514862631');" onmouseout="out('-6448452813514862631');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 256 +                notes.put(note);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 257 +            }                                                                                                     </span>
<span class="-900806749799034471" onmouseenter="enter('-900806749799034471');" onmouseout="out('-900806749799034471');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 258 +            account.put(&quot;notes&quot;, notes);                                                                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 259 +                                                                                                                  </span>
<span class="-484124656827523157" onmouseenter="enter('-484124656827523157');" onmouseout="out('-484124656827523157');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 260 +            JSONArray tags = new JSONArray();                                                                     </span>
<span class="7573437584692849817" onmouseenter="enter('7573437584692849817');" onmouseout="out('7573437584692849817');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 261 +            Bucket.ObjectCursor&lt;Tag&gt; tagCursor = tagBucket.allObjects();                                          </span>
<span class="7257439043024175527" onmouseenter="enter('7257439043024175527');" onmouseout="out('7257439043024175527');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 262 +            while (tagCursor.moveToNext()) {                                                                      </span>
<span class="7294797734220556166" onmouseenter="enter('7294797734220556166');" onmouseout="out('7294797734220556166');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 263 +                Tag appTag = tagCursor.getObject();                                                               </span>
<span class="-738866739334787476" onmouseenter="enter('-738866739334787476');" onmouseout="out('-738866739334787476');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 264 +                JSONObject tag = new JSONObject();                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 265 +                                                                                                                  </span>
<span class="-6932251409781771830" onmouseenter="enter('-6932251409781771830');" onmouseout="out('-6932251409781771830');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 266 +                tag.put(&quot;id&quot;, appTag.getSimperiumKey());                                                          </span>
<span class="-1441446876201711797" onmouseenter="enter('-1441446876201711797');" onmouseout="out('-1441446876201711797');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 267 +                tag.put(&quot;name&quot;, appTag.getName());                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 268 +                                                                                                                  </span>
<span class="1767952690529220579" onmouseenter="enter('1767952690529220579');" onmouseout="out('1767952690529220579');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 269 +                if (null != appTag.getIndex()) {                                                                  </span>
<span class="-6526561763226610133" onmouseenter="enter('-6526561763226610133');" onmouseout="out('-6526561763226610133');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 270 +                    tag.put(&quot;index&quot;, appTag.getIndex());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 271 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 272 +                                                                                                                  </span>
<span class="-2146716553142207437" onmouseenter="enter('-2146716553142207437');" onmouseout="out('-2146716553142207437');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 273 +                tag.put(&quot;version&quot;, appTag.getVersion());                                                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 274 +                                                                                                                  </span>
<span class="-4835038884243430189" onmouseenter="enter('-4835038884243430189');" onmouseout="out('-4835038884243430189');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 275 +                tags.put(tag);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 276 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 277 +                                                                                                                  </span>
<span class="8247220099271615115" onmouseenter="enter('8247220099271615115');" onmouseout="out('8247220099271615115');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 278 +            account.put(&quot;tags&quot;, tags);                                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 279 +                                                                                                                  </span>
<span class="-2729345193604737994" onmouseenter="enter('-2729345193604737994');" onmouseout="out('-2729345193604737994');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 280 +            ParcelFileDescriptor pfd = getActivity().getContentResolver().openFileDescriptor(uri, &quot;w&quot;);           </span>
<span class="-370571335155435742" onmouseenter="enter('-370571335155435742');" onmouseout="out('-370571335155435742');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 281 +            FileOutputStream fileOutputStream = new FileOutputStream(pfd.getFileDescriptor());                    </span>
<span class="551787877958277432" onmouseenter="enter('551787877958277432');" onmouseout="out('551787877958277432');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 282 +            fileOutputStream.write(account.toString(2).getBytes());                                               </span>
<span class="-2121397186699676455" onmouseenter="enter('-2121397186699676455');" onmouseout="out('-2121397186699676455');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 283 +            pfd.close();                                                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 284 +        } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 285 +            e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 286 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287      }                                                                                                             </span>
<span  style=""> 288                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 289      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 290      public void onPause() {                                                                                       </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 291          super.onPause();                                                                                          </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 292          mPreferencesBucket.stop();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293      }                                                                                                             </span>
<span  style=""> 294                                                                                                                    </span>
<span class="-8704268889922853518" onmouseenter="enter('-8704268889922853518');" onmouseout="out('-8704268889922853518');" style=""> 295      private DialogInterface.OnClickListener logOutClickListener = new DialogInterface.OnClickListener() {         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 296          @Override                                                                                                 </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 297          public void onClick(DialogInterface dialogInterface, int i) {                                             </span>
<span class="-2307534810381711346" onmouseenter="enter('-2307534810381711346');" onmouseout="out('-2307534810381711346');" style=""> 298              logOut();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 300      };                                                                                                            </span>
<span  style=""> 301                                                                                                                    </span>
<span class="-698083585503025487" onmouseenter="enter('-698083585503025487');" onmouseout="out('-698083585503025487');" style=""> 302      private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 303          @Override                                                                                                 </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 304          public void onClick(DialogInterface dialogInterface, int i) {                                             </span>
<span class="-4028427458665571821" onmouseenter="enter('-4028427458665571821');" onmouseout="out('-4028427458665571821');" style=""> 305              startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(WEB_APP_URL)));                                </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 307      };                                                                                                            </span>
<span  style=""> 308                                                                                                                    </span>
<span class="-2746710762323274178" onmouseenter="enter('-2746710762323274178');" onmouseout="out('-2746710762323274178');" style=""> 309      private boolean hasUnsyncedNotes() {                                                                          </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 310          Simplenote application = (Simplenote) getActivity().getApplication();                                     </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 311          Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                                  </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style=""> 312          Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                         </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style=""> 313          while (notesCursor.moveToNext()) {                                                                        </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style=""> 314              Note note = notesCursor.getObject();                                                                  </span>
<span class="-8724002811605814194" onmouseenter="enter('-8724002811605814194');" onmouseout="out('-8724002811605814194');" style=""> 315              if (note.isNew() || note.isModified()) {                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 316                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 317              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318          }                                                                                                         </span>
<span  style=""> 319                                                                                                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 320          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321      }                                                                                                             </span>
<span  style=""> 322                                                                                                                    </span>
<span class="6766759746618176914" onmouseenter="enter('6766759746618176914');" onmouseout="out('6766759746618176914');" style=""> 323      private void logOut() {                                                                                       </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 324          Simplenote application = (Simplenote) getActivity().getApplication();                                     </span>
<span class="1492891761222902367" onmouseenter="enter('1492891761222902367');" onmouseout="out('1492891761222902367');" style=""> 325          application.getSimperium().deauthorizeUser();                                                             </span>
<span  style=""> 326                                                                                                                    </span>
<span class="7043558399093065986" onmouseenter="enter('7043558399093065986');" onmouseout="out('7043558399093065986');" style=""> 327          application.getNotesBucket().reset();                                                                     </span>
<span class="6239456552485319541" onmouseenter="enter('6239456552485319541');" onmouseout="out('6239456552485319541');" style=""> 328          application.getTagsBucket().reset();                                                                      </span>
<span class="8813783904792492357" onmouseenter="enter('8813783904792492357');" onmouseout="out('8813783904792492357');" style=""> 329          application.getPreferencesBucket().reset();                                                               </span>
<span  style=""> 330                                                                                                                    </span>
<span class="-2290183695292509841" onmouseenter="enter('-2290183695292509841');" onmouseout="out('-2290183695292509841');" style=""> 331          application.getNotesBucket().stop();                                                                      </span>
<span class="1881204346293915273" onmouseenter="enter('1881204346293915273');" onmouseout="out('1881204346293915273');" style=""> 332          application.getTagsBucket().stop();                                                                       </span>
<span class="4389321878217818521" onmouseenter="enter('4389321878217818521');" onmouseout="out('4389321878217818521');" style=""> 333          application.getPreferencesBucket().stop();                                                                </span>
<span  style=""> 334                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 335          AnalyticsTracker.track(                                                                                   </span>
<span class="1682841947070741936" onmouseenter="enter('1682841947070741936');" onmouseout="out('1682841947070741936');" style=""> 336                  AnalyticsTracker.Stat.USER_SIGNED_OUT,                                                            </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 337                  AnalyticsTracker.CATEGORY_USER,                                                                   </span>
<span class="4079591682198083249" onmouseenter="enter('4079591682198083249');" onmouseout="out('4079591682198083249');" style=""> 338                  &quot;preferences_sign_out_button&quot;                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 339          );                                                                                                        </span>
<span  style=""> 340                                                                                                                    </span>
<span class="-7624151188866077780" onmouseenter="enter('-7624151188866077780');" onmouseout="out('-7624151188866077780');" style=""> 341          // Resets analytics user back to &#x27;anon&#x27; type                                                              </span>
<span class="-8646882850309232593" onmouseenter="enter('-8646882850309232593');" onmouseout="out('-8646882850309232593');" style=""> 342          AnalyticsTracker.refreshMetadata(null);                                                                   </span>
<span class="7088142554023647232" onmouseenter="enter('7088142554023647232');" onmouseout="out('7088142554023647232');" style=""> 343          CrashUtils.clearCurrentUser();                                                                            </span>
<span  style=""> 344                                                                                                                    </span>
<span class="2045801939261456210" onmouseenter="enter('2045801939261456210');" onmouseout="out('2045801939261456210');" style=""> 345          // Remove wp.com token                                                                                    </span>
<span class="6759455075429047207" onmouseenter="enter('6759455075429047207');" onmouseout="out('6759455075429047207');" style=""> 346          SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).edit();    </span>
<span class="3747765183142081866" onmouseenter="enter('3747765183142081866');" onmouseout="out('3747765183142081866');" style=""> 347          editor.remove(PrefUtils.PREF_WP_TOKEN);                                                                   </span>
<span  style=""> 348                                                                                                                    </span>
<span class="-3120932776057048446" onmouseenter="enter('-3120932776057048446');" onmouseout="out('-3120932776057048446');" style=""> 349          // Remove WordPress sites                                                                                 </span>
<span class="-7780340906700244594" onmouseenter="enter('-7780340906700244594');" onmouseout="out('-7780340906700244594');" style=""> 350          editor.remove(PrefUtils.PREF_WORDPRESS_SITES);                                                            </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 351          editor.apply();                                                                                           </span>
<span  style=""> 352                                                                                                                    </span>
<span class="4563224411068398132" onmouseenter="enter('4563224411068398132');" onmouseout="out('4563224411068398132');" style=""> 353          // Remove Passcode Lock password                                                                          </span>
<span class="400057636120928336" onmouseenter="enter('400057636120928336');" onmouseout="out('400057636120928336');" style=""> 354          AppLockManager.getInstance().getAppLock().setPassword(&quot;&quot;);                                                </span>
<span  style=""> 355                                                                                                                    </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 356          WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                                 </span>
<span  style=""> 357                                                                                                                    </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 358          getActivity().finish();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359      }                                                                                                             </span>
<span  style=""> 360                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 361      @Override                                                                                                     </span>
<span class="-5342682213111723277" onmouseenter="enter('-5342682213111723277');" onmouseout="out('-5342682213111723277');" style=""> 362      public void onUserStatusChange(User.Status status) {                                                          </span>
<span class="3969702543635342042" onmouseenter="enter('3969702543635342042');" onmouseout="out('3969702543635342042');" style=""> 363          if (isAdded() &amp;&amp; status == User.Status.AUTHORIZED) {                                                      </span>
<span class="4458767919757787183" onmouseenter="enter('4458767919757787183');" onmouseout="out('4458767919757787183');" style=""> 364              // User signed in                                                                                     </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 365              getActivity().runOnUiThread(new Runnable() {                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 366                  public void run() {                                                                               </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style=""> 367                      Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                  </span>
<span class="8885574470684679352" onmouseenter="enter('8885574470684679352');" onmouseout="out('8885574470684679352');" style=""> 368                      authenticatePreference.setTitle(R.string.log_out);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 370              });                                                                                                   </span>
<span  style=""> 371                                                                                                                    </span>
<span class="1736644716831373310" onmouseenter="enter('1736644716831373310');" onmouseout="out('1736644716831373310');" style=""> 372              Simplenote app = (Simplenote) getActivity().getApplication();                                         </span>
<span class="6176818654817156375" onmouseenter="enter('6176818654817156375');" onmouseout="out('6176818654817156375');" style=""> 373              AnalyticsTracker.refreshMetadata(app.getSimperium().getUser().getEmail());                            </span>
<span class="-5091612656435705492" onmouseenter="enter('-5091612656435705492');" onmouseout="out('-5091612656435705492');" style=""> 374              CrashUtils.setCurrentUser(app.getSimperium().getUser());                                              </span>
<span  style=""> 375                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 376              AnalyticsTracker.track(                                                                               </span>
<span class="-2120239274310567773" onmouseenter="enter('-2120239274310567773');" onmouseout="out('-2120239274310567773');" style=""> 377                      AnalyticsTracker.Stat.USER_SIGNED_IN,                                                         </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 378                      AnalyticsTracker.CATEGORY_USER,                                                               </span>
<span class="-1887876783048589275" onmouseenter="enter('-1887876783048589275');" onmouseout="out('-1887876783048589275');" style=""> 379                      &quot;signed_in_from_preferences_activity&quot;                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 380              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382      }                                                                                                             </span>
<span  style=""> 383                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 384      @Override                                                                                                     </span>
<span class="5984220864459059356" onmouseenter="enter('5984220864459059356');" onmouseout="out('5984220864459059356');" style=""> 385      public void onUserCreated(User user) {                                                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 386          AnalyticsTracker.track(                                                                                   </span>
<span class="173757116163891806" onmouseenter="enter('173757116163891806');" onmouseout="out('173757116163891806');" style=""> 387                  AnalyticsTracker.Stat.USER_ACCOUNT_CREATED,                                                       </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 388                  AnalyticsTracker.CATEGORY_USER,                                                                   </span>
<span class="3712512237873507570" onmouseenter="enter('3712512237873507570');" onmouseout="out('3712512237873507570');" style=""> 389                  &quot;account_created_from_preferences_activity&quot;                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 390          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391      }                                                                                                             </span>
<span  style=""> 392                                                                                                                    </span>
<span class="5598091284936706499" onmouseenter="enter('5598091284936706499');" onmouseout="out('5598091284936706499');" style=""> 393      private void updateAnalyticsSwitchState() {                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 394          try {                                                                                                     </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 395              Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                                   </span>
<span class="2776107362356981254" onmouseenter="enter('2776107362356981254');" onmouseout="out('2776107362356981254');" style=""> 396              mAnalyticsSwitch.setChecked(prefs.getAnalyticsEnabled());                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 397          } catch (BucketObjectMissingException e) {                                                                </span>
<span class="2124131716277693204" onmouseenter="enter('2124131716277693204');" onmouseout="out('2124131716277693204');" style=""> 398              // The preferences object doesn&#x27;t exist for this user yet, create it                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 399              try {                                                                                                 </span>
<span class="8863892184482182459" onmouseenter="enter('8863892184482182459');" onmouseout="out('8863892184482182459');" style=""> 400                  Preferences prefs = mPreferencesBucket.newObject(PREFERENCES_OBJECT_KEY);                         </span>
<span class="-3725197847428303949" onmouseenter="enter('-3725197847428303949');" onmouseout="out('-3725197847428303949');" style=""> 401                  prefs.setAnalyticsEnabled(true);                                                                  </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 402                  prefs.save();                                                                                     </span>
<span class="-1061155454955510578" onmouseenter="enter('-1061155454955510578');" onmouseout="out('-1061155454955510578');" style=""> 403              } catch (BucketObjectNameInvalid bucketObjectNameInvalid) {                                           </span>
<span class="1883933860530627988" onmouseenter="enter('1883933860530627988');" onmouseout="out('1883933860530627988');" style=""> 404                  bucketObjectNameInvalid.printStackTrace();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407      }                                                                                                             </span>
<span  style=""> 408                                                                                                                    </span>
<span class="6003914412447352798" onmouseenter="enter('6003914412447352798');" onmouseout="out('6003914412447352798');" style=""> 409      private static class LogOutTask extends AsyncTask&lt;Void, Void, Boolean&gt; {                                      </span>
<span class="-8626644697686121306" onmouseenter="enter('-8626644697686121306');" onmouseout="out('-8626644697686121306');" style=""> 410          private WeakReference&lt;PreferencesFragment&gt; mPreferencesFragmentReference;                                 </span>
<span  style=""> 411                                                                                                                    </span>
<span class="556201937984791944" onmouseenter="enter('556201937984791944');" onmouseout="out('556201937984791944');" style=""> 412          LogOutTask(PreferencesFragment fragment) {                                                                </span>
<span class="-8947237769278526855" onmouseenter="enter('-8947237769278526855');" onmouseout="out('-8947237769278526855');" style=""> 413              mPreferencesFragmentReference = new WeakReference&lt;&gt;(fragment);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414          }                                                                                                         </span>
<span  style=""> 415                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 416          @Override                                                                                                 </span>
<span class="6715077551046087572" onmouseenter="enter('6715077551046087572');" onmouseout="out('6715077551046087572');" style=""> 417          protected Boolean doInBackground(Void... voids) {                                                         </span>
<span class="1614077137004075676" onmouseenter="enter('1614077137004075676');" onmouseout="out('1614077137004075676');" style=""> 418              PreferencesFragment fragment = mPreferencesFragmentReference.get();                                   </span>
<span class="6685718295711545449" onmouseenter="enter('6685718295711545449');" onmouseout="out('6685718295711545449');" style=""> 419              return fragment == null || fragment.hasUnsyncedNotes();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420          }                                                                                                         </span>
<span  style=""> 421                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 422          @Override                                                                                                 </span>
<span class="-6776128592848448095" onmouseenter="enter('-6776128592848448095');" onmouseout="out('-6776128592848448095');" style=""> 423          protected void onPostExecute(Boolean hasUnsyncedNotes) {                                                  </span>
<span class="1614077137004075676" onmouseenter="enter('1614077137004075676');" onmouseout="out('1614077137004075676');" style=""> 424              PreferencesFragment fragment = mPreferencesFragmentReference.get();                                   </span>
<span  style=""> 425                                                                                                                    </span>
<span class="871842557913824847" onmouseenter="enter('871842557913824847');" onmouseout="out('871842557913824847');" style=""> 426              if (fragment == null) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 427                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428              }                                                                                                     </span>
<span  style=""> 429                                                                                                                    </span>
<span class="-4113446021503535506" onmouseenter="enter('-4113446021503535506');" onmouseout="out('-4113446021503535506');" style=""> 430              // Safety first! Check if any notes are unsynced and warn the user if so.                             </span>
<span class="-5077436549454521569" onmouseenter="enter('-5077436549454521569');" onmouseout="out('-5077436549454521569');" style=""> 431              if (hasUnsyncedNotes) {                                                                               </span>
<span class="3542977983821060447" onmouseenter="enter('3542977983821060447');" onmouseout="out('3542977983821060447');" style=""> 432                  new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.Dialog))       </span>
<span class="-3694903935099593007" onmouseenter="enter('-3694903935099593007');" onmouseout="out('-3694903935099593007');" style=""> 433                          .setTitle(R.string.unsynced_notes)                                                        </span>
<span class="8004583072247328964" onmouseenter="enter('8004583072247328964');" onmouseout="out('8004583072247328964');" style=""> 434                          .setMessage(R.string.unsynced_notes_message)                                              </span>
<span class="2427359236939967623" onmouseenter="enter('2427359236939967623');" onmouseout="out('2427359236939967623');" style=""> 435                          .setPositiveButton(R.string.delete_notes, fragment.logOutClickListener)                   </span>
<span class="7005110418642332587" onmouseenter="enter('7005110418642332587');" onmouseout="out('7005110418642332587');" style=""> 436                          .setNeutralButton(R.string.visit_web_app, fragment.loadWebAppClickListener)               </span>
<span class="-1520918194926717469" onmouseenter="enter('-1520918194926717469');" onmouseout="out('-1520918194926717469');" style=""> 437                          .setNegativeButton(R.string.cancel, null)                                                 </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style=""> 438                          .show();                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 439              } else {                                                                                              </span>
<span class="-2448080142593331977" onmouseenter="enter('-2448080142593331977');" onmouseout="out('-2448080142593331977');" style=""> 440                  fragment.logOut();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 443      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   4  import android.app.Fragment;                                                                                      </span>



<span class="-5438333149234786386" onmouseenter="enter('-5438333149234786386');" onmouseout="out('-5438333149234786386');" style="">   5  import android.content.DialogInterface;                                                                           </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   6  import android.content.Intent;                                                                                    </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   7  import android.content.SharedPreferences;                                                                         </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   8 -import android.net.Uri;                                                                                           </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">   9  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  10  import android.os.Bundle;                                                                                         </span>


<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  11  import android.widget.Toast;                                                                                      </span>
<span  style="">  12                                                                                                                    </span>
<span class="-8930837843172754904" onmouseenter="enter('-8930837843172754904');" onmouseout="out('-8930837843172754904');" style="">  13  import androidx.appcompat.app.AlertDialog;                                                                        </span>
<span class="-8763141247638307783" onmouseenter="enter('-8763141247638307783');" onmouseout="out('-8763141247638307783');" style="">  14  import androidx.appcompat.view.ContextThemeWrapper;                                                               </span>
<span class="-7553031234002075668" onmouseenter="enter('-7553031234002075668');" onmouseout="out('-7553031234002075668');" style="">  15  import androidx.preference.ListPreference;                                                                        </span>
<span class="-3312641230509782710" onmouseenter="enter('-3312641230509782710');" onmouseout="out('-3312641230509782710');" style="">  16  import androidx.preference.Preference;                                                                            </span>
<span class="-6464340996904493039" onmouseenter="enter('-6464340996904493039');" onmouseout="out('-6464340996904493039');" style="">  17  import androidx.preference.PreferenceFragmentCompat;                                                              </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  18  import androidx.preference.PreferenceManager;                                                                     </span>
<span class="-8714897093372589764" onmouseenter="enter('-8714897093372589764');" onmouseout="out('-8714897093372589764');" style="">  19  import androidx.preference.SwitchPreferenceCompat;                                                                </span>
<span  style="">  20                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  21  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  22  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  23  import com.automattic.simplenote.models.Preferences;                                                              </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  24 +import com.automattic.simplenote.utils.BrowserUtils;                                                              </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  25  import com.automattic.simplenote.utils.CrashUtils;                                                                </span>
<span class="5145471914103640094" onmouseenter="enter('5145471914103640094');" onmouseout="out('5145471914103640094');" style="">  26  import com.automattic.simplenote.utils.HtmlCompat;                                                                </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  27  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  28  import com.automattic.simplenote.utils.WidgetUtils;                                                               </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  29  import com.simperium.Simperium;                                                                                   </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  30  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  31  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-3142233007863984129" onmouseenter="enter('-3142233007863984129');" onmouseout="out('-3142233007863984129');" style="">  32  import com.simperium.client.BucketObjectNameInvalid;                                                              </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  33  import com.simperium.client.User;                                                                                 </span>
<span  style="">  34                                                                                                                    </span>


<span class="7324884800271719890" onmouseenter="enter('7324884800271719890');" onmouseout="out('7324884800271719890');" style="">  35  import org.wordpress.passcodelock.AppLockManager;                                                                 </span>
<span  style="">  36                                                                                                                    </span>

<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  37  import java.lang.ref.WeakReference;                                                                               </span>
<span  style="">  38                                                                                                                    </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="">  39  import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                                </span>
<span  style="">  40                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  41  /**                                                                                                               </span>
<span class="5114139633798332353" onmouseenter="enter('5114139633798332353');" onmouseout="out('5114139633798332353');" style="">  42   * A simple {@link Fragment} subclass.                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  43   */                                                                                                               </span>
<span class="8213712831003870267" onmouseenter="enter('8213712831003870267');" onmouseout="out('8213712831003870267');" style="">  44  public class PreferencesFragment extends PreferenceFragmentCompat implements User.StatusChangeListener,           </span>
<span class="-6650933180145052624" onmouseenter="enter('-6650933180145052624');" onmouseout="out('-6650933180145052624');" style="">  45          Simperium.OnUserCreatedListener {                                                                         </span>
<span  style="">  46                                                                                                                    </span>
<span class="6526302226782351091" onmouseenter="enter('6526302226782351091');" onmouseout="out('6526302226782351091');" style="">  47      private static final String WEB_APP_URL = &quot;https://app.simplenote.com&quot;;                                       </span>
<span  style="">  48                                                                                                                    </span>
<span class="-3814969503072913312" onmouseenter="enter('-3814969503072913312');" onmouseout="out('-3814969503072913312');" style="">  49      private Bucket&lt;Preferences&gt; mPreferencesBucket;                                                               </span>
<span class="-908783299724709915" onmouseenter="enter('-908783299724709915');" onmouseout="out('-908783299724709915');" style="">  50      private SwitchPreferenceCompat mAnalyticsSwitch;                                                              </span>
<span  style="">  51                                                                                                                    </span>
<span class="-1679820400310610015" onmouseenter="enter('-1679820400310610015');" onmouseout="out('-1679820400310610015');" style="">  52      public PreferencesFragment() {                                                                                </span>
<span class="5025324504900911379" onmouseenter="enter('5025324504900911379');" onmouseout="out('5025324504900911379');" style="">  53          // Required empty public constructor                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  54      }                                                                                                             </span>
<span  style="">  55                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  56      @Override                                                                                                     </span>
<span class="4595408869200273860" onmouseenter="enter('4595408869200273860');" onmouseout="out('4595408869200273860');" style="">  57      public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {                                  </span>
<span class="5290641457290853720" onmouseenter="enter('5290641457290853720');" onmouseout="out('5290641457290853720');" style="">  58          addPreferencesFromResource(R.xml.preferences);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  59      }                                                                                                             </span>
<span  style="">  60                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  61      @Override                                                                                                     </span>
<span class="4360549941650676478" onmouseenter="enter('4360549941650676478');" onmouseout="out('4360549941650676478');" style="">  62      public void onActivityCreated(Bundle savedInstanceState) {                                                    </span>
<span class="1612263533902931469" onmouseenter="enter('1612263533902931469');" onmouseout="out('1612263533902931469');" style="">  63          super.onActivityCreated(savedInstanceState);                                                              </span>
<span  style="">  64                                                                                                                    </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style="">  65          Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                              </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  66          Simplenote currentApp = (Simplenote) getActivity().getApplication();                                      </span>
<span class="-4589466368752372978" onmouseenter="enter('-4589466368752372978');" onmouseout="out('-4589466368752372978');" style="">  67          Simperium simperium = currentApp.getSimperium();                                                          </span>
<span class="2748958065852789861" onmouseenter="enter('2748958065852789861');" onmouseout="out('2748958065852789861');" style="">  68          simperium.setUserStatusChangeListener(this);                                                              </span>
<span class="-2272979595474747044" onmouseenter="enter('-2272979595474747044');" onmouseout="out('-2272979595474747044');" style="">  69          simperium.setOnUserCreatedListener(this);                                                                 </span>
<span class="-8025066121623883978" onmouseenter="enter('-8025066121623883978');" onmouseout="out('-8025066121623883978');" style="">  70          mPreferencesBucket = currentApp.getPreferencesBucket();                                                   </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style="">  71          mPreferencesBucket.start();                                                                               </span>
<span  style="">  72                                                                                                                    </span>
<span class="5417399975767426553" onmouseenter="enter('5417399975767426553');" onmouseout="out('5417399975767426553');" style="">  73          authenticatePreference.setSummary(currentApp.getSimperium().getUser().getEmail());                        </span>
<span class="-3342250548665049241" onmouseenter="enter('-3342250548665049241');" onmouseout="out('-3342250548665049241');" style="">  74          if (simperium.needsAuthorization()) {                                                                     </span>
<span class="8210597588054659575" onmouseenter="enter('8210597588054659575');" onmouseout="out('8210597588054659575');" style="">  75              authenticatePreference.setTitle(R.string.log_in);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  76          } else {                                                                                                  </span>
<span class="8885574470684679352" onmouseenter="enter('8885574470684679352');" onmouseout="out('8885574470684679352');" style="">  77              authenticatePreference.setTitle(R.string.log_out);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78          }                                                                                                         </span>
<span  style="">  79                                                                                                                    </span>
<span class="-1521554305857532068" onmouseenter="enter('-1521554305857532068');" onmouseout="out('-1521554305857532068');" style="">  80          authenticatePreference.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  81              @Override                                                                                             </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style="">  82              public boolean onPreferenceClick(Preference preference) {                                             </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style="">  83                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  84                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85                  }                                                                                                 </span>
<span  style="">  86                                                                                                                    </span>
<span class="-6431499321301904544" onmouseenter="enter('-6431499321301904544');" onmouseout="out('-6431499321301904544');" style="">  87                  Simplenote currentApp = (Simplenote) getActivity().getApplication();                              </span>
<span class="-1805411858302537149" onmouseenter="enter('-1805411858302537149');" onmouseout="out('-1805411858302537149');" style="">  88                  if (currentApp.getSimperium().needsAuthorization()) {                                             </span>
<span class="-1894877037162085011" onmouseenter="enter('-1894877037162085011');" onmouseout="out('-1894877037162085011');" style="">  89                      Intent loginIntent = new Intent(getActivity(), SimplenoteAuthenticationActivity.class);       </span>
<span class="-1745782676004839840" onmouseenter="enter('-1745782676004839840');" onmouseout="out('-1745782676004839840');" style="">  90                      startActivityForResult(loginIntent, Simperium.SIGNUP_SIGNIN_REQUEST);                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  91                  } else {                                                                                          </span>
<span class="-1878844134905051149" onmouseenter="enter('-1878844134905051149');" onmouseout="out('-1878844134905051149');" style="">  92                      new LogOutTask(PreferencesFragment.this).execute();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93                  }                                                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  94                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  96          });                                                                                                       </span>
<span  style="">  97                                                                                                                    </span>
<span class="-3317947868564721602" onmouseenter="enter('-3317947868564721602');" onmouseout="out('-3317947868564721602');" style=""><abbr title="  98          findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {">  98          findPreference(&quot;pref_key_website&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener()🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  99              @Override                                                                                             </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 100              public boolean onPreferenceClick(Preference preference) {                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 101                  try {                                                                                             </span>
<span class="-1694196419231190477" onmouseenter="enter('-1694196419231190477');" onmouseout="out('-1694196419231190477');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 102 -                    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;http://simplenote.com&quot;)));            </span>
<span class="5515326037292150005" onmouseenter="enter('5515326037292150005');" onmouseout="out('5515326037292150005');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 103 +                    BrowserUtils.launchBrowserOrShowError(requireContext(), &quot;http://simplenote.com&quot;);             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 104                  } catch (Exception e) {                                                                           </span>
<span class="3734798154944032055" onmouseenter="enter('3734798154944032055');" onmouseout="out('3734798154944032055');" style=""> 105                      Toast.makeText(getActivity(), R.string.no_browser_available, Toast.LENGTH_LONG).show();       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106                  }                                                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 107                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 109          });                                                                                                       </span>
<span  style=""> 110                                                                                                                    </span>
<span class="7546915923491771618" onmouseenter="enter('7546915923491771618');" onmouseout="out('7546915923491771618');" style=""> 111          findPreference(&quot;pref_key_about&quot;).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {</span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 112              @Override                                                                                             </span>
<span class="5198697092730455099" onmouseenter="enter('5198697092730455099');" onmouseout="out('5198697092730455099');" style=""> 113              public boolean onPreferenceClick(Preference preference) {                                             </span>
<span class="8659998783220899939" onmouseenter="enter('8659998783220899939');" onmouseout="out('8659998783220899939');" style=""> 114                  startActivity(new Intent(getActivity(), AboutActivity.class));                                    </span>














<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 115                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 116              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 117          });                                                                                                       </span>
<span  style=""> 118                                                                                                                    </span>
<span class="-2051654600796868045" onmouseenter="enter('-2051654600796868045');" onmouseout="out('-2051654600796868045');" style=""> 119          final ListPreference themePreference = (ListPreference) findPreference(PrefUtils.PREF_THEME);             </span>
<span class="-3135129752727836774" onmouseenter="enter('-3135129752727836774');" onmouseout="out('-3135129752727836774');" style=""> 120          themePreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 121              @Override                                                                                             </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 122              public boolean onPreferenceChange(Preference preference, Object newValue) {                           </span>
<span class="8972235106908076260" onmouseenter="enter('8972235106908076260');" onmouseout="out('8972235106908076260');" style=""> 123                  updateTheme(requireActivity(), Integer.parseInt(newValue.toString()));                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 124                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125              }                                                                                                     </span>
<span  style=""> 126                                                                                                                    </span>
<span class="7597115961384302616" onmouseenter="enter('7597115961384302616');" onmouseout="out('7597115961384302616');" style=""> 127              private void updateTheme(Activity activity, int index) {                                              </span>
<span class="1607563076949848778" onmouseenter="enter('1607563076949848778');" onmouseout="out('1607563076949848778');" style=""> 128                  CharSequence[] entries = themePreference.getEntries();                                            </span>
<span class="1955249186347848341" onmouseenter="enter('1955249186347848341');" onmouseout="out('1955249186347848341');" style=""> 129                  themePreference.setSummary(entries[index]);                                                       </span>
<span  style=""> 130                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 131                  AnalyticsTracker.track(                                                                           </span>
<span class="-3633564244751131710" onmouseenter="enter('-3633564244751131710');" onmouseout="out('-3633564244751131710');" style=""> 132                          AnalyticsTracker.Stat.SETTINGS_THEME_UPDATED,                                             </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 133                          AnalyticsTracker.CATEGORY_USER,                                                           </span>
<span class="8810282947066680931" onmouseenter="enter('8810282947066680931');" onmouseout="out('8810282947066680931');" style=""> 134                          &quot;theme_preference&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 135                  );                                                                                                </span>
<span  style=""> 136                                                                                                                    </span>
<span class="-6345048933952298843" onmouseenter="enter('-6345048933952298843');" onmouseout="out('-6345048933952298843');" style=""> 137                  // recreate the activity so new theme is applied                                                  </span>
<span class="6106586807651914503" onmouseenter="enter('6106586807651914503');" onmouseout="out('6106586807651914503');" style=""> 138                  activity.recreate();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 140          });                                                                                                       </span>
<span  style=""> 141                                                                                                                    </span>
<span class="-3563544225355858599" onmouseenter="enter('-3563544225355858599');" onmouseout="out('-3563544225355858599');" style=""> 142          final ListPreference sortPreference = (ListPreference) findPreference(PrefUtils.PREF_SORT_ORDER);         </span>
<span class="-5125317966081854635" onmouseenter="enter('-5125317966081854635');" onmouseout="out('-5125317966081854635');" style=""> 143          sortPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 144              @Override                                                                                             </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 145              public boolean onPreferenceChange(Preference preference, Object newValue) {                           </span>
<span class="-8870833255101890428" onmouseenter="enter('-8870833255101890428');" onmouseout="out('-8870833255101890428');" style=""> 146                  int index = Integer.parseInt(newValue.toString());                                                </span>
<span class="4511877948668264185" onmouseenter="enter('4511877948668264185');" onmouseout="out('4511877948668264185');" style=""> 147                  CharSequence[] entries = sortPreference.getEntries();                                             </span>
<span class="-9141657533116186952" onmouseenter="enter('-9141657533116186952');" onmouseout="out('-9141657533116186952');" style=""> 148                  sortPreference.setSummary(entries[index]);                                                        </span>
<span  style=""> 149                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 150                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 152          });                                                                                                       </span>
<span  style=""> 153                                                                                                                    </span>
<span class="-2516209658609361373" onmouseenter="enter('-2516209658609361373');" onmouseout="out('-2516209658609361373');" style=""> 154          Preference versionPref = findPreference(&quot;pref_key_build&quot;);                                                </span>
<span class="2941715853984851229" onmouseenter="enter('2941715853984851229');" onmouseout="out('2941715853984851229');" style=""> 155          versionPref.setSummary(PrefUtils.versionInfo());                                                          </span>
<span  style=""> 156                                                                                                                    </span>
<span class="269389859234146346" onmouseenter="enter('269389859234146346');" onmouseout="out('269389859234146346');" style=""><abbr title=" 157          SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condensed_note_list&quot;);"> 157          SwitchPreferenceCompat switchPreference = (SwitchPreferenceCompat) findPreference(&quot;pref_key_condensed_note🔵</abbr></span>
<span class="731943818112030665" onmouseenter="enter('731943818112030665');" onmouseout="out('731943818112030665');" style=""> 158          switchPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 159              @Override                                                                                             </span>
<span class="8137396142185538827" onmouseenter="enter('8137396142185538827');" onmouseout="out('8137396142185538827');" style=""> 160              public boolean onPreferenceChange(Preference preference, Object o) {                                  </span>
<span class="2703036426639498311" onmouseenter="enter('2703036426639498311');" onmouseout="out('2703036426639498311');" style=""> 161                  if (((SwitchPreferenceCompat) preference).isChecked()) {                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 162                      AnalyticsTracker.track(                                                                       </span>
<span class="8127526149566412653" onmouseenter="enter('8127526149566412653');" onmouseout="out('8127526149566412653');" style=""> 163                              AnalyticsTracker.Stat.SETTINGS_LIST_CONDENSED_ENABLED,                                </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 164                              AnalyticsTracker.CATEGORY_USER,                                                       </span>
<span class="-7341164689664996576" onmouseenter="enter('-7341164689664996576');" onmouseout="out('-7341164689664996576');" style=""> 165                              &quot;condensed_list_preference&quot;                                                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 166                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167                  }                                                                                                 </span>
<span  style=""> 168                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 169                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 171          });                                                                                                       </span>
<span  style=""> 172                                                                                                                    </span>
<span class="-6021379672389812030" onmouseenter="enter('-6021379672389812030');" onmouseout="out('-6021379672389812030');" style=""> 173          // Add the hyperlink to the analytics summary                                                             </span>
<span class="-3803040130638154017" onmouseenter="enter('-3803040130638154017');" onmouseout="out('-3803040130638154017');" style=""> 174          Preference analyticsSummaryPreference = findPreference(&quot;pref_key_analytics_enabled_summary&quot;);             </span>
<span class="-5954923786447915621" onmouseenter="enter('-5954923786447915621');" onmouseout="out('-5954923786447915621');" style=""> 175          String formattedSummary = String.format(                                                                  </span>
<span class="4703350175896481792" onmouseenter="enter('4703350175896481792');" onmouseout="out('4703350175896481792');" style=""> 176                  getString(R.string.share_analytics_summary),                                                      </span>
<span class="4561110205824883354" onmouseenter="enter('4561110205824883354');" onmouseout="out('4561110205824883354');" style=""> 177                  &quot;&lt;a href=\&quot;https://automattic.com/cookies\&quot;&gt;&quot;,                                                    </span>
<span class="-5125567965545776439" onmouseenter="enter('-5125567965545776439');" onmouseout="out('-5125567965545776439');" style=""> 178                  &quot;&lt;/a&gt;&quot;                                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 179          );                                                                                                        </span>
<span class="3076824088033544263" onmouseenter="enter('3076824088033544263');" onmouseout="out('3076824088033544263');" style=""> 180          analyticsSummaryPreference.setSummary(HtmlCompat.fromHtml(formattedSummary));                             </span>
<span  style=""> 181                                                                                                                    </span>
<span class="2122402547097653030" onmouseenter="enter('2122402547097653030');" onmouseout="out('2122402547097653030');" style=""> 182          mAnalyticsSwitch = (SwitchPreferenceCompat)findPreference(&quot;pref_key_analytics_switch&quot;);                   </span>
<span class="5250772881921022799" onmouseenter="enter('5250772881921022799');" onmouseout="out('5250772881921022799');" style=""> 183          mAnalyticsSwitch.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 184              @Override                                                                                             </span>
<span class="97819570506773287" onmouseenter="enter('97819570506773287');" onmouseout="out('97819570506773287');" style=""> 185              public boolean onPreferenceChange(Preference preference, Object newValue) {                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 186                  try {                                                                                             </span>
<span class="7999271203428147057" onmouseenter="enter('7999271203428147057');" onmouseout="out('7999271203428147057');" style=""> 187                      boolean isChecked = (boolean)newValue;                                                        </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 188                      Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                           </span>
<span class="-3416644870449875468" onmouseenter="enter('-3416644870449875468');" onmouseout="out('-3416644870449875468');" style=""> 189                      prefs.setAnalyticsEnabled(isChecked);                                                         </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 190                      prefs.save();                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 191                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 192                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193                  }                                                                                                 </span>
<span  style=""> 194                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 195                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 197          });                                                                                                       </span>
<span  style=""> 198                                                                                                                    </span>
<span class="5339258651008713874" onmouseenter="enter('5339258651008713874');" onmouseout="out('5339258651008713874');" style=""> 199          updateAnalyticsSwitchState();                                                                             </span>


































































<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200      }                                                                                                             </span>
<span  style=""> 201                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 202      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 203      public void onPause() {                                                                                       </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 204          super.onPause();                                                                                          </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 205          mPreferencesBucket.stop();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206      }                                                                                                             </span>
<span  style=""> 207                                                                                                                    </span>
<span class="-8704268889922853518" onmouseenter="enter('-8704268889922853518');" onmouseout="out('-8704268889922853518');" style=""> 208      private DialogInterface.OnClickListener logOutClickListener = new DialogInterface.OnClickListener() {         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 209          @Override                                                                                                 </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 210          public void onClick(DialogInterface dialogInterface, int i) {                                             </span>
<span class="-2307534810381711346" onmouseenter="enter('-2307534810381711346');" onmouseout="out('-2307534810381711346');" style=""> 211              logOut();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 213      };                                                                                                            </span>
<span  style=""> 214                                                                                                                    </span>
<span class="-698083585503025487" onmouseenter="enter('-698083585503025487');" onmouseout="out('-698083585503025487');" style=""> 215      private DialogInterface.OnClickListener loadWebAppClickListener = new DialogInterface.OnClickListener() {     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 216          @Override                                                                                                 </span>
<span class="-1458917509530047809" onmouseenter="enter('-1458917509530047809');" onmouseout="out('-1458917509530047809');" style=""> 217          public void onClick(DialogInterface dialogInterface, int i) {                                             </span>
<span class="-4028427458665571821" onmouseenter="enter('-4028427458665571821');" onmouseout="out('-4028427458665571821');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 218 -            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(WEB_APP_URL)));                                </span>
<span class="-1376352079449399710" onmouseenter="enter('-1376352079449399710');" onmouseout="out('-1376352079449399710');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 219 +            BrowserUtils.launchBrowserOrShowError(requireContext(), WEB_APP_URL);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 221      };                                                                                                            </span>
<span  style=""> 222                                                                                                                    </span>
<span class="-2746710762323274178" onmouseenter="enter('-2746710762323274178');" onmouseout="out('-2746710762323274178');" style=""> 223      private boolean hasUnsyncedNotes() {                                                                          </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 224          Simplenote application = (Simplenote) getActivity().getApplication();                                     </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 225          Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                                  </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style=""> 226          Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                         </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style=""> 227          while (notesCursor.moveToNext()) {                                                                        </span>
<span class="-4488854658463042612" onmouseenter="enter('-4488854658463042612');" onmouseout="out('-4488854658463042612');" style=""> 228              Note note = notesCursor.getObject();                                                                  </span>
<span class="-8724002811605814194" onmouseenter="enter('-8724002811605814194');" onmouseout="out('-8724002811605814194');" style=""> 229              if (note.isNew() || note.isModified()) {                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 230                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232          }                                                                                                         </span>
<span  style=""> 233                                                                                                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 234          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235      }                                                                                                             </span>
<span  style=""> 236                                                                                                                    </span>
<span class="6766759746618176914" onmouseenter="enter('6766759746618176914');" onmouseout="out('6766759746618176914');" style=""> 237      private void logOut() {                                                                                       </span>
<span class="5105206001451632901" onmouseenter="enter('5105206001451632901');" onmouseout="out('5105206001451632901');" style=""> 238          Simplenote application = (Simplenote) getActivity().getApplication();                                     </span>
<span class="1492891761222902367" onmouseenter="enter('1492891761222902367');" onmouseout="out('1492891761222902367');" style=""> 239          application.getSimperium().deauthorizeUser();                                                             </span>
<span  style=""> 240                                                                                                                    </span>
<span class="7043558399093065986" onmouseenter="enter('7043558399093065986');" onmouseout="out('7043558399093065986');" style=""> 241          application.getNotesBucket().reset();                                                                     </span>
<span class="6239456552485319541" onmouseenter="enter('6239456552485319541');" onmouseout="out('6239456552485319541');" style=""> 242          application.getTagsBucket().reset();                                                                      </span>
<span class="8813783904792492357" onmouseenter="enter('8813783904792492357');" onmouseout="out('8813783904792492357');" style=""> 243          application.getPreferencesBucket().reset();                                                               </span>
<span  style=""> 244                                                                                                                    </span>
<span class="-2290183695292509841" onmouseenter="enter('-2290183695292509841');" onmouseout="out('-2290183695292509841');" style=""> 245          application.getNotesBucket().stop();                                                                      </span>
<span class="1881204346293915273" onmouseenter="enter('1881204346293915273');" onmouseout="out('1881204346293915273');" style=""> 246          application.getTagsBucket().stop();                                                                       </span>
<span class="4389321878217818521" onmouseenter="enter('4389321878217818521');" onmouseout="out('4389321878217818521');" style=""> 247          application.getPreferencesBucket().stop();                                                                </span>
<span  style=""> 248                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 249          AnalyticsTracker.track(                                                                                   </span>
<span class="1682841947070741936" onmouseenter="enter('1682841947070741936');" onmouseout="out('1682841947070741936');" style=""> 250                  AnalyticsTracker.Stat.USER_SIGNED_OUT,                                                            </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 251                  AnalyticsTracker.CATEGORY_USER,                                                                   </span>
<span class="4079591682198083249" onmouseenter="enter('4079591682198083249');" onmouseout="out('4079591682198083249');" style=""> 252                  &quot;preferences_sign_out_button&quot;                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 253          );                                                                                                        </span>
<span  style=""> 254                                                                                                                    </span>
<span class="-7624151188866077780" onmouseenter="enter('-7624151188866077780');" onmouseout="out('-7624151188866077780');" style=""> 255          // Resets analytics user back to &#x27;anon&#x27; type                                                              </span>
<span class="-8646882850309232593" onmouseenter="enter('-8646882850309232593');" onmouseout="out('-8646882850309232593');" style=""> 256          AnalyticsTracker.refreshMetadata(null);                                                                   </span>
<span class="7088142554023647232" onmouseenter="enter('7088142554023647232');" onmouseout="out('7088142554023647232');" style=""> 257          CrashUtils.clearCurrentUser();                                                                            </span>
<span  style=""> 258                                                                                                                    </span>
<span class="2045801939261456210" onmouseenter="enter('2045801939261456210');" onmouseout="out('2045801939261456210');" style=""> 259          // Remove wp.com token                                                                                    </span>
<span class="6759455075429047207" onmouseenter="enter('6759455075429047207');" onmouseout="out('6759455075429047207');" style=""> 260          SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getActivity()).edit();    </span>
<span class="3747765183142081866" onmouseenter="enter('3747765183142081866');" onmouseout="out('3747765183142081866');" style=""> 261          editor.remove(PrefUtils.PREF_WP_TOKEN);                                                                   </span>
<span  style=""> 262                                                                                                                    </span>
<span class="-3120932776057048446" onmouseenter="enter('-3120932776057048446');" onmouseout="out('-3120932776057048446');" style=""> 263          // Remove WordPress sites                                                                                 </span>
<span class="-7780340906700244594" onmouseenter="enter('-7780340906700244594');" onmouseout="out('-7780340906700244594');" style=""> 264          editor.remove(PrefUtils.PREF_WORDPRESS_SITES);                                                            </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 265          editor.apply();                                                                                           </span>
<span  style=""> 266                                                                                                                    </span>
<span class="4563224411068398132" onmouseenter="enter('4563224411068398132');" onmouseout="out('4563224411068398132');" style=""> 267          // Remove Passcode Lock password                                                                          </span>
<span class="400057636120928336" onmouseenter="enter('400057636120928336');" onmouseout="out('400057636120928336');" style=""> 268          AppLockManager.getInstance().getAppLock().setPassword(&quot;&quot;);                                                </span>
<span  style=""> 269                                                                                                                    </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 270          WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                                 </span>
<span  style=""> 271                                                                                                                    </span>
<span class="2776709281245151825" onmouseenter="enter('2776709281245151825');" onmouseout="out('2776709281245151825');" style=""> 272          getActivity().finish();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273      }                                                                                                             </span>
<span  style=""> 274                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 275      @Override                                                                                                     </span>
<span class="-5342682213111723277" onmouseenter="enter('-5342682213111723277');" onmouseout="out('-5342682213111723277');" style=""> 276      public void onUserStatusChange(User.Status status) {                                                          </span>
<span class="3969702543635342042" onmouseenter="enter('3969702543635342042');" onmouseout="out('3969702543635342042');" style=""> 277          if (isAdded() &amp;&amp; status == User.Status.AUTHORIZED) {                                                      </span>
<span class="4458767919757787183" onmouseenter="enter('4458767919757787183');" onmouseout="out('4458767919757787183');" style=""> 278              // User signed in                                                                                     </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style=""> 279              getActivity().runOnUiThread(new Runnable() {                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 280                  public void run() {                                                                               </span>
<span class="-8173513807933783092" onmouseenter="enter('-8173513807933783092');" onmouseout="out('-8173513807933783092');" style=""> 281                      Preference authenticatePreference = findPreference(&quot;pref_key_authenticate&quot;);                  </span>
<span class="8885574470684679352" onmouseenter="enter('8885574470684679352');" onmouseout="out('8885574470684679352');" style=""> 282                      authenticatePreference.setTitle(R.string.log_out);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 284              });                                                                                                   </span>
<span  style=""> 285                                                                                                                    </span>
<span class="1736644716831373310" onmouseenter="enter('1736644716831373310');" onmouseout="out('1736644716831373310');" style=""> 286              Simplenote app = (Simplenote) getActivity().getApplication();                                         </span>
<span class="6176818654817156375" onmouseenter="enter('6176818654817156375');" onmouseout="out('6176818654817156375');" style=""> 287              AnalyticsTracker.refreshMetadata(app.getSimperium().getUser().getEmail());                            </span>
<span class="-5091612656435705492" onmouseenter="enter('-5091612656435705492');" onmouseout="out('-5091612656435705492');" style=""> 288              CrashUtils.setCurrentUser(app.getSimperium().getUser());                                              </span>
<span  style=""> 289                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 290              AnalyticsTracker.track(                                                                               </span>
<span class="-2120239274310567773" onmouseenter="enter('-2120239274310567773');" onmouseout="out('-2120239274310567773');" style=""> 291                      AnalyticsTracker.Stat.USER_SIGNED_IN,                                                         </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 292                      AnalyticsTracker.CATEGORY_USER,                                                               </span>
<span class="-1887876783048589275" onmouseenter="enter('-1887876783048589275');" onmouseout="out('-1887876783048589275');" style=""> 293                      &quot;signed_in_from_preferences_activity&quot;                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 294              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296      }                                                                                                             </span>
<span  style=""> 297                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 298      @Override                                                                                                     </span>
<span class="5984220864459059356" onmouseenter="enter('5984220864459059356');" onmouseout="out('5984220864459059356');" style=""> 299      public void onUserCreated(User user) {                                                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 300          AnalyticsTracker.track(                                                                                   </span>
<span class="173757116163891806" onmouseenter="enter('173757116163891806');" onmouseout="out('173757116163891806');" style=""> 301                  AnalyticsTracker.Stat.USER_ACCOUNT_CREATED,                                                       </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 302                  AnalyticsTracker.CATEGORY_USER,                                                                   </span>
<span class="3712512237873507570" onmouseenter="enter('3712512237873507570');" onmouseout="out('3712512237873507570');" style=""> 303                  &quot;account_created_from_preferences_activity&quot;                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 304          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305      }                                                                                                             </span>
<span  style=""> 306                                                                                                                    </span>
<span class="5598091284936706499" onmouseenter="enter('5598091284936706499');" onmouseout="out('5598091284936706499');" style=""> 307      private void updateAnalyticsSwitchState() {                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 308          try {                                                                                                     </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 309              Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                                   </span>
<span class="2776107362356981254" onmouseenter="enter('2776107362356981254');" onmouseout="out('2776107362356981254');" style=""> 310              mAnalyticsSwitch.setChecked(prefs.getAnalyticsEnabled());                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 311          } catch (BucketObjectMissingException e) {                                                                </span>
<span class="2124131716277693204" onmouseenter="enter('2124131716277693204');" onmouseout="out('2124131716277693204');" style=""> 312              // The preferences object doesn&#x27;t exist for this user yet, create it                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 313              try {                                                                                                 </span>
<span class="8863892184482182459" onmouseenter="enter('8863892184482182459');" onmouseout="out('8863892184482182459');" style=""> 314                  Preferences prefs = mPreferencesBucket.newObject(PREFERENCES_OBJECT_KEY);                         </span>
<span class="-3725197847428303949" onmouseenter="enter('-3725197847428303949');" onmouseout="out('-3725197847428303949');" style=""> 315                  prefs.setAnalyticsEnabled(true);                                                                  </span>
<span class="-2629122329284588175" onmouseenter="enter('-2629122329284588175');" onmouseout="out('-2629122329284588175');" style=""> 316                  prefs.save();                                                                                     </span>
<span class="-1061155454955510578" onmouseenter="enter('-1061155454955510578');" onmouseout="out('-1061155454955510578');" style=""> 317              } catch (BucketObjectNameInvalid bucketObjectNameInvalid) {                                           </span>
<span class="1883933860530627988" onmouseenter="enter('1883933860530627988');" onmouseout="out('1883933860530627988');" style=""> 318                  bucketObjectNameInvalid.printStackTrace();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 319              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321      }                                                                                                             </span>
<span  style=""> 322                                                                                                                    </span>
<span class="6003914412447352798" onmouseenter="enter('6003914412447352798');" onmouseout="out('6003914412447352798');" style=""> 323      private static class LogOutTask extends AsyncTask&lt;Void, Void, Boolean&gt; {                                      </span>
<span class="-8626644697686121306" onmouseenter="enter('-8626644697686121306');" onmouseout="out('-8626644697686121306');" style=""> 324          private WeakReference&lt;PreferencesFragment&gt; mPreferencesFragmentReference;                                 </span>
<span  style=""> 325                                                                                                                    </span>
<span class="556201937984791944" onmouseenter="enter('556201937984791944');" onmouseout="out('556201937984791944');" style=""> 326          LogOutTask(PreferencesFragment fragment) {                                                                </span>
<span class="-8947237769278526855" onmouseenter="enter('-8947237769278526855');" onmouseout="out('-8947237769278526855');" style=""> 327              mPreferencesFragmentReference = new WeakReference&lt;&gt;(fragment);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328          }                                                                                                         </span>
<span  style=""> 329                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 330          @Override                                                                                                 </span>
<span class="6715077551046087572" onmouseenter="enter('6715077551046087572');" onmouseout="out('6715077551046087572');" style=""> 331          protected Boolean doInBackground(Void... voids) {                                                         </span>
<span class="1614077137004075676" onmouseenter="enter('1614077137004075676');" onmouseout="out('1614077137004075676');" style=""> 332              PreferencesFragment fragment = mPreferencesFragmentReference.get();                                   </span>
<span class="6685718295711545449" onmouseenter="enter('6685718295711545449');" onmouseout="out('6685718295711545449');" style=""> 333              return fragment == null || fragment.hasUnsyncedNotes();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334          }                                                                                                         </span>
<span  style=""> 335                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 336          @Override                                                                                                 </span>
<span class="-6776128592848448095" onmouseenter="enter('-6776128592848448095');" onmouseout="out('-6776128592848448095');" style=""> 337          protected void onPostExecute(Boolean hasUnsyncedNotes) {                                                  </span>
<span class="1614077137004075676" onmouseenter="enter('1614077137004075676');" onmouseout="out('1614077137004075676');" style=""> 338              PreferencesFragment fragment = mPreferencesFragmentReference.get();                                   </span>
<span  style=""> 339                                                                                                                    </span>
<span class="871842557913824847" onmouseenter="enter('871842557913824847');" onmouseout="out('871842557913824847');" style=""> 340              if (fragment == null) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 341                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 342              }                                                                                                     </span>
<span  style=""> 343                                                                                                                    </span>
<span class="-4113446021503535506" onmouseenter="enter('-4113446021503535506');" onmouseout="out('-4113446021503535506');" style=""> 344              // Safety first! Check if any notes are unsynced and warn the user if so.                             </span>
<span class="-5077436549454521569" onmouseenter="enter('-5077436549454521569');" onmouseout="out('-5077436549454521569');" style=""> 345              if (hasUnsyncedNotes) {                                                                               </span>
<span class="3542977983821060447" onmouseenter="enter('3542977983821060447');" onmouseout="out('3542977983821060447');" style=""> 346                  new AlertDialog.Builder(new ContextThemeWrapper(fragment.requireContext(), R.style.Dialog))       </span>
<span class="-3694903935099593007" onmouseenter="enter('-3694903935099593007');" onmouseout="out('-3694903935099593007');" style=""> 347                          .setTitle(R.string.unsynced_notes)                                                        </span>
<span class="8004583072247328964" onmouseenter="enter('8004583072247328964');" onmouseout="out('8004583072247328964');" style=""> 348                          .setMessage(R.string.unsynced_notes_message)                                              </span>
<span class="2427359236939967623" onmouseenter="enter('2427359236939967623');" onmouseout="out('2427359236939967623');" style=""> 349                          .setPositiveButton(R.string.delete_notes, fragment.logOutClickListener)                   </span>
<span class="7005110418642332587" onmouseenter="enter('7005110418642332587');" onmouseout="out('7005110418642332587');" style=""> 350                          .setNeutralButton(R.string.visit_web_app, fragment.loadWebAppClickListener)               </span>
<span class="-1520918194926717469" onmouseenter="enter('-1520918194926717469');" onmouseout="out('-1520918194926717469');" style=""> 351                          .setNegativeButton(R.string.cancel, null)                                                 </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style=""> 352                          .show();                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 353              } else {                                                                                              </span>
<span class="-2448080142593331977" onmouseenter="enter('-2448080142593331977');" onmouseout="out('-2448080142593331977');" style=""> 354                  fragment.logOut();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 355              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            